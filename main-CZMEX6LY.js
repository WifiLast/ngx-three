import{a as ve,b as pi,c as Tw,e as c4,g as gi}from"./chunk-MON7YFGF.js";function CI(n,e){return Object.is(n,e)}var rr=null,$f=!1,ib=1,es=Symbol("SIGNAL");function bi(n){let e=rr;return rr=n,e}function l4(){return $f}var Xf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function rb(n){if($f)throw new Error("");if(rr===null)return;rr.consumerOnSignalRead(n);let e=rr.nextProducerIndex++;if(_u(rr),e<rr.producerNode.length&&rr.producerNode[e]!==n&&qf(rr)){let i=rr.producerNode[e];cb(i,rr.producerIndexOfThis[e])}rr.producerNode[e]!==n&&(rr.producerNode[e]=n,rr.producerIndexOfThis[e]=qf(rr)?PI(n,rr,e):0),rr.producerLastReadVersion[e]=n.version}function d4(){ib++}function EI(n){if(!(qf(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ib)){if(!n.producerMustRecompute(n)&&!ab(n)){n.dirty=!1,n.lastCleanEpoch=ib;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=ib}}function DI(n){if(n.liveConsumerNode===void 0)return;let e=$f;$f=!0;try{for(let i of n.liveConsumerNode)i.dirty||II(i)}finally{$f=e}}function AI(){return rr?.consumerAllowSignalWrites!==!1}function II(n){n.dirty=!0,DI(n),n.consumerMarkedDirty?.(n)}function ob(n){return n&&(n.nextProducerIndex=0),bi(n)}function sb(n,e){if(bi(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(qf(n))for(let i=n.nextProducerIndex;i<n.producerNode.length;i++)cb(n.producerNode[i],n.producerIndexOfThis[i]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function ab(n){_u(n);for(let e=0;e<n.producerNode.length;e++){let i=n.producerNode[e],t=n.producerLastReadVersion[e];if(t!==i.version||(EI(i),t!==i.version))return!0}return!1}function Aw(n){if(_u(n),qf(n))for(let e=0;e<n.producerNode.length;e++)cb(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function PI(n,e,i){if(kI(n),_u(n),n.liveConsumerNode.length===0)for(let t=0;t<n.producerNode.length;t++)n.producerIndexOfThis[t]=PI(n.producerNode[t],n,t);return n.liveConsumerIndexOfThis.push(i),n.liveConsumerNode.push(e)-1}function cb(n,e){if(kI(n),_u(n),n.liveConsumerNode.length===1)for(let t=0;t<n.producerNode.length;t++)cb(n.producerNode[t],n.producerIndexOfThis[t]);let i=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[i],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[i],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let t=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];_u(r),r.producerIndexOfThis[t]=e}}function qf(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function _u(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function kI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function FI(n){let e=Object.create(u4);e.computation=n;let i=()=>{if(EI(e),rb(e),e.value===nb)throw e.error;return e.value};return i[es]=e,i}var Cw=Symbol("UNSET"),Ew=Symbol("COMPUTING"),nb=Symbol("ERRORED"),u4=pi(ve({},Xf),{value:Cw,dirty:!0,error:null,equal:CI,producerMustRecompute(n){return n.value===Cw||n.value===Ew},producerRecomputeValue(n){if(n.value===Ew)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Ew;let i=ob(n),t;try{t=n.computation()}catch(r){t=nb,n.error=r}finally{sb(n,i)}if(e!==Cw&&e!==nb&&t!==nb&&n.equal(e,t)){n.value=e;return}n.value=t,n.version++}});function h4(){throw new Error}var jI=h4;function OI(){jI()}function NI(n){jI=n}var f4=null;function LI(n){let e=Object.create(Iw);e.value=n;let i=()=>(rb(e),e.value);return i[es]=e,i}function lb(n,e){AI()||OI(),n.equal(n.value,e)||(n.value=e,m4(n))}function BI(n,e){AI()||OI(),lb(n,e(n.value))}var Iw=pi(ve({},Xf),{equal:CI,value:void 0});function m4(n){n.version++,d4(),DI(n),f4?.()}function UI(n,e,i){let t=Object.create(p4);i&&(t.consumerAllowSignalWrites=!0),t.fn=n,t.schedule=e;let r=c=>{t.cleanupFn=c};function o(c){return c.fn===null&&c.schedule===null}function s(c){o(c)||(Aw(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=Dw)}let a=()=>{if(t.fn===null)return;if(l4())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(t.dirty=!1,t.hasRun&&!ab(t))return;t.hasRun=!0;let c=ob(t);try{t.cleanupFn(),t.cleanupFn=Dw,t.fn(r)}finally{sb(t,c)}};return t.ref={notify:()=>II(t),run:a,cleanup:()=>t.cleanupFn(),destroy:()=>s(t),[es]:t},t.ref}var Dw=()=>{},p4=pi(ve({},Xf),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:Dw});function Rt(n){return typeof n=="function"}function vu(n){let i=n(t=>{Error.call(t),t.stack=new Error().stack});return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}var db=vu(n=>function(i){n(this),this.message=i?`${i.length} errors occurred during unsubscription:
${i.map((t,r)=>`${r+1}) ${t.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=i});function jl(n,e){if(n){let i=n.indexOf(e);0<=i&&n.splice(i,1)}}var _i=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:i}=this;if(i)if(this._parentage=null,Array.isArray(i))for(let o of i)o.remove(this);else i.remove(this);let{initialTeardown:t}=this;if(Rt(t))try{t()}catch(o){e=o instanceof db?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{VI(o)}catch(s){e=e??[],s instanceof db?e=[...e,...s.errors]:e.push(s)}}if(e)throw new db(e)}}add(e){var i;if(e&&e!==this)if(this.closed)VI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(i=this._finalizers)!==null&&i!==void 0?i:[]).push(e)}}_hasParent(e){let{_parentage:i}=this;return i===e||Array.isArray(i)&&i.includes(e)}_addParent(e){let{_parentage:i}=this;this._parentage=Array.isArray(i)?(i.push(e),i):i?[i,e]:e}_removeParent(e){let{_parentage:i}=this;i===e?this._parentage=null:Array.isArray(i)&&jl(i,e)}remove(e){let{_finalizers:i}=this;i&&jl(i,e),e instanceof n&&e._removeParent(this)}};_i.EMPTY=(()=>{let n=new _i;return n.closed=!0,n})();var Pw=_i.EMPTY;function ub(n){return n instanceof _i||n&&"closed"in n&&Rt(n.remove)&&Rt(n.add)&&Rt(n.unsubscribe)}function VI(n){Rt(n)?n():n.unsubscribe()}var ts={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var yu={setTimeout(n,e,...i){let{delegate:t}=yu;return t?.setTimeout?t.setTimeout(n,e,...i):setTimeout(n,e,...i)},clearTimeout(n){let{delegate:e}=yu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function hb(n){yu.setTimeout(()=>{let{onUnhandledError:e}=ts;if(e)e(n);else throw n})}function Yf(){}var zI=kw("C",void 0,void 0);function HI(n){return kw("E",void 0,n)}function GI(n){return kw("N",n,void 0)}function kw(n,e,i){return{kind:n,value:e,error:i}}var Ol=null;function xu(n){if(ts.useDeprecatedSynchronousErrorHandling){let e=!Ol;if(e&&(Ol={errorThrown:!1,error:null}),n(),e){let{errorThrown:i,error:t}=Ol;if(Ol=null,i)throw t}}else n()}function WI(n){ts.useDeprecatedSynchronousErrorHandling&&Ol&&(Ol.errorThrown=!0,Ol.error=n)}var Nl=class extends _i{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ub(e)&&e.add(this)):this.destination=_4}static create(e,i,t){return new is(e,i,t)}next(e){this.isStopped?jw(GI(e),this):this._next(e)}error(e){this.isStopped?jw(HI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?jw(zI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},g4=Function.prototype.bind;function Fw(n,e){return g4.call(n,e)}var Ow=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:i}=this;if(i.next)try{i.next(e)}catch(t){fb(t)}}error(e){let{partialObserver:i}=this;if(i.error)try{i.error(e)}catch(t){fb(t)}else fb(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(i){fb(i)}}},is=class extends Nl{constructor(e,i,t){super();let r;if(Rt(e)||!e)r={next:e??void 0,error:i??void 0,complete:t??void 0};else{let o;this&&ts.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Fw(e.next,o),error:e.error&&Fw(e.error,o),complete:e.complete&&Fw(e.complete,o)}):r=e}this.destination=new Ow(r)}};function fb(n){ts.useDeprecatedSynchronousErrorHandling?WI(n):hb(n)}function b4(n){throw n}function jw(n,e){let{onStoppedNotification:i}=ts;i&&yu.setTimeout(()=>i(n,e))}var _4={closed:!0,next:Yf,error:b4,complete:Yf};var wu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Or(n){return n}function Nw(...n){return Lw(n)}function Lw(n){return n.length===0?Or:n.length===1?n[0]:function(i){return n.reduce((t,r)=>r(t),i)}}var Lt=(()=>{class n{constructor(i){i&&(this._subscribe=i)}lift(i){let t=new n;return t.source=this,t.operator=i,t}subscribe(i,t,r){let o=y4(i)?i:new is(i,t,r);return xu(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(i){try{return this._subscribe(i)}catch(t){i.error(t)}}forEach(i,t){return t=$I(t),new t((r,o)=>{let s=new is({next:a=>{try{i(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(i){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(i)}[wu](){return this}pipe(...i){return Lw(i)(this)}toPromise(i){return i=$I(i),new i((t,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>t(o))})}}return n.create=e=>new n(e),n})();function $I(n){var e;return(e=n??ts.Promise)!==null&&e!==void 0?e:Promise}function v4(n){return n&&Rt(n.next)&&Rt(n.error)&&Rt(n.complete)}function y4(n){return n&&n instanceof Nl||v4(n)&&ub(n)}function Bw(n){return Rt(n?.lift)}function Kt(n){return e=>{if(Bw(e))return e.lift(function(i){try{return n(i,this)}catch(t){this.error(t)}});throw new TypeError("Unable to lift unknown Observable type")}}function Yt(n,e,i,t,r){return new Uw(n,e,i,t,r)}var Uw=class extends Nl{constructor(e,i,t,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=i?function(a){try{i(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=t?function(){try{t()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:i}=this;super.unsubscribe(),!i&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Mu(){return Kt((n,e)=>{let i=null;n._refCount++;let t=Yt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){i=null;return}let r=n._connection,o=i;i=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(t),t.closed||(i=n.connect())})}var Su=class extends Lt{constructor(e,i){super(),this.source=e,this.subjectFactory=i,this._subject=null,this._refCount=0,this._connection=null,Bw(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new _i;let i=this.getSubject();e.add(this.source.subscribe(Yt(i,void 0,()=>{this._teardown(),i.complete()},t=>{this._teardown(),i.error(t)},()=>this._teardown()))),e.closed&&(this._connection=null,e=_i.EMPTY)}return e}refCount(){return Mu()(this)}};var qI=vu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var gt=(()=>{class n extends Lt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(i){let t=new mb(this,this);return t.operator=i,t}_throwIfClosed(){if(this.closed)throw new qI}next(i){xu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let t of this.currentObservers)t.next(i)}})}error(i){xu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=i;let{observers:t}=this;for(;t.length;)t.shift().error(i)}})}complete(){xu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:i}=this;for(;i.length;)i.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var i;return((i=this.observers)===null||i===void 0?void 0:i.length)>0}_trySubscribe(i){return this._throwIfClosed(),super._trySubscribe(i)}_subscribe(i){return this._throwIfClosed(),this._checkFinalizedStatuses(i),this._innerSubscribe(i)}_innerSubscribe(i){let{hasError:t,isStopped:r,observers:o}=this;return t||r?Pw:(this.currentObservers=null,o.push(i),new _i(()=>{this.currentObservers=null,jl(o,i)}))}_checkFinalizedStatuses(i){let{hasError:t,thrownError:r,isStopped:o}=this;t?i.error(r):o&&i.complete()}asObservable(){let i=new Lt;return i.source=this,i}}return n.create=(e,i)=>new mb(e,i),n})(),mb=class extends gt{constructor(e,i){super(),this.destination=e,this.source=i}next(e){var i,t;(t=(i=this.destination)===null||i===void 0?void 0:i.next)===null||t===void 0||t.call(i,e)}error(e){var i,t;(t=(i=this.destination)===null||i===void 0?void 0:i.error)===null||t===void 0||t.call(i,e)}complete(){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||i===void 0||i.call(e)}_subscribe(e){var i,t;return(t=(i=this.source)===null||i===void 0?void 0:i.subscribe(e))!==null&&t!==void 0?t:Pw}};var Mn=class extends gt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let i=super._subscribe(e);return!i.closed&&e.next(this._value),i}getValue(){let{hasError:e,thrownError:i,_value:t}=this;if(e)throw i;return this._throwIfClosed(),t}next(e){super.next(this._value=e)}};var Zf={now(){return(Zf.delegate||Date).now()},delegate:void 0};var Ll=class extends gt{constructor(e=1/0,i=1/0,t=Zf){super(),this._bufferSize=e,this._windowTime=i,this._timestampProvider=t,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=i===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,i)}next(e){let{isStopped:i,_buffer:t,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;i||(t.push(e),!r&&t.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let i=this._innerSubscribe(e),{_infiniteTimeWindow:t,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=t?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),i}_trimBuffer(){let{_bufferSize:e,_timestampProvider:i,_buffer:t,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<t.length&&t.splice(0,t.length-o),!r){let s=i.now(),a=0;for(let c=1;c<t.length&&t[c]<=s;c+=2)a=c;a&&t.splice(0,a+1)}}};var pb=class extends _i{constructor(e,i){super()}schedule(e,i=0){return this}};var Qf={setInterval(n,e,...i){let{delegate:t}=Qf;return t?.setInterval?t.setInterval(n,e,...i):setInterval(n,e,...i)},clearInterval(n){let{delegate:e}=Qf;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var gb=class extends pb{constructor(e,i){super(e,i),this.scheduler=e,this.work=i,this.pending=!1}schedule(e,i=0){var t;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,i)),this.pending=!0,this.delay=i,this.id=(t=this.id)!==null&&t!==void 0?t:this.requestAsyncId(o,this.id,i),this}requestAsyncId(e,i,t=0){return Qf.setInterval(e.flush.bind(e,this),t)}recycleAsyncId(e,i,t=0){if(t!=null&&this.delay===t&&this.pending===!1)return i;i!=null&&Qf.clearInterval(i)}execute(e,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let t=this._execute(e,i);if(t)return t;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,i){let t=!1,r;try{this.work(e)}catch(o){t=!0,r=o||new Error("Scheduled action threw falsy error")}if(t)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:i}=this,{actions:t}=i;this.work=this.state=this.scheduler=null,this.pending=!1,jl(t,this),e!=null&&(this.id=this.recycleAsyncId(i,e,null)),this.delay=null,super.unsubscribe()}}};var Ru=class n{constructor(e,i=n.now){this.schedulerActionCtor=e,this.now=i}schedule(e,i=0,t){return new this.schedulerActionCtor(this,e).schedule(t,i)}};Ru.now=Zf.now;var bb=class extends Ru{constructor(e,i=Ru.now){super(e,i),this.actions=[],this._active=!1}flush(e){let{actions:i}=this;if(this._active){i.push(e);return}let t;this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=i.shift());if(this._active=!1,t){for(;e=i.shift();)e.unsubscribe();throw t}}};var Kf=new bb(gb),XI=Kf;var fn=new Lt(n=>n.complete());function _b(n){return n&&Rt(n.schedule)}function Vw(n){return n[n.length-1]}function vb(n){return Rt(Vw(n))?n.pop():void 0}function Ps(n){return _b(Vw(n))?n.pop():void 0}function YI(n,e){return typeof Vw(n)=="number"?n.pop():e}function QI(n,e,i,t){function r(o){return o instanceof i?o:new i(function(s){s(o)})}return new(i||(i=Promise))(function(o,s){function a(d){try{l(t.next(d))}catch(u){s(u)}}function c(d){try{l(t.throw(d))}catch(u){s(u)}}function l(d){d.done?o(d.value):r(d.value).then(a,c)}l((t=t.apply(n,e||[])).next())})}function ZI(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],t=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bl(n){return this instanceof Bl?(this.v=n,this):new Bl(n)}function KI(n,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i.apply(n,e||[]),r,o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(h){t[h]&&(r[h]=function(f){return new Promise(function(p,b){o.push([h,f,p,b])>1||a(h,f)})})}function a(h,f){try{c(t[h](f))}catch(p){u(o[0][3],p)}}function c(h){h.value instanceof Bl?Promise.resolve(h.value.v).then(l,d):u(o[0][2],h)}function l(h){a("next",h)}function d(h){a("throw",h)}function u(h,f){h(f),o.shift(),o.length&&a(o[0][0],o[0][1])}}function JI(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],i;return e?e.call(n):(n=typeof ZI=="function"?ZI(n):n[Symbol.iterator](),i={},t("next"),t("throw"),t("return"),i[Symbol.asyncIterator]=function(){return this},i);function t(o){i[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),r(a,c,s.done,s.value)})}}function r(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Tu=n=>n&&typeof n.length=="number"&&typeof n!="function";function yb(n){return Rt(n?.then)}function xb(n){return Rt(n[wu])}function wb(n){return Symbol.asyncIterator&&Rt(n?.[Symbol.asyncIterator])}function Mb(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function x4(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Sb=x4();function Rb(n){return Rt(n?.[Sb])}function Tb(n){return KI(this,arguments,function*(){let i=n.getReader();try{for(;;){let{value:t,done:r}=yield Bl(i.read());if(r)return yield Bl(void 0);yield yield Bl(t)}}finally{i.releaseLock()}})}function Cb(n){return Rt(n?.getReader)}function Ni(n){if(n instanceof Lt)return n;if(n!=null){if(xb(n))return w4(n);if(Tu(n))return M4(n);if(yb(n))return S4(n);if(wb(n))return eP(n);if(Rb(n))return R4(n);if(Cb(n))return T4(n)}throw Mb(n)}function w4(n){return new Lt(e=>{let i=n[wu]();if(Rt(i.subscribe))return i.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function M4(n){return new Lt(e=>{for(let i=0;i<n.length&&!e.closed;i++)e.next(n[i]);e.complete()})}function S4(n){return new Lt(e=>{n.then(i=>{e.closed||(e.next(i),e.complete())},i=>e.error(i)).then(null,hb)})}function R4(n){return new Lt(e=>{for(let i of n)if(e.next(i),e.closed)return;e.complete()})}function eP(n){return new Lt(e=>{C4(n,e).catch(i=>e.error(i))})}function T4(n){return eP(Tb(n))}function C4(n,e){var i,t,r,o;return QI(this,void 0,void 0,function*(){try{for(i=JI(n);t=yield i.next(),!t.done;){let s=t.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{t&&!t.done&&(o=i.return)&&(yield o.call(i))}finally{if(r)throw r.error}}e.complete()})}function Qr(n,e,i,t=0,r=!1){let o=e.schedule(function(){i(),r?n.add(this.schedule(null,t)):this.unsubscribe()},t);if(n.add(o),!r)return o}function Eb(n,e=0){return Kt((i,t)=>{i.subscribe(Yt(t,r=>Qr(t,n,()=>t.next(r),e),()=>Qr(t,n,()=>t.complete(),e),r=>Qr(t,n,()=>t.error(r),e)))})}function Db(n,e=0){return Kt((i,t)=>{t.add(n.schedule(()=>i.subscribe(t),e))})}function tP(n,e){return Ni(n).pipe(Db(e),Eb(e))}function iP(n,e){return Ni(n).pipe(Db(e),Eb(e))}function nP(n,e){return new Lt(i=>{let t=0;return e.schedule(function(){t===n.length?i.complete():(i.next(n[t++]),i.closed||this.schedule())})})}function rP(n,e){return new Lt(i=>{let t;return Qr(i,e,()=>{t=n[Sb](),Qr(i,e,()=>{let r,o;try{({value:r,done:o}=t.next())}catch(s){i.error(s);return}o?i.complete():i.next(r)},0,!0)}),()=>Rt(t?.return)&&t.return()})}function Ab(n,e){if(!n)throw new Error("Iterable cannot be null");return new Lt(i=>{Qr(i,e,()=>{let t=n[Symbol.asyncIterator]();Qr(i,e,()=>{t.next().then(r=>{r.done?i.complete():i.next(r.value)})},0,!0)})})}function oP(n,e){return Ab(Tb(n),e)}function sP(n,e){if(n!=null){if(xb(n))return tP(n,e);if(Tu(n))return nP(n,e);if(yb(n))return iP(n,e);if(wb(n))return Ab(n,e);if(Rb(n))return rP(n,e);if(Cb(n))return oP(n,e)}throw Mb(n)}function ki(n,e){return e?sP(n,e):Ni(n)}function pt(...n){let e=Ps(n);return ki(n,e)}function Kr(n,e){let i=Rt(n)?n:()=>n,t=r=>r.error(i());return new Lt(e?r=>e.schedule(t,0,r):t)}function Ib(n){return!!n&&(n instanceof Lt||Rt(n.lift)&&Rt(n.subscribe))}var ns=vu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function zw(n,e){let i=typeof e=="object";return new Promise((t,r)=>{let o=new is({next:s=>{t(s),o.unsubscribe()},error:r,complete:()=>{i?t(e.defaultValue):r(new ns)}});n.subscribe(o)})}function aP(n){return n instanceof Date&&!isNaN(n)}function lt(n,e){return Kt((i,t)=>{let r=0;i.subscribe(Yt(t,o=>{t.next(n.call(e,o,r++))}))})}var{isArray:E4}=Array;function D4(n,e){return E4(e)?n(...e):n(e)}function Cu(n){return lt(e=>D4(n,e))}var{isArray:A4}=Array,{getPrototypeOf:I4,prototype:P4,keys:k4}=Object;function Pb(n){if(n.length===1){let e=n[0];if(A4(e))return{args:e,keys:null};if(F4(e)){let i=k4(e);return{args:i.map(t=>e[t]),keys:i}}}return{args:n,keys:null}}function F4(n){return n&&typeof n=="object"&&I4(n)===P4}function kb(n,e){return n.reduce((i,t,r)=>(i[t]=e[r],i),{})}function Ul(...n){let e=Ps(n),i=vb(n),{args:t,keys:r}=Pb(n);if(t.length===0)return ki([],e);let o=new Lt(j4(t,e,r?s=>kb(r,s):Or));return i?o.pipe(Cu(i)):o}function j4(n,e,i=Or){return t=>{cP(e,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let c=0;c<r;c++)cP(e,()=>{let l=ki(n[c],e),d=!1;l.subscribe(Yt(t,u=>{o[c]=u,d||(d=!0,a--),a||t.next(i(o.slice()))},()=>{--s||t.complete()}))},t)},t)}}function cP(n,e,i){n?Qr(i,n,e):e()}function lP(n,e,i,t,r,o,s,a){let c=[],l=0,d=0,u=!1,h=()=>{u&&!c.length&&!l&&e.complete()},f=b=>l<t?p(b):c.push(b),p=b=>{o&&e.next(b),l++;let g=!1;Ni(i(b,d++)).subscribe(Yt(e,m=>{r?.(m),o?f(m):e.next(m)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;c.length&&l<t;){let m=c.shift();s?Qr(e,s,()=>p(m)):p(m)}h()}catch(m){e.error(m)}}))};return n.subscribe(Yt(e,f,()=>{u=!0,h()})),()=>{a?.()}}function Sn(n,e,i=1/0){return Rt(e)?Sn((t,r)=>lt((o,s)=>e(t,o,r,s))(Ni(n(t,r))),i):(typeof e=="number"&&(i=e),Kt((t,r)=>lP(t,r,n,i)))}function Dc(n=1/0){return Sn(Or,n)}function dP(){return Dc(1)}function Ac(...n){return dP()(ki(n,Ps(n)))}function Fb(n){return new Lt(e=>{Ni(n()).subscribe(e)})}function Vl(...n){let e=vb(n),{args:i,keys:t}=Pb(n),r=new Lt(o=>{let{length:s}=i;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let d=0;d<s;d++){let u=!1;Ni(i[d]).subscribe(Yt(o,h=>{u||(u=!0,l--),a[d]=h},()=>c--,void 0,()=>{(!c||!u)&&(l||o.next(t?kb(t,a):a),o.complete())}))}});return e?r.pipe(Cu(e)):r}var O4=["addListener","removeListener"],N4=["addEventListener","removeEventListener"],L4=["on","off"];function No(n,e,i,t){if(Rt(i)&&(t=i,i=void 0),t)return No(n,e,i).pipe(Cu(t));let[r,o]=V4(n)?N4.map(s=>a=>n[s](e,a,i)):B4(n)?O4.map(uP(n,e)):U4(n)?L4.map(uP(n,e)):[];if(!r&&Tu(n))return Sn(s=>No(s,e,i))(Ni(n));if(!r)throw new TypeError("Invalid event target");return new Lt(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function uP(n,e){return i=>t=>n[i](e,t)}function B4(n){return Rt(n.addListener)&&Rt(n.removeListener)}function U4(n){return Rt(n.on)&&Rt(n.off)}function V4(n){return Rt(n.addEventListener)&&Rt(n.removeEventListener)}function Jf(n=0,e,i=XI){let t=-1;return e!=null&&(_b(e)?i=e:t=e),new Lt(r=>{let o=aP(n)?+n-i.now():n;o<0&&(o=0);let s=0;return i.schedule(function(){r.closed||(r.next(s++),0<=t?this.schedule(void 0,t):r.complete())},o)})}function rs(...n){let e=Ps(n),i=YI(n,1/0),t=n;return t.length?t.length===1?Ni(t[0]):Dc(i)(ki(t,e)):fn}function vi(n,e){return Kt((i,t)=>{let r=0;i.subscribe(Yt(t,o=>n.call(e,o,r++)&&t.next(o)))})}function hP(n){return Kt((e,i)=>{let t=!1,r=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,t){t=!1;let l=r;r=null,i.next(l)}s&&i.complete()},c=()=>{o=null,s&&i.complete()};e.subscribe(Yt(i,l=>{t=!0,r=l,o||Ni(n(l)).subscribe(o=Yt(i,a,c))},()=>{s=!0,(!t||!o||o.closed)&&i.complete()}))})}function jb(n,e=Kf){return hP(()=>Jf(n,e))}function Nr(n){return Kt((e,i)=>{let t=null,r=!1,o;t=e.subscribe(Yt(i,void 0,void 0,s=>{o=Ni(n(s,Nr(n)(e))),t?(t.unsubscribe(),t=null,o.subscribe(i)):r=!0})),r&&(t.unsubscribe(),t=null,o.subscribe(i))})}function fP(n,e,i,t,r){return(o,s)=>{let a=i,c=e,l=0;o.subscribe(Yt(s,d=>{let u=l++;c=a?n(c,d,u):(a=!0,d),t&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}function Pa(n,e){return Rt(e)?Sn(n,e,1):Sn(n,1)}function ka(n,e=Kf){return Kt((i,t)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let l=o;o=null,t.next(l)}};function c(){let l=s+n,d=e.now();if(d<l){r=this.schedule(void 0,l-d),t.add(r);return}a()}i.subscribe(Yt(t,l=>{o=l,s=e.now(),r||(r=e.schedule(c,n),t.add(r))},()=>{a(),t.complete()},void 0,()=>{o=r=null}))})}function Ic(n){return Kt((e,i)=>{let t=!1;e.subscribe(Yt(i,r=>{t=!0,i.next(r)},()=>{t||i.next(n),i.complete()}))})}function Rn(n){return n<=0?()=>fn:Kt((e,i)=>{let t=0;e.subscribe(Yt(i,r=>{++t<=n&&(i.next(r),n<=t&&i.complete())}))})}function Eu(n){return lt(()=>n)}function Pc(n,e=Or){return n=n??z4,Kt((i,t)=>{let r,o=!0;i.subscribe(Yt(t,s=>{let a=e(s);(o||!n(r,a))&&(o=!1,r=a,t.next(s))}))})}function z4(n,e){return n===e}function Ob(n=H4){return Kt((e,i)=>{let t=!1;e.subscribe(Yt(i,r=>{t=!0,i.next(r)},()=>t?i.complete():i.error(n())))})}function H4(){return new ns}function ks(n){return Kt((e,i)=>{try{e.subscribe(i)}finally{i.add(n)}})}function Fs(n,e){let i=arguments.length>=2;return t=>t.pipe(n?vi((r,o)=>n(r,o,t)):Or,Rn(1),i?Ic(e):Ob(()=>new ns))}function Du(n){return n<=0?()=>fn:Kt((e,i)=>{let t=[];e.subscribe(Yt(i,r=>{t.push(r),n<t.length&&t.shift()},()=>{for(let r of t)i.next(r);i.complete()},void 0,()=>{t=null}))})}function Hw(n,e){let i=arguments.length>=2;return t=>t.pipe(n?vi((r,o)=>n(r,o,t)):Or,Du(1),i?Ic(e):Ob(()=>new ns))}function Gw(n,e){return Kt(fP(n,e,arguments.length>=2,!0))}function em(n={}){let{connector:e=()=>new gt,resetOnError:i=!0,resetOnComplete:t=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,c,l=0,d=!1,u=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=c=void 0,d=u=!1},p=()=>{let b=s;f(),b?.unsubscribe()};return Kt((b,g)=>{l++,!u&&!d&&h();let m=c=c??e();g.add(()=>{l--,l===0&&!u&&!d&&(a=Ww(p,r))}),m.subscribe(g),!s&&l>0&&(s=new is({next:v=>m.next(v),error:v=>{u=!0,h(),a=Ww(f,i,v),m.error(v)},complete:()=>{d=!0,h(),a=Ww(f,t),m.complete()}}),Ni(b).subscribe(s))})(o)}}function Ww(n,e,...i){if(e===!0){n();return}if(e===!1)return;let t=new is({next:()=>{t.unsubscribe(),n()}});return Ni(e(...i)).subscribe(t)}function zl(n,e,i){let t,r=!1;return n&&typeof n=="object"?{bufferSize:t=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:i}=n:t=n??1/0,em({connector:()=>new Ll(t,e,i),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Hl(n){return vi((e,i)=>n<=i)}function vo(...n){let e=Ps(n);return Kt((i,t)=>{(e?Ac(n,i,e):Ac(n,i)).subscribe(t)})}function Pn(n,e){return Kt((i,t)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&t.complete();i.subscribe(Yt(t,c=>{r?.unsubscribe();let l=0,d=o++;Ni(n(c,d)).subscribe(r=Yt(t,u=>t.next(e?e(c,u,d,l++):u),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Ci(n){return Kt((e,i)=>{Ni(n).subscribe(Yt(i,()=>i.complete(),Yf)),!i.closed&&e.subscribe(i)})}function zi(n,e,i){let t=Rt(n)||e||i?{next:n,error:e,complete:i}:n;return t?Kt((r,o)=>{var s;(s=t.subscribe)===null||s===void 0||s.call(t);let a=!0;r.subscribe(Yt(o,c=>{var l;(l=t.next)===null||l===void 0||l.call(t,c),o.next(c)},()=>{var c;a=!1,(c=t.complete)===null||c===void 0||c.call(t),o.complete()},c=>{var l;a=!1,(l=t.error)===null||l===void 0||l.call(t,c),o.error(c)},()=>{var c,l;a&&((c=t.unsubscribe)===null||c===void 0||c.call(t)),(l=t.finalize)===null||l===void 0||l.call(t)}))}):Or}var rk="https://g.co/ng/security#xss",je=class extends Error{constructor(e,i){super(v_(e,i)),this.code=e}};function v_(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var ok=Symbol("InputSignalNode#UNSET"),G4=pi(ve({},Iw),{transformFn:void 0,applyValueToInputSignal(n,e){lb(n,e)}});function sk(n,e){let i=Object.create(G4);i.value=n,i.transformFn=e?.transform;function t(){if(rb(i),i.value===ok)throw new je(-950,!1);return i.value}return t[es]=i,t}function gm(n){return{toString:n}.toString()}var Nb="__parameters__";function W4(n){return function(...i){if(n){let t=n(...i);for(let r in t)this[r]=t[r]}}}function ak(n,e,i){return gm(()=>{let t=W4(e);function r(...o){if(this instanceof r)return t.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(c,l,d){let u=c.hasOwnProperty(Nb)?c[Nb]:Object.defineProperty(c,Nb,{value:[]})[Nb];for(;u.length<=d;)u.push(null);return(u[d]=u[d]||[]).push(s),c}}return i&&(r.prototype=Object.create(i.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var mr=globalThis;function Xi(n){for(let e in n)if(n[e]===Xi)return e;throw Error("Could not find renamed property on target object.")}function $4(n,e){for(let i in e)e.hasOwnProperty(i)&&!n.hasOwnProperty(i)&&(n[i]=e[i])}function Br(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Br).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let i=e.indexOf(`
`);return i===-1?e:e.substring(0,i)}function sM(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var q4=Xi({__forward_ref__:Xi});function ge(n){return n.__forward_ref__=ge,n.toString=function(){return Br(this())},n}function Lr(n){return ck(n)?n():n}function ck(n){return typeof n=="function"&&n.hasOwnProperty(q4)&&n.__forward_ref__===ge}function we(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function tt(n){return{providers:n.providers||[],imports:n.imports||[]}}function y_(n){return mP(n,dk)||mP(n,uk)}function lk(n){return y_(n)!==null}function mP(n,e){return n.hasOwnProperty(e)?n[e]:null}function X4(n){let e=n&&(n[dk]||n[uk]);return e||null}function pP(n){return n&&(n.hasOwnProperty(gP)||n.hasOwnProperty(Y4))?n[gP]:null}var dk=Xi({\u0275prov:Xi}),gP=Xi({\u0275inj:Xi}),uk=Xi({ngInjectableDef:Xi}),Y4=Xi({ngInjectorDef:Xi}),Ee=class{constructor(e,i){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof i=="number"?this.__NG_ELEMENT_ID__=i:i!==void 0&&(this.\u0275prov=we({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function hk(n){return n&&!!n.\u0275providers}var Z4=Xi({\u0275cmp:Xi}),Q4=Xi({\u0275dir:Xi}),K4=Xi({\u0275pipe:Xi}),J4=Xi({\u0275mod:Xi}),Qb=Xi({\u0275fac:Xi}),tm=Xi({__NG_ELEMENT_ID__:Xi}),bP=Xi({__NG_ENV_ID__:Xi});function x_(n){return typeof n=="string"?n:n==null?"":String(n)}function eH(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():x_(n)}function tH(n,e){let i=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new je(-200,n)}function _S(n,e){throw new je(-201,!1)}var mi=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(mi||{}),aM;function fk(){return aM}function Jr(n){let e=aM;return aM=n,e}function mk(n,e,i){let t=y_(n);if(t&&t.providedIn=="root")return t.value===void 0?t.value=t.factory():t.value;if(i&mi.Optional)return null;if(e!==void 0)return e;_S(n,"Injector")}var iH={},nm=iH,cM="__NG_DI_FLAG__",Kb="ngTempTokenPath",nH="ngTokenPath",rH=/\n/gm,oH="\u0275",_P="__source",Fu;function sH(){return Fu}function kc(n){let e=Fu;return Fu=n,e}function aH(n,e=mi.Default){if(Fu===void 0)throw new je(-203,!1);return Fu===null?mk(n,void 0,e):Fu.get(n,e&mi.Optional?null:void 0,e)}function de(n,e=mi.Default){return(fk()||aH)(Lr(n),e)}function te(n,e=mi.Default){return de(n,w_(e))}function w_(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function lM(n){let e=[];for(let i=0;i<n.length;i++){let t=Lr(n[i]);if(Array.isArray(t)){if(t.length===0)throw new je(900,!1);let r,o=mi.Default;for(let s=0;s<t.length;s++){let a=t[s],c=cH(a);typeof c=="number"?c===-1?r=a.token:o|=c:r=a}e.push(de(r,o))}else e.push(de(t))}return e}function pk(n,e){return n[cM]=e,n.prototype[cM]=e,n}function cH(n){return n[cM]}function lH(n,e,i,t){let r=n[Kb];throw e[_P]&&r.unshift(e[_P]),n.message=dH(`
`+n.message,r,i,t),n[nH]=r,n[Kb]=null,n}function dH(n,e,i,t=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==oH?n.slice(2):n;let r=Br(e);if(Array.isArray(e))r=e.map(Br).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Br(a)))}r=`{${o.join(", ")}}`}return`${i}${t?"("+t+")":""}[${r}]: ${n.replace(rH,`
  `)}`}var qu=pk(ak("Optional"),8);var bm=pk(ak("SkipSelf"),4);function $l(n,e){let i=n.hasOwnProperty(Qb);return i?n[Qb]:null}function uH(n,e,i){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],o=e[t];if(i&&(r=i(r),o=i(o)),o!==r)return!1}return!0}function hH(n){return n.flat(Number.POSITIVE_INFINITY)}function vS(n,e){n.forEach(i=>Array.isArray(i)?vS(i,e):e(i))}function gk(n,e,i){e>=n.length?n.push(i):n.splice(e,0,i)}function Jb(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function fH(n,e){let i=[];for(let t=0;t<n;t++)i.push(e);return i}function mH(n,e,i,t){let r=n.length;if(r==e)n.push(i,t);else if(r===1)n.push(t,n[0]),n[0]=i;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=i,n[e+1]=t}}function M_(n,e,i){let t=_m(n,e);return t>=0?n[t|1]=i:(t=~t,mH(n,t,e,i)),t}function $w(n,e){let i=_m(n,e);if(i>=0)return n[i|1]}function _m(n,e){return pH(n,e,1)}function pH(n,e,i){let t=0,r=n.length>>i;for(;r!==t;){let o=t+(r-t>>1),s=n[o<<i];if(e===s)return o<<i;s>e?r=o:t=o+1}return~(r<<i)}var Ou={},eo=[],Nu=new Ee(""),bk=new Ee("",-1),_k=new Ee(""),e_=class{get(e,i=nm){if(i===nm){let t=new Error(`NullInjectorError: No provider for ${Br(e)}!`);throw t.name="NullInjectorError",t}return i}},vk=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(vk||{}),Ns=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ns||{}),ut=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ut||{});function gH(n,e,i){let t=n.length;for(;;){let r=n.indexOf(e,i);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===t||n.charCodeAt(r+o)<=32)return r}i=r+1}}function dM(n,e,i){let t=0;for(;t<i.length;){let r=i[t];if(typeof r=="number"){if(r!==0)break;t++;let o=i[t++],s=i[t++],a=i[t++];n.setAttribute(e,s,a,o)}else{let o=r,s=i[++t];bH(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),t++}}return t}function yk(n){return n===3||n===4||n===6}function bH(n){return n.charCodeAt(0)===64}function rm(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let i=-1;for(let t=0;t<e.length;t++){let r=e[t];typeof r=="number"?i=r:i===0||(i===-1||i===2?vP(n,i,r,null,e[++t]):vP(n,i,r,null,null))}}return n}function vP(n,e,i,t,r){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===i){if(t===null){r!==null&&(n[o+1]=r);return}else if(t===n[o+1]){n[o+2]=r;return}}o++,t!==null&&o++,r!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,i),t!==null&&n.splice(o++,0,t),r!==null&&n.splice(o++,0,r)}var xk="ng-template";function _H(n,e,i,t){let r=0;if(t){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&gH(e[r+1].toLowerCase(),i,0)!==-1)return!0}else if(yS(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===i)return!0}return!1}function yS(n){return n.type===4&&n.value!==xk}function vH(n,e,i){let t=n.type===4&&!i?xk:n.value;return e===t}function yH(n,e,i){let t=4,r=n.attrs,o=r!==null?MH(r):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!os(t)&&!os(c))return!1;if(s&&os(c))continue;s=!1,t=c|t&1;continue}if(!s)if(t&4){if(t=2|t&1,c!==""&&!vH(n,c,i)||c===""&&e.length===1){if(os(t))return!1;s=!0}}else if(t&8){if(r===null||!_H(n,r,c,i)){if(os(t))return!1;s=!0}}else{let l=e[++a],d=xH(c,r,yS(n),i);if(d===-1){if(os(t))return!1;s=!0;continue}if(l!==""){let u;if(d>o?u="":u=r[d+1].toLowerCase(),t&2&&l!==u){if(os(t))return!1;s=!0}}}}return os(t)||s}function os(n){return(n&1)===0}function xH(n,e,i,t){if(e===null)return-1;let r=0;if(t||!i){let o=!1;for(;r<e.length;){let s=e[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return SH(e,n)}function wk(n,e,i=!1){for(let t=0;t<e.length;t++)if(yH(n,e[t],i))return!0;return!1}function wH(n){let e=n.attrs;if(e!=null){let i=e.indexOf(5);if(!(i&1))return e[i+1]}return null}function MH(n){for(let e=0;e<n.length;e++){let i=n[e];if(yk(i))return e}return n.length}function SH(n,e){let i=n.indexOf(4);if(i>-1)for(i++;i<n.length;){let t=n[i];if(typeof t=="number")return-1;if(t===e)return i;i++}return-1}function RH(n,e){e:for(let i=0;i<e.length;i++){let t=e[i];if(n.length===t.length){for(let r=0;r<n.length;r++)if(n[r]!==t[r])continue e;return!0}}return!1}function yP(n,e){return n?":not("+e.trim()+")":e}function TH(n){let e=n[0],i=1,t=2,r="",o=!1;for(;i<n.length;){let s=n[i];if(typeof s=="string")if(t&2){let a=n[++i];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else t&8?r+="."+s:t&4&&(r+=" "+s);else r!==""&&!os(s)&&(e+=yP(o,r),r=""),t=s,o=o||!os(t);i++}return r!==""&&(e+=yP(o,r)),e}function CH(n){return n.map(TH).join(",")}function EH(n){let e=[],i=[],t=1,r=2;for(;t<n.length;){let o=n[t];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++t]):r===8&&i.push(o);else{if(!os(r))break;r=o}t++}return{attrs:e,classes:i}}function L(n){return gm(()=>{let e=Ck(n),i=pi(ve({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===vk.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ns.Emulated,styles:n.styles||eo,_:null,schemas:n.schemas||null,tView:null,id:""});Ek(i);let t=n.dependencies;return i.directiveDefs=wP(t,!1),i.pipeDefs=wP(t,!0),i.id=IH(i),i})}function DH(n){return jc(n)||Mk(n)}function AH(n){return n!==null}function it(n){return gm(()=>({type:n.type,bootstrap:n.bootstrap||eo,declarations:n.declarations||eo,imports:n.imports||eo,exports:n.exports||eo,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function xP(n,e){if(n==null)return Ou;let i={};for(let t in n)if(n.hasOwnProperty(t)){let r=n[t],o,s,a=ut.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),e?(i[o]=a!==ut.None?[t,a]:t,e[o]=s):i[o]=t}return i}function $e(n){return gm(()=>{let e=Ck(n);return Ek(e),e})}function Bo(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function jc(n){return n[Z4]||null}function Mk(n){return n[Q4]||null}function Sk(n){return n[K4]||null}function Rk(n){let e=jc(n)||Mk(n)||Sk(n);return e!==null?e.standalone:!1}function Tk(n,e){let i=n[J4]||null;if(!i&&e===!0)throw new Error(`Type ${Br(n)} does not have '\u0275mod' property.`);return i}function Ck(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ou,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||eo,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:xP(n.inputs,e),outputs:xP(n.outputs),debugInfo:null}}function Ek(n){n.features?.forEach(e=>e(n))}function wP(n,e){if(!n)return null;let i=e?Sk:DH;return()=>(typeof n=="function"?n():n).map(t=>i(t)).filter(AH)}function IH(n){let e=0,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of i)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function S_(n){return{\u0275providers:n}}function PH(...n){return{\u0275providers:Dk(!0,n),\u0275fromNgModule:!0}}function Dk(n,...e){let i=[],t=new Set,r,o=s=>{i.push(s)};return vS(e,s=>{let a=s;uM(a,o,[],t)&&(r||=[],r.push(a))}),r!==void 0&&Ak(r,o),i}function Ak(n,e){for(let i=0;i<n.length;i++){let{ngModule:t,providers:r}=n[i];xS(r,o=>{e(o,t)})}}function uM(n,e,i,t){if(n=Lr(n),!n)return!1;let r=null,o=pP(n),s=!o&&jc(n);if(!o&&!s){let c=n.ngModule;if(o=pP(c),o)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=t.has(r);if(s){if(a)return!1;if(t.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)uM(l,e,i,t)}}else if(o){if(o.imports!=null&&!a){t.add(r);let l;try{vS(o.imports,d=>{uM(d,e,i,t)&&(l||=[],l.push(d))})}finally{}l!==void 0&&Ak(l,e)}if(!a){let l=$l(r)||(()=>new r);e({provide:r,useFactory:l,deps:eo},r),e({provide:_k,useValue:r,multi:!0},r),e({provide:Nu,useValue:()=>de(r),multi:!0},r)}let c=o.providers;if(c!=null&&!a){let l=n;xS(c,d=>{e(d,l)})}}else return!1;return r!==n&&n.providers!==void 0}function xS(n,e){for(let i of n)hk(i)&&(i=i.\u0275providers),Array.isArray(i)?xS(i,e):e(i)}var kH=Xi({provide:String,useValue:Xi});function Ik(n){return n!==null&&typeof n=="object"&&kH in n}function FH(n){return!!(n&&n.useExisting)}function jH(n){return!!(n&&n.useFactory)}function Lu(n){return typeof n=="function"}function OH(n){return!!n.useClass}var R_=new Ee(""),Gb={},NH={},qw;function wS(){return qw===void 0&&(qw=new e_),qw}var Mr=class{},om=class extends Mr{get destroyed(){return this._destroyed}constructor(e,i,t,r){super(),this.parent=i,this.source=t,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fM(e,s=>this.processProvider(s)),this.records.set(bk,Au(void 0,this)),r.has("environment")&&this.records.set(Mr,Au(void 0,this));let o=this.records.get(R_);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(_k,eo,mi.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=bi(null);try{for(let t of this._ngOnDestroyHooks)t.ngOnDestroy();let i=this._onDestroyHooks;this._onDestroyHooks=[];for(let t of i)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),bi(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let i=kc(this),t=Jr(void 0),r;try{return e()}finally{kc(i),Jr(t)}}get(e,i=nm,t=mi.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(bP))return e[bP](this);t=w_(t);let r,o=kc(this),s=Jr(void 0);try{if(!(t&mi.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=zH(e)&&y_(e);l&&this.injectableDefInScope(l)?c=Au(hM(e),Gb):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=t&mi.Self?wS():this.parent;return i=t&mi.Optional&&i===nm?null:i,a.get(e,i)}catch(a){if(a.name==="NullInjectorError"){if((a[Kb]=a[Kb]||[]).unshift(Br(e)),o)throw a;return lH(a,e,"R3InjectorError",this.source)}else throw a}finally{Jr(s),kc(o)}}resolveInjectorInitializers(){let e=bi(null),i=kc(this),t=Jr(void 0),r;try{let o=this.get(Nu,eo,mi.Self);for(let s of o)s()}finally{kc(i),Jr(t),bi(e)}}toString(){let e=[],i=this.records;for(let t of i.keys())e.push(Br(t));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new je(205,!1)}processProvider(e){e=Lr(e);let i=Lu(e)?e:Lr(e&&e.provide),t=BH(e);if(!Lu(e)&&e.multi===!0){let r=this.records.get(i);r||(r=Au(void 0,Gb,!0),r.factory=()=>lM(r.multi),this.records.set(i,r)),i=e,r.multi.push(e)}this.records.set(i,t)}hydrate(e,i){let t=bi(null);try{return i.value===Gb&&(i.value=NH,i.value=i.factory()),typeof i.value=="object"&&i.value&&VH(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}finally{bi(t)}}injectableDefInScope(e){if(!e.providedIn)return!1;let i=Lr(e.providedIn);return typeof i=="string"?i==="any"||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(e){let i=this._onDestroyHooks.indexOf(e);i!==-1&&this._onDestroyHooks.splice(i,1)}};function hM(n){let e=y_(n),i=e!==null?e.factory:$l(n);if(i!==null)return i;if(n instanceof Ee)throw new je(204,!1);if(n instanceof Function)return LH(n);throw new je(204,!1)}function LH(n){if(n.length>0)throw new je(204,!1);let i=X4(n);return i!==null?()=>i.factory(n):()=>new n}function BH(n){if(Ik(n))return Au(void 0,n.useValue);{let e=Pk(n);return Au(e,Gb)}}function Pk(n,e,i){let t;if(Lu(n)){let r=Lr(n);return $l(r)||hM(r)}else if(Ik(n))t=()=>Lr(n.useValue);else if(jH(n))t=()=>n.useFactory(...lM(n.deps||[]));else if(FH(n))t=()=>de(Lr(n.useExisting));else{let r=Lr(n&&(n.useClass||n.provide));if(UH(n))t=()=>new r(...lM(n.deps));else return $l(r)||hM(r)}return t}function Au(n,e,i=!1){return{factory:n,value:e,multi:i?[]:void 0}}function UH(n){return!!n.deps}function VH(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function zH(n){return typeof n=="function"||typeof n=="object"&&n instanceof Ee}function fM(n,e){for(let i of n)Array.isArray(i)?fM(i,e):i&&hk(i)?fM(i.\u0275providers,e):e(i)}function cs(n,e){n instanceof om&&n.assertNotDestroyed();let i,t=kc(n),r=Jr(void 0);try{return e()}finally{kc(t),Jr(r)}}function kk(){return fk()!==void 0||sH()!=null}function Fk(n){if(!kk())throw new je(-203,!1)}function HH(n){let e=mr.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function GH(n){return typeof n=="function"}var Vs=0,Wt=1,jt=2,pr=3,ss=4,xo=5,Bu=6,sm=7,xr=8,Uu=9,as=10,mn=11,am=12,MP=13,Xu=14,Lo=15,vm=16,Iu=17,Fa=18,T_=19,jk=20,Fc=21,Wb=22,ql=23,gr=25,MS=1;var Xl=7,t_=8,Vu=9,wr=10,SS=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(SS||{});function Gl(n){return Array.isArray(n)&&typeof n[MS]=="object"}function La(n){return Array.isArray(n)&&n[MS]===!0}function RS(n){return(n.flags&4)!==0}function C_(n){return n.componentOffset>-1}function E_(n){return(n.flags&1)===1}function ja(n){return!!n.template}function WH(n){return(n[jt]&512)!==0}var mM=class{constructor(e,i,t){this.previousValue=e,this.currentValue=i,this.firstChange=t}isFirstChange(){return this.firstChange}};function Ok(n,e,i,t){e!==null?e.applyValueToInputSignal(e,t):n[i]=t}function Hn(){return Nk}function Nk(n){return n.type.prototype.ngOnChanges&&(n.setInput=qH),$H}Hn.ngInherit=!0;function $H(){let n=Bk(this),e=n?.current;if(e){let i=n.previous;if(i===Ou)n.previous=e;else for(let t in e)i[t]=e[t];n.current=null,this.ngOnChanges(e)}}function qH(n,e,i,t,r){let o=this.declaredInputs[t],s=Bk(n)||XH(n,{previous:Ou,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new mM(l&&l.currentValue,i,c===Ou),Ok(n,e,r,i)}var Lk="__ngSimpleChanges__";function Bk(n){return n[Lk]||null}function XH(n,e){return n[Lk]=e}var SP=null;var js=function(n,e,i){SP?.(n,e,i)},YH="svg",ZH="math",QH=!1;function KH(){return QH}function Ls(n){for(;Array.isArray(n);)n=n[Vs];return n}function JH(n){for(;Array.isArray(n);){if(typeof n[MS]=="object")return n;n=n[Vs]}return null}function Uk(n,e){return Ls(e[n])}function Uo(n,e){return Ls(e[n.index])}function TS(n,e){return n.data[e]}function CS(n,e){return n[e]}function Nc(n,e){let i=e[n];return Gl(i)?i:i[Vs]}function e5(n){return(n[jt]&4)===4}function ES(n){return(n[jt]&128)===128}function t5(n){return La(n[pr])}function zu(n,e){return e==null?null:n[e]}function Vk(n){n[Iu]=0}function i5(n){n[jt]&1024||(n[jt]|=1024,ES(n)&&cm(n))}function n5(n,e){for(;n>0;)e=e[Xu],n--;return e}function DS(n){return!!(n[jt]&9216||n[ql]?.dirty)}function pM(n){n[as].changeDetectionScheduler?.notify(1),DS(n)?cm(n):n[jt]&64&&(KH()?(n[jt]|=1024,cm(n)):n[as].changeDetectionScheduler?.notify())}function cm(n){n[as].changeDetectionScheduler?.notify();let e=lm(n);for(;e!==null&&!(e[jt]&8192||(e[jt]|=8192,!ES(e)));)e=lm(e)}function zk(n,e){if((n[jt]&256)===256)throw new je(911,!1);n[Fc]===null&&(n[Fc]=[]),n[Fc].push(e)}function r5(n,e){if(n[Fc]===null)return;let i=n[Fc].indexOf(e);i!==-1&&n[Fc].splice(i,1)}function lm(n){let e=n[pr];return La(e)?e[pr]:e}var di={lFrame:Zk(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function o5(){return di.lFrame.elementDepthCount}function s5(){di.lFrame.elementDepthCount++}function a5(){di.lFrame.elementDepthCount--}function Hk(){return di.bindingsEnabled}function Gk(){return di.skipHydrationRootTNode!==null}function c5(n){return di.skipHydrationRootTNode===n}function l5(){di.skipHydrationRootTNode=null}function Bt(){return di.lFrame.lView}function pn(){return di.lFrame.tView}function ht(n){return di.lFrame.contextLView=n,n[xr]}function ft(n){return di.lFrame.contextLView=null,n}function br(){let n=Wk();for(;n!==null&&n.type===64;)n=n.parent;return n}function Wk(){return di.lFrame.currentTNode}function d5(){let n=di.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function td(n,e){let i=di.lFrame;i.currentTNode=n,i.isParent=e}function AS(){return di.lFrame.isParent}function IS(){di.lFrame.isParent=!1}function u5(){return di.lFrame.contextLView}function id(){let n=di.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function h5(n){return di.lFrame.bindingIndex=n}function nd(){return di.lFrame.bindingIndex++}function $k(n){let e=di.lFrame,i=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,i}function f5(){return di.lFrame.inI18n}function m5(n,e){let i=di.lFrame;i.bindingIndex=i.bindingRootIndex=n,gM(e)}function p5(){return di.lFrame.currentDirectiveIndex}function gM(n){di.lFrame.currentDirectiveIndex=n}function PS(n){let e=di.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function qk(){return di.lFrame.currentQueryIndex}function kS(n){di.lFrame.currentQueryIndex=n}function g5(n){let e=n[Wt];return e.type===2?e.declTNode:e.type===1?n[xo]:null}function Xk(n,e,i){if(i&mi.SkipSelf){let r=e,o=n;for(;r=r.parent,r===null&&!(i&mi.Host);)if(r=g5(o),r===null||(o=o[Xu],r.type&10))break;if(r===null)return!1;e=r,n=o}let t=di.lFrame=Yk();return t.currentTNode=e,t.lView=n,!0}function FS(n){let e=Yk(),i=n[Wt];di.lFrame=e,e.currentTNode=i.firstChild,e.lView=n,e.tView=i,e.contextLView=n,e.bindingIndex=i.bindingStartIndex,e.inI18n=!1}function Yk(){let n=di.lFrame,e=n===null?null:n.child;return e===null?Zk(n):e}function Zk(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Qk(){let n=di.lFrame;return di.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Kk=Qk;function jS(){let n=Qk();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function b5(n){return(di.lFrame.contextLView=n5(n,di.lFrame.contextLView))[xr]}function Lc(){return di.lFrame.selectedIndex}function Yl(n){di.lFrame.selectedIndex=n}function D_(){let n=di.lFrame;return TS(n.tView,n.selectedIndex)}function _5(){return di.lFrame.currentNamespace}var Jk=!0;function A_(){return Jk}function I_(n){Jk=n}function v5(n,e,i){let{ngOnChanges:t,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(t){let s=Nk(e);(i.preOrderHooks??=[]).push(n,s),(i.preOrderCheckHooks??=[]).push(n,s)}r&&(i.preOrderHooks??=[]).push(0-n,r),o&&((i.preOrderHooks??=[]).push(n,o),(i.preOrderCheckHooks??=[]).push(n,o))}function P_(n,e){for(let i=e.directiveStart,t=e.directiveEnd;i<t;i++){let o=n.data[i].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-i,s),a&&((n.contentHooks??=[]).push(i,a),(n.contentCheckHooks??=[]).push(i,a)),c&&(n.viewHooks??=[]).push(-i,c),l&&((n.viewHooks??=[]).push(i,l),(n.viewCheckHooks??=[]).push(i,l)),d!=null&&(n.destroyHooks??=[]).push(i,d)}}function $b(n,e,i){eF(n,e,3,i)}function qb(n,e,i,t){(n[jt]&3)===i&&eF(n,e,i,t)}function Xw(n,e){let i=n[jt];(i&3)===e&&(i&=16383,i+=1,n[jt]=i)}function eF(n,e,i,t){let r=t!==void 0?n[Iu]&65535:0,o=t??-1,s=e.length-1,a=0;for(let c=r;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],t!=null&&a>=t)break}else e[c]<0&&(n[Iu]+=65536),(a<o||o==-1)&&(y5(n,i,e,c),n[Iu]=(n[Iu]&4294901760)+c+2),c++}function RP(n,e){js(4,n,e);let i=bi(null);try{e.call(n)}finally{bi(i),js(5,n,e)}}function y5(n,e,i,t){let r=i[t]<0,o=i[t+1],s=r?-i[t]:i[t],a=n[s];r?n[jt]>>14<n[Iu]>>16&&(n[jt]&3)===e&&(n[jt]+=16384,RP(a,o)):RP(a,o)}var ju=-1,Zl=class{constructor(e,i,t){this.factory=e,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=t}};function x5(n){return n instanceof Zl}function w5(n){return(n.flags&8)!==0}function M5(n){return(n.flags&16)!==0}function tF(n){return n!==ju}function i_(n){return n&32767}function S5(n){return n>>16}function n_(n,e){let i=S5(n),t=e;for(;i>0;)t=t[Xu],i--;return t}var bM=!0;function r_(n){let e=bM;return bM=n,e}var R5=256,iF=R5-1,nF=5,T5=0,Os={};function C5(n,e,i){let t;typeof i=="string"?t=i.charCodeAt(0)||0:i.hasOwnProperty(tm)&&(t=i[tm]),t==null&&(t=i[tm]=T5++);let r=t&iF,o=1<<r;e.data[n+(r>>nF)]|=o}function o_(n,e){let i=rF(n,e);if(i!==-1)return i;let t=e[Wt];t.firstCreatePass&&(n.injectorIndex=e.length,Yw(t.data,n),Yw(e,null),Yw(t.blueprint,null));let r=OS(n,e),o=n.injectorIndex;if(tF(r)){let s=i_(r),a=n_(r,e),c=a[Wt].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=r,o}function Yw(n,e){n.push(0,0,0,0,0,0,0,0,e)}function rF(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function OS(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let i=0,t=null,r=e;for(;r!==null;){if(t=lF(r),t===null)return ju;if(i++,r=r[Xu],t.injectorIndex!==-1)return t.injectorIndex|i<<16}return ju}function _M(n,e,i){C5(n,e,i)}function E5(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let i=n.attrs;if(i){let t=i.length,r=0;for(;r<t;){let o=i[r];if(yk(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<t&&typeof i[r]=="string";)r++;else{if(o===e)return i[r+1];r=r+2}}}return null}function oF(n,e,i){if(i&mi.Optional||n!==void 0)return n;_S(e,"NodeInjector")}function sF(n,e,i,t){if(i&mi.Optional&&t===void 0&&(t=null),!(i&(mi.Self|mi.Host))){let r=n[Uu],o=Jr(void 0);try{return r?r.get(e,t,i&mi.Optional):mk(e,t,i&mi.Optional)}finally{Jr(o)}}return oF(t,e,i)}function aF(n,e,i,t=mi.Default,r){if(n!==null){if(e[jt]&2048&&!(t&mi.Self)){let s=P5(n,e,i,t,Os);if(s!==Os)return s}let o=cF(n,e,i,t,Os);if(o!==Os)return o}return sF(e,i,t,r)}function cF(n,e,i,t,r){let o=A5(i);if(typeof o=="function"){if(!Xk(e,n,t))return t&mi.Host?oF(r,i,t):sF(e,i,t,r);try{let s;if(s=o(t),s==null&&!(t&mi.Optional))_S(i);else return s}finally{Kk()}}else if(typeof o=="number"){let s=null,a=rF(n,e),c=ju,l=t&mi.Host?e[Lo][xo]:null;for((a===-1||t&mi.SkipSelf)&&(c=a===-1?OS(n,e):e[a+8],c===ju||!CP(t,!1)?a=-1:(s=e[Wt],a=i_(c),e=n_(c,e)));a!==-1;){let d=e[Wt];if(TP(o,a,d.data)){let u=D5(a,e,i,s,t,l);if(u!==Os)return u}c=e[a+8],c!==ju&&CP(t,e[Wt].data[a+8]===l)&&TP(o,a,e)?(s=d,a=i_(c),e=n_(c,e)):a=-1}}return r}function D5(n,e,i,t,r,o){let s=e[Wt],a=s.data[n+8],c=t==null?C_(a)&&bM:t!=s&&(a.type&3)!==0,l=r&mi.Host&&o===a,d=Xb(a,s,i,c,l);return d!==null?Ql(e,s,d,a):Os}function Xb(n,e,i,t,r){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,d=o>>20,u=t?a:a+d,h=r?a+d:l;for(let f=u;f<h;f++){let p=s[f];if(f<c&&i===p||f>=c&&p.type===i)return f}if(r){let f=s[c];if(f&&ja(f)&&f.type===i)return c}return null}function Ql(n,e,i,t){let r=n[i],o=e.data;if(x5(r)){let s=r;s.resolving&&tH(eH(o[i]));let a=r_(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Jr(s.injectImpl):null,d=Xk(n,t,mi.Default);try{r=n[i]=s.factory(void 0,o,n,t),e.firstCreatePass&&i>=t.directiveStart&&v5(i,o[i],e)}finally{l!==null&&Jr(l),r_(a),s.resolving=!1,Kk()}}return r}function A5(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(tm)?n[tm]:void 0;return typeof e=="number"?e>=0?e&iF:I5:e}function TP(n,e,i){let t=1<<n;return!!(i[e+(n>>nF)]&t)}function CP(n,e){return!(n&mi.Self)&&!(n&mi.Host&&e)}var Wl=class{constructor(e,i){this._tNode=e,this._lView=i}get(e,i,t){return aF(this._tNode,this._lView,e,w_(t),i)}};function I5(){return new Wl(br(),Bt())}function be(n){return gm(()=>{let e=n.prototype.constructor,i=e[Qb]||vM(e),t=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==t;){let o=r[Qb]||vM(r);if(o&&o!==i)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function vM(n){return ck(n)?()=>{let e=vM(Lr(n));return e&&e()}:$l(n)}function P5(n,e,i,t,r){let o=n,s=e;for(;o!==null&&s!==null&&s[jt]&2048&&!(s[jt]&512);){let a=cF(o,s,i,t|mi.Self,Os);if(a!==Os)return a;let c=o.parent;if(!c){let l=s[jk];if(l){let d=l.get(i,Os,t);if(d!==Os)return d}c=lF(s),s=s[Xu]}o=c}return r}function lF(n){let e=n[Wt],i=e.type;return i===2?e.declTNode:i===1?n[xo]:null}function Bc(n){return E5(br(),n)}function EP(n,e=null,i=null,t){let r=dF(n,e,i,t);return r.resolveInjectorInitializers(),r}function dF(n,e=null,i=null,t,r=new Set){let o=[i||eo,PH(n)];return t=t||(typeof n=="object"?void 0:Br(n)),new om(o,e||wS(),t||null,r)}var _r=(()=>{let e=class e{static create(t,r){if(Array.isArray(t))return EP({name:""},r,t,"");{let o=t.name??"";return EP({name:o},t.parent,t.providers,o)}}};e.THROW_IF_NOT_FOUND=nm,e.NULL=new e_,e.\u0275prov=we({token:e,providedIn:"any",factory:()=>de(bk)}),e.__NG_ELEMENT_ID__=-1;let n=e;return n})();var k5="ngOriginalError";function Zw(n){return n[k5]}var Ur=class{constructor(){this._console=console}handleError(e){let i=this._findOriginalError(e);this._console.error("ERROR",e),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(e){let i=e&&Zw(e);for(;i&&Zw(i);)i=Zw(i);return i||null}},uF=new Ee("",{providedIn:"root",factory:()=>te(Ur).handleError.bind(void 0)}),k_=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=F5,e.__NG_ENV_ID__=t=>t;let n=e;return n})(),yM=class extends k_{constructor(e){super(),this._lView=e}onDestroy(e){return zk(this._lView,e),()=>r5(this._lView,e)}};function F5(){return new yM(Bt())}function DP(n,e){return sk(n,e)}function j5(n){return sk(ok,n)}var hF=(DP.required=j5,DP);function O5(){return Yu(br(),Bt())}function Yu(n,e){return new et(Uo(n,e))}var et=(()=>{let e=class e{constructor(t){this.nativeElement=t}};e.__NG_ELEMENT_ID__=O5;let n=e;return n})();function N5(n){return n instanceof et?n.nativeElement:n}var xM=class extends gt{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,kk()&&(this.destroyRef=te(k_,{optional:!0})??void 0)}emit(e){let i=bi(null);try{super.next(e)}finally{bi(i)}}subscribe(e,i,t){let r=e,o=i||(()=>null),s=t;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Qw(o),r&&(r=Qw(r)),s&&(s=Qw(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof _i&&e.add(a),a}};function Qw(n){return e=>{setTimeout(n,void 0,e)}}var nt=xM;function L5(){return this._results[Symbol.iterator]()}var Bs=class n{get changes(){return this._changes??=new nt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let i=n.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=L5)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,i){return this._results.reduce(e,i)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,i){this.dirty=!1;let t=hH(e);(this._changesDetected=!uH(this._results,t,i))&&(this._results=t,this.length=t.length,this.last=t[this.length-1],this.first=t[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function fF(n){return(n.flags&128)===128}var mF=new Map,B5=0;function U5(){return B5++}function V5(n){mF.set(n[T_],n)}function z5(n){mF.delete(n[T_])}var AP="__ngContext__";function Oc(n,e){Gl(e)?(n[AP]=e[T_],V5(e)):n[AP]=e}function pF(n){return bF(n[am])}function gF(n){return bF(n[ss])}function bF(n){for(;n!==null&&!La(n);)n=n[ss];return n}var wM;function _F(n){wM=n}function H5(){if(wM!==void 0)return wM;if(typeof document<"u")return document;throw new je(210,!1)}var ym=new Ee("",{providedIn:"root",factory:()=>G5}),G5="ng",NS=new Ee(""),Vr=new Ee("",{providedIn:"platform",factory:()=>"unknown"});var Gn=new Ee(""),xm=new Ee("",{providedIn:"root",factory:()=>H5().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var W5="h",$5="b";var q5=()=>null;function LS(n,e,i=!1){return q5(n,e,i)}var vF=!1,X5=new Ee("",{providedIn:"root",factory:()=>vF});var Lb;function yF(){if(Lb===void 0&&(Lb=null,mr.trustedTypes))try{Lb=mr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Lb}function F_(n){return yF()?.createHTML(n)||n}function Y5(n){return yF()?.createScriptURL(n)||n}var Bb;function Z5(){if(Bb===void 0&&(Bb=null,mr.trustedTypes))try{Bb=mr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Bb}function IP(n){return Z5()?.createScriptURL(n)||n}var Oa=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rk})`}},MM=class extends Oa{getTypeName(){return"HTML"}},SM=class extends Oa{getTypeName(){return"Style"}},RM=class extends Oa{getTypeName(){return"Script"}},TM=class extends Oa{getTypeName(){return"URL"}},CM=class extends Oa{getTypeName(){return"ResourceURL"}};function Vo(n){return n instanceof Oa?n.changingThisBreaksApplicationSecurity:n}function Uc(n,e){let i=Q5(n);if(i!=null&&i!==e){if(i==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${i} (see ${rk})`)}return i===e}function Q5(n){return n instanceof Oa&&n.getTypeName()||null}function xF(n){return new MM(n)}function wF(n){return new SM(n)}function MF(n){return new RM(n)}function SF(n){return new TM(n)}function RF(n){return new CM(n)}function K5(n){let e=new DM(n);return J5()?new EM(e):e}var EM=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let i=new window.DOMParser().parseFromString(F_(e),"text/html").body;return i===null?this.inertDocumentHelper.getInertBodyElement(e):(i.removeChild(i.firstChild),i)}catch{return null}}},DM=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let i=this.inertDocument.createElement("template");return i.innerHTML=F_(e),i}};function J5(){try{return!!new window.DOMParser().parseFromString(F_(""),"text/html")}catch{return!1}}var eG=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function j_(n){return n=String(n),n.match(eG)?n:"unsafe:"+n}function Ba(n){let e={};for(let i of n.split(","))e[i]=!0;return e}function wm(...n){let e={};for(let i of n)for(let t in i)i.hasOwnProperty(t)&&(e[t]=!0);return e}var TF=Ba("area,br,col,hr,img,wbr"),CF=Ba("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),EF=Ba("rp,rt"),tG=wm(EF,CF),iG=wm(CF,Ba("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),nG=wm(EF,Ba("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),PP=wm(TF,iG,nG,tG),DF=Ba("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rG=Ba("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),oG=Ba("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),sG=wm(DF,rG,oG),aG=Ba("script,style,template"),AM=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let i=e.firstChild,t=!0,r=[];for(;i;){if(i.nodeType===Node.ELEMENT_NODE?t=this.startElement(i):i.nodeType===Node.TEXT_NODE?this.chars(i.nodeValue):this.sanitizedSomething=!0,t&&i.firstChild){r.push(i),i=dG(i);continue}for(;i;){i.nodeType===Node.ELEMENT_NODE&&this.endElement(i);let o=lG(i);if(o){i=o;break}i=r.pop()}}return this.buf.join("")}startElement(e){let i=kP(e).toLowerCase();if(!PP.hasOwnProperty(i))return this.sanitizedSomething=!0,!aG.hasOwnProperty(i);this.buf.push("<"),this.buf.push(i);let t=e.attributes;for(let r=0;r<t.length;r++){let o=t.item(r),s=o.name,a=s.toLowerCase();if(!sG.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;DF[a]&&(c=j_(c)),this.buf.push(" ",s,'="',FP(c),'"')}return this.buf.push(">"),!0}endElement(e){let i=kP(e).toLowerCase();PP.hasOwnProperty(i)&&!TF.hasOwnProperty(i)&&(this.buf.push("</"),this.buf.push(i),this.buf.push(">"))}chars(e){this.buf.push(FP(e))}};function cG(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function lG(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw AF(e);return e}function dG(n){let e=n.firstChild;if(e&&cG(n,e))throw AF(e);return e}function kP(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function AF(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var uG=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hG=/([^\#-~ |!])/g;function FP(n){return n.replace(/&/g,"&amp;").replace(uG,function(e){let i=e.charCodeAt(0),t=e.charCodeAt(1);return"&#"+((i-55296)*1024+(t-56320)+65536)+";"}).replace(hG,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Ub;function IF(n,e){let i=null;try{Ub=Ub||K5(n);let t=e?String(e):"";i=Ub.getInertBodyElement(t);let r=5,o=t;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,t=o,o=i.innerHTML,i=Ub.getInertBodyElement(t)}while(t!==o);let a=new AM().sanitizeChildren(jP(i)||i);return F_(a)}finally{if(i){let t=jP(i)||i;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function jP(n){return"content"in n&&fG(n)?n.content:null}function fG(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var sr=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(sr||{});function mG(n){let e=kF();return e?e.sanitize(sr.URL,n)||"":Uc(n,"URL")?Vo(n):j_(x_(n))}function pG(n){let e=kF();if(e)return IP(e.sanitize(sr.RESOURCE_URL,n)||"");if(Uc(n,"ResourceURL"))return IP(Vo(n));throw new je(904,!1)}function O_(n){return Y5(n[0])}function gG(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?pG:mG}function PF(n,e,i){return gG(e,i)(n)}function kF(){let n=Bt();return n&&n[as].sanitizer}var bG=/^>|^->|<!--|-->|--!>|<!-$/g,_G=/(<|>)/g,vG="\u200B$1\u200B";function yG(n){return n.replace(bG,e=>e.replace(_G,vG))}function BS(n){return n.ownerDocument.defaultView}function Zu(n){return n.ownerDocument}function FF(n){return n instanceof Function?n():n}function xG(n){return(n??te(_r)).get(Vr)==="browser"}var Us=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Us||{}),wG;function US(n,e){return wG(n,e)}function Pu(n,e,i,t,r){if(t!=null){let o,s=!1;La(t)?o=t:Gl(t)&&(s=!0,t=t[Vs]);let a=Ls(t);n===0&&i!==null?r==null?BF(e,i,a):s_(e,i,a,r||null,!0):n===1&&i!==null?s_(e,i,a,r||null,!0):n===2?LG(e,a,s):n===3&&e.destroyNode(a),o!=null&&UG(e,n,o,i,r)}}function MG(n,e){return n.createText(e)}function SG(n,e,i){n.setValue(e,i)}function RG(n,e){return n.createComment(yG(e))}function jF(n,e,i){return n.createElement(e,i)}function TG(n,e){OF(n,e),e[Vs]=null,e[xo]=null}function CG(n,e,i,t,r,o){t[Vs]=r,t[xo]=e,B_(n,t,i,1,r,o)}function OF(n,e){e[as].changeDetectionScheduler?.notify(1),B_(n,e,e[mn],2,null,null)}function EG(n){let e=n[am];if(!e)return Kw(n[Wt],n);for(;e;){let i=null;if(Gl(e))i=e[am];else{let t=e[wr];t&&(i=t)}if(!i){for(;e&&!e[ss]&&e!==n;)Gl(e)&&Kw(e[Wt],e),e=e[pr];e===null&&(e=n),Gl(e)&&Kw(e[Wt],e),i=e&&e[ss]}e=i}}function DG(n,e,i,t){let r=wr+t,o=i.length;t>0&&(i[r-1][ss]=e),t<o-wr?(e[ss]=i[r],gk(i,wr+t,e)):(i.push(e),e[ss]=null),e[pr]=i;let s=e[vm];s!==null&&i!==s&&AG(s,e);let a=e[Fa];a!==null&&a.insertView(n),pM(e),e[jt]|=128}function AG(n,e){let i=n[Vu],r=e[pr][pr][Lo];e[Lo]!==r&&(n[jt]|=SS.HasTransplantedViews),i===null?n[Vu]=[e]:i.push(e)}function NF(n,e){let i=n[Vu],t=i.indexOf(e);i.splice(t,1)}function dm(n,e){if(n.length<=wr)return;let i=wr+e,t=n[i];if(t){let r=t[vm];r!==null&&r!==n&&NF(r,t),e>0&&(n[i-1][ss]=t[ss]);let o=Jb(n,wr+e);TG(t[Wt],t);let s=o[Fa];s!==null&&s.detachView(o[Wt]),t[pr]=null,t[ss]=null,t[jt]&=-129}return t}function N_(n,e){if(!(e[jt]&256)){let i=e[mn];i.destroyNode&&B_(n,e,i,3,null,null),EG(e)}}function Kw(n,e){if(e[jt]&256)return;let i=bi(null);try{e[jt]&=-129,e[jt]|=256,e[ql]&&Aw(e[ql]),PG(n,e),IG(n,e),e[Wt].type===1&&e[mn].destroy();let t=e[vm];if(t!==null&&La(e[pr])){t!==e[pr]&&NF(t,e);let r=e[Fa];r!==null&&r.detachView(n)}z5(e)}finally{bi(i)}}function IG(n,e){let i=n.cleanup,t=e[sm];if(i!==null)for(let o=0;o<i.length-1;o+=2)if(typeof i[o]=="string"){let s=i[o+3];s>=0?t[s]():t[-s].unsubscribe(),o+=2}else{let s=t[i[o+1]];i[o].call(s)}t!==null&&(e[sm]=null);let r=e[Fc];if(r!==null){e[Fc]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function PG(n,e){let i;if(n!=null&&(i=n.destroyHooks)!=null)for(let t=0;t<i.length;t+=2){let r=e[i[t]];if(!(r instanceof Zl)){let o=i[t+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],c=o[s+1];js(4,a,c);try{c.call(a)}finally{js(5,a,c)}}else{js(4,r,o);try{o.call(r)}finally{js(5,r,o)}}}}}function LF(n,e,i){return kG(n,e.parent,i)}function kG(n,e,i){let t=e;for(;t!==null&&t.type&40;)e=t,t=e.parent;if(t===null)return i[Vs];{let{componentOffset:r}=t;if(r>-1){let{encapsulation:o}=n.data[t.directiveStart+r];if(o===Ns.None||o===Ns.Emulated)return null}return Uo(t,i)}}function s_(n,e,i,t,r){n.insertBefore(e,i,t,r)}function BF(n,e,i){n.appendChild(e,i)}function OP(n,e,i,t,r){t!==null?s_(n,e,i,t,r):BF(n,e,i)}function FG(n,e,i,t){n.removeChild(e,i,t)}function VS(n,e){return n.parentNode(e)}function jG(n,e){return n.nextSibling(e)}function UF(n,e,i){return NG(n,e,i)}function OG(n,e,i){return n.type&40?Uo(n,i):null}var NG=OG,NP;function L_(n,e,i,t){let r=LF(n,t,e),o=e[mn],s=t.parent||e[xo],a=UF(s,t,e);if(r!=null)if(Array.isArray(i))for(let c=0;c<i.length;c++)OP(o,r,i[c],a,!1);else OP(o,r,i,a,!1);NP!==void 0&&NP(o,t,e,i,r)}function Yb(n,e){if(e!==null){let i=e.type;if(i&3)return Uo(e,n);if(i&4)return IM(-1,n[e.index]);if(i&8){let t=e.child;if(t!==null)return Yb(n,t);{let r=n[e.index];return La(r)?IM(-1,r):Ls(r)}}else{if(i&32)return US(e,n)()||Ls(n[e.index]);{let t=VF(n,e);if(t!==null){if(Array.isArray(t))return t[0];let r=lm(n[Lo]);return Yb(r,t)}else return Yb(n,e.next)}}}return null}function VF(n,e){if(e!==null){let t=n[Lo][xo],r=e.projection;return t.projection[r]}return null}function IM(n,e){let i=wr+n+1;if(i<e.length){let t=e[i],r=t[Wt].firstChild;if(r!==null)return Yb(t,r)}return e[Xl]}function LG(n,e,i){let t=VS(n,e);t&&FG(n,t,e,i)}function zS(n,e,i,t,r,o,s){for(;i!=null;){let a=t[i.index],c=i.type;if(s&&e===0&&(a&&Oc(Ls(a),t),i.flags|=2),(i.flags&32)!==32)if(c&8)zS(n,e,i.child,t,r,o,!1),Pu(e,n,r,a,o);else if(c&32){let l=US(i,t),d;for(;d=l();)Pu(e,n,r,d,o);Pu(e,n,r,a,o)}else c&16?zF(n,e,t,i,r,o):Pu(e,n,r,a,o);i=s?i.projectionNext:i.next}}function B_(n,e,i,t,r,o){zS(i,t,n.firstChild,e,r,o,!1)}function BG(n,e,i){let t=e[mn],r=LF(n,i,e),o=i.parent||e[xo],s=UF(o,i,e);zF(t,0,e,i,r,s)}function zF(n,e,i,t,r,o){let s=i[Lo],c=s[xo].projection[t.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Pu(e,n,r,d,o)}else{let l=c,d=s[pr];fF(t)&&(l.flags|=128),zS(n,e,l,d,r,o,!0)}}function UG(n,e,i,t,r){let o=i[Xl],s=Ls(i);o!==s&&Pu(e,n,t,o,r);for(let a=wr;a<i.length;a++){let c=i[a];B_(c[Wt],c,n,e,t,o)}}function VG(n,e,i,t,r){if(e)r?n.addClass(i,t):n.removeClass(i,t);else{let o=t.indexOf("-")===-1?void 0:Us.DashCase;r==null?n.removeStyle(i,t,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Us.Important),n.setStyle(i,t,r,o))}}function zG(n,e,i){n.setAttribute(e,"style",i)}function HF(n,e,i){i===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",i)}function GF(n,e,i){let{mergedAttrs:t,classes:r,styles:o}=i;t!==null&&dM(n,e,t),r!==null&&HF(n,e,r),o!==null&&zG(n,e,o)}var zs={};function j(n=1){WF(pn(),Bt(),Lc()+n,!1)}function WF(n,e,i,t){if(!t)if((e[jt]&3)===3){let o=n.preOrderCheckHooks;o!==null&&$b(e,o,i)}else{let o=n.preOrderHooks;o!==null&&qb(e,o,0,i)}Yl(i)}function F(n,e=mi.Default){let i=Bt();if(i===null)return de(n,e);let t=br();return aF(t,i,Lr(n),e)}function Qu(){let n="invalid";throw new Error(n)}function $F(n,e,i,t,r,o){let s=bi(null);try{let a=null;r&ut.SignalBased&&(a=e[t][es]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&ut.HasDecoratorInputTransform&&(o=n.inputTransforms[t].call(e,o)),n.setInput!==null?n.setInput(e,a,o,i,t):Ok(e,a,t,o)}finally{bi(s)}}function HG(n,e){let i=n.hostBindingOpCodes;if(i!==null)try{for(let t=0;t<i.length;t++){let r=i[t];if(r<0)Yl(~r);else{let o=r,s=i[++t],a=i[++t];m5(s,o);let c=e[o];a(2,c)}}}finally{Yl(-1)}}function U_(n,e,i,t,r,o,s,a,c,l,d){let u=e.blueprint.slice();return u[Vs]=r,u[jt]=t|4|128|8|64,(l!==null||n&&n[jt]&2048)&&(u[jt]|=2048),Vk(u),u[pr]=u[Xu]=n,u[xr]=i,u[as]=s||n&&n[as],u[mn]=a||n&&n[mn],u[Uu]=c||n&&n[Uu]||null,u[xo]=o,u[T_]=U5(),u[Bu]=d,u[jk]=l,u[Lo]=e.type==2?n[Lo]:u,u}function Ku(n,e,i,t,r){let o=n.data[e];if(o===null)o=GG(n,e,i,t,r),f5()&&(o.flags|=32);else if(o.type&64){o.type=i,o.value=t,o.attrs=r;let s=d5();o.injectorIndex=s===null?-1:s.injectorIndex}return td(o,!0),o}function GG(n,e,i,t,r){let o=Wk(),s=AS(),a=s?o:o&&o.parent,c=n.data[e]=ZG(n,a,i,e,t,r);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function qF(n,e,i,t){if(i===0)return-1;let r=e.length;for(let o=0;o<i;o++)e.push(t),n.blueprint.push(t),n.data.push(null);return r}function XF(n,e,i,t,r){let o=Lc(),s=t&2;try{Yl(-1),s&&e.length>gr&&WF(n,e,gr,!1),js(s?2:0,r),i(t,r)}finally{Yl(o),js(s?3:1,r)}}function HS(n,e,i){if(RS(e)){let t=bi(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=i[s];a.contentQueries(1,c,s)}}}finally{bi(t)}}}function GS(n,e,i){Hk()&&(iW(n,e,i,Uo(i,e)),(i.flags&64)===64&&QF(n,e,i))}function WS(n,e,i=Uo){let t=e.localNames;if(t!==null){let r=e.index+1;for(let o=0;o<t.length;o+=2){let s=t[o+1],a=s===-1?i(e,n):n[s];n[r++]=a}}}function YF(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=$S(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function $S(n,e,i,t,r,o,s,a,c,l,d){let u=gr+t,h=u+r,f=WG(u,h),p=typeof l=="function"?l():l;return f[Wt]={type:n,blueprint:f,template:i,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:d}}function WG(n,e){let i=[];for(let t=0;t<e;t++)i.push(t<n?null:zs);return i}function $G(n,e,i,t){let o=t.get(X5,vF)||i===Ns.ShadowDom,s=n.selectRootElement(e,o);return qG(s),s}function qG(n){XG(n)}var XG=()=>null;function YG(n,e,i,t){let r=ej(e);r.push(i),n.firstCreatePass&&tj(n).push(t,r.length-1)}function ZG(n,e,i,t,r,o){let s=e?e.injectorIndex:-1,a=0;return Gk()&&(a|=128),{type:i,index:t,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function LP(n,e,i,t,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;t??={};let a,c=ut.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(r!==null){if(!r.hasOwnProperty(o))continue;l=r[o]}n===0?BP(t,i,l,a,c):BP(t,i,l,a)}return t}function BP(n,e,i,t,r){let o;n.hasOwnProperty(i)?(o=n[i]).push(e,t):o=n[i]=[e,t],r!==void 0&&o.push(r)}function QG(n,e,i){let t=e.directiveStart,r=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let d=t;d<r;d++){let u=o[d],h=i?i.get(u):null,f=h?h.inputs:null,p=h?h.outputs:null;c=LP(0,u.inputs,d,c,f),l=LP(1,u.outputs,d,l,p);let b=c!==null&&s!==null&&!yS(e)?fW(c,d,s):null;a.push(b)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function KG(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function qS(n,e,i,t,r,o,s,a){let c=Uo(e,i),l=e.inputs,d;!a&&l!=null&&(d=l[t])?(YS(n,i,d,t,r),C_(e)&&JG(i,e.index)):e.type&3?(t=KG(t),r=s!=null?s(r,e.value||"",t):r,o.setProperty(c,t,r)):e.type&12}function JG(n,e){let i=Nc(e,n);i[jt]&16||(i[jt]|=64)}function XS(n,e,i,t){if(Hk()){let r=t===null?null:{"":-1},o=rW(n,i),s,a;o===null?s=a=null:[s,a]=o,s!==null&&ZF(n,e,i,s,r,a),r&&oW(i,t,r)}i.mergedAttrs=rm(i.mergedAttrs,i.attrs)}function ZF(n,e,i,t,r,o){for(let l=0;l<t.length;l++)_M(o_(i,e),n,t[l].type);aW(i,n.data.length,t.length);for(let l=0;l<t.length;l++){let d=t[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=qF(n,e,t.length,null);for(let l=0;l<t.length;l++){let d=t[l];i.mergedAttrs=rm(i.mergedAttrs,d.hostAttrs),cW(n,i,e,c,d),sW(c,d,r),d.contentQueries!==null&&(i.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(i.flags|=64);let u=d.type.prototype;!s&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((n.preOrderHooks??=[]).push(i.index),s=!0),!a&&(u.ngOnChanges||u.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(i.index),a=!0),c++}QG(n,i,o)}function eW(n,e,i,t,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;tW(s)!=a&&s.push(a),s.push(i,t,o)}}function tW(n){let e=n.length;for(;e>0;){let i=n[--e];if(typeof i=="number"&&i<0)return i}return 0}function iW(n,e,i,t){let r=i.directiveStart,o=i.directiveEnd;C_(i)&&lW(e,i,n.data[r+i.componentOffset]),n.firstCreatePass||o_(i,e),Oc(t,e);let s=i.initialInputs;for(let a=r;a<o;a++){let c=n.data[a],l=Ql(e,n,a,i);if(Oc(l,e),s!==null&&hW(e,a-r,l,c,i,s),ja(c)){let d=Nc(i.index,e);d[xr]=Ql(e,n,a,i)}}}function QF(n,e,i){let t=i.directiveStart,r=i.directiveEnd,o=i.index,s=p5();try{Yl(o);for(let a=t;a<r;a++){let c=n.data[a],l=e[a];gM(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&nW(c,l)}}finally{Yl(-1),gM(s)}}function nW(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function rW(n,e){let i=n.directiveRegistry,t=null,r=null;if(i)for(let o=0;o<i.length;o++){let s=i[o];if(wk(e,s.selectors,!1))if(t||(t=[]),ja(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),t.unshift(...a,s);let c=a.length;PM(n,e,c)}else t.unshift(s),PM(n,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,t,r),t.push(s)}return t===null?null:[t,r]}function PM(n,e,i){e.componentOffset=i,(n.components??=[]).push(e.index)}function oW(n,e,i){if(e){let t=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=i[e[r+1]];if(o==null)throw new je(-301,!1);t.push(e[r],o)}}}function sW(n,e,i){if(i){if(e.exportAs)for(let t=0;t<e.exportAs.length;t++)i[e.exportAs[t]]=n;ja(e)&&(i[""]=n)}}function aW(n,e,i){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+i,n.providerIndexes=e}function cW(n,e,i,t,r){n.data[t]=r;let o=r.factory||(r.factory=$l(r.type,!0)),s=new Zl(o,ja(r),F);n.blueprint[t]=s,i[t]=s,eW(n,e,t,qF(n,i,r.hostVars,zs),r)}function lW(n,e,i){let t=Uo(e,n),r=YF(i),o=n[as].rendererFactory,s=16;i.signals?s=4096:i.onPush&&(s=64);let a=V_(n,U_(n,r,null,s,t,e,null,o.createRenderer(t,i),null,null,null));n[e.index]=a}function dW(n,e,i,t,r,o){let s=Uo(n,e);uW(e[mn],s,o,n.value,i,t,r)}function uW(n,e,i,t,r,o,s){if(o==null)n.removeAttribute(e,r,i);else{let a=s==null?x_(o):s(o,t||"",r);n.setAttribute(e,r,a,i)}}function hW(n,e,i,t,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],d=s[a++],u=s[a++];$F(t,i,c,l,d,u)}}function fW(n,e,i){let t=null,r=0;for(;r<i.length;){let o=i[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){t===null&&(t=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){t.push(o,s[a+1],s[a+2],i[r+1]);break}}r+=2}return t}function KF(n,e,i,t){return[n,!0,0,e,null,t,null,i,null,null]}function JF(n,e){let i=n.contentQueries;if(i!==null){let t=bi(null);try{for(let r=0;r<i.length;r+=2){let o=i[r],s=i[r+1];if(s!==-1){let a=n.data[s];kS(o),a.contentQueries(2,e[s],s)}}}finally{bi(t)}}}function V_(n,e){return n[am]?n[MP][ss]=e:n[am]=e,n[MP]=e,e}function kM(n,e,i){kS(0);let t=bi(null);try{e(n,i)}finally{bi(t)}}function ej(n){return n[sm]||(n[sm]=[])}function tj(n){return n.cleanup||(n.cleanup=[])}function ij(n,e,i){return(n===null||ja(n))&&(i=JH(i[e.index])),i[mn]}function nj(n,e){let i=n[Uu],t=i?i.get(Ur,null):null;t&&t.handleError(e)}function YS(n,e,i,t,r){for(let o=0;o<i.length;){let s=i[o++],a=i[o++],c=i[o++],l=e[s],d=n.data[s];$F(d,l,t,a,c,r)}}function mW(n,e,i){let t=Uk(e,n);SG(n[mn],t,i)}function pW(n,e){let i=Nc(e,n),t=i[Wt];gW(t,i);let r=i[Vs];r!==null&&i[Bu]===null&&(i[Bu]=LS(r,i[Uu])),ZS(t,i,i[xr])}function gW(n,e){for(let i=e.length;i<n.blueprint.length;i++)e.push(n.blueprint[i])}function ZS(n,e,i){FS(e);try{let t=n.viewQuery;t!==null&&kM(1,t,i);let r=n.template;r!==null&&XF(n,e,r,1,i),n.firstCreatePass&&(n.firstCreatePass=!1),e[Fa]?.finishViewCreation(n),n.staticContentQueries&&JF(n,e),n.staticViewQueries&&kM(2,n.viewQuery,i);let o=n.components;o!==null&&bW(e,o)}catch(t){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),t}finally{e[jt]&=-5,jS()}}function bW(n,e){for(let i=0;i<e.length;i++)pW(n,e[i])}function z_(n,e,i,t){let r=bi(null);try{let o=e.tView,a=n[jt]&4096?4096:16,c=U_(n,o,i,a,null,e,null,null,t?.injector??null,t?.embeddedViewInjector??null,t?.dehydratedView??null),l=n[e.index];c[vm]=l;let d=n[Fa];return d!==null&&(c[Fa]=d.createEmbeddedView(o)),ZS(o,c,i),c}finally{bi(r)}}function rj(n,e){let i=wr+e;if(i<n.length)return n[i]}function um(n,e){return!e||e.firstChild===null||fF(n)}function H_(n,e,i,t=!0){let r=e[Wt];if(DG(r,e,n,i),t){let s=IM(i,n),a=e[mn],c=VS(a,n[Xl]);c!==null&&CG(r,n[xo],a,e,c,s)}let o=e[Bu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function oj(n,e){let i=dm(n,e);return i!==void 0&&N_(i[Wt],i),i}function a_(n,e,i,t,r=!1){for(;i!==null;){let o=e[i.index];o!==null&&t.push(Ls(o)),La(o)&&_W(o,t);let s=i.type;if(s&8)a_(n,e,i.child,t);else if(s&32){let a=US(i,e),c;for(;c=a();)t.push(c)}else if(s&16){let a=VF(e,i);if(Array.isArray(a))t.push(...a);else{let c=lm(e[Lo]);a_(c[Wt],c,a,t,!0)}}i=r?i.projectionNext:i.next}return t}function _W(n,e){for(let i=wr;i<n.length;i++){let t=n[i],r=t[Wt].firstChild;r!==null&&a_(t[Wt],t,r,e)}n[Xl]!==n[Vs]&&e.push(n[Xl])}var sj=[];function vW(n){return n[ql]??yW(n)}function yW(n){let e=sj.pop()??Object.create(wW);return e.lView=n,e}function xW(n){n.lView[ql]!==n&&(n.lView=null,sj.push(n))}var wW=pi(ve({},Xf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{cm(n.lView)},consumerOnSignalRead(){this.lView[ql]=this}}),aj=100;function cj(n,e=!0,i=0){let t=n[as],r=t.rendererFactory,o=!1;o||r.begin?.();try{MW(n,i)}catch(s){throw e&&nj(n,s),s}finally{o||(r.end?.(),t.inlineEffectRunner?.flush())}}function MW(n,e){FM(n,e);let i=0;for(;DS(n);){if(i===aj)throw new je(103,!1);i++,FM(n,1)}}function SW(n,e,i,t){let r=e[jt];if((r&256)===256)return;let o=!1;!o&&e[as].inlineEffectRunner?.flush(),FS(e);let s=null,a=null;!o&&RW(n)&&(a=vW(e),s=ob(a));try{Vk(e),h5(n.bindingStartIndex),i!==null&&XF(n,e,i,2,t);let c=(r&3)===3;if(!o)if(c){let u=n.preOrderCheckHooks;u!==null&&$b(e,u,null)}else{let u=n.preOrderHooks;u!==null&&qb(e,u,0,null),Xw(e,0)}if(TW(e),lj(e,0),n.contentQueries!==null&&JF(n,e),!o)if(c){let u=n.contentCheckHooks;u!==null&&$b(e,u)}else{let u=n.contentHooks;u!==null&&qb(e,u,1),Xw(e,1)}HG(n,e);let l=n.components;l!==null&&uj(e,l,0);let d=n.viewQuery;if(d!==null&&kM(2,d,t),!o)if(c){let u=n.viewCheckHooks;u!==null&&$b(e,u)}else{let u=n.viewHooks;u!==null&&qb(e,u,2),Xw(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Wb]){for(let u of e[Wb])u();e[Wb]=null}o||(e[jt]&=-73)}catch(c){throw cm(e),c}finally{a!==null&&(sb(a,s),xW(a)),jS()}}function RW(n){return n.type!==2}function lj(n,e){for(let i=pF(n);i!==null;i=gF(i))for(let t=wr;t<i.length;t++){let r=i[t];dj(r,e)}}function TW(n){for(let e=pF(n);e!==null;e=gF(e)){if(!(e[jt]&SS.HasTransplantedViews))continue;let i=e[Vu];for(let t=0;t<i.length;t++){let r=i[t],o=r[pr];i5(r)}}}function CW(n,e,i){let t=Nc(e,n);dj(t,i)}function dj(n,e){ES(n)&&FM(n,e)}function FM(n,e){let t=n[Wt],r=n[jt],o=n[ql],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&ab(o)),o&&(o.dirty=!1),n[jt]&=-9217,s)SW(t,n,t.template,n[xr]);else if(r&8192){lj(n,1);let a=t.components;a!==null&&uj(n,a,1)}}function uj(n,e,i){for(let t=0;t<e.length;t++)CW(n,e[t],i)}function QS(n){for(n[as].changeDetectionScheduler?.notify();n;){n[jt]|=64;let e=lm(n);if(WH(n)&&!e)return n;n=e}return null}var Kl=class{get rootNodes(){let e=this._lView,i=e[Wt];return a_(i,e,i.firstChild,[])}constructor(e,i,t=!0){this._lView=e,this._cdRefInjectingView=i,this.notifyErrorHandler=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[xr]}set context(e){this._lView[xr]=e}get destroyed(){return(this._lView[jt]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[pr];if(La(e)){let i=e[t_],t=i?i.indexOf(this):-1;t>-1&&(dm(e,t),Jb(i,t))}this._attachedToViewContainer=!1}N_(this._lView[Wt],this._lView)}onDestroy(e){zk(this._lView,e)}markForCheck(){QS(this._cdRefInjectingView||this._lView)}detach(){this._lView[jt]&=-129}reattach(){pM(this._lView),this._lView[jt]|=128}detectChanges(){this._lView[jt]|=1024,cj(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new je(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,OF(this._lView[Wt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new je(902,!1);this._appRef=e,pM(this._lView)}},or=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=AW;let n=e;return n})(),EW=or,DW=class extends EW{constructor(e,i,t){super(),this._declarationLView=e,this._declarationTContainer=i,this.elementRef=t}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,i){return this.createEmbeddedViewImpl(e,i)}createEmbeddedViewImpl(e,i,t){let r=z_(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:i,dehydratedView:t});return new Kl(r)}};function AW(){return G_(br(),Bt())}function G_(n,e){return n.type&4?new DW(e,n,Yu(n,e)):null}var k_e=new RegExp(`^(\\d+)*(${$5}|${W5})*(.*)`);var IW=()=>null;function hm(n,e){return IW(n,e)}var Hu=class{},jM=class{},c_=class{};function PW(n){let e=Error(`No component factory found for ${Br(n)}.`);return e[kW]=n,e}var kW="ngComponent";var OM=class{resolveComponentFactory(e){throw PW(e)}},Hs=(()=>{let e=class e{};e.NULL=new OM;let n=e;return n})(),Jl=class{},Gs=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>FW();let n=e;return n})();function FW(){let n=Bt(),e=br(),i=Nc(e.index,n);return(Gl(i)?i:n)[mn]}var jW=(()=>{let e=class e{};e.\u0275prov=we({token:e,providedIn:"root",factory:()=>null});let n=e;return n})(),Jw={};var UP=new Set;function Ws(n){UP.has(n)||(UP.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var ku=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ku||{}),OW={destroy(){}};function W_(n,e){!e&&Fk(W_);let i=e?.injector??te(_r);if(!xG(i))return OW;Ws("NgAfterNextRender");let t=i.get(KS),r=t.handler??=new LM,o=e?.phase??ku.MixedReadWrite,s=()=>{r.unregister(c),a()},a=i.get(k_).onDestroy(s),c=cs(i,()=>new NM(o,()=>{s(),n()}));return r.register(c),{destroy:s}}var NM=class{constructor(e,i){this.phase=e,this.callbackFn=i,this.errorHandler=te(Ur,{optional:!0}),te(Hu,{optional:!0})?.notify(1)}invoke(){try{this.callbackFn()}catch(e){this.errorHandler?.handleError(e)}}},LM=class{constructor(){this.executingCallbacks=!1,this.buckets={[ku.EarlyRead]:new Set,[ku.Write]:new Set,[ku.MixedReadWrite]:new Set,[ku.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let i of e)i.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},KS=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=we({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();function l_(n,e,i){let t=i?n.styles:null,r=i?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=sM(r,a);else if(o==2){let c=a,l=e[++s];t=sM(t,c+": "+l+";")}}i?n.styles=t:n.stylesWithoutHost=t,i?n.classes=r:n.classesWithoutHost=r}var d_=class extends Hs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let i=jc(e);return new Gu(i,this.ngModule)}};function VP(n){let e=[];for(let i in n){if(!n.hasOwnProperty(i))continue;let t=n[i];t!==void 0&&e.push({propName:Array.isArray(t)?t[0]:t,templateName:i})}return e}function NW(n){let e=n.toLowerCase();return e==="svg"?YH:e==="math"?ZH:null}var BM=class{constructor(e,i){this.injector=e,this.parentInjector=i}get(e,i,t){t=w_(t);let r=this.injector.get(e,Jw,t);return r!==Jw||i===Jw?r:this.parentInjector.get(e,i,t)}},Gu=class extends c_{get inputs(){let e=this.componentDef,i=e.inputTransforms,t=VP(e.inputs);if(i!==null)for(let r of t)i.hasOwnProperty(r.propName)&&(r.transform=i[r.propName]);return t}get outputs(){return VP(this.componentDef.outputs)}constructor(e,i){super(),this.componentDef=e,this.ngModule=i,this.componentType=e.type,this.selector=CH(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!i}create(e,i,t,r){let o=bi(null);try{r=r||this.ngModule;let s=r instanceof Mr?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new BM(e,s):e,c=a.get(Jl,null);if(c===null)throw new je(407,!1);let l=a.get(jW,null),d=a.get(KS,null),u=a.get(Hu,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:u},f=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",b=t?$G(f,t,this.componentDef.encapsulation,a):jF(f,p,NW(p)),g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let m=null;b!==null&&(m=LS(b,a,!0));let v=$S(0,null,null,1,0,null,null,null,null,null,null),_=U_(null,v,null,g,null,null,h,f,a,null,m);FS(_);let y,C;try{let R=this.componentDef,M,A=null;R.findHostDirectiveDefs?(M=[],A=new Map,R.findHostDirectiveDefs(R,M,A),M.push(R)):M=[R];let T=LW(_,b),x=BW(T,b,R,M,_,h,f);C=TS(v,gr),b&&zW(f,R,b,t),i!==void 0&&HW(C,this.ngContentSelectors,i),y=VW(x,R,M,A,_,[GW]),ZS(v,_,null)}finally{jS()}return new UM(this.componentType,y,Yu(C,_),_,C)}finally{bi(o)}}},UM=class extends jM{constructor(e,i,t,r,o){super(),this.location=t,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new Kl(r,void 0,!1),this.componentType=e}setInput(e,i){let t=this._tNode.inputs,r;if(t!==null&&(r=t[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),i))return;let o=this._rootLView;YS(o[Wt],o,r,e,i),this.previousInputValues.set(e,i);let s=Nc(this._tNode.index,o);QS(s)}}get injector(){return new Wl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function LW(n,e){let i=n[Wt],t=gr;return n[t]=e,Ku(i,t,2,"#host",null)}function BW(n,e,i,t,r,o,s){let a=r[Wt];UW(t,n,e,s);let c=null;e!==null&&(c=LS(e,r[Uu]));let l=o.rendererFactory.createRenderer(e,i),d=16;i.signals?d=4096:i.onPush&&(d=64);let u=U_(r,YF(i),null,d,r[n.index],n,o,l,null,null,c);return a.firstCreatePass&&PM(a,n,t.length-1),V_(r,u),r[n.index]=u}function UW(n,e,i,t){for(let r of n)e.mergedAttrs=rm(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(l_(e,e.mergedAttrs,!0),i!==null&&GF(t,i,e))}function VW(n,e,i,t,r,o){let s=br(),a=r[Wt],c=Uo(s,r);ZF(a,r,s,i,null,t);for(let d=0;d<i.length;d++){let u=s.directiveStart+d,h=Ql(r,a,u,s);Oc(h,r)}QF(a,r,s),c&&Oc(c,r);let l=Ql(r,a,s.directiveStart+s.componentOffset,s);if(n[xr]=r[xr]=l,o!==null)for(let d of o)d(l,e);return HS(a,s,r),l}function zW(n,e,i,t){if(t)dM(n,i,["ng-version","17.3.7"]);else{let{attrs:r,classes:o}=EH(e.selectors[0]);r&&dM(n,i,r),o&&o.length>0&&HF(n,i,o.join(" "))}}function HW(n,e,i){let t=n.projection=[];for(let r=0;r<e.length;r++){let o=i[r];t.push(o!=null?Array.from(o):null)}}function GW(){let n=br();P_(Bt()[Wt],n)}var Wn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=WW;let n=e;return n})();function WW(){let n=br();return fj(n,Bt())}var $W=Wn,hj=class extends $W{constructor(e,i,t){super(),this._lContainer=e,this._hostTNode=i,this._hostLView=t}get element(){return Yu(this._hostTNode,this._hostLView)}get injector(){return new Wl(this._hostTNode,this._hostLView)}get parentInjector(){let e=OS(this._hostTNode,this._hostLView);if(tF(e)){let i=n_(e,this._hostLView),t=i_(e),r=i[Wt].data[t+8];return new Wl(r,i)}else return new Wl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let i=zP(this._lContainer);return i!==null&&i[e]||null}get length(){return this._lContainer.length-wr}createEmbeddedView(e,i,t){let r,o;typeof t=="number"?r=t:t!=null&&(r=t.index,o=t.injector);let s=hm(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(i||{},o,s);return this.insertImpl(a,r,um(this._hostTNode,s)),a}createComponent(e,i,t,r,o){let s=e&&!GH(e),a;if(s)a=i;else{let p=i||{};a=p.index,t=p.injector,r=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let c=s?e:new Gu(jc(e)),l=t||this.parentInjector;if(!o&&c.ngModule==null){let b=(s?l:this.parentInjector).get(Mr,null);b&&(o=b)}let d=jc(c.componentType??{}),u=hm(this._lContainer,d?.id??null),h=u?.firstChild??null,f=c.create(l,r,h,o);return this.insertImpl(f.hostView,a,um(this._hostTNode,u)),f}insert(e,i){return this.insertImpl(e,i,!0)}insertImpl(e,i,t){let r=e._lView;if(t5(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[pr],l=new hj(c,c[xo],c[pr]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(i),s=this._lContainer;return H_(s,r,o,t),e.attachToViewContainerRef(),gk(eM(s),o,e),e}move(e,i){return this.insert(e,i)}indexOf(e){let i=zP(this._lContainer);return i!==null?i.indexOf(e):-1}remove(e){let i=this._adjustIndex(e,-1),t=dm(this._lContainer,i);t&&(Jb(eM(this._lContainer),i),N_(t[Wt],t))}detach(e){let i=this._adjustIndex(e,-1),t=dm(this._lContainer,i);return t&&Jb(eM(this._lContainer),i)!=null?new Kl(t):null}_adjustIndex(e,i=0){return e??this.length+i}};function zP(n){return n[t_]}function eM(n){return n[t_]||(n[t_]=[])}function fj(n,e){let i,t=e[n.index];return La(t)?i=t:(i=KF(t,e,null,n),e[n.index]=i,V_(e,i)),XW(i,e,n,t),new hj(i,n,e)}function qW(n,e){let i=n[mn],t=i.createComment(""),r=Uo(e,n),o=VS(i,r);return s_(i,o,t,jG(i,r),!1),t}var XW=QW,YW=()=>!1;function ZW(n,e,i){return YW(n,e,i)}function QW(n,e,i,t){if(n[Xl])return;let r;i.type&8?r=Ls(t):r=qW(e,i),n[Xl]=r}var VM=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},zM=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let i=e.queries;if(i!==null){let t=e.contentQueries!==null?e.contentQueries[0]:i.length,r=[];for(let o=0;o<t;o++){let s=i.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let i=0;i<this.queries.length;i++)JS(e,i).matches!==null&&this.queries[i].setDirty()}},u_=class{constructor(e,i,t=null){this.flags=i,this.read=t,typeof e=="string"?this.predicate=o8(e):this.predicate=e}},HM=class n{constructor(e=[]){this.queries=e}elementStart(e,i){for(let t=0;t<this.queries.length;t++)this.queries[t].elementStart(e,i)}elementEnd(e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(e)}embeddedTView(e){let i=null;for(let t=0;t<this.length;t++){let r=i!==null?i.length:0,o=this.getByIndex(t).embeddedTView(e,r);o&&(o.indexInDeclarationView=t,i!==null?i.push(o):i=[o])}return i!==null?new n(i):null}template(e,i){for(let t=0;t<this.queries.length;t++)this.queries[t].template(e,i)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},GM=class n{constructor(e,i=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(e,i){this.isApplyingToNode(i)&&this.matchTNode(e,i)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,i){this.elementStart(e,i)}embeddedTView(e,i){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,i),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let i=this._declarationNodeIndex,t=e.parent;for(;t!==null&&t.type&8&&t.index!==i;)t=t.parent;return i===(t!==null?t.index:-1)}return this._appliesToNextNode}matchTNode(e,i){let t=this.metadata.predicate;if(Array.isArray(t))for(let r=0;r<t.length;r++){let o=t[r];this.matchTNodeWithReadOption(e,i,KW(i,o)),this.matchTNodeWithReadOption(e,i,Xb(i,e,o,!1,!1))}else t===or?i.type&4&&this.matchTNodeWithReadOption(e,i,-1):this.matchTNodeWithReadOption(e,i,Xb(i,e,t,!1,!1))}matchTNodeWithReadOption(e,i,t){if(t!==null){let r=this.metadata.read;if(r!==null)if(r===et||r===Wn||r===or&&i.type&4)this.addMatch(i.index,-2);else{let o=Xb(i,e,r,!1,!1);o!==null&&this.addMatch(i.index,o)}else this.addMatch(i.index,t)}}addMatch(e,i){this.matches===null?this.matches=[e,i]:this.matches.push(e,i)}};function KW(n,e){let i=n.localNames;if(i!==null){for(let t=0;t<i.length;t+=2)if(i[t]===e)return i[t+1]}return null}function JW(n,e){return n.type&11?Yu(n,e):n.type&4?G_(n,e):null}function e8(n,e,i,t){return i===-1?JW(e,n):i===-2?t8(n,e,t):Ql(n,n[Wt],i,e)}function t8(n,e,i){if(i===et)return Yu(e,n);if(i===or)return G_(e,n);if(i===Wn)return fj(e,n)}function mj(n,e,i,t){let r=e[Fa].queries[t];if(r.matches===null){let o=n.data,s=i.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let d=o[l];a.push(e8(e,d,s[c+1],i.metadata.read))}}r.matches=a}return r.matches}function WM(n,e,i,t){let r=n.queries.getByIndex(i),o=r.matches;if(o!==null){let s=mj(n,e,r,i);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)t.push(s[a/2]);else{let l=o[a+1],d=e[-c];for(let u=wr;u<d.length;u++){let h=d[u];h[vm]===h[pr]&&WM(h[Wt],h,l,t)}if(d[Vu]!==null){let u=d[Vu];for(let h=0;h<u.length;h++){let f=u[h];WM(f[Wt],f,l,t)}}}}}return t}function i8(n,e){return n[Fa].queries[e].queryList}function pj(n,e,i){let t=new Bs((i&4)===4);return YG(n,e,t,t.destroy),(e[Fa]??=new zM).queries.push(new VM(t))-1}function n8(n,e,i){let t=pn();return t.firstCreatePass&&(gj(t,new u_(n,e,i),-1),(e&2)===2&&(t.staticViewQueries=!0)),pj(t,Bt(),e)}function r8(n,e,i,t){let r=pn();if(r.firstCreatePass){let o=br();gj(r,new u_(e,i,t),o.index),s8(r,n),(i&2)===2&&(r.staticContentQueries=!0)}return pj(r,Bt(),i)}function o8(n){return n.split(",").map(e=>e.trim())}function gj(n,e,i){n.queries===null&&(n.queries=new HM),n.queries.track(new GM(e,i))}function s8(n,e){let i=n.contentQueries||(n.contentQueries=[]),t=i.length?i[i.length-1]:-1;e!==t&&i.push(n.queries.length-1,e)}function JS(n,e){return n.queries.getByIndex(e)}function a8(n,e){let i=n[Wt],t=JS(i,e);return t.crossesNgTemplate?WM(i,n,e,[]):mj(i,n,t,e)}function $_(n){return typeof n=="function"&&n[es]!==void 0}function eR(n,e){Ws("NgSignals");let i=LI(n),t=i[es];return e?.equal&&(t.equal=e.equal),i.set=r=>lb(t,r),i.update=r=>BI(t,r),i.asReadonly=c8.bind(i),i}function c8(){let n=this[es];if(n.readonlyFn===void 0){let e=()=>this();e[es]=n,n.readonlyFn=e}return n.readonlyFn}function bj(n){return $_(n)&&typeof n.set=="function"}function l8(n){let e=[],i=new Map;function t(r){let o=i.get(r);if(!o){let s=n(r);i.set(r,o=s.then(f8))}return o}return h_.forEach((r,o)=>{let s=[];r.templateUrl&&s.push(t(r.templateUrl).then(l=>{r.template=l}));let a=typeof r.styles=="string"?[r.styles]:r.styles||[];if(r.styles=a,r.styleUrl&&r.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(r.styleUrls?.length){let l=r.styles.length,d=r.styleUrls;r.styleUrls.forEach((u,h)=>{a.push(""),s.push(t(u).then(f=>{a[l+h]=f,d.splice(d.indexOf(u),1),d.length==0&&(r.styleUrls=void 0)}))})}else r.styleUrl&&s.push(t(r.styleUrl).then(l=>{a.push(l),r.styleUrl=void 0}));let c=Promise.all(s).then(()=>m8(o));e.push(c)}),u8(),Promise.all(e).then(()=>{})}var h_=new Map,d8=new Set;function u8(){let n=h_;return h_=new Map,n}function h8(){return h_.size===0}function f8(n){return typeof n=="string"?n:n.text()}function m8(n){d8.delete(n)}function p8(n){return Object.getPrototypeOf(n.prototype).constructor}function q(n){let e=p8(n.type),i=!0,t=[n];for(;e;){let r;if(ja(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new je(903,!1);r=e.\u0275dir}if(r){if(i){t.push(r);let s=n;s.inputs=Vb(n.inputs),s.inputTransforms=Vb(n.inputTransforms),s.declaredInputs=Vb(n.declaredInputs),s.outputs=Vb(n.outputs);let a=r.hostBindings;a&&y8(n,a);let c=r.viewQuery,l=r.contentQueries;if(c&&_8(n,c),l&&v8(n,l),g8(n,r),$4(n.outputs,r.outputs),ja(r)&&r.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===q&&(i=!1)}}e=Object.getPrototypeOf(e)}b8(t)}function g8(n,e){for(let i in e.inputs){if(!e.inputs.hasOwnProperty(i)||n.inputs.hasOwnProperty(i))continue;let t=e.inputs[i];if(t!==void 0&&(n.inputs[i]=t,n.declaredInputs[i]=e.declaredInputs[i],e.inputTransforms!==null)){let r=Array.isArray(t)?t[0]:t;if(!e.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=e.inputTransforms[r]}}}function b8(n){let e=0,i=null;for(let t=n.length-1;t>=0;t--){let r=n[t];r.hostVars=e+=r.hostVars,r.hostAttrs=rm(r.hostAttrs,i=rm(i,r.hostAttrs))}}function Vb(n){return n===Ou?{}:n===eo?[]:n}function _8(n,e){let i=n.viewQuery;i?n.viewQuery=(t,r)=>{e(t,r),i(t,r)}:n.viewQuery=e}function v8(n,e){let i=n.contentQueries;i?n.contentQueries=(t,r,o)=>{e(t,r,o),i(t,r,o)}:n.contentQueries=e}function y8(n,e){let i=n.hostBindings;i?n.hostBindings=(t,r)=>{e(t,r),i(t,r)}:n.hostBindings=e}function ln(n){let e=n.inputConfig,i={};for(let t in e)if(e.hasOwnProperty(t)){let r=e[t];Array.isArray(r)&&r[3]&&(i[t]=r[3])}n.inputTransforms=i}var Na=class{},fm=class{};function _j(n,e){return new mm(n,e??null,[])}var mm=class extends Na{constructor(e,i,t){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new d_(this);let r=Tk(e);this._bootstrapComponents=FF(r.bootstrap),this._r3Injector=dF(e,i,[{provide:Na,useValue:this},{provide:Hs,useValue:this.componentFactoryResolver},...t],Br(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},f_=class extends fm{constructor(e){super(),this.moduleType=e}create(e){return new mm(this.moduleType,e,[])}};function x8(n,e,i){return new mm(n,e,i)}var $M=class extends Na{constructor(e){super(),this.componentFactoryResolver=new d_(this),this.instance=null;let i=new om([...e.providers,{provide:Na,useValue:this},{provide:Hs,useValue:this.componentFactoryResolver}],e.parent||wS(),e.debugName,new Set(["environment"]));this.injector=i,e.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function q_(n,e,i=null){return new $M({providers:n,parent:e,debugName:i,runEnvironmentInitializers:!0}).injector}var Vc=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Mn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function vj(n){return tR(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function w8(n,e){if(Array.isArray(n))for(let i=0;i<n.length;i++)e(n[i]);else{let i=n[Symbol.iterator](),t;for(;!(t=i.next()).done;)e(t.value)}}function tR(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Mm(n,e,i){return n[e]=i}function M8(n,e){return n[e]}function yo(n,e,i){let t=n[e];return Object.is(t,i)?!1:(n[e]=i,!0)}function m_(n,e,i,t){let r=yo(n,e,i);return yo(n,e+1,t)||r}function S8(n,e,i,t,r){let o=m_(n,e,i,t);return yo(n,e+2,r)||o}function R8(n,e,i,t,r,o){let s=m_(n,e,i,t);return m_(n,e+2,r,o)||s}function T8(n){return(n.flags&32)===32}function C8(n,e,i,t,r,o,s,a,c){let l=e.consts,d=Ku(e,n,4,s||null,zu(l,a));XS(e,i,d,zu(l,c)),P_(e,d);let u=d.tView=$S(2,d,t,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),u.queries=e.queries.embeddedTView(d)),d}function Vt(n,e,i,t,r,o,s,a){let c=Bt(),l=pn(),d=n+gr,u=l.firstCreatePass?C8(d,l,c,e,i,t,r,o,s):l.data[d];td(u,!1);let h=E8(l,c,u,n);A_()&&L_(l,c,h,u),Oc(h,c);let f=KF(h,c,h,u);return c[d]=f,V_(c,f),ZW(f,u,c),E_(u)&&GS(l,c,u),s!=null&&WS(c,u,a),Vt}var E8=D8;function D8(n,e,i,t){return I_(!0),e[mn].createComment("")}function HP(...n){}function A8(){let n=typeof mr.requestAnimationFrame=="function",e=mr[n?"requestAnimationFrame":"setTimeout"],i=mr[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&i){let t=e[Zone.__symbol__("OriginalDelegate")];t&&(e=t);let r=i[Zone.__symbol__("OriginalDelegate")];r&&(i=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:i}}var Qe=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:t=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nt(!1),this.onMicrotaskEmpty=new nt(!1),this.onStable=new nt(!1),this.onError=new nt(!1),typeof Zone>"u")throw new je(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!t&&i,r.shouldCoalesceRunChangeDetection=t,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=A8().nativeRequestAnimationFrame,k8(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new je(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new je(909,!1)}run(e,i,t){return this._inner.run(e,i,t)}runTask(e,i,t,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,I8,HP,HP);try{return o.runTask(s,i,t)}finally{o.cancelTask(s)}}runGuarded(e,i,t){return this._inner.runGuarded(e,i,t)}runOutsideAngular(e){return this._outer.run(e)}},I8={};function iR(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function P8(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(mr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,qM(n),n.isCheckStableRunning=!0,iR(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),qM(n))}function k8(n){let e=()=>{P8(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,t,r,o,s,a)=>{if(F8(a))return i.invokeTask(r,o,s,a);try{return GP(n),i.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),WP(n)}},onInvoke:(i,t,r,o,s,a,c)=>{try{return GP(n),i.invoke(r,o,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),WP(n)}},onHasTask:(i,t,r,o)=>{i.hasTask(r,o),t===r&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,qM(n),iR(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,t,r,o)=>(i.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function qM(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function GP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function WP(n){n._nesting--,iR(n)}var XM=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new nt,this.onMicrotaskEmpty=new nt,this.onStable=new nt,this.onError=new nt}run(e,i,t){return e.apply(i,t)}runGuarded(e,i,t){return e.apply(i,t)}runOutsideAngular(e){return e()}runTask(e,i,t,r){return e.apply(i,t)}};function F8(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}function j8(n="zone.js",e){return n==="noop"?new XM:n==="zone.js"?new Qe(e):n}function Hi(n,e,i,t){let r=Bt(),o=nd();if(yo(r,o,e)){let s=pn(),a=D_();dW(a,r,n,e,i,t)}return Hi}function O8(n,e,i,t){return yo(n,nd(),i)?e+x_(i)+t:zs}function zb(n,e){return n<<17|e<<2}function ed(n){return n>>17&32767}function N8(n){return(n&2)==2}function L8(n,e){return n&131071|e<<17}function YM(n){return n|2}function Wu(n){return(n&131068)>>2}function tM(n,e){return n&-131069|e<<2}function B8(n){return(n&1)===1}function ZM(n){return n|1}function U8(n,e,i,t,r,o){let s=o?e.classBindings:e.styleBindings,a=ed(s),c=Wu(s);n[t]=i;let l=!1,d;if(Array.isArray(i)){let u=i;d=u[1],(d===null||_m(u,d)>0)&&(l=!0)}else d=i;if(r)if(c!==0){let h=ed(n[a+1]);n[t+1]=zb(h,a),h!==0&&(n[h+1]=tM(n[h+1],t)),n[a+1]=L8(n[a+1],t)}else n[t+1]=zb(a,0),a!==0&&(n[a+1]=tM(n[a+1],t)),a=t;else n[t+1]=zb(c,0),a===0?a=t:n[c+1]=tM(n[c+1],t),c=t;l&&(n[t+1]=YM(n[t+1])),$P(n,d,t,!0),$P(n,d,t,!1),V8(e,d,n,t,o),s=zb(a,c),o?e.classBindings=s:e.styleBindings=s}function V8(n,e,i,t,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&_m(o,e)>=0&&(i[t+1]=ZM(i[t+1]))}function $P(n,e,i,t){let r=n[i+1],o=e===null,s=t?ed(r):Wu(r),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];z8(c,e)&&(a=!0,n[s+1]=t?ZM(l):YM(l)),s=t?ed(l):Wu(l)}a&&(n[i+1]=t?YM(r):ZM(r))}function z8(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?_m(n,e)>=0:!1}var Qn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function yj(n){return n.substring(Qn.key,Qn.keyEnd)}function H8(n){return n.substring(Qn.value,Qn.valueEnd)}function G8(n){return Mj(n),xj(n,$u(n,0,Qn.textEnd))}function xj(n,e){let i=Qn.textEnd;return i===e?-1:(e=Qn.keyEnd=$8(n,Qn.key=e,i),$u(n,e,i))}function W8(n){return Mj(n),wj(n,$u(n,0,Qn.textEnd))}function wj(n,e){let i=Qn.textEnd,t=Qn.key=$u(n,e,i);return i===t?-1:(t=Qn.keyEnd=q8(n,t,i),t=qP(n,t,i,58),t=Qn.value=$u(n,t,i),t=Qn.valueEnd=X8(n,t,i),qP(n,t,i,59))}function Mj(n){Qn.key=0,Qn.keyEnd=0,Qn.value=0,Qn.valueEnd=0,Qn.textEnd=n.length}function $u(n,e,i){for(;e<i&&n.charCodeAt(e)<=32;)e++;return e}function $8(n,e,i){for(;e<i&&n.charCodeAt(e)>32;)e++;return e}function q8(n,e,i){let t;for(;e<i&&((t=n.charCodeAt(e))===45||t===95||(t&-33)>=65&&(t&-33)<=90||t>=48&&t<=57);)e++;return e}function qP(n,e,i,t){return e=$u(n,e,i),e<i&&e++,e}function X8(n,e,i){let t=-1,r=-1,o=-1,s=e,a=s;for(;s<i;){let c=n.charCodeAt(s++);if(c===59)return a;c===34||c===39?a=s=XP(n,c,s,i):e===s-4&&o===85&&r===82&&t===76&&c===40?a=s=XP(n,41,s,i):c>32&&(a=s),o=r,r=t,t=c&-33}return a}function XP(n,e,i,t){let r=-1,o=i;for(;o<t;){let s=n.charCodeAt(o++);if(s==e&&r!==92)return o;s==92&&r===92?r=0:r=s}throw new Error}function P(n,e,i){let t=Bt(),r=nd();if(yo(t,r,e)){let o=pn(),s=D_();qS(o,s,t,n,e,t[mn],i,!1)}return P}function QM(n,e,i,t,r){let o=e.inputs,s=r?"class":"style";YS(n,i,o[s],s,t)}function zo(n,e,i){return Sj(n,e,i,!1),zo}function $t(n,e){return Sj(n,e,null,!0),$t}function X_(n){Rj(Ej,Y8,n,!1)}function Y8(n,e){for(let i=W8(e);i>=0;i=wj(e,i))Ej(n,yj(e),H8(e))}function Ho(n){Rj(i6,Z8,n,!0)}function Z8(n,e){for(let i=G8(e);i>=0;i=xj(e,i))M_(n,yj(e),!0)}function Sj(n,e,i,t){let r=Bt(),o=pn(),s=$k(2);if(o.firstUpdatePass&&Cj(o,n,s,t),e!==zs&&yo(r,s,e)){let a=o.data[Lc()];Dj(o,a,r,r[mn],n,r[s+1]=r6(e,i),t,s)}}function Rj(n,e,i,t){let r=pn(),o=$k(2);r.firstUpdatePass&&Cj(r,null,o,t);let s=Bt();if(i!==zs&&yo(s,o,i)){let a=r.data[Lc()];if(Aj(a,t)&&!Tj(r,o)){let c=t?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(i=sM(c,i||"")),QM(r,a,s,i,t)}else n6(r,a,s,s[mn],s[o+1],s[o+1]=t6(n,e,i),t,o)}}function Tj(n,e){return e>=n.expandoStartIndex}function Cj(n,e,i,t){let r=n.data;if(r[i+1]===null){let o=r[Lc()],s=Tj(n,i);Aj(o,t)&&e===null&&!s&&(e=!1),e=Q8(r,o,e,t),U8(r,o,e,i,s,t)}}function Q8(n,e,i,t){let r=PS(n),o=t?e.residualClasses:e.residualStyles;if(r===null)(t?e.classBindings:e.styleBindings)===0&&(i=iM(null,n,e,i,t),i=pm(i,e.attrs,t),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==r)if(i=iM(r,n,e,i,t),o===null){let c=K8(n,e,t);c!==void 0&&Array.isArray(c)&&(c=iM(null,n,e,c[1],t),c=pm(c,e.attrs,t),J8(n,e,t,c))}else o=e6(n,e,t)}return o!==void 0&&(t?e.residualClasses=o:e.residualStyles=o),i}function K8(n,e,i){let t=i?e.classBindings:e.styleBindings;if(Wu(t)!==0)return n[ed(t)]}function J8(n,e,i,t){let r=i?e.classBindings:e.styleBindings;n[ed(r)]=t}function e6(n,e,i){let t,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;t=pm(t,s,i)}return pm(t,e.attrs,i)}function iM(n,e,i,t,r){let o=null,s=i.directiveEnd,a=i.directiveStylingLast;for(a===-1?a=i.directiveStart:a++;a<s&&(o=e[a],t=pm(t,o.hostAttrs,r),o!==n);)a++;return n!==null&&(i.directiveStylingLast=a),t}function pm(n,e,i){let t=i?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===t&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),M_(n,s,i?!0:e[++o]))}return n===void 0?null:n}function t6(n,e,i){if(i==null||i==="")return eo;let t=[],r=Vo(i);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(t,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(t,o,r[o]);else typeof r=="string"&&e(t,r);return t}function Ej(n,e,i){M_(n,e,Vo(i))}function i6(n,e,i){let t=String(e);t!==""&&!t.includes(" ")&&M_(n,t,i)}function n6(n,e,i,t,r,o,s,a){r===zs&&(r=eo);let c=0,l=0,d=0<r.length?r[0]:null,u=0<o.length?o[0]:null;for(;d!==null||u!==null;){let h=c<r.length?r[c+1]:void 0,f=l<o.length?o[l+1]:void 0,p=null,b;d===u?(c+=2,l+=2,h!==f&&(p=u,b=f)):u===null||d!==null&&d<u?(c+=2,p=d):(l+=2,p=u,b=f),p!==null&&Dj(n,e,i,t,p,b,s,a),d=c<r.length?r[c]:null,u=l<o.length?o[l]:null}}function Dj(n,e,i,t,r,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=B8(l)?YP(c,e,i,r,Wu(l),s):void 0;if(!p_(d)){p_(o)||N8(l)&&(o=YP(c,null,i,r,a,s));let u=Uk(Lc(),i);VG(t,s,u,r,o)}}function YP(n,e,i,t,r,o){let s=e===null,a;for(;r>0;){let c=n[r],l=Array.isArray(c),d=l?c[1]:c,u=d===null,h=i[r+1];h===zs&&(h=u?eo:void 0);let f=u?$w(h,t):d===t?h:void 0;if(l&&!p_(f)&&(f=$w(c,t)),p_(f)&&(a=f,s))return a;let p=n[r+1];r=s?ed(p):Wu(p)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=$w(c,t))}return a}function p_(n){return n!==void 0}function r6(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Br(Vo(n)))),n}function Aj(n,e){return(n.flags&(e?8:16))!==0}var KM=class{destroy(e){}updateValue(e,i){}swap(e,i){let t=Math.min(e,i),r=Math.max(e,i),o=this.detach(r);if(r-t>1){let s=this.detach(t);this.attach(t,o),this.attach(r,s)}else this.attach(t,o)}move(e,i){this.attach(i,this.detach(e))}};function nM(n,e,i,t,r){return n===i&&Object.is(e,t)?1:Object.is(r(n,e),r(i,t))?-1:0}function o6(n,e,i){let t,r,o=0,s=n.length-1;if(Array.isArray(e)){let a=e.length-1;for(;o<=s&&o<=a;){let c=n.at(o),l=e[o],d=nM(o,c,o,l,i);if(d!==0){d<0&&n.updateValue(o,l),o++;continue}let u=n.at(s),h=e[a],f=nM(s,u,a,h,i);if(f!==0){f<0&&n.updateValue(s,h),s--,a--;continue}let p=i(o,c),b=i(s,u),g=i(o,l);if(Object.is(g,b)){let m=i(a,h);Object.is(m,p)?(n.swap(o,s),n.updateValue(s,h),a--,s--):n.move(s,o),n.updateValue(o,l),o++;continue}if(t??=new g_,r??=QP(n,o,s,i),JM(n,t,o,g))n.updateValue(o,l),o++,s++;else if(r.has(g))t.set(p,n.detach(o)),s--;else{let m=n.create(o,e[o]);n.attach(o,m),o++,s++}}for(;o<=a;)ZP(n,t,i,o,e[o]),o++}else if(e!=null){let a=e[Symbol.iterator](),c=a.next();for(;!c.done&&o<=s;){let l=n.at(o),d=c.value,u=nM(o,l,o,d,i);if(u!==0)u<0&&n.updateValue(o,d),o++,c=a.next();else{t??=new g_,r??=QP(n,o,s,i);let h=i(o,d);if(JM(n,t,o,h))n.updateValue(o,d),o++,s++,c=a.next();else if(!r.has(h))n.attach(o,n.create(o,d)),o++,s++,c=a.next();else{let f=i(o,l);t.set(f,n.detach(o)),s--}}}for(;!c.done;)ZP(n,t,i,n.length,c.value),c=a.next()}for(;o<=s;)n.destroy(n.detach(s--));t?.forEach(a=>{n.destroy(a)})}function JM(n,e,i,t){return e!==void 0&&e.has(t)?(n.attach(i,e.get(t)),e.delete(t),!0):!1}function ZP(n,e,i,t,r){if(JM(n,e,t,i(t,r)))n.updateValue(t,r);else{let o=n.create(t,r);n.attach(t,o)}}function QP(n,e,i,t){let r=new Set;for(let o=e;o<=i;o++)r.add(t(o,n.at(o)));return r}var g_=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let i=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(i)?(this.kvMap.set(e,this._vMap.get(i)),this._vMap.delete(i)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,i){if(this.kvMap.has(e)){let t=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(t);)t=r.get(t);r.set(t,i)}else this.kvMap.set(e,i)}forEach(e){for(let[i,t]of this.kvMap)if(e(t,i),this._vMap!==void 0){let r=this._vMap;for(;r.has(t);)t=r.get(t),e(t,i)}}};function wo(n,e,i){Ws("NgControlFlow");let t=Bt(),r=nd(),o=nS(t,gr+n),s=0;if(yo(t,r,e)){let a=bi(null);try{if(oj(o,s),e!==-1){let c=rS(t[Wt],gr+e),l=hm(o,c.tView.ssrId),d=z_(t,c,i,{dehydratedView:l});H_(o,d,s,um(c,l))}}finally{bi(a)}}else{let a=rj(o,s);a!==void 0&&(a[xr]=i)}}var eS=class{constructor(e,i,t){this.lContainer=e,this.$implicit=i,this.$index=t}get $count(){return this.lContainer.length-wr}};function Y_(n,e){return e}var tS=class{constructor(e,i,t){this.hasEmptyBlock=e,this.trackByFn=i,this.liveCollection=t}};function Z_(n,e,i,t,r,o,s,a,c,l,d,u,h){Ws("NgControlFlow");let f=c!==void 0,p=Bt(),b=a?s.bind(p[Lo][xr]):s,g=new tS(f,b);p[gr+n]=g,Vt(n+1,e,i,t,r,o),f&&Vt(n+2,c,l,d,u,h)}var iS=class extends KM{constructor(e,i,t){super(),this.lContainer=e,this.hostLView=i,this.templateTNode=t,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-wr}at(e){return this.getLView(e)[xr].$implicit}attach(e,i){let t=i[Bu];this.needsIndexUpdate||=e!==this.length,H_(this.lContainer,i,e,um(this.templateTNode,t))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,s6(this.lContainer,e)}create(e,i){let t=hm(this.lContainer,this.templateTNode.tView.ssrId);return z_(this.hostLView,this.templateTNode,new eS(this.lContainer,i,e),{dehydratedView:t})}destroy(e){N_(e[Wt],e)}updateValue(e,i){this.getLView(e)[xr].$implicit=i}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[xr].$index=e}getLView(e){return a6(this.lContainer,e)}};function Q_(n){let e=bi(null),i=Lc();try{let t=Bt(),r=t[Wt],o=t[i];if(o.liveCollection===void 0){let a=i+1,c=nS(t,a),l=rS(r,a);o.liveCollection=new iS(c,t,l)}else o.liveCollection.reset();let s=o.liveCollection;if(o6(s,n,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let a=nd(),c=s.length===0;if(yo(t,a,c)){let l=i+2,d=nS(t,l);if(c){let u=rS(r,l),h=hm(d,u.tView.ssrId),f=z_(t,u,void 0,{dehydratedView:h});H_(d,f,0,um(u,h))}else oj(d,0)}}}finally{bi(e)}}function nS(n,e){return n[e]}function s6(n,e){return dm(n,e)}function a6(n,e){return rj(n,e)}function rS(n,e){return TS(n,e)}function c6(n,e,i,t,r,o){let s=e.consts,a=zu(s,r),c=Ku(e,n,2,t,a);return XS(e,i,c,zu(s,o)),c.attrs!==null&&l_(c,c.attrs,!1),c.mergedAttrs!==null&&l_(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function H(n,e,i,t){let r=Bt(),o=pn(),s=gr+n,a=r[mn],c=o.firstCreatePass?c6(s,o,r,e,i,t):o.data[s],l=l6(o,r,c,a,e,n);r[s]=l;let d=E_(c);return td(c,!0),GF(a,l,c),!T8(c)&&A_()&&L_(o,r,l,c),o5()===0&&Oc(l,r),s5(),d&&(GS(o,r,c),HS(o,c,r)),t!==null&&WS(r,c),H}function J(){let n=br();AS()?IS():(n=n.parent,td(n,!1));let e=n;c5(e)&&l5(),a5();let i=pn();return i.firstCreatePass&&(P_(i,n),RS(n)&&i.queries.elementEnd(n)),e.classesWithoutHost!=null&&w5(e)&&QM(i,e,Bt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&M5(e)&&QM(i,e,Bt(),e.stylesWithoutHost,!1),J}function fe(n,e,i,t){return H(n,e,i,t),J(),fe}var l6=(n,e,i,t,r,o)=>(I_(!0),jF(t,r,_5()));function d6(n,e,i,t,r){let o=e.consts,s=zu(o,t),a=Ku(e,n,8,"ng-container",s);s!==null&&l_(a,s,!0);let c=zu(o,r);return XS(e,i,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Ij(n,e,i){let t=Bt(),r=pn(),o=n+gr,s=r.firstCreatePass?d6(o,r,t,e,i):r.data[o];td(s,!0);let a=u6(r,t,s,n);return t[o]=a,A_()&&L_(r,t,a,s),Oc(a,t),E_(s)&&(GS(r,t,s),HS(r,s,t)),i!=null&&WS(t,s),Ij}function Pj(){let n=br(),e=pn();return AS()?IS():(n=n.parent,td(n,!1)),e.firstCreatePass&&(P_(e,n),RS(n)&&e.queries.elementEnd(n)),Pj}function Ju(n,e,i){return Ij(n,e,i),Pj(),Ju}var u6=(n,e,i,t)=>(I_(!0),RG(e[mn],""));function Zt(){return Bt()}function nR(n,e,i){let t=Bt(),r=nd();if(yo(t,r,e)){let o=pn(),s=D_(),a=PS(o.data),c=ij(a,s,t);qS(o,s,t,n,e,c,i,!0)}return nR}var b_="en-US";var h6=b_;function f6(n){typeof n=="string"&&(h6=n.toLowerCase().replace(/_/g,"-"))}function Le(n,e,i,t){let r=Bt(),o=pn(),s=br();return oR(o,r,r[mn],s,n,e,t),Le}function rR(n,e){let i=br(),t=Bt(),r=pn(),o=PS(r.data),s=ij(o,i,t);return oR(r,t,s,i,n,e),rR}function m6(n,e,i,t){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===i&&r[o+1]===t){let a=e[sm],c=r[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function oR(n,e,i,t,r,o,s){let a=E_(t),l=n.firstCreatePass&&tj(n),d=e[xr],u=ej(e),h=!0;if(t.type&3||s){let b=Uo(t,e),g=s?s(b):b,m=u.length,v=s?y=>s(Ls(y[t.index])):t.index,_=null;if(!s&&a&&(_=m6(n,e,r,t.index)),_!==null){let y=_.__ngLastListenerFn__||_;y.__ngNextListenerFn__=o,_.__ngLastListenerFn__=o,h=!1}else{o=JP(t,e,d,o,!1);let y=i.listen(g,r,o);u.push(o,y),l&&l.push(r,v,m,m+1)}}else o=JP(t,e,d,o,!1);let f=t.outputs,p;if(h&&f!==null&&(p=f[r])){let b=p.length;if(b)for(let g=0;g<b;g+=2){let m=p[g],v=p[g+1],C=e[m][v].subscribe(o),R=u.length;u.push(o,C),l&&l.push(r,t.index,R,-(R+1))}}}function KP(n,e,i,t){let r=bi(null);try{return js(6,e,i),i(t)!==!1}catch(o){return nj(n,o),!1}finally{js(7,e,i),bi(r)}}function JP(n,e,i,t,r){return function o(s){if(s===Function)return t;let a=n.componentOffset>-1?Nc(n.index,e):e;QS(a);let c=KP(e,i,t,s),l=o.__ngNextListenerFn__;for(;l;)c=KP(e,i,l,s)&&c,l=l.__ngNextListenerFn__;return r&&c===!1&&s.preventDefault(),c}}function qt(n=1){return b5(n)}function p6(n,e){let i=null,t=wH(n);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){i=r;continue}if(t===null?wk(n,o,!0):RH(t,o))return r}return i}function ae(n){let e=Bt()[Lo][xo];if(!e.projection){let i=n?n.length:1,t=e.projection=fH(i,null),r=t.slice(),o=e.child;for(;o!==null;){let s=n?p6(o,n):0;s!==null&&(r[s]?r[s].projectionNext=o:t[s]=o,r[s]=o),o=o.next}}}function Q(n,e=0,i){let t=Bt(),r=pn(),o=Ku(r,gr+n,16,null,i||null);o.projection===null&&(o.projection=e),IS(),(!t[Bu]||Gk())&&(o.flags&32)!==32&&BG(r,t,o)}function Yi(n,e,i,t){r8(n,e,i,t)}function Xt(n,e,i){n8(n,e,i)}function at(n){let e=Bt(),i=pn(),t=qk();kS(t+1);let r=JS(i,t);if(n.dirty&&e5(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=a8(e,t);n.reset(o,N5),n.notifyOnChanges()}return!0}return!1}function ct(){return i8(Bt(),qk())}function g6(n,e,i,t){i>=n.data.length&&(n.data[i]=null,n.blueprint[i]=null),e[i]=t}function At(n){let e=u5();return CS(e,gr+n)}function kt(n,e=""){let i=Bt(),t=pn(),r=n+gr,o=t.firstCreatePass?Ku(t,r,1,e,null):t.data[r],s=b6(t,i,o,e,n);i[r]=s,A_()&&L_(t,i,s,o),td(o,!1)}var b6=(n,e,i,t,r)=>(I_(!0),MG(e[mn],t));function zc(n){return $s("",n,""),zc}function $s(n,e,i){let t=Bt(),r=O8(t,n,e,i);return r!==zs&&mW(t,Lc(),r),$s}function eh(n,e,i){bj(e)&&(e=e());let t=Bt(),r=nd();if(yo(t,r,e)){let o=pn(),s=D_();qS(o,s,t,n,e,t[mn],i,!1)}return eh}function Sm(n,e){let i=bj(n);return i&&n.set(e),i}function th(n,e){let i=Bt(),t=pn(),r=br();return oR(t,i,i[mn],r,n,e),th}function _6(n,e,i){let t=pn();if(t.firstCreatePass){let r=ja(n);oS(i,t.data,t.blueprint,r,!0),oS(e,t.data,t.blueprint,r,!1)}}function oS(n,e,i,t,r){if(n=Lr(n),Array.isArray(n))for(let o=0;o<n.length;o++)oS(n[o],e,i,t,r);else{let o=pn(),s=Bt(),a=br(),c=Lu(n)?n:Lr(n.provide),l=Pk(n),d=a.providerIndexes&1048575,u=a.directiveStart,h=a.providerIndexes>>20;if(Lu(n)||!n.multi){let f=new Zl(l,r,F),p=oM(c,e,r?d:d+h,u);p===-1?(_M(o_(a,s),o,c),rM(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),i.push(f),s.push(f)):(i[p]=f,s[p]=f)}else{let f=oM(c,e,d+h,u),p=oM(c,e,d,d+h),b=f>=0&&i[f],g=p>=0&&i[p];if(r&&!g||!r&&!b){_M(o_(a,s),o,c);let m=x6(r?y6:v6,i.length,r,t,l);!r&&g&&(i[p].providerFactory=m),rM(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),i.push(m),s.push(m)}else{let m=kj(i[r?p:f],l,!r&&t);rM(o,n,f>-1?f:p,m)}!r&&t&&g&&i[p].componentProviders++}}}function rM(n,e,i,t){let r=Lu(e),o=OH(e);if(r||o){let c=(o?Lr(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let d=l.indexOf(i);d===-1?l.push(i,[t,c]):l[d+1].push(t,c)}else l.push(i,c)}}}function kj(n,e,i){return i&&n.componentProviders++,n.multi.push(e)-1}function oM(n,e,i,t){for(let r=i;r<t;r++)if(e[r]===n)return r;return-1}function v6(n,e,i,t){return sS(this.multi,[])}function y6(n,e,i,t){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Ql(i,i[Wt],this.providerFactory.index,t);o=a.slice(0,s),sS(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],sS(r,o);return o}function sS(n,e){for(let i=0;i<n.length;i++){let t=n[i];e.push(t())}return e}function x6(n,e,i,t,r){let o=new Zl(n,i,F);return o.multi=[],o.index=e,o.componentProviders=0,kj(o,r,t&&!i),o}function ie(n,e=[]){return i=>{i.providersResolver=(t,r)=>_6(t,r?r(n):n,e)}}var w6=(()=>{let e=class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Dk(!1,t.type),o=r.length>0?q_([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=we({token:e,providedIn:"environment",factory:()=>new e(de(Mr))});let n=e;return n})();function Ei(n){Ws("NgStandalone"),n.getStandaloneInjector=e=>e.get(w6).getOrCreateStandaloneInjector(n)}function K(n,e,i){let t=id()+n,r=Bt();return r[t]===zs?Mm(r,t,i?e.call(i):e()):M8(r,t)}function vt(n,e,i,t){return Fj(Bt(),id(),n,e,i,t)}function $n(n,e,i,t,r){return jj(Bt(),id(),n,e,i,t,r)}function qs(n,e,i,t,r,o){return M6(Bt(),id(),n,e,i,t,r,o)}function ih(n,e,i,t,r,o,s){return S6(Bt(),id(),n,e,i,t,r,o,s)}function K_(n,e){let i=n[e];return i===zs?void 0:i}function Fj(n,e,i,t,r,o){let s=e+i;return yo(n,s,r)?Mm(n,s+1,o?t.call(o,r):t(r)):K_(n,s+1)}function jj(n,e,i,t,r,o,s){let a=e+i;return m_(n,a,r,o)?Mm(n,a+2,s?t.call(s,r,o):t(r,o)):K_(n,a+2)}function M6(n,e,i,t,r,o,s,a){let c=e+i;return S8(n,c,r,o,s)?Mm(n,c+3,a?t.call(a,r,o,s):t(r,o,s)):K_(n,c+3)}function S6(n,e,i,t,r,o,s,a,c){let l=e+i;return R8(n,l,r,o,s,a)?Mm(n,l+4,c?t.call(c,r,o,s,a):t(r,o,s,a)):K_(n,l+4)}function Fi(n,e){let i=pn(),t,r=n+gr;i.firstCreatePass?(t=R6(e,i.pipeRegistry),i.data[r]=t,t.onDestroy&&(i.destroyHooks??=[]).push(r,t.onDestroy)):t=i.data[r];let o=t.factory||(t.factory=$l(t.type,!0)),s,a=Jr(F);try{let c=r_(!1),l=o();return r_(c),g6(i,Bt(),r,l),l}finally{Jr(a)}}function R6(n,e){if(e)for(let i=e.length-1;i>=0;i--){let t=e[i];if(n===t.name)return t}}function Gi(n,e,i){let t=n+gr,r=Bt(),o=CS(r,t);return Nj(r,t)?Fj(r,id(),e,o.transform,i,o):o.transform(i)}function Oj(n,e,i,t){let r=n+gr,o=Bt(),s=CS(o,r);return Nj(o,r)?jj(o,id(),e,s.transform,i,t,s):s.transform(i,t)}function Nj(n,e){return n[Wt].data[e].pure}function Rm(n,e){return G_(n,e)}var Hb=null;function T6(n){Hb!==null&&(n.defaultEncapsulation!==Hb.defaultEncapsulation||n.preserveWhitespaces!==Hb.preserveWhitespaces)||(Hb=n)}var J_=(()=>{let e=class e{log(t){console.log(t)}warn(t){console.warn(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();var sR=new Ee(""),Tm=new Ee(""),ev=(()=>{let e=class e{constructor(t,r,o){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,aR||(C6(o),o.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,o){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:o})}whenStable(t,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,o){return[]}};e.\u0275fac=function(r){return new(r||e)(de(Qe),de(tv),de(Tm))},e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})(),tv=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return aR?.findTestabilityInTree(this,t,r)??null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();function C6(n){aR=n}var aR;function Hc(n){return!!n&&typeof n.then=="function"}function cR(n){return!!n&&typeof n.subscribe=="function"}var iv=new Ee(""),Lj=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=te(iv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let o of this.appInits){let s=o();if(Hc(s))t.push(s);else if(cR(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});t.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),t.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),nv=new Ee("");function E6(){NI(()=>{throw new je(600,!1)})}function D6(n){return n.isBoundToModule}function A6(n,e,i){try{let t=i();return Hc(t)?t.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):t}catch(t){throw e.runOutsideAngular(()=>n.handleError(t)),t}}function Bj(n,e){return Array.isArray(e)?e.reduce(Bj,n):ve(ve({},n),e)}var Ua=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=te(uF),this.afterRenderEffectManager=te(KS),this.externalTestViews=new Set,this.beforeRender=new gt,this.afterTick=new gt,this.componentTypes=[],this.components=[],this.isStable=te(Vc).hasPendingTasks.pipe(lt(t=>!t)),this._injector=te(Mr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let o=t instanceof c_;if(!this._injector.get(Lj).done){let f=!o&&Rk(t),p=!1;throw new je(405,p)}let a;o?a=t:a=this._injector.get(Hs).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=D6(a)?void 0:this._injector.get(Na),l=r||a.selector,d=a.create(_r.NULL,[],l,c),u=d.location.nativeElement,h=d.injector.get(sR,null);return h?.registerApplication(u),d.onDestroy(()=>{this.detachView(d.hostView),Zb(this.components,d),h?.unregisterApplication(u)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new je(101,!1);let r=bi(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,bi(r)}}detectChangesInAttachedViews(t){let r=0,o=this.afterRenderEffectManager;for(;;){if(r===aj)throw new je(103,!1);if(t){let s=r===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:c}of this._views)I6(a,s,c)}if(r++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>aS(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>aS(s))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Zb(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(nv,[]);[...this._bootstrapListeners,...r].forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Zb(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new je(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Zb(n,e){let i=n.indexOf(e);i>-1&&n.splice(i,1)}function I6(n,e,i){!e&&!aS(n)||P6(n,i,e)}function aS(n){return DS(n)}function P6(n,e,i){let t;i?(t=0,n[jt]|=1024):n[jt]&64?t=0:t=1,cj(n,e,t)}var cS=class{constructor(e,i){this.ngModuleFactory=e,this.componentFactories=i}},rv=(()=>{let e=class e{compileModuleSync(t){return new f_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),o=Tk(t),s=FF(o.declarations).reduce((a,c)=>{let l=jc(c);return l&&a.push(new Gu(l)),a},[]);return new cS(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),k6=new Ee("");function F6(n,e,i){let t=new f_(i);return Promise.resolve(t)}function ek(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var j6=(()=>{let e=class e{constructor(){this.zone=te(Qe),this.applicationRef=te(Ua)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function O6(n){return[{provide:Qe,useFactory:n},{provide:Nu,multi:!0,useFactory:()=>{let e=te(j6,{optional:!0});return()=>e.initialize()}},{provide:Nu,multi:!0,useFactory:()=>{let e=te(B6);return()=>{e.initialize()}}},{provide:uF,useFactory:N6}]}function N6(){let n=te(Qe),e=te(Ur);return i=>n.runOutsideAngular(()=>e.handleError(i))}function L6(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var B6=(()=>{let e=class e{constructor(){this.subscription=new _i,this.initialized=!1,this.zone=te(Qe),this.pendingTasks=te(Vc)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Qe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Qe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function U6(){return typeof $localize<"u"&&$localize.locale||b_}var ov=new Ee("",{providedIn:"root",factory:()=>te(ov,mi.Optional|mi.SkipSelf)||U6()});var Uj=new Ee(""),Vj=(()=>{let e=class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let o=j8(r?.ngZone,L6({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return o.run(()=>{let s=x8(t.moduleType,this.injector,O6(()=>o)),a=s.injector.get(Ur,null);return o.runOutsideAngular(()=>{let c=o.onError.subscribe({next:l=>{a.handleError(l)}});s.onDestroy(()=>{Zb(this._modules,s),c.unsubscribe()})}),A6(a,o,()=>{let c=s.injector.get(Lj);return c.runInitializers(),c.donePromise.then(()=>{let l=s.injector.get(ov,b_);return f6(l||b_),this._moduleDoBootstrap(s),s})})})}bootstrapModule(t,r=[]){let o=Bj({},r);return F6(this.injector,o,t).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(t){let r=t.injector.get(Ua);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(o=>r.bootstrap(o));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(r);else throw new je(-403,!1);this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new je(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Uj,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(r){return new(r||e)(de(_r))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})(),im=null,zj=new Ee("");function V6(n){if(im&&!im.get(zj,!1))throw new je(400,!1);E6(),im=n;let e=n.get(Vj);return G6(n),e}function lR(n,e,i=[]){let t=`Platform: ${e}`,r=new Ee(t);return(o=[])=>{let s=Hj();if(!s||s.injector.get(zj,!1)){let a=[...i,...o,{provide:r,useValue:!0}];n?n(a):V6(z6(a,t))}return H6(r)}}function z6(n=[],e){return _r.create({name:e,providers:[{provide:R_,useValue:"platform"},{provide:Uj,useValue:new Set([()=>im=null])},...n]})}function H6(n){let e=Hj();if(!e)throw new je(401,!1);return e}function Hj(){return im?.get(Vj)??null}function G6(n){n.get(NS,null)?.forEach(i=>i())}function Gj(){return!1}var Wi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=W6;let n=e;return n})();function W6(n){return $6(br(),Bt(),(n&16)===16)}function $6(n,e,i){if(C_(n)&&!i){let t=Nc(n.index,e);return new Kl(t,t)}else if(n.type&47){let t=e[Lo];return new Kl(t,e)}return null}var lS=class{constructor(){}supports(e){return vj(e)}create(e){return new dS(e)}},q6=(n,e)=>e,dS=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||q6}forEachItem(e){let i;for(i=this._itHead;i!==null;i=i._next)e(i)}forEachOperation(e){let i=this._itHead,t=this._removalsHead,r=0,o=null;for(;i||t;){let s=!t||i&&i.currentIndex<tk(t,r,o)?i:t,a=tk(s,r,o),c=s.currentIndex;if(s===t)r--,t=t._nextRemoved;else if(i=i._next,s.previousIndex==null)r++;else{o||(o=[]);let l=a-r,d=c-r;if(l!=d){for(let h=0;h<l;h++){let f=h<o.length?o[h]:o[h]=0,p=f+h;d<=p&&p<l&&(o[h]=f+1)}let u=s.previousIndex;o[u]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let i;for(i=this._previousItHead;i!==null;i=i._nextPrevious)e(i)}forEachAddedItem(e){let i;for(i=this._additionsHead;i!==null;i=i._nextAdded)e(i)}forEachMovedItem(e){let i;for(i=this._movesHead;i!==null;i=i._nextMoved)e(i)}forEachRemovedItem(e){let i;for(i=this._removalsHead;i!==null;i=i._nextRemoved)e(i)}forEachIdentityChange(e){let i;for(i=this._identityChangesHead;i!==null;i=i._nextIdentityChange)e(i)}diff(e){if(e==null&&(e=[]),!vj(e))throw new je(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i=this._itHead,t=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),i===null||!Object.is(i.trackById,s)?(i=this._mismatch(i,o,s,a),t=!0):(t&&(i=this._verifyReinsertion(i,o,s,a)),Object.is(i.item,o)||this._addIdentityChange(i,o)),i=i._next}else r=0,w8(e,a=>{s=this._trackByFn(r,a),i===null||!Object.is(i.trackById,s)?(i=this._mismatch(i,a,s,r),t=!0):(t&&(i=this._verifyReinsertion(i,a,s,r)),Object.is(i.item,a)||this._addIdentityChange(i,a)),i=i._next,r++}),this.length=r;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,i,t,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(t,null),e!==null?(Object.is(e.item,i)||this._addIdentityChange(e,i),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(t,r),e!==null?(Object.is(e.item,i)||this._addIdentityChange(e,i),this._moveAfter(e,o,r)):e=this._addAfter(new uS(i,t),o,r)),e}_verifyReinsertion(e,i,t,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(t,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let i=e._next;this._addToRemovals(this._unlink(e)),e=i}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,i,t){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,i,t),this._addToMoves(e,t),e}_moveAfter(e,i,t){return this._unlink(e),this._insertAfter(e,i,t),this._addToMoves(e,t),e}_addAfter(e,i,t){return this._insertAfter(e,i,t),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,i,t){let r=i===null?this._itHead:i._next;return e._next=r,e._prev=i,r===null?this._itTail=e:r._prev=e,i===null?this._itHead=e:i._next=e,this._linkedRecords===null&&(this._linkedRecords=new __),this._linkedRecords.put(e),e.currentIndex=t,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let i=e._prev,t=e._next;return i===null?this._itHead=t:i._next=t,t===null?this._itTail=i:t._prev=i,e}_addToMoves(e,i){return e.previousIndex===i||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new __),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,i){return e.item=i,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},uS=class{constructor(e,i){this.item=e,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},hS=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,i){let t;for(t=this._head;t!==null;t=t._nextDup)if((i===null||i<=t.currentIndex)&&Object.is(t.trackById,e))return t;return null}remove(e){let i=e._prevDup,t=e._nextDup;return i===null?this._head=t:i._nextDup=t,t===null?this._tail=i:t._prevDup=i,this._head===null}},__=class{constructor(){this.map=new Map}put(e){let i=e.trackById,t=this.map.get(i);t||(t=new hS,this.map.set(i,t)),t.add(e)}get(e,i){let t=e,r=this.map.get(t);return r?r.get(e,i):null}remove(e){let i=e.trackById;return this.map.get(i).remove(e)&&this.map.delete(i),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function tk(n,e,i){let t=n.previousIndex;if(t===null)return t;let r=0;return i&&t<i.length&&(r=i[t]),t+e+r}var fS=class{constructor(){}supports(e){return e instanceof Map||tR(e)}create(){return new mS}},mS=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let i;for(i=this._mapHead;i!==null;i=i._next)e(i)}forEachPreviousItem(e){let i;for(i=this._previousMapHead;i!==null;i=i._nextPrevious)e(i)}forEachChangedItem(e){let i;for(i=this._changesHead;i!==null;i=i._nextChanged)e(i)}forEachAddedItem(e){let i;for(i=this._additionsHead;i!==null;i=i._nextAdded)e(i)}forEachRemovedItem(e){let i;for(i=this._removalsHead;i!==null;i=i._nextRemoved)e(i)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||tR(e)))throw new je(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(e,(t,r)=>{if(i&&i.key===r)this._maybeAddToChanges(i,t),this._appendAfter=i,i=i._next;else{let o=this._getOrCreateRecordForKey(r,t);i=this._insertBeforeOrAppend(i,o)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let t=i;t!==null;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,i){if(e){let t=e._prev;return i._next=e,i._prev=t,e._prev=i,t&&(t._next=i),e===this._mapHead&&(this._mapHead=i),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(e,i){if(this._records.has(e)){let r=this._records.get(e);this._maybeAddToChanges(r,i);let o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}let t=new pS(e);return this._records.set(e,t),t.currentValue=i,this._addToAdditions(t),t}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,i){Object.is(i,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=i,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,i){e instanceof Map?e.forEach(i):Object.keys(e).forEach(t=>i(e[t],t))}},pS=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function ik(){return new sv([new lS])}var sv=(()=>{let e=class e{constructor(t){this.factories=t}static create(t,r){if(r!=null){let o=r.factories.slice();t=t.concat(o)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||ik()),deps:[[e,new bm,new qu]]}}find(t){let r=this.factories.find(o=>o.supports(t));if(r!=null)return r;throw new je(901,!1)}};e.\u0275prov=we({token:e,providedIn:"root",factory:ik});let n=e;return n})();function nk(){return new dR([new fS])}var dR=(()=>{let e=class e{constructor(t){this.factories=t}static create(t,r){if(r){let o=r.factories.slice();t=t.concat(o)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||nk()),deps:[[e,new bm,new qu]]}}find(t){let r=this.factories.find(o=>o.supports(t));if(r)return r;throw new je(901,!1)}};e.\u0275prov=we({token:e,providedIn:"root",factory:nk});let n=e;return n})();var Wj=lR(null,"core",[]),$j=(()=>{let e=class e{constructor(t){}};e.\u0275fac=function(r){return new(r||e)(de(Ua))},e.\u0275mod=it({type:e}),e.\u0275inj=tt({});let n=e;return n})();function Si(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function rd(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function qj(n,e){Ws("NgSignals");let i=FI(n);return e?.equal&&(i[es].equal=e.equal),i}function uR(n){let e=bi(null);try{return n()}finally{bi(e)}}var X6=new Ee("",{providedIn:"root",factory:()=>te(Y6)}),Y6=(()=>{let e=class e{};e.\u0275prov=we({token:e,providedIn:"root",factory:()=>new gS});let n=e;return n})(),gS=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=te(Vc),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let i=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(i),this.taskId=null})}}enqueue(e){let i=e.creationZone;this.queues.has(i)||this.queues.set(i,new Set);let t=this.queues.get(i);t.has(e)||(this.queuedEffectCount++,t.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,i]of this.queues)e===null?this.flushQueue(i):e.run(()=>this.flushQueue(i))}flushQueue(e){for(let i of e)e.delete(i),this.queuedEffectCount--,i.run()}},bS=class{constructor(e,i,t,r,o,s){this.scheduler=e,this.effectFn=i,this.creationZone=t,this.injector=o,this.watcher=UI(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(i){this.injector.get(Ur,null,{optional:!0})?.handleError(i)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function nh(n,e){Ws("NgSignals"),!e?.injector&&Fk(nh);let i=e?.injector??te(_r),t=e?.manualCleanup!==!0?i.get(k_):null,r=new bS(i.get(X6),n,typeof Zone>"u"?null:Zone.current,t,i,e?.allowSignalWrites??!1),o=i.get(Wi,null,{optional:!0});return!o||!(o._lView[jt]&8)?r.watcher.notify():(o._lView[Wb]??=[]).push(r.watcher.notify),r}function Xj(n){let e=jc(n);if(!e)return null;let i=new Gu(e);return{get selector(){return i.selector},get type(){return i.componentType},get inputs(){return i.inputs},get outputs(){return i.outputs},get ngContentSelectors(){return i.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var eO=null;function Xs(){return eO}function tO(n){eO??=n}var av=class{};var xt=new Ee(""),vR=(()=>{let e=class e{historyGo(t){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:()=>te(Z6),providedIn:"platform"});let n=e;return n})(),iO=new Ee(""),Z6=(()=>{let e=class e extends vR{constructor(){super(),this._doc=te(xt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xs().getBaseHref(this._doc)}onPopState(t){let r=Xs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Xs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:()=>new e,providedIn:"platform"});let n=e;return n})();function yR(n,e){if(n.length==0)return e;if(e.length==0)return n;let i=0;return n.endsWith("/")&&i++,e.startsWith("/")&&i++,i==2?n+e.substring(1):i==1?n+e:n+"/"+e}function Yj(n){let e=n.match(/#|\?|$/),i=e&&e.index||n.length,t=i-(n[i-1]==="/"?1:0);return n.slice(0,t)+n.slice(i)}function Va(n){return n&&n[0]!=="?"?"?"+n:n}var za=(()=>{let e=class e{historyGo(t){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:()=>te(xR),providedIn:"root"});let n=e;return n})(),nO=new Ee(""),xR=(()=>{let e=class e extends za{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??te(xt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return yR(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Va(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,s){let a=this.prepareExternalUrl(o+Va(s));this._platformLocation.pushState(t,r,a)}replaceState(t,r,o,s){let a=this.prepareExternalUrl(o+Va(s));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}};e.\u0275fac=function(r){return new(r||e)(de(vR),de(nO,8))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),rO=(()=>{let e=class e extends za{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=yR(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,s){let a=this.prepareExternalUrl(o+Va(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,r,a)}replaceState(t,r,o,s){let a=this.prepareExternalUrl(o+Va(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}};e.\u0275fac=function(r){return new(r||e)(de(vR),de(nO,8))},e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})(),Gc=(()=>{let e=class e{constructor(t){this._subject=new nt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=J6(Yj(Zj(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Va(r))}normalize(t){return e.stripTrailingSlash(K6(this._basePath,Zj(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Va(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Va(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}};e.normalizeQueryParams=Va,e.joinWithSlash=yR,e.stripTrailingSlash=Yj,e.\u0275fac=function(r){return new(r||e)(de(za))},e.\u0275prov=we({token:e,factory:()=>Q6(),providedIn:"root"});let n=e;return n})();function Q6(){return new Gc(de(za))}function K6(n,e){if(!n||!e.startsWith(n))return e;let i=e.substring(n.length);return i===""||["/",";","?","#"].includes(i[0])?i:e}function Zj(n){return n.replace(/\/index.html$/,"")}function J6(n){if(new RegExp("^(https?:)?//").test(n)){let[,i]=n.split(/\/\/[^\/]+/);return i}return n}function lv(n,e){e=encodeURIComponent(e);for(let i of n.split(";")){let t=i.indexOf("="),[r,o]=t==-1?[i,""]:[i.slice(0,t),i.slice(t+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var oO=(()=>{let e=class e{constructor(t){this._viewContainerRef=t,this.ngComponentOutlet=null,this._inputsUsed=new Map}_needToReCreateNgModuleInstance(t){return t.ngComponentOutletNgModule!==void 0||t.ngComponentOutletNgModuleFactory!==void 0}_needToReCreateComponentInstance(t){return t.ngComponentOutlet!==void 0||t.ngComponentOutletContent!==void 0||t.ngComponentOutletInjector!==void 0||this._needToReCreateNgModuleInstance(t)}ngOnChanges(t){if(this._needToReCreateComponentInstance(t)&&(this._viewContainerRef.clear(),this._inputsUsed.clear(),this._componentRef=void 0,this.ngComponentOutlet)){let r=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;this._needToReCreateNgModuleInstance(t)&&(this._moduleRef?.destroy(),this.ngComponentOutletNgModule?this._moduleRef=_j(this.ngComponentOutletNgModule,Qj(r)):this.ngComponentOutletNgModuleFactory?this._moduleRef=this.ngComponentOutletNgModuleFactory.create(Qj(r)):this._moduleRef=void 0),this._componentRef=this._viewContainerRef.createComponent(this.ngComponentOutlet,{injector:r,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent})}}ngDoCheck(){if(this._componentRef){if(this.ngComponentOutletInputs)for(let t of Object.keys(this.ngComponentOutletInputs))this._inputsUsed.set(t,!0);this._applyInputStateDiff(this._componentRef)}}ngOnDestroy(){this._moduleRef?.destroy()}_applyInputStateDiff(t){for(let[r,o]of this._inputsUsed)o?(t.setInput(r,this.ngComponentOutletInputs[r]),this._inputsUsed.set(r,!1)):(t.setInput(r,void 0),this._inputsUsed.delete(r))}};e.\u0275fac=function(r){return new(r||e)(F(Wn))},e.\u0275dir=$e({type:e,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInputs:"ngComponentOutletInputs",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},standalone:!0,features:[Hn]});let n=e;return n})();function Qj(n){return n.get(Na).injector}var hR=class{constructor(e,i,t,r){this.$implicit=e,this.ngForOf=i,this.index=t,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},to=(()=>{let e=class e{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((o,s,a)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new hR(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(s===null?void 0:s);else if(s!==null){let c=r.get(s);r.move(c,a),Kj(c,o)}});for(let o=0,s=r.length;o<s;o++){let c=r.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{let s=r.get(o.currentIndex);Kj(s,o)})}static ngTemplateContextGuard(t,r){return!0}};e.\u0275fac=function(r){return new(r||e)(F(Wn),F(or),F(sv))},e.\u0275dir=$e({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let n=e;return n})();function Kj(n,e){n.context.$implicit=e.item}var oh=(()=>{let e=class e{constructor(t,r){this._viewContainer=t,this._context=new fR,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Jj("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Jj("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}};e.\u0275fac=function(r){return new(r||e)(F(Wn),F(or))},e.\u0275dir=$e({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let n=e;return n})(),fR=class{constructor(){this.$implicit=null,this.ngIf=null}};function Jj(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Br(e)}'.`)}var e$=!0,mR=class{constructor(e,i){this._viewContainerRef=e,this._templateRef=i,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}},wR=(()=>{let e=class e{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){let r=e$?t===this._ngSwitch:t==this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(let r of this._defaultViews)r.enforceState(t)}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=$e({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0});let n=e;return n})(),sO=(()=>{let e=class e{constructor(t,r,o){this.ngSwitch=o,o._addCase(),this._view=new mR(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}};e.\u0275fac=function(r){return new(r||e)(F(Wn),F(or),F(wR,9))},e.\u0275dir=$e({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0});let n=e;return n})();var aO=(()=>{let e=class e{constructor(t,r,o){this._ngEl=t,this._differs=r,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[o,s]=t.split("."),a=o.indexOf("-")===-1?void 0:Us.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,o,s?`${r}${s}`:r,a):this._renderer.removeStyle(this._ngEl.nativeElement,o,a)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}};e.\u0275fac=function(r){return new(r||e)(F(et),F(dR),F(Gs))},e.\u0275dir=$e({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let n=e;return n})(),dv=(()=>{let e=class e{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(this._shouldRecreateView(t)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let o=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,o,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,o)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,o):!1,get:(t,r,o)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,o)}})}};e.\u0275fac=function(r){return new(r||e)(F(Wn))},e.\u0275dir=$e({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Hn]});let n=e;return n})();function t$(n,e){return new je(2100,!1)}var pR=class{createSubscription(e,i){return uR(()=>e.subscribe({next:i,error:t=>{throw t}}))}dispose(e){uR(()=>e.unsubscribe())}},gR=class{createSubscription(e,i){return e.then(i,t=>{throw t})}dispose(e){}},i$=new gR,n$=new pR,uv=(()=>{let e=class e{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Hc(t))return i$;if(cR(t))return n$;throw t$(e,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(r){return new(r||e)(F(Wi,16))},e.\u0275pipe=Bo({name:"async",type:e,pure:!1,standalone:!0});let n=e;return n})();var Go=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({});let n=e;return n})(),MR="browser",r$="server";function sh(n){return n===MR}function hv(n){return n===r$}var cO=(()=>{let e=class e{};e.\u0275prov=we({token:e,providedIn:"root",factory:()=>sh(te(Vr))?new bR(te(xt),window):new _R});let n=e;return n})(),bR=class{constructor(e,i){this.document=e,this.window=i,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let i=o$(this.document,e);i&&(this.scrollToElement(i),i.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let i=e.getBoundingClientRect(),t=i.left+this.window.pageXOffset,r=i.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(t-o[0],r-o[1])}};function o$(n,e){let i=n.getElementById(e)||n.getElementsByName(e)[0];if(i)return i;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let t=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=t.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=t.nextNode()}}return null}var _R=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},rh=class{};var Em=class{},mv=class{},od=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(i=>{let t=i.indexOf(":");if(t>0){let r=i.slice(0,t),o=r.toLowerCase(),s=i.slice(t+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((i,t)=>{this.setHeaderEntries(t,i)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([i,t])=>{this.setHeaderEntries(i,t)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let i=this.headers.get(e.toLowerCase());return i&&i.length>0?i[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,i){return this.clone({name:e,value:i,op:"a"})}set(e,i){return this.clone({name:e,value:i,op:"s"})}delete(e,i){return this.clone({name:e,value:i,op:"d"})}maybeSetNormalizedName(e,i){this.normalizedNames.has(i)||this.normalizedNames.set(i,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(i=>{this.headers.set(i,e.headers.get(i)),this.normalizedNames.set(i,e.normalizedNames.get(i))})}clone(e){let i=new n;return i.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,i.lazyUpdate=(this.lazyUpdate||[]).concat([e]),i}applyUpdate(e){let i=e.name.toLowerCase();switch(e.op){case"a":case"s":let t=e.value;if(typeof t=="string"&&(t=[t]),t.length===0)return;this.maybeSetNormalizedName(e.name,i);let r=(e.op==="a"?this.headers.get(i):void 0)||[];r.push(...t),this.headers.set(i,r);break;case"d":let o=e.value;if(!o)this.headers.delete(i),this.normalizedNames.delete(i);else{let s=this.headers.get(i);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(i),this.normalizedNames.delete(i)):this.headers.set(i,s)}break}}setHeaderEntries(e,i){let t=(Array.isArray(i)?i:[i]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,t),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(i=>e(this.normalizedNames.get(i),this.headers.get(i)))}};var RR=class{encodeKey(e){return lO(e)}encodeValue(e){return lO(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function c$(n,e){let i=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],c=i.get(s)||[];c.push(a),i.set(s,c)}),i}var l$=/%(\d[a-f0-9])/gi,d$={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function lO(n){return encodeURIComponent(n).replace(l$,(e,i)=>d$[i]??e)}function fv(n){return`${n}`}var Ys=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new RR,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=c$(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(i=>{let t=e.fromObject[i],r=Array.isArray(t)?t.map(fv):[fv(t)];this.map.set(i,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let i=this.map.get(e);return i?i[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,i){return this.clone({param:e,value:i,op:"a"})}appendAll(e){let i=[];return Object.keys(e).forEach(t=>{let r=e[t];Array.isArray(r)?r.forEach(o=>{i.push({param:t,value:o,op:"a"})}):i.push({param:t,value:r,op:"a"})}),this.clone(i)}set(e,i){return this.clone({param:e,value:i,op:"s"})}delete(e,i){return this.clone({param:e,value:i,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let i=this.encoder.encodeKey(e);return this.map.get(e).map(t=>i+"="+this.encoder.encodeValue(t)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let i=new n({encoder:this.encoder});return i.cloneFrom=this.cloneFrom||this,i.updates=(this.updates||[]).concat(e),i}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let i=(e.op==="a"?this.map.get(e.param):void 0)||[];i.push(fv(e.value)),this.map.set(e.param,i);break;case"d":if(e.value!==void 0){let t=this.map.get(e.param)||[],r=t.indexOf(fv(e.value));r!==-1&&t.splice(r,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var TR=class{constructor(){this.map=new Map}set(e,i){return this.map.set(e,i),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function u$(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function dO(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function uO(n){return typeof Blob<"u"&&n instanceof Blob}function hO(n){return typeof FormData<"u"&&n instanceof FormData}function h$(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Cm=class n{constructor(e,i,t,r){this.url=i,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(u$(this.method)||r?(this.body=t!==void 0?t:null,o=r):o=t,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new od,this.context??=new TR,!this.params)this.params=new Ys,this.urlWithParams=i;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=i;else{let a=i.indexOf("?"),c=a===-1?"?":a<i.length-1?"&":"";this.urlWithParams=i+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||dO(this.body)||uO(this.body)||hO(this.body)||h$(this.body)?this.body:this.body instanceof Ys?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||hO(this.body)?null:uO(this.body)?this.body.type||null:dO(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Ys?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let i=e.method||this.method,t=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,u=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),d)),new n(i,t,s,{params:d,headers:l,context:u,reportProgress:c,responseType:r,withCredentials:a,transferCache:o})}},ah=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ah||{}),Dm=class{constructor(e,i=bv.Ok,t="OK"){this.headers=e.headers||new od,this.status=e.status!==void 0?e.status:i,this.statusText=e.statusText||t,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},CR=class n extends Dm{constructor(e={}){super(e),this.type=ah.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},pv=class n extends Dm{constructor(e={}){super(e),this.type=ah.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},gv=class extends Dm{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},bv=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(bv||{});function SR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Am=(()=>{let e=class e{constructor(t){this.handler=t}request(t,r,o={}){let s;if(t instanceof Cm)s=t;else{let l;o.headers instanceof od?l=o.headers:l=new od(o.headers);let d;o.params&&(o.params instanceof Ys?d=o.params:d=new Ys({fromObject:o.params})),s=new Cm(t,r,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:d,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=pt(s).pipe(Pa(l=>this.handler.handle(l)));if(t instanceof Cm||o.observe==="events")return a;let c=a.pipe(vi(l=>l instanceof pv));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(lt(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(lt(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(lt(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(lt(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Ys().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,SR(o,r))}post(t,r,o={}){return this.request("POST",t,SR(o,r))}put(t,r,o={}){return this.request("PUT",t,SR(o,r))}};e.\u0275fac=function(r){return new(r||e)(de(Em))},e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})();function gO(n,e){return e(n)}function f$(n,e){return(i,t)=>e.intercept(i,{handle:r=>n(r,t)})}function m$(n,e,i){return(t,r)=>cs(i,()=>e(t,o=>n(o,r)))}var p$=new Ee(""),ER=new Ee(""),g$=new Ee(""),b$=new Ee("");function _$(){let n=null;return(e,i)=>{n===null&&(n=(te(p$,{optional:!0})??[]).reduceRight(f$,gO));let t=te(Vc),r=t.add();return n(e,i).pipe(ks(()=>t.remove(r)))}}var fO=(()=>{let e=class e extends Em{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=te(Vc);let o=te(b$,{optional:!0});this.backend=o??t}handle(t){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(ER),...this.injector.get(g$,[])]));this.chain=o.reduceRight((s,a)=>m$(s,a,this.injector),gO)}let r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(ks(()=>this.pendingTasks.remove(r)))}};e.\u0275fac=function(r){return new(r||e)(de(mv),de(Mr))},e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})();var v$=/^\)\]\}',?\n/;function y$(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var mO=(()=>{let e=class e{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new je(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?ki(r.\u0275loadImpl()):pt(null)).pipe(Pn(()=>new Lt(s=>{let a=r.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((g,m)=>a.setRequestHeader(g,m.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let g=t.detectContentTypeHeader();g!==null&&a.setRequestHeader("Content-Type",g)}if(t.responseType){let g=t.responseType.toLowerCase();a.responseType=g!=="json"?g:"text"}let c=t.serializeBody(),l=null,d=()=>{if(l!==null)return l;let g=a.statusText||"OK",m=new od(a.getAllResponseHeaders()),v=y$(a)||t.url;return l=new CR({headers:m,status:a.status,statusText:g,url:v}),l},u=()=>{let{headers:g,status:m,statusText:v,url:_}=d(),y=null;m!==bv.NoContent&&(y=typeof a.response>"u"?a.responseText:a.response),m===0&&(m=y?bv.Ok:0);let C=m>=200&&m<300;if(t.responseType==="json"&&typeof y=="string"){let R=y;y=y.replace(v$,"");try{y=y!==""?JSON.parse(y):null}catch(M){y=R,C&&(C=!1,y={error:M,text:y})}}C?(s.next(new pv({body:y,headers:g,status:m,statusText:v,url:_||void 0})),s.complete()):s.error(new gv({error:y,headers:g,status:m,statusText:v,url:_||void 0}))},h=g=>{let{url:m}=d(),v=new gv({error:g,status:a.status||0,statusText:a.statusText||"Unknown Error",url:m||void 0});s.error(v)},f=!1,p=g=>{f||(s.next(d()),f=!0);let m={type:ah.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),t.responseType==="text"&&a.responseText&&(m.partialText=a.responseText),s.next(m)},b=g=>{let m={type:ah.UploadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),s.next(m)};return a.addEventListener("load",u),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),t.reportProgress&&(a.addEventListener("progress",p),c!==null&&a.upload&&a.upload.addEventListener("progress",b)),a.send(c),s.next({type:ah.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",u),a.removeEventListener("timeout",h),t.reportProgress&&(a.removeEventListener("progress",p),c!==null&&a.upload&&a.upload.removeEventListener("progress",b)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(r){return new(r||e)(de(rh))},e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})(),bO=new Ee(""),x$="XSRF-TOKEN",w$=new Ee("",{providedIn:"root",factory:()=>x$}),M$="X-XSRF-TOKEN",S$=new Ee("",{providedIn:"root",factory:()=>M$}),_v=class{},R$=(()=>{let e=class e{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=lv(t,this.cookieName),this.lastCookieString=t),this.lastToken}};e.\u0275fac=function(r){return new(r||e)(de(xt),de(Vr),de(w$))},e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})();function T$(n,e){let i=n.url.toLowerCase();if(!te(bO)||n.method==="GET"||n.method==="HEAD"||i.startsWith("http://")||i.startsWith("https://"))return e(n);let t=te(_v).getToken(),r=te(S$);return t!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,t)})),e(n)}var _O=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(_O||{});function C$(n,e){return{\u0275kind:n,\u0275providers:e}}function E$(...n){let e=[Am,mO,fO,{provide:Em,useExisting:fO},{provide:mv,useExisting:mO},{provide:ER,useValue:T$,multi:!0},{provide:bO,useValue:!0},{provide:_v,useClass:R$}];for(let i of n)e.push(...i.\u0275providers);return S_(e)}var pO=new Ee("");function D$(){return C$(_O.LegacyInterceptors,[{provide:pO,useFactory:_$},{provide:ER,useExisting:pO,multi:!0}])}var vO=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({providers:[E$(D$())]});let n=e;return n})();var IR=class extends av{constructor(){super(...arguments),this.supportsDOMEvents=!0}},PR=class n extends IR{static makeCurrent(){tO(new n)}onAndCancel(e,i,t){return e.addEventListener(i,t),()=>{e.removeEventListener(i,t)}}dispatchEvent(e,i){e.dispatchEvent(i)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,i){return i=i||this.getDefaultDocument(),i.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,i){return i==="window"?window:i==="document"?e:i==="body"?e.body:null}getBaseHref(e){let i=I$();return i==null?null:P$(i)}resetBaseElement(){Im=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return lv(document.cookie,e)}},Im=null;function I$(){return Im=Im||document.querySelector("base"),Im?Im.getAttribute("href"):null}function P$(n){return new URL(n,document.baseURI).pathname}var kR=class{addToWindow(e){mr.getAngularTestability=(t,r=!0)=>{let o=e.findTestabilityInTree(t,r);if(o==null)throw new je(5103,!1);return o},mr.getAllAngularTestabilities=()=>e.getAllTestabilities(),mr.getAllAngularRootElements=()=>e.getAllRootElements();let i=t=>{let r=mr.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&t()};r.forEach(a=>{a.whenStable(s)})};mr.frameworkStabilizers||(mr.frameworkStabilizers=[]),mr.frameworkStabilizers.push(i)}findTestabilityInTree(e,i,t){if(i==null)return null;let r=e.getTestability(i);return r??(t?Xs().isShadowRoot(i)?this.findTestabilityInTree(e,i.host,!0):this.findTestabilityInTree(e,i.parentElement,!0):null)}},k$=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})(),FR=new Ee(""),wO=(()=>{let e=class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new je(5101,!1);return this._eventNameToPlugin.set(t,r),r}};e.\u0275fac=function(r){return new(r||e)(de(FR),de(Qe))},e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})(),vv=class{constructor(e){this._doc=e}},DR="ng-app-id",MO=(()=>{let e=class e{constructor(t,r,o,s={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=hv(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${DR}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){let o=this.styleRef;if(o.has(t)){let s=o.get(t);return s.usage+=r,s.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===t)return o.delete(r),s.removeAttribute(DR),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(DR,this.appId),t.appendChild(a),a}}addStyleToHost(t,r){let o=this.getStyleElement(t,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(de(xt),de(ym),de(xm,8),de(Vr))},e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})(),AR={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},OR=/%COMP%/g,SO="%COMP%",F$=`_nghost-${SO}`,j$=`_ngcontent-${SO}`,O$=!0,N$=new Ee("",{providedIn:"root",factory:()=>O$});function L$(n){return j$.replace(OR,n)}function B$(n){return F$.replace(OR,n)}function RO(n,e){return e.map(i=>i.replace(OR,n))}var yv=(()=>{let e=class e{constructor(t,r,o,s,a,c,l,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=hv(c),this.defaultRenderer=new Pm(t,a,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ns.ShadowDom&&(r=pi(ve({},r),{encapsulation:Ns.Emulated}));let o=this.getOrCreateRenderer(t,r);return o instanceof xv?o.applyToHost(t):o instanceof km&&o.applyStyles(),o}getOrCreateRenderer(t,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Ns.Emulated:s=new xv(l,d,r,this.appId,u,a,c,h);break;case Ns.ShadowDom:return new jR(l,d,t,r,a,c,this.nonce,h);default:s=new km(l,d,r,u,a,c,h);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(de(wO),de(MO),de(ym),de(N$),de(xt),de(Vr),de(Qe),de(xm))},e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})(),Pm=class{constructor(e,i,t,r){this.eventManager=e,this.doc=i,this.ngZone=t,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,i){return i?this.doc.createElementNS(AR[i]||i,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,i){(yO(e)?e.content:e).appendChild(i)}insertBefore(e,i,t){e&&(yO(e)?e.content:e).insertBefore(i,t)}removeChild(e,i){e&&e.removeChild(i)}selectRootElement(e,i){let t=typeof e=="string"?this.doc.querySelector(e):e;if(!t)throw new je(-5104,!1);return i||(t.textContent=""),t}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,i,t,r){if(r){i=r+":"+i;let o=AR[r];o?e.setAttributeNS(o,i,t):e.setAttribute(i,t)}else e.setAttribute(i,t)}removeAttribute(e,i,t){if(t){let r=AR[t];r?e.removeAttributeNS(r,i):e.removeAttribute(`${t}:${i}`)}else e.removeAttribute(i)}addClass(e,i){e.classList.add(i)}removeClass(e,i){e.classList.remove(i)}setStyle(e,i,t,r){r&(Us.DashCase|Us.Important)?e.style.setProperty(i,t,r&Us.Important?"important":""):e.style[i]=t}removeStyle(e,i,t){t&Us.DashCase?e.style.removeProperty(i):e.style[i]=""}setProperty(e,i,t){e!=null&&(e[i]=t)}setValue(e,i){e.nodeValue=i}listen(e,i,t){if(typeof e=="string"&&(e=Xs().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${i}`);return this.eventManager.addEventListener(e,i,this.decoratePreventDefault(t))}decoratePreventDefault(e){return i=>{if(i==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(i)):e(i))===!1&&i.preventDefault()}}};function yO(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var jR=class extends Pm{constructor(e,i,t,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=i,this.hostEl=t,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=RO(r.id,r.styles);for(let d of l){let u=document.createElement("style");a&&u.setAttribute("nonce",a),u.textContent=d,this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,i){return super.appendChild(this.nodeOrShadowRoot(e),i)}insertBefore(e,i,t){return super.insertBefore(this.nodeOrShadowRoot(e),i,t)}removeChild(e,i){return super.removeChild(this.nodeOrShadowRoot(e),i)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},km=class extends Pm{constructor(e,i,t,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=i,this.removeStylesOnCompDestroy=r,this.styles=c?RO(c,t.styles):t.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},xv=class extends km{constructor(e,i,t,r,o,s,a,c){let l=r+"-"+t.id;super(e,i,t,o,s,a,c,l),this.contentAttr=L$(l),this.hostAttr=B$(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,i){let t=super.createElement(e,i);return super.setAttribute(t,this.contentAttr,""),t}},U$=(()=>{let e=class e extends vv{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(de(xt))},e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})(),xO=["alt","control","meta","shift"],V$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},z$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},H$=(()=>{let e=class e extends vv{constructor(t){super(t)}supports(t){return e.parseEventName(t)!=null}addEventListener(t,r,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xs().onAndCancel(t,s.domEventName,a))}static parseEventName(t){let r=t.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),xO.forEach(d=>{let u=r.indexOf(d);u>-1&&(r.splice(u,1),a+=d+".")}),a+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(t,r){let o=V$[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(o=t.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),xO.forEach(a=>{if(a!==o){let c=z$[a];c(t)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(t,r,o){return s=>{e.matchEventFullKeyCode(s,t)&&o.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}};e.\u0275fac=function(r){return new(r||e)(de(xt))},e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})();function G$(){PR.makeCurrent()}function W$(){return new Ur}function $$(){return _F(document),document}var q$=[{provide:Vr,useValue:MR},{provide:NS,useValue:G$,multi:!0},{provide:xt,useFactory:$$,deps:[]}],TO=lR(Wj,"browser",q$),X$=new Ee(""),Y$=[{provide:Tm,useClass:kR,deps:[]},{provide:sR,useClass:ev,deps:[Qe,tv,Tm]},{provide:ev,useClass:ev,deps:[Qe,tv,Tm]}],Z$=[{provide:R_,useValue:"root"},{provide:Ur,useFactory:W$,deps:[]},{provide:FR,useClass:U$,multi:!0,deps:[xt,Qe,Vr]},{provide:FR,useClass:H$,multi:!0,deps:[xt]},yv,MO,wO,{provide:Jl,useExisting:yv},{provide:rh,useClass:k$,deps:[]},[]],wv=(()=>{let e=class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:ym,useValue:t.appId}]}}};e.\u0275fac=function(r){return new(r||e)(de(X$,12))},e.\u0275mod=it({type:e}),e.\u0275inj=tt({providers:[...Z$,...Y$],imports:[Go,$j]});let n=e;return n})();var CO=(()=>{let e=class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}};e.\u0275fac=function(r){return new(r||e)(de(xt))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Fm=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:function(r){let o=null;return r?o=new(r||e):o=de(Q$),o},providedIn:"root"});let n=e;return n})(),Q$=(()=>{let e=class e extends Fm{constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case sr.NONE:return r;case sr.HTML:return Uc(r,"HTML")?Vo(r):IF(this._doc,String(r)).toString();case sr.STYLE:return Uc(r,"Style")?Vo(r):r;case sr.SCRIPT:if(Uc(r,"Script"))return Vo(r);throw new je(5200,!1);case sr.URL:return Uc(r,"URL")?Vo(r):j_(String(r));case sr.RESOURCE_URL:if(Uc(r,"ResourceURL"))return Vo(r);throw new je(5201,!1);default:throw new je(5202,!1)}}bypassSecurityTrustHtml(t){return xF(t)}bypassSecurityTrustStyle(t){return wF(t)}bypassSecurityTrustScript(t){return MF(t)}bypassSecurityTrustUrl(t){return SF(t)}bypassSecurityTrustResourceUrl(t){return RF(t)}};e.\u0275fac=function(r){return new(r||e)(de(xt))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var si="primary",Ym=Symbol("RouteTitle"),zR=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i[0]:i}return null}getAll(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}};function hh(n){return new zR(n)}function K$(n,e,i){let t=i.path.split("/");if(t.length>n.length||i.pathMatch==="full"&&(e.hasChildren()||t.length<n.length))return null;let r={};for(let o=0;o<t.length;o++){let s=t[o],a=n[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,t.length),posParams:r}}function J$(n,e){if(n.length!==e.length)return!1;for(let i=0;i<n.length;++i)if(!Zs(n[i],e[i]))return!1;return!0}function Zs(n,e){let i=n?HR(n):void 0,t=e?HR(e):void 0;if(!i||!t||i.length!=t.length)return!1;let r;for(let o=0;o<i.length;o++)if(r=i[o],!OO(n[r],e[r]))return!1;return!0}function HR(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function OO(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let i=[...n].sort(),t=[...e].sort();return i.every((r,o)=>t[o]===r)}else return n===e}function NO(n){return n.length>0?n[n.length-1]:null}function Yc(n){return Ib(n)?n:Hc(n)?ki(Promise.resolve(n)):pt(n)}var e7={exact:BO,subset:UO},LO={exact:t7,subset:i7,ignored:()=>!0};function EO(n,e,i){return e7[i.paths](n.root,e.root,i.matrixParams)&&LO[i.queryParams](n.queryParams,e.queryParams)&&!(i.fragment==="exact"&&n.fragment!==e.fragment)}function t7(n,e){return Zs(n,e)}function BO(n,e,i){if(!ad(n.segments,e.segments)||!Rv(n.segments,e.segments,i)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let t in e.children)if(!n.children[t]||!BO(n.children[t],e.children[t],i))return!1;return!0}function i7(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(i=>OO(n[i],e[i]))}function UO(n,e,i){return VO(n,e,e.segments,i)}function VO(n,e,i,t){if(n.segments.length>i.length){let r=n.segments.slice(0,i.length);return!(!ad(r,i)||e.hasChildren()||!Rv(r,i,t))}else if(n.segments.length===i.length){if(!ad(n.segments,i)||!Rv(n.segments,i,t))return!1;for(let r in e.children)if(!n.children[r]||!UO(n.children[r],e.children[r],t))return!1;return!0}else{let r=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!ad(n.segments,r)||!Rv(n.segments,r,t)||!n.children[si]?!1:VO(n.children[si],e,o,t)}}function Rv(n,e,i){return e.every((t,r)=>LO[i](n[r].parameters,t.parameters))}var Wc=class{constructor(e=new ji([],{}),i={},t=null){this.root=e,this.queryParams=i,this.fragment=t}get queryParamMap(){return this._queryParamMap??=hh(this.queryParams),this._queryParamMap}toString(){return o7.serialize(this)}},ji=class{constructor(e,i){this.segments=e,this.children=i,this.parent=null,Object.values(i).forEach(t=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Tv(this)}},sd=class{constructor(e,i){this.path=e,this.parameters=i}get parameterMap(){return this._parameterMap??=hh(this.parameters),this._parameterMap}toString(){return HO(this)}};function n7(n,e){return ad(n,e)&&n.every((i,t)=>Zs(i.parameters,e[t].parameters))}function ad(n,e){return n.length!==e.length?!1:n.every((i,t)=>i.path===e[t].path)}function r7(n,e){let i=[];return Object.entries(n.children).forEach(([t,r])=>{t===si&&(i=i.concat(e(r,t)))}),Object.entries(n.children).forEach(([t,r])=>{t!==si&&(i=i.concat(e(r,t)))}),i}var Zm=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:()=>new Vm,providedIn:"root"});let n=e;return n})(),Vm=class{parse(e){let i=new WR(e);return new Wc(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(e){let i=`/${jm(e.root,!0)}`,t=c7(e.queryParams),r=typeof e.fragment=="string"?`#${s7(e.fragment)}`:"";return`${i}${t}${r}`}},o7=new Vm;function Tv(n){return n.segments.map(e=>HO(e)).join("/")}function jm(n,e){if(!n.hasChildren())return Tv(n);if(e){let i=n.children[si]?jm(n.children[si],!1):"",t=[];return Object.entries(n.children).forEach(([r,o])=>{r!==si&&t.push(`${r}:${jm(o,!1)}`)}),t.length>0?`${i}(${t.join("//")})`:i}else{let i=r7(n,(t,r)=>r===si?[jm(n.children[si],!1)]:[`${r}:${jm(t,!1)}`]);return Object.keys(n.children).length===1&&n.children[si]!=null?`${Tv(n)}/${i[0]}`:`${Tv(n)}/(${i.join("//")})`}}function zO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mv(n){return zO(n).replace(/%3B/gi,";")}function s7(n){return encodeURI(n)}function GR(n){return zO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cv(n){return decodeURIComponent(n)}function DO(n){return Cv(n.replace(/\+/g,"%20"))}function HO(n){return`${GR(n.path)}${a7(n.parameters)}`}function a7(n){return Object.entries(n).map(([e,i])=>`;${GR(e)}=${GR(i)}`).join("")}function c7(n){let e=Object.entries(n).map(([i,t])=>Array.isArray(t)?t.map(r=>`${Mv(i)}=${Mv(r)}`).join("&"):`${Mv(i)}=${Mv(t)}`).filter(i=>i);return e.length?`?${e.join("&")}`:""}var l7=/^[^\/()?;#]+/;function LR(n){let e=n.match(l7);return e?e[0]:""}var d7=/^[^\/()?;=#]+/;function u7(n){let e=n.match(d7);return e?e[0]:""}var h7=/^[^=?&#]+/;function f7(n){let e=n.match(h7);return e?e[0]:""}var m7=/^[^&#]+/;function p7(n){let e=n.match(m7);return e?e[0]:""}var WR=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ji([],{}):new ji([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(e.length>0||Object.keys(i).length>0)&&(t[si]=new ji(e,i)),t}parseSegment(){let e=LR(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new je(4009,!1);return this.capture(e),new sd(Cv(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let i=u7(this.remaining);if(!i)return;this.capture(i);let t="";if(this.consumeOptional("=")){let r=LR(this.remaining);r&&(t=r,this.capture(t))}e[Cv(i)]=Cv(t)}parseQueryParam(e){let i=f7(this.remaining);if(!i)return;this.capture(i);let t="";if(this.consumeOptional("=")){let s=p7(this.remaining);s&&(t=s,this.capture(t))}let r=DO(i),o=DO(t);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let t=LR(this.remaining),r=this.remaining[t.length];if(r!=="/"&&r!==")"&&r!==";")throw new je(4010,!1);let o;t.indexOf(":")>-1?(o=t.slice(0,t.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=si);let s=this.parseChildren();i[o]=Object.keys(s).length===1?s[si]:new ji([],s),this.consumeOptional("//")}return i}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new je(4011,!1)}};function GO(n){return n.segments.length>0?new ji([],{[si]:n}):n}function WO(n){let e={};for(let[t,r]of Object.entries(n.children)){let o=WO(r);if(t===si&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[t]=o)}let i=new ji(n.segments,e);return g7(i)}function g7(n){if(n.numberOfChildren===1&&n.children[si]){let e=n.children[si];return new ji(n.segments.concat(e.segments),e.children)}return n}function fh(n){return n instanceof Wc}function b7(n,e,i=null,t=null){let r=$O(n);return qO(r,e,i,t)}function $O(n){let e;function i(o){let s={};for(let c of o.children){let l=i(c);s[c.outlet]=l}let a=new ji(o.url,s);return o===n&&(e=a),a}let t=i(n.root),r=GO(t);return e??r}function qO(n,e,i,t){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return BR(r,r,r,i,t);let o=_7(e);if(o.toRoot())return BR(r,r,new ji([],{}),i,t);let s=v7(o,r,n),a=s.processChildren?Lm(s.segmentGroup,s.index,o.commands):YO(s.segmentGroup,s.index,o.commands);return BR(r,s.segmentGroup,a,i,t)}function Ev(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function zm(n){return typeof n=="object"&&n!=null&&n.outlets}function BR(n,e,i,t,r){let o={};t&&Object.entries(t).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===e?s=i:s=XO(n,e,i);let a=GO(WO(s));return new Wc(a,o,r)}function XO(n,e,i){let t={};return Object.entries(n.children).forEach(([r,o])=>{o===e?t[r]=i:t[r]=XO(o,e,i)}),new ji(n.segments,t)}var Dv=class{constructor(e,i,t){if(this.isAbsolute=e,this.numberOfDoubleDots=i,this.commands=t,e&&t.length>0&&Ev(t[0]))throw new je(4003,!1);let r=t.find(zm);if(r&&r!==NO(t))throw new je(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function _7(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Dv(!0,0,n);let e=0,i=!1,t=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?i=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Dv(i,e,t)}var dh=class{constructor(e,i,t){this.segmentGroup=e,this.processChildren=i,this.index=t}};function v7(n,e,i){if(n.isAbsolute)return new dh(e,!0,0);if(!i)return new dh(e,!1,NaN);if(i.parent===null)return new dh(i,!0,0);let t=Ev(n.commands[0])?0:1,r=i.segments.length-1+t;return y7(i,r,n.numberOfDoubleDots)}function y7(n,e,i){let t=n,r=e,o=i;for(;o>r;){if(o-=r,t=t.parent,!t)throw new je(4005,!1);r=t.segments.length}return new dh(t,!1,r-o)}function x7(n){return zm(n[0])?n[0].outlets:{[si]:n}}function YO(n,e,i){if(n??=new ji([],{}),n.segments.length===0&&n.hasChildren())return Lm(n,e,i);let t=w7(n,e,i),r=i.slice(t.commandIndex);if(t.match&&t.pathIndex<n.segments.length){let o=new ji(n.segments.slice(0,t.pathIndex),{});return o.children[si]=new ji(n.segments.slice(t.pathIndex),n.children),Lm(o,0,r)}else return t.match&&r.length===0?new ji(n.segments,{}):t.match&&!n.hasChildren()?$R(n,e,i):t.match?Lm(n,0,r):$R(n,e,i)}function Lm(n,e,i){if(i.length===0)return new ji(n.segments,{});{let t=x7(i),r={};if(Object.keys(t).some(o=>o!==si)&&n.children[si]&&n.numberOfChildren===1&&n.children[si].segments.length===0){let o=Lm(n.children[si],e,i);return new ji(n.segments,o.children)}return Object.entries(t).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=YO(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{t[o]===void 0&&(r[o]=s)}),new ji(n.segments,r)}}function w7(n,e,i){let t=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(t>=i.length)return o;let s=n.segments[r],a=i[t];if(zm(a))break;let c=`${a}`,l=t<i.length-1?i[t+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!IO(c,l,s))return o;t+=2}else{if(!IO(c,{},s))return o;t++}r++}return{match:!0,pathIndex:r,commandIndex:t}}function $R(n,e,i){let t=n.segments.slice(0,e),r=0;for(;r<i.length;){let o=i[r];if(zm(o)){let c=M7(o.outlets);return new ji(t,c)}if(r===0&&Ev(i[0])){let c=n.segments[e];t.push(new sd(c.path,AO(i[0]))),r++;continue}let s=zm(o)?o.outlets[si]:`${o}`,a=r<i.length-1?i[r+1]:null;s&&a&&Ev(a)?(t.push(new sd(s,AO(a))),r+=2):(t.push(new sd(s,{})),r++)}return new ji(t,{})}function M7(n){let e={};return Object.entries(n).forEach(([i,t])=>{typeof t=="string"&&(t=[t]),t!==null&&(e[i]=$R(new ji([],{}),0,t))}),e}function AO(n){let e={};return Object.entries(n).forEach(([i,t])=>e[i]=`${t}`),e}function IO(n,e,i){return n==i.path&&Zs(e,i.parameters)}var Bm="imperative",ar=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ar||{}),Wo=class{constructor(e,i){this.id=e,this.url=i}},mh=class extends Wo{constructor(e,i,t="imperative",r=null){super(e,i),this.type=ar.NavigationStart,this.navigationTrigger=t,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Qs=class extends Wo{constructor(e,i,t){super(e,i),this.urlAfterRedirects=t,this.type=ar.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},So=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(So||{}),Av=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Av||{}),$c=class extends Wo{constructor(e,i,t,r){super(e,i),this.reason=t,this.code=r,this.type=ar.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},qc=class extends Wo{constructor(e,i,t,r){super(e,i),this.reason=t,this.code=r,this.type=ar.NavigationSkipped}},Hm=class extends Wo{constructor(e,i,t,r){super(e,i),this.error=t,this.target=r,this.type=ar.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Iv=class extends Wo{constructor(e,i,t,r){super(e,i),this.urlAfterRedirects=t,this.state=r,this.type=ar.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qR=class extends Wo{constructor(e,i,t,r){super(e,i),this.urlAfterRedirects=t,this.state=r,this.type=ar.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},XR=class extends Wo{constructor(e,i,t,r,o){super(e,i),this.urlAfterRedirects=t,this.state=r,this.shouldActivate=o,this.type=ar.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},YR=class extends Wo{constructor(e,i,t,r){super(e,i),this.urlAfterRedirects=t,this.state=r,this.type=ar.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ZR=class extends Wo{constructor(e,i,t,r){super(e,i),this.urlAfterRedirects=t,this.state=r,this.type=ar.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},QR=class{constructor(e){this.route=e,this.type=ar.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},KR=class{constructor(e){this.route=e,this.type=ar.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},JR=class{constructor(e){this.snapshot=e,this.type=ar.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},eT=class{constructor(e){this.snapshot=e,this.type=ar.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tT=class{constructor(e){this.snapshot=e,this.type=ar.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},iT=class{constructor(e){this.snapshot=e,this.type=ar.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pv=class{constructor(e,i,t){this.routerEvent=e,this.position=i,this.anchor=t,this.type=ar.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Gm=class{},Wm=class{constructor(e){this.url=e}};var nT=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Qm,this.attachRef=null}},Qm=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){let o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new nT,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),kv=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let i=this.pathFromRoot(e);return i.length>1?i[i.length-2]:null}children(e){let i=rT(e,this._root);return i?i.children.map(t=>t.value):[]}firstChild(e){let i=rT(e,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(e){let i=oT(e,this._root);return i.length<2?[]:i[i.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return oT(e,this._root).map(i=>i.value)}};function rT(n,e){if(n===e.value)return e;for(let i of e.children){let t=rT(n,i);if(t)return t}return null}function oT(n,e){if(n===e.value)return[e];for(let i of e.children){let t=oT(n,i);if(t.length)return t.unshift(e),t}return[]}var Mo=class{constructor(e,i){this.value=e,this.children=i}toString(){return`TreeNode(${this.value})`}};function lh(n){let e={};return n&&n.children.forEach(i=>e[i.value.outlet]=i),e}var Fv=class extends kv{constructor(e,i){super(e),this.snapshot=i,pT(this,e)}toString(){return this.snapshot.toString()}};function ZO(n){let e=S7(n),i=new Mn([new sd("",{})]),t=new Mn({}),r=new Mn({}),o=new Mn({}),s=new Mn(""),a=new Ha(i,t,o,s,r,si,n,e.root);return a.snapshot=e.root,new Fv(new Mo(a,[]),e)}function S7(n){let e={},i={},t={},r="",o=new $m([],e,t,r,i,si,n,null,{});return new jv("",new Mo(o,[]))}var Ha=class{constructor(e,i,t,r,o,s,a,c){this.urlSubject=e,this.paramsSubject=i,this.queryParamsSubject=t,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(lt(l=>l[Ym]))??pt(void 0),this.url=e,this.params=i,this.queryParams=t,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(lt(e=>hh(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(lt(e=>hh(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function mT(n,e,i="emptyOnly"){let t,{routeConfig:r}=n;return e!==null&&(i==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?t={params:ve(ve({},e.params),n.params),data:ve(ve({},e.data),n.data),resolve:ve(ve(ve(ve({},n.data),e.data),r?.data),n._resolvedData)}:t={params:ve({},n.params),data:ve({},n.data),resolve:ve(ve({},n.data),n._resolvedData??{})},r&&KO(r)&&(t.resolve[Ym]=r.title),t}var $m=class{get title(){return this.data?.[Ym]}constructor(e,i,t,r,o,s,a,c,l){this.url=e,this.params=i,this.queryParams=t,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=hh(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=hh(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(t=>t.toString()).join("/"),i=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${i}')`}},jv=class extends kv{constructor(e,i){super(i),this.url=e,pT(this,i)}toString(){return QO(this._root)}};function pT(n,e){e.value._routerState=n,e.children.forEach(i=>pT(n,i))}function QO(n){let e=n.children.length>0?` { ${n.children.map(QO).join(", ")} } `:"";return`${n.value}${e}`}function UR(n){if(n.snapshot){let e=n.snapshot,i=n._futureSnapshot;n.snapshot=i,Zs(e.queryParams,i.queryParams)||n.queryParamsSubject.next(i.queryParams),e.fragment!==i.fragment&&n.fragmentSubject.next(i.fragment),Zs(e.params,i.params)||n.paramsSubject.next(i.params),J$(e.url,i.url)||n.urlSubject.next(i.url),Zs(e.data,i.data)||n.dataSubject.next(i.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function sT(n,e){let i=Zs(n.params,e.params)&&n7(n.url,e.url),t=!n.parent!=!e.parent;return i&&!t&&(!n.parent||sT(n.parent,e.parent))}function KO(n){return typeof n.title=="string"||n.title===null}var gT=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=si,this.activateEvents=new nt,this.deactivateEvents=new nt,this.attachEvents=new nt,this.detachEvents=new nt,this.parentContexts=te(Qm),this.location=te(Wn),this.changeDetector=te(Wi),this.environmentInjector=te(Mr),this.inputBinder=te(Uv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new je(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new je(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new je(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new je(4013,!1);this._activatedRoute=t;let o=this.location,a=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new aT(t,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=$e({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Hn]});let n=e;return n})(),aT=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,i,t){this.route=e,this.childContexts=i,this.parent=t}get(e,i){return e===Ha?this.route:e===Qm?this.childContexts:this.parent.get(e,i)}},Uv=new Ee(""),PO=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,o=Ul([r.queryParams,r.params,r.data]).pipe(Pn(([s,a,c],l)=>(c=ve(ve(ve({},s),a),c),l===0?pt(c):Promise.resolve(c)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let a=Xj(r.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of a.inputs)t.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(t,o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})();function R7(n,e,i){let t=qm(n,e._root,i?i._root:void 0);return new Fv(t,e)}function qm(n,e,i){if(i&&n.shouldReuseRoute(e.value,i.value.snapshot)){let t=i.value;t._futureSnapshot=e.value;let r=T7(n,e,i);return new Mo(t,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>qm(n,a)),s}}let t=C7(e.value),r=e.children.map(o=>qm(n,o));return new Mo(t,r)}}function T7(n,e,i){return e.children.map(t=>{for(let r of i.children)if(n.shouldReuseRoute(t.value,r.value.snapshot))return qm(n,t,r);return qm(n,t)})}function C7(n){return new Ha(new Mn(n.url),new Mn(n.params),new Mn(n.queryParams),new Mn(n.fragment),new Mn(n.data),n.outlet,n.component,n)}var JO="ngNavigationCancelingError";function e2(n,e){let{redirectTo:i,navigationBehaviorOptions:t}=fh(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=t2(!1,So.Redirect);return r.url=i,r.navigationBehaviorOptions=t,r}function t2(n,e){let i=new Error(`NavigationCancelingError: ${n||""}`);return i[JO]=!0,i.cancellationCode=e,i}function E7(n){return i2(n)&&fh(n.url)}function i2(n){return!!n&&n[JO]}var D7=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ei],decls:1,vars:0,template:function(r,o){r&1&&fe(0,"router-outlet")},dependencies:[gT],encapsulation:2});let n=e;return n})();function A7(n,e){return n.providers&&!n._injector&&(n._injector=q_(n.providers,e,`Route: ${n.path}`)),n._injector??e}function bT(n){let e=n.children&&n.children.map(bT),i=e?pi(ve({},n),{children:e}):ve({},n);return!i.component&&!i.loadComponent&&(e||i.loadChildren)&&i.outlet&&i.outlet!==si&&(i.component=D7),i}function Ks(n){return n.outlet||si}function I7(n,e){let i=n.filter(t=>Ks(t)===e);return i.push(...n.filter(t=>Ks(t)!==e)),i}function Km(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let i=e.routeConfig;if(i?._loadedInjector)return i._loadedInjector;if(i?._injector)return i._injector}return null}var P7=(n,e,i,t)=>lt(r=>(new cT(e,r.targetRouterState,r.currentRouterState,i,t).activate(n),r)),cT=class{constructor(e,i,t,r,o){this.routeReuseStrategy=e,this.futureState=i,this.currState=t,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let i=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,t,e),UR(this.futureState.root),this.activateChildRoutes(i,t,e)}deactivateChildRoutes(e,i,t){let r=lh(i);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],t),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,t)})}deactivateRoutes(e,i,t){let r=e.value,o=i?i.value:null;if(r===o)if(r.component){let s=t.getContext(r.outlet);s&&this.deactivateChildRoutes(e,i,s.children)}else this.deactivateChildRoutes(e,i,t);else o&&this.deactivateRouteAndItsChildren(i,t)}deactivateRouteAndItsChildren(e,i){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,i):this.deactivateRouteAndOutlet(e,i)}detachAndStoreRouteSubtree(e,i){let t=i.getContext(e.value.outlet),r=t&&e.value.component?t.children:i,o=lh(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(t&&t.outlet){let s=t.outlet.detach(),a=t.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,i){let t=i.getContext(e.value.outlet),r=t&&e.value.component?t.children:i,o=lh(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);t&&(t.outlet&&(t.outlet.deactivate(),t.children.onOutletDeactivated()),t.attachRef=null,t.route=null)}activateChildRoutes(e,i,t){let r=lh(i);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],t),this.forwardEvent(new iT(o.value.snapshot))}),e.children.length&&this.forwardEvent(new eT(e.value.snapshot))}activateRoutes(e,i,t){let r=e.value,o=i?i.value:null;if(UR(r),r===o)if(r.component){let s=t.getOrCreateContext(r.outlet);this.activateChildRoutes(e,i,s.children)}else this.activateChildRoutes(e,i,t);else if(r.component){let s=t.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),UR(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Km(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,t)}},Ov=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},uh=class{constructor(e,i){this.component=e,this.route=i}};function k7(n,e,i){let t=n._root,r=e?e._root:null;return Om(t,r,i,[t.value])}function F7(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function gh(n,e){let i=Symbol(),t=e.get(n,i);return t===i?typeof n=="function"&&!lk(n)?n:e.get(n):t}function Om(n,e,i,t,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=lh(e);return n.children.forEach(s=>{j7(s,o[s.value.outlet],i,t.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Um(a,i.getContext(s),r)),r}function j7(n,e,i,t,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=i?i.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=O7(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Ov(t)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Om(n,e,a?a.children:null,t,r):Om(n,e,i,t,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new uh(a.outlet.component,s))}else s&&Um(e,a,r),r.canActivateChecks.push(new Ov(t)),o.component?Om(n,null,a?a.children:null,t,r):Om(n,null,i,t,r);return r}function O7(n,e,i){if(typeof i=="function")return i(n,e);switch(i){case"pathParamsChange":return!ad(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ad(n.url,e.url)||!Zs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sT(n,e)||!Zs(n.queryParams,e.queryParams);case"paramsChange":default:return!sT(n,e)}}function Um(n,e,i){let t=lh(n),r=n.value;Object.entries(t).forEach(([o,s])=>{r.component?e?Um(s,e.children.getContext(o),i):Um(s,null,i):Um(s,e,i)}),r.component?e&&e.outlet&&e.outlet.isActivated?i.canDeactivateChecks.push(new uh(e.outlet.component,r)):i.canDeactivateChecks.push(new uh(null,r)):i.canDeactivateChecks.push(new uh(null,r))}function Jm(n){return typeof n=="function"}function N7(n){return typeof n=="boolean"}function L7(n){return n&&Jm(n.canLoad)}function B7(n){return n&&Jm(n.canActivate)}function U7(n){return n&&Jm(n.canActivateChild)}function V7(n){return n&&Jm(n.canDeactivate)}function z7(n){return n&&Jm(n.canMatch)}function n2(n){return n instanceof ns||n?.name==="EmptyError"}var Sv=Symbol("INITIAL_VALUE");function ph(){return Pn(n=>Ul(n.map(e=>e.pipe(Rn(1),vo(Sv)))).pipe(lt(e=>{for(let i of e)if(i!==!0){if(i===Sv)return Sv;if(i===!1||i instanceof Wc)return i}return!0}),vi(e=>e!==Sv),Rn(1)))}function H7(n,e){return Sn(i=>{let{targetSnapshot:t,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=i;return s.length===0&&o.length===0?pt(pi(ve({},i),{guardsResult:!0})):G7(s,t,r,n).pipe(Sn(a=>a&&N7(a)?W7(t,o,n,e):pt(a)),lt(a=>pi(ve({},i),{guardsResult:a})))})}function G7(n,e,i,t){return ki(n).pipe(Sn(r=>Z7(r.component,r.route,i,e,t)),Fs(r=>r!==!0,!0))}function W7(n,e,i,t){return ki(e).pipe(Pa(r=>Ac(q7(r.route.parent,t),$7(r.route,t),Y7(n,r.path,i),X7(n,r.route,i))),Fs(r=>r!==!0,!0))}function $7(n,e){return n!==null&&e&&e(new tT(n)),pt(!0)}function q7(n,e){return n!==null&&e&&e(new JR(n)),pt(!0)}function X7(n,e,i){let t=e.routeConfig?e.routeConfig.canActivate:null;if(!t||t.length===0)return pt(!0);let r=t.map(o=>Fb(()=>{let s=Km(e)??i,a=gh(o,s),c=B7(a)?a.canActivate(e,n):cs(s,()=>a(e,n));return Yc(c).pipe(Fs())}));return pt(r).pipe(ph())}function Y7(n,e,i){let t=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>F7(s)).filter(s=>s!==null).map(s=>Fb(()=>{let a=s.guards.map(c=>{let l=Km(s.node)??i,d=gh(c,l),u=U7(d)?d.canActivateChild(t,n):cs(l,()=>d(t,n));return Yc(u).pipe(Fs())});return pt(a).pipe(ph())}));return pt(o).pipe(ph())}function Z7(n,e,i,t,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return pt(!0);let s=o.map(a=>{let c=Km(e)??r,l=gh(a,c),d=V7(l)?l.canDeactivate(n,e,i,t):cs(c,()=>l(n,e,i,t));return Yc(d).pipe(Fs())});return pt(s).pipe(ph())}function Q7(n,e,i,t){let r=e.canLoad;if(r===void 0||r.length===0)return pt(!0);let o=r.map(s=>{let a=gh(s,n),c=L7(a)?a.canLoad(e,i):cs(n,()=>a(e,i));return Yc(c)});return pt(o).pipe(ph(),r2(t))}function r2(n){return Nw(zi(e=>{if(fh(e))throw e2(n,e)}),lt(e=>e===!0))}function K7(n,e,i,t){let r=e.canMatch;if(!r||r.length===0)return pt(!0);let o=r.map(s=>{let a=gh(s,n),c=z7(a)?a.canMatch(e,i):cs(n,()=>a(e,i));return Yc(c)});return pt(o).pipe(ph(),r2(t))}var Xm=class{constructor(e){this.segmentGroup=e||null}},Nv=class extends Error{constructor(e){super(),this.urlTree=e}};function ch(n){return Kr(new Xm(n))}function J7(n){return Kr(new je(4e3,!1))}function e9(n){return Kr(t2(!1,So.GuardRejected))}var lT=class{constructor(e,i){this.urlSerializer=e,this.urlTree=i}lineralizeSegments(e,i){let t=[],r=i.root;for(;;){if(t=t.concat(r.segments),r.numberOfChildren===0)return pt(t);if(r.numberOfChildren>1||!r.children[si])return J7(e.redirectTo);r=r.children[si]}}applyRedirectCommands(e,i,t){let r=this.applyRedirectCreateUrlTree(i,this.urlSerializer.parse(i),e,t);if(i.startsWith("/"))throw new Nv(r);return r}applyRedirectCreateUrlTree(e,i,t,r){let o=this.createSegmentGroup(e,i.root,t,r);return new Wc(o,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(e,i){let t={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);t[r]=i[a]}else t[r]=o}),t}createSegmentGroup(e,i,t,r){let o=this.createSegments(e,i.segments,t,r),s={};return Object.entries(i.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,t,r)}),new ji(o,s)}createSegments(e,i,t,r){return i.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,t))}findPosParam(e,i,t){let r=t[i.path.substring(1)];if(!r)throw new je(4001,!1);return r}findOrReturn(e,i){let t=0;for(let r of i){if(r.path===e.path)return i.splice(t),r;t++}return e}},dT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function t9(n,e,i,t,r){let o=_T(n,e,i);return o.matched?(t=A7(e,t),K7(t,e,i,r).pipe(lt(s=>s===!0?o:ve({},dT)))):pt(o)}function _T(n,e,i){if(e.path==="**")return i9(i);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||i.length>0)?ve({},dT):{matched:!0,consumedSegments:[],remainingSegments:i,parameters:{},positionalParamSegments:{}};let r=(e.matcher||K$)(i,n,e);if(!r)return ve({},dT);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?ve(ve({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:i.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function i9(n){return{matched:!0,parameters:n.length>0?NO(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function kO(n,e,i,t){return i.length>0&&o9(n,i,t)?{segmentGroup:new ji(e,r9(t,new ji(i,n.children))),slicedSegments:[]}:i.length===0&&s9(n,i,t)?{segmentGroup:new ji(n.segments,n9(n,i,t,n.children)),slicedSegments:i}:{segmentGroup:new ji(n.segments,n.children),slicedSegments:i}}function n9(n,e,i,t){let r={};for(let o of i)if(Vv(n,e,o)&&!t[Ks(o)]){let s=new ji([],{});r[Ks(o)]=s}return ve(ve({},t),r)}function r9(n,e){let i={};i[si]=e;for(let t of n)if(t.path===""&&Ks(t)!==si){let r=new ji([],{});i[Ks(t)]=r}return i}function o9(n,e,i){return i.some(t=>Vv(n,e,t)&&Ks(t)!==si)}function s9(n,e,i){return i.some(t=>Vv(n,e,t))}function Vv(n,e,i){return(n.hasChildren()||e.length>0)&&i.pathMatch==="full"?!1:i.path===""}function a9(n,e,i,t){return Ks(n)!==t&&(t===si||!Vv(e,i,n))?!1:_T(e,n,i).matched}function c9(n,e,i){return e.length===0&&!n.children[i]}var uT=class{};function l9(n,e,i,t,r,o,s="emptyOnly"){return new hT(n,e,i,t,r,s,o).recognize()}var d9=31,hT=class{constructor(e,i,t,r,o,s,a){this.injector=e,this.configLoader=i,this.rootComponentType=t,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new lT(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new je(4002,`'${e.segmentGroup}'`)}recognize(){let e=kO(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(lt(i=>{let t=new $m([],Object.freeze({}),Object.freeze(ve({},this.urlTree.queryParams)),this.urlTree.fragment,{},si,this.rootComponentType,null,{}),r=new Mo(t,i),o=new jv("",r),s=b7(t,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,si).pipe(Nr(t=>{if(t instanceof Nv)return this.urlTree=t.urlTree,this.match(t.urlTree.root);throw t instanceof Xm?this.noMatchError(t):t}))}inheritParamsAndData(e,i){let t=e.value,r=mT(t,i,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o,t))}processSegmentGroup(e,i,t,r){return t.segments.length===0&&t.hasChildren()?this.processChildren(e,i,t):this.processSegment(e,i,t,t.segments,r,!0).pipe(lt(o=>o instanceof Mo?[o]:[]))}processChildren(e,i,t){let r=[];for(let o of Object.keys(t.children))o==="primary"?r.unshift(o):r.push(o);return ki(r).pipe(Pa(o=>{let s=t.children[o],a=I7(i,o);return this.processSegmentGroup(e,a,s,o)}),Gw((o,s)=>(o.push(...s),o)),Ic(null),Hw(),Sn(o=>{if(o===null)return ch(t);let s=o2(o);return u9(s),pt(s)}))}processSegment(e,i,t,r,o,s){return ki(i).pipe(Pa(a=>this.processSegmentAgainstRoute(a._injector??e,i,a,t,r,o,s).pipe(Nr(c=>{if(c instanceof Xm)return pt(null);throw c}))),Fs(a=>!!a),Nr(a=>{if(n2(a))return c9(t,r,o)?pt(new uT):ch(t);throw a}))}processSegmentAgainstRoute(e,i,t,r,o,s,a){return a9(t,r,o,s)?t.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,t,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,i,t,o,s):ch(r):ch(r)}expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:d}=_T(i,r,o);if(!a)return ch(i);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>d9&&(this.allowRedirects=!1));let u=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,u).pipe(Sn(h=>this.processSegment(e,t,i,h.concat(d),s,!1)))}matchSegmentAgainstRoute(e,i,t,r,o){let s=t9(i,t,r,e,this.urlSerializer);return t.path==="**"&&(i.children={}),s.pipe(Pn(a=>a.matched?(e=t._injector??e,this.getChildConfig(e,t,r).pipe(Pn(({routes:c})=>{let l=t._loadedInjector??e,{consumedSegments:d,remainingSegments:u,parameters:h}=a,f=new $m(d,h,Object.freeze(ve({},this.urlTree.queryParams)),this.urlTree.fragment,f9(t),Ks(t),t.component??t._loadedComponent??null,t,m9(t)),{segmentGroup:p,slicedSegments:b}=kO(i,d,u,c);if(b.length===0&&p.hasChildren())return this.processChildren(l,c,p).pipe(lt(m=>m===null?null:new Mo(f,m)));if(c.length===0&&b.length===0)return pt(new Mo(f,[]));let g=Ks(t)===o;return this.processSegment(l,c,p,b,g?si:o,!0).pipe(lt(m=>new Mo(f,m instanceof Mo?[m]:[])))}))):ch(i)))}getChildConfig(e,i,t){return i.children?pt({routes:i.children,injector:e}):i.loadChildren?i._loadedRoutes!==void 0?pt({routes:i._loadedRoutes,injector:i._loadedInjector}):Q7(e,i,t,this.urlSerializer).pipe(Sn(r=>r?this.configLoader.loadChildren(e,i).pipe(zi(o=>{i._loadedRoutes=o.routes,i._loadedInjector=o.injector})):e9(i))):pt({routes:[],injector:e})}};function u9(n){n.sort((e,i)=>e.value.outlet===si?-1:i.value.outlet===si?1:e.value.outlet.localeCompare(i.value.outlet))}function h9(n){let e=n.value.routeConfig;return e&&e.path===""}function o2(n){let e=[],i=new Set;for(let t of n){if(!h9(t)){e.push(t);continue}let r=e.find(o=>t.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...t.children),i.add(r)):e.push(t)}for(let t of i){let r=o2(t.children);e.push(new Mo(t.value,r))}return e.filter(t=>!i.has(t))}function f9(n){return n.data||{}}function m9(n){return n.resolve||{}}function p9(n,e,i,t,r,o){return Sn(s=>l9(n,e,i,t,s.extractedUrl,r,o).pipe(lt(({state:a,tree:c})=>pi(ve({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function g9(n,e){return Sn(i=>{let{targetSnapshot:t,guards:{canActivateChecks:r}}=i;if(!r.length)return pt(i);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of s2(c))s.add(l);let a=0;return ki(s).pipe(Pa(c=>o.has(c)?b9(c,t,n,e):(c.data=mT(c,c.parent,n).resolve,pt(void 0))),zi(()=>a++),Du(1),Sn(c=>a===s.size?pt(i):fn))})}function s2(n){let e=n.children.map(i=>s2(i)).flat();return[n,...e]}function b9(n,e,i,t){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!KO(r)&&(o[Ym]=r.title),_9(o,n,e,t).pipe(lt(s=>(n._resolvedData=s,n.data=mT(n,n.parent,i).resolve,null)))}function _9(n,e,i,t){let r=HR(n);if(r.length===0)return pt({});let o={};return ki(r).pipe(Sn(s=>v9(n[s],e,i,t).pipe(Fs(),zi(a=>{o[s]=a}))),Du(1),Eu(o),Nr(s=>n2(s)?fn:Kr(s)))}function v9(n,e,i,t){let r=Km(e)??t,o=gh(n,r),s=o.resolve?o.resolve(e,i):cs(r,()=>o(e,i));return Yc(s)}function VR(n){return Pn(e=>{let i=n(e);return i?ki(i).pipe(lt(()=>e)):pt(e)})}var a2=(()=>{let e=class e{buildTitle(t){let r,o=t.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===si);return r}getResolvedTitleForRoute(t){return t.data[Ym]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:()=>te(y9),providedIn:"root"});let n=e;return n})(),y9=(()=>{let e=class e extends a2{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(de(CO))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ep=new Ee("",{providedIn:"root",factory:()=>({})}),Lv=new Ee(""),vT=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=te(rv)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return pt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Yc(t.loadComponent()).pipe(lt(c2),zi(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),ks(()=>{this.componentLoaders.delete(t)})),o=new Su(r,()=>new gt).pipe(Mu());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return pt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=x9(r,this.compiler,t,this.onLoadEndListener).pipe(ks(()=>{this.childrenLoaders.delete(r)})),a=new Su(s,()=>new gt).pipe(Mu());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function x9(n,e,i,t){return Yc(n.loadChildren()).pipe(lt(c2),Sn(r=>r instanceof fm||Array.isArray(r)?pt(r):ki(e.compileModuleAsync(r))),lt(r=>{t&&t(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(i).injector,s=o.get(Lv,[],{optional:!0,self:!0}).flat()),{routes:s.map(bT),injector:o}}))}function w9(n){return n&&typeof n=="object"&&"default"in n}function c2(n){return w9(n)?n.default:n}var yT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:()=>te(M9),providedIn:"root"});let n=e;return n})(),M9=(()=>{let e=class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),l2=new Ee(""),d2=new Ee("");function S9(n,e,i){let t=n.get(d2),r=n.get(xt);return n.get(Qe).runOutsideAngular(()=>{if(!r.startViewTransition||t.skipNextTransition)return t.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(l=>{o=l}),a=r.startViewTransition(()=>(o(),R9(n))),{onViewTransitionCreated:c}=t;return c&&cs(n,()=>c({transition:a,from:e,to:i})),s})}function R9(n){return new Promise(e=>{W_(e,{injector:n})})}var xT=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new gt,this.transitionAbortSubject=new gt,this.configLoader=te(vT),this.environmentInjector=te(Mr),this.urlSerializer=te(Zm),this.rootContexts=te(Qm),this.location=te(Gc),this.inputBindingEnabled=te(Uv,{optional:!0})!==null,this.titleStrategy=te(a2),this.options=te(ep,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=te(yT),this.createViewTransition=te(l2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>pt(void 0),this.rootComponentType=null;let t=o=>this.events.next(new QR(o)),r=o=>this.events.next(new KR(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(pi(ve(ve({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,o){return this.transitions=new Mn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Bm,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vi(s=>s.id!==0),lt(s=>pi(ve({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Pn(s=>{let a=!1,c=!1;return pt(s).pipe(Pn(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",So.SupersededByNewNavigation),fn;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?pi(ve({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&u!=="reload"){let h="";return this.events.next(new qc(l.id,this.urlSerializer.serialize(l.rawUrl),h,Av.IgnoredSameUrlNavigation)),l.resolve(null),fn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return pt(l).pipe(Pn(h=>{let f=this.transitions?.getValue();return this.events.next(new mh(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?fn:Promise.resolve(h)}),p9(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),zi(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=pi(ve({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Iv(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:b,extras:g}=l,m=new mh(h,this.urlSerializer.serialize(f),p,b);this.events.next(m);let v=ZO(this.rootComponentType).snapshot;return this.currentTransition=s=pi(ve({},l),{targetSnapshot:v,urlAfterRedirects:f,extras:pi(ve({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,pt(s)}else{let h="";return this.events.next(new qc(l.id,this.urlSerializer.serialize(l.extractedUrl),h,Av.IgnoredByUrlHandlingStrategy)),l.resolve(null),fn}}),zi(l=>{let d=new qR(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),lt(l=>(this.currentTransition=s=pi(ve({},l),{guards:k7(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),H7(this.environmentInjector,l=>this.events.next(l)),zi(l=>{if(s.guardsResult=l.guardsResult,fh(l.guardsResult))throw e2(this.urlSerializer,l.guardsResult);let d=new XR(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),vi(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",So.GuardRejected),!1)),VR(l=>{if(l.guards.canActivateChecks.length)return pt(l).pipe(zi(d=>{let u=new YR(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}),Pn(d=>{let u=!1;return pt(d).pipe(g9(this.paramsInheritanceStrategy,this.environmentInjector),zi({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(d,"",So.NoDataFromResolver)}}))}),zi(d=>{let u=new ZR(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}))}),VR(l=>{let d=u=>{let h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(zi(f=>{u.component=f}),lt(()=>{})));for(let f of u.children)h.push(...d(f));return h};return Ul(d(l.targetSnapshot.root)).pipe(Ic(null),Rn(1))}),VR(()=>this.afterPreactivation()),Pn(()=>{let{currentSnapshot:l,targetSnapshot:d}=s,u=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return u?ki(u).pipe(lt(()=>s)):pt(s)}),lt(l=>{let d=R7(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=pi(ve({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),zi(()=>{this.events.next(new Gm)}),P7(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Rn(1),zi({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Qs(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Ci(this.transitionAbortSubject.pipe(zi(l=>{throw l}))),ks(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",So.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Nr(l=>{if(c=!0,i2(l))this.events.next(new $c(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),E7(l)?this.events.next(new Wm(l.url)):s.resolve(!1);else{this.events.next(new Hm(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(l))}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return fn}))}))}cancelNavigationTransition(t,r,o){let s=new $c(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function T9(n){return n!==Bm}var C9=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:()=>te(E9),providedIn:"root"});let n=e;return n})(),fT=class{shouldDetach(e){return!1}store(e,i){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,i){return e.routeConfig===i.routeConfig}},E9=(()=>{let e=class e extends fT{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),u2=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:()=>te(D9),providedIn:"root"});let n=e;return n})(),D9=(()=>{let e=class e extends u2{constructor(){super(...arguments),this.location=te(Gc),this.urlSerializer=te(Zm),this.options=te(ep,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=te(yT),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Wc,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ZO(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof mh)this.stateMemento=this.createStateMemento();else if(t instanceof qc)this.rawUrlTree=r.initialUrl;else if(t instanceof Iv){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else t instanceof Gm?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof $c&&(t.code===So.GuardRejected||t.code===So.NoDataFromResolver)?this.restoreHistory(r):t instanceof Hm?this.restoreHistory(r,!0):t instanceof Qs&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,a=ve(ve({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",a)}else{let s=ve(ve({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Nm=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Nm||{});function h2(n,e){n.events.pipe(vi(i=>i instanceof Qs||i instanceof $c||i instanceof Hm||i instanceof qc),lt(i=>i instanceof Qs||i instanceof qc?Nm.COMPLETE:(i instanceof $c?i.code===So.Redirect||i.code===So.SupersededByNewNavigation:!1)?Nm.REDIRECTING:Nm.FAILED),vi(i=>i!==Nm.REDIRECTING),Rn(1)).subscribe(()=>{e()})}function A9(n){throw n}var I9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},P9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Xc=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=te(J_),this.stateManager=te(u2),this.options=te(ep,{optional:!0})||{},this.pendingTasks=te(Vc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=te(xT),this.urlSerializer=te(Zm),this.location=te(Gc),this.urlHandlingStrategy=te(yT),this._events=new gt,this.errorHandler=this.options.errorHandler||A9,this.navigated=!1,this.routeReuseStrategy=te(C9),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=te(Lv,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!te(Uv,{optional:!0}),this.eventsSubscription=new _i,this.isNgZoneEnabled=te(Qe)instanceof Qe&&Qe.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof $c&&r.code!==So.Redirect&&r.code!==So.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Qs)this.navigated=!0;else if(r instanceof Wm){let a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||T9(o.source)};this.scheduleNavigation(a,Bm,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}F9(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Bm,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=ve({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(bT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,d=l?this.currentUrlTree.fragment:a,u=null;switch(c){case"merge":u=ve(ve({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=$O(f)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),h=this.currentUrlTree.root}return qO(h,t,u,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let o=fh(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Bm,null,r)}navigate(t,r={skipLocationChange:!1}){return k9(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let o;if(r===!0?o=ve({},I9):r===!1?o=ve({},P9):o=r,fh(t))return EO(this.currentUrlTree,t,o);let s=this.parseUrl(t);return EO(this.currentUrlTree,s,o)}removeEmptyProps(t){return Object.entries(t).reduce((r,[o,s])=>(s!=null&&(r[o]=s),r),{})}scheduleNavigation(t,r,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((h,f)=>{c=h,l=f});let u=this.pendingTasks.add();return h2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function k9(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new je(4008,!1)}function F9(n){return!(n instanceof Gm)&&!(n instanceof Wm)}var f2=(()=>{let e=class e{constructor(t,r,o,s,a,c){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new gt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof Qs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t!=null?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,o,s,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:PF(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let o=this.renderer,s=this.el.nativeElement;r!==null?o.setAttribute(s,t,r):o.removeAttribute(s,t)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(F(Xc),F(Ha),Bc("tabindex"),F(Gs),F(et),F(za))},e.\u0275dir=$e({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){r&1&&Le("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&Hi("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[ut.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Si],skipLocationChange:[ut.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Si],replaceUrl:[ut.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Si],routerLink:"routerLink"},standalone:!0,features:[ln,Hn]});let n=e;return n})();var Bv=class{};var j9=(()=>{let e=class e{constructor(t,r,o,s,a){this.router=t,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(vi(t=>t instanceof Qs),Pa(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let o=[];for(let s of r){s.providers&&!s._injector&&(s._injector=q_(s.providers,t,`Route: ${s.path}`));let a=s._injector??t,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return ki(o).pipe(Dc())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(t,r):o=pt(null);let s=o.pipe(Sn(a=>a===null?pt(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return ki([s,a]).pipe(Dc())}else return s})}};e.\u0275fac=function(r){return new(r||e)(de(Xc),de(rv),de(Mr),de(Bv),de(vT))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),m2=new Ee(""),O9=(()=>{let e=class e{constructor(t,r,o,s,a={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=te(Mr),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof mh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Qs?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof qc&&t.code===Av.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Pv&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>gi(this,null,function*(){yield new Promise(o=>{setTimeout(()=>{o()}),W_(()=>{o()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new Pv(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){Qu()},e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})();function N9(n){return n.routerState.root}function tp(n,e){return{\u0275kind:n,\u0275providers:e}}function L9(){let n=te(_r);return e=>{let i=n.get(Ua);if(e!==i.components[0])return;let t=n.get(Xc),r=n.get(p2);n.get(wT)===1&&t.initialNavigation(),n.get(g2,null,mi.Optional)?.setUpPreloading(),n.get(m2,null,mi.Optional)?.init(),t.resetRootComponentType(i.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var p2=new Ee("",{factory:()=>new gt}),wT=new Ee("",{providedIn:"root",factory:()=>1});function B9(){return tp(2,[{provide:wT,useValue:0},{provide:iv,multi:!0,deps:[_r],useFactory:e=>{let i=e.get(iO,Promise.resolve());return()=>i.then(()=>new Promise(t=>{let r=e.get(Xc),o=e.get(p2);h2(r,()=>{t(!0)}),e.get(xT).afterPreactivation=()=>(t(!0),o.closed?pt(void 0):o),r.initialNavigation()}))}}])}function U9(){return tp(3,[{provide:iv,multi:!0,useFactory:()=>{let e=te(Xc);return()=>{e.setUpLocationChangeListener()}}},{provide:wT,useValue:2}])}var g2=new Ee("");function V9(n){return tp(0,[{provide:g2,useExisting:j9},{provide:Bv,useExisting:n}])}function z9(){return tp(8,[PO,{provide:Uv,useExisting:PO}])}function H9(n){let e=[{provide:l2,useValue:S9},{provide:d2,useValue:ve({skipNextTransition:!!n?.skipInitialTransition},n)}];return tp(9,e)}var FO=new Ee("ROUTER_FORROOT_GUARD"),G9=[Gc,{provide:Zm,useClass:Vm},Xc,Qm,{provide:Ha,useFactory:N9,deps:[Xc]},vT,[]],MT=(()=>{let e=class e{constructor(t){}static forRoot(t,r){return{ngModule:e,providers:[G9,[],{provide:Lv,multi:!0,useValue:t},{provide:FO,useFactory:X9,deps:[[Xc,new qu,new bm]]},{provide:ep,useValue:r||{}},r?.useHash?$9():q9(),W9(),r?.preloadingStrategy?V9(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Y9(r):[],r?.bindToComponentInputs?z9().\u0275providers:[],r?.enableViewTransitions?H9().\u0275providers:[],Z9()]}}static forChild(t){return{ngModule:e,providers:[{provide:Lv,multi:!0,useValue:t}]}}};e.\u0275fac=function(r){return new(r||e)(de(FO,8))},e.\u0275mod=it({type:e}),e.\u0275inj=tt({});let n=e;return n})();function W9(){return{provide:m2,useFactory:()=>{let n=te(cO),e=te(Qe),i=te(ep),t=te(xT),r=te(Zm);return i.scrollOffset&&n.setOffset(i.scrollOffset),new O9(r,t,n,e,i)}}}function $9(){return{provide:za,useClass:rO}}function q9(){return{provide:za,useClass:xR}}function X9(n){return"guarded"}function Y9(n){return[n.initialNavigation==="disabled"?U9().\u0275providers:[],n.initialNavigation==="enabledBlocking"?B9().\u0275providers:[]]}var jO=new Ee("");function Z9(){return[{provide:jO,useFactory:L9},{provide:nv,multi:!0,useExisting:jO}]}var fl={};c4(fl,{ACESFilmicToneMapping:()=>RL,AddEquation:()=>vr,AddOperation:()=>xL,AdditiveAnimationBlendMode:()=>iD,AdditiveBlending:()=>Dd,AgXToneMapping:()=>CL,AlphaFormat:()=>kL,AlwaysCompare:()=>YL,AlwaysDepth:()=>mL,AlwaysStencilFunc:()=>BC,AmbientLight:()=>sf,AnimationAction:()=>ky,AnimationClip:()=>uc,AnimationLoader:()=>fE,AnimationMixer:()=>Kp,AnimationObjectGroup:()=>CE,AnimationUtils:()=>vJ,ArcCurve:()=>K0,ArrayCamera:()=>W0,ArrowHelper:()=>WE,AttachedBindMode:()=>hC,Audio:()=>Iy,AudioAnalyser:()=>RE,AudioContext:()=>Qp,AudioListener:()=>ME,AudioLoader:()=>xE,AxesHelper:()=>$E,BackSide:()=>Wr,BasicDepthPacking:()=>VL,BasicShadowMap:()=>K9,BatchedMesh:()=>Y0,Bone:()=>Ud,BooleanKeyframeTrack:()=>lc,Box2:()=>FE,Box3:()=>_n,Box3Helper:()=>Jp,BoxGeometry:()=>Zi,BoxHelper:()=>HE,BufferAttribute:()=>hi,BufferGeometry:()=>bt,BufferGeometryLoader:()=>Ay,ByteType:()=>AL,Cache:()=>ec,Camera:()=>sl,CameraHelper:()=>zE,CanvasTexture:()=>zd,CapsuleGeometry:()=>ry,CatmullRomCurve3:()=>J0,CineonToneMapping:()=>SL,CircleGeometry:()=>oy,ClampToEdgeWrapping:()=>ro,Clock:()=>ao,Color:()=>pe,ColorKeyframeTrack:()=>$p,ColorManagement:()=>Ri,CompressedArrayTexture:()=>aE,CompressedCubeTexture:()=>cE,CompressedTexture:()=>ef,CompressedTextureLoader:()=>mE,ConeGeometry:()=>sy,ConstantAlphaFactor:()=>uL,ConstantColorFactor:()=>lL,CubeCamera:()=>H0,CubeReflectionMapping:()=>nc,CubeRefractionMapping:()=>ol,CubeTexture:()=>Nd,CubeTextureLoader:()=>pE,CubeUVReflectionMapping:()=>lf,CubicBezierCurve:()=>Op,CubicBezierCurve3:()=>ey,CubicInterpolant:()=>wy,CullFaceBack:()=>lC,CullFaceFront:()=>QN,CullFaceFrontBack:()=>Q9,CullFaceNone:()=>ZN,Curve:()=>Ao,CurvePath:()=>ny,CustomBlending:()=>qd,CustomToneMapping:()=>TL,CylinderGeometry:()=>On,Cylindrical:()=>kE,Data3DTexture:()=>Ap,DataArrayTexture:()=>Wh,DataTexture:()=>$r,DataTextureLoader:()=>gE,DataUtils:()=>iX,DecrementStencilOp:()=>sq,DecrementWrapStencilOp:()=>cq,DefaultLoadingManager:()=>f3,DepthFormat:()=>Cd,DepthStencilFormat:()=>gs,DepthTexture:()=>bs,DetachedBindMode:()=>DL,DirectionalLight:()=>ll,DirectionalLightHelper:()=>VE,DiscreteInterpolant:()=>My,DisplayP3ColorSpace:()=>Ly,DodecahedronGeometry:()=>ay,DoubleSide:()=>Kn,DstAlphaFactor:()=>af,DstColorFactor:()=>cf,DynamicCopyUsage:()=>Mq,DynamicDrawUsage:()=>bq,DynamicReadUsage:()=>yq,EdgesGeometry:()=>cy,EllipseCurve:()=>vs,EqualCompare:()=>WL,EqualDepth:()=>gL,EqualStencilFunc:()=>hq,EquirectangularReflectionMapping:()=>xp,EquirectangularRefractionMapping:()=>wp,Euler:()=>so,EventDispatcher:()=>jn,ExtrudeGeometry:()=>ly,FileLoader:()=>tr,Float16BufferAttribute:()=>XC,Float32BufferAttribute:()=>qe,FloatType:()=>yr,Fog:()=>Xh,FogExp2:()=>$0,FramebufferTexture:()=>sE,FrontSide:()=>ms,Frustum:()=>Ld,GLBufferAttribute:()=>IE,GLSL1:()=>Rq,GLSL3:()=>UC,GreaterCompare:()=>$L,GreaterDepth:()=>_L,GreaterEqualCompare:()=>XL,GreaterEqualDepth:()=>bL,GreaterEqualStencilFunc:()=>gq,GreaterStencilFunc:()=>mq,GridHelper:()=>$d,Group:()=>Cr,HalfFloatType:()=>qi,HemisphereLight:()=>rf,HemisphereLightHelper:()=>BE,IcosahedronGeometry:()=>tf,ImageBitmapLoader:()=>Zp,ImageLoader:()=>Wd,ImageUtils:()=>V0,IncrementStencilOp:()=>oq,IncrementWrapStencilOp:()=>aq,InstancedBufferAttribute:()=>_s,InstancedBufferGeometry:()=>Dy,InstancedInterleavedBuffer:()=>AE,InstancedMesh:()=>al,Int16BufferAttribute:()=>$C,Int32BufferAttribute:()=>qC,Int8BufferAttribute:()=>HC,IntType:()=>ZE,InterleavedBuffer:()=>sc,InterleavedBufferAttribute:()=>ra,Interpolant:()=>cc,InterpolateDiscrete:()=>jd,InterpolateLinear:()=>Od,InterpolateSmooth:()=>B0,InvertStencilOp:()=>lq,KeepStencilOp:()=>yd,KeyframeTrack:()=>Io,LOD:()=>X0,LatheGeometry:()=>Vp,Layers:()=>$h,LessCompare:()=>GL,LessDepth:()=>pL,LessEqualCompare:()=>rD,LessEqualDepth:()=>yp,LessEqualStencilFunc:()=>fq,LessStencilFunc:()=>uq,Light:()=>ha,LightProbe:()=>Cy,Line:()=>Qi,Line3:()=>jE,LineBasicMaterial:()=>on,LineCurve:()=>Np,LineCurve3:()=>ty,LineDashedMaterial:()=>xy,LineLoop:()=>Kh,LineSegments:()=>Er,LinearDisplayP3ColorSpace:()=>ng,LinearFilter:()=>gn,LinearInterpolant:()=>Wp,LinearMipMapLinearFilter:()=>iq,LinearMipMapNearestFilter:()=>tq,LinearMipmapLinearFilter:()=>Co,LinearMipmapNearestFilter:()=>Td,LinearSRGBColorSpace:()=>Nn,LinearToneMapping:()=>wL,LinearTransfer:()=>Sp,Loader:()=>ir,LoaderUtils:()=>ys,LoadingManager:()=>qp,LoopOnce:()=>jy,LoopPingPong:()=>UL,LoopRepeat:()=>BL,LuminanceAlphaFormat:()=>OL,LuminanceFormat:()=>jL,MOUSE:()=>Ar,Material:()=>dn,MaterialLoader:()=>Ey,MathUtils:()=>st,Matrix3:()=>Jt,Matrix4:()=>Be,MaxEquation:()=>iL,Mesh:()=>Ve,MeshBasicMaterial:()=>tn,MeshDepthMaterial:()=>Bd,MeshDistanceMaterial:()=>Fp,MeshLambertMaterial:()=>vy,MeshMatcapMaterial:()=>yy,MeshNormalMaterial:()=>ca,MeshPhongMaterial:()=>nf,MeshPhysicalMaterial:()=>qr,MeshStandardMaterial:()=>Dr,MeshToonMaterial:()=>_y,MinEquation:()=>tL,MirroredRepeatWrapping:()=>Pd,MixOperation:()=>yL,MultiplyBlending:()=>uC,MultiplyOperation:()=>eg,NearestFilter:()=>ui,NearestMipMapLinearFilter:()=>eq,NearestMipMapNearestFilter:()=>J9,NearestMipmapLinearFilter:()=>rl,NearestMipmapNearestFilter:()=>tg,NeutralToneMapping:()=>EL,NeverCompare:()=>HL,NeverDepth:()=>fL,NeverStencilFunc:()=>dq,NoBlending:()=>ti,NoColorSpace:()=>Za,NoToneMapping:()=>tc,NormalAnimationBlendMode:()=>Oy,NormalBlending:()=>fs,NotEqualCompare:()=>qL,NotEqualDepth:()=>vL,NotEqualStencilFunc:()=>pq,NumberKeyframeTrack:()=>la,Object3D:()=>Tt,ObjectLoader:()=>yE,ObjectSpaceNormalMap:()=>zL,OctahedronGeometry:()=>sa,OneFactor:()=>nL,OneMinusConstantAlphaFactor:()=>hL,OneMinusConstantColorFactor:()=>dL,OneMinusDstAlphaFactor:()=>sL,OneMinusDstColorFactor:()=>aL,OneMinusSrcAlphaFactor:()=>Id,OneMinusSrcColorFactor:()=>oL,OrthographicCamera:()=>Do,P3Primaries:()=>Tp,PCFShadowMap:()=>YE,PCFSoftShadowMap:()=>KN,PMREMGenerator:()=>kp,Path:()=>Hd,PerspectiveCamera:()=>en,Plane:()=>lr,PlaneGeometry:()=>na,PlaneHelper:()=>GE,PointLight:()=>cl,PointLightHelper:()=>LE,Points:()=>Jh,PointsMaterial:()=>Vd,PolarGridHelper:()=>UE,PolyhedronGeometry:()=>oa,PositionalAudio:()=>SE,PropertyBinding:()=>$i,PropertyMixer:()=>Py,QuadraticBezierCurve:()=>Lp,QuadraticBezierCurve3:()=>Bp,Quaternion:()=>ii,QuaternionKeyframeTrack:()=>da,QuaternionLinearInterpolant:()=>Sy,RED_GREEN_RGTC2_Format:()=>NC,RED_RGTC1_Format:()=>LL,REVISION:()=>Fy,RGBADepthPacking:()=>Ny,RGBAFormat:()=>oo,RGBAIntegerFormat:()=>tD,RGBA_ASTC_10x10_Format:()=>IC,RGBA_ASTC_10x5_Format:()=>EC,RGBA_ASTC_10x6_Format:()=>DC,RGBA_ASTC_10x8_Format:()=>AC,RGBA_ASTC_12x10_Format:()=>PC,RGBA_ASTC_12x12_Format:()=>kC,RGBA_ASTC_4x4_Format:()=>yC,RGBA_ASTC_5x4_Format:()=>xC,RGBA_ASTC_5x5_Format:()=>wC,RGBA_ASTC_6x5_Format:()=>MC,RGBA_ASTC_6x6_Format:()=>SC,RGBA_ASTC_8x5_Format:()=>RC,RGBA_ASTC_8x6_Format:()=>TC,RGBA_ASTC_8x8_Format:()=>CC,RGBA_BPTC_Format:()=>L0,RGBA_ETC2_EAC_Format:()=>vC,RGBA_PVRTC_2BPPV1_Format:()=>gC,RGBA_PVRTC_4BPPV1_Format:()=>pC,RGBA_S3TC_DXT1_Format:()=>j0,RGBA_S3TC_DXT3_Format:()=>O0,RGBA_S3TC_DXT5_Format:()=>N0,RGBFormat:()=>FL,RGB_BPTC_SIGNED_Format:()=>FC,RGB_BPTC_UNSIGNED_Format:()=>jC,RGB_ETC1_Format:()=>bC,RGB_ETC2_Format:()=>_C,RGB_PVRTC_2BPPV1_Format:()=>mC,RGB_PVRTC_4BPPV1_Format:()=>fC,RGB_S3TC_DXT1_Format:()=>F0,RGFormat:()=>NL,RGIntegerFormat:()=>eD,RawShaderMaterial:()=>by,Ray:()=>ia,Raycaster:()=>Xr,Rec709Primaries:()=>Rp,RectAreaLight:()=>Ry,RedFormat:()=>Xd,RedIntegerFormat:()=>JE,ReinhardToneMapping:()=>ML,RenderTarget:()=>z0,RepeatWrapping:()=>qo,ReplaceStencilOp:()=>rq,ReverseSubtractEquation:()=>eL,RingGeometry:()=>dy,SIGNED_RED_GREEN_RGTC2_Format:()=>LC,SIGNED_RED_RGTC1_Format:()=>OC,SRGBColorSpace:()=>Fn,SRGBTransfer:()=>Ji,Scene:()=>Yh,ShaderChunk:()=>ai,ShaderLib:()=>hs,ShaderMaterial:()=>Ft,ShadowMaterial:()=>gy,Shape:()=>ic,ShapeGeometry:()=>uy,ShapePath:()=>qE,ShapeUtils:()=>ta,ShortType:()=>IL,Skeleton:()=>Qh,SkeletonHelper:()=>NE,SkinnedMesh:()=>Zh,Source:()=>Ka,Sphere:()=>En,SphereGeometry:()=>ac,Spherical:()=>dl,SphericalHarmonics3:()=>Ty,SplineCurve:()=>Up,SpotLight:()=>of,SpotLightHelper:()=>OE,Sprite:()=>q0,SpriteMaterial:()=>jp,SrcAlphaFactor:()=>Ad,SrcAlphaSaturateFactor:()=>cL,SrcColorFactor:()=>rL,StaticCopyUsage:()=>wq,StaticDrawUsage:()=>Cp,StaticReadUsage:()=>vq,StereoCamera:()=>wE,StreamCopyUsage:()=>Sq,StreamDrawUsage:()=>_q,StreamReadUsage:()=>xq,StringKeyframeTrack:()=>dc,SubtractEquation:()=>JN,SubtractiveBlending:()=>dC,TOUCH:()=>xs,TangentSpaceNormalMap:()=>hl,TetrahedronGeometry:()=>hy,Texture:()=>vn,TextureLoader:()=>Xp,TorusGeometry:()=>aa,TorusKnotGeometry:()=>fy,Triangle:()=>Ja,TriangleFanDrawMode:()=>df,TriangleStripDrawMode:()=>ig,TrianglesDrawMode:()=>nD,TubeGeometry:()=>my,UVMapping:()=>U0,Uint16BufferAttribute:()=>Ip,Uint32BufferAttribute:()=>Pp,Uint8BufferAttribute:()=>GC,Uint8ClampedBufferAttribute:()=>WC,Uniform:()=>EE,UniformsGroup:()=>DE,UniformsLib:()=>Ye,UniformsUtils:()=>Li,UnsignedByteType:()=>rc,UnsignedInt248Type:()=>ps,UnsignedInt5999Type:()=>PL,UnsignedIntType:()=>Fd,UnsignedShort4444Type:()=>QE,UnsignedShort5551Type:()=>KE,UnsignedShortType:()=>kd,VSMShadowMap:()=>Js,Vector2:()=>z,Vector3:()=>S,Vector4:()=>xi,VectorKeyframeTrack:()=>ua,VideoTexture:()=>oE,WebGL3DRenderTarget:()=>zC,WebGLArrayRenderTarget:()=>VC,WebGLCoordinateSystem:()=>ea,WebGLCubeRenderTarget:()=>G0,WebGLMultipleRenderTargets:()=>XE,WebGLRenderTarget:()=>ci,WebGLRenderer:()=>oc,WebGLUtils:()=>s3,WebGPUCoordinateSystem:()=>Ep,WireframeGeometry:()=>py,WrapAroundEnding:()=>Mp,ZeroCurvatureEnding:()=>Md,ZeroFactor:()=>ul,ZeroSlopeEnding:()=>Sd,ZeroStencilOp:()=>nq,createCanvasElement:()=>QL});var Fy="165",Ar={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},xs={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},ZN=0,lC=1,QN=2,Q9=3,K9=0,YE=1,KN=2,Js=3,ms=0,Wr=1,Kn=2,ti=0,fs=1,Dd=2,dC=3,uC=4,qd=5,vr=100,JN=101,eL=102,tL=103,iL=104,ul=200,nL=201,rL=202,oL=203,Ad=204,Id=205,af=206,sL=207,cf=208,aL=209,cL=210,lL=211,dL=212,uL=213,hL=214,fL=0,mL=1,pL=2,yp=3,gL=4,bL=5,_L=6,vL=7,eg=0,yL=1,xL=2,tc=0,wL=1,ML=2,SL=3,RL=4,TL=5,CL=6,EL=7,hC="attached",DL="detached",U0=300,nc=301,ol=302,xp=303,wp=304,lf=306,qo=1e3,ro=1001,Pd=1002,ui=1003,tg=1004,J9=1004,rl=1005,eq=1005,gn=1006,Td=1007,tq=1007,Co=1008,iq=1008,rc=1009,AL=1010,IL=1011,kd=1012,ZE=1013,Fd=1014,yr=1015,qi=1016,QE=1017,KE=1018,ps=1020,PL=35902,kL=1021,FL=1022,oo=1023,jL=1024,OL=1025,Cd=1026,gs=1027,Xd=1028,JE=1029,NL=1030,eD=1031,tD=1033,F0=33776,j0=33777,O0=33778,N0=33779,fC=35840,mC=35841,pC=35842,gC=35843,bC=36196,_C=37492,vC=37496,yC=37808,xC=37809,wC=37810,MC=37811,SC=37812,RC=37813,TC=37814,CC=37815,EC=37816,DC=37817,AC=37818,IC=37819,PC=37820,kC=37821,L0=36492,FC=36494,jC=36495,LL=36283,OC=36284,NC=36285,LC=36286,jy=2200,BL=2201,UL=2202,jd=2300,Od=2301,B0=2302,Md=2400,Sd=2401,Mp=2402,Oy=2500,iD=2501,nD=0,ig=1,df=2,VL=3200,Ny=3201,hl=0,zL=1,Za="",Fn="srgb",Nn="srgb-linear",Ly="display-p3",ng="display-p3-linear",Sp="linear",Ji="srgb",Rp="rec709",Tp="p3",nq=0,yd=7680,rq=7681,oq=7682,sq=7683,aq=34055,cq=34056,lq=5386,dq=512,uq=513,hq=514,fq=515,mq=516,pq=517,gq=518,BC=519,HL=512,GL=513,WL=514,rD=515,$L=516,qL=517,XL=518,YL=519,Cp=35044,bq=35048,_q=35040,vq=35045,yq=35049,xq=35041,wq=35046,Mq=35050,Sq=35042,Rq="100",UC="300 es",ea=2e3,Ep=2001,jn=class{addEventListener(e,i){this._listeners===void 0&&(this._listeners={});let t=this._listeners;t[e]===void 0&&(t[e]=[]),t[e].indexOf(i)===-1&&t[e].push(i)}hasEventListener(e,i){if(this._listeners===void 0)return!1;let t=this._listeners;return t[e]!==void 0&&t[e].indexOf(i)!==-1}removeEventListener(e,i){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let o=r.indexOf(i);o!==-1&&r.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let r=t.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,e);e.target=null}}},Sr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],_2=1234567,Ed=Math.PI/180,Gh=180/Math.PI;function Eo(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0,t=Math.random()*4294967295|0;return(Sr[n&255]+Sr[n>>8&255]+Sr[n>>16&255]+Sr[n>>24&255]+"-"+Sr[e&255]+Sr[e>>8&255]+"-"+Sr[e>>16&15|64]+Sr[e>>24&255]+"-"+Sr[i&63|128]+Sr[i>>8&255]+"-"+Sr[i>>16&255]+Sr[i>>24&255]+Sr[t&255]+Sr[t>>8&255]+Sr[t>>16&255]+Sr[t>>24&255]).toLowerCase()}function Cn(n,e,i){return Math.max(e,Math.min(i,n))}function oD(n,e){return(n%e+e)%e}function Tq(n,e,i,t,r){return t+(n-e)*(r-t)/(i-e)}function Cq(n,e,i){return n!==e?(i-n)/(e-n):0}function gp(n,e,i){return(1-i)*n+i*e}function Eq(n,e,i,t){return gp(n,e,1-Math.exp(-i*t))}function Dq(n,e=1){return e-Math.abs(oD(n,e*2)-e)}function Aq(n,e,i){return n<=e?0:n>=i?1:(n=(n-e)/(i-e),n*n*(3-2*n))}function Iq(n,e,i){return n<=e?0:n>=i?1:(n=(n-e)/(i-e),n*n*n*(n*(n*6-15)+10))}function Pq(n,e){return n+Math.floor(Math.random()*(e-n+1))}function kq(n,e){return n+Math.random()*(e-n)}function Fq(n){return n*(.5-Math.random())}function jq(n){n!==void 0&&(_2=n);let e=_2+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Oq(n){return n*Ed}function Nq(n){return n*Gh}function Lq(n){return(n&n-1)===0&&n!==0}function Bq(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Uq(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Vq(n,e,i,t,r){let o=Math.cos,s=Math.sin,a=o(i/2),c=s(i/2),l=o((e+t)/2),d=s((e+t)/2),u=o((e-t)/2),h=s((e-t)/2),f=o((t-e)/2),p=s((t-e)/2);switch(r){case"XYX":n.set(a*d,c*u,c*h,a*l);break;case"YZY":n.set(c*h,a*d,c*u,a*l);break;case"ZXZ":n.set(c*u,c*h,a*d,a*l);break;case"XZX":n.set(a*d,c*p,c*f,a*l);break;case"YXY":n.set(c*f,a*d,c*p,a*l);break;case"ZYZ":n.set(c*p,c*f,a*d,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Gr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ei(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var st={DEG2RAD:Ed,RAD2DEG:Gh,generateUUID:Eo,clamp:Cn,euclideanModulo:oD,mapLinear:Tq,inverseLerp:Cq,lerp:gp,damp:Eq,pingpong:Dq,smoothstep:Aq,smootherstep:Iq,randInt:Pq,randFloat:kq,randFloatSpread:Fq,seededRandom:jq,degToRad:Oq,radToDeg:Nq,isPowerOfTwo:Lq,ceilPowerOfTwo:Bq,floorPowerOfTwo:Uq,setQuaternionFromProperEuler:Vq,normalize:ei,denormalize:Gr},z=class n{constructor(e=0,i=0){n.prototype.isVector2=!0,this.x=e,this.y=i}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,i){return this.x=e,this.y=i,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let i=this.x,t=this.y,r=e.elements;return this.x=r[0]*i+r[3]*t+r[6],this.y=r[1]*i+r[4]*t+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,i){return this.x=Math.max(e.x,Math.min(i.x,this.x)),this.y=Math.max(e.y,Math.min(i.y,this.y)),this}clampScalar(e,i){return this.x=Math.max(e,Math.min(i,this.x)),this.y=Math.max(e,Math.min(i,this.y)),this}clampLength(e,i){let t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(i,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let i=Math.sqrt(this.lengthSq()*e.lengthSq());if(i===0)return Math.PI/2;let t=this.dot(e)/i;return Math.acos(Cn(t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let i=this.x-e.x,t=this.y-e.y;return i*i+t*t}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this}lerpVectors(e,i,t){return this.x=e.x+(i.x-e.x)*t,this.y=e.y+(i.y-e.y)*t,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this}rotateAround(e,i){let t=Math.cos(i),r=Math.sin(i),o=this.x-e.x,s=this.y-e.y;return this.x=o*t-s*r+e.x,this.y=o*r+s*t+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Jt=class n{constructor(e,i,t,r,o,s,a,c,l){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,i,t,r,o,s,a,c,l)}set(e,i,t,r,o,s,a,c,l){let d=this.elements;return d[0]=e,d[1]=r,d[2]=a,d[3]=i,d[4]=o,d[5]=c,d[6]=t,d[7]=s,d[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let i=this.elements,t=e.elements;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],this}extractBasis(e,i,t){return e.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),t.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let i=e.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,i){let t=e.elements,r=i.elements,o=this.elements,s=t[0],a=t[3],c=t[6],l=t[1],d=t[4],u=t[7],h=t[2],f=t[5],p=t[8],b=r[0],g=r[3],m=r[6],v=r[1],_=r[4],y=r[7],C=r[2],R=r[5],M=r[8];return o[0]=s*b+a*v+c*C,o[3]=s*g+a*_+c*R,o[6]=s*m+a*y+c*M,o[1]=l*b+d*v+u*C,o[4]=l*g+d*_+u*R,o[7]=l*m+d*y+u*M,o[2]=h*b+f*v+p*C,o[5]=h*g+f*_+p*R,o[8]=h*m+f*y+p*M,this}multiplyScalar(e){let i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=e,i[4]*=e,i[7]*=e,i[2]*=e,i[5]*=e,i[8]*=e,this}determinant(){let e=this.elements,i=e[0],t=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8];return i*s*d-i*a*l-t*o*d+t*a*c+r*o*l-r*s*c}invert(){let e=this.elements,i=e[0],t=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],u=d*s-a*l,h=a*c-d*o,f=l*o-s*c,p=i*u+t*h+r*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);let b=1/p;return e[0]=u*b,e[1]=(r*l-d*t)*b,e[2]=(a*t-r*s)*b,e[3]=h*b,e[4]=(d*i-r*c)*b,e[5]=(r*o-a*i)*b,e[6]=f*b,e[7]=(t*c-l*i)*b,e[8]=(s*i-t*o)*b,this}transpose(){let e,i=this.elements;return e=i[1],i[1]=i[3],i[3]=e,e=i[2],i[2]=i[6],i[6]=e,e=i[5],i[5]=i[7],i[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let i=this.elements;return e[0]=i[0],e[1]=i[3],e[2]=i[6],e[3]=i[1],e[4]=i[4],e[5]=i[7],e[6]=i[2],e[7]=i[5],e[8]=i[8],this}setUvTransform(e,i,t,r,o,s,a){let c=Math.cos(o),l=Math.sin(o);return this.set(t*c,t*l,-t*(c*s+l*a)+s+e,-r*l,r*c,-r*(-l*s+c*a)+a+i,0,0,1),this}scale(e,i){return this.premultiply(ST.makeScale(e,i)),this}rotate(e){return this.premultiply(ST.makeRotation(-e)),this}translate(e,i){return this.premultiply(ST.makeTranslation(e,i)),this}makeTranslation(e,i){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,i,0,0,1),this}makeRotation(e){let i=Math.cos(e),t=Math.sin(e);return this.set(i,-t,0,t,i,0,0,0,1),this}makeScale(e,i){return this.set(e,0,0,0,i,0,0,0,1),this}equals(e){let i=this.elements,t=e.elements;for(let r=0;r<9;r++)if(i[r]!==t[r])return!1;return!0}fromArray(e,i=0){for(let t=0;t<9;t++)this.elements[t]=e[t+i];return this}toArray(e=[],i=0){let t=this.elements;return e[i]=t[0],e[i+1]=t[1],e[i+2]=t[2],e[i+3]=t[3],e[i+4]=t[4],e[i+5]=t[5],e[i+6]=t[6],e[i+7]=t[7],e[i+8]=t[8],e}clone(){return new this.constructor().fromArray(this.elements)}},ST=new Jt;function ZL(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}var zq={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Bh(n,e){return new zq[n](e)}function Dp(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function QL(){let n=Dp("canvas");return n.style.display="block",n}var v2={};function sD(n){n in v2||(v2[n]=!0,console.warn(n))}function Hq(n,e,i){return new Promise(function(t,r){function o(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(o,i);break;default:t()}}setTimeout(o,i)})}var y2=new Jt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),x2=new Jt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),zv={[Nn]:{transfer:Sp,primaries:Rp,toReference:n=>n,fromReference:n=>n},[Fn]:{transfer:Ji,primaries:Rp,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[ng]:{transfer:Sp,primaries:Tp,toReference:n=>n.applyMatrix3(x2),fromReference:n=>n.applyMatrix3(y2)},[Ly]:{transfer:Ji,primaries:Tp,toReference:n=>n.convertSRGBToLinear().applyMatrix3(x2),fromReference:n=>n.applyMatrix3(y2).convertLinearToSRGB()}},Gq=new Set([Nn,ng]),Ri={enabled:!0,_workingColorSpace:Nn,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!Gq.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,i){if(this.enabled===!1||e===i||!e||!i)return n;let t=zv[e].toReference,r=zv[i].fromReference;return r(t(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return zv[n].primaries},getTransfer:function(n){return n===Za?Sp:zv[n].transfer}};function zh(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function RT(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var bh,V0=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{bh===void 0&&(bh=Dp("canvas")),bh.width=e.width,bh.height=e.height;let t=bh.getContext("2d");e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height),i=bh}return i.width>2048||i.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),i.toDataURL("image/jpeg",.6)):i.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let i=Dp("canvas");i.width=e.width,i.height=e.height;let t=i.getContext("2d");t.drawImage(e,0,0,e.width,e.height);let r=t.getImageData(0,0,e.width,e.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=zh(o[s]/255)*255;return t.putImageData(r,0,0),i}else if(e.data){let i=e.data.slice(0);for(let t=0;t<i.length;t++)i instanceof Uint8Array||i instanceof Uint8ClampedArray?i[t]=Math.floor(zh(i[t]/255)*255):i[t]=zh(i[t]);return{data:i,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},Wq=0,Ka=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Wq++}),this.uuid=Eo(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let i=e===void 0||typeof e=="string";if(!i&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let t={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(TT(r[s].image)):o.push(TT(r[s]))}else o=TT(r);t.url=o}return i||(e.images[this.uuid]=t),t}};function TT(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?V0.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var $q=0,vn=(()=>{class n extends jn{constructor(i=n.DEFAULT_IMAGE,t=n.DEFAULT_MAPPING,r=ro,o=ro,s=gn,a=Co,c=oo,l=rc,d=n.DEFAULT_ANISOTROPY,u=Za){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:$q++}),this.uuid=Eo(),this.name="",this.source=new Ka(i),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=d,this.format=c,this.internalFormat=null,this.type=l,this.offset=new z(0,0),this.repeat=new z(1,1),this.center=new z(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Jt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(i=null){this.source.data=i}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(i){return this.name=i.name,this.source=i.source,this.mipmaps=i.mipmaps.slice(0),this.mapping=i.mapping,this.channel=i.channel,this.wrapS=i.wrapS,this.wrapT=i.wrapT,this.magFilter=i.magFilter,this.minFilter=i.minFilter,this.anisotropy=i.anisotropy,this.format=i.format,this.internalFormat=i.internalFormat,this.type=i.type,this.offset.copy(i.offset),this.repeat.copy(i.repeat),this.center.copy(i.center),this.rotation=i.rotation,this.matrixAutoUpdate=i.matrixAutoUpdate,this.matrix.copy(i.matrix),this.generateMipmaps=i.generateMipmaps,this.premultiplyAlpha=i.premultiplyAlpha,this.flipY=i.flipY,this.unpackAlignment=i.unpackAlignment,this.colorSpace=i.colorSpace,this.userData=JSON.parse(JSON.stringify(i.userData)),this.needsUpdate=!0,this}toJSON(i){let t=i===void 0||typeof i=="string";if(!t&&i.textures[this.uuid]!==void 0)return i.textures[this.uuid];let r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(i).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(i.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(i){if(this.mapping!==U0)return i;if(i.applyMatrix3(this.matrix),i.x<0||i.x>1)switch(this.wrapS){case qo:i.x=i.x-Math.floor(i.x);break;case ro:i.x=i.x<0?0:1;break;case Pd:Math.abs(Math.floor(i.x)%2)===1?i.x=Math.ceil(i.x)-i.x:i.x=i.x-Math.floor(i.x);break}if(i.y<0||i.y>1)switch(this.wrapT){case qo:i.y=i.y-Math.floor(i.y);break;case ro:i.y=i.y<0?0:1;break;case Pd:Math.abs(Math.floor(i.y)%2)===1?i.y=Math.ceil(i.y)-i.y:i.y=i.y-Math.floor(i.y);break}return this.flipY&&(i.y=1-i.y),i}set needsUpdate(i){i===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(i){i===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=U0,n.DEFAULT_ANISOTROPY=1,n})(),xi=class n{constructor(e=0,i=0,t=0,r=1){n.prototype.isVector4=!0,this.x=e,this.y=i,this.z=t,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,i,t,r){return this.x=e,this.y=i,this.z=t,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this.z=e.z+i.z,this.w=e.w+i.w,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this.z+=e.z*i,this.w+=e.w*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this.z=e.z-i.z,this.w=e.w-i.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let i=this.x,t=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*i+s[4]*t+s[8]*r+s[12]*o,this.y=s[1]*i+s[5]*t+s[9]*r+s[13]*o,this.z=s[2]*i+s[6]*t+s[10]*r+s[14]*o,this.w=s[3]*i+s[7]*t+s[11]*r+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let i=Math.sqrt(1-e.w*e.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/i,this.y=e.y/i,this.z=e.z/i),this}setAxisAngleFromRotationMatrix(e){let i,t,r,o,c=e.elements,l=c[0],d=c[4],u=c[8],h=c[1],f=c[5],p=c[9],b=c[2],g=c[6],m=c[10];if(Math.abs(d-h)<.01&&Math.abs(u-b)<.01&&Math.abs(p-g)<.01){if(Math.abs(d+h)<.1&&Math.abs(u+b)<.1&&Math.abs(p+g)<.1&&Math.abs(l+f+m-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;let _=(l+1)/2,y=(f+1)/2,C=(m+1)/2,R=(d+h)/4,M=(u+b)/4,A=(p+g)/4;return _>y&&_>C?_<.01?(t=0,r=.707106781,o=.707106781):(t=Math.sqrt(_),r=R/t,o=M/t):y>C?y<.01?(t=.707106781,r=0,o=.707106781):(r=Math.sqrt(y),t=R/r,o=A/r):C<.01?(t=.707106781,r=.707106781,o=0):(o=Math.sqrt(C),t=M/o,r=A/o),this.set(t,r,o,i),this}let v=Math.sqrt((g-p)*(g-p)+(u-b)*(u-b)+(h-d)*(h-d));return Math.abs(v)<.001&&(v=1),this.x=(g-p)/v,this.y=(u-b)/v,this.z=(h-d)/v,this.w=Math.acos((l+f+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,i){return this.x=Math.max(e.x,Math.min(i.x,this.x)),this.y=Math.max(e.y,Math.min(i.y,this.y)),this.z=Math.max(e.z,Math.min(i.z,this.z)),this.w=Math.max(e.w,Math.min(i.w,this.w)),this}clampScalar(e,i){return this.x=Math.max(e,Math.min(i,this.x)),this.y=Math.max(e,Math.min(i,this.y)),this.z=Math.max(e,Math.min(i,this.z)),this.w=Math.max(e,Math.min(i,this.w)),this}clampLength(e,i){let t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(i,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this.z+=(e.z-this.z)*i,this.w+=(e.w-this.w)*i,this}lerpVectors(e,i,t){return this.x=e.x+(i.x-e.x)*t,this.y=e.y+(i.y-e.y)*t,this.z=e.z+(i.z-e.z)*t,this.w=e.w+(i.w-e.w)*t,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this.z=e[i+2],this.w=e[i+3],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e[i+2]=this.z,e[i+3]=this.w,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this.z=e.getZ(i),this.w=e.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},z0=class extends jn{constructor(e=1,i=1,t={}){super(),this.isRenderTarget=!0,this.width=e,this.height=i,this.depth=1,this.scissor=new xi(0,0,e,i),this.scissorTest=!1,this.viewport=new xi(0,0,e,i);let r={width:e,height:i,depth:1};t=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:gn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},t);let o=new vn(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace);o.flipY=!1,o.generateMipmaps=t.generateMipmaps,o.internalFormat=t.internalFormat,this.textures=[];let s=t.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,this.depthTexture=t.depthTexture,this.samples=t.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,i,t=1){if(this.width!==e||this.height!==i||this.depth!==t){this.width=e,this.height=i,this.depth=t;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=e,this.textures[r].image.height=i,this.textures[r].image.depth=t;this.dispose()}this.viewport.set(0,0,e,i),this.scissor.set(0,0,e,i)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,r=e.textures.length;t<r;t++)this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0;let i=Object.assign({},e.texture.image);return this.texture.source=new Ka(i),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},ci=class extends z0{constructor(e=1,i=1,t={}){super(e,i,t),this.isWebGLRenderTarget=!0}},Wh=class extends vn{constructor(e=null,i=1,t=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:i,height:t,depth:r},this.magFilter=ui,this.minFilter=ui,this.wrapR=ro,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}},VC=class extends ci{constructor(e=1,i=1,t=1,r={}){super(e,i,r),this.isWebGLArrayRenderTarget=!0,this.depth=t,this.texture=new Wh(null,e,i,t),this.texture.isRenderTargetTexture=!0}},Ap=class extends vn{constructor(e=null,i=1,t=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:i,height:t,depth:r},this.magFilter=ui,this.minFilter=ui,this.wrapR=ro,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},zC=class extends ci{constructor(e=1,i=1,t=1,r={}){super(e,i,r),this.isWebGL3DRenderTarget=!0,this.depth=t,this.texture=new Ap(null,e,i,t),this.texture.isRenderTargetTexture=!0}},ii=class{constructor(e=0,i=0,t=0,r=1){this.isQuaternion=!0,this._x=e,this._y=i,this._z=t,this._w=r}static slerpFlat(e,i,t,r,o,s,a){let c=t[r+0],l=t[r+1],d=t[r+2],u=t[r+3],h=o[s+0],f=o[s+1],p=o[s+2],b=o[s+3];if(a===0){e[i+0]=c,e[i+1]=l,e[i+2]=d,e[i+3]=u;return}if(a===1){e[i+0]=h,e[i+1]=f,e[i+2]=p,e[i+3]=b;return}if(u!==b||c!==h||l!==f||d!==p){let g=1-a,m=c*h+l*f+d*p+u*b,v=m>=0?1:-1,_=1-m*m;if(_>Number.EPSILON){let C=Math.sqrt(_),R=Math.atan2(C,m*v);g=Math.sin(g*R)/C,a=Math.sin(a*R)/C}let y=a*v;if(c=c*g+h*y,l=l*g+f*y,d=d*g+p*y,u=u*g+b*y,g===1-a){let C=1/Math.sqrt(c*c+l*l+d*d+u*u);c*=C,l*=C,d*=C,u*=C}}e[i]=c,e[i+1]=l,e[i+2]=d,e[i+3]=u}static multiplyQuaternionsFlat(e,i,t,r,o,s){let a=t[r],c=t[r+1],l=t[r+2],d=t[r+3],u=o[s],h=o[s+1],f=o[s+2],p=o[s+3];return e[i]=a*p+d*u+c*f-l*h,e[i+1]=c*p+d*h+l*u-a*f,e[i+2]=l*p+d*f+a*h-c*u,e[i+3]=d*p-a*u-c*h-l*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,i,t,r){return this._x=e,this._y=i,this._z=t,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,i=!0){let t=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,c=Math.sin,l=a(t/2),d=a(r/2),u=a(o/2),h=c(t/2),f=c(r/2),p=c(o/2);switch(s){case"XYZ":this._x=h*d*u+l*f*p,this._y=l*f*u-h*d*p,this._z=l*d*p+h*f*u,this._w=l*d*u-h*f*p;break;case"YXZ":this._x=h*d*u+l*f*p,this._y=l*f*u-h*d*p,this._z=l*d*p-h*f*u,this._w=l*d*u+h*f*p;break;case"ZXY":this._x=h*d*u-l*f*p,this._y=l*f*u+h*d*p,this._z=l*d*p+h*f*u,this._w=l*d*u-h*f*p;break;case"ZYX":this._x=h*d*u-l*f*p,this._y=l*f*u+h*d*p,this._z=l*d*p-h*f*u,this._w=l*d*u+h*f*p;break;case"YZX":this._x=h*d*u+l*f*p,this._y=l*f*u+h*d*p,this._z=l*d*p-h*f*u,this._w=l*d*u-h*f*p;break;case"XZY":this._x=h*d*u-l*f*p,this._y=l*f*u-h*d*p,this._z=l*d*p+h*f*u,this._w=l*d*u+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return i===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,i){let t=i/2,r=Math.sin(t);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(t),this._onChangeCallback(),this}setFromRotationMatrix(e){let i=e.elements,t=i[0],r=i[4],o=i[8],s=i[1],a=i[5],c=i[9],l=i[2],d=i[6],u=i[10],h=t+a+u;if(h>0){let f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(d-c)*f,this._y=(o-l)*f,this._z=(s-r)*f}else if(t>a&&t>u){let f=2*Math.sqrt(1+t-a-u);this._w=(d-c)/f,this._x=.25*f,this._y=(r+s)/f,this._z=(o+l)/f}else if(a>u){let f=2*Math.sqrt(1+a-t-u);this._w=(o-l)/f,this._x=(r+s)/f,this._y=.25*f,this._z=(c+d)/f}else{let f=2*Math.sqrt(1+u-t-a);this._w=(s-r)/f,this._x=(o+l)/f,this._y=(c+d)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,i){let t=e.dot(i)+1;return t<Number.EPSILON?(t=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=t):(this._x=0,this._y=-e.z,this._z=e.y,this._w=t)):(this._x=e.y*i.z-e.z*i.y,this._y=e.z*i.x-e.x*i.z,this._z=e.x*i.y-e.y*i.x,this._w=t),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Cn(this.dot(e),-1,1)))}rotateTowards(e,i){let t=this.angleTo(e);if(t===0)return this;let r=Math.min(1,i/t);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,i){let t=e._x,r=e._y,o=e._z,s=e._w,a=i._x,c=i._y,l=i._z,d=i._w;return this._x=t*d+s*a+r*l-o*c,this._y=r*d+s*c+o*a-t*l,this._z=o*d+s*l+t*c-r*a,this._w=s*d-t*a-r*c-o*l,this._onChangeCallback(),this}slerp(e,i){if(i===0)return this;if(i===1)return this.copy(e);let t=this._x,r=this._y,o=this._z,s=this._w,a=s*e._w+t*e._x+r*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=t,this._y=r,this._z=o,this;let c=1-a*a;if(c<=Number.EPSILON){let f=1-i;return this._w=f*s+i*this._w,this._x=f*t+i*this._x,this._y=f*r+i*this._y,this._z=f*o+i*this._z,this.normalize(),this}let l=Math.sqrt(c),d=Math.atan2(l,a),u=Math.sin((1-i)*d)/l,h=Math.sin(i*d)/l;return this._w=s*u+this._w*h,this._x=t*u+this._x*h,this._y=r*u+this._y*h,this._z=o*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,i,t){return this.copy(e).slerp(i,t)}random(){let e=2*Math.PI*Math.random(),i=2*Math.PI*Math.random(),t=Math.random(),r=Math.sqrt(1-t),o=Math.sqrt(t);return this.set(r*Math.sin(e),r*Math.cos(e),o*Math.sin(i),o*Math.cos(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,i=0){return this._x=e[i],this._y=e[i+1],this._z=e[i+2],this._w=e[i+3],this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._w,e}fromBufferAttribute(e,i){return this._x=e.getX(i),this._y=e.getY(i),this._z=e.getZ(i),this._w=e.getW(i),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},S=class n{constructor(e=0,i=0,t=0){n.prototype.isVector3=!0,this.x=e,this.y=i,this.z=t}set(e,i,t){return t===void 0&&(t=this.z),this.x=e,this.y=i,this.z=t,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this.z=e.z+i.z,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this.z+=e.z*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this.z=e.z-i.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,i){return this.x=e.x*i.x,this.y=e.y*i.y,this.z=e.z*i.z,this}applyEuler(e){return this.applyQuaternion(w2.setFromEuler(e))}applyAxisAngle(e,i){return this.applyQuaternion(w2.setFromAxisAngle(e,i))}applyMatrix3(e){let i=this.x,t=this.y,r=this.z,o=e.elements;return this.x=o[0]*i+o[3]*t+o[6]*r,this.y=o[1]*i+o[4]*t+o[7]*r,this.z=o[2]*i+o[5]*t+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let i=this.x,t=this.y,r=this.z,o=e.elements,s=1/(o[3]*i+o[7]*t+o[11]*r+o[15]);return this.x=(o[0]*i+o[4]*t+o[8]*r+o[12])*s,this.y=(o[1]*i+o[5]*t+o[9]*r+o[13])*s,this.z=(o[2]*i+o[6]*t+o[10]*r+o[14])*s,this}applyQuaternion(e){let i=this.x,t=this.y,r=this.z,o=e.x,s=e.y,a=e.z,c=e.w,l=2*(s*r-a*t),d=2*(a*i-o*r),u=2*(o*t-s*i);return this.x=i+c*l+s*u-a*d,this.y=t+c*d+a*l-o*u,this.z=r+c*u+o*d-s*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let i=this.x,t=this.y,r=this.z,o=e.elements;return this.x=o[0]*i+o[4]*t+o[8]*r,this.y=o[1]*i+o[5]*t+o[9]*r,this.z=o[2]*i+o[6]*t+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,i){return this.x=Math.max(e.x,Math.min(i.x,this.x)),this.y=Math.max(e.y,Math.min(i.y,this.y)),this.z=Math.max(e.z,Math.min(i.z,this.z)),this}clampScalar(e,i){return this.x=Math.max(e,Math.min(i,this.x)),this.y=Math.max(e,Math.min(i,this.y)),this.z=Math.max(e,Math.min(i,this.z)),this}clampLength(e,i){let t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(i,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this.z+=(e.z-this.z)*i,this}lerpVectors(e,i,t){return this.x=e.x+(i.x-e.x)*t,this.y=e.y+(i.y-e.y)*t,this.z=e.z+(i.z-e.z)*t,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,i){let t=e.x,r=e.y,o=e.z,s=i.x,a=i.y,c=i.z;return this.x=r*c-o*a,this.y=o*s-t*c,this.z=t*a-r*s,this}projectOnVector(e){let i=e.lengthSq();if(i===0)return this.set(0,0,0);let t=e.dot(this)/i;return this.copy(e).multiplyScalar(t)}projectOnPlane(e){return CT.copy(this).projectOnVector(e),this.sub(CT)}reflect(e){return this.sub(CT.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let i=Math.sqrt(this.lengthSq()*e.lengthSq());if(i===0)return Math.PI/2;let t=this.dot(e)/i;return Math.acos(Cn(t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let i=this.x-e.x,t=this.y-e.y,r=this.z-e.z;return i*i+t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,i,t){let r=Math.sin(i)*e;return this.x=r*Math.sin(t),this.y=Math.cos(i)*e,this.z=r*Math.cos(t),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,i,t){return this.x=e*Math.sin(i),this.y=t,this.z=e*Math.cos(i),this}setFromMatrixPosition(e){let i=e.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(e){let i=this.setFromMatrixColumn(e,0).length(),t=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=i,this.y=t,this.z=r,this}setFromMatrixColumn(e,i){return this.fromArray(e.elements,i*4)}setFromMatrix3Column(e,i){return this.fromArray(e.elements,i*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this.z=e[i+2],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e[i+2]=this.z,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this.z=e.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,i=Math.random()*2-1,t=Math.sqrt(1-i*i);return this.x=t*Math.cos(e),this.y=i,this.z=t*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},CT=new S,w2=new ii,_n=class{constructor(e=new S(1/0,1/0,1/0),i=new S(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=i}set(e,i){return this.min.copy(e),this.max.copy(i),this}setFromArray(e){this.makeEmpty();for(let i=0,t=e.length;i<t;i+=3)this.expandByPoint(ls.fromArray(e,i));return this}setFromBufferAttribute(e){this.makeEmpty();for(let i=0,t=e.count;i<t;i++)this.expandByPoint(ls.fromBufferAttribute(e,i));return this}setFromPoints(e){this.makeEmpty();for(let i=0,t=e.length;i<t;i++)this.expandByPoint(e[i]);return this}setFromCenterAndSize(e,i){let t=ls.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(t),this.max.copy(e).add(t),this}setFromObject(e,i=!1){return this.makeEmpty(),this.expandByObject(e,i)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,i=!1){e.updateWorldMatrix(!1,!1);let t=e.geometry;if(t!==void 0){let o=t.getAttribute("position");if(i===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,ls):ls.fromBufferAttribute(o,s),ls.applyMatrix4(e.matrixWorld),this.expandByPoint(ls);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Hv.copy(e.boundingBox)):(t.boundingBox===null&&t.computeBoundingBox(),Hv.copy(t.boundingBox)),Hv.applyMatrix4(e.matrixWorld),this.union(Hv)}let r=e.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],i);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,i){return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ls),ls.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let i,t;return e.normal.x>0?(i=e.normal.x*this.min.x,t=e.normal.x*this.max.x):(i=e.normal.x*this.max.x,t=e.normal.x*this.min.x),e.normal.y>0?(i+=e.normal.y*this.min.y,t+=e.normal.y*this.max.y):(i+=e.normal.y*this.max.y,t+=e.normal.y*this.min.y),e.normal.z>0?(i+=e.normal.z*this.min.z,t+=e.normal.z*this.max.z):(i+=e.normal.z*this.max.z,t+=e.normal.z*this.min.z),i<=-e.constant&&t>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ip),Gv.subVectors(this.max,ip),_h.subVectors(e.a,ip),vh.subVectors(e.b,ip),yh.subVectors(e.c,ip),Zc.subVectors(vh,_h),Qc.subVectors(yh,vh),cd.subVectors(_h,yh);let i=[0,-Zc.z,Zc.y,0,-Qc.z,Qc.y,0,-cd.z,cd.y,Zc.z,0,-Zc.x,Qc.z,0,-Qc.x,cd.z,0,-cd.x,-Zc.y,Zc.x,0,-Qc.y,Qc.x,0,-cd.y,cd.x,0];return!ET(i,_h,vh,yh,Gv)||(i=[1,0,0,0,1,0,0,0,1],!ET(i,_h,vh,yh,Gv))?!1:(Wv.crossVectors(Zc,Qc),i=[Wv.x,Wv.y,Wv.z],ET(i,_h,vh,yh,Gv))}clampPoint(e,i){return i.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ls).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ls).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ga[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ga[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ga[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ga[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ga[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ga[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ga[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ga[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ga),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Ga=[new S,new S,new S,new S,new S,new S,new S,new S],ls=new S,Hv=new _n,_h=new S,vh=new S,yh=new S,Zc=new S,Qc=new S,cd=new S,ip=new S,Gv=new S,Wv=new S,ld=new S;function ET(n,e,i,t,r){for(let o=0,s=n.length-3;o<=s;o+=3){ld.fromArray(n,o);let a=r.x*Math.abs(ld.x)+r.y*Math.abs(ld.y)+r.z*Math.abs(ld.z),c=e.dot(ld),l=i.dot(ld),d=t.dot(ld);if(Math.max(-Math.max(c,l,d),Math.min(c,l,d))>a)return!1}return!0}var qq=new _n,np=new S,DT=new S,En=class{constructor(e=new S,i=-1){this.isSphere=!0,this.center=e,this.radius=i}set(e,i){return this.center.copy(e),this.radius=i,this}setFromPoints(e,i){let t=this.center;i!==void 0?t.copy(i):qq.setFromPoints(e).getCenter(t);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,t.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let i=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=i*i}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,i){let t=this.center.distanceToSquared(e);return i.copy(e),t>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;np.subVectors(e,this.center);let i=np.lengthSq();if(i>this.radius*this.radius){let t=Math.sqrt(i),r=(t-this.radius)*.5;this.center.addScaledVector(np,r/t),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(DT.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(np.copy(e.center).add(DT)),this.expandByPoint(np.copy(e.center).sub(DT))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},Wa=new S,AT=new S,$v=new S,Kc=new S,IT=new S,qv=new S,PT=new S,ia=class{constructor(e=new S,i=new S(0,0,-1)){this.origin=e,this.direction=i}set(e,i){return this.origin.copy(e),this.direction.copy(i),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,i){return i.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Wa)),this}closestPointToPoint(e,i){i.subVectors(e,this.origin);let t=i.dot(this.direction);return t<0?i.copy(this.origin):i.copy(this.origin).addScaledVector(this.direction,t)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let i=Wa.subVectors(e,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(e):(Wa.copy(this.origin).addScaledVector(this.direction,i),Wa.distanceToSquared(e))}distanceSqToSegment(e,i,t,r){AT.copy(e).add(i).multiplyScalar(.5),$v.copy(i).sub(e).normalize(),Kc.copy(this.origin).sub(AT);let o=e.distanceTo(i)*.5,s=-this.direction.dot($v),a=Kc.dot(this.direction),c=-Kc.dot($v),l=Kc.lengthSq(),d=Math.abs(1-s*s),u,h,f,p;if(d>0)if(u=s*c-a,h=s*a-c,p=o*d,u>=0)if(h>=-p)if(h<=p){let b=1/d;u*=b,h*=b,f=u*(u+s*h+2*a)+h*(s*u+h+2*c)+l}else h=o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*c)+l;else h=-o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*c)+l;else h<=-p?(u=Math.max(0,-(-s*o+a)),h=u>0?-o:Math.min(Math.max(-o,-c),o),f=-u*u+h*(h+2*c)+l):h<=p?(u=0,h=Math.min(Math.max(-o,-c),o),f=h*(h+2*c)+l):(u=Math.max(0,-(s*o+a)),h=u>0?o:Math.min(Math.max(-o,-c),o),f=-u*u+h*(h+2*c)+l);else h=s>0?-o:o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*c)+l;return t&&t.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(AT).addScaledVector($v,h),f}intersectSphere(e,i){Wa.subVectors(e.center,this.origin);let t=Wa.dot(this.direction),r=Wa.dot(Wa)-t*t,o=e.radius*e.radius;if(r>o)return null;let s=Math.sqrt(o-r),a=t-s,c=t+s;return c<0?null:a<0?this.at(c,i):this.at(a,i)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let i=e.normal.dot(this.direction);if(i===0)return e.distanceToPoint(this.origin)===0?0:null;let t=-(this.origin.dot(e.normal)+e.constant)/i;return t>=0?t:null}intersectPlane(e,i){let t=this.distanceToPlane(e);return t===null?null:this.at(t,i)}intersectsPlane(e){let i=e.distanceToPoint(this.origin);return i===0||e.normal.dot(this.direction)*i<0}intersectBox(e,i){let t,r,o,s,a,c,l=1/this.direction.x,d=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(t=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(t=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),d>=0?(o=(e.min.y-h.y)*d,s=(e.max.y-h.y)*d):(o=(e.max.y-h.y)*d,s=(e.min.y-h.y)*d),t>s||o>r||((o>t||isNaN(t))&&(t=o),(s<r||isNaN(r))&&(r=s),u>=0?(a=(e.min.z-h.z)*u,c=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,c=(e.min.z-h.z)*u),t>c||a>r)||((a>t||t!==t)&&(t=a),(c<r||r!==r)&&(r=c),r<0)?null:this.at(t>=0?t:r,i)}intersectsBox(e){return this.intersectBox(e,Wa)!==null}intersectTriangle(e,i,t,r,o){IT.subVectors(i,e),qv.subVectors(t,e),PT.crossVectors(IT,qv);let s=this.direction.dot(PT),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;Kc.subVectors(this.origin,e);let c=a*this.direction.dot(qv.crossVectors(Kc,qv));if(c<0)return null;let l=a*this.direction.dot(IT.cross(Kc));if(l<0||c+l>s)return null;let d=-a*Kc.dot(PT);return d<0?null:this.at(d/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Be=class n{constructor(e,i,t,r,o,s,a,c,l,d,u,h,f,p,b,g){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,i,t,r,o,s,a,c,l,d,u,h,f,p,b,g)}set(e,i,t,r,o,s,a,c,l,d,u,h,f,p,b,g){let m=this.elements;return m[0]=e,m[4]=i,m[8]=t,m[12]=r,m[1]=o,m[5]=s,m[9]=a,m[13]=c,m[2]=l,m[6]=d,m[10]=u,m[14]=h,m[3]=f,m[7]=p,m[11]=b,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let i=this.elements,t=e.elements;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],this}copyPosition(e){let i=this.elements,t=e.elements;return i[12]=t[12],i[13]=t[13],i[14]=t[14],this}setFromMatrix3(e){let i=e.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(e,i,t){return e.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),t.setFromMatrixColumn(this,2),this}makeBasis(e,i,t){return this.set(e.x,i.x,t.x,0,e.y,i.y,t.y,0,e.z,i.z,t.z,0,0,0,0,1),this}extractRotation(e){let i=this.elements,t=e.elements,r=1/xh.setFromMatrixColumn(e,0).length(),o=1/xh.setFromMatrixColumn(e,1).length(),s=1/xh.setFromMatrixColumn(e,2).length();return i[0]=t[0]*r,i[1]=t[1]*r,i[2]=t[2]*r,i[3]=0,i[4]=t[4]*o,i[5]=t[5]*o,i[6]=t[6]*o,i[7]=0,i[8]=t[8]*s,i[9]=t[9]*s,i[10]=t[10]*s,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(e){let i=this.elements,t=e.x,r=e.y,o=e.z,s=Math.cos(t),a=Math.sin(t),c=Math.cos(r),l=Math.sin(r),d=Math.cos(o),u=Math.sin(o);if(e.order==="XYZ"){let h=s*d,f=s*u,p=a*d,b=a*u;i[0]=c*d,i[4]=-c*u,i[8]=l,i[1]=f+p*l,i[5]=h-b*l,i[9]=-a*c,i[2]=b-h*l,i[6]=p+f*l,i[10]=s*c}else if(e.order==="YXZ"){let h=c*d,f=c*u,p=l*d,b=l*u;i[0]=h+b*a,i[4]=p*a-f,i[8]=s*l,i[1]=s*u,i[5]=s*d,i[9]=-a,i[2]=f*a-p,i[6]=b+h*a,i[10]=s*c}else if(e.order==="ZXY"){let h=c*d,f=c*u,p=l*d,b=l*u;i[0]=h-b*a,i[4]=-s*u,i[8]=p+f*a,i[1]=f+p*a,i[5]=s*d,i[9]=b-h*a,i[2]=-s*l,i[6]=a,i[10]=s*c}else if(e.order==="ZYX"){let h=s*d,f=s*u,p=a*d,b=a*u;i[0]=c*d,i[4]=p*l-f,i[8]=h*l+b,i[1]=c*u,i[5]=b*l+h,i[9]=f*l-p,i[2]=-l,i[6]=a*c,i[10]=s*c}else if(e.order==="YZX"){let h=s*c,f=s*l,p=a*c,b=a*l;i[0]=c*d,i[4]=b-h*u,i[8]=p*u+f,i[1]=u,i[5]=s*d,i[9]=-a*d,i[2]=-l*d,i[6]=f*u+p,i[10]=h-b*u}else if(e.order==="XZY"){let h=s*c,f=s*l,p=a*c,b=a*l;i[0]=c*d,i[4]=-u,i[8]=l*d,i[1]=h*u+b,i[5]=s*d,i[9]=f*u-p,i[2]=p*u-f,i[6]=a*d,i[10]=b*u+h}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Xq,e,Yq)}lookAt(e,i,t){let r=this.elements;return Ro.subVectors(e,i),Ro.lengthSq()===0&&(Ro.z=1),Ro.normalize(),Jc.crossVectors(t,Ro),Jc.lengthSq()===0&&(Math.abs(t.z)===1?Ro.x+=1e-4:Ro.z+=1e-4,Ro.normalize(),Jc.crossVectors(t,Ro)),Jc.normalize(),Xv.crossVectors(Ro,Jc),r[0]=Jc.x,r[4]=Xv.x,r[8]=Ro.x,r[1]=Jc.y,r[5]=Xv.y,r[9]=Ro.y,r[2]=Jc.z,r[6]=Xv.z,r[10]=Ro.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,i){let t=e.elements,r=i.elements,o=this.elements,s=t[0],a=t[4],c=t[8],l=t[12],d=t[1],u=t[5],h=t[9],f=t[13],p=t[2],b=t[6],g=t[10],m=t[14],v=t[3],_=t[7],y=t[11],C=t[15],R=r[0],M=r[4],A=r[8],T=r[12],x=r[1],I=r[5],V=r[9],W=r[13],ee=r[2],ne=r[6],B=r[10],G=r[14],U=r[3],se=r[7],Te=r[11],Ie=r[15];return o[0]=s*R+a*x+c*ee+l*U,o[4]=s*M+a*I+c*ne+l*se,o[8]=s*A+a*V+c*B+l*Te,o[12]=s*T+a*W+c*G+l*Ie,o[1]=d*R+u*x+h*ee+f*U,o[5]=d*M+u*I+h*ne+f*se,o[9]=d*A+u*V+h*B+f*Te,o[13]=d*T+u*W+h*G+f*Ie,o[2]=p*R+b*x+g*ee+m*U,o[6]=p*M+b*I+g*ne+m*se,o[10]=p*A+b*V+g*B+m*Te,o[14]=p*T+b*W+g*G+m*Ie,o[3]=v*R+_*x+y*ee+C*U,o[7]=v*M+_*I+y*ne+C*se,o[11]=v*A+_*V+y*B+C*Te,o[15]=v*T+_*W+y*G+C*Ie,this}multiplyScalar(e){let i=this.elements;return i[0]*=e,i[4]*=e,i[8]*=e,i[12]*=e,i[1]*=e,i[5]*=e,i[9]*=e,i[13]*=e,i[2]*=e,i[6]*=e,i[10]*=e,i[14]*=e,i[3]*=e,i[7]*=e,i[11]*=e,i[15]*=e,this}determinant(){let e=this.elements,i=e[0],t=e[4],r=e[8],o=e[12],s=e[1],a=e[5],c=e[9],l=e[13],d=e[2],u=e[6],h=e[10],f=e[14],p=e[3],b=e[7],g=e[11],m=e[15];return p*(+o*c*u-r*l*u-o*a*h+t*l*h+r*a*f-t*c*f)+b*(+i*c*f-i*l*h+o*s*h-r*s*f+r*l*d-o*c*d)+g*(+i*l*u-i*a*f-o*s*u+t*s*f+o*a*d-t*l*d)+m*(-r*a*d-i*c*u+i*a*h+r*s*u-t*s*h+t*c*d)}transpose(){let e=this.elements,i;return i=e[1],e[1]=e[4],e[4]=i,i=e[2],e[2]=e[8],e[8]=i,i=e[6],e[6]=e[9],e[9]=i,i=e[3],e[3]=e[12],e[12]=i,i=e[7],e[7]=e[13],e[13]=i,i=e[11],e[11]=e[14],e[14]=i,this}setPosition(e,i,t){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=i,r[14]=t),this}invert(){let e=this.elements,i=e[0],t=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],u=e[9],h=e[10],f=e[11],p=e[12],b=e[13],g=e[14],m=e[15],v=u*g*l-b*h*l+b*c*f-a*g*f-u*c*m+a*h*m,_=p*h*l-d*g*l-p*c*f+s*g*f+d*c*m-s*h*m,y=d*b*l-p*u*l+p*a*f-s*b*f-d*a*m+s*u*m,C=p*u*c-d*b*c-p*a*h+s*b*h+d*a*g-s*u*g,R=i*v+t*_+r*y+o*C;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let M=1/R;return e[0]=v*M,e[1]=(b*h*o-u*g*o-b*r*f+t*g*f+u*r*m-t*h*m)*M,e[2]=(a*g*o-b*c*o+b*r*l-t*g*l-a*r*m+t*c*m)*M,e[3]=(u*c*o-a*h*o-u*r*l+t*h*l+a*r*f-t*c*f)*M,e[4]=_*M,e[5]=(d*g*o-p*h*o+p*r*f-i*g*f-d*r*m+i*h*m)*M,e[6]=(p*c*o-s*g*o-p*r*l+i*g*l+s*r*m-i*c*m)*M,e[7]=(s*h*o-d*c*o+d*r*l-i*h*l-s*r*f+i*c*f)*M,e[8]=y*M,e[9]=(p*u*o-d*b*o-p*t*f+i*b*f+d*t*m-i*u*m)*M,e[10]=(s*b*o-p*a*o+p*t*l-i*b*l-s*t*m+i*a*m)*M,e[11]=(d*a*o-s*u*o-d*t*l+i*u*l+s*t*f-i*a*f)*M,e[12]=C*M,e[13]=(d*b*r-p*u*r+p*t*h-i*b*h-d*t*g+i*u*g)*M,e[14]=(p*a*r-s*b*r-p*t*c+i*b*c+s*t*g-i*a*g)*M,e[15]=(s*u*r-d*a*r+d*t*c-i*u*c-s*t*h+i*a*h)*M,this}scale(e){let i=this.elements,t=e.x,r=e.y,o=e.z;return i[0]*=t,i[4]*=r,i[8]*=o,i[1]*=t,i[5]*=r,i[9]*=o,i[2]*=t,i[6]*=r,i[10]*=o,i[3]*=t,i[7]*=r,i[11]*=o,this}getMaxScaleOnAxis(){let e=this.elements,i=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],t=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(i,t,r))}makeTranslation(e,i,t){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,i,0,0,1,t,0,0,0,1),this}makeRotationX(e){let i=Math.cos(e),t=Math.sin(e);return this.set(1,0,0,0,0,i,-t,0,0,t,i,0,0,0,0,1),this}makeRotationY(e){let i=Math.cos(e),t=Math.sin(e);return this.set(i,0,t,0,0,1,0,0,-t,0,i,0,0,0,0,1),this}makeRotationZ(e){let i=Math.cos(e),t=Math.sin(e);return this.set(i,-t,0,0,t,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,i){let t=Math.cos(i),r=Math.sin(i),o=1-t,s=e.x,a=e.y,c=e.z,l=o*s,d=o*a;return this.set(l*s+t,l*a-r*c,l*c+r*a,0,l*a+r*c,d*a+t,d*c-r*s,0,l*c-r*a,d*c+r*s,o*c*c+t,0,0,0,0,1),this}makeScale(e,i,t){return this.set(e,0,0,0,0,i,0,0,0,0,t,0,0,0,0,1),this}makeShear(e,i,t,r,o,s){return this.set(1,t,o,0,e,1,s,0,i,r,1,0,0,0,0,1),this}compose(e,i,t){let r=this.elements,o=i._x,s=i._y,a=i._z,c=i._w,l=o+o,d=s+s,u=a+a,h=o*l,f=o*d,p=o*u,b=s*d,g=s*u,m=a*u,v=c*l,_=c*d,y=c*u,C=t.x,R=t.y,M=t.z;return r[0]=(1-(b+m))*C,r[1]=(f+y)*C,r[2]=(p-_)*C,r[3]=0,r[4]=(f-y)*R,r[5]=(1-(h+m))*R,r[6]=(g+v)*R,r[7]=0,r[8]=(p+_)*M,r[9]=(g-v)*M,r[10]=(1-(h+b))*M,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,i,t){let r=this.elements,o=xh.set(r[0],r[1],r[2]).length(),s=xh.set(r[4],r[5],r[6]).length(),a=xh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],ds.copy(this);let l=1/o,d=1/s,u=1/a;return ds.elements[0]*=l,ds.elements[1]*=l,ds.elements[2]*=l,ds.elements[4]*=d,ds.elements[5]*=d,ds.elements[6]*=d,ds.elements[8]*=u,ds.elements[9]*=u,ds.elements[10]*=u,i.setFromRotationMatrix(ds),t.x=o,t.y=s,t.z=a,this}makePerspective(e,i,t,r,o,s,a=ea){let c=this.elements,l=2*o/(i-e),d=2*o/(t-r),u=(i+e)/(i-e),h=(t+r)/(t-r),f,p;if(a===ea)f=-(s+o)/(s-o),p=-2*s*o/(s-o);else if(a===Ep)f=-s/(s-o),p=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=l,c[4]=0,c[8]=u,c[12]=0,c[1]=0,c[5]=d,c[9]=h,c[13]=0,c[2]=0,c[6]=0,c[10]=f,c[14]=p,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,i,t,r,o,s,a=ea){let c=this.elements,l=1/(i-e),d=1/(t-r),u=1/(s-o),h=(i+e)*l,f=(t+r)*d,p,b;if(a===ea)p=(s+o)*u,b=-2*u;else if(a===Ep)p=o*u,b=-1*u;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=2*l,c[4]=0,c[8]=0,c[12]=-h,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-f,c[2]=0,c[6]=0,c[10]=b,c[14]=-p,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){let i=this.elements,t=e.elements;for(let r=0;r<16;r++)if(i[r]!==t[r])return!1;return!0}fromArray(e,i=0){for(let t=0;t<16;t++)this.elements[t]=e[t+i];return this}toArray(e=[],i=0){let t=this.elements;return e[i]=t[0],e[i+1]=t[1],e[i+2]=t[2],e[i+3]=t[3],e[i+4]=t[4],e[i+5]=t[5],e[i+6]=t[6],e[i+7]=t[7],e[i+8]=t[8],e[i+9]=t[9],e[i+10]=t[10],e[i+11]=t[11],e[i+12]=t[12],e[i+13]=t[13],e[i+14]=t[14],e[i+15]=t[15],e}},xh=new S,ds=new Be,Xq=new S(0,0,0),Yq=new S(1,1,1),Jc=new S,Xv=new S,Ro=new S,M2=new Be,S2=new ii,so=(()=>{class n{constructor(i=0,t=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=i,this._y=t,this._z=r,this._order=o}get x(){return this._x}set x(i){this._x=i,this._onChangeCallback()}get y(){return this._y}set y(i){this._y=i,this._onChangeCallback()}get z(){return this._z}set z(i){this._z=i,this._onChangeCallback()}get order(){return this._order}set order(i){this._order=i,this._onChangeCallback()}set(i,t,r,o=this._order){return this._x=i,this._y=t,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(i){return this._x=i._x,this._y=i._y,this._z=i._z,this._order=i._order,this._onChangeCallback(),this}setFromRotationMatrix(i,t=this._order,r=!0){let o=i.elements,s=o[0],a=o[4],c=o[8],l=o[1],d=o[5],u=o[9],h=o[2],f=o[6],p=o[10];switch(t){case"XYZ":this._y=Math.asin(Cn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Cn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(c,p),this._z=Math.atan2(l,d)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Cn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Cn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin(Cn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,d),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(c,p));break;case"XZY":this._z=Math.asin(-Cn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,d),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(i,t,r){return M2.makeRotationFromQuaternion(i),this.setFromRotationMatrix(M2,t,r)}setFromVector3(i,t=this._order){return this.set(i.x,i.y,i.z,t)}reorder(i){return S2.setFromEuler(this),this.setFromQuaternion(S2,i)}equals(i){return i._x===this._x&&i._y===this._y&&i._z===this._z&&i._order===this._order}fromArray(i){return this._x=i[0],this._y=i[1],this._z=i[2],i[3]!==void 0&&(this._order=i[3]),this._onChangeCallback(),this}toArray(i=[],t=0){return i[t]=this._x,i[t+1]=this._y,i[t+2]=this._z,i[t+3]=this._order,i}_onChange(i){return this._onChangeCallback=i,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),$h=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},Zq=0,R2=new S,wh=new ii,$a=new Be,Yv=new S,rp=new S,Qq=new S,Kq=new ii,T2=new S(1,0,0),C2=new S(0,1,0),E2=new S(0,0,1),D2={type:"added"},Jq={type:"removed"},Mh={type:"childadded",child:null},kT={type:"childremoved",child:null},Tt=(()=>{class n extends jn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Zq++}),this.uuid=Eo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let i=new S,t=new so,r=new ii,o=new S(1,1,1);function s(){r.setFromEuler(t,!1)}function a(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:i},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Be},normalMatrix:{value:new Jt}}),this.matrix=new Be,this.matrixWorld=new Be,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new $h,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(i){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(i),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(i){return this.quaternion.premultiply(i),this}setRotationFromAxisAngle(i,t){this.quaternion.setFromAxisAngle(i,t)}setRotationFromEuler(i){this.quaternion.setFromEuler(i,!0)}setRotationFromMatrix(i){this.quaternion.setFromRotationMatrix(i)}setRotationFromQuaternion(i){this.quaternion.copy(i)}rotateOnAxis(i,t){return wh.setFromAxisAngle(i,t),this.quaternion.multiply(wh),this}rotateOnWorldAxis(i,t){return wh.setFromAxisAngle(i,t),this.quaternion.premultiply(wh),this}rotateX(i){return this.rotateOnAxis(T2,i)}rotateY(i){return this.rotateOnAxis(C2,i)}rotateZ(i){return this.rotateOnAxis(E2,i)}translateOnAxis(i,t){return R2.copy(i).applyQuaternion(this.quaternion),this.position.add(R2.multiplyScalar(t)),this}translateX(i){return this.translateOnAxis(T2,i)}translateY(i){return this.translateOnAxis(C2,i)}translateZ(i){return this.translateOnAxis(E2,i)}localToWorld(i){return this.updateWorldMatrix(!0,!1),i.applyMatrix4(this.matrixWorld)}worldToLocal(i){return this.updateWorldMatrix(!0,!1),i.applyMatrix4($a.copy(this.matrixWorld).invert())}lookAt(i,t,r){i.isVector3?Yv.copy(i):Yv.set(i,t,r);let o=this.parent;this.updateWorldMatrix(!0,!1),rp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?$a.lookAt(rp,Yv,this.up):$a.lookAt(Yv,rp,this.up),this.quaternion.setFromRotationMatrix($a),o&&($a.extractRotation(o.matrixWorld),wh.setFromRotationMatrix($a),this.quaternion.premultiply(wh.invert()))}add(i){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return i===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",i),this):(i&&i.isObject3D?(i.removeFromParent(),i.parent=this,this.children.push(i),i.dispatchEvent(D2),Mh.child=i,this.dispatchEvent(Mh),Mh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",i),this)}remove(i){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let t=this.children.indexOf(i);return t!==-1&&(i.parent=null,this.children.splice(t,1),i.dispatchEvent(Jq),kT.child=i,this.dispatchEvent(kT),kT.child=null),this}removeFromParent(){let i=this.parent;return i!==null&&i.remove(this),this}clear(){return this.remove(...this.children)}attach(i){return this.updateWorldMatrix(!0,!1),$a.copy(this.matrixWorld).invert(),i.parent!==null&&(i.parent.updateWorldMatrix(!0,!1),$a.multiply(i.parent.matrixWorld)),i.applyMatrix4($a),i.removeFromParent(),i.parent=this,this.children.push(i),i.updateWorldMatrix(!1,!0),i.dispatchEvent(D2),Mh.child=i,this.dispatchEvent(Mh),Mh.child=null,this}getObjectById(i){return this.getObjectByProperty("id",i)}getObjectByName(i){return this.getObjectByProperty("name",i)}getObjectByProperty(i,t){if(this[i]===t)return this;for(let r=0,o=this.children.length;r<o;r++){let a=this.children[r].getObjectByProperty(i,t);if(a!==void 0)return a}}getObjectsByProperty(i,t,r=[]){this[i]===t&&r.push(this);let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(i,t,r);return r}getWorldPosition(i){return this.updateWorldMatrix(!0,!1),i.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(i){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rp,i,Qq),i}getWorldScale(i){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rp,Kq,i),i}getWorldDirection(i){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return i.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(i){i(this);let t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverse(i)}traverseVisible(i){if(this.visible===!1)return;i(this);let t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverseVisible(i)}traverseAncestors(i){let t=this.parent;t!==null&&(i(t),t.traverseAncestors(i))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(i){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||i)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,i=!0);let t=this.children;for(let r=0,o=t.length;r<o;r++){let s=t[r];(s.matrixWorldAutoUpdate===!0||i===!0)&&s.updateMatrixWorld(i)}}updateWorldMatrix(i,t){let r=this.parent;if(i===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let o=this.children;for(let s=0,a=o.length;s<a;s++){let c=o[s];c.matrixWorldAutoUpdate===!0&&c.updateWorldMatrix(!1,!0)}}}toJSON(i){let t=i===void 0||typeof i=="string",r={};t&&(i={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.visibility=this._visibility,o.active=this._active,o.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),o.maxGeometryCount=this._maxGeometryCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.geometryCount=this._geometryCount,o.matricesTexture=this._matricesTexture.toJSON(i),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(i)),this.boundingSphere!==null&&(o.boundingSphere={center:o.boundingSphere.center.toArray(),radius:o.boundingSphere.radius}),this.boundingBox!==null&&(o.boundingBox={min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()}));function s(c,l){return c[l.uuid]===void 0&&(c[l.uuid]=l.toJSON(i)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(i).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(i).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(i.geometries,this.geometry);let c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){let l=c.shapes;if(Array.isArray(l))for(let d=0,u=l.length;d<u;d++){let h=l[d];s(i.shapes,h)}else s(i.shapes,l)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(i.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let c=[];for(let l=0,d=this.material.length;l<d;l++)c.push(s(i.materials,this.material[l]));o.material=c}else o.material=s(i.materials,this.material);if(this.children.length>0){o.children=[];for(let c=0;c<this.children.length;c++)o.children.push(this.children[c].toJSON(i).object)}if(this.animations.length>0){o.animations=[];for(let c=0;c<this.animations.length;c++){let l=this.animations[c];o.animations.push(s(i.animations,l))}}if(t){let c=a(i.geometries),l=a(i.materials),d=a(i.textures),u=a(i.images),h=a(i.shapes),f=a(i.skeletons),p=a(i.animations),b=a(i.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),d.length>0&&(r.textures=d),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),b.length>0&&(r.nodes=b)}return r.object=o,r;function a(c){let l=[];for(let d in c){let u=c[d];delete u.metadata,l.push(u)}return l}}clone(i){return new this.constructor().copy(this,i)}copy(i,t=!0){if(this.name=i.name,this.up.copy(i.up),this.position.copy(i.position),this.rotation.order=i.rotation.order,this.quaternion.copy(i.quaternion),this.scale.copy(i.scale),this.matrix.copy(i.matrix),this.matrixWorld.copy(i.matrixWorld),this.matrixAutoUpdate=i.matrixAutoUpdate,this.matrixWorldAutoUpdate=i.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=i.matrixWorldNeedsUpdate,this.layers.mask=i.layers.mask,this.visible=i.visible,this.castShadow=i.castShadow,this.receiveShadow=i.receiveShadow,this.frustumCulled=i.frustumCulled,this.renderOrder=i.renderOrder,this.animations=i.animations.slice(),this.userData=JSON.parse(JSON.stringify(i.userData)),t===!0)for(let r=0;r<i.children.length;r++){let o=i.children[r];this.add(o.clone())}return this}}return n.DEFAULT_UP=new S(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),us=new S,qa=new S,FT=new S,Xa=new S,Sh=new S,Rh=new S,A2=new S,jT=new S,OT=new S,NT=new S,Ja=class n{constructor(e=new S,i=new S,t=new S){this.a=e,this.b=i,this.c=t}static getNormal(e,i,t,r){r.subVectors(t,i),us.subVectors(e,i),r.cross(us);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,i,t,r,o){us.subVectors(r,i),qa.subVectors(t,i),FT.subVectors(e,i);let s=us.dot(us),a=us.dot(qa),c=us.dot(FT),l=qa.dot(qa),d=qa.dot(FT),u=s*l-a*a;if(u===0)return o.set(0,0,0),null;let h=1/u,f=(l*c-a*d)*h,p=(s*d-a*c)*h;return o.set(1-f-p,p,f)}static containsPoint(e,i,t,r){return this.getBarycoord(e,i,t,r,Xa)===null?!1:Xa.x>=0&&Xa.y>=0&&Xa.x+Xa.y<=1}static getInterpolation(e,i,t,r,o,s,a,c){return this.getBarycoord(e,i,t,r,Xa)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(o,Xa.x),c.addScaledVector(s,Xa.y),c.addScaledVector(a,Xa.z),c)}static isFrontFacing(e,i,t,r){return us.subVectors(t,i),qa.subVectors(e,i),us.cross(qa).dot(r)<0}set(e,i,t){return this.a.copy(e),this.b.copy(i),this.c.copy(t),this}setFromPointsAndIndices(e,i,t,r){return this.a.copy(e[i]),this.b.copy(e[t]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,i,t,r){return this.a.fromBufferAttribute(e,i),this.b.fromBufferAttribute(e,t),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return us.subVectors(this.c,this.b),qa.subVectors(this.a,this.b),us.cross(qa).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,i){return n.getBarycoord(e,this.a,this.b,this.c,i)}getInterpolation(e,i,t,r,o){return n.getInterpolation(e,this.a,this.b,this.c,i,t,r,o)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,i){let t=this.a,r=this.b,o=this.c,s,a;Sh.subVectors(r,t),Rh.subVectors(o,t),jT.subVectors(e,t);let c=Sh.dot(jT),l=Rh.dot(jT);if(c<=0&&l<=0)return i.copy(t);OT.subVectors(e,r);let d=Sh.dot(OT),u=Rh.dot(OT);if(d>=0&&u<=d)return i.copy(r);let h=c*u-d*l;if(h<=0&&c>=0&&d<=0)return s=c/(c-d),i.copy(t).addScaledVector(Sh,s);NT.subVectors(e,o);let f=Sh.dot(NT),p=Rh.dot(NT);if(p>=0&&f<=p)return i.copy(o);let b=f*l-c*p;if(b<=0&&l>=0&&p<=0)return a=l/(l-p),i.copy(t).addScaledVector(Rh,a);let g=d*p-f*u;if(g<=0&&u-d>=0&&f-p>=0)return A2.subVectors(o,r),a=(u-d)/(u-d+(f-p)),i.copy(r).addScaledVector(A2,a);let m=1/(g+b+h);return s=b*m,a=h*m,i.copy(t).addScaledVector(Sh,s).addScaledVector(Rh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},KL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},el={h:0,s:0,l:0},Zv={h:0,s:0,l:0};function LT(n,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?n+(e-n)*6*i:i<1/2?e:i<2/3?n+(e-n)*6*(2/3-i):n}var pe=class{constructor(e,i,t){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,i,t)}set(e,i,t){if(i===void 0&&t===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,i,t);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,i=Fn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ri.toWorkingColorSpace(this,i),this}setRGB(e,i,t,r=Ri.workingColorSpace){return this.r=e,this.g=i,this.b=t,Ri.toWorkingColorSpace(this,r),this}setHSL(e,i,t,r=Ri.workingColorSpace){if(e=oD(e,1),i=Cn(i,0,1),t=Cn(t,0,1),i===0)this.r=this.g=this.b=t;else{let o=t<=.5?t*(1+i):t+i-t*i,s=2*t-o;this.r=LT(s,o,e+1/3),this.g=LT(s,o,e),this.b=LT(s,o,e-1/3)}return Ri.toWorkingColorSpace(this,r),this}setStyle(e,i=Fn){function t(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return t(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,i);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return t(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,i);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return t(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,i);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,i);if(s===6)return this.setHex(parseInt(o,16),i);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,i);return this}setColorName(e,i=Fn){let t=KL[e.toLowerCase()];return t!==void 0?this.setHex(t,i):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=zh(e.r),this.g=zh(e.g),this.b=zh(e.b),this}copyLinearToSRGB(e){return this.r=RT(e.r),this.g=RT(e.g),this.b=RT(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Fn){return Ri.fromWorkingColorSpace(Rr.copy(this),e),Math.round(Cn(Rr.r*255,0,255))*65536+Math.round(Cn(Rr.g*255,0,255))*256+Math.round(Cn(Rr.b*255,0,255))}getHexString(e=Fn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,i=Ri.workingColorSpace){Ri.fromWorkingColorSpace(Rr.copy(this),i);let t=Rr.r,r=Rr.g,o=Rr.b,s=Math.max(t,r,o),a=Math.min(t,r,o),c,l,d=(a+s)/2;if(a===s)c=0,l=0;else{let u=s-a;switch(l=d<=.5?u/(s+a):u/(2-s-a),s){case t:c=(r-o)/u+(r<o?6:0);break;case r:c=(o-t)/u+2;break;case o:c=(t-r)/u+4;break}c/=6}return e.h=c,e.s=l,e.l=d,e}getRGB(e,i=Ri.workingColorSpace){return Ri.fromWorkingColorSpace(Rr.copy(this),i),e.r=Rr.r,e.g=Rr.g,e.b=Rr.b,e}getStyle(e=Fn){Ri.fromWorkingColorSpace(Rr.copy(this),e);let i=Rr.r,t=Rr.g,r=Rr.b;return e!==Fn?`color(${e} ${i.toFixed(3)} ${t.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(i*255)},${Math.round(t*255)},${Math.round(r*255)})`}offsetHSL(e,i,t){return this.getHSL(el),this.setHSL(el.h+e,el.s+i,el.l+t)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,i){return this.r=e.r+i.r,this.g=e.g+i.g,this.b=e.b+i.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,i){return this.r+=(e.r-this.r)*i,this.g+=(e.g-this.g)*i,this.b+=(e.b-this.b)*i,this}lerpColors(e,i,t){return this.r=e.r+(i.r-e.r)*t,this.g=e.g+(i.g-e.g)*t,this.b=e.b+(i.b-e.b)*t,this}lerpHSL(e,i){this.getHSL(el),e.getHSL(Zv);let t=gp(el.h,Zv.h,i),r=gp(el.s,Zv.s,i),o=gp(el.l,Zv.l,i);return this.setHSL(t,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let i=this.r,t=this.g,r=this.b,o=e.elements;return this.r=o[0]*i+o[3]*t+o[6]*r,this.g=o[1]*i+o[4]*t+o[7]*r,this.b=o[2]*i+o[5]*t+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,i=0){return this.r=e[i],this.g=e[i+1],this.b=e[i+2],this}toArray(e=[],i=0){return e[i]=this.r,e[i+1]=this.g,e[i+2]=this.b,e}fromBufferAttribute(e,i){return this.r=e.getX(i),this.g=e.getY(i),this.b=e.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Rr=new pe;pe.NAMES=KL;var eX=0,dn=class extends jn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:eX++}),this.uuid=Eo(),this.name="",this.type="Material",this.blending=fs,this.side=ms,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Ad,this.blendDst=Id,this.blendEquation=vr,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new pe(0,0,0),this.blendAlpha=0,this.depthFunc=yp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=BC,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=yd,this.stencilZFail=yd,this.stencilZPass=yd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let i in e){let t=e[i];if(t===void 0){console.warn(`THREE.Material: parameter '${i}' has value of undefined.`);continue}let r=this[i];if(r===void 0){console.warn(`THREE.Material: '${i}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(t):r&&r.isVector3&&t&&t.isVector3?r.copy(t):this[i]=t}}toJSON(e){let i=e===void 0||typeof e=="string";i&&(e={textures:{},images:{}});let t={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.color&&this.color.isColor&&(t.color=this.color.getHex()),this.roughness!==void 0&&(t.roughness=this.roughness),this.metalness!==void 0&&(t.metalness=this.metalness),this.sheen!==void 0&&(t.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(t.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(t.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(t.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(t.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(t.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(t.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(t.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(t.shininess=this.shininess),this.clearcoat!==void 0&&(t.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(t.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(t.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(t.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(t.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,t.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(t.dispersion=this.dispersion),this.iridescence!==void 0&&(t.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(t.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(t.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(t.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(t.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(t.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(t.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(t.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(t.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(t.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(t.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(t.lightMap=this.lightMap.toJSON(e).uuid,t.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(t.aoMap=this.aoMap.toJSON(e).uuid,t.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(t.bumpMap=this.bumpMap.toJSON(e).uuid,t.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(t.normalMap=this.normalMap.toJSON(e).uuid,t.normalMapType=this.normalMapType,t.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(t.displacementMap=this.displacementMap.toJSON(e).uuid,t.displacementScale=this.displacementScale,t.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(t.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(t.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(t.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(t.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(t.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(t.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(t.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(t.combine=this.combine)),this.envMapRotation!==void 0&&(t.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(t.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(t.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(t.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(t.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(t.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(t.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(t.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(t.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(t.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(t.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(t.size=this.size),this.shadowSide!==null&&(t.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(t.sizeAttenuation=this.sizeAttenuation),this.blending!==fs&&(t.blending=this.blending),this.side!==ms&&(t.side=this.side),this.vertexColors===!0&&(t.vertexColors=!0),this.opacity<1&&(t.opacity=this.opacity),this.transparent===!0&&(t.transparent=!0),this.blendSrc!==Ad&&(t.blendSrc=this.blendSrc),this.blendDst!==Id&&(t.blendDst=this.blendDst),this.blendEquation!==vr&&(t.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(t.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(t.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(t.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(t.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(t.blendAlpha=this.blendAlpha),this.depthFunc!==yp&&(t.depthFunc=this.depthFunc),this.depthTest===!1&&(t.depthTest=this.depthTest),this.depthWrite===!1&&(t.depthWrite=this.depthWrite),this.colorWrite===!1&&(t.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(t.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==BC&&(t.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(t.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(t.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==yd&&(t.stencilFail=this.stencilFail),this.stencilZFail!==yd&&(t.stencilZFail=this.stencilZFail),this.stencilZPass!==yd&&(t.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(t.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(t.rotation=this.rotation),this.polygonOffset===!0&&(t.polygonOffset=!0),this.polygonOffsetFactor!==0&&(t.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(t.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(t.linewidth=this.linewidth),this.dashSize!==void 0&&(t.dashSize=this.dashSize),this.gapSize!==void 0&&(t.gapSize=this.gapSize),this.scale!==void 0&&(t.scale=this.scale),this.dithering===!0&&(t.dithering=!0),this.alphaTest>0&&(t.alphaTest=this.alphaTest),this.alphaHash===!0&&(t.alphaHash=!0),this.alphaToCoverage===!0&&(t.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(t.premultipliedAlpha=!0),this.forceSinglePass===!0&&(t.forceSinglePass=!0),this.wireframe===!0&&(t.wireframe=!0),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(t.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(t.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(t.flatShading=!0),this.visible===!1&&(t.visible=!1),this.toneMapped===!1&&(t.toneMapped=!1),this.fog===!1&&(t.fog=!1),Object.keys(this.userData).length>0&&(t.userData=this.userData);function r(o){let s=[];for(let a in o){let c=o[a];delete c.metadata,s.push(c)}return s}if(i){let o=r(e.textures),s=r(e.images);o.length>0&&(t.textures=o),s.length>0&&(t.images=s)}return t}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let i=e.clippingPlanes,t=null;if(i!==null){let r=i.length;t=new Array(r);for(let o=0;o!==r;++o)t[o]=i[o].clone()}return this.clippingPlanes=t,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},tn=class extends dn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new pe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new so,this.combine=eg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},Qa=tX();function tX(){let n=new ArrayBuffer(4),e=new Float32Array(n),i=new Uint32Array(n),t=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){let l=c-127;l<-27?(t[c]=0,t[c|256]=32768,r[c]=24,r[c|256]=24):l<-14?(t[c]=1024>>-l-14,t[c|256]=1024>>-l-14|32768,r[c]=-l-1,r[c|256]=-l-1):l<=15?(t[c]=l+15<<10,t[c|256]=l+15<<10|32768,r[c]=13,r[c|256]=13):l<128?(t[c]=31744,t[c|256]=64512,r[c]=24,r[c|256]=24):(t[c]=31744,t[c|256]=64512,r[c]=13,r[c|256]=13)}let o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let c=1;c<1024;++c){let l=c<<13,d=0;for(;!(l&8388608);)l<<=1,d-=8388608;l&=-8388609,d+=947912704,o[c]=l|d}for(let c=1024;c<2048;++c)o[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)s[c]=c<<23;s[31]=1199570944,s[32]=2147483648;for(let c=33;c<63;++c)s[c]=2147483648+(c-32<<23);s[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(a[c]=1024);return{floatView:e,uint32View:i,baseTable:t,shiftTable:r,mantissaTable:o,exponentTable:s,offsetTable:a}}function no(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Cn(n,-65504,65504),Qa.floatView[0]=n;let e=Qa.uint32View[0],i=e>>23&511;return Qa.baseTable[i]+((e&8388607)>>Qa.shiftTable[i])}function mp(n){let e=n>>10;return Qa.uint32View[0]=Qa.mantissaTable[Qa.offsetTable[e]+(n&1023)]+Qa.exponentTable[e],Qa.floatView[0]}var iX={toHalfFloat:no,fromHalfFloat:mp},qn=new S,Qv=new z,hi=class{constructor(e,i,t=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=i,this.count=e!==void 0?e.length/i:0,this.normalized=t,this.usage=Cp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=yr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return sD("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,i){this.updateRanges.push({start:e,count:i})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,i,t){e*=this.itemSize,t*=i.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=i.array[t+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let i=0,t=this.count;i<t;i++)Qv.fromBufferAttribute(this,i),Qv.applyMatrix3(e),this.setXY(i,Qv.x,Qv.y);else if(this.itemSize===3)for(let i=0,t=this.count;i<t;i++)qn.fromBufferAttribute(this,i),qn.applyMatrix3(e),this.setXYZ(i,qn.x,qn.y,qn.z);return this}applyMatrix4(e){for(let i=0,t=this.count;i<t;i++)qn.fromBufferAttribute(this,i),qn.applyMatrix4(e),this.setXYZ(i,qn.x,qn.y,qn.z);return this}applyNormalMatrix(e){for(let i=0,t=this.count;i<t;i++)qn.fromBufferAttribute(this,i),qn.applyNormalMatrix(e),this.setXYZ(i,qn.x,qn.y,qn.z);return this}transformDirection(e){for(let i=0,t=this.count;i<t;i++)qn.fromBufferAttribute(this,i),qn.transformDirection(e),this.setXYZ(i,qn.x,qn.y,qn.z);return this}set(e,i=0){return this.array.set(e,i),this}getComponent(e,i){let t=this.array[e*this.itemSize+i];return this.normalized&&(t=Gr(t,this.array)),t}setComponent(e,i,t){return this.normalized&&(t=ei(t,this.array)),this.array[e*this.itemSize+i]=t,this}getX(e){let i=this.array[e*this.itemSize];return this.normalized&&(i=Gr(i,this.array)),i}setX(e,i){return this.normalized&&(i=ei(i,this.array)),this.array[e*this.itemSize]=i,this}getY(e){let i=this.array[e*this.itemSize+1];return this.normalized&&(i=Gr(i,this.array)),i}setY(e,i){return this.normalized&&(i=ei(i,this.array)),this.array[e*this.itemSize+1]=i,this}getZ(e){let i=this.array[e*this.itemSize+2];return this.normalized&&(i=Gr(i,this.array)),i}setZ(e,i){return this.normalized&&(i=ei(i,this.array)),this.array[e*this.itemSize+2]=i,this}getW(e){let i=this.array[e*this.itemSize+3];return this.normalized&&(i=Gr(i,this.array)),i}setW(e,i){return this.normalized&&(i=ei(i,this.array)),this.array[e*this.itemSize+3]=i,this}setXY(e,i,t){return e*=this.itemSize,this.normalized&&(i=ei(i,this.array),t=ei(t,this.array)),this.array[e+0]=i,this.array[e+1]=t,this}setXYZ(e,i,t,r){return e*=this.itemSize,this.normalized&&(i=ei(i,this.array),t=ei(t,this.array),r=ei(r,this.array)),this.array[e+0]=i,this.array[e+1]=t,this.array[e+2]=r,this}setXYZW(e,i,t,r,o){return e*=this.itemSize,this.normalized&&(i=ei(i,this.array),t=ei(t,this.array),r=ei(r,this.array),o=ei(o,this.array)),this.array[e+0]=i,this.array[e+1]=t,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Cp&&(e.usage=this.usage),e}},HC=class extends hi{constructor(e,i,t){super(new Int8Array(e),i,t)}},GC=class extends hi{constructor(e,i,t){super(new Uint8Array(e),i,t)}},WC=class extends hi{constructor(e,i,t){super(new Uint8ClampedArray(e),i,t)}},$C=class extends hi{constructor(e,i,t){super(new Int16Array(e),i,t)}},Ip=class extends hi{constructor(e,i,t){super(new Uint16Array(e),i,t)}},qC=class extends hi{constructor(e,i,t){super(new Int32Array(e),i,t)}},Pp=class extends hi{constructor(e,i,t){super(new Uint32Array(e),i,t)}},XC=class extends hi{constructor(e,i,t){super(new Uint16Array(e),i,t),this.isFloat16BufferAttribute=!0}getX(e){let i=mp(this.array[e*this.itemSize]);return this.normalized&&(i=Gr(i,this.array)),i}setX(e,i){return this.normalized&&(i=ei(i,this.array)),this.array[e*this.itemSize]=no(i),this}getY(e){let i=mp(this.array[e*this.itemSize+1]);return this.normalized&&(i=Gr(i,this.array)),i}setY(e,i){return this.normalized&&(i=ei(i,this.array)),this.array[e*this.itemSize+1]=no(i),this}getZ(e){let i=mp(this.array[e*this.itemSize+2]);return this.normalized&&(i=Gr(i,this.array)),i}setZ(e,i){return this.normalized&&(i=ei(i,this.array)),this.array[e*this.itemSize+2]=no(i),this}getW(e){let i=mp(this.array[e*this.itemSize+3]);return this.normalized&&(i=Gr(i,this.array)),i}setW(e,i){return this.normalized&&(i=ei(i,this.array)),this.array[e*this.itemSize+3]=no(i),this}setXY(e,i,t){return e*=this.itemSize,this.normalized&&(i=ei(i,this.array),t=ei(t,this.array)),this.array[e+0]=no(i),this.array[e+1]=no(t),this}setXYZ(e,i,t,r){return e*=this.itemSize,this.normalized&&(i=ei(i,this.array),t=ei(t,this.array),r=ei(r,this.array)),this.array[e+0]=no(i),this.array[e+1]=no(t),this.array[e+2]=no(r),this}setXYZW(e,i,t,r,o){return e*=this.itemSize,this.normalized&&(i=ei(i,this.array),t=ei(t,this.array),r=ei(r,this.array),o=ei(o,this.array)),this.array[e+0]=no(i),this.array[e+1]=no(t),this.array[e+2]=no(r),this.array[e+3]=no(o),this}},qe=class extends hi{constructor(e,i,t){super(new Float32Array(e),i,t)}},nX=0,$o=new Be,BT=new Tt,Th=new S,To=new _n,op=new _n,cr=new S,bt=class n extends jn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:nX++}),this.uuid=Eo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(ZL(e)?Pp:Ip)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,i){return this.attributes[e]=i,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,i,t=0){this.groups.push({start:e,count:i,materialIndex:t})}clearGroups(){this.groups=[]}setDrawRange(e,i){this.drawRange.start=e,this.drawRange.count=i}applyMatrix4(e){let i=this.attributes.position;i!==void 0&&(i.applyMatrix4(e),i.needsUpdate=!0);let t=this.attributes.normal;if(t!==void 0){let o=new Jt().getNormalMatrix(e);t.applyNormalMatrix(o),t.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return $o.makeRotationFromQuaternion(e),this.applyMatrix4($o),this}rotateX(e){return $o.makeRotationX(e),this.applyMatrix4($o),this}rotateY(e){return $o.makeRotationY(e),this.applyMatrix4($o),this}rotateZ(e){return $o.makeRotationZ(e),this.applyMatrix4($o),this}translate(e,i,t){return $o.makeTranslation(e,i,t),this.applyMatrix4($o),this}scale(e,i,t){return $o.makeScale(e,i,t),this.applyMatrix4($o),this}lookAt(e){return BT.lookAt(e),BT.updateMatrix(),this.applyMatrix4(BT.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Th).negate(),this.translate(Th.x,Th.y,Th.z),this}setFromPoints(e){let i=[];for(let t=0,r=e.length;t<r;t++){let o=e[t];i.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new qe(i,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new _n);let e=this.attributes.position,i=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new S(-1/0,-1/0,-1/0),new S(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),i)for(let t=0,r=i.length;t<r;t++){let o=i[t];To.setFromBufferAttribute(o),this.morphTargetsRelative?(cr.addVectors(this.boundingBox.min,To.min),this.boundingBox.expandByPoint(cr),cr.addVectors(this.boundingBox.max,To.max),this.boundingBox.expandByPoint(cr)):(this.boundingBox.expandByPoint(To.min),this.boundingBox.expandByPoint(To.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new En);let e=this.attributes.position,i=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new S,1/0);return}if(e){let t=this.boundingSphere.center;if(To.setFromBufferAttribute(e),i)for(let o=0,s=i.length;o<s;o++){let a=i[o];op.setFromBufferAttribute(a),this.morphTargetsRelative?(cr.addVectors(To.min,op.min),To.expandByPoint(cr),cr.addVectors(To.max,op.max),To.expandByPoint(cr)):(To.expandByPoint(op.min),To.expandByPoint(op.max))}To.getCenter(t);let r=0;for(let o=0,s=e.count;o<s;o++)cr.fromBufferAttribute(e,o),r=Math.max(r,t.distanceToSquared(cr));if(i)for(let o=0,s=i.length;o<s;o++){let a=i[o],c=this.morphTargetsRelative;for(let l=0,d=a.count;l<d;l++)cr.fromBufferAttribute(a,l),c&&(Th.fromBufferAttribute(e,l),cr.add(Th)),r=Math.max(r,t.distanceToSquared(cr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,i=this.attributes;if(e===null||i.position===void 0||i.normal===void 0||i.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let t=i.position,r=i.normal,o=i.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new hi(new Float32Array(4*t.count),4));let s=this.getAttribute("tangent"),a=[],c=[];for(let A=0;A<t.count;A++)a[A]=new S,c[A]=new S;let l=new S,d=new S,u=new S,h=new z,f=new z,p=new z,b=new S,g=new S;function m(A,T,x){l.fromBufferAttribute(t,A),d.fromBufferAttribute(t,T),u.fromBufferAttribute(t,x),h.fromBufferAttribute(o,A),f.fromBufferAttribute(o,T),p.fromBufferAttribute(o,x),d.sub(l),u.sub(l),f.sub(h),p.sub(h);let I=1/(f.x*p.y-p.x*f.y);isFinite(I)&&(b.copy(d).multiplyScalar(p.y).addScaledVector(u,-f.y).multiplyScalar(I),g.copy(u).multiplyScalar(f.x).addScaledVector(d,-p.x).multiplyScalar(I),a[A].add(b),a[T].add(b),a[x].add(b),c[A].add(g),c[T].add(g),c[x].add(g))}let v=this.groups;v.length===0&&(v=[{start:0,count:e.count}]);for(let A=0,T=v.length;A<T;++A){let x=v[A],I=x.start,V=x.count;for(let W=I,ee=I+V;W<ee;W+=3)m(e.getX(W+0),e.getX(W+1),e.getX(W+2))}let _=new S,y=new S,C=new S,R=new S;function M(A){C.fromBufferAttribute(r,A),R.copy(C);let T=a[A];_.copy(T),_.sub(C.multiplyScalar(C.dot(T))).normalize(),y.crossVectors(R,T);let I=y.dot(c[A])<0?-1:1;s.setXYZW(A,_.x,_.y,_.z,I)}for(let A=0,T=v.length;A<T;++A){let x=v[A],I=x.start,V=x.count;for(let W=I,ee=I+V;W<ee;W+=3)M(e.getX(W+0)),M(e.getX(W+1)),M(e.getX(W+2))}}computeVertexNormals(){let e=this.index,i=this.getAttribute("position");if(i!==void 0){let t=this.getAttribute("normal");if(t===void 0)t=new hi(new Float32Array(i.count*3),3),this.setAttribute("normal",t);else for(let h=0,f=t.count;h<f;h++)t.setXYZ(h,0,0,0);let r=new S,o=new S,s=new S,a=new S,c=new S,l=new S,d=new S,u=new S;if(e)for(let h=0,f=e.count;h<f;h+=3){let p=e.getX(h+0),b=e.getX(h+1),g=e.getX(h+2);r.fromBufferAttribute(i,p),o.fromBufferAttribute(i,b),s.fromBufferAttribute(i,g),d.subVectors(s,o),u.subVectors(r,o),d.cross(u),a.fromBufferAttribute(t,p),c.fromBufferAttribute(t,b),l.fromBufferAttribute(t,g),a.add(d),c.add(d),l.add(d),t.setXYZ(p,a.x,a.y,a.z),t.setXYZ(b,c.x,c.y,c.z),t.setXYZ(g,l.x,l.y,l.z)}else for(let h=0,f=i.count;h<f;h+=3)r.fromBufferAttribute(i,h+0),o.fromBufferAttribute(i,h+1),s.fromBufferAttribute(i,h+2),d.subVectors(s,o),u.subVectors(r,o),d.cross(u),t.setXYZ(h+0,d.x,d.y,d.z),t.setXYZ(h+1,d.x,d.y,d.z),t.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),t.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let i=0,t=e.count;i<t;i++)cr.fromBufferAttribute(e,i),cr.normalize(),e.setXYZ(i,cr.x,cr.y,cr.z)}toNonIndexed(){function e(a,c){let l=a.array,d=a.itemSize,u=a.normalized,h=new l.constructor(c.length*d),f=0,p=0;for(let b=0,g=c.length;b<g;b++){a.isInterleavedBufferAttribute?f=c[b]*a.data.stride+a.offset:f=c[b]*d;for(let m=0;m<d;m++)h[p++]=l[f++]}return new hi(h,d,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let i=new n,t=this.index.array,r=this.attributes;for(let a in r){let c=r[a],l=e(c,t);i.setAttribute(a,l)}let o=this.morphAttributes;for(let a in o){let c=[],l=o[a];for(let d=0,u=l.length;d<u;d++){let h=l[d],f=e(h,t);c.push(f)}i.morphAttributes[a]=c}i.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,c=s.length;a<c;a++){let l=s[a];i.addGroup(l.start,l.count,l.materialIndex)}return i}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let c=this.parameters;for(let l in c)c[l]!==void 0&&(e[l]=c[l]);return e}e.data={attributes:{}};let i=this.index;i!==null&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});let t=this.attributes;for(let c in t){let l=t[c];e.data.attributes[c]=l.toJSON(e.data)}let r={},o=!1;for(let c in this.morphAttributes){let l=this.morphAttributes[c],d=[];for(let u=0,h=l.length;u<h;u++){let f=l[u];d.push(f.toJSON(e.data))}d.length>0&&(r[c]=d,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let i={};this.name=e.name;let t=e.index;t!==null&&this.setIndex(t.clone(i));let r=e.attributes;for(let l in r){let d=r[l];this.setAttribute(l,d.clone(i))}let o=e.morphAttributes;for(let l in o){let d=[],u=o[l];for(let h=0,f=u.length;h<f;h++)d.push(u[h].clone(i));this.morphAttributes[l]=d}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let l=0,d=s.length;l<d;l++){let u=s[l];this.addGroup(u.start,u.count,u.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},I2=new Be,dd=new ia,Kv=new En,P2=new S,Ch=new S,Eh=new S,Dh=new S,UT=new S,Jv=new S,e0=new z,t0=new z,i0=new z,k2=new S,F2=new S,j2=new S,n0=new S,r0=new S,Ve=class extends Tt{constructor(e=new bt,i=new tn){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=i,this.updateMorphTargets()}copy(e,i){return super.copy(e,i),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let i=this.geometry.morphAttributes,t=Object.keys(i);if(t.length>0){let r=i[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,i){let t=this.geometry,r=t.attributes.position,o=t.morphAttributes.position,s=t.morphTargetsRelative;i.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(o&&a){Jv.set(0,0,0);for(let c=0,l=o.length;c<l;c++){let d=a[c],u=o[c];d!==0&&(UT.fromBufferAttribute(u,e),s?Jv.addScaledVector(UT,d):Jv.addScaledVector(UT.sub(i),d))}i.add(Jv)}return i}raycast(e,i){let t=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(t.boundingSphere===null&&t.computeBoundingSphere(),Kv.copy(t.boundingSphere),Kv.applyMatrix4(o),dd.copy(e.ray).recast(e.near),!(Kv.containsPoint(dd.origin)===!1&&(dd.intersectSphere(Kv,P2)===null||dd.origin.distanceToSquared(P2)>(e.far-e.near)**2))&&(I2.copy(o).invert(),dd.copy(e.ray).applyMatrix4(I2),!(t.boundingBox!==null&&dd.intersectsBox(t.boundingBox)===!1)&&this._computeIntersections(e,i,dd)))}_computeIntersections(e,i,t){let r,o=this.geometry,s=this.material,a=o.index,c=o.attributes.position,l=o.attributes.uv,d=o.attributes.uv1,u=o.attributes.normal,h=o.groups,f=o.drawRange;if(a!==null)if(Array.isArray(s))for(let p=0,b=h.length;p<b;p++){let g=h[p],m=s[g.materialIndex],v=Math.max(g.start,f.start),_=Math.min(a.count,Math.min(g.start+g.count,f.start+f.count));for(let y=v,C=_;y<C;y+=3){let R=a.getX(y),M=a.getX(y+1),A=a.getX(y+2);r=o0(this,m,e,t,l,d,u,R,M,A),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=g.materialIndex,i.push(r))}}else{let p=Math.max(0,f.start),b=Math.min(a.count,f.start+f.count);for(let g=p,m=b;g<m;g+=3){let v=a.getX(g),_=a.getX(g+1),y=a.getX(g+2);r=o0(this,s,e,t,l,d,u,v,_,y),r&&(r.faceIndex=Math.floor(g/3),i.push(r))}}else if(c!==void 0)if(Array.isArray(s))for(let p=0,b=h.length;p<b;p++){let g=h[p],m=s[g.materialIndex],v=Math.max(g.start,f.start),_=Math.min(c.count,Math.min(g.start+g.count,f.start+f.count));for(let y=v,C=_;y<C;y+=3){let R=y,M=y+1,A=y+2;r=o0(this,m,e,t,l,d,u,R,M,A),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=g.materialIndex,i.push(r))}}else{let p=Math.max(0,f.start),b=Math.min(c.count,f.start+f.count);for(let g=p,m=b;g<m;g+=3){let v=g,_=g+1,y=g+2;r=o0(this,s,e,t,l,d,u,v,_,y),r&&(r.faceIndex=Math.floor(g/3),i.push(r))}}}};function rX(n,e,i,t,r,o,s,a){let c;if(e.side===Wr?c=t.intersectTriangle(s,o,r,!0,a):c=t.intersectTriangle(r,o,s,e.side===ms,a),c===null)return null;r0.copy(a),r0.applyMatrix4(n.matrixWorld);let l=i.ray.origin.distanceTo(r0);return l<i.near||l>i.far?null:{distance:l,point:r0.clone(),object:n}}function o0(n,e,i,t,r,o,s,a,c,l){n.getVertexPosition(a,Ch),n.getVertexPosition(c,Eh),n.getVertexPosition(l,Dh);let d=rX(n,e,i,t,Ch,Eh,Dh,n0);if(d){r&&(e0.fromBufferAttribute(r,a),t0.fromBufferAttribute(r,c),i0.fromBufferAttribute(r,l),d.uv=Ja.getInterpolation(n0,Ch,Eh,Dh,e0,t0,i0,new z)),o&&(e0.fromBufferAttribute(o,a),t0.fromBufferAttribute(o,c),i0.fromBufferAttribute(o,l),d.uv1=Ja.getInterpolation(n0,Ch,Eh,Dh,e0,t0,i0,new z)),s&&(k2.fromBufferAttribute(s,a),F2.fromBufferAttribute(s,c),j2.fromBufferAttribute(s,l),d.normal=Ja.getInterpolation(n0,Ch,Eh,Dh,k2,F2,j2,new S),d.normal.dot(t.direction)>0&&d.normal.multiplyScalar(-1));let u={a,b:c,c:l,normal:new S,materialIndex:0};Ja.getNormal(Ch,Eh,Dh,u.normal),d.face=u}return d}var Zi=class n extends bt{constructor(e=1,i=1,t=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:i,depth:t,widthSegments:r,heightSegments:o,depthSegments:s};let a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let c=[],l=[],d=[],u=[],h=0,f=0;p("z","y","x",-1,-1,t,i,e,s,o,0),p("z","y","x",1,-1,t,i,-e,s,o,1),p("x","z","y",1,1,e,t,i,r,s,2),p("x","z","y",1,-1,e,t,-i,r,s,3),p("x","y","z",1,-1,e,i,t,r,o,4),p("x","y","z",-1,-1,e,i,-t,r,o,5),this.setIndex(c),this.setAttribute("position",new qe(l,3)),this.setAttribute("normal",new qe(d,3)),this.setAttribute("uv",new qe(u,2));function p(b,g,m,v,_,y,C,R,M,A,T){let x=y/M,I=C/A,V=y/2,W=C/2,ee=R/2,ne=M+1,B=A+1,G=0,U=0,se=new S;for(let Te=0;Te<B;Te++){let Ie=Te*I-W;for(let Ze=0;Ze<ne;Ze++){let yt=Ze*x-V;se[b]=yt*v,se[g]=Ie*_,se[m]=ee,l.push(se.x,se.y,se.z),se[b]=0,se[g]=0,se[m]=R>0?1:-1,d.push(se.x,se.y,se.z),u.push(Ze/M),u.push(1-Te/A),G+=1}}for(let Te=0;Te<A;Te++)for(let Ie=0;Ie<M;Ie++){let Ze=h+Ie+ne*Te,yt=h+Ie+ne*(Te+1),Z=h+(Ie+1)+ne*(Te+1),Ce=h+(Ie+1)+ne*Te;c.push(Ze,yt,Ce),c.push(yt,Z,Ce),U+=6}a.addGroup(f,U,T),f+=U,h+=G}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function qh(n){let e={};for(let i in n){e[i]={};for(let t in n[i]){let r=n[i][t];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[i][t]=null):e[i][t]=r.clone():Array.isArray(r)?e[i][t]=r.slice():e[i][t]=r}}return e}function Hr(n){let e={};for(let i=0;i<n.length;i++){let t=qh(n[i]);for(let r in t)e[r]=t[r]}return e}function oX(n){let e=[];for(let i=0;i<n.length;i++)e.push(n[i].clone());return e}function JL(n){let e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Ri.workingColorSpace}var Li={clone:qh,merge:Hr},sX=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,aX=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Ft=class extends dn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=sX,this.fragmentShader=aX,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=qh(e.uniforms),this.uniformsGroups=oX(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let i=super.toJSON(e);i.glslVersion=this.glslVersion,i.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?i.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?i.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?i.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?i.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?i.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?i.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?i.uniforms[r]={type:"m4",value:s.toArray()}:i.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader,i.lights=this.lights,i.clipping=this.clipping;let t={};for(let r in this.extensions)this.extensions[r]===!0&&(t[r]=!0);return Object.keys(t).length>0&&(i.extensions=t),i}},sl=class extends Tt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Be,this.projectionMatrix=new Be,this.projectionMatrixInverse=new Be,this.coordinateSystem=ea}copy(e,i){return super.copy(e,i),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,i){super.updateWorldMatrix(e,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},tl=new S,O2=new z,N2=new z,en=class extends sl{constructor(e=50,i=1,t=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=t,this.far=r,this.focus=10,this.aspect=i,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,i){return super.copy(e,i),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let i=.5*this.getFilmHeight()/e;this.fov=Gh*2*Math.atan(i),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(Ed*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Gh*2*Math.atan(Math.tan(Ed*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,i,t){tl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(tl.x,tl.y).multiplyScalar(-e/tl.z),tl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(tl.x,tl.y).multiplyScalar(-e/tl.z)}getViewSize(e,i){return this.getViewBounds(e,O2,N2),i.subVectors(N2,O2)}setViewOffset(e,i,t,r,o,s){this.aspect=e/i,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=i,this.view.offsetX=t,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,i=e*Math.tan(Ed*.5*this.fov)/this.zoom,t=2*i,r=this.aspect*t,o=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let c=s.fullWidth,l=s.fullHeight;o+=s.offsetX*r/c,i-=s.offsetY*t/l,r*=s.width/c,t*=s.height/l}let a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,i,i-t,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let i=super.toJSON(e);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,this.view!==null&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}},Ah=-90,Ih=1,H0=class extends Tt{constructor(e,i,t){super(),this.type="CubeCamera",this.renderTarget=t,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new en(Ah,Ih,e,i);r.layers=this.layers,this.add(r);let o=new en(Ah,Ih,e,i);o.layers=this.layers,this.add(o);let s=new en(Ah,Ih,e,i);s.layers=this.layers,this.add(s);let a=new en(Ah,Ih,e,i);a.layers=this.layers,this.add(a);let c=new en(Ah,Ih,e,i);c.layers=this.layers,this.add(c);let l=new en(Ah,Ih,e,i);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){let e=this.coordinateSystem,i=this.children.concat(),[t,r,o,s,a,c]=i;for(let l of i)this.remove(l);if(e===ea)t.up.set(0,1,0),t.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Ep)t.up.set(0,-1,0),t.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let l of i)this.add(l),l.updateMatrixWorld()}update(e,i){this.parent===null&&this.updateMatrixWorld();let{renderTarget:t,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[o,s,a,c,l,d]=this.children,u=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;let b=t.texture.generateMipmaps;t.texture.generateMipmaps=!1,e.setRenderTarget(t,0,r),e.render(i,o),e.setRenderTarget(t,1,r),e.render(i,s),e.setRenderTarget(t,2,r),e.render(i,a),e.setRenderTarget(t,3,r),e.render(i,c),e.setRenderTarget(t,4,r),e.render(i,l),t.texture.generateMipmaps=b,e.setRenderTarget(t,5,r),e.render(i,d),e.setRenderTarget(u,h,f),e.xr.enabled=p,t.texture.needsPMREMUpdate=!0}},Nd=class extends vn{constructor(e,i,t,r,o,s,a,c,l,d){e=e!==void 0?e:[],i=i!==void 0?i:nc,super(e,i,t,r,o,s,a,c,l,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},G0=class extends ci{constructor(e=1,i={}){super(e,e,i),this.isWebGLCubeRenderTarget=!0;let t={width:e,height:e,depth:1},r=[t,t,t,t,t,t];this.texture=new Nd(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:gn}fromEquirectangularTexture(e,i){this.texture.type=i.type,this.texture.colorSpace=i.colorSpace,this.texture.generateMipmaps=i.generateMipmaps,this.texture.minFilter=i.minFilter,this.texture.magFilter=i.magFilter;let t={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Zi(5,5,5),o=new Ft({name:"CubemapFromEquirect",uniforms:qh(t.uniforms),vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,side:Wr,blending:ti});o.uniforms.tEquirect.value=i;let s=new Ve(r,o),a=i.minFilter;return i.minFilter===Co&&(i.minFilter=gn),new H0(1,10,this).update(e,s),i.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,i,t,r){let o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(i,t,r);e.setRenderTarget(o)}},VT=new S,cX=new S,lX=new Jt,lr=class{constructor(e=new S(1,0,0),i=0){this.isPlane=!0,this.normal=e,this.constant=i}set(e,i){return this.normal.copy(e),this.constant=i,this}setComponents(e,i,t,r){return this.normal.set(e,i,t),this.constant=r,this}setFromNormalAndCoplanarPoint(e,i){return this.normal.copy(e),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(e,i,t){let r=VT.subVectors(t,i).cross(cX.subVectors(e,i)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,i){return i.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,i){let t=e.delta(VT),r=this.normal.dot(t);if(r===0)return this.distanceToPoint(e.start)===0?i.copy(e.start):null;let o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:i.copy(e.start).addScaledVector(t,o)}intersectsLine(e){let i=this.distanceToPoint(e.start),t=this.distanceToPoint(e.end);return i<0&&t>0||t<0&&i>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,i){let t=i||lX.getNormalMatrix(e),r=this.coplanarPoint(VT).applyMatrix4(e),o=this.normal.applyMatrix3(t).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},ud=new En,s0=new S,Ld=class{constructor(e=new lr,i=new lr,t=new lr,r=new lr,o=new lr,s=new lr){this.planes=[e,i,t,r,o,s]}set(e,i,t,r,o,s){let a=this.planes;return a[0].copy(e),a[1].copy(i),a[2].copy(t),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(e){let i=this.planes;for(let t=0;t<6;t++)i[t].copy(e.planes[t]);return this}setFromProjectionMatrix(e,i=ea){let t=this.planes,r=e.elements,o=r[0],s=r[1],a=r[2],c=r[3],l=r[4],d=r[5],u=r[6],h=r[7],f=r[8],p=r[9],b=r[10],g=r[11],m=r[12],v=r[13],_=r[14],y=r[15];if(t[0].setComponents(c-o,h-l,g-f,y-m).normalize(),t[1].setComponents(c+o,h+l,g+f,y+m).normalize(),t[2].setComponents(c+s,h+d,g+p,y+v).normalize(),t[3].setComponents(c-s,h-d,g-p,y-v).normalize(),t[4].setComponents(c-a,h-u,g-b,y-_).normalize(),i===ea)t[5].setComponents(c+a,h+u,g+b,y+_).normalize();else if(i===Ep)t[5].setComponents(a,u,b,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+i);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ud.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let i=e.geometry;i.boundingSphere===null&&i.computeBoundingSphere(),ud.copy(i.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ud)}intersectsSprite(e){return ud.center.set(0,0,0),ud.radius=.7071067811865476,ud.applyMatrix4(e.matrixWorld),this.intersectsSphere(ud)}intersectsSphere(e){let i=this.planes,t=e.center,r=-e.radius;for(let o=0;o<6;o++)if(i[o].distanceToPoint(t)<r)return!1;return!0}intersectsBox(e){let i=this.planes;for(let t=0;t<6;t++){let r=i[t];if(s0.x=r.normal.x>0?e.max.x:e.min.x,s0.y=r.normal.y>0?e.max.y:e.min.y,s0.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(s0)<0)return!1}return!0}containsPoint(e){let i=this.planes;for(let t=0;t<6;t++)if(i[t].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function e3(){let n=null,e=!1,i=null,t=null;function r(o,s){i(o,s),t=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&i!==null&&(t=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(t),e=!1},setAnimationLoop:function(o){i=o},setContext:function(o){n=o}}}function dX(n){let e=new WeakMap;function i(a,c){let l=a.array,d=a.usage,u=l.byteLength,h=n.createBuffer();n.bindBuffer(c,h),n.bufferData(c,l,d),a.onUploadCallback();let f;if(l instanceof Float32Array)f=n.FLOAT;else if(l instanceof Uint16Array)a.isFloat16BufferAttribute?f=n.HALF_FLOAT:f=n.UNSIGNED_SHORT;else if(l instanceof Int16Array)f=n.SHORT;else if(l instanceof Uint32Array)f=n.UNSIGNED_INT;else if(l instanceof Int32Array)f=n.INT;else if(l instanceof Int8Array)f=n.BYTE;else if(l instanceof Uint8Array)f=n.UNSIGNED_BYTE;else if(l instanceof Uint8ClampedArray)f=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);return{buffer:h,type:f,bytesPerElement:l.BYTES_PER_ELEMENT,version:a.version,size:u}}function t(a,c,l){let d=c.array,u=c._updateRange,h=c.updateRanges;if(n.bindBuffer(l,a),u.count===-1&&h.length===0&&n.bufferSubData(l,0,d),h.length!==0){for(let f=0,p=h.length;f<p;f++){let b=h[f];n.bufferSubData(l,b.start*d.BYTES_PER_ELEMENT,d,b.start,b.count)}c.clearUpdateRanges()}u.count!==-1&&(n.bufferSubData(l,u.offset*d.BYTES_PER_ELEMENT,d,u.offset,u.count),u.count=-1),c.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);let c=e.get(a);c&&(n.deleteBuffer(c.buffer),e.delete(a))}function s(a,c){if(a.isGLBufferAttribute){let d=e.get(a);(!d||d.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}a.isInterleavedBufferAttribute&&(a=a.data);let l=e.get(a);if(l===void 0)e.set(a,i(a,c));else if(l.version<a.version){if(l.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");t(l.buffer,a,c),l.version=a.version}}return{get:r,remove:o,update:s}}var na=class n extends bt{constructor(e=1,i=1,t=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:i,widthSegments:t,heightSegments:r};let o=e/2,s=i/2,a=Math.floor(t),c=Math.floor(r),l=a+1,d=c+1,u=e/a,h=i/c,f=[],p=[],b=[],g=[];for(let m=0;m<d;m++){let v=m*h-s;for(let _=0;_<l;_++){let y=_*u-o;p.push(y,-v,0),b.push(0,0,1),g.push(_/a),g.push(1-m/c)}}for(let m=0;m<c;m++)for(let v=0;v<a;v++){let _=v+l*m,y=v+l*(m+1),C=v+1+l*(m+1),R=v+1+l*m;f.push(_,y,R),f.push(y,C,R)}this.setIndex(f),this.setAttribute("position",new qe(p,3)),this.setAttribute("normal",new qe(b,3)),this.setAttribute("uv",new qe(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}},uX=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,hX=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,fX=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,mX=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,pX=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,gX=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,bX=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,_X=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,vX=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,yX=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,xX=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,wX=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,MX=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,SX=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,RX=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,TX=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,CX=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,EX=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,DX=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,AX=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,IX=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,PX=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,kX=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( batchId );
	vColor.xyz *= batchingColor.xyz;
#endif`,FX=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,jX=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,OX=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,NX=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,LX=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,BX=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,UX=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,VX="gl_FragColor = linearToOutputTexel( gl_FragColor );",zX=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,HX=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,GX=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,WX=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,$X=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,qX=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,XX=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,YX=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,ZX=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,QX=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,KX=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,JX=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,eY=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,tY=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,iY=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,nY=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,rY=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,oY=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,sY=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,aY=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,cY=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lY=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,dY=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,uY=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,hY=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,fY=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,mY=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,pY=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,gY=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,bY=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,_Y=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,vY=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,yY=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,xY=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,wY=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,MY=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,SY=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,RY=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,TY=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,CY=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,EY=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,DY=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,AY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,IY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,PY=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,kY=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,FY=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,jY=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,OY=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,NY=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,LY=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,BY=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,UY=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,VY=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,zY=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,HY=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,GY=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,WY=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,$Y=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,qY=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,XY=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,YY=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ZY=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,QY=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,KY=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,JY=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,eZ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,tZ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,iZ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,nZ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,rZ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,oZ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,sZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,aZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,cZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,lZ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,dZ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,uZ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fZ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,mZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,pZ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,gZ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,bZ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,_Z=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,vZ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,yZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,xZ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wZ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,MZ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,SZ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,RZ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TZ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,CZ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EZ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,DZ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AZ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,IZ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,PZ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kZ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FZ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,jZ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OZ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,NZ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LZ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,BZ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,UZ=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VZ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,zZ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,HZ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ai={alphahash_fragment:uX,alphahash_pars_fragment:hX,alphamap_fragment:fX,alphamap_pars_fragment:mX,alphatest_fragment:pX,alphatest_pars_fragment:gX,aomap_fragment:bX,aomap_pars_fragment:_X,batching_pars_vertex:vX,batching_vertex:yX,begin_vertex:xX,beginnormal_vertex:wX,bsdfs:MX,iridescence_fragment:SX,bumpmap_pars_fragment:RX,clipping_planes_fragment:TX,clipping_planes_pars_fragment:CX,clipping_planes_pars_vertex:EX,clipping_planes_vertex:DX,color_fragment:AX,color_pars_fragment:IX,color_pars_vertex:PX,color_vertex:kX,common:FX,cube_uv_reflection_fragment:jX,defaultnormal_vertex:OX,displacementmap_pars_vertex:NX,displacementmap_vertex:LX,emissivemap_fragment:BX,emissivemap_pars_fragment:UX,colorspace_fragment:VX,colorspace_pars_fragment:zX,envmap_fragment:HX,envmap_common_pars_fragment:GX,envmap_pars_fragment:WX,envmap_pars_vertex:$X,envmap_physical_pars_fragment:nY,envmap_vertex:qX,fog_vertex:XX,fog_pars_vertex:YX,fog_fragment:ZX,fog_pars_fragment:QX,gradientmap_pars_fragment:KX,lightmap_pars_fragment:JX,lights_lambert_fragment:eY,lights_lambert_pars_fragment:tY,lights_pars_begin:iY,lights_toon_fragment:rY,lights_toon_pars_fragment:oY,lights_phong_fragment:sY,lights_phong_pars_fragment:aY,lights_physical_fragment:cY,lights_physical_pars_fragment:lY,lights_fragment_begin:dY,lights_fragment_maps:uY,lights_fragment_end:hY,logdepthbuf_fragment:fY,logdepthbuf_pars_fragment:mY,logdepthbuf_pars_vertex:pY,logdepthbuf_vertex:gY,map_fragment:bY,map_pars_fragment:_Y,map_particle_fragment:vY,map_particle_pars_fragment:yY,metalnessmap_fragment:xY,metalnessmap_pars_fragment:wY,morphinstance_vertex:MY,morphcolor_vertex:SY,morphnormal_vertex:RY,morphtarget_pars_vertex:TY,morphtarget_vertex:CY,normal_fragment_begin:EY,normal_fragment_maps:DY,normal_pars_fragment:AY,normal_pars_vertex:IY,normal_vertex:PY,normalmap_pars_fragment:kY,clearcoat_normal_fragment_begin:FY,clearcoat_normal_fragment_maps:jY,clearcoat_pars_fragment:OY,iridescence_pars_fragment:NY,opaque_fragment:LY,packing:BY,premultiplied_alpha_fragment:UY,project_vertex:VY,dithering_fragment:zY,dithering_pars_fragment:HY,roughnessmap_fragment:GY,roughnessmap_pars_fragment:WY,shadowmap_pars_fragment:$Y,shadowmap_pars_vertex:qY,shadowmap_vertex:XY,shadowmask_pars_fragment:YY,skinbase_vertex:ZY,skinning_pars_vertex:QY,skinning_vertex:KY,skinnormal_vertex:JY,specularmap_fragment:eZ,specularmap_pars_fragment:tZ,tonemapping_fragment:iZ,tonemapping_pars_fragment:nZ,transmission_fragment:rZ,transmission_pars_fragment:oZ,uv_pars_fragment:sZ,uv_pars_vertex:aZ,uv_vertex:cZ,worldpos_vertex:lZ,background_vert:dZ,background_frag:uZ,backgroundCube_vert:hZ,backgroundCube_frag:fZ,cube_vert:mZ,cube_frag:pZ,depth_vert:gZ,depth_frag:bZ,distanceRGBA_vert:_Z,distanceRGBA_frag:vZ,equirect_vert:yZ,equirect_frag:xZ,linedashed_vert:wZ,linedashed_frag:MZ,meshbasic_vert:SZ,meshbasic_frag:RZ,meshlambert_vert:TZ,meshlambert_frag:CZ,meshmatcap_vert:EZ,meshmatcap_frag:DZ,meshnormal_vert:AZ,meshnormal_frag:IZ,meshphong_vert:PZ,meshphong_frag:kZ,meshphysical_vert:FZ,meshphysical_frag:jZ,meshtoon_vert:OZ,meshtoon_frag:NZ,points_vert:LZ,points_frag:BZ,shadow_vert:UZ,shadow_frag:VZ,sprite_vert:zZ,sprite_frag:HZ},Ye={common:{diffuse:{value:new pe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Jt},alphaMap:{value:null},alphaMapTransform:{value:new Jt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Jt}},envmap:{envMap:{value:null},envMapRotation:{value:new Jt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Jt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Jt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Jt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Jt},normalScale:{value:new z(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Jt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Jt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Jt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Jt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new pe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Jt},alphaTest:{value:0},uvTransform:{value:new Jt}},sprite:{diffuse:{value:new pe(16777215)},opacity:{value:1},center:{value:new z(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Jt},alphaMap:{value:null},alphaMapTransform:{value:new Jt},alphaTest:{value:0}}},hs={basic:{uniforms:Hr([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.fog]),vertexShader:ai.meshbasic_vert,fragmentShader:ai.meshbasic_frag},lambert:{uniforms:Hr([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,Ye.lights,{emissive:{value:new pe(0)}}]),vertexShader:ai.meshlambert_vert,fragmentShader:ai.meshlambert_frag},phong:{uniforms:Hr([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,Ye.lights,{emissive:{value:new pe(0)},specular:{value:new pe(1118481)},shininess:{value:30}}]),vertexShader:ai.meshphong_vert,fragmentShader:ai.meshphong_frag},standard:{uniforms:Hr([Ye.common,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.roughnessmap,Ye.metalnessmap,Ye.fog,Ye.lights,{emissive:{value:new pe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ai.meshphysical_vert,fragmentShader:ai.meshphysical_frag},toon:{uniforms:Hr([Ye.common,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.gradientmap,Ye.fog,Ye.lights,{emissive:{value:new pe(0)}}]),vertexShader:ai.meshtoon_vert,fragmentShader:ai.meshtoon_frag},matcap:{uniforms:Hr([Ye.common,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,{matcap:{value:null}}]),vertexShader:ai.meshmatcap_vert,fragmentShader:ai.meshmatcap_frag},points:{uniforms:Hr([Ye.points,Ye.fog]),vertexShader:ai.points_vert,fragmentShader:ai.points_frag},dashed:{uniforms:Hr([Ye.common,Ye.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ai.linedashed_vert,fragmentShader:ai.linedashed_frag},depth:{uniforms:Hr([Ye.common,Ye.displacementmap]),vertexShader:ai.depth_vert,fragmentShader:ai.depth_frag},normal:{uniforms:Hr([Ye.common,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,{opacity:{value:1}}]),vertexShader:ai.meshnormal_vert,fragmentShader:ai.meshnormal_frag},sprite:{uniforms:Hr([Ye.sprite,Ye.fog]),vertexShader:ai.sprite_vert,fragmentShader:ai.sprite_frag},background:{uniforms:{uvTransform:{value:new Jt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ai.background_vert,fragmentShader:ai.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Jt}},vertexShader:ai.backgroundCube_vert,fragmentShader:ai.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ai.cube_vert,fragmentShader:ai.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ai.equirect_vert,fragmentShader:ai.equirect_frag},distanceRGBA:{uniforms:Hr([Ye.common,Ye.displacementmap,{referencePosition:{value:new S},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ai.distanceRGBA_vert,fragmentShader:ai.distanceRGBA_frag},shadow:{uniforms:Hr([Ye.lights,Ye.fog,{color:{value:new pe(0)},opacity:{value:1}}]),vertexShader:ai.shadow_vert,fragmentShader:ai.shadow_frag}};hs.physical={uniforms:Hr([hs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Jt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Jt},clearcoatNormalScale:{value:new z(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Jt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Jt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Jt},sheen:{value:0},sheenColor:{value:new pe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Jt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Jt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Jt},transmissionSamplerSize:{value:new z},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Jt},attenuationDistance:{value:0},attenuationColor:{value:new pe(0)},specularColor:{value:new pe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Jt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Jt},anisotropyVector:{value:new z},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Jt}}]),vertexShader:ai.meshphysical_vert,fragmentShader:ai.meshphysical_frag};var a0={r:0,b:0,g:0},hd=new so,GZ=new Be;function WZ(n,e,i,t,r,o,s){let a=new pe(0),c=o===!0?0:1,l,d,u=null,h=0,f=null;function p(v){let _=v.isScene===!0?v.background:null;return _&&_.isTexture&&(_=(v.backgroundBlurriness>0?i:e).get(_)),_}function b(v){let _=!1,y=p(v);y===null?m(a,c):y&&y.isColor&&(m(y,1),_=!0);let C=n.xr.getEnvironmentBlendMode();C==="additive"?t.buffers.color.setClear(0,0,0,1,s):C==="alpha-blend"&&t.buffers.color.setClear(0,0,0,0,s),(n.autoClear||_)&&(t.buffers.depth.setTest(!0),t.buffers.depth.setMask(!0),t.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function g(v,_){let y=p(_);y&&(y.isCubeTexture||y.mapping===lf)?(d===void 0&&(d=new Ve(new Zi(1,1,1),new Ft({name:"BackgroundCubeMaterial",uniforms:qh(hs.backgroundCube.uniforms),vertexShader:hs.backgroundCube.vertexShader,fragmentShader:hs.backgroundCube.fragmentShader,side:Wr,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(C,R,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),hd.copy(_.backgroundRotation),hd.x*=-1,hd.y*=-1,hd.z*=-1,y.isCubeTexture&&y.isRenderTargetTexture===!1&&(hd.y*=-1,hd.z*=-1),d.material.uniforms.envMap.value=y,d.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(GZ.makeRotationFromEuler(hd)),d.material.toneMapped=Ri.getTransfer(y.colorSpace)!==Ji,(u!==y||h!==y.version||f!==n.toneMapping)&&(d.material.needsUpdate=!0,u=y,h=y.version,f=n.toneMapping),d.layers.enableAll(),v.unshift(d,d.geometry,d.material,0,0,null)):y&&y.isTexture&&(l===void 0&&(l=new Ve(new na(2,2),new Ft({name:"BackgroundMaterial",uniforms:qh(hs.background.uniforms),vertexShader:hs.background.vertexShader,fragmentShader:hs.background.fragmentShader,side:ms,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=y,l.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,l.material.toneMapped=Ri.getTransfer(y.colorSpace)!==Ji,y.matrixAutoUpdate===!0&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(u!==y||h!==y.version||f!==n.toneMapping)&&(l.material.needsUpdate=!0,u=y,h=y.version,f=n.toneMapping),l.layers.enableAll(),v.unshift(l,l.geometry,l.material,0,0,null))}function m(v,_){v.getRGB(a0,JL(n)),t.buffers.color.setClear(a0.r,a0.g,a0.b,_,s)}return{getClearColor:function(){return a},setClearColor:function(v,_=1){a.set(v),c=_,m(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(v){c=v,m(a,c)},render:b,addToRenderList:g}}function $Z(n,e){let i=n.getParameter(n.MAX_VERTEX_ATTRIBS),t={},r=h(null),o=r,s=!1;function a(x,I,V,W,ee){let ne=!1,B=u(W,V,I);o!==B&&(o=B,l(o.object)),ne=f(x,W,V,ee),ne&&p(x,W,V,ee),ee!==null&&e.update(ee,n.ELEMENT_ARRAY_BUFFER),(ne||s)&&(s=!1,y(x,I,V,W),ee!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(ee).buffer))}function c(){return n.createVertexArray()}function l(x){return n.bindVertexArray(x)}function d(x){return n.deleteVertexArray(x)}function u(x,I,V){let W=V.wireframe===!0,ee=t[x.id];ee===void 0&&(ee={},t[x.id]=ee);let ne=ee[I.id];ne===void 0&&(ne={},ee[I.id]=ne);let B=ne[W];return B===void 0&&(B=h(c()),ne[W]=B),B}function h(x){let I=[],V=[],W=[];for(let ee=0;ee<i;ee++)I[ee]=0,V[ee]=0,W[ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:I,enabledAttributes:V,attributeDivisors:W,object:x,attributes:{},index:null}}function f(x,I,V,W){let ee=o.attributes,ne=I.attributes,B=0,G=V.getAttributes();for(let U in G)if(G[U].location>=0){let Te=ee[U],Ie=ne[U];if(Ie===void 0&&(U==="instanceMatrix"&&x.instanceMatrix&&(Ie=x.instanceMatrix),U==="instanceColor"&&x.instanceColor&&(Ie=x.instanceColor)),Te===void 0||Te.attribute!==Ie||Ie&&Te.data!==Ie.data)return!0;B++}return o.attributesNum!==B||o.index!==W}function p(x,I,V,W){let ee={},ne=I.attributes,B=0,G=V.getAttributes();for(let U in G)if(G[U].location>=0){let Te=ne[U];Te===void 0&&(U==="instanceMatrix"&&x.instanceMatrix&&(Te=x.instanceMatrix),U==="instanceColor"&&x.instanceColor&&(Te=x.instanceColor));let Ie={};Ie.attribute=Te,Te&&Te.data&&(Ie.data=Te.data),ee[U]=Ie,B++}o.attributes=ee,o.attributesNum=B,o.index=W}function b(){let x=o.newAttributes;for(let I=0,V=x.length;I<V;I++)x[I]=0}function g(x){m(x,0)}function m(x,I){let V=o.newAttributes,W=o.enabledAttributes,ee=o.attributeDivisors;V[x]=1,W[x]===0&&(n.enableVertexAttribArray(x),W[x]=1),ee[x]!==I&&(n.vertexAttribDivisor(x,I),ee[x]=I)}function v(){let x=o.newAttributes,I=o.enabledAttributes;for(let V=0,W=I.length;V<W;V++)I[V]!==x[V]&&(n.disableVertexAttribArray(V),I[V]=0)}function _(x,I,V,W,ee,ne,B){B===!0?n.vertexAttribIPointer(x,I,V,ee,ne):n.vertexAttribPointer(x,I,V,W,ee,ne)}function y(x,I,V,W){b();let ee=W.attributes,ne=V.getAttributes(),B=I.defaultAttributeValues;for(let G in ne){let U=ne[G];if(U.location>=0){let se=ee[G];if(se===void 0&&(G==="instanceMatrix"&&x.instanceMatrix&&(se=x.instanceMatrix),G==="instanceColor"&&x.instanceColor&&(se=x.instanceColor)),se!==void 0){let Te=se.normalized,Ie=se.itemSize,Ze=e.get(se);if(Ze===void 0)continue;let yt=Ze.buffer,Z=Ze.type,Ce=Ze.bytesPerElement,We=Z===n.INT||Z===n.UNSIGNED_INT||se.gpuType===ZE;if(se.isInterleavedBufferAttribute){let N=se.data,xe=N.stride,Ne=se.offset;if(N.isInstancedInterleavedBuffer){for(let Ue=0;Ue<U.locationSize;Ue++)m(U.location+Ue,N.meshPerAttribute);x.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=N.meshPerAttribute*N.count)}else for(let Ue=0;Ue<U.locationSize;Ue++)g(U.location+Ue);n.bindBuffer(n.ARRAY_BUFFER,yt);for(let Ue=0;Ue<U.locationSize;Ue++)_(U.location+Ue,Ie/U.locationSize,Z,Te,xe*Ce,(Ne+Ie/U.locationSize*Ue)*Ce,We)}else{if(se.isInstancedBufferAttribute){for(let N=0;N<U.locationSize;N++)m(U.location+N,se.meshPerAttribute);x.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let N=0;N<U.locationSize;N++)g(U.location+N);n.bindBuffer(n.ARRAY_BUFFER,yt);for(let N=0;N<U.locationSize;N++)_(U.location+N,Ie/U.locationSize,Z,Te,Ie*Ce,Ie/U.locationSize*N*Ce,We)}}else if(B!==void 0){let Te=B[G];if(Te!==void 0)switch(Te.length){case 2:n.vertexAttrib2fv(U.location,Te);break;case 3:n.vertexAttrib3fv(U.location,Te);break;case 4:n.vertexAttrib4fv(U.location,Te);break;default:n.vertexAttrib1fv(U.location,Te)}}}}v()}function C(){A();for(let x in t){let I=t[x];for(let V in I){let W=I[V];for(let ee in W)d(W[ee].object),delete W[ee];delete I[V]}delete t[x]}}function R(x){if(t[x.id]===void 0)return;let I=t[x.id];for(let V in I){let W=I[V];for(let ee in W)d(W[ee].object),delete W[ee];delete I[V]}delete t[x.id]}function M(x){for(let I in t){let V=t[I];if(V[x.id]===void 0)continue;let W=V[x.id];for(let ee in W)d(W[ee].object),delete W[ee];delete V[x.id]}}function A(){T(),s=!0,o!==r&&(o=r,l(o.object))}function T(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:A,resetDefaultState:T,dispose:C,releaseStatesOfGeometry:R,releaseStatesOfProgram:M,initAttributes:b,enableAttribute:g,disableUnusedAttributes:v}}function qZ(n,e,i){let t;function r(l){t=l}function o(l,d){n.drawArrays(t,l,d),i.update(d,t,1)}function s(l,d,u){u!==0&&(n.drawArraysInstanced(t,l,d,u),i.update(d,t,u))}function a(l,d,u){if(u===0)return;let h=e.get("WEBGL_multi_draw");if(h===null)for(let f=0;f<u;f++)this.render(l[f],d[f]);else{h.multiDrawArraysWEBGL(t,l,0,d,0,u);let f=0;for(let p=0;p<u;p++)f+=d[p];i.update(f,t,1)}}function c(l,d,u,h){if(u===0)return;let f=e.get("WEBGL_multi_draw");if(f===null)for(let p=0;p<l.length;p++)s(l[p],d[p],h[p]);else{f.multiDrawArraysInstancedWEBGL(t,l,0,d,0,h,0,u);let p=0;for(let b=0;b<u;b++)p+=d[b];for(let b=0;b<h.length;b++)i.update(p,t,h[b])}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=c}function XZ(n,e,i,t){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let R=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(R){return!(R!==oo&&t.convert(R)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(R){let M=R===qi&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(R!==rc&&t.convert(R)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&R!==yr&&!M)}function c(R){if(R==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let l=i.precision!==void 0?i.precision:"highp",d=c(l);d!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",d,"instead."),l=d);let u=i.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_TEXTURE_SIZE),b=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),g=n.getParameter(n.MAX_VERTEX_ATTRIBS),m=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),v=n.getParameter(n.MAX_VARYING_VECTORS),_=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),y=f>0,C=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:a,precision:l,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:f,maxTextureSize:p,maxCubemapSize:b,maxAttributes:g,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:_,vertexTextures:y,maxSamples:C}}function YZ(n){let e=this,i=null,t=0,r=!1,o=!1,s=new lr,a=new Jt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(u,h){let f=u.length!==0||h||t!==0||r;return r=h,t=u.length,f},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(u,h){i=d(u,h,0)},this.setState=function(u,h,f){let p=u.clippingPlanes,b=u.clipIntersection,g=u.clipShadows,m=n.get(u);if(!r||p===null||p.length===0||o&&!g)o?d(null):l();else{let v=o?0:t,_=v*4,y=m.clippingState||null;c.value=y,y=d(p,h,_,f);for(let C=0;C!==_;++C)y[C]=i[C];m.clippingState=y,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=v}};function l(){c.value!==i&&(c.value=i,c.needsUpdate=t>0),e.numPlanes=t,e.numIntersection=0}function d(u,h,f,p){let b=u!==null?u.length:0,g=null;if(b!==0){if(g=c.value,p!==!0||g===null){let m=f+b*4,v=h.matrixWorldInverse;a.getNormalMatrix(v),(g===null||g.length<m)&&(g=new Float32Array(m));for(let _=0,y=f;_!==b;++_,y+=4)s.copy(u[_]).applyMatrix4(v,a),s.normal.toArray(g,y),g[y+3]=s.constant}c.value=g,c.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,g}}function ZZ(n){let e=new WeakMap;function i(s,a){return a===xp?s.mapping=nc:a===wp&&(s.mapping=ol),s}function t(s){if(s&&s.isTexture){let a=s.mapping;if(a===xp||a===wp)if(e.has(s)){let c=e.get(s).texture;return i(c,s.mapping)}else{let c=s.image;if(c&&c.height>0){let l=new G0(c.height);return l.fromEquirectangularTexture(n,s),e.set(s,l),s.addEventListener("dispose",r),i(l.texture,s.mapping)}else return null}}return s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function o(){e=new WeakMap}return{get:t,dispose:o}}var Do=class extends sl{constructor(e=-1,i=1,t=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=i,this.top=t,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,i){return super.copy(e,i),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,i,t,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=i,this.view.offsetX=t,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),t=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=t-e,s=t+e,a=r+i,c=r-i;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=l*this.view.offsetX,s=o+l*this.view.width,a-=d*this.view.offsetY,c=a-d*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let i=super.toJSON(e);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,this.view!==null&&(i.object.view=Object.assign({},this.view)),i}},Uh=4,L2=[.125,.215,.35,.446,.526,.582],wd=20,zT=new Do,B2=new pe,HT=null,GT=0,WT=0,$T=!1,xd=(1+Math.sqrt(5))/2,Ph=1/xd,U2=[new S(-xd,Ph,0),new S(xd,Ph,0),new S(-Ph,0,xd),new S(Ph,0,xd),new S(0,xd,-Ph),new S(0,xd,Ph),new S(-1,1,-1),new S(1,1,-1),new S(-1,1,1),new S(1,1,1)],kp=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,i=0,t=.1,r=100){HT=this._renderer.getRenderTarget(),GT=this._renderer.getActiveCubeFace(),WT=this._renderer.getActiveMipmapLevel(),$T=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,t,r,o),i>0&&this._blur(o,0,0,i),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,i=null){return this._fromTexture(e,i)}fromCubemap(e,i=null){return this._fromTexture(e,i)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=H2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=z2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(HT,GT,WT),this._renderer.xr.enabled=$T,e.scissorTest=!1,c0(e,0,0,e.width,e.height)}_fromTexture(e,i){e.mapping===nc||e.mapping===ol?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),HT=this._renderer.getRenderTarget(),GT=this._renderer.getActiveCubeFace(),WT=this._renderer.getActiveMipmapLevel(),$T=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let t=i||this._allocateTargets();return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),i=4*this._cubeSize,t={magFilter:gn,minFilter:gn,generateMipmaps:!1,type:qi,format:oo,colorSpace:Nn,depthBuffer:!1},r=V2(e,i,t);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==i){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=V2(e,i,t);let{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=QZ(o)),this._blurMaterial=KZ(o,e,i)}return r}_compileMaterial(e){let i=new Ve(this._lodPlanes[0],e);this._renderer.compile(i,zT)}_sceneToCubeUV(e,i,t,r){let a=new en(90,1,i,t),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],d=this._renderer,u=d.autoClear,h=d.toneMapping;d.getClearColor(B2),d.toneMapping=tc,d.autoClear=!1;let f=new tn({name:"PMREM.Background",side:Wr,depthWrite:!1,depthTest:!1}),p=new Ve(new Zi,f),b=!1,g=e.background;g?g.isColor&&(f.color.copy(g),e.background=null,b=!0):(f.color.copy(B2),b=!0);for(let m=0;m<6;m++){let v=m%3;v===0?(a.up.set(0,c[m],0),a.lookAt(l[m],0,0)):v===1?(a.up.set(0,0,c[m]),a.lookAt(0,l[m],0)):(a.up.set(0,c[m],0),a.lookAt(0,0,l[m]));let _=this._cubeSize;c0(r,v*_,m>2?_:0,_,_),d.setRenderTarget(r),b&&d.render(p,a),d.render(e,a)}p.geometry.dispose(),p.material.dispose(),d.toneMapping=h,d.autoClear=u,e.background=g}_textureToCubeUV(e,i){let t=this._renderer,r=e.mapping===nc||e.mapping===ol;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=H2()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=z2());let o=r?this._cubemapMaterial:this._equirectMaterial,s=new Ve(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;let c=this._cubeSize;c0(i,0,0,3*c,2*c),t.setRenderTarget(i),t.render(s,zT)}_applyPMREM(e){let i=this._renderer,t=i.autoClear;i.autoClear=!1;let r=this._lodPlanes.length;for(let o=1;o<r;o++){let s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=U2[(r-o-1)%U2.length];this._blur(e,o-1,o,s,a)}i.autoClear=t}_blur(e,i,t,r,o){let s=this._pingPongRenderTarget;this._halfBlur(e,s,i,t,r,"latitudinal",o),this._halfBlur(s,e,t,t,r,"longitudinal",o)}_halfBlur(e,i,t,r,o,s,a){let c=this._renderer,l=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let d=3,u=new Ve(this._lodPlanes[r],l),h=l.uniforms,f=this._sizeLods[t]-1,p=isFinite(o)?Math.PI/(2*f):2*Math.PI/(2*wd-1),b=o/p,g=isFinite(o)?1+Math.floor(d*b):wd;g>wd&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${wd}`);let m=[],v=0;for(let M=0;M<wd;++M){let A=M/b,T=Math.exp(-A*A/2);m.push(T),M===0?v+=T:M<g&&(v+=2*T)}for(let M=0;M<m.length;M++)m[M]=m[M]/v;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=m,h.latitudinal.value=s==="latitudinal",a&&(h.poleAxis.value=a);let{_lodMax:_}=this;h.dTheta.value=p,h.mipInt.value=_-t;let y=this._sizeLods[r],C=3*y*(r>_-Uh?r-_+Uh:0),R=4*(this._cubeSize-y);c0(i,C,R,3*y,2*y),c.setRenderTarget(i),c.render(u,zT)}};function QZ(n){let e=[],i=[],t=[],r=n,o=n-Uh+1+L2.length;for(let s=0;s<o;s++){let a=Math.pow(2,r);i.push(a);let c=1/a;s>n-Uh?c=L2[s-n+Uh-1]:s===0&&(c=0),t.push(c);let l=1/(a-2),d=-l,u=1+l,h=[d,d,u,d,u,u,d,d,u,u,d,u],f=6,p=6,b=3,g=2,m=1,v=new Float32Array(b*p*f),_=new Float32Array(g*p*f),y=new Float32Array(m*p*f);for(let R=0;R<f;R++){let M=R%3*2/3-1,A=R>2?0:-1,T=[M,A,0,M+2/3,A,0,M+2/3,A+1,0,M,A,0,M+2/3,A+1,0,M,A+1,0];v.set(T,b*p*R),_.set(h,g*p*R);let x=[R,R,R,R,R,R];y.set(x,m*p*R)}let C=new bt;C.setAttribute("position",new hi(v,b)),C.setAttribute("uv",new hi(_,g)),C.setAttribute("faceIndex",new hi(y,m)),e.push(C),r>Uh&&r--}return{lodPlanes:e,sizeLods:i,sigmas:t}}function V2(n,e,i){let t=new ci(n,e,i);return t.texture.mapping=lf,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function c0(n,e,i,t,r){n.viewport.set(e,i,t,r),n.scissor.set(e,i,t,r)}function KZ(n,e,i){let t=new Float32Array(wd),r=new S(0,1,0);return new Ft({name:"SphericalGaussianBlur",defines:{n:wd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:aD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ti,depthTest:!1,depthWrite:!1})}function z2(){return new Ft({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:aD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ti,depthTest:!1,depthWrite:!1})}function H2(){return new Ft({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:aD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ti,depthTest:!1,depthWrite:!1})}function aD(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function JZ(n){let e=new WeakMap,i=null;function t(a){if(a&&a.isTexture){let c=a.mapping,l=c===xp||c===wp,d=c===nc||c===ol;if(l||d){let u=e.get(a),h=u!==void 0?u.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return i===null&&(i=new kp(n)),u=l?i.fromEquirectangular(a,u):i.fromCubemap(a,u),u.texture.pmremVersion=a.pmremVersion,e.set(a,u),u.texture;if(u!==void 0)return u.texture;{let f=a.image;return l&&f&&f.height>0||d&&f&&r(f)?(i===null&&(i=new kp(n)),u=l?i.fromEquirectangular(a):i.fromCubemap(a),u.texture.pmremVersion=a.pmremVersion,e.set(a,u),a.addEventListener("dispose",o),u.texture):null}}}return a}function r(a){let c=0,l=6;for(let d=0;d<l;d++)a[d]!==void 0&&c++;return c===l}function o(a){let c=a.target;c.removeEventListener("dispose",o);let l=e.get(c);l!==void 0&&(e.delete(c),l.dispose())}function s(){e=new WeakMap,i!==null&&(i.dispose(),i=null)}return{get:t,dispose:s}}function eQ(n){let e={};function i(t){if(e[t]!==void 0)return e[t];let r;switch(t){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(t)}return e[t]=r,r}return{has:function(t){return i(t)!==null},init:function(){i("EXT_color_buffer_float"),i("WEBGL_clip_cull_distance"),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture"),i("WEBGL_render_shared_exponent")},get:function(t){let r=i(t);return r===null&&sD("THREE.WebGLRenderer: "+t+" extension not supported."),r}}}function tQ(n,e,i,t){let r={},o=new WeakMap;function s(u){let h=u.target;h.index!==null&&e.remove(h.index);for(let p in h.attributes)e.remove(h.attributes[p]);for(let p in h.morphAttributes){let b=h.morphAttributes[p];for(let g=0,m=b.length;g<m;g++)e.remove(b[g])}h.removeEventListener("dispose",s),delete r[h.id];let f=o.get(h);f&&(e.remove(f),o.delete(h)),t.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,i.memory.geometries--}function a(u,h){return r[h.id]===!0||(h.addEventListener("dispose",s),r[h.id]=!0,i.memory.geometries++),h}function c(u){let h=u.attributes;for(let p in h)e.update(h[p],n.ARRAY_BUFFER);let f=u.morphAttributes;for(let p in f){let b=f[p];for(let g=0,m=b.length;g<m;g++)e.update(b[g],n.ARRAY_BUFFER)}}function l(u){let h=[],f=u.index,p=u.attributes.position,b=0;if(f!==null){let v=f.array;b=f.version;for(let _=0,y=v.length;_<y;_+=3){let C=v[_+0],R=v[_+1],M=v[_+2];h.push(C,R,R,M,M,C)}}else if(p!==void 0){let v=p.array;b=p.version;for(let _=0,y=v.length/3-1;_<y;_+=3){let C=_+0,R=_+1,M=_+2;h.push(C,R,R,M,M,C)}}else return;let g=new(ZL(h)?Pp:Ip)(h,1);g.version=b;let m=o.get(u);m&&e.remove(m),o.set(u,g)}function d(u){let h=o.get(u);if(h){let f=u.index;f!==null&&h.version<f.version&&l(u)}else l(u);return o.get(u)}return{get:a,update:c,getWireframeAttribute:d}}function iQ(n,e,i){let t;function r(h){t=h}let o,s;function a(h){o=h.type,s=h.bytesPerElement}function c(h,f){n.drawElements(t,f,o,h*s),i.update(f,t,1)}function l(h,f,p){p!==0&&(n.drawElementsInstanced(t,f,o,h*s,p),i.update(f,t,p))}function d(h,f,p){if(p===0)return;let b=e.get("WEBGL_multi_draw");if(b===null)for(let g=0;g<p;g++)this.render(h[g]/s,f[g]);else{b.multiDrawElementsWEBGL(t,f,0,o,h,0,p);let g=0;for(let m=0;m<p;m++)g+=f[m];i.update(g,t,1)}}function u(h,f,p,b){if(p===0)return;let g=e.get("WEBGL_multi_draw");if(g===null)for(let m=0;m<h.length;m++)l(h[m]/s,f[m],b[m]);else{g.multiDrawElementsInstancedWEBGL(t,f,0,o,h,0,b,0,p);let m=0;for(let v=0;v<p;v++)m+=f[v];for(let v=0;v<b.length;v++)i.update(m,t,b[v])}}this.setMode=r,this.setIndex=a,this.render=c,this.renderInstances=l,this.renderMultiDraw=d,this.renderMultiDrawInstances=u}function nQ(n){let e={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function t(o,s,a){switch(i.calls++,s){case n.TRIANGLES:i.triangles+=a*(o/3);break;case n.LINES:i.lines+=a*(o/2);break;case n.LINE_STRIP:i.lines+=a*(o-1);break;case n.LINE_LOOP:i.lines+=a*o;break;case n.POINTS:i.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:e,render:i,programs:null,autoReset:!0,reset:r,update:t}}function rQ(n,e,i){let t=new WeakMap,r=new xi;function o(s,a,c){let l=s.morphTargetInfluences,d=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,u=d!==void 0?d.length:0,h=t.get(a);if(h===void 0||h.count!==u){let x=function(){A.dispose(),t.delete(a),a.removeEventListener("dispose",x)};var f=x;h!==void 0&&h.texture.dispose();let p=a.morphAttributes.position!==void 0,b=a.morphAttributes.normal!==void 0,g=a.morphAttributes.color!==void 0,m=a.morphAttributes.position||[],v=a.morphAttributes.normal||[],_=a.morphAttributes.color||[],y=0;p===!0&&(y=1),b===!0&&(y=2),g===!0&&(y=3);let C=a.attributes.position.count*y,R=1;C>e.maxTextureSize&&(R=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);let M=new Float32Array(C*R*4*u),A=new Wh(M,C,R,u);A.type=yr,A.needsUpdate=!0;let T=y*4;for(let I=0;I<u;I++){let V=m[I],W=v[I],ee=_[I],ne=C*R*4*I;for(let B=0;B<V.count;B++){let G=B*T;p===!0&&(r.fromBufferAttribute(V,B),M[ne+G+0]=r.x,M[ne+G+1]=r.y,M[ne+G+2]=r.z,M[ne+G+3]=0),b===!0&&(r.fromBufferAttribute(W,B),M[ne+G+4]=r.x,M[ne+G+5]=r.y,M[ne+G+6]=r.z,M[ne+G+7]=0),g===!0&&(r.fromBufferAttribute(ee,B),M[ne+G+8]=r.x,M[ne+G+9]=r.y,M[ne+G+10]=r.z,M[ne+G+11]=ee.itemSize===4?r.w:1)}}h={count:u,texture:A,size:new z(C,R)},t.set(a,h),a.addEventListener("dispose",x)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",s.morphTexture,i);else{let p=0;for(let g=0;g<l.length;g++)p+=l[g];let b=a.morphTargetsRelative?1:1-p;c.getUniforms().setValue(n,"morphTargetBaseInfluence",b),c.getUniforms().setValue(n,"morphTargetInfluences",l)}c.getUniforms().setValue(n,"morphTargetsTexture",h.texture,i),c.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:o}}function oQ(n,e,i,t){let r=new WeakMap;function o(c){let l=t.render.frame,d=c.geometry,u=e.get(c,d);if(r.get(u)!==l&&(e.update(u),r.set(u,l)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),r.get(c)!==l&&(i.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&i.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,l))),c.isSkinnedMesh){let h=c.skeleton;r.get(h)!==l&&(h.update(),r.set(h,l))}return u}function s(){r=new WeakMap}function a(c){let l=c.target;l.removeEventListener("dispose",a),i.remove(l.instanceMatrix),l.instanceColor!==null&&i.remove(l.instanceColor)}return{update:o,dispose:s}}var bs=class extends vn{constructor(e,i,t,r,o,s,a,c,l,d=Cd){if(d!==Cd&&d!==gs)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");t===void 0&&d===Cd&&(t=Fd),t===void 0&&d===gs&&(t=ps),super(null,r,o,s,a,c,d,t,l),this.isDepthTexture=!0,this.image={width:e,height:i},this.magFilter=a!==void 0?a:ui,this.minFilter=c!==void 0?c:ui,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let i=super.toJSON(e);return this.compareFunction!==null&&(i.compareFunction=this.compareFunction),i}},t3=new vn,i3=new bs(1,1);i3.compareFunction=rD;var n3=new Wh,r3=new Ap,o3=new Nd,G2=[],W2=[],$2=new Float32Array(16),q2=new Float32Array(9),X2=new Float32Array(4);function uf(n,e,i){let t=n[0];if(t<=0||t>0)return n;let r=e*i,o=G2[r];if(o===void 0&&(o=new Float32Array(r),G2[r]=o),e!==0){t.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=i,n[s].toArray(o,a)}return o}function Jn(n,e){if(n.length!==e.length)return!1;for(let i=0,t=n.length;i<t;i++)if(n[i]!==e[i])return!1;return!0}function er(n,e){for(let i=0,t=e.length;i<t;i++)n[i]=e[i]}function By(n,e){let i=W2[e];i===void 0&&(i=new Int32Array(e),W2[e]=i);for(let t=0;t!==e;++t)i[t]=n.allocateTextureUnit();return i}function sQ(n,e){let i=this.cache;i[0]!==e&&(n.uniform1f(this.addr,e),i[0]=e)}function aQ(n,e){let i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Jn(i,e))return;n.uniform2fv(this.addr,e),er(i,e)}}function cQ(n,e){let i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else if(e.r!==void 0)(i[0]!==e.r||i[1]!==e.g||i[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b);else{if(Jn(i,e))return;n.uniform3fv(this.addr,e),er(i,e)}}function lQ(n,e){let i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Jn(i,e))return;n.uniform4fv(this.addr,e),er(i,e)}}function dQ(n,e){let i=this.cache,t=e.elements;if(t===void 0){if(Jn(i,e))return;n.uniformMatrix2fv(this.addr,!1,e),er(i,e)}else{if(Jn(i,t))return;X2.set(t),n.uniformMatrix2fv(this.addr,!1,X2),er(i,t)}}function uQ(n,e){let i=this.cache,t=e.elements;if(t===void 0){if(Jn(i,e))return;n.uniformMatrix3fv(this.addr,!1,e),er(i,e)}else{if(Jn(i,t))return;q2.set(t),n.uniformMatrix3fv(this.addr,!1,q2),er(i,t)}}function hQ(n,e){let i=this.cache,t=e.elements;if(t===void 0){if(Jn(i,e))return;n.uniformMatrix4fv(this.addr,!1,e),er(i,e)}else{if(Jn(i,t))return;$2.set(t),n.uniformMatrix4fv(this.addr,!1,$2),er(i,t)}}function fQ(n,e){let i=this.cache;i[0]!==e&&(n.uniform1i(this.addr,e),i[0]=e)}function mQ(n,e){let i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Jn(i,e))return;n.uniform2iv(this.addr,e),er(i,e)}}function pQ(n,e){let i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(Jn(i,e))return;n.uniform3iv(this.addr,e),er(i,e)}}function gQ(n,e){let i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Jn(i,e))return;n.uniform4iv(this.addr,e),er(i,e)}}function bQ(n,e){let i=this.cache;i[0]!==e&&(n.uniform1ui(this.addr,e),i[0]=e)}function _Q(n,e){let i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Jn(i,e))return;n.uniform2uiv(this.addr,e),er(i,e)}}function vQ(n,e){let i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(Jn(i,e))return;n.uniform3uiv(this.addr,e),er(i,e)}}function yQ(n,e){let i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Jn(i,e))return;n.uniform4uiv(this.addr,e),er(i,e)}}function xQ(n,e,i){let t=this.cache,r=i.allocateTextureUnit();t[0]!==r&&(n.uniform1i(this.addr,r),t[0]=r);let o=this.type===n.SAMPLER_2D_SHADOW?i3:t3;i.setTexture2D(e||o,r)}function wQ(n,e,i){let t=this.cache,r=i.allocateTextureUnit();t[0]!==r&&(n.uniform1i(this.addr,r),t[0]=r),i.setTexture3D(e||r3,r)}function MQ(n,e,i){let t=this.cache,r=i.allocateTextureUnit();t[0]!==r&&(n.uniform1i(this.addr,r),t[0]=r),i.setTextureCube(e||o3,r)}function SQ(n,e,i){let t=this.cache,r=i.allocateTextureUnit();t[0]!==r&&(n.uniform1i(this.addr,r),t[0]=r),i.setTexture2DArray(e||n3,r)}function RQ(n){switch(n){case 5126:return sQ;case 35664:return aQ;case 35665:return cQ;case 35666:return lQ;case 35674:return dQ;case 35675:return uQ;case 35676:return hQ;case 5124:case 35670:return fQ;case 35667:case 35671:return mQ;case 35668:case 35672:return pQ;case 35669:case 35673:return gQ;case 5125:return bQ;case 36294:return _Q;case 36295:return vQ;case 36296:return yQ;case 35678:case 36198:case 36298:case 36306:case 35682:return xQ;case 35679:case 36299:case 36307:return wQ;case 35680:case 36300:case 36308:case 36293:return MQ;case 36289:case 36303:case 36311:case 36292:return SQ}}function TQ(n,e){n.uniform1fv(this.addr,e)}function CQ(n,e){let i=uf(e,this.size,2);n.uniform2fv(this.addr,i)}function EQ(n,e){let i=uf(e,this.size,3);n.uniform3fv(this.addr,i)}function DQ(n,e){let i=uf(e,this.size,4);n.uniform4fv(this.addr,i)}function AQ(n,e){let i=uf(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,i)}function IQ(n,e){let i=uf(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,i)}function PQ(n,e){let i=uf(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,i)}function kQ(n,e){n.uniform1iv(this.addr,e)}function FQ(n,e){n.uniform2iv(this.addr,e)}function jQ(n,e){n.uniform3iv(this.addr,e)}function OQ(n,e){n.uniform4iv(this.addr,e)}function NQ(n,e){n.uniform1uiv(this.addr,e)}function LQ(n,e){n.uniform2uiv(this.addr,e)}function BQ(n,e){n.uniform3uiv(this.addr,e)}function UQ(n,e){n.uniform4uiv(this.addr,e)}function VQ(n,e,i){let t=this.cache,r=e.length,o=By(i,r);Jn(t,o)||(n.uniform1iv(this.addr,o),er(t,o));for(let s=0;s!==r;++s)i.setTexture2D(e[s]||t3,o[s])}function zQ(n,e,i){let t=this.cache,r=e.length,o=By(i,r);Jn(t,o)||(n.uniform1iv(this.addr,o),er(t,o));for(let s=0;s!==r;++s)i.setTexture3D(e[s]||r3,o[s])}function HQ(n,e,i){let t=this.cache,r=e.length,o=By(i,r);Jn(t,o)||(n.uniform1iv(this.addr,o),er(t,o));for(let s=0;s!==r;++s)i.setTextureCube(e[s]||o3,o[s])}function GQ(n,e,i){let t=this.cache,r=e.length,o=By(i,r);Jn(t,o)||(n.uniform1iv(this.addr,o),er(t,o));for(let s=0;s!==r;++s)i.setTexture2DArray(e[s]||n3,o[s])}function WQ(n){switch(n){case 5126:return TQ;case 35664:return CQ;case 35665:return EQ;case 35666:return DQ;case 35674:return AQ;case 35675:return IQ;case 35676:return PQ;case 5124:case 35670:return kQ;case 35667:case 35671:return FQ;case 35668:case 35672:return jQ;case 35669:case 35673:return OQ;case 5125:return NQ;case 36294:return LQ;case 36295:return BQ;case 36296:return UQ;case 35678:case 36198:case 36298:case 36306:case 35682:return VQ;case 35679:case 36299:case 36307:return zQ;case 35680:case 36300:case 36308:case 36293:return HQ;case 36289:case 36303:case 36311:case 36292:return GQ}}var YC=class{constructor(e,i,t){this.id=e,this.addr=t,this.cache=[],this.type=i.type,this.setValue=RQ(i.type)}},ZC=class{constructor(e,i,t){this.id=e,this.addr=t,this.cache=[],this.type=i.type,this.size=i.size,this.setValue=WQ(i.type)}},QC=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,i,t){let r=this.seq;for(let o=0,s=r.length;o!==s;++o){let a=r[o];a.setValue(e,i[a.id],t)}}},qT=/(\w+)(\])?(\[|\.)?/g;function Y2(n,e){n.seq.push(e),n.map[e.id]=e}function $Q(n,e,i){let t=n.name,r=t.length;for(qT.lastIndex=0;;){let o=qT.exec(t),s=qT.lastIndex,a=o[1],c=o[2]==="]",l=o[3];if(c&&(a=a|0),l===void 0||l==="["&&s+2===r){Y2(i,l===void 0?new YC(a,n,e):new ZC(a,n,e));break}else{let u=i.map[a];u===void 0&&(u=new QC(a),Y2(i,u)),i=u}}}var Hh=class{constructor(e,i){this.seq=[],this.map={};let t=e.getProgramParameter(i,e.ACTIVE_UNIFORMS);for(let r=0;r<t;++r){let o=e.getActiveUniform(i,r),s=e.getUniformLocation(i,o.name);$Q(o,s,this)}}setValue(e,i,t,r){let o=this.map[i];o!==void 0&&o.setValue(e,t,r)}setOptional(e,i,t){let r=i[t];r!==void 0&&this.setValue(e,t,r)}static upload(e,i,t,r){for(let o=0,s=i.length;o!==s;++o){let a=i[o],c=t[a.id];c.needsUpdate!==!1&&a.setValue(e,c.value,r)}}static seqWithValue(e,i){let t=[];for(let r=0,o=e.length;r!==o;++r){let s=e[r];s.id in i&&t.push(s)}return t}};function Z2(n,e,i){let t=n.createShader(e);return n.shaderSource(t,i),n.compileShader(t),t}var qQ=37297,XQ=0;function YQ(n,e){let i=n.split(`
`),t=[],r=Math.max(e-6,0),o=Math.min(e+6,i.length);for(let s=r;s<o;s++){let a=s+1;t.push(`${a===e?">":" "} ${a}: ${i[s]}`)}return t.join(`
`)}function ZQ(n){let e=Ri.getPrimaries(Ri.workingColorSpace),i=Ri.getPrimaries(n),t;switch(e===i?t="":e===Tp&&i===Rp?t="LinearDisplayP3ToLinearSRGB":e===Rp&&i===Tp&&(t="LinearSRGBToLinearDisplayP3"),n){case Nn:case ng:return[t,"LinearTransferOETF"];case Fn:case Ly:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[t,"LinearTransferOETF"]}}function Q2(n,e,i){let t=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(t&&r==="")return"";let o=/ERROR: 0:(\d+)/.exec(r);if(o){let s=parseInt(o[1]);return i.toUpperCase()+`

`+r+`

`+YQ(n.getShaderSource(e),s)}else return r}function QQ(n,e){let i=ZQ(e);return`vec4 ${n}( vec4 value ) { return ${i[0]}( ${i[1]}( value ) ); }`}function KQ(n,e){let i;switch(e){case wL:i="Linear";break;case ML:i="Reinhard";break;case SL:i="OptimizedCineon";break;case RL:i="ACESFilmic";break;case CL:i="AgX";break;case EL:i="Neutral";break;case TL:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),i="Linear"}return"vec3 "+n+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function JQ(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(pp).join(`
`)}function eK(n){let e=[];for(let i in n){let t=n[i];t!==!1&&e.push("#define "+i+" "+t)}return e.join(`
`)}function tK(n,e){let i={},t=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<t;r++){let o=n.getActiveAttrib(e,r),s=o.name,a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),i[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return i}function pp(n){return n!==""}function K2(n,e){let i=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function J2(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var iK=/^[ \t]*#include +<([\w\d./]+)>/gm;function KC(n){return n.replace(iK,rK)}var nK=new Map;function rK(n,e){let i=ai[e];if(i===void 0){let t=nK.get(e);if(t!==void 0)i=ai[t],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,t);else throw new Error("Can not resolve #include <"+e+">")}return KC(i)}var oK=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function eN(n){return n.replace(oK,sK)}function sK(n,e,i,t){let r="";for(let o=parseInt(e);o<parseInt(i);o++)r+=t.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function tN(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function aK(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===YE?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===KN?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Js&&(e="SHADOWMAP_TYPE_VSM"),e}function cK(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case nc:case ol:e="ENVMAP_TYPE_CUBE";break;case lf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function lK(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ol:e="ENVMAP_MODE_REFRACTION";break}return e}function dK(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case eg:e="ENVMAP_BLENDING_MULTIPLY";break;case yL:e="ENVMAP_BLENDING_MIX";break;case xL:e="ENVMAP_BLENDING_ADD";break}return e}function uK(n){let e=n.envMapCubeUVHeight;if(e===null)return null;let i=Math.log2(e)-2,t=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,i),7*16)),texelHeight:t,maxMip:i}}function hK(n,e,i,t){let r=n.getContext(),o=i.defines,s=i.vertexShader,a=i.fragmentShader,c=aK(i),l=cK(i),d=lK(i),u=dK(i),h=uK(i),f=JQ(i),p=eK(o),b=r.createProgram(),g,m,v=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(g=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,p].filter(pp).join(`
`),g.length>0&&(g+=`
`),m=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,p].filter(pp).join(`
`),m.length>0&&(m+=`
`)):(g=[tN(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,p,i.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",i.batching?"#define USE_BATCHING":"",i.batchingColor?"#define USE_BATCHING_COLOR":"",i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.instancingMorph?"#define USE_INSTANCING_MORPH":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+d:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+i.anisotropyMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.morphColors?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+c:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(pp).join(`
`),m=[tN(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,p,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+l:"",i.envMap?"#define "+d:"",i.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.dispersion?"#define USE_DISPERSION":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor||i.batchingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+c:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==tc?"#define TONE_MAPPING":"",i.toneMapping!==tc?ai.tonemapping_pars_fragment:"",i.toneMapping!==tc?KQ("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",ai.colorspace_pars_fragment,QQ("linearToOutputTexel",i.outputColorSpace),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(pp).join(`
`)),s=KC(s),s=K2(s,i),s=J2(s,i),a=KC(a),a=K2(a,i),a=J2(a,i),s=eN(s),a=eN(a),i.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,g=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,m=["#define varying in",i.glslVersion===UC?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===UC?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);let _=v+g+s,y=v+m+a,C=Z2(r,r.VERTEX_SHADER,_),R=Z2(r,r.FRAGMENT_SHADER,y);r.attachShader(b,C),r.attachShader(b,R),i.index0AttributeName!==void 0?r.bindAttribLocation(b,0,i.index0AttributeName):i.morphTargets===!0&&r.bindAttribLocation(b,0,"position"),r.linkProgram(b);function M(I){if(n.debug.checkShaderErrors){let V=r.getProgramInfoLog(b).trim(),W=r.getShaderInfoLog(C).trim(),ee=r.getShaderInfoLog(R).trim(),ne=!0,B=!0;if(r.getProgramParameter(b,r.LINK_STATUS)===!1)if(ne=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,b,C,R);else{let G=Q2(r,C,"vertex"),U=Q2(r,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(b,r.VALIDATE_STATUS)+`

Material Name: `+I.name+`
Material Type: `+I.type+`

Program Info Log: `+V+`
`+G+`
`+U)}else V!==""?console.warn("THREE.WebGLProgram: Program Info Log:",V):(W===""||ee==="")&&(B=!1);B&&(I.diagnostics={runnable:ne,programLog:V,vertexShader:{log:W,prefix:g},fragmentShader:{log:ee,prefix:m}})}r.deleteShader(C),r.deleteShader(R),A=new Hh(r,b),T=tK(r,b)}let A;this.getUniforms=function(){return A===void 0&&M(this),A};let T;this.getAttributes=function(){return T===void 0&&M(this),T};let x=i.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return x===!1&&(x=r.getProgramParameter(b,qQ)),x},this.destroy=function(){t.releaseStatesOfProgram(this),r.deleteProgram(b),this.program=void 0},this.type=i.shaderType,this.name=i.shaderName,this.id=XQ++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=C,this.fragmentShader=R,this}var fK=0,JC=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let i=e.vertexShader,t=e.fragmentShader,r=this._getShaderStage(i),o=this._getShaderStage(t),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){let i=this.materialCache.get(e);for(let t of i)t.usedTimes--,t.usedTimes===0&&this.shaderCache.delete(t.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let i=this.materialCache,t=i.get(e);return t===void 0&&(t=new Set,i.set(e,t)),t}_getShaderStage(e){let i=this.shaderCache,t=i.get(e);return t===void 0&&(t=new eE(e),i.set(e,t)),t}},eE=class{constructor(e){this.id=fK++,this.code=e,this.usedTimes=0}};function mK(n,e,i,t,r,o,s){let a=new $h,c=new JC,l=new Set,d=[],u=r.logarithmicDepthBuffer,h=r.vertexTextures,f=r.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(T){return l.add(T),T===0?"uv":`uv${T}`}function g(T,x,I,V,W){let ee=V.fog,ne=W.geometry,B=T.isMeshStandardMaterial?V.environment:null,G=(T.isMeshStandardMaterial?i:e).get(T.envMap||B),U=G&&G.mapping===lf?G.image.height:null,se=p[T.type];T.precision!==null&&(f=r.getMaxPrecision(T.precision),f!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",f,"instead."));let Te=ne.morphAttributes.position||ne.morphAttributes.normal||ne.morphAttributes.color,Ie=Te!==void 0?Te.length:0,Ze=0;ne.morphAttributes.position!==void 0&&(Ze=1),ne.morphAttributes.normal!==void 0&&(Ze=2),ne.morphAttributes.color!==void 0&&(Ze=3);let yt,Z,Ce,We;if(se){let Ii=hs[se];yt=Ii.vertexShader,Z=Ii.fragmentShader}else yt=T.vertexShader,Z=T.fragmentShader,c.update(T),Ce=c.getVertexShaderID(T),We=c.getFragmentShaderID(T);let N=n.getRenderTarget(),xe=W.isInstancedMesh===!0,Ne=W.isBatchedMesh===!0,Ue=!!T.map,O=!!T.matcap,ye=!!G,Re=!!T.aoMap,Pe=!!T.lightMap,Ae=!!T.bumpMap,Fe=!!T.normalMap,Ke=!!T.displacementMap,Xe=!!T.emissiveMap,Ct=!!T.metalnessMap,k=!!T.roughnessMap,E=T.anisotropy>0,re=T.clearcoat>0,Se=T.dispersion>0,Me=T.iridescence>0,De=T.sheen>0,mt=T.transmission>0,Ge=E&&!!T.anisotropyMap,ze=re&&!!T.clearcoatMap,Et=re&&!!T.clearcoatNormalMap,Oe=re&&!!T.clearcoatRoughnessMap,rt=Me&&!!T.iridescenceMap,li=Me&&!!T.iridescenceThicknessMap,Pt=De&&!!T.sheenColorMap,Je=De&&!!T.sheenRoughnessMap,zt=!!T.specularMap,Ht=!!T.specularColorMap,Ui=!!T.specularIntensityMap,w=mt&&!!T.transmissionMap,ce=mt&&!!T.thicknessMap,Y=!!T.gradientMap,ue=!!T.alphaMap,ke=T.alphaTest>0,Mt=!!T.alphaHash,Gt=!!T.extensions,yn=tc;T.toneMapped&&(N===null||N.isXRRenderTarget===!0)&&(yn=n.toneMapping);let Un={shaderID:se,shaderType:T.type,shaderName:T.name,vertexShader:yt,fragmentShader:Z,defines:T.defines,customVertexShaderID:Ce,customFragmentShaderID:We,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:f,batching:Ne,batchingColor:Ne&&W._colorsTexture!==null,instancing:xe,instancingColor:xe&&W.instanceColor!==null,instancingMorph:xe&&W.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:N===null?n.outputColorSpace:N.isXRRenderTarget===!0?N.texture.colorSpace:Nn,alphaToCoverage:!!T.alphaToCoverage,map:Ue,matcap:O,envMap:ye,envMapMode:ye&&G.mapping,envMapCubeUVHeight:U,aoMap:Re,lightMap:Pe,bumpMap:Ae,normalMap:Fe,displacementMap:h&&Ke,emissiveMap:Xe,normalMapObjectSpace:Fe&&T.normalMapType===zL,normalMapTangentSpace:Fe&&T.normalMapType===hl,metalnessMap:Ct,roughnessMap:k,anisotropy:E,anisotropyMap:Ge,clearcoat:re,clearcoatMap:ze,clearcoatNormalMap:Et,clearcoatRoughnessMap:Oe,dispersion:Se,iridescence:Me,iridescenceMap:rt,iridescenceThicknessMap:li,sheen:De,sheenColorMap:Pt,sheenRoughnessMap:Je,specularMap:zt,specularColorMap:Ht,specularIntensityMap:Ui,transmission:mt,transmissionMap:w,thicknessMap:ce,gradientMap:Y,opaque:T.transparent===!1&&T.blending===fs&&T.alphaToCoverage===!1,alphaMap:ue,alphaTest:ke,alphaHash:Mt,combine:T.combine,mapUv:Ue&&b(T.map.channel),aoMapUv:Re&&b(T.aoMap.channel),lightMapUv:Pe&&b(T.lightMap.channel),bumpMapUv:Ae&&b(T.bumpMap.channel),normalMapUv:Fe&&b(T.normalMap.channel),displacementMapUv:Ke&&b(T.displacementMap.channel),emissiveMapUv:Xe&&b(T.emissiveMap.channel),metalnessMapUv:Ct&&b(T.metalnessMap.channel),roughnessMapUv:k&&b(T.roughnessMap.channel),anisotropyMapUv:Ge&&b(T.anisotropyMap.channel),clearcoatMapUv:ze&&b(T.clearcoatMap.channel),clearcoatNormalMapUv:Et&&b(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Oe&&b(T.clearcoatRoughnessMap.channel),iridescenceMapUv:rt&&b(T.iridescenceMap.channel),iridescenceThicknessMapUv:li&&b(T.iridescenceThicknessMap.channel),sheenColorMapUv:Pt&&b(T.sheenColorMap.channel),sheenRoughnessMapUv:Je&&b(T.sheenRoughnessMap.channel),specularMapUv:zt&&b(T.specularMap.channel),specularColorMapUv:Ht&&b(T.specularColorMap.channel),specularIntensityMapUv:Ui&&b(T.specularIntensityMap.channel),transmissionMapUv:w&&b(T.transmissionMap.channel),thicknessMapUv:ce&&b(T.thicknessMap.channel),alphaMapUv:ue&&b(T.alphaMap.channel),vertexTangents:!!ne.attributes.tangent&&(Fe||E),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!ne.attributes.color&&ne.attributes.color.itemSize===4,pointsUvs:W.isPoints===!0&&!!ne.attributes.uv&&(Ue||ue),fog:!!ee,useFog:T.fog===!0,fogExp2:!!ee&&ee.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:u,skinning:W.isSkinnedMesh===!0,morphTargets:ne.morphAttributes.position!==void 0,morphNormals:ne.morphAttributes.normal!==void 0,morphColors:ne.morphAttributes.color!==void 0,morphTargetsCount:Ie,morphTextureStride:Ze,numDirLights:x.directional.length,numPointLights:x.point.length,numSpotLights:x.spot.length,numSpotLightMaps:x.spotLightMap.length,numRectAreaLights:x.rectArea.length,numHemiLights:x.hemi.length,numDirLightShadows:x.directionalShadowMap.length,numPointLightShadows:x.pointShadowMap.length,numSpotLightShadows:x.spotShadowMap.length,numSpotLightShadowsWithMaps:x.numSpotLightShadowsWithMaps,numLightProbes:x.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&I.length>0,shadowMapType:n.shadowMap.type,toneMapping:yn,decodeVideoTexture:Ue&&T.map.isVideoTexture===!0&&Ri.getTransfer(T.map.colorSpace)===Ji,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===Kn,flipSided:T.side===Wr,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionClipCullDistance:Gt&&T.extensions.clipCullDistance===!0&&t.has("WEBGL_clip_cull_distance"),extensionMultiDraw:Gt&&T.extensions.multiDraw===!0&&t.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:t.has("KHR_parallel_shader_compile"),customProgramCacheKey:T.customProgramCacheKey()};return Un.vertexUv1s=l.has(1),Un.vertexUv2s=l.has(2),Un.vertexUv3s=l.has(3),l.clear(),Un}function m(T){let x=[];if(T.shaderID?x.push(T.shaderID):(x.push(T.customVertexShaderID),x.push(T.customFragmentShaderID)),T.defines!==void 0)for(let I in T.defines)x.push(I),x.push(T.defines[I]);return T.isRawShaderMaterial===!1&&(v(x,T),_(x,T),x.push(n.outputColorSpace)),x.push(T.customProgramCacheKey),x.join()}function v(T,x){T.push(x.precision),T.push(x.outputColorSpace),T.push(x.envMapMode),T.push(x.envMapCubeUVHeight),T.push(x.mapUv),T.push(x.alphaMapUv),T.push(x.lightMapUv),T.push(x.aoMapUv),T.push(x.bumpMapUv),T.push(x.normalMapUv),T.push(x.displacementMapUv),T.push(x.emissiveMapUv),T.push(x.metalnessMapUv),T.push(x.roughnessMapUv),T.push(x.anisotropyMapUv),T.push(x.clearcoatMapUv),T.push(x.clearcoatNormalMapUv),T.push(x.clearcoatRoughnessMapUv),T.push(x.iridescenceMapUv),T.push(x.iridescenceThicknessMapUv),T.push(x.sheenColorMapUv),T.push(x.sheenRoughnessMapUv),T.push(x.specularMapUv),T.push(x.specularColorMapUv),T.push(x.specularIntensityMapUv),T.push(x.transmissionMapUv),T.push(x.thicknessMapUv),T.push(x.combine),T.push(x.fogExp2),T.push(x.sizeAttenuation),T.push(x.morphTargetsCount),T.push(x.morphAttributeCount),T.push(x.numDirLights),T.push(x.numPointLights),T.push(x.numSpotLights),T.push(x.numSpotLightMaps),T.push(x.numHemiLights),T.push(x.numRectAreaLights),T.push(x.numDirLightShadows),T.push(x.numPointLightShadows),T.push(x.numSpotLightShadows),T.push(x.numSpotLightShadowsWithMaps),T.push(x.numLightProbes),T.push(x.shadowMapType),T.push(x.toneMapping),T.push(x.numClippingPlanes),T.push(x.numClipIntersection),T.push(x.depthPacking)}function _(T,x){a.disableAll(),x.supportsVertexTextures&&a.enable(0),x.instancing&&a.enable(1),x.instancingColor&&a.enable(2),x.instancingMorph&&a.enable(3),x.matcap&&a.enable(4),x.envMap&&a.enable(5),x.normalMapObjectSpace&&a.enable(6),x.normalMapTangentSpace&&a.enable(7),x.clearcoat&&a.enable(8),x.iridescence&&a.enable(9),x.alphaTest&&a.enable(10),x.vertexColors&&a.enable(11),x.vertexAlphas&&a.enable(12),x.vertexUv1s&&a.enable(13),x.vertexUv2s&&a.enable(14),x.vertexUv3s&&a.enable(15),x.vertexTangents&&a.enable(16),x.anisotropy&&a.enable(17),x.alphaHash&&a.enable(18),x.batching&&a.enable(19),x.dispersion&&a.enable(20),x.batchingColor&&a.enable(21),T.push(a.mask),a.disableAll(),x.fog&&a.enable(0),x.useFog&&a.enable(1),x.flatShading&&a.enable(2),x.logarithmicDepthBuffer&&a.enable(3),x.skinning&&a.enable(4),x.morphTargets&&a.enable(5),x.morphNormals&&a.enable(6),x.morphColors&&a.enable(7),x.premultipliedAlpha&&a.enable(8),x.shadowMapEnabled&&a.enable(9),x.doubleSided&&a.enable(10),x.flipSided&&a.enable(11),x.useDepthPacking&&a.enable(12),x.dithering&&a.enable(13),x.transmission&&a.enable(14),x.sheen&&a.enable(15),x.opaque&&a.enable(16),x.pointsUvs&&a.enable(17),x.decodeVideoTexture&&a.enable(18),x.alphaToCoverage&&a.enable(19),T.push(a.mask)}function y(T){let x=p[T.type],I;if(x){let V=hs[x];I=Li.clone(V.uniforms)}else I=T.uniforms;return I}function C(T,x){let I;for(let V=0,W=d.length;V<W;V++){let ee=d[V];if(ee.cacheKey===x){I=ee,++I.usedTimes;break}}return I===void 0&&(I=new hK(n,x,T,o),d.push(I)),I}function R(T){if(--T.usedTimes===0){let x=d.indexOf(T);d[x]=d[d.length-1],d.pop(),T.destroy()}}function M(T){c.remove(T)}function A(){c.dispose()}return{getParameters:g,getProgramCacheKey:m,getUniforms:y,acquireProgram:C,releaseProgram:R,releaseShaderCache:M,programs:d,dispose:A}}function pK(){let n=new WeakMap;function e(o){let s=n.get(o);return s===void 0&&(s={},n.set(o,s)),s}function i(o){n.delete(o)}function t(o,s,a){n.get(o)[s]=a}function r(){n=new WeakMap}return{get:e,remove:i,update:t,dispose:r}}function gK(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function iN(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function nN(){let n=[],e=0,i=[],t=[],r=[];function o(){e=0,i.length=0,t.length=0,r.length=0}function s(u,h,f,p,b,g){let m=n[e];return m===void 0?(m={id:u.id,object:u,geometry:h,material:f,groupOrder:p,renderOrder:u.renderOrder,z:b,group:g},n[e]=m):(m.id=u.id,m.object=u,m.geometry=h,m.material=f,m.groupOrder=p,m.renderOrder=u.renderOrder,m.z=b,m.group=g),e++,m}function a(u,h,f,p,b,g){let m=s(u,h,f,p,b,g);f.transmission>0?t.push(m):f.transparent===!0?r.push(m):i.push(m)}function c(u,h,f,p,b,g){let m=s(u,h,f,p,b,g);f.transmission>0?t.unshift(m):f.transparent===!0?r.unshift(m):i.unshift(m)}function l(u,h){i.length>1&&i.sort(u||gK),t.length>1&&t.sort(h||iN),r.length>1&&r.sort(h||iN)}function d(){for(let u=e,h=n.length;u<h;u++){let f=n[u];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:i,transmissive:t,transparent:r,init:o,push:a,unshift:c,finish:d,sort:l}}function bK(){let n=new WeakMap;function e(t,r){let o=n.get(t),s;return o===void 0?(s=new nN,n.set(t,[s])):r>=o.length?(s=new nN,o.push(s)):s=o[r],s}function i(){n=new WeakMap}return{get:e,dispose:i}}function _K(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let i;switch(e.type){case"DirectionalLight":i={direction:new S,color:new pe};break;case"SpotLight":i={position:new S,direction:new S,color:new pe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new S,color:new pe,distance:0,decay:0};break;case"HemisphereLight":i={direction:new S,skyColor:new pe,groundColor:new pe};break;case"RectAreaLight":i={color:new pe,position:new S,halfWidth:new S,halfHeight:new S};break}return n[e.id]=i,i}}}function vK(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let i;switch(e.type){case"DirectionalLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new z};break;case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new z};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new z,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=i,i}}}var yK=0;function xK(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function wK(n){let e=new _K,i=vK(),t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)t.probe.push(new S);let r=new S,o=new Be,s=new Be;function a(l){let d=0,u=0,h=0;for(let T=0;T<9;T++)t.probe[T].set(0,0,0);let f=0,p=0,b=0,g=0,m=0,v=0,_=0,y=0,C=0,R=0,M=0;l.sort(xK);for(let T=0,x=l.length;T<x;T++){let I=l[T],V=I.color,W=I.intensity,ee=I.distance,ne=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)d+=V.r*W,u+=V.g*W,h+=V.b*W;else if(I.isLightProbe){for(let B=0;B<9;B++)t.probe[B].addScaledVector(I.sh.coefficients[B],W);M++}else if(I.isDirectionalLight){let B=e.get(I);if(B.color.copy(I.color).multiplyScalar(I.intensity),I.castShadow){let G=I.shadow,U=i.get(I);U.shadowBias=G.bias,U.shadowNormalBias=G.normalBias,U.shadowRadius=G.radius,U.shadowMapSize=G.mapSize,t.directionalShadow[f]=U,t.directionalShadowMap[f]=ne,t.directionalShadowMatrix[f]=I.shadow.matrix,v++}t.directional[f]=B,f++}else if(I.isSpotLight){let B=e.get(I);B.position.setFromMatrixPosition(I.matrixWorld),B.color.copy(V).multiplyScalar(W),B.distance=ee,B.coneCos=Math.cos(I.angle),B.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),B.decay=I.decay,t.spot[b]=B;let G=I.shadow;if(I.map&&(t.spotLightMap[C]=I.map,C++,G.updateMatrices(I),I.castShadow&&R++),t.spotLightMatrix[b]=G.matrix,I.castShadow){let U=i.get(I);U.shadowBias=G.bias,U.shadowNormalBias=G.normalBias,U.shadowRadius=G.radius,U.shadowMapSize=G.mapSize,t.spotShadow[b]=U,t.spotShadowMap[b]=ne,y++}b++}else if(I.isRectAreaLight){let B=e.get(I);B.color.copy(V).multiplyScalar(W),B.halfWidth.set(I.width*.5,0,0),B.halfHeight.set(0,I.height*.5,0),t.rectArea[g]=B,g++}else if(I.isPointLight){let B=e.get(I);if(B.color.copy(I.color).multiplyScalar(I.intensity),B.distance=I.distance,B.decay=I.decay,I.castShadow){let G=I.shadow,U=i.get(I);U.shadowBias=G.bias,U.shadowNormalBias=G.normalBias,U.shadowRadius=G.radius,U.shadowMapSize=G.mapSize,U.shadowCameraNear=G.camera.near,U.shadowCameraFar=G.camera.far,t.pointShadow[p]=U,t.pointShadowMap[p]=ne,t.pointShadowMatrix[p]=I.shadow.matrix,_++}t.point[p]=B,p++}else if(I.isHemisphereLight){let B=e.get(I);B.skyColor.copy(I.color).multiplyScalar(W),B.groundColor.copy(I.groundColor).multiplyScalar(W),t.hemi[m]=B,m++}}g>0&&(n.has("OES_texture_float_linear")===!0?(t.rectAreaLTC1=Ye.LTC_FLOAT_1,t.rectAreaLTC2=Ye.LTC_FLOAT_2):(t.rectAreaLTC1=Ye.LTC_HALF_1,t.rectAreaLTC2=Ye.LTC_HALF_2)),t.ambient[0]=d,t.ambient[1]=u,t.ambient[2]=h;let A=t.hash;(A.directionalLength!==f||A.pointLength!==p||A.spotLength!==b||A.rectAreaLength!==g||A.hemiLength!==m||A.numDirectionalShadows!==v||A.numPointShadows!==_||A.numSpotShadows!==y||A.numSpotMaps!==C||A.numLightProbes!==M)&&(t.directional.length=f,t.spot.length=b,t.rectArea.length=g,t.point.length=p,t.hemi.length=m,t.directionalShadow.length=v,t.directionalShadowMap.length=v,t.pointShadow.length=_,t.pointShadowMap.length=_,t.spotShadow.length=y,t.spotShadowMap.length=y,t.directionalShadowMatrix.length=v,t.pointShadowMatrix.length=_,t.spotLightMatrix.length=y+C-R,t.spotLightMap.length=C,t.numSpotLightShadowsWithMaps=R,t.numLightProbes=M,A.directionalLength=f,A.pointLength=p,A.spotLength=b,A.rectAreaLength=g,A.hemiLength=m,A.numDirectionalShadows=v,A.numPointShadows=_,A.numSpotShadows=y,A.numSpotMaps=C,A.numLightProbes=M,t.version=yK++)}function c(l,d){let u=0,h=0,f=0,p=0,b=0,g=d.matrixWorldInverse;for(let m=0,v=l.length;m<v;m++){let _=l[m];if(_.isDirectionalLight){let y=t.directional[u];y.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),y.direction.sub(r),y.direction.transformDirection(g),u++}else if(_.isSpotLight){let y=t.spot[f];y.position.setFromMatrixPosition(_.matrixWorld),y.position.applyMatrix4(g),y.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),y.direction.sub(r),y.direction.transformDirection(g),f++}else if(_.isRectAreaLight){let y=t.rectArea[p];y.position.setFromMatrixPosition(_.matrixWorld),y.position.applyMatrix4(g),s.identity(),o.copy(_.matrixWorld),o.premultiply(g),s.extractRotation(o),y.halfWidth.set(_.width*.5,0,0),y.halfHeight.set(0,_.height*.5,0),y.halfWidth.applyMatrix4(s),y.halfHeight.applyMatrix4(s),p++}else if(_.isPointLight){let y=t.point[h];y.position.setFromMatrixPosition(_.matrixWorld),y.position.applyMatrix4(g),h++}else if(_.isHemisphereLight){let y=t.hemi[b];y.direction.setFromMatrixPosition(_.matrixWorld),y.direction.transformDirection(g),b++}}}return{setup:a,setupView:c,state:t}}function rN(n){let e=new wK(n),i=[],t=[];function r(d){l.camera=d,i.length=0,t.length=0}function o(d){i.push(d)}function s(d){t.push(d)}function a(){e.setup(i)}function c(d){e.setupView(i,d)}let l={lightsArray:i,shadowsArray:t,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:l,setupLights:a,setupLightsView:c,pushLight:o,pushShadow:s}}function MK(n){let e=new WeakMap;function i(r,o=0){let s=e.get(r),a;return s===void 0?(a=new rN(n),e.set(r,[a])):o>=s.length?(a=new rN(n),s.push(a)):a=s[o],a}function t(){e=new WeakMap}return{get:i,dispose:t}}var Bd=class extends dn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=VL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Fp=class extends dn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},SK=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,RK=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function TK(n,e,i){let t=new Ld,r=new z,o=new z,s=new xi,a=new Bd({depthPacking:Ny}),c=new Fp,l={},d=i.maxTextureSize,u={[ms]:Wr,[Wr]:ms,[Kn]:Kn},h=new Ft({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new z},radius:{value:4}},vertexShader:SK,fragmentShader:RK}),f=h.clone();f.defines.HORIZONTAL_PASS=1;let p=new bt;p.setAttribute("position",new hi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let b=new Ve(p,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=YE;let m=this.type;this.render=function(R,M,A){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||R.length===0)return;let T=n.getRenderTarget(),x=n.getActiveCubeFace(),I=n.getActiveMipmapLevel(),V=n.state;V.setBlending(ti),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);let W=m!==Js&&this.type===Js,ee=m===Js&&this.type!==Js;for(let ne=0,B=R.length;ne<B;ne++){let G=R[ne],U=G.shadow;if(U===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(U.autoUpdate===!1&&U.needsUpdate===!1)continue;r.copy(U.mapSize);let se=U.getFrameExtents();if(r.multiply(se),o.copy(U.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(o.x=Math.floor(d/se.x),r.x=o.x*se.x,U.mapSize.x=o.x),r.y>d&&(o.y=Math.floor(d/se.y),r.y=o.y*se.y,U.mapSize.y=o.y)),U.map===null||W===!0||ee===!0){let Ie=this.type!==Js?{minFilter:ui,magFilter:ui}:{};U.map!==null&&U.map.dispose(),U.map=new ci(r.x,r.y,Ie),U.map.texture.name=G.name+".shadowMap",U.camera.updateProjectionMatrix()}n.setRenderTarget(U.map),n.clear();let Te=U.getViewportCount();for(let Ie=0;Ie<Te;Ie++){let Ze=U.getViewport(Ie);s.set(o.x*Ze.x,o.y*Ze.y,o.x*Ze.z,o.y*Ze.w),V.viewport(s),U.updateMatrices(G,Ie),t=U.getFrustum(),y(M,A,U.camera,G,this.type)}U.isPointLightShadow!==!0&&this.type===Js&&v(U,A),U.needsUpdate=!1}m=this.type,g.needsUpdate=!1,n.setRenderTarget(T,x,I)};function v(R,M){let A=e.update(b);h.defines.VSM_SAMPLES!==R.blurSamples&&(h.defines.VSM_SAMPLES=R.blurSamples,f.defines.VSM_SAMPLES=R.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),R.mapPass===null&&(R.mapPass=new ci(r.x,r.y)),h.uniforms.shadow_pass.value=R.map.texture,h.uniforms.resolution.value=R.mapSize,h.uniforms.radius.value=R.radius,n.setRenderTarget(R.mapPass),n.clear(),n.renderBufferDirect(M,null,A,h,b,null),f.uniforms.shadow_pass.value=R.mapPass.texture,f.uniforms.resolution.value=R.mapSize,f.uniforms.radius.value=R.radius,n.setRenderTarget(R.map),n.clear(),n.renderBufferDirect(M,null,A,f,b,null)}function _(R,M,A,T){let x=null,I=A.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(I!==void 0)x=I;else if(x=A.isPointLight===!0?c:a,n.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){let V=x.uuid,W=M.uuid,ee=l[V];ee===void 0&&(ee={},l[V]=ee);let ne=ee[W];ne===void 0&&(ne=x.clone(),ee[W]=ne,M.addEventListener("dispose",C)),x=ne}if(x.visible=M.visible,x.wireframe=M.wireframe,T===Js?x.side=M.shadowSide!==null?M.shadowSide:M.side:x.side=M.shadowSide!==null?M.shadowSide:u[M.side],x.alphaMap=M.alphaMap,x.alphaTest=M.alphaTest,x.map=M.map,x.clipShadows=M.clipShadows,x.clippingPlanes=M.clippingPlanes,x.clipIntersection=M.clipIntersection,x.displacementMap=M.displacementMap,x.displacementScale=M.displacementScale,x.displacementBias=M.displacementBias,x.wireframeLinewidth=M.wireframeLinewidth,x.linewidth=M.linewidth,A.isPointLight===!0&&x.isMeshDistanceMaterial===!0){let V=n.properties.get(x);V.light=A}return x}function y(R,M,A,T,x){if(R.visible===!1)return;if(R.layers.test(M.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&x===Js)&&(!R.frustumCulled||t.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,R.matrixWorld);let W=e.update(R),ee=R.material;if(Array.isArray(ee)){let ne=W.groups;for(let B=0,G=ne.length;B<G;B++){let U=ne[B],se=ee[U.materialIndex];if(se&&se.visible){let Te=_(R,se,T,x);R.onBeforeShadow(n,R,M,A,W,Te,U),n.renderBufferDirect(A,null,W,Te,R,U),R.onAfterShadow(n,R,M,A,W,Te,U)}}}else if(ee.visible){let ne=_(R,ee,T,x);R.onBeforeShadow(n,R,M,A,W,ne,null),n.renderBufferDirect(A,null,W,ne,R,null),R.onAfterShadow(n,R,M,A,W,ne,null)}}let V=R.children;for(let W=0,ee=V.length;W<ee;W++)y(V[W],M,A,T,x)}function C(R){R.target.removeEventListener("dispose",C);for(let A in l){let T=l[A],x=R.target.uuid;x in T&&(T[x].dispose(),delete T[x])}}}function CK(n){function e(){let w=!1,ce=new xi,Y=null,ue=new xi(0,0,0,0);return{setMask:function(ke){Y!==ke&&!w&&(n.colorMask(ke,ke,ke,ke),Y=ke)},setLocked:function(ke){w=ke},setClear:function(ke,Mt,Gt,yn,Un){Un===!0&&(ke*=yn,Mt*=yn,Gt*=yn),ce.set(ke,Mt,Gt,yn),ue.equals(ce)===!1&&(n.clearColor(ke,Mt,Gt,yn),ue.copy(ce))},reset:function(){w=!1,Y=null,ue.set(-1,0,0,0)}}}function i(){let w=!1,ce=null,Y=null,ue=null;return{setTest:function(ke){ke?We(n.DEPTH_TEST):N(n.DEPTH_TEST)},setMask:function(ke){ce!==ke&&!w&&(n.depthMask(ke),ce=ke)},setFunc:function(ke){if(Y!==ke){switch(ke){case fL:n.depthFunc(n.NEVER);break;case mL:n.depthFunc(n.ALWAYS);break;case pL:n.depthFunc(n.LESS);break;case yp:n.depthFunc(n.LEQUAL);break;case gL:n.depthFunc(n.EQUAL);break;case bL:n.depthFunc(n.GEQUAL);break;case _L:n.depthFunc(n.GREATER);break;case vL:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Y=ke}},setLocked:function(ke){w=ke},setClear:function(ke){ue!==ke&&(n.clearDepth(ke),ue=ke)},reset:function(){w=!1,ce=null,Y=null,ue=null}}}function t(){let w=!1,ce=null,Y=null,ue=null,ke=null,Mt=null,Gt=null,yn=null,Un=null;return{setTest:function(Ii){w||(Ii?We(n.STENCIL_TEST):N(n.STENCIL_TEST))},setMask:function(Ii){ce!==Ii&&!w&&(n.stencilMask(Ii),ce=Ii)},setFunc:function(Ii,Vn,zn){(Y!==Ii||ue!==Vn||ke!==zn)&&(n.stencilFunc(Ii,Vn,zn),Y=Ii,ue=Vn,ke=zn)},setOp:function(Ii,Vn,zn){(Mt!==Ii||Gt!==Vn||yn!==zn)&&(n.stencilOp(Ii,Vn,zn),Mt=Ii,Gt=Vn,yn=zn)},setLocked:function(Ii){w=Ii},setClear:function(Ii){Un!==Ii&&(n.clearStencil(Ii),Un=Ii)},reset:function(){w=!1,ce=null,Y=null,ue=null,ke=null,Mt=null,Gt=null,yn=null,Un=null}}}let r=new e,o=new i,s=new t,a=new WeakMap,c=new WeakMap,l={},d={},u=new WeakMap,h=[],f=null,p=!1,b=null,g=null,m=null,v=null,_=null,y=null,C=null,R=new pe(0,0,0),M=0,A=!1,T=null,x=null,I=null,V=null,W=null,ee=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),ne=!1,B=0,G=n.getParameter(n.VERSION);G.indexOf("WebGL")!==-1?(B=parseFloat(/^WebGL (\d)/.exec(G)[1]),ne=B>=1):G.indexOf("OpenGL ES")!==-1&&(B=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),ne=B>=2);let U=null,se={},Te=n.getParameter(n.SCISSOR_BOX),Ie=n.getParameter(n.VIEWPORT),Ze=new xi().fromArray(Te),yt=new xi().fromArray(Ie);function Z(w,ce,Y,ue){let ke=new Uint8Array(4),Mt=n.createTexture();n.bindTexture(w,Mt),n.texParameteri(w,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(w,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Gt=0;Gt<Y;Gt++)w===n.TEXTURE_3D||w===n.TEXTURE_2D_ARRAY?n.texImage3D(ce,0,n.RGBA,1,1,ue,0,n.RGBA,n.UNSIGNED_BYTE,ke):n.texImage2D(ce+Gt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ke);return Mt}let Ce={};Ce[n.TEXTURE_2D]=Z(n.TEXTURE_2D,n.TEXTURE_2D,1),Ce[n.TEXTURE_CUBE_MAP]=Z(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ce[n.TEXTURE_2D_ARRAY]=Z(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ce[n.TEXTURE_3D]=Z(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),o.setClear(1),s.setClear(0),We(n.DEPTH_TEST),o.setFunc(yp),Ae(!1),Fe(lC),We(n.CULL_FACE),Re(ti);function We(w){l[w]!==!0&&(n.enable(w),l[w]=!0)}function N(w){l[w]!==!1&&(n.disable(w),l[w]=!1)}function xe(w,ce){return d[w]!==ce?(n.bindFramebuffer(w,ce),d[w]=ce,w===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=ce),w===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=ce),!0):!1}function Ne(w,ce){let Y=h,ue=!1;if(w){Y=u.get(ce),Y===void 0&&(Y=[],u.set(ce,Y));let ke=w.textures;if(Y.length!==ke.length||Y[0]!==n.COLOR_ATTACHMENT0){for(let Mt=0,Gt=ke.length;Mt<Gt;Mt++)Y[Mt]=n.COLOR_ATTACHMENT0+Mt;Y.length=ke.length,ue=!0}}else Y[0]!==n.BACK&&(Y[0]=n.BACK,ue=!0);ue&&n.drawBuffers(Y)}function Ue(w){return f!==w?(n.useProgram(w),f=w,!0):!1}let O={[vr]:n.FUNC_ADD,[JN]:n.FUNC_SUBTRACT,[eL]:n.FUNC_REVERSE_SUBTRACT};O[tL]=n.MIN,O[iL]=n.MAX;let ye={[ul]:n.ZERO,[nL]:n.ONE,[rL]:n.SRC_COLOR,[Ad]:n.SRC_ALPHA,[cL]:n.SRC_ALPHA_SATURATE,[cf]:n.DST_COLOR,[af]:n.DST_ALPHA,[oL]:n.ONE_MINUS_SRC_COLOR,[Id]:n.ONE_MINUS_SRC_ALPHA,[aL]:n.ONE_MINUS_DST_COLOR,[sL]:n.ONE_MINUS_DST_ALPHA,[lL]:n.CONSTANT_COLOR,[dL]:n.ONE_MINUS_CONSTANT_COLOR,[uL]:n.CONSTANT_ALPHA,[hL]:n.ONE_MINUS_CONSTANT_ALPHA};function Re(w,ce,Y,ue,ke,Mt,Gt,yn,Un,Ii){if(w===ti){p===!0&&(N(n.BLEND),p=!1);return}if(p===!1&&(We(n.BLEND),p=!0),w!==qd){if(w!==b||Ii!==A){if((g!==vr||_!==vr)&&(n.blendEquation(n.FUNC_ADD),g=vr,_=vr),Ii)switch(w){case fs:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Dd:n.blendFunc(n.ONE,n.ONE);break;case dC:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case uC:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",w);break}else switch(w){case fs:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Dd:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case dC:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case uC:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",w);break}m=null,v=null,y=null,C=null,R.set(0,0,0),M=0,b=w,A=Ii}return}ke=ke||ce,Mt=Mt||Y,Gt=Gt||ue,(ce!==g||ke!==_)&&(n.blendEquationSeparate(O[ce],O[ke]),g=ce,_=ke),(Y!==m||ue!==v||Mt!==y||Gt!==C)&&(n.blendFuncSeparate(ye[Y],ye[ue],ye[Mt],ye[Gt]),m=Y,v=ue,y=Mt,C=Gt),(yn.equals(R)===!1||Un!==M)&&(n.blendColor(yn.r,yn.g,yn.b,Un),R.copy(yn),M=Un),b=w,A=!1}function Pe(w,ce){w.side===Kn?N(n.CULL_FACE):We(n.CULL_FACE);let Y=w.side===Wr;ce&&(Y=!Y),Ae(Y),w.blending===fs&&w.transparent===!1?Re(ti):Re(w.blending,w.blendEquation,w.blendSrc,w.blendDst,w.blendEquationAlpha,w.blendSrcAlpha,w.blendDstAlpha,w.blendColor,w.blendAlpha,w.premultipliedAlpha),o.setFunc(w.depthFunc),o.setTest(w.depthTest),o.setMask(w.depthWrite),r.setMask(w.colorWrite);let ue=w.stencilWrite;s.setTest(ue),ue&&(s.setMask(w.stencilWriteMask),s.setFunc(w.stencilFunc,w.stencilRef,w.stencilFuncMask),s.setOp(w.stencilFail,w.stencilZFail,w.stencilZPass)),Xe(w.polygonOffset,w.polygonOffsetFactor,w.polygonOffsetUnits),w.alphaToCoverage===!0?We(n.SAMPLE_ALPHA_TO_COVERAGE):N(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ae(w){T!==w&&(w?n.frontFace(n.CW):n.frontFace(n.CCW),T=w)}function Fe(w){w!==ZN?(We(n.CULL_FACE),w!==x&&(w===lC?n.cullFace(n.BACK):w===QN?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):N(n.CULL_FACE),x=w}function Ke(w){w!==I&&(ne&&n.lineWidth(w),I=w)}function Xe(w,ce,Y){w?(We(n.POLYGON_OFFSET_FILL),(V!==ce||W!==Y)&&(n.polygonOffset(ce,Y),V=ce,W=Y)):N(n.POLYGON_OFFSET_FILL)}function Ct(w){w?We(n.SCISSOR_TEST):N(n.SCISSOR_TEST)}function k(w){w===void 0&&(w=n.TEXTURE0+ee-1),U!==w&&(n.activeTexture(w),U=w)}function E(w,ce,Y){Y===void 0&&(U===null?Y=n.TEXTURE0+ee-1:Y=U);let ue=se[Y];ue===void 0&&(ue={type:void 0,texture:void 0},se[Y]=ue),(ue.type!==w||ue.texture!==ce)&&(U!==Y&&(n.activeTexture(Y),U=Y),n.bindTexture(w,ce||Ce[w]),ue.type=w,ue.texture=ce)}function re(){let w=se[U];w!==void 0&&w.type!==void 0&&(n.bindTexture(w.type,null),w.type=void 0,w.texture=void 0)}function Se(){try{n.compressedTexImage2D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function Me(){try{n.compressedTexImage3D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function De(){try{n.texSubImage2D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function mt(){try{n.texSubImage3D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function Ge(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function ze(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function Et(){try{n.texStorage2D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function Oe(){try{n.texStorage3D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function rt(){try{n.texImage2D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function li(){try{n.texImage3D.apply(n,arguments)}catch(w){console.error("THREE.WebGLState:",w)}}function Pt(w){Ze.equals(w)===!1&&(n.scissor(w.x,w.y,w.z,w.w),Ze.copy(w))}function Je(w){yt.equals(w)===!1&&(n.viewport(w.x,w.y,w.z,w.w),yt.copy(w))}function zt(w,ce){let Y=c.get(ce);Y===void 0&&(Y=new WeakMap,c.set(ce,Y));let ue=Y.get(w);ue===void 0&&(ue=n.getUniformBlockIndex(ce,w.name),Y.set(w,ue))}function Ht(w,ce){let ue=c.get(ce).get(w);a.get(ce)!==ue&&(n.uniformBlockBinding(ce,ue,w.__bindingPointIndex),a.set(ce,ue))}function Ui(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),l={},U=null,se={},d={},u=new WeakMap,h=[],f=null,p=!1,b=null,g=null,m=null,v=null,_=null,y=null,C=null,R=new pe(0,0,0),M=0,A=!1,T=null,x=null,I=null,V=null,W=null,Ze.set(0,0,n.canvas.width,n.canvas.height),yt.set(0,0,n.canvas.width,n.canvas.height),r.reset(),o.reset(),s.reset()}return{buffers:{color:r,depth:o,stencil:s},enable:We,disable:N,bindFramebuffer:xe,drawBuffers:Ne,useProgram:Ue,setBlending:Re,setMaterial:Pe,setFlipSided:Ae,setCullFace:Fe,setLineWidth:Ke,setPolygonOffset:Xe,setScissorTest:Ct,activeTexture:k,bindTexture:E,unbindTexture:re,compressedTexImage2D:Se,compressedTexImage3D:Me,texImage2D:rt,texImage3D:li,updateUBOMapping:zt,uniformBlockBinding:Ht,texStorage2D:Et,texStorage3D:Oe,texSubImage2D:De,texSubImage3D:mt,compressedTexSubImage2D:Ge,compressedTexSubImage3D:ze,scissor:Pt,viewport:Je,reset:Ui}}function EK(n,e,i,t,r,o,s){let a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),l=new z,d=new WeakMap,u,h=new WeakMap,f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(k,E){return f?new OffscreenCanvas(k,E):Dp("canvas")}function b(k,E,re){let Se=1,Me=Ct(k);if((Me.width>re||Me.height>re)&&(Se=re/Math.max(Me.width,Me.height)),Se<1)if(typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&k instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&k instanceof ImageBitmap||typeof VideoFrame<"u"&&k instanceof VideoFrame){let De=Math.floor(Se*Me.width),mt=Math.floor(Se*Me.height);u===void 0&&(u=p(De,mt));let Ge=E?p(De,mt):u;return Ge.width=De,Ge.height=mt,Ge.getContext("2d").drawImage(k,0,0,De,mt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Me.width+"x"+Me.height+") to ("+De+"x"+mt+")."),Ge}else return"data"in k&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Me.width+"x"+Me.height+")."),k;return k}function g(k){return k.generateMipmaps&&k.minFilter!==ui&&k.minFilter!==gn}function m(k){n.generateMipmap(k)}function v(k,E,re,Se,Me=!1){if(k!==null){if(n[k]!==void 0)return n[k];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+k+"'")}let De=E;if(E===n.RED&&(re===n.FLOAT&&(De=n.R32F),re===n.HALF_FLOAT&&(De=n.R16F),re===n.UNSIGNED_BYTE&&(De=n.R8)),E===n.RED_INTEGER&&(re===n.UNSIGNED_BYTE&&(De=n.R8UI),re===n.UNSIGNED_SHORT&&(De=n.R16UI),re===n.UNSIGNED_INT&&(De=n.R32UI),re===n.BYTE&&(De=n.R8I),re===n.SHORT&&(De=n.R16I),re===n.INT&&(De=n.R32I)),E===n.RG&&(re===n.FLOAT&&(De=n.RG32F),re===n.HALF_FLOAT&&(De=n.RG16F),re===n.UNSIGNED_BYTE&&(De=n.RG8)),E===n.RG_INTEGER&&(re===n.UNSIGNED_BYTE&&(De=n.RG8UI),re===n.UNSIGNED_SHORT&&(De=n.RG16UI),re===n.UNSIGNED_INT&&(De=n.RG32UI),re===n.BYTE&&(De=n.RG8I),re===n.SHORT&&(De=n.RG16I),re===n.INT&&(De=n.RG32I)),E===n.RGB&&re===n.UNSIGNED_INT_5_9_9_9_REV&&(De=n.RGB9_E5),E===n.RGBA){let mt=Me?Sp:Ri.getTransfer(Se);re===n.FLOAT&&(De=n.RGBA32F),re===n.HALF_FLOAT&&(De=n.RGBA16F),re===n.UNSIGNED_BYTE&&(De=mt===Ji?n.SRGB8_ALPHA8:n.RGBA8),re===n.UNSIGNED_SHORT_4_4_4_4&&(De=n.RGBA4),re===n.UNSIGNED_SHORT_5_5_5_1&&(De=n.RGB5_A1)}return(De===n.R16F||De===n.R32F||De===n.RG16F||De===n.RG32F||De===n.RGBA16F||De===n.RGBA32F)&&e.get("EXT_color_buffer_float"),De}function _(k,E){let re;return k?E===null||E===Fd||E===ps?re=n.DEPTH24_STENCIL8:E===yr?re=n.DEPTH32F_STENCIL8:E===kd&&(re=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):E===null||E===Fd||E===ps?re=n.DEPTH_COMPONENT24:E===yr?re=n.DEPTH_COMPONENT32F:E===kd&&(re=n.DEPTH_COMPONENT16),re}function y(k,E){return g(k)===!0||k.isFramebufferTexture&&k.minFilter!==ui&&k.minFilter!==gn?Math.log2(Math.max(E.width,E.height))+1:k.mipmaps!==void 0&&k.mipmaps.length>0?k.mipmaps.length:k.isCompressedTexture&&Array.isArray(k.image)?E.mipmaps.length:1}function C(k){let E=k.target;E.removeEventListener("dispose",C),M(E),E.isVideoTexture&&d.delete(E)}function R(k){let E=k.target;E.removeEventListener("dispose",R),T(E)}function M(k){let E=t.get(k);if(E.__webglInit===void 0)return;let re=k.source,Se=h.get(re);if(Se){let Me=Se[E.__cacheKey];Me.usedTimes--,Me.usedTimes===0&&A(k),Object.keys(Se).length===0&&h.delete(re)}t.remove(k)}function A(k){let E=t.get(k);n.deleteTexture(E.__webglTexture);let re=k.source,Se=h.get(re);delete Se[E.__cacheKey],s.memory.textures--}function T(k){let E=t.get(k);if(k.depthTexture&&k.depthTexture.dispose(),k.isWebGLCubeRenderTarget)for(let Se=0;Se<6;Se++){if(Array.isArray(E.__webglFramebuffer[Se]))for(let Me=0;Me<E.__webglFramebuffer[Se].length;Me++)n.deleteFramebuffer(E.__webglFramebuffer[Se][Me]);else n.deleteFramebuffer(E.__webglFramebuffer[Se]);E.__webglDepthbuffer&&n.deleteRenderbuffer(E.__webglDepthbuffer[Se])}else{if(Array.isArray(E.__webglFramebuffer))for(let Se=0;Se<E.__webglFramebuffer.length;Se++)n.deleteFramebuffer(E.__webglFramebuffer[Se]);else n.deleteFramebuffer(E.__webglFramebuffer);if(E.__webglDepthbuffer&&n.deleteRenderbuffer(E.__webglDepthbuffer),E.__webglMultisampledFramebuffer&&n.deleteFramebuffer(E.__webglMultisampledFramebuffer),E.__webglColorRenderbuffer)for(let Se=0;Se<E.__webglColorRenderbuffer.length;Se++)E.__webglColorRenderbuffer[Se]&&n.deleteRenderbuffer(E.__webglColorRenderbuffer[Se]);E.__webglDepthRenderbuffer&&n.deleteRenderbuffer(E.__webglDepthRenderbuffer)}let re=k.textures;for(let Se=0,Me=re.length;Se<Me;Se++){let De=t.get(re[Se]);De.__webglTexture&&(n.deleteTexture(De.__webglTexture),s.memory.textures--),t.remove(re[Se])}t.remove(k)}let x=0;function I(){x=0}function V(){let k=x;return k>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+k+" texture units while this GPU supports only "+r.maxTextures),x+=1,k}function W(k){let E=[];return E.push(k.wrapS),E.push(k.wrapT),E.push(k.wrapR||0),E.push(k.magFilter),E.push(k.minFilter),E.push(k.anisotropy),E.push(k.internalFormat),E.push(k.format),E.push(k.type),E.push(k.generateMipmaps),E.push(k.premultiplyAlpha),E.push(k.flipY),E.push(k.unpackAlignment),E.push(k.colorSpace),E.join()}function ee(k,E){let re=t.get(k);if(k.isVideoTexture&&Ke(k),k.isRenderTargetTexture===!1&&k.version>0&&re.__version!==k.version){let Se=k.image;if(Se===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Se.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{yt(re,k,E);return}}i.bindTexture(n.TEXTURE_2D,re.__webglTexture,n.TEXTURE0+E)}function ne(k,E){let re=t.get(k);if(k.version>0&&re.__version!==k.version){yt(re,k,E);return}i.bindTexture(n.TEXTURE_2D_ARRAY,re.__webglTexture,n.TEXTURE0+E)}function B(k,E){let re=t.get(k);if(k.version>0&&re.__version!==k.version){yt(re,k,E);return}i.bindTexture(n.TEXTURE_3D,re.__webglTexture,n.TEXTURE0+E)}function G(k,E){let re=t.get(k);if(k.version>0&&re.__version!==k.version){Z(re,k,E);return}i.bindTexture(n.TEXTURE_CUBE_MAP,re.__webglTexture,n.TEXTURE0+E)}let U={[qo]:n.REPEAT,[ro]:n.CLAMP_TO_EDGE,[Pd]:n.MIRRORED_REPEAT},se={[ui]:n.NEAREST,[tg]:n.NEAREST_MIPMAP_NEAREST,[rl]:n.NEAREST_MIPMAP_LINEAR,[gn]:n.LINEAR,[Td]:n.LINEAR_MIPMAP_NEAREST,[Co]:n.LINEAR_MIPMAP_LINEAR},Te={[HL]:n.NEVER,[YL]:n.ALWAYS,[GL]:n.LESS,[rD]:n.LEQUAL,[WL]:n.EQUAL,[XL]:n.GEQUAL,[$L]:n.GREATER,[qL]:n.NOTEQUAL};function Ie(k,E){if(E.type===yr&&e.has("OES_texture_float_linear")===!1&&(E.magFilter===gn||E.magFilter===Td||E.magFilter===rl||E.magFilter===Co||E.minFilter===gn||E.minFilter===Td||E.minFilter===rl||E.minFilter===Co)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(k,n.TEXTURE_WRAP_S,U[E.wrapS]),n.texParameteri(k,n.TEXTURE_WRAP_T,U[E.wrapT]),(k===n.TEXTURE_3D||k===n.TEXTURE_2D_ARRAY)&&n.texParameteri(k,n.TEXTURE_WRAP_R,U[E.wrapR]),n.texParameteri(k,n.TEXTURE_MAG_FILTER,se[E.magFilter]),n.texParameteri(k,n.TEXTURE_MIN_FILTER,se[E.minFilter]),E.compareFunction&&(n.texParameteri(k,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(k,n.TEXTURE_COMPARE_FUNC,Te[E.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(E.magFilter===ui||E.minFilter!==rl&&E.minFilter!==Co||E.type===yr&&e.has("OES_texture_float_linear")===!1)return;if(E.anisotropy>1||t.get(E).__currentAnisotropy){let re=e.get("EXT_texture_filter_anisotropic");n.texParameterf(k,re.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(E.anisotropy,r.getMaxAnisotropy())),t.get(E).__currentAnisotropy=E.anisotropy}}}function Ze(k,E){let re=!1;k.__webglInit===void 0&&(k.__webglInit=!0,E.addEventListener("dispose",C));let Se=E.source,Me=h.get(Se);Me===void 0&&(Me={},h.set(Se,Me));let De=W(E);if(De!==k.__cacheKey){Me[De]===void 0&&(Me[De]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,re=!0),Me[De].usedTimes++;let mt=Me[k.__cacheKey];mt!==void 0&&(Me[k.__cacheKey].usedTimes--,mt.usedTimes===0&&A(E)),k.__cacheKey=De,k.__webglTexture=Me[De].texture}return re}function yt(k,E,re){let Se=n.TEXTURE_2D;(E.isDataArrayTexture||E.isCompressedArrayTexture)&&(Se=n.TEXTURE_2D_ARRAY),E.isData3DTexture&&(Se=n.TEXTURE_3D);let Me=Ze(k,E),De=E.source;i.bindTexture(Se,k.__webglTexture,n.TEXTURE0+re);let mt=t.get(De);if(De.version!==mt.__version||Me===!0){i.activeTexture(n.TEXTURE0+re);let Ge=Ri.getPrimaries(Ri.workingColorSpace),ze=E.colorSpace===Za?null:Ri.getPrimaries(E.colorSpace),Et=E.colorSpace===Za||Ge===ze?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,E.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,E.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Et);let Oe=b(E.image,!1,r.maxTextureSize);Oe=Xe(E,Oe);let rt=o.convert(E.format,E.colorSpace),li=o.convert(E.type),Pt=v(E.internalFormat,rt,li,E.colorSpace,E.isVideoTexture);Ie(Se,E);let Je,zt=E.mipmaps,Ht=E.isVideoTexture!==!0,Ui=mt.__version===void 0||Me===!0,w=De.dataReady,ce=y(E,Oe);if(E.isDepthTexture)Pt=_(E.format===gs,E.type),Ui&&(Ht?i.texStorage2D(n.TEXTURE_2D,1,Pt,Oe.width,Oe.height):i.texImage2D(n.TEXTURE_2D,0,Pt,Oe.width,Oe.height,0,rt,li,null));else if(E.isDataTexture)if(zt.length>0){Ht&&Ui&&i.texStorage2D(n.TEXTURE_2D,ce,Pt,zt[0].width,zt[0].height);for(let Y=0,ue=zt.length;Y<ue;Y++)Je=zt[Y],Ht?w&&i.texSubImage2D(n.TEXTURE_2D,Y,0,0,Je.width,Je.height,rt,li,Je.data):i.texImage2D(n.TEXTURE_2D,Y,Pt,Je.width,Je.height,0,rt,li,Je.data);E.generateMipmaps=!1}else Ht?(Ui&&i.texStorage2D(n.TEXTURE_2D,ce,Pt,Oe.width,Oe.height),w&&i.texSubImage2D(n.TEXTURE_2D,0,0,0,Oe.width,Oe.height,rt,li,Oe.data)):i.texImage2D(n.TEXTURE_2D,0,Pt,Oe.width,Oe.height,0,rt,li,Oe.data);else if(E.isCompressedTexture)if(E.isCompressedArrayTexture){Ht&&Ui&&i.texStorage3D(n.TEXTURE_2D_ARRAY,ce,Pt,zt[0].width,zt[0].height,Oe.depth);for(let Y=0,ue=zt.length;Y<ue;Y++)if(Je=zt[Y],E.format!==oo)if(rt!==null)if(Ht){if(w)if(E.layerUpdates.size>0){for(let ke of E.layerUpdates){let Mt=Je.width*Je.height;i.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Y,0,0,ke,Je.width,Je.height,1,rt,Je.data.slice(Mt*ke,Mt*(ke+1)),0,0)}E.clearLayerUpdates()}else i.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Y,0,0,0,Je.width,Je.height,Oe.depth,rt,Je.data,0,0)}else i.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Y,Pt,Je.width,Je.height,Oe.depth,0,Je.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ht?w&&i.texSubImage3D(n.TEXTURE_2D_ARRAY,Y,0,0,0,Je.width,Je.height,Oe.depth,rt,li,Je.data):i.texImage3D(n.TEXTURE_2D_ARRAY,Y,Pt,Je.width,Je.height,Oe.depth,0,rt,li,Je.data)}else{Ht&&Ui&&i.texStorage2D(n.TEXTURE_2D,ce,Pt,zt[0].width,zt[0].height);for(let Y=0,ue=zt.length;Y<ue;Y++)Je=zt[Y],E.format!==oo?rt!==null?Ht?w&&i.compressedTexSubImage2D(n.TEXTURE_2D,Y,0,0,Je.width,Je.height,rt,Je.data):i.compressedTexImage2D(n.TEXTURE_2D,Y,Pt,Je.width,Je.height,0,Je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ht?w&&i.texSubImage2D(n.TEXTURE_2D,Y,0,0,Je.width,Je.height,rt,li,Je.data):i.texImage2D(n.TEXTURE_2D,Y,Pt,Je.width,Je.height,0,rt,li,Je.data)}else if(E.isDataArrayTexture)if(Ht){if(Ui&&i.texStorage3D(n.TEXTURE_2D_ARRAY,ce,Pt,Oe.width,Oe.height,Oe.depth),w)if(E.layerUpdates.size>0){let Y;switch(li){case n.UNSIGNED_BYTE:switch(rt){case n.ALPHA:Y=1;break;case n.LUMINANCE:Y=1;break;case n.LUMINANCE_ALPHA:Y=2;break;case n.RGB:Y=3;break;case n.RGBA:Y=4;break;default:throw new Error(`Unknown texel size for format ${rt}.`)}break;case n.UNSIGNED_SHORT_4_4_4_4:case n.UNSIGNED_SHORT_5_5_5_1:case n.UNSIGNED_SHORT_5_6_5:Y=1;break;default:throw new Error(`Unknown texel size for type ${li}.`)}let ue=Oe.width*Oe.height*Y;for(let ke of E.layerUpdates)i.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,ke,Oe.width,Oe.height,1,rt,li,Oe.data.slice(ue*ke,ue*(ke+1)));E.clearLayerUpdates()}else i.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Oe.width,Oe.height,Oe.depth,rt,li,Oe.data)}else i.texImage3D(n.TEXTURE_2D_ARRAY,0,Pt,Oe.width,Oe.height,Oe.depth,0,rt,li,Oe.data);else if(E.isData3DTexture)Ht?(Ui&&i.texStorage3D(n.TEXTURE_3D,ce,Pt,Oe.width,Oe.height,Oe.depth),w&&i.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Oe.width,Oe.height,Oe.depth,rt,li,Oe.data)):i.texImage3D(n.TEXTURE_3D,0,Pt,Oe.width,Oe.height,Oe.depth,0,rt,li,Oe.data);else if(E.isFramebufferTexture){if(Ui)if(Ht)i.texStorage2D(n.TEXTURE_2D,ce,Pt,Oe.width,Oe.height);else{let Y=Oe.width,ue=Oe.height;for(let ke=0;ke<ce;ke++)i.texImage2D(n.TEXTURE_2D,ke,Pt,Y,ue,0,rt,li,null),Y>>=1,ue>>=1}}else if(zt.length>0){if(Ht&&Ui){let Y=Ct(zt[0]);i.texStorage2D(n.TEXTURE_2D,ce,Pt,Y.width,Y.height)}for(let Y=0,ue=zt.length;Y<ue;Y++)Je=zt[Y],Ht?w&&i.texSubImage2D(n.TEXTURE_2D,Y,0,0,rt,li,Je):i.texImage2D(n.TEXTURE_2D,Y,Pt,rt,li,Je);E.generateMipmaps=!1}else if(Ht){if(Ui){let Y=Ct(Oe);i.texStorage2D(n.TEXTURE_2D,ce,Pt,Y.width,Y.height)}w&&i.texSubImage2D(n.TEXTURE_2D,0,0,0,rt,li,Oe)}else i.texImage2D(n.TEXTURE_2D,0,Pt,rt,li,Oe);g(E)&&m(Se),mt.__version=De.version,E.onUpdate&&E.onUpdate(E)}k.__version=E.version}function Z(k,E,re){if(E.image.length!==6)return;let Se=Ze(k,E),Me=E.source;i.bindTexture(n.TEXTURE_CUBE_MAP,k.__webglTexture,n.TEXTURE0+re);let De=t.get(Me);if(Me.version!==De.__version||Se===!0){i.activeTexture(n.TEXTURE0+re);let mt=Ri.getPrimaries(Ri.workingColorSpace),Ge=E.colorSpace===Za?null:Ri.getPrimaries(E.colorSpace),ze=E.colorSpace===Za||mt===Ge?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,E.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,E.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ze);let Et=E.isCompressedTexture||E.image[0].isCompressedTexture,Oe=E.image[0]&&E.image[0].isDataTexture,rt=[];for(let ue=0;ue<6;ue++)!Et&&!Oe?rt[ue]=b(E.image[ue],!0,r.maxCubemapSize):rt[ue]=Oe?E.image[ue].image:E.image[ue],rt[ue]=Xe(E,rt[ue]);let li=rt[0],Pt=o.convert(E.format,E.colorSpace),Je=o.convert(E.type),zt=v(E.internalFormat,Pt,Je,E.colorSpace),Ht=E.isVideoTexture!==!0,Ui=De.__version===void 0||Se===!0,w=Me.dataReady,ce=y(E,li);Ie(n.TEXTURE_CUBE_MAP,E);let Y;if(Et){Ht&&Ui&&i.texStorage2D(n.TEXTURE_CUBE_MAP,ce,zt,li.width,li.height);for(let ue=0;ue<6;ue++){Y=rt[ue].mipmaps;for(let ke=0;ke<Y.length;ke++){let Mt=Y[ke];E.format!==oo?Pt!==null?Ht?w&&i.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,ke,0,0,Mt.width,Mt.height,Pt,Mt.data):i.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,ke,zt,Mt.width,Mt.height,0,Mt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ht?w&&i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,ke,0,0,Mt.width,Mt.height,Pt,Je,Mt.data):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,ke,zt,Mt.width,Mt.height,0,Pt,Je,Mt.data)}}}else{if(Y=E.mipmaps,Ht&&Ui){Y.length>0&&ce++;let ue=Ct(rt[0]);i.texStorage2D(n.TEXTURE_CUBE_MAP,ce,zt,ue.width,ue.height)}for(let ue=0;ue<6;ue++)if(Oe){Ht?w&&i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,0,0,0,rt[ue].width,rt[ue].height,Pt,Je,rt[ue].data):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,0,zt,rt[ue].width,rt[ue].height,0,Pt,Je,rt[ue].data);for(let ke=0;ke<Y.length;ke++){let Gt=Y[ke].image[ue].image;Ht?w&&i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,ke+1,0,0,Gt.width,Gt.height,Pt,Je,Gt.data):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,ke+1,zt,Gt.width,Gt.height,0,Pt,Je,Gt.data)}}else{Ht?w&&i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,0,0,0,Pt,Je,rt[ue]):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,0,zt,Pt,Je,rt[ue]);for(let ke=0;ke<Y.length;ke++){let Mt=Y[ke];Ht?w&&i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,ke+1,0,0,Pt,Je,Mt.image[ue]):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,ke+1,zt,Pt,Je,Mt.image[ue])}}}g(E)&&m(n.TEXTURE_CUBE_MAP),De.__version=Me.version,E.onUpdate&&E.onUpdate(E)}k.__version=E.version}function Ce(k,E,re,Se,Me,De){let mt=o.convert(re.format,re.colorSpace),Ge=o.convert(re.type),ze=v(re.internalFormat,mt,Ge,re.colorSpace);if(!t.get(E).__hasExternalTextures){let Oe=Math.max(1,E.width>>De),rt=Math.max(1,E.height>>De);Me===n.TEXTURE_3D||Me===n.TEXTURE_2D_ARRAY?i.texImage3D(Me,De,ze,Oe,rt,E.depth,0,mt,Ge,null):i.texImage2D(Me,De,ze,Oe,rt,0,mt,Ge,null)}i.bindFramebuffer(n.FRAMEBUFFER,k),Fe(E)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Se,Me,t.get(re).__webglTexture,0,Ae(E)):(Me===n.TEXTURE_2D||Me>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Me<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Se,Me,t.get(re).__webglTexture,De),i.bindFramebuffer(n.FRAMEBUFFER,null)}function We(k,E,re){if(n.bindRenderbuffer(n.RENDERBUFFER,k),E.depthBuffer){let Se=E.depthTexture,Me=Se&&Se.isDepthTexture?Se.type:null,De=_(E.stencilBuffer,Me),mt=E.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ge=Ae(E);Fe(E)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ge,De,E.width,E.height):re?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ge,De,E.width,E.height):n.renderbufferStorage(n.RENDERBUFFER,De,E.width,E.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,mt,n.RENDERBUFFER,k)}else{let Se=E.textures;for(let Me=0;Me<Se.length;Me++){let De=Se[Me],mt=o.convert(De.format,De.colorSpace),Ge=o.convert(De.type),ze=v(De.internalFormat,mt,Ge,De.colorSpace),Et=Ae(E);re&&Fe(E)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Et,ze,E.width,E.height):Fe(E)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Et,ze,E.width,E.height):n.renderbufferStorage(n.RENDERBUFFER,ze,E.width,E.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function N(k,E){if(E&&E.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(n.FRAMEBUFFER,k),!(E.depthTexture&&E.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!t.get(E.depthTexture).__webglTexture||E.depthTexture.image.width!==E.width||E.depthTexture.image.height!==E.height)&&(E.depthTexture.image.width=E.width,E.depthTexture.image.height=E.height,E.depthTexture.needsUpdate=!0),ee(E.depthTexture,0);let Se=t.get(E.depthTexture).__webglTexture,Me=Ae(E);if(E.depthTexture.format===Cd)Fe(E)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Se,0,Me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Se,0);else if(E.depthTexture.format===gs)Fe(E)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Se,0,Me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Se,0);else throw new Error("Unknown depthTexture format")}function xe(k){let E=t.get(k),re=k.isWebGLCubeRenderTarget===!0;if(k.depthTexture&&!E.__autoAllocateDepthBuffer){if(re)throw new Error("target.depthTexture not supported in Cube render targets");N(E.__webglFramebuffer,k)}else if(re){E.__webglDepthbuffer=[];for(let Se=0;Se<6;Se++)i.bindFramebuffer(n.FRAMEBUFFER,E.__webglFramebuffer[Se]),E.__webglDepthbuffer[Se]=n.createRenderbuffer(),We(E.__webglDepthbuffer[Se],k,!1)}else i.bindFramebuffer(n.FRAMEBUFFER,E.__webglFramebuffer),E.__webglDepthbuffer=n.createRenderbuffer(),We(E.__webglDepthbuffer,k,!1);i.bindFramebuffer(n.FRAMEBUFFER,null)}function Ne(k,E,re){let Se=t.get(k);E!==void 0&&Ce(Se.__webglFramebuffer,k,k.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),re!==void 0&&xe(k)}function Ue(k){let E=k.texture,re=t.get(k),Se=t.get(E);k.addEventListener("dispose",R);let Me=k.textures,De=k.isWebGLCubeRenderTarget===!0,mt=Me.length>1;if(mt||(Se.__webglTexture===void 0&&(Se.__webglTexture=n.createTexture()),Se.__version=E.version,s.memory.textures++),De){re.__webglFramebuffer=[];for(let Ge=0;Ge<6;Ge++)if(E.mipmaps&&E.mipmaps.length>0){re.__webglFramebuffer[Ge]=[];for(let ze=0;ze<E.mipmaps.length;ze++)re.__webglFramebuffer[Ge][ze]=n.createFramebuffer()}else re.__webglFramebuffer[Ge]=n.createFramebuffer()}else{if(E.mipmaps&&E.mipmaps.length>0){re.__webglFramebuffer=[];for(let Ge=0;Ge<E.mipmaps.length;Ge++)re.__webglFramebuffer[Ge]=n.createFramebuffer()}else re.__webglFramebuffer=n.createFramebuffer();if(mt)for(let Ge=0,ze=Me.length;Ge<ze;Ge++){let Et=t.get(Me[Ge]);Et.__webglTexture===void 0&&(Et.__webglTexture=n.createTexture(),s.memory.textures++)}if(k.samples>0&&Fe(k)===!1){re.__webglMultisampledFramebuffer=n.createFramebuffer(),re.__webglColorRenderbuffer=[],i.bindFramebuffer(n.FRAMEBUFFER,re.__webglMultisampledFramebuffer);for(let Ge=0;Ge<Me.length;Ge++){let ze=Me[Ge];re.__webglColorRenderbuffer[Ge]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,re.__webglColorRenderbuffer[Ge]);let Et=o.convert(ze.format,ze.colorSpace),Oe=o.convert(ze.type),rt=v(ze.internalFormat,Et,Oe,ze.colorSpace,k.isXRRenderTarget===!0),li=Ae(k);n.renderbufferStorageMultisample(n.RENDERBUFFER,li,rt,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ge,n.RENDERBUFFER,re.__webglColorRenderbuffer[Ge])}n.bindRenderbuffer(n.RENDERBUFFER,null),k.depthBuffer&&(re.__webglDepthRenderbuffer=n.createRenderbuffer(),We(re.__webglDepthRenderbuffer,k,!0)),i.bindFramebuffer(n.FRAMEBUFFER,null)}}if(De){i.bindTexture(n.TEXTURE_CUBE_MAP,Se.__webglTexture),Ie(n.TEXTURE_CUBE_MAP,E);for(let Ge=0;Ge<6;Ge++)if(E.mipmaps&&E.mipmaps.length>0)for(let ze=0;ze<E.mipmaps.length;ze++)Ce(re.__webglFramebuffer[Ge][ze],k,E,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,ze);else Ce(re.__webglFramebuffer[Ge],k,E,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0);g(E)&&m(n.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(mt){for(let Ge=0,ze=Me.length;Ge<ze;Ge++){let Et=Me[Ge],Oe=t.get(Et);i.bindTexture(n.TEXTURE_2D,Oe.__webglTexture),Ie(n.TEXTURE_2D,Et),Ce(re.__webglFramebuffer,k,Et,n.COLOR_ATTACHMENT0+Ge,n.TEXTURE_2D,0),g(Et)&&m(n.TEXTURE_2D)}i.unbindTexture()}else{let Ge=n.TEXTURE_2D;if((k.isWebGL3DRenderTarget||k.isWebGLArrayRenderTarget)&&(Ge=k.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),i.bindTexture(Ge,Se.__webglTexture),Ie(Ge,E),E.mipmaps&&E.mipmaps.length>0)for(let ze=0;ze<E.mipmaps.length;ze++)Ce(re.__webglFramebuffer[ze],k,E,n.COLOR_ATTACHMENT0,Ge,ze);else Ce(re.__webglFramebuffer,k,E,n.COLOR_ATTACHMENT0,Ge,0);g(E)&&m(Ge),i.unbindTexture()}k.depthBuffer&&xe(k)}function O(k){let E=k.textures;for(let re=0,Se=E.length;re<Se;re++){let Me=E[re];if(g(Me)){let De=k.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,mt=t.get(Me).__webglTexture;i.bindTexture(De,mt),m(De),i.unbindTexture()}}}let ye=[],Re=[];function Pe(k){if(k.samples>0){if(Fe(k)===!1){let E=k.textures,re=k.width,Se=k.height,Me=n.COLOR_BUFFER_BIT,De=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,mt=t.get(k),Ge=E.length>1;if(Ge)for(let ze=0;ze<E.length;ze++)i.bindFramebuffer(n.FRAMEBUFFER,mt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ze,n.RENDERBUFFER,null),i.bindFramebuffer(n.FRAMEBUFFER,mt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ze,n.TEXTURE_2D,null,0);i.bindFramebuffer(n.READ_FRAMEBUFFER,mt.__webglMultisampledFramebuffer),i.bindFramebuffer(n.DRAW_FRAMEBUFFER,mt.__webglFramebuffer);for(let ze=0;ze<E.length;ze++){if(k.resolveDepthBuffer&&(k.depthBuffer&&(Me|=n.DEPTH_BUFFER_BIT),k.stencilBuffer&&k.resolveStencilBuffer&&(Me|=n.STENCIL_BUFFER_BIT)),Ge){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,mt.__webglColorRenderbuffer[ze]);let Et=t.get(E[ze]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Et,0)}n.blitFramebuffer(0,0,re,Se,0,0,re,Se,Me,n.NEAREST),c===!0&&(ye.length=0,Re.length=0,ye.push(n.COLOR_ATTACHMENT0+ze),k.depthBuffer&&k.resolveDepthBuffer===!1&&(ye.push(De),Re.push(De),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Re)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ye))}if(i.bindFramebuffer(n.READ_FRAMEBUFFER,null),i.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ge)for(let ze=0;ze<E.length;ze++){i.bindFramebuffer(n.FRAMEBUFFER,mt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ze,n.RENDERBUFFER,mt.__webglColorRenderbuffer[ze]);let Et=t.get(E[ze]).__webglTexture;i.bindFramebuffer(n.FRAMEBUFFER,mt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ze,n.TEXTURE_2D,Et,0)}i.bindFramebuffer(n.DRAW_FRAMEBUFFER,mt.__webglMultisampledFramebuffer)}else if(k.depthBuffer&&k.resolveDepthBuffer===!1&&c){let E=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[E])}}}function Ae(k){return Math.min(r.maxSamples,k.samples)}function Fe(k){let E=t.get(k);return k.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&E.__useRenderToTexture!==!1}function Ke(k){let E=s.render.frame;d.get(k)!==E&&(d.set(k,E),k.update())}function Xe(k,E){let re=k.colorSpace,Se=k.format,Me=k.type;return k.isCompressedTexture===!0||k.isVideoTexture===!0||re!==Nn&&re!==Za&&(Ri.getTransfer(re)===Ji?(Se!==oo||Me!==rc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",re)),E}function Ct(k){return typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement?(l.width=k.naturalWidth||k.width,l.height=k.naturalHeight||k.height):typeof VideoFrame<"u"&&k instanceof VideoFrame?(l.width=k.displayWidth,l.height=k.displayHeight):(l.width=k.width,l.height=k.height),l}this.allocateTextureUnit=V,this.resetTextureUnits=I,this.setTexture2D=ee,this.setTexture2DArray=ne,this.setTexture3D=B,this.setTextureCube=G,this.rebindTextures=Ne,this.setupRenderTarget=Ue,this.updateRenderTargetMipmap=O,this.updateMultisampleRenderTarget=Pe,this.setupDepthRenderbuffer=xe,this.setupFrameBufferTexture=Ce,this.useMultisampledRTT=Fe}function s3(n,e){function i(t,r=Za){let o,s=Ri.getTransfer(r);if(t===rc)return n.UNSIGNED_BYTE;if(t===QE)return n.UNSIGNED_SHORT_4_4_4_4;if(t===KE)return n.UNSIGNED_SHORT_5_5_5_1;if(t===PL)return n.UNSIGNED_INT_5_9_9_9_REV;if(t===AL)return n.BYTE;if(t===IL)return n.SHORT;if(t===kd)return n.UNSIGNED_SHORT;if(t===ZE)return n.INT;if(t===Fd)return n.UNSIGNED_INT;if(t===yr)return n.FLOAT;if(t===qi)return n.HALF_FLOAT;if(t===kL)return n.ALPHA;if(t===FL)return n.RGB;if(t===oo)return n.RGBA;if(t===jL)return n.LUMINANCE;if(t===OL)return n.LUMINANCE_ALPHA;if(t===Cd)return n.DEPTH_COMPONENT;if(t===gs)return n.DEPTH_STENCIL;if(t===Xd)return n.RED;if(t===JE)return n.RED_INTEGER;if(t===NL)return n.RG;if(t===eD)return n.RG_INTEGER;if(t===tD)return n.RGBA_INTEGER;if(t===F0||t===j0||t===O0||t===N0)if(s===Ji)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(t===F0)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(t===j0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(t===O0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(t===N0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(t===F0)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===j0)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===O0)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===N0)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(t===fC||t===mC||t===pC||t===gC)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(t===fC)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===mC)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===pC)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===gC)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(t===bC||t===_C||t===vC)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(t===bC||t===_C)return s===Ji?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(t===vC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(t===yC||t===xC||t===wC||t===MC||t===SC||t===RC||t===TC||t===CC||t===EC||t===DC||t===AC||t===IC||t===PC||t===kC)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(t===yC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(t===xC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(t===wC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(t===MC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(t===SC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(t===RC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(t===TC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(t===CC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(t===EC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(t===DC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(t===AC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(t===IC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(t===PC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(t===kC)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(t===L0||t===FC||t===jC)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(t===L0)return s===Ji?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(t===FC)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(t===jC)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(t===LL||t===OC||t===NC||t===LC)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(t===L0)return o.COMPRESSED_RED_RGTC1_EXT;if(t===OC)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(t===NC)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(t===LC)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return t===ps?n.UNSIGNED_INT_24_8:n[t]!==void 0?n[t]:null}return{convert:i}}var W0=class extends en{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},Cr=class extends Tt{constructor(){super(),this.isGroup=!0,this.type="Group"}},DK={type:"move"},bp=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Cr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Cr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new S,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new S),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Cr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new S,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new S),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let i=this._hand;if(i)for(let t of e.hand.values())this._getHandJoint(i,t)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,i,t){let r=null,o=null,s=null,a=this._targetRay,c=this._grip,l=this._hand;if(e&&i.session.visibilityState!=="visible-blurred"){if(l&&e.hand){s=!0;for(let b of e.hand.values()){let g=i.getJointPose(b,t),m=this._getHandJoint(l,b);g!==null&&(m.matrix.fromArray(g.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=g.radius),m.visible=g!==null}let d=l.joints["index-finger-tip"],u=l.joints["thumb-tip"],h=d.position.distanceTo(u.position),f=.02,p=.005;l.inputState.pinching&&h>f+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&h<=f-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(o=i.getPose(e.gripSpace,t),o!==null&&(c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,o.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(o.linearVelocity)):c.hasLinearVelocity=!1,o.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(o.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(r=i.getPose(e.targetRaySpace,t),r===null&&o!==null&&(r=o),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(DK)))}return a!==null&&(a.visible=r!==null),c!==null&&(c.visible=o!==null),l!==null&&(l.visible=s!==null),this}_getHandJoint(e,i){if(e.joints[i.jointName]===void 0){let t=new Cr;t.matrixAutoUpdate=!1,t.visible=!1,e.joints[i.jointName]=t,e.add(t)}return e.joints[i.jointName]}},AK=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,IK=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,tE=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,i,t){if(this.texture===null){let r=new vn,o=e.properties.get(r);o.__webglTexture=i.texture,(i.depthNear!=t.depthNear||i.depthFar!=t.depthFar)&&(this.depthNear=i.depthNear,this.depthFar=i.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){let i=e.cameras[0].viewport,t=new Ft({vertexShader:AK,fragmentShader:IK,uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new Ve(new na(20,20),t)}return this.mesh}reset(){this.texture=null,this.mesh=null}},iE=class extends jn{constructor(e,i){super();let t=this,r=null,o=1,s=null,a="local-floor",c=1,l=null,d=null,u=null,h=null,f=null,p=null,b=new tE,g=i.getContextAttributes(),m=null,v=null,_=[],y=[],C=new z,R=null,M=new en;M.layers.enable(1),M.viewport=new xi;let A=new en;A.layers.enable(2),A.viewport=new xi;let T=[M,A],x=new W0;x.layers.enable(1),x.layers.enable(2);let I=null,V=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Z){let Ce=_[Z];return Ce===void 0&&(Ce=new bp,_[Z]=Ce),Ce.getTargetRaySpace()},this.getControllerGrip=function(Z){let Ce=_[Z];return Ce===void 0&&(Ce=new bp,_[Z]=Ce),Ce.getGripSpace()},this.getHand=function(Z){let Ce=_[Z];return Ce===void 0&&(Ce=new bp,_[Z]=Ce),Ce.getHandSpace()};function W(Z){let Ce=y.indexOf(Z.inputSource);if(Ce===-1)return;let We=_[Ce];We!==void 0&&(We.update(Z.inputSource,Z.frame,l||s),We.dispatchEvent({type:Z.type,data:Z.inputSource}))}function ee(){r.removeEventListener("select",W),r.removeEventListener("selectstart",W),r.removeEventListener("selectend",W),r.removeEventListener("squeeze",W),r.removeEventListener("squeezestart",W),r.removeEventListener("squeezeend",W),r.removeEventListener("end",ee),r.removeEventListener("inputsourceschange",ne);for(let Z=0;Z<_.length;Z++){let Ce=y[Z];Ce!==null&&(y[Z]=null,_[Z].disconnect(Ce))}I=null,V=null,b.reset(),e.setRenderTarget(m),f=null,h=null,u=null,r=null,v=null,yt.stop(),t.isPresenting=!1,e.setPixelRatio(R),e.setSize(C.width,C.height,!1),t.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Z){o=Z,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Z){a=Z,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(Z){l=Z},this.getBaseLayer=function(){return h!==null?h:f},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=function(Z){return gi(this,null,function*(){if(r=Z,r!==null){if(m=e.getRenderTarget(),r.addEventListener("select",W),r.addEventListener("selectstart",W),r.addEventListener("selectend",W),r.addEventListener("squeeze",W),r.addEventListener("squeezestart",W),r.addEventListener("squeezeend",W),r.addEventListener("end",ee),r.addEventListener("inputsourceschange",ne),g.xrCompatible!==!0&&(yield i.makeXRCompatible()),R=e.getPixelRatio(),e.getSize(C),r.renderState.layers===void 0){let Ce={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:o};f=new XRWebGLLayer(r,i,Ce),r.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),v=new ci(f.framebufferWidth,f.framebufferHeight,{format:oo,type:rc,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})}else{let Ce=null,We=null,N=null;g.depth&&(N=g.stencil?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24,Ce=g.stencil?gs:Cd,We=g.stencil?ps:Fd);let xe={colorFormat:i.RGBA8,depthFormat:N,scaleFactor:o};u=new XRWebGLBinding(r,i),h=u.createProjectionLayer(xe),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),v=new ci(h.textureWidth,h.textureHeight,{format:oo,type:rc,depthTexture:new bs(h.textureWidth,h.textureHeight,We,void 0,void 0,void 0,void 0,void 0,void 0,Ce),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}v.isXRRenderTarget=!0,this.setFoveation(c),l=null,s=yield r.requestReferenceSpace(a),yt.setContext(r),yt.start(),t.isPresenting=!0,t.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function ne(Z){for(let Ce=0;Ce<Z.removed.length;Ce++){let We=Z.removed[Ce],N=y.indexOf(We);N>=0&&(y[N]=null,_[N].disconnect(We))}for(let Ce=0;Ce<Z.added.length;Ce++){let We=Z.added[Ce],N=y.indexOf(We);if(N===-1){for(let Ne=0;Ne<_.length;Ne++)if(Ne>=y.length){y.push(We),N=Ne;break}else if(y[Ne]===null){y[Ne]=We,N=Ne;break}if(N===-1)break}let xe=_[N];xe&&xe.connect(We)}}let B=new S,G=new S;function U(Z,Ce,We){B.setFromMatrixPosition(Ce.matrixWorld),G.setFromMatrixPosition(We.matrixWorld);let N=B.distanceTo(G),xe=Ce.projectionMatrix.elements,Ne=We.projectionMatrix.elements,Ue=xe[14]/(xe[10]-1),O=xe[14]/(xe[10]+1),ye=(xe[9]+1)/xe[5],Re=(xe[9]-1)/xe[5],Pe=(xe[8]-1)/xe[0],Ae=(Ne[8]+1)/Ne[0],Fe=Ue*Pe,Ke=Ue*Ae,Xe=N/(-Pe+Ae),Ct=Xe*-Pe;Ce.matrixWorld.decompose(Z.position,Z.quaternion,Z.scale),Z.translateX(Ct),Z.translateZ(Xe),Z.matrixWorld.compose(Z.position,Z.quaternion,Z.scale),Z.matrixWorldInverse.copy(Z.matrixWorld).invert();let k=Ue+Xe,E=O+Xe,re=Fe-Ct,Se=Ke+(N-Ct),Me=ye*O/E*k,De=Re*O/E*k;Z.projectionMatrix.makePerspective(re,Se,Me,De,k,E),Z.projectionMatrixInverse.copy(Z.projectionMatrix).invert()}function se(Z,Ce){Ce===null?Z.matrixWorld.copy(Z.matrix):Z.matrixWorld.multiplyMatrices(Ce.matrixWorld,Z.matrix),Z.matrixWorldInverse.copy(Z.matrixWorld).invert()}this.updateCamera=function(Z){if(r===null)return;b.texture!==null&&(Z.near=b.depthNear,Z.far=b.depthFar),x.near=A.near=M.near=Z.near,x.far=A.far=M.far=Z.far,(I!==x.near||V!==x.far)&&(r.updateRenderState({depthNear:x.near,depthFar:x.far}),I=x.near,V=x.far,M.near=I,M.far=V,A.near=I,A.far=V,M.updateProjectionMatrix(),A.updateProjectionMatrix(),Z.updateProjectionMatrix());let Ce=Z.parent,We=x.cameras;se(x,Ce);for(let N=0;N<We.length;N++)se(We[N],Ce);We.length===2?U(x,M,A):x.projectionMatrix.copy(M.projectionMatrix),Te(Z,x,Ce)};function Te(Z,Ce,We){We===null?Z.matrix.copy(Ce.matrixWorld):(Z.matrix.copy(We.matrixWorld),Z.matrix.invert(),Z.matrix.multiply(Ce.matrixWorld)),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale),Z.updateMatrixWorld(!0),Z.projectionMatrix.copy(Ce.projectionMatrix),Z.projectionMatrixInverse.copy(Ce.projectionMatrixInverse),Z.isPerspectiveCamera&&(Z.fov=Gh*2*Math.atan(1/Z.projectionMatrix.elements[5]),Z.zoom=1)}this.getCamera=function(){return x},this.getFoveation=function(){if(!(h===null&&f===null))return c},this.setFoveation=function(Z){c=Z,h!==null&&(h.fixedFoveation=Z),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=Z)},this.hasDepthSensing=function(){return b.texture!==null},this.getDepthSensingMesh=function(){return b.getMesh(x)};let Ie=null;function Ze(Z,Ce){if(d=Ce.getViewerPose(l||s),p=Ce,d!==null){let We=d.views;f!==null&&(e.setRenderTargetFramebuffer(v,f.framebuffer),e.setRenderTarget(v));let N=!1;We.length!==x.cameras.length&&(x.cameras.length=0,N=!0);for(let Ne=0;Ne<We.length;Ne++){let Ue=We[Ne],O=null;if(f!==null)O=f.getViewport(Ue);else{let Re=u.getViewSubImage(h,Ue);O=Re.viewport,Ne===0&&(e.setRenderTargetTextures(v,Re.colorTexture,h.ignoreDepthValues?void 0:Re.depthStencilTexture),e.setRenderTarget(v))}let ye=T[Ne];ye===void 0&&(ye=new en,ye.layers.enable(Ne),ye.viewport=new xi,T[Ne]=ye),ye.matrix.fromArray(Ue.transform.matrix),ye.matrix.decompose(ye.position,ye.quaternion,ye.scale),ye.projectionMatrix.fromArray(Ue.projectionMatrix),ye.projectionMatrixInverse.copy(ye.projectionMatrix).invert(),ye.viewport.set(O.x,O.y,O.width,O.height),Ne===0&&(x.matrix.copy(ye.matrix),x.matrix.decompose(x.position,x.quaternion,x.scale)),N===!0&&x.cameras.push(ye)}let xe=r.enabledFeatures;if(xe&&xe.includes("depth-sensing")){let Ne=u.getDepthInformation(We[0]);Ne&&Ne.isValid&&Ne.texture&&b.init(e,Ne,r.renderState)}}for(let We=0;We<_.length;We++){let N=y[We],xe=_[We];N!==null&&xe!==void 0&&xe.update(N,Ce,l||s)}Ie&&Ie(Z,Ce),Ce.detectedPlanes&&t.dispatchEvent({type:"planesdetected",data:Ce}),p=null}let yt=new e3;yt.setAnimationLoop(Ze),this.setAnimationLoop=function(Z){Ie=Z},this.dispose=function(){}}},fd=new so,PK=new Be;function kK(n,e){function i(g,m){g.matrixAutoUpdate===!0&&g.updateMatrix(),m.value.copy(g.matrix)}function t(g,m){m.color.getRGB(g.fogColor.value,JL(n)),m.isFog?(g.fogNear.value=m.near,g.fogFar.value=m.far):m.isFogExp2&&(g.fogDensity.value=m.density)}function r(g,m,v,_,y){m.isMeshBasicMaterial||m.isMeshLambertMaterial?o(g,m):m.isMeshToonMaterial?(o(g,m),u(g,m)):m.isMeshPhongMaterial?(o(g,m),d(g,m)):m.isMeshStandardMaterial?(o(g,m),h(g,m),m.isMeshPhysicalMaterial&&f(g,m,y)):m.isMeshMatcapMaterial?(o(g,m),p(g,m)):m.isMeshDepthMaterial?o(g,m):m.isMeshDistanceMaterial?(o(g,m),b(g,m)):m.isMeshNormalMaterial?o(g,m):m.isLineBasicMaterial?(s(g,m),m.isLineDashedMaterial&&a(g,m)):m.isPointsMaterial?c(g,m,v,_):m.isSpriteMaterial?l(g,m):m.isShadowMaterial?(g.color.value.copy(m.color),g.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function o(g,m){g.opacity.value=m.opacity,m.color&&g.diffuse.value.copy(m.color),m.emissive&&g.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(g.map.value=m.map,i(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,i(m.alphaMap,g.alphaMapTransform)),m.bumpMap&&(g.bumpMap.value=m.bumpMap,i(m.bumpMap,g.bumpMapTransform),g.bumpScale.value=m.bumpScale,m.side===Wr&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,i(m.normalMap,g.normalMapTransform),g.normalScale.value.copy(m.normalScale),m.side===Wr&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,i(m.displacementMap,g.displacementMapTransform),g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap,i(m.emissiveMap,g.emissiveMapTransform)),m.specularMap&&(g.specularMap.value=m.specularMap,i(m.specularMap,g.specularMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);let v=e.get(m),_=v.envMap,y=v.envMapRotation;_&&(g.envMap.value=_,fd.copy(y),fd.x*=-1,fd.y*=-1,fd.z*=-1,_.isCubeTexture&&_.isRenderTargetTexture===!1&&(fd.y*=-1,fd.z*=-1),g.envMapRotation.value.setFromMatrix4(PK.makeRotationFromEuler(fd)),g.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=m.reflectivity,g.ior.value=m.ior,g.refractionRatio.value=m.refractionRatio),m.lightMap&&(g.lightMap.value=m.lightMap,g.lightMapIntensity.value=m.lightMapIntensity,i(m.lightMap,g.lightMapTransform)),m.aoMap&&(g.aoMap.value=m.aoMap,g.aoMapIntensity.value=m.aoMapIntensity,i(m.aoMap,g.aoMapTransform))}function s(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,m.map&&(g.map.value=m.map,i(m.map,g.mapTransform))}function a(g,m){g.dashSize.value=m.dashSize,g.totalSize.value=m.dashSize+m.gapSize,g.scale.value=m.scale}function c(g,m,v,_){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.size.value=m.size*v,g.scale.value=_*.5,m.map&&(g.map.value=m.map,i(m.map,g.uvTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,i(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function l(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.rotation.value=m.rotation,m.map&&(g.map.value=m.map,i(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,i(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function d(g,m){g.specular.value.copy(m.specular),g.shininess.value=Math.max(m.shininess,1e-4)}function u(g,m){m.gradientMap&&(g.gradientMap.value=m.gradientMap)}function h(g,m){g.metalness.value=m.metalness,m.metalnessMap&&(g.metalnessMap.value=m.metalnessMap,i(m.metalnessMap,g.metalnessMapTransform)),g.roughness.value=m.roughness,m.roughnessMap&&(g.roughnessMap.value=m.roughnessMap,i(m.roughnessMap,g.roughnessMapTransform)),m.envMap&&(g.envMapIntensity.value=m.envMapIntensity)}function f(g,m,v){g.ior.value=m.ior,m.sheen>0&&(g.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),g.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(g.sheenColorMap.value=m.sheenColorMap,i(m.sheenColorMap,g.sheenColorMapTransform)),m.sheenRoughnessMap&&(g.sheenRoughnessMap.value=m.sheenRoughnessMap,i(m.sheenRoughnessMap,g.sheenRoughnessMapTransform))),m.clearcoat>0&&(g.clearcoat.value=m.clearcoat,g.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(g.clearcoatMap.value=m.clearcoatMap,i(m.clearcoatMap,g.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,i(m.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(g.clearcoatNormalMap.value=m.clearcoatNormalMap,i(m.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===Wr&&g.clearcoatNormalScale.value.negate())),m.dispersion>0&&(g.dispersion.value=m.dispersion),m.iridescence>0&&(g.iridescence.value=m.iridescence,g.iridescenceIOR.value=m.iridescenceIOR,g.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(g.iridescenceMap.value=m.iridescenceMap,i(m.iridescenceMap,g.iridescenceMapTransform)),m.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=m.iridescenceThicknessMap,i(m.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),m.transmission>0&&(g.transmission.value=m.transmission,g.transmissionSamplerMap.value=v.texture,g.transmissionSamplerSize.value.set(v.width,v.height),m.transmissionMap&&(g.transmissionMap.value=m.transmissionMap,i(m.transmissionMap,g.transmissionMapTransform)),g.thickness.value=m.thickness,m.thicknessMap&&(g.thicknessMap.value=m.thicknessMap,i(m.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=m.attenuationDistance,g.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(g.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(g.anisotropyMap.value=m.anisotropyMap,i(m.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=m.specularIntensity,g.specularColor.value.copy(m.specularColor),m.specularColorMap&&(g.specularColorMap.value=m.specularColorMap,i(m.specularColorMap,g.specularColorMapTransform)),m.specularIntensityMap&&(g.specularIntensityMap.value=m.specularIntensityMap,i(m.specularIntensityMap,g.specularIntensityMapTransform))}function p(g,m){m.matcap&&(g.matcap.value=m.matcap)}function b(g,m){let v=e.get(m).light;g.referencePosition.value.setFromMatrixPosition(v.matrixWorld),g.nearDistance.value=v.shadow.camera.near,g.farDistance.value=v.shadow.camera.far}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function FK(n,e,i,t){let r={},o={},s=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(v,_){let y=_.program;t.uniformBlockBinding(v,y)}function l(v,_){let y=r[v.id];y===void 0&&(p(v),y=d(v),r[v.id]=y,v.addEventListener("dispose",g));let C=_.program;t.updateUBOMapping(v,C);let R=e.render.frame;o[v.id]!==R&&(h(v),o[v.id]=R)}function d(v){let _=u();v.__bindingPointIndex=_;let y=n.createBuffer(),C=v.__size,R=v.usage;return n.bindBuffer(n.UNIFORM_BUFFER,y),n.bufferData(n.UNIFORM_BUFFER,C,R),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,_,y),y}function u(){for(let v=0;v<a;v++)if(s.indexOf(v)===-1)return s.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(v){let _=r[v.id],y=v.uniforms,C=v.__cache;n.bindBuffer(n.UNIFORM_BUFFER,_);for(let R=0,M=y.length;R<M;R++){let A=Array.isArray(y[R])?y[R]:[y[R]];for(let T=0,x=A.length;T<x;T++){let I=A[T];if(f(I,R,T,C)===!0){let V=I.__offset,W=Array.isArray(I.value)?I.value:[I.value],ee=0;for(let ne=0;ne<W.length;ne++){let B=W[ne],G=b(B);typeof B=="number"||typeof B=="boolean"?(I.__data[0]=B,n.bufferSubData(n.UNIFORM_BUFFER,V+ee,I.__data)):B.isMatrix3?(I.__data[0]=B.elements[0],I.__data[1]=B.elements[1],I.__data[2]=B.elements[2],I.__data[3]=0,I.__data[4]=B.elements[3],I.__data[5]=B.elements[4],I.__data[6]=B.elements[5],I.__data[7]=0,I.__data[8]=B.elements[6],I.__data[9]=B.elements[7],I.__data[10]=B.elements[8],I.__data[11]=0):(B.toArray(I.__data,ee),ee+=G.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,V,I.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(v,_,y,C){let R=v.value,M=_+"_"+y;if(C[M]===void 0)return typeof R=="number"||typeof R=="boolean"?C[M]=R:C[M]=R.clone(),!0;{let A=C[M];if(typeof R=="number"||typeof R=="boolean"){if(A!==R)return C[M]=R,!0}else if(A.equals(R)===!1)return A.copy(R),!0}return!1}function p(v){let _=v.uniforms,y=0,C=16;for(let M=0,A=_.length;M<A;M++){let T=Array.isArray(_[M])?_[M]:[_[M]];for(let x=0,I=T.length;x<I;x++){let V=T[x],W=Array.isArray(V.value)?V.value:[V.value];for(let ee=0,ne=W.length;ee<ne;ee++){let B=W[ee],G=b(B),U=y%C;U!==0&&C-U<G.boundary&&(y+=C-U),V.__data=new Float32Array(G.storage/Float32Array.BYTES_PER_ELEMENT),V.__offset=y,y+=G.storage}}}let R=y%C;return R>0&&(y+=C-R),v.__size=y,v.__cache={},this}function b(v){let _={boundary:0,storage:0};return typeof v=="number"||typeof v=="boolean"?(_.boundary=4,_.storage=4):v.isVector2?(_.boundary=8,_.storage=8):v.isVector3||v.isColor?(_.boundary=16,_.storage=12):v.isVector4?(_.boundary=16,_.storage=16):v.isMatrix3?(_.boundary=48,_.storage=48):v.isMatrix4?(_.boundary=64,_.storage=64):v.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",v),_}function g(v){let _=v.target;_.removeEventListener("dispose",g);let y=s.indexOf(_.__bindingPointIndex);s.splice(y,1),n.deleteBuffer(r[_.id]),delete r[_.id],delete o[_.id]}function m(){for(let v in r)n.deleteBuffer(r[v]);s=[],r={},o={}}return{bind:c,update:l,dispose:m}}var oc=class{constructor(e={}){let{canvas:i=QL(),context:t=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:u=!1}=e;this.isWebGLRenderer=!0;let h;if(t!==null){if(typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=t.getContextAttributes().alpha}else h=s;let f=new Uint32Array(4),p=new Int32Array(4),b=null,g=null,m=[],v=[];this.domElement=i,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Fn,this.toneMapping=tc,this.toneMappingExposure=1;let _=this,y=!1,C=0,R=0,M=null,A=-1,T=null,x=new xi,I=new xi,V=null,W=new pe(0),ee=0,ne=i.width,B=i.height,G=1,U=null,se=null,Te=new xi(0,0,ne,B),Ie=new xi(0,0,ne,B),Ze=!1,yt=new Ld,Z=!1,Ce=!1,We=new Be,N=new S,xe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},Ne=!1;function Ue(){return M===null?G:1}let O=t;function ye(D,$){return i.getContext(D,$)}try{let D={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:d,failIfMajorPerformanceCaveat:u};if("setAttribute"in i&&i.setAttribute("data-engine",`three.js r${Fy}`),i.addEventListener("webglcontextlost",ce,!1),i.addEventListener("webglcontextrestored",Y,!1),i.addEventListener("webglcontextcreationerror",ue,!1),O===null){let $="webgl2";if(O=ye($,D),O===null)throw ye($)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(D){throw console.error("THREE.WebGLRenderer: "+D.message),D}let Re,Pe,Ae,Fe,Ke,Xe,Ct,k,E,re,Se,Me,De,mt,Ge,ze,Et,Oe,rt,li,Pt,Je,zt,Ht;function Ui(){Re=new eQ(O),Re.init(),Je=new s3(O,Re),Pe=new XZ(O,Re,e,Je),Ae=new CK(O),Fe=new nQ(O),Ke=new pK,Xe=new EK(O,Re,Ae,Ke,Pe,Je,Fe),Ct=new ZZ(_),k=new JZ(_),E=new dX(O),zt=new $Z(O,E),re=new tQ(O,E,Fe,zt),Se=new oQ(O,re,E,Fe),rt=new rQ(O,Pe,Xe),ze=new YZ(Ke),Me=new mK(_,Ct,k,Re,Pe,zt,ze),De=new kK(_,Ke),mt=new bK,Ge=new MK(Re),Oe=new WZ(_,Ct,k,Ae,Se,h,c),Et=new TK(_,Se,Pe),Ht=new FK(O,Fe,Pe,Ae),li=new qZ(O,Re,Fe),Pt=new iQ(O,Re,Fe),Fe.programs=Me.programs,_.capabilities=Pe,_.extensions=Re,_.properties=Ke,_.renderLists=mt,_.shadowMap=Et,_.state=Ae,_.info=Fe}Ui();let w=new iE(_,O);this.xr=w,this.getContext=function(){return O},this.getContextAttributes=function(){return O.getContextAttributes()},this.forceContextLoss=function(){let D=Re.get("WEBGL_lose_context");D&&D.loseContext()},this.forceContextRestore=function(){let D=Re.get("WEBGL_lose_context");D&&D.restoreContext()},this.getPixelRatio=function(){return G},this.setPixelRatio=function(D){D!==void 0&&(G=D,this.setSize(ne,B,!1))},this.getSize=function(D){return D.set(ne,B)},this.setSize=function(D,$,oe=!0){if(w.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ne=D,B=$,i.width=Math.floor(D*G),i.height=Math.floor($*G),oe===!0&&(i.style.width=D+"px",i.style.height=$+"px"),this.setViewport(0,0,D,$)},this.getDrawingBufferSize=function(D){return D.set(ne*G,B*G).floor()},this.setDrawingBufferSize=function(D,$,oe){ne=D,B=$,G=oe,i.width=Math.floor(D*oe),i.height=Math.floor($*oe),this.setViewport(0,0,D,$)},this.getCurrentViewport=function(D){return D.copy(x)},this.getViewport=function(D){return D.copy(Te)},this.setViewport=function(D,$,oe,le){D.isVector4?Te.set(D.x,D.y,D.z,D.w):Te.set(D,$,oe,le),Ae.viewport(x.copy(Te).multiplyScalar(G).round())},this.getScissor=function(D){return D.copy(Ie)},this.setScissor=function(D,$,oe,le){D.isVector4?Ie.set(D.x,D.y,D.z,D.w):Ie.set(D,$,oe,le),Ae.scissor(I.copy(Ie).multiplyScalar(G).round())},this.getScissorTest=function(){return Ze},this.setScissorTest=function(D){Ae.setScissorTest(Ze=D)},this.setOpaqueSort=function(D){U=D},this.setTransparentSort=function(D){se=D},this.getClearColor=function(D){return D.copy(Oe.getClearColor())},this.setClearColor=function(){Oe.setClearColor.apply(Oe,arguments)},this.getClearAlpha=function(){return Oe.getClearAlpha()},this.setClearAlpha=function(){Oe.setClearAlpha.apply(Oe,arguments)},this.clear=function(D=!0,$=!0,oe=!0){let le=0;if(D){let X=!1;if(M!==null){let He=M.texture.format;X=He===tD||He===eD||He===JE}if(X){let He=M.texture.type,ot=He===rc||He===Fd||He===kd||He===ps||He===QE||He===KE,dt=Oe.getClearColor(),_t=Oe.getClearAlpha(),Ot=dt.r,Nt=dt.g,Dt=dt.b;ot?(f[0]=Ot,f[1]=Nt,f[2]=Dt,f[3]=_t,O.clearBufferuiv(O.COLOR,0,f)):(p[0]=Ot,p[1]=Nt,p[2]=Dt,p[3]=_t,O.clearBufferiv(O.COLOR,0,p))}else le|=O.COLOR_BUFFER_BIT}$&&(le|=O.DEPTH_BUFFER_BIT),oe&&(le|=O.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),O.clear(le)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",ce,!1),i.removeEventListener("webglcontextrestored",Y,!1),i.removeEventListener("webglcontextcreationerror",ue,!1),mt.dispose(),Ge.dispose(),Ke.dispose(),Ct.dispose(),k.dispose(),Se.dispose(),zt.dispose(),Ht.dispose(),Me.dispose(),w.dispose(),w.removeEventListener("sessionstart",Vn),w.removeEventListener("sessionend",zn),go.stop()};function ce(D){D.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function Y(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;let D=Fe.autoReset,$=Et.enabled,oe=Et.autoUpdate,le=Et.needsUpdate,X=Et.type;Ui(),Fe.autoReset=D,Et.enabled=$,Et.autoUpdate=oe,Et.needsUpdate=le,Et.type=X}function ue(D){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",D.statusMessage)}function ke(D){let $=D.target;$.removeEventListener("dispose",ke),Mt($)}function Mt(D){Gt(D),Ke.remove(D)}function Gt(D){let $=Ke.get(D).programs;$!==void 0&&($.forEach(function(oe){Me.releaseProgram(oe)}),D.isShaderMaterial&&Me.releaseShaderCache(D))}this.renderBufferDirect=function(D,$,oe,le,X,He){$===null&&($=xe);let ot=X.isMesh&&X.matrixWorld.determinant()<0,dt=r4(D,$,oe,le,X);Ae.setMaterial(le,ot);let _t=oe.index,Ot=1;if(le.wireframe===!0){if(_t=re.getWireframeAttribute(oe),_t===void 0)return;Ot=2}let Nt=oe.drawRange,Dt=oe.attributes.position,Pi=Nt.start*Ot,xn=(Nt.start+Nt.count)*Ot;He!==null&&(Pi=Math.max(Pi,He.start*Ot),xn=Math.min(xn,(He.start+He.count)*Ot)),_t!==null?(Pi=Math.max(Pi,0),xn=Math.min(xn,_t.count)):Dt!=null&&(Pi=Math.max(Pi,0),xn=Math.min(xn,Dt.count));let wn=xn-Pi;if(wn<0||wn===1/0)return;zt.setup(X,le,dt,oe,_t);let _o,Oi=li;if(_t!==null&&(_o=E.get(_t),Oi=Pt,Oi.setIndex(_o)),X.isMesh)le.wireframe===!0?(Ae.setLineWidth(le.wireframeLinewidth*Ue()),Oi.setMode(O.LINES)):Oi.setMode(O.TRIANGLES);else if(X.isLine){let St=le.linewidth;St===void 0&&(St=1),Ae.setLineWidth(St*Ue()),X.isLineSegments?Oi.setMode(O.LINES):X.isLineLoop?Oi.setMode(O.LINE_LOOP):Oi.setMode(O.LINE_STRIP)}else X.isPoints?Oi.setMode(O.POINTS):X.isSprite&&Oi.setMode(O.TRIANGLES);if(X.isBatchedMesh)X._multiDrawInstances!==null?Oi.renderMultiDrawInstances(X._multiDrawStarts,X._multiDrawCounts,X._multiDrawCount,X._multiDrawInstances):Oi.renderMultiDraw(X._multiDrawStarts,X._multiDrawCounts,X._multiDrawCount);else if(X.isInstancedMesh)Oi.renderInstances(Pi,wn,X.count);else if(oe.isInstancedBufferGeometry){let St=oe._maxInstanceCount!==void 0?oe._maxInstanceCount:1/0,jr=Math.min(oe.instanceCount,St);Oi.renderInstances(Pi,wn,jr)}else Oi.render(Pi,wn)};function yn(D,$,oe){D.transparent===!0&&D.side===Kn&&D.forceSinglePass===!1?(D.side=Wr,D.needsUpdate=!0,eb(D,$,oe),D.side=ms,D.needsUpdate=!0,eb(D,$,oe),D.side=Kn):eb(D,$,oe)}this.compile=function(D,$,oe=null){oe===null&&(oe=D),g=Ge.get(oe),g.init($),v.push(g),oe.traverseVisible(function(X){X.isLight&&X.layers.test($.layers)&&(g.pushLight(X),X.castShadow&&g.pushShadow(X))}),D!==oe&&D.traverseVisible(function(X){X.isLight&&X.layers.test($.layers)&&(g.pushLight(X),X.castShadow&&g.pushShadow(X))}),g.setupLights();let le=new Set;return D.traverse(function(X){let He=X.material;if(He)if(Array.isArray(He))for(let ot=0;ot<He.length;ot++){let dt=He[ot];yn(dt,oe,X),le.add(dt)}else yn(He,oe,X),le.add(He)}),v.pop(),g=null,le},this.compileAsync=function(D,$,oe=null){let le=this.compile(D,$,oe);return new Promise(X=>{function He(){if(le.forEach(function(ot){Ke.get(ot).currentProgram.isReady()&&le.delete(ot)}),le.size===0){X(D);return}setTimeout(He,10)}Re.get("KHR_parallel_shader_compile")!==null?He():setTimeout(He,10)})};let Un=null;function Ii(D){Un&&Un(D)}function Vn(){go.stop()}function zn(){go.start()}let go=new e3;go.setAnimationLoop(Ii),typeof self<"u"&&go.setContext(self),this.setAnimationLoop=function(D){Un=D,w.setAnimationLoop(D),D===null?go.stop():go.start()},w.addEventListener("sessionstart",Vn),w.addEventListener("sessionend",zn),this.render=function(D,$){if($!==void 0&&$.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;if(D.matrixWorldAutoUpdate===!0&&D.updateMatrixWorld(),$.parent===null&&$.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),w.enabled===!0&&w.isPresenting===!0&&(w.cameraAutoUpdate===!0&&w.updateCamera($),$=w.getCamera()),D.isScene===!0&&D.onBeforeRender(_,D,$,M),g=Ge.get(D,v.length),g.init($),v.push(g),We.multiplyMatrices($.projectionMatrix,$.matrixWorldInverse),yt.setFromProjectionMatrix(We),Ce=this.localClippingEnabled,Z=ze.init(this.clippingPlanes,Ce),b=mt.get(D,m.length),b.init(),m.push(b),w.enabled===!0&&w.isPresenting===!0){let He=_.xr.getDepthSensingMesh();He!==null&&bo(He,$,-1/0,_.sortObjects)}bo(D,$,0,_.sortObjects),b.finish(),_.sortObjects===!0&&b.sort(U,se),Ne=w.enabled===!1||w.isPresenting===!1||w.hasDepthSensing()===!1,Ne&&Oe.addToRenderList(b,D),this.info.render.frame++,Z===!0&&ze.beginShadows();let oe=g.state.shadowsArray;Et.render(oe,D,$),Z===!0&&ze.endShadows(),this.info.autoReset===!0&&this.info.reset();let le=b.opaque,X=b.transmissive;if(g.setupLights(),$.isArrayCamera){let He=$.cameras;if(X.length>0)for(let ot=0,dt=He.length;ot<dt;ot++){let _t=He[ot];Pl(le,X,D,_t)}Ne&&Oe.render(D);for(let ot=0,dt=He.length;ot<dt;ot++){let _t=He[ot];Cc(b,D,_t,_t.viewport)}}else X.length>0&&Pl(le,X,D,$),Ne&&Oe.render(D),Cc(b,D,$);M!==null&&(Xe.updateMultisampleRenderTarget(M),Xe.updateRenderTargetMipmap(M)),D.isScene===!0&&D.onAfterRender(_,D,$),zt.resetDefaultState(),A=-1,T=null,v.pop(),v.length>0?(g=v[v.length-1],Z===!0&&ze.setGlobalState(_.clippingPlanes,g.state.camera)):g=null,m.pop(),m.length>0?b=m[m.length-1]:b=null};function bo(D,$,oe,le){if(D.visible===!1)return;if(D.layers.test($.layers)){if(D.isGroup)oe=D.renderOrder;else if(D.isLOD)D.autoUpdate===!0&&D.update($);else if(D.isLight)g.pushLight(D),D.castShadow&&g.pushShadow(D);else if(D.isSprite){if(!D.frustumCulled||yt.intersectsSprite(D)){le&&N.setFromMatrixPosition(D.matrixWorld).applyMatrix4(We);let ot=Se.update(D),dt=D.material;dt.visible&&b.push(D,ot,dt,oe,N.z,null)}}else if((D.isMesh||D.isLine||D.isPoints)&&(!D.frustumCulled||yt.intersectsObject(D))){let ot=Se.update(D),dt=D.material;if(le&&(D.boundingSphere!==void 0?(D.boundingSphere===null&&D.computeBoundingSphere(),N.copy(D.boundingSphere.center)):(ot.boundingSphere===null&&ot.computeBoundingSphere(),N.copy(ot.boundingSphere.center)),N.applyMatrix4(D.matrixWorld).applyMatrix4(We)),Array.isArray(dt)){let _t=ot.groups;for(let Ot=0,Nt=_t.length;Ot<Nt;Ot++){let Dt=_t[Ot],Pi=dt[Dt.materialIndex];Pi&&Pi.visible&&b.push(D,ot,Pi,oe,N.z,Dt)}}else dt.visible&&b.push(D,ot,dt,oe,N.z,null)}}let He=D.children;for(let ot=0,dt=He.length;ot<dt;ot++)bo(He[ot],$,oe,le)}function Cc(D,$,oe,le){let X=D.opaque,He=D.transmissive,ot=D.transparent;g.setupLightsView(oe),Z===!0&&ze.setGlobalState(_.clippingPlanes,oe),le&&Ae.viewport(x.copy(le)),X.length>0&&kl(X,$,oe),He.length>0&&kl(He,$,oe),ot.length>0&&kl(ot,$,oe),Ae.buffers.depth.setTest(!0),Ae.buffers.depth.setMask(!0),Ae.buffers.color.setMask(!0),Ae.setPolygonOffset(!1)}function Pl(D,$,oe,le){if((oe.isScene===!0?oe.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[le.id]===void 0&&(g.state.transmissionRenderTarget[le.id]=new ci(1,1,{generateMipmaps:!0,type:Re.has("EXT_color_buffer_half_float")||Re.has("EXT_color_buffer_float")?qi:rc,minFilter:Co,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Ri.workingColorSpace}));let He=g.state.transmissionRenderTarget[le.id],ot=le.viewport||x;He.setSize(ot.z,ot.w);let dt=_.getRenderTarget();_.setRenderTarget(He),_.getClearColor(W),ee=_.getClearAlpha(),ee<1&&_.setClearColor(16777215,.5),Ne?Oe.render(oe):_.clear();let _t=_.toneMapping;_.toneMapping=tc;let Ot=le.viewport;if(le.viewport!==void 0&&(le.viewport=void 0),g.setupLightsView(le),Z===!0&&ze.setGlobalState(_.clippingPlanes,le),kl(D,oe,le),Xe.updateMultisampleRenderTarget(He),Xe.updateRenderTargetMipmap(He),Re.has("WEBGL_multisampled_render_to_texture")===!1){let Nt=!1;for(let Dt=0,Pi=$.length;Dt<Pi;Dt++){let xn=$[Dt],wn=xn.object,_o=xn.geometry,Oi=xn.material,St=xn.group;if(Oi.side===Kn&&wn.layers.test(le.layers)){let jr=Oi.side;Oi.side=Wr,Oi.needsUpdate=!0,MI(wn,oe,le,_o,Oi,St),Oi.side=jr,Oi.needsUpdate=!0,Nt=!0}}Nt===!0&&(Xe.updateMultisampleRenderTarget(He),Xe.updateRenderTargetMipmap(He))}_.setRenderTarget(dt),_.setClearColor(W,ee),Ot!==void 0&&(le.viewport=Ot),_.toneMapping=_t}function kl(D,$,oe){let le=$.isScene===!0?$.overrideMaterial:null;for(let X=0,He=D.length;X<He;X++){let ot=D[X],dt=ot.object,_t=ot.geometry,Ot=le===null?ot.material:le,Nt=ot.group;dt.layers.test(oe.layers)&&MI(dt,$,oe,_t,Ot,Nt)}}function MI(D,$,oe,le,X,He){D.onBeforeRender(_,$,oe,le,X,He),D.modelViewMatrix.multiplyMatrices(oe.matrixWorldInverse,D.matrixWorld),D.normalMatrix.getNormalMatrix(D.modelViewMatrix),X.onBeforeRender(_,$,oe,le,D,He),X.transparent===!0&&X.side===Kn&&X.forceSinglePass===!1?(X.side=Wr,X.needsUpdate=!0,_.renderBufferDirect(oe,$,le,X,D,He),X.side=ms,X.needsUpdate=!0,_.renderBufferDirect(oe,$,le,X,D,He),X.side=Kn):_.renderBufferDirect(oe,$,le,X,D,He),D.onAfterRender(_,$,oe,le,X,He)}function eb(D,$,oe){$.isScene!==!0&&($=xe);let le=Ke.get(D),X=g.state.lights,He=g.state.shadowsArray,ot=X.state.version,dt=Me.getParameters(D,X.state,He,$,oe),_t=Me.getProgramCacheKey(dt),Ot=le.programs;le.environment=D.isMeshStandardMaterial?$.environment:null,le.fog=$.fog,le.envMap=(D.isMeshStandardMaterial?k:Ct).get(D.envMap||le.environment),le.envMapRotation=le.environment!==null&&D.envMap===null?$.environmentRotation:D.envMapRotation,Ot===void 0&&(D.addEventListener("dispose",ke),Ot=new Map,le.programs=Ot);let Nt=Ot.get(_t);if(Nt!==void 0){if(le.currentProgram===Nt&&le.lightsStateVersion===ot)return RI(D,dt),Nt}else dt.uniforms=Me.getUniforms(D),D.onBuild(oe,dt,_),D.onBeforeCompile(dt,_),Nt=Me.acquireProgram(dt,_t),Ot.set(_t,Nt),le.uniforms=dt.uniforms;let Dt=le.uniforms;return(!D.isShaderMaterial&&!D.isRawShaderMaterial||D.clipping===!0)&&(Dt.clippingPlanes=ze.uniform),RI(D,dt),le.needsLights=s4(D),le.lightsStateVersion=ot,le.needsLights&&(Dt.ambientLightColor.value=X.state.ambient,Dt.lightProbe.value=X.state.probe,Dt.directionalLights.value=X.state.directional,Dt.directionalLightShadows.value=X.state.directionalShadow,Dt.spotLights.value=X.state.spot,Dt.spotLightShadows.value=X.state.spotShadow,Dt.rectAreaLights.value=X.state.rectArea,Dt.ltc_1.value=X.state.rectAreaLTC1,Dt.ltc_2.value=X.state.rectAreaLTC2,Dt.pointLights.value=X.state.point,Dt.pointLightShadows.value=X.state.pointShadow,Dt.hemisphereLights.value=X.state.hemi,Dt.directionalShadowMap.value=X.state.directionalShadowMap,Dt.directionalShadowMatrix.value=X.state.directionalShadowMatrix,Dt.spotShadowMap.value=X.state.spotShadowMap,Dt.spotLightMatrix.value=X.state.spotLightMatrix,Dt.spotLightMap.value=X.state.spotLightMap,Dt.pointShadowMap.value=X.state.pointShadowMap,Dt.pointShadowMatrix.value=X.state.pointShadowMatrix),le.currentProgram=Nt,le.uniformsList=null,Nt}function SI(D){if(D.uniformsList===null){let $=D.currentProgram.getUniforms();D.uniformsList=Hh.seqWithValue($.seq,D.uniforms)}return D.uniformsList}function RI(D,$){let oe=Ke.get(D);oe.outputColorSpace=$.outputColorSpace,oe.batching=$.batching,oe.batchingColor=$.batchingColor,oe.instancing=$.instancing,oe.instancingColor=$.instancingColor,oe.instancingMorph=$.instancingMorph,oe.skinning=$.skinning,oe.morphTargets=$.morphTargets,oe.morphNormals=$.morphNormals,oe.morphColors=$.morphColors,oe.morphTargetsCount=$.morphTargetsCount,oe.numClippingPlanes=$.numClippingPlanes,oe.numIntersection=$.numClipIntersection,oe.vertexAlphas=$.vertexAlphas,oe.vertexTangents=$.vertexTangents,oe.toneMapping=$.toneMapping}function r4(D,$,oe,le,X){$.isScene!==!0&&($=xe),Xe.resetTextureUnits();let He=$.fog,ot=le.isMeshStandardMaterial?$.environment:null,dt=M===null?_.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:Nn,_t=(le.isMeshStandardMaterial?k:Ct).get(le.envMap||ot),Ot=le.vertexColors===!0&&!!oe.attributes.color&&oe.attributes.color.itemSize===4,Nt=!!oe.attributes.tangent&&(!!le.normalMap||le.anisotropy>0),Dt=!!oe.morphAttributes.position,Pi=!!oe.morphAttributes.normal,xn=!!oe.morphAttributes.color,wn=tc;le.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(wn=_.toneMapping);let _o=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,Oi=_o!==void 0?_o.length:0,St=Ke.get(le),jr=g.state.lights;if(Z===!0&&(Ce===!0||D!==T)){let Oo=D===T&&le.id===A;ze.setState(le,D,Oo)}let Vi=!1;le.version===St.__version?(St.needsLights&&St.lightsStateVersion!==jr.state.version||St.outputColorSpace!==dt||X.isBatchedMesh&&St.batching===!1||!X.isBatchedMesh&&St.batching===!0||X.isBatchedMesh&&St.batchingColor===!0&&X.colorTexture===null||X.isBatchedMesh&&St.batchingColor===!1&&X.colorTexture!==null||X.isInstancedMesh&&St.instancing===!1||!X.isInstancedMesh&&St.instancing===!0||X.isSkinnedMesh&&St.skinning===!1||!X.isSkinnedMesh&&St.skinning===!0||X.isInstancedMesh&&St.instancingColor===!0&&X.instanceColor===null||X.isInstancedMesh&&St.instancingColor===!1&&X.instanceColor!==null||X.isInstancedMesh&&St.instancingMorph===!0&&X.morphTexture===null||X.isInstancedMesh&&St.instancingMorph===!1&&X.morphTexture!==null||St.envMap!==_t||le.fog===!0&&St.fog!==He||St.numClippingPlanes!==void 0&&(St.numClippingPlanes!==ze.numPlanes||St.numIntersection!==ze.numIntersection)||St.vertexAlphas!==Ot||St.vertexTangents!==Nt||St.morphTargets!==Dt||St.morphNormals!==Pi||St.morphColors!==xn||St.toneMapping!==wn||St.morphTargetsCount!==Oi)&&(Vi=!0):(Vi=!0,St.__version=le.version);let Ia=St.currentProgram;Vi===!0&&(Ia=eb(le,$,X));let tb=!1,Fl=!1,Mw=!1,nr=Ia.getUniforms(),Ec=St.uniforms;if(Ae.useProgram(Ia.program)&&(tb=!0,Fl=!0,Mw=!0),le.id!==A&&(A=le.id,Fl=!0),tb||T!==D){nr.setValue(O,"projectionMatrix",D.projectionMatrix),nr.setValue(O,"viewMatrix",D.matrixWorldInverse);let Oo=nr.map.cameraPosition;Oo!==void 0&&Oo.setValue(O,N.setFromMatrixPosition(D.matrixWorld)),Pe.logarithmicDepthBuffer&&nr.setValue(O,"logDepthBufFC",2/(Math.log(D.far+1)/Math.LN2)),(le.isMeshPhongMaterial||le.isMeshToonMaterial||le.isMeshLambertMaterial||le.isMeshBasicMaterial||le.isMeshStandardMaterial||le.isShaderMaterial)&&nr.setValue(O,"isOrthographic",D.isOrthographicCamera===!0),T!==D&&(T=D,Fl=!0,Mw=!0)}if(X.isSkinnedMesh){nr.setOptional(O,X,"bindMatrix"),nr.setOptional(O,X,"bindMatrixInverse");let Oo=X.skeleton;Oo&&(Oo.boneTexture===null&&Oo.computeBoneTexture(),nr.setValue(O,"boneTexture",Oo.boneTexture,Xe))}X.isBatchedMesh&&(nr.setOptional(O,X,"batchingTexture"),nr.setValue(O,"batchingTexture",X._matricesTexture,Xe),nr.setOptional(O,X,"batchingColorTexture"),X._colorsTexture!==null&&nr.setValue(O,"batchingColorTexture",X._colorsTexture,Xe));let Sw=oe.morphAttributes;if((Sw.position!==void 0||Sw.normal!==void 0||Sw.color!==void 0)&&rt.update(X,oe,Ia),(Fl||St.receiveShadow!==X.receiveShadow)&&(St.receiveShadow=X.receiveShadow,nr.setValue(O,"receiveShadow",X.receiveShadow)),le.isMeshGouraudMaterial&&le.envMap!==null&&(Ec.envMap.value=_t,Ec.flipEnvMap.value=_t.isCubeTexture&&_t.isRenderTargetTexture===!1?-1:1),le.isMeshStandardMaterial&&le.envMap===null&&$.environment!==null&&(Ec.envMapIntensity.value=$.environmentIntensity),Fl&&(nr.setValue(O,"toneMappingExposure",_.toneMappingExposure),St.needsLights&&o4(Ec,Mw),He&&le.fog===!0&&De.refreshFogUniforms(Ec,He),De.refreshMaterialUniforms(Ec,le,G,B,g.state.transmissionRenderTarget[D.id]),Hh.upload(O,SI(St),Ec,Xe)),le.isShaderMaterial&&le.uniformsNeedUpdate===!0&&(Hh.upload(O,SI(St),Ec,Xe),le.uniformsNeedUpdate=!1),le.isSpriteMaterial&&nr.setValue(O,"center",X.center),nr.setValue(O,"modelViewMatrix",X.modelViewMatrix),nr.setValue(O,"normalMatrix",X.normalMatrix),nr.setValue(O,"modelMatrix",X.matrixWorld),le.isShaderMaterial||le.isRawShaderMaterial){let Oo=le.uniformsGroups;for(let Rw=0,a4=Oo.length;Rw<a4;Rw++){let TI=Oo[Rw];Ht.update(TI,Ia),Ht.bind(TI,Ia)}}return Ia}function o4(D,$){D.ambientLightColor.needsUpdate=$,D.lightProbe.needsUpdate=$,D.directionalLights.needsUpdate=$,D.directionalLightShadows.needsUpdate=$,D.pointLights.needsUpdate=$,D.pointLightShadows.needsUpdate=$,D.spotLights.needsUpdate=$,D.spotLightShadows.needsUpdate=$,D.rectAreaLights.needsUpdate=$,D.hemisphereLights.needsUpdate=$}function s4(D){return D.isMeshLambertMaterial||D.isMeshToonMaterial||D.isMeshPhongMaterial||D.isMeshStandardMaterial||D.isShadowMaterial||D.isShaderMaterial&&D.lights===!0}this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return R},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(D,$,oe){Ke.get(D.texture).__webglTexture=$,Ke.get(D.depthTexture).__webglTexture=oe;let le=Ke.get(D);le.__hasExternalTextures=!0,le.__autoAllocateDepthBuffer=oe===void 0,le.__autoAllocateDepthBuffer||Re.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),le.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(D,$){let oe=Ke.get(D);oe.__webglFramebuffer=$,oe.__useDefaultFramebuffer=$===void 0},this.setRenderTarget=function(D,$=0,oe=0){M=D,C=$,R=oe;let le=!0,X=null,He=!1,ot=!1;if(D){let _t=Ke.get(D);_t.__useDefaultFramebuffer!==void 0?(Ae.bindFramebuffer(O.FRAMEBUFFER,null),le=!1):_t.__webglFramebuffer===void 0?Xe.setupRenderTarget(D):_t.__hasExternalTextures&&Xe.rebindTextures(D,Ke.get(D.texture).__webglTexture,Ke.get(D.depthTexture).__webglTexture);let Ot=D.texture;(Ot.isData3DTexture||Ot.isDataArrayTexture||Ot.isCompressedArrayTexture)&&(ot=!0);let Nt=Ke.get(D).__webglFramebuffer;D.isWebGLCubeRenderTarget?(Array.isArray(Nt[$])?X=Nt[$][oe]:X=Nt[$],He=!0):D.samples>0&&Xe.useMultisampledRTT(D)===!1?X=Ke.get(D).__webglMultisampledFramebuffer:Array.isArray(Nt)?X=Nt[oe]:X=Nt,x.copy(D.viewport),I.copy(D.scissor),V=D.scissorTest}else x.copy(Te).multiplyScalar(G).floor(),I.copy(Ie).multiplyScalar(G).floor(),V=Ze;if(Ae.bindFramebuffer(O.FRAMEBUFFER,X)&&le&&Ae.drawBuffers(D,X),Ae.viewport(x),Ae.scissor(I),Ae.setScissorTest(V),He){let _t=Ke.get(D.texture);O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_CUBE_MAP_POSITIVE_X+$,_t.__webglTexture,oe)}else if(ot){let _t=Ke.get(D.texture),Ot=$||0;O.framebufferTextureLayer(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,_t.__webglTexture,oe||0,Ot)}A=-1},this.readRenderTargetPixels=function(D,$,oe,le,X,He,ot){if(!(D&&D.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let dt=Ke.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&ot!==void 0&&(dt=dt[ot]),dt){Ae.bindFramebuffer(O.FRAMEBUFFER,dt);try{let _t=D.texture,Ot=_t.format,Nt=_t.type;if(!Pe.textureFormatReadable(Ot)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Pe.textureTypeReadable(Nt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}$>=0&&$<=D.width-le&&oe>=0&&oe<=D.height-X&&O.readPixels($,oe,le,X,Je.convert(Ot),Je.convert(Nt),He)}finally{let _t=M!==null?Ke.get(M).__webglFramebuffer:null;Ae.bindFramebuffer(O.FRAMEBUFFER,_t)}}},this.readRenderTargetPixelsAsync=function(D,$,oe,le,X,He,ot){return gi(this,null,function*(){if(!(D&&D.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let dt=Ke.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&ot!==void 0&&(dt=dt[ot]),dt){Ae.bindFramebuffer(O.FRAMEBUFFER,dt);try{let _t=D.texture,Ot=_t.format,Nt=_t.type;if(!Pe.textureFormatReadable(Ot))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Pe.textureTypeReadable(Nt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if($>=0&&$<=D.width-le&&oe>=0&&oe<=D.height-X){let Dt=O.createBuffer();O.bindBuffer(O.PIXEL_PACK_BUFFER,Dt),O.bufferData(O.PIXEL_PACK_BUFFER,He.byteLength,O.STREAM_READ),O.readPixels($,oe,le,X,Je.convert(Ot),Je.convert(Nt),0),O.flush();let Pi=O.fenceSync(O.SYNC_GPU_COMMANDS_COMPLETE,0);yield Hq(O,Pi,4);try{O.bindBuffer(O.PIXEL_PACK_BUFFER,Dt),O.getBufferSubData(O.PIXEL_PACK_BUFFER,0,He)}finally{O.deleteBuffer(Dt),O.deleteSync(Pi)}return He}}finally{let _t=M!==null?Ke.get(M).__webglFramebuffer:null;Ae.bindFramebuffer(O.FRAMEBUFFER,_t)}}})},this.copyFramebufferToTexture=function(D,$=null,oe=0){D.isTexture!==!0&&(console.warn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),$=arguments[0]||null,D=arguments[1]);let le=Math.pow(2,-oe),X=Math.floor(D.image.width*le),He=Math.floor(D.image.height*le),ot=$!==null?$.x:0,dt=$!==null?$.y:0;Xe.setTexture2D(D,0),O.copyTexSubImage2D(O.TEXTURE_2D,oe,0,0,ot,dt,X,He),Ae.unbindTexture()},this.copyTextureToTexture=function(D,$,oe=null,le=null,X=0){D.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture function signature has changed."),le=arguments[0]||null,D=arguments[1],$=arguments[2],X=arguments[3]||0,oe=null);let He,ot,dt,_t,Ot,Nt;oe!==null?(He=oe.max.x-oe.min.x,ot=oe.max.y-oe.min.y,dt=oe.min.x,_t=oe.min.y):(He=D.image.width,ot=D.image.height,dt=0,_t=0),le!==null?(Ot=le.x,Nt=le.y):(Ot=0,Nt=0);let Dt=Je.convert($.format),Pi=Je.convert($.type);Xe.setTexture2D($,0),O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,$.flipY),O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),O.pixelStorei(O.UNPACK_ALIGNMENT,$.unpackAlignment);let xn=O.getParameter(O.UNPACK_ROW_LENGTH),wn=O.getParameter(O.UNPACK_IMAGE_HEIGHT),_o=O.getParameter(O.UNPACK_SKIP_PIXELS),Oi=O.getParameter(O.UNPACK_SKIP_ROWS),St=O.getParameter(O.UNPACK_SKIP_IMAGES),jr=D.isCompressedTexture?D.mipmaps[X]:D.image;O.pixelStorei(O.UNPACK_ROW_LENGTH,jr.width),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,jr.height),O.pixelStorei(O.UNPACK_SKIP_PIXELS,dt),O.pixelStorei(O.UNPACK_SKIP_ROWS,_t),D.isDataTexture?O.texSubImage2D(O.TEXTURE_2D,X,Ot,Nt,He,ot,Dt,Pi,jr.data):D.isCompressedTexture?O.compressedTexSubImage2D(O.TEXTURE_2D,X,Ot,Nt,jr.width,jr.height,Dt,jr.data):O.texSubImage2D(O.TEXTURE_2D,X,Ot,Nt,Dt,Pi,jr),O.pixelStorei(O.UNPACK_ROW_LENGTH,xn),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,wn),O.pixelStorei(O.UNPACK_SKIP_PIXELS,_o),O.pixelStorei(O.UNPACK_SKIP_ROWS,Oi),O.pixelStorei(O.UNPACK_SKIP_IMAGES,St),X===0&&$.generateMipmaps&&O.generateMipmap(O.TEXTURE_2D),Ae.unbindTexture()},this.copyTextureToTexture3D=function(D,$,oe=null,le=null,X=0){D.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),oe=arguments[0]||null,le=arguments[1]||null,D=arguments[2],$=arguments[3],X=arguments[4]||0);let He,ot,dt,_t,Ot,Nt,Dt,Pi,xn,wn=D.isCompressedTexture?D.mipmaps[X]:D.image;oe!==null?(He=oe.max.x-oe.min.x,ot=oe.max.y-oe.min.y,dt=oe.max.z-oe.min.z,_t=oe.min.x,Ot=oe.min.y,Nt=oe.min.z):(He=wn.width,ot=wn.height,dt=wn.depth,_t=0,Ot=0,Nt=0),le!==null?(Dt=le.x,Pi=le.y,xn=le.z):(Dt=0,Pi=0,xn=0);let _o=Je.convert($.format),Oi=Je.convert($.type),St;if($.isData3DTexture)Xe.setTexture3D($,0),St=O.TEXTURE_3D;else if($.isDataArrayTexture||$.isCompressedArrayTexture)Xe.setTexture2DArray($,0),St=O.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,$.flipY),O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),O.pixelStorei(O.UNPACK_ALIGNMENT,$.unpackAlignment);let jr=O.getParameter(O.UNPACK_ROW_LENGTH),Vi=O.getParameter(O.UNPACK_IMAGE_HEIGHT),Ia=O.getParameter(O.UNPACK_SKIP_PIXELS),tb=O.getParameter(O.UNPACK_SKIP_ROWS),Fl=O.getParameter(O.UNPACK_SKIP_IMAGES);O.pixelStorei(O.UNPACK_ROW_LENGTH,wn.width),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,wn.height),O.pixelStorei(O.UNPACK_SKIP_PIXELS,_t),O.pixelStorei(O.UNPACK_SKIP_ROWS,Ot),O.pixelStorei(O.UNPACK_SKIP_IMAGES,Nt),D.isDataTexture||D.isData3DTexture?O.texSubImage3D(St,X,Dt,Pi,xn,He,ot,dt,_o,Oi,wn.data):$.isCompressedArrayTexture?O.compressedTexSubImage3D(St,X,Dt,Pi,xn,He,ot,dt,_o,wn.data):O.texSubImage3D(St,X,Dt,Pi,xn,He,ot,dt,_o,Oi,wn),O.pixelStorei(O.UNPACK_ROW_LENGTH,jr),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,Vi),O.pixelStorei(O.UNPACK_SKIP_PIXELS,Ia),O.pixelStorei(O.UNPACK_SKIP_ROWS,tb),O.pixelStorei(O.UNPACK_SKIP_IMAGES,Fl),X===0&&$.generateMipmaps&&O.generateMipmap(St),Ae.unbindTexture()},this.initRenderTarget=function(D){Ke.get(D).__webglFramebuffer===void 0&&Xe.setupRenderTarget(D)},this.initTexture=function(D){D.isCubeTexture?Xe.setTextureCube(D,0):D.isData3DTexture?Xe.setTexture3D(D,0):D.isDataArrayTexture||D.isCompressedArrayTexture?Xe.setTexture2DArray(D,0):Xe.setTexture2D(D,0),Ae.unbindTexture()},this.resetState=function(){C=0,R=0,M=null,Ae.reset(),zt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ea}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let i=this.getContext();i.drawingBufferColorSpace=e===Ly?"display-p3":"srgb",i.unpackColorSpace=Ri.workingColorSpace===ng?"display-p3":"srgb"}},$0=class n{constructor(e,i=25e-5){this.isFogExp2=!0,this.name="",this.color=new pe(e),this.density=i}clone(){return new n(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}},Xh=class n{constructor(e,i=1,t=1e3){this.isFog=!0,this.name="",this.color=new pe(e),this.near=i,this.far=t}clone(){return new n(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}},Yh=class extends Tt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new so,this.environmentIntensity=1,this.environmentRotation=new so,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,i){return super.copy(e,i),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let i=super.toJSON(e);return this.fog!==null&&(i.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(i.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(i.object.backgroundIntensity=this.backgroundIntensity),i.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(i.object.environmentIntensity=this.environmentIntensity),i.object.environmentRotation=this.environmentRotation.toArray(),i}},sc=class{constructor(e,i){this.isInterleavedBuffer=!0,this.array=e,this.stride=i,this.count=e!==void 0?e.length/i:0,this.usage=Cp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Eo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return sD("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,i){this.updateRanges.push({start:e,count:i})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,i,t){e*=this.stride,t*=i.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=i.array[t+r];return this}set(e,i=0){return this.array.set(e,i),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Eo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let i=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),t=new this.constructor(i,this.stride);return t.setUsage(this.usage),t}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Eo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},zr=new S,ra=class n{constructor(e,i,t,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=i,this.offset=t,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let i=0,t=this.data.count;i<t;i++)zr.fromBufferAttribute(this,i),zr.applyMatrix4(e),this.setXYZ(i,zr.x,zr.y,zr.z);return this}applyNormalMatrix(e){for(let i=0,t=this.count;i<t;i++)zr.fromBufferAttribute(this,i),zr.applyNormalMatrix(e),this.setXYZ(i,zr.x,zr.y,zr.z);return this}transformDirection(e){for(let i=0,t=this.count;i<t;i++)zr.fromBufferAttribute(this,i),zr.transformDirection(e),this.setXYZ(i,zr.x,zr.y,zr.z);return this}getComponent(e,i){let t=this.array[e*this.data.stride+this.offset+i];return this.normalized&&(t=Gr(t,this.array)),t}setComponent(e,i,t){return this.normalized&&(t=ei(t,this.array)),this.data.array[e*this.data.stride+this.offset+i]=t,this}setX(e,i){return this.normalized&&(i=ei(i,this.array)),this.data.array[e*this.data.stride+this.offset]=i,this}setY(e,i){return this.normalized&&(i=ei(i,this.array)),this.data.array[e*this.data.stride+this.offset+1]=i,this}setZ(e,i){return this.normalized&&(i=ei(i,this.array)),this.data.array[e*this.data.stride+this.offset+2]=i,this}setW(e,i){return this.normalized&&(i=ei(i,this.array)),this.data.array[e*this.data.stride+this.offset+3]=i,this}getX(e){let i=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(i=Gr(i,this.array)),i}getY(e){let i=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(i=Gr(i,this.array)),i}getZ(e){let i=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(i=Gr(i,this.array)),i}getW(e){let i=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(i=Gr(i,this.array)),i}setXY(e,i,t){return e=e*this.data.stride+this.offset,this.normalized&&(i=ei(i,this.array),t=ei(t,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=t,this}setXYZ(e,i,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(i=ei(i,this.array),t=ei(t,this.array),r=ei(r,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=t,this.data.array[e+2]=r,this}setXYZW(e,i,t,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(i=ei(i,this.array),t=ei(t,this.array),r=ei(r,this.array),o=ei(o,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=t,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let i=[];for(let t=0;t<this.count;t++){let r=t*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)i.push(this.data.array[r+o])}return new hi(new this.array.constructor(i),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new n(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let i=[];for(let t=0;t<this.count;t++){let r=t*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)i.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:i,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},jp=class extends dn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new pe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},kh,sp=new S,Fh=new S,jh=new S,Oh=new z,ap=new z,a3=new Be,l0=new S,cp=new S,d0=new S,oN=new z,XT=new z,sN=new z,q0=class extends Tt{constructor(e=new jp){if(super(),this.isSprite=!0,this.type="Sprite",kh===void 0){kh=new bt;let i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new sc(i,5);kh.setIndex([0,1,2,0,2,3]),kh.setAttribute("position",new ra(t,3,0,!1)),kh.setAttribute("uv",new ra(t,2,3,!1))}this.geometry=kh,this.material=e,this.center=new z(.5,.5)}raycast(e,i){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Fh.setFromMatrixScale(this.matrixWorld),a3.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),jh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Fh.multiplyScalar(-jh.z);let t=this.material.rotation,r,o;t!==0&&(o=Math.cos(t),r=Math.sin(t));let s=this.center;u0(l0.set(-.5,-.5,0),jh,s,Fh,r,o),u0(cp.set(.5,-.5,0),jh,s,Fh,r,o),u0(d0.set(.5,.5,0),jh,s,Fh,r,o),oN.set(0,0),XT.set(1,0),sN.set(1,1);let a=e.ray.intersectTriangle(l0,cp,d0,!1,sp);if(a===null&&(u0(cp.set(-.5,.5,0),jh,s,Fh,r,o),XT.set(0,1),a=e.ray.intersectTriangle(l0,d0,cp,!1,sp),a===null))return;let c=e.ray.origin.distanceTo(sp);c<e.near||c>e.far||i.push({distance:c,point:sp.clone(),uv:Ja.getInterpolation(sp,l0,cp,d0,oN,XT,sN,new z),face:null,object:this})}copy(e,i){return super.copy(e,i),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}};function u0(n,e,i,t,r,o){Oh.subVectors(n,i).addScalar(.5).multiply(t),r!==void 0?(ap.x=o*Oh.x-r*Oh.y,ap.y=r*Oh.x+o*Oh.y):ap.copy(Oh),n.copy(e),n.x+=ap.x,n.y+=ap.y,n.applyMatrix4(a3)}var h0=new S,aN=new S,X0=class extends Tt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);let i=e.levels;for(let t=0,r=i.length;t<r;t++){let o=i[t];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,i=0,t=0){i=Math.abs(i);let r=this.levels,o;for(o=0;o<r.length&&!(i<r[o].distance);o++);return r.splice(o,0,{distance:i,hysteresis:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){let i=this.levels;if(i.length>0){let t,r;for(t=1,r=i.length;t<r;t++){let o=i[t].distance;if(i[t].object.visible&&(o-=o*i[t].hysteresis),e<o)break}return i[t-1].object}return null}raycast(e,i){if(this.levels.length>0){h0.setFromMatrixPosition(this.matrixWorld);let r=e.ray.origin.distanceTo(h0);this.getObjectForDistance(r).raycast(e,i)}}update(e){let i=this.levels;if(i.length>1){h0.setFromMatrixPosition(e.matrixWorld),aN.setFromMatrixPosition(this.matrixWorld);let t=h0.distanceTo(aN)/e.zoom;i[0].object.visible=!0;let r,o;for(r=1,o=i.length;r<o;r++){let s=i[r].distance;if(i[r].object.visible&&(s-=s*i[r].hysteresis),t>=s)i[r-1].object.visible=!1,i[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<o;r++)i[r].object.visible=!1}}toJSON(e){let i=super.toJSON(e);this.autoUpdate===!1&&(i.object.autoUpdate=!1),i.object.levels=[];let t=this.levels;for(let r=0,o=t.length;r<o;r++){let s=t[r];i.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return i}},cN=new S,lN=new xi,dN=new xi,jK=new S,uN=new Be,f0=new S,YT=new En,hN=new Be,ZT=new ia,Zh=class extends Ve{constructor(e,i){super(e,i),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=hC,this.bindMatrix=new Be,this.bindMatrixInverse=new Be,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;this.boundingBox===null&&(this.boundingBox=new _n),this.boundingBox.makeEmpty();let i=e.getAttribute("position");for(let t=0;t<i.count;t++)this.getVertexPosition(t,f0),this.boundingBox.expandByPoint(f0)}computeBoundingSphere(){let e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new En),this.boundingSphere.makeEmpty();let i=e.getAttribute("position");for(let t=0;t<i.count;t++)this.getVertexPosition(t,f0),this.boundingSphere.expandByPoint(f0)}copy(e,i){return super.copy(e,i),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,i){let t=this.material,r=this.matrixWorld;t!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),YT.copy(this.boundingSphere),YT.applyMatrix4(r),e.ray.intersectsSphere(YT)!==!1&&(hN.copy(r).invert(),ZT.copy(e.ray).applyMatrix4(hN),!(this.boundingBox!==null&&ZT.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,i,ZT)))}getVertexPosition(e,i){return super.getVertexPosition(e,i),this.applyBoneTransform(e,i),i}bind(e,i){this.skeleton=e,i===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),i=this.matrixWorld),this.bindMatrix.copy(i),this.bindMatrixInverse.copy(i).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new xi,i=this.geometry.attributes.skinWeight;for(let t=0,r=i.count;t<r;t++){e.fromBufferAttribute(i,t);let o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),i.setXYZW(t,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===hC?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===DL?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,i){let t=this.skeleton,r=this.geometry;lN.fromBufferAttribute(r.attributes.skinIndex,e),dN.fromBufferAttribute(r.attributes.skinWeight,e),cN.copy(i).applyMatrix4(this.bindMatrix),i.set(0,0,0);for(let o=0;o<4;o++){let s=dN.getComponent(o);if(s!==0){let a=lN.getComponent(o);uN.multiplyMatrices(t.bones[a].matrixWorld,t.boneInverses[a]),i.addScaledVector(jK.copy(cN).applyMatrix4(uN),s)}}return i.applyMatrix4(this.bindMatrixInverse)}},Ud=class extends Tt{constructor(){super(),this.isBone=!0,this.type="Bone"}},$r=class extends vn{constructor(e=null,i=1,t=1,r,o,s,a,c,l=ui,d=ui,u,h){super(null,s,a,c,l,d,r,o,u,h),this.isDataTexture=!0,this.image={data:e,width:i,height:t},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},fN=new Be,OK=new Be,Qh=class n{constructor(e=[],i=[]){this.uuid=Eo(),this.bones=e.slice(0),this.boneInverses=i,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,i=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),i.length===0)this.calculateInverses();else if(e.length!==i.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,r=this.bones.length;t<r;t++)this.boneInverses.push(new Be)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,i=this.bones.length;e<i;e++){let t=new Be;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,i=this.bones.length;e<i;e++){let t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,i=this.bones.length;e<i;e++){let t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){let e=this.bones,i=this.boneInverses,t=this.boneMatrices,r=this.boneTexture;for(let o=0,s=e.length;o<s;o++){let a=e[o]?e[o].matrixWorld:OK;fN.multiplyMatrices(a,i[o]),fN.toArray(t,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);let i=new Float32Array(e*e*4);i.set(this.boneMatrices);let t=new $r(i,e,e,oo,yr);return t.needsUpdate=!0,this.boneMatrices=i,this.boneTexture=t,this}getBoneByName(e){for(let i=0,t=this.bones.length;i<t;i++){let r=this.bones[i];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,i){this.uuid=e.uuid;for(let t=0,r=e.bones.length;t<r;t++){let o=e.bones[t],s=i[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new Ud),this.bones.push(s),this.boneInverses.push(new Be().fromArray(e.boneInverses[t]))}return this.init(),this}toJSON(){let e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let i=this.bones,t=this.boneInverses;for(let r=0,o=i.length;r<o;r++){let s=i[r];e.bones.push(s.uuid);let a=t[r];e.boneInverses.push(a.toArray())}return e}},_s=class extends hi{constructor(e,i,t,r=1){super(e,i,t),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},Nh=new Be,mN=new Be,m0=[],pN=new _n,NK=new Be,lp=new Ve,dp=new En,al=class extends Ve{constructor(e,i,t){super(e,i),this.isInstancedMesh=!0,this.instanceMatrix=new _s(new Float32Array(t*16),16),this.instanceColor=null,this.morphTexture=null,this.count=t,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<t;r++)this.setMatrixAt(r,NK)}computeBoundingBox(){let e=this.geometry,i=this.count;this.boundingBox===null&&(this.boundingBox=new _n),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let t=0;t<i;t++)this.getMatrixAt(t,Nh),pN.copy(e.boundingBox).applyMatrix4(Nh),this.boundingBox.union(pN)}computeBoundingSphere(){let e=this.geometry,i=this.count;this.boundingSphere===null&&(this.boundingSphere=new En),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let t=0;t<i;t++)this.getMatrixAt(t,Nh),dp.copy(e.boundingSphere).applyMatrix4(Nh),this.boundingSphere.union(dp)}copy(e,i){return super.copy(e,i),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,i){i.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,i){i.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,i){let t=i.morphTargetInfluences,r=this.morphTexture.source.data.data,o=t.length+1,s=e*o+1;for(let a=0;a<t.length;a++)t[a]=r[s+a]}raycast(e,i){let t=this.matrixWorld,r=this.count;if(lp.geometry=this.geometry,lp.material=this.material,lp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),dp.copy(this.boundingSphere),dp.applyMatrix4(t),e.ray.intersectsSphere(dp)!==!1))for(let o=0;o<r;o++){this.getMatrixAt(o,Nh),mN.multiplyMatrices(t,Nh),lp.matrixWorld=mN,lp.raycast(e,m0);for(let s=0,a=m0.length;s<a;s++){let c=m0[s];c.instanceId=o,c.object=this,i.push(c)}m0.length=0}}setColorAt(e,i){this.instanceColor===null&&(this.instanceColor=new _s(new Float32Array(this.instanceMatrix.count*3),3)),i.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,i){i.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,i){let t=i.morphTargetInfluences,r=t.length+1;this.morphTexture===null&&(this.morphTexture=new $r(new Float32Array(r*this.count),r,this.count,Xd,yr));let o=this.morphTexture.source.data.data,s=0;for(let l=0;l<t.length;l++)s+=t[l];let a=this.geometry.morphTargetsRelative?1:1-s,c=r*e;o[c]=a,o.set(t,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}};function LK(n,e){return n.z-e.z}function BK(n,e){return e.z-n.z}var nE=class{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,i){let t=this.pool,r=this.list;this.index>=t.length&&t.push({start:-1,count:-1,z:-1});let o=t[this.index];r.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=i}reset(){this.list.length=0,this.index=0}},Lh="batchId",il=new Be,QT=new Be,UK=new Be,VK=new pe(1,1,1),gN=new Be,KT=new Ld,p0=new _n,md=new En,up=new S,bN=new S,zK=new S,JT=new nE,Tr=new Ve,g0=[];function HK(n,e,i=0){let t=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){let r=n.count;for(let o=0;o<r;o++)for(let s=0;s<t;s++)e.setComponent(o+i,s,n.getComponent(o,s))}else e.array.set(n.array,i*t);e.needsUpdate=!0}var Y0=class extends Ve{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,i,t=i*2,r){super(new bt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=i,this._maxIndexCount=t,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture(),this._colorsTexture=null}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);let i=new Float32Array(e*e*4),t=new $r(i,e,e,oo,yr);this._matricesTexture=t}_initColorsTexture(){let e=Math.sqrt(this._maxGeometryCount);e=Math.ceil(e);let i=new Float32Array(e*e*4).fill(1),t=new $r(i,e,e,oo,yr);t.colorSpace=Ri.workingColorSpace,this._colorsTexture=t}_initializeGeometry(e){let i=this.geometry,t=this._maxVertexCount,r=this._maxGeometryCount,o=this._maxIndexCount;if(this._geometryInitialized===!1){for(let a in e.attributes){let c=e.getAttribute(a),{array:l,itemSize:d,normalized:u}=c,h=new l.constructor(t*d),f=new hi(h,d,u);i.setAttribute(a,f)}if(e.getIndex()!==null){let a=t>65536?new Uint32Array(o):new Uint16Array(o);i.setIndex(new hi(a,1))}let s=r>65536?new Uint32Array(t):new Uint16Array(t);i.setAttribute(Lh,new hi(s,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Lh))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Lh}"`);let i=this.geometry;if(!!e.getIndex()!=!!i.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(let t in i.attributes){if(t===Lh)continue;if(!e.hasAttribute(t))throw new Error(`BatchedMesh: Added geometry missing "${t}". All geometries must have consistent attributes.`);let r=e.getAttribute(t),o=i.getAttribute(t);if(r.itemSize!==o.itemSize||r.normalized!==o.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new _n);let e=this._geometryCount,i=this.boundingBox,t=this._active;i.makeEmpty();for(let r=0;r<e;r++)t[r]!==!1&&(this.getMatrixAt(r,il),this.getBoundingBoxAt(r,p0).applyMatrix4(il),i.union(p0))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new En);let e=this._geometryCount,i=this.boundingSphere,t=this._active;i.makeEmpty();for(let r=0;r<e;r++)t[r]!==!1&&(this.getMatrixAt(r,il),this.getBoundingSphereAt(r,md).applyMatrix4(il),i.union(md))}addGeometry(e,i=-1,t=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");let r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1},o=null,s=this._reservedRanges,a=this._drawRanges,c=this._bounds;this._geometryCount!==0&&(o=s[s.length-1]),i===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=i,o===null?r.vertexStart=0:r.vertexStart=o.vertexStart+o.vertexCount;let l=e.getIndex(),d=l!==null;if(d&&(t===-1?r.indexCount=l.count:r.indexCount=t,o===null?r.indexStart=0:r.indexStart=o.indexStart+o.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");let u=this._visibility,h=this._active,f=this._matricesTexture,p=this._matricesTexture.image.data,b=this._colorsTexture;u.push(!0),h.push(!0);let g=this._geometryCount;this._geometryCount++,UK.toArray(p,g*16),f.needsUpdate=!0,b!==null&&(VK.toArray(b.image.data,g*4),b.needsUpdate=!0),s.push(r),a.push({start:d?r.indexStart:r.vertexStart,count:-1}),c.push({boxInitialized:!1,box:new _n,sphereInitialized:!1,sphere:new En});let m=this.geometry.getAttribute(Lh);for(let v=0;v<r.vertexCount;v++)m.setX(r.vertexStart+v,g);return m.needsUpdate=!0,this.setGeometryAt(g,e),g}setGeometryAt(e,i){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(i);let t=this.geometry,r=t.getIndex()!==null,o=t.getIndex(),s=i.getIndex(),a=this._reservedRanges[e];if(r&&s.count>a.indexCount||i.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");let c=a.vertexStart,l=a.vertexCount;for(let f in t.attributes){if(f===Lh)continue;let p=i.getAttribute(f),b=t.getAttribute(f);HK(p,b,c);let g=p.itemSize;for(let m=p.count,v=l;m<v;m++){let _=c+m;for(let y=0;y<g;y++)b.setComponent(_,y,0)}b.needsUpdate=!0,b.addUpdateRange(c*g,l*g)}if(r){let f=a.indexStart;for(let p=0;p<s.count;p++)o.setX(f+p,c+s.getX(p));for(let p=s.count,b=a.indexCount;p<b;p++)o.setX(f+p,c);o.needsUpdate=!0,o.addUpdateRange(f,a.indexCount)}let d=this._bounds[e];i.boundingBox!==null?(d.box.copy(i.boundingBox),d.boxInitialized=!0):d.boxInitialized=!1,i.boundingSphere!==null?(d.sphere.copy(i.boundingSphere),d.sphereInitialized=!0):d.sphereInitialized=!1;let u=this._drawRanges[e],h=i.getAttribute("position");return u.count=r?s.count:h.count,this._visibilityChanged=!0,e}deleteGeometry(e){let i=this._active;return e>=i.length||i[e]===!1?this:(i[e]=!1,this._visibilityChanged=!0,this)}getInstanceCountAt(e){return this._multiDrawInstances===null?null:this._multiDrawInstances[e]}setInstanceCountAt(e,i){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[e]=i,e}getBoundingBoxAt(e,i){if(this._active[e]===!1)return null;let r=this._bounds[e],o=r.box,s=this.geometry;if(r.boxInitialized===!1){o.makeEmpty();let a=s.index,c=s.attributes.position,l=this._drawRanges[e];for(let d=l.start,u=l.start+l.count;d<u;d++){let h=d;a&&(h=a.getX(h)),o.expandByPoint(up.fromBufferAttribute(c,h))}r.boxInitialized=!0}return i.copy(o),i}getBoundingSphereAt(e,i){if(this._active[e]===!1)return null;let r=this._bounds[e],o=r.sphere,s=this.geometry;if(r.sphereInitialized===!1){o.makeEmpty(),this.getBoundingBoxAt(e,p0),p0.getCenter(o.center);let a=s.index,c=s.attributes.position,l=this._drawRanges[e],d=0;for(let u=l.start,h=l.start+l.count;u<h;u++){let f=u;a&&(f=a.getX(f)),up.fromBufferAttribute(c,f),d=Math.max(d,o.center.distanceToSquared(up))}o.radius=Math.sqrt(d),r.sphereInitialized=!0}return i.copy(o),i}setMatrixAt(e,i){let t=this._active,r=this._matricesTexture,o=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||t[e]===!1?this:(i.toArray(o,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,i){let t=this._active,r=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||t[e]===!1?null:i.fromArray(r,e*16)}setColorAt(e,i){this._colorsTexture===null&&this._initColorsTexture();let t=this._active,r=this._colorsTexture,o=this._colorsTexture.image.data,s=this._geometryCount;return e>=s||t[e]===!1?this:(i.toArray(o,e*4),r.needsUpdate=!0,this)}getColorAt(e,i){let t=this._active,r=this._colorsTexture.image.data,o=this._geometryCount;return e>=o||t[e]===!1?null:i.fromArray(r,e*4)}setVisibleAt(e,i){let t=this._visibility,r=this._active,o=this._geometryCount;return e>=o||r[e]===!1||t[e]===i?this:(t[e]=i,this._visibilityChanged=!0,this)}getVisibleAt(e){let i=this._visibility,t=this._active,r=this._geometryCount;return e>=r||t[e]===!1?!1:i[e]}raycast(e,i){let t=this._visibility,r=this._active,o=this._drawRanges,s=this._geometryCount,a=this.matrixWorld,c=this.geometry;Tr.material=this.material,Tr.geometry.index=c.index,Tr.geometry.attributes=c.attributes,Tr.geometry.boundingBox===null&&(Tr.geometry.boundingBox=new _n),Tr.geometry.boundingSphere===null&&(Tr.geometry.boundingSphere=new En);for(let l=0;l<s;l++){if(!t[l]||!r[l])continue;let d=o[l];Tr.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(l,Tr.matrixWorld).premultiply(a),this.getBoundingBoxAt(l,Tr.geometry.boundingBox),this.getBoundingSphereAt(l,Tr.geometry.boundingSphere),Tr.raycast(e,g0);for(let u=0,h=g0.length;u<h;u++){let f=g0[u];f.object=this,f.batchId=l,i.push(f)}g0.length=0}Tr.material=null,Tr.geometry.index=null,Tr.geometry.attributes={},Tr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(i=>ve({},i)),this._reservedRanges=e._reservedRanges.map(i=>ve({},i)),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(i=>({boxInitialized:i.boxInitialized,box:i.box.clone(),sphereInitialized:i.sphereInitialized,sphere:i.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,i,t,r,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;let s=r.getIndex(),a=s===null?1:s.array.BYTES_PER_ELEMENT,c=this._active,l=this._visibility,d=this._multiDrawStarts,u=this._multiDrawCounts,h=this._drawRanges,f=this.perObjectFrustumCulled;f&&(gN.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse).multiply(this.matrixWorld),KT.setFromProjectionMatrix(gN,e.coordinateSystem));let p=0;if(this.sortObjects){QT.copy(this.matrixWorld).invert(),up.setFromMatrixPosition(t.matrixWorld).applyMatrix4(QT),bN.set(0,0,-1).transformDirection(t.matrixWorld).transformDirection(QT);for(let m=0,v=l.length;m<v;m++)if(l[m]&&c[m]){this.getMatrixAt(m,il),this.getBoundingSphereAt(m,md).applyMatrix4(il);let _=!1;if(f&&(_=!KT.intersectsSphere(md)),!_){let y=zK.subVectors(md.center,up).dot(bN);JT.push(h[m],y)}}let b=JT.list,g=this.customSort;g===null?b.sort(o.transparent?BK:LK):g.call(this,b,t);for(let m=0,v=b.length;m<v;m++){let _=b[m];d[p]=_.start*a,u[p]=_.count,p++}JT.reset()}else for(let b=0,g=l.length;b<g;b++)if(l[b]&&c[b]){let m=!1;if(f&&(this.getMatrixAt(b,il),this.getBoundingSphereAt(b,md).applyMatrix4(il),m=!KT.intersectsSphere(md)),!m){let v=h[b];d[p]=v.start*a,u[p]=v.count,p++}}this._multiDrawCount=p,this._visibilityChanged=!1}onBeforeShadow(e,i,t,r,o,s){this.onBeforeRender(e,null,r,o,s)}},on=class extends dn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new pe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},Z0=new S,Q0=new S,_N=new Be,hp=new ia,b0=new En,eC=new S,vN=new S,Qi=class extends Tt{constructor(e=new bt,i=new on){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=i,this.updateMorphTargets()}copy(e,i){return super.copy(e,i),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let i=e.attributes.position,t=[0];for(let r=1,o=i.count;r<o;r++)Z0.fromBufferAttribute(i,r-1),Q0.fromBufferAttribute(i,r),t[r]=t[r-1],t[r]+=Z0.distanceTo(Q0);e.setAttribute("lineDistance",new qe(t,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,i){let t=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,s=t.drawRange;if(t.boundingSphere===null&&t.computeBoundingSphere(),b0.copy(t.boundingSphere),b0.applyMatrix4(r),b0.radius+=o,e.ray.intersectsSphere(b0)===!1)return;_N.copy(r).invert(),hp.copy(e.ray).applyMatrix4(_N);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=this.isLineSegments?2:1,d=t.index,h=t.attributes.position;if(d!==null){let f=Math.max(0,s.start),p=Math.min(d.count,s.start+s.count);for(let b=f,g=p-1;b<g;b+=l){let m=d.getX(b),v=d.getX(b+1),_=_0(this,e,hp,c,m,v);_&&i.push(_)}if(this.isLineLoop){let b=d.getX(p-1),g=d.getX(f),m=_0(this,e,hp,c,b,g);m&&i.push(m)}}else{let f=Math.max(0,s.start),p=Math.min(h.count,s.start+s.count);for(let b=f,g=p-1;b<g;b+=l){let m=_0(this,e,hp,c,b,b+1);m&&i.push(m)}if(this.isLineLoop){let b=_0(this,e,hp,c,p-1,f);b&&i.push(b)}}}updateMorphTargets(){let i=this.geometry.morphAttributes,t=Object.keys(i);if(t.length>0){let r=i[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function _0(n,e,i,t,r,o){let s=n.geometry.attributes.position;if(Z0.fromBufferAttribute(s,r),Q0.fromBufferAttribute(s,o),i.distanceSqToSegment(Z0,Q0,eC,vN)>t)return;eC.applyMatrix4(n.matrixWorld);let c=e.ray.origin.distanceTo(eC);if(!(c<e.near||c>e.far))return{distance:c,point:vN.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,object:n}}var yN=new S,xN=new S,Er=class extends Qi{constructor(e,i){super(e,i),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let i=e.attributes.position,t=[];for(let r=0,o=i.count;r<o;r+=2)yN.fromBufferAttribute(i,r),xN.fromBufferAttribute(i,r+1),t[r]=r===0?0:t[r-1],t[r+1]=t[r]+yN.distanceTo(xN);e.setAttribute("lineDistance",new qe(t,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},Kh=class extends Qi{constructor(e,i){super(e,i),this.isLineLoop=!0,this.type="LineLoop"}},Vd=class extends dn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new pe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},wN=new Be,rE=new ia,v0=new En,y0=new S,Jh=class extends Tt{constructor(e=new bt,i=new Vd){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=i,this.updateMorphTargets()}copy(e,i){return super.copy(e,i),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,i){let t=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,s=t.drawRange;if(t.boundingSphere===null&&t.computeBoundingSphere(),v0.copy(t.boundingSphere),v0.applyMatrix4(r),v0.radius+=o,e.ray.intersectsSphere(v0)===!1)return;wN.copy(r).invert(),rE.copy(e.ray).applyMatrix4(wN);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=t.index,u=t.attributes.position;if(l!==null){let h=Math.max(0,s.start),f=Math.min(l.count,s.start+s.count);for(let p=h,b=f;p<b;p++){let g=l.getX(p);y0.fromBufferAttribute(u,g),MN(y0,g,c,r,e,i,this)}}else{let h=Math.max(0,s.start),f=Math.min(u.count,s.start+s.count);for(let p=h,b=f;p<b;p++)y0.fromBufferAttribute(u,p),MN(y0,p,c,r,e,i,this)}}updateMorphTargets(){let i=this.geometry.morphAttributes,t=Object.keys(i);if(t.length>0){let r=i[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function MN(n,e,i,t,r,o,s){let a=rE.distanceSqToPoint(n);if(a<i){let c=new S;rE.closestPointToPoint(n,c),c.applyMatrix4(t);let l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;o.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:s})}}var oE=class extends vn{constructor(e,i,t,r,o,s,a,c,l){super(e,i,t,r,o,s,a,c,l),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:gn,this.magFilter=o!==void 0?o:gn,this.generateMipmaps=!1;let d=this;function u(){d.needsUpdate=!0,e.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(u)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},sE=class extends vn{constructor(e,i){super({width:e,height:i}),this.isFramebufferTexture=!0,this.magFilter=ui,this.minFilter=ui,this.generateMipmaps=!1,this.needsUpdate=!0}},ef=class extends vn{constructor(e,i,t,r,o,s,a,c,l,d,u,h){super(null,s,a,c,l,d,r,o,u,h),this.isCompressedTexture=!0,this.image={width:i,height:t},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}},aE=class extends ef{constructor(e,i,t,r,o,s){super(e,i,t,o,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=ro,this.layerUpdates=new Set}addLayerUpdates(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}},cE=class extends ef{constructor(e,i,t){super(void 0,e[0].width,e[0].height,i,t,nc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}},zd=class extends vn{constructor(e,i,t,r,o,s,a,c,l){super(e,i,t,r,o,s,a,c,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},Ao=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,i){let t=this.getUtoTmapping(e);return this.getPoint(t,i)}getPoints(e=5){let i=[];for(let t=0;t<=e;t++)i.push(this.getPoint(t/e));return i}getSpacedPoints(e=5){let i=[];for(let t=0;t<=e;t++)i.push(this.getPointAt(t/e));return i}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let i=[],t,r=this.getPoint(0),o=0;i.push(0);for(let s=1;s<=e;s++)t=this.getPoint(s/e),o+=t.distanceTo(r),i.push(o),r=t;return this.cacheArcLengths=i,i}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,i){let t=this.getLengths(),r=0,o=t.length,s;i?s=i:s=e*t[o-1];let a=0,c=o-1,l;for(;a<=c;)if(r=Math.floor(a+(c-a)/2),l=t[r]-s,l<0)a=r+1;else if(l>0)c=r-1;else{c=r;break}if(r=c,t[r]===s)return r/(o-1);let d=t[r],h=t[r+1]-d,f=(s-d)/h;return(r+f)/(o-1)}getTangent(e,i){let r=e-1e-4,o=e+1e-4;r<0&&(r=0),o>1&&(o=1);let s=this.getPoint(r),a=this.getPoint(o),c=i||(s.isVector2?new z:new S);return c.copy(a).sub(s).normalize(),c}getTangentAt(e,i){let t=this.getUtoTmapping(e);return this.getTangent(t,i)}computeFrenetFrames(e,i){let t=new S,r=[],o=[],s=[],a=new S,c=new Be;for(let f=0;f<=e;f++){let p=f/e;r[f]=this.getTangentAt(p,new S)}o[0]=new S,s[0]=new S;let l=Number.MAX_VALUE,d=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);d<=l&&(l=d,t.set(1,0,0)),u<=l&&(l=u,t.set(0,1,0)),h<=l&&t.set(0,0,1),a.crossVectors(r[0],t).normalize(),o[0].crossVectors(r[0],a),s[0].crossVectors(r[0],o[0]);for(let f=1;f<=e;f++){if(o[f]=o[f-1].clone(),s[f]=s[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();let p=Math.acos(Cn(r[f-1].dot(r[f]),-1,1));o[f].applyMatrix4(c.makeRotationAxis(a,p))}s[f].crossVectors(r[f],o[f])}if(i===!0){let f=Math.acos(Cn(o[0].dot(o[e]),-1,1));f/=e,r[0].dot(a.crossVectors(o[0],o[e]))>0&&(f=-f);for(let p=1;p<=e;p++)o[p].applyMatrix4(c.makeRotationAxis(r[p],f*p)),s[p].crossVectors(r[p],o[p])}return{tangents:r,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},vs=class extends Ao{constructor(e=0,i=0,t=1,r=1,o=0,s=Math.PI*2,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=i,this.xRadius=t,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=c}getPoint(e,i=new z){let t=i,r=Math.PI*2,o=this.aEndAngle-this.aStartAngle,s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(s?o=0:o=r),this.aClockwise===!0&&!s&&(o===r?o=-r:o=o-r);let a=this.aStartAngle+e*o,c=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let d=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=c-this.aX,f=l-this.aY;c=h*d-f*u+this.aX,l=h*u+f*d+this.aY}return t.set(c,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},K0=class extends vs{constructor(e,i,t,r,o,s){super(e,i,t,t,r,o,s),this.isArcCurve=!0,this.type="ArcCurve"}};function cD(){let n=0,e=0,i=0,t=0;function r(o,s,a,c){n=o,e=a,i=-3*o+3*s-2*a-c,t=2*o-2*s+a+c}return{initCatmullRom:function(o,s,a,c,l){r(s,a,l*(a-o),l*(c-s))},initNonuniformCatmullRom:function(o,s,a,c,l,d,u){let h=(s-o)/l-(a-o)/(l+d)+(a-s)/d,f=(a-s)/d-(c-s)/(d+u)+(c-a)/u;h*=d,f*=d,r(s,a,h,f)},calc:function(o){let s=o*o,a=s*o;return n+e*o+i*s+t*a}}}var x0=new S,tC=new cD,iC=new cD,nC=new cD,J0=class extends Ao{constructor(e=[],i=!1,t="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=i,this.curveType=t,this.tension=r}getPoint(e,i=new S){let t=i,r=this.points,o=r.length,s=(o-(this.closed?0:1))*e,a=Math.floor(s),c=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:c===0&&a===o-1&&(a=o-2,c=1);let l,d;this.closed||a>0?l=r[(a-1)%o]:(x0.subVectors(r[0],r[1]).add(r[0]),l=x0);let u=r[a%o],h=r[(a+1)%o];if(this.closed||a+2<o?d=r[(a+2)%o]:(x0.subVectors(r[o-1],r[o-2]).add(r[o-1]),d=x0),this.curveType==="centripetal"||this.curveType==="chordal"){let f=this.curveType==="chordal"?.5:.25,p=Math.pow(l.distanceToSquared(u),f),b=Math.pow(u.distanceToSquared(h),f),g=Math.pow(h.distanceToSquared(d),f);b<1e-4&&(b=1),p<1e-4&&(p=b),g<1e-4&&(g=b),tC.initNonuniformCatmullRom(l.x,u.x,h.x,d.x,p,b,g),iC.initNonuniformCatmullRom(l.y,u.y,h.y,d.y,p,b,g),nC.initNonuniformCatmullRom(l.z,u.z,h.z,d.z,p,b,g)}else this.curveType==="catmullrom"&&(tC.initCatmullRom(l.x,u.x,h.x,d.x,this.tension),iC.initCatmullRom(l.y,u.y,h.y,d.y,this.tension),nC.initCatmullRom(l.z,u.z,h.z,d.z,this.tension));return t.set(tC.calc(c),iC.calc(c),nC.calc(c)),t}copy(e){super.copy(e),this.points=[];for(let i=0,t=e.points.length;i<t;i++){let r=e.points[i];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let i=0,t=this.points.length;i<t;i++){let r=this.points[i];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let i=0,t=e.points.length;i<t;i++){let r=e.points[i];this.points.push(new S().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function SN(n,e,i,t,r){let o=(t-e)*.5,s=(r-i)*.5,a=n*n,c=n*a;return(2*i-2*t+o+s)*c+(-3*i+3*t-2*o-s)*a+o*n+i}function GK(n,e){let i=1-n;return i*i*e}function WK(n,e){return 2*(1-n)*n*e}function $K(n,e){return n*n*e}function _p(n,e,i,t){return GK(n,e)+WK(n,i)+$K(n,t)}function qK(n,e){let i=1-n;return i*i*i*e}function XK(n,e){let i=1-n;return 3*i*i*n*e}function YK(n,e){return 3*(1-n)*n*n*e}function ZK(n,e){return n*n*n*e}function vp(n,e,i,t,r){return qK(n,e)+XK(n,i)+YK(n,t)+ZK(n,r)}var Op=class extends Ao{constructor(e=new z,i=new z,t=new z,r=new z){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=i,this.v2=t,this.v3=r}getPoint(e,i=new z){let t=i,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return t.set(vp(e,r.x,o.x,s.x,a.x),vp(e,r.y,o.y,s.y,a.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},ey=class extends Ao{constructor(e=new S,i=new S,t=new S,r=new S){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=i,this.v2=t,this.v3=r}getPoint(e,i=new S){let t=i,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return t.set(vp(e,r.x,o.x,s.x,a.x),vp(e,r.y,o.y,s.y,a.y),vp(e,r.z,o.z,s.z,a.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Np=class extends Ao{constructor(e=new z,i=new z){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=i}getPoint(e,i=new z){let t=i;return e===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,i){return this.getPoint(e,i)}getTangent(e,i=new z){return i.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,i){return this.getTangent(e,i)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},ty=class extends Ao{constructor(e=new S,i=new S){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=i}getPoint(e,i=new S){let t=i;return e===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,i){return this.getPoint(e,i)}getTangent(e,i=new S){return i.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,i){return this.getTangent(e,i)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Lp=class extends Ao{constructor(e=new z,i=new z,t=new z){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=i,this.v2=t}getPoint(e,i=new z){let t=i,r=this.v0,o=this.v1,s=this.v2;return t.set(_p(e,r.x,o.x,s.x),_p(e,r.y,o.y,s.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Bp=class extends Ao{constructor(e=new S,i=new S,t=new S){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=i,this.v2=t}getPoint(e,i=new S){let t=i,r=this.v0,o=this.v1,s=this.v2;return t.set(_p(e,r.x,o.x,s.x),_p(e,r.y,o.y,s.y),_p(e,r.z,o.z,s.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Up=class extends Ao{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,i=new z){let t=i,r=this.points,o=(r.length-1)*e,s=Math.floor(o),a=o-s,c=r[s===0?s:s-1],l=r[s],d=r[s>r.length-2?r.length-1:s+1],u=r[s>r.length-3?r.length-1:s+2];return t.set(SN(a,c.x,l.x,d.x,u.x),SN(a,c.y,l.y,d.y,u.y)),t}copy(e){super.copy(e),this.points=[];for(let i=0,t=e.points.length;i<t;i++){let r=e.points[i];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let i=0,t=this.points.length;i<t;i++){let r=this.points[i];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let i=0,t=e.points.length;i<t;i++){let r=e.points[i];this.points.push(new z().fromArray(r))}return this}},iy=Object.freeze({__proto__:null,ArcCurve:K0,CatmullRomCurve3:J0,CubicBezierCurve:Op,CubicBezierCurve3:ey,EllipseCurve:vs,LineCurve:Np,LineCurve3:ty,QuadraticBezierCurve:Lp,QuadraticBezierCurve3:Bp,SplineCurve:Up}),ny=class extends Ao{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),i=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(i)){let t=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new iy[t](i,e))}return this}getPoint(e,i){let t=e*this.getLength(),r=this.getCurveLengths(),o=0;for(;o<r.length;){if(r[o]>=t){let s=r[o]-t,a=this.curves[o],c=a.getLength(),l=c===0?0:1-s/c;return a.getPointAt(l,i)}o++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],i=0;for(let t=0,r=this.curves.length;t<r;t++)i+=this.curves[t].getLength(),e.push(i);return this.cacheLengths=e,e}getSpacedPoints(e=40){let i=[];for(let t=0;t<=e;t++)i.push(this.getPoint(t/e));return this.autoClose&&i.push(i[0]),i}getPoints(e=12){let i=[],t;for(let r=0,o=this.curves;r<o.length;r++){let s=o[r],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,c=s.getPoints(a);for(let l=0;l<c.length;l++){let d=c[l];t&&t.equals(d)||(i.push(d),t=d)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i}copy(e){super.copy(e),this.curves=[];for(let i=0,t=e.curves.length;i<t;i++){let r=e.curves[i];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let i=0,t=this.curves.length;i<t;i++){let r=this.curves[i];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let i=0,t=e.curves.length;i<t;i++){let r=e.curves[i];this.curves.push(new iy[r.type]().fromJSON(r))}return this}},Hd=class extends ny{constructor(e){super(),this.type="Path",this.currentPoint=new z,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let i=1,t=e.length;i<t;i++)this.lineTo(e[i].x,e[i].y);return this}moveTo(e,i){return this.currentPoint.set(e,i),this}lineTo(e,i){let t=new Np(this.currentPoint.clone(),new z(e,i));return this.curves.push(t),this.currentPoint.set(e,i),this}quadraticCurveTo(e,i,t,r){let o=new Lp(this.currentPoint.clone(),new z(e,i),new z(t,r));return this.curves.push(o),this.currentPoint.set(t,r),this}bezierCurveTo(e,i,t,r,o,s){let a=new Op(this.currentPoint.clone(),new z(e,i),new z(t,r),new z(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){let i=[this.currentPoint.clone()].concat(e),t=new Up(i);return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this}arc(e,i,t,r,o,s){let a=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+a,i+c,t,r,o,s),this}absarc(e,i,t,r,o,s){return this.absellipse(e,i,t,t,r,o,s),this}ellipse(e,i,t,r,o,s,a,c){let l=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+l,i+d,t,r,o,s,a,c),this}absellipse(e,i,t,r,o,s,a,c){let l=new vs(e,i,t,r,o,s,a,c);if(this.curves.length>0){let u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);let d=l.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},Vp=class n extends bt{constructor(e=[new z(0,-.5),new z(.5,0),new z(0,.5)],i=12,t=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:i,phiStart:t,phiLength:r},i=Math.floor(i),r=Cn(r,0,Math.PI*2);let o=[],s=[],a=[],c=[],l=[],d=1/i,u=new S,h=new z,f=new S,p=new S,b=new S,g=0,m=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:g=e[v+1].x-e[v].x,m=e[v+1].y-e[v].y,f.x=m*1,f.y=-g,f.z=m*0,b.copy(f),f.normalize(),c.push(f.x,f.y,f.z);break;case e.length-1:c.push(b.x,b.y,b.z);break;default:g=e[v+1].x-e[v].x,m=e[v+1].y-e[v].y,f.x=m*1,f.y=-g,f.z=m*0,p.copy(f),f.x+=b.x,f.y+=b.y,f.z+=b.z,f.normalize(),c.push(f.x,f.y,f.z),b.copy(p)}for(let v=0;v<=i;v++){let _=t+v*d*r,y=Math.sin(_),C=Math.cos(_);for(let R=0;R<=e.length-1;R++){u.x=e[R].x*y,u.y=e[R].y,u.z=e[R].x*C,s.push(u.x,u.y,u.z),h.x=v/i,h.y=R/(e.length-1),a.push(h.x,h.y);let M=c[3*R+0]*y,A=c[3*R+1],T=c[3*R+0]*C;l.push(M,A,T)}}for(let v=0;v<i;v++)for(let _=0;_<e.length-1;_++){let y=_+v*e.length,C=y,R=y+e.length,M=y+e.length+1,A=y+1;o.push(C,R,A),o.push(M,A,R)}this.setIndex(o),this.setAttribute("position",new qe(s,3)),this.setAttribute("uv",new qe(a,2)),this.setAttribute("normal",new qe(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.points,e.segments,e.phiStart,e.phiLength)}},ry=class n extends Vp{constructor(e=1,i=1,t=4,r=8){let o=new Hd;o.absarc(0,-i/2,e,Math.PI*1.5,0),o.absarc(0,i/2,e,0,Math.PI*.5),super(o.getPoints(t),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:i,capSegments:t,radialSegments:r}}static fromJSON(e){return new n(e.radius,e.length,e.capSegments,e.radialSegments)}},oy=class n extends bt{constructor(e=1,i=32,t=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:i,thetaStart:t,thetaLength:r},i=Math.max(3,i);let o=[],s=[],a=[],c=[],l=new S,d=new z;s.push(0,0,0),a.push(0,0,1),c.push(.5,.5);for(let u=0,h=3;u<=i;u++,h+=3){let f=t+u/i*r;l.x=e*Math.cos(f),l.y=e*Math.sin(f),s.push(l.x,l.y,l.z),a.push(0,0,1),d.x=(s[h]/e+1)/2,d.y=(s[h+1]/e+1)/2,c.push(d.x,d.y)}for(let u=1;u<=i;u++)o.push(u,u+1,0);this.setIndex(o),this.setAttribute("position",new qe(s,3)),this.setAttribute("normal",new qe(a,3)),this.setAttribute("uv",new qe(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.segments,e.thetaStart,e.thetaLength)}},On=class n extends bt{constructor(e=1,i=1,t=1,r=32,o=1,s=!1,a=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:i,height:t,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:c};let l=this;r=Math.floor(r),o=Math.floor(o);let d=[],u=[],h=[],f=[],p=0,b=[],g=t/2,m=0;v(),s===!1&&(e>0&&_(!0),i>0&&_(!1)),this.setIndex(d),this.setAttribute("position",new qe(u,3)),this.setAttribute("normal",new qe(h,3)),this.setAttribute("uv",new qe(f,2));function v(){let y=new S,C=new S,R=0,M=(i-e)/t;for(let A=0;A<=o;A++){let T=[],x=A/o,I=x*(i-e)+e;for(let V=0;V<=r;V++){let W=V/r,ee=W*c+a,ne=Math.sin(ee),B=Math.cos(ee);C.x=I*ne,C.y=-x*t+g,C.z=I*B,u.push(C.x,C.y,C.z),y.set(ne,M,B).normalize(),h.push(y.x,y.y,y.z),f.push(W,1-x),T.push(p++)}b.push(T)}for(let A=0;A<r;A++)for(let T=0;T<o;T++){let x=b[T][A],I=b[T+1][A],V=b[T+1][A+1],W=b[T][A+1];d.push(x,I,W),d.push(I,V,W),R+=6}l.addGroup(m,R,0),m+=R}function _(y){let C=p,R=new z,M=new S,A=0,T=y===!0?e:i,x=y===!0?1:-1;for(let V=1;V<=r;V++)u.push(0,g*x,0),h.push(0,x,0),f.push(.5,.5),p++;let I=p;for(let V=0;V<=r;V++){let ee=V/r*c+a,ne=Math.cos(ee),B=Math.sin(ee);M.x=T*B,M.y=g*x,M.z=T*ne,u.push(M.x,M.y,M.z),h.push(0,x,0),R.x=ne*.5+.5,R.y=B*.5*x+.5,f.push(R.x,R.y),p++}for(let V=0;V<r;V++){let W=C+V,ee=I+V;y===!0?d.push(ee,ee+1,W):d.push(ee+1,ee,W),A+=3}l.addGroup(m,A,y===!0?1:2),m+=A}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},sy=class n extends On{constructor(e=1,i=1,t=32,r=1,o=!1,s=0,a=Math.PI*2){super(0,e,i,t,r,o,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:i,radialSegments:t,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},oa=class n extends bt{constructor(e=[],i=[],t=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:i,radius:t,detail:r};let o=[],s=[];a(r),l(t),d(),this.setAttribute("position",new qe(o,3)),this.setAttribute("normal",new qe(o.slice(),3)),this.setAttribute("uv",new qe(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(v){let _=new S,y=new S,C=new S;for(let R=0;R<i.length;R+=3)f(i[R+0],_),f(i[R+1],y),f(i[R+2],C),c(_,y,C,v)}function c(v,_,y,C){let R=C+1,M=[];for(let A=0;A<=R;A++){M[A]=[];let T=v.clone().lerp(y,A/R),x=_.clone().lerp(y,A/R),I=R-A;for(let V=0;V<=I;V++)V===0&&A===R?M[A][V]=T:M[A][V]=T.clone().lerp(x,V/I)}for(let A=0;A<R;A++)for(let T=0;T<2*(R-A)-1;T++){let x=Math.floor(T/2);T%2===0?(h(M[A][x+1]),h(M[A+1][x]),h(M[A][x])):(h(M[A][x+1]),h(M[A+1][x+1]),h(M[A+1][x]))}}function l(v){let _=new S;for(let y=0;y<o.length;y+=3)_.x=o[y+0],_.y=o[y+1],_.z=o[y+2],_.normalize().multiplyScalar(v),o[y+0]=_.x,o[y+1]=_.y,o[y+2]=_.z}function d(){let v=new S;for(let _=0;_<o.length;_+=3){v.x=o[_+0],v.y=o[_+1],v.z=o[_+2];let y=g(v)/2/Math.PI+.5,C=m(v)/Math.PI+.5;s.push(y,1-C)}p(),u()}function u(){for(let v=0;v<s.length;v+=6){let _=s[v+0],y=s[v+2],C=s[v+4],R=Math.max(_,y,C),M=Math.min(_,y,C);R>.9&&M<.1&&(_<.2&&(s[v+0]+=1),y<.2&&(s[v+2]+=1),C<.2&&(s[v+4]+=1))}}function h(v){o.push(v.x,v.y,v.z)}function f(v,_){let y=v*3;_.x=e[y+0],_.y=e[y+1],_.z=e[y+2]}function p(){let v=new S,_=new S,y=new S,C=new S,R=new z,M=new z,A=new z;for(let T=0,x=0;T<o.length;T+=9,x+=6){v.set(o[T+0],o[T+1],o[T+2]),_.set(o[T+3],o[T+4],o[T+5]),y.set(o[T+6],o[T+7],o[T+8]),R.set(s[x+0],s[x+1]),M.set(s[x+2],s[x+3]),A.set(s[x+4],s[x+5]),C.copy(v).add(_).add(y).divideScalar(3);let I=g(C);b(R,x+0,v,I),b(M,x+2,_,I),b(A,x+4,y,I)}}function b(v,_,y,C){C<0&&v.x===1&&(s[_]=v.x-1),y.x===0&&y.z===0&&(s[_]=C/2/Math.PI+.5)}function g(v){return Math.atan2(v.z,-v.x)}function m(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.vertices,e.indices,e.radius,e.details)}},ay=class n extends oa{constructor(e=1,i=0){let t=(1+Math.sqrt(5))/2,r=1/t,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-t,0,-r,t,0,r,-t,0,r,t,-r,-t,0,-r,t,0,r,-t,0,r,t,0,-t,0,-r,t,0,-r,-t,0,r,t,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,s,e,i),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new n(e.radius,e.detail)}},w0=new S,M0=new S,rC=new S,S0=new Ja,cy=class extends bt{constructor(e=null,i=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:i},e!==null){let r=Math.pow(10,4),o=Math.cos(Ed*i),s=e.getIndex(),a=e.getAttribute("position"),c=s?s.count:a.count,l=[0,0,0],d=["a","b","c"],u=new Array(3),h={},f=[];for(let p=0;p<c;p+=3){s?(l[0]=s.getX(p),l[1]=s.getX(p+1),l[2]=s.getX(p+2)):(l[0]=p,l[1]=p+1,l[2]=p+2);let{a:b,b:g,c:m}=S0;if(b.fromBufferAttribute(a,l[0]),g.fromBufferAttribute(a,l[1]),m.fromBufferAttribute(a,l[2]),S0.getNormal(rC),u[0]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,u[1]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,u[2]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,!(u[0]===u[1]||u[1]===u[2]||u[2]===u[0]))for(let v=0;v<3;v++){let _=(v+1)%3,y=u[v],C=u[_],R=S0[d[v]],M=S0[d[_]],A=`${y}_${C}`,T=`${C}_${y}`;T in h&&h[T]?(rC.dot(h[T].normal)<=o&&(f.push(R.x,R.y,R.z),f.push(M.x,M.y,M.z)),h[T]=null):A in h||(h[A]={index0:l[v],index1:l[_],normal:rC.clone()})}}for(let p in h)if(h[p]){let{index0:b,index1:g}=h[p];w0.fromBufferAttribute(a,b),M0.fromBufferAttribute(a,g),f.push(w0.x,w0.y,w0.z),f.push(M0.x,M0.y,M0.z)}this.setAttribute("position",new qe(f,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}},ic=class extends Hd{constructor(e){super(e),this.uuid=Eo(),this.type="Shape",this.holes=[]}getPointsHoles(e){let i=[];for(let t=0,r=this.holes.length;t<r;t++)i[t]=this.holes[t].getPoints(e);return i}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let i=0,t=e.holes.length;i<t;i++){let r=e.holes[i];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let i=0,t=this.holes.length;i<t;i++){let r=this.holes[i];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let i=0,t=e.holes.length;i<t;i++){let r=e.holes[i];this.holes.push(new Hd().fromJSON(r))}return this}},QK={triangulate:function(n,e,i=2){let t=e&&e.length,r=t?e[0]*i:n.length,o=c3(n,0,r,i,!0),s=[];if(!o||o.next===o.prev)return s;let a,c,l,d,u,h,f;if(t&&(o=iJ(n,e,o,i)),n.length>80*i){a=l=n[0],c=d=n[1];for(let p=i;p<r;p+=i)u=n[p],h=n[p+1],u<a&&(a=u),h<c&&(c=h),u>l&&(l=u),h>d&&(d=h);f=Math.max(l-a,d-c),f=f!==0?32767/f:0}return zp(o,s,i,a,c,f,0),s}};function c3(n,e,i,t,r){let o,s;if(r===fJ(n,e,i,t)>0)for(o=e;o<i;o+=t)s=RN(o,n[o],n[o+1],s);else for(o=i-t;o>=e;o-=t)s=RN(o,n[o],n[o+1],s);return s&&Uy(s,s.next)&&(Gp(s),s=s.next),s}function Gd(n,e){if(!n)return n;e||(e=n);let i=n,t;do if(t=!1,!i.steiner&&(Uy(i,i.next)||bn(i.prev,i,i.next)===0)){if(Gp(i),i=e=i.prev,i===i.next)break;t=!0}else i=i.next;while(t||i!==e);return e}function zp(n,e,i,t,r,o,s){if(!n)return;!s&&o&&aJ(n,t,r,o);let a=n,c,l;for(;n.prev!==n.next;){if(c=n.prev,l=n.next,o?JK(n,t,r,o):KK(n)){e.push(c.i/i|0),e.push(n.i/i|0),e.push(l.i/i|0),Gp(n),n=l.next,a=l.next;continue}if(n=l,n===a){s?s===1?(n=eJ(Gd(n),e,i),zp(n,e,i,t,r,o,2)):s===2&&tJ(n,e,i,t,r,o):zp(Gd(n),e,i,t,r,o,1);break}}}function KK(n){let e=n.prev,i=n,t=n.next;if(bn(e,i,t)>=0)return!1;let r=e.x,o=i.x,s=t.x,a=e.y,c=i.y,l=t.y,d=r<o?r<s?r:s:o<s?o:s,u=a<c?a<l?a:l:c<l?c:l,h=r>o?r>s?r:s:o>s?o:s,f=a>c?a>l?a:l:c>l?c:l,p=t.next;for(;p!==e;){if(p.x>=d&&p.x<=h&&p.y>=u&&p.y<=f&&Vh(r,a,o,c,s,l,p.x,p.y)&&bn(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function JK(n,e,i,t){let r=n.prev,o=n,s=n.next;if(bn(r,o,s)>=0)return!1;let a=r.x,c=o.x,l=s.x,d=r.y,u=o.y,h=s.y,f=a<c?a<l?a:l:c<l?c:l,p=d<u?d<h?d:h:u<h?u:h,b=a>c?a>l?a:l:c>l?c:l,g=d>u?d>h?d:h:u>h?u:h,m=lE(f,p,e,i,t),v=lE(b,g,e,i,t),_=n.prevZ,y=n.nextZ;for(;_&&_.z>=m&&y&&y.z<=v;){if(_.x>=f&&_.x<=b&&_.y>=p&&_.y<=g&&_!==r&&_!==s&&Vh(a,d,c,u,l,h,_.x,_.y)&&bn(_.prev,_,_.next)>=0||(_=_.prevZ,y.x>=f&&y.x<=b&&y.y>=p&&y.y<=g&&y!==r&&y!==s&&Vh(a,d,c,u,l,h,y.x,y.y)&&bn(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;_&&_.z>=m;){if(_.x>=f&&_.x<=b&&_.y>=p&&_.y<=g&&_!==r&&_!==s&&Vh(a,d,c,u,l,h,_.x,_.y)&&bn(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;y&&y.z<=v;){if(y.x>=f&&y.x<=b&&y.y>=p&&y.y<=g&&y!==r&&y!==s&&Vh(a,d,c,u,l,h,y.x,y.y)&&bn(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function eJ(n,e,i){let t=n;do{let r=t.prev,o=t.next.next;!Uy(r,o)&&l3(r,t,t.next,o)&&Hp(r,o)&&Hp(o,r)&&(e.push(r.i/i|0),e.push(t.i/i|0),e.push(o.i/i|0),Gp(t),Gp(t.next),t=n=o),t=t.next}while(t!==n);return Gd(t)}function tJ(n,e,i,t,r,o){let s=n;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&dJ(s,a)){let c=d3(s,a);s=Gd(s,s.next),c=Gd(c,c.next),zp(s,e,i,t,r,o,0),zp(c,e,i,t,r,o,0);return}a=a.next}s=s.next}while(s!==n)}function iJ(n,e,i,t){let r=[],o,s,a,c,l;for(o=0,s=e.length;o<s;o++)a=e[o]*t,c=o<s-1?e[o+1]*t:n.length,l=c3(n,a,c,t,!1),l===l.next&&(l.steiner=!0),r.push(lJ(l));for(r.sort(nJ),o=0;o<r.length;o++)i=rJ(r[o],i);return i}function nJ(n,e){return n.x-e.x}function rJ(n,e){let i=oJ(n,e);if(!i)return e;let t=d3(i,n);return Gd(t,t.next),Gd(i,i.next)}function oJ(n,e){let i=e,t=-1/0,r,o=n.x,s=n.y;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){let h=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(h<=o&&h>t&&(t=h,r=i.x<i.next.x?i:i.next,h===o))return r}i=i.next}while(i!==e);if(!r)return null;let a=r,c=r.x,l=r.y,d=1/0,u;i=r;do o>=i.x&&i.x>=c&&o!==i.x&&Vh(s<l?o:t,s,c,l,s<l?t:o,s,i.x,i.y)&&(u=Math.abs(s-i.y)/(o-i.x),Hp(i,n)&&(u<d||u===d&&(i.x>r.x||i.x===r.x&&sJ(r,i)))&&(r=i,d=u)),i=i.next;while(i!==a);return r}function sJ(n,e){return bn(n.prev,n,e.prev)<0&&bn(e.next,n,n.next)<0}function aJ(n,e,i,t){let r=n;do r.z===0&&(r.z=lE(r.x,r.y,e,i,t)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,cJ(r)}function cJ(n){let e,i,t,r,o,s,a,c,l=1;do{for(i=n,n=null,o=null,s=0;i;){for(s++,t=i,a=0,e=0;e<l&&(a++,t=t.nextZ,!!t);e++);for(c=l;a>0||c>0&&t;)a!==0&&(c===0||!t||i.z<=t.z)?(r=i,i=i.nextZ,a--):(r=t,t=t.nextZ,c--),o?o.nextZ=r:n=r,r.prevZ=o,o=r;i=t}o.nextZ=null,l*=2}while(s>1);return n}function lE(n,e,i,t,r){return n=(n-i)*r|0,e=(e-t)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function lJ(n){let e=n,i=n;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==n);return i}function Vh(n,e,i,t,r,o,s,a){return(r-s)*(e-a)>=(n-s)*(o-a)&&(n-s)*(t-a)>=(i-s)*(e-a)&&(i-s)*(o-a)>=(r-s)*(t-a)}function dJ(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!uJ(n,e)&&(Hp(n,e)&&Hp(e,n)&&hJ(n,e)&&(bn(n.prev,n,e.prev)||bn(n,e.prev,e))||Uy(n,e)&&bn(n.prev,n,n.next)>0&&bn(e.prev,e,e.next)>0)}function bn(n,e,i){return(e.y-n.y)*(i.x-e.x)-(e.x-n.x)*(i.y-e.y)}function Uy(n,e){return n.x===e.x&&n.y===e.y}function l3(n,e,i,t){let r=T0(bn(n,e,i)),o=T0(bn(n,e,t)),s=T0(bn(i,t,n)),a=T0(bn(i,t,e));return!!(r!==o&&s!==a||r===0&&R0(n,i,e)||o===0&&R0(n,t,e)||s===0&&R0(i,n,t)||a===0&&R0(i,e,t))}function R0(n,e,i){return e.x<=Math.max(n.x,i.x)&&e.x>=Math.min(n.x,i.x)&&e.y<=Math.max(n.y,i.y)&&e.y>=Math.min(n.y,i.y)}function T0(n){return n>0?1:n<0?-1:0}function uJ(n,e){let i=n;do{if(i.i!==n.i&&i.next.i!==n.i&&i.i!==e.i&&i.next.i!==e.i&&l3(i,i.next,n,e))return!0;i=i.next}while(i!==n);return!1}function Hp(n,e){return bn(n.prev,n,n.next)<0?bn(n,e,n.next)>=0&&bn(n,n.prev,e)>=0:bn(n,e,n.prev)<0||bn(n,n.next,e)<0}function hJ(n,e){let i=n,t=!1,r=(n.x+e.x)/2,o=(n.y+e.y)/2;do i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(t=!t),i=i.next;while(i!==n);return t}function d3(n,e){let i=new dE(n.i,n.x,n.y),t=new dE(e.i,e.x,e.y),r=n.next,o=e.prev;return n.next=e,e.prev=n,i.next=r,r.prev=i,t.next=i,i.prev=t,o.next=t,t.prev=o,t}function RN(n,e,i,t){let r=new dE(n,e,i);return t?(r.next=t.next,r.prev=t,t.next.prev=r,t.next=r):(r.prev=r,r.next=r),r}function Gp(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function dE(n,e,i){this.i=n,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function fJ(n,e,i,t){let r=0;for(let o=e,s=i-t;o<i;o+=t)r+=(n[s]-n[o])*(n[o+1]+n[s+1]),s=o;return r}var ta=class n{static area(e){let i=e.length,t=0;for(let r=i-1,o=0;o<i;r=o++)t+=e[r].x*e[o].y-e[o].x*e[r].y;return t*.5}static isClockWise(e){return n.area(e)<0}static triangulateShape(e,i){let t=[],r=[],o=[];TN(e),CN(t,e);let s=e.length;i.forEach(TN);for(let c=0;c<i.length;c++)r.push(s),s+=i[c].length,CN(t,i[c]);let a=QK.triangulate(t,r);for(let c=0;c<a.length;c+=3)o.push(a.slice(c,c+3));return o}};function TN(n){let e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function CN(n,e){for(let i=0;i<e.length;i++)n.push(e[i].x),n.push(e[i].y)}var ly=class n extends bt{constructor(e=new ic([new z(.5,.5),new z(-.5,.5),new z(-.5,-.5),new z(.5,-.5)]),i={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:i},e=Array.isArray(e)?e:[e];let t=this,r=[],o=[];for(let a=0,c=e.length;a<c;a++){let l=e[a];s(l)}this.setAttribute("position",new qe(r,3)),this.setAttribute("uv",new qe(o,2)),this.computeVertexNormals();function s(a){let c=[],l=i.curveSegments!==void 0?i.curveSegments:12,d=i.steps!==void 0?i.steps:1,u=i.depth!==void 0?i.depth:1,h=i.bevelEnabled!==void 0?i.bevelEnabled:!0,f=i.bevelThickness!==void 0?i.bevelThickness:.2,p=i.bevelSize!==void 0?i.bevelSize:f-.1,b=i.bevelOffset!==void 0?i.bevelOffset:0,g=i.bevelSegments!==void 0?i.bevelSegments:3,m=i.extrudePath,v=i.UVGenerator!==void 0?i.UVGenerator:mJ,_,y=!1,C,R,M,A;m&&(_=m.getSpacedPoints(d),y=!0,h=!1,C=m.computeFrenetFrames(d,!1),R=new S,M=new S,A=new S),h||(g=0,f=0,p=0,b=0);let T=a.extractPoints(l),x=T.shape,I=T.holes;if(!ta.isClockWise(x)){x=x.reverse();for(let ye=0,Re=I.length;ye<Re;ye++){let Pe=I[ye];ta.isClockWise(Pe)&&(I[ye]=Pe.reverse())}}let W=ta.triangulateShape(x,I),ee=x;for(let ye=0,Re=I.length;ye<Re;ye++){let Pe=I[ye];x=x.concat(Pe)}function ne(ye,Re,Pe){return Re||console.error("THREE.ExtrudeGeometry: vec does not exist"),ye.clone().addScaledVector(Re,Pe)}let B=x.length,G=W.length;function U(ye,Re,Pe){let Ae,Fe,Ke,Xe=ye.x-Re.x,Ct=ye.y-Re.y,k=Pe.x-ye.x,E=Pe.y-ye.y,re=Xe*Xe+Ct*Ct,Se=Xe*E-Ct*k;if(Math.abs(Se)>Number.EPSILON){let Me=Math.sqrt(re),De=Math.sqrt(k*k+E*E),mt=Re.x-Ct/Me,Ge=Re.y+Xe/Me,ze=Pe.x-E/De,Et=Pe.y+k/De,Oe=((ze-mt)*E-(Et-Ge)*k)/(Xe*E-Ct*k);Ae=mt+Xe*Oe-ye.x,Fe=Ge+Ct*Oe-ye.y;let rt=Ae*Ae+Fe*Fe;if(rt<=2)return new z(Ae,Fe);Ke=Math.sqrt(rt/2)}else{let Me=!1;Xe>Number.EPSILON?k>Number.EPSILON&&(Me=!0):Xe<-Number.EPSILON?k<-Number.EPSILON&&(Me=!0):Math.sign(Ct)===Math.sign(E)&&(Me=!0),Me?(Ae=-Ct,Fe=Xe,Ke=Math.sqrt(re)):(Ae=Xe,Fe=Ct,Ke=Math.sqrt(re/2))}return new z(Ae/Ke,Fe/Ke)}let se=[];for(let ye=0,Re=ee.length,Pe=Re-1,Ae=ye+1;ye<Re;ye++,Pe++,Ae++)Pe===Re&&(Pe=0),Ae===Re&&(Ae=0),se[ye]=U(ee[ye],ee[Pe],ee[Ae]);let Te=[],Ie,Ze=se.concat();for(let ye=0,Re=I.length;ye<Re;ye++){let Pe=I[ye];Ie=[];for(let Ae=0,Fe=Pe.length,Ke=Fe-1,Xe=Ae+1;Ae<Fe;Ae++,Ke++,Xe++)Ke===Fe&&(Ke=0),Xe===Fe&&(Xe=0),Ie[Ae]=U(Pe[Ae],Pe[Ke],Pe[Xe]);Te.push(Ie),Ze=Ze.concat(Ie)}for(let ye=0;ye<g;ye++){let Re=ye/g,Pe=f*Math.cos(Re*Math.PI/2),Ae=p*Math.sin(Re*Math.PI/2)+b;for(let Fe=0,Ke=ee.length;Fe<Ke;Fe++){let Xe=ne(ee[Fe],se[Fe],Ae);N(Xe.x,Xe.y,-Pe)}for(let Fe=0,Ke=I.length;Fe<Ke;Fe++){let Xe=I[Fe];Ie=Te[Fe];for(let Ct=0,k=Xe.length;Ct<k;Ct++){let E=ne(Xe[Ct],Ie[Ct],Ae);N(E.x,E.y,-Pe)}}}let yt=p+b;for(let ye=0;ye<B;ye++){let Re=h?ne(x[ye],Ze[ye],yt):x[ye];y?(M.copy(C.normals[0]).multiplyScalar(Re.x),R.copy(C.binormals[0]).multiplyScalar(Re.y),A.copy(_[0]).add(M).add(R),N(A.x,A.y,A.z)):N(Re.x,Re.y,0)}for(let ye=1;ye<=d;ye++)for(let Re=0;Re<B;Re++){let Pe=h?ne(x[Re],Ze[Re],yt):x[Re];y?(M.copy(C.normals[ye]).multiplyScalar(Pe.x),R.copy(C.binormals[ye]).multiplyScalar(Pe.y),A.copy(_[ye]).add(M).add(R),N(A.x,A.y,A.z)):N(Pe.x,Pe.y,u/d*ye)}for(let ye=g-1;ye>=0;ye--){let Re=ye/g,Pe=f*Math.cos(Re*Math.PI/2),Ae=p*Math.sin(Re*Math.PI/2)+b;for(let Fe=0,Ke=ee.length;Fe<Ke;Fe++){let Xe=ne(ee[Fe],se[Fe],Ae);N(Xe.x,Xe.y,u+Pe)}for(let Fe=0,Ke=I.length;Fe<Ke;Fe++){let Xe=I[Fe];Ie=Te[Fe];for(let Ct=0,k=Xe.length;Ct<k;Ct++){let E=ne(Xe[Ct],Ie[Ct],Ae);y?N(E.x,E.y+_[d-1].y,_[d-1].x+Pe):N(E.x,E.y,u+Pe)}}}Z(),Ce();function Z(){let ye=r.length/3;if(h){let Re=0,Pe=B*Re;for(let Ae=0;Ae<G;Ae++){let Fe=W[Ae];xe(Fe[2]+Pe,Fe[1]+Pe,Fe[0]+Pe)}Re=d+g*2,Pe=B*Re;for(let Ae=0;Ae<G;Ae++){let Fe=W[Ae];xe(Fe[0]+Pe,Fe[1]+Pe,Fe[2]+Pe)}}else{for(let Re=0;Re<G;Re++){let Pe=W[Re];xe(Pe[2],Pe[1],Pe[0])}for(let Re=0;Re<G;Re++){let Pe=W[Re];xe(Pe[0]+B*d,Pe[1]+B*d,Pe[2]+B*d)}}t.addGroup(ye,r.length/3-ye,0)}function Ce(){let ye=r.length/3,Re=0;We(ee,Re),Re+=ee.length;for(let Pe=0,Ae=I.length;Pe<Ae;Pe++){let Fe=I[Pe];We(Fe,Re),Re+=Fe.length}t.addGroup(ye,r.length/3-ye,1)}function We(ye,Re){let Pe=ye.length;for(;--Pe>=0;){let Ae=Pe,Fe=Pe-1;Fe<0&&(Fe=ye.length-1);for(let Ke=0,Xe=d+g*2;Ke<Xe;Ke++){let Ct=B*Ke,k=B*(Ke+1),E=Re+Ae+Ct,re=Re+Fe+Ct,Se=Re+Fe+k,Me=Re+Ae+k;Ne(E,re,Se,Me)}}}function N(ye,Re,Pe){c.push(ye),c.push(Re),c.push(Pe)}function xe(ye,Re,Pe){Ue(ye),Ue(Re),Ue(Pe);let Ae=r.length/3,Fe=v.generateTopUV(t,r,Ae-3,Ae-2,Ae-1);O(Fe[0]),O(Fe[1]),O(Fe[2])}function Ne(ye,Re,Pe,Ae){Ue(ye),Ue(Re),Ue(Ae),Ue(Re),Ue(Pe),Ue(Ae);let Fe=r.length/3,Ke=v.generateSideWallUV(t,r,Fe-6,Fe-3,Fe-2,Fe-1);O(Ke[0]),O(Ke[1]),O(Ke[3]),O(Ke[1]),O(Ke[2]),O(Ke[3])}function Ue(ye){r.push(c[ye*3+0]),r.push(c[ye*3+1]),r.push(c[ye*3+2])}function O(ye){o.push(ye.x),o.push(ye.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),i=this.parameters.shapes,t=this.parameters.options;return pJ(i,t,e)}static fromJSON(e,i){let t=[];for(let o=0,s=e.shapes.length;o<s;o++){let a=i[e.shapes[o]];t.push(a)}let r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new iy[r.type]().fromJSON(r)),new n(t,e.options)}},mJ={generateTopUV:function(n,e,i,t,r){let o=e[i*3],s=e[i*3+1],a=e[t*3],c=e[t*3+1],l=e[r*3],d=e[r*3+1];return[new z(o,s),new z(a,c),new z(l,d)]},generateSideWallUV:function(n,e,i,t,r,o){let s=e[i*3],a=e[i*3+1],c=e[i*3+2],l=e[t*3],d=e[t*3+1],u=e[t*3+2],h=e[r*3],f=e[r*3+1],p=e[r*3+2],b=e[o*3],g=e[o*3+1],m=e[o*3+2];return Math.abs(a-d)<Math.abs(s-l)?[new z(s,1-c),new z(l,1-u),new z(h,1-p),new z(b,1-m)]:[new z(a,1-c),new z(d,1-u),new z(f,1-p),new z(g,1-m)]}};function pJ(n,e,i){if(i.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){let o=n[t];i.shapes.push(o.uuid)}else i.shapes.push(n.uuid);return i.options=Object.assign({},e),e.extrudePath!==void 0&&(i.options.extrudePath=e.extrudePath.toJSON()),i}var tf=class n extends oa{constructor(e=1,i=0){let t=(1+Math.sqrt(5))/2,r=[-1,t,0,1,t,0,-1,-t,0,1,-t,0,0,-1,t,0,1,t,0,-1,-t,0,1,-t,t,0,-1,t,0,1,-t,0,-1,-t,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,o,e,i),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new n(e.radius,e.detail)}},sa=class n extends oa{constructor(e=1,i=0){let t=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(t,r,e,i),this.type="OctahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new n(e.radius,e.detail)}},dy=class n extends bt{constructor(e=.5,i=1,t=32,r=1,o=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:i,thetaSegments:t,phiSegments:r,thetaStart:o,thetaLength:s},t=Math.max(3,t),r=Math.max(1,r);let a=[],c=[],l=[],d=[],u=e,h=(i-e)/r,f=new S,p=new z;for(let b=0;b<=r;b++){for(let g=0;g<=t;g++){let m=o+g/t*s;f.x=u*Math.cos(m),f.y=u*Math.sin(m),c.push(f.x,f.y,f.z),l.push(0,0,1),p.x=(f.x/i+1)/2,p.y=(f.y/i+1)/2,d.push(p.x,p.y)}u+=h}for(let b=0;b<r;b++){let g=b*(t+1);for(let m=0;m<t;m++){let v=m+g,_=v,y=v+t+1,C=v+t+2,R=v+1;a.push(_,y,R),a.push(y,C,R)}}this.setIndex(a),this.setAttribute("position",new qe(c,3)),this.setAttribute("normal",new qe(l,3)),this.setAttribute("uv",new qe(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}},uy=class n extends bt{constructor(e=new ic([new z(0,.5),new z(-.5,-.5),new z(.5,-.5)]),i=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:i};let t=[],r=[],o=[],s=[],a=0,c=0;if(Array.isArray(e)===!1)l(e);else for(let d=0;d<e.length;d++)l(e[d]),this.addGroup(a,c,d),a+=c,c=0;this.setIndex(t),this.setAttribute("position",new qe(r,3)),this.setAttribute("normal",new qe(o,3)),this.setAttribute("uv",new qe(s,2));function l(d){let u=r.length/3,h=d.extractPoints(i),f=h.shape,p=h.holes;ta.isClockWise(f)===!1&&(f=f.reverse());for(let g=0,m=p.length;g<m;g++){let v=p[g];ta.isClockWise(v)===!0&&(p[g]=v.reverse())}let b=ta.triangulateShape(f,p);for(let g=0,m=p.length;g<m;g++){let v=p[g];f=f.concat(v)}for(let g=0,m=f.length;g<m;g++){let v=f[g];r.push(v.x,v.y,0),o.push(0,0,1),s.push(v.x,v.y)}for(let g=0,m=b.length;g<m;g++){let v=b[g],_=v[0]+u,y=v[1]+u,C=v[2]+u;t.push(_,y,C),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),i=this.parameters.shapes;return gJ(i,e)}static fromJSON(e,i){let t=[];for(let r=0,o=e.shapes.length;r<o;r++){let s=i[e.shapes[r]];t.push(s)}return new n(t,e.curveSegments)}};function gJ(n,e){if(e.shapes=[],Array.isArray(n))for(let i=0,t=n.length;i<t;i++){let r=n[i];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}var ac=class n extends bt{constructor(e=1,i=32,t=16,r=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:i,heightSegments:t,phiStart:r,phiLength:o,thetaStart:s,thetaLength:a},i=Math.max(3,Math.floor(i)),t=Math.max(2,Math.floor(t));let c=Math.min(s+a,Math.PI),l=0,d=[],u=new S,h=new S,f=[],p=[],b=[],g=[];for(let m=0;m<=t;m++){let v=[],_=m/t,y=0;m===0&&s===0?y=.5/i:m===t&&c===Math.PI&&(y=-.5/i);for(let C=0;C<=i;C++){let R=C/i;u.x=-e*Math.cos(r+R*o)*Math.sin(s+_*a),u.y=e*Math.cos(s+_*a),u.z=e*Math.sin(r+R*o)*Math.sin(s+_*a),p.push(u.x,u.y,u.z),h.copy(u).normalize(),b.push(h.x,h.y,h.z),g.push(R+y,1-_),v.push(l++)}d.push(v)}for(let m=0;m<t;m++)for(let v=0;v<i;v++){let _=d[m][v+1],y=d[m][v],C=d[m+1][v],R=d[m+1][v+1];(m!==0||s>0)&&f.push(_,y,R),(m!==t-1||c<Math.PI)&&f.push(y,C,R)}this.setIndex(f),this.setAttribute("position",new qe(p,3)),this.setAttribute("normal",new qe(b,3)),this.setAttribute("uv",new qe(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},hy=class n extends oa{constructor(e=1,i=0){let t=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(t,r,e,i),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new n(e.radius,e.detail)}},aa=class n extends bt{constructor(e=1,i=.4,t=12,r=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:i,radialSegments:t,tubularSegments:r,arc:o},t=Math.floor(t),r=Math.floor(r);let s=[],a=[],c=[],l=[],d=new S,u=new S,h=new S;for(let f=0;f<=t;f++)for(let p=0;p<=r;p++){let b=p/r*o,g=f/t*Math.PI*2;u.x=(e+i*Math.cos(g))*Math.cos(b),u.y=(e+i*Math.cos(g))*Math.sin(b),u.z=i*Math.sin(g),a.push(u.x,u.y,u.z),d.x=e*Math.cos(b),d.y=e*Math.sin(b),h.subVectors(u,d).normalize(),c.push(h.x,h.y,h.z),l.push(p/r),l.push(f/t)}for(let f=1;f<=t;f++)for(let p=1;p<=r;p++){let b=(r+1)*f+p-1,g=(r+1)*(f-1)+p-1,m=(r+1)*(f-1)+p,v=(r+1)*f+p;s.push(b,g,v),s.push(g,m,v)}this.setIndex(s),this.setAttribute("position",new qe(a,3)),this.setAttribute("normal",new qe(c,3)),this.setAttribute("uv",new qe(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},fy=class n extends bt{constructor(e=1,i=.4,t=64,r=8,o=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:i,tubularSegments:t,radialSegments:r,p:o,q:s},t=Math.floor(t),r=Math.floor(r);let a=[],c=[],l=[],d=[],u=new S,h=new S,f=new S,p=new S,b=new S,g=new S,m=new S;for(let _=0;_<=t;++_){let y=_/t*o*Math.PI*2;v(y,o,s,e,f),v(y+.01,o,s,e,p),g.subVectors(p,f),m.addVectors(p,f),b.crossVectors(g,m),m.crossVectors(b,g),b.normalize(),m.normalize();for(let C=0;C<=r;++C){let R=C/r*Math.PI*2,M=-i*Math.cos(R),A=i*Math.sin(R);u.x=f.x+(M*m.x+A*b.x),u.y=f.y+(M*m.y+A*b.y),u.z=f.z+(M*m.z+A*b.z),c.push(u.x,u.y,u.z),h.subVectors(u,f).normalize(),l.push(h.x,h.y,h.z),d.push(_/t),d.push(C/r)}}for(let _=1;_<=t;_++)for(let y=1;y<=r;y++){let C=(r+1)*(_-1)+(y-1),R=(r+1)*_+(y-1),M=(r+1)*_+y,A=(r+1)*(_-1)+y;a.push(C,R,A),a.push(R,M,A)}this.setIndex(a),this.setAttribute("position",new qe(c,3)),this.setAttribute("normal",new qe(l,3)),this.setAttribute("uv",new qe(d,2));function v(_,y,C,R,M){let A=Math.cos(_),T=Math.sin(_),x=C/y*_,I=Math.cos(x);M.x=R*(2+I)*.5*A,M.y=R*(2+I)*T*.5,M.z=R*Math.sin(x)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},my=class n extends bt{constructor(e=new Bp(new S(-1,-1,0),new S(-1,1,0),new S(1,1,0)),i=64,t=1,r=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:i,radius:t,radialSegments:r,closed:o};let s=e.computeFrenetFrames(i,o);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;let a=new S,c=new S,l=new z,d=new S,u=[],h=[],f=[],p=[];b(),this.setIndex(p),this.setAttribute("position",new qe(u,3)),this.setAttribute("normal",new qe(h,3)),this.setAttribute("uv",new qe(f,2));function b(){for(let _=0;_<i;_++)g(_);g(o===!1?i:0),v(),m()}function g(_){d=e.getPointAt(_/i,d);let y=s.normals[_],C=s.binormals[_];for(let R=0;R<=r;R++){let M=R/r*Math.PI*2,A=Math.sin(M),T=-Math.cos(M);c.x=T*y.x+A*C.x,c.y=T*y.y+A*C.y,c.z=T*y.z+A*C.z,c.normalize(),h.push(c.x,c.y,c.z),a.x=d.x+t*c.x,a.y=d.y+t*c.y,a.z=d.z+t*c.z,u.push(a.x,a.y,a.z)}}function m(){for(let _=1;_<=i;_++)for(let y=1;y<=r;y++){let C=(r+1)*(_-1)+(y-1),R=(r+1)*_+(y-1),M=(r+1)*_+y,A=(r+1)*(_-1)+y;p.push(C,R,A),p.push(R,M,A)}}function v(){for(let _=0;_<=i;_++)for(let y=0;y<=r;y++)l.x=_/i,l.y=y/r,f.push(l.x,l.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new n(new iy[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}},py=class extends bt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){let i=[],t=new Set,r=new S,o=new S;if(e.index!==null){let s=e.attributes.position,a=e.index,c=e.groups;c.length===0&&(c=[{start:0,count:a.count,materialIndex:0}]);for(let l=0,d=c.length;l<d;++l){let u=c[l],h=u.start,f=u.count;for(let p=h,b=h+f;p<b;p+=3)for(let g=0;g<3;g++){let m=a.getX(p+g),v=a.getX(p+(g+1)%3);r.fromBufferAttribute(s,m),o.fromBufferAttribute(s,v),EN(r,o,t)===!0&&(i.push(r.x,r.y,r.z),i.push(o.x,o.y,o.z))}}}else{let s=e.attributes.position;for(let a=0,c=s.count/3;a<c;a++)for(let l=0;l<3;l++){let d=3*a+l,u=3*a+(l+1)%3;r.fromBufferAttribute(s,d),o.fromBufferAttribute(s,u),EN(r,o,t)===!0&&(i.push(r.x,r.y,r.z),i.push(o.x,o.y,o.z))}}this.setAttribute("position",new qe(i,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}};function EN(n,e,i){let t=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return i.has(t)===!0||i.has(r)===!0?!1:(i.add(t),i.add(r),!0)}var DN=Object.freeze({__proto__:null,BoxGeometry:Zi,CapsuleGeometry:ry,CircleGeometry:oy,ConeGeometry:sy,CylinderGeometry:On,DodecahedronGeometry:ay,EdgesGeometry:cy,ExtrudeGeometry:ly,IcosahedronGeometry:tf,LatheGeometry:Vp,OctahedronGeometry:sa,PlaneGeometry:na,PolyhedronGeometry:oa,RingGeometry:dy,ShapeGeometry:uy,SphereGeometry:ac,TetrahedronGeometry:hy,TorusGeometry:aa,TorusKnotGeometry:fy,TubeGeometry:my,WireframeGeometry:py}),gy=class extends dn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new pe(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}},by=class extends Ft{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}},Dr=class extends dn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new pe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hl,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new so,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},qr=class extends Dr{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new z(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Cn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(i){this.ior=(1+.4*i)/(1-.4*i)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new pe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new pe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new pe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},nf=class extends dn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new pe(16777215),this.specular=new pe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hl,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new so,this.combine=eg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},_y=class extends dn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new pe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hl,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},ca=class extends dn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hl,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}},vy=class extends dn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new pe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hl,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new so,this.combine=eg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},yy=class extends dn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new pe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hl,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}},xy=class extends on{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}};function Rd(n,e,i){return!n||!i&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function u3(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function h3(n){function e(r,o){return n[r]-n[o]}let i=n.length,t=new Array(i);for(let r=0;r!==i;++r)t[r]=r;return t.sort(e),t}function uE(n,e,i){let t=n.length,r=new n.constructor(t);for(let o=0,s=0;s!==t;++o){let a=i[o]*e;for(let c=0;c!==e;++c)r[s++]=n[a+c]}return r}function lD(n,e,i,t){let r=1,o=n[0];for(;o!==void 0&&o[t]===void 0;)o=n[r++];if(o===void 0)return;let s=o[t];if(s!==void 0)if(Array.isArray(s))do s=o[t],s!==void 0&&(e.push(o.time),i.push.apply(i,s)),o=n[r++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[t],s!==void 0&&(e.push(o.time),s.toArray(i,i.length)),o=n[r++];while(o!==void 0);else do s=o[t],s!==void 0&&(e.push(o.time),i.push(s)),o=n[r++];while(o!==void 0)}function bJ(n,e,i,t,r=30){let o=n.clone();o.name=e;let s=[];for(let c=0;c<o.tracks.length;++c){let l=o.tracks[c],d=l.getValueSize(),u=[],h=[];for(let f=0;f<l.times.length;++f){let p=l.times[f]*r;if(!(p<i||p>=t)){u.push(l.times[f]);for(let b=0;b<d;++b)h.push(l.values[f*d+b])}}u.length!==0&&(l.times=Rd(u,l.times.constructor),l.values=Rd(h,l.values.constructor),s.push(l))}o.tracks=s;let a=1/0;for(let c=0;c<o.tracks.length;++c)a>o.tracks[c].times[0]&&(a=o.tracks[c].times[0]);for(let c=0;c<o.tracks.length;++c)o.tracks[c].shift(-1*a);return o.resetDuration(),o}function _J(n,e=0,i=n,t=30){t<=0&&(t=30);let r=i.tracks.length,o=e/t;for(let s=0;s<r;++s){let a=i.tracks[s],c=a.ValueTypeName;if(c==="bool"||c==="string")continue;let l=n.tracks.find(function(m){return m.name===a.name&&m.ValueTypeName===c});if(l===void 0)continue;let d=0,u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=u/3);let h=0,f=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);let p=a.times.length-1,b;if(o<=a.times[0]){let m=d,v=u-d;b=a.values.slice(m,v)}else if(o>=a.times[p]){let m=p*u+d,v=m+u-d;b=a.values.slice(m,v)}else{let m=a.createInterpolant(),v=d,_=u-d;m.evaluate(o),b=m.resultBuffer.slice(v,_)}c==="quaternion"&&new ii().fromArray(b).normalize().conjugate().toArray(b);let g=l.times.length;for(let m=0;m<g;++m){let v=m*f+h;if(c==="quaternion")ii.multiplyQuaternionsFlat(l.values,v,b,0,l.values,v);else{let _=f-h*2;for(let y=0;y<_;++y)l.values[v+y]-=b[y]}}}return n.blendMode=iD,n}var vJ={convertArray:Rd,isTypedArray:u3,getKeyframeOrder:h3,sortedArray:uE,flattenJSON:lD,subclip:bJ,makeClipAdditive:_J},cc=class{constructor(e,i,t,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new i.constructor(t),this.sampleValues=i,this.valueSize=t,this.settings=null,this.DefaultSettings_={}}evaluate(e){let i=this.parameterPositions,t=this._cachedIndex,r=i[t],o=i[t-1];e:{t:{let s;i:{n:if(!(e<r)){for(let a=t+2;;){if(r===void 0){if(e<o)break n;return t=i.length,this._cachedIndex=t,this.copySampleValue_(t-1)}if(t===a)break;if(o=r,r=i[++t],e<r)break t}s=i.length;break i}if(!(e>=o)){let a=i[1];e<a&&(t=2,o=a);for(let c=t-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(t===c)break;if(r=o,o=i[--t-1],e>=o)break t}s=t,t=0;break i}break e}for(;t<s;){let a=t+s>>>1;e<i[a]?s=a:t=a+1}if(r=i[t],o=i[t-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return t=i.length,this._cachedIndex=t,this.copySampleValue_(t-1)}this._cachedIndex=t,this.intervalChanged_(t,o,r)}return this.interpolate_(t,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let i=this.resultBuffer,t=this.sampleValues,r=this.valueSize,o=e*r;for(let s=0;s!==r;++s)i[s]=t[o+s];return i}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},wy=class extends cc{constructor(e,i,t,r){super(e,i,t,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Md,endingEnd:Md}}intervalChanged_(e,i,t){let r=this.parameterPositions,o=e-2,s=e+1,a=r[o],c=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case Sd:o=e,a=2*i-t;break;case Mp:o=r.length-2,a=i+r[o]-r[o+1];break;default:o=e,a=t}if(c===void 0)switch(this.getSettings_().endingEnd){case Sd:s=e,c=2*t-i;break;case Mp:s=1,c=t+r[1]-r[0];break;default:s=e-1,c=i}let l=(t-i)*.5,d=this.valueSize;this._weightPrev=l/(i-a),this._weightNext=l/(c-t),this._offsetPrev=o*d,this._offsetNext=s*d}interpolate_(e,i,t,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,d=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(t-i)/(r-i),b=p*p,g=b*p,m=-h*g+2*h*b-h*p,v=(1+h)*g+(-1.5-2*h)*b+(-.5+h)*p+1,_=(-1-f)*g+(1.5+f)*b+.5*p,y=f*g-f*b;for(let C=0;C!==a;++C)o[C]=m*s[d+C]+v*s[l+C]+_*s[c+C]+y*s[u+C];return o}},Wp=class extends cc{constructor(e,i,t,r){super(e,i,t,r)}interpolate_(e,i,t,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,d=(t-i)/(r-i),u=1-d;for(let h=0;h!==a;++h)o[h]=s[l+h]*u+s[c+h]*d;return o}},My=class extends cc{constructor(e,i,t,r){super(e,i,t,r)}interpolate_(e){return this.copySampleValue_(e-1)}},Io=class{constructor(e,i,t,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(i===void 0||i.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Rd(i,this.TimeBufferType),this.values=Rd(t,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let i=e.constructor,t;if(i.toJSON!==this.toJSON)t=i.toJSON(e);else{t={name:e.name,times:Rd(e.times,Array),values:Rd(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}InterpolantFactoryMethodDiscrete(e){return new My(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Wp(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new wy(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let i;switch(e){case jd:i=this.InterpolantFactoryMethodDiscrete;break;case Od:i=this.InterpolantFactoryMethodLinear;break;case B0:i=this.InterpolantFactoryMethodSmooth;break}if(i===void 0){let t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(t);return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=i,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return jd;case this.InterpolantFactoryMethodLinear:return Od;case this.InterpolantFactoryMethodSmooth:return B0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let i=this.times;for(let t=0,r=i.length;t!==r;++t)i[t]+=e}return this}scale(e){if(e!==1){let i=this.times;for(let t=0,r=i.length;t!==r;++t)i[t]*=e}return this}trim(e,i){let t=this.times,r=t.length,o=0,s=r-1;for(;o!==r&&t[o]<e;)++o;for(;s!==-1&&t[s]>i;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);let a=this.getValueSize();this.times=t.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0,i=this.getValueSize();i-Math.floor(i)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let t=this.times,r=this.values,o=t.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){let c=t[a];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(s!==null&&s>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,s),e=!1;break}s=c}if(r!==void 0&&u3(r))for(let a=0,c=r.length;a!==c;++a){let l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){let e=this.times.slice(),i=this.values.slice(),t=this.getValueSize(),r=this.getInterpolation()===B0,o=e.length-1,s=1;for(let a=1;a<o;++a){let c=!1,l=e[a],d=e[a+1];if(l!==d&&(a!==1||l!==e[0]))if(r)c=!0;else{let u=a*t,h=u-t,f=u+t;for(let p=0;p!==t;++p){let b=i[u+p];if(b!==i[h+p]||b!==i[f+p]){c=!0;break}}}if(c){if(a!==s){e[s]=e[a];let u=a*t,h=s*t;for(let f=0;f!==t;++f)i[h+f]=i[u+f]}++s}}if(o>0){e[s]=e[o];for(let a=o*t,c=s*t,l=0;l!==t;++l)i[c+l]=i[a+l];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=i.slice(0,s*t)):(this.times=e,this.values=i),this}clone(){let e=this.times.slice(),i=this.values.slice(),t=this.constructor,r=new t(this.name,e,i);return r.createInterpolant=this.createInterpolant,r}};Io.prototype.TimeBufferType=Float32Array;Io.prototype.ValueBufferType=Float32Array;Io.prototype.DefaultInterpolation=Od;var lc=class extends Io{constructor(e,i,t){super(e,i,t)}};lc.prototype.ValueTypeName="bool";lc.prototype.ValueBufferType=Array;lc.prototype.DefaultInterpolation=jd;lc.prototype.InterpolantFactoryMethodLinear=void 0;lc.prototype.InterpolantFactoryMethodSmooth=void 0;var $p=class extends Io{};$p.prototype.ValueTypeName="color";var la=class extends Io{};la.prototype.ValueTypeName="number";var Sy=class extends cc{constructor(e,i,t,r){super(e,i,t,r)}interpolate_(e,i,t,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=(t-i)/(r-i),l=e*a;for(let d=l+a;l!==d;l+=4)ii.slerpFlat(o,0,s,l-a,s,l,c);return o}},da=class extends Io{InterpolantFactoryMethodLinear(e){return new Sy(this.times,this.values,this.getValueSize(),e)}};da.prototype.ValueTypeName="quaternion";da.prototype.InterpolantFactoryMethodSmooth=void 0;var dc=class extends Io{constructor(e,i,t){super(e,i,t)}};dc.prototype.ValueTypeName="string";dc.prototype.ValueBufferType=Array;dc.prototype.DefaultInterpolation=jd;dc.prototype.InterpolantFactoryMethodLinear=void 0;dc.prototype.InterpolantFactoryMethodSmooth=void 0;var ua=class extends Io{};ua.prototype.ValueTypeName="vector";var uc=class{constructor(e="",i=-1,t=[],r=Oy){this.name=e,this.tracks=t,this.duration=i,this.blendMode=r,this.uuid=Eo(),this.duration<0&&this.resetDuration()}static parse(e){let i=[],t=e.tracks,r=1/(e.fps||1);for(let s=0,a=t.length;s!==a;++s)i.push(xJ(t[s]).scale(r));let o=new this(e.name,e.duration,i,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){let i=[],t=e.tracks,r={name:e.name,duration:e.duration,tracks:i,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=t.length;o!==s;++o)i.push(Io.toJSON(t[o]));return r}static CreateFromMorphTargetSequence(e,i,t,r){let o=i.length,s=[];for(let a=0;a<o;a++){let c=[],l=[];c.push((a+o-1)%o,a,(a+1)%o),l.push(0,1,0);let d=h3(c);c=uE(c,1,d),l=uE(l,1,d),!r&&c[0]===0&&(c.push(o),l.push(l[0])),s.push(new la(".morphTargetInfluences["+i[a].name+"]",c,l).scale(1/t))}return new this(e,-1,s)}static findByName(e,i){let t=e;if(!Array.isArray(e)){let r=e;t=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<t.length;r++)if(t[r].name===i)return t[r];return null}static CreateClipsFromMorphTargetSequences(e,i,t){let r={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){let l=e[a],d=l.name.match(o);if(d&&d.length>1){let u=d[1],h=r[u];h||(r[u]=h=[]),h.push(l)}}let s=[];for(let a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],i,t));return s}static parseAnimation(e,i){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let t=function(u,h,f,p,b){if(f.length!==0){let g=[],m=[];lD(f,g,m,p),g.length!==0&&b.push(new u(h,g,m))}},r=[],o=e.name||"default",s=e.fps||30,a=e.blendMode,c=e.length||-1,l=e.hierarchy||[];for(let u=0;u<l.length;u++){let h=l[u].keys;if(!(!h||h.length===0))if(h[0].morphTargets){let f={},p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let b=0;b<h[p].morphTargets.length;b++)f[h[p].morphTargets[b]]=-1;for(let b in f){let g=[],m=[];for(let v=0;v!==h[p].morphTargets.length;++v){let _=h[p];g.push(_.time),m.push(_.morphTarget===b?1:0)}r.push(new la(".morphTargetInfluence["+b+"]",g,m))}c=f.length*s}else{let f=".bones["+i[u].name+"]";t(ua,f+".position",h,"pos",r),t(da,f+".quaternion",h,"rot",r),t(ua,f+".scale",h,"scl",r)}}return r.length===0?null:new this(o,c,r,a)}resetDuration(){let e=this.tracks,i=0;for(let t=0,r=e.length;t!==r;++t){let o=this.tracks[t];i=Math.max(i,o.times[o.times.length-1])}return this.duration=i,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let i=0;i<this.tracks.length;i++)e=e&&this.tracks[i].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function yJ(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return la;case"vector":case"vector2":case"vector3":case"vector4":return ua;case"color":return $p;case"quaternion":return da;case"bool":case"boolean":return lc;case"string":return dc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function xJ(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=yJ(n.type);if(n.times===void 0){let i=[],t=[];lD(n.keys,i,t,"value"),n.times=i,n.values=t}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}var ec={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},qp=class{constructor(e,i,t){let r=this,o=!1,s=0,a=0,c,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=i,this.onError=t,this.itemStart=function(d){a++,o===!1&&r.onStart!==void 0&&r.onStart(d,s,a),o=!0},this.itemEnd=function(d){s++,r.onProgress!==void 0&&r.onProgress(d,s,a),s===a&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,u){return l.push(d,u),this},this.removeHandler=function(d){let u=l.indexOf(d);return u!==-1&&l.splice(u,2),this},this.getHandler=function(d){for(let u=0,h=l.length;u<h;u+=2){let f=l[u],p=l[u+1];if(f.global&&(f.lastIndex=0),f.test(d))return p}return null}}},f3=new qp,ir=(()=>{class n{constructor(i){this.manager=i!==void 0?i:f3,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(i,t){let r=this;return new Promise(function(o,s){r.load(i,o,t,s)})}parse(){}setCrossOrigin(i){return this.crossOrigin=i,this}setWithCredentials(i){return this.withCredentials=i,this}setPath(i){return this.path=i,this}setResourcePath(i){return this.resourcePath=i,this}setRequestHeader(i){return this.requestHeader=i,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})(),Ya={},hE=class extends Error{constructor(e,i){super(e),this.response=i}},tr=class extends ir{constructor(e){super(e)}load(e,i,t,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=ec.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{i&&i(o),this.manager.itemEnd(e)},0),o;if(Ya[e]!==void 0){Ya[e].push({onLoad:i,onProgress:t,onError:r});return}Ya[e]=[],Ya[e].push({onLoad:i,onProgress:t,onError:r});let s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(s).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let d=Ya[e],u=l.body.getReader(),h=l.headers.get("X-File-Size")||l.headers.get("Content-Length"),f=h?parseInt(h):0,p=f!==0,b=0,g=new ReadableStream({start(m){v();function v(){u.read().then(({done:_,value:y})=>{if(_)m.close();else{b+=y.byteLength;let C=new ProgressEvent("progress",{lengthComputable:p,loaded:b,total:f});for(let R=0,M=d.length;R<M;R++){let A=d[R];A.onProgress&&A.onProgress(C)}m.enqueue(y),v()}},_=>{m.error(_)})}}});return new Response(g)}else throw new hE(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return l.json();default:if(a===void 0)return l.text();{let u=/charset="?([^;"\s]*)"?/i.exec(a),h=u&&u[1]?u[1].toLowerCase():void 0,f=new TextDecoder(h);return l.arrayBuffer().then(p=>f.decode(p))}}}).then(l=>{ec.add(e,l);let d=Ya[e];delete Ya[e];for(let u=0,h=d.length;u<h;u++){let f=d[u];f.onLoad&&f.onLoad(l)}}).catch(l=>{let d=Ya[e];if(d===void 0)throw this.manager.itemError(e),l;delete Ya[e];for(let u=0,h=d.length;u<h;u++){let f=d[u];f.onError&&f.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},fE=class extends ir{constructor(e){super(e)}load(e,i,t,r){let o=this,s=new tr(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{i(o.parse(JSON.parse(a)))}catch(c){r?r(c):console.error(c),o.manager.itemError(e)}},t,r)}parse(e){let i=[];for(let t=0;t<e.length;t++){let r=uc.parse(e[t]);i.push(r)}return i}},mE=class extends ir{constructor(e){super(e)}load(e,i,t,r){let o=this,s=[],a=new ef,c=new tr(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(o.withCredentials);let l=0;function d(u){c.load(e[u],function(h){let f=o.parse(h,!0);s[u]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},l+=1,l===6&&(f.mipmapCount===1&&(a.minFilter=gn),a.image=s,a.format=f.format,a.needsUpdate=!0,i&&i(a))},t,r)}if(Array.isArray(e))for(let u=0,h=e.length;u<h;++u)d(u);else c.load(e,function(u){let h=o.parse(u,!0);if(h.isCubemap){let f=h.mipmaps.length/h.mipmapCount;for(let p=0;p<f;p++){s[p]={mipmaps:[]};for(let b=0;b<h.mipmapCount;b++)s[p].mipmaps.push(h.mipmaps[p*h.mipmapCount+b]),s[p].format=h.format,s[p].width=h.width,s[p].height=h.height}a.image=s}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=gn),a.format=h.format,a.needsUpdate=!0,i&&i(a)},t,r);return a}},Wd=class extends ir{constructor(e){super(e)}load(e,i,t,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=ec.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){i&&i(s),o.manager.itemEnd(e)},0),s;let a=Dp("img");function c(){d(),ec.add(e,this),i&&i(this),o.manager.itemEnd(e)}function l(u){d(),r&&r(u),o.manager.itemError(e),o.manager.itemEnd(e)}function d(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}},pE=class extends ir{constructor(e){super(e)}load(e,i,t,r){let o=new Nd;o.colorSpace=Fn;let s=new Wd(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function c(l){s.load(e[l],function(d){o.images[l]=d,a++,a===6&&(o.needsUpdate=!0,i&&i(o))},void 0,r)}for(let l=0;l<e.length;++l)c(l);return o}},gE=class extends ir{constructor(e){super(e)}load(e,i,t,r){let o=this,s=new $r,a=new tr(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(o.withCredentials),a.load(e,function(c){let l;try{l=o.parse(c)}catch(d){if(r!==void 0)r(d);else{console.error(d);return}}l.image!==void 0?s.image=l.image:l.data!==void 0&&(s.image.width=l.width,s.image.height=l.height,s.image.data=l.data),s.wrapS=l.wrapS!==void 0?l.wrapS:ro,s.wrapT=l.wrapT!==void 0?l.wrapT:ro,s.magFilter=l.magFilter!==void 0?l.magFilter:gn,s.minFilter=l.minFilter!==void 0?l.minFilter:gn,s.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.colorSpace!==void 0&&(s.colorSpace=l.colorSpace),l.flipY!==void 0&&(s.flipY=l.flipY),l.format!==void 0&&(s.format=l.format),l.type!==void 0&&(s.type=l.type),l.mipmaps!==void 0&&(s.mipmaps=l.mipmaps,s.minFilter=Co),l.mipmapCount===1&&(s.minFilter=gn),l.generateMipmaps!==void 0&&(s.generateMipmaps=l.generateMipmaps),s.needsUpdate=!0,i&&i(s,l)},t,r),s}},Xp=class extends ir{constructor(e){super(e)}load(e,i,t,r){let o=new vn,s=new Wd(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,i!==void 0&&i(o)},t,r),o}},ha=class extends Tt{constructor(e,i=1){super(),this.isLight=!0,this.type="Light",this.color=new pe(e),this.intensity=i}dispose(){}copy(e,i){return super.copy(e,i),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let i=super.toJSON(e);return i.object.color=this.color.getHex(),i.object.intensity=this.intensity,this.groundColor!==void 0&&(i.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(i.object.distance=this.distance),this.angle!==void 0&&(i.object.angle=this.angle),this.decay!==void 0&&(i.object.decay=this.decay),this.penumbra!==void 0&&(i.object.penumbra=this.penumbra),this.shadow!==void 0&&(i.object.shadow=this.shadow.toJSON()),i}},rf=class extends ha{constructor(e,i,t){super(e,t),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Tt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new pe(i)}copy(e,i){return super.copy(e,i),this.groundColor.copy(e.groundColor),this}},oC=new Be,AN=new S,IN=new S,Yp=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new z(512,512),this.map=null,this.mapPass=null,this.matrix=new Be,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ld,this._frameExtents=new z(1,1),this._viewportCount=1,this._viewports=[new xi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let i=this.camera,t=this.matrix;AN.setFromMatrixPosition(e.matrixWorld),i.position.copy(AN),IN.setFromMatrixPosition(e.target.matrixWorld),i.lookAt(IN),i.updateMatrixWorld(),oC.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(oC),t.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),t.multiply(oC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},bE=class extends Yp{constructor(){super(new en(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let i=this.camera,t=Gh*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=e.distance||i.far;(t!==i.fov||r!==i.aspect||o!==i.far)&&(i.fov=t,i.aspect=r,i.far=o,i.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},of=class extends ha{constructor(e,i,t=0,r=Math.PI/3,o=0,s=2){super(e,i),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Tt.DEFAULT_UP),this.updateMatrix(),this.target=new Tt,this.distance=t,this.angle=r,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new bE}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,i){return super.copy(e,i),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},PN=new Be,fp=new S,sC=new S,_E=class extends Yp{constructor(){super(new en(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new z(4,2),this._viewportCount=6,this._viewports=[new xi(2,1,1,1),new xi(0,1,1,1),new xi(3,1,1,1),new xi(1,1,1,1),new xi(3,0,1,1),new xi(1,0,1,1)],this._cubeDirections=[new S(1,0,0),new S(-1,0,0),new S(0,0,1),new S(0,0,-1),new S(0,1,0),new S(0,-1,0)],this._cubeUps=[new S(0,1,0),new S(0,1,0),new S(0,1,0),new S(0,1,0),new S(0,0,1),new S(0,0,-1)]}updateMatrices(e,i=0){let t=this.camera,r=this.matrix,o=e.distance||t.far;o!==t.far&&(t.far=o,t.updateProjectionMatrix()),fp.setFromMatrixPosition(e.matrixWorld),t.position.copy(fp),sC.copy(t.position),sC.add(this._cubeDirections[i]),t.up.copy(this._cubeUps[i]),t.lookAt(sC),t.updateMatrixWorld(),r.makeTranslation(-fp.x,-fp.y,-fp.z),PN.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(PN)}},cl=class extends ha{constructor(e,i,t=0,r=2){super(e,i),this.isPointLight=!0,this.type="PointLight",this.distance=t,this.decay=r,this.shadow=new _E}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,i){return super.copy(e,i),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},vE=class extends Yp{constructor(){super(new Do(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},ll=class extends ha{constructor(e,i){super(e,i),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Tt.DEFAULT_UP),this.updateMatrix(),this.target=new Tt,this.shadow=new vE}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},sf=class extends ha{constructor(e,i){super(e,i),this.isAmbientLight=!0,this.type="AmbientLight"}},Ry=class extends ha{constructor(e,i,t=10,r=10){super(e,i),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=t,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){let i=super.toJSON(e);return i.object.width=this.width,i.object.height=this.height,i}},Ty=class{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new S)}set(e){for(let i=0;i<9;i++)this.coefficients[i].copy(e[i]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,i){let t=e.x,r=e.y,o=e.z,s=this.coefficients;return i.copy(s[0]).multiplyScalar(.282095),i.addScaledVector(s[1],.488603*r),i.addScaledVector(s[2],.488603*o),i.addScaledVector(s[3],.488603*t),i.addScaledVector(s[4],1.092548*(t*r)),i.addScaledVector(s[5],1.092548*(r*o)),i.addScaledVector(s[6],.315392*(3*o*o-1)),i.addScaledVector(s[7],1.092548*(t*o)),i.addScaledVector(s[8],.546274*(t*t-r*r)),i}getIrradianceAt(e,i){let t=e.x,r=e.y,o=e.z,s=this.coefficients;return i.copy(s[0]).multiplyScalar(.886227),i.addScaledVector(s[1],2*.511664*r),i.addScaledVector(s[2],2*.511664*o),i.addScaledVector(s[3],2*.511664*t),i.addScaledVector(s[4],2*.429043*t*r),i.addScaledVector(s[5],2*.429043*r*o),i.addScaledVector(s[6],.743125*o*o-.247708),i.addScaledVector(s[7],2*.429043*t*o),i.addScaledVector(s[8],.429043*(t*t-r*r)),i}add(e){for(let i=0;i<9;i++)this.coefficients[i].add(e.coefficients[i]);return this}addScaledSH(e,i){for(let t=0;t<9;t++)this.coefficients[t].addScaledVector(e.coefficients[t],i);return this}scale(e){for(let i=0;i<9;i++)this.coefficients[i].multiplyScalar(e);return this}lerp(e,i){for(let t=0;t<9;t++)this.coefficients[t].lerp(e.coefficients[t],i);return this}equals(e){for(let i=0;i<9;i++)if(!this.coefficients[i].equals(e.coefficients[i]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,i=0){let t=this.coefficients;for(let r=0;r<9;r++)t[r].fromArray(e,i+r*3);return this}toArray(e=[],i=0){let t=this.coefficients;for(let r=0;r<9;r++)t[r].toArray(e,i+r*3);return e}static getBasisAt(e,i){let t=e.x,r=e.y,o=e.z;i[0]=.282095,i[1]=.488603*r,i[2]=.488603*o,i[3]=.488603*t,i[4]=1.092548*t*r,i[5]=1.092548*r*o,i[6]=.315392*(3*o*o-1),i[7]=1.092548*t*o,i[8]=.546274*(t*t-r*r)}},Cy=class extends ha{constructor(e=new Ty,i=1){super(void 0,i),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){let i=super.toJSON(e);return i.object.sh=this.sh.toArray(),i}},Ey=class n extends ir{constructor(e){super(e),this.textures={}}load(e,i,t,r){let o=this,s=new tr(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{i(o.parse(JSON.parse(a)))}catch(c){r?r(c):console.error(c),o.manager.itemError(e)}},t,r)}parse(e){let i=this.textures;function t(o){return i[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),i[o]}let r=n.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new pe().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(let o in e.uniforms){let s=e.uniforms[o];switch(r.uniforms[o]={},s.type){case"t":r.uniforms[o].value=t(s.value);break;case"c":r.uniforms[o].value=new pe().setHex(s.value);break;case"v2":r.uniforms[o].value=new z().fromArray(s.value);break;case"v3":r.uniforms[o].value=new S().fromArray(s.value);break;case"v4":r.uniforms[o].value=new xi().fromArray(s.value);break;case"m3":r.uniforms[o].value=new Jt().fromArray(s.value);break;case"m4":r.uniforms[o].value=new Be().fromArray(s.value);break;default:r.uniforms[o].value=s.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(let o in e.extensions)r.extensions[o]=e.extensions[o];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=t(e.map)),e.matcap!==void 0&&(r.matcap=t(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=t(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=t(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=t(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),r.normalScale=new z().fromArray(o)}return e.displacementMap!==void 0&&(r.displacementMap=t(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=t(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=t(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=t(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=t(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=t(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=t(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=t(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=t(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=t(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=t(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=t(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=t(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=t(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new z().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=t(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=t(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=t(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=t(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=t(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=t(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=t(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){let i={ShadowMaterial:gy,SpriteMaterial:jp,RawShaderMaterial:by,ShaderMaterial:Ft,PointsMaterial:Vd,MeshPhysicalMaterial:qr,MeshStandardMaterial:Dr,MeshPhongMaterial:nf,MeshToonMaterial:_y,MeshNormalMaterial:ca,MeshLambertMaterial:vy,MeshDepthMaterial:Bd,MeshDistanceMaterial:Fp,MeshBasicMaterial:tn,MeshMatcapMaterial:yy,LineDashedMaterial:xy,LineBasicMaterial:on,Material:dn};return new i[e]}},ys=class{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let i="";for(let t=0,r=e.length;t<r;t++)i+=String.fromCharCode(e[t]);try{return decodeURIComponent(escape(i))}catch{return i}}static extractUrlBase(e){let i=e.lastIndexOf("/");return i===-1?"./":e.slice(0,i+1)}static resolveURL(e,i){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(i)&&/^\//.test(e)&&(i=i.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:i+e)}},Dy=class extends bt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},Ay=class extends ir{constructor(e){super(e)}load(e,i,t,r){let o=this,s=new tr(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{i(o.parse(JSON.parse(a)))}catch(c){r?r(c):console.error(c),o.manager.itemError(e)}},t,r)}parse(e){let i={},t={};function r(f,p){if(i[p]!==void 0)return i[p];let g=f.interleavedBuffers[p],m=o(f,g.buffer),v=Bh(g.type,m),_=new sc(v,g.stride);return _.uuid=g.uuid,i[p]=_,_}function o(f,p){if(t[p]!==void 0)return t[p];let g=f.arrayBuffers[p],m=new Uint32Array(g).buffer;return t[p]=m,m}let s=e.isInstancedBufferGeometry?new Dy:new bt,a=e.data.index;if(a!==void 0){let f=Bh(a.type,a.array);s.setIndex(new hi(f,1))}let c=e.data.attributes;for(let f in c){let p=c[f],b;if(p.isInterleavedBufferAttribute){let g=r(e.data,p.data);b=new ra(g,p.itemSize,p.offset,p.normalized)}else{let g=Bh(p.type,p.array),m=p.isInstancedBufferAttribute?_s:hi;b=new m(g,p.itemSize,p.normalized)}p.name!==void 0&&(b.name=p.name),p.usage!==void 0&&b.setUsage(p.usage),s.setAttribute(f,b)}let l=e.data.morphAttributes;if(l)for(let f in l){let p=l[f],b=[];for(let g=0,m=p.length;g<m;g++){let v=p[g],_;if(v.isInterleavedBufferAttribute){let y=r(e.data,v.data);_=new ra(y,v.itemSize,v.offset,v.normalized)}else{let y=Bh(v.type,v.array);_=new hi(y,v.itemSize,v.normalized)}v.name!==void 0&&(_.name=v.name),b.push(_)}s.morphAttributes[f]=b}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);let u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let f=0,p=u.length;f!==p;++f){let b=u[f];s.addGroup(b.start,b.count,b.materialIndex)}let h=e.data.boundingSphere;if(h!==void 0){let f=new S;h.center!==void 0&&f.fromArray(h.center),s.boundingSphere=new En(f,h.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}},yE=class extends ir{constructor(e){super(e)}load(e,i,t,r){let o=this,s=this.path===""?ys.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;let a=new tr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){let l=null;try{l=JSON.parse(c)}catch(u){r!==void 0&&r(u),console.error("THREE:ObjectLoader: Can't parse "+e+".",u.message);return}let d=l.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(l,i)},t,r)}loadAsync(e,i){return gi(this,null,function*(){let t=this,r=this.path===""?ys.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;let o=new tr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);let s=yield o.loadAsync(e,i),a=JSON.parse(s),c=a.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return yield t.parseAsync(a)})}parse(e,i){let t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,function(){i!==void 0&&i(l)}),a=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,o,c,a,t),d=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,d),i!==void 0){let u=!1;for(let h in s)if(s[h].data instanceof HTMLImageElement){u=!0;break}u===!1&&i(l)}return l}parseAsync(e){return gi(this,null,function*(){let i=this.parseAnimations(e.animations),t=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,t),o=yield this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,o),a=this.parseMaterials(e.materials,s),c=this.parseObject(e.object,r,a,s,i),l=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,l),c})}parseShapes(e){let i={};if(e!==void 0)for(let t=0,r=e.length;t<r;t++){let o=new ic().fromJSON(e[t]);i[o.uuid]=o}return i}parseSkeletons(e,i){let t={},r={};if(i.traverse(function(o){o.isBone&&(r[o.uuid]=o)}),e!==void 0)for(let o=0,s=e.length;o<s;o++){let a=new Qh().fromJSON(e[o],r);t[a.uuid]=a}return t}parseGeometries(e,i){let t={};if(e!==void 0){let r=new Ay;for(let o=0,s=e.length;o<s;o++){let a,c=e[o];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(c);break;default:c.type in DN?a=DN[c.type].fromJSON(c,i):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}a.uuid=c.uuid,c.name!==void 0&&(a.name=c.name),c.userData!==void 0&&(a.userData=c.userData),t[c.uuid]=a}}return t}parseMaterials(e,i){let t={},r={};if(e!==void 0){let o=new Ey;o.setTextures(i);for(let s=0,a=e.length;s<a;s++){let c=e[s];t[c.uuid]===void 0&&(t[c.uuid]=o.parse(c)),r[c.uuid]=t[c.uuid]}}return r}parseAnimations(e){let i={};if(e!==void 0)for(let t=0;t<e.length;t++){let r=e[t],o=uc.parse(r);i[o.uuid]=o}return i}parseImages(e,i){let t=this,r={},o;function s(c){return t.manager.itemStart(c),o.load(c,function(){t.manager.itemEnd(c)},void 0,function(){t.manager.itemError(c),t.manager.itemEnd(c)})}function a(c){if(typeof c=="string"){let l=c,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return s(d)}else return c.data?{data:Bh(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){let c=new qp(i);o=new Wd(c),o.setCrossOrigin(this.crossOrigin);for(let l=0,d=e.length;l<d;l++){let u=e[l],h=u.url;if(Array.isArray(h)){let f=[];for(let p=0,b=h.length;p<b;p++){let g=h[p],m=a(g);m!==null&&(m instanceof HTMLImageElement?f.push(m):f.push(new $r(m.data,m.width,m.height)))}r[u.uuid]=new Ka(f)}else{let f=a(u.url);r[u.uuid]=new Ka(f)}}}return r}parseImagesAsync(e){return gi(this,null,function*(){let i=this,t={},r;function o(s){return gi(this,null,function*(){if(typeof s=="string"){let a=s,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:i.resourcePath+a;return yield r.loadAsync(c)}else return s.data?{data:Bh(s.type,s.data),width:s.width,height:s.height}:null})}if(e!==void 0&&e.length>0){r=new Wd(this.manager),r.setCrossOrigin(this.crossOrigin);for(let s=0,a=e.length;s<a;s++){let c=e[s],l=c.url;if(Array.isArray(l)){let d=[];for(let u=0,h=l.length;u<h;u++){let f=l[u],p=yield o(f);p!==null&&(p instanceof HTMLImageElement?d.push(p):d.push(new $r(p.data,p.width,p.height)))}t[c.uuid]=new Ka(d)}else{let d=yield o(c.url);t[c.uuid]=new Ka(d)}}}return t})}parseTextures(e,i){function t(o,s){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),s[o])}let r={};if(e!==void 0)for(let o=0,s=e.length;o<s;o++){let a=e[o];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),i[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);let c=i[a.image],l=c.data,d;Array.isArray(l)?(d=new Nd,l.length===6&&(d.needsUpdate=!0)):(l&&l.data?d=new $r:d=new vn,l&&(d.needsUpdate=!0)),d.source=c,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=t(a.mapping,wJ)),a.channel!==void 0&&(d.channel=a.channel),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=t(a.wrap[0],kN),d.wrapT=t(a.wrap[1],kN)),a.format!==void 0&&(d.format=a.format),a.internalFormat!==void 0&&(d.internalFormat=a.internalFormat),a.type!==void 0&&(d.type=a.type),a.colorSpace!==void 0&&(d.colorSpace=a.colorSpace),a.minFilter!==void 0&&(d.minFilter=t(a.minFilter,FN)),a.magFilter!==void 0&&(d.magFilter=t(a.magFilter,FN)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.generateMipmaps!==void 0&&(d.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(d.compareFunction=a.compareFunction),a.userData!==void 0&&(d.userData=a.userData),r[a.uuid]=d}return r}parseObject(e,i,t,r,o){let s;function a(h){return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),i[h]}function c(h){if(h!==void 0){if(Array.isArray(h)){let f=[];for(let p=0,b=h.length;p<b;p++){let g=h[p];t[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),f.push(t[g])}return f}return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),t[h]}}function l(h){return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),r[h]}let d,u;switch(e.type){case"Scene":s=new Yh,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new pe(e.background):s.background=l(e.background)),e.environment!==void 0&&(s.environment=l(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new Xh(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new $0(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new en(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Do(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new sf(e.color,e.intensity);break;case"DirectionalLight":s=new ll(e.color,e.intensity);break;case"PointLight":s=new cl(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new Ry(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new of(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new rf(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new Cy().fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),u=c(e.material),s=new Zh(d,u),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),u=c(e.material),s=new Ve(d,u);break;case"InstancedMesh":d=a(e.geometry),u=c(e.material);let h=e.count,f=e.instanceMatrix,p=e.instanceColor;s=new al(d,u,h),s.instanceMatrix=new _s(new Float32Array(f.array),16),p!==void 0&&(s.instanceColor=new _s(new Float32Array(p.array),p.itemSize));break;case"BatchedMesh":d=a(e.geometry),u=c(e.material),s=new Y0(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,u),s.geometry=d,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._visibility=e.visibility,s._active=e.active,s._bounds=e.bounds.map(b=>{let g=new _n;g.min.fromArray(b.boxMin),g.max.fromArray(b.boxMax);let m=new En;return m.radius=b.sphereRadius,m.center.fromArray(b.sphereCenter),{boxInitialized:b.boxInitialized,box:g,sphereInitialized:b.sphereInitialized,sphere:m}}),s._maxGeometryCount=e.maxGeometryCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._geometryCount=e.geometryCount,s._matricesTexture=l(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=l(e.colorsTexture.uuid));break;case"LOD":s=new X0;break;case"Line":s=new Qi(a(e.geometry),c(e.material));break;case"LineLoop":s=new Kh(a(e.geometry),c(e.material));break;case"LineSegments":s=new Er(a(e.geometry),c(e.material));break;case"PointCloud":case"Points":s=new Jh(a(e.geometry),c(e.material));break;case"Sprite":s=new q0(c(e.material));break;case"Group":s=new Cr;break;case"Bone":s=new Ud;break;default:s=new Tt}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){let h=e.children;for(let f=0;f<h.length;f++)s.add(this.parseObject(h[f],i,t,r,o))}if(e.animations!==void 0){let h=e.animations;for(let f=0;f<h.length;f++){let p=h[f];s.animations.push(o[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);let h=e.levels;for(let f=0;f<h.length;f++){let p=h[f],b=s.getObjectByProperty("uuid",p.object);b!==void 0&&s.addLevel(b,p.distance,p.hysteresis)}}return s}bindSkeletons(e,i){Object.keys(i).length!==0&&e.traverse(function(t){if(t.isSkinnedMesh===!0&&t.skeleton!==void 0){let r=i[t.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(r,t.bindMatrix)}})}},wJ={UVMapping:U0,CubeReflectionMapping:nc,CubeRefractionMapping:ol,EquirectangularReflectionMapping:xp,EquirectangularRefractionMapping:wp,CubeUVReflectionMapping:lf},kN={RepeatWrapping:qo,ClampToEdgeWrapping:ro,MirroredRepeatWrapping:Pd},FN={NearestFilter:ui,NearestMipmapNearestFilter:tg,NearestMipmapLinearFilter:rl,LinearFilter:gn,LinearMipmapNearestFilter:Td,LinearMipmapLinearFilter:Co},Zp=class extends ir{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,i,t,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=ec.get(e);if(s!==void 0){if(o.manager.itemStart(e),s.then){s.then(l=>{i&&i(l),o.manager.itemEnd(e)}).catch(l=>{r&&r(l)});return}return setTimeout(function(){i&&i(s),o.manager.itemEnd(e)},0),s}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;let c=fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(l){return ec.add(e,l),i&&i(l),o.manager.itemEnd(e),l}).catch(function(l){r&&r(l),ec.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});ec.add(e,c),o.manager.itemStart(e)}},C0,Qp=class{static getContext(){return C0===void 0&&(C0=new(window.AudioContext||window.webkitAudioContext)),C0}static setContext(e){C0=e}},xE=class extends ir{constructor(e){super(e)}load(e,i,t,r){let o=this,s=new tr(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(c){try{let l=c.slice(0);Qp.getContext().decodeAudioData(l,function(u){i(u)}).catch(a)}catch(l){a(l)}},t,r);function a(c){r?r(c):console.error(c),o.manager.itemError(e)}}},jN=new Be,ON=new Be,pd=new Be,wE=class{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new en,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new en,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){let i=this._cache;if(i.focus!==e.focus||i.fov!==e.fov||i.aspect!==e.aspect*this.aspect||i.near!==e.near||i.far!==e.far||i.zoom!==e.zoom||i.eyeSep!==this.eyeSep){i.focus=e.focus,i.fov=e.fov,i.aspect=e.aspect*this.aspect,i.near=e.near,i.far=e.far,i.zoom=e.zoom,i.eyeSep=this.eyeSep,pd.copy(e.projectionMatrix);let r=i.eyeSep/2,o=r*i.near/i.focus,s=i.near*Math.tan(Ed*i.fov*.5)/i.zoom,a,c;ON.elements[12]=-r,jN.elements[12]=r,a=-s*i.aspect+o,c=s*i.aspect+o,pd.elements[0]=2*i.near/(c-a),pd.elements[8]=(c+a)/(c-a),this.cameraL.projectionMatrix.copy(pd),a=-s*i.aspect-o,c=s*i.aspect-o,pd.elements[0]=2*i.near/(c-a),pd.elements[8]=(c+a)/(c-a),this.cameraR.projectionMatrix.copy(pd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(ON),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(jN)}},ao=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=NN(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let i=NN();e=(i-this.oldTime)/1e3,this.oldTime=i,this.elapsedTime+=e}return e}};function NN(){return(typeof performance>"u"?Date:performance).now()}var gd=new S,LN=new ii,MJ=new S,bd=new S,ME=class extends Tt{constructor(){super(),this.type="AudioListener",this.context=Qp.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new ao}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);let i=this.context.listener,t=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(gd,LN,MJ),bd.set(0,0,-1).applyQuaternion(LN),i.positionX){let r=this.context.currentTime+this.timeDelta;i.positionX.linearRampToValueAtTime(gd.x,r),i.positionY.linearRampToValueAtTime(gd.y,r),i.positionZ.linearRampToValueAtTime(gd.z,r),i.forwardX.linearRampToValueAtTime(bd.x,r),i.forwardY.linearRampToValueAtTime(bd.y,r),i.forwardZ.linearRampToValueAtTime(bd.z,r),i.upX.linearRampToValueAtTime(t.x,r),i.upY.linearRampToValueAtTime(t.y,r),i.upZ.linearRampToValueAtTime(t.z,r)}else i.setPosition(gd.x,gd.y,gd.z),i.setOrientation(bd.x,bd.y,bd.z,t.x,t.y,t.z)}},Iy=class extends Tt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;let i=this.context.createBufferSource();return i.buffer=this.buffer,i.loop=this.loop,i.loopStart=this.loopStart,i.loopEnd=this.loopEnd,i.onended=this.onEnded.bind(this),i.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=i,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,i=this.filters.length;e<i;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,i=this.filters.length;e<i;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},_d=new S,BN=new ii,SJ=new S,vd=new S,SE=class extends Iy{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,i,t){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=i,this.panner.coneOuterGain=t,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_d,BN,SJ),vd.set(0,0,1).applyQuaternion(BN);let i=this.panner;if(i.positionX){let t=this.context.currentTime+this.listener.timeDelta;i.positionX.linearRampToValueAtTime(_d.x,t),i.positionY.linearRampToValueAtTime(_d.y,t),i.positionZ.linearRampToValueAtTime(_d.z,t),i.orientationX.linearRampToValueAtTime(vd.x,t),i.orientationY.linearRampToValueAtTime(vd.y,t),i.orientationZ.linearRampToValueAtTime(vd.z,t)}else i.setPosition(_d.x,_d.y,_d.z),i.setOrientation(vd.x,vd.y,vd.z)}},RE=class{constructor(e,i=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=i,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0,i=this.getFrequencyData();for(let t=0;t<i.length;t++)e+=i[t];return e/i.length}},Py=class{constructor(e,i,t){this.binding=e,this.valueSize=t;let r,o,s;switch(i){case"quaternion":r=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(t*6),this._workIndex=5;break;case"string":case"bool":r=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(t*5);break;default:r=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(t*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,i){let t=this.buffer,r=this.valueSize,o=e*r+r,s=this.cumulativeWeight;if(s===0){for(let a=0;a!==r;++a)t[o+a]=t[a];s=i}else{s+=i;let a=i/s;this._mixBufferRegion(t,o,0,a,r)}this.cumulativeWeight=s}accumulateAdditive(e){let i=this.buffer,t=this.valueSize,r=t*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(i,r,0,e,t),this.cumulativeWeightAdditive+=e}apply(e){let i=this.valueSize,t=this.buffer,r=e*i+i,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){let c=i*this._origIndex;this._mixBufferRegion(t,r,c,1-o,i)}s>0&&this._mixBufferRegionAdditive(t,r,this._addIndex*i,1,i);for(let c=i,l=i+i;c!==l;++c)if(t[c]!==t[c+i]){a.setValue(t,r);break}}saveOriginalState(){let e=this.binding,i=this.buffer,t=this.valueSize,r=t*this._origIndex;e.getValue(i,r);for(let o=t,s=r;o!==s;++o)i[o]=i[r+o%t];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,i=e+this.valueSize;for(let t=e;t<i;t++)this.buffer[t]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,i=this._addIndex*this.valueSize;for(let t=0;t<this.valueSize;t++)this.buffer[i+t]=this.buffer[e+t]}_select(e,i,t,r,o){if(r>=.5)for(let s=0;s!==o;++s)e[i+s]=e[t+s]}_slerp(e,i,t,r){ii.slerpFlat(e,i,e,i,e,t,r)}_slerpAdditive(e,i,t,r,o){let s=this._workIndex*o;ii.multiplyQuaternionsFlat(e,s,e,i,e,t),ii.slerpFlat(e,i,e,i,e,s,r)}_lerp(e,i,t,r,o){let s=1-r;for(let a=0;a!==o;++a){let c=i+a;e[c]=e[c]*s+e[t+a]*r}}_lerpAdditive(e,i,t,r,o){for(let s=0;s!==o;++s){let a=i+s;e[a]=e[a]+e[t+s]*r}}},dD="\\[\\]\\.:\\/",RJ=new RegExp("["+dD+"]","g"),uD="[^"+dD+"]",TJ="[^"+dD.replace("\\.","")+"]",CJ=/((?:WC+[\/:])*)/.source.replace("WC",uD),EJ=/(WCOD+)?/.source.replace("WCOD",TJ),DJ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",uD),AJ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",uD),IJ=new RegExp("^"+CJ+EJ+DJ+AJ+"$"),PJ=["material","materials","bones","map"],TE=class{constructor(e,i,t){let r=t||$i.parseTrackName(i);this._targetGroup=e,this._bindings=e.subscribe_(i,r)}getValue(e,i){this.bind();let t=this._targetGroup.nCachedObjects_,r=this._bindings[t];r!==void 0&&r.getValue(e,i)}setValue(e,i){let t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=t.length;r!==o;++r)t[r].setValue(e,i)}bind(){let e=this._bindings;for(let i=this._targetGroup.nCachedObjects_,t=e.length;i!==t;++i)e[i].bind()}unbind(){let e=this._bindings;for(let i=this._targetGroup.nCachedObjects_,t=e.length;i!==t;++i)e[i].unbind()}},$i=(()=>{class n{constructor(i,t,r){this.path=t,this.parsedPath=r||n.parseTrackName(t),this.node=n.findNode(i,this.parsedPath.nodeName),this.rootNode=i,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(i,t,r){return i&&i.isAnimationObjectGroup?new n.Composite(i,t,r):new n(i,t,r)}static sanitizeNodeName(i){return i.replace(/\s/g,"_").replace(RJ,"")}static parseTrackName(i){let t=IJ.exec(i);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+i);let r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let s=r.nodeName.substring(o+1);PJ.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+i);return r}static findNode(i,t){if(t===void 0||t===""||t==="."||t===-1||t===i.name||t===i.uuid)return i;if(i.skeleton){let r=i.skeleton.getBoneByName(t);if(r!==void 0)return r}if(i.children){let r=function(s){for(let a=0;a<s.length;a++){let c=s[a];if(c.name===t||c.uuid===t)return c;let l=r(c.children);if(l)return l}return null},o=r(i.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(i,t){i[t]=this.targetObject[this.propertyName]}_getValue_array(i,t){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)i[t++]=r[o]}_getValue_arrayElement(i,t){i[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(i,t){this.resolvedProperty.toArray(i,t)}_setValue_direct(i,t){this.targetObject[this.propertyName]=i[t]}_setValue_direct_setNeedsUpdate(i,t){this.targetObject[this.propertyName]=i[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(i,t){this.targetObject[this.propertyName]=i[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(i,t){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=i[t++]}_setValue_array_setNeedsUpdate(i,t){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=i[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(i,t){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=i[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(i,t){this.resolvedProperty[this.propertyIndex]=i[t]}_setValue_arrayElement_setNeedsUpdate(i,t){this.resolvedProperty[this.propertyIndex]=i[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(i,t){this.resolvedProperty[this.propertyIndex]=i[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(i,t){this.resolvedProperty.fromArray(i,t)}_setValue_fromArray_setNeedsUpdate(i,t){this.resolvedProperty.fromArray(i,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(i,t){this.resolvedProperty.fromArray(i,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(i,t){this.bind(),this.getValue(i,t)}_setValue_unbound(i,t){this.bind(),this.setValue(i,t)}bind(){let i=this.node,t=this.parsedPath,r=t.objectName,o=t.propertyName,s=t.propertyIndex;if(i||(i=n.findNode(this.rootNode,t.nodeName),this.node=i),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!i){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let d=t.objectIndex;switch(r){case"materials":if(!i.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!i.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}i=i.material.materials;break;case"bones":if(!i.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}i=i.skeleton.bones;for(let u=0;u<i.length;u++)if(i[u].name===d){d=u;break}break;case"map":if("map"in i){i=i.map;break}if(!i.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!i.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}i=i.material.map;break;default:if(i[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}i=i[r]}if(d!==void 0){if(i[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,i);return}i=i[d]}}let a=i[o];if(a===void 0){let d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+o+" but it wasn't found.",i);return}let c=this.Versioning.None;this.targetObject=i,i.needsUpdate!==void 0?c=this.Versioning.NeedsUpdate:i.matrixWorldNeedsUpdate!==void 0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(o==="morphTargetInfluences"){if(!i.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!i.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}i.morphTargetDictionary[s]!==void 0&&(s=i.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=TE,n})();$i.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};$i.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};$i.prototype.GetterByBindingType=[$i.prototype._getValue_direct,$i.prototype._getValue_array,$i.prototype._getValue_arrayElement,$i.prototype._getValue_toArray];$i.prototype.SetterByBindingTypeAndVersioning=[[$i.prototype._setValue_direct,$i.prototype._setValue_direct_setNeedsUpdate,$i.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$i.prototype._setValue_array,$i.prototype._setValue_array_setNeedsUpdate,$i.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$i.prototype._setValue_arrayElement,$i.prototype._setValue_arrayElement_setNeedsUpdate,$i.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$i.prototype._setValue_fromArray,$i.prototype._setValue_fromArray_setNeedsUpdate,$i.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var CE=class{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Eo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;let e={};this._indicesByUUID=e;for(let t=0,r=arguments.length;t!==r;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};let i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}add(){let e=this._objects,i=this._indicesByUUID,t=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length,a,c=e.length,l=this.nCachedObjects_;for(let d=0,u=arguments.length;d!==u;++d){let h=arguments[d],f=h.uuid,p=i[f];if(p===void 0){p=c++,i[f]=p,e.push(h);for(let b=0,g=s;b!==g;++b)o[b].push(new $i(h,t[b],r[b]))}else if(p<l){a=e[p];let b=--l,g=e[b];i[g.uuid]=p,e[p]=g,i[f]=b,e[b]=h;for(let m=0,v=s;m!==v;++m){let _=o[m],y=_[b],C=_[p];_[p]=y,C===void 0&&(C=new $i(h,t[m],r[m])),_[b]=C}}else e[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){let e=this._objects,i=this._indicesByUUID,t=this._bindings,r=t.length,o=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){let c=arguments[s],l=c.uuid,d=i[l];if(d!==void 0&&d>=o){let u=o++,h=e[u];i[h.uuid]=d,e[d]=h,i[l]=u,e[u]=c;for(let f=0,p=r;f!==p;++f){let b=t[f],g=b[u],m=b[d];b[d]=g,b[u]=m}}}this.nCachedObjects_=o}uncache(){let e=this._objects,i=this._indicesByUUID,t=this._bindings,r=t.length,o=this.nCachedObjects_,s=e.length;for(let a=0,c=arguments.length;a!==c;++a){let l=arguments[a],d=l.uuid,u=i[d];if(u!==void 0)if(delete i[d],u<o){let h=--o,f=e[h],p=--s,b=e[p];i[f.uuid]=u,e[u]=f,i[b.uuid]=h,e[h]=b,e.pop();for(let g=0,m=r;g!==m;++g){let v=t[g],_=v[h],y=v[p];v[u]=_,v[h]=y,v.pop()}}else{let h=--s,f=e[h];h>0&&(i[f.uuid]=u),e[u]=f,e.pop();for(let p=0,b=r;p!==b;++p){let g=t[p];g[u]=g[h],g.pop()}}}this.nCachedObjects_=o}subscribe_(e,i){let t=this._bindingsIndicesByPath,r=t[e],o=this._bindings;if(r!==void 0)return o[r];let s=this._paths,a=this._parsedPaths,c=this._objects,l=c.length,d=this.nCachedObjects_,u=new Array(l);r=o.length,t[e]=r,s.push(e),a.push(i),o.push(u);for(let h=d,f=c.length;h!==f;++h){let p=c[h];u[h]=new $i(p,e,i)}return u}unsubscribe_(e){let i=this._bindingsIndicesByPath,t=i[e];if(t!==void 0){let r=this._paths,o=this._parsedPaths,s=this._bindings,a=s.length-1,c=s[a],l=e[a];i[l]=t,s[t]=c,s.pop(),o[t]=o[a],o.pop(),r[t]=r[a],r.pop()}}},ky=class{constructor(e,i,t=null,r=i.blendMode){this._mixer=e,this._clip=i,this._localRoot=t,this.blendMode=r;let o=i.tracks,s=o.length,a=new Array(s),c={endingStart:Md,endingEnd:Md};for(let l=0;l!==s;++l){let d=o[l].createInterpolant(null);a[l]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=BL,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,i){return this.loop=e,this.repetitions=i,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,i,t){if(e.fadeOut(i),this.fadeIn(i),t){let r=this._clip.duration,o=e._clip.duration,s=o/r,a=r/o;e.warp(1,s,i),this.warp(a,1,i)}return this}crossFadeTo(e,i,t){return e.crossFadeFrom(this,i,t)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,i,t){let r=this._mixer,o=r.time,s=this.timeScale,a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);let c=a.parameterPositions,l=a.sampleValues;return c[0]=o,c[1]=o+t,l[0]=e/s,l[1]=i/s,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,i,t,r){if(!this.enabled){this._updateWeight(e);return}let o=this._startTime;if(o!==null){let c=(e-o)*t;c<0||t===0?i=0:(this._startTime=null,i=t*c)}i*=this._updateTimeScale(e);let s=this._updateTime(i),a=this._updateWeight(e);if(a>0){let c=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case iD:for(let d=0,u=c.length;d!==u;++d)c[d].evaluate(s),l[d].accumulateAdditive(a);break;case Oy:default:for(let d=0,u=c.length;d!==u;++d)c[d].evaluate(s),l[d].accumulate(r,a)}}}_updateWeight(e){let i=0;if(this.enabled){i=this.weight;let t=this._weightInterpolant;if(t!==null){let r=t.evaluate(e)[0];i*=r,e>t.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=i,i}_updateTimeScale(e){let i=0;if(!this.paused){i=this.timeScale;let t=this._timeScaleInterpolant;if(t!==null){let r=t.evaluate(e)[0];i*=r,e>t.parameterPositions[1]&&(this.stopWarping(),i===0?this.paused=!0:this.timeScale=i)}}return this._effectiveTimeScale=i,i}_updateTime(e){let i=this._clip.duration,t=this.loop,r=this.time+e,o=this._loopCount,s=t===UL;if(e===0)return o===-1?r:s&&(o&1)===1?i-r:r;if(t===jy){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=i)r=i;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=i||r<0){let a=Math.floor(r/i);r-=i*a,o+=Math.abs(a);let c=this.repetitions-o;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?i:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){let l=e<0;this._setEndings(l,!l,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(s&&(o&1)===1)return i-r}return r}_setEndings(e,i,t){let r=this._interpolantSettings;t?(r.endingStart=Sd,r.endingEnd=Sd):(e?r.endingStart=this.zeroSlopeAtStart?Sd:Md:r.endingStart=Mp,i?r.endingEnd=this.zeroSlopeAtEnd?Sd:Md:r.endingEnd=Mp)}_scheduleFading(e,i,t){let r=this._mixer,o=r.time,s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);let a=s.parameterPositions,c=s.sampleValues;return a[0]=o,c[0]=i,a[1]=o+e,c[1]=t,this}},kJ=new Float32Array(1),Kp=class extends jn{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,i){let t=e._localRoot||this._root,r=e._clip.tracks,o=r.length,s=e._propertyBindings,a=e._interpolants,c=t.uuid,l=this._bindingsByRootAndName,d=l[c];d===void 0&&(d={},l[c]=d);for(let u=0;u!==o;++u){let h=r[u],f=h.name,p=d[f];if(p!==void 0)++p.referenceCount,s[u]=p;else{if(p=s[u],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,c,f));continue}let b=i&&i._propertyBindings[u].binding.parsedPath;p=new Py($i.create(t,f,b),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,c,f),s[u]=p}a[u].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let t=(e._localRoot||this._root).uuid,r=e._clip.uuid,o=this._actionsByClip[r];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,r,t)}let i=e._propertyBindings;for(let t=0,r=i.length;t!==r;++t){let o=i[t];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let i=e._propertyBindings;for(let t=0,r=i.length;t!==r;++t){let o=i[t];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let i=e._cacheIndex;return i!==null&&i<this._nActiveActions}_addInactiveAction(e,i,t){let r=this._actions,o=this._actionsByClip,s=o[i];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[i]=s;else{let a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[t]=e}_removeInactiveAction(e){let i=this._actions,t=i[i.length-1],r=e._cacheIndex;t._cacheIndex=r,i[r]=t,i.pop(),e._cacheIndex=null;let o=e._clip.uuid,s=this._actionsByClip,a=s[o],c=a.knownActions,l=c[c.length-1],d=e._byClipCacheIndex;l._byClipCacheIndex=d,c[d]=l,c.pop(),e._byClipCacheIndex=null;let u=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete u[h],c.length===0&&delete s[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let i=e._propertyBindings;for(let t=0,r=i.length;t!==r;++t){let o=i[t];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){let i=this._actions,t=e._cacheIndex,r=this._nActiveActions++,o=i[r];e._cacheIndex=r,i[r]=e,o._cacheIndex=t,i[t]=o}_takeBackAction(e){let i=this._actions,t=e._cacheIndex,r=--this._nActiveActions,o=i[r];e._cacheIndex=r,i[r]=e,o._cacheIndex=t,i[t]=o}_addInactiveBinding(e,i,t){let r=this._bindingsByRootAndName,o=this._bindings,s=r[i];s===void 0&&(s={},r[i]=s),s[t]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){let i=this._bindings,t=e.binding,r=t.rootNode.uuid,o=t.path,s=this._bindingsByRootAndName,a=s[r],c=i[i.length-1],l=e._cacheIndex;c._cacheIndex=l,i[l]=c,i.pop(),delete a[o],Object.keys(a).length===0&&delete s[r]}_lendBinding(e){let i=this._bindings,t=e._cacheIndex,r=this._nActiveBindings++,o=i[r];e._cacheIndex=r,i[r]=e,o._cacheIndex=t,i[t]=o}_takeBackBinding(e){let i=this._bindings,t=e._cacheIndex,r=--this._nActiveBindings,o=i[r];e._cacheIndex=r,i[r]=e,o._cacheIndex=t,i[t]=o}_lendControlInterpolant(){let e=this._controlInterpolants,i=this._nActiveControlInterpolants++,t=e[i];return t===void 0&&(t=new Wp(new Float32Array(2),new Float32Array(2),1,kJ),t.__cacheIndex=i,e[i]=t),t}_takeBackControlInterpolant(e){let i=this._controlInterpolants,t=e.__cacheIndex,r=--this._nActiveControlInterpolants,o=i[r];e.__cacheIndex=r,i[r]=e,o.__cacheIndex=t,i[t]=o}clipAction(e,i,t){let r=i||this._root,o=r.uuid,s=typeof e=="string"?uc.findByName(r,e):e,a=s!==null?s.uuid:e,c=this._actionsByClip[a],l=null;if(t===void 0&&(s!==null?t=s.blendMode:t=Oy),c!==void 0){let u=c.actionByRoot[o];if(u!==void 0&&u.blendMode===t)return u;l=c.knownActions[0],s===null&&(s=l._clip)}if(s===null)return null;let d=new ky(this,s,i,t);return this._bindAction(d,l),this._addInactiveAction(d,a,o),d}existingAction(e,i){let t=i||this._root,r=t.uuid,o=typeof e=="string"?uc.findByName(t,e):e,s=o?o.uuid:e,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){let e=this._actions,i=this._nActiveActions;for(let t=i-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;let i=this._actions,t=this._nActiveActions,r=this.time+=e,o=Math.sign(e),s=this._accuIndex^=1;for(let l=0;l!==t;++l)i[l]._update(r,e,o,s);let a=this._bindings,c=this._nActiveBindings;for(let l=0;l!==c;++l)a[l].apply(s);return this}setTime(e){this.time=0;for(let i=0;i<this._actions.length;i++)this._actions[i].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let i=this._actions,t=e.uuid,r=this._actionsByClip,o=r[t];if(o!==void 0){let s=o.knownActions;for(let a=0,c=s.length;a!==c;++a){let l=s[a];this._deactivateAction(l);let d=l._cacheIndex,u=i[i.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=d,i[d]=u,i.pop(),this._removeInactiveBindingsForAction(l)}delete r[t]}}uncacheRoot(e){let i=e.uuid,t=this._actionsByClip;for(let s in t){let a=t[s].actionByRoot,c=a[i];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}let r=this._bindingsByRootAndName,o=r[i];if(o!==void 0)for(let s in o){let a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,i){let t=this.existingAction(e,i);t!==null&&(this._deactivateAction(t),this._removeInactiveAction(t))}},EE=class n{constructor(e){this.value=e}clone(){return new n(this.value.clone===void 0?this.value:this.value.clone())}},FJ=0,DE=class extends jn{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:FJ++}),this.name="",this.usage=Cp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){let i=this.uniforms.indexOf(e);return i!==-1&&this.uniforms.splice(i,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;let i=e.uniforms;this.uniforms.length=0;for(let t=0,r=i.length;t<r;t++){let o=Array.isArray(i[t])?i[t]:[i[t]];for(let s=0;s<o.length;s++)this.uniforms.push(o[s].clone())}return this}clone(){return new this.constructor().copy(this)}},AE=class extends sc{constructor(e,i,t=1){super(e,i),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=t}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){let i=super.clone(e);return i.meshPerAttribute=this.meshPerAttribute,i}toJSON(e){let i=super.toJSON(e);return i.isInstancedInterleavedBuffer=!0,i.meshPerAttribute=this.meshPerAttribute,i}},IE=class{constructor(e,i,t,r,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=i,this.itemSize=t,this.elementSize=r,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,i){return this.type=e,this.elementSize=i,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}},UN=new Be,Xr=class{constructor(e,i,t=0,r=1/0){this.ray=new ia(e,i),this.near=t,this.far=r,this.camera=null,this.layers=new $h,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,i){this.ray.set(e,i)}setFromCamera(e,i){i.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(i.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(i).sub(this.ray.origin).normalize(),this.camera=i):i.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(i.near+i.far)/(i.near-i.far)).unproject(i),this.ray.direction.set(0,0,-1).transformDirection(i.matrixWorld),this.camera=i):console.error("THREE.Raycaster: Unsupported camera type: "+i.type)}setFromXRController(e){return UN.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(UN),this}intersectObject(e,i=!0,t=[]){return PE(e,this,t,i),t.sort(VN),t}intersectObjects(e,i=!0,t=[]){for(let r=0,o=e.length;r<o;r++)PE(e[r],this,t,i);return t.sort(VN),t}};function VN(n,e){return n.distance-e.distance}function PE(n,e,i,t){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,i)===!1&&(r=!1),r===!0&&t===!0){let o=n.children;for(let s=0,a=o.length;s<a;s++)PE(o[s],e,i,!0)}}var dl=class{constructor(e=1,i=0,t=0){return this.radius=e,this.phi=i,this.theta=t,this}set(e,i,t){return this.radius=e,this.phi=i,this.theta=t,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,i,t){return this.radius=Math.sqrt(e*e+i*i+t*t),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,t),this.phi=Math.acos(Cn(i/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},kE=class{constructor(e=1,i=0,t=0){return this.radius=e,this.theta=i,this.y=t,this}set(e,i,t){return this.radius=e,this.theta=i,this.y=t,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,i,t){return this.radius=Math.sqrt(e*e+t*t),this.theta=Math.atan2(e,t),this.y=i,this}clone(){return new this.constructor().copy(this)}},zN=new z,FE=class{constructor(e=new z(1/0,1/0),i=new z(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=i}set(e,i){return this.min.copy(e),this.max.copy(i),this}setFromPoints(e){this.makeEmpty();for(let i=0,t=e.length;i<t;i++)this.expandByPoint(e[i]);return this}setFromCenterAndSize(e,i){let t=zN.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(t),this.max.copy(e).add(t),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,i){return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,i){return i.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,zN).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},HN=new S,E0=new S,jE=class{constructor(e=new S,i=new S){this.start=e,this.end=i}set(e,i){return this.start.copy(e),this.end.copy(i),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,i){return this.delta(i).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,i){HN.subVectors(e,this.start),E0.subVectors(this.end,this.start);let t=E0.dot(E0),o=E0.dot(HN)/t;return i&&(o=Cn(o,0,1)),o}closestPointToPoint(e,i,t){let r=this.closestPointToPointParameter(e,i);return this.delta(t).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},GN=new S,OE=class extends Tt{constructor(e,i){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=i,this.type="SpotLightHelper";let t=new bt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,c=32;s<c;s++,a++){let l=s/c*Math.PI*2,d=a/c*Math.PI*2;r.push(Math.cos(l),Math.sin(l),1,Math.cos(d),Math.sin(d),1)}t.setAttribute("position",new qe(r,3));let o=new on({fog:!1,toneMapped:!1});this.cone=new Er(t,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);let e=this.light.distance?this.light.distance:1e3,i=e*Math.tan(this.light.angle);this.cone.scale.set(i,i,e),GN.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(GN),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},nl=new S,D0=new Be,aC=new Be,NE=class extends Er{constructor(e){let i=m3(e),t=new bt,r=[],o=[],s=new pe(0,0,1),a=new pe(0,1,0);for(let l=0;l<i.length;l++){let d=i[l];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),o.push(s.r,s.g,s.b),o.push(a.r,a.g,a.b))}t.setAttribute("position",new qe(r,3)),t.setAttribute("color",new qe(o,3));let c=new on({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(t,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=i,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){let i=this.bones,t=this.geometry,r=t.getAttribute("position");aC.copy(this.root.matrixWorld).invert();for(let o=0,s=0;o<i.length;o++){let a=i[o];a.parent&&a.parent.isBone&&(D0.multiplyMatrices(aC,a.matrixWorld),nl.setFromMatrixPosition(D0),r.setXYZ(s,nl.x,nl.y,nl.z),D0.multiplyMatrices(aC,a.parent.matrixWorld),nl.setFromMatrixPosition(D0),r.setXYZ(s+1,nl.x,nl.y,nl.z),s+=2)}t.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}};function m3(n){let e=[];n.isBone===!0&&e.push(n);for(let i=0;i<n.children.length;i++)e.push.apply(e,m3(n.children[i]));return e}var LE=class extends Ve{constructor(e,i,t){let r=new ac(i,4,2),o=new tn({wireframe:!0,fog:!1,toneMapped:!1});super(r,o),this.light=e,this.color=t,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},jJ=new S,WN=new pe,$N=new pe,BE=class extends Tt{constructor(e,i,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="HemisphereLightHelper";let r=new sa(i);r.rotateY(Math.PI*.5),this.material=new tn({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);let o=r.getAttribute("position"),s=new Float32Array(o.count*3);r.setAttribute("color",new hi(s,3)),this.add(new Ve(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){let e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{let i=e.geometry.getAttribute("color");WN.copy(this.light.color),$N.copy(this.light.groundColor);for(let t=0,r=i.count;t<r;t++){let o=t<r/2?WN:$N;i.setXYZ(t,o.r,o.g,o.b)}i.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(jJ.setFromMatrixPosition(this.light.matrixWorld).negate())}},$d=class extends Er{constructor(e=10,i=10,t=4473924,r=8947848){t=new pe(t),r=new pe(r);let o=i/2,s=e/i,a=e/2,c=[],l=[];for(let h=0,f=0,p=-a;h<=i;h++,p+=s){c.push(-a,0,p,a,0,p),c.push(p,0,-a,p,0,a);let b=h===o?t:r;b.toArray(l,f),f+=3,b.toArray(l,f),f+=3,b.toArray(l,f),f+=3,b.toArray(l,f),f+=3}let d=new bt;d.setAttribute("position",new qe(c,3)),d.setAttribute("color",new qe(l,3));let u=new on({vertexColors:!0,toneMapped:!1});super(d,u),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},UE=class extends Er{constructor(e=10,i=16,t=8,r=64,o=4473924,s=8947848){o=new pe(o),s=new pe(s);let a=[],c=[];if(i>1)for(let u=0;u<i;u++){let h=u/i*(Math.PI*2),f=Math.sin(h)*e,p=Math.cos(h)*e;a.push(0,0,0),a.push(f,0,p);let b=u&1?o:s;c.push(b.r,b.g,b.b),c.push(b.r,b.g,b.b)}for(let u=0;u<t;u++){let h=u&1?o:s,f=e-e/t*u;for(let p=0;p<r;p++){let b=p/r*(Math.PI*2),g=Math.sin(b)*f,m=Math.cos(b)*f;a.push(g,0,m),c.push(h.r,h.g,h.b),b=(p+1)/r*(Math.PI*2),g=Math.sin(b)*f,m=Math.cos(b)*f,a.push(g,0,m),c.push(h.r,h.g,h.b)}}let l=new bt;l.setAttribute("position",new qe(a,3)),l.setAttribute("color",new qe(c,3));let d=new on({vertexColors:!0,toneMapped:!1});super(l,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},qN=new S,A0=new S,XN=new S,VE=class extends Tt{constructor(e,i,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="DirectionalLightHelper",i===void 0&&(i=1);let r=new bt;r.setAttribute("position",new qe([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));let o=new on({fog:!1,toneMapped:!1});this.lightPlane=new Qi(r,o),this.add(this.lightPlane),r=new bt,r.setAttribute("position",new qe([0,0,0,0,0,1],3)),this.targetLine=new Qi(r,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),qN.setFromMatrixPosition(this.light.matrixWorld),A0.setFromMatrixPosition(this.light.target.matrixWorld),XN.subVectors(A0,qN),this.lightPlane.lookAt(A0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(A0),this.targetLine.scale.z=XN.length()}},I0=new S,Tn=new sl,zE=class extends Er{constructor(e){let i=new bt,t=new on({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],o=[],s={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,b){c(p),c(b)}function c(p){r.push(0,0,0),o.push(0,0,0),s[p]===void 0&&(s[p]=[]),s[p].push(r.length/3-1)}i.setAttribute("position",new qe(r,3)),i.setAttribute("color",new qe(o,3)),super(i,t),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();let l=new pe(16755200),d=new pe(16711680),u=new pe(43775),h=new pe(16777215),f=new pe(3355443);this.setColors(l,d,u,h,f)}setColors(e,i,t,r,o){let a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,i.r,i.g,i.b),a.setXYZ(25,i.r,i.g,i.b),a.setXYZ(26,i.r,i.g,i.b),a.setXYZ(27,i.r,i.g,i.b),a.setXYZ(28,i.r,i.g,i.b),a.setXYZ(29,i.r,i.g,i.b),a.setXYZ(30,i.r,i.g,i.b),a.setXYZ(31,i.r,i.g,i.b),a.setXYZ(32,t.r,t.g,t.b),a.setXYZ(33,t.r,t.g,t.b),a.setXYZ(34,t.r,t.g,t.b),a.setXYZ(35,t.r,t.g,t.b),a.setXYZ(36,t.r,t.g,t.b),a.setXYZ(37,t.r,t.g,t.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,o.r,o.g,o.b),a.setXYZ(41,o.r,o.g,o.b),a.setXYZ(42,o.r,o.g,o.b),a.setXYZ(43,o.r,o.g,o.b),a.setXYZ(44,o.r,o.g,o.b),a.setXYZ(45,o.r,o.g,o.b),a.setXYZ(46,o.r,o.g,o.b),a.setXYZ(47,o.r,o.g,o.b),a.setXYZ(48,o.r,o.g,o.b),a.setXYZ(49,o.r,o.g,o.b),a.needsUpdate=!0}update(){let e=this.geometry,i=this.pointMap,t=1,r=1;Tn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),kn("c",i,e,Tn,0,0,-1),kn("t",i,e,Tn,0,0,1),kn("n1",i,e,Tn,-t,-r,-1),kn("n2",i,e,Tn,t,-r,-1),kn("n3",i,e,Tn,-t,r,-1),kn("n4",i,e,Tn,t,r,-1),kn("f1",i,e,Tn,-t,-r,1),kn("f2",i,e,Tn,t,-r,1),kn("f3",i,e,Tn,-t,r,1),kn("f4",i,e,Tn,t,r,1),kn("u1",i,e,Tn,t*.7,r*1.1,-1),kn("u2",i,e,Tn,-t*.7,r*1.1,-1),kn("u3",i,e,Tn,0,r*2,-1),kn("cf1",i,e,Tn,-t,0,1),kn("cf2",i,e,Tn,t,0,1),kn("cf3",i,e,Tn,0,-r,1),kn("cf4",i,e,Tn,0,r,1),kn("cn1",i,e,Tn,-t,0,-1),kn("cn2",i,e,Tn,t,0,-1),kn("cn3",i,e,Tn,0,-r,-1),kn("cn4",i,e,Tn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function kn(n,e,i,t,r,o,s){I0.set(r,o,s).unproject(t);let a=e[n];if(a!==void 0){let c=i.getAttribute("position");for(let l=0,d=a.length;l<d;l++)c.setXYZ(a[l],I0.x,I0.y,I0.z)}}var P0=new _n,HE=class extends Er{constructor(e,i=16776960){let t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),o=new bt;o.setIndex(new hi(t,1)),o.setAttribute("position",new hi(r,3)),super(o,new on({color:i,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&P0.setFromObject(this.object),P0.isEmpty())return;let i=P0.min,t=P0.max,r=this.geometry.attributes.position,o=r.array;o[0]=t.x,o[1]=t.y,o[2]=t.z,o[3]=i.x,o[4]=t.y,o[5]=t.z,o[6]=i.x,o[7]=i.y,o[8]=t.z,o[9]=t.x,o[10]=i.y,o[11]=t.z,o[12]=t.x,o[13]=t.y,o[14]=i.z,o[15]=i.x,o[16]=t.y,o[17]=i.z,o[18]=i.x,o[19]=i.y,o[20]=i.z,o[21]=t.x,o[22]=i.y,o[23]=i.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,i){return super.copy(e,i),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}},Jp=class extends Er{constructor(e,i=16776960){let t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new bt;o.setIndex(new hi(t,1)),o.setAttribute("position",new qe(r,3)),super(o,new on({color:i,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let i=this.box;i.isEmpty()||(i.getCenter(this.position),i.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},GE=class extends Qi{constructor(e,i=1,t=16776960){let r=t,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new bt;s.setAttribute("position",new qe(o,3)),s.computeBoundingSphere(),super(s,new on({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=i;let a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new bt;c.setAttribute("position",new qe(a,3)),c.computeBoundingSphere(),this.add(new Ve(c,new tn({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}},YN=new S,k0,cC,WE=class extends Tt{constructor(e=new S(0,0,1),i=new S(0,0,0),t=1,r=16776960,o=t*.2,s=o*.2){super(),this.type="ArrowHelper",k0===void 0&&(k0=new bt,k0.setAttribute("position",new qe([0,0,0,0,1,0],3)),cC=new On(0,.5,1,5,1),cC.translate(0,-.5,0)),this.position.copy(i),this.line=new Qi(k0,new on({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ve(cC,new tn({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(t,o,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{YN.set(e.z,0,-e.x).normalize();let i=Math.acos(e.y);this.quaternion.setFromAxisAngle(YN,i)}}setLength(e,i=e*.2,t=i*.2){this.line.scale.set(1,Math.max(1e-4,e-i),1),this.line.updateMatrix(),this.cone.scale.set(t,i,t),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}},$E=class extends Er{constructor(e=1){let i=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],t=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new bt;r.setAttribute("position",new qe(i,3)),r.setAttribute("color",new qe(t,3));let o=new on({vertexColors:!0,toneMapped:!1});super(r,o),this.type="AxesHelper"}setColors(e,i,t){let r=new pe,o=this.geometry.attributes.color.array;return r.set(e),r.toArray(o,0),r.toArray(o,3),r.set(i),r.toArray(o,6),r.toArray(o,9),r.set(t),r.toArray(o,12),r.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},qE=class{constructor(){this.type="ShapePath",this.color=new pe,this.subPaths=[],this.currentPath=null}moveTo(e,i){return this.currentPath=new Hd,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,i),this}lineTo(e,i){return this.currentPath.lineTo(e,i),this}quadraticCurveTo(e,i,t,r){return this.currentPath.quadraticCurveTo(e,i,t,r),this}bezierCurveTo(e,i,t,r,o,s){return this.currentPath.bezierCurveTo(e,i,t,r,o,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function i(m){let v=[];for(let _=0,y=m.length;_<y;_++){let C=m[_],R=new ic;R.curves=C.curves,v.push(R)}return v}function t(m,v){let _=v.length,y=!1;for(let C=_-1,R=0;R<_;C=R++){let M=v[C],A=v[R],T=A.x-M.x,x=A.y-M.y;if(Math.abs(x)>Number.EPSILON){if(x<0&&(M=v[R],T=-T,A=v[C],x=-x),m.y<M.y||m.y>A.y)continue;if(m.y===M.y){if(m.x===M.x)return!0}else{let I=x*(m.x-M.x)-T*(m.y-M.y);if(I===0)return!0;if(I<0)continue;y=!y}}else{if(m.y!==M.y)continue;if(A.x<=m.x&&m.x<=M.x||M.x<=m.x&&m.x<=A.x)return!0}}return y}let r=ta.isClockWise,o=this.subPaths;if(o.length===0)return[];let s,a,c,l=[];if(o.length===1)return a=o[0],c=new ic,c.curves=a.curves,l.push(c),l;let d=!r(o[0].getPoints());d=e?!d:d;let u=[],h=[],f=[],p=0,b;h[p]=void 0,f[p]=[];for(let m=0,v=o.length;m<v;m++)a=o[m],b=a.getPoints(),s=r(b),s=e?!s:s,s?(!d&&h[p]&&p++,h[p]={s:new ic,p:b},h[p].s.curves=a.curves,d&&p++,f[p]=[]):f[p].push({h:a,p:b[0]});if(!h[0])return i(o);if(h.length>1){let m=!1,v=0;for(let _=0,y=h.length;_<y;_++)u[_]=[];for(let _=0,y=h.length;_<y;_++){let C=f[_];for(let R=0;R<C.length;R++){let M=C[R],A=!0;for(let T=0;T<h.length;T++)t(M.p,h[T].p)&&(_!==T&&v++,A?(A=!1,u[T].push(M)):m=!0);A&&u[_].push(M)}}v>0&&m===!1&&(f=u)}let g;for(let m=0,v=h.length;m<v;m++){c=h[m].s,l.push(c),g=f[m];for(let _=0,y=g.length;_<y;_++)c.holes.push(g[_].h)}return l}},XE=class extends ci{constructor(e=1,i=1,t=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,i,pi(ve({},r),{count:t})),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Fy}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Fy);function hD(n){return!!(n&&n.set)}function _e(n,e){if(hD(n)){if(e===void 0)return n;if(Array.isArray(e))return n.set(...e),n;if(n.copy&&e)return n.copy(e),n;if(e!==void 0)return n.set(e),n}else return e;return n}function p3(n){return!!(n&&typeof n.dispose=="function")}function ml(n){return n!==void 0&&(n.observed||n.observers?.length>0)}var fD=class{constructor(e){this.memberMap=new Map,this.children=[],this.eventListener={},this.loaded=!1,this.add=(...i)=>(this.objRef&&this.objRef.add(...i),this.children.push(...i),this),this.remove=(...i)=>{this.objRef&&this.objRef.remove(...i);for(let t of i){let r=this.children.indexOf(t);r>=0&&(this.children=this.children.splice(r,1))}return this},this.applyToObject3D=i=>{if(this.memberMap.forEach((t,r)=>{let o=i[r];hD(o)?_e(o,t):i[r]=t}),this.children.forEach(t=>i.add(t)),this.objRef?.parent){let t=this.objRef?.parent;t.remove(this.objRef),t.add(i)}},this.addEventListener=(i,t)=>{let r=this.eventListener[i];r||(r=[],this.eventListener[i]=r),r.push(t),this.objRef&&this.objRef.addEventListener(i,t)},this.removeEventListener=(i,t)=>{let r=this.eventListener[i];if(!r)return;let o=r.indexOf(t);o>=0&&r.splice(o,1)},this.objRef=e}get(e,i,t){switch(i){case"__isProxy":return!0;case"applyToObject3D":return this.applyToObject3D;case"objRef":return this.loaded?this.objRef:void 0;case"add":return this.add;case"remove":return this.remove;case"children":return this.objRef?this.objRef.children:this.children;default:{let r=i,o=this.objRef[r];return o!==void 0&&this.memberMap.set(r,o),o}}}set(e,i,t,r){return i==="objRef"?(t&&this.applyToObject3D(t),this.loaded=!0,this.objRef=t):(this.memberMap.set(i,t),this.objRef&&(this.objRef[i]=t)),!0}};function Vy(n=new Tt){let e=new fD(n);return new Proxy(e,e)}function rg(n){return n.__isProxy===!0&&n.objRef===void 0}var Yr=(()=>{let e=class e{set objRef(t){this.applyObjRef(t)}get objRef(){return this._objRef}constructor(){this.autoAddToParent=!0,this.autoDispose=!0}addToParent(){}removeFromParent(){}set threeEvents(t){this.removeEvents(),this.eventListeners=t,this.applyEvents()}get threeEvents(){return this.eventListeners}get onUpdate(){return this.updateEmitter||(this.updateEmitter=new nt),this.updateEmitter}get objRef$(){return this._objRef$||(this._objRef$=new Ll(1)),this._objRef$}ngOnInit(){this.objRef||(this.objRef=this.createThreeInstance(this.args))}getType(){throw new Error("derive me")}createThreeInstance(t){return Array.isArray(t)?new(this.getType())(...t):new(this.getType())(t)}ngOnChanges(t){if(this.objRef&&!rg(this.objRef)){this.emitPropertyChanges(t);return}this.objRef||(this.objRef=this.createThreeInstance(t.args?.currentValue));for(let r in t)this[r]=t[r].currentValue;this.emitPropertyChanges(t)}disposeObjRef(){p3(this.objRef)&&this.objRef.dispose()}ngOnDestroy(){this.removeEvents(),this.removeFromParent(),this.autoDispose&&this.disposeObjRef()}applyObjRef(t){this._objRef!==t&&(this.removeFromParent(),this._objRef=t,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}emitObjRefChange(){this._objRef&&!rg(this._objRef)&&(this._objRef.dispatchEvent?.({type:"loaded",object:this._objRef}),this._objRef$&&this._objRef$.next(this._objRef))}emitPropertyChanges(t){this._objRef&&this._objRef.dispatchEvent?.({type:"changes",changes:t}),this.updateEmitter&&this.updateEmitter.next(t)}removeEvents(){if(this.eventListeners&&this._objRef){for(let t of Object.entries(this.eventListeners))this._objRef.removeEventListener(t[0],t[1]);this.eventListeners=void 0}}applyEvents(){if(this.eventListeners&&this._objRef)for(let t of Object.entries(this.eventListeners))this._objRef.addEventListener(t[0],t[1])}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["th-abs-wrapper"]],inputs:{autoAddToParent:"autoAddToParent",autoDispose:"autoDispose",objRef:"objRef",args:"args",threeEvents:"threeEvents"},outputs:{onUpdate:"onUpdate",objRef$:"objRef$"},features:[Hn],decls:0,vars:0,template:function(r,o){},encapsulation:2});let n=e;return n})();var OJ=["*"],g3=(()=>{let e=class e extends Yr{constructor(t){super(),this.parent=t}addToParent(){this._objRef&&this.parent.objRef&&(!this._objRef.parent||this._objRef.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(this._objRef)}removeFromParent(){this._objRef?.parent?.remove(this._objRef)}applyObjRef(t){(this._objRef!==t||this._objRef?.parent?.uuid!==this.parent.objRef.uuid)&&(this.removeFromParent(),this._objRef=t,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}attachToParent(t,r){!this.parent.objRef||t===r&&r?.parent?.uuid===this.parent.objRef.uuid||(r&&r.parent&&r.parent.remove(r),t&&(!t.parent||t.parent&&t.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(t))}set lookAt(t){Promise.resolve().then(()=>{this.objRef&&(Array.isArray(t)?this.objRef.lookAt(...t):this.objRef.lookAt(t))})}};e.\u0275fac=function(r){return new(r||e)(F(e))},e.\u0275cmp=L({type:e,selectors:[["th-abs-object"]],inputs:{lookAt:"lookAt"},features:[q],ngContentSelectors:OJ,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2});let n=e;return n})();var NJ=["*"],fa=class fa extends g3{getType(){return Tt}get isObject3D(){return this._objRef?.isObject3D}get id(){return this._objRef?.id}set uuid(e){this._objRef&&(this._objRef.uuid=e)}get uuid(){return this._objRef?.uuid}set name(e){this._objRef&&(this._objRef.name=e)}get name(){return this._objRef?.name}get type(){return this._objRef?.type}set children(e){this._objRef&&(this._objRef.children=e)}get children(){return this._objRef?.children}set up(e){this._objRef&&(this._objRef.up=_e(this._objRef.up,e))}get up(){return this._objRef?.up}set position(e){this._objRef&&_e(this._objRef.position,e)}get position(){return this._objRef?.position}set rotation(e){this._objRef&&_e(this._objRef.rotation,e)}get rotation(){return this._objRef?.rotation}set quaternion(e){this._objRef&&_e(this._objRef.quaternion,e)}get quaternion(){return this._objRef?.quaternion}set scale(e){this._objRef&&_e(this._objRef.scale,e)}get scale(){return this._objRef?.scale}set modelViewMatrix(e){this._objRef&&_e(this._objRef.modelViewMatrix,e)}get modelViewMatrix(){return this._objRef?.modelViewMatrix}set normalMatrix(e){this._objRef&&_e(this._objRef.normalMatrix,e)}get normalMatrix(){return this._objRef?.normalMatrix}set matrix(e){this._objRef&&(this._objRef.matrix=_e(this._objRef.matrix,e))}get matrix(){return this._objRef?.matrix}set matrixWorld(e){this._objRef&&(this._objRef.matrixWorld=_e(this._objRef.matrixWorld,e))}get matrixWorld(){return this._objRef?.matrixWorld}set matrixAutoUpdate(e){this._objRef&&(this._objRef.matrixAutoUpdate=e)}get matrixAutoUpdate(){return this._objRef?.matrixAutoUpdate}set matrixWorldAutoUpdate(e){this._objRef&&(this._objRef.matrixWorldAutoUpdate=e)}get matrixWorldAutoUpdate(){return this._objRef?.matrixWorldAutoUpdate}set matrixWorldNeedsUpdate(e){this._objRef&&(this._objRef.matrixWorldNeedsUpdate=e)}get matrixWorldNeedsUpdate(){return this._objRef?.matrixWorldNeedsUpdate}set layers(e){this._objRef&&(this._objRef.layers=_e(this._objRef.layers,e))}get layers(){return this._objRef?.layers}set visible(e){this._objRef&&(this._objRef.visible=e)}get visible(){return this._objRef?.visible}set castShadow(e){this._objRef&&(this._objRef.castShadow=e)}get castShadow(){return this._objRef?.castShadow}set receiveShadow(e){this._objRef&&(this._objRef.receiveShadow=e)}get receiveShadow(){return this._objRef?.receiveShadow}set frustumCulled(e){this._objRef&&(this._objRef.frustumCulled=e)}get frustumCulled(){return this._objRef?.frustumCulled}set renderOrder(e){this._objRef&&(this._objRef.renderOrder=e)}get renderOrder(){return this._objRef?.renderOrder}set animations(e){this._objRef&&(this._objRef.animations=e)}get animations(){return this._objRef?.animations}set userData(e){this._objRef&&(this._objRef.userData=e)}get userData(){return this._objRef?.userData}set customDepthMaterial(e){this._objRef&&(this._objRef.customDepthMaterial=e)}get customDepthMaterial(){return this._objRef?.customDepthMaterial}set customDistanceMaterial(e){this._objRef&&(this._objRef.customDistanceMaterial=e)}get customDistanceMaterial(){return this._objRef?.customDistanceMaterial}constructor(e){super(e)}};fa.DEFAULT_UP=Tt.DEFAULT_UP,fa.DEFAULT_MATRIX_AUTO_UPDATE=Tt.DEFAULT_MATRIX_AUTO_UPDATE,fa.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=Tt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,fa.\u0275fac=function(i){return new(i||fa)(F(fa,4))},fa.\u0275cmp=L({type:fa,selectors:[["th-object3D"]],inputs:{uuid:"uuid",name:"name",children:"children",up:"up",position:"position",rotation:"rotation",quaternion:"quaternion",scale:"scale",modelViewMatrix:"modelViewMatrix",normalMatrix:"normalMatrix",matrix:"matrix",matrixWorld:"matrixWorld",matrixAutoUpdate:"matrixAutoUpdate",matrixWorldAutoUpdate:"matrixWorldAutoUpdate",matrixWorldNeedsUpdate:"matrixWorldNeedsUpdate",layers:"layers",visible:"visible",castShadow:"castShadow",receiveShadow:"receiveShadow",frustumCulled:"frustumCulled",renderOrder:"renderOrder",animations:"animations",userData:"userData",customDepthMaterial:"customDepthMaterial",customDistanceMaterial:"customDistanceMaterial"},features:[ie([]),q],ngContentSelectors:NJ,decls:1,vars:0,template:function(i,t){i&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});var me=fa;var LJ=["*"],hc=(()=>{let e=class e extends me{getType(){return sl}get isCamera(){return this._objRef?.isCamera}get type(){return this._objRef?.type}set layers(t){this._objRef&&(this._objRef.layers=_e(this._objRef.layers,t))}get layers(){return this._objRef?.layers}set matrixWorldInverse(t){this._objRef&&(this._objRef.matrixWorldInverse=_e(this._objRef.matrixWorldInverse,t))}get matrixWorldInverse(){return this._objRef?.matrixWorldInverse}set projectionMatrix(t){this._objRef&&(this._objRef.projectionMatrix=_e(this._objRef.projectionMatrix,t))}get projectionMatrix(){return this._objRef?.projectionMatrix}set projectionMatrixInverse(t){this._objRef&&(this._objRef.projectionMatrixInverse=_e(this._objRef.projectionMatrixInverse,t))}get projectionMatrixInverse(){return this._objRef?.projectionMatrixInverse}set coordinateSystem(t){this._objRef&&(this._objRef.coordinateSystem=t)}get coordinateSystem(){return this._objRef?.coordinateSystem}set viewport(t){this._objRef&&(this._objRef.viewport=_e(this._objRef.viewport,t))}get viewport(){return this._objRef?.viewport}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-camera"]],inputs:{layers:"layers",matrixWorldInverse:"matrixWorldInverse",projectionMatrix:"projectionMatrix",projectionMatrixInverse:"projectionMatrixInverse",coordinateSystem:"coordinateSystem",viewport:"viewport"},features:[ie([{provide:me,useExisting:ge(()=>e)}]),q],ngContentSelectors:LJ,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var BJ=["*"],Qt=(()=>{let e=class e extends hc{getType(){return en}get isPerspectiveCamera(){return this._objRef?.isPerspectiveCamera}get type(){return this._objRef?.type}set zoom(t){this._objRef&&(this._objRef.zoom=t)}get zoom(){return this._objRef?.zoom}set fov(t){this._objRef&&(this._objRef.fov=t)}get fov(){return this._objRef?.fov}set aspect(t){this._objRef&&(this._objRef.aspect=t)}get aspect(){return this._objRef?.aspect}set near(t){this._objRef&&(this._objRef.near=t)}get near(){return this._objRef?.near}set far(t){this._objRef&&(this._objRef.far=t)}get far(){return this._objRef?.far}set focus(t){this._objRef&&(this._objRef.focus=t)}get focus(){return this._objRef?.focus}set view(t){this._objRef&&(this._objRef.view=t)}get view(){return this._objRef?.view}set filmGauge(t){this._objRef&&(this._objRef.filmGauge=t)}get filmGauge(){return this._objRef?.filmGauge}set filmOffset(t){this._objRef&&(this._objRef.filmOffset=t)}get filmOffset(){return this._objRef?.filmOffset}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-perspectiveCamera"]],inputs:{zoom:"zoom",fov:"fov",aspect:"aspect",near:"near",far:"far",focus:"focus",view:"view",filmGauge:"filmGauge",filmOffset:"filmOffset"},features:[ie([{provide:me,useExisting:ge(()=>e)},{provide:hc,useExisting:ge(()=>e)}]),q],ngContentSelectors:BJ,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var UJ=["*"],mD=(()=>{let e=class e extends me{getType(){return Qi}get isLine(){return this._objRef?.isLine}get type(){return this._objRef?.type}set geometry(t){this._objRef&&(this._objRef.geometry=t)}get geometry(){return this._objRef?.geometry}set material(t){this._objRef&&(this._objRef.material=t)}get material(){return this._objRef?.material}set morphTargetInfluences(t){this._objRef&&(this._objRef.morphTargetInfluences=t)}get morphTargetInfluences(){return this._objRef?.morphTargetInfluences}set morphTargetDictionary(t){this._objRef&&(this._objRef.morphTargetDictionary=t)}get morphTargetDictionary(){return this._objRef?.morphTargetDictionary}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-line"]],inputs:{geometry:"geometry",material:"material",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary"},features:[ie([{provide:me,useExisting:ge(()=>e)}]),q],ngContentSelectors:UJ,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var VJ=["*"],ma=(()=>{let e=class e extends mD{getType(){return Er}get isLineSegments(){return this._objRef?.isLineSegments}get type(){return this._objRef?.type}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-lineSegments"]],features:[ie([{provide:me,useExisting:ge(()=>e)}]),q],ngContentSelectors:VJ,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var zJ=["*"],Ir=(()=>{let e=class e extends ma{getType(){return $d}get type(){return this._objRef?.type}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-gridHelper"]],features:[ie([{provide:me,useExisting:ge(()=>e)}]),q],ngContentSelectors:zJ,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var HJ=["*"],ws=(()=>{let e=class e extends me{get isLight(){return this._objRef?.isLight}get type(){return this._objRef?.type}set color(t){this._objRef&&(this._objRef.color=_e(this._objRef.color,t))}get color(){return this._objRef?.color}set intensity(t){this._objRef&&(this._objRef.intensity=t)}get intensity(){return this._objRef?.intensity}set shadow(t){this._objRef&&(this._objRef.shadow=t)}get shadow(){return this._objRef?.shadow}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-light"]],inputs:{color:"color",intensity:"intensity",shadow:"shadow"},features:[ie([{provide:me,useExisting:ge(()=>e)}]),q],ngContentSelectors:HJ,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var GJ=["*"],dr=(()=>{let e=class e extends ws{getType(){return ll}get isDirectionalLight(){return this._objRef?.isDirectionalLight}get type(){return this._objRef?.type}set castShadow(t){this._objRef&&(this._objRef.castShadow=t)}get castShadow(){return this._objRef?.castShadow}set position(t){this._objRef&&_e(this._objRef.position,t)}get position(){return this._objRef?.position}set shadow(t){this._objRef&&(this._objRef.shadow=t)}get shadow(){return this._objRef?.shadow}set target(t){this._objRef&&(this._objRef.target=t)}get target(){return this._objRef?.target}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-directionalLight"]],inputs:{castShadow:"castShadow",position:"position",shadow:"shadow",target:"target"},features:[ie([{provide:me,useExisting:ge(()=>e)}]),q],ngContentSelectors:GJ,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var WJ=["*"],hf=(()=>{let e=class e extends ws{getType(){return rf}get isHemisphereLight(){return this._objRef?.isHemisphereLight}get type(){return this._objRef?.type}set position(t){this._objRef&&_e(this._objRef.position,t)}get position(){return this._objRef?.position}set color(t){this._objRef&&(this._objRef.color=_e(this._objRef.color,t))}get color(){return this._objRef?.color}set groundColor(t){this._objRef&&(this._objRef.groundColor=_e(this._objRef.groundColor,t))}get groundColor(){return this._objRef?.groundColor}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-hemisphereLight"]],inputs:{position:"position",color:"color",groundColor:"groundColor"},features:[ie([{provide:me,useExisting:ge(()=>e)}]),q],ngContentSelectors:WJ,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var $J=["*"],Ti=(()=>{let e=class e extends me{getType(){return Ve}get isMesh(){return this._objRef?.isMesh}get type(){return this._objRef?.type}set geometry(t){this._objRef&&(this._objRef.geometry=t)}get geometry(){return this._objRef?.geometry}set material(t){this._objRef&&(this._objRef.material=t)}get material(){return this._objRef?.material}set morphTargetInfluences(t){this._objRef&&(this._objRef.morphTargetInfluences=t)}get morphTargetInfluences(){return this._objRef?.morphTargetInfluences}set morphTargetDictionary(t){this._objRef&&(this._objRef.morphTargetDictionary=t)}get morphTargetDictionary(){return this._objRef?.morphTargetDictionary}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-mesh"]],inputs:{geometry:"geometry",material:"material",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary"},features:[ie([{provide:me,useExisting:ge(()=>e)}]),q],ngContentSelectors:$J,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var qJ=["*"],Ut=(()=>{let e=class e extends me{getType(){return Yh}get isScene(){return this._objRef?.isScene}set type(t){this._objRef&&(this._objRef.type=t)}get type(){return this._objRef?.type}set fog(t){this._objRef&&(this._objRef.fog=t)}get fog(){return this._objRef?.fog}set backgroundBlurriness(t){this._objRef&&(this._objRef.backgroundBlurriness=t)}get backgroundBlurriness(){return this._objRef?.backgroundBlurriness}set backgroundIntensity(t){this._objRef&&(this._objRef.backgroundIntensity=t)}get backgroundIntensity(){return this._objRef?.backgroundIntensity}set overrideMaterial(t){this._objRef&&(this._objRef.overrideMaterial=t)}get overrideMaterial(){return this._objRef?.overrideMaterial}set background(t){this._objRef&&(this._objRef.background=_e(this._objRef.background,t))}get background(){return this._objRef?.background}set backgroundRotation(t){this._objRef&&(this._objRef.backgroundRotation=_e(this._objRef.backgroundRotation,t))}get backgroundRotation(){return this._objRef?.backgroundRotation}set environment(t){this._objRef&&(this._objRef.environment=t)}get environment(){return this._objRef?.environment}set environmentIntensity(t){this._objRef&&(this._objRef.environmentIntensity=t)}get environmentIntensity(){return this._objRef?.environmentIntensity}set environmentRotation(t){this._objRef&&(this._objRef.environmentRotation=_e(this._objRef.environmentRotation,t))}get environmentRotation(){return this._objRef?.environmentRotation}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-scene"]],inputs:{type:"type",fog:"fog",backgroundBlurriness:"backgroundBlurriness",backgroundIntensity:"backgroundIntensity",overrideMaterial:"overrideMaterial",background:"background",backgroundRotation:"backgroundRotation",environment:"environment",environmentIntensity:"environmentIntensity",environmentRotation:"environmentRotation"},features:[ie([{provide:me,useExisting:ge(()=>e)}]),q],ngContentSelectors:qJ,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var b3=(()=>{let e=class e extends Yr{constructor(t){super(),this.parent=t}addToParent(){if(!this.parent.objRef)throw new Error("parent object doesn't hold a three js object instance");this.parent.objRef.material=this.objRef}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.material=void 0)}};e.\u0275fac=function(r){return new(r||e)(F(me))},e.\u0275cmp=L({type:e,selectors:[["th-abs-material"]],features:[q],decls:0,vars:0,template:function(r,o){},encapsulation:2});let n=e;return n})();var XJ=["*"],sn=(()=>{let e=class e extends b3{getType(){return dn}get isMaterial(){return this._objRef?.isMaterial}set alphaHash(t){this._objRef&&(this._objRef.alphaHash=t)}get alphaHash(){return this._objRef?.alphaHash}set alphaToCoverage(t){this._objRef&&(this._objRef.alphaToCoverage=t)}get alphaToCoverage(){return this._objRef?.alphaToCoverage}set blendAlpha(t){this._objRef&&(this._objRef.blendAlpha=t)}get blendAlpha(){return this._objRef?.blendAlpha}set blendColor(t){this._objRef&&(this._objRef.blendColor=_e(this._objRef.blendColor,t))}get blendColor(){return this._objRef?.blendColor}set blendDst(t){this._objRef&&(this._objRef.blendDst=t)}get blendDst(){return this._objRef?.blendDst}set blendDstAlpha(t){this._objRef&&(this._objRef.blendDstAlpha=t)}get blendDstAlpha(){return this._objRef?.blendDstAlpha}set blendEquation(t){this._objRef&&(this._objRef.blendEquation=t)}get blendEquation(){return this._objRef?.blendEquation}set blendEquationAlpha(t){this._objRef&&(this._objRef.blendEquationAlpha=t)}get blendEquationAlpha(){return this._objRef?.blendEquationAlpha}set blending(t){this._objRef&&(this._objRef.blending=t)}get blending(){return this._objRef?.blending}set blendSrc(t){this._objRef&&(this._objRef.blendSrc=t)}get blendSrc(){return this._objRef?.blendSrc}set blendSrcAlpha(t){this._objRef&&(this._objRef.blendSrcAlpha=t)}get blendSrcAlpha(){return this._objRef?.blendSrcAlpha}set clipIntersection(t){this._objRef&&(this._objRef.clipIntersection=t)}get clipIntersection(){return this._objRef?.clipIntersection}set clippingPlanes(t){this._objRef&&(this._objRef.clippingPlanes=t)}get clippingPlanes(){return this._objRef?.clippingPlanes}set clipShadows(t){this._objRef&&(this._objRef.clipShadows=t)}get clipShadows(){return this._objRef?.clipShadows}set colorWrite(t){this._objRef&&(this._objRef.colorWrite=t)}get colorWrite(){return this._objRef?.colorWrite}set defines(t){this._objRef&&(this._objRef.defines=t)}get defines(){return this._objRef?.defines}set depthFunc(t){this._objRef&&(this._objRef.depthFunc=t)}get depthFunc(){return this._objRef?.depthFunc}set depthTest(t){this._objRef&&(this._objRef.depthTest=t)}get depthTest(){return this._objRef?.depthTest}set depthWrite(t){this._objRef&&(this._objRef.depthWrite=t)}get depthWrite(){return this._objRef?.depthWrite}set id(t){this._objRef&&(this._objRef.id=t)}get id(){return this._objRef?.id}set stencilWrite(t){this._objRef&&(this._objRef.stencilWrite=t)}get stencilWrite(){return this._objRef?.stencilWrite}set stencilFunc(t){this._objRef&&(this._objRef.stencilFunc=t)}get stencilFunc(){return this._objRef?.stencilFunc}set stencilRef(t){this._objRef&&(this._objRef.stencilRef=t)}get stencilRef(){return this._objRef?.stencilRef}set stencilWriteMask(t){this._objRef&&(this._objRef.stencilWriteMask=t)}get stencilWriteMask(){return this._objRef?.stencilWriteMask}set stencilFuncMask(t){this._objRef&&(this._objRef.stencilFuncMask=t)}get stencilFuncMask(){return this._objRef?.stencilFuncMask}set stencilFail(t){this._objRef&&(this._objRef.stencilFail=t)}get stencilFail(){return this._objRef?.stencilFail}set stencilZFail(t){this._objRef&&(this._objRef.stencilZFail=t)}get stencilZFail(){return this._objRef?.stencilZFail}set stencilZPass(t){this._objRef&&(this._objRef.stencilZPass=t)}get stencilZPass(){return this._objRef?.stencilZPass}set name(t){this._objRef&&(this._objRef.name=t)}get name(){return this._objRef?.name}set opacity(t){this._objRef&&(this._objRef.opacity=t)}get opacity(){return this._objRef?.opacity}set polygonOffset(t){this._objRef&&(this._objRef.polygonOffset=t)}get polygonOffset(){return this._objRef?.polygonOffset}set polygonOffsetFactor(t){this._objRef&&(this._objRef.polygonOffsetFactor=t)}get polygonOffsetFactor(){return this._objRef?.polygonOffsetFactor}set polygonOffsetUnits(t){this._objRef&&(this._objRef.polygonOffsetUnits=t)}get polygonOffsetUnits(){return this._objRef?.polygonOffsetUnits}set precision(t){this._objRef&&(this._objRef.precision=t)}get precision(){return this._objRef?.precision}set premultipliedAlpha(t){this._objRef&&(this._objRef.premultipliedAlpha=t)}get premultipliedAlpha(){return this._objRef?.premultipliedAlpha}set forceSinglePass(t){this._objRef&&(this._objRef.forceSinglePass=t)}get forceSinglePass(){return this._objRef?.forceSinglePass}set dithering(t){this._objRef&&(this._objRef.dithering=t)}get dithering(){return this._objRef?.dithering}set side(t){this._objRef&&(this._objRef.side=t)}get side(){return this._objRef?.side}set shadowSide(t){this._objRef&&(this._objRef.shadowSide=t)}get shadowSide(){return this._objRef?.shadowSide}set toneMapped(t){this._objRef&&(this._objRef.toneMapped=t)}get toneMapped(){return this._objRef?.toneMapped}set transparent(t){this._objRef&&(this._objRef.transparent=t)}get transparent(){return this._objRef?.transparent}set type(t){this._objRef&&(this._objRef.type=t)}get type(){return this._objRef?.type}set uuid(t){this._objRef&&(this._objRef.uuid=t)}get uuid(){return this._objRef?.uuid}set vertexColors(t){this._objRef&&(this._objRef.vertexColors=t)}get vertexColors(){return this._objRef?.vertexColors}set visible(t){this._objRef&&(this._objRef.visible=t)}get visible(){return this._objRef?.visible}set userData(t){this._objRef&&(this._objRef.userData=t)}get userData(){return this._objRef?.userData}set version(t){this._objRef&&(this._objRef.version=t)}get version(){return this._objRef?.version}get alphaTest(){return this._objRef?.alphaTest}set alphaTest(t){this._objRef&&(this._objRef.alphaTest=t)}set needsUpdate(t){this._objRef&&(this._objRef.needsUpdate=t)}constructor(t){super(t)}};e.\u0275fac=function(r){return new(r||e)(F(me,4))},e.\u0275cmp=L({type:e,selectors:[["th-material"]],inputs:{alphaHash:"alphaHash",alphaToCoverage:"alphaToCoverage",blendAlpha:"blendAlpha",blendColor:"blendColor",blendDst:"blendDst",blendDstAlpha:"blendDstAlpha",blendEquation:"blendEquation",blendEquationAlpha:"blendEquationAlpha",blending:"blending",blendSrc:"blendSrc",blendSrcAlpha:"blendSrcAlpha",clipIntersection:"clipIntersection",clippingPlanes:"clippingPlanes",clipShadows:"clipShadows",colorWrite:"colorWrite",defines:"defines",depthFunc:"depthFunc",depthTest:"depthTest",depthWrite:"depthWrite",id:"id",stencilWrite:"stencilWrite",stencilFunc:"stencilFunc",stencilRef:"stencilRef",stencilWriteMask:"stencilWriteMask",stencilFuncMask:"stencilFuncMask",stencilFail:"stencilFail",stencilZFail:"stencilZFail",stencilZPass:"stencilZPass",name:"name",opacity:"opacity",polygonOffset:"polygonOffset",polygonOffsetFactor:"polygonOffsetFactor",polygonOffsetUnits:"polygonOffsetUnits",precision:"precision",premultipliedAlpha:"premultipliedAlpha",forceSinglePass:"forceSinglePass",dithering:"dithering",side:"side",shadowSide:"shadowSide",toneMapped:"toneMapped",transparent:"transparent",type:"type",uuid:"uuid",vertexColors:"vertexColors",visible:"visible",userData:"userData",version:"version",alphaTest:"alphaTest",needsUpdate:"needsUpdate"},features:[ie([]),q],ngContentSelectors:XJ,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var YJ=["*"],lo=(()=>{let e=class e extends sn{getType(){return nf}get isMeshPhongMaterial(){return this._objRef?.isMeshPhongMaterial}set type(t){this._objRef&&(this._objRef.type=t)}get type(){return this._objRef?.type}set color(t){this._objRef&&(this._objRef.color=_e(this._objRef.color,t))}get color(){return this._objRef?.color}set specular(t){this._objRef&&(this._objRef.specular=_e(this._objRef.specular,t))}get specular(){return this._objRef?.specular}set shininess(t){this._objRef&&(this._objRef.shininess=t)}get shininess(){return this._objRef?.shininess}set map(t){this._objRef&&(this._objRef.map=t)}get map(){return this._objRef?.map}set lightMap(t){this._objRef&&(this._objRef.lightMap=t)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(t){this._objRef&&(this._objRef.lightMapIntensity=t)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set aoMap(t){this._objRef&&(this._objRef.aoMap=t)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(t){this._objRef&&(this._objRef.aoMapIntensity=t)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set emissive(t){this._objRef&&(this._objRef.emissive=_e(this._objRef.emissive,t))}get emissive(){return this._objRef?.emissive}set emissiveIntensity(t){this._objRef&&(this._objRef.emissiveIntensity=t)}get emissiveIntensity(){return this._objRef?.emissiveIntensity}set emissiveMap(t){this._objRef&&(this._objRef.emissiveMap=t)}get emissiveMap(){return this._objRef?.emissiveMap}set bumpMap(t){this._objRef&&(this._objRef.bumpMap=t)}get bumpMap(){return this._objRef?.bumpMap}set bumpScale(t){this._objRef&&(this._objRef.bumpScale=t)}get bumpScale(){return this._objRef?.bumpScale}set normalMap(t){this._objRef&&(this._objRef.normalMap=t)}get normalMap(){return this._objRef?.normalMap}set normalMapType(t){this._objRef&&(this._objRef.normalMapType=t)}get normalMapType(){return this._objRef?.normalMapType}set normalScale(t){this._objRef&&(this._objRef.normalScale=_e(this._objRef.normalScale,t))}get normalScale(){return this._objRef?.normalScale}set displacementMap(t){this._objRef&&(this._objRef.displacementMap=t)}get displacementMap(){return this._objRef?.displacementMap}set displacementScale(t){this._objRef&&(this._objRef.displacementScale=t)}get displacementScale(){return this._objRef?.displacementScale}set displacementBias(t){this._objRef&&(this._objRef.displacementBias=t)}get displacementBias(){return this._objRef?.displacementBias}set specularMap(t){this._objRef&&(this._objRef.specularMap=t)}get specularMap(){return this._objRef?.specularMap}set alphaMap(t){this._objRef&&(this._objRef.alphaMap=t)}get alphaMap(){return this._objRef?.alphaMap}set envMap(t){this._objRef&&(this._objRef.envMap=t)}get envMap(){return this._objRef?.envMap}set envMapRotation(t){this._objRef&&(this._objRef.envMapRotation=_e(this._objRef.envMapRotation,t))}get envMapRotation(){return this._objRef?.envMapRotation}set combine(t){this._objRef&&(this._objRef.combine=t)}get combine(){return this._objRef?.combine}set reflectivity(t){this._objRef&&(this._objRef.reflectivity=t)}get reflectivity(){return this._objRef?.reflectivity}set refractionRatio(t){this._objRef&&(this._objRef.refractionRatio=t)}get refractionRatio(){return this._objRef?.refractionRatio}set wireframe(t){this._objRef&&(this._objRef.wireframe=t)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(t){this._objRef&&(this._objRef.wireframeLinewidth=t)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(t){this._objRef&&(this._objRef.wireframeLinecap=t)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(t){this._objRef&&(this._objRef.wireframeLinejoin=t)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set flatShading(t){this._objRef&&(this._objRef.flatShading=t)}get flatShading(){return this._objRef?.flatShading}set metal(t){this._objRef&&(this._objRef.metal=t)}get metal(){return this._objRef?.metal}set fog(t){this._objRef&&(this._objRef.fog=t)}get fog(){return this._objRef?.fog}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-meshPhongMaterial"]],inputs:{type:"type",color:"color",specular:"specular",shininess:"shininess",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",emissive:"emissive",emissiveIntensity:"emissiveIntensity",emissiveMap:"emissiveMap",bumpMap:"bumpMap",bumpScale:"bumpScale",normalMap:"normalMap",normalMapType:"normalMapType",normalScale:"normalScale",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",specularMap:"specularMap",alphaMap:"alphaMap",envMap:"envMap",envMapRotation:"envMapRotation",combine:"combine",reflectivity:"reflectivity",refractionRatio:"refractionRatio",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",flatShading:"flatShading",metal:"metal",fog:"fog"},features:[ie([{provide:sn,useExisting:ge(()=>e)}]),q],ngContentSelectors:YJ,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var _3=(()=>{let e=class e extends Yr{constructor(t){super(),this.parent=t}addToParent(){this.parent.objRef&&(this.parent.objRef.geometry=this.objRef,this.parent.objRef.updateMorphTargets&&this.parent.objRef.updateMorphTargets())}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.geometry=void 0)}};e.\u0275fac=function(r){return new(r||e)(F(me))},e.\u0275cmp=L({type:e,selectors:[["th-abs-geometry"]],features:[q],decls:0,vars:0,template:function(r,o){},encapsulation:2});let n=e;return n})();var ZJ=["*"],ni=(()=>{let e=class e extends _3{getType(){return bt}set id(t){this._objRef&&(this._objRef.id=t)}get id(){return this._objRef?.id}set uuid(t){this._objRef&&(this._objRef.uuid=t)}get uuid(){return this._objRef?.uuid}set name(t){this._objRef&&(this._objRef.name=t)}get name(){return this._objRef?.name}get type(){return this._objRef?.type}set index(t){this._objRef&&(this._objRef.index=_e(this._objRef.index,t))}get index(){return this._objRef?.index}set attributes(t){this._objRef&&(this._objRef.attributes=t)}get attributes(){return this._objRef?.attributes}set morphAttributes(t){this._objRef&&(this._objRef.morphAttributes=t)}get morphAttributes(){return this._objRef?.morphAttributes}set morphTargetsRelative(t){this._objRef&&(this._objRef.morphTargetsRelative=t)}get morphTargetsRelative(){return this._objRef?.morphTargetsRelative}set groups(t){this._objRef&&(this._objRef.groups=t)}get groups(){return this._objRef?.groups}set boundingBox(t){this._objRef&&(this._objRef.boundingBox=_e(this._objRef.boundingBox,t))}get boundingBox(){return this._objRef?.boundingBox}set boundingSphere(t){this._objRef&&(this._objRef.boundingSphere=_e(this._objRef.boundingSphere,t))}get boundingSphere(){return this._objRef?.boundingSphere}set drawRange(t){this._objRef&&(this._objRef.drawRange=t)}get drawRange(){return this._objRef?.drawRange}set userData(t){this._objRef&&(this._objRef.userData=t)}get userData(){return this._objRef?.userData}get isBufferGeometry(){return this._objRef?.isBufferGeometry}constructor(t){super(t)}};e.\u0275fac=function(r){return new(r||e)(F(me,4))},e.\u0275cmp=L({type:e,selectors:[["th-bufferGeometry"]],inputs:{id:"id",uuid:"uuid",name:"name",index:"index",attributes:"attributes",morphAttributes:"morphAttributes",morphTargetsRelative:"morphTargetsRelative",groups:"groups",boundingBox:"boundingBox",boundingSphere:"boundingSphere",drawRange:"drawRange",userData:"userData"},features:[ie([]),q],ngContentSelectors:ZJ,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var KJ=["*"],Xo=(()=>{let e=class e extends ni{getType(){return na}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-planeGeometry"]],features:[ie([{provide:ni,useExisting:ge(()=>e)}]),q],ngContentSelectors:KJ,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Zd=new Ee("A reference to the raycaster object",{factory:()=>new Xr}),mc=(()=>{let e=class e{constructor(){this.raycaster=te(Zd),this.selected=null,this.enabled=!0,this.groups=[],this.paused=!1,this.maxClickDistance=23,this.nid=e.instanceCnt++,this.onPointerMove=this.onPointerMove.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerUp=this.onPointerUp.bind(this)}ngOnDestroy(){this.disable(),this.unsubscribe()}subscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.addEventListener("pointermove",this.onPointerMove),this.canvas.addEventListener("pointerdown",this.onPointerDown),this.canvas.addEventListener("pointerup",this.onPointerUp)}unsubscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.removeEventListener("pointermove",this.onPointerMove),this.canvas.removeEventListener("pointerdown",this.onPointerDown),this.canvas.removeEventListener("pointerup",this.onPointerUp)}enable(){this.enabled=!0}disable(){this.enabled=!1}pause(){this.paused=!0}resume(){this.paused=!1}get isEnabled(){return this.enabled}init(t,r){this.camera=t,this.canvas=r,this.subscribe()}addEventTarget(t){this.groups.push(t)}removeEventTarget(t){let r=this.groups.indexOf(t);r>=0&&this.groups.splice(r,1)}onPointerMove(t){if(!this.isReady())return;let r=this.getFirstIntersectedGroup(t.layerX,t.layerY,"mouseEnter");if((!this.selected||this.selected!==r?.target)&&(this.selected&&(this.selected.host.objRef?.dispatchEvent({type:"mouseExit",component:this.selected.host}),this.selected.emitOnMouseExit(),this.selected=null),r&&r.target)){this.selected=r.target;let o=ve({type:"mouseEnter",component:r.target.host},r);this.selected.host.objRef?.dispatchEvent(o),this.selected.emitOnMouseEnter(o)}}onPointerDown(t){if(this.maxClickDistance=t.width,this.pointerDownEvent=t,!this.isReady())return;let r=this.getFirstIntersectedGroup(t.layerX,t.layerY,"pointerDown");if(r&&r.target&&r.target.host.objRef){let o=ve({type:"pointerDown",component:r.target.host},r);r.target.host.objRef.dispatchEvent(o),r.target.emitOnPointerDown(o)}}onPointerUp(t){let r=this.pointerDownEvent;if(this.pointerDownEvent=void 0,!this.isReady())return;let o=this.getFirstIntersectedGroup(t.layerX,t.layerY,"pointerUp");if(o&&o.target&&o.target.host.objRef){let s=ve({type:"pointerUp",component:o.target.host},o);o.target.host.objRef.dispatchEvent(s),o.target.emitOnPointerUp(s)}if(!(this.calcPointerDownUpDinstance(t,r)>this.maxClickDistance)&&(o=this.getFirstIntersectedGroup(t.layerX,t.layerY,"click"),o&&o.target&&o.target.host.objRef)){let s=ve({type:"click",component:o.target.host},o);o.target.host.objRef.dispatchEvent(s),o.target.emitOnClick(s)}}isReady(t){return!!(this.enabled&&(t||!this.paused)&&this.camera&&this.camera.objRef&&this.groups&&this.groups.length>0)}calcPointerDownUpDinstance(t,r){if(!r)return Number.MAX_VALUE;let o=t.layerX-r.layerX,s=t.layerY-r.layerY;return Math.sqrt(o*o+s*s)}getFirstIntersectedGroup(t,r,o){if(!this.camera||!this.canvas||!this.camera.objRef)return;t=t/this.canvas.clientWidth*2-1,r=-(r/this.canvas.clientHeight)*2+1;let s=new z(t,r);this.raycaster.setFromCamera(s,this.camera.objRef);let a,c;for(let l of this.groups){let d=l.host.objRef;if(!l[o]||!d)continue;let u=this.raycaster.intersectObject(d,!0);u.length>0&&(!a||a.distance>u[0].distance)&&(a=u[0],c=l)}if(c&&a)return ve({target:c},a)}};e.instanceCnt=0,e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})();var JJ=["*"],og=new Ee("HOST_ELEMENT"),Pr=(()=>{let e=class e{constructor(t,r){this.engServ=t,this.raycaster=r,this.hostElement=te(og),this.onCurrentRendererPass=new nt,this.onRender=new nt}set contentScene(t){t&&(this.scene=t)}set effectComposer(t){this._effectComposer=t,this.configureEffectComposerRenderTarget()}get effectComposer(){return this._effectComposer}set camera(t){this._camera=t,this.initRaycaster()}get camera(){return this._camera}set contentCamera(t){t&&(this.camera=t)}set viewPort(t){this._viewPort=t,this.configureEffectComposerRenderTarget()}get viewPort(){return this._viewPort}ngOnInit(){this.initRaycaster()}initRaycaster(){this.camera&&this.raycaster.init(this.camera,this.hostElement.nativeElement)}add(t){}remove(t){}configureEffectComposerRenderTarget(){if(!(!this.viewPort||!this.effectComposer)){let t,r;this.viewPort instanceof xi?(t=this.viewPort.z,r=this.viewPort?.width):(t=this.viewPort.width,r=this.viewPort.height),this.effectComposer.setSize(t,r)}}};e.\u0275fac=function(r){return new(r||e)(F(uo),F(mc))},e.\u0275cmp=L({type:e,selectors:[["th-view"]],contentQueries:function(r,o,s){if(r&1&&(Yi(s,Ut,5),Yi(s,hc,5)),r&2){let a;at(a=ct())&&(o.contentScene=a.first),at(a=ct())&&(o.contentCamera=a.first)}},inputs:{scene:"scene",effectComposer:"effectComposer",camera:"camera",shadow:"shadow",viewPort:"viewPort",scissor:"scissor",scissorTest:"scissorTest",clearColor:"clearColor",clearAlpha:"clearAlpha"},outputs:{onCurrentRendererPass:"onCurrentRendererPass",onRender:"onRender"},features:[ie([{provide:me,useExisting:ge(()=>e)},{provide:Zd,useValue:new Xr},mc])],ngContentSelectors:JJ,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2});let n=e;return n})();var y3=new S,eee=new ii,x3=new S,gf=class extends Tt{constructor(e=document.createElement("div")){super(),this.isCSS3DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(i){i.element instanceof Element&&i.element.parentNode!==null&&i.element.parentNode.removeChild(i.element)})})}copy(e,i){return super.copy(e,i),this.element=e.element.cloneNode(!0),this}};var pa=new Be,tee=new Be,zy=class{constructor(e={}){let i=this,t,r,o,s,a={camera:{style:""},objects:new WeakMap},c=e.element!==void 0?e.element:document.createElement("div");c.style.overflow="hidden",this.domElement=c;let l=document.createElement("div");l.style.transformOrigin="0 0",l.style.pointerEvents="none",c.appendChild(l);let d=document.createElement("div");d.style.transformStyle="preserve-3d",l.appendChild(d),this.getSize=function(){return{width:t,height:r}},this.render=function(g,m){let v=m.projectionMatrix.elements[5]*s;m.view&&m.view.enabled?(l.style.transform=`translate( ${-m.view.offsetX*(t/m.view.width)}px, ${-m.view.offsetY*(r/m.view.height)}px )`,l.style.transform+=`scale( ${m.view.fullWidth/m.view.width}, ${m.view.fullHeight/m.view.height} )`):l.style.transform="",g.matrixWorldAutoUpdate===!0&&g.updateMatrixWorld(),m.parent===null&&m.matrixWorldAutoUpdate===!0&&m.updateMatrixWorld();let _,y;m.isOrthographicCamera&&(_=-(m.right+m.left)/2,y=(m.top+m.bottom)/2);let C=m.view&&m.view.enabled?m.view.height/m.view.fullHeight:1,R=m.isOrthographicCamera?`scale( ${C} )scale(`+v+")translate("+u(_)+"px,"+u(y)+"px)"+h(m.matrixWorldInverse):`scale( ${C} )translateZ(`+v+"px)"+h(m.matrixWorldInverse),A=(m.isPerspectiveCamera?"perspective("+v+"px) ":"")+R+"translate("+o+"px,"+s+"px)";a.camera.style!==A&&(d.style.transform=A,a.camera.style=A),b(g,g,m,R)},this.setSize=function(g,m){t=g,r=m,o=t/2,s=r/2,c.style.width=g+"px",c.style.height=m+"px",l.style.width=g+"px",l.style.height=m+"px",d.style.width=g+"px",d.style.height=m+"px"};function u(g){return Math.abs(g)<1e-10?0:g}function h(g){let m=g.elements;return"matrix3d("+u(m[0])+","+u(-m[1])+","+u(m[2])+","+u(m[3])+","+u(m[4])+","+u(-m[5])+","+u(m[6])+","+u(m[7])+","+u(m[8])+","+u(-m[9])+","+u(m[10])+","+u(m[11])+","+u(m[12])+","+u(-m[13])+","+u(m[14])+","+u(m[15])+")"}function f(g){let m=g.elements;return"translate(-50%,-50%)"+("matrix3d("+u(m[0])+","+u(m[1])+","+u(m[2])+","+u(m[3])+","+u(-m[4])+","+u(-m[5])+","+u(-m[6])+","+u(-m[7])+","+u(m[8])+","+u(m[9])+","+u(m[10])+","+u(m[11])+","+u(m[12])+","+u(m[13])+","+u(m[14])+","+u(m[15])+")")}function p(g){g.isCSS3DObject&&(g.element.style.display="none");for(let m=0,v=g.children.length;m<v;m++)p(g.children[m])}function b(g,m,v,_){if(g.visible===!1){p(g);return}if(g.isCSS3DObject){let y=g.layers.test(v.layers)===!0,C=g.element;if(C.style.display=y===!0?"":"none",y===!0){g.onBeforeRender(i,m,v);let R;g.isCSS3DSprite?(pa.copy(v.matrixWorldInverse),pa.transpose(),g.rotation2D!==0&&pa.multiply(tee.makeRotationZ(g.rotation2D)),g.matrixWorld.decompose(y3,eee,x3),pa.setPosition(y3),pa.scale(x3),pa.elements[3]=0,pa.elements[7]=0,pa.elements[11]=0,pa.elements[15]=1,R=f(pa)):R=f(g.matrixWorld);let M=a.objects.get(g);if(M===void 0||M.style!==R){C.style.transform=R;let A={style:R};a.objects.set(g,A)}C.parentNode!==d&&d.appendChild(C),g.onAfterRender(i,m,v)}}for(let y=0,C=g.children.length;y<C;y++)b(g.children[y],m,v,_)}}};var _f=class extends Tt{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new z(.5,.5),this.addEventListener("removed",function(){this.traverse(function(i){i.element instanceof Element&&i.element.parentNode!==null&&i.element.parentNode.removeChild(i.element)})})}copy(e,i){return super.copy(e,i),this.element=e.element.cloneNode(!0),this.center=e.center,this}},bf=new S,w3=new Be,M3=new Be,S3=new S,R3=new S,Hy=class{constructor(e={}){let i=this,t,r,o,s,a={objects:new WeakMap},c=e.element!==void 0?e.element:document.createElement("div");c.style.overflow="hidden",this.domElement=c,this.getSize=function(){return{width:t,height:r}},this.render=function(p,b){p.matrixWorldAutoUpdate===!0&&p.updateMatrixWorld(),b.parent===null&&b.matrixWorldAutoUpdate===!0&&b.updateMatrixWorld(),w3.copy(b.matrixWorldInverse),M3.multiplyMatrices(b.projectionMatrix,w3),d(p,p,b),f(p)},this.setSize=function(p,b){t=p,r=b,o=t/2,s=r/2,c.style.width=p+"px",c.style.height=b+"px"};function l(p){p.isCSS2DObject&&(p.element.style.display="none");for(let b=0,g=p.children.length;b<g;b++)l(p.children[b])}function d(p,b,g){if(p.visible===!1){l(p);return}if(p.isCSS2DObject){bf.setFromMatrixPosition(p.matrixWorld),bf.applyMatrix4(M3);let m=bf.z>=-1&&bf.z<=1&&p.layers.test(g.layers)===!0,v=p.element;v.style.display=m===!0?"":"none",m===!0&&(p.onBeforeRender(i,b,g),v.style.transform="translate("+-100*p.center.x+"%,"+-100*p.center.y+"%)translate("+(bf.x*o+o)+"px,"+(-bf.y*s+s)+"px)",v.parentNode!==c&&c.appendChild(v),p.onAfterRender(i,b,g));let _={distanceToCameraSquared:u(g,p)};a.objects.set(p,_)}for(let m=0,v=p.children.length;m<v;m++)d(p.children[m],b,g)}function u(p,b){return S3.setFromMatrixPosition(p.matrixWorld),R3.setFromMatrixPosition(b.matrixWorld),S3.distanceToSquared(R3)}function h(p){let b=[];return p.traverseVisible(function(g){g.isCSS2DObject&&b.push(g)}),b}function f(p){let b=h(p).sort(function(m,v){if(m.renderOrder!==v.renderOrder)return v.renderOrder-m.renderOrder;let _=a.objects.get(m).distanceToCameraSquared,y=a.objects.get(v).distanceToCameraSquared;return _-y}),g=b.length;for(let m=0,v=b.length;m<v;m++)b[m].element.style.zIndex=g-m}}};var T3={alpha:!0,antialias:!0,preserveDrawingBuffer:!0},pc=new Ee("Renderer Providers"),C3=new Ee("CSS3DRenderer"),E3=new Ee("CSS2DRenderer"),Qd=new Ee("WebGLRenderer");function gl(n){let e=new oc(ve(ve({},T3),n));return Object.assign(e,ve(ve({},T3),n)),[{provide:Qd,useValue:e},{provide:pc,multi:!0,useExisting:Qd}]}function Gy(n){return[{provide:C3,useFactory:()=>{let i=new zy(n),t=i.domElement.style;return t.position="absolute",t.top="0px",t.bottom="0px",t.left="0px",t.right="0px",t.overflow="hidden",i}},{provide:pc,multi:!0,useExisting:C3}]}function D3(n){return[{provide:E3,useFactory:()=>{let i=new Hy(n),t=i.domElement.style;return t.position="absolute",t.top="0px",t.bottom="0px",t.left="0px",t.right="0px",t.overflow="hidden",i}},{provide:pc,multi:!0,useExisting:E3}]}var uo=(()=>{let e=class e{constructor(t){this.ngZone=t,this.hostElement=te(og),this.clock=new ao,this.destroyed$=new gt,this.resizeEmitter=new nt,this.beforeRenderEmitter=new nt,this.views=[],this.beforeRender$=this.beforeRenderEmitter.pipe(Ci(this.destroyed$)),this.resize$=this.resizeEmitter.pipe(Ci(this.destroyed$));let r=this.initRenderer();this.renderers=r.renderers,this.canvas=r.canvas,this.wegblRenderer=r.mainRenderer,this.initResizeObserver()}ngOnDestroy(){this.resizeObserver&&this.hostElement&&this.resizeObserver.unobserve(this.hostElement.nativeElement)}initResizeObserver(){this.ngZone.runOutsideAngular(()=>{this.initCanvasSize(),this.resizeObserver||(this.resizeObserver=new ResizeObserver(()=>{this.resize()})),this.resizeObserver.observe(this.hostElement.nativeElement)})}initCanvasSize(){this.canvas?.style.setProperty("width","100%"),this.canvas?.style.setProperty("height","100%")}initRenderer(){let t=te(pc),r,o;for(let s of t)s.domElement instanceof HTMLCanvasElement&&(o=s,r=o.domElement);if(!t||t.length<1)throw new Error("missing Canvas Renderer");return{canvas:r,mainRenderer:o,renderers:t}}setViews(t){this.views=t}addView(t){this.views.push(t);let r=this.calcRendererSize();r&&this.adjustViewDimensions(t,r.width,r.height)}render(){this.beforeRenderEmitter.emit({engine:this,delta:this.clock.getDelta()});for(let t of this.views)this.renderView(t)}renderView(t){let r=t.camera,o=t.scene;if(!(!r||!o||!r.objRef||!o.objRef)){ml(t.onRender)&&this.ngZone.run(()=>t.onRender.emit({renderer:this.renderers,scene:o,camera:r}));for(let s of this.renderers)if(!(t.effectComposer&&!(s instanceof oc)))if(this.applyRendererParametersFromView(t,s),ml(t.onCurrentRendererPass)&&this.ngZone.run(()=>t.onCurrentRendererPass.emit({renderer:s,scene:o,camera:r,engine:this})),t.effectComposer){t.effectComposer.render();return}else s.render(o.objRef,r.objRef)}}applyRendererParametersFromView(t,r){t.viewPort&&r.setViewport&&(t.viewPort instanceof xi?r.setViewport(t.viewPort):r.setViewport(t.viewPort.x,t.viewPort.y,t.viewPort.width,t.viewPort.height)),t.scissor&&r.setScissor&&(t.scissor instanceof xi?r.setScissor(t.scissor):r.setScissor(t.scissor.x,t.scissor.y,t.scissor.width,t.scissor.height)),t.scissorTest!==void 0&&r.setScissorTest&&r.setScissorTest(t.scissorTest),t.clearColor&&r.setClearColor&&r.setClearColor(t.clearColor),t.clearAlpha!==void 0&&r.setClearAlpha&&r.setClearAlpha(t.clearAlpha),t.shadow!==void 0&&r.shadowMap&&(r.shadowMap.enabled=!0)}resize(){let{width:t,height:r}=this.calcRendererSize();this.renderers?.forEach(o=>o.setSize(t,r,!1));for(let o of this.views)this.adjustViewDimensions(o,t,r);return this.resizeEmitter.emit({width:t,height:r}),!0}calcRendererSize(){return{width:this.hostElement.nativeElement.clientWidth??0,height:this.hostElement.nativeElement.clientHeight??0}}adjustViewDimensions(t,r,o){t.viewPort||(t.camera&&t.camera.objRef.aspect&&(t.camera.objRef.aspect=r/o,t.camera.objRef.updateProjectionMatrix()),t.effectComposer?.setSize(r,o))}};e.\u0275fac=function(r){return new(r||e)(de(Qe))},e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})();var ga=(()=>{let e=class e{constructor(t,r){this.engineService=t,this.ngZone=r,this.active=!0,this.destroyed$=new gt,this.beforeRender$=this.engineService.beforeRender$,this.engineService.resize$.pipe(Ci(this.destroyed$)).subscribe(()=>this.requestAnimationFrame())}ngOnDestroy(){this.stop(),this.destroyed$.next(),this.destroyed$.complete()}start(){this.active||(this.active=!0,this.requestAnimationFrame())}stop(){this.active=!1,this.frameId!==void 0&&(cancelAnimationFrame(this.frameId),this.frameId=void 0)}isActive(){return this.active}requestAnimationFrame(){this.frameId===void 0&&this.ngZone.runOutsideAngular(()=>this.frameId=requestAnimationFrame(()=>{this.frameId=void 0,this.engineService.render(),this.active&&this.requestAnimationFrame()}))}};e.\u0275fac=function(r){return new(r||e)(de(uo),de(Qe))},e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})();var iee=["*"];function nee(n,e){n&1&&Q(0,0,["*ngIf","isDevMode()"])}function ree(){return[{provide:pc,useFactory:()=>{let n=te(pc,{skipSelf:!0,optional:!0});return n||[gl()[0].useValue]}},{provide:Qd,useFactory:()=>{let n=te(Qd,{skipSelf:!0,optional:!0});if(n)return n;let e=te(pc),i=e[0];if(e.length===1&&i instanceof oc)return i}}]}var It=(()=>{let e=class e extends Pr{get obj(){return this}set views(t){this.setViews(t)}get rendererCanvas(){return this.engServ.canvas}constructor(t,r,o,s){super(t,o),this.engServ=t,this.animationLoop=r,this.raycaster=o,this.elementRef=s,this.isDevMode=Gj,this.nid=e.instanceCnt++,this.disableDefaultView=!1,this.engServ.renderers.forEach(a=>this.elementRef.nativeElement.appendChild(a.domElement))}ngAfterContentChecked(){this.animationLoop.requestAnimationFrame()}ngAfterViewInit(){this.animationLoop.requestAnimationFrame()}ngOnInit(){this.engServ.resize(),super.ngOnInit(),this.setViews()}setViews(t){this.engServ.setViews([]),this.disableDefaultView||this.engServ.addView(this),t?.forEach(r=>this.engServ.addView(r))}};e.instanceCnt=0,e.\u0275fac=function(r){return new(r||e)(F(uo),F(ga),F(ge(()=>mc)),F(et))},e.\u0275cmp=L({type:e,selectors:[["th-canvas"]],contentQueries:function(r,o,s){if(r&1&&Yi(s,Pr,4),r&2){let a;at(a=ct())&&(o.views=a)}},inputs:{disableDefaultView:"disableDefaultView"},features:[ie([{provide:og,useFactory:()=>te(et)},{provide:me,useExisting:ge(()=>e)},uo,ga,{provide:Zd,useValue:new Xr},ge(()=>mc),{provide:Pr,useExisting:ge(()=>e)},ree()]),q],ngContentSelectors:iee,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(r,o){r&1&&(ae(),Vt(0,nee,1,0,"ng-content",0)),r&2&&P("ngIf",o.isDevMode())},dependencies:[oh],styles:["[_nghost-%COMP%]{display:flex;flex:auto;line-height:0;height:100%}canvas[_ngcontent-%COMP%]{flex:auto;outline:none;width:100%;height:100%}"],changeDetection:0});let n=e;return n})();var sg=function(){var n=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(d){d.preventDefault(),t(++n%e.children.length)},!1);function i(d){return e.appendChild(d.dom),d}function t(d){for(var u=0;u<e.children.length;u++)e.children[u].style.display=u===d?"block":"none";n=d}var r=(performance||Date).now(),o=r,s=0,a=i(new sg.Panel("FPS","#0ff","#002")),c=i(new sg.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=i(new sg.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:i,showPanel:t,begin:function(){r=(performance||Date).now()},end:function(){s++;var d=(performance||Date).now();if(c.update(d-r,200),d>=o+1e3&&(a.update(s*1e3/(d-o),100),o=d,s=0,l)){var u=performance.memory;l.update(u.usedJSHeapSize/1048576,u.jsHeapSizeLimit/1048576)}return d},update:function(){r=this.end()},domElement:e,setMode:t}};sg.Panel=function(n,e,i){var t=1/0,r=0,o=Math.round,s=o(window.devicePixelRatio||1),a=80*s,c=48*s,l=3*s,d=2*s,u=3*s,h=15*s,f=74*s,p=30*s,b=document.createElement("canvas");b.width=a,b.height=c,b.style.cssText="width:80px;height:48px";var g=b.getContext("2d");return g.font="bold "+9*s+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=i,g.fillRect(0,0,a,c),g.fillStyle=e,g.fillText(n,l,d),g.fillRect(u,h,f,p),g.fillStyle=i,g.globalAlpha=.9,g.fillRect(u,h,f,p),{dom:b,update:function(m,v){t=Math.min(t,m),r=Math.max(r,m),g.fillStyle=i,g.globalAlpha=1,g.fillRect(0,0,a,h),g.fillStyle=e,g.fillText(o(m)+" "+n+" ("+o(t)+"-"+o(r)+")",l,d),g.drawImage(b,u+s,h,f-s,p,u,h,f-s,p),g.fillRect(u+f-s,h,s,p),g.fillStyle=i,g.globalAlpha=.9,g.fillRect(u+f-s,h,s,o((1-m/v)*p))}}};var I3=sg;var An=(()=>{let e=class e{constructor(t,r){this.engineService=t,this.canvas=r,this.stats=new I3}ngOnDestroy(){this.renderSubscription&&this.renderSubscription.unsubscribe()}ngOnInit(){if(!this.canvas.elementRef)throw new Error("No canvas present");let t=this.canvas.elementRef.nativeElement;t&&(t.style.position="relative",this.stats.dom.style.position="absolute",this.stats.showPanel(0),t.appendChild(this.stats.dom),this.renderSubscription=this.engineService.beforeRender$.subscribe(()=>{this.stats.update()}))}set thStats(t){t?this.stats.dom.style.visibility="visible":this.stats.dom.style.visibility="hidden"}};e.\u0275fac=function(r){return new(r||e)(F(uo),F(It))},e.\u0275dir=$e({type:e,selectors:[["","thStats",""]],inputs:{thStats:"thStats"}});let n=e;return n})();var Wy="https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/assets/",an="assets/";function gD(n,e){if(e===nD)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===df||e===ig){let i=n.getIndex();if(i===null){let s=[],a=n.getAttribute("position");if(a!==void 0){for(let c=0;c<a.count;c++)s.push(c);n.setIndex(s),i=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}let t=i.count-2,r=[];if(e===df)for(let s=1;s<=t;s++)r.push(i.getX(0)),r.push(i.getX(s)),r.push(i.getX(s+1));else for(let s=0;s<t;s++)s%2===0?(r.push(i.getX(s)),r.push(i.getX(s+1)),r.push(i.getX(s+2))):(r.push(i.getX(s+2)),r.push(i.getX(s+1)),r.push(i.getX(s)));r.length/3!==t&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let o=n.clone();return o.setIndex(r),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var $y=class extends ir{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(i){return new MD(i)}),this.register(function(i){return new SD(i)}),this.register(function(i){return new kD(i)}),this.register(function(i){return new FD(i)}),this.register(function(i){return new jD(i)}),this.register(function(i){return new TD(i)}),this.register(function(i){return new CD(i)}),this.register(function(i){return new ED(i)}),this.register(function(i){return new DD(i)}),this.register(function(i){return new wD(i)}),this.register(function(i){return new AD(i)}),this.register(function(i){return new RD(i)}),this.register(function(i){return new PD(i)}),this.register(function(i){return new ID(i)}),this.register(function(i){return new yD(i)}),this.register(function(i){return new OD(i)}),this.register(function(i){return new ND(i)})}load(e,i,t,r){let o=this,s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){let l=ys.extractUrlBase(e);s=ys.resolveURL(l,this.path)}else s=ys.extractUrlBase(e);this.manager.itemStart(e);let a=function(l){r?r(l):console.error(l),o.manager.itemError(e),o.manager.itemEnd(e)},c=new tr(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{o.parse(l,s,function(d){i(d),o.manager.itemEnd(e)},a)}catch(d){a(d)}},t,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,i,t,r){let o,s={},a={},c=new TextDecoder;if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===O3){try{s[yi.KHR_BINARY_GLTF]=new LD(e)}catch(u){r&&r(u);return}o=JSON.parse(s[yi.KHR_BINARY_GLTF].content)}else o=JSON.parse(c.decode(e));else o=e;if(o.asset===void 0||o.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let l=new WD(o,{path:i||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){let u=this.pluginCallbacks[d](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,s[u.name]=!0}if(o.extensionsUsed)for(let d=0;d<o.extensionsUsed.length;++d){let u=o.extensionsUsed[d],h=o.extensionsRequired||[];switch(u){case yi.KHR_MATERIALS_UNLIT:s[u]=new xD;break;case yi.KHR_DRACO_MESH_COMPRESSION:s[u]=new BD(o,this.dracoLoader);break;case yi.KHR_TEXTURE_TRANSFORM:s[u]=new UD;break;case yi.KHR_MESH_QUANTIZATION:s[u]=new VD;break;default:h.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(s),l.setPlugins(a),l.parse(t,r)}parseAsync(e,i){let t=this;return new Promise(function(r,o){t.parse(e,i,r,o)})}};function oee(){let n={};return{get:function(e){return n[e]},add:function(e,i){n[e]=i},remove:function(e){delete n[e]},removeAll:function(){n={}}}}var yi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},yD=class{constructor(e){this.parser=e,this.name=yi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,i=this.parser.json.nodes||[];for(let t=0,r=i.length;t<r;t++){let o=i[t];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){let i=this.parser,t="light:"+e,r=i.cache.get(t);if(r)return r;let o=i.json,c=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e],l,d=new pe(16777215);c.color!==void 0&&d.setRGB(c.color[0],c.color[1],c.color[2],Nn);let u=c.range!==void 0?c.range:0;switch(c.type){case"directional":l=new ll(d),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new cl(d),l.distance=u;break;case"spot":l=new of(d),l.distance=u,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,gc(l,c),c.intensity!==void 0&&(l.intensity=c.intensity),l.name=i.createUniqueName(c.name||"light_"+e),r=Promise.resolve(l),i.cache.add(t,r),r}getDependency(e,i){if(e==="light")return this._loadLight(i)}createNodeAttachment(e){let i=this,t=this.parser,o=t.json.nodes[e],a=(o.extensions&&o.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(c){return t._getNodeRef(i.cache,a,c)})}},xD=class{constructor(){this.name=yi.KHR_MATERIALS_UNLIT}getMaterialType(){return tn}extendParams(e,i,t){let r=[];e.color=new pe(1,1,1),e.opacity=1;let o=i.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){let s=o.baseColorFactor;e.color.setRGB(s[0],s[1],s[2],Nn),e.opacity=s[3]}o.baseColorTexture!==void 0&&r.push(t.assignTexture(e,"map",o.baseColorTexture,Fn))}return Promise.all(r)}},wD=class{constructor(e){this.parser=e,this.name=yi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,i){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(i.emissiveIntensity=o),Promise.resolve()}},MD=class{constructor(e){this.parser=e,this.name=yi.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:qr}extendMaterialParams(e,i){let t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(i.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(t.assignTexture(i,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(i.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(t.assignTexture(i,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(t.assignTexture(i,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){let a=s.clearcoatNormalTexture.scale;i.clearcoatNormalScale=new z(a,a)}return Promise.all(o)}},SD=class{constructor(e){this.parser=e,this.name=yi.KHR_MATERIALS_DISPERSION}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:qr}extendMaterialParams(e,i){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return i.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}},RD=class{constructor(e){this.parser=e,this.name=yi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:qr}extendMaterialParams(e,i){let t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(i.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(t.assignTexture(i,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(i.iridescenceIOR=s.iridescenceIor),i.iridescenceThicknessRange===void 0&&(i.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(i.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(i.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(t.assignTexture(i,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}},TD=class{constructor(e){this.parser=e,this.name=yi.KHR_MATERIALS_SHEEN}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:qr}extendMaterialParams(e,i){let t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[];i.sheenColor=new pe(0,0,0),i.sheenRoughness=0,i.sheen=1;let s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){let a=s.sheenColorFactor;i.sheenColor.setRGB(a[0],a[1],a[2],Nn)}return s.sheenRoughnessFactor!==void 0&&(i.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(t.assignTexture(i,"sheenColorMap",s.sheenColorTexture,Fn)),s.sheenRoughnessTexture!==void 0&&o.push(t.assignTexture(i,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}},CD=class{constructor(e){this.parser=e,this.name=yi.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:qr}extendMaterialParams(e,i){let t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(i.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(t.assignTexture(i,"transmissionMap",s.transmissionTexture)),Promise.all(o)}},ED=class{constructor(e){this.parser=e,this.name=yi.KHR_MATERIALS_VOLUME}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:qr}extendMaterialParams(e,i){let t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];i.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(t.assignTexture(i,"thicknessMap",s.thicknessTexture)),i.attenuationDistance=s.attenuationDistance||1/0;let a=s.attenuationColor||[1,1,1];return i.attenuationColor=new pe().setRGB(a[0],a[1],a[2],Nn),Promise.all(o)}},DD=class{constructor(e){this.parser=e,this.name=yi.KHR_MATERIALS_IOR}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:qr}extendMaterialParams(e,i){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return i.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}},AD=class{constructor(e){this.parser=e,this.name=yi.KHR_MATERIALS_SPECULAR}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:qr}extendMaterialParams(e,i){let t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];i.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(t.assignTexture(i,"specularIntensityMap",s.specularTexture));let a=s.specularColorFactor||[1,1,1];return i.specularColor=new pe().setRGB(a[0],a[1],a[2],Nn),s.specularColorTexture!==void 0&&o.push(t.assignTexture(i,"specularColorMap",s.specularColorTexture,Fn)),Promise.all(o)}},ID=class{constructor(e){this.parser=e,this.name=yi.EXT_MATERIALS_BUMP}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:qr}extendMaterialParams(e,i){let t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return i.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(t.assignTexture(i,"bumpMap",s.bumpTexture)),Promise.all(o)}},PD=class{constructor(e){this.parser=e,this.name=yi.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:qr}extendMaterialParams(e,i){let t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(i.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(i.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(t.assignTexture(i,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}},kD=class{constructor(e){this.parser=e,this.name=yi.KHR_TEXTURE_BASISU}loadTexture(e){let i=this.parser,t=i.json,r=t.textures[e];if(!r.extensions||!r.extensions[this.name])return null;let o=r.extensions[this.name],s=i.options.ktx2Loader;if(!s){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return i.loadTextureImage(e,o.source,s)}},FD=class{constructor(e){this.parser=e,this.name=yi.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let i=this.name,t=this.parser,r=t.json,o=r.textures[e];if(!o.extensions||!o.extensions[i])return null;let s=o.extensions[i],a=r.images[s.source],c=t.textureLoader;if(a.uri){let l=t.options.manager.getHandler(a.uri);l!==null&&(c=l)}return this.detectSupport().then(function(l){if(l)return t.loadTextureImage(e,s.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(i)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return t.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let i=new Image;i.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",i.onload=i.onerror=function(){e(i.height===1)}})),this.isSupported}},jD=class{constructor(e){this.parser=e,this.name=yi.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){let i=this.name,t=this.parser,r=t.json,o=r.textures[e];if(!o.extensions||!o.extensions[i])return null;let s=o.extensions[i],a=r.images[s.source],c=t.textureLoader;if(a.uri){let l=t.options.manager.getHandler(a.uri);l!==null&&(c=l)}return this.detectSupport().then(function(l){if(l)return t.loadTextureImage(e,s.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(i)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return t.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let i=new Image;i.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",i.onload=i.onerror=function(){e(i.height===1)}})),this.isSupported}},OD=class{constructor(e){this.name=yi.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let i=this.parser.json,t=i.bufferViews[e];if(t.extensions&&t.extensions[this.name]){let r=t.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){let c=r.byteOffset||0,l=r.byteLength||0,d=r.count,u=r.byteStride,h=new Uint8Array(a,c,l);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(d,u,h,r.mode,r.filter).then(function(f){return f.buffer}):s.ready.then(function(){let f=new ArrayBuffer(d*u);return s.decodeGltfBuffer(new Uint8Array(f),d,u,h,r.mode,r.filter),f})})}else return null}},ND=class{constructor(e){this.name=yi.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let i=this.parser.json,t=i.nodes[e];if(!t.extensions||!t.extensions[this.name]||t.mesh===void 0)return null;let r=i.meshes[t.mesh];for(let l of r.primitives)if(l.mode!==Yo.TRIANGLES&&l.mode!==Yo.TRIANGLE_STRIP&&l.mode!==Yo.TRIANGLE_FAN&&l.mode!==void 0)return null;let s=t.extensions[this.name].attributes,a=[],c={};for(let l in s)a.push(this.parser.getDependency("accessor",s[l]).then(d=>(c[l]=d,c[l])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(l=>{let d=l.pop(),u=d.isGroup?d.children:[d],h=l[0].count,f=[];for(let p of u){let b=new Be,g=new S,m=new ii,v=new S(1,1,1),_=new al(p.geometry,p.material,h);for(let y=0;y<h;y++)c.TRANSLATION&&g.fromBufferAttribute(c.TRANSLATION,y),c.ROTATION&&m.fromBufferAttribute(c.ROTATION,y),c.SCALE&&v.fromBufferAttribute(c.SCALE,y),_.setMatrixAt(y,b.compose(g,m,v));for(let y in c)if(y==="_COLOR_0"){let C=c[y];_.instanceColor=new _s(C.array,C.itemSize,C.normalized)}else y!=="TRANSLATION"&&y!=="ROTATION"&&y!=="SCALE"&&p.geometry.setAttribute(y,c[y]);Tt.prototype.copy.call(_,p),this.parser.assignFinalMaterial(_),f.push(_)}return d.isGroup?(d.clear(),d.add(...f),d):f[0]}))}},O3="glTF",ag=12,P3={JSON:1313821514,BIN:5130562},LD=class{constructor(e){this.name=yi.KHR_BINARY_GLTF,this.content=null,this.body=null;let i=new DataView(e,0,ag),t=new TextDecoder;if(this.header={magic:t.decode(new Uint8Array(e.slice(0,4))),version:i.getUint32(4,!0),length:i.getUint32(8,!0)},this.header.magic!==O3)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-ag,o=new DataView(e,ag),s=0;for(;s<r;){let a=o.getUint32(s,!0);s+=4;let c=o.getUint32(s,!0);if(s+=4,c===P3.JSON){let l=new Uint8Array(e,ag+s,a);this.content=t.decode(l)}else if(c===P3.BIN){let l=ag+s;this.body=e.slice(l,l+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},BD=class{constructor(e,i){if(!i)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=yi.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=i,this.dracoLoader.preload()}decodePrimitive(e,i){let t=this.json,r=this.dracoLoader,o=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},c={},l={};for(let d in s){let u=HD[d]||d.toLowerCase();a[u]=s[d]}for(let d in e.attributes){let u=HD[d]||d.toLowerCase();if(s[d]!==void 0){let h=t.accessors[e.attributes[d]],f=vf[h.componentType];l[u]=f.name,c[u]=h.normalized===!0}}return i.getDependency("bufferView",o).then(function(d){return new Promise(function(u,h){r.decodeDracoFile(d,function(f){for(let p in f.attributes){let b=f.attributes[p],g=c[p];g!==void 0&&(b.normalized=g)}u(f)},a,l,Nn,h)})})}},UD=class{constructor(){this.name=yi.KHR_TEXTURE_TRANSFORM}extendTexture(e,i){return(i.texCoord===void 0||i.texCoord===e.channel)&&i.offset===void 0&&i.rotation===void 0&&i.scale===void 0||(e=e.clone(),i.texCoord!==void 0&&(e.channel=i.texCoord),i.offset!==void 0&&e.offset.fromArray(i.offset),i.rotation!==void 0&&(e.rotation=i.rotation),i.scale!==void 0&&e.repeat.fromArray(i.scale),e.needsUpdate=!0),e}},VD=class{constructor(){this.name=yi.KHR_MESH_QUANTIZATION}},qy=class extends cc{constructor(e,i,t,r){super(e,i,t,r)}copySampleValue_(e){let i=this.resultBuffer,t=this.sampleValues,r=this.valueSize,o=e*r*3+r;for(let s=0;s!==r;s++)i[s]=t[o+s];return i}interpolate_(e,i,t,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=a*2,l=a*3,d=r-i,u=(t-i)/d,h=u*u,f=h*u,p=e*l,b=p-l,g=-2*f+3*h,m=f-h,v=1-g,_=m-h+u;for(let y=0;y!==a;y++){let C=s[b+y+a],R=s[b+y+c]*d,M=s[p+y+a],A=s[p+y]*d;o[y]=v*C+_*R+g*M+m*A}return o}},see=new ii,zD=class extends qy{interpolate_(e,i,t,r){let o=super.interpolate_(e,i,t,r);return see.fromArray(o).normalize().toArray(o),o}},Yo={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},vf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},k3={9728:ui,9729:gn,9984:tg,9985:Td,9986:rl,9987:Co},F3={33071:ro,33648:Pd,10497:qo},bD={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},HD={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},bl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},aee={CUBICSPLINE:void 0,LINEAR:Od,STEP:jd},_D={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function cee(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Dr({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ms})),n.DefaultMaterial}function Kd(n,e,i){for(let t in i.extensions)n[t]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[t]=i.extensions[t])}function gc(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function lee(n,e,i){let t=!1,r=!1,o=!1;for(let l=0,d=e.length;l<d;l++){let u=e[l];if(u.POSITION!==void 0&&(t=!0),u.NORMAL!==void 0&&(r=!0),u.COLOR_0!==void 0&&(o=!0),t&&r&&o)break}if(!t&&!r&&!o)return Promise.resolve(n);let s=[],a=[],c=[];for(let l=0,d=e.length;l<d;l++){let u=e[l];if(t){let h=u.POSITION!==void 0?i.getDependency("accessor",u.POSITION):n.attributes.position;s.push(h)}if(r){let h=u.NORMAL!==void 0?i.getDependency("accessor",u.NORMAL):n.attributes.normal;a.push(h)}if(o){let h=u.COLOR_0!==void 0?i.getDependency("accessor",u.COLOR_0):n.attributes.color;c.push(h)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(c)]).then(function(l){let d=l[0],u=l[1],h=l[2];return t&&(n.morphAttributes.position=d),r&&(n.morphAttributes.normal=u),o&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}function dee(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let i=0,t=e.weights.length;i<t;i++)n.morphTargetInfluences[i]=e.weights[i];if(e.extras&&Array.isArray(e.extras.targetNames)){let i=e.extras.targetNames;if(n.morphTargetInfluences.length===i.length){n.morphTargetDictionary={};for(let t=0,r=i.length;t<r;t++)n.morphTargetDictionary[i[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function uee(n){let e,i=n.extensions&&n.extensions[yi.KHR_DRACO_MESH_COMPRESSION];if(i?e="draco:"+i.bufferView+":"+i.indices+":"+vD(i.attributes):e=n.indices+":"+vD(n.attributes)+":"+n.mode,n.targets!==void 0)for(let t=0,r=n.targets.length;t<r;t++)e+=":"+vD(n.targets[t]);return e}function vD(n){let e="",i=Object.keys(n).sort();for(let t=0,r=i.length;t<r;t++)e+=i[t]+":"+n[i[t]]+";";return e}function GD(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function hee(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}var fee=new Be,WD=class{constructor(e={},i={}){this.json=e,this.extensions={},this.plugins={},this.options=i,this.cache=new oee,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let t=!1,r=!1,o=-1;typeof navigator<"u"&&(t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,o=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||t||r&&o<98?this.textureLoader=new Xp(this.options.manager):this.textureLoader=new Zp(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new tr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,i){let t=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([t.getDependencies("scene"),t.getDependencies("animation"),t.getDependencies("camera")])}).then(function(s){let a={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:t,userData:{}};return Kd(o,a,r),gc(a,r),Promise.all(t._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){for(let c of a.scenes)c.updateMatrixWorld();e(a)})}).catch(i)}_markDefs(){let e=this.json.nodes||[],i=this.json.skins||[],t=this.json.meshes||[];for(let r=0,o=i.length;r<o;r++){let s=i[r].joints;for(let a=0,c=s.length;a<c;a++)e[s[a]].isBone=!0}for(let r=0,o=e.length;r<o;r++){let s=e[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(t[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,i){i!==void 0&&(e.refs[i]===void 0&&(e.refs[i]=e.uses[i]=0),e.refs[i]++)}_getNodeRef(e,i,t){if(e.refs[i]<=1)return t;let r=t.clone(),o=(s,a)=>{let c=this.associations.get(s);c!=null&&this.associations.set(a,c);for(let[l,d]of s.children.entries())o(d,a.children[l])};return o(t,r),r.name+="_instance_"+e.uses[i]++,r}_invokeOne(e){let i=Object.values(this.plugins);i.push(this);for(let t=0;t<i.length;t++){let r=e(i[t]);if(r)return r}return null}_invokeAll(e){let i=Object.values(this.plugins);i.unshift(this);let t=[];for(let r=0;r<i.length;r++){let o=e(i[r]);o&&t.push(o)}return t}getDependency(e,i){let t=e+":"+i,r=this.cache.get(t);if(!r){switch(e){case"scene":r=this.loadScene(i);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(i)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(i)});break;case"accessor":r=this.loadAccessor(i);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(i)});break;case"buffer":r=this.loadBuffer(i);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(i)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(i)});break;case"skin":r=this.loadSkin(i);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(i)});break;case"camera":r=this.loadCamera(i);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,i)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(t,r)}return r}getDependencies(e){let i=this.cache.get(e);if(!i){let t=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];i=Promise.all(r.map(function(o,s){return t.getDependency(e,s)})),this.cache.add(e,i)}return i}loadBuffer(e){let i=this.json.buffers[e],t=this.fileLoader;if(i.type&&i.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+i.type+" buffer type is not supported.");if(i.uri===void 0&&e===0)return Promise.resolve(this.extensions[yi.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(o,s){t.load(ys.resolveURL(i.uri,r.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+i.uri+'".'))})})}loadBufferView(e){let i=this.json.bufferViews[e];return this.getDependency("buffer",i.buffer).then(function(t){let r=i.byteLength||0,o=i.byteOffset||0;return t.slice(o,o+r)})}loadAccessor(e){let i=this,t=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){let s=bD[r.type],a=vf[r.componentType],c=r.normalized===!0,l=new a(r.count*s);return Promise.resolve(new hi(l,s,c))}let o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(s){let a=s[0],c=bD[r.type],l=vf[r.componentType],d=l.BYTES_PER_ELEMENT,u=d*c,h=r.byteOffset||0,f=r.bufferView!==void 0?t.bufferViews[r.bufferView].byteStride:void 0,p=r.normalized===!0,b,g;if(f&&f!==u){let m=Math.floor(h/f),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+m+":"+r.count,_=i.cache.get(v);_||(b=new l(a,m*f,r.count*f/d),_=new sc(b,f/d),i.cache.add(v,_)),g=new ra(_,c,h%f/d,p)}else a===null?b=new l(r.count*c):b=new l(a,h,r.count*c),g=new hi(b,c,p);if(r.sparse!==void 0){let m=bD.SCALAR,v=vf[r.sparse.indices.componentType],_=r.sparse.indices.byteOffset||0,y=r.sparse.values.byteOffset||0,C=new v(s[1],_,r.sparse.count*m),R=new l(s[2],y,r.sparse.count*c);a!==null&&(g=new hi(g.array.slice(),g.itemSize,g.normalized));for(let M=0,A=C.length;M<A;M++){let T=C[M];if(g.setX(T,R[M*c]),c>=2&&g.setY(T,R[M*c+1]),c>=3&&g.setZ(T,R[M*c+2]),c>=4&&g.setW(T,R[M*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){let i=this.json,t=this.options,o=i.textures[e].source,s=i.images[o],a=this.textureLoader;if(s.uri){let c=t.manager.getHandler(s.uri);c!==null&&(a=c)}return this.loadTextureImage(e,o,a)}loadTextureImage(e,i,t){let r=this,o=this.json,s=o.textures[e],a=o.images[i],c=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[c])return this.textureCache[c];let l=this.loadImageSource(i,t).then(function(d){d.flipY=!1,d.name=s.name||a.name||"",d.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(d.name=a.uri);let h=(o.samplers||{})[s.sampler]||{};return d.magFilter=k3[h.magFilter]||gn,d.minFilter=k3[h.minFilter]||Co,d.wrapS=F3[h.wrapS]||qo,d.wrapT=F3[h.wrapT]||qo,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,i){let t=this,r=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());let s=r.images[e],a=self.URL||self.webkitURL,c=s.uri||"",l=!1;if(s.bufferView!==void 0)c=t.getDependency("bufferView",s.bufferView).then(function(u){l=!0;let h=new Blob([u],{type:s.mimeType});return c=a.createObjectURL(h),c});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let d=Promise.resolve(c).then(function(u){return new Promise(function(h,f){let p=h;i.isImageBitmapLoader===!0&&(p=function(b){let g=new vn(b);g.needsUpdate=!0,h(g)}),i.load(ys.resolveURL(u,o.path),p,void 0,f)})}).then(function(u){return l===!0&&a.revokeObjectURL(c),gc(u,s),u.userData.mimeType=s.mimeType||hee(s.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),u});return this.sourceCache[e]=d,d}assignTexture(e,i,t,r){let o=this;return this.getDependency("texture",t.index).then(function(s){if(!s)return null;if(t.texCoord!==void 0&&t.texCoord>0&&(s=s.clone(),s.channel=t.texCoord),o.extensions[yi.KHR_TEXTURE_TRANSFORM]){let a=t.extensions!==void 0?t.extensions[yi.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let c=o.associations.get(s);s=o.extensions[yi.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,c)}}return r!==void 0&&(s.colorSpace=r),e[i]=s,s})}assignFinalMaterial(e){let i=e.geometry,t=e.material,r=i.attributes.tangent===void 0,o=i.attributes.color!==void 0,s=i.attributes.normal===void 0;if(e.isPoints){let a="PointsMaterial:"+t.uuid,c=this.cache.get(a);c||(c=new Vd,dn.prototype.copy.call(c,t),c.color.copy(t.color),c.map=t.map,c.sizeAttenuation=!1,this.cache.add(a,c)),t=c}else if(e.isLine){let a="LineBasicMaterial:"+t.uuid,c=this.cache.get(a);c||(c=new on,dn.prototype.copy.call(c,t),c.color.copy(t.color),c.map=t.map,this.cache.add(a,c)),t=c}if(r||o||s){let a="ClonedMaterial:"+t.uuid+":";r&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=t.clone(),o&&(c.vertexColors=!0),s&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(t))),t=c}e.material=t}getMaterialType(){return Dr}loadMaterial(e){let i=this,t=this.json,r=this.extensions,o=t.materials[e],s,a={},c=o.extensions||{},l=[];if(c[yi.KHR_MATERIALS_UNLIT]){let u=r[yi.KHR_MATERIALS_UNLIT];s=u.getMaterialType(),l.push(u.extendParams(a,o,i))}else{let u=o.pbrMetallicRoughness||{};if(a.color=new pe(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){let h=u.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],Nn),a.opacity=h[3]}u.baseColorTexture!==void 0&&l.push(i.assignTexture(a,"map",u.baseColorTexture,Fn)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(l.push(i.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),l.push(i.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),s=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}o.doubleSided===!0&&(a.side=Kn);let d=o.alphaMode||_D.OPAQUE;if(d===_D.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,d===_D.MASK&&(a.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==tn&&(l.push(i.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new z(1,1),o.normalTexture.scale!==void 0)){let u=o.normalTexture.scale;a.normalScale.set(u,u)}if(o.occlusionTexture!==void 0&&s!==tn&&(l.push(i.assignTexture(a,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==tn){let u=o.emissiveFactor;a.emissive=new pe().setRGB(u[0],u[1],u[2],Nn)}return o.emissiveTexture!==void 0&&s!==tn&&l.push(i.assignTexture(a,"emissiveMap",o.emissiveTexture,Fn)),Promise.all(l).then(function(){let u=new s(a);return o.name&&(u.name=o.name),gc(u,o),i.associations.set(u,{materials:e}),o.extensions&&Kd(r,u,o),u})}createUniqueName(e){let i=$i.sanitizeNodeName(e||"");return i in this.nodeNamesUsed?i+"_"+ ++this.nodeNamesUsed[i]:(this.nodeNamesUsed[i]=0,i)}loadGeometries(e){let i=this,t=this.extensions,r=this.primitiveCache;function o(a){return t[yi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,i).then(function(c){return j3(c,a,i)})}let s=[];for(let a=0,c=e.length;a<c;a++){let l=e[a],d=uee(l),u=r[d];if(u)s.push(u.promise);else{let h;l.extensions&&l.extensions[yi.KHR_DRACO_MESH_COMPRESSION]?h=o(l):h=j3(new bt,l,i),r[d]={primitive:l,promise:h},s.push(h)}}return Promise.all(s)}loadMesh(e){let i=this,t=this.json,r=this.extensions,o=t.meshes[e],s=o.primitives,a=[];for(let c=0,l=s.length;c<l;c++){let d=s[c].material===void 0?cee(this.cache):this.getDependency("material",s[c].material);a.push(d)}return a.push(i.loadGeometries(s)),Promise.all(a).then(function(c){let l=c.slice(0,c.length-1),d=c[c.length-1],u=[];for(let f=0,p=d.length;f<p;f++){let b=d[f],g=s[f],m,v=l[f];if(g.mode===Yo.TRIANGLES||g.mode===Yo.TRIANGLE_STRIP||g.mode===Yo.TRIANGLE_FAN||g.mode===void 0)m=o.isSkinnedMesh===!0?new Zh(b,v):new Ve(b,v),m.isSkinnedMesh===!0&&m.normalizeSkinWeights(),g.mode===Yo.TRIANGLE_STRIP?m.geometry=gD(m.geometry,ig):g.mode===Yo.TRIANGLE_FAN&&(m.geometry=gD(m.geometry,df));else if(g.mode===Yo.LINES)m=new Er(b,v);else if(g.mode===Yo.LINE_STRIP)m=new Qi(b,v);else if(g.mode===Yo.LINE_LOOP)m=new Kh(b,v);else if(g.mode===Yo.POINTS)m=new Jh(b,v);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(m.geometry.morphAttributes).length>0&&dee(m,o),m.name=i.createUniqueName(o.name||"mesh_"+e),gc(m,o),g.extensions&&Kd(r,m,g),i.assignFinalMaterial(m),u.push(m)}for(let f=0,p=u.length;f<p;f++)i.associations.set(u[f],{meshes:e,primitives:f});if(u.length===1)return o.extensions&&Kd(r,u[0],o),u[0];let h=new Cr;o.extensions&&Kd(r,h,o),i.associations.set(h,{meshes:e});for(let f=0,p=u.length;f<p;f++)h.add(u[f]);return h})}loadCamera(e){let i,t=this.json.cameras[e],r=t[t.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return t.type==="perspective"?i=new en(st.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):t.type==="orthographic"&&(i=new Do(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),t.name&&(i.name=this.createUniqueName(t.name)),gc(i,t),Promise.resolve(i)}loadSkin(e){let i=this.json.skins[e],t=[];for(let r=0,o=i.joints.length;r<o;r++)t.push(this._loadNodeShallow(i.joints[r]));return i.inverseBindMatrices!==void 0?t.push(this.getDependency("accessor",i.inverseBindMatrices)):t.push(null),Promise.all(t).then(function(r){let o=r.pop(),s=r,a=[],c=[];for(let l=0,d=s.length;l<d;l++){let u=s[l];if(u){a.push(u);let h=new Be;o!==null&&h.fromArray(o.array,l*16),c.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',i.joints[l])}return new Qh(a,c)})}loadAnimation(e){let i=this.json,t=this,r=i.animations[e],o=r.name?r.name:"animation_"+e,s=[],a=[],c=[],l=[],d=[];for(let u=0,h=r.channels.length;u<h;u++){let f=r.channels[u],p=r.samplers[f.sampler],b=f.target,g=b.node,m=r.parameters!==void 0?r.parameters[p.input]:p.input,v=r.parameters!==void 0?r.parameters[p.output]:p.output;b.node!==void 0&&(s.push(this.getDependency("node",g)),a.push(this.getDependency("accessor",m)),c.push(this.getDependency("accessor",v)),l.push(p),d.push(b))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(c),Promise.all(l),Promise.all(d)]).then(function(u){let h=u[0],f=u[1],p=u[2],b=u[3],g=u[4],m=[];for(let v=0,_=h.length;v<_;v++){let y=h[v],C=f[v],R=p[v],M=b[v],A=g[v];if(y===void 0)continue;y.updateMatrix&&y.updateMatrix();let T=t._createAnimationTracks(y,C,R,M,A);if(T)for(let x=0;x<T.length;x++)m.push(T[x])}return new uc(o,void 0,m)})}createNodeMesh(e){let i=this.json,t=this,r=i.nodes[e];return r.mesh===void 0?null:t.getDependency("mesh",r.mesh).then(function(o){let s=t._getNodeRef(t.meshCache,r.mesh,o);return r.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let c=0,l=r.weights.length;c<l;c++)a.morphTargetInfluences[c]=r.weights[c]}),s})}loadNode(e){let i=this.json,t=this,r=i.nodes[e],o=t._loadNodeShallow(e),s=[],a=r.children||[];for(let l=0,d=a.length;l<d;l++)s.push(t.getDependency("node",a[l]));let c=r.skin===void 0?Promise.resolve(null):t.getDependency("skin",r.skin);return Promise.all([o,Promise.all(s),c]).then(function(l){let d=l[0],u=l[1],h=l[2];h!==null&&d.traverse(function(f){f.isSkinnedMesh&&f.bind(h,fee)});for(let f=0,p=u.length;f<p;f++)d.add(u[f]);return d})}_loadNodeShallow(e){let i=this.json,t=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];let o=i.nodes[e],s=o.name?r.createUniqueName(o.name):"",a=[],c=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&a.push(c),o.camera!==void 0&&a.push(r.getDependency("camera",o.camera).then(function(l){return r._getNodeRef(r.cameraCache,o.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),this.nodeCache[e]=Promise.all(a).then(function(l){let d;if(o.isBone===!0?d=new Ud:l.length>1?d=new Cr:l.length===1?d=l[0]:d=new Tt,d!==l[0])for(let u=0,h=l.length;u<h;u++)d.add(l[u]);if(o.name&&(d.userData.name=o.name,d.name=s),gc(d,o),o.extensions&&Kd(t,d,o),o.matrix!==void 0){let u=new Be;u.fromArray(o.matrix),d.applyMatrix4(u)}else o.translation!==void 0&&d.position.fromArray(o.translation),o.rotation!==void 0&&d.quaternion.fromArray(o.rotation),o.scale!==void 0&&d.scale.fromArray(o.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){let i=this.extensions,t=this.json.scenes[e],r=this,o=new Cr;t.name&&(o.name=r.createUniqueName(t.name)),gc(o,t),t.extensions&&Kd(i,o,t);let s=t.nodes||[],a=[];for(let c=0,l=s.length;c<l;c++)a.push(r.getDependency("node",s[c]));return Promise.all(a).then(function(c){for(let d=0,u=c.length;d<u;d++)o.add(c[d]);let l=d=>{let u=new Map;for(let[h,f]of r.associations)(h instanceof dn||h instanceof vn)&&u.set(h,f);return d.traverse(h=>{let f=r.associations.get(h);f!=null&&u.set(h,f)}),u};return r.associations=l(o),o})}_createAnimationTracks(e,i,t,r,o){let s=[],a=e.name?e.name:e.uuid,c=[];bl[o.path]===bl.weights?e.traverse(function(h){h.morphTargetInfluences&&c.push(h.name?h.name:h.uuid)}):c.push(a);let l;switch(bl[o.path]){case bl.weights:l=la;break;case bl.rotation:l=da;break;case bl.position:case bl.scale:l=ua;break;default:switch(t.itemSize){case 1:l=la;break;case 2:case 3:default:l=ua;break}break}let d=r.interpolation!==void 0?aee[r.interpolation]:Od,u=this._getArrayFromAccessor(t);for(let h=0,f=c.length;h<f;h++){let p=new l(c[h]+"."+bl[o.path],i.array,u,d);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(p),s.push(p)}return s}_getArrayFromAccessor(e){let i=e.array;if(e.normalized){let t=GD(i.constructor),r=new Float32Array(i.length);for(let o=0,s=i.length;o<s;o++)r[o]=i[o]*t;i=r}return i}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(t){let r=this instanceof da?zD:qy;return new r(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function mee(n,e,i){let t=e.attributes,r=new _n;if(t.POSITION!==void 0){let a=i.json.accessors[t.POSITION],c=a.min,l=a.max;if(c!==void 0&&l!==void 0){if(r.set(new S(c[0],c[1],c[2]),new S(l[0],l[1],l[2])),a.normalized){let d=GD(vf[a.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let o=e.targets;if(o!==void 0){let a=new S,c=new S;for(let l=0,d=o.length;l<d;l++){let u=o[l];if(u.POSITION!==void 0){let h=i.json.accessors[u.POSITION],f=h.min,p=h.max;if(f!==void 0&&p!==void 0){if(c.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),c.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),c.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),h.normalized){let b=GD(vf[h.componentType]);c.multiplyScalar(b)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;let s=new En;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=s}function j3(n,e,i){let t=e.attributes,r=[];function o(s,a){return i.getDependency("accessor",s).then(function(c){n.setAttribute(a,c)})}for(let s in t){let a=HD[s]||s.toLowerCase();a in n.attributes||r.push(o(t[s],a))}if(e.indices!==void 0&&!n.index){let s=i.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(s)}return Ri.workingColorSpace!==Nn&&"COLOR_0"in t&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Ri.workingColorSpace}" not supported.`),gc(n,e),mee(n,e,i),Promise.all(r).then(function(){return e.targets!==void 0?lee(n,e.targets,i):n})}var yf=class{setCrossOrigin(e){this.crossOrigin=e}setWithCredentials(e){this.withCredentials=e}createLoaderInstance(){let e=new this.clazz;return this.crossOrigin&&e.setCrossOrigin(this.crossOrigin),this.withCredentials!==void 0&&e.setWithCredentials(this.withCredentials),e}};var xf=(()=>{let e=class e extends yf{load(...t){return this.createLoaderInstance().loadAsync(...t)}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})();var wf=(()=>{let e=class e{set url(t){this._url=t,this.load()}get url(){return this._url}get onLoaded(){return this.onLoaded$||(this.onLoaded$=new nt),this.onLoaded$}get onProgress(){return this.onProgress$||(this.onProgress$=new nt),this.onProgress$}constructor(t,r){this.host=t,this.zone=r,this.initialized=!1,this.animationLoop=te(ga),this.proxy=Vy(),t.objRef=this.proxy}ngOnInit(){this.initialized=!0,this.load()}load(){return gi(this,null,function*(){if(!this.initialized)return;if(this._url===void 0)throw new Error("missing url");if(!this.proxy)return;let t=this._url,r=ml(this.onProgress$)?s=>{this.zone.run(()=>{this.onProgress$?.next(s)})}:void 0,o=yield this.zone.runOutsideAngular(()=>this.service.load(t,r));this.animationLoop.requestAnimationFrame(),this.proxy.objRef=this.getRefFromResponse(o),this.host.objRef=this.proxy,this.onLoaded$&&o!=null&&this.zone.run(()=>this.onLoaded$?.next(o))})}};e.\u0275fac=function(r){Qu()},e.\u0275dir=$e({type:e,inputs:{url:"url"},outputs:{onLoaded:"onLoaded",onProgress:"onProgress"}});let n=e;return n})();var $D=new WeakMap,Xy=class extends ir{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,i,t,r){let o=new tr(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,s=>{this.parse(s,i,r)},t,r)}parse(e,i,t=()=>{}){this.decodeDracoFile(e,i,null,null,Fn,t).catch(t)}decodeDracoFile(e,i,t,r,o=Nn,s=()=>{}){let a={attributeIDs:t||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!t,vertexColorSpace:o};return this.decodeGeometry(e,a).then(i).catch(s)}decodeGeometry(e,i){let t=JSON.stringify(i);if($D.has(e)){let c=$D.get(e);if(c.key===t)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r,o=this.workerNextTaskID++,s=e.byteLength,a=this._getWorker(o,s).then(c=>(r=c,new Promise((l,d)=>{r._callbacks[o]={resolve:l,reject:d},r.postMessage({type:"decode",id:o,taskConfig:i,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return a.catch(()=>!0).then(()=>{r&&o&&this._releaseTask(r,o)}),$D.set(e,{key:t,promise:a}),a}_createGeometry(e){let i=new bt;e.index&&i.setIndex(new hi(e.index.array,1));for(let t=0;t<e.attributes.length;t++){let r=e.attributes[t],o=r.name,s=r.array,a=r.itemSize,c=new hi(s,a);o==="color"&&(this._assignVertexColorSpace(c,r.vertexColorSpace),c.normalized=!(s instanceof Float32Array)),i.setAttribute(o,c)}return i}_assignVertexColorSpace(e,i){if(i!==Fn)return;let t=new pe;for(let r=0,o=e.count;r<o;r++)t.fromBufferAttribute(e,r).convertSRGBToLinear(),e.setXYZ(r,t.r,t.g,t.b)}_loadLibrary(e,i){let t=new tr(this.manager);return t.setPath(this.decoderPath),t.setResponseType(i),t.setWithCredentials(this.withCredentials),new Promise((r,o)=>{t.load(e,r,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",i=[];return e?i.push(this._loadLibrary("draco_decoder.js","text")):(i.push(this._loadLibrary("draco_wasm_wrapper.js","text")),i.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(i).then(t=>{let r=t[0];e||(this.decoderConfig.wasmBinary=t[1]);let o=pee.toString(),s=["/* draco decoder */",r,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(e,i){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(o){let s=o.data;switch(s.type){case"decode":r._callbacks[s.id].resolve(s);break;case"error":r._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,o){return r._taskLoad>o._taskLoad?-1:1});let t=this.workerPool[this.workerPool.length-1];return t._taskCosts[e]=i,t._taskLoad+=i,t})}_releaseTask(e,i){e._taskLoad-=e._taskCosts[i],delete e._callbacks[i],delete e._taskCosts[i]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function pee(){let n,e;onmessage=function(s){let a=s.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(d){n.onModuleLoaded=function(u){d({draco:u})},DracoDecoderModule(n)});break;case"decode":let c=a.buffer,l=a.taskConfig;e.then(d=>{let u=d.draco,h=new u.Decoder;try{let f=i(u,h,new Int8Array(c),l),p=f.attributes.map(b=>b.array.buffer);f.index&&p.push(f.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:f},p)}catch(f){console.error(f),self.postMessage({type:"error",id:a.id,error:f.message})}finally{u.destroy(h)}});break}};function i(s,a,c,l){let d=l.attributeIDs,u=l.attributeTypes,h,f,p=a.GetEncodedGeometryType(c);if(p===s.TRIANGULAR_MESH)h=new s.Mesh,f=a.DecodeArrayToMesh(c,c.byteLength,h);else if(p===s.POINT_CLOUD)h=new s.PointCloud,f=a.DecodeArrayToPointCloud(c,c.byteLength,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());let b={index:null,attributes:[]};for(let g in d){let m=self[u[g]],v,_;if(l.useUniqueIDs)_=d[g],v=a.GetAttributeByUniqueId(h,_);else{if(_=a.GetAttributeId(h,s[d[g]]),_===-1)continue;v=a.GetAttribute(h,_)}let y=r(s,a,h,g,m,v);g==="color"&&(y.vertexColorSpace=l.vertexColorSpace),b.attributes.push(y)}return p===s.TRIANGULAR_MESH&&(b.index=t(s,a,h)),s.destroy(h),b}function t(s,a,c){let d=c.num_faces()*3,u=d*4,h=s._malloc(u);a.GetTrianglesUInt32Array(c,u,h);let f=new Uint32Array(s.HEAPF32.buffer,h,d).slice();return s._free(h),{array:f,itemSize:1}}function r(s,a,c,l,d,u){let h=u.num_components(),p=c.num_points()*h,b=p*d.BYTES_PER_ELEMENT,g=o(s,d),m=s._malloc(b);a.GetAttributeDataArrayForAllPoints(c,u,g,b,m);let v=new d(s.HEAPF32.buffer,m,p).slice();return s._free(m),{name:l,array:v,itemSize:h}}function o(s,a){switch(a){case Float32Array:return s.DT_FLOAT32;case Int8Array:return s.DT_INT8;case Int16Array:return s.DT_INT16;case Int32Array:return s.DT_INT32;case Uint8Array:return s.DT_UINT8;case Uint16Array:return s.DT_UINT16;case Uint32Array:return s.DT_UINT32}}}var Zr=class extends yf{load(...e){return this.createLoaderInstance().load(...e)}};var _l=(()=>{let e=class e extends Zr{constructor(){super(...arguments),this.clazz=Xy,this.decoderPath="",this.reuseInstance=!0}setDecoderPath(t){this.decoderPath=t}setDecoderConfig(t){this.decoderConfig=t}setWorkerLimit(t){this.workerLimit=t}setReuseInstance(t){this.reuseInstance=t}createLoaderInstance(){if(this.reuseInstance&&this.instance)return this.instance;let t=super.createLoaderInstance();return t.setDecoderPath(this.decoderPath),this.decoderConfig&&t.setDecoderConfig(this.decoderConfig),this.workerLimit&&t.setWorkerLimit(this.workerLimit),this.reuseInstance&&(this.instance=t),t}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var bee=(()=>{let e=class e extends xf{constructor(t){super(),this.dracoLoaderService=t,this.clazz=$y}createLoaderInstance(){let t=super.createLoaderInstance();return t.setDRACOLoader(this.dracoLoaderService.createLoaderInstance()),t}};e.\u0275fac=function(r){return new(r||e)(de(_l))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Yn=(()=>{let e=class e extends wf{constructor(t,r,o){super(t,r),this.host=t,this.zone=r,this.service=o}getRefFromResponse(t){return t.scene}};e.\u0275fac=function(r){return new(r||e)(F(me,1),F(Qe),F(bee))},e.\u0275dir=$e({type:e,selectors:[["","loadGLTF",""]],features:[q]});let n=e;return n})();var vl=(()=>{let e=class e{constructor(t,r){this.engineService=t,this.animationLoopService=r}get beforeRender(){return this.engineService.beforeRender$}get onResize(){return this.engineService.resize$}set renderOnDemand(t){t?this.animationLoopService.stop():this.animationLoopService.start()}get renderOnDemand(){return!this.animationLoopService.isActive()}};e.\u0275fac=function(r){return new(r||e)(F(uo),F(ga))},e.\u0275dir=$e({type:e,selectors:[["","beforeRender",""],["","onResize",""],["","renderOnDemand",""]],inputs:{renderOnDemand:"renderOnDemand"},outputs:{beforeRender:"beforeRender",onResize:"onResize"}});let n=e;return n})();var N3=(()=>{let e=class e{constructor(){this.assetPath=an+"RobotExpressive.glb",this.states=["Idle","Walking","Running","Dance","Death","Sitting","Standing"],this.emotes=["Jump","Yes","No","Wave","Punch","ThumbsUp"],this.actions={}}onInit(t){this.animationMixer=new Kp(t.scene),t.scene.traverse(r=>{r.isMesh&&(r.castShadow=!0,r.receiveShadow=!0)});for(let r of t.animations){let o=this.animationMixer.clipAction(r);this.actions[r.name]=o,(this.emotes.indexOf(r.name)>=0||this.states.indexOf(r.name)>=4)&&(o.clampWhenFinished=!0,o.loop=jy)}this.activeAction=this.actions.Walking,this.activeAction.play()}beforeRender(t){this.animationMixer&&this.animationMixer.update(t.delta)}fadeToAction(t,r){this.previousAction=this.activeAction,this.activeAction=this.actions[t],this.previousAction&&this.previousAction!==this.activeAction&&this.previousAction.fadeOut(r),this.activeAction.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(r).play()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-robot"]],decls:1,vars:2,consts:[["loadGLTF","",3,"onLoaded","beforeRender","url","castShadow"]],template:function(r,o){r&1&&(H(0,"th-mesh",0),Le("onLoaded",function(a){return o.onInit(a)})("beforeRender",function(a){return o.beforeRender(a)}),J()),r&2&&P("url",o.assetPath)("castShadow",!0)},dependencies:[Ti,Yn,vl],encapsulation:2,changeDetection:0});let n=e;return n})();var Zy=(()=>{let e=class e{transform(t){return new Xh(...t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Bo({name:"fog",type:e,pure:!0});let n=e;return n})();var vee=["gridHelper"],yee=()=>["#e0e0e0"],xee=()=>["#e0e0e0",20,100],wee=()=>[45,2,.25,100],Mee=n=>[n,5,10],See=()=>[0,2,0],Ree=()=>["#ffffff","#444444"],Tee=()=>[0,20,0],Cee=()=>["#ffffff"],Eee=()=>[0,20,10],Dee=n=>[n,0,0],Aee=()=>[2e3,2e3],Iee=()=>({color:"#999999",depthWrite:!1}),Pee=()=>[200,40,"#000000","#000000"],B3=(()=>{let e=class e{constructor(){this.Math=Math}ngAfterViewInit(){let t=this.gridHelper?.objRef?.material;t&&(t.opacity=.2,t.transparent=!0)}onBeforeRender(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-animation-example"]],viewQuery:function(r,o){if(r&1&&Xt(vee,7),r&2){let s;at(s=ct())&&(o.gridHelper=s.first)}},decls:12,vars:37,consts:[["gridHelper",""],[3,"onRender","thStats","shadow"],[3,"background","fog"],[3,"args","position","lookAt"],[3,"args","position","intensity"],[3,"args","position","castShadow","intensity"],[3,"rotation","receiveShadow"],[3,"args"],[3,"args","receiveShadow"]],template:function(r,o){if(r&1){let s=Zt();H(0,"th-canvas",1),Le("onRender",function(){return ht(s),ft(o.onBeforeRender())}),H(1,"th-scene",2),Fi(2,"fog"),fe(3,"th-perspectiveCamera",3)(4,"th-hemisphereLight",4)(5,"th-directionalLight",5),H(6,"th-mesh",6),fe(7,"th-planeGeometry",7)(8,"th-meshPhongMaterial",7),J(),fe(9,"th-gridHelper",8,0)(11,"app-robot"),J()()}r&2&&(P("thStats",!0)("shadow",!0),j(),P("background",K(22,yee))("fog",Gi(2,20,K(23,xee))),j(2),P("args",K(24,wee))("position",vt(25,Mee,-5))("lookAt",K(27,See)),j(),P("args",K(28,Ree))("position",K(29,Tee))("intensity",3),j(),P("args",K(30,Cee))("position",K(31,Eee))("castShadow",!0)("intensity",3),j(),P("rotation",vt(32,Dee,-.5*o.Math.PI))("receiveShadow",!0),j(),P("args",K(34,Aee)),j(),P("args",K(35,Iee)),j(),P("args",K(36,Pee))("receiveShadow",!0))},dependencies:[Qt,Ir,dr,hf,Ti,Ut,lo,Xo,It,An,N3,Zy],encapsulation:2,changeDetection:0});let n=e;return n})();var kee=["*"],Di=(()=>{let e=class e extends ws{getType(){return sf}get isAmbientLight(){return this._objRef?.isAmbientLight}get type(){return this._objRef?.type}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-ambientLight"]],features:[ie([{provide:me,useExisting:ge(()=>e)}]),q],ngContentSelectors:kee,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Fee=["*"],_a=(()=>{let e=class e extends sn{getType(){return tn}get isMeshBasicMaterial(){return this._objRef?.isMeshBasicMaterial}set type(t){this._objRef&&(this._objRef.type=t)}get type(){return this._objRef?.type}set color(t){this._objRef&&(this._objRef.color=_e(this._objRef.color,t))}get color(){return this._objRef?.color}set map(t){this._objRef&&(this._objRef.map=t)}get map(){return this._objRef?.map}set lightMap(t){this._objRef&&(this._objRef.lightMap=t)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(t){this._objRef&&(this._objRef.lightMapIntensity=t)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set aoMap(t){this._objRef&&(this._objRef.aoMap=t)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(t){this._objRef&&(this._objRef.aoMapIntensity=t)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set specularMap(t){this._objRef&&(this._objRef.specularMap=t)}get specularMap(){return this._objRef?.specularMap}set alphaMap(t){this._objRef&&(this._objRef.alphaMap=t)}get alphaMap(){return this._objRef?.alphaMap}set envMap(t){this._objRef&&(this._objRef.envMap=t)}get envMap(){return this._objRef?.envMap}set envMapRotation(t){this._objRef&&(this._objRef.envMapRotation=_e(this._objRef.envMapRotation,t))}get envMapRotation(){return this._objRef?.envMapRotation}set combine(t){this._objRef&&(this._objRef.combine=t)}get combine(){return this._objRef?.combine}set reflectivity(t){this._objRef&&(this._objRef.reflectivity=t)}get reflectivity(){return this._objRef?.reflectivity}set refractionRatio(t){this._objRef&&(this._objRef.refractionRatio=t)}get refractionRatio(){return this._objRef?.refractionRatio}set wireframe(t){this._objRef&&(this._objRef.wireframe=t)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(t){this._objRef&&(this._objRef.wireframeLinewidth=t)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(t){this._objRef&&(this._objRef.wireframeLinecap=t)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(t){this._objRef&&(this._objRef.wireframeLinejoin=t)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set fog(t){this._objRef&&(this._objRef.fog=t)}get fog(){return this._objRef?.fog}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-meshBasicMaterial"]],inputs:{type:"type",color:"color",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",specularMap:"specularMap",alphaMap:"alphaMap",envMap:"envMap",envMapRotation:"envMapRotation",combine:"combine",reflectivity:"reflectivity",refractionRatio:"refractionRatio",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",fog:"fog"},features:[ie([{provide:sn,useExisting:ge(()=>e)}]),q],ngContentSelectors:Fee,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var jee=["*"],Jd=(()=>{let e=class e extends ni{getType(){return Zi}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-boxGeometry"]],features:[ie([{provide:ni,useExisting:ge(()=>e)}]),q],ngContentSelectors:jee,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Oee=()=>({color:"purple"}),Nee=()=>[75,2,.1,1e3],Lee=()=>[1,1,5],U3=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-basic-example"]],decls:7,vars:6,consts:[[3,"args"],[3,"args","position"]],template:function(r,o){r&1&&(H(0,"th-canvas")(1,"th-scene")(2,"th-mesh"),fe(3,"th-boxGeometry")(4,"th-meshBasicMaterial",0),J(),fe(5,"th-ambientLight")(6,"th-perspectiveCamera",1),J()()),r&2&&(j(4),P("args",K(3,Oee)),j(2),P("args",K(4,Nee))("position",K(5,Lee)))},dependencies:[Qt,Di,Ti,Ut,_a,Jd,It],encapsulation:2,changeDetection:0});let n=e;return n})();var V3={type:"change"},YD={type:"start"},z3={type:"end"},Qy=new ia,H3=new lr,Bee=Math.cos(70*st.DEG2RAD),Mf=class extends jn{constructor(e,i){super(),this.object=e,this.domElement=i,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new S,this.cursor=new S,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Ar.ROTATE,MIDDLE:Ar.DOLLY,RIGHT:Ar.PAN},this.touches={ONE:xs.ROTATE,TWO:xs.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(w){w.addEventListener("keydown",ze),this._domElementKeyEvents=w},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ze),this._domElementKeyEvents=null},this.saveState=function(){t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=function(){t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(V3),t.update(),o=r.NONE},this.update=function(){let w=new S,ce=new ii().setFromUnitVectors(e.up,new S(0,1,0)),Y=ce.clone().invert(),ue=new S,ke=new ii,Mt=new S,Gt=2*Math.PI;return function(Un=null){let Ii=t.object.position;w.copy(Ii).sub(t.target),w.applyQuaternion(ce),a.setFromVector3(w),t.autoRotate&&o===r.NONE&&V(x(Un)),t.enableDamping?(a.theta+=c.theta*t.dampingFactor,a.phi+=c.phi*t.dampingFactor):(a.theta+=c.theta,a.phi+=c.phi);let Vn=t.minAzimuthAngle,zn=t.maxAzimuthAngle;isFinite(Vn)&&isFinite(zn)&&(Vn<-Math.PI?Vn+=Gt:Vn>Math.PI&&(Vn-=Gt),zn<-Math.PI?zn+=Gt:zn>Math.PI&&(zn-=Gt),Vn<=zn?a.theta=Math.max(Vn,Math.min(zn,a.theta)):a.theta=a.theta>(Vn+zn)/2?Math.max(Vn,a.theta):Math.min(zn,a.theta)),a.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,a.phi)),a.makeSafe(),t.enableDamping===!0?t.target.addScaledVector(d,t.dampingFactor):t.target.add(d),t.target.sub(t.cursor),t.target.clampLength(t.minTargetRadius,t.maxTargetRadius),t.target.add(t.cursor);let go=!1;if(t.zoomToCursor&&R||t.object.isOrthographicCamera)a.radius=Te(a.radius);else{let bo=a.radius;a.radius=Te(a.radius*l),go=bo!=a.radius}if(w.setFromSpherical(a),w.applyQuaternion(Y),Ii.copy(t.target).add(w),t.object.lookAt(t.target),t.enableDamping===!0?(c.theta*=1-t.dampingFactor,c.phi*=1-t.dampingFactor,d.multiplyScalar(1-t.dampingFactor)):(c.set(0,0,0),d.set(0,0,0)),t.zoomToCursor&&R){let bo=null;if(t.object.isPerspectiveCamera){let Cc=w.length();bo=Te(Cc*l);let Pl=Cc-bo;t.object.position.addScaledVector(y,Pl),t.object.updateMatrixWorld(),go=!!Pl}else if(t.object.isOrthographicCamera){let Cc=new S(C.x,C.y,0);Cc.unproject(t.object);let Pl=t.object.zoom;t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/l)),t.object.updateProjectionMatrix(),go=Pl!==t.object.zoom;let kl=new S(C.x,C.y,0);kl.unproject(t.object),t.object.position.sub(kl).add(Cc),t.object.updateMatrixWorld(),bo=w.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),t.zoomToCursor=!1;bo!==null&&(this.screenSpacePanning?t.target.set(0,0,-1).transformDirection(t.object.matrix).multiplyScalar(bo).add(t.object.position):(Qy.origin.copy(t.object.position),Qy.direction.set(0,0,-1).transformDirection(t.object.matrix),Math.abs(t.object.up.dot(Qy.direction))<Bee?e.lookAt(t.target):(H3.setFromNormalAndCoplanarPoint(t.object.up,t.target),Qy.intersectPlane(H3,t.target))))}else if(t.object.isOrthographicCamera){let bo=t.object.zoom;t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/l)),bo!==t.object.zoom&&(t.object.updateProjectionMatrix(),go=!0)}return l=1,R=!1,go||ue.distanceToSquared(t.object.position)>s||8*(1-ke.dot(t.object.quaternion))>s||Mt.distanceToSquared(t.target)>s?(t.dispatchEvent(V3),ue.copy(t.object.position),ke.copy(t.object.quaternion),Mt.copy(t.target),!0):!1}}(),this.dispose=function(){t.domElement.removeEventListener("contextmenu",rt),t.domElement.removeEventListener("pointerdown",Ct),t.domElement.removeEventListener("pointercancel",E),t.domElement.removeEventListener("wheel",Me),t.domElement.removeEventListener("pointermove",k),t.domElement.removeEventListener("pointerup",E),t.domElement.getRootNode().removeEventListener("keydown",mt,{capture:!0}),t._domElementKeyEvents!==null&&(t._domElementKeyEvents.removeEventListener("keydown",ze),t._domElementKeyEvents=null)};let t=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},o=r.NONE,s=1e-6,a=new dl,c=new dl,l=1,d=new S,u=new z,h=new z,f=new z,p=new z,b=new z,g=new z,m=new z,v=new z,_=new z,y=new S,C=new z,R=!1,M=[],A={},T=!1;function x(w){return w!==null?2*Math.PI/60*t.autoRotateSpeed*w:2*Math.PI/60/60*t.autoRotateSpeed}function I(w){let ce=Math.abs(w*.01);return Math.pow(.95,t.zoomSpeed*ce)}function V(w){c.theta-=w}function W(w){c.phi-=w}let ee=function(){let w=new S;return function(Y,ue){w.setFromMatrixColumn(ue,0),w.multiplyScalar(-Y),d.add(w)}}(),ne=function(){let w=new S;return function(Y,ue){t.screenSpacePanning===!0?w.setFromMatrixColumn(ue,1):(w.setFromMatrixColumn(ue,0),w.crossVectors(t.object.up,w)),w.multiplyScalar(Y),d.add(w)}}(),B=function(){let w=new S;return function(Y,ue){let ke=t.domElement;if(t.object.isPerspectiveCamera){let Mt=t.object.position;w.copy(Mt).sub(t.target);let Gt=w.length();Gt*=Math.tan(t.object.fov/2*Math.PI/180),ee(2*Y*Gt/ke.clientHeight,t.object.matrix),ne(2*ue*Gt/ke.clientHeight,t.object.matrix)}else t.object.isOrthographicCamera?(ee(Y*(t.object.right-t.object.left)/t.object.zoom/ke.clientWidth,t.object.matrix),ne(ue*(t.object.top-t.object.bottom)/t.object.zoom/ke.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}}();function G(w){t.object.isPerspectiveCamera||t.object.isOrthographicCamera?l/=w:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function U(w){t.object.isPerspectiveCamera||t.object.isOrthographicCamera?l*=w:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function se(w,ce){if(!t.zoomToCursor)return;R=!0;let Y=t.domElement.getBoundingClientRect(),ue=w-Y.left,ke=ce-Y.top,Mt=Y.width,Gt=Y.height;C.x=ue/Mt*2-1,C.y=-(ke/Gt)*2+1,y.set(C.x,C.y,1).unproject(t.object).sub(t.object.position).normalize()}function Te(w){return Math.max(t.minDistance,Math.min(t.maxDistance,w))}function Ie(w){u.set(w.clientX,w.clientY)}function Ze(w){se(w.clientX,w.clientX),m.set(w.clientX,w.clientY)}function yt(w){p.set(w.clientX,w.clientY)}function Z(w){h.set(w.clientX,w.clientY),f.subVectors(h,u).multiplyScalar(t.rotateSpeed);let ce=t.domElement;V(2*Math.PI*f.x/ce.clientHeight),W(2*Math.PI*f.y/ce.clientHeight),u.copy(h),t.update()}function Ce(w){v.set(w.clientX,w.clientY),_.subVectors(v,m),_.y>0?G(I(_.y)):_.y<0&&U(I(_.y)),m.copy(v),t.update()}function We(w){b.set(w.clientX,w.clientY),g.subVectors(b,p).multiplyScalar(t.panSpeed),B(g.x,g.y),p.copy(b),t.update()}function N(w){se(w.clientX,w.clientY),w.deltaY<0?U(I(w.deltaY)):w.deltaY>0&&G(I(w.deltaY)),t.update()}function xe(w){let ce=!1;switch(w.code){case t.keys.UP:w.ctrlKey||w.metaKey||w.shiftKey?W(2*Math.PI*t.rotateSpeed/t.domElement.clientHeight):B(0,t.keyPanSpeed),ce=!0;break;case t.keys.BOTTOM:w.ctrlKey||w.metaKey||w.shiftKey?W(-2*Math.PI*t.rotateSpeed/t.domElement.clientHeight):B(0,-t.keyPanSpeed),ce=!0;break;case t.keys.LEFT:w.ctrlKey||w.metaKey||w.shiftKey?V(2*Math.PI*t.rotateSpeed/t.domElement.clientHeight):B(t.keyPanSpeed,0),ce=!0;break;case t.keys.RIGHT:w.ctrlKey||w.metaKey||w.shiftKey?V(-2*Math.PI*t.rotateSpeed/t.domElement.clientHeight):B(-t.keyPanSpeed,0),ce=!0;break}ce&&(w.preventDefault(),t.update())}function Ne(w){if(M.length===1)u.set(w.pageX,w.pageY);else{let ce=Ht(w),Y=.5*(w.pageX+ce.x),ue=.5*(w.pageY+ce.y);u.set(Y,ue)}}function Ue(w){if(M.length===1)p.set(w.pageX,w.pageY);else{let ce=Ht(w),Y=.5*(w.pageX+ce.x),ue=.5*(w.pageY+ce.y);p.set(Y,ue)}}function O(w){let ce=Ht(w),Y=w.pageX-ce.x,ue=w.pageY-ce.y,ke=Math.sqrt(Y*Y+ue*ue);m.set(0,ke)}function ye(w){t.enableZoom&&O(w),t.enablePan&&Ue(w)}function Re(w){t.enableZoom&&O(w),t.enableRotate&&Ne(w)}function Pe(w){if(M.length==1)h.set(w.pageX,w.pageY);else{let Y=Ht(w),ue=.5*(w.pageX+Y.x),ke=.5*(w.pageY+Y.y);h.set(ue,ke)}f.subVectors(h,u).multiplyScalar(t.rotateSpeed);let ce=t.domElement;V(2*Math.PI*f.x/ce.clientHeight),W(2*Math.PI*f.y/ce.clientHeight),u.copy(h)}function Ae(w){if(M.length===1)b.set(w.pageX,w.pageY);else{let ce=Ht(w),Y=.5*(w.pageX+ce.x),ue=.5*(w.pageY+ce.y);b.set(Y,ue)}g.subVectors(b,p).multiplyScalar(t.panSpeed),B(g.x,g.y),p.copy(b)}function Fe(w){let ce=Ht(w),Y=w.pageX-ce.x,ue=w.pageY-ce.y,ke=Math.sqrt(Y*Y+ue*ue);v.set(0,ke),_.set(0,Math.pow(v.y/m.y,t.zoomSpeed)),G(_.y),m.copy(v);let Mt=(w.pageX+ce.x)*.5,Gt=(w.pageY+ce.y)*.5;se(Mt,Gt)}function Ke(w){t.enableZoom&&Fe(w),t.enablePan&&Ae(w)}function Xe(w){t.enableZoom&&Fe(w),t.enableRotate&&Pe(w)}function Ct(w){t.enabled!==!1&&(M.length===0&&(t.domElement.setPointerCapture(w.pointerId),t.domElement.addEventListener("pointermove",k),t.domElement.addEventListener("pointerup",E)),!Je(w)&&(li(w),w.pointerType==="touch"?Et(w):re(w)))}function k(w){t.enabled!==!1&&(w.pointerType==="touch"?Oe(w):Se(w))}function E(w){switch(Pt(w),M.length){case 0:t.domElement.releasePointerCapture(w.pointerId),t.domElement.removeEventListener("pointermove",k),t.domElement.removeEventListener("pointerup",E),t.dispatchEvent(z3),o=r.NONE;break;case 1:let ce=M[0],Y=A[ce];Et({pointerId:ce,pageX:Y.x,pageY:Y.y});break}}function re(w){let ce;switch(w.button){case 0:ce=t.mouseButtons.LEFT;break;case 1:ce=t.mouseButtons.MIDDLE;break;case 2:ce=t.mouseButtons.RIGHT;break;default:ce=-1}switch(ce){case Ar.DOLLY:if(t.enableZoom===!1)return;Ze(w),o=r.DOLLY;break;case Ar.ROTATE:if(w.ctrlKey||w.metaKey||w.shiftKey){if(t.enablePan===!1)return;yt(w),o=r.PAN}else{if(t.enableRotate===!1)return;Ie(w),o=r.ROTATE}break;case Ar.PAN:if(w.ctrlKey||w.metaKey||w.shiftKey){if(t.enableRotate===!1)return;Ie(w),o=r.ROTATE}else{if(t.enablePan===!1)return;yt(w),o=r.PAN}break;default:o=r.NONE}o!==r.NONE&&t.dispatchEvent(YD)}function Se(w){switch(o){case r.ROTATE:if(t.enableRotate===!1)return;Z(w);break;case r.DOLLY:if(t.enableZoom===!1)return;Ce(w);break;case r.PAN:if(t.enablePan===!1)return;We(w);break}}function Me(w){t.enabled===!1||t.enableZoom===!1||o!==r.NONE||(w.preventDefault(),t.dispatchEvent(YD),N(De(w)),t.dispatchEvent(z3))}function De(w){let ce=w.deltaMode,Y={clientX:w.clientX,clientY:w.clientY,deltaY:w.deltaY};switch(ce){case 1:Y.deltaY*=16;break;case 2:Y.deltaY*=100;break}return w.ctrlKey&&!T&&(Y.deltaY*=10),Y}function mt(w){w.key==="Control"&&(T=!0,t.domElement.getRootNode().addEventListener("keyup",Ge,{passive:!0,capture:!0}))}function Ge(w){w.key==="Control"&&(T=!1,t.domElement.getRootNode().removeEventListener("keyup",Ge,{passive:!0,capture:!0}))}function ze(w){t.enabled===!1||t.enablePan===!1||xe(w)}function Et(w){switch(zt(w),M.length){case 1:switch(t.touches.ONE){case xs.ROTATE:if(t.enableRotate===!1)return;Ne(w),o=r.TOUCH_ROTATE;break;case xs.PAN:if(t.enablePan===!1)return;Ue(w),o=r.TOUCH_PAN;break;default:o=r.NONE}break;case 2:switch(t.touches.TWO){case xs.DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;ye(w),o=r.TOUCH_DOLLY_PAN;break;case xs.DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;Re(w),o=r.TOUCH_DOLLY_ROTATE;break;default:o=r.NONE}break;default:o=r.NONE}o!==r.NONE&&t.dispatchEvent(YD)}function Oe(w){switch(zt(w),o){case r.TOUCH_ROTATE:if(t.enableRotate===!1)return;Pe(w),t.update();break;case r.TOUCH_PAN:if(t.enablePan===!1)return;Ae(w),t.update();break;case r.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;Ke(w),t.update();break;case r.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;Xe(w),t.update();break;default:o=r.NONE}}function rt(w){t.enabled!==!1&&w.preventDefault()}function li(w){M.push(w.pointerId)}function Pt(w){delete A[w.pointerId];for(let ce=0;ce<M.length;ce++)if(M[ce]==w.pointerId){M.splice(ce,1);return}}function Je(w){for(let ce=0;ce<M.length;ce++)if(M[ce]==w.pointerId)return!0;return!1}function zt(w){let ce=A[w.pointerId];ce===void 0&&(ce=new z,A[w.pointerId]=ce),ce.set(w.pageX,w.pageY)}function Ht(w){let ce=w.pointerId===M[0]?M[1]:M[0];return A[ce]}t.domElement.addEventListener("contextmenu",rt),t.domElement.addEventListener("pointerdown",Ct),t.domElement.addEventListener("pointercancel",E),t.domElement.addEventListener("wheel",Me,{passive:!1}),t.domElement.getRootNode().addEventListener("keydown",mt,{passive:!0,capture:!0}),this.update()}};var nn=(()=>{let e=class e extends Yr{constructor(t,r){super(),this._camera=t,this.canvas=r,this.renderLoop=te(ga)}createThreeInstance(t){t||(t=[this._camera.objRef,this.canvas?.elementRef.nativeElement]);let r=super.createThreeInstance(t);return this.patchDispatchEvent(r),this.subscribeControlUpdater(r),r}patchDispatchEvent(t){if(t.dispatchEvent){this.origDispatchEventMethod=t.dispatchEvent;let r=this.origDispatchEventMethod;t.dispatchEvent=o=>{r.call(t,o),this.renderLoop.requestAnimationFrame()}}}ngOnDestroy(){super.ngOnDestroy(),this.unpatchDispatchEvent(),this.unsubscribeControlUpdater()}unpatchDispatchEvent(){this.origDispatchEventMethod&&this._objRef&&(this._objRef.dispatchEvent=this.origDispatchEventMethod)}subscribeControlUpdater(t){t.update!==void 0&&(this.beforeRenderSubscription=this.renderLoop.beforeRender$.subscribe(r=>{t.update(r.delta)}))}unsubscribeControlUpdater(){this.beforeRenderSubscription&&this.beforeRenderSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(F(me),F(It))},e.\u0275cmp=L({type:e,selectors:[["th-abs-control"]],features:[q],decls:0,vars:0,template:function(r,o){},encapsulation:2});let n=e;return n})();var Uee=["*"],In=(()=>{let e=class e extends nn{getType(){return Mf}set object(t){this._objRef&&(this._objRef.object=t)}get object(){return this._objRef?.object}set domElement(t){this._objRef&&(this._objRef.domElement=t)}get domElement(){return this._objRef?.domElement}set enabled(t){this._objRef&&(this._objRef.enabled=t)}get enabled(){return this._objRef?.enabled}set target(t){this._objRef&&(this._objRef.target=_e(this._objRef.target,t))}get target(){return this._objRef?.target}set center(t){this._objRef&&(this._objRef.center=_e(this._objRef.center,t))}get center(){return this._objRef?.center}set cursor(t){this._objRef&&(this._objRef.cursor=_e(this._objRef.cursor,t))}get cursor(){return this._objRef?.cursor}set minDistance(t){this._objRef&&(this._objRef.minDistance=t)}get minDistance(){return this._objRef?.minDistance}set maxDistance(t){this._objRef&&(this._objRef.maxDistance=t)}get maxDistance(){return this._objRef?.maxDistance}set minZoom(t){this._objRef&&(this._objRef.minZoom=t)}get minZoom(){return this._objRef?.minZoom}set maxZoom(t){this._objRef&&(this._objRef.maxZoom=t)}get maxZoom(){return this._objRef?.maxZoom}set minTargetRadius(t){this._objRef&&(this._objRef.minTargetRadius=t)}get minTargetRadius(){return this._objRef?.minTargetRadius}set maxTargetRadius(t){this._objRef&&(this._objRef.maxTargetRadius=t)}get maxTargetRadius(){return this._objRef?.maxTargetRadius}set minPolarAngle(t){this._objRef&&(this._objRef.minPolarAngle=t)}get minPolarAngle(){return this._objRef?.minPolarAngle}set maxPolarAngle(t){this._objRef&&(this._objRef.maxPolarAngle=t)}get maxPolarAngle(){return this._objRef?.maxPolarAngle}set minAzimuthAngle(t){this._objRef&&(this._objRef.minAzimuthAngle=t)}get minAzimuthAngle(){return this._objRef?.minAzimuthAngle}set maxAzimuthAngle(t){this._objRef&&(this._objRef.maxAzimuthAngle=t)}get maxAzimuthAngle(){return this._objRef?.maxAzimuthAngle}set enableDamping(t){this._objRef&&(this._objRef.enableDamping=t)}get enableDamping(){return this._objRef?.enableDamping}set dampingFactor(t){this._objRef&&(this._objRef.dampingFactor=t)}get dampingFactor(){return this._objRef?.dampingFactor}set enableZoom(t){this._objRef&&(this._objRef.enableZoom=t)}get enableZoom(){return this._objRef?.enableZoom}set zoomSpeed(t){this._objRef&&(this._objRef.zoomSpeed=t)}get zoomSpeed(){return this._objRef?.zoomSpeed}set zoomToCursor(t){this._objRef&&(this._objRef.zoomToCursor=t)}get zoomToCursor(){return this._objRef?.zoomToCursor}set enableRotate(t){this._objRef&&(this._objRef.enableRotate=t)}get enableRotate(){return this._objRef?.enableRotate}set rotateSpeed(t){this._objRef&&(this._objRef.rotateSpeed=t)}get rotateSpeed(){return this._objRef?.rotateSpeed}set enablePan(t){this._objRef&&(this._objRef.enablePan=t)}get enablePan(){return this._objRef?.enablePan}set panSpeed(t){this._objRef&&(this._objRef.panSpeed=t)}get panSpeed(){return this._objRef?.panSpeed}set screenSpacePanning(t){this._objRef&&(this._objRef.screenSpacePanning=t)}get screenSpacePanning(){return this._objRef?.screenSpacePanning}set keyPanSpeed(t){this._objRef&&(this._objRef.keyPanSpeed=t)}get keyPanSpeed(){return this._objRef?.keyPanSpeed}set autoRotate(t){this._objRef&&(this._objRef.autoRotate=t)}get autoRotate(){return this._objRef?.autoRotate}set autoRotateSpeed(t){this._objRef&&(this._objRef.autoRotateSpeed=t)}get autoRotateSpeed(){return this._objRef?.autoRotateSpeed}set keys(t){this._objRef&&(this._objRef.keys=t)}get keys(){return this._objRef?.keys}set mouseButtons(t){this._objRef&&(this._objRef.mouseButtons=t)}get mouseButtons(){return this._objRef?.mouseButtons}set touches(t){this._objRef&&(this._objRef.touches=t)}get touches(){return this._objRef?.touches}set target0(t){this._objRef&&(this._objRef.target0=_e(this._objRef.target0,t))}get target0(){return this._objRef?.target0}set position0(t){this._objRef&&(this._objRef.position0=_e(this._objRef.position0,t))}get position0(){return this._objRef?.position0}set zoom0(t){this._objRef&&(this._objRef.zoom0=t)}get zoom0(){return this._objRef?.zoom0}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-orbitControls"]],inputs:{object:"object",domElement:"domElement",enabled:"enabled",target:"target",center:"center",cursor:"cursor",minDistance:"minDistance",maxDistance:"maxDistance",minZoom:"minZoom",maxZoom:"maxZoom",minTargetRadius:"minTargetRadius",maxTargetRadius:"maxTargetRadius",minPolarAngle:"minPolarAngle",maxPolarAngle:"maxPolarAngle",minAzimuthAngle:"minAzimuthAngle",maxAzimuthAngle:"maxAzimuthAngle",enableDamping:"enableDamping",dampingFactor:"dampingFactor",enableZoom:"enableZoom",zoomSpeed:"zoomSpeed",zoomToCursor:"zoomToCursor",enableRotate:"enableRotate",rotateSpeed:"rotateSpeed",enablePan:"enablePan",panSpeed:"panSpeed",screenSpacePanning:"screenSpacePanning",keyPanSpeed:"keyPanSpeed",autoRotate:"autoRotate",autoRotateSpeed:"autoRotateSpeed",keys:"keys",mouseButtons:"mouseButtons",touches:"touches",target0:"target0",position0:"position0",zoom0:"zoom0"},features:[ie([{provide:nn,useExisting:ge(()=>e)}]),q],ngContentSelectors:Uee,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Vee=["*"],ur=(()=>{let e=class e extends ws{getType(){return cl}get isPointLight(){return this._objRef?.isPointLight}set type(t){this._objRef&&(this._objRef.type=t)}get type(){return this._objRef?.type}set intensity(t){this._objRef&&(this._objRef.intensity=t)}get intensity(){return this._objRef?.intensity}set distance(t){this._objRef&&(this._objRef.distance=t)}get distance(){return this._objRef?.distance}set castShadow(t){this._objRef&&(this._objRef.castShadow=t)}get castShadow(){return this._objRef?.castShadow}set decay(t){this._objRef&&(this._objRef.decay=t)}get decay(){return this._objRef?.decay}set shadow(t){this._objRef&&(this._objRef.shadow=t)}get shadow(){return this._objRef?.shadow}set power(t){this._objRef&&(this._objRef.power=t)}get power(){return this._objRef?.power}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-pointLight"]],inputs:{type:"type",intensity:"intensity",distance:"distance",castShadow:"castShadow",decay:"decay",shadow:"shadow",power:"power"},features:[ie([{provide:me,useExisting:ge(()=>e)}]),q],ngContentSelectors:Vee,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Zo=(()=>{let e=class e{get onMouseEnter(){return this.mouseEnter||(this.mouseEnter=new nt),this.mouseEnter}get onMouseExit(){return this.mouseExit||(this.mouseExit=new nt),this.mouseExit}get onClick(){return this.click||(this.click=new nt),this.click}get onPointerDown(){return this.pointerDown||(this.pointerDown=new nt),this.pointerDown}get onPointerUp(){return this.pointerUp||(this.pointerUp=new nt),this.pointerUp}constructor(t,r){this.host=t,this.raycasterService=r,this.emitOnMouseEnter=this.emitOnMouseEnter.bind(this),this.emitOnMouseExit=this.emitOnMouseExit.bind(this),this.emitOnClick=this.emitOnClick.bind(this)}ngAfterViewInit(){this.subscribeEvents()}subscribeEvents(){this.raycasterService.addEventTarget(this)}unSubscribeEvents(){this.raycasterService.removeEventTarget(this)}emitOnMouseExit(){this.mouseExit?.emit({component:this.host,type:"mouseExit"})}emitOnMouseEnter(t){this.mouseEnter?.emit(t)}emitOnClick(t){this.click?.emit(t)}emitOnPointerDown(t){this.pointerDown?.emit(t)}emitOnPointerUp(t){this.pointerUp?.emit(t)}ngOnDestroy(){this.unSubscribeEvents()}};e.\u0275fac=function(r){return new(r||e)(F(me,1),F(mc))},e.\u0275dir=$e({type:e,selectors:[["","onClick",""],["","onMouseEnter",""],["","onMouseExit",""],["","onPointerDown",""],["","onPointerUp",""]],outputs:{onMouseEnter:"onMouseEnter",onMouseExit:"onMouseExit",onClick:"onClick",onPointerDown:"onPointerDown",onPointerUp:"onPointerUp"}});let n=e;return n})();var zee=()=>[2,2,2],Hee=()=>[1,1,1],Gee=()=>[10,10],G3=()=>[10,10,10],Wee=()=>[45,2,.1,100],$ee=()=>[0,0,0],W3=(()=>{let e=class e{constructor(){this.selected=!1,this.glbPath=`${an}DamagedHelmet.glb`}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-controls-example"]],decls:8,vars:17,consts:[[3,"thStats"],[3,"intensity"],["loadGLTF","",3,"onClick","url","scale"],[3,"args"],[3,"position","intensity"],[3,"args","position","lookAt"]],template:function(r,o){r&1&&(H(0,"th-canvas",0)(1,"th-scene"),fe(2,"th-ambientLight",1),H(3,"th-object3D",2),Le("onClick",function(){return o.selected=!o.selected}),J(),fe(4,"th-gridHelper",3)(5,"th-pointLight",4),H(6,"th-perspectiveCamera",5),fe(7,"th-orbitControls"),J()()()),r&2&&(P("thStats",!0),j(2),P("intensity",3),j(),P("url",o.glbPath)("scale",o.selected?K(10,zee):K(11,Hee)),j(),P("args",K(12,Gee)),j(),P("position",K(13,G3))("intensity",3),j(),P("args",K(14,Wee))("position",K(15,G3))("lookAt",K(16,$ee)))},dependencies:[In,Qt,me,Ir,Di,ur,Ut,It,Yn,Zo,An],encapsulation:2,changeDetection:0});let n=e;return n})();var qee=()=>[0,1,0],Xee=()=>[10,10],$3=()=>[10,10,10],Yee=()=>[45,2,.1,100],Zee=()=>[0,0,0],q3=(()=>{let e=class e{constructor(t){this.cdref=t,this.modelScale=[1,1,1],this.rotation=[0,0,0],this.modelUrl1=`${an}DamagedHelmet.glb`,this.modelUrl2=`${an}BoomBox.glb`,this.modelUrl=this.toggleModel(),this.intervalHandle=window.setInterval(()=>this.toggleModel(),3e3)}toggleModel(){return this.modelUrl!==this.modelUrl1?this.modelUrl=this.modelUrl1:this.modelUrl=this.modelUrl2,this.cdref.markForCheck(),this.modelUrl}onLoaded(){this.modelUrl!==this.modelUrl1?this.modelScale=[100,100,100]:this.modelScale=[1,1,1]}onRefChange(t){}onBeforeRender(){this.rotation=[0,this.rotation[1]+.01,0]}ngOnDestroy(){window.clearInterval(this.intervalHandle)}};e.\u0275fac=function(r){return new(r||e)(F(Wi))},e.\u0275cmp=L({type:e,selectors:[["app-dynamic-loader-example"]],decls:7,vars:17,consts:[[3,"onRender"],[3,"intensity"],["loadGLTF","",3,"onLoaded","objRef$","url","scale","rotation","position"],[3,"args"],[3,"position","intensity"],[3,"args","position","lookAt"]],template:function(r,o){r&1&&(H(0,"th-canvas",0),Le("onRender",function(){return o.onBeforeRender()}),H(1,"th-scene"),fe(2,"th-ambientLight",1),H(3,"th-object3D",2),Le("onLoaded",function(){return o.onLoaded()})("objRef$",function(a){return o.onRefChange(a)}),J(),fe(4,"th-gridHelper",3)(5,"th-pointLight",4)(6,"th-perspectiveCamera",5),J()()),r&2&&(j(2),P("intensity",3),j(),P("url",o.modelUrl)("scale",o.modelScale)("rotation",o.rotation)("position",K(11,qee)),j(),P("args",K(12,Xee)),j(),P("position",K(13,$3))("intensity",3),j(),P("args",K(14,Yee))("position",K(15,$3))("lookAt",K(16,Zee)))},dependencies:[Qt,me,Ir,Di,ur,Ut,It,Yn],encapsulation:2});let n=e;return n})();var X3=(()=>{let e=class e{transform(t,r){return t.bind(r)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Bo({name:"bind",type:e,pure:!0});let n=e;return n})();var Kee=()=>[10,10],Y3=()=>[10,10,10],Jee=()=>[45,2,.1,100],ete=()=>[0,0,0],tte=(n,e)=>({change:n,end:e});function ite(n,e){if(n&1&&(H(0,"li"),kt(1),J()),n&2){let i=e.$implicit;j(),$s(" ",i," ")}}var Z3=(()=>{let e=class e{constructor(t){this.cdref=t,this.id="CID",this.changes=[],this.rotation=[0,0,0],this.position=[0,1,0],this.assetPath=`${an}DamagedHelmet.glb`,this.onOrbitControlEnd=()=>{this.pushToChangesArray(`${this.id}: orbit control end`)},window.setInterval(()=>{this.rotation=[0,this.rotation[1]+.05,0],this.cdref.markForCheck()},1500),window.setInterval(()=>{this.position=[0,(this.position[1]+1)%5,0],this.cdref.markForCheck()},3e3)}logUpdates(t){this.pushToChangesArray(Object.keys(t).toString())}onLoaded(){this.changes.push("Model loaded")}onOrbitControlChange(){this.pushToChangesArray(`${this.id}: orbit control change`)}pushToChangesArray(t){this.changes.length>=20&&this.changes.shift(),this.changes.push(t)}};e.\u0275fac=function(r){return new(r||e)(F(Wi))},e.\u0275cmp=L({type:e,selectors:[["app-events-example"]],decls:14,vars:23,consts:[[3,"intensity"],["loadGLTF","",3,"onUpdate","onLoaded","url","rotation","position"],[3,"args"],[3,"position","intensity"],[3,"args","position","lookAt"],[3,"threeEvents"],[1,"change-list"],[4,"ngFor","ngForOf"]],template:function(r,o){r&1&&(H(0,"th-canvas")(1,"th-scene"),fe(2,"th-ambientLight",0),H(3,"th-object3D",1),Le("onUpdate",function(a){return o.logUpdates(a)})("onLoaded",function(){return o.onLoaded()}),J(),fe(4,"th-gridHelper",2)(5,"th-pointLight",3),H(6,"th-perspectiveCamera",4),fe(7,"th-orbitControls",5),Fi(8,"bind"),J()()(),H(9,"div",6)(10,"h1"),kt(11,"Updates"),J(),H(12,"ol"),Vt(13,ite,2,1,"li",7),J()()),r&2&&(j(2),P("intensity",3),j(),P("url",o.assetPath)("rotation",o.rotation)("position",o.position),j(),P("args",K(15,Kee)),j(),P("position",K(16,Y3))("intensity",3),j(),P("args",K(17,Jee))("position",K(18,Y3))("lookAt",K(19,ete)),j(),P("threeEvents",$n(20,tte,Oj(8,12,o.onOrbitControlChange,o),o.onOrbitControlEnd)),j(6),P("ngForOf",o.changes))},dependencies:[to,In,Qt,me,Ir,Di,ur,Ut,It,Yn,X3],styles:[".change-list[_ngcontent-%COMP%]{padding:1em;box-shadow:0 4px 8px #0003;transition:.3s}[_nghost-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr)}"],changeDetection:0});let n=e;return n})();var yl={name:"ngx-three",version:"0.35.0",scripts:{ng:"ng",start:"ng serve",build:"ng build ngx-three","build:prod":"ng build ngx-three --configuration production","build:demo":"ng build ngx-three-demo --configuration production --base-href /ngx-three/",test:"ng test","test-headless":"ng test --watch=false --browsers=ChromeHeadless",lint:"ng lint",e2e:"ng e2e","copy:docs":"(cp README.md dist/ngx-three/ || copy README.md dist\\ngx-three)",package:"ng build --configuration production ngx-three && npm run copy:docs",format:'prettier-eslint --write "{,!(node_modules|dist)/**/}*.{ts,tsx}"'},private:!0,dependencies:{"@angular/animations":"^17.3.7","@angular/cdk":"^17.3.7","@angular/common":"^17.3.7","@angular/compiler":"^17.3.7","@angular/core":"^17.3.7","@angular/forms":"^17.3.7","@angular/material":"^17.3.7","@angular/platform-browser":"^17.3.7","@angular/platform-browser-dynamic":"^17.3.7","@angular/router":"^17.3.7","@stackblitz/sdk":"^1.9.0","@types/webxr":"^0.5.5","highlight.js":"^11.9.0","lil-gui":"^0.18.2","ngx-highlightjs":"^11.0.0-beta.1","normalize.css":"^8.0.1",rxjs:"~7.8.1","simplex-noise":"^4.0.1",three:"~0.165.0",tslib:"^2.6.2","zone.js":"~0.14.5"},devDependencies:{"@angular-devkit/build-angular":"^17.3.6","@angular-eslint/builder":"~17.3.0","@angular-eslint/eslint-plugin":"~17.3.0","@angular-eslint/eslint-plugin-template":"~17.3.0","@angular-eslint/schematics":"^17.3.0","@angular-eslint/template-parser":"~17.3.0","@angular/cli":"^17.3.6","@angular/compiler-cli":"^17.3.7","@types/jasmine":"^4.3.5","@types/node":"^20.5.3","@types/three":"^0.165.0","@typescript-eslint/eslint-plugin":"^7.2.0","@typescript-eslint/parser":"^7.2.0",acorn:">=8",eslint:"^8.57.0","eslint-plugin-import":"^2.28.1","eslint-plugin-jsdoc":"^46.5.0","eslint-plugin-prefer-arrow":"^1.2.3","jasmine-core":"^5.1.0","jasmine-spec-reporter":"^7.0.0",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","ng-packagr":"^17.3.0",prettier:"^3.0.2","prettier-eslint":"^15.0.1","prettier-eslint-cli":"^7.1.0","ts-node":"^10.9.1",typescript:"^5.4.5","utility-types":"^3.10.0"}};var ZD=`
import "zone.js";`;function Q3(n,e){return gi(this,null,function*(){let i=e1(n),t=Rf(i),r=JD(t),o={"package.json":ote(),"src/index.html":{content:KD(r)},"src/main.ts":{content:QD(t,e)},"src/polyfills.ts":{content:ZD},"src/assets.ts":{content:`export const ASSET_PATH = '${Wy}';`}};yield rte(n,o),fetch("https://codesandbox.io/api/v1/sandboxes/define?json=1",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({files:o})}).then(s=>s.json()).then(s=>window.open(`https://codesandbox.io/s/${s.sandbox_id}`,"_blank"))})}function rte(n,e){return Promise.all(n.map(i=>fetch(i).then(t=>gi(this,null,function*(){e[`src/app/${Rf(i)}`]={content:yield t.text()}}))))}function ote(){return{content:{main:"src/main.ts",dependencies:ve({"ngx-three":"latest","@types/three":yl.devDependencies["@types/three"]},yl.dependencies),devDependencies:ve({},yl.devDependencies)}}}function Rf(n){return n.replace(/^.*[\\\/]/,"")}function QD(n,e){let i=ate(e)??ste(n),t=cte(e,i);return`
            import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';
            import { NgModule } from '@angular/core';
            import { BrowserModule } from '@angular/platform-browser';
            import { NgxThreeModule } from 'ngx-three';
            import { FormsModule } from '@angular/forms';
            import { ${t} } from './app/${n.replace(".ts","")}';

            @NgModule({
                imports: [
                    BrowserModule,
                    NgxThreeModule,
                    FormsModule
                ],
                providers: [],
                declarations: [${t}],
                bootstrap: [${i}]
            })
            export class AppModule {}

            platformBrowserDynamic().bootstrapModule(AppModule)
            .catch(err => console.log(err));
            `}function KD(n){return`
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>NgxThreeDemo</title>
        <base href="/" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" type="image/x-icon" href="favicon.ico" />
    </head>
    <body>
        <${n}></${n}>
    </body>
    </html>
    `}function ste(n){return n.replace(".ts","").replace(/(?:^\w|[A-Z]|\b\w)/g,(e,i)=>e.toUpperCase()).replace(/[-.]/g,"")}function JD(n){return"app-"+n.replace(".component.ts","")}function e1(n){for(let e of n)if(e.endsWith(".ts"))return e;return""}function K3(n){for(let e of n)if(e.endsWith(".html"))return e}function ate(n){if(n&&n.length>0)return n[0]}function cte(n,e){return n&&n.length>0?n.join(","):e}var lte="https://stackblitz.com",J3=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],dte=["project","search","ports","settings"],ute=["light","dark"],hte=["editor","preview"],eB={clickToLoad:n=>Tf("ctl",n),devToolsHeight:n=>tB("devtoolsheight",n),forceEmbedLayout:n=>Tf("embed",n),hideDevTools:n=>Tf("hidedevtools",n),hideExplorer:n=>Tf("hideExplorer",n),hideNavigation:n=>Tf("hideNavigation",n),openFile:n=>iB("file",n),showSidebar:n=>fte("showSidebar",n),sidebarView:n=>t1("sidebarView",n,dte),startScript:n=>iB("startScript",n),terminalHeight:n=>tB("terminalHeight",n),theme:n=>t1("theme",n,ute),view:n=>t1("view",n,hte),zenMode:n=>Tf("zenMode",n)};function nB(n={}){let e=Object.entries(n).map(([i,t])=>t!=null&&eB.hasOwnProperty(i)?eB[i](t):"").filter(Boolean);return e.length?`?${e.join("&")}`:""}function Tf(n,e){return e===!0?`${n}=1`:""}function fte(n,e){return typeof e=="boolean"?`${n}=${e?"1":"0"}`:""}function tB(n,e){if(typeof e=="number"&&!Number.isNaN(e)){let i=Math.min(100,Math.max(0,e));return`${n}=${encodeURIComponent(Math.round(i))}`}return""}function t1(n,e="",i=[]){return i.includes(e)?`${n}=${encodeURIComponent(e)}`:""}function iB(n,e){return(Array.isArray(e)?e:[e]).filter(t=>typeof t=="string"&&t.trim()!=="").map(t=>`${n}=${encodeURIComponent(t)}`).join("&")}function rB(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function o1(n,e){return`${oB(e)}${n}${nB(e)}`}function s1(n,e){let i={forceEmbedLayout:!0};return e&&typeof e=="object"&&Object.assign(i,e),`${oB(i)}${n}${nB(i)}`}function oB(n={}){return(typeof n.origin=="string"?n.origin:lte).replace(/\/$/,"")}function a1(n,e,i){if(!e||!n||!n.parentNode)throw new Error("Invalid Element");n.id&&(e.id=n.id),n.className&&(e.className=n.className),mte(e,i),n.replaceWith(e)}function c1(n){if(typeof n=="string"){let e=document.getElementById(n);if(!e)throw new Error(`Could not find element with id '${n}'`);return e}else if(n instanceof HTMLElement)return n;throw new Error(`Invalid element: ${n}`)}function l1(n){return n&&n.newWindow===!1?"_self":"_blank"}function mte(n,e={}){let i=Object.hasOwnProperty.call(e,"height")?`${e.height}`:"300",t=Object.hasOwnProperty.call(e,"width")?`${e.width}`:void 0;n.setAttribute("height",i),t?n.setAttribute("width",t):n.setAttribute("style","width:100%;")}var i1=class{constructor(e){this.pending={},this.port=e,this.port.onmessage=this.messageListener.bind(this)}request({type:e,payload:i}){return new Promise((t,r)=>{let o=rB();this.pending[o]={resolve:t,reject:r},this.port.postMessage({type:e,payload:pi(ve({},i),{__reqid:o})})})}messageListener(e){if(typeof e.data.payload?.__reqid!="string")return;let{type:i,payload:t}=e.data,{__reqid:r,__success:o,__error:s}=t;this.pending[r]&&(o?this.pending[r].resolve(this.cleanResult(t)):this.pending[r].reject(s?`${i}: ${s}`:i),delete this.pending[r])}cleanResult(e){let i=ve({},e);return delete i.__reqid,delete i.__success,delete i.__error,Object.keys(i).length?i:null}},n1=class{constructor(e,i){this.editor={openFile:t=>this._rdc.request({type:"SDK_OPEN_FILE",payload:{path:t}}),setCurrentFile:t=>this._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:t}}),setTheme:t=>this._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:t}}),setView:t=>this._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:t}}),showSidebar:(t=!0)=>this._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:t}})},this.preview={origin:"",getUrl:()=>this._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then(t=>t?.url??null),setUrl:(t="/")=>{if(typeof t!="string"||!t.startsWith("/"))throw new Error(`Invalid argument: expected a path starting with '/', got '${t}'`);return this._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:t}})}},this._rdc=new i1(e),Object.defineProperty(this.preview,"origin",{value:typeof i.previewOrigin=="string"?i.previewOrigin:null,writable:!1})}applyFsDiff(e){let i=t=>t!==null&&typeof t=="object";if(!i(e)||!i(e.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(e.destroy))throw new Error("Invalid diff object: expected diff.destroy to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:e})}getDependencies(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}getFsSnapshot(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}},Ky=[],r1=class{constructor(e){this.id=rB(),this.element=e,this.pending=new Promise((i,t)=>{let r=({data:l,ports:d})=>{l?.action==="SDK_INIT_SUCCESS"&&l.id===this.id&&(this.vm=new n1(d[0],l.payload),i(this.vm),s())},o=()=>{this.element.contentWindow?.postMessage({action:"SDK_INIT",id:this.id},"*")};function s(){window.clearInterval(c),window.removeEventListener("message",r)}window.addEventListener("message",r),o();let a=0,c=window.setInterval(()=>{if(this.vm){s();return}if(a>=20){s(),t("Timeout: Unable to establish a connection with the StackBlitz VM"),Ky.forEach((l,d)=>{l.id===this.id&&Ky.splice(d,1)});return}a++,o()},500)}),Ky.push(this)}},pte=n=>{let e=n instanceof Element?"element":"id";return Ky.find(i=>i[e]===n)??null};function gte(n,e){let i=document.createElement("input");return i.type="hidden",i.name=n,i.value=e,i}function bte(n){return n.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}function sB({template:n,title:e,description:i,dependencies:t,files:r,settings:o}){if(!J3.includes(n)){let l=J3.map(d=>`'${d}'`).join(", ");console.warn(`Unsupported project.template: must be one of ${l}`)}let s=[],a=(l,d,u="")=>{s.push(gte(l,typeof d=="string"?d:u))};a("project[title]",e),typeof i=="string"&&i.length>0&&a("project[description]",i),a("project[template]",n,"javascript"),t&&(n==="node"?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):a("project[dependencies]",JSON.stringify(t))),o&&a("project[settings]",JSON.stringify(o)),Object.entries(r).forEach(([l,d])=>{a(`project[files][${bte(l)}]`,d)});let c=document.createElement("form");return c.method="POST",c.setAttribute("style","display:none!important;"),c.append(...s),c}function _te(n,e){let i=sB(n);return i.action=s1("/run",e),i.id="sb_run",`<!doctype html>
<html>
<head><title></title></head>
<body>
  ${i.outerHTML}
  <script>document.getElementById('${i.id}').submit();<\/script>
</body>
</html>`}function vte(n,e){let i=sB(n);i.action=o1("/run",e),i.target=l1(e),document.body.appendChild(i),i.submit(),document.body.removeChild(i)}function Jy(n){return n?.contentWindow?(pte(n)??new r1(n)).pending:Promise.reject("Provided element is not an iframe.")}function yte(n,e){vte(n,e)}function xte(n,e){let i=o1(`/edit/${n}`,e),t=l1(e);window.open(i,t)}function wte(n,e){let i=o1(`/github/${n}`,e),t=l1(e);window.open(i,t)}function Mte(n,e,i){let t=c1(n),r=_te(e,i),o=document.createElement("iframe");return a1(t,o,i),o.contentDocument?.write(r),Jy(o)}function Ste(n,e,i){let t=c1(n),r=document.createElement("iframe");return r.src=s1(`/edit/${e}`,i),a1(t,r,i),Jy(r)}function Rte(n,e,i){let t=c1(n),r=document.createElement("iframe");return r.src=s1(`/github/${e}`,i),a1(t,r,i),Jy(r)}var aB={connect:Jy,embedGithubProject:Rte,embedProject:Mte,embedProjectId:Ste,openGithubProject:wte,openProject:yte,openProjectId:xte};function cB(n,e){return gi(this,null,function*(){let i=e1(n),t=K3(n),r=Rf(i),o=JD(r),s={template:"angular-cli",title:o,description:"ngx-three example "+o,files:{"src/index.html":KD(o),"src/main.ts":QD(r,e),"src/polyfills.ts":ZD,"src/assets.ts":`export const ASSET_PATH = '${Wy}';`},dependencies:ve({"ngx-three":"latest","@types/three":yl.devDependencies["@types/three"]},yl.dependencies),devDependencies:ve({},yl.devDependencies)};yield Tte(n,s.files);let a=t?{openFile:`src/app/${Rf(t)}`}:void 0;aB.openProject(s,a)})}function Tte(n,e){return Promise.all(n.map(i=>fetch(i).then(t=>gi(this,null,function*(){let r=yield t.text();e[`src/app/${Rf(i)}`]=r}))))}var ya=class{constructor(){this.urls=[],this.fileNames=[]}setUrls(e){this.urls=e,this.fileNames=this.extractFileNames()}extractFileNames(){return this.urls.map(e=>e.split("/").pop()??"")}toStackblitz(e){e?.preventDefault(),cB(this.urls,this.declarations)}toCodeSandbox(e){e?.preventDefault(),Q3(this.urls,this.declarations)}getLanguage(e){switch(e.substring(e.lastIndexOf(".")+1)){case"ts":return"typescript";case"js":return"javascript";case"html":return"html";case"css":return"css";default:return"typescript"}}};var h1;try{h1=typeof Intl<"u"&&Intl.v8BreakIterator}catch{h1=!1}var wi=(()=>{let e=class e{constructor(t){this._platformId=t,this.isBrowser=this._platformId?sh(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||h1)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(de(Vr))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var lg;function Cte(){if(lg==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>lg=!0}))}finally{lg=lg||!1}return lg}function xl(n){return Cte()?n:!!n.capture}var Ss=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(Ss||{}),ex,eu;function tx(){if(eu==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return eu=!1,eu;if("scrollBehavior"in document.documentElement.style)eu=!0;else{let n=Element.prototype.scrollTo;n?eu=!/\{\s*\[native code\]\s*\}/.test(n.toString()):eu=!1}}return eu}function Cf(){if(typeof document!="object"||!document)return Ss.NORMAL;if(ex==null){let n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";let i=document.createElement("div"),t=i.style;t.width="2px",t.height="1px",n.appendChild(i),document.body.appendChild(n),ex=Ss.NORMAL,n.scrollLeft===0&&(n.scrollLeft=1,ex=n.scrollLeft===0?Ss.NEGATED:Ss.INVERTED),n.remove()}return ex}var u1;function Ete(){if(u1==null){let n=typeof document<"u"?document.head:null;u1=!!(n&&(n.createShadowRoot||n.attachShadow))}return u1}function lB(n){if(Ete()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Rs(n){return n.composedPath?n.composedPath()[0]:n.target}function dg(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Ef(n,...e){return e.length?e.some(i=>n[i]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function ho(n){return n!=null&&`${n}`!="false"}function _c(n,e=0){return Dte(n)?Number(n):e}function Dte(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function Df(n){return Array.isArray(n)?n:[n]}function Bn(n){return n==null?"":typeof n=="string"?n:`${n}px`}function Ts(n){return n instanceof et?n.nativeElement:n}function Ate(n){if(n.type==="characterData"&&n.target instanceof Comment)return!0;if(n.type==="childList"){for(let e=0;e<n.addedNodes.length;e++)if(!(n.addedNodes[e]instanceof Comment))return!1;for(let e=0;e<n.removedNodes.length;e++)if(!(n.removedNodes[e]instanceof Comment))return!1;return!0}return!1}var dB=(()=>{let e=class e{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ite=(()=>{let e=class e{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){let r=Ts(t);return new Lt(o=>{let a=this._observeElement(r).pipe(lt(c=>c.filter(l=>!Ate(l))),vi(c=>!!c.length)).subscribe(o);return()=>{a.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{let r=new gt,o=this._mutationObserverFactory.create(s=>r.next(s));o&&o.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:o,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){let{observer:r,stream:o}=this._observedElements.get(t);r&&r.disconnect(),o.complete(),this._observedElements.delete(t)}}};e.\u0275fac=function(r){return new(r||e)(de(dB))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ix=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=_c(t),this._subscribe()}constructor(t,r,o){this._contentObserver=t,this._elementRef=r,this._ngZone=o,this.event=new nt,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(ka(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(F(Ite),F(et),F(Qe))},e.\u0275dir=$e({type:e,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[ut.HasDecoratorInputTransform,"cdkObserveContentDisabled","disabled",Si],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"],standalone:!0,features:[ln]});let n=e;return n})(),nx=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({providers:[dB]});let n=e;return n})();var fB=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({});let n=e;return n})(),uB=new Set,tu,Pte=(()=>{let e=class e{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Fte}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&kte(t,this._nonce),this._matchMedia(t)}};e.\u0275fac=function(r){return new(r||e)(de(wi),de(xm,8))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function kte(n,e){if(!uB.has(n))try{tu||(tu=document.createElement("style"),e&&tu.setAttribute("nonce",e),tu.setAttribute("type","text/css"),document.head.appendChild(tu)),tu.sheet&&(tu.sheet.insertRule(`@media ${n} {body{ }}`,0),uB.add(n))}catch(i){console.error(i)}}function Fte(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var rx=(()=>{let e=class e{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new gt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return hB(Df(t)).some(o=>this._registerQuery(o).mql.matches)}observe(t){let o=hB(Df(t)).map(a=>this._registerQuery(a).observable),s=Ul(o);return s=Ac(s.pipe(Rn(1)),s.pipe(Hl(1),ka(0))),s.pipe(lt(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:d})=>{c.matches=c.matches||l,c.breakpoints[d]=l}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let r=this._mediaMatcher.matchMedia(t),s={observable:new Lt(a=>{let c=l=>this._zone.run(()=>a.next(l));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(vo(r),lt(({matches:a})=>({query:t,matches:a})),Ci(this._destroySubject)),mql:r};return this._queries.set(t,s),s}};e.\u0275fac=function(r){return new(r||e)(de(Pte),de(Qe))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function hB(n){return n.map(e=>e.split(",")).reduce((e,i)=>e.concat(i)).map(e=>e.trim())}var mB={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var m1=class{constructor(e,i){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new gt,this._typeaheadSubscription=_i.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new gt,this.change=new gt,e instanceof Bs?this._itemChangesSubscription=e.changes.subscribe(t=>this._itemsChanged(t.toArray())):$_(e)&&(this._effectRef=nh(()=>this._itemsChanged(e()),{injector:i}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(zi(i=>this._pressedLetters.push(i)),ka(e),vi(()=>this._pressedLetters.length>0),lt(()=>this._pressedLetters.join(""))).subscribe(i=>{let t=this._getItemsArray();for(let r=1;r<t.length+1;r++){let o=(this._activeItemIndex+r)%t.length,s=t[o];if(!this._skipPredicateFn(s)&&s.getLabel().toUpperCase().trim().indexOf(i)===0){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,i=10){return this._pageUpAndDown={enabled:e,delta:i},this}setActiveItem(e){let i=this._activeItem;this.updateActiveItem(e),this._activeItem!==i&&this.change.next(this._activeItemIndex)}onKeydown(e){let i=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!e[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(i){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(r||Ef(e,"shiftKey"))&&(e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(i>=65&&i<=90||i>=48&&i<=57)&&this._letterKeyStream.next(String.fromCharCode(i)));return}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let i=this._getItemsArray(),t=typeof e=="number"?e:i.indexOf(e),r=i[t];this._activeItem=r??null,this._activeItemIndex=t}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let i=this._getItemsArray();for(let t=1;t<=i.length;t++){let r=(this._activeItemIndex+e*t+i.length)%i.length,o=i[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,i){let t=this._getItemsArray();if(t[e]){for(;this._skipPredicateFn(t[e]);)if(e+=i,!t[e])return;this.setActiveItem(e)}}_getItemsArray(){return $_(this._items)?this._items():this._items instanceof Bs?this._items.toArray():this._items}_itemsChanged(e){if(this._activeItem){let i=e.indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}}};var ax=class extends m1{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}};var g1=(()=>{let e=class e{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return tie(t)&&getComputedStyle(t).visibility==="visible"}isTabbable(t){if(!this._platform.isBrowser)return!1;let r=eie(lie(t));if(r&&(pB(r)===-1||!this.isVisible(r)))return!1;let o=t.nodeName.toLowerCase(),s=pB(t);return t.hasAttribute("contenteditable")?s!==-1:o==="iframe"||o==="object"||this._platform.WEBKIT&&this._platform.IOS&&!aie(t)?!1:o==="audio"?t.hasAttribute("controls")?s!==-1:!1:o==="video"?s===-1?!1:s!==null?!0:this._platform.FIREFOX||t.hasAttribute("controls"):t.tabIndex>=0}isFocusable(t,r){return cie(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}};e.\u0275fac=function(r){return new(r||e)(de(wi))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function eie(n){try{return n.frameElement}catch{return null}}function tie(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function iie(n){let e=n.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function nie(n){return oie(n)&&n.type=="hidden"}function rie(n){return sie(n)&&n.hasAttribute("href")}function oie(n){return n.nodeName.toLowerCase()=="input"}function sie(n){return n.nodeName.toLowerCase()=="a"}function _B(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let e=n.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function pB(n){if(!_B(n))return null;let e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function aie(n){let e=n.nodeName.toLowerCase(),i=e==="input"&&n.type;return i==="text"||i==="password"||e==="select"||e==="textarea"}function cie(n){return nie(n)?!1:iie(n)||rie(n)||n.hasAttribute("contenteditable")||_B(n)}function lie(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var p1=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,i,t,r,o=!1){this._element=e,this._checker=i,this._ngZone=t,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){let e=this._startAnchor,i=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),i&&(i.removeEventListener("focus",this.endAnchorListener),i.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(i=>{this._executeOnStable(()=>i(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(i=>{this._executeOnStable(()=>i(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(i=>{this._executeOnStable(()=>i(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let i=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?i.length?i[0]:this._getFirstTabbableElement(this._element):i.length?i[i.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let i=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(i){if(!this._checker.isFocusable(i)){let t=this._getFirstTabbableElement(i);return t?.focus(e),!!t}return i.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let i=this._getRegionBoundary("start");return i&&i.focus(e),!!i}focusLastTabbableElement(e){let i=this._getRegionBoundary("end");return i&&i.focus(e),!!i}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let i=e.children;for(let t=0;t<i.length;t++){let r=i[t].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(i[t]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let i=e.children;for(let t=i.length-1;t>=0;t--){let r=i[t].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(i[t]):null;if(r)return r}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,i){e?i.setAttribute("tabindex","0"):i.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Rn(1)).subscribe(e)}},vB=(()=>{let e=class e{constructor(t,r,o){this._checker=t,this._ngZone=r,this._document=o}create(t,r=!1){return new p1(t,this._checker,this._ngZone,this._document,r)}};e.\u0275fac=function(r){return new(r||e)(de(g1),de(Qe),de(xt))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function b1(n){return n.buttons===0||n.detail===0}function _1(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var die=new Ee("cdk-input-modality-detector-options"),uie={ignoreKeys:[18,17,224,91,16]},yB=650,Af=xl({passive:!0,capture:!0}),hie=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(t,r,o,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Mn(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Rs(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<yB||(this._modality.next(b1(a)?"keyboard":"mouse"),this._mostRecentTarget=Rs(a))},this._onTouchstart=a=>{if(_1(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Rs(a)},this._options=ve(ve({},uie),s),this.modalityDetected=this._modality.pipe(Hl(1)),this.modalityChanged=this.modalityDetected.pipe(Pc()),t.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,Af),o.addEventListener("mousedown",this._onMousedown,Af),o.addEventListener("touchstart",this._onTouchstart,Af)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Af),document.removeEventListener("mousedown",this._onMousedown,Af),document.removeEventListener("touchstart",this._onTouchstart,Af))}};e.\u0275fac=function(r){return new(r||e)(de(wi),de(Qe),de(xt),de(die,8))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var sx=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(sx||{}),fie=new Ee("cdk-focus-monitor-default-options"),ox=xl({passive:!0,capture:!0}),ug=(()=>{let e=class e{constructor(t,r,o,s,a){this._ngZone=t,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new gt,this._rootNodeFocusAndBlurListener=c=>{let l=Rs(c);for(let d=l;d;d=d.parentElement)c.type==="focus"?this._onFocus(c,d):this._onBlur(c,d)},this._document=s,this._detectionMode=a?.detectionMode||sx.IMMEDIATE}monitor(t,r=!1){let o=Ts(t);if(!this._platform.isBrowser||o.nodeType!==1)return pt();let s=lB(o)||this._getDocument(),a=this._elementInfo.get(o);if(a)return r&&(a.checkChildren=!0),a.subject;let c={checkChildren:r,subject:new gt,rootNode:s};return this._elementInfo.set(o,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(t){let r=Ts(t),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(t,r,o){let s=Ts(t),a=this._getDocument().activeElement;s===a?this._getClosestElementsInfo(s).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),typeof s.focus=="function"&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===sx.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused",r==="touch"),t.classList.toggle("cdk-keyboard-focused",r==="keyboard"),t.classList.toggle("cdk-mouse-focused",r==="mouse"),t.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&r,this._detectionMode===sx.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?yB:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(t,r){let o=this._elementInfo.get(r),s=Rs(t);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(t,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let r=t.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,ox),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,ox)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ci(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){let r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ox),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ox),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,o){this._setClasses(t,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){let r=[];return this._elementInfo.forEach((o,s)=>{(s===t||o.checkChildren&&s.contains(t))&&r.push([s,o])}),r}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let s=t.labels;if(s){for(let a=0;a<s.length;a++)if(s[a].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(de(Qe),de(wi),de(hie),de(xt,8),de(fie,8))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),xB=(()=>{let e=class e{constructor(t,r){this._elementRef=t,this._focusMonitor=r,this._focusOrigin=null,this.cdkFocusChange=new nt}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let t=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(t,t.nodeType===1&&t.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(r=>{this._focusOrigin=r,this.cdkFocusChange.emit(r)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(F(et),F(ug))},e.\u0275dir=$e({type:e,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"],standalone:!0});let n=e;return n})(),iu=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(iu||{}),gB="cdk-high-contrast-black-on-white",bB="cdk-high-contrast-white-on-black",f1="cdk-high-contrast-active",wB=(()=>{let e=class e{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=te(rx).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return iu.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return iu.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return iu.BLACK_ON_WHITE}return iu.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(f1,gB,bB),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===iu.BLACK_ON_WHITE?t.add(f1,gB):r===iu.WHITE_ON_BLACK&&t.add(f1,bB)}}};e.\u0275fac=function(r){return new(r||e)(de(wi),de(xt))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var mie=new Ee("cdk-dir-doc",{providedIn:"root",factory:pie});function pie(){return te(xt)}var gie=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function bie(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?gie.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var wa=(()=>{let e=class e{constructor(t){if(this.value="ltr",this.change=new nt,t){let r=t.body?t.body.dir:null,o=t.documentElement?t.documentElement.dir:null;this.value=bie(r||o||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(de(mie,8))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var wl=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({});let n=e;return n})();function vie(){return!0}var yie=new Ee("mat-sanity-checks",{providedIn:"root",factory:vie}),Mi=(()=>{let e=class e{constructor(t,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return dg()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[t]}};e.\u0275fac=function(r){return new(r||e)(de(wB),de(yie,8),de(xt))},e.\u0275mod=it({type:e}),e.\u0275inj=tt({imports:[wl,wl]});let n=e;return n})();var Po=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Po||{}),x1=class{constructor(e,i,t,r=!1){this._renderer=e,this.element=i,this.config=t,this._animationForciblyDisabledThroughCss=r,this.state=Po.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},SB=xl({passive:!0,capture:!0}),w1=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let i=Rs(e);i&&this._events.get(e.type)?.forEach((t,r)=>{(r===i||r.contains(i))&&t.forEach(o=>o.handleEvent(e))})}}addHandler(e,i,t,r){let o=this._events.get(i);if(o){let s=o.get(t);s?s.add(r):o.set(t,new Set([r]))}else this._events.set(i,new Map([[t,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(i,this._delegateEventHandler,SB)})}removeHandler(e,i,t){let r=this._events.get(e);if(!r)return;let o=r.get(i);o&&(o.delete(t),o.size===0&&r.delete(i),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,SB)))}},RB={enterDuration:225,exitDuration:150},xie=800,TB=xl({passive:!0,capture:!0}),CB=["mousedown","touchstart"],EB=["mouseup","mouseleave","touchend","touchcancel"],hg=class hg{constructor(e,i,t,r){this._target=e,this._ngZone=i,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Ts(t))}fadeInRipple(e,i,t={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=ve(ve({},RB),t.animation);t.centered&&(e=r.left+r.width/2,i=r.top+r.height/2);let s=t.radius||wie(e,i,r),a=e-r.left,c=i-r.top,l=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${a-s}px`,d.style.top=`${c-s}px`,d.style.height=`${s*2}px`,d.style.width=`${s*2}px`,t.color!=null&&(d.style.backgroundColor=t.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),h=u.transitionProperty,f=u.transitionDuration,p=h==="none"||f==="0s"||f==="0s, 0s"||r.width===0&&r.height===0,b=new x1(this,d,t,p);d.style.transform="scale3d(1, 1, 1)",b.state=Po.FADING_IN,t.persistent||(this._mostRecentTransientRipple=b);let g=null;return!p&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let m=()=>this._finishRippleTransition(b),v=()=>this._destroyRipple(b);d.addEventListener("transitionend",m),d.addEventListener("transitioncancel",v),g={onTransitionEnd:m,onTransitionCancel:v}}),this._activeRipples.set(b,g),(p||!l)&&this._finishRippleTransition(b),b}fadeOutRipple(e){if(e.state===Po.FADING_OUT||e.state===Po.HIDDEN)return;let i=e.element,t=ve(ve({},RB),e.config.animation);i.style.transitionDuration=`${t.exitDuration}ms`,i.style.opacity="0",e.state=Po.FADING_OUT,(e._animationForciblyDisabledThroughCss||!t.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let i=Ts(e);!this._platform.isBrowser||!i||i===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=i,CB.forEach(t=>{hg._eventManager.addHandler(this._ngZone,t,i,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{EB.forEach(i=>{this._triggerElement.addEventListener(i,this,TB)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Po.FADING_IN?this._startFadeOutTransition(e):e.state===Po.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let i=e===this._mostRecentTransientRipple,{persistent:t}=e.config;e.state=Po.VISIBLE,!t&&(!i||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let i=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Po.HIDDEN,i!==null&&(e.element.removeEventListener("transitionend",i.onTransitionEnd),e.element.removeEventListener("transitioncancel",i.onTransitionCancel)),e.element.remove()}_onMousedown(e){let i=b1(e),t=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+xie;!this._target.rippleDisabled&&!i&&!t&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!_1(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let i=e.changedTouches;if(i)for(let t=0;t<i.length;t++)this.fadeInRipple(i[t].clientX,i[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let i=e.state===Po.VISIBLE||e.config.terminateOnPointerUp&&e.state===Po.FADING_IN;!e.config.persistent&&i&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(CB.forEach(i=>hg._eventManager.removeHandler(i,e,this)),this._pointerUpEventsRegistered&&EB.forEach(i=>e.removeEventListener(i,this,TB)))}};hg._eventManager=new w1;var fg=hg;function wie(n,e,i){let t=Math.max(Math.abs(n-i.left),Math.abs(n-i.right)),r=Math.max(Math.abs(e-i.top),Math.abs(e-i.bottom));return Math.sqrt(t*t+r*r)}var nu=new Ee("mat-ripple-global-options"),mg=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,r,o,s,a){this._elementRef=t,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new fg(this,r,t,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:ve(ve(ve({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,o){return typeof t=="number"?this._rippleRenderer.fadeInRipple(t,r,ve(ve({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,ve(ve({},this.rippleConfig),t))}};e.\u0275fac=function(r){return new(r||e)(F(et),F(Qe),F(wi),F(nu,8),F(Gn,8))},e.\u0275dir=$e({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,o){r&2&&$t("mat-ripple-unbounded",o.unbounded)},inputs:{color:[ut.None,"matRippleColor","color"],unbounded:[ut.None,"matRippleUnbounded","unbounded"],centered:[ut.None,"matRippleCentered","centered"],radius:[ut.None,"matRippleRadius","radius"],animation:[ut.None,"matRippleAnimation","animation"],disabled:[ut.None,"matRippleDisabled","disabled"],trigger:[ut.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let n=e;return n})(),ru=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({imports:[Mi,Mi]});let n=e;return n})();var M1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({imports:[Mi]});let n=e;return n})();var S1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({imports:[ru,Mi,M1]});let n=e;return n})(),DB={capture:!0},AB=["focus","click","mouseenter","touchstart"],v1="mat-ripple-loader-uninitialized",y1="mat-ripple-loader-class-name",IB="mat-ripple-loader-centered",lx="mat-ripple-loader-disabled",PB=(()=>{let e=class e{constructor(){this._document=te(xt,{optional:!0}),this._animationMode=te(Gn,{optional:!0}),this._globalRippleOptions=te(nu,{optional:!0}),this._platform=te(wi),this._ngZone=te(Qe),this._hosts=new Map,this._onInteraction=t=>{if(!(t.target instanceof HTMLElement))return;let o=t.target.closest(`[${v1}]`);o&&this._createRipple(o)},this._ngZone.runOutsideAngular(()=>{for(let t of AB)this._document?.addEventListener(t,this._onInteraction,DB)})}ngOnDestroy(){let t=this._hosts.keys();for(let r of t)this.destroyRipple(r);for(let r of AB)this._document?.removeEventListener(r,this._onInteraction,DB)}configureRipple(t,r){t.setAttribute(v1,""),(r.className||!t.hasAttribute(y1))&&t.setAttribute(y1,r.className||""),r.centered&&t.setAttribute(IB,""),r.disabled&&t.setAttribute(lx,"")}getRipple(t){return this._hosts.get(t)||this._createRipple(t)}setDisabled(t,r){let o=this._hosts.get(t);if(o){o.disabled=r;return}r?t.setAttribute(lx,""):t.removeAttribute(lx)}_createRipple(t){if(!this._document)return;let r=this._hosts.get(t);if(r)return r;t.querySelector(".mat-ripple")?.remove();let o=this._document.createElement("span");o.classList.add("mat-ripple",t.getAttribute(y1)),t.append(o);let s=new mg(new et(o),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=t,s.centered=t.hasAttribute(IB),s.disabled=t.hasAttribute(lx),this.attachRipple(t,s),s}attachRipple(t,r){t.removeAttribute(v1),this._hosts.set(t,r)}destroyRipple(t){let r=this._hosts.get(t);r&&(r.ngOnDestroy(),this._hosts.delete(t))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Mie=["mat-button",""],Sie=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Rie=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var Tie=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var Cie=["mat-icon-button",""],Eie=["*"];var Die=new Ee("MAT_BUTTON_CONFIG");var Aie=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],kB=(()=>{let e=class e{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}constructor(t,r,o,s){this._elementRef=t,this._platform=r,this._ngZone=o,this._animationMode=s,this._focusMonitor=te(ug),this._rippleLoader=te(PB),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let a=te(Die,{optional:!0}),c=t.nativeElement,l=c.classList;this.disabledInteractive=a?.disabledInteractive??!1,this._rippleLoader?.configureRipple(c,{className:"mat-mdc-button-ripple"});for(let{attribute:d,mdcClasses:u}of Aie)c.hasAttribute(d)&&l.add(...u)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};e.\u0275fac=function(r){Qu()},e.\u0275dir=$e({type:e,inputs:{color:"color",disableRipple:[ut.HasDecoratorInputTransform,"disableRipple","disableRipple",Si],disabled:[ut.HasDecoratorInputTransform,"disabled","disabled",Si],ariaDisabled:[ut.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",Si],disabledInteractive:[ut.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",Si]},features:[ln]});let n=e;return n})();var dx=(()=>{let e=class e extends kB{constructor(t,r,o,s){super(t,r,o,s)}};e.\u0275fac=function(r){return new(r||e)(F(et),F(wi),F(Qe),F(Gn,8))},e.\u0275cmp=L({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,o){r&2&&(Hi("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),Ho(o.color?"mat-"+o.color:""),$t("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[q,Ei],attrs:Mie,ngContentSelectors:Rie,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(ae(Sie),fe(0,"span",0),Q(1),H(2,"span",1),Q(3,1),J(),Q(4,2),fe(5,"span",2)(6,"span",3)),r&2&&$t("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let n=e;return n})();var FB=(()=>{let e=class e extends kB{constructor(t,r,o,s){super(t,r,o,s),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}};e.\u0275fac=function(r){return new(r||e)(F(et),F(wi),F(Qe),F(Gn,8))},e.\u0275cmp=L({type:e,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(r,o){r&2&&(Hi("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),Ho(o.color?"mat-"+o.color:""),$t("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[q,Ei],attrs:Cie,ngContentSelectors:Eie,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(ae(),fe(0,"span",0),Q(1),fe(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{color:var(--mdc-icon-button-icon-color)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color)}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color)}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity)}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity)}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity)}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',Tie],encapsulation:2,changeDetection:0});let n=e;return n})();var pg=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({imports:[Mi,ru,Mi]});let n=e;return n})();var Iie=["*"],ux;function Pie(){if(ux===void 0&&(ux=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(ux=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return ux}function gg(n){return Pie()?.createHTML(n)||n}function OB(n){return Error(`Unable to find icon with the name "${n}"`)}function kie(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function NB(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function LB(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var vc=class{constructor(e,i,t){this.url=e,this.svgText=i,this.options=t}},Fie=(()=>{let e=class e{constructor(t,r,o,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=o}addSvgIcon(t,r,o){return this.addSvgIconInNamespace("",t,r,o)}addSvgIconLiteral(t,r,o){return this.addSvgIconLiteralInNamespace("",t,r,o)}addSvgIconInNamespace(t,r,o,s){return this._addSvgIconConfig(t,r,new vc(o,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,o,s){let a=this._sanitizer.sanitize(sr.HTML,o);if(!a)throw LB(o);let c=gg(a);return this._addSvgIconConfig(t,r,new vc("",c,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,o){return this._addSvgIconSetConfig(t,new vc(r,null,o))}addSvgIconSetLiteralInNamespace(t,r,o){let s=this._sanitizer.sanitize(sr.HTML,r);if(!s)throw LB(r);let a=gg(s);return this._addSvgIconSetConfig(t,new vc("",a,o))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let r=this._sanitizer.sanitize(sr.RESOURCE_URL,t);if(!r)throw NB(t);let o=this._cachedIconsByUrl.get(r);return o?pt(hx(o)):this._loadSvgIconFromConfig(new vc(t,null)).pipe(zi(s=>this._cachedIconsByUrl.set(r,s)),lt(s=>hx(s)))}getNamedSvgIcon(t,r=""){let o=BB(r,t),s=this._svgIconConfigs.get(o);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(o,s),this._getSvgFromConfig(s);let a=this._iconSetConfigs.get(r);return a?this._getSvgFromIconSetConfigs(t,a):Kr(OB(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?pt(hx(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(lt(r=>hx(r)))}_getSvgFromIconSetConfigs(t,r){let o=this._extractIconWithNameFromAnySet(t,r);if(o)return pt(o);let s=r.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(Nr(c=>{let d=`Loading icon set URL: ${this._sanitizer.sanitize(sr.RESOURCE_URL,a.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(d)),pt(null)})));return Vl(s).pipe(lt(()=>{let a=this._extractIconWithNameFromAnySet(t,r);if(!a)throw OB(t);return a}))}_extractIconWithNameFromAnySet(t,r){for(let o=r.length-1;o>=0;o--){let s=r[o];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){let a=this._svgElementFromConfig(s),c=this._extractSvgIconFromSet(a,t,s.options);if(c)return c}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(zi(r=>t.svgText=r),lt(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?pt(null):this._fetchIcon(t).pipe(zi(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,o){let s=t.querySelector(`[id="${r}"]`);if(!s)return null;let a=s.cloneNode(!0);if(a.removeAttribute("id"),a.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(a,o);if(a.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(a),o);let c=this._svgElementFromString(gg("<svg></svg>"));return c.appendChild(a),this._setSvgAttributes(c,o)}_svgElementFromString(t){let r=this._document.createElement("DIV");r.innerHTML=t;let o=r.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(t){let r=this._svgElementFromString(gg("<svg></svg>")),o=t.attributes;for(let s=0;s<o.length;s++){let{name:a,value:c}=o[s];a!=="id"&&r.setAttribute(a,c)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){let{url:r,options:o}=t,s=o?.withCredentials??!1;if(!this._httpClient)throw kie();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let a=this._sanitizer.sanitize(sr.RESOURCE_URL,r);if(!a)throw NB(r);let c=this._inProgressUrlFetches.get(a);if(c)return c;let l=this._httpClient.get(a,{responseType:"text",withCredentials:s}).pipe(lt(d=>gg(d)),ks(()=>this._inProgressUrlFetches.delete(a)),em());return this._inProgressUrlFetches.set(a,l),l}_addSvgIconConfig(t,r,o){return this._svgIconConfigs.set(BB(t,r),o),this}_addSvgIconSetConfig(t,r){let o=this._iconSetConfigs.get(t);return o?o.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){let r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let o=0;o<this._resolvers.length;o++){let s=this._resolvers[o](r,t);if(s)return jie(s)?new vc(s.url,null,s.options):new vc(s,null)}}};e.\u0275fac=function(r){return new(r||e)(de(Am,8),de(Fm),de(xt,8),de(Ur))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function hx(n){return n.cloneNode(!0)}function BB(n,e){return n+":"+e}function jie(n){return!!(n.url&&n.options)}var Oie=new Ee("MAT_ICON_DEFAULT_OPTIONS"),Nie=new Ee("mat-icon-location",{providedIn:"root",factory:Lie});function Lie(){let n=te(xt),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var UB=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Bie=UB.map(n=>`[${n}]`).join(", "),Uie=/^url\(['"]?#(.*?)['"]?\)$/,fx=(()=>{let e=class e{get color(){return this._color||this._defaultColor}set color(t){this._color=t}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){let r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){let r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(t,r,o,s,a,c){this._elementRef=t,this._iconRegistry=r,this._location=s,this._errorHandler=a,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=_i.EMPTY,c&&(c.color&&(this.color=this._defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),o||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let o=t.childNodes[r];(o.nodeType!==1||o.nodeName.toLowerCase()==="svg")&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>t.classList.remove(o)),r.forEach(o=>t.classList.add(o)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let r=this._elementsWithExternalReferences;r&&r.forEach((o,s)=>{o.forEach(a=>{s.setAttribute(a.name,`url('${t}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(t){let r=t.querySelectorAll(Bie),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)UB.forEach(a=>{let c=r[s],l=c.getAttribute(a),d=l?l.match(Uie):null;if(d){let u=o.get(c);u||(u=[],o.set(c,u)),u.push({name:a,value:d[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[r,o]=this._splitIconName(t);r&&(this._svgNamespace=r),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,r).pipe(Rn(1)).subscribe(s=>this._setSvgElement(s),s=>{let a=`Error retrieving icon ${r}:${o}! ${s.message}`;this._errorHandler.handleError(new Error(a))})}}};e.\u0275fac=function(r){return new(r||e)(F(et),F(Fie),Bc("aria-hidden"),F(Nie),F(Ur),F(Oie,8))},e.\u0275cmp=L({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,o){r&2&&(Hi("data-mat-icon-type",o._usingFontIcon()?"font":"svg")("data-mat-icon-name",o._svgName||o.fontIcon)("data-mat-icon-namespace",o._svgNamespace||o.fontSet)("fontIcon",o._usingFontIcon()?o.fontIcon:null),Ho(o.color?"mat-"+o.color:""),$t("mat-icon-inline",o.inline)("mat-icon-no-color",o.color!=="primary"&&o.color!=="accent"&&o.color!=="warn"))},inputs:{color:"color",inline:[ut.HasDecoratorInputTransform,"inline","inline",Si],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[ln,Ei],ngContentSelectors:Iie,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0});let n=e;return n})(),bg=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({imports:[Mi,Mi]});let n=e;return n})();var Vie=["*"];var zie=new Ee("MAT_CARD_CONFIG"),zB=(()=>{let e=class e{constructor(t){this.appearance=t?.appearance||"raised"}};e.\u0275fac=function(r){return new(r||e)(F(zie,8))},e.\u0275cmp=L({type:e,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(r,o){r&2&&$t("mat-mdc-card-outlined",o.appearance==="outlined")("mdc-card--outlined",o.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[Ei],ngContentSelectors:Vie,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0});let n=e;return n})();var HB=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=$e({type:e,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0});let n=e;return n})();var GB=(()=>{let e=class e{constructor(){this.align="start"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=$e({type:e,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(r,o){r&2&&$t("mat-mdc-card-actions-align-end",o.align==="end")},inputs:{align:"align"},exportAs:["matCardActions"],standalone:!0});let n=e;return n})();var R1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({imports:[Mi,Go,Mi]});let n=e;return n})();var _g=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},T1=class extends _g{constructor(e,i,t,r,o){super(),this.component=e,this.viewContainerRef=i,this.injector=t,this.componentFactoryResolver=r,this.projectableNodes=o}},ou=class extends _g{constructor(e,i,t,r){super(),this.templateRef=e,this.viewContainerRef=i,this.context=t,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,i=this.context){return this.context=i,super.attach(e)}detach(){return this.context=void 0,super.detach()}},C1=class extends _g{constructor(e){super(),this.element=e instanceof et?e.nativeElement:e}},mx=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof T1)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof ou)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof C1)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var px=class extends mx{constructor(e,i,t,r,o){super(),this.outletElement=e,this._componentFactoryResolver=i,this._appRef=t,this._defaultInjector=r,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}attachComponentPortal(e){let t=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(t,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=t.create(e.injector||this._defaultInjector||_r.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let i=e.viewContainerRef,t=i.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return t.rootNodes.forEach(r=>this.outletElement.appendChild(r)),t.detectChanges(),this.setDisposeFn(()=>{let r=i.indexOf(t);r!==-1&&i.remove(r)}),this._attachedPortal=e,t}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var WB=(()=>{let e=class e extends ou{constructor(t,r){super(t,r)}};e.\u0275fac=function(r){return new(r||e)(F(or),F(Wn))},e.\u0275dir=$e({type:e,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],standalone:!0,features:[q]});let n=e;return n})();var gx=(()=>{let e=class e extends mx{constructor(t,r,o){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new nt,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let c=this._document.createComment("dom-portal");s.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);let r=t.viewContainerRef!=null?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),a=r.createComponent(s,r.length,t.injector||r.injector,t.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=t,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(t){t.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}};e.\u0275fac=function(r){return new(r||e)(F(Hs),F(Wn),F(xt))},e.\u0275dir=$e({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[ut.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[q]});let n=e;return n})();var $B=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({});let n=e;return n})();var Gie=20,If=(()=>{let e=class e{constructor(t,r,o){this._ngZone=t,this._platform=r,this._scrolled=new gt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=Gie){return this._platform.isBrowser?new Lt(r=>{this._globalSubscription||this._addGlobalListener();let o=t>0?this._scrolled.pipe(jb(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):pt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){let o=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(vi(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(t){let r=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let o=Ts(r),s=t.getElementRef().nativeElement;do if(o==s)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let t=this._getWindow();return No(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(de(Qe),de(wi),de(xt,8))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ml=(()=>{let e=class e{constructor(t,r,o,s){this.elementRef=t,this.scrollDispatcher=r,this.ngZone=o,this.dir=s,this._destroyed=new gt,this._elementScrolled=new Lt(a=>this.ngZone.runOutsideAngular(()=>No(this.elementRef.nativeElement,"scroll").pipe(Ci(this._destroyed)).subscribe(a)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){let r=this.elementRef.nativeElement,o=this.dir&&this.dir.value=="rtl";t.left==null&&(t.left=o?t.end:t.start),t.right==null&&(t.right=o?t.start:t.end),t.bottom!=null&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),o&&Cf()!=Ss.NORMAL?(t.left!=null&&(t.right=r.scrollWidth-r.clientWidth-t.left),Cf()==Ss.INVERTED?t.left=t.right:Cf()==Ss.NEGATED&&(t.left=t.right?-t.right:t.right)):t.right!=null&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){let r=this.elementRef.nativeElement;tx()?r.scrollTo(t):(t.top!=null&&(r.scrollTop=t.top),t.left!=null&&(r.scrollLeft=t.left))}measureScrollOffset(t){let r="left",o="right",s=this.elementRef.nativeElement;if(t=="top")return s.scrollTop;if(t=="bottom")return s.scrollHeight-s.clientHeight-s.scrollTop;let a=this.dir&&this.dir.value=="rtl";return t=="start"?t=a?o:r:t=="end"&&(t=a?r:o),a&&Cf()==Ss.INVERTED?t==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:a&&Cf()==Ss.NEGATED?t==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}};e.\u0275fac=function(r){return new(r||e)(F(et),F(If),F(Qe),F(wa,8))},e.\u0275dir=$e({type:e,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0});let n=e;return n})(),Wie=20,Sl=(()=>{let e=class e{constructor(t,r,o){this._platform=t,this._change=new gt,this._changeListener=s=>{this._change.next(s)},this._document=o,r.runOutsideAngular(()=>{if(t.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+o,right:t.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,r=this._getWindow(),o=t.documentElement,s=o.getBoundingClientRect(),a=-s.top||t.body.scrollTop||r.scrollY||o.scrollTop||0,c=-s.left||t.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:a,left:c}}change(t=Wie){return t>0?this._change.pipe(jb(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(de(wi),de(Qe),de(xt,8))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var su=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({});let n=e;return n})(),E1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({imports:[wl,su,wl,su]});let n=e;return n})();var ri=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(ri||{}),Ma="*";function bx(n,e){return{type:ri.Trigger,name:n,definitions:e,options:{}}}function au(n,e=null){return{type:ri.Animate,styles:e,timings:n}}function qB(n,e=null){return{type:ri.Sequence,steps:n,options:e}}function Qo(n){return{type:ri.Style,styles:n,offset:null}}function cu(n,e,i){return{type:ri.State,name:n,styles:e,options:i}}function lu(n,e,i=null){return{type:ri.Transition,expr:n,animation:e,options:i}}var Rl=class{constructor(e=0,i=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+i}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let i=e=="start"?this._onStartFns:this._onDoneFns;i.forEach(t=>t()),i.length=0}},vg=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let i=0,t=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++i==o&&this._onFinish()}),s.onDestroy(()=>{++t==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let i=e*this.totalTime;this.players.forEach(t=>{let r=t.totalTime?Math.min(1,i/t.totalTime):1;t.setPosition(r)})}getPosition(){let e=this.players.reduce((i,t)=>i===null||t.totalTime>i.totalTime?t:i,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let i=e=="start"?this._onStartFns:this._onDoneFns;i.forEach(t=>t()),i.length=0}},_x="!";var k1=["*"];function Xie(n,e){n&1&&Q(0)}var Yie=["tabListContainer"],Zie=["tabList"],Qie=["tabListInner"],Kie=["nextPaginator"],Jie=["previousPaginator"],ene=n=>({animationDuration:n}),tne=(n,e)=>({value:n,params:e});function ine(n,e){}var nne=["tabBodyWrapper"],rne=["tabHeader"];function one(n,e){}function sne(n,e){if(n&1&&Vt(0,one,0,0,"ng-template",12),n&2){let i=qt().$implicit;P("cdkPortalOutlet",i.templateLabel)}}function ane(n,e){if(n&1&&kt(0),n&2){let i=qt().$implicit;zc(i.textLabel)}}function cne(n,e){if(n&1){let i=Zt();H(0,"div",7,2),Le("click",function(){let r=ht(i),o=r.$implicit,s=r.$index,a=qt(),c=At(1);return ft(a._handleClick(o,c,s))})("cdkFocusChange",function(r){let o=ht(i).$index,s=qt();return ft(s._tabFocusChanged(r,o))}),fe(2,"span",8)(3,"div",9),H(4,"span",10)(5,"span",11),Vt(6,sne,1,1,null,12)(7,ane,1,1),J()()()}if(n&2){let i=e.$implicit,t=e.$index,r=At(1),o=qt();Ho(i.labelClass),$t("mdc-tab--active",o.selectedIndex===t),P("id",o._getTabLabelId(t))("disabled",i.disabled)("fitInkBarToContent",o.fitInkBarToContent),Hi("tabIndex",o._getTabIndex(t))("aria-posinset",t+1)("aria-setsize",o._tabs.length)("aria-controls",o._getTabContentId(t))("aria-selected",o.selectedIndex===t)("aria-label",i.ariaLabel||null)("aria-labelledby",!i.ariaLabel&&i.ariaLabelledby?i.ariaLabelledby:null),j(3),P("matRippleTrigger",r)("matRippleDisabled",i.disabled||o.disableRipple),j(3),wo(6,i.templateLabel?6:7)}}function lne(n,e){n&1&&Q(0)}function dne(n,e){if(n&1){let i=Zt();H(0,"mat-tab-body",13),Le("_onCentered",function(){ht(i);let r=qt();return ft(r._removeTabBodyWrapperHeight())})("_onCentering",function(r){ht(i);let o=qt();return ft(o._setTabBodyWrapperHeight(r))}),J()}if(n&2){let i=e.$implicit,t=e.$index,r=qt();Ho(i.bodyClass),$t("mat-mdc-tab-body-active",r.selectedIndex===t),P("id",r._getTabContentId(t))("content",i.content)("position",i.position)("origin",i.origin)("animationDuration",r.animationDuration)("preserveContent",r.preserveContent),Hi("tabindex",r.contentTabIndex!=null&&r.selectedIndex===t?r.contentTabIndex:null)("aria-labelledby",r._getTabLabelId(t))("aria-hidden",r.selectedIndex!==t)}}var une=new Ee("MatTabContent"),hne=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(r){return new(r||e)(F(or))},e.\u0275dir=$e({type:e,selectors:[["","matTabContent",""]],standalone:!0,features:[ie([{provide:une,useExisting:e}])]});let n=e;return n})(),fne=new Ee("MatTabLabel"),ZB=new Ee("MAT_TAB"),mne=(()=>{let e=class e extends WB{constructor(t,r,o){super(t,r),this._closestTab=o}};e.\u0275fac=function(r){return new(r||e)(F(or),F(Wn),F(ZB,8))},e.\u0275dir=$e({type:e,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],standalone:!0,features:[ie([{provide:fne,useExisting:e}]),q]});let n=e;return n})(),QB=new Ee("MAT_TAB_GROUP"),F1=(()=>{let e=class e{get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}get content(){return this._contentPortal}constructor(t,r){this._viewContainerRef=t,this._closestTabGroup=r,this.disabled=!1,this._explicitContent=void 0,this.textLabel="",this._contentPortal=null,this._stateChanges=new gt,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new ou(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&t._closestTab===this&&(this._templateLabel=t)}};e.\u0275fac=function(r){return new(r||e)(F(Wn),F(QB,8))},e.\u0275cmp=L({type:e,selectors:[["mat-tab"]],contentQueries:function(r,o,s){if(r&1&&(Yi(s,mne,5),Yi(s,hne,7,or)),r&2){let a;at(a=ct())&&(o.templateLabel=a.first),at(a=ct())&&(o._explicitContent=a.first)}},viewQuery:function(r,o){if(r&1&&Xt(or,7),r&2){let s;at(s=ct())&&(o._implicitContent=s.first)}},hostAttrs:["hidden",""],inputs:{disabled:[ut.HasDecoratorInputTransform,"disabled","disabled",Si],textLabel:[ut.None,"label","textLabel"],ariaLabel:[ut.None,"aria-label","ariaLabel"],ariaLabelledby:[ut.None,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],standalone:!0,features:[ie([{provide:ZB,useExisting:e}]),ln,Hn,Ei],ngContentSelectors:k1,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Vt(0,Xie,1,0,"ng-template"))},encapsulation:2});let n=e;return n})(),A1="mdc-tab-indicator--active",XB="mdc-tab-indicator--no-transition",I1=class{constructor(e){this._items=e}hide(){this._items.forEach(e=>e.deactivateInkBar())}alignToElement(e){let i=this._items.find(r=>r.elementRef.nativeElement===e),t=this._currentItem;if(i!==t&&(t?.deactivateInkBar(),i)){let r=t?.elementRef.nativeElement.getBoundingClientRect?.();i.activateInkBar(r),this._currentItem=i}}},pne=(()=>{let e=class e{constructor(){this._elementRef=te(et),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(t){this._fitToContent!==t&&(this._fitToContent=t,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(t){let r=this._elementRef.nativeElement;if(!t||!r.getBoundingClientRect||!this._inkBarContentElement){r.classList.add(A1);return}let o=r.getBoundingClientRect(),s=t.width/o.width,a=t.left-o.left;r.classList.add(XB),this._inkBarContentElement.style.setProperty("transform",`translateX(${a}px) scaleX(${s})`),r.getBoundingClientRect(),r.classList.remove(XB),r.classList.add(A1),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this._elementRef.nativeElement.classList.remove(A1)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){let t=this._elementRef.nativeElement.ownerDocument||document,r=this._inkBarElement=t.createElement("span"),o=this._inkBarContentElement=t.createElement("span");r.className="mdc-tab-indicator",o.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",r.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){this._inkBarElement;let t=this._fitToContent?this._elementRef.nativeElement.querySelector(".mdc-tab__content"):this._elementRef.nativeElement;t.appendChild(this._inkBarElement)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=$e({type:e,inputs:{fitInkBarToContent:[ut.HasDecoratorInputTransform,"fitInkBarToContent","fitInkBarToContent",Si]},features:[ln]});let n=e;return n})();var KB=(()=>{let e=class e extends pne{constructor(t){super(),this.elementRef=t,this.disabled=!1}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}};e.\u0275fac=function(r){return new(r||e)(F(et))},e.\u0275dir=$e({type:e,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(r,o){r&2&&(Hi("aria-disabled",!!o.disabled),$t("mat-mdc-tab-disabled",o.disabled))},inputs:{disabled:[ut.HasDecoratorInputTransform,"disabled","disabled",Si]},standalone:!0,features:[ln,q]});let n=e;return n})(),YB=xl({passive:!0}),gne=650,bne=100,_ne=(()=>{let e=class e{get selectedIndex(){return this._selectedIndex}set selectedIndex(t){let r=isNaN(t)?0:t;this._selectedIndex!=r&&(this._selectedIndexChanged=!0,this._selectedIndex=r,this._keyManager&&this._keyManager.updateActiveItem(r))}constructor(t,r,o,s,a,c,l){this._elementRef=t,this._changeDetectorRef=r,this._viewportRuler=o,this._dir=s,this._ngZone=a,this._platform=c,this._animationMode=l,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new gt,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new gt,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new nt,this.indexFocused=new nt,a.runOutsideAngular(()=>{No(t.nativeElement,"mouseleave").pipe(Ci(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){No(this._previousPaginator.nativeElement,"touchstart",YB).pipe(Ci(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),No(this._nextPaginator.nativeElement,"touchstart",YB).pipe(Ci(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){let t=this._dir?this._dir.change:pt("ltr"),r=this._viewportRuler.change(150),o=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new ax(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe(Rn(1)).subscribe(o),rs(t,r,this._items.changes,this._itemsResized()).pipe(Ci(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),o()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(s=>{this.indexFocused.emit(s),this._setTabFocus(s)})}_itemsResized(){return typeof ResizeObserver!="function"?fn:this._items.changes.pipe(vo(this._items),Pn(t=>new Lt(r=>this._ngZone.runOutsideAngular(()=>{let o=new ResizeObserver(s=>r.next(s));return t.forEach(s=>o.observe(s.elementRef.nativeElement)),()=>{o.disconnect()}}))),Hl(1),vi(t=>t.some(r=>r.contentRect.width>0&&r.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!Ef(t))switch(t.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){let r=this._items.get(this.focusIndex);r&&!r.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t))}break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){let t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){!this._isValidIndex(t)||this.focusIndex===t||!this._keyManager||this._keyManager.setActiveItem(t)}_isValidIndex(t){return this._items?!!this._items.toArray()[t]:!0}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();let r=this._tabListContainer.nativeElement;this._getLayoutDirection()=="ltr"?r.scrollLeft=0:r.scrollLeft=r.scrollWidth-r.offsetWidth}}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;let t=this.scrollDistance,r=this._getLayoutDirection()==="ltr"?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(r)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){let r=this._tabListContainer.nativeElement.offsetWidth,o=(t=="before"?-1:1)*r/3;return this._scrollTo(this._scrollDistance+o)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;let r=this._items?this._items.toArray()[t]:null;if(!r)return;let o=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:s,offsetWidth:a}=r.elementRef.nativeElement,c,l;this._getLayoutDirection()=="ltr"?(c=s,l=c+a):(l=this._tabListInner.nativeElement.offsetWidth-s,c=l-a);let d=this.scrollDistance,u=this.scrollDistance+o;c<d?this.scrollDistance-=d-c:l>u&&(this.scrollDistance+=Math.min(l-u,c-d))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{let t=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=this.scrollDistance==0,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){let t=this._tabListInner.nativeElement.scrollWidth,r=this._tabListContainer.nativeElement.offsetWidth;return t-r||0}_alignInkBarToSelectedTab(){let t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,r=t?t.elementRef.nativeElement:null;r?this._inkBar.alignToElement(r):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,r){r&&r.button!=null&&r.button!==0||(this._stopInterval(),Jf(gne,bne).pipe(Ci(rs(this._stopScrolling,this._destroyed))).subscribe(()=>{let{maxScrollDistance:o,distance:s}=this._scrollHeader(t);(s===0||s>=o)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};let r=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(r,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:r,distance:this._scrollDistance}}};e.\u0275fac=function(r){return new(r||e)(F(et),F(Wi),F(Sl),F(wa,8),F(Qe),F(wi),F(Gn,8))},e.\u0275dir=$e({type:e,inputs:{disablePagination:[ut.HasDecoratorInputTransform,"disablePagination","disablePagination",Si],selectedIndex:[ut.HasDecoratorInputTransform,"selectedIndex","selectedIndex",rd]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[ln]});let n=e;return n})(),vne=(()=>{let e=class e extends _ne{constructor(t,r,o,s,a,c,l){super(t,r,o,s,a,c,l),this.disableRipple=!1}ngAfterContentInit(){this._inkBar=new I1(this._items),super.ngAfterContentInit()}_itemSelected(t){t.preventDefault()}};e.\u0275fac=function(r){return new(r||e)(F(et),F(Wi),F(Sl),F(wa,8),F(Qe),F(wi),F(Gn,8))},e.\u0275cmp=L({type:e,selectors:[["mat-tab-header"]],contentQueries:function(r,o,s){if(r&1&&Yi(s,KB,4),r&2){let a;at(a=ct())&&(o._items=a)}},viewQuery:function(r,o){if(r&1&&(Xt(Yie,7),Xt(Zie,7),Xt(Qie,7),Xt(Kie,5),Xt(Jie,5)),r&2){let s;at(s=ct())&&(o._tabListContainer=s.first),at(s=ct())&&(o._tabList=s.first),at(s=ct())&&(o._tabListInner=s.first),at(s=ct())&&(o._nextPaginator=s.first),at(s=ct())&&(o._previousPaginator=s.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(r,o){r&2&&$t("mat-mdc-tab-header-pagination-controls-enabled",o._showPaginationControls)("mat-mdc-tab-header-rtl",o._getLayoutDirection()=="rtl")},inputs:{disableRipple:[ut.HasDecoratorInputTransform,"disableRipple","disableRipple",Si]},standalone:!0,features:[ln,q,Ei],ngContentSelectors:k1,decls:13,vars:10,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"click","mousedown","touchend","matRippleDisabled","disabled"],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],[1,"mat-mdc-tab-labels"],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"mousedown","click","touchend","matRippleDisabled","disabled"]],template:function(r,o){if(r&1){let s=Zt();ae(),H(0,"button",5,0),Le("click",function(){return ht(s),ft(o._handlePaginatorClick("before"))})("mousedown",function(c){return ht(s),ft(o._handlePaginatorPress("before",c))})("touchend",function(){return ht(s),ft(o._stopInterval())}),fe(2,"div",6),J(),H(3,"div",7,1),Le("keydown",function(c){return ht(s),ft(o._handleKeydown(c))}),H(5,"div",8,2),Le("cdkObserveContent",function(){return ht(s),ft(o._onContentChanges())}),H(7,"div",9,3),Q(9),J()()(),H(10,"button",10,4),Le("mousedown",function(c){return ht(s),ft(o._handlePaginatorPress("after",c))})("click",function(){return ht(s),ft(o._handlePaginatorClick("after"))})("touchend",function(){return ht(s),ft(o._stopInterval())}),fe(12,"div",6),J()}r&2&&($t("mat-mdc-tab-header-pagination-disabled",o._disableScrollBefore),P("matRippleDisabled",o._disableScrollBefore||o.disableRipple)("disabled",o._disableScrollBefore||null),j(3),$t("_mat-animation-noopable",o._animationMode==="NoopAnimations"),j(7),$t("mat-mdc-tab-header-pagination-disabled",o._disableScrollAfter),P("matRippleDisabled",o._disableScrollAfter||o.disableRipple)("disabled",o._disableScrollAfter||null))},dependencies:[mg,ix],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color)}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}._mat-animation-noopable span.mdc-tab-indicator__content,._mat-animation-noopable span.mdc-tab__text-label{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height);border-bottom-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height);border-top-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2});let n=e;return n})(),yne=new Ee("MAT_TABS_CONFIG"),xne={translateTab:bx("translateTab",[cu("center, void, left-origin-center, right-origin-center",Qo({transform:"none"})),cu("left",Qo({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),cu("right",Qo({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),lu("* => left, * => right, left => center, right => center",au("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),lu("void => left-origin-center",[Qo({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),au("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),lu("void => right-origin-center",[Qo({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),au("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])},wne=(()=>{let e=class e extends gx{constructor(t,r,o,s){super(t,r,s),this._host=o,this._centeringSub=_i.EMPTY,this._leavingSub=_i.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(vo(this._host._isCenterPosition(this._host._position))).subscribe(t=>{t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(F(Hs),F(Wn),F(ge(()=>JB)),F(xt))},e.\u0275dir=$e({type:e,selectors:[["","matTabBodyHost",""]],standalone:!0,features:[q]});let n=e;return n})(),JB=(()=>{let e=class e{set position(t){this._positionIndex=t,this._computePositionAnimationState()}constructor(t,r,o){this._elementRef=t,this._dir=r,this._dirChangeSubscription=_i.EMPTY,this._translateTabComplete=new gt,this._onCentering=new nt,this._beforeCentering=new nt,this._afterLeavingCenter=new nt,this._onCentered=new nt(!0),this.animationDuration="500ms",this.preserveContent=!1,r&&(this._dirChangeSubscription=r.change.subscribe(s=>{this._computePositionAnimationState(s),o.markForCheck()})),this._translateTabComplete.pipe(Pc((s,a)=>s.fromState===a.fromState&&s.toState===a.toState)).subscribe(s=>{this._isCenterPosition(s.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(s.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){this._position=="center"&&this.origin!=null&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){let r=this._isCenterPosition(t.toState);this._beforeCentering.emit(r),r&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_isCenterPosition(t){return t=="center"||t=="left-origin-center"||t=="right-origin-center"}_computePositionAnimationState(t=this._getLayoutDirection()){this._positionIndex<0?this._position=t=="ltr"?"left":"right":this._positionIndex>0?this._position=t=="ltr"?"right":"left":this._position="center"}_computePositionFromOrigin(t){let r=this._getLayoutDirection();return r=="ltr"&&t<=0||r=="rtl"&&t>0?"left-origin-center":"right-origin-center"}};e.\u0275fac=function(r){return new(r||e)(F(et),F(wa,8),F(Wi))},e.\u0275cmp=L({type:e,selectors:[["mat-tab-body"]],viewQuery:function(r,o){if(r&1&&Xt(gx,5),r&2){let s;at(s=ct())&&(o._portalHost=s.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:[ut.None,"content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},standalone:!0,features:[Ei],decls:3,vars:6,consts:[["content",""],["cdkScrollable","",1,"mat-mdc-tab-body-content"],["matTabBodyHost",""]],template:function(r,o){if(r&1){let s=Zt();H(0,"div",1,0),Le("@translateTab.start",function(c){return ht(s),ft(o._onTranslateTabStarted(c))})("@translateTab.done",function(c){return ht(s),ft(o._translateTabComplete.next(c))}),Vt(2,ine,0,0,"ng-template",2),J()}r&2&&P("@translateTab",$n(3,tne,o._position,vt(1,ene,o.animationDuration)))},dependencies:[wne,Ml],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[xne.translateTab]}});let n=e;return n})(),Mne=0,Sne=!0,eU=(()=>{let e=class e{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(t){this._fitInkBarToContent=t,this._changeDetectorRef.markForCheck()}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=isNaN(t)?null:t}get animationDuration(){return this._animationDuration}set animationDuration(t){let r=t+"";this._animationDuration=/^\d+$/.test(r)?t+"ms":r}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(t){this._contentTabIndex=isNaN(t)?null:t}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){if(!Sne)throw new Error("mat-tab-group background color must be set through the Sass theming API");let r=this._elementRef.nativeElement.classList;r.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),t&&r.add("mat-tabs-with-background",`mat-background-${t}`),this._backgroundColor=t}constructor(t,r,o,s){this._elementRef=t,this._changeDetectorRef=r,this._animationMode=s,this._tabs=new Bs,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=_i.EMPTY,this._tabLabelSubscription=_i.EMPTY,this._fitInkBarToContent=!1,this.stretchTabs=!0,this.dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this.disablePagination=!1,this.disableRipple=!1,this.preserveContent=!1,this.selectedIndexChange=new nt,this.focusChange=new nt,this.animationDone=new nt,this.selectedTabChange=new nt(!0),this._isServer=!te(wi).isBrowser,this._groupId=Mne++,this.animationDuration=o&&o.animationDuration?o.animationDuration:"500ms",this.disablePagination=o&&o.disablePagination!=null?o.disablePagination:!1,this.dynamicHeight=o&&o.dynamicHeight!=null?o.dynamicHeight:!1,o?.contentTabIndex!=null&&(this.contentTabIndex=o.contentTabIndex),this.preserveContent=!!o?.preserveContent,this.fitInkBarToContent=o&&o.fitInkBarToContent!=null?o.fitInkBarToContent:!1,this.stretchTabs=o&&o.stretchTabs!=null?o.stretchTabs:!0}ngAfterContentChecked(){let t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){let r=this._selectedIndex==null;if(!r){this.selectedTabChange.emit(this._createChangeEvent(t));let o=this._tabBodyWrapper.nativeElement;o.style.minHeight=o.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((o,s)=>o.isActive=s===t),r||(this.selectedIndexChange.emit(t),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((r,o)=>{r.position=o-t,this._selectedIndex!=null&&r.position==0&&!r.origin&&(r.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{let t=this._clampTabIndex(this._indexToSelect);if(t===this._selectedIndex){let r=this._tabs.toArray(),o;for(let s=0;s<r.length;s++)if(r[s].isActive){this._indexToSelect=this._selectedIndex=s,this._lastFocusedTabIndex=null,o=r[s];break}!o&&r[t]&&Promise.resolve().then(()=>{r[t].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(t))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(vo(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(r=>r._closestTabGroup===this||!r._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(t){let r=this._tabHeader;r&&(r.focusIndex=t)}_focusChanged(t){this._lastFocusedTabIndex=t,this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){let r=new P1;return r.index=t,this._tabs&&this._tabs.length&&(r.tab=this._tabs.toArray()[t]),r}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=rs(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this.dynamicHeight||!this._tabBodyWrapperHeight)return;let r=this._tabBodyWrapper.nativeElement;r.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(r.style.height=t+"px")}_removeTabBodyWrapperHeight(){let t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,r,o){r.focusIndex=o,t.disabled||(this.selectedIndex=o)}_getTabIndex(t){let r=this._lastFocusedTabIndex??this.selectedIndex;return t===r?0:-1}_tabFocusChanged(t,r){t&&t!=="mouse"&&t!=="touch"&&(this._tabHeader.focusIndex=r)}};e.\u0275fac=function(r){return new(r||e)(F(et),F(Wi),F(yne,8),F(Gn,8))},e.\u0275cmp=L({type:e,selectors:[["mat-tab-group"]],contentQueries:function(r,o,s){if(r&1&&Yi(s,F1,5),r&2){let a;at(a=ct())&&(o._allTabs=a)}},viewQuery:function(r,o){if(r&1&&(Xt(nne,5),Xt(rne,5)),r&2){let s;at(s=ct())&&(o._tabBodyWrapper=s.first),at(s=ct())&&(o._tabHeader=s.first)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:10,hostBindings:function(r,o){r&2&&(Ho("mat-"+(o.color||"primary")),zo("--mat-tab-animation-duration",o.animationDuration),$t("mat-mdc-tab-group-dynamic-height",o.dynamicHeight)("mat-mdc-tab-group-inverted-header",o.headerPosition==="below")("mat-mdc-tab-group-stretch-tabs",o.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[ut.HasDecoratorInputTransform,"fitInkBarToContent","fitInkBarToContent",Si],stretchTabs:[ut.HasDecoratorInputTransform,"mat-stretch-tabs","stretchTabs",Si],dynamicHeight:[ut.HasDecoratorInputTransform,"dynamicHeight","dynamicHeight",Si],selectedIndex:[ut.HasDecoratorInputTransform,"selectedIndex","selectedIndex",rd],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[ut.HasDecoratorInputTransform,"contentTabIndex","contentTabIndex",rd],disablePagination:[ut.HasDecoratorInputTransform,"disablePagination","disablePagination",Si],disableRipple:[ut.HasDecoratorInputTransform,"disableRipple","disableRipple",Si],preserveContent:[ut.HasDecoratorInputTransform,"preserveContent","preserveContent",Si],backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],standalone:!0,features:[ie([{provide:QB,useExisting:e}]),ln,Ei],ngContentSelectors:k1,decls:9,vars:6,consts:[["tabHeader",""],["tabBodyWrapper",""],["tabNode",""],[3,"indexFocused","selectFocusedIndex","selectedIndex","disableRipple","disablePagination"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","mdc-tab--active","class","disabled","fitInkBarToContent"],[1,"mat-mdc-tab-body-wrapper"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","class","content","position","origin","animationDuration","preserveContent"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"click","cdkFocusChange","id","disabled","fitInkBarToContent"],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"_onCentered","_onCentering","id","content","position","origin","animationDuration","preserveContent"]],template:function(r,o){if(r&1){let s=Zt();ae(),H(0,"mat-tab-header",3,0),Le("indexFocused",function(c){return ht(s),ft(o._focusChanged(c))})("selectFocusedIndex",function(c){return ht(s),ft(o.selectedIndex=c)}),Z_(2,cne,8,17,"div",4,Y_),J(),Vt(4,lne,1,0),H(5,"div",5,1),Z_(7,dne,1,13,"mat-tab-body",6,Y_),J()}r&2&&(P("selectedIndex",o.selectedIndex||0)("disableRipple",o.disableRipple)("disablePagination",o.disablePagination),j(2),Q_(o._tabs),j(2),wo(4,o._isServer?4:-1),j(),$t("_mat-animation-noopable",o._animationMode==="NoopAnimations"),j(2),Q_(o._tabs))},dependencies:[vne,KB,xB,mg,gx,JB],styles:['.mdc-tab{min-width:90px;padding-right:24px;padding-left:24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;margin:0;padding-top:0;padding-bottom:0;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;-webkit-appearance:none;z-index:1}.mdc-tab::-moz-focus-inner{padding:0;border:0}.mdc-tab[hidden]{display:none}.mdc-tab--min-width{flex:0 1 auto}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab__icon{transition:150ms color linear;z-index:2}.mdc-tab--stacked .mdc-tab__content{flex-direction:column;align-items:center;justify-content:center}.mdc-tab--stacked .mdc-tab__text-label{padding-top:6px;padding-bottom:4px}.mdc-tab--active .mdc-tab__text-label,.mdc-tab--active .mdc-tab__icon{transition-delay:100ms}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label,.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl]{padding-left:0;padding-right:8px}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator__content--icon{align-self:center;margin:0 auto}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}.mdc-tab-indicator .mdc-tab-indicator__content{transition:250ms transform cubic-bezier(0.4, 0, 0.2, 1)}.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition:150ms opacity linear}.mdc-tab-indicator--active.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition-delay:100ms}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;font-family:var(--mat-tab-header-label-text-font);font-size:var(--mat-tab-header-label-text-size);letter-spacing:var(--mat-tab-header-label-text-tracking);line-height:var(--mat-tab-header-label-text-line-height);font-weight:var(--mat-tab-header-label-text-weight)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-top-width:var(--mdc-tab-indicator-active-indicator-height)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:not(.mdc-tab--stacked){height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab:not(:disabled).mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color)}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color)}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color);display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2});let n=e;return n})(),P1=class{};var j1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({imports:[Mi,Mi]});let n=e;return n})();var L1=new Ee("HIGHLIGHT_OPTIONS");function iU(n){return[{provide:L1,useValue:n}]}var Pf=function(n){return n.FULL_WITH_CORE_LIBRARY_IMPORTS="The full library and the core library were imported, only one of them should be imported!",n.FULL_WITH_LANGUAGE_IMPORTS="The highlighting languages were imported they are not needed!",n.CORE_WITHOUT_LANGUAGE_IMPORTS="The highlighting languages were not imported!",n.LANGUAGE_WITHOUT_CORE_IMPORTS="The core library was not imported!",n.NO_FULL_AND_NO_CORE_IMPORTS="Highlight.js library was not imported!",n}(Pf||{}),Tne=(()=>{let e=class e{constructor(){this.document=te(xt),this.isPlatformBrowser=sh(te(Vr)),this.options=te(L1,{optional:!0}),this._ready=new Mn(null),this.ready=zw(this._ready.asObservable().pipe(vi(t=>!!t))),this.isPlatformBrowser&&(this.document.defaultView.hljs?this._ready.next(this.document.defaultView.hljs):this._loadLibrary().pipe(Pn(t=>this.options?.lineNumbersLoader?(this.document.defaultView.hljs=t,this.loadLineNumbers().pipe(zi(r=>{r.activateLineNumbers(),this._ready.next(t)}))):(this._ready.next(t),fn)),Nr(t=>(console.error("[HLJS] ",t),this._ready.error(t),fn))).subscribe(),this.options?.themePath&&this.loadTheme(this.options.themePath))}_loadLibrary(){if(this.options){if(this.options.fullLibraryLoader&&this.options.coreLibraryLoader)return Kr(()=>Pf.FULL_WITH_CORE_LIBRARY_IMPORTS);if(this.options.fullLibraryLoader&&this.options.languages)return Kr(()=>Pf.FULL_WITH_LANGUAGE_IMPORTS);if(this.options.coreLibraryLoader&&!this.options.languages)return Kr(()=>Pf.CORE_WITHOUT_LANGUAGE_IMPORTS);if(!this.options.coreLibraryLoader&&this.options.languages)return Kr(()=>Pf.LANGUAGE_WITHOUT_CORE_IMPORTS);if(this.options.fullLibraryLoader)return this.loadFullLibrary();if(this.options.coreLibraryLoader&&this.options.languages&&Object.keys(this.options.languages).length)return this.loadCoreLibrary().pipe(Pn(t=>this._loadLanguages(t)))}return Kr(()=>Pf.NO_FULL_AND_NO_CORE_IMPORTS)}_loadLanguages(t){let r=Object.entries(this.options.languages).map(([o,s])=>O1(s()).pipe(zi(a=>t.registerLanguage(o,a))));return Vl(r).pipe(lt(()=>t))}loadCoreLibrary(){return O1(this.options.coreLibraryLoader())}loadFullLibrary(){return O1(this.options.fullLibraryLoader())}loadLineNumbers(){return ki(this.options.lineNumbersLoader())}setTheme(t){this.isPlatformBrowser&&(this._themeLinkElement?this._themeLinkElement.href=t:this.loadTheme(t))}loadTheme(t){this._themeLinkElement=this.document.createElement("link"),this._themeLinkElement.href=t,this._themeLinkElement.type="text/css",this._themeLinkElement.rel="stylesheet",this._themeLinkElement.media="screen,print",this.document.head.appendChild(this._themeLinkElement)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),O1=n=>ki(n).pipe(vi(e=>!!e?.default),lt(e=>e.default)),Cne=(()=>{let e=class e{constructor(){this.loader=te(Tne),this.options=te(L1,{optional:!0}),this.hljsSignal=eR(null),this.hljs=qj(()=>this.hljsSignal()),this.loader.ready.then(t=>{this.hljsSignal.set(t),this.options?.highlightOptions&&t.configure(this.options.highlightOptions)})}highlight(t,r){return gi(this,null,function*(){return(yield this.loader.ready).highlight(t,r)})}highlightAuto(t,r){return gi(this,null,function*(){return(yield this.loader.ready).highlightAuto(t,r)})}highlightElement(t){return gi(this,null,function*(){(yield this.loader.ready).highlightElement(t)})}highlightAll(){return gi(this,null,function*(){(yield this.loader.ready).highlightAll()})}configure(t){return gi(this,null,function*(){(yield this.loader.ready).configure(t)})}registerLanguage(t,r){return gi(this,null,function*(){(yield this.loader.ready).registerLanguage(t,r)})}unregisterLanguage(t){return gi(this,null,function*(){(yield this.loader.ready).unregisterLanguage(t)})}registerAliases(o,s){return gi(this,arguments,function*(t,{languageName:r}){(yield this.loader.ready).registerAliases(t,{languageName:r})})}listLanguages(){return gi(this,null,function*(){return(yield this.loader.ready).listLanguages()})}getLanguage(t){return gi(this,null,function*(){return(yield this.loader.ready).getLanguage(t)})}safeMode(){return gi(this,null,function*(){(yield this.loader.ready).safeMode()})}debugMode(){return gi(this,null,function*(){(yield this.loader.ready).debugMode()})}lineNumbersBlock(t,r){return gi(this,null,function*(){let o=yield this.loader.ready;o.lineNumbersBlock&&o.lineNumbersBlock(t,r)})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),N1;function Ene(){if(!N1)try{N1=window?.trustedTypes?.createPolicy("ngx-highlightjs",{createHTML:n=>n})}catch{}return N1}function Dne(n){return Ene()?.createHTML(n)||n}var tU=(()=>{let e=class e{constructor(){this._hljs=te(Cne),this._nativeElement=te(et).nativeElement,this._sanitizer=te(Fm),this._platform=te(Vr),sh(this._platform)&&(nh(()=>{let t=this.code();this.setTextContent(t||""),t&&this.highlightElement(t)}),nh(()=>{let t=this.highlightResult();this.setInnerHTML(t?.value),this.highlighted.emit(t)}))}setTextContent(t){requestAnimationFrame(()=>this._nativeElement.textContent=t)}setInnerHTML(t){requestAnimationFrame(()=>this._nativeElement.innerHTML=Dne(this._sanitizer.sanitize(sr.HTML,t)||""))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=$e({type:e});let n=e;return n})(),nU=(()=>{let e=class e extends tU{constructor(){super(...arguments),this.code=hF(null,{alias:"highlight"}),this.highlightResult=eR(null),this.highlighted=new nt}highlightElement(t){return gi(this,null,function*(){let r=yield this._hljs.highlight(t,{language:this.language,ignoreIllegals:this.ignoreIllegals});this.highlightResult.set(r)})}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275dir=$e({type:e,selectors:[["","highlight",""]],hostVars:2,hostBindings:function(r,o){r&2&&$t("hljs",!0)},inputs:{code:[ut.SignalBased,"highlight","code"],language:"language",ignoreIllegals:[ut.HasDecoratorInputTransform,"ignoreIllegals","ignoreIllegals",Si]},outputs:{highlighted:"highlighted"},standalone:!0,features:[ie([{provide:tU,useExisting:e}]),ln,q]});let n=e;return n})();var rU=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({});let n=e;return n})();function oU(n){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!]))?/.test(n)}var Ine=new Ee("GIST_OPTIONS");var Pne=(()=>{let e=class e{constructor(){this._http=te(Am),this._options=te(Ine,{optional:!0})}getCodeFromGist(t){let r;return this._options?.clientId&&this._options?.clientSecret&&(r=new Ys().set("client_id",this._options.clientId).set("client_secret",this._options.clientSecret)),this.fetchFile(`https://api.github.com/gists/${t}`,{params:r,responseType:"json"})}getCodeFromUrl(t){return this.fetchFile(t,{responseType:"text"})}fetchFile(t,r){return oU(t)?this._http.get(t,r).pipe(zl(1),Nr(o=>(console.error("[NgxHighlight]: Unable to fetch the URL!",o.message),fn))):fn}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var kne=new Ee("HIGHLIGHT_FILE_LOCATION",{providedIn:"root",factory:Fne});function Fne(){let n=te(xt)?.location;return{getPathname:()=>n?n.origin:""}}var sU=(()=>{let e=class e{constructor(){this._location=te(kne),this._loader=te(Pne)}transform(t){return this._loader.getCodeFromUrl(oU(t)?t:`${this._location.getPathname()}/${t}`)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Bo({name:"codeFromUrl",type:e,pure:!0,standalone:!0});let n=e;return n})(),aU=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({});let n=e;return n})();function One(n,e){if(n&1&&(H(0,"mat-tab",5)(1,"pre"),kt(2,"            "),fe(3,"code",6),Fi(4,"codeFromUrl"),Fi(5,"async"),kt(6,`
        `),J()()),n&2){let i=e.$implicit,t=e.index,r=qt();P("label",r.fileNames[t]),j(3),P("highlight",Gi(5,5,Gi(4,3,i)))("language",r.getLanguage(r.fileNames[t]))}}var cU=(()=>{let e=class e{constructor(t){this.editorService=t,this.fileNames=[],this.lineNumbers=!1}set codeUrls(t){this.editorService.setUrls(t),this.fileNames=this.editorService.fileNames}get codeUrls(){return this.editorService.urls}getLanguage(t){return this.editorService.getLanguage(t)}};e.\u0275fac=function(r){return new(r||e)(F(ya))},e.\u0275cmp=L({type:e,selectors:[["app-code"]],inputs:{codeUrls:"codeUrls",lineNumbers:"lineNumbers"},decls:14,vars:1,consts:[[1,"code-wrapper","hljs"],["dynamicHeight","","color","primary","backgroundColor","primary"],[3,"label",4,"ngFor","ngForOf"],["align","end"],["mat-button","","href","#",1,"gist-url",3,"click"],[3,"label"],[3,"highlight","language"]],template:function(r,o){r&1&&(H(0,"mat-card")(1,"mat-card-content")(2,"div",0)(3,"mat-tab-group",1),Vt(4,One,7,7,"mat-tab",2),J()()(),H(5,"mat-card-actions",3)(6,"button",4),Le("click",function(a){return o.editorService.toCodeSandbox(a)}),H(7,"mat-icon"),kt(8,"crop_din"),J(),kt(9," CodeSandbox "),J(),H(10,"button",4),Le("click",function(a){return o.editorService.toStackblitz(a)}),H(11,"mat-icon"),kt(12,"bolt"),J(),kt(13," Stackblitz "),J()()()),r&2&&(j(4),P("ngForOf",o.codeUrls))},dependencies:[to,dx,fx,zB,GB,HB,F1,eU,nU,uv,sU],styles:["pre[_ngcontent-%COMP%]{display:flex;margin-top:0;margin-bottom:0;word-wrap:break-word}pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{flex:1;line-height:1.8em;font-size:14px;min-height:100%;padding:1em 1.2em}pre[_ngcontent-%COMP%]   code.hljs-line-numbers[_ngcontent-%COMP%]{padding:0}.mat-mdc-card[_ngcontent-%COMP%]{padding:0;margin-bottom:3em}.mat-card-header[_ngcontent-%COMP%]{margin:0!important;padding:0!important;display:flex;align-items:center;height:40px}.mat-card-content[_ngcontent-%COMP%]{position:relative;overflow:hidden;padding:1px;margin-bottom:0}.mat-card-footer[_ngcontent-%COMP%]{padding:10px!important;margin:0!important;display:flex;flex-direction:row-reverse}.mat-card-footer[_ngcontent-%COMP%]   .gist-url[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:300;font-size:13px;text-decoration:unset}.mat-card-footer[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.mat-icon[_ngcontent-%COMP%]{margin:0 3px}.code-wrapper[_ngcontent-%COMP%]{border-radius:3px 3px 0 0}  .hljs{padding:0;border:none;transition:border ease 1s}  .hljs-ln{padding:10px 0}  .hljs-ln tr:first-child td{padding-top:10px!important}  .hljs-ln tr:last-child td{padding-bottom:10px!important}  td.hljs-ln-numbers{-webkit-user-select:none;user-select:none;text-align:center;color:#cccccc6b;border-right:1px solid rgba(204,204,204,.1098039216);vertical-align:top;padding-right:10px!important;padding-left:10px!important}  td.hljs-ln-code{padding-left:10px!important}"],changeDetection:0});let n=e;return n})();function Lne(n,e){n&1&&Ju(0)}var lU=(()=>{let e=class e{constructor(t,r){this.editorService=t,this.route=r,this.exampleComponent=null,this.codeUrls=this.route.snapshot.data.codeUrls??[],this.editorService.declarations=this.route.snapshot.data.declarations,this.exampleComponent=this.route.snapshot.data.exampleComponent}};e.\u0275fac=function(r){return new(r||e)(F(ya),F(Ha))},e.\u0275cmp=L({type:e,selectors:[["app-example-page"]],decls:3,vars:3,consts:[[1,"example-container"],[4,"ngComponentOutlet"],[3,"lineNumbers","codeUrls"]],template:function(r,o){r&1&&(H(0,"div",0),Vt(1,Lne,1,0,"ng-container",1),J(),fe(2,"app-code",2)),r&2&&(j(),P("ngComponentOutlet",o.exampleComponent),j(),P("lineNumbers",!0)("codeUrls",o.codeUrls))},dependencies:[oO,cU]});let n=e;return n})();var cn=class{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}},Bne=new Do(-1,1,1,-1,0,1),B1=class extends bt{constructor(){super(),this.setAttribute("position",new qe([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new qe([0,2,0,0,2,0],2))}},Une=new B1,hr=class{constructor(e){this._mesh=new Ve(Une,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Bne)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}};var fr={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};var kf=class extends cn{constructor(e,i){super(),this.textureID=i!==void 0?i:"tDiffuse",e instanceof Ft?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Li.clone(e.uniforms),this.material=new Ft({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new hr(this.material)}render(e,i,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}};var yg=class extends cn{constructor(e,i){super(),this.scene=e,this.camera=i,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,i,t){let r=e.getContext(),o=e.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0);let s,a;this.inverse?(s=0,a=1):(s=1,a=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),o.buffers.stencil.setFunc(r.ALWAYS,s,4294967295),o.buffers.stencil.setClear(a),o.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.color.setMask(!0),o.buffers.depth.setMask(!0),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(r.EQUAL,1,4294967295),o.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),o.buffers.stencil.setLocked(!0)}},vx=class extends cn{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}};var yx=class{constructor(e,i){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),i===void 0){let t=e.getSize(new z);this._width=t.width,this._height=t.height,i=new ci(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:qi}),i.texture.name="EffectComposer.rt1"}else this._width=i.width,this._height=i.height;this.renderTarget1=i,this.renderTarget2=i.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new kf(fr),this.copyPass.material.blending=ti,this.clock=new ao}swapBuffers(){let e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,i){this.passes.splice(i,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){let i=this.passes.indexOf(e);i!==-1&&this.passes.splice(i,1)}isLastEnabledPass(e){for(let i=e+1;i<this.passes.length;i++)if(this.passes[i].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());let i=this.renderer.getRenderTarget(),t=!1;for(let r=0,o=this.passes.length;r<o;r++){let s=this.passes[r];if(s.enabled!==!1){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),s.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),s.needsSwap){if(t){let a=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}yg!==void 0&&(s instanceof yg?t=!0:s instanceof vx&&(t=!1))}}this.renderer.setRenderTarget(i)}reset(e){if(e===void 0){let i=this.renderer.getSize(new z);this._pixelRatio=this.renderer.getPixelRatio(),this._width=i.width,this._height=i.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,i){this._width=e,this._height=i;let t=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(t,r),this.renderTarget2.setSize(t,r);for(let o=0;o<this.passes.length;o++)this.passes[o].setSize(t,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}};var Vne=["*"],dU=(()=>{let e=class e extends Yr{getType(){return yx}set renderer(t){this._objRef&&(this._objRef.renderer=t)}get renderer(){return this._objRef?.renderer}set renderTarget1(t){this._objRef&&(this._objRef.renderTarget1=t)}get renderTarget1(){return this._objRef?.renderTarget1}set renderTarget2(t){this._objRef&&(this._objRef.renderTarget2=t)}get renderTarget2(){return this._objRef?.renderTarget2}set writeBuffer(t){this._objRef&&(this._objRef.writeBuffer=t)}get writeBuffer(){return this._objRef?.writeBuffer}set readBuffer(t){this._objRef&&(this._objRef.readBuffer=t)}get readBuffer(){return this._objRef?.readBuffer}set passes(t){this._objRef&&(this._objRef.passes=t)}get passes(){return this._objRef?.passes}set copyPass(t){this._objRef&&(this._objRef.copyPass=t)}get copyPass(){return this._objRef?.copyPass}set clock(t){this._objRef&&(this._objRef.clock=t)}get clock(){return this._objRef?.clock}set renderToScreen(t){this._objRef&&(this._objRef.renderToScreen=t)}get renderToScreen(){return this._objRef?.renderToScreen}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-effectComposerGen"]],inputs:{renderer:"renderer",renderTarget1:"renderTarget1",renderTarget2:"renderTarget2",writeBuffer:"writeBuffer",readBuffer:"readBuffer",passes:"passes",copyPass:"copyPass",clock:"clock",renderToScreen:"renderToScreen"},features:[ie([]),q],ngContentSelectors:Vne,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var zne=["*"],Sa=(()=>{let e=class e extends dU{constructor(t,r){super(),this.view=t,this.engineService=r}createThreeInstance(t){return t||(t=new Array(5)),t[0]=t[0]??this.engineService.wegblRenderer,t[1]=t[1]??this.initRenderTarget(),super.createThreeInstance(t)}initRenderTarget(){if(this.view.viewPort){let t,r;return this.view.viewPort instanceof xi?(t=this.view.viewPort.z,r=this.view.viewPort?.width):(t=this.view.viewPort.width,r=this.view.viewPort.height),new ci(t,r)}else return}addToParent(){this._objRef&&(this.view.effectComposer=this._objRef)}removeFromParent(){this.view.effectComposer=void 0}};e.\u0275fac=function(r){return new(r||e)(F(Pr),F(uo))},e.\u0275cmp=L({type:e,selectors:[["th-effectComposer"]],features:[ie([]),q],ngContentSelectors:zne,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var fi=(()=>{let e=class e extends Yr{constructor(t){super(),this.effectComposer=t}addToParent(){this._objRef&&this.effectComposer&&this.effectComposer.objRef&&this.effectComposer.objRef.addPass(this._objRef)}removeFromParent(){this._objRef&&this.effectComposer&&this.effectComposer.objRef&&this.effectComposer.objRef.removePass(this._objRef)}};e.\u0275fac=function(r){return new(r||e)(F(Sa,8))},e.\u0275cmp=L({type:e,selectors:[["th-abs-control"]],features:[q],decls:0,vars:0,template:function(r,o){},encapsulation:2});let n=e;return n})();var Hne=["*"],Ai=(()=>{let e=class e extends fi{getType(){return cn}set isPass(t){this._objRef&&(this._objRef.isPass=t)}get isPass(){return this._objRef?.isPass}set enabled(t){this._objRef&&(this._objRef.enabled=t)}get enabled(){return this._objRef?.enabled}set needsSwap(t){this._objRef&&(this._objRef.needsSwap=t)}get needsSwap(){return this._objRef?.needsSwap}set clear(t){this._objRef&&(this._objRef.clear=t)}get clear(){return this._objRef?.clear}set renderToScreen(t){this._objRef&&(this._objRef.renderToScreen=t)}get renderToScreen(){return this._objRef?.renderToScreen}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-pass"]],inputs:{isPass:"isPass",enabled:"enabled",needsSwap:"needsSwap",clear:"clear",renderToScreen:"renderToScreen"},features:[ie([{provide:fi,useExisting:ge(()=>e)}]),q],ngContentSelectors:Hne,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var wt={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},Bi={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},oi={x:0,y:0},ko={camera:new Be,gizmos:new Be},rn={type:"change"},Es={type:"start"},Ko={type:"end"},Gne=new Xr,Zn=new S,uU=new Be,hU=new Be,Cs=new S,xx=class extends jn{constructor(e,i,t=null){super(),this.camera=null,this.domElement=i,this.scene=t,this.target=new S,this._currentTarget=new S,this.radiusFactor=.67,this.mouseActions=[],this._mouseOp=null,this._v2_1=new z,this._v3_1=new S,this._v3_2=new S,this._m4_1=new Be,this._m4_2=new Be,this._quat=new ii,this._translationMatrix=new Be,this._rotationMatrix=new Be,this._scaleMatrix=new Be,this._rotationAxis=new S,this._cameraMatrixState=new Be,this._cameraProjectionState=new Be,this._fovState=1,this._upState=new S,this._zoomState=1,this._nearPos=0,this._farPos=0,this._gizmoMatrixState=new Be,this._up0=new S,this._zoom0=1,this._fov0=0,this._initialNear=0,this._nearPos0=0,this._initialFar=0,this._farPos0=0,this._cameraMatrixState0=new Be,this._gizmoMatrixState0=new Be,this._button=-1,this._touchStart=[],this._touchCurrent=[],this._input=Bi.NONE,this._switchSensibility=32,this._startFingerDistance=0,this._currentFingerDistance=0,this._startFingerRotation=0,this._currentFingerRotation=0,this._devPxRatio=0,this._downValid=!0,this._nclicks=0,this._downEvents=[],this._downStart=0,this._clickStart=0,this._maxDownTime=250,this._maxInterval=300,this._posThreshold=24,this._movementThreshold=24,this._currentCursorPosition=new S,this._startCursorPosition=new S,this._grid=null,this._gridPosition=new S,this._gizmos=new Cr,this._curvePts=128,this._timeStart=-1,this._animationId=-1,this.focusAnimationTime=500,this._timePrev=0,this._timeCurrent=0,this._anglePrev=0,this._angleCurrent=0,this._cursorPosPrev=new S,this._cursorPosCurr=new S,this._wPrev=0,this._wCurr=0,this.adjustNearFar=!1,this.scaleFactor=1.1,this.dampingFactor=25,this.wMax=20,this.enableAnimations=!0,this.enableGrid=!1,this.cursorZoom=!1,this.minFov=5,this.maxFov=90,this.rotateSpeed=1,this.enabled=!0,this.enablePan=!0,this.enableRotate=!0,this.enableZoom=!0,this.enableGizmos=!0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this._tbRadius=1,this._state=wt.IDLE,this.setCamera(e),this.scene!=null&&this.scene.add(this._gizmos),this.domElement.style.touchAction="none",this._devPxRatio=window.devicePixelRatio,this.initializeMouseActions(),this._onContextMenu=$ne.bind(this),this._onWheel=Qne.bind(this),this._onPointerUp=Zne.bind(this),this._onPointerMove=Yne.bind(this),this._onPointerDown=Xne.bind(this),this._onPointerCancel=qne.bind(this),this._onWindowResize=Wne.bind(this),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onWheel),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),window.addEventListener("resize",this._onWindowResize)}onSinglePanStart(e,i){if(this.enabled)switch(this.dispatchEvent(Es),this.setCenter(e.clientX,e.clientY),i){case"PAN":if(!this.enablePan)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(rn)),this.updateTbState(wt.PAN,!0),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.camera,oi.x,oi.y,this.domElement)),this.enableGrid&&(this.drawGrid(),this.dispatchEvent(rn));break;case"ROTATE":if(!this.enableRotate)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1),this.updateTbState(wt.ROTATE,!0),this._startCursorPosition.copy(this.unprojectOnTbSurface(this.camera,oi.x,oi.y,this.domElement,this._tbRadius)),this.activateGizmos(!0),this.enableAnimations&&(this._timePrev=this._timeCurrent=performance.now(),this._angleCurrent=this._anglePrev=0,this._cursorPosPrev.copy(this._startCursorPosition),this._cursorPosCurr.copy(this._cursorPosPrev),this._wCurr=0,this._wPrev=this._wCurr),this.dispatchEvent(rn);break;case"FOV":if(!this.camera.isPerspectiveCamera||!this.enableZoom)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(rn)),this.updateTbState(wt.FOV,!0),this._startCursorPosition.setY(this.getCursorNDC(oi.x,oi.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition);break;case"ZOOM":if(!this.enableZoom)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(rn)),this.updateTbState(wt.SCALE,!0),this._startCursorPosition.setY(this.getCursorNDC(oi.x,oi.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition);break}}onSinglePanMove(e,i){if(this.enabled){let t=i!=this._state;switch(this.setCenter(e.clientX,e.clientY),i){case wt.PAN:this.enablePan&&(t?(this.dispatchEvent(Ko),this.dispatchEvent(Es),this.updateTbState(i,!0),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.camera,oi.x,oi.y,this.domElement)),this.enableGrid&&this.drawGrid(),this.activateGizmos(!1)):(this._currentCursorPosition.copy(this.unprojectOnTbPlane(this.camera,oi.x,oi.y,this.domElement)),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition))));break;case wt.ROTATE:if(this.enableRotate)if(t)this.dispatchEvent(Ko),this.dispatchEvent(Es),this.updateTbState(i,!0),this._startCursorPosition.copy(this.unprojectOnTbSurface(this.camera,oi.x,oi.y,this.domElement,this._tbRadius)),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!0);else{this._currentCursorPosition.copy(this.unprojectOnTbSurface(this.camera,oi.x,oi.y,this.domElement,this._tbRadius));let r=this._startCursorPosition.distanceTo(this._currentCursorPosition),o=this._startCursorPosition.angleTo(this._currentCursorPosition),s=Math.max(r/this._tbRadius,o)*this.rotateSpeed;this.applyTransformMatrix(this.rotate(this.calculateRotationAxis(this._startCursorPosition,this._currentCursorPosition),s)),this.enableAnimations&&(this._timePrev=this._timeCurrent,this._timeCurrent=performance.now(),this._anglePrev=this._angleCurrent,this._angleCurrent=s,this._cursorPosPrev.copy(this._cursorPosCurr),this._cursorPosCurr.copy(this._currentCursorPosition),this._wPrev=this._wCurr,this._wCurr=this.calculateAngularSpeed(this._anglePrev,this._angleCurrent,this._timePrev,this._timeCurrent))}break;case wt.SCALE:if(this.enableZoom)if(t)this.dispatchEvent(Ko),this.dispatchEvent(Es),this.updateTbState(i,!0),this._startCursorPosition.setY(this.getCursorNDC(oi.x,oi.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(oi.x,oi.y,this.domElement).y*.5);let o=this._currentCursorPosition.y-this._startCursorPosition.y,s=1;o<0?s=1/Math.pow(this.scaleFactor,-o*8):o>0&&(s=Math.pow(this.scaleFactor,o*8)),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this.applyTransformMatrix(this.scale(s,this._v3_1))}break;case wt.FOV:if(this.enableZoom&&this.camera.isPerspectiveCamera)if(t)this.dispatchEvent(Ko),this.dispatchEvent(Es),this.updateTbState(i,!0),this._startCursorPosition.setY(this.getCursorNDC(oi.x,oi.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(oi.x,oi.y,this.domElement).y*.5);let o=this._currentCursorPosition.y-this._startCursorPosition.y,s=1;o<0?s=1/Math.pow(this.scaleFactor,-o*8):o>0&&(s=Math.pow(this.scaleFactor,o*8)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);let a=this._v3_1.distanceTo(this._gizmos.position),c=a/s;c=st.clamp(c,this.minDistance,this.maxDistance);let l=a*Math.tan(st.DEG2RAD*this._fovState*.5),d=st.RAD2DEG*(Math.atan(l/c)*2);d=st.clamp(d,this.minFov,this.maxFov);let u=l/Math.tan(st.DEG2RAD*(d/2));s=a/u,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.scale(s,this._v3_2,!1)),Zn.copy(this._gizmos.position).sub(this.camera.position).normalize().multiplyScalar(u/a),this._m4_1.makeTranslation(Zn.x,Zn.y,Zn.z)}break}this.dispatchEvent(rn)}}onSinglePanEnd(){if(this._state==wt.ROTATE){if(!this.enableRotate)return;if(this.enableAnimations)if(performance.now()-this._timeCurrent<120){let i=Math.abs((this._wPrev+this._wCurr)/2),t=this;this._animationId=window.requestAnimationFrame(function(r){t.updateTbState(wt.ANIMATION_ROTATE,!0);let o=t.calculateRotationAxis(t._cursorPosPrev,t._cursorPosCurr);t.onRotationAnim(r,o,Math.min(i,t.wMax))})}else this.updateTbState(wt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(rn);else this.updateTbState(wt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(rn)}else(this._state==wt.PAN||this._state==wt.IDLE)&&(this.updateTbState(wt.IDLE,!1),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1),this.dispatchEvent(rn));this.dispatchEvent(Ko)}onDoubleTap(e){if(this.enabled&&this.enablePan&&this.scene!=null){this.dispatchEvent(Es),this.setCenter(e.clientX,e.clientY);let i=this.unprojectOnObj(this.getCursorNDC(oi.x,oi.y,this.domElement),this.camera);if(i!=null&&this.enableAnimations){let t=this;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),this._timeStart=-1,this._animationId=window.requestAnimationFrame(function(r){t.updateTbState(wt.ANIMATION_FOCUS,!0),t.onFocusAnim(r,i,t._cameraMatrixState,t._gizmoMatrixState)})}else i!=null&&!this.enableAnimations&&(this.updateTbState(wt.FOCUS,!0),this.focus(i,this.scaleFactor),this.updateTbState(wt.IDLE,!1),this.dispatchEvent(rn))}this.dispatchEvent(Ko)}onDoublePanStart(){this.enabled&&this.enablePan&&(this.dispatchEvent(Es),this.updateTbState(wt.PAN,!0),this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.camera,oi.x,oi.y,this.domElement,!0)),this._currentCursorPosition.copy(this._startCursorPosition),this.activateGizmos(!1))}onDoublePanMove(){this.enabled&&this.enablePan&&(this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=wt.PAN&&(this.updateTbState(wt.PAN,!0),this._startCursorPosition.copy(this._currentCursorPosition)),this._currentCursorPosition.copy(this.unprojectOnTbPlane(this.camera,oi.x,oi.y,this.domElement,!0)),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition,!0)),this.dispatchEvent(rn))}onDoublePanEnd(){this.updateTbState(wt.IDLE,!1),this.dispatchEvent(Ko)}onRotateStart(){this.enabled&&this.enableRotate&&(this.dispatchEvent(Es),this.updateTbState(wt.ZROTATE,!0),this._startFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this._currentFingerRotation=this._startFingerRotation,this.camera.getWorldDirection(this._rotationAxis),!this.enablePan&&!this.enableZoom&&this.activateGizmos(!0))}onRotateMove(){if(this.enabled&&this.enableRotate){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let e;this._state!=wt.ZROTATE&&(this.updateTbState(wt.ZROTATE,!0),this._startFingerRotation=this._currentFingerRotation),this._currentFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this.enablePan?(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),e=this.unprojectOnTbPlane(this.camera,oi.x,oi.y,this.domElement).applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._v3_2)):e=new S().setFromMatrixPosition(this._gizmoMatrixState);let i=st.DEG2RAD*(this._startFingerRotation-this._currentFingerRotation);this.applyTransformMatrix(this.zRotate(e,i)),this.dispatchEvent(rn)}}onRotateEnd(){this.updateTbState(wt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Ko)}onPinchStart(){this.enabled&&this.enableZoom&&(this.dispatchEvent(Es),this.updateTbState(wt.SCALE,!0),this._startFingerDistance=this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),this._currentFingerDistance=this._startFingerDistance,this.activateGizmos(!1))}onPinchMove(){if(this.enabled&&this.enableZoom){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let e=12;this._state!=wt.SCALE&&(this._startFingerDistance=this._currentFingerDistance,this.updateTbState(wt.SCALE,!0)),this._currentFingerDistance=Math.max(this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),e*this._devPxRatio);let i=this._currentFingerDistance/this._startFingerDistance,t;this.enablePan?this.camera.isOrthographicCamera?t=this.unprojectOnTbPlane(this.camera,oi.x,oi.y,this.domElement).applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera.isPerspectiveCamera&&(t=this.unprojectOnTbPlane(this.camera,oi.x,oi.y,this.domElement).applyQuaternion(this.camera.quaternion).add(this._gizmos.position)):t=this._gizmos.position,this.applyTransformMatrix(this.scale(i,t)),this.dispatchEvent(rn)}}onPinchEnd(){this.updateTbState(wt.IDLE,!1),this.dispatchEvent(Ko)}onTriplePanStart(){if(this.enabled&&this.enableZoom){this.dispatchEvent(Es),this.updateTbState(wt.SCALE,!0);let e=0,i=0,t=this._touchCurrent.length;for(let r=0;r<t;r++)e+=this._touchCurrent[r].clientX,i+=this._touchCurrent[r].clientY;this.setCenter(e/t,i/t),this._startCursorPosition.setY(this.getCursorNDC(oi.x,oi.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition)}}onTriplePanMove(){if(this.enabled&&this.enableZoom){let e=0,i=0,t=this._touchCurrent.length;for(let h=0;h<t;h++)e+=this._touchCurrent[h].clientX,i+=this._touchCurrent[h].clientY;this.setCenter(e/t,i/t);let r=8;this._currentCursorPosition.setY(this.getCursorNDC(oi.x,oi.y,this.domElement).y*.5);let o=this._currentCursorPosition.y-this._startCursorPosition.y,s=1;o<0?s=1/Math.pow(this.scaleFactor,-o*r):o>0&&(s=Math.pow(this.scaleFactor,o*r)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);let a=this._v3_1.distanceTo(this._gizmos.position),c=a/s;c=st.clamp(c,this.minDistance,this.maxDistance);let l=a*Math.tan(st.DEG2RAD*this._fovState*.5),d=st.RAD2DEG*(Math.atan(l/c)*2);d=st.clamp(d,this.minFov,this.maxFov);let u=l/Math.tan(st.DEG2RAD*(d/2));s=a/u,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.scale(s,this._v3_2,!1)),Zn.copy(this._gizmos.position).sub(this.camera.position).normalize().multiplyScalar(u/a),this._m4_1.makeTranslation(Zn.x,Zn.y,Zn.z),this.dispatchEvent(rn)}}onTriplePanEnd(){this.updateTbState(wt.IDLE,!1),this.dispatchEvent(Ko)}setCenter(e,i){oi.x=e,oi.y=i}initializeMouseActions(){this.setMouseAction("PAN",0,"CTRL"),this.setMouseAction("PAN",2),this.setMouseAction("ROTATE",0),this.setMouseAction("ZOOM","WHEEL"),this.setMouseAction("ZOOM",1),this.setMouseAction("FOV","WHEEL","SHIFT"),this.setMouseAction("FOV",1,"SHIFT")}compareMouseAction(e,i){return e.operation==i.operation?e.mouse==i.mouse&&e.key==i.key:!1}setMouseAction(e,i,t=null){let r=["PAN","ROTATE","ZOOM","FOV"],o=[0,1,2,"WHEEL"],s=["CTRL","SHIFT",null],a;if(!r.includes(e)||!o.includes(i)||!s.includes(t)||i=="WHEEL"&&e!="ZOOM"&&e!="FOV")return!1;switch(e){case"PAN":a=wt.PAN;break;case"ROTATE":a=wt.ROTATE;break;case"ZOOM":a=wt.SCALE;break;case"FOV":a=wt.FOV;break}let c={operation:e,mouse:i,key:t,state:a};for(let l=0;l<this.mouseActions.length;l++)if(this.mouseActions[l].mouse==c.mouse&&this.mouseActions[l].key==c.key)return this.mouseActions.splice(l,1,c),!0;return this.mouseActions.push(c),!0}unsetMouseAction(e,i=null){for(let t=0;t<this.mouseActions.length;t++)if(this.mouseActions[t].mouse==e&&this.mouseActions[t].key==i)return this.mouseActions.splice(t,1),!0;return!1}getOpFromAction(e,i){let t;for(let r=0;r<this.mouseActions.length;r++)if(t=this.mouseActions[r],t.mouse==e&&t.key==i)return t.operation;if(i!=null){for(let r=0;r<this.mouseActions.length;r++)if(t=this.mouseActions[r],t.mouse==e&&t.key==null)return t.operation}return null}getOpStateFromAction(e,i){let t;for(let r=0;r<this.mouseActions.length;r++)if(t=this.mouseActions[r],t.mouse==e&&t.key==i)return t.state;if(i!=null){for(let r=0;r<this.mouseActions.length;r++)if(t=this.mouseActions[r],t.mouse==e&&t.key==null)return t.state}return null}getAngle(e,i){return Math.atan2(i.clientY-e.clientY,i.clientX-e.clientX)*180/Math.PI}updateTouchEvent(e){for(let i=0;i<this._touchCurrent.length;i++)if(this._touchCurrent[i].pointerId==e.pointerId){this._touchCurrent.splice(i,1,e);break}}applyTransformMatrix(e){if(e.camera!=null&&(this._m4_1.copy(this._cameraMatrixState).premultiply(e.camera),this._m4_1.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.updateMatrix(),(this._state==wt.ROTATE||this._state==wt.ZROTATE||this._state==wt.ANIMATION_ROTATE)&&this.camera.up.copy(this._upState).applyQuaternion(this.camera.quaternion)),e.gizmos!=null&&(this._m4_1.copy(this._gizmoMatrixState).premultiply(e.gizmos),this._m4_1.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix()),this._state==wt.SCALE||this._state==wt.FOCUS||this._state==wt.ANIMATION_FOCUS)if(this._tbRadius=this.calculateTbRadius(this.camera),this.adjustNearFar){let i=this.camera.position.distanceTo(this._gizmos.position),t=new _n;t.setFromObject(this._gizmos);let r=new En;t.getBoundingSphere(r);let o=Math.max(this._nearPos0,r.radius+r.center.length()),s=i-this._initialNear,a=Math.min(o,s);this.camera.near=i-a;let c=Math.min(this._farPos0,-r.radius+r.center.length()),l=i-this._initialFar,d=Math.min(c,l);this.camera.far=i-d,this.camera.updateProjectionMatrix()}else{let i=!1;this.camera.near!=this._initialNear&&(this.camera.near=this._initialNear,i=!0),this.camera.far!=this._initialFar&&(this.camera.far=this._initialFar,i=!0),i&&this.camera.updateProjectionMatrix()}}calculateAngularSpeed(e,i,t,r){let o=i-e,s=(r-t)/1e3;return s==0?0:o/s}calculatePointersDistance(e,i){return Math.sqrt(Math.pow(i.clientX-e.clientX,2)+Math.pow(i.clientY-e.clientY,2))}calculateRotationAxis(e,i){return this._rotationMatrix.extractRotation(this._cameraMatrixState),this._quat.setFromRotationMatrix(this._rotationMatrix),this._rotationAxis.crossVectors(e,i).applyQuaternion(this._quat),this._rotationAxis.normalize().clone()}calculateTbRadius(e){let i=e.position.distanceTo(this._gizmos.position);if(e.type=="PerspectiveCamera"){let t=st.DEG2RAD*e.fov*.5,r=Math.atan(e.aspect*Math.tan(t));return Math.tan(Math.min(t,r))*i*this.radiusFactor}else if(e.type=="OrthographicCamera")return Math.min(e.top,e.right)*this.radiusFactor}focus(e,i,t=1){Zn.copy(e).sub(this._gizmos.position).multiplyScalar(t),this._translationMatrix.makeTranslation(Zn.x,Zn.y,Zn.z),uU.copy(this._gizmoMatrixState),this._gizmoMatrixState.premultiply(this._translationMatrix),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),hU.copy(this._cameraMatrixState),this._cameraMatrixState.premultiply(this._translationMatrix),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.enableZoom&&this.applyTransformMatrix(this.scale(i,this._gizmos.position)),this._gizmoMatrixState.copy(uU),this._cameraMatrixState.copy(hU)}drawGrid(){if(this.scene!=null){let t,r,o,s;if(this.camera.isOrthographicCamera){let a=this.camera.right-this.camera.left,c=this.camera.bottom-this.camera.top;o=Math.max(a,c),s=o/20,t=o/this.camera.zoom*3,r=t/s*this.camera.zoom}else if(this.camera.isPerspectiveCamera){let a=this.camera.position.distanceTo(this._gizmos.position),c=st.DEG2RAD*this.camera.fov*.5,l=Math.atan(this.camera.aspect*Math.tan(c));o=Math.tan(Math.max(c,l))*a*2,s=o/20,t=o*3,r=t/s}this._grid==null&&(this._grid=new $d(t,r,8947848,8947848),this._grid.position.copy(this._gizmos.position),this._gridPosition.copy(this._grid.position),this._grid.quaternion.copy(this.camera.quaternion),this._grid.rotateX(Math.PI*.5),this.scene.add(this._grid))}}dispose(){this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),window.removeEventListener("resize",this._onWindowResize),this.scene!==null&&this.scene.remove(this._gizmos),this.disposeGrid()}disposeGrid(){this._grid!=null&&this.scene!=null&&(this.scene.remove(this._grid),this._grid=null)}easeOutCubic(e){return 1-Math.pow(1-e,3)}activateGizmos(e){let i=this._gizmos.children[0],t=this._gizmos.children[1],r=this._gizmos.children[2];e?(i.material.setValues({opacity:1}),t.material.setValues({opacity:1}),r.material.setValues({opacity:1})):(i.material.setValues({opacity:.6}),t.material.setValues({opacity:.6}),r.material.setValues({opacity:.6}))}getCursorNDC(e,i,t){let r=t.getBoundingClientRect();return this._v2_1.setX((e-r.left)/r.width*2-1),this._v2_1.setY((r.bottom-i)/r.height*2-1),this._v2_1.clone()}getCursorPosition(e,i,t){return this._v2_1.copy(this.getCursorNDC(e,i,t)),this._v2_1.x*=(this.camera.right-this.camera.left)*.5,this._v2_1.y*=(this.camera.top-this.camera.bottom)*.5,this._v2_1.clone()}setCamera(e){e.lookAt(this.target),e.updateMatrix(),e.type=="PerspectiveCamera"&&(this._fov0=e.fov,this._fovState=e.fov),this._cameraMatrixState0.copy(e.matrix),this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraProjectionState.copy(e.projectionMatrix),this._zoom0=e.zoom,this._zoomState=this._zoom0,this._initialNear=e.near,this._nearPos0=e.position.distanceTo(this.target)-e.near,this._nearPos=this._initialNear,this._initialFar=e.far,this._farPos0=e.position.distanceTo(this.target)-e.far,this._farPos=this._initialFar,this._up0.copy(e.up),this._upState.copy(e.up),this.camera=e,this.camera.updateProjectionMatrix(),this._tbRadius=this.calculateTbRadius(e),this.makeGizmos(this.target,this._tbRadius)}setGizmosVisible(e){this._gizmos.visible=e,this.dispatchEvent(rn)}setTbRadius(e){this.radiusFactor=e,this._tbRadius=this.calculateTbRadius(this.camera);let t=new vs(0,0,this._tbRadius,this._tbRadius).getPoints(this._curvePts),r=new bt().setFromPoints(t);for(let o in this._gizmos.children)this._gizmos.children[o].geometry=r;this.dispatchEvent(rn)}makeGizmos(e,i){let r=new vs(0,0,i,i).getPoints(this._curvePts),o=new bt().setFromPoints(r),s=new on({color:16744576,fog:!1,transparent:!0,opacity:.6}),a=new on({color:8454016,fog:!1,transparent:!0,opacity:.6}),c=new on({color:8421631,fog:!1,transparent:!0,opacity:.6}),l=new Qi(o,s),d=new Qi(o,a),u=new Qi(o,c),h=Math.PI*.5;if(l.rotation.x=h,d.rotation.y=h,this._gizmoMatrixState0.identity().setPosition(e),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this.camera.zoom!==1){let f=1/this.camera.zoom;this._scaleMatrix.makeScale(f,f,f),this._translationMatrix.makeTranslation(-e.x,-e.y,-e.z),this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix),this._translationMatrix.makeTranslation(e.x,e.y,e.z),this._gizmoMatrixState.premultiply(this._translationMatrix)}this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.traverse(function(f){f.isLine&&(f.geometry.dispose(),f.material.dispose())}),this._gizmos.clear(),this._gizmos.add(l),this._gizmos.add(d),this._gizmos.add(u)}onFocusAnim(e,i,t,r){if(this._timeStart==-1&&(this._timeStart=e),this._state==wt.ANIMATION_FOCUS){let s=(e-this._timeStart)/this.focusAnimationTime;if(this._gizmoMatrixState.copy(r),s>=1)this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(i,this.scaleFactor),this._timeStart=-1,this.updateTbState(wt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(rn);else{let a=this.easeOutCubic(s),c=1-a+this.scaleFactor*a;this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(i,c,a),this.dispatchEvent(rn);let l=this;this._animationId=window.requestAnimationFrame(function(d){l.onFocusAnim(d,i,t,r.clone())})}}else this._animationId=-1,this._timeStart=-1}onRotationAnim(e,i,t){if(this._timeStart==-1&&(this._anglePrev=0,this._angleCurrent=0,this._timeStart=e),this._state==wt.ANIMATION_ROTATE){let r=(e-this._timeStart)/1e3;if(t+-this.dampingFactor*r>0){this._angleCurrent=.5*-this.dampingFactor*Math.pow(r,2)+t*r+0,this.applyTransformMatrix(this.rotate(i,this._angleCurrent)),this.dispatchEvent(rn);let s=this;this._animationId=window.requestAnimationFrame(function(a){s.onRotationAnim(a,i,t)})}else this._animationId=-1,this._timeStart=-1,this.updateTbState(wt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(rn)}else this._animationId=-1,this._timeStart=-1,this._state!=wt.ROTATE&&(this.activateGizmos(!1),this.dispatchEvent(rn))}pan(e,i,t=!1){let r=e.clone().sub(i);if(this.camera.isOrthographicCamera)r.multiplyScalar(1/this.camera.zoom);else if(this.camera.isPerspectiveCamera&&t){this._v3_1.setFromMatrixPosition(this._cameraMatrixState0),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0);let o=this._v3_1.distanceTo(this._v3_2)/this.camera.position.distanceTo(this._gizmos.position);r.multiplyScalar(1/o)}return this._v3_1.set(r.x,r.y,0).applyQuaternion(this.camera.quaternion),this._m4_1.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z),this.setTransformationMatrices(this._m4_1,this._m4_1),ko}reset(){this.camera.zoom=this._zoom0,this.camera.isPerspectiveCamera&&(this.camera.fov=this._fov0),this.camera.near=this._nearPos,this.camera.far=this._farPos,this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(this._up0),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this._gizmoMatrixState0.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix(),this._tbRadius=this.calculateTbRadius(this.camera),this.makeGizmos(this._gizmos.position,this._tbRadius),this.camera.lookAt(this._gizmos.position),this.updateTbState(wt.IDLE,!1),this.dispatchEvent(rn)}rotate(e,i){let t=this._gizmos.position;return this._translationMatrix.makeTranslation(-t.x,-t.y,-t.z),this._rotationMatrix.makeRotationAxis(e,-i),this._m4_1.makeTranslation(t.x,t.y,t.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1),ko}copyState(){let e;this.camera.isOrthographicCamera?e=JSON.stringify({arcballState:{cameraFar:this.camera.far,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}}):this.camera.isPerspectiveCamera&&(e=JSON.stringify({arcballState:{cameraFar:this.camera.far,cameraFov:this.camera.fov,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}})),navigator.clipboard.writeText(e)}pasteState(){let e=this;navigator.clipboard.readText().then(function(t){e.setStateFromJSON(t)})}saveState(){this._cameraMatrixState0.copy(this.camera.matrix),this._gizmoMatrixState0.copy(this._gizmos.matrix),this._nearPos=this.camera.near,this._farPos=this.camera.far,this._zoom0=this.camera.zoom,this._up0.copy(this.camera.up),this.camera.isPerspectiveCamera&&(this._fov0=this.camera.fov)}scale(e,i,t=!0){Cs.copy(i);let r=1/e;if(this.camera.isOrthographicCamera){this.camera.zoom=this._zoomState,this.camera.zoom*=e,this.camera.zoom>this.maxZoom?(this.camera.zoom=this.maxZoom,r=this._zoomState/this.maxZoom):this.camera.zoom<this.minZoom&&(this.camera.zoom=this.minZoom,r=this._zoomState/this.minZoom),this.camera.updateProjectionMatrix(),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this._scaleMatrix.makeScale(r,r,r),this._translationMatrix.makeTranslation(-this._v3_1.x,-this._v3_1.y,-this._v3_1.z),this._m4_2.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z).multiply(this._scaleMatrix),this._m4_2.multiply(this._translationMatrix),Cs.sub(this._v3_1);let o=Cs.clone().multiplyScalar(r);return Cs.sub(o),this._m4_1.makeTranslation(Cs.x,Cs.y,Cs.z),this._m4_2.premultiply(this._m4_1),this.setTransformationMatrices(this._m4_1,this._m4_2),ko}else if(this.camera.isPerspectiveCamera){this._v3_1.setFromMatrixPosition(this._cameraMatrixState),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);let o=this._v3_1.distanceTo(Cs),s=o-o*r,a=o-s;if(a<this.minDistance?(r=this.minDistance/o,s=o-o*r):a>this.maxDistance&&(r=this.maxDistance/o,s=o-o*r),Zn.copy(Cs).sub(this._v3_1).normalize().multiplyScalar(s),this._m4_1.makeTranslation(Zn.x,Zn.y,Zn.z),t){let c=this._v3_2;o=c.distanceTo(Cs),s=o-o*r,Zn.copy(Cs).sub(this._v3_2).normalize().multiplyScalar(s),this._translationMatrix.makeTranslation(c.x,c.y,c.z),this._scaleMatrix.makeScale(r,r,r),this._m4_2.makeTranslation(Zn.x,Zn.y,Zn.z).multiply(this._translationMatrix),this._m4_2.multiply(this._scaleMatrix),this._translationMatrix.makeTranslation(-c.x,-c.y,-c.z),this._m4_2.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1,this._m4_2)}else this.setTransformationMatrices(this._m4_1);return ko}}setFov(e){this.camera.isPerspectiveCamera&&(this.camera.fov=st.clamp(e,this.minFov,this.maxFov),this.camera.updateProjectionMatrix())}setTransformationMatrices(e=null,i=null){e!=null?ko.camera!=null?ko.camera.copy(e):ko.camera=e.clone():ko.camera=null,i!=null?ko.gizmos!=null?ko.gizmos.copy(i):ko.gizmos=i.clone():ko.gizmos=null}zRotate(e,i){return this._rotationMatrix.makeRotationAxis(this._rotationAxis,i),this._translationMatrix.makeTranslation(-e.x,-e.y,-e.z),this._m4_1.makeTranslation(e.x,e.y,e.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(e),this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis,i),this._v3_2.sub(this._v3_1),this._m4_2.makeTranslation(this._v3_2.x,this._v3_2.y,this._v3_2.z),this.setTransformationMatrices(this._m4_1,this._m4_2),ko}getRaycaster(){return Gne}unprojectOnObj(e,i){let t=this.getRaycaster();t.near=i.near,t.far=i.far,t.setFromCamera(e,i);let r=t.intersectObjects(this.scene.children,!0);for(let o=0;o<r.length;o++)if(r[o].object.uuid!=this._gizmos.uuid&&r[o].face!=null)return r[o].point.clone();return null}unprojectOnTbSurface(e,i,t,r,o){if(e.type=="OrthographicCamera"){this._v2_1.copy(this.getCursorPosition(i,t,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0);let s=Math.pow(this._v2_1.x,2),a=Math.pow(this._v2_1.y,2),c=Math.pow(this._tbRadius,2);return s+a<=c*.5?this._v3_1.setZ(Math.sqrt(c-(s+a))):this._v3_1.setZ(c*.5/Math.sqrt(s+a)),this._v3_1}else if(e.type=="PerspectiveCamera"){this._v2_1.copy(this.getCursorNDC(i,t,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(e.projectionMatrixInverse);let s=this._v3_1.clone().normalize(),a=e.position.distanceTo(this._gizmos.position),c=Math.pow(o,2),l=this._v3_1.z,d=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));if(d==0)return s.set(this._v3_1.x,this._v3_1.y,o),s;let u=l/d,h=a,f=Math.pow(u,2)+1,p=2*u*h,b=Math.pow(h,2)-c,g=Math.pow(p,2)-4*f*b;if(g>=0&&(this._v2_1.setX((-p-Math.sqrt(g))/(2*f)),this._v2_1.setY(u*this._v2_1.x+h),st.RAD2DEG*this._v2_1.angle()>=45)){let _=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(a-this._v2_1.y,2));return s.multiplyScalar(_),s.z+=a,s}f=u,p=h,b=-c*.5,g=Math.pow(p,2)-4*f*b,this._v2_1.setX((-p-Math.sqrt(g))/(2*f)),this._v2_1.setY(u*this._v2_1.x+h);let m=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(a-this._v2_1.y,2));return s.multiplyScalar(m),s.z+=a,s}}unprojectOnTbPlane(e,i,t,r,o=!1){if(e.type=="OrthographicCamera")return this._v2_1.copy(this.getCursorPosition(i,t,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0),this._v3_1.clone();if(e.type=="PerspectiveCamera"){this._v2_1.copy(this.getCursorNDC(i,t,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(e.projectionMatrixInverse);let s=this._v3_1.clone().normalize(),a=this._v3_1.z,c=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2)),l;if(o?l=this._v3_1.setFromMatrixPosition(this._cameraMatrixState0).distanceTo(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0)):l=e.position.distanceTo(this._gizmos.position),c==0)return s.set(0,0,0),s;let d=a/c,u=l,h=-u/d,f=Math.sqrt(Math.pow(u,2)+Math.pow(h,2));return s.multiplyScalar(f),s.z=0,s}}updateMatrixState(){this._cameraMatrixState.copy(this.camera.matrix),this._gizmoMatrixState.copy(this._gizmos.matrix),this.camera.isOrthographicCamera?(this._cameraProjectionState.copy(this.camera.projectionMatrix),this.camera.updateProjectionMatrix(),this._zoomState=this.camera.zoom):this.camera.isPerspectiveCamera&&(this._fovState=this.camera.fov)}updateTbState(e,i){this._state=e,i&&this.updateMatrixState()}update(){if(this.target.equals(this._currentTarget)===!1&&(this._gizmos.position.copy(this.target),this._tbRadius=this.calculateTbRadius(this.camera),this.makeGizmos(this.target,this._tbRadius),this._currentTarget.copy(this.target)),this.camera.isOrthographicCamera){if(this.camera.zoom>this.maxZoom||this.camera.zoom<this.minZoom){let i=st.clamp(this.camera.zoom,this.minZoom,this.maxZoom);this.applyTransformMatrix(this.scale(i/this.camera.zoom,this._gizmos.position,!0))}}else if(this.camera.isPerspectiveCamera){let i=this.camera.position.distanceTo(this._gizmos.position);if(i>this.maxDistance+1e-6||i<this.minDistance-1e-6){let r=st.clamp(i,this.minDistance,this.maxDistance);this.applyTransformMatrix(this.scale(r/i,this._gizmos.position)),this.updateMatrixState()}(this.camera.fov<this.minFov||this.camera.fov>this.maxFov)&&(this.camera.fov=st.clamp(this.camera.fov,this.minFov,this.maxFov),this.camera.updateProjectionMatrix());let t=this._tbRadius;if(this._tbRadius=this.calculateTbRadius(this.camera),t<this._tbRadius-1e-6||t>this._tbRadius+1e-6){let r=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3,o=this._tbRadius/r,a=new vs(0,0,o,o).getPoints(this._curvePts),c=new bt().setFromPoints(a);for(let l in this._gizmos.children)this._gizmos.children[l].geometry=c}}this.camera.lookAt(this._gizmos.position)}setStateFromJSON(e){let i=JSON.parse(e);if(i.arcballState!=null){this._cameraMatrixState.fromArray(i.arcballState.cameraMatrix.elements),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(i.arcballState.cameraUp),this.camera.near=i.arcballState.cameraNear,this.camera.far=i.arcballState.cameraFar,this.camera.zoom=i.arcballState.cameraZoom,this.camera.isPerspectiveCamera&&(this.camera.fov=i.arcballState.cameraFov),this._gizmoMatrixState.fromArray(i.arcballState.gizmoMatrix.elements),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmos.updateMatrix(),this._tbRadius=this.calculateTbRadius(this.camera);let t=new Be().copy(this._gizmoMatrixState0);this.makeGizmos(this._gizmos.position,this._tbRadius),this._gizmoMatrixState0.copy(t),this.camera.lookAt(this._gizmos.position),this.updateTbState(wt.IDLE,!1),this.dispatchEvent(rn)}}};function Wne(){let n=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3;this._tbRadius=this.calculateTbRadius(this.camera);let e=this._tbRadius/n,t=new vs(0,0,e,e).getPoints(this._curvePts),r=new bt().setFromPoints(t);for(let o in this._gizmos.children)this._gizmos.children[o].geometry=r;this.dispatchEvent(rn)}function $ne(n){if(this.enabled){for(let e=0;e<this.mouseActions.length;e++)if(this.mouseActions[e].mouse==2){n.preventDefault();break}}}function qne(){this._touchStart.splice(0,this._touchStart.length),this._touchCurrent.splice(0,this._touchCurrent.length),this._input=Bi.NONE}function Xne(n){if(n.button==0&&n.isPrimary?(this._downValid=!0,this._downEvents.push(n),this._downStart=performance.now()):this._downValid=!1,n.pointerType=="touch"&&this._input!=Bi.CURSOR)switch(this._touchStart.push(n),this._touchCurrent.push(n),this._input){case Bi.NONE:this._input=Bi.ONE_FINGER,this.onSinglePanStart(n,"ROTATE"),window.addEventListener("pointermove",this._onPointerMove),window.addEventListener("pointerup",this._onPointerUp);break;case Bi.ONE_FINGER:case Bi.ONE_FINGER_SWITCHED:this._input=Bi.TWO_FINGER,this.onRotateStart(),this.onPinchStart(),this.onDoublePanStart();break;case Bi.TWO_FINGER:this._input=Bi.MULT_FINGER,this.onTriplePanStart(n);break}else if(n.pointerType!="touch"&&this._input==Bi.NONE){let e=null;n.ctrlKey||n.metaKey?e="CTRL":n.shiftKey&&(e="SHIFT"),this._mouseOp=this.getOpFromAction(n.button,e),this._mouseOp!=null&&(window.addEventListener("pointermove",this._onPointerMove),window.addEventListener("pointerup",this._onPointerUp),this._input=Bi.CURSOR,this._button=n.button,this.onSinglePanStart(n,this._mouseOp))}}function Yne(n){if(n.pointerType=="touch"&&this._input!=Bi.CURSOR)switch(this._input){case Bi.ONE_FINGER:this.updateTouchEvent(n),this.onSinglePanMove(n,wt.ROTATE);break;case Bi.ONE_FINGER_SWITCHED:if(this.calculatePointersDistance(this._touchCurrent[0],n)*this._devPxRatio>=this._switchSensibility){this._input=Bi.ONE_FINGER,this.updateTouchEvent(n),this.onSinglePanStart(n,"ROTATE");break}break;case Bi.TWO_FINGER:this.updateTouchEvent(n),this.onRotateMove(),this.onPinchMove(),this.onDoublePanMove();break;case Bi.MULT_FINGER:this.updateTouchEvent(n),this.onTriplePanMove(n);break}else if(n.pointerType!="touch"&&this._input==Bi.CURSOR){let e=null;n.ctrlKey||n.metaKey?e="CTRL":n.shiftKey&&(e="SHIFT");let i=this.getOpStateFromAction(this._button,e);i!=null&&this.onSinglePanMove(n,i)}this._downValid&&this.calculatePointersDistance(this._downEvents[this._downEvents.length-1],n)*this._devPxRatio>this._movementThreshold&&(this._downValid=!1)}function Zne(n){if(n.pointerType=="touch"&&this._input!=Bi.CURSOR){let e=this._touchCurrent.length;for(let i=0;i<e;i++)if(this._touchCurrent[i].pointerId==n.pointerId){this._touchCurrent.splice(i,1),this._touchStart.splice(i,1);break}switch(this._input){case Bi.ONE_FINGER:case Bi.ONE_FINGER_SWITCHED:window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=Bi.NONE,this.onSinglePanEnd();break;case Bi.TWO_FINGER:this.onDoublePanEnd(n),this.onPinchEnd(n),this.onRotateEnd(n),this._input=Bi.ONE_FINGER_SWITCHED;break;case Bi.MULT_FINGER:this._touchCurrent.length==0&&(window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=Bi.NONE,this.onTriplePanEnd());break}}else n.pointerType!="touch"&&this._input==Bi.CURSOR&&(window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=Bi.NONE,this.onSinglePanEnd(),this._button=-1);if(n.isPrimary)if(this._downValid)if(n.timeStamp-this._downEvents[this._downEvents.length-1].timeStamp<=this._maxDownTime)if(this._nclicks==0)this._nclicks=1,this._clickStart=performance.now();else{let i=n.timeStamp-this._clickStart,t=this.calculatePointersDistance(this._downEvents[1],this._downEvents[0])*this._devPxRatio;i<=this._maxInterval&&t<=this._posThreshold?(this._nclicks=0,this._downEvents.splice(0,this._downEvents.length),this.onDoubleTap(n)):(this._nclicks=1,this._downEvents.shift(),this._clickStart=performance.now())}else this._downValid=!1,this._nclicks=0,this._downEvents.splice(0,this._downEvents.length);else this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)}function Qne(n){if(this.enabled&&this.enableZoom){let e=null;n.ctrlKey||n.metaKey?e="CTRL":n.shiftKey&&(e="SHIFT");let i=this.getOpFromAction("WHEEL",e);if(i!=null){n.preventDefault(),this.dispatchEvent(Es);let t=125,r=n.deltaY/t,o=1;switch(r>0?o=1/this.scaleFactor:r<0&&(o=this.scaleFactor),i){case"ZOOM":if(this.updateTbState(wt.SCALE,!0),r>0?o=1/Math.pow(this.scaleFactor,r):r<0&&(o=Math.pow(this.scaleFactor,-r)),this.cursorZoom&&this.enablePan){let s;this.camera.isOrthographicCamera?s=this.unprojectOnTbPlane(this.camera,n.clientX,n.clientY,this.domElement).applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera.isPerspectiveCamera&&(s=this.unprojectOnTbPlane(this.camera,n.clientX,n.clientY,this.domElement).applyQuaternion(this.camera.quaternion).add(this._gizmos.position)),this.applyTransformMatrix(this.scale(o,s))}else this.applyTransformMatrix(this.scale(o,this._gizmos.position));this._grid!=null&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(wt.IDLE,!1),this.dispatchEvent(rn),this.dispatchEvent(Ko);break;case"FOV":if(this.camera.isPerspectiveCamera){this.updateTbState(wt.FOV,!0),n.deltaX!=0&&(r=n.deltaX/t,o=1,r>0?o=1/Math.pow(this.scaleFactor,r):r<0&&(o=Math.pow(this.scaleFactor,-r))),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);let s=this._v3_1.distanceTo(this._gizmos.position),a=s/o;a=st.clamp(a,this.minDistance,this.maxDistance);let c=s*Math.tan(st.DEG2RAD*this.camera.fov*.5),l=st.RAD2DEG*(Math.atan(c/a)*2);l>this.maxFov?l=this.maxFov:l<this.minFov&&(l=this.minFov);let d=c/Math.tan(st.DEG2RAD*(l/2));o=s/d,this.setFov(l),this.applyTransformMatrix(this.scale(o,this._gizmos.position,!1))}this._grid!=null&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(wt.IDLE,!1),this.dispatchEvent(rn),this.dispatchEvent(Ko);break}}}}var Kne=["*"],fU=(()=>{let e=class e extends nn{getType(){return xx}set camera(t){this._objRef&&(this._objRef.camera=t)}get camera(){return this._objRef?.camera}set domElement(t){this._objRef&&(this._objRef.domElement=t)}get domElement(){return this._objRef?.domElement}set scene(t){this._objRef&&(this._objRef.scene=t)}get scene(){return this._objRef?.scene}set focusAnimationTime(t){this._objRef&&(this._objRef.focusAnimationTime=t)}get focusAnimationTime(){return this._objRef?.focusAnimationTime}set enabled(t){this._objRef&&(this._objRef.enabled=t)}get enabled(){return this._objRef?.enabled}set enablePan(t){this._objRef&&(this._objRef.enablePan=t)}get enablePan(){return this._objRef?.enablePan}set enableRotate(t){this._objRef&&(this._objRef.enableRotate=t)}get enableRotate(){return this._objRef?.enableRotate}set enableZoom(t){this._objRef&&(this._objRef.enableZoom=t)}get enableZoom(){return this._objRef?.enableZoom}set enableGizmos(t){this._objRef&&(this._objRef.enableGizmos=t)}get enableGizmos(){return this._objRef?.enableGizmos}set adjustNearFar(t){this._objRef&&(this._objRef.adjustNearFar=t)}get adjustNearFar(){return this._objRef?.adjustNearFar}set scaleFactor(t){this._objRef&&(this._objRef.scaleFactor=t)}get scaleFactor(){return this._objRef?.scaleFactor}set dampingFactor(t){this._objRef&&(this._objRef.dampingFactor=t)}get dampingFactor(){return this._objRef?.dampingFactor}set wMax(t){this._objRef&&(this._objRef.wMax=t)}get wMax(){return this._objRef?.wMax}set enableAnimations(t){this._objRef&&(this._objRef.enableAnimations=t)}get enableAnimations(){return this._objRef?.enableAnimations}set enableGrid(t){this._objRef&&(this._objRef.enableGrid=t)}get enableGrid(){return this._objRef?.enableGrid}set cursorZoom(t){this._objRef&&(this._objRef.cursorZoom=t)}get cursorZoom(){return this._objRef?.cursorZoom}set minFov(t){this._objRef&&(this._objRef.minFov=t)}get minFov(){return this._objRef?.minFov}set maxFov(t){this._objRef&&(this._objRef.maxFov=t)}get maxFov(){return this._objRef?.maxFov}set minDistance(t){this._objRef&&(this._objRef.minDistance=t)}get minDistance(){return this._objRef?.minDistance}set maxDistance(t){this._objRef&&(this._objRef.maxDistance=t)}get maxDistance(){return this._objRef?.maxDistance}set minZoom(t){this._objRef&&(this._objRef.minZoom=t)}get minZoom(){return this._objRef?.minZoom}set maxZoom(t){this._objRef&&(this._objRef.maxZoom=t)}get maxZoom(){return this._objRef?.maxZoom}set target(t){this._objRef&&(this._objRef.target=_e(this._objRef.target,t))}get target(){return this._objRef?.target}set radiusFactor(t){this._objRef&&(this._objRef.radiusFactor=t)}get radiusFactor(){return this._objRef?.radiusFactor}set rotateSpeed(t){this._objRef&&(this._objRef.rotateSpeed=t)}get rotateSpeed(){return this._objRef?.rotateSpeed}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-arcballControls"]],inputs:{camera:"camera",domElement:"domElement",scene:"scene",focusAnimationTime:"focusAnimationTime",enabled:"enabled",enablePan:"enablePan",enableRotate:"enableRotate",enableZoom:"enableZoom",enableGizmos:"enableGizmos",adjustNearFar:"adjustNearFar",scaleFactor:"scaleFactor",dampingFactor:"dampingFactor",wMax:"wMax",enableAnimations:"enableAnimations",enableGrid:"enableGrid",cursorZoom:"cursorZoom",minFov:"minFov",maxFov:"maxFov",minDistance:"minDistance",maxDistance:"maxDistance",minZoom:"minZoom",maxZoom:"maxZoom",target:"target",radiusFactor:"radiusFactor",rotateSpeed:"rotateSpeed"},features:[ie([{provide:nn,useExisting:ge(()=>e)}]),q],ngContentSelectors:Kne,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var ere=["*"],mU=(()=>{let e=class e extends ma{getType(){return Jp}get type(){return this._objRef?.type}set box(t){this._objRef&&(this._objRef.box=_e(this._objRef.box,t))}get box(){return this._objRef?.box}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-box3Helper"]],inputs:{box:"box"},features:[ie([{provide:me,useExisting:ge(()=>e)}]),q],ngContentSelectors:ere,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var ire=["*"],pU=(()=>{let e=class e extends me{getType(){return _f}set element(t){this._objRef&&(this._objRef.element=t)}get element(){return this._objRef?.element}set center(t){this._objRef&&(this._objRef.center=_e(this._objRef.center,t))}get center(){return this._objRef?.center}set onBeforeRender(t){this._objRef&&(this._objRef.onBeforeRender=t)}get onBeforeRender(){return this._objRef?.onBeforeRender}set onAfterRender(t){this._objRef&&(this._objRef.onAfterRender=t)}get onAfterRender(){return this._objRef?.onAfterRender}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-cSS2DObjectGen"]],inputs:{element:"element",center:"center",onBeforeRender:"onBeforeRender",onAfterRender:"onAfterRender"},features:[ie([{provide:me,useExisting:ge(()=>e)}]),q],ngContentSelectors:ire,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var nre=["*"],gU=(()=>{let e=class e extends me{getType(){return gf}set element(t){this._objRef&&(this._objRef.element=t)}get element(){return this._objRef?.element}set onBeforeRender(t){this._objRef&&(this._objRef.onBeforeRender=t)}get onBeforeRender(){return this._objRef?.onBeforeRender}set onAfterRender(t){this._objRef&&(this._objRef.onAfterRender=t)}get onAfterRender(){return this._objRef?.onAfterRender}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-cSS3DObjectGen"]],inputs:{element:"element",onBeforeRender:"onBeforeRender",onAfterRender:"onAfterRender"},features:[ie([{provide:me,useExisting:ge(()=>e)}]),q],ngContentSelectors:nre,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var fo=(()=>{let e=class e extends Yr{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-abs-texture"]],features:[q],decls:0,vars:0,template:function(r,o){},encapsulation:2});let n=e;return n})();var rre=["*"],Ds=class Ds extends fo{getType(){return vn}get isTexture(){return this._objRef?.isTexture}get id(){return this._objRef?.id}set uuid(e){this._objRef&&(this._objRef.uuid=e)}get uuid(){return this._objRef?.uuid}set name(e){this._objRef&&(this._objRef.name=e)}get name(){return this._objRef?.name}set source(e){this._objRef&&(this._objRef.source=e)}get source(){return this._objRef?.source}get image(){return this._objRef?.image}set image(e){this._objRef&&(this._objRef.image=e)}set mipmaps(e){this._objRef&&(this._objRef.mipmaps=e)}get mipmaps(){return this._objRef?.mipmaps}set mapping(e){this._objRef&&(this._objRef.mapping=e)}get mapping(){return this._objRef?.mapping}set channel(e){this._objRef&&(this._objRef.channel=e)}get channel(){return this._objRef?.channel}set wrapS(e){this._objRef&&(this._objRef.wrapS=e)}get wrapS(){return this._objRef?.wrapS}set wrapT(e){this._objRef&&(this._objRef.wrapT=e)}get wrapT(){return this._objRef?.wrapT}set magFilter(e){this._objRef&&(this._objRef.magFilter=e)}get magFilter(){return this._objRef?.magFilter}set minFilter(e){this._objRef&&(this._objRef.minFilter=e)}get minFilter(){return this._objRef?.minFilter}set anisotropy(e){this._objRef&&(this._objRef.anisotropy=e)}get anisotropy(){return this._objRef?.anisotropy}set format(e){this._objRef&&(this._objRef.format=e)}get format(){return this._objRef?.format}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set internalFormat(e){this._objRef&&(this._objRef.internalFormat=e)}get internalFormat(){return this._objRef?.internalFormat}set matrix(e){this._objRef&&(this._objRef.matrix=_e(this._objRef.matrix,e))}get matrix(){return this._objRef?.matrix}set matrixAutoUpdate(e){this._objRef&&(this._objRef.matrixAutoUpdate=e)}get matrixAutoUpdate(){return this._objRef?.matrixAutoUpdate}set offset(e){this._objRef&&(this._objRef.offset=_e(this._objRef.offset,e))}get offset(){return this._objRef?.offset}set repeat(e){this._objRef&&(this._objRef.repeat=_e(this._objRef.repeat,e))}get repeat(){return this._objRef?.repeat}set center(e){this._objRef&&(this._objRef.center=_e(this._objRef.center,e))}get center(){return this._objRef?.center}set rotation(e){this._objRef&&(this._objRef.rotation=e)}get rotation(){return this._objRef?.rotation}set generateMipmaps(e){this._objRef&&(this._objRef.generateMipmaps=e)}get generateMipmaps(){return this._objRef?.generateMipmaps}set premultiplyAlpha(e){this._objRef&&(this._objRef.premultiplyAlpha=e)}get premultiplyAlpha(){return this._objRef?.premultiplyAlpha}set flipY(e){this._objRef&&(this._objRef.flipY=e)}get flipY(){return this._objRef?.flipY}set unpackAlignment(e){this._objRef&&(this._objRef.unpackAlignment=e)}get unpackAlignment(){return this._objRef?.unpackAlignment}set colorSpace(e){this._objRef&&(this._objRef.colorSpace=e)}get colorSpace(){return this._objRef?.colorSpace}set isRenderTargetTexture(e){this._objRef&&(this._objRef.isRenderTargetTexture=e)}get isRenderTargetTexture(){return this._objRef?.isRenderTargetTexture}set userData(e){this._objRef&&(this._objRef.userData=e)}get userData(){return this._objRef?.userData}set version(e){this._objRef&&(this._objRef.version=e)}get version(){return this._objRef?.version}set pmremVersion(e){this._objRef&&(this._objRef.pmremVersion=e)}get pmremVersion(){return this._objRef?.pmremVersion}set needsUpdate(e){this._objRef&&(this._objRef.needsUpdate=e)}set needsPMREMUpdate(e){this._objRef&&(this._objRef.needsPMREMUpdate=e)}};Ds.DEFAULT_ANISOTROPY=vn.DEFAULT_ANISOTROPY,Ds.DEFAULT_IMAGE=vn.DEFAULT_IMAGE,Ds.DEFAULT_MAPPING=vn.DEFAULT_MAPPING,Ds.\u0275fac=(()=>{let e;return function(t){return(e||(e=be(Ds)))(t||Ds)}})(),Ds.\u0275cmp=L({type:Ds,selectors:[["th-texture"]],inputs:{uuid:"uuid",name:"name",source:"source",image:"image",mipmaps:"mipmaps",mapping:"mapping",channel:"channel",wrapS:"wrapS",wrapT:"wrapT",magFilter:"magFilter",minFilter:"minFilter",anisotropy:"anisotropy",format:"format",type:"type",internalFormat:"internalFormat",matrix:"matrix",matrixAutoUpdate:"matrixAutoUpdate",offset:"offset",repeat:"repeat",center:"center",rotation:"rotation",generateMipmaps:"generateMipmaps",premultiplyAlpha:"premultiplyAlpha",flipY:"flipY",unpackAlignment:"unpackAlignment",colorSpace:"colorSpace",isRenderTargetTexture:"isRenderTargetTexture",userData:"userData",version:"version",pmremVersion:"pmremVersion",needsUpdate:"needsUpdate",needsPMREMUpdate:"needsPMREMUpdate"},features:[ie([{provide:fo,useExisting:ge(()=>Ds)}]),q],ngContentSelectors:rre,decls:1,vars:0,template:function(i,t){i&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});var mo=Ds;var ore=["*"],Mg=(()=>{let e=class e extends ni{getType(){return oa}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-polyhedronGeometry"]],features:[ie([{provide:ni,useExisting:ge(()=>e)}]),q],ngContentSelectors:ore,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Mx={name:"DotScreenShader",uniforms:{tDiffuse:{value:null},tSize:{value:new z(256,256)},center:{value:new z(.5,.5)},angle:{value:1.57},scale:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform vec2 center;
		uniform float angle;
		uniform float scale;
		uniform vec2 tSize;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		float pattern() {

			float s = sin( angle ), c = cos( angle );

			vec2 tex = vUv * tSize - center;
			vec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;

			return ( sin( point.x ) * sin( point.y ) ) * 4.0;

		}

		void main() {

			vec4 color = texture2D( tDiffuse, vUv );

			float average = ( color.r + color.g + color.b ) / 3.0;

			gl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );

		}`};var Ff=new lr,Tl=new Xr,yc=new z,bU=new S,z1=new z,Sx=new z,Rx=new S,H1=new S,_U=new Be,vU=new S,yU=new S,Tx=class extends jn{constructor(e,i,t){super(),t.style.touchAction="none";let r=null,o=null,s=[];this.mode="translate",this.rotateSpeed=1;let a=this;function c(){t.addEventListener("pointermove",p),t.addEventListener("pointerdown",b),t.addEventListener("pointerup",g),t.addEventListener("pointerleave",g)}function l(){t.removeEventListener("pointermove",p),t.removeEventListener("pointerdown",b),t.removeEventListener("pointerup",g),t.removeEventListener("pointerleave",g),t.style.cursor=""}function d(){l()}function u(){return e}function h(_){e=_}function f(){return Tl}function p(_){if(a.enabled!==!1){if(m(_),Tl.setFromCamera(yc,i),r)a.mode==="translate"?Tl.ray.intersectPlane(Ff,Rx)&&r.position.copy(Rx.sub(bU).applyMatrix4(_U)):a.mode==="rotate"&&(z1.subVectors(yc,Sx).multiplyScalar(a.rotateSpeed),r.rotateOnWorldAxis(vU,z1.x),r.rotateOnWorldAxis(yU.normalize(),-z1.y)),a.dispatchEvent({type:"drag",object:r}),Sx.copy(yc);else if(_.pointerType==="mouse"||_.pointerType==="pen")if(s.length=0,Tl.setFromCamera(yc,i),Tl.intersectObjects(e,a.recursive,s),s.length>0){let y=s[0].object;Ff.setFromNormalAndCoplanarPoint(i.getWorldDirection(Ff.normal),H1.setFromMatrixPosition(y.matrixWorld)),o!==y&&o!==null&&(a.dispatchEvent({type:"hoveroff",object:o}),t.style.cursor="auto",o=null),o!==y&&(a.dispatchEvent({type:"hoveron",object:y}),t.style.cursor="pointer",o=y)}else o!==null&&(a.dispatchEvent({type:"hoveroff",object:o}),t.style.cursor="auto",o=null);Sx.copy(yc)}}function b(_){a.enabled!==!1&&(m(_),s.length=0,Tl.setFromCamera(yc,i),Tl.intersectObjects(e,a.recursive,s),s.length>0&&(a.transformGroup===!0?r=v(s[0].object):r=s[0].object,Ff.setFromNormalAndCoplanarPoint(i.getWorldDirection(Ff.normal),H1.setFromMatrixPosition(r.matrixWorld)),Tl.ray.intersectPlane(Ff,Rx)&&(a.mode==="translate"?(_U.copy(r.parent.matrixWorld).invert(),bU.copy(Rx).sub(H1.setFromMatrixPosition(r.matrixWorld))):a.mode==="rotate"&&(vU.set(0,1,0).applyQuaternion(i.quaternion).normalize(),yU.set(1,0,0).applyQuaternion(i.quaternion).normalize())),t.style.cursor="move",a.dispatchEvent({type:"dragstart",object:r})),Sx.copy(yc))}function g(){a.enabled!==!1&&(r&&(a.dispatchEvent({type:"dragend",object:r}),r=null),t.style.cursor=o?"pointer":"auto")}function m(_){let y=t.getBoundingClientRect();yc.x=(_.clientX-y.left)/y.width*2-1,yc.y=-(_.clientY-y.top)/y.height*2+1}function v(_,y=null){return _.isGroup&&(y=_),_.parent===null?y:v(_.parent,y)}c(),this.enabled=!0,this.recursive=!0,this.transformGroup=!1,this.activate=c,this.deactivate=l,this.dispose=d,this.getObjects=u,this.getRaycaster=f,this.setObjects=h}};var sre=["*"],xU=(()=>{let e=class e extends nn{getType(){return Tx}set enabled(t){this._objRef&&(this._objRef.enabled=t)}get enabled(){return this._objRef?.enabled}set recursive(t){this._objRef&&(this._objRef.recursive=t)}get recursive(){return this._objRef?.recursive}set transformGroup(t){this._objRef&&(this._objRef.transformGroup=t)}get transformGroup(){return this._objRef?.transformGroup}set mode(t){this._objRef&&(this._objRef.mode=t)}get mode(){return this._objRef?.mode}set rotateSpeed(t){this._objRef&&(this._objRef.rotateSpeed=t)}get rotateSpeed(){return this._objRef?.rotateSpeed}set activate(t){this._objRef&&(this._objRef.activate=t)}get activate(){return this._objRef?.activate}set deactivate(t){this._objRef&&(this._objRef.deactivate=t)}get deactivate(){return this._objRef?.deactivate}set dispose(t){this._objRef&&(this._objRef.dispose=t)}get dispose(){return this._objRef?.dispose}set getObjects(t){this._objRef&&(this._objRef.getObjects=t)}get getObjects(){return this._objRef?.getObjects}set getRaycaster(t){this._objRef&&(this._objRef.getRaycaster=t)}get getRaycaster(){return this._objRef?.getRaycaster}set setObjects(t){this._objRef&&(this._objRef.setObjects=t)}get setObjects(){return this._objRef?.setObjects}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-dragControls"]],inputs:{enabled:"enabled",recursive:"recursive",transformGroup:"transformGroup",mode:"mode",rotateSpeed:"rotateSpeed",activate:"activate",deactivate:"deactivate",dispose:"dispose",getObjects:"getObjects",getRaycaster:"getRaycaster",setObjects:"setObjects"},features:[ie([{provide:nn,useExisting:ge(()=>e)}]),q],ngContentSelectors:sre,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var wU={name:"FilmShader",uniforms:{tDiffuse:{value:null},time:{value:0},intensity:{value:.5},grayscale:{value:!1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#include <common>

		uniform float intensity;
		uniform bool grayscale;
		uniform float time;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 base = texture2D( tDiffuse, vUv );

			float noise = rand( fract( vUv + time ) );

			vec3 color = base.rgb + base.rgb * clamp( 0.1 + noise, 0.0, 1.0 );

			color = mix( base.rgb, color, intensity );

			if ( grayscale ) {

				color = vec3( luminance( color ) ); // assuming linear-srgb

			}

			gl_FragColor = vec4( color, base.a );

		}`};var Cx=class extends cn{constructor(e=.5,i=!1){super();let t=wU;this.uniforms=Li.clone(t.uniforms),this.material=new Ft({name:t.name,uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.uniforms.intensity.value=e,this.uniforms.grayscale.value=i,this.fsQuad=new hr(this.material)}render(e,i,t,r){this.uniforms.tDiffuse.value=t.texture,this.uniforms.time.value+=r,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.clear&&e.clear(),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}};var cre=["*"],MU=(()=>{let e=class e extends Ai{getType(){return Cx}set uniforms(t){this._objRef&&Object.assign(this._objRef.uniforms,t)}get uniforms(){return this._objRef?.uniforms}set material(t){this._objRef&&(this._objRef.material=t)}get material(){return this._objRef?.material}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-filmPass"]],inputs:{uniforms:"uniforms",material:"material",fsQuad:"fsQuad"},features:[ie([{provide:fi,useExisting:ge(()=>e)}]),q],ngContentSelectors:cre,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var SU=new S,G1=new dl,W1=new S,Ex=class{constructor(e,i){this.object=e,this.domElement=i,this.enabled=!0,this.movementSpeed=1,this.lookSpeed=.005,this.lookVertical=!0,this.autoForward=!1,this.activeLook=!0,this.heightSpeed=!1,this.heightCoef=1,this.heightMin=0,this.heightMax=1,this.constrainVertical=!1,this.verticalMin=0,this.verticalMax=Math.PI,this.mouseDragOn=!1,this.autoSpeedFactor=0,this.pointerX=0,this.pointerY=0,this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.viewHalfX=0,this.viewHalfY=0;let t=0,r=0;this.handleResize=function(){this.domElement===document?(this.viewHalfX=window.innerWidth/2,this.viewHalfY=window.innerHeight/2):(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)},this.onPointerDown=function(u){if(this.domElement!==document&&this.domElement.focus(),this.activeLook)switch(u.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0;break}this.mouseDragOn=!0},this.onPointerUp=function(u){if(this.activeLook)switch(u.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1;break}this.mouseDragOn=!1},this.onPointerMove=function(u){this.domElement===document?(this.pointerX=u.pageX-this.viewHalfX,this.pointerY=u.pageY-this.viewHalfY):(this.pointerX=u.pageX-this.domElement.offsetLeft-this.viewHalfX,this.pointerY=u.pageY-this.domElement.offsetTop-this.viewHalfY)},this.onKeyDown=function(u){switch(u.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0;break}},this.onKeyUp=function(u){switch(u.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1;break}},this.lookAt=function(u,h,f){return u.isVector3?W1.copy(u):W1.set(u,h,f),this.object.lookAt(W1),d(this),this},this.update=function(){let u=new S;return function(f){if(this.enabled===!1)return;if(this.heightSpeed){let C=st.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=f*(C*this.heightCoef)}else this.autoSpeedFactor=0;let p=f*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(p+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(p),this.moveLeft&&this.object.translateX(-p),this.moveRight&&this.object.translateX(p),this.moveUp&&this.object.translateY(p),this.moveDown&&this.object.translateY(-p);let b=f*this.lookSpeed;this.activeLook||(b=0);let g=1;this.constrainVertical&&(g=Math.PI/(this.verticalMax-this.verticalMin)),r-=this.pointerX*b,this.lookVertical&&(t-=this.pointerY*b*g),t=Math.max(-85,Math.min(85,t));let m=st.degToRad(90-t),v=st.degToRad(r);this.constrainVertical&&(m=st.mapLinear(m,0,Math.PI,this.verticalMin,this.verticalMax));let _=this.object.position;u.setFromSphericalCoords(1,m,v).add(_),this.object.lookAt(u)}}(),this.dispose=function(){this.domElement.removeEventListener("contextmenu",RU),this.domElement.removeEventListener("pointerdown",s),this.domElement.removeEventListener("pointermove",o),this.domElement.removeEventListener("pointerup",a),window.removeEventListener("keydown",c),window.removeEventListener("keyup",l)};let o=this.onPointerMove.bind(this),s=this.onPointerDown.bind(this),a=this.onPointerUp.bind(this),c=this.onKeyDown.bind(this),l=this.onKeyUp.bind(this);this.domElement.addEventListener("contextmenu",RU),this.domElement.addEventListener("pointerdown",s),this.domElement.addEventListener("pointermove",o),this.domElement.addEventListener("pointerup",a),window.addEventListener("keydown",c),window.addEventListener("keyup",l);function d(u){let h=u.object.quaternion;SU.set(0,0,-1).applyQuaternion(h),G1.setFromVector3(SU),t=90-st.radToDeg(G1.phi),r=st.radToDeg(G1.theta)}this.handleResize(),d(this)}};function RU(n){n.preventDefault()}var dre=["*"],TU=(()=>{let e=class e extends nn{getType(){return Ex}set object(t){this._objRef&&(this._objRef.object=t)}get object(){return this._objRef?.object}set domElement(t){this._objRef&&(this._objRef.domElement=t)}get domElement(){return this._objRef?.domElement}set enabled(t){this._objRef&&(this._objRef.enabled=t)}get enabled(){return this._objRef?.enabled}set movementSpeed(t){this._objRef&&(this._objRef.movementSpeed=t)}get movementSpeed(){return this._objRef?.movementSpeed}set lookSpeed(t){this._objRef&&(this._objRef.lookSpeed=t)}get lookSpeed(){return this._objRef?.lookSpeed}set lookVertical(t){this._objRef&&(this._objRef.lookVertical=t)}get lookVertical(){return this._objRef?.lookVertical}set autoForward(t){this._objRef&&(this._objRef.autoForward=t)}get autoForward(){return this._objRef?.autoForward}set activeLook(t){this._objRef&&(this._objRef.activeLook=t)}get activeLook(){return this._objRef?.activeLook}set heightSpeed(t){this._objRef&&(this._objRef.heightSpeed=t)}get heightSpeed(){return this._objRef?.heightSpeed}set heightCoef(t){this._objRef&&(this._objRef.heightCoef=t)}get heightCoef(){return this._objRef?.heightCoef}set heightMin(t){this._objRef&&(this._objRef.heightMin=t)}get heightMin(){return this._objRef?.heightMin}set heightMax(t){this._objRef&&(this._objRef.heightMax=t)}get heightMax(){return this._objRef?.heightMax}set constrainVertical(t){this._objRef&&(this._objRef.constrainVertical=t)}get constrainVertical(){return this._objRef?.constrainVertical}set verticalMin(t){this._objRef&&(this._objRef.verticalMin=t)}get verticalMin(){return this._objRef?.verticalMin}set verticalMax(t){this._objRef&&(this._objRef.verticalMax=t)}get verticalMax(){return this._objRef?.verticalMax}set mouseDragOn(t){this._objRef&&(this._objRef.mouseDragOn=t)}get mouseDragOn(){return this._objRef?.mouseDragOn}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-firstPersonControls"]],inputs:{object:"object",domElement:"domElement",enabled:"enabled",movementSpeed:"movementSpeed",lookSpeed:"lookSpeed",lookVertical:"lookVertical",autoForward:"autoForward",activeLook:"activeLook",heightSpeed:"heightSpeed",heightCoef:"heightCoef",heightMin:"heightMin",heightMax:"heightMax",constrainVertical:"constrainVertical",verticalMin:"verticalMin",verticalMax:"verticalMax",mouseDragOn:"mouseDragOn"},features:[ie([{provide:nn,useExisting:ge(()=>e)}]),q],ngContentSelectors:dre,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var hre={type:"change"},Dx=class extends jn{constructor(e,i){super(),this.object=e,this.domElement=i,this.enabled=!0,this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;let t=this,r=1e-6,o=new ii,s=new S;this.tmpQuaternion=new ii,this.status=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new S(0,0,0),this.rotationVector=new S(0,0,0),this.keydown=function(p){if(!(p.altKey||this.enabled===!1)){switch(p.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1;break}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(p){if(this.enabled!==!1){switch(p.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0;break}this.updateMovementVector(),this.updateRotationVector()}},this.pointerdown=function(p){if(this.enabled!==!1)if(this.dragToLook)this.status++;else{switch(p.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}},this.pointermove=function(p){if(this.enabled!==!1&&(!this.dragToLook||this.status>0)){let b=this.getContainerDimensions(),g=b.size[0]/2,m=b.size[1]/2;this.moveState.yawLeft=-(p.pageX-b.offset[0]-g)/g,this.moveState.pitchDown=(p.pageY-b.offset[1]-m)/m,this.updateRotationVector()}},this.pointerup=function(p){if(this.enabled!==!1){if(this.dragToLook)this.status--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(p.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()}},this.pointercancel=function(){this.enabled!==!1&&(this.dragToLook?(this.status=0,this.moveState.yawLeft=this.moveState.pitchDown=0):(this.moveState.forward=0,this.moveState.back=0,this.updateMovementVector()),this.updateRotationVector())},this.contextMenu=function(p){this.enabled!==!1&&p.preventDefault()},this.update=function(p){if(this.enabled===!1)return;let b=p*t.movementSpeed,g=p*t.rollSpeed;t.object.translateX(t.moveVector.x*b),t.object.translateY(t.moveVector.y*b),t.object.translateZ(t.moveVector.z*b),t.tmpQuaternion.set(t.rotationVector.x*g,t.rotationVector.y*g,t.rotationVector.z*g,1).normalize(),t.object.quaternion.multiply(t.tmpQuaternion),(s.distanceToSquared(t.object.position)>r||8*(1-o.dot(t.object.quaternion))>r)&&(t.dispatchEvent(hre),o.copy(t.object.quaternion),s.copy(t.object.position))},this.updateMovementVector=function(){let p=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-p+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",a),this.domElement.removeEventListener("pointerdown",l),this.domElement.removeEventListener("pointermove",c),this.domElement.removeEventListener("pointerup",d),this.domElement.removeEventListener("pointercancel",u),window.removeEventListener("keydown",h),window.removeEventListener("keyup",f)};let a=this.contextMenu.bind(this),c=this.pointermove.bind(this),l=this.pointerdown.bind(this),d=this.pointerup.bind(this),u=this.pointercancel.bind(this),h=this.keydown.bind(this),f=this.keyup.bind(this);this.domElement.addEventListener("contextmenu",a),this.domElement.addEventListener("pointerdown",l),this.domElement.addEventListener("pointermove",c),this.domElement.addEventListener("pointerup",d),this.domElement.addEventListener("pointercancel",u),window.addEventListener("keydown",h),window.addEventListener("keyup",f),this.updateMovementVector(),this.updateRotationVector()}};var fre=["*"],CU=(()=>{let e=class e extends nn{getType(){return Dx}set autoForward(t){this._objRef&&(this._objRef.autoForward=t)}get autoForward(){return this._objRef?.autoForward}set domElement(t){this._objRef&&(this._objRef.domElement=t)}get domElement(){return this._objRef?.domElement}set dragToLook(t){this._objRef&&(this._objRef.dragToLook=t)}get dragToLook(){return this._objRef?.dragToLook}set enabled(t){this._objRef&&(this._objRef.enabled=t)}get enabled(){return this._objRef?.enabled}set movementSpeed(t){this._objRef&&(this._objRef.movementSpeed=t)}get movementSpeed(){return this._objRef?.movementSpeed}set object(t){this._objRef&&(this._objRef.object=t)}get object(){return this._objRef?.object}set rollSpeed(t){this._objRef&&(this._objRef.rollSpeed=t)}get rollSpeed(){return this._objRef?.rollSpeed}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-flyControls"]],inputs:{autoForward:"autoForward",domElement:"domElement",dragToLook:"dragToLook",enabled:"enabled",movementSpeed:"movementSpeed",object:"object",rollSpeed:"rollSpeed"},features:[ie([{provide:nn,useExisting:ge(()=>e)}]),q],ngContentSelectors:fre,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var EU={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:`

		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`

		uniform int byp; //should we apply the glitch ?

		uniform sampler2D tDiffuse;
		uniform sampler2D tDisp;

		uniform float amount;
		uniform float angle;
		uniform float seed;
		uniform float seed_x;
		uniform float seed_y;
		uniform float distortion_x;
		uniform float distortion_y;
		uniform float col_s;

		varying vec2 vUv;


		float rand(vec2 co){
			return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
		}

		void main() {
			if(byp<1) {
				vec2 p = vUv;
				float xs = floor(gl_FragCoord.x / 0.5);
				float ys = floor(gl_FragCoord.y / 0.5);
				//based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch
				float disp = texture2D(tDisp, p*seed*seed).r;
				if(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {
					if(seed_x>0.){
						p.y = 1. - (p.y + distortion_y);
					}
					else {
						p.y = distortion_y;
					}
				}
				if(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {
					if(seed_y>0.){
						p.x=distortion_x;
					}
					else {
						p.x = 1. - (p.x + distortion_x);
					}
				}
				p.x+=disp*seed_x*(seed/5.);
				p.y+=disp*seed_y*(seed/5.);
				//base from RGB shift shader
				vec2 offset = amount * vec2( cos(angle), sin(angle));
				vec4 cr = texture2D(tDiffuse, p + offset);
				vec4 cga = texture2D(tDiffuse, p);
				vec4 cb = texture2D(tDiffuse, p - offset);
				gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);
				//add noise
				vec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);
				gl_FragColor = gl_FragColor+ snow;
			}
			else {
				gl_FragColor=texture2D (tDiffuse, vUv);
			}
		}`};var Ax=class extends cn{constructor(e=64){super();let i=EU;this.uniforms=Li.clone(i.uniforms),this.heightMap=this.generateHeightmap(e),this.uniforms.tDisp.value=this.heightMap,this.material=new Ft({uniforms:this.uniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader}),this.fsQuad=new hr(this.material),this.goWild=!1,this.curF=0,this.generateTrigger()}render(e,i,t){this.uniforms.tDiffuse.value=t.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||this.goWild==!0?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=st.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=st.randFloat(-1,1),this.uniforms.seed_y.value=st.randFloat(-1,1),this.uniforms.distortion_x.value=st.randFloat(0,1),this.uniforms.distortion_y.value=st.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=st.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=st.randFloat(0,1),this.uniforms.distortion_y.value=st.randFloat(0,1),this.uniforms.seed_x.value=st.randFloat(-.3,.3),this.uniforms.seed_y.value=st.randFloat(-.3,.3)):this.goWild==!1&&(this.uniforms.byp.value=1),this.curF++,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.clear&&e.clear(),this.fsQuad.render(e))}generateTrigger(){this.randX=st.randInt(120,240)}generateHeightmap(e){let i=new Float32Array(e*e),t=e*e;for(let o=0;o<t;o++){let s=st.randFloat(0,1);i[o]=s}let r=new $r(i,e,e,Xd,yr);return r.needsUpdate=!0,r}dispose(){this.material.dispose(),this.heightMap.dispose(),this.fsQuad.dispose()}};var pre=["*"],DU=(()=>{let e=class e extends Ai{getType(){return Ax}set uniforms(t){this._objRef&&Object.assign(this._objRef.uniforms,t)}get uniforms(){return this._objRef?.uniforms}set material(t){this._objRef&&(this._objRef.material=t)}get material(){return this._objRef?.material}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}set goWild(t){this._objRef&&(this._objRef.goWild=t)}get goWild(){return this._objRef?.goWild}set curF(t){this._objRef&&(this._objRef.curF=t)}get curF(){return this._objRef?.curF}set randX(t){this._objRef&&(this._objRef.randX=t)}get randX(){return this._objRef?.randX}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-glitchPass"]],inputs:{uniforms:"uniforms",material:"material",fsQuad:"fsQuad",goWild:"goWild",curF:"curF",randX:"randX"},features:[ie([{provide:fi,useExisting:ge(()=>e)}]),q],ngContentSelectors:pre,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var bre=["*"],Cl=(()=>{let e=class e extends me{getType(){return Cr}get isGroup(){return this._objRef?.isGroup}get type(){return this._objRef?.type}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-group"]],features:[ie([{provide:me,useExisting:ge(()=>e)}]),q],ngContentSelectors:bre,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var _re=["*"],AU=(()=>{let e=class e extends Mg{getType(){return tf}get type(){return this._objRef?.type}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-icosahedronGeometry"]],features:[ie([{provide:ni,useExisting:ge(()=>e)}]),q],ngContentSelectors:_re,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var yre=["*"],IU=(()=>{let e=class e extends Ti{getType(){return al}get isInstancedMesh(){return this._objRef?.isInstancedMesh}set boundingBox(t){this._objRef&&(this._objRef.boundingBox=_e(this._objRef.boundingBox,t))}get boundingBox(){return this._objRef?.boundingBox}set boundingSphere(t){this._objRef&&(this._objRef.boundingSphere=_e(this._objRef.boundingSphere,t))}get boundingSphere(){return this._objRef?.boundingSphere}set count(t){this._objRef&&(this._objRef.count=t)}get count(){return this._objRef?.count}set instanceColor(t){this._objRef&&(this._objRef.instanceColor=_e(this._objRef.instanceColor,t))}get instanceColor(){return this._objRef?.instanceColor}set instanceMatrix(t){this._objRef&&(this._objRef.instanceMatrix=_e(this._objRef.instanceMatrix,t))}get instanceMatrix(){return this._objRef?.instanceMatrix}set morphTexture(t){this._objRef&&(this._objRef.morphTexture=t)}get morphTexture(){return this._objRef?.morphTexture}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-instancedMesh"]],inputs:{boundingBox:"boundingBox",boundingSphere:"boundingSphere",count:"count",instanceColor:"instanceColor",instanceMatrix:"instanceMatrix",morphTexture:"morphTexture"},features:[ie([{provide:me,useExisting:ge(()=>e)}]),q],ngContentSelectors:yre,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var wre=["*"],Sg=(()=>{let e=class e extends Ai{getType(){return kf}set textureID(t){this._objRef&&(this._objRef.textureID=t)}get textureID(){return this._objRef?.textureID}set uniforms(t){this._objRef&&Object.assign(this._objRef.uniforms,t)}get uniforms(){return this._objRef?.uniforms}set material(t){this._objRef&&(this._objRef.material=t)}get material(){return this._objRef?.material}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-shaderPass"]],inputs:{textureID:"textureID",uniforms:"uniforms",material:"material",fsQuad:"fsQuad"},features:[ie([{provide:fi,useExisting:ge(()=>e)}]),q],ngContentSelectors:wre,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Ix=class extends Mf{constructor(e,i){super(e,i),this.screenSpacePanning=!1,this.mouseButtons={LEFT:Ar.PAN,MIDDLE:Ar.DOLLY,RIGHT:Ar.ROTATE},this.touches={ONE:xs.PAN,TWO:xs.DOLLY_ROTATE}}};var Mre=["*"],kU=(()=>{let e=class e extends In{getType(){return Ix}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-mapControls"]],features:[ie([{provide:nn,useExisting:ge(()=>e)}]),q],ngContentSelectors:Mre,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Rre=["*"],Rg=(()=>{let e=class e extends sn{getType(){return Dr}get isMeshStandardMaterial(){return this._objRef?.isMeshStandardMaterial}set type(t){this._objRef&&(this._objRef.type=t)}get type(){return this._objRef?.type}set defines(t){this._objRef&&(this._objRef.defines=t)}get defines(){return this._objRef?.defines}set color(t){this._objRef&&(this._objRef.color=_e(this._objRef.color,t))}get color(){return this._objRef?.color}set roughness(t){this._objRef&&(this._objRef.roughness=t)}get roughness(){return this._objRef?.roughness}set metalness(t){this._objRef&&(this._objRef.metalness=t)}get metalness(){return this._objRef?.metalness}set map(t){this._objRef&&(this._objRef.map=t)}get map(){return this._objRef?.map}set lightMap(t){this._objRef&&(this._objRef.lightMap=t)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(t){this._objRef&&(this._objRef.lightMapIntensity=t)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set aoMap(t){this._objRef&&(this._objRef.aoMap=t)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(t){this._objRef&&(this._objRef.aoMapIntensity=t)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set emissive(t){this._objRef&&(this._objRef.emissive=_e(this._objRef.emissive,t))}get emissive(){return this._objRef?.emissive}set emissiveIntensity(t){this._objRef&&(this._objRef.emissiveIntensity=t)}get emissiveIntensity(){return this._objRef?.emissiveIntensity}set emissiveMap(t){this._objRef&&(this._objRef.emissiveMap=t)}get emissiveMap(){return this._objRef?.emissiveMap}set bumpMap(t){this._objRef&&(this._objRef.bumpMap=t)}get bumpMap(){return this._objRef?.bumpMap}set bumpScale(t){this._objRef&&(this._objRef.bumpScale=t)}get bumpScale(){return this._objRef?.bumpScale}set normalMap(t){this._objRef&&(this._objRef.normalMap=t)}get normalMap(){return this._objRef?.normalMap}set normalMapType(t){this._objRef&&(this._objRef.normalMapType=t)}get normalMapType(){return this._objRef?.normalMapType}set normalScale(t){this._objRef&&(this._objRef.normalScale=_e(this._objRef.normalScale,t))}get normalScale(){return this._objRef?.normalScale}set displacementMap(t){this._objRef&&(this._objRef.displacementMap=t)}get displacementMap(){return this._objRef?.displacementMap}set displacementScale(t){this._objRef&&(this._objRef.displacementScale=t)}get displacementScale(){return this._objRef?.displacementScale}set displacementBias(t){this._objRef&&(this._objRef.displacementBias=t)}get displacementBias(){return this._objRef?.displacementBias}set roughnessMap(t){this._objRef&&(this._objRef.roughnessMap=t)}get roughnessMap(){return this._objRef?.roughnessMap}set metalnessMap(t){this._objRef&&(this._objRef.metalnessMap=t)}get metalnessMap(){return this._objRef?.metalnessMap}set alphaMap(t){this._objRef&&(this._objRef.alphaMap=t)}get alphaMap(){return this._objRef?.alphaMap}set envMap(t){this._objRef&&(this._objRef.envMap=t)}get envMap(){return this._objRef?.envMap}set envMapRotation(t){this._objRef&&(this._objRef.envMapRotation=_e(this._objRef.envMapRotation,t))}get envMapRotation(){return this._objRef?.envMapRotation}set envMapIntensity(t){this._objRef&&(this._objRef.envMapIntensity=t)}get envMapIntensity(){return this._objRef?.envMapIntensity}set wireframe(t){this._objRef&&(this._objRef.wireframe=t)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(t){this._objRef&&(this._objRef.wireframeLinewidth=t)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(t){this._objRef&&(this._objRef.wireframeLinecap=t)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(t){this._objRef&&(this._objRef.wireframeLinejoin=t)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set flatShading(t){this._objRef&&(this._objRef.flatShading=t)}get flatShading(){return this._objRef?.flatShading}set fog(t){this._objRef&&(this._objRef.fog=t)}get fog(){return this._objRef?.fog}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-meshStandardMaterial"]],inputs:{type:"type",defines:"defines",color:"color",roughness:"roughness",metalness:"metalness",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",emissive:"emissive",emissiveIntensity:"emissiveIntensity",emissiveMap:"emissiveMap",bumpMap:"bumpMap",bumpScale:"bumpScale",normalMap:"normalMap",normalMapType:"normalMapType",normalScale:"normalScale",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",roughnessMap:"roughnessMap",metalnessMap:"metalnessMap",alphaMap:"alphaMap",envMap:"envMap",envMapRotation:"envMapRotation",envMapIntensity:"envMapIntensity",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",flatShading:"flatShading",fog:"fog"},features:[ie([{provide:sn,useExisting:ge(()=>e)}]),q],ngContentSelectors:Rre,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var jf=class n extends cn{constructor(e,i,t,r){super(),this.renderScene=i,this.renderCamera=t,this.selectedObjects=r!==void 0?r:[],this.visibleEdgeColor=new pe(1,1,1),this.hiddenEdgeColor=new pe(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=e!==void 0?new z(e.x,e.y):new z(256,256);let o=Math.round(this.resolution.x/this.downSampleRatio),s=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new ci(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new Bd,this.depthMaterial.side=Kn,this.depthMaterial.depthPacking=Ny,this.depthMaterial.blending=ti,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=Kn,this.prepareMaskMaterial.fragmentShader=d(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new ci(this.resolution.x,this.resolution.y,{type:qi}),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new ci(o,s,{type:qi}),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new ci(o,s,{type:qi}),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new ci(Math.round(o/2),Math.round(s/2),{type:qi}),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new ci(o,s,{type:qi}),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new ci(Math.round(o/2),Math.round(s/2),{type:qi}),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;let a=4,c=4;this.separableBlurMaterial1=this.getSeperableBlurMaterial(a),this.separableBlurMaterial1.uniforms.texSize.value.set(o,s),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(c),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(o/2),Math.round(s/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=c,this.overlayMaterial=this.getOverlayMaterial();let l=fr;this.copyUniforms=Li.clone(l.uniforms),this.materialCopy=new Ft({uniforms:this.copyUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,blending:ti,depthTest:!1,depthWrite:!1}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new pe,this.oldClearAlpha=1,this.fsQuad=new hr(null),this.tempPulseColor1=new pe,this.tempPulseColor2=new pe,this.textureMatrix=new Be;function d(u,h){let f=h.isPerspectiveCamera?"perspective":"orthographic";return u.replace(/DEPTH_TO_VIEW_Z/g,f+"DepthToViewZ")}}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}setSize(e,i){this.renderTargetMaskBuffer.setSize(e,i),this.renderTargetDepthBuffer.setSize(e,i);let t=Math.round(e/this.downSampleRatio),r=Math.round(i/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(t,r),this.renderTargetBlurBuffer1.setSize(t,r),this.renderTargetEdgeBuffer1.setSize(t,r),this.separableBlurMaterial1.uniforms.texSize.value.set(t,r),t=Math.round(t/2),r=Math.round(r/2),this.renderTargetBlurBuffer2.setSize(t,r),this.renderTargetEdgeBuffer2.setSize(t,r),this.separableBlurMaterial2.uniforms.texSize.value.set(t,r)}changeVisibilityOfSelectedObjects(e){let i=this._visibilityCache;function t(r){r.isMesh&&(e===!0?r.visible=i.get(r):(i.set(r,r.visible),r.visible=e))}for(let r=0;r<this.selectedObjects.length;r++)this.selectedObjects[r].traverse(t)}changeVisibilityOfNonSelectedObjects(e){let i=this._visibilityCache,t=[];function r(s){s.isMesh&&t.push(s)}for(let s=0;s<this.selectedObjects.length;s++)this.selectedObjects[s].traverse(r);function o(s){if(s.isMesh||s.isSprite){let a=!1;for(let c=0;c<t.length;c++)if(t[c].id===s.id){a=!0;break}if(a===!1){let c=s.visible;(e===!1||i.get(s)===!0)&&(s.visible=e),i.set(s,c)}}else(s.isPoints||s.isLine)&&(e===!0?s.visible=i.get(s):(i.set(s,s.visible),s.visible=e))}this.renderScene.traverse(o)}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(e,i,t,r,o){if(this.selectedObjects.length>0){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();let s=e.autoClear;e.autoClear=!1,o&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);let a=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=a,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){let c=.625+Math.cos(performance.now()*.01/this.pulsePeriod)*.75/2;this.tempPulseColor1.multiplyScalar(c),this.tempPulseColor2.multiplyScalar(c)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=n.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=n.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=n.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=n.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,o&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(t),this.fsQuad.render(e),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=t.texture,e.setRenderTarget(null),this.fsQuad.render(e))}getPrepareMaskMaterial(){return new Ft({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new z(.5,.5)},textureMatrix:{value:null}},vertexShader:`#include <morphtarget_pars_vertex>
				#include <skinning_pars_vertex>

				varying vec4 projTexCoord;
				varying vec4 vPosition;
				uniform mat4 textureMatrix;

				void main() {

					#include <skinbase_vertex>
					#include <begin_vertex>
					#include <morphtarget_vertex>
					#include <skinning_vertex>
					#include <project_vertex>

					vPosition = mvPosition;

					vec4 worldPosition = vec4( transformed, 1.0 );

					#ifdef USE_INSTANCING

						worldPosition = instanceMatrix * worldPosition;

					#endif
					
					worldPosition = modelMatrix * worldPosition;

					projTexCoord = textureMatrix * worldPosition;

				}`,fragmentShader:`#include <packing>
				varying vec4 vPosition;
				varying vec4 projTexCoord;
				uniform sampler2D depthTexture;
				uniform vec2 cameraNearFar;

				void main() {

					float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));
					float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );
					float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;
					gl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);

				}`})}getEdgeDetectionMaterial(){return new Ft({uniforms:{maskTexture:{value:null},texSize:{value:new z(.5,.5)},visibleEdgeColor:{value:new S(1,1,1)},hiddenEdgeColor:{value:new S(1,1,1)}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform vec2 texSize;
				uniform vec3 visibleEdgeColor;
				uniform vec3 hiddenEdgeColor;

				void main() {
					vec2 invSize = 1.0 / texSize;
					vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);
					vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);
					vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);
					vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);
					vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);
					float diff1 = (c1.r - c2.r)*0.5;
					float diff2 = (c3.r - c4.r)*0.5;
					float d = length( vec2(diff1, diff2) );
					float a1 = min(c1.g, c2.g);
					float a2 = min(c3.g, c4.g);
					float visibilityFactor = min(a1, a2);
					vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;
					gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);
				}`})}getSeperableBlurMaterial(e){return new Ft({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new z(.5,.5)},direction:{value:new z(.5,.5)},kernelRadius:{value:1}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;
				uniform float kernelRadius;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}

				void main() {
					vec2 invSize = 1.0 / texSize;
					float sigma = kernelRadius/2.0;
					float weightSum = gaussianPdf(0.0, sigma);
					vec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;
					vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);
					vec2 uvOffset = delta;
					for( int i = 1; i <= MAX_RADIUS; i ++ ) {
						float x = kernelRadius * float(i) / float(MAX_RADIUS);
						float w = gaussianPdf(x, sigma);
						vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);
						vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);
						diffuseSum += ((sample1 + sample2) * w);
						weightSum += (2.0 * w);
						uvOffset += delta;
					}
					gl_FragColor = diffuseSum/weightSum;
				}`})}getOverlayMaterial(){return new Ft({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform sampler2D edgeTexture1;
				uniform sampler2D edgeTexture2;
				uniform sampler2D patternTexture;
				uniform float edgeStrength;
				uniform float edgeGlow;
				uniform bool usePatternTexture;

				void main() {
					vec4 edgeValue1 = texture2D(edgeTexture1, vUv);
					vec4 edgeValue2 = texture2D(edgeTexture2, vUv);
					vec4 maskColor = texture2D(maskTexture, vUv);
					vec4 patternColor = texture2D(patternTexture, 6.0 * vUv);
					float visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;
					vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;
					vec4 finalColor = edgeStrength * maskColor.r * edgeValue;
					if(usePatternTexture)
						finalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);
					gl_FragColor = finalColor;
				}`,blending:Dd,depthTest:!1,depthWrite:!1,transparent:!0})}};jf.BlurDirectionX=new z(1,0);jf.BlurDirectionY=new z(0,1);var Tre=["*"],jU=(()=>{let e=class e extends Ai{getType(){return jf}set renderScene(t){this._objRef&&(this._objRef.renderScene=t)}get renderScene(){return this._objRef?.renderScene}set renderCamera(t){this._objRef&&(this._objRef.renderCamera=t)}get renderCamera(){return this._objRef?.renderCamera}set selectedObjects(t){this._objRef&&(this._objRef.selectedObjects=t)}get selectedObjects(){return this._objRef?.selectedObjects}set visibleEdgeColor(t){this._objRef&&(this._objRef.visibleEdgeColor=_e(this._objRef.visibleEdgeColor,t))}get visibleEdgeColor(){return this._objRef?.visibleEdgeColor}set hiddenEdgeColor(t){this._objRef&&(this._objRef.hiddenEdgeColor=_e(this._objRef.hiddenEdgeColor,t))}get hiddenEdgeColor(){return this._objRef?.hiddenEdgeColor}set edgeGlow(t){this._objRef&&(this._objRef.edgeGlow=t)}get edgeGlow(){return this._objRef?.edgeGlow}set usePatternTexture(t){this._objRef&&(this._objRef.usePatternTexture=t)}get usePatternTexture(){return this._objRef?.usePatternTexture}set edgeThickness(t){this._objRef&&(this._objRef.edgeThickness=t)}get edgeThickness(){return this._objRef?.edgeThickness}set edgeStrength(t){this._objRef&&(this._objRef.edgeStrength=t)}get edgeStrength(){return this._objRef?.edgeStrength}set downSampleRatio(t){this._objRef&&(this._objRef.downSampleRatio=t)}get downSampleRatio(){return this._objRef?.downSampleRatio}set pulsePeriod(t){this._objRef&&(this._objRef.pulsePeriod=t)}get pulsePeriod(){return this._objRef?.pulsePeriod}set resolution(t){this._objRef&&(this._objRef.resolution=_e(this._objRef.resolution,t))}get resolution(){return this._objRef?.resolution}set patternTexture(t){this._objRef&&(this._objRef.patternTexture=t)}get patternTexture(){return this._objRef?.patternTexture}set maskBufferMaterial(t){this._objRef&&(this._objRef.maskBufferMaterial=t)}get maskBufferMaterial(){return this._objRef?.maskBufferMaterial}set renderTargetMaskBuffer(t){this._objRef&&(this._objRef.renderTargetMaskBuffer=t)}get renderTargetMaskBuffer(){return this._objRef?.renderTargetMaskBuffer}set depthMaterial(t){this._objRef&&(this._objRef.depthMaterial=t)}get depthMaterial(){return this._objRef?.depthMaterial}set prepareMaskMaterial(t){this._objRef&&(this._objRef.prepareMaskMaterial=t)}get prepareMaskMaterial(){return this._objRef?.prepareMaskMaterial}set renderTargetDepthBuffer(t){this._objRef&&(this._objRef.renderTargetDepthBuffer=t)}get renderTargetDepthBuffer(){return this._objRef?.renderTargetDepthBuffer}set renderTargetMaskDownSampleBuffer(t){this._objRef&&(this._objRef.renderTargetMaskDownSampleBuffer=t)}get renderTargetMaskDownSampleBuffer(){return this._objRef?.renderTargetMaskDownSampleBuffer}set renderTargetBlurBuffer1(t){this._objRef&&(this._objRef.renderTargetBlurBuffer1=t)}get renderTargetBlurBuffer1(){return this._objRef?.renderTargetBlurBuffer1}set renderTargetBlurBuffer2(t){this._objRef&&(this._objRef.renderTargetBlurBuffer2=t)}get renderTargetBlurBuffer2(){return this._objRef?.renderTargetBlurBuffer2}set edgeDetectionMaterial(t){this._objRef&&(this._objRef.edgeDetectionMaterial=t)}get edgeDetectionMaterial(){return this._objRef?.edgeDetectionMaterial}set renderTargetEdgeBuffer1(t){this._objRef&&(this._objRef.renderTargetEdgeBuffer1=t)}get renderTargetEdgeBuffer1(){return this._objRef?.renderTargetEdgeBuffer1}set renderTargetEdgeBuffer2(t){this._objRef&&(this._objRef.renderTargetEdgeBuffer2=t)}get renderTargetEdgeBuffer2(){return this._objRef?.renderTargetEdgeBuffer2}set separableBlurMaterial1(t){this._objRef&&(this._objRef.separableBlurMaterial1=t)}get separableBlurMaterial1(){return this._objRef?.separableBlurMaterial1}set separableBlurMaterial2(t){this._objRef&&(this._objRef.separableBlurMaterial2=t)}get separableBlurMaterial2(){return this._objRef?.separableBlurMaterial2}set overlayMaterial(t){this._objRef&&(this._objRef.overlayMaterial=t)}get overlayMaterial(){return this._objRef?.overlayMaterial}set copyUniforms(t){this._objRef&&(this._objRef.copyUniforms=t)}get copyUniforms(){return this._objRef?.copyUniforms}set materialCopy(t){this._objRef&&(this._objRef.materialCopy=t)}get materialCopy(){return this._objRef?.materialCopy}set oldClearColor(t){this._objRef&&(this._objRef.oldClearColor=_e(this._objRef.oldClearColor,t))}get oldClearColor(){return this._objRef?.oldClearColor}set oldClearAlpha(t){this._objRef&&(this._objRef.oldClearAlpha=t)}get oldClearAlpha(){return this._objRef?.oldClearAlpha}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}set tempPulseColor1(t){this._objRef&&(this._objRef.tempPulseColor1=_e(this._objRef.tempPulseColor1,t))}get tempPulseColor1(){return this._objRef?.tempPulseColor1}set tempPulseColor2(t){this._objRef&&(this._objRef.tempPulseColor2=_e(this._objRef.tempPulseColor2,t))}get tempPulseColor2(){return this._objRef?.tempPulseColor2}set textureMatrix(t){this._objRef&&(this._objRef.textureMatrix=_e(this._objRef.textureMatrix,t))}get textureMatrix(){return this._objRef?.textureMatrix}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-outlinePass"]],inputs:{renderScene:"renderScene",renderCamera:"renderCamera",selectedObjects:"selectedObjects",visibleEdgeColor:"visibleEdgeColor",hiddenEdgeColor:"hiddenEdgeColor",edgeGlow:"edgeGlow",usePatternTexture:"usePatternTexture",edgeThickness:"edgeThickness",edgeStrength:"edgeStrength",downSampleRatio:"downSampleRatio",pulsePeriod:"pulsePeriod",resolution:"resolution",patternTexture:"patternTexture",maskBufferMaterial:"maskBufferMaterial",renderTargetMaskBuffer:"renderTargetMaskBuffer",depthMaterial:"depthMaterial",prepareMaskMaterial:"prepareMaskMaterial",renderTargetDepthBuffer:"renderTargetDepthBuffer",renderTargetMaskDownSampleBuffer:"renderTargetMaskDownSampleBuffer",renderTargetBlurBuffer1:"renderTargetBlurBuffer1",renderTargetBlurBuffer2:"renderTargetBlurBuffer2",edgeDetectionMaterial:"edgeDetectionMaterial",renderTargetEdgeBuffer1:"renderTargetEdgeBuffer1",renderTargetEdgeBuffer2:"renderTargetEdgeBuffer2",separableBlurMaterial1:"separableBlurMaterial1",separableBlurMaterial2:"separableBlurMaterial2",overlayMaterial:"overlayMaterial",copyUniforms:"copyUniforms",materialCopy:"materialCopy",oldClearColor:"oldClearColor",oldClearAlpha:"oldClearAlpha",fsQuad:"fsQuad",tempPulseColor1:"tempPulseColor1",tempPulseColor2:"tempPulseColor2",textureMatrix:"textureMatrix"},features:[ie([{provide:fi,useExisting:ge(()=>e)}]),q],ngContentSelectors:Tre,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Ere=["*"],q1=(()=>{let e=class e extends sn{getType(){return Ft}get isShaderMaterial(){return this._objRef?.isShaderMaterial}set type(t){this._objRef&&(this._objRef.type=t)}get type(){return this._objRef?.type}set defines(t){this._objRef&&(this._objRef.defines=t)}get defines(){return this._objRef?.defines}set uniforms(t){this._objRef&&(this._objRef.uniforms=t)}get uniforms(){return this._objRef?.uniforms}set uniformsGroups(t){this._objRef&&(this._objRef.uniformsGroups=t)}get uniformsGroups(){return this._objRef?.uniformsGroups}set vertexShader(t){this._objRef&&(this._objRef.vertexShader=t)}get vertexShader(){return this._objRef?.vertexShader}set fragmentShader(t){this._objRef&&(this._objRef.fragmentShader=t)}get fragmentShader(){return this._objRef?.fragmentShader}set linewidth(t){this._objRef&&(this._objRef.linewidth=t)}get linewidth(){return this._objRef?.linewidth}set wireframe(t){this._objRef&&(this._objRef.wireframe=t)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(t){this._objRef&&(this._objRef.wireframeLinewidth=t)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set fog(t){this._objRef&&(this._objRef.fog=t)}get fog(){return this._objRef?.fog}set lights(t){this._objRef&&(this._objRef.lights=t)}get lights(){return this._objRef?.lights}set clipping(t){this._objRef&&(this._objRef.clipping=t)}get clipping(){return this._objRef?.clipping}set extensions(t){this._objRef&&(this._objRef.extensions=t)}get extensions(){return this._objRef?.extensions}set defaultAttributeValues(t){this._objRef&&(this._objRef.defaultAttributeValues=t)}get defaultAttributeValues(){return this._objRef?.defaultAttributeValues}set index0AttributeName(t){this._objRef&&(this._objRef.index0AttributeName=t)}get index0AttributeName(){return this._objRef?.index0AttributeName}set uniformsNeedUpdate(t){this._objRef&&(this._objRef.uniformsNeedUpdate=t)}get uniformsNeedUpdate(){return this._objRef?.uniformsNeedUpdate}set glslVersion(t){this._objRef&&(this._objRef.glslVersion=t)}get glslVersion(){return this._objRef?.glslVersion}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-shaderMaterial"]],inputs:{type:"type",defines:"defines",uniforms:"uniforms",uniformsGroups:"uniformsGroups",vertexShader:"vertexShader",fragmentShader:"fragmentShader",linewidth:"linewidth",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",fog:"fog",lights:"lights",clipping:"clipping",extensions:"extensions",defaultAttributeValues:"defaultAttributeValues",index0AttributeName:"index0AttributeName",uniformsNeedUpdate:"uniformsNeedUpdate",glslVersion:"glslVersion"},features:[ie([{provide:sn,useExisting:ge(()=>e)}]),q],ngContentSelectors:Ere,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Px=class extends cn{constructor(e,i,t=null,r=null,o=null){super(),this.scene=e,this.camera=i,this.overrideMaterial=t,this.clearColor=r,this.clearAlpha=o,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new pe}render(e,i,t){let r=e.autoClear;e.autoClear=!1;let o,s;this.overrideMaterial!==null&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(o=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(o),this.overrideMaterial!==null&&(this.scene.overrideMaterial=s),e.autoClear=r}};var Are=["*"],OU=(()=>{let e=class e extends Ai{getType(){return Px}set scene(t){this._objRef&&(this._objRef.scene=t)}get scene(){return this._objRef?.scene}set camera(t){this._objRef&&(this._objRef.camera=t)}get camera(){return this._objRef?.camera}set overrideMaterial(t){this._objRef&&(this._objRef.overrideMaterial=t)}get overrideMaterial(){return this._objRef?.overrideMaterial}set clearColor(t){this._objRef&&(this._objRef.clearColor=_e(this._objRef.clearColor,t))}get clearColor(){return this._objRef?.clearColor}set clearAlpha(t){this._objRef&&(this._objRef.clearAlpha=t)}get clearAlpha(){return this._objRef?.clearAlpha}set clearDepth(t){this._objRef&&(this._objRef.clearDepth=t)}get clearDepth(){return this._objRef?.clearDepth}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-renderPassGen"]],inputs:{scene:"scene",camera:"camera",overrideMaterial:"overrideMaterial",clearColor:"clearColor",clearAlpha:"clearAlpha",clearDepth:"clearDepth"},features:[ie([{provide:fi,useExisting:ge(()=>e)}]),q],ngContentSelectors:Are,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Tg={name:"SAOShader",defines:{NUM_SAMPLES:7,NUM_RINGS:4,DIFFUSE_TEXTURE:0,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new z(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new Be},cameraInverseProjectionMatrix:{value:new Be},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`
		#include <common>

		varying vec2 vUv;

		#if DIFFUSE_TEXTURE == 1
		uniform sampler2D tDiffuse;
		#endif

		uniform highp sampler2D tDepth;
		uniform highp sampler2D tNormal;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;

		uniform float scale;
		uniform float intensity;
		uniform float bias;
		uniform float kernelRadius;
		uniform float minResolution;
		uniform vec2 size;
		uniform float randomSeed;

		// RGBA depth

		#include <packing>

		vec4 getDefaultColor( const in vec2 screenPosition ) {
			#if DIFFUSE_TEXTURE == 1
			return texture2D( tDiffuse, vUv );
			#else
			return vec4( 1.0 );
			#endif
		}

		float getDepth( const in vec2 screenPosition ) {
			return texture2D( tDepth, screenPosition ).x;
		}

		float getViewZ( const in float depth ) {
			#if PERSPECTIVE_CAMERA == 1
			return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
			return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}

		vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {
			float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];
			vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );
			clipPosition *= clipW; // unprojection.

			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;
		}

		vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {
			return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );
		}

		float scaleDividedByCameraFar;
		float minResolutionMultipliedByCameraFar;

		float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {
			vec3 viewDelta = sampleViewPosition - centerViewPosition;
			float viewDistance = length( viewDelta );
			float scaledScreenDistance = scaleDividedByCameraFar * viewDistance;

			return max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );
		}

		// moving costly divides into consts
		const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );
		const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );

		float getAmbientOcclusion( const in vec3 centerViewPosition ) {
			// precompute some variables require in getOcclusion.
			scaleDividedByCameraFar = scale / cameraFar;
			minResolutionMultipliedByCameraFar = minResolution * cameraFar;
			vec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );

			// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/
			float angle = rand( vUv + randomSeed ) * PI2;
			vec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;
			vec2 radiusStep = radius;

			float occlusionSum = 0.0;
			float weightSum = 0.0;

			for( int i = 0; i < NUM_SAMPLES; i ++ ) {
				vec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;
				radius += radiusStep;
				angle += ANGLE_STEP;

				float sampleDepth = getDepth( sampleUv );
				if( sampleDepth >= ( 1.0 - EPSILON ) ) {
					continue;
				}

				float sampleViewZ = getViewZ( sampleDepth );
				vec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );
				occlusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );
				weightSum += 1.0;
			}

			if( weightSum == 0.0 ) discard;

			return occlusionSum * ( intensity / weightSum );
		}

		void main() {
			float centerDepth = getDepth( vUv );
			if( centerDepth >= ( 1.0 - EPSILON ) ) {
				discard;
			}

			float centerViewZ = getViewZ( centerDepth );
			vec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );

			float ambientOcclusion = getAmbientOcclusion( viewPosition );

			gl_FragColor = getDefaultColor( vUv );
			gl_FragColor.xyz *=  1.0 - ambientOcclusion;
		}`};var xc={name:"DepthLimitedBlurShader",defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new z(512,512)},sampleUvOffsets:{value:[new z(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1e3},depthCutoff:{value:10}},vertexShader:`

		#include <common>

		uniform vec2 size;

		varying vec2 vUv;
		varying vec2 vInvSize;

		void main() {
			vUv = uv;
			vInvSize = 1.0 / size;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`

		#include <common>
		#include <packing>

		uniform sampler2D tDiffuse;
		uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform float depthCutoff;

		uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];
		uniform float sampleWeights[ KERNEL_RADIUS + 1 ];

		varying vec2 vUv;
		varying vec2 vInvSize;

		float getDepth( const in vec2 screenPosition ) {
			#if DEPTH_PACKING == 1
			return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );
			#else
			return texture2D( tDepth, screenPosition ).x;
			#endif
		}

		float getViewZ( const in float depth ) {
			#if PERSPECTIVE_CAMERA == 1
			return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
			return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}

		void main() {
			float depth = getDepth( vUv );
			if( depth >= ( 1.0 - EPSILON ) ) {
				discard;
			}

			float centerViewZ = -getViewZ( depth );
			bool rBreak = false, lBreak = false;

			float weightSum = sampleWeights[0];
			vec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;

			for( int i = 1; i <= KERNEL_RADIUS; i ++ ) {

				float sampleWeight = sampleWeights[i];
				vec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;

				vec2 sampleUv = vUv + sampleUvOffset;
				float viewZ = -getViewZ( getDepth( sampleUv ) );

				if( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;

				if( ! rBreak ) {
					diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;
					weightSum += sampleWeight;
				}

				sampleUv = vUv - sampleUvOffset;
				viewZ = -getViewZ( getDepth( sampleUv ) );

				if( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;

				if( ! lBreak ) {
					diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;
					weightSum += sampleWeight;
				}

			}

			gl_FragColor = diffuseSum / weightSum;
		}`},Cg={createSampleWeights:function(n,e){let i=[];for(let t=0;t<=n;t++)i.push(Ire(t,e));return i},createSampleOffsets:function(n,e){let i=[];for(let t=0;t<=n;t++)i.push(e.clone().multiplyScalar(t));return i},configure:function(n,e,i,t){n.defines.KERNEL_RADIUS=e,n.uniforms.sampleUvOffsets.value=Cg.createSampleOffsets(e,t),n.uniforms.sampleWeights.value=Cg.createSampleWeights(e,i),n.needsUpdate=!0}};function Ire(n,e){return Math.exp(-(n*n)/(2*(e*e)))/(Math.sqrt(2*Math.PI)*e)}var X1=(()=>{class n extends cn{constructor(i,t,r=new z(256,256)){super(),this.scene=i,this.camera=t,this.clear=!0,this.needsSwap=!1,this.originalClearColor=new pe,this._oldClearColor=new pe,this.oldClearAlpha=1,this.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},this.resolution=new z(r.x,r.y),this.saoRenderTarget=new ci(this.resolution.x,this.resolution.y,{type:qi}),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone();let o=new bs;o.format=gs,o.type=ps,this.normalRenderTarget=new ci(this.resolution.x,this.resolution.y,{minFilter:ui,magFilter:ui,type:qi,depthTexture:o}),this.normalMaterial=new ca,this.normalMaterial.blending=ti,this.saoMaterial=new Ft({defines:Object.assign({},Tg.defines),fragmentShader:Tg.fragmentShader,vertexShader:Tg.vertexShader,uniforms:Li.clone(Tg.uniforms)}),this.saoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms.tDepth.value=o,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.blending=ti,this.vBlurMaterial=new Ft({uniforms:Li.clone(xc.uniforms),defines:Object.assign({},xc.defines),vertexShader:xc.vertexShader,fragmentShader:xc.fragmentShader}),this.vBlurMaterial.defines.DEPTH_PACKING=0,this.vBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms.tDepth.value=o,this.vBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=ti,this.hBlurMaterial=new Ft({uniforms:Li.clone(xc.uniforms),defines:Object.assign({},xc.defines),vertexShader:xc.vertexShader,fragmentShader:xc.fragmentShader}),this.hBlurMaterial.defines.DEPTH_PACKING=0,this.hBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms.tDiffuse.value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms.tDepth.value=o,this.hBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=ti,this.materialCopy=new Ft({uniforms:Li.clone(fr.uniforms),vertexShader:fr.vertexShader,fragmentShader:fr.fragmentShader,blending:ti}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=qd,this.materialCopy.blendSrc=cf,this.materialCopy.blendDst=ul,this.materialCopy.blendEquation=vr,this.materialCopy.blendSrcAlpha=af,this.materialCopy.blendDstAlpha=ul,this.materialCopy.blendEquationAlpha=vr,this.fsQuad=new hr(null)}render(i,t,r){this.renderToScreen&&(this.materialCopy.blending=ti,this.materialCopy.uniforms.tDiffuse.value=r.texture,this.materialCopy.needsUpdate=!0,this.renderPass(i,this.materialCopy,null)),i.getClearColor(this._oldClearColor),this.oldClearAlpha=i.getClearAlpha();let o=i.autoClear;i.autoClear=!1,this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;let s=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);this.vBlurMaterial.uniforms.depthCutoff.value=s,this.hBlurMaterial.uniforms.depthCutoff.value=s,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),(this.prevStdDev!==this.params.saoBlurStdDev||this.prevNumSamples!==this.params.saoBlurRadius)&&(Cg.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new z(0,1)),Cg.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new z(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),this.renderOverride(i,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(i,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(i,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(i,this.hBlurMaterial,this.saoRenderTarget,16777215,1));let a=this.materialCopy;this.params.output===n.OUTPUT.Normal?(this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),this.params.output===n.OUTPUT.Default?a.blending=qd:a.blending=ti,this.renderPass(i,a,this.renderToScreen?null:r),i.setClearColor(this._oldClearColor,this.oldClearAlpha),i.autoClear=o}renderPass(i,t,r,o,s){i.getClearColor(this.originalClearColor);let a=i.getClearAlpha(),c=i.autoClear;i.setRenderTarget(r),i.autoClear=!1,o!=null&&(i.setClearColor(o),i.setClearAlpha(s||0),i.clear()),this.fsQuad.material=t,this.fsQuad.render(i),i.autoClear=c,i.setClearColor(this.originalClearColor),i.setClearAlpha(a)}renderOverride(i,t,r,o,s){i.getClearColor(this.originalClearColor);let a=i.getClearAlpha(),c=i.autoClear;i.setRenderTarget(r),i.autoClear=!1,o=t.clearColor||o,s=t.clearAlpha||s,o!=null&&(i.setClearColor(o),i.setClearAlpha(s||0),i.clear()),this.scene.overrideMaterial=t,i.render(this.scene,this.camera),this.scene.overrideMaterial=null,i.autoClear=c,i.setClearColor(this.originalClearColor),i.setClearAlpha(a)}setSize(i,t){this.saoRenderTarget.setSize(i,t),this.blurIntermediateRenderTarget.setSize(i,t),this.normalRenderTarget.setSize(i,t),this.saoMaterial.uniforms.size.value.set(i,t),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(i,t),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(i,t),this.hBlurMaterial.needsUpdate=!0}dispose(){this.saoRenderTarget.dispose(),this.blurIntermediateRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.normalMaterial.dispose(),this.saoMaterial.dispose(),this.vBlurMaterial.dispose(),this.hBlurMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}}return n.OUTPUT={Default:0,SAO:1,Normal:2},n})();var Pre=["*"],wc=class wc extends Ai{getType(){return X1}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set originalClearColor(e){this._objRef&&(this._objRef.originalClearColor=_e(this._objRef.originalClearColor,e))}get originalClearColor(){return this._objRef?.originalClearColor}set oldClearColor(e){this._objRef&&(this._objRef.oldClearColor=_e(this._objRef.oldClearColor,e))}get oldClearColor(){return this._objRef?.oldClearColor}set oldClearAlpha(e){this._objRef&&(this._objRef.oldClearAlpha=e)}get oldClearAlpha(){return this._objRef?.oldClearAlpha}set resolution(e){this._objRef&&(this._objRef.resolution=_e(this._objRef.resolution,e))}get resolution(){return this._objRef?.resolution}set saoRenderTarget(e){this._objRef&&(this._objRef.saoRenderTarget=e)}get saoRenderTarget(){return this._objRef?.saoRenderTarget}set blurIntermediateRenderTarget(e){this._objRef&&(this._objRef.blurIntermediateRenderTarget=e)}get blurIntermediateRenderTarget(){return this._objRef?.blurIntermediateRenderTarget}set normalRenderTarget(e){this._objRef&&(this._objRef.normalRenderTarget=e)}get normalRenderTarget(){return this._objRef?.normalRenderTarget}set normalMaterial(e){this._objRef&&(this._objRef.normalMaterial=e)}get normalMaterial(){return this._objRef?.normalMaterial}set saoMaterial(e){this._objRef&&(this._objRef.saoMaterial=e)}get saoMaterial(){return this._objRef?.saoMaterial}set vBlurMaterial(e){this._objRef&&(this._objRef.vBlurMaterial=e)}get vBlurMaterial(){return this._objRef?.vBlurMaterial}set hBlurMaterial(e){this._objRef&&(this._objRef.hBlurMaterial=e)}get hBlurMaterial(){return this._objRef?.hBlurMaterial}set materialCopy(e){this._objRef&&(this._objRef.materialCopy=e)}get materialCopy(){return this._objRef?.materialCopy}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set params(e){this._objRef&&(this._objRef.params=e)}get params(){return this._objRef?.params}};wc.OUTPUT=X1.OUTPUT,wc.\u0275fac=(()=>{let e;return function(t){return(e||(e=be(wc)))(t||wc)}})(),wc.\u0275cmp=L({type:wc,selectors:[["th-sAOPass"]],inputs:{scene:"scene",camera:"camera",originalClearColor:"originalClearColor",oldClearColor:"oldClearColor",oldClearAlpha:"oldClearAlpha",resolution:"resolution",saoRenderTarget:"saoRenderTarget",blurIntermediateRenderTarget:"blurIntermediateRenderTarget",normalRenderTarget:"normalRenderTarget",normalMaterial:"normalMaterial",saoMaterial:"saoMaterial",vBlurMaterial:"vBlurMaterial",hBlurMaterial:"hBlurMaterial",materialCopy:"materialCopy",fsQuad:"fsQuad",params:"params"},features:[ie([{provide:fi,useExisting:ge(()=>wc)}]),q],ngContentSelectors:Pre,decls:1,vars:0,template:function(i,t){i&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});var NU=wc;var kx=class{constructor(e=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let i=0;i<256;i++)this.p[i]=Math.floor(e.random()*256);this.perm=[];for(let i=0;i<512;i++)this.perm[i]=this.p[i&255];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(e,i,t){return e[0]*i+e[1]*t}dot3(e,i,t,r){return e[0]*i+e[1]*t+e[2]*r}dot4(e,i,t,r,o){return e[0]*i+e[1]*t+e[2]*r+e[3]*o}noise(e,i){let t,r,o,s=.5*(Math.sqrt(3)-1),a=(e+i)*s,c=Math.floor(e+a),l=Math.floor(i+a),d=(3-Math.sqrt(3))/6,u=(c+l)*d,h=c-u,f=l-u,p=e-h,b=i-f,g,m;p>b?(g=1,m=0):(g=0,m=1);let v=p-g+d,_=b-m+d,y=p-1+2*d,C=b-1+2*d,R=c&255,M=l&255,A=this.perm[R+this.perm[M]]%12,T=this.perm[R+g+this.perm[M+m]]%12,x=this.perm[R+1+this.perm[M+1]]%12,I=.5-p*p-b*b;I<0?t=0:(I*=I,t=I*I*this.dot(this.grad3[A],p,b));let V=.5-v*v-_*_;V<0?r=0:(V*=V,r=V*V*this.dot(this.grad3[T],v,_));let W=.5-y*y-C*C;return W<0?o=0:(W*=W,o=W*W*this.dot(this.grad3[x],y,C)),70*(t+r+o)}noise3d(e,i,t){let r,o,s,a,l=(e+i+t)*.3333333333333333,d=Math.floor(e+l),u=Math.floor(i+l),h=Math.floor(t+l),f=1/6,p=(d+u+h)*f,b=d-p,g=u-p,m=h-p,v=e-b,_=i-g,y=t-m,C,R,M,A,T,x;v>=_?_>=y?(C=1,R=0,M=0,A=1,T=1,x=0):v>=y?(C=1,R=0,M=0,A=1,T=0,x=1):(C=0,R=0,M=1,A=1,T=0,x=1):_<y?(C=0,R=0,M=1,A=0,T=1,x=1):v<y?(C=0,R=1,M=0,A=0,T=1,x=1):(C=0,R=1,M=0,A=1,T=1,x=0);let I=v-C+f,V=_-R+f,W=y-M+f,ee=v-A+2*f,ne=_-T+2*f,B=y-x+2*f,G=v-1+3*f,U=_-1+3*f,se=y-1+3*f,Te=d&255,Ie=u&255,Ze=h&255,yt=this.perm[Te+this.perm[Ie+this.perm[Ze]]]%12,Z=this.perm[Te+C+this.perm[Ie+R+this.perm[Ze+M]]]%12,Ce=this.perm[Te+A+this.perm[Ie+T+this.perm[Ze+x]]]%12,We=this.perm[Te+1+this.perm[Ie+1+this.perm[Ze+1]]]%12,N=.6-v*v-_*_-y*y;N<0?r=0:(N*=N,r=N*N*this.dot3(this.grad3[yt],v,_,y));let xe=.6-I*I-V*V-W*W;xe<0?o=0:(xe*=xe,o=xe*xe*this.dot3(this.grad3[Z],I,V,W));let Ne=.6-ee*ee-ne*ne-B*B;Ne<0?s=0:(Ne*=Ne,s=Ne*Ne*this.dot3(this.grad3[Ce],ee,ne,B));let Ue=.6-G*G-U*U-se*se;return Ue<0?a=0:(Ue*=Ue,a=Ue*Ue*this.dot3(this.grad3[We],G,U,se)),32*(r+o+s+a)}noise4d(e,i,t,r){let o=this.grad4,s=this.simplex,a=this.perm,c=(Math.sqrt(5)-1)/4,l=(5-Math.sqrt(5))/20,d,u,h,f,p,b=(e+i+t+r)*c,g=Math.floor(e+b),m=Math.floor(i+b),v=Math.floor(t+b),_=Math.floor(r+b),y=(g+m+v+_)*l,C=g-y,R=m-y,M=v-y,A=_-y,T=e-C,x=i-R,I=t-M,V=r-A,W=T>x?32:0,ee=T>I?16:0,ne=x>I?8:0,B=T>V?4:0,G=x>V?2:0,U=I>V?1:0,se=W+ee+ne+B+G+U,Te=s[se][0]>=3?1:0,Ie=s[se][1]>=3?1:0,Ze=s[se][2]>=3?1:0,yt=s[se][3]>=3?1:0,Z=s[se][0]>=2?1:0,Ce=s[se][1]>=2?1:0,We=s[se][2]>=2?1:0,N=s[se][3]>=2?1:0,xe=s[se][0]>=1?1:0,Ne=s[se][1]>=1?1:0,Ue=s[se][2]>=1?1:0,O=s[se][3]>=1?1:0,ye=T-Te+l,Re=x-Ie+l,Pe=I-Ze+l,Ae=V-yt+l,Fe=T-Z+2*l,Ke=x-Ce+2*l,Xe=I-We+2*l,Ct=V-N+2*l,k=T-xe+3*l,E=x-Ne+3*l,re=I-Ue+3*l,Se=V-O+3*l,Me=T-1+4*l,De=x-1+4*l,mt=I-1+4*l,Ge=V-1+4*l,ze=g&255,Et=m&255,Oe=v&255,rt=_&255,li=a[ze+a[Et+a[Oe+a[rt]]]]%32,Pt=a[ze+Te+a[Et+Ie+a[Oe+Ze+a[rt+yt]]]]%32,Je=a[ze+Z+a[Et+Ce+a[Oe+We+a[rt+N]]]]%32,zt=a[ze+xe+a[Et+Ne+a[Oe+Ue+a[rt+O]]]]%32,Ht=a[ze+1+a[Et+1+a[Oe+1+a[rt+1]]]]%32,Ui=.6-T*T-x*x-I*I-V*V;Ui<0?d=0:(Ui*=Ui,d=Ui*Ui*this.dot4(o[li],T,x,I,V));let w=.6-ye*ye-Re*Re-Pe*Pe-Ae*Ae;w<0?u=0:(w*=w,u=w*w*this.dot4(o[Pt],ye,Re,Pe,Ae));let ce=.6-Fe*Fe-Ke*Ke-Xe*Xe-Ct*Ct;ce<0?h=0:(ce*=ce,h=ce*ce*this.dot4(o[Je],Fe,Ke,Xe,Ct));let Y=.6-k*k-E*E-re*re-Se*Se;Y<0?f=0:(Y*=Y,f=Y*Y*this.dot4(o[zt],k,E,re,Se));let ue=.6-Me*Me-De*De-mt*mt-Ge*Ge;return ue<0?p=0:(ue*=ue,p=ue*ue*this.dot4(o[Ht],Me,De,mt,Ge)),27*(d+u+h+f+p)}};var Eg={name:"SSAOShader",defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new z},cameraProjectionMatrix:{value:new Be},cameraInverseProjectionMatrix:{value:new Be},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
		uniform highp sampler2D tNormal;
		uniform highp sampler2D tDepth;
		uniform sampler2D tNoise;

		uniform vec3 kernel[ KERNEL_SIZE ];

		uniform vec2 resolution;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;

		uniform float kernelRadius;
		uniform float minDistance; // avoid artifacts caused by neighbour fragments with minimal depth difference
		uniform float maxDistance; // avoid the influence of fragments which are too far away

		varying vec2 vUv;

		#include <packing>

		float getDepth( const in vec2 screenPosition ) {

			return texture2D( tDepth, screenPosition ).x;

		}

		float getLinearDepth( const in vec2 screenPosition ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, screenPosition ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, screenPosition ).x;

			#endif

		}

		float getViewZ( const in float depth ) {

			#if PERSPECTIVE_CAMERA == 1

				return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );

			#else

				return orthographicDepthToViewZ( depth, cameraNear, cameraFar );

			#endif

		}

		vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {

			float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];

			vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );

			clipPosition *= clipW; // unprojection.

			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;

		}

		vec3 getViewNormal( const in vec2 screenPosition ) {

			return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );

		}

		void main() {

			float depth = getDepth( vUv );

			if ( depth == 1.0 ) {

				gl_FragColor = vec4( 1.0 ); // don't influence background
				
			} else {

				float viewZ = getViewZ( depth );

				vec3 viewPosition = getViewPosition( vUv, depth, viewZ );
				vec3 viewNormal = getViewNormal( vUv );

				vec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );
				vec3 random = vec3( texture2D( tNoise, vUv * noiseScale ).r );

				// compute matrix used to reorient a kernel vector

				vec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );
				vec3 bitangent = cross( viewNormal, tangent );
				mat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );

				float occlusion = 0.0;

				for ( int i = 0; i < KERNEL_SIZE; i ++ ) {

					vec3 sampleVector = kernelMatrix * kernel[ i ]; // reorient sample vector in view space
					vec3 samplePoint = viewPosition + ( sampleVector * kernelRadius ); // calculate sample point

					vec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 ); // project point and calculate NDC
					samplePointNDC /= samplePointNDC.w;

					vec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5; // compute uv coordinates

					float realDepth = getLinearDepth( samplePointUv ); // get linear depth from depth texture
					float sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar ); // compute linear depth of the sample view Z value
					float delta = sampleDepth - realDepth;

					if ( delta > minDistance && delta < maxDistance ) { // if fragment is before sample point, increase occlusion

						occlusion += 1.0;

					}

				}

				occlusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );

				gl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );

			}

		}`},Dg={name:"SSAODepthShader",defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:`varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;

		varying vec2 vUv;

		#include <packing>

		float getLinearDepth( const in vec2 screenPosition ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, screenPosition ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, screenPosition ).x;

			#endif

		}

		void main() {

			float depth = getLinearDepth( vUv );
			gl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );

		}`},Ag={name:"SSAOBlurShader",uniforms:{tDiffuse:{value:null},resolution:{value:new z}},vertexShader:`varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`uniform sampler2D tDiffuse;

		uniform vec2 resolution;

		varying vec2 vUv;

		void main() {

			vec2 texelSize = ( 1.0 / resolution );
			float result = 0.0;

			for ( int i = - 2; i <= 2; i ++ ) {

				for ( int j = - 2; j <= 2; j ++ ) {

					vec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;
					result += texture2D( tDiffuse, vUv + offset ).r;

				}

			}

			gl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );

		}`};var Y1=(()=>{class n extends cn{constructor(i,t,r,o,s=32){super(),this.width=r!==void 0?r:512,this.height=o!==void 0?o:512,this.clear=!0,this.camera=t,this.scene=i,this.kernelRadius=8,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(s),this.generateRandomKernelRotations();let a=new bs;a.format=gs,a.type=ps,this.normalRenderTarget=new ci(this.width,this.height,{minFilter:ui,magFilter:ui,type:qi,depthTexture:a}),this.ssaoRenderTarget=new ci(this.width,this.height,{type:qi}),this.blurRenderTarget=this.ssaoRenderTarget.clone(),this.ssaoMaterial=new Ft({defines:Object.assign({},Eg.defines),uniforms:Li.clone(Eg.uniforms),vertexShader:Eg.vertexShader,fragmentShader:Eg.fragmentShader,blending:ti}),this.ssaoMaterial.defines.KERNEL_SIZE=s,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new ca,this.normalMaterial.blending=ti,this.blurMaterial=new Ft({defines:Object.assign({},Ag.defines),uniforms:Li.clone(Ag.uniforms),vertexShader:Ag.vertexShader,fragmentShader:Ag.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new Ft({defines:Object.assign({},Dg.defines),uniforms:Li.clone(Dg.uniforms),vertexShader:Dg.vertexShader,fragmentShader:Dg.fragmentShader,blending:ti}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new Ft({uniforms:Li.clone(fr.uniforms),vertexShader:fr.vertexShader,fragmentShader:fr.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:cf,blendDst:ul,blendEquation:vr,blendSrcAlpha:af,blendDstAlpha:ul,blendEquationAlpha:vr}),this.fsQuad=new hr(null),this.originalClearColor=new pe}dispose(){this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(i,t,r){switch(this.overrideVisibility(),this.renderOverride(i,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(i,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(i,this.blurMaterial,this.blurRenderTarget),this.output){case n.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=ti,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=ti,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Depth:this.renderPass(i,this.depthRenderMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=ti,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=r.texture,this.copyMaterial.blending=ti,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t),this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=qd,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}renderPass(i,t,r,o,s){i.getClearColor(this.originalClearColor);let a=i.getClearAlpha(),c=i.autoClear;i.setRenderTarget(r),i.autoClear=!1,o!=null&&(i.setClearColor(o),i.setClearAlpha(s||0),i.clear()),this.fsQuad.material=t,this.fsQuad.render(i),i.autoClear=c,i.setClearColor(this.originalClearColor),i.setClearAlpha(a)}renderOverride(i,t,r,o,s){i.getClearColor(this.originalClearColor);let a=i.getClearAlpha(),c=i.autoClear;i.setRenderTarget(r),i.autoClear=!1,o=t.clearColor||o,s=t.clearAlpha||s,o!=null&&(i.setClearColor(o),i.setClearAlpha(s||0),i.clear()),this.scene.overrideMaterial=t,i.render(this.scene,this.camera),this.scene.overrideMaterial=null,i.autoClear=c,i.setClearColor(this.originalClearColor),i.setClearAlpha(a)}setSize(i,t){this.width=i,this.height=t,this.ssaoRenderTarget.setSize(i,t),this.normalRenderTarget.setSize(i,t),this.blurRenderTarget.setSize(i,t),this.ssaoMaterial.uniforms.resolution.value.set(i,t),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(i,t)}generateSampleKernel(i){let t=this.kernel;for(let r=0;r<i;r++){let o=new S;o.x=Math.random()*2-1,o.y=Math.random()*2-1,o.z=Math.random(),o.normalize();let s=r/i;s=st.lerp(.1,1,s*s),o.multiplyScalar(s),t.push(o)}}generateRandomKernelRotations(){let r=new kx,o=4*4,s=new Float32Array(o);for(let a=0;a<o;a++){let c=Math.random()*2-1,l=Math.random()*2-1,d=0;s[a]=r.noise3d(c,l,d)}this.noiseTexture=new $r(s,4,4,Xd,yr),this.noiseTexture.wrapS=qo,this.noiseTexture.wrapT=qo,this.noiseTexture.needsUpdate=!0}overrideVisibility(){let i=this.scene,t=this._visibilityCache;i.traverse(function(r){t.set(r,r.visible),(r.isPoints||r.isLine)&&(r.visible=!1)})}restoreVisibility(){let i=this.scene,t=this._visibilityCache;i.traverse(function(r){let o=t.get(r);r.visible=o}),t.clear()}}return n.OUTPUT={Default:0,SSAO:1,Blur:2,Depth:3,Normal:4},n})();var kre=["*"],Mc=class Mc extends Ai{getType(){return Y1}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set width(e){this._objRef&&(this._objRef.width=e)}get width(){return this._objRef?.width}set height(e){this._objRef&&(this._objRef.height=e)}get height(){return this._objRef?.height}set clear(e){this._objRef&&(this._objRef.clear=e)}get clear(){return this._objRef?.clear}set kernelRadius(e){this._objRef&&(this._objRef.kernelRadius=e)}get kernelRadius(){return this._objRef?.kernelRadius}set kernel(e){this._objRef&&(this._objRef.kernel=e)}get kernel(){return this._objRef?.kernel}set noiseTexture(e){this._objRef&&(this._objRef.noiseTexture=e)}get noiseTexture(){return this._objRef?.noiseTexture}set output(e){this._objRef&&(this._objRef.output=e)}get output(){return this._objRef?.output}set minDistance(e){this._objRef&&(this._objRef.minDistance=e)}get minDistance(){return this._objRef?.minDistance}set maxDistance(e){this._objRef&&(this._objRef.maxDistance=e)}get maxDistance(){return this._objRef?.maxDistance}set normalRenderTarget(e){this._objRef&&(this._objRef.normalRenderTarget=e)}get normalRenderTarget(){return this._objRef?.normalRenderTarget}set ssaoRenderTarget(e){this._objRef&&(this._objRef.ssaoRenderTarget=e)}get ssaoRenderTarget(){return this._objRef?.ssaoRenderTarget}set blurRenderTarget(e){this._objRef&&(this._objRef.blurRenderTarget=e)}get blurRenderTarget(){return this._objRef?.blurRenderTarget}set ssaoMaterial(e){this._objRef&&(this._objRef.ssaoMaterial=e)}get ssaoMaterial(){return this._objRef?.ssaoMaterial}set normalMaterial(e){this._objRef&&(this._objRef.normalMaterial=e)}get normalMaterial(){return this._objRef?.normalMaterial}set blurMaterial(e){this._objRef&&(this._objRef.blurMaterial=e)}get blurMaterial(){return this._objRef?.blurMaterial}set depthRenderMaterial(e){this._objRef&&(this._objRef.depthRenderMaterial=e)}get depthRenderMaterial(){return this._objRef?.depthRenderMaterial}set copyMaterial(e){this._objRef&&(this._objRef.copyMaterial=e)}get copyMaterial(){return this._objRef?.copyMaterial}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set originalClearColor(e){this._objRef&&(this._objRef.originalClearColor=_e(this._objRef.originalClearColor,e))}get originalClearColor(){return this._objRef?.originalClearColor}};Mc.OUTPUT=Y1.OUTPUT,Mc.\u0275fac=(()=>{let e;return function(t){return(e||(e=be(Mc)))(t||Mc)}})(),Mc.\u0275cmp=L({type:Mc,selectors:[["th-sSAOPass"]],inputs:{scene:"scene",camera:"camera",width:"width",height:"height",clear:"clear",kernelRadius:"kernelRadius",kernel:"kernel",noiseTexture:"noiseTexture",output:"output",minDistance:"minDistance",maxDistance:"maxDistance",normalRenderTarget:"normalRenderTarget",ssaoRenderTarget:"ssaoRenderTarget",blurRenderTarget:"blurRenderTarget",ssaoMaterial:"ssaoMaterial",normalMaterial:"normalMaterial",blurMaterial:"blurMaterial",depthRenderMaterial:"depthRenderMaterial",copyMaterial:"copyMaterial",fsQuad:"fsQuad",originalClearColor:"originalClearColor"},features:[ie([{provide:fi,useExisting:ge(()=>Mc)}]),q],ngContentSelectors:kre,decls:1,vars:0,template:function(i,t){i&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});var LU=Mc;var As={name:"SSRShader",defines:{MAX_STEP:0,PERSPECTIVE_CAMERA:!0,DISTANCE_ATTENUATION:!0,FRESNEL:!0,INFINITE_THICK:!1,SELECTIVE:!1},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tMetalness:{value:null},tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new z},cameraProjectionMatrix:{value:new Be},cameraInverseProjectionMatrix:{value:new Be},opacity:{value:.5},maxDistance:{value:180},cameraRange:{value:0},thickness:{value:.018}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}

	`,fragmentShader:`
		// precision highp float;
		precision highp sampler2D;
		varying vec2 vUv;
		uniform sampler2D tDepth;
		uniform sampler2D tNormal;
		uniform sampler2D tMetalness;
		uniform sampler2D tDiffuse;
		uniform float cameraRange;
		uniform vec2 resolution;
		uniform float opacity;
		uniform float cameraNear;
		uniform float cameraFar;
		uniform float maxDistance;
		uniform float thickness;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;
		#include <packing>
		float pointToLineDistance(vec3 x0, vec3 x1, vec3 x2) {
			//x0: point, x1: linePointA, x2: linePointB
			//https://mathworld.wolfram.com/Point-LineDistance3-Dimensional.html
			return length(cross(x0-x1,x0-x2))/length(x2-x1);
		}
		float pointPlaneDistance(vec3 point,vec3 planePoint,vec3 planeNormal){
			// https://mathworld.wolfram.com/Point-PlaneDistance.html
			//// https://en.wikipedia.org/wiki/Plane_(geometry)
			//// http://paulbourke.net/geometry/pointlineplane/
			float a=planeNormal.x,b=planeNormal.y,c=planeNormal.z;
			float x0=point.x,y0=point.y,z0=point.z;
			float x=planePoint.x,y=planePoint.y,z=planePoint.z;
			float d=-(a*x+b*y+c*z);
			float distance=(a*x0+b*y0+c*z0+d)/sqrt(a*a+b*b+c*c);
			return distance;
		}
		float getDepth( const in vec2 uv ) {
			return texture2D( tDepth, uv ).x;
		}
		float getViewZ( const in float depth ) {
			#ifdef PERSPECTIVE_CAMERA
				return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
				return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}
		vec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {
			vec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc
			clipPosition *= clipW; //clip
			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;//view
		}
		vec3 getViewNormal( const in vec2 uv ) {
			return unpackRGBToNormal( texture2D( tNormal, uv ).xyz );
		}
		vec2 viewPositionToXY(vec3 viewPosition){
			vec2 xy;
			vec4 clip=cameraProjectionMatrix*vec4(viewPosition,1);
			xy=clip.xy;//clip
			float clipW=clip.w;
			xy/=clipW;//NDC
			xy=(xy+1.)/2.;//uv
			xy*=resolution;//screen
			return xy;
		}
		void main(){
			#ifdef SELECTIVE
				float metalness=texture2D(tMetalness,vUv).r;
				if(metalness==0.) return;
			#endif

			float depth = getDepth( vUv );
			float viewZ = getViewZ( depth );
			if(-viewZ>=cameraFar) return;

			float clipW = cameraProjectionMatrix[2][3] * viewZ+cameraProjectionMatrix[3][3];
			vec3 viewPosition=getViewPosition( vUv, depth, clipW );

			vec2 d0=gl_FragCoord.xy;
			vec2 d1;

			vec3 viewNormal=getViewNormal( vUv );

			#ifdef PERSPECTIVE_CAMERA
				vec3 viewIncidentDir=normalize(viewPosition);
				vec3 viewReflectDir=reflect(viewIncidentDir,viewNormal);
			#else
				vec3 viewIncidentDir=vec3(0,0,-1);
				vec3 viewReflectDir=reflect(viewIncidentDir,viewNormal);
			#endif

			float maxReflectRayLen=maxDistance/dot(-viewIncidentDir,viewNormal);
			// dot(a,b)==length(a)*length(b)*cos(theta) // https://www.mathsisfun.com/algebra/vectors-dot-product.html
			// if(a.isNormalized&&b.isNormalized) dot(a,b)==cos(theta)
			// maxDistance/maxReflectRayLen=cos(theta)
			// maxDistance/maxReflectRayLen==dot(a,b)
			// maxReflectRayLen==maxDistance/dot(a,b)

			vec3 d1viewPosition=viewPosition+viewReflectDir*maxReflectRayLen;
			#ifdef PERSPECTIVE_CAMERA
				if(d1viewPosition.z>-cameraNear){
					//https://tutorial.math.lamar.edu/Classes/CalcIII/EqnsOfLines.aspx
					float t=(-cameraNear-viewPosition.z)/viewReflectDir.z;
					d1viewPosition=viewPosition+viewReflectDir*t;
				}
			#endif
			d1=viewPositionToXY(d1viewPosition);

			float totalLen=length(d1-d0);
			float xLen=d1.x-d0.x;
			float yLen=d1.y-d0.y;
			float totalStep=max(abs(xLen),abs(yLen));
			float xSpan=xLen/totalStep;
			float ySpan=yLen/totalStep;
			for(float i=0.;i<float(MAX_STEP);i++){
				if(i>=totalStep) break;
				vec2 xy=vec2(d0.x+i*xSpan,d0.y+i*ySpan);
				if(xy.x<0.||xy.x>resolution.x||xy.y<0.||xy.y>resolution.y) break;
				float s=length(xy-d0)/totalLen;
				vec2 uv=xy/resolution;

				float d = getDepth(uv);
				float vZ = getViewZ( d );
				if(-vZ>=cameraFar) continue;
				float cW = cameraProjectionMatrix[2][3] * vZ+cameraProjectionMatrix[3][3];
				vec3 vP=getViewPosition( uv, d, cW );

				#ifdef PERSPECTIVE_CAMERA
					// https://comp.nus.edu.sg/~lowkl/publications/lowk_persp_interp_techrep.pdf
					float recipVPZ=1./viewPosition.z;
					float viewReflectRayZ=1./(recipVPZ+s*(1./d1viewPosition.z-recipVPZ));
				#else
					float viewReflectRayZ=viewPosition.z+s*(d1viewPosition.z-viewPosition.z);
				#endif

				// if(viewReflectRayZ>vZ) continue; // will cause "npm run make-screenshot webgl_postprocessing_ssr" high probability hang.
				// https://github.com/mrdoob/three.js/pull/21539#issuecomment-821061164
				if(viewReflectRayZ<=vZ){

					bool hit;
					#ifdef INFINITE_THICK
						hit=true;
					#else
						float away=pointToLineDistance(vP,viewPosition,d1viewPosition);

						float minThickness;
						vec2 xyNeighbor=xy;
						xyNeighbor.x+=1.;
						vec2 uvNeighbor=xyNeighbor/resolution;
						vec3 vPNeighbor=getViewPosition(uvNeighbor,d,cW);
						minThickness=vPNeighbor.x-vP.x;
						minThickness*=3.;
						float tk=max(minThickness,thickness);

						hit=away<=tk;
					#endif

					if(hit){
						vec3 vN=getViewNormal( uv );
						if(dot(viewReflectDir,vN)>=0.) continue;
						float distance=pointPlaneDistance(vP,viewPosition,viewNormal);
						if(distance>maxDistance) break;
						float op=opacity;
						#ifdef DISTANCE_ATTENUATION
							float ratio=1.-(distance/maxDistance);
							float attenuation=ratio*ratio;
							op=opacity*attenuation;
						#endif
						#ifdef FRESNEL
							float fresnelCoe=(dot(viewIncidentDir,viewReflectDir)+1.)/2.;
							op*=fresnelCoe;
						#endif
						vec4 reflectColor=texture2D(tDiffuse,uv);
						gl_FragColor.xyz=reflectColor.xyz;
						gl_FragColor.a=op;
						break;
					}
				}
			}
		}
	`},Ig={name:"SSRDepthShader",defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}

	`,fragmentShader:`

		uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;

		varying vec2 vUv;

		#include <packing>

		float getLinearDepth( const in vec2 uv ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, uv ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, uv ).x;

			#endif

		}

		void main() {

			float depth = getLinearDepth( vUv );
			float d = 1.0 - depth;
			// d=(d-.999)*1000.;
			gl_FragColor = vec4( vec3( d ), 1.0 );

		}

	`},Sc={name:"SSRBlurShader",uniforms:{tDiffuse:{value:null},resolution:{value:new z},opacity:{value:.5}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}

	`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec2 resolution;
		varying vec2 vUv;
		void main() {
			//reverse engineering from PhotoShop blur filter, then change coefficient

			vec2 texelSize = ( 1.0 / resolution );

			vec4 c=texture2D(tDiffuse,vUv);

			vec2 offset;

			offset=(vec2(-1,0))*texelSize;
			vec4 cl=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(1,0))*texelSize;
			vec4 cr=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,-1))*texelSize;
			vec4 cb=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,1))*texelSize;
			vec4 ct=texture2D(tDiffuse,vUv+offset);

			// float coeCenter=.5;
			// float coeSide=.125;
			float coeCenter=.2;
			float coeSide=.2;
			float a=c.a*coeCenter+cl.a*coeSide+cr.a*coeSide+cb.a*coeSide+ct.a*coeSide;
			vec3 rgb=(c.rgb*c.a*coeCenter+cl.rgb*cl.a*coeSide+cr.rgb*cr.a*coeSide+cb.rgb*cb.a*coeSide+ct.rgb*ct.a*coeSide)/a;
			gl_FragColor=vec4(rgb,a);

		}
	`};var Z1=(()=>{class n extends cn{constructor({renderer:i,scene:t,camera:r,width:o,height:s,selects:a,bouncing:c=!1,groundReflector:l}){super(),this.width=o!==void 0?o:512,this.height=s!==void 0?s:512,this.clear=!0,this.renderer=i,this.scene=t,this.camera=r,this.groundReflector=l,this.opacity=As.uniforms.opacity.value,this.output=0,this.maxDistance=As.uniforms.maxDistance.value,this.thickness=As.uniforms.thickness.value,this.tempColor=new pe,this._selects=a,this.selective=Array.isArray(this._selects),Object.defineProperty(this,"selects",{get(){return this._selects},set(u){this._selects!==u&&(this._selects=u,Array.isArray(u)?(this.selective=!0,this.ssrMaterial.defines.SELECTIVE=!0,this.ssrMaterial.needsUpdate=!0):(this.selective=!1,this.ssrMaterial.defines.SELECTIVE=!1,this.ssrMaterial.needsUpdate=!0))}}),this._bouncing=c,Object.defineProperty(this,"bouncing",{get(){return this._bouncing},set(u){this._bouncing!==u&&(this._bouncing=u,u?this.ssrMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture:this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture)}}),this.blur=!0,this._distanceAttenuation=As.defines.DISTANCE_ATTENUATION,Object.defineProperty(this,"distanceAttenuation",{get(){return this._distanceAttenuation},set(u){this._distanceAttenuation!==u&&(this._distanceAttenuation=u,this.ssrMaterial.defines.DISTANCE_ATTENUATION=u,this.ssrMaterial.needsUpdate=!0)}}),this._fresnel=As.defines.FRESNEL,Object.defineProperty(this,"fresnel",{get(){return this._fresnel},set(u){this._fresnel!==u&&(this._fresnel=u,this.ssrMaterial.defines.FRESNEL=u,this.ssrMaterial.needsUpdate=!0)}}),this._infiniteThick=As.defines.INFINITE_THICK,Object.defineProperty(this,"infiniteThick",{get(){return this._infiniteThick},set(u){this._infiniteThick!==u&&(this._infiniteThick=u,this.ssrMaterial.defines.INFINITE_THICK=u,this.ssrMaterial.needsUpdate=!0)}});let d=new bs;d.type=kd,d.minFilter=ui,d.magFilter=ui,this.beautyRenderTarget=new ci(this.width,this.height,{minFilter:ui,magFilter:ui,type:qi,depthTexture:d,depthBuffer:!0}),this.prevRenderTarget=new ci(this.width,this.height,{minFilter:ui,magFilter:ui}),this.normalRenderTarget=new ci(this.width,this.height,{minFilter:ui,magFilter:ui,type:qi}),this.metalnessRenderTarget=new ci(this.width,this.height,{minFilter:ui,magFilter:ui,type:qi}),this.ssrRenderTarget=new ci(this.width,this.height,{minFilter:ui,magFilter:ui}),this.blurRenderTarget=this.ssrRenderTarget.clone(),this.blurRenderTarget2=this.ssrRenderTarget.clone(),this.ssrMaterial=new Ft({defines:Object.assign({},As.defines,{MAX_STEP:Math.sqrt(this.width*this.width+this.height*this.height)}),uniforms:Li.clone(As.uniforms),vertexShader:As.vertexShader,fragmentShader:As.fragmentShader,blending:ti}),this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssrMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssrMaterial.defines.SELECTIVE=this.selective,this.ssrMaterial.needsUpdate=!0,this.ssrMaterial.uniforms.tMetalness.value=this.metalnessRenderTarget.texture,this.ssrMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.ssrMaterial.uniforms.cameraNear.value=this.camera.near,this.ssrMaterial.uniforms.cameraFar.value=this.camera.far,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.ssrMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new ca,this.normalMaterial.blending=ti,this.metalnessOnMaterial=new tn({color:"white"}),this.metalnessOffMaterial=new tn({color:"black"}),this.blurMaterial=new Ft({defines:Object.assign({},Sc.defines),uniforms:Li.clone(Sc.uniforms),vertexShader:Sc.vertexShader,fragmentShader:Sc.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.blurMaterial2=new Ft({defines:Object.assign({},Sc.defines),uniforms:Li.clone(Sc.uniforms),vertexShader:Sc.vertexShader,fragmentShader:Sc.fragmentShader}),this.blurMaterial2.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.blurMaterial2.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new Ft({defines:Object.assign({},Ig.defines),uniforms:Li.clone(Ig.uniforms),vertexShader:Ig.vertexShader,fragmentShader:Ig.fragmentShader,blending:ti}),this.depthRenderMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new Ft({uniforms:Li.clone(fr.uniforms),vertexShader:fr.vertexShader,fragmentShader:fr.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:Ad,blendDst:Id,blendEquation:vr,blendSrcAlpha:Ad,blendDstAlpha:Id,blendEquationAlpha:vr}),this.fsQuad=new hr(null),this.originalClearColor=new pe}dispose(){this.beautyRenderTarget.dispose(),this.prevRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.metalnessRenderTarget.dispose(),this.ssrRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.blurRenderTarget2.dispose(),this.normalMaterial.dispose(),this.metalnessOnMaterial.dispose(),this.metalnessOffMaterial.dispose(),this.blurMaterial.dispose(),this.blurMaterial2.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(i,t){switch(i.setRenderTarget(this.beautyRenderTarget),i.clear(),this.groundReflector&&(this.groundReflector.visible=!1,this.groundReflector.doRender(this.renderer,this.scene,this.camera),this.groundReflector.visible=!0),i.render(this.scene,this.camera),this.groundReflector&&(this.groundReflector.visible=!1),this.renderOverride(i,this.normalMaterial,this.normalRenderTarget,0,0),this.selective&&this.renderMetalness(i,this.metalnessOnMaterial,this.metalnessRenderTarget,0,0),this.ssrMaterial.uniforms.opacity.value=this.opacity,this.ssrMaterial.uniforms.maxDistance.value=this.maxDistance,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.renderPass(i,this.ssrMaterial,this.ssrRenderTarget),this.blur&&(this.renderPass(i,this.blurMaterial,this.blurRenderTarget),this.renderPass(i,this.blurMaterial2,this.blurRenderTarget2)),this.output){case n.OUTPUT.Default:this.bouncing?(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=ti,this.renderPass(i,this.copyMaterial,this.prevRenderTarget),this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=fs,this.renderPass(i,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture,this.copyMaterial.blending=ti,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t)):(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=ti,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t),this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=fs,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t));break;case n.OUTPUT.SSR:this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=ti,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t),this.bouncing&&(this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=ti,this.renderPass(i,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=fs,this.renderPass(i,this.copyMaterial,this.prevRenderTarget));break;case n.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=ti,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Depth:this.renderPass(i,this.depthRenderMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=ti,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Metalness:this.copyMaterial.uniforms.tDiffuse.value=this.metalnessRenderTarget.texture,this.copyMaterial.blending=ti,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t);break;default:console.warn("THREE.SSRPass: Unknown output type.")}}renderPass(i,t,r,o,s){this.originalClearColor.copy(i.getClearColor(this.tempColor));let a=i.getClearAlpha(this.tempColor),c=i.autoClear;i.setRenderTarget(r),i.autoClear=!1,o!=null&&(i.setClearColor(o),i.setClearAlpha(s||0),i.clear()),this.fsQuad.material=t,this.fsQuad.render(i),i.autoClear=c,i.setClearColor(this.originalClearColor),i.setClearAlpha(a)}renderOverride(i,t,r,o,s){this.originalClearColor.copy(i.getClearColor(this.tempColor));let a=i.getClearAlpha(this.tempColor),c=i.autoClear;i.setRenderTarget(r),i.autoClear=!1,o=t.clearColor||o,s=t.clearAlpha||s,o!=null&&(i.setClearColor(o),i.setClearAlpha(s||0),i.clear()),this.scene.overrideMaterial=t,i.render(this.scene,this.camera),this.scene.overrideMaterial=null,i.autoClear=c,i.setClearColor(this.originalClearColor),i.setClearAlpha(a)}renderMetalness(i,t,r,o,s){this.originalClearColor.copy(i.getClearColor(this.tempColor));let a=i.getClearAlpha(this.tempColor),c=i.autoClear;i.setRenderTarget(r),i.autoClear=!1,o=t.clearColor||o,s=t.clearAlpha||s,o!=null&&(i.setClearColor(o),i.setClearAlpha(s||0),i.clear()),this.scene.traverseVisible(l=>{l._SSRPassBackupMaterial=l.material,this._selects.includes(l)?l.material=this.metalnessOnMaterial:l.material=this.metalnessOffMaterial}),i.render(this.scene,this.camera),this.scene.traverseVisible(l=>{l.material=l._SSRPassBackupMaterial}),i.autoClear=c,i.setClearColor(this.originalClearColor),i.setClearAlpha(a)}setSize(i,t){this.width=i,this.height=t,this.ssrMaterial.defines.MAX_STEP=Math.sqrt(i*i+t*t),this.ssrMaterial.needsUpdate=!0,this.beautyRenderTarget.setSize(i,t),this.prevRenderTarget.setSize(i,t),this.ssrRenderTarget.setSize(i,t),this.normalRenderTarget.setSize(i,t),this.metalnessRenderTarget.setSize(i,t),this.blurRenderTarget.setSize(i,t),this.blurRenderTarget2.setSize(i,t),this.ssrMaterial.uniforms.resolution.value.set(i,t),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(i,t),this.blurMaterial2.uniforms.resolution.value.set(i,t)}}return n.OUTPUT={Default:0,SSR:1,Beauty:3,Depth:4,Normal:5,Metalness:7},n})();var Fre=["*"],Rc=class Rc extends Ai{getType(){return Z1}set width(e){this._objRef&&(this._objRef.width=e)}get width(){return this._objRef?.width}set height(e){this._objRef&&(this._objRef.height=e)}get height(){return this._objRef?.height}set clear(e){this._objRef&&(this._objRef.clear=e)}get clear(){return this._objRef?.clear}set renderer(e){this._objRef&&(this._objRef.renderer=e)}get renderer(){return this._objRef?.renderer}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set groundReflector(e){this._objRef&&(this._objRef.groundReflector=e)}get groundReflector(){return this._objRef?.groundReflector}set opacity(e){this._objRef&&(this._objRef.opacity=e)}get opacity(){return this._objRef?.opacity}set output(e){this._objRef&&(this._objRef.output=e)}get output(){return this._objRef?.output}set maxDistance(e){this._objRef&&(this._objRef.maxDistance=e)}get maxDistance(){return this._objRef?.maxDistance}set thickness(e){this._objRef&&(this._objRef.thickness=e)}get thickness(){return this._objRef?.thickness}set tempColor(e){this._objRef&&(this._objRef.tempColor=_e(this._objRef.tempColor,e))}get tempColor(){return this._objRef?.tempColor}get selects(){return this._objRef?.selects}set selects(e){this._objRef&&(this._objRef.selects=e)}set selective(e){this._objRef&&(this._objRef.selective=e)}get selective(){return this._objRef?.selective}get bouncing(){return this._objRef?.bouncing}set bouncing(e){this._objRef&&(this._objRef.bouncing=e)}set blur(e){this._objRef&&(this._objRef.blur=e)}get blur(){return this._objRef?.blur}get distanceAttenuation(){return this._objRef?.distanceAttenuation}set distanceAttenuation(e){this._objRef&&(this._objRef.distanceAttenuation=e)}get fresnel(){return this._objRef?.fresnel}set fresnel(e){this._objRef&&(this._objRef.fresnel=e)}get infiniteThick(){return this._objRef?.infiniteThick}set infiniteThick(e){this._objRef&&(this._objRef.infiniteThick=e)}set beautyRenderTarget(e){this._objRef&&(this._objRef.beautyRenderTarget=e)}get beautyRenderTarget(){return this._objRef?.beautyRenderTarget}set prevRenderTarget(e){this._objRef&&(this._objRef.prevRenderTarget=e)}get prevRenderTarget(){return this._objRef?.prevRenderTarget}set normalRenderTarget(e){this._objRef&&(this._objRef.normalRenderTarget=e)}get normalRenderTarget(){return this._objRef?.normalRenderTarget}set metalnessRenderTarget(e){this._objRef&&(this._objRef.metalnessRenderTarget=e)}get metalnessRenderTarget(){return this._objRef?.metalnessRenderTarget}set ssrRenderTarget(e){this._objRef&&(this._objRef.ssrRenderTarget=e)}get ssrRenderTarget(){return this._objRef?.ssrRenderTarget}set blurRenderTarget(e){this._objRef&&(this._objRef.blurRenderTarget=e)}get blurRenderTarget(){return this._objRef?.blurRenderTarget}set blurRenderTarget2(e){this._objRef&&(this._objRef.blurRenderTarget2=e)}get blurRenderTarget2(){return this._objRef?.blurRenderTarget2}set ssrMaterial(e){this._objRef&&(this._objRef.ssrMaterial=e)}get ssrMaterial(){return this._objRef?.ssrMaterial}set normalMaterial(e){this._objRef&&(this._objRef.normalMaterial=e)}get normalMaterial(){return this._objRef?.normalMaterial}set metalnessOnMaterial(e){this._objRef&&(this._objRef.metalnessOnMaterial=e)}get metalnessOnMaterial(){return this._objRef?.metalnessOnMaterial}set metalnessOffMaterial(e){this._objRef&&(this._objRef.metalnessOffMaterial=e)}get metalnessOffMaterial(){return this._objRef?.metalnessOffMaterial}set blurMaterial(e){this._objRef&&(this._objRef.blurMaterial=e)}get blurMaterial(){return this._objRef?.blurMaterial}set blurMaterial2(e){this._objRef&&(this._objRef.blurMaterial2=e)}get blurMaterial2(){return this._objRef?.blurMaterial2}set depthRenderMaterial(e){this._objRef&&(this._objRef.depthRenderMaterial=e)}get depthRenderMaterial(){return this._objRef?.depthRenderMaterial}set copyMaterial(e){this._objRef&&(this._objRef.copyMaterial=e)}get copyMaterial(){return this._objRef?.copyMaterial}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set originalClearColor(e){this._objRef&&(this._objRef.originalClearColor=_e(this._objRef.originalClearColor,e))}get originalClearColor(){return this._objRef?.originalClearColor}set dispose(e){this._objRef&&(this._objRef.dispose=e)}get dispose(){return this._objRef?.dispose}set renderPass(e){this._objRef&&(this._objRef.renderPass=e)}get renderPass(){return this._objRef?.renderPass}set renderOverride(e){this._objRef&&(this._objRef.renderOverride=e)}get renderOverride(){return this._objRef?.renderOverride}set renderMetalness(e){this._objRef&&(this._objRef.renderMetalness=e)}get renderMetalness(){return this._objRef?.renderMetalness}};Rc.OUTPUT=Z1.OUTPUT,Rc.\u0275fac=(()=>{let e;return function(t){return(e||(e=be(Rc)))(t||Rc)}})(),Rc.\u0275cmp=L({type:Rc,selectors:[["th-sSRPass"]],inputs:{width:"width",height:"height",clear:"clear",renderer:"renderer",scene:"scene",camera:"camera",groundReflector:"groundReflector",opacity:"opacity",output:"output",maxDistance:"maxDistance",thickness:"thickness",tempColor:"tempColor",selects:"selects",selective:"selective",bouncing:"bouncing",blur:"blur",distanceAttenuation:"distanceAttenuation",fresnel:"fresnel",infiniteThick:"infiniteThick",beautyRenderTarget:"beautyRenderTarget",prevRenderTarget:"prevRenderTarget",normalRenderTarget:"normalRenderTarget",metalnessRenderTarget:"metalnessRenderTarget",ssrRenderTarget:"ssrRenderTarget",blurRenderTarget:"blurRenderTarget",blurRenderTarget2:"blurRenderTarget2",ssrMaterial:"ssrMaterial",normalMaterial:"normalMaterial",metalnessOnMaterial:"metalnessOnMaterial",metalnessOffMaterial:"metalnessOffMaterial",blurMaterial:"blurMaterial",blurMaterial2:"blurMaterial2",depthRenderMaterial:"depthRenderMaterial",copyMaterial:"copyMaterial",fsQuad:"fsQuad",originalClearColor:"originalClearColor",dispose:"dispose",renderPass:"renderPass",renderOverride:"renderOverride",renderMetalness:"renderMetalness"},features:[ie([{provide:fi,useExisting:ge(()=>Rc)}]),q],ngContentSelectors:Fre,decls:1,vars:0,template:function(i,t){i&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});var BU=Rc;var jre=["*"],El=(()=>{let e=class e extends ni{getType(){return ac}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-sphereGeometry"]],features:[ie([{provide:ni,useExisting:ge(()=>e)}]),q],ngContentSelectors:jre,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Q1={type:"change"},K1={type:"start"},J1={type:"end"},jx=class extends jn{constructor(e,i){super();let t=this,r={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=e,this.domElement=i,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:Ar.ROTATE,MIDDLE:Ar.DOLLY,RIGHT:Ar.PAN},this.target=new S;let o=1e-6,s=new S,a=1,c=r.NONE,l=r.NONE,d=0,u=0,h=0,f=new S,p=new z,b=new z,g=new S,m=new z,v=new z,_=new z,y=new z,C=[],R={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){let N=t.domElement.getBoundingClientRect(),xe=t.domElement.ownerDocument.documentElement;t.screen.left=N.left+window.pageXOffset-xe.clientLeft,t.screen.top=N.top+window.pageYOffset-xe.clientTop,t.screen.width=N.width,t.screen.height=N.height};let M=function(){let N=new z;return function(Ne,Ue){return N.set((Ne-t.screen.left)/t.screen.width,(Ue-t.screen.top)/t.screen.height),N}}(),A=function(){let N=new z;return function(Ne,Ue){return N.set((Ne-t.screen.width*.5-t.screen.left)/(t.screen.width*.5),(t.screen.height+2*(t.screen.top-Ue))/t.screen.width),N}}();this.rotateCamera=function(){let N=new S,xe=new ii,Ne=new S,Ue=new S,O=new S,ye=new S;return function(){ye.set(b.x-p.x,b.y-p.y,0);let Pe=ye.length();Pe?(f.copy(t.object.position).sub(t.target),Ne.copy(f).normalize(),Ue.copy(t.object.up).normalize(),O.crossVectors(Ue,Ne).normalize(),Ue.setLength(b.y-p.y),O.setLength(b.x-p.x),ye.copy(Ue.add(O)),N.crossVectors(ye,f).normalize(),Pe*=t.rotateSpeed,xe.setFromAxisAngle(N,Pe),f.applyQuaternion(xe),t.object.up.applyQuaternion(xe),g.copy(N),h=Pe):!t.staticMoving&&h&&(h*=Math.sqrt(1-t.dynamicDampingFactor),f.copy(t.object.position).sub(t.target),xe.setFromAxisAngle(g,h),f.applyQuaternion(xe),t.object.up.applyQuaternion(xe)),p.copy(b)}}(),this.zoomCamera=function(){let N;c===r.TOUCH_ZOOM_PAN?(N=d/u,d=u,t.object.isPerspectiveCamera?f.multiplyScalar(N):t.object.isOrthographicCamera?(t.object.zoom=st.clamp(t.object.zoom/N,t.minZoom,t.maxZoom),a!==t.object.zoom&&t.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(N=1+(v.y-m.y)*t.zoomSpeed,N!==1&&N>0&&(t.object.isPerspectiveCamera?f.multiplyScalar(N):t.object.isOrthographicCamera?(t.object.zoom=st.clamp(t.object.zoom/N,t.minZoom,t.maxZoom),a!==t.object.zoom&&t.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),t.staticMoving?m.copy(v):m.y+=(v.y-m.y)*this.dynamicDampingFactor)},this.panCamera=function(){let N=new z,xe=new S,Ne=new S;return function(){if(N.copy(y).sub(_),N.lengthSq()){if(t.object.isOrthographicCamera){let O=(t.object.right-t.object.left)/t.object.zoom/t.domElement.clientWidth,ye=(t.object.top-t.object.bottom)/t.object.zoom/t.domElement.clientWidth;N.x*=O,N.y*=ye}N.multiplyScalar(f.length()*t.panSpeed),Ne.copy(f).cross(t.object.up).setLength(N.x),Ne.add(xe.copy(t.object.up).setLength(N.y)),t.object.position.add(Ne),t.target.add(Ne),t.staticMoving?_.copy(y):_.add(N.subVectors(y,_).multiplyScalar(t.dynamicDampingFactor))}}}(),this.checkDistances=function(){(!t.noZoom||!t.noPan)&&(f.lengthSq()>t.maxDistance*t.maxDistance&&(t.object.position.addVectors(t.target,f.setLength(t.maxDistance)),m.copy(v)),f.lengthSq()<t.minDistance*t.minDistance&&(t.object.position.addVectors(t.target,f.setLength(t.minDistance)),m.copy(v)))},this.update=function(){f.subVectors(t.object.position,t.target),t.noRotate||t.rotateCamera(),t.noZoom||t.zoomCamera(),t.noPan||t.panCamera(),t.object.position.addVectors(t.target,f),t.object.isPerspectiveCamera?(t.checkDistances(),t.object.lookAt(t.target),s.distanceToSquared(t.object.position)>o&&(t.dispatchEvent(Q1),s.copy(t.object.position))):t.object.isOrthographicCamera?(t.object.lookAt(t.target),(s.distanceToSquared(t.object.position)>o||a!==t.object.zoom)&&(t.dispatchEvent(Q1),s.copy(t.object.position),a=t.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){c=r.NONE,l=r.NONE,t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.up.copy(t.up0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),f.subVectors(t.object.position,t.target),t.object.lookAt(t.target),t.dispatchEvent(Q1),s.copy(t.object.position),a=t.object.zoom};function T(N){t.enabled!==!1&&(C.length===0&&(t.domElement.setPointerCapture(N.pointerId),t.domElement.addEventListener("pointermove",x),t.domElement.addEventListener("pointerup",I)),yt(N),N.pointerType==="touch"?se(N):ne(N))}function x(N){t.enabled!==!1&&(N.pointerType==="touch"?Te(N):B(N))}function I(N){t.enabled!==!1&&(N.pointerType==="touch"?Ie(N):G(),Z(N),C.length===0&&(t.domElement.releasePointerCapture(N.pointerId),t.domElement.removeEventListener("pointermove",x),t.domElement.removeEventListener("pointerup",I)))}function V(N){Z(N)}function W(N){t.enabled!==!1&&(window.removeEventListener("keydown",W),l===r.NONE&&(N.code===t.keys[r.ROTATE]&&!t.noRotate?l=r.ROTATE:N.code===t.keys[r.ZOOM]&&!t.noZoom?l=r.ZOOM:N.code===t.keys[r.PAN]&&!t.noPan&&(l=r.PAN)))}function ee(){t.enabled!==!1&&(l=r.NONE,window.addEventListener("keydown",W))}function ne(N){if(c===r.NONE)switch(N.button){case t.mouseButtons.LEFT:c=r.ROTATE;break;case t.mouseButtons.MIDDLE:c=r.ZOOM;break;case t.mouseButtons.RIGHT:c=r.PAN;break}let xe=l!==r.NONE?l:c;xe===r.ROTATE&&!t.noRotate?(b.copy(A(N.pageX,N.pageY)),p.copy(b)):xe===r.ZOOM&&!t.noZoom?(m.copy(M(N.pageX,N.pageY)),v.copy(m)):xe===r.PAN&&!t.noPan&&(_.copy(M(N.pageX,N.pageY)),y.copy(_)),t.dispatchEvent(K1)}function B(N){let xe=l!==r.NONE?l:c;xe===r.ROTATE&&!t.noRotate?(p.copy(b),b.copy(A(N.pageX,N.pageY))):xe===r.ZOOM&&!t.noZoom?v.copy(M(N.pageX,N.pageY)):xe===r.PAN&&!t.noPan&&y.copy(M(N.pageX,N.pageY))}function G(){c=r.NONE,t.dispatchEvent(J1)}function U(N){if(t.enabled!==!1&&t.noZoom!==!0){switch(N.preventDefault(),N.deltaMode){case 2:m.y-=N.deltaY*.025;break;case 1:m.y-=N.deltaY*.01;break;default:m.y-=N.deltaY*25e-5;break}t.dispatchEvent(K1),t.dispatchEvent(J1)}}function se(N){switch(Ce(N),C.length){case 1:c=r.TOUCH_ROTATE,b.copy(A(C[0].pageX,C[0].pageY)),p.copy(b);break;default:c=r.TOUCH_ZOOM_PAN;let xe=C[0].pageX-C[1].pageX,Ne=C[0].pageY-C[1].pageY;u=d=Math.sqrt(xe*xe+Ne*Ne);let Ue=(C[0].pageX+C[1].pageX)/2,O=(C[0].pageY+C[1].pageY)/2;_.copy(M(Ue,O)),y.copy(_);break}t.dispatchEvent(K1)}function Te(N){switch(Ce(N),C.length){case 1:p.copy(b),b.copy(A(N.pageX,N.pageY));break;default:let xe=We(N),Ne=N.pageX-xe.x,Ue=N.pageY-xe.y;u=Math.sqrt(Ne*Ne+Ue*Ue);let O=(N.pageX+xe.x)/2,ye=(N.pageY+xe.y)/2;y.copy(M(O,ye));break}}function Ie(N){switch(C.length){case 0:c=r.NONE;break;case 1:c=r.TOUCH_ROTATE,b.copy(A(N.pageX,N.pageY)),p.copy(b);break;case 2:c=r.TOUCH_ZOOM_PAN;for(let xe=0;xe<C.length;xe++)if(C[xe].pointerId!==N.pointerId){let Ne=R[C[xe].pointerId];b.copy(A(Ne.x,Ne.y)),p.copy(b);break}break}t.dispatchEvent(J1)}function Ze(N){t.enabled!==!1&&N.preventDefault()}function yt(N){C.push(N)}function Z(N){delete R[N.pointerId];for(let xe=0;xe<C.length;xe++)if(C[xe].pointerId==N.pointerId){C.splice(xe,1);return}}function Ce(N){let xe=R[N.pointerId];xe===void 0&&(xe=new z,R[N.pointerId]=xe),xe.set(N.pageX,N.pageY)}function We(N){let xe=N.pointerId===C[0].pointerId?C[1]:C[0];return R[xe.pointerId]}this.dispose=function(){t.domElement.removeEventListener("contextmenu",Ze),t.domElement.removeEventListener("pointerdown",T),t.domElement.removeEventListener("pointercancel",V),t.domElement.removeEventListener("wheel",U),t.domElement.removeEventListener("pointermove",x),t.domElement.removeEventListener("pointerup",I),window.removeEventListener("keydown",W),window.removeEventListener("keyup",ee)},this.domElement.addEventListener("contextmenu",Ze),this.domElement.addEventListener("pointerdown",T),this.domElement.addEventListener("pointercancel",V),this.domElement.addEventListener("wheel",U,{passive:!1}),window.addEventListener("keydown",W),window.addEventListener("keyup",ee),this.handleResize(),this.update()}};var Ore=["*"],Ox=(()=>{let e=class e extends nn{getType(){return jx}set object(t){this._objRef&&(this._objRef.object=t)}get object(){return this._objRef?.object}set domElement(t){this._objRef&&(this._objRef.domElement=t)}get domElement(){return this._objRef?.domElement}set enabled(t){this._objRef&&(this._objRef.enabled=t)}get enabled(){return this._objRef?.enabled}set screen(t){this._objRef&&(this._objRef.screen=t)}get screen(){return this._objRef?.screen}set rotateSpeed(t){this._objRef&&(this._objRef.rotateSpeed=t)}get rotateSpeed(){return this._objRef?.rotateSpeed}set zoomSpeed(t){this._objRef&&(this._objRef.zoomSpeed=t)}get zoomSpeed(){return this._objRef?.zoomSpeed}set panSpeed(t){this._objRef&&(this._objRef.panSpeed=t)}get panSpeed(){return this._objRef?.panSpeed}set noRotate(t){this._objRef&&(this._objRef.noRotate=t)}get noRotate(){return this._objRef?.noRotate}set noZoom(t){this._objRef&&(this._objRef.noZoom=t)}get noZoom(){return this._objRef?.noZoom}set noPan(t){this._objRef&&(this._objRef.noPan=t)}get noPan(){return this._objRef?.noPan}set noRoll(t){this._objRef&&(this._objRef.noRoll=t)}get noRoll(){return this._objRef?.noRoll}set staticMoving(t){this._objRef&&(this._objRef.staticMoving=t)}get staticMoving(){return this._objRef?.staticMoving}set dynamicDampingFactor(t){this._objRef&&(this._objRef.dynamicDampingFactor=t)}get dynamicDampingFactor(){return this._objRef?.dynamicDampingFactor}set minDistance(t){this._objRef&&(this._objRef.minDistance=t)}get minDistance(){return this._objRef?.minDistance}set maxDistance(t){this._objRef&&(this._objRef.maxDistance=t)}get maxDistance(){return this._objRef?.maxDistance}set minZoom(t){this._objRef&&(this._objRef.minZoom=t)}get minZoom(){return this._objRef?.minZoom}set maxZoom(t){this._objRef&&(this._objRef.maxZoom=t)}get maxZoom(){return this._objRef?.maxZoom}set keys(t){this._objRef&&(this._objRef.keys=t)}get keys(){return this._objRef?.keys}set mouseButtons(t){this._objRef&&(this._objRef.mouseButtons=t)}get mouseButtons(){return this._objRef?.mouseButtons}set target(t){this._objRef&&(this._objRef.target=_e(this._objRef.target,t))}get target(){return this._objRef?.target}set position0(t){this._objRef&&(this._objRef.position0=_e(this._objRef.position0,t))}get position0(){return this._objRef?.position0}set target0(t){this._objRef&&(this._objRef.target0=_e(this._objRef.target0,t))}get target0(){return this._objRef?.target0}set up0(t){this._objRef&&(this._objRef.up0=_e(this._objRef.up0,t))}get up0(){return this._objRef?.up0}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-trackballControls"]],inputs:{object:"object",domElement:"domElement",enabled:"enabled",screen:"screen",rotateSpeed:"rotateSpeed",zoomSpeed:"zoomSpeed",panSpeed:"panSpeed",noRotate:"noRotate",noZoom:"noZoom",noPan:"noPan",noRoll:"noRoll",staticMoving:"staticMoving",dynamicDampingFactor:"dynamicDampingFactor",minDistance:"minDistance",maxDistance:"maxDistance",minZoom:"minZoom",maxZoom:"maxZoom",keys:"keys",mouseButtons:"mouseButtons",target:"target",position0:"position0",target0:"target0",up0:"up0"},features:[ie([{provide:nn,useExisting:ge(()=>e)}]),q],ngContentSelectors:Ore,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var du=new Xr,Fr=new S,Dl=new S,hn=new ii,VU={X:new S(1,0,0),Y:new S(0,1,0),Z:new S(0,0,1)},eA={type:"change"},zU={type:"mouseDown",mode:null},HU={type:"mouseUp",mode:null},GU={type:"objectChange"},Of=class extends Tt{constructor(e,i){super(),i===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),i=document),this.isTransformControls=!0,this.visible=!1,this.domElement=i,this.domElement.style.touchAction="none";let t=new iA;this._gizmo=t,this.add(t);let r=new nA;this._plane=r,this.add(r);let o=this;function s(v,_){let y=_;Object.defineProperty(o,v,{get:function(){return y!==void 0?y:_},set:function(C){y!==C&&(y=C,r[v]=C,t[v]=C,o.dispatchEvent({type:v+"-changed",value:C}),o.dispatchEvent(eA))}}),o[v]=_,r[v]=_,t[v]=_}s("camera",e),s("object",void 0),s("enabled",!0),s("axis",null),s("mode","translate"),s("translationSnap",null),s("rotationSnap",null),s("scaleSnap",null),s("space","world"),s("size",1),s("dragging",!1),s("showX",!0),s("showY",!0),s("showZ",!0);let a=new S,c=new S,l=new ii,d=new ii,u=new S,h=new ii,f=new S,p=new S,b=new S,g=0,m=new S;s("worldPosition",a),s("worldPositionStart",c),s("worldQuaternion",l),s("worldQuaternionStart",d),s("cameraPosition",u),s("cameraQuaternion",h),s("pointStart",f),s("pointEnd",p),s("rotationAxis",b),s("rotationAngle",g),s("eye",m),this._offset=new S,this._startNorm=new S,this._endNorm=new S,this._cameraScale=new S,this._parentPosition=new S,this._parentQuaternion=new ii,this._parentQuaternionInv=new ii,this._parentScale=new S,this._worldScaleStart=new S,this._worldQuaternionInv=new ii,this._worldScale=new S,this._positionStart=new S,this._quaternionStart=new ii,this._scaleStart=new S,this._getPointer=Nre.bind(this),this._onPointerDown=Bre.bind(this),this._onPointerHover=Lre.bind(this),this._onPointerMove=Ure.bind(this),this._onPointerUp=Vre.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(e){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(e)}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;e!==null&&du.setFromCamera(e,this.camera);let i=tA(this._gizmo.picker[this.mode],du);i?this.axis=i.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e!=null&&e.button!==0)&&this.axis!==null){e!==null&&du.setFromCamera(e,this.camera);let i=tA(this._plane,du,!0);i&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(i.point).sub(this.worldPositionStart)),this.dragging=!0,zU.mode=this.mode,this.dispatchEvent(zU)}}pointerMove(e){let i=this.axis,t=this.mode,r=this.object,o=this.space;if(t==="scale"?o="local":(i==="E"||i==="XYZE"||i==="XYZ")&&(o="world"),r===void 0||i===null||this.dragging===!1||e!==null&&e.button!==-1)return;e!==null&&du.setFromCamera(e,this.camera);let s=tA(this._plane,du,!0);if(s){if(this.pointEnd.copy(s.point).sub(this.worldPositionStart),t==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),o==="local"&&i!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),i.indexOf("X")===-1&&(this._offset.x=0),i.indexOf("Y")===-1&&(this._offset.y=0),i.indexOf("Z")===-1&&(this._offset.z=0),o==="local"&&i!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),r.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(o==="local"&&(r.position.applyQuaternion(hn.copy(this._quaternionStart).invert()),i.search("X")!==-1&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),i.search("Y")!==-1&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),i.search("Z")!==-1&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.position.applyQuaternion(this._quaternionStart)),o==="world"&&(r.parent&&r.position.add(Fr.setFromMatrixPosition(r.parent.matrixWorld)),i.search("X")!==-1&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),i.search("Y")!==-1&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),i.search("Z")!==-1&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.parent&&r.position.sub(Fr.setFromMatrixPosition(r.parent.matrixWorld))));else if(t==="scale"){if(i.search("XYZ")!==-1){let a=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(a*=-1),Dl.set(a,a,a)}else Fr.copy(this.pointStart),Dl.copy(this.pointEnd),Fr.applyQuaternion(this._worldQuaternionInv),Dl.applyQuaternion(this._worldQuaternionInv),Dl.divide(Fr),i.search("X")===-1&&(Dl.x=1),i.search("Y")===-1&&(Dl.y=1),i.search("Z")===-1&&(Dl.z=1);r.scale.copy(this._scaleStart).multiply(Dl),this.scaleSnap&&(i.search("X")!==-1&&(r.scale.x=Math.round(r.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),i.search("Y")!==-1&&(r.scale.y=Math.round(r.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),i.search("Z")!==-1&&(r.scale.z=Math.round(r.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(t==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);let a=20/this.worldPosition.distanceTo(Fr.setFromMatrixPosition(this.camera.matrixWorld)),c=!1;i==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(Fr.copy(this.rotationAxis).cross(this.eye))*a):(i==="X"||i==="Y"||i==="Z")&&(this.rotationAxis.copy(VU[i]),Fr.copy(VU[i]),o==="local"&&Fr.applyQuaternion(this.worldQuaternion),Fr.cross(this.eye),Fr.length()===0?c=!0:this.rotationAngle=this._offset.dot(Fr.normalize())*a),(i==="E"||c)&&(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),o==="local"&&i!=="E"&&i!=="XYZE"?(r.quaternion.copy(this._quaternionStart),r.quaternion.multiply(hn.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),r.quaternion.copy(hn.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),r.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(eA),this.dispatchEvent(GU)}}pointerUp(e){e!==null&&e.button!==0||(this.dragging&&this.axis!==null&&(HU.mode=this.mode,this.dispatchEvent(HU)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(eA),this.dispatchEvent(GU),this.pointStart.copy(this.pointEnd))}getRaycaster(){return du}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}};function Nre(n){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:n.button};{let e=this.domElement.getBoundingClientRect();return{x:(n.clientX-e.left)/e.width*2-1,y:-(n.clientY-e.top)/e.height*2+1,button:n.button}}}function Lre(n){if(this.enabled)switch(n.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(n));break}}function Bre(n){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(n)),this.pointerDown(this._getPointer(n)))}function Ure(n){this.enabled&&this.pointerMove(this._getPointer(n))}function Vre(n){this.enabled&&(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(n)))}function tA(n,e,i){let t=e.intersectObject(n,!0);for(let r=0;r<t.length;r++)if(t[r].object.visible||i)return t[r];return!1}var Nx=new so,Ki=new S(0,1,0),WU=new S(0,0,0),$U=new Be,Lx=new ii,Ux=new ii,Ra=new S,qU=new Be,Fg=new S(1,0,0),uu=new S(0,1,0),jg=new S(0,0,1),Bx=new S,Pg=new S,kg=new S,iA=class extends Tt{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";let e=new tn({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=new on({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=e.clone();t.opacity=.15;let r=i.clone();r.opacity=.5;let o=e.clone();o.color.setHex(16711680);let s=e.clone();s.color.setHex(65280);let a=e.clone();a.color.setHex(255);let c=e.clone();c.color.setHex(16711680),c.opacity=.5;let l=e.clone();l.color.setHex(65280),l.opacity=.5;let d=e.clone();d.color.setHex(255),d.opacity=.5;let u=e.clone();u.opacity=.25;let h=e.clone();h.color.setHex(16776960),h.opacity=.25,e.clone().color.setHex(16776960);let p=e.clone();p.color.setHex(7895160);let b=new On(0,.04,.1,12);b.translate(0,.05,0);let g=new Zi(.08,.08,.08);g.translate(0,.04,0);let m=new bt;m.setAttribute("position",new qe([0,0,0,1,0,0],3));let v=new On(.0075,.0075,.5,3);v.translate(0,.25,0);function _(ne,B){let G=new aa(ne,.0075,3,64,B*Math.PI*2);return G.rotateY(Math.PI/2),G.rotateX(Math.PI/2),G}function y(){let ne=new bt;return ne.setAttribute("position",new qe([0,0,0,1,1,1],3)),ne}let C={X:[[new Ve(b,o),[.5,0,0],[0,0,-Math.PI/2]],[new Ve(b,o),[-.5,0,0],[0,0,Math.PI/2]],[new Ve(v,o),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new Ve(b,s),[0,.5,0]],[new Ve(b,s),[0,-.5,0],[Math.PI,0,0]],[new Ve(v,s)]],Z:[[new Ve(b,a),[0,0,.5],[Math.PI/2,0,0]],[new Ve(b,a),[0,0,-.5],[-Math.PI/2,0,0]],[new Ve(v,a),null,[Math.PI/2,0,0]]],XYZ:[[new Ve(new sa(.1,0),u.clone()),[0,0,0]]],XY:[[new Ve(new Zi(.15,.15,.01),d.clone()),[.15,.15,0]]],YZ:[[new Ve(new Zi(.15,.15,.01),c.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Ve(new Zi(.15,.15,.01),l.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},R={X:[[new Ve(new On(.2,0,.6,4),t),[.3,0,0],[0,0,-Math.PI/2]],[new Ve(new On(.2,0,.6,4),t),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Ve(new On(.2,0,.6,4),t),[0,.3,0]],[new Ve(new On(.2,0,.6,4),t),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Ve(new On(.2,0,.6,4),t),[0,0,.3],[Math.PI/2,0,0]],[new Ve(new On(.2,0,.6,4),t),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new Ve(new sa(.2,0),t)]],XY:[[new Ve(new Zi(.2,.2,.01),t),[.15,.15,0]]],YZ:[[new Ve(new Zi(.2,.2,.01),t),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Ve(new Zi(.2,.2,.01),t),[.15,0,.15],[-Math.PI/2,0,0]]]},M={START:[[new Ve(new sa(.01,2),r),null,null,null,"helper"]],END:[[new Ve(new sa(.01,2),r),null,null,null,"helper"]],DELTA:[[new Qi(y(),r),null,null,null,"helper"]],X:[[new Qi(m,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Qi(m,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Qi(m,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},A={XYZE:[[new Ve(_(.5,1),p),null,[0,Math.PI/2,0]]],X:[[new Ve(_(.5,.5),o)]],Y:[[new Ve(_(.5,.5),s),null,[0,0,-Math.PI/2]]],Z:[[new Ve(_(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new Ve(_(.75,1),h),null,[0,Math.PI/2,0]]]},T={AXIS:[[new Qi(m,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},x={XYZE:[[new Ve(new ac(.25,10,8),t)]],X:[[new Ve(new aa(.5,.1,4,24),t),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Ve(new aa(.5,.1,4,24),t),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Ve(new aa(.5,.1,4,24),t),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Ve(new aa(.75,.1,2,24),t)]]},I={X:[[new Ve(g,o),[.5,0,0],[0,0,-Math.PI/2]],[new Ve(v,o),[0,0,0],[0,0,-Math.PI/2]],[new Ve(g,o),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new Ve(g,s),[0,.5,0]],[new Ve(v,s)],[new Ve(g,s),[0,-.5,0],[0,0,Math.PI]]],Z:[[new Ve(g,a),[0,0,.5],[Math.PI/2,0,0]],[new Ve(v,a),[0,0,0],[Math.PI/2,0,0]],[new Ve(g,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new Ve(new Zi(.15,.15,.01),d),[.15,.15,0]]],YZ:[[new Ve(new Zi(.15,.15,.01),c),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Ve(new Zi(.15,.15,.01),l),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Ve(new Zi(.1,.1,.1),u.clone())]]},V={X:[[new Ve(new On(.2,0,.6,4),t),[.3,0,0],[0,0,-Math.PI/2]],[new Ve(new On(.2,0,.6,4),t),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Ve(new On(.2,0,.6,4),t),[0,.3,0]],[new Ve(new On(.2,0,.6,4),t),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Ve(new On(.2,0,.6,4),t),[0,0,.3],[Math.PI/2,0,0]],[new Ve(new On(.2,0,.6,4),t),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new Ve(new Zi(.2,.2,.01),t),[.15,.15,0]]],YZ:[[new Ve(new Zi(.2,.2,.01),t),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Ve(new Zi(.2,.2,.01),t),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Ve(new Zi(.2,.2,.2),t),[0,0,0]]]},W={X:[[new Qi(m,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Qi(m,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Qi(m,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function ee(ne){let B=new Tt;for(let G in ne)for(let U=ne[G].length;U--;){let se=ne[G][U][0].clone(),Te=ne[G][U][1],Ie=ne[G][U][2],Ze=ne[G][U][3],yt=ne[G][U][4];se.name=G,se.tag=yt,Te&&se.position.set(Te[0],Te[1],Te[2]),Ie&&se.rotation.set(Ie[0],Ie[1],Ie[2]),Ze&&se.scale.set(Ze[0],Ze[1],Ze[2]),se.updateMatrix();let Z=se.geometry.clone();Z.applyMatrix4(se.matrix),se.geometry=Z,se.renderOrder=1/0,se.position.set(0,0,0),se.rotation.set(0,0,0),se.scale.set(1,1,1),B.add(se)}return B}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=ee(C)),this.add(this.gizmo.rotate=ee(A)),this.add(this.gizmo.scale=ee(I)),this.add(this.picker.translate=ee(R)),this.add(this.picker.rotate=ee(x)),this.add(this.picker.scale=ee(V)),this.add(this.helper.translate=ee(M)),this.add(this.helper.rotate=ee(T)),this.add(this.helper.scale=ee(W)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){let t=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:Ux;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let r=[];r=r.concat(this.picker[this.mode].children),r=r.concat(this.gizmo[this.mode].children),r=r.concat(this.helper[this.mode].children);for(let o=0;o<r.length;o++){let s=r[o];s.visible=!0,s.rotation.set(0,0,0),s.position.copy(this.worldPosition);let a;if(this.camera.isOrthographicCamera?a=(this.camera.top-this.camera.bottom)/this.camera.zoom:a=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),s.scale.set(1,1,1).multiplyScalar(a*this.size/4),s.tag==="helper"){s.visible=!1,s.name==="AXIS"?(s.visible=!!this.axis,this.axis==="X"&&(hn.setFromEuler(Nx.set(0,0,0)),s.quaternion.copy(t).multiply(hn),Math.abs(Ki.copy(Fg).applyQuaternion(t).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="Y"&&(hn.setFromEuler(Nx.set(0,0,Math.PI/2)),s.quaternion.copy(t).multiply(hn),Math.abs(Ki.copy(uu).applyQuaternion(t).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="Z"&&(hn.setFromEuler(Nx.set(0,Math.PI/2,0)),s.quaternion.copy(t).multiply(hn),Math.abs(Ki.copy(jg).applyQuaternion(t).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="XYZE"&&(hn.setFromEuler(Nx.set(0,Math.PI/2,0)),Ki.copy(this.rotationAxis),s.quaternion.setFromRotationMatrix($U.lookAt(WU,Ki,uu)),s.quaternion.multiply(hn),s.visible=this.dragging),this.axis==="E"&&(s.visible=!1)):s.name==="START"?(s.position.copy(this.worldPositionStart),s.visible=this.dragging):s.name==="END"?(s.position.copy(this.worldPosition),s.visible=this.dragging):s.name==="DELTA"?(s.position.copy(this.worldPositionStart),s.quaternion.copy(this.worldQuaternionStart),Fr.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),Fr.applyQuaternion(this.worldQuaternionStart.clone().invert()),s.scale.copy(Fr),s.visible=this.dragging):(s.quaternion.copy(t),this.dragging?s.position.copy(this.worldPositionStart):s.position.copy(this.worldPosition),this.axis&&(s.visible=this.axis.search(s.name)!==-1));continue}s.quaternion.copy(t),this.mode==="translate"||this.mode==="scale"?(s.name==="X"&&Math.abs(Ki.copy(Fg).applyQuaternion(t).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="Y"&&Math.abs(Ki.copy(uu).applyQuaternion(t).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="Z"&&Math.abs(Ki.copy(jg).applyQuaternion(t).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="XY"&&Math.abs(Ki.copy(jg).applyQuaternion(t).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="YZ"&&Math.abs(Ki.copy(Fg).applyQuaternion(t).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="XZ"&&Math.abs(Ki.copy(uu).applyQuaternion(t).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1)):this.mode==="rotate"&&(Lx.copy(t),Ki.copy(this.eye).applyQuaternion(hn.copy(t).invert()),s.name.search("E")!==-1&&s.quaternion.setFromRotationMatrix($U.lookAt(this.eye,WU,uu)),s.name==="X"&&(hn.setFromAxisAngle(Fg,Math.atan2(-Ki.y,Ki.z)),hn.multiplyQuaternions(Lx,hn),s.quaternion.copy(hn)),s.name==="Y"&&(hn.setFromAxisAngle(uu,Math.atan2(Ki.x,Ki.z)),hn.multiplyQuaternions(Lx,hn),s.quaternion.copy(hn)),s.name==="Z"&&(hn.setFromAxisAngle(jg,Math.atan2(Ki.y,Ki.x)),hn.multiplyQuaternions(Lx,hn),s.quaternion.copy(hn))),s.visible=s.visible&&(s.name.indexOf("X")===-1||this.showX),s.visible=s.visible&&(s.name.indexOf("Y")===-1||this.showY),s.visible=s.visible&&(s.name.indexOf("Z")===-1||this.showZ),s.visible=s.visible&&(s.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),s.material._color=s.material._color||s.material.color.clone(),s.material._opacity=s.material._opacity||s.material.opacity,s.material.color.copy(s.material._color),s.material.opacity=s.material._opacity,this.enabled&&this.axis&&(s.name===this.axis||this.axis.split("").some(function(c){return s.name===c}))&&(s.material.color.setHex(16776960),s.material.opacity=1)}super.updateMatrixWorld(e)}},nA=class extends Ve{constructor(){super(new na(1e5,1e5,2,2),new tn({visible:!1,wireframe:!0,side:Kn,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let i=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(i="local"),Bx.copy(Fg).applyQuaternion(i==="local"?this.worldQuaternion:Ux),Pg.copy(uu).applyQuaternion(i==="local"?this.worldQuaternion:Ux),kg.copy(jg).applyQuaternion(i==="local"?this.worldQuaternion:Ux),Ki.copy(Pg),this.mode){case"translate":case"scale":switch(this.axis){case"X":Ki.copy(this.eye).cross(Bx),Ra.copy(Bx).cross(Ki);break;case"Y":Ki.copy(this.eye).cross(Pg),Ra.copy(Pg).cross(Ki);break;case"Z":Ki.copy(this.eye).cross(kg),Ra.copy(kg).cross(Ki);break;case"XY":Ra.copy(kg);break;case"YZ":Ra.copy(Bx);break;case"XZ":Ki.copy(kg),Ra.copy(Pg);break;case"XYZ":case"E":Ra.set(0,0,0);break}break;case"rotate":default:Ra.set(0,0,0)}Ra.length()===0?this.quaternion.copy(this.cameraQuaternion):(qU.lookAt(Fr.set(0,0,0),Ra,Ki),this.quaternion.setFromRotationMatrix(qU)),super.updateMatrixWorld(e)}};var zre=["*"],XU=(()=>{let e=class e extends nn{getType(){return Of}set domElement(t){this._objRef&&(this._objRef.domElement=t)}get domElement(){return this._objRef?.domElement}set camera(t){this._objRef&&(this._objRef.camera=t)}get camera(){return this._objRef?.camera}set object(t){this._objRef&&(this._objRef.object=t)}get object(){return this._objRef?.object}set enabled(t){this._objRef&&(this._objRef.enabled=t)}get enabled(){return this._objRef?.enabled}set axis(t){this._objRef&&(this._objRef.axis=t)}get axis(){return this._objRef?.axis}set mode(t){this._objRef&&(this._objRef.mode=t)}get mode(){return this._objRef?.mode}set translationSnap(t){this._objRef&&(this._objRef.translationSnap=t)}get translationSnap(){return this._objRef?.translationSnap}set rotationSnap(t){this._objRef&&(this._objRef.rotationSnap=t)}get rotationSnap(){return this._objRef?.rotationSnap}set space(t){this._objRef&&(this._objRef.space=t)}get space(){return this._objRef?.space}set size(t){this._objRef&&(this._objRef.size=t)}get size(){return this._objRef?.size}set dragging(t){this._objRef&&(this._objRef.dragging=t)}get dragging(){return this._objRef?.dragging}set showX(t){this._objRef&&(this._objRef.showX=t)}get showX(){return this._objRef?.showX}set showY(t){this._objRef&&(this._objRef.showY=t)}get showY(){return this._objRef?.showY}set showZ(t){this._objRef&&(this._objRef.showZ=t)}get showZ(){return this._objRef?.showZ}get isTransformControls(){return this._objRef?.isTransformControls}set mouseButtons(t){this._objRef&&(this._objRef.mouseButtons=t)}get mouseButtons(){return this._objRef?.mouseButtons}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-transformControlsGen"]],inputs:{domElement:"domElement",camera:"camera",object:"object",enabled:"enabled",axis:"axis",mode:"mode",translationSnap:"translationSnap",rotationSnap:"rotationSnap",space:"space",size:"size",dragging:"dragging",showX:"showX",showY:"showY",showZ:"showZ",mouseButtons:"mouseButtons"},features:[ie([{provide:nn,useExisting:ge(()=>e)}]),q],ngContentSelectors:zre,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var YU={name:"LuminosityHighPassShader",shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new pe(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			vec3 luma = vec3( 0.299, 0.587, 0.114 );

			float v = dot( texel.xyz, luma );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};var Nf=class n extends cn{constructor(e,i,t,r){super(),this.strength=i!==void 0?i:1,this.radius=t,this.threshold=r,this.resolution=e!==void 0?new z(e.x,e.y):new z(256,256),this.clearColor=new pe(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let o=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);this.renderTargetBright=new ci(o,s,{type:qi}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let u=0;u<this.nMips;u++){let h=new ci(o,s,{type:qi});h.texture.name="UnrealBloomPass.h"+u,h.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(h);let f=new ci(o,s,{type:qi});f.texture.name="UnrealBloomPass.v"+u,f.texture.generateMipmaps=!1,this.renderTargetsVertical.push(f),o=Math.round(o/2),s=Math.round(s/2)}let a=YU;this.highPassUniforms=Li.clone(a.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Ft({uniforms:this.highPassUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}),this.separableBlurMaterials=[];let c=[3,5,7,9,11];o=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);for(let u=0;u<this.nMips;u++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(c[u])),this.separableBlurMaterials[u].uniforms.invSize.value=new z(1/o,1/s),o=Math.round(o/2),s=Math.round(s/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=i,this.compositeMaterial.uniforms.bloomRadius.value=.1;let l=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=l,this.bloomTintColors=[new S(1,1,1),new S(1,1,1),new S(1,1,1),new S(1,1,1),new S(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;let d=fr;this.copyUniforms=Li.clone(d.uniforms),this.blendMaterial=new Ft({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:Dd,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new pe,this.oldClearAlpha=1,this.basic=new tn,this.fsQuad=new hr(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,i){let t=Math.round(e/2),r=Math.round(i/2);this.renderTargetBright.setSize(t,r);for(let o=0;o<this.nMips;o++)this.renderTargetsHorizontal[o].setSize(t,r),this.renderTargetsVertical[o].setSize(t,r),this.separableBlurMaterials[o].uniforms.invSize.value=new z(1/t,1/r),t=Math.round(t/2),r=Math.round(r/2)}render(e,i,t,r,o){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();let s=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),o&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let a=this.renderTargetBright;for(let c=0;c<this.nMips;c++)this.fsQuad.material=this.separableBlurMaterials[c],this.separableBlurMaterials[c].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[c].uniforms.direction.value=n.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[c]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[c].uniforms.colorTexture.value=this.renderTargetsHorizontal[c].texture,this.separableBlurMaterials[c].uniforms.direction.value=n.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[c]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[c];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,o&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}getSeperableBlurMaterial(e){let i=[];for(let t=0;t<e;t++)i.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new Ft({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new z(.5,.5)},direction:{value:new z(.5,.5)},gaussianCoefficients:{value:i}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new Ft({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}};Nf.BlurDirectionX=new z(1,0);Nf.BlurDirectionY=new z(0,1);var Hre=["*"],Vx=(()=>{let e=class e extends Ai{getType(){return Nf}set resolution(t){this._objRef&&(this._objRef.resolution=_e(this._objRef.resolution,t))}get resolution(){return this._objRef?.resolution}set strength(t){this._objRef&&(this._objRef.strength=t)}get strength(){return this._objRef?.strength}set radius(t){this._objRef&&(this._objRef.radius=t)}get radius(){return this._objRef?.radius}set threshold(t){this._objRef&&(this._objRef.threshold=t)}get threshold(){return this._objRef?.threshold}set clearColor(t){this._objRef&&(this._objRef.clearColor=_e(this._objRef.clearColor,t))}get clearColor(){return this._objRef?.clearColor}set renderTargetsHorizontal(t){this._objRef&&(this._objRef.renderTargetsHorizontal=t)}get renderTargetsHorizontal(){return this._objRef?.renderTargetsHorizontal}set renderTargetsVertical(t){this._objRef&&(this._objRef.renderTargetsVertical=t)}get renderTargetsVertical(){return this._objRef?.renderTargetsVertical}set nMips(t){this._objRef&&(this._objRef.nMips=t)}get nMips(){return this._objRef?.nMips}set renderTargetBright(t){this._objRef&&(this._objRef.renderTargetBright=t)}get renderTargetBright(){return this._objRef?.renderTargetBright}set highPassUniforms(t){this._objRef&&(this._objRef.highPassUniforms=t)}get highPassUniforms(){return this._objRef?.highPassUniforms}set materialHighPassFilter(t){this._objRef&&(this._objRef.materialHighPassFilter=t)}get materialHighPassFilter(){return this._objRef?.materialHighPassFilter}set separableBlurMaterials(t){this._objRef&&(this._objRef.separableBlurMaterials=t)}get separableBlurMaterials(){return this._objRef?.separableBlurMaterials}set compositeMaterial(t){this._objRef&&(this._objRef.compositeMaterial=t)}get compositeMaterial(){return this._objRef?.compositeMaterial}set bloomTintColors(t){this._objRef&&(this._objRef.bloomTintColors=t)}get bloomTintColors(){return this._objRef?.bloomTintColors}set copyUniforms(t){this._objRef&&(this._objRef.copyUniforms=t)}get copyUniforms(){return this._objRef?.copyUniforms}set blendMaterial(t){this._objRef&&(this._objRef.blendMaterial=t)}get blendMaterial(){return this._objRef?.blendMaterial}set oldClearColor(t){this._objRef&&(this._objRef.oldClearColor=_e(this._objRef.oldClearColor,t))}get oldClearColor(){return this._objRef?.oldClearColor}set oldClearAlpha(t){this._objRef&&(this._objRef.oldClearAlpha=t)}get oldClearAlpha(){return this._objRef?.oldClearAlpha}set basic(t){this._objRef&&(this._objRef.basic=t)}get basic(){return this._objRef?.basic}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-unrealBloomPass"]],inputs:{resolution:"resolution",strength:"strength",radius:"radius",threshold:"threshold",clearColor:"clearColor",renderTargetsHorizontal:"renderTargetsHorizontal",renderTargetsVertical:"renderTargetsVertical",nMips:"nMips",renderTargetBright:"renderTargetBright",highPassUniforms:"highPassUniforms",materialHighPassFilter:"materialHighPassFilter",separableBlurMaterials:"separableBlurMaterials",compositeMaterial:"compositeMaterial",bloomTintColors:"bloomTintColors",copyUniforms:"copyUniforms",blendMaterial:"blendMaterial",oldClearColor:"oldClearColor",oldClearAlpha:"oldClearAlpha",basic:"basic",fsQuad:"fsQuad"},features:[ie([{provide:fi,useExisting:ge(()=>e)}]),q],ngContentSelectors:Hre,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Gre=["*"],QU=(()=>{let e=class e extends pU{constructor(){super(...arguments),this.elementRef=te(et)}getType(){return _f}createThreeInstance(t){return super.createThreeInstance(t??this.elementRef?.nativeElement)}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-cSS2DObject"]],features:[ie([{provide:me,useExisting:ge(()=>e)}]),q],ngContentSelectors:Gre,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0});let n=e;return n})();var $re=["*"],zx=(()=>{let e=class e extends gU{constructor(){super(...arguments),this.elementRef=te(et)}getType(){return gf}createThreeInstance(t){return super.createThreeInstance(t??this.elementRef?.nativeElement)}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-cSS3DObject"]],features:[ie([{provide:me,useExisting:ge(()=>e)}]),q],ngContentSelectors:$re,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0});let n=e;return n})();var qre=["*"],Lf=(()=>{let e=class e extends OU{constructor(t,r){super(t),this.effectComposer=t,this.view=r}createThreeInstance(t){return t||(t=new Array(5)),t[0]=t[0]??this.view.scene,t[1]=t[1]??this.view.camera,t[2]=t[2]??this.overrideMaterial,t[3]=t[3]??this.clearColor,t[4]=t[4]??this.clearAlpha,super.createThreeInstance(t)}ngAfterContentChecked(){this._objRef&&(this.view.scene&&this.view.scene.objRef&&(this._objRef.scene=this.view.scene.objRef),this.view.camera&&this.view.camera.objRef&&(this._objRef.camera=this.view.camera.objRef))}};e.\u0275fac=function(r){return new(r||e)(F(Sa),F(Pr))},e.\u0275cmp=L({type:e,selectors:[["th-renderPass"]],features:[ie([{provide:fi,useExisting:ge(()=>e)}]),q],ngContentSelectors:qre,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Xre=["*"],JU=(()=>{let e=class e extends XU{constructor(t,r,o){super(t,r),this.scene=o,this.objectAdded=()=>{this.objRef&&this.targetObject!=null&&this.targetObject.parent&&this.objRef.attach(this.targetObject)},this.objectRemoved=()=>{this._objRef?.detach()}}getType(){return Of}set object(t){this._objRef&&(this.removeObjectListeners(),this.targetObject=t,this.addObjectListeners(),t?this.objectAdded():this.objectRemoved())}addToParent(){this._objRef&&!this._objRef.parent&&this.scene?.objRef?.add(this._objRef)}removeFromParent(){this._objRef&&this.scene?.objRef?.remove(this._objRef)}ngOnDestroy(){this.removeObjectListeners(),this.objectRemoved(),this.targetObject=void 0}removeObjectListeners(){this.targetObject&&(this.targetObject.removeEventListener("added",this.objectAdded),this.targetObject.removeEventListener("removed",this.objectRemoved))}addObjectListeners(){this.targetObject?.addEventListener("added",this.objectAdded),this.targetObject?.addEventListener("removed",this.objectRemoved)}};e.\u0275fac=function(r){return new(r||e)(F(me),F(It),F(Ut))},e.\u0275cmp=L({type:e,selectors:[["th-transformControls"]],inputs:{object:"object"},features:[ie([{provide:nn,useExisting:ge(()=>e)}]),q],ngContentSelectors:Xre,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var oA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({});let n=e;return n})();var Ea=(()=>{let e=class e{transform(t){return Array.isArray(t)?new pe(...t):new pe(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Bo({name:"color",type:e,pure:!0});let n=e;return n})();var po=new pe,Gx=class extends ir{constructor(e){super(e),this.propertyNameMapping={},this.customPropertyMapping={}}load(e,i,t,r){let o=this,s=new tr(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{i(o.parse(a))}catch(c){r?r(c):console.error(c),o.manager.itemError(e)}},t,r)}setPropertyNameMapping(e){this.propertyNameMapping=e}setCustomPropertyNameMapping(e){this.customPropertyMapping=e}parse(e){function i(g,m=0){let v=/^ply([\s\S]*)end_header(\r\n|\r|\n)/,_="",y=v.exec(g);y!==null&&(_=y[1]);let C={comments:[],elements:[],headerLength:m,objInfo:""},R=_.split(/\r\n|\r|\n/),M;function A(T,x){let I={type:T[0]};return I.type==="list"?(I.name=T[3],I.countType=T[1],I.itemType=T[2]):I.name=T[1],I.name in x&&(I.name=x[I.name]),I}for(let T=0;T<R.length;T++){let x=R[T];if(x=x.trim(),x==="")continue;let I=x.split(/\s+/),V=I.shift();switch(x=I.join(" "),V){case"format":C.format=I[0],C.version=I[1];break;case"comment":C.comments.push(x);break;case"element":M!==void 0&&C.elements.push(M),M={},M.name=I[0],M.count=parseInt(I[1]),M.properties=[];break;case"property":M.properties.push(A(I,b.propertyNameMapping));break;case"obj_info":C.objInfo=x;break;default:console.log("unhandled",V,I)}}return M!==void 0&&C.elements.push(M),C}function t(g,m){switch(m){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(g);case"float":case"double":case"float32":case"float64":return parseFloat(g)}}function r(g,m){let v={};for(let _=0;_<g.length;_++){if(m.empty())return null;if(g[_].type==="list"){let y=[],C=t(m.next(),g[_].countType);for(let R=0;R<C;R++){if(m.empty())return null;y.push(t(m.next(),g[_].itemType))}v[g[_].name]=y}else v[g[_].name]=t(m.next(),g[_].type)}return v}function o(){let g={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[],faceVertexColors:[]};for(let m of Object.keys(b.customPropertyMapping))g[m]=[];return g}function s(g){let m=g.map(_=>_.name);function v(_){for(let y=0,C=_.length;y<C;y++){let R=_[y];if(m.includes(R))return R}return null}return{attrX:v(["x","px","posx"])||"x",attrY:v(["y","py","posy"])||"y",attrZ:v(["z","pz","posz"])||"z",attrNX:v(["nx","normalx"]),attrNY:v(["ny","normaly"]),attrNZ:v(["nz","normalz"]),attrS:v(["s","u","texture_u","tx"]),attrT:v(["t","v","texture_v","ty"]),attrR:v(["red","diffuse_red","r","diffuse_r"]),attrG:v(["green","diffuse_green","g","diffuse_g"]),attrB:v(["blue","diffuse_blue","b","diffuse_b"])}}function a(g,m){let v=o(),_=/end_header\s+(\S[\s\S]*\S|\S)\s*$/,y,C;(C=_.exec(g))!==null?y=C[1].split(/\s+/):y=[];let R=new sA(y);e:for(let M=0;M<m.elements.length;M++){let A=m.elements[M],T=s(A.properties);for(let x=0;x<A.count;x++){let I=r(A.properties,R);if(!I)break e;l(v,A.name,I,T)}}return c(v)}function c(g){let m=new bt;g.indices.length>0&&m.setIndex(g.indices),m.setAttribute("position",new qe(g.vertices,3)),g.normals.length>0&&m.setAttribute("normal",new qe(g.normals,3)),g.uvs.length>0&&m.setAttribute("uv",new qe(g.uvs,2)),g.colors.length>0&&m.setAttribute("color",new qe(g.colors,3)),(g.faceVertexUvs.length>0||g.faceVertexColors.length>0)&&(m=m.toNonIndexed(),g.faceVertexUvs.length>0&&m.setAttribute("uv",new qe(g.faceVertexUvs,2)),g.faceVertexColors.length>0&&m.setAttribute("color",new qe(g.faceVertexColors,3)));for(let v of Object.keys(b.customPropertyMapping))g[v].length>0&&m.setAttribute(v,new qe(g[v],b.customPropertyMapping[v].length));return m.computeBoundingSphere(),m}function l(g,m,v,_){if(m==="vertex"){g.vertices.push(v[_.attrX],v[_.attrY],v[_.attrZ]),_.attrNX!==null&&_.attrNY!==null&&_.attrNZ!==null&&g.normals.push(v[_.attrNX],v[_.attrNY],v[_.attrNZ]),_.attrS!==null&&_.attrT!==null&&g.uvs.push(v[_.attrS],v[_.attrT]),_.attrR!==null&&_.attrG!==null&&_.attrB!==null&&(po.setRGB(v[_.attrR]/255,v[_.attrG]/255,v[_.attrB]/255).convertSRGBToLinear(),g.colors.push(po.r,po.g,po.b));for(let y of Object.keys(b.customPropertyMapping))for(let C of b.customPropertyMapping[y])g[y].push(v[C])}else if(m==="face"){let y=v.vertex_indices||v.vertex_index,C=v.texcoord;y.length===3?(g.indices.push(y[0],y[1],y[2]),C&&C.length===6&&(g.faceVertexUvs.push(C[0],C[1]),g.faceVertexUvs.push(C[2],C[3]),g.faceVertexUvs.push(C[4],C[5]))):y.length===4&&(g.indices.push(y[0],y[1],y[3]),g.indices.push(y[1],y[2],y[3])),_.attrR!==null&&_.attrG!==null&&_.attrB!==null&&(po.setRGB(v[_.attrR]/255,v[_.attrG]/255,v[_.attrB]/255).convertSRGBToLinear(),g.faceVertexColors.push(po.r,po.g,po.b),g.faceVertexColors.push(po.r,po.g,po.b),g.faceVertexColors.push(po.r,po.g,po.b))}}function d(g,m){let v={},_=0;for(let y=0;y<m.length;y++){let C=m[y],R=C.valueReader;if(C.type==="list"){let M=[],A=C.countReader.read(g+_);_+=C.countReader.size;for(let T=0;T<A;T++)M.push(R.read(g+_)),_+=R.size;v[C.name]=M}else v[C.name]=R.read(g+_),_+=R.size}return[v,_]}function u(g,m,v){function _(y,C,R){switch(C){case"int8":case"char":return{read:M=>y.getInt8(M),size:1};case"uint8":case"uchar":return{read:M=>y.getUint8(M),size:1};case"int16":case"short":return{read:M=>y.getInt16(M,R),size:2};case"uint16":case"ushort":return{read:M=>y.getUint16(M,R),size:2};case"int32":case"int":return{read:M=>y.getInt32(M,R),size:4};case"uint32":case"uint":return{read:M=>y.getUint32(M,R),size:4};case"float32":case"float":return{read:M=>y.getFloat32(M,R),size:4};case"float64":case"double":return{read:M=>y.getFloat64(M,R),size:8}}}for(let y=0,C=g.length;y<C;y++){let R=g[y];R.type==="list"?(R.countReader=_(m,R.countType,v),R.valueReader=_(m,R.itemType,v)):R.valueReader=_(m,R.type,v)}}function h(g,m){let v=o(),_=m.format==="binary_little_endian",y=new DataView(g,m.headerLength),C,R=0;for(let M=0;M<m.elements.length;M++){let A=m.elements[M],T=A.properties,x=s(T);u(T,y,_);for(let I=0;I<A.count;I++){C=d(R,T),R+=C[1];let V=C[0];l(v,A.name,V,x)}}return c(v)}function f(g){let m=0,v=!0,_="",y=[],C=new TextDecoder().decode(g.subarray(0,5)),R=/^ply\r\n/.test(C);do{let M=String.fromCharCode(g[m++]);M!==`
`&&M!=="\r"?_+=M:(_==="end_header"&&(v=!1),_!==""&&(y.push(_),_=""))}while(v&&m<g.length);return R===!0&&m++,{headerText:y.join("\r")+"\r",headerLength:m}}let p,b=this;if(e instanceof ArrayBuffer){let g=new Uint8Array(e),{headerText:m,headerLength:v}=f(g),_=i(m,v);if(_.format==="ascii"){let y=new TextDecoder().decode(g);p=a(y,_)}else p=h(e,_)}else p=a(e,i(e));return p}},sA=class{constructor(e){this.arr=e,this.i=0}empty(){return this.i>=this.arr.length}next(){return this.arr[this.i++]}};var Zre=(()=>{let e=class e extends xf{constructor(){super(...arguments),this.clazz=Gx}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var eV=(()=>{let e=class e extends wf{constructor(t,r,o){super(t,r),this.host=t,this.zone=r,this.service=o}getRefFromResponse(t){return t.computeVertexNormals(),t}load(){return gi(this,null,function*(){if(!this.initialized)return;if(this._url===void 0)throw new Error("missing url");let t=this._url,r=ml(this.onProgress$)?s=>{this.onProgress$?.next(s)}:void 0,o=yield this.zone.runOutsideAngular(()=>this.service.load(t,r));this.host.objRef=this.getRefFromResponse(o),this.onLoaded$&&o!==void 0&&this.onLoaded$?.next(o)})}};e.\u0275fac=function(r){return new(r||e)(F(ni,1),F(Qe),F(Zre))},e.\u0275dir=$e({type:e,selectors:[["","loadPLY",""]],features:[q]});let n=e;return n})();var Kre=["outerRef"],Jre=["innerRef"],eoe=["*"];function toe(n,e){n&1&&Ju(0)}function ioe(n,e){if(n&1){let i=Zt();H(0,"div",5,2),Le("onResize",function(){ht(i);let r=qt();return ft(r.onResize())}),H(2,"div",6,3)(4,"div",7),Vt(5,toe,1,0,"ng-container",8),J()()()}if(n&2){let i=qt(),t=At(4);P("ngStyle",i.styles),j(2),P("ngStyle",i.transformInnerStyles),j(2),X_(i.style),P("className",i.className),j(),P("ngTemplateOutlet",t)}}function noe(n,e){n&1&&Ju(0)}function roe(n,e){if(n&1&&(H(0,"div",9,2),Vt(2,noe,1,0,"ng-container",8),J()),n&2){let i=qt(),t=At(4);P("ngStyle",i.styles)("className",i.className),j(2),P("ngTemplateOutlet",t)}}function ooe(n,e){n&1&&Q(0)}var Ng=new S,lA=new S,soe=new S;function aoe(n,e,i){let t=Ng.setFromMatrixPosition(n.matrixWorld);t.project(e);let r=i.width/2,o=i.height/2;return[t.x*r+r,-(t.y*o)+o]}function coe(n,e){let i=Ng.setFromMatrixPosition(n.matrixWorld),t=lA.setFromMatrixPosition(e.matrixWorld),r=i.sub(t),o=e.getWorldDirection(soe);return r.angleTo(o)>Math.PI/2}function loe(n,e,i,t){let r=Ng.setFromMatrixPosition(n.matrixWorld),o=r.clone();o.project(e),i.setFromCamera(o,e);let s=i.intersectObjects(t,!0);if(s.length){let a=s[0].distance;return r.distanceTo(i.ray.origin)<a}return!0}function doe(n,e){if(e instanceof Do)return e.zoom;if(e instanceof en){let i=Ng.setFromMatrixPosition(n.matrixWorld),t=lA.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,o=i.distanceTo(t);return 1/(2*Math.tan(r/2)*o)}else return 1}function uoe(n,e,i){if(e instanceof en||e instanceof Do){let t=Ng.setFromMatrixPosition(n.matrixWorld),r=lA.setFromMatrixPosition(e.matrixWorld),o=t.distanceTo(r),s=(i[1]-i[0])/(e.far-e.near),a=i[1]-s*e.far;return Math.round(s*o+a)}}var cA=n=>Math.abs(n)<1e-10?0:n;function tV(n,e,i=""){let t="matrix3d(";for(let r=0;r!==16;r++)t+=cA(e[r]*n.elements[r])+(r!==15?",":")");return i+t}var hoe=(n=>e=>tV(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),foe=(n=>(e,i)=>tV(e,n(i),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]),iV=(()=>{let e=class e extends Cl{constructor(t,r){super(r),this.view=t,this.DoubleSide=Kn,this.FRAGMENT_SHADER=poe,this.VERTEX_SHADER=moe,this.prepend=!1,this.center=!1,this.fullscreen=!1,this.eps=.001,this.sprite=!1,this.transform=!1,this.zIndexRange=[16777271,0],this.onOcclude=new nt,this.calculatePosition=aoe,this.as="div",this.pointerEvents="auto",this.transformInnerStyles=this.computeInnerStyles(),this.styles=null,this.oldZoom=0,this.oldPosition=[0,0],this.notOccluded=!0,this.raycaster=te(Zd)}ngOnInit(){super.ngOnInit(),this.styles=this.computeStyles()}ngAfterViewInit(){this.el=document.createElement(this.as),this.frameSubscription=this.view.onRender.subscribe(()=>this.onFrame()),this.transformOuterRef&&this.el.appendChild(this.transformOuterRef.nativeElement),this.el&&!this.target&&this.appendElement(this.el)}onResize(){this.styles=this.computeStyles()}ngOnChanges(t){super.ngOnChanges(t)}appendElement(t){if(!(!this.el||!this.objRef||!this.view.hostElement||!this.view.camera)){if(this.target=this.portal??this.view.hostElement.nativeElement,this.view.scene?.objRef?.updateMatrixWorld(),this.transform)t.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{let r=this.calculatePosition(this.objRef,this.view.camera.objRef,this.getSize());t.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${r[0]}px,${r[1]}px,0);transform-origin:0 0;`}this.target&&(this.prepend?this.target.prepend(t):this.target.appendChild(t))}}onFrame(){let t=this.view.camera?.objRef,r=this.view.scene?.objRef,o=this._objRef,s=this.getSize();if(!t||!o||!r||!this.el)return;t.updateMatrixWorld(),o.updateWorldMatrix(!0,!1);let a=this.transform?this.oldPosition:this.calculatePosition(o,t,s);if(this.transform||Math.abs(this.oldZoom-t.zoom)>this.eps||Math.abs(this.oldPosition[0]-a[0])>this.eps||Math.abs(this.oldPosition[1]-a[1])>this.eps){let c=coe(o,t),l=!1;typeof this.occlude=="boolean"?this.occlude===!0&&(l=[r]):Array.isArray(this.occlude)&&(l=this.occlude.map(u=>u.objRef??u));let d=this.notOccluded;if(l?this.notOccluded=!c&&loe(o,t,this.raycaster,l):this.notOccluded=!c,d!==this.notOccluded&&(this.onOcclude.length>0?this.onOcclude.next(!this.notOccluded):this.el.style.display=this.notOccluded?"block":"none"),this.el.style.zIndex=`${uoe(o,t,this.zIndexRange)}`,this.transform){let[u,h]=[s.width/2,s.height/2],f=t.projectionMatrix.elements[5]*h,{isOrthographicCamera:p,top:b,left:g,bottom:m,right:v}=t,_=hoe(t.matrixWorldInverse),y=p?`scale(${f})translate(${cA(-(v+g)/2)}px,${cA((b+m)/2)}px)`:`translateZ(${f}px)`,C=o.matrixWorld;this.sprite&&(C=t.matrixWorldInverse.clone().transpose().copyPosition(C).scale(o.scale),C.elements[3]=C.elements[7]=C.elements[11]=0,C.elements[15]=1),this.el.style.width=s.width+"px",this.el.style.height=s.height+"px",this.el.style.perspective=p?"":`${f}px`,this.transformOuterRef&&this.transformInnerRef&&(this.transformOuterRef.nativeElement.style.transform=`${y}${_}translate(${u}px,${h}px)`,this.transformInnerRef.nativeElement.style.transform=foe(C,1/((this.distanceFactor||10)/400)))}else{let u=this.distanceFactor===void 0?1:doe(o,t)*this.distanceFactor;this.el.style.transform=`translate3d(${a[0]}px,${a[1]}px,0) scale(${u})`}this.oldPosition=a,this.oldZoom=t.zoom}}ngOnDestroy(){this.el?.remove(),this.frameSubscription?.unsubscribe()}computeStyles(){let t=this.getSize();return this.transform?{position:"absolute",top:0,left:0,width:t.width+"px",height:t.height+"px",transformStyle:"preserve-3d",pointerEvents:"none"}:ve(ve({position:"absolute",transform:this.center?"translate3d(-50%,-50%,0)":"none"},this.fullscreen&&{top:-t.height/2+"px",left:-t.width/2+"px",width:t.width+"px",height:t.height+"px"}),this.style)}computeInnerStyles(){return{position:"absolute",pointerEvents:this.pointerEvents}}getSize(){return this.view.viewPort??this.view.hostElement.nativeElement.getBoundingClientRect()??{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(F(Pr),F(me,4))},e.\u0275cmp=L({type:e,selectors:[["th-html"]],viewQuery:function(r,o){if(r&1&&(Xt(Kre,5),Xt(Jre,5)),r&2){let s;at(s=ct())&&(o.transformOuterRef=s.first),at(s=ct())&&(o.transformInnerRef=s.first)}},inputs:{prepend:"prepend",center:"center",fullscreen:"fullscreen",portal:"portal",distanceFactor:"distanceFactor",sprite:"sprite",transform:"transform",zIndexRange:"zIndexRange",style:"style",className:"className",occlude:"occlude",calculatePosition:"calculatePosition",as:"as",wrapperClass:"wrapperClass",pointerEvents:"pointerEvents"},outputs:{onOcclude:"onOcclude"},features:[q,Hn],ngContentSelectors:eoe,decls:5,vars:2,consts:[["noTransform",""],["tempOutlet",""],["outerRef",""],["innerRef",""],[3,"ngStyle","onResize",4,"ngIf","ngIfElse"],[3,"onResize","ngStyle"],[3,"ngStyle"],[3,"className"],[4,"ngTemplateOutlet"],[3,"ngStyle","className"]],template:function(r,o){if(r&1&&(ae(),Vt(0,ioe,6,6,"div",4)(1,roe,3,3,"ng-template",null,0,Rm)(3,ooe,1,0,"ng-template",null,1,Rm)),r&2){let s=At(2);P("ngIf",o.transform)("ngIfElse",s)}},dependencies:[oh,dv,aO,vl],encapsulation:2,changeDetection:0});let n=e;return n})(),moe=`
/*
  This shader is from the THREE's SpriteMaterial.
  We need to turn the backing plane into a Sprite
  (make it always face the camera) if "transfrom" 
  is false. 
*/
#include <common>
void main() {
  vec2 center = vec2(0., 1.);
  float rotation = 0.0;
  
  // This is somewhat arbitrary, but it seems to work well
  // Need to figure out how to derive this dynamically if it even matters
  float size = 0.03;
  vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
  bool isPerspective = isPerspectiveMatrix( projectionMatrix );
  if ( isPerspective ) scale *= - mvPosition.z;
  vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
  rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
  mvPosition.xy += rotatedPosition;
  gl_Position = projectionMatrix * mvPosition;
}
`,poe=`
void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
}
`;var Bf=(()=>{let e=class e{constructor(t,r){this.host=t,this.parent=r,this.host.autoAddToParent=!1,this.host.autoDispose=!1,this.host.objRef=Vy()}set refById(t){this.id=t,this.subscription?.unsubscribe(),this.subscription=this.parent.objRef$.subscribe(r=>{this.parentObj=r,this.applyRef()})}applyRef(){if(!this.parentObj||this.id===void 0)return;let t=this.findById(this.parentObj,this.id);t&&this.setRef(this.host,t)}findById(t,r){if((t.name??t.uuid)===r)return t;for(let o of t.children){let s=this.findById(o,r);if(s!==void 0)return s}}setRef(t,r){let o=t.objRef;o&&rg(o)&&(o.objRef=r,t.objRef=o)}ngOnDestroy(){this.subscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(F(me,2),F(me,4))},e.\u0275dir=$e({type:e,selectors:[["","refById",""]],inputs:{refById:"refById"}});let n=e;return n})();var nV=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({imports:[oA,Go,oA]});let n=e;return n})();function rV(n){return[{provide:me,useExisting:ge(()=>n)}]}var uA=n=>[0,n,0],boe=()=>[0,1,0],_oe=()=>({background:"lightblue",borderRadius:"1em",padding:"1em",display:"flex",flexDirection:"column"}),oV=n=>[n,0,0],voe=n=>[0,.039,n],yoe=()=>[.17,.17,.17],xoe=()=>[4,10,2],woe=()=>[100,100],Moe=()=>[55,2,.1,100],Soe=(n,e)=>[n,0,e],Roe=()=>[0,0,0],sV=(()=>{let e=class e{constructor(t){this.Math=Math,this.sprite=!1,this.glbPath=`${an}mac-draco.glb`,this.clock=new ao(!0),this.plane=new lr(new S(0,1,0),3),this.rotation=[0,0,0],this.position=[0,0,0],t.setDecoderPath("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/jsm/libs/draco/gltf/"),t.setCrossOrigin("no-cors"),this.calcPose()}onBeforeRender(){this.calcPose()}calcPose(){let t=this.clock.getElapsedTime();this.rotation=[st.lerp(this.rotation[0],Math.cos(t/2)/20+.25,.1),st.lerp(this.rotation[1],Math.sin(t/4)/20,.1),st.lerp(this.rotation[2],Math.sin(t/8)/20,.1)],this.position=[0,st.lerp(this.position[1],(-2+Math.sin(t/2))/2,.1),0]}};e.\u0275fac=function(r){return new(r||e)(F(_l))},e.\u0275cmp=L({type:e,selectors:[["app-html-example"]],decls:17,vars:57,consts:[["light",""],[3,"onRender","thStats","shadow"],[3,"intensity"],[3,"rotation","position"],["loadGLTF","",3,"castShadow","url","position","rotation"],[3,"refById"],[3,"rotation","position","scale","sprite","transform","occlude"],["src",O_`./multi-view-postprocessing-example`,2,"width","1960px","height","1280px"],[3,"castShadow","position","lookAt","color","intensity"],[3,"receiveShadow","rotation","position"],[3,"args"],[3,"color"],[3,"args","position","lookAt"]],template:function(r,o){if(r&1){let s=Zt();H(0,"th-canvas",1),Le("onRender",function(){return ht(s),ft(o.onBeforeRender())}),H(1,"th-scene"),fe(2,"th-ambientLight",2),H(3,"th-group",3)(4,"th-object3D",4)(5,"th-mesh",5)(6,"th-html",6),fe(7,"iframe",7),J()()()(),fe(8,"th-directionalLight",8,0),Fi(10,"color"),H(11,"th-mesh",9),fe(12,"th-planeGeometry",10)(13,"th-meshBasicMaterial",11),Fi(14,"color"),J(),H(15,"th-perspectiveCamera",12),fe(16,"th-orbitControls"),J()()()}r&2&&(P("thStats",!0)("shadow",!0),j(2),P("intensity",3),j(),P("rotation",vt(35,uA,o.Math.PI))("position",K(37,boe)),j(),P("castShadow",!0)("url",o.glbPath)("position",o.position)("rotation",o.rotation),j(),P("refById","Cube008_2"),j(),X_(K(38,_oe)),P("rotation",vt(39,oV,-1*o.Math.PI/2))("position",vt(41,voe,-.5))("scale",K(43,yoe))("sprite",o.sprite)("transform",!0)("occlude",!0),j(2),P("castShadow",!0)("position",K(44,xoe))("lookAt",vt(45,uA,-3))("color",Gi(10,31,"#ffffff"))("intensity",2),j(3),P("receiveShadow",!0)("rotation",vt(47,oV,3*o.Math.PI/2))("position",vt(49,uA,-3)),j(),P("args",K(51,woe)),j(),P("color",Gi(14,33,"#efefef")),j(2),P("args",K(52,Moe))("position",$n(53,Soe,-5,-15))("lookAt",K(56,Roe)))},dependencies:[In,Qt,me,Di,dr,Cl,Ti,Ut,_a,Xo,It,Yn,An,Bf,iV,Ea],encapsulation:2,changeDetection:0});let n=e;return n})();var Y5e=.5*(Math.sqrt(3)-1),Z5e=(3-Math.sqrt(3))/6,Toe=1/3,Da=1/6,Q5e=(Math.sqrt(5)-1)/4,K5e=(5-Math.sqrt(5))/20,hA=n=>Math.floor(n)|0;var fA=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function aV(n=Math.random){let e=Coe(n),i=new Float64Array(e).map(o=>fA[o%12*3]),t=new Float64Array(e).map(o=>fA[o%12*3+1]),r=new Float64Array(e).map(o=>fA[o%12*3+2]);return function(s,a,c){let l,d,u,h,f=(s+a+c)*Toe,p=hA(s+f),b=hA(a+f),g=hA(c+f),m=(p+b+g)*Da,v=p-m,_=b-m,y=g-m,C=s-v,R=a-_,M=c-y,A,T,x,I,V,W;C>=R?R>=M?(A=1,T=0,x=0,I=1,V=1,W=0):C>=M?(A=1,T=0,x=0,I=1,V=0,W=1):(A=0,T=0,x=1,I=1,V=0,W=1):R<M?(A=0,T=0,x=1,I=0,V=1,W=1):C<M?(A=0,T=1,x=0,I=0,V=1,W=1):(A=0,T=1,x=0,I=1,V=1,W=0);let ee=C-A+Da,ne=R-T+Da,B=M-x+Da,G=C-I+2*Da,U=R-V+2*Da,se=M-W+2*Da,Te=C-1+3*Da,Ie=R-1+3*Da,Ze=M-1+3*Da,yt=p&255,Z=b&255,Ce=g&255,We=.6-C*C-R*R-M*M;if(We<0)l=0;else{let Ue=yt+e[Z+e[Ce]];We*=We,l=We*We*(i[Ue]*C+t[Ue]*R+r[Ue]*M)}let N=.6-ee*ee-ne*ne-B*B;if(N<0)d=0;else{let Ue=yt+A+e[Z+T+e[Ce+x]];N*=N,d=N*N*(i[Ue]*ee+t[Ue]*ne+r[Ue]*B)}let xe=.6-G*G-U*U-se*se;if(xe<0)u=0;else{let Ue=yt+I+e[Z+V+e[Ce+W]];xe*=xe,u=xe*xe*(i[Ue]*G+t[Ue]*U+r[Ue]*se)}let Ne=.6-Te*Te-Ie*Ie-Ze*Ze;if(Ne<0)h=0;else{let Ue=yt+1+e[Z+1+e[Ce+1]];Ne*=Ne,h=Ne*Ne*(i[Ue]*Te+t[Ue]*Ie+r[Ue]*Ze)}return 32*(l+d+u+h)}}function Coe(n){let i=new Uint8Array(512);for(let t=0;t<512/2;t++)i[t]=t;for(let t=0;t<512/2-1;t++){let r=t+~~(n()*(256-t)),o=i[t];i[t]=i[r],i[r]=o}for(let t=256;t<512;t++)i[t]=i[t-256];return i}var Eoe=["canvas"],Doe=["light"],Aoe=["instancedMesh"],Ioe=()=>[0,0,30],Poe=()=>[0,0,0],koe=()=>["#808080"],Foe=n=>[void 0,void 0,n],joe=(n,e,i)=>[n,e,i],cV=()=>["#9C1E15"],Ooe=n=>[0,0,n],Noe=(n,e)=>[n,e],lV=(()=>{let e=class e{constructor(){this.SIZE=1.5,this.NX=20,this.NY=20,this.PADDING=1,this.SIZEP=this.SIZE+this.PADDING,this.W=this.NX*this.SIZEP-this.PADDING,this.H=this.NY*this.SIZEP-this.PADDING,this.NUM_INSTANCES=this.NX*this.NY,this.dummy=new Tt,this.simplexNoise=aV(),this.pointerPN={x:0,y:0}}ngOnInit(){this.light?.shadow&&(this.light.shadow.mapSize.width=1024,this.light.shadow.mapSize.height=1024)}onRender(){this.updateLightPosition(),this.updateInstanceMatrix()}updateLightPosition(){let t=this.light?.position;t&&(t.x=this.pointerPN.x*this.W,t.y=this.pointerPN.y*this.H)}updateInstanceMatrix(){if(!this.instancedMesh||!this.instancedMesh.objRef)return;let t=-this.W/2+this.PADDING,r=-this.H/2+this.PADDING,o=Date.now()*1e-4,s=this.pointerPN.x*.1,a=this.pointerPN.y*.1,c=.005,l,d,u,h,f,p;for(let b=0;b<this.NX;b++)for(let g=0;g<this.NY;g++)l=t+b*this.SIZEP,d=r+g*this.SIZEP,u=l*c+s,h=d*c+a,f=this.simplexNoise(u,h,o)*Math.PI,p=this.simplexNoise(h,u,o)*Math.PI,this.dummy.position.set(l,d,-10),this.dummy.rotation.set(f,p,0),this.dummy.updateMatrix(),this.instancedMesh?.objRef?.setMatrixAt(b*this.NY+g,this.dummy.matrix);this.instancedMesh.objRef.instanceMatrix.needsUpdate=!0}onMouseMove(t){if(!this.canvas||!this.canvas.hostElement.nativeElement)return;let r=this.canvas.hostElement.nativeElement;this.pointerPN.x=(t.clientX-r.offsetLeft+window.scrollX)/r.clientWidth*2-1,this.pointerPN.y=-((t.clientY-r.offsetTop+window.scrollY)/r.clientHeight)*2+1}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-instanced-mesh-example"]],viewQuery:function(r,o){if(r&1&&(Xt(Eoe,5),Xt(Doe,5),Xt(Aoe,5)),r&2){let s;at(s=ct())&&(o.canvas=s.first),at(s=ct())&&(o.light=s.first),at(s=ct())&&(o.instancedMesh=s.first)}},hostBindings:function(r,o){r&1&&Le("mousemove",function(a){return o.onMouseMove(a)},!1,Zu)},decls:15,vars:34,consts:[["canvas",""],["light",""],["instancedMesh",""],[3,"onRender","shadow"],[3,"position","lookAt"],[3,"intensity","color"],[3,"castShadow","intensity","decay"],[3,"args","count","castShadow","receiveShadow"],[3,"args"],[3,"color"],[3,"position","receiveShadow"]],template:function(r,o){if(r&1){let s=Zt();H(0,"th-canvas",3,0),Le("onRender",function(){return ht(s),ft(o.onRender())}),H(2,"th-scene")(3,"th-perspectiveCamera",4),fe(4,"th-orbitControls"),J(),fe(5,"th-ambientLight",5)(6,"th-pointLight",6,1),H(8,"th-instancedMesh",7,2),fe(10,"th-boxGeometry",8)(11,"th-meshPhongMaterial",9),J(),H(12,"th-mesh",10),fe(13,"th-planeGeometry",8)(14,"th-meshPhongMaterial",9),J()()()}r&2&&(P("shadow",!0),j(3),P("position",K(18,Ioe))("lookAt",K(19,Poe)),j(2),P("intensity",3)("color",K(20,koe)),j(),P("castShadow",!0)("intensity",3)("decay",0),j(2),P("args",vt(21,Foe,o.NUM_INSTANCES))("count",o.NUM_INSTANCES)("castShadow",!0)("receiveShadow",!0),j(2),P("args",qs(23,joe,o.SIZE,o.SIZE,o.SIZE)),j(),P("color",K(27,cV)),j(),P("position",vt(28,Ooe,-10-o.SIZE))("receiveShadow",!0),j(),P("args",$n(30,Noe,o.W*2,o.H*2)),j(),P("color",K(33,cV)))},dependencies:[In,Qt,Di,ur,IU,Ti,Ut,lo,Jd,Xo,It],encapsulation:2,changeDetection:0});let n=e;return n})();var Loe=()=>[2,2,2],Boe=()=>[1,1,1],Uoe=()=>({color:"purple"}),Voe=n=>[n,0,0],zoe=()=>[2,0,0],Hoe=()=>[75,2,.1,1e3],Goe=()=>[1,1,5],Woe=(()=>{let e=class e{constructor(){this.selected=!1,this.rotation=[0,0,0],this.position=[0,0,0]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-box"]],inputs:{rotation:"rotation",position:"position"},decls:3,vars:7,consts:[[3,"onClick","rotation","position","scale"],[3,"args"]],template:function(r,o){r&1&&(H(0,"th-mesh",0),Le("onClick",function(){return o.selected=!o.selected}),fe(1,"th-boxGeometry")(2,"th-meshBasicMaterial",1),J()),r&2&&(P("rotation",o.rotation)("position",o.position)("scale",o.selected?K(4,Loe):K(5,Boe)),j(2),P("args",K(6,Uoe)))},dependencies:[Ti,_a,Jd,Zo],encapsulation:2,changeDetection:0});let n=e;return n})(),dV=(()=>{let e=class e{constructor(){this.rotation=[0,0,0]}onBeforeRender(){this.rotation=[0,this.rotation[2]+.01,this.rotation[2]+.01]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-introductory-example"]],decls:6,vars:11,consts:[[3,"onRender"],[3,"position","rotation"],[3,"args","position"]],template:function(r,o){r&1&&(H(0,"th-canvas",0),Le("onRender",function(){return o.onBeforeRender()}),H(1,"th-scene"),fe(2,"app-box",1)(3,"app-box",1)(4,"th-ambientLight")(5,"th-perspectiveCamera",2),J()()),r&2&&(j(2),P("position",vt(6,Voe,-2))("rotation",o.rotation),j(),P("position",K(8,zoe))("rotation",o.rotation),j(2),P("args",K(9,Hoe))("position",K(10,Goe)))},dependencies:[Qt,Di,Ut,It,Woe],encapsulation:2,changeDetection:0});let n=e;return n})();var $oe=()=>[0,1,0],qoe=()=>[100,100,100],Xoe=n=>[0,0,n],Yoe=()=>[10,10],uV=()=>[10,10,10],Zoe=()=>[45,2,.1,100],Qoe=()=>[0,0,0],hV=(()=>{let e=class e{constructor(){this.assetPath1=`${an}DamagedHelmet.glb`,this.assetPath2=`${an}BoomBox.glb`,this.rotation=[0,0,0]}onBeforeRender(){this.rotation=[0,this.rotation[1]+.01,0]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-loader-example"]],decls:8,vars:24,consts:[[3,"onRender"],[3,"thStats"],[3,"intensity"],["loadGLTF","",3,"url","rotation","position"],["loadGLTF","",3,"url","scale","rotation","position"],[3,"args"],[3,"position","decay"],[3,"args","position","lookAt"]],template:function(r,o){r&1&&(H(0,"th-canvas",0),Le("onRender",function(){return o.onBeforeRender()}),H(1,"th-scene",1),fe(2,"th-ambientLight",2),H(3,"th-object3D",3),fe(4,"th-object3D",4),J(),fe(5,"th-gridHelper",5)(6,"th-pointLight",6)(7,"th-perspectiveCamera",7),J()()),r&2&&(j(),P("thStats",!0),j(),P("intensity",3),j(),P("url",o.assetPath1)("rotation",o.rotation)("position",K(15,$oe)),j(),P("url",o.assetPath2)("scale",K(16,qoe))("rotation",o.rotation)("position",vt(17,Xoe,-3)),j(),P("args",K(19,Yoe)),j(),P("position",K(20,uV))("decay",0),j(),P("args",K(21,Zoe))("position",K(22,uV))("lookAt",K(23,Qoe)))},dependencies:[Qt,me,Ir,Di,ur,Ut,It,Yn,An],encapsulation:2,changeDetection:0});let n=e;return n})();var Koe=["slider"],Joe=()=>[35,2,.1,100],ese=()=>[0,0,6],tse=(n,e)=>({x:0,y:0,width:n,height:e}),ise=()=>["#ffffff","#444444",1],nse=n=>[n,2,2],rse=()=>[1,3],ose=(n,e,i)=>({x:n,y:0,width:e,height:i}),fV=(()=>{let e=class e{constructor(){this.sliderPos=0,this.controlsEnabled=!0,this.colorLeft=new pe(12375183),this.colorRight=new pe(9419988)}ngOnInit(){!this.slider||!this.canvas||!this.canvas.rendererCanvas||(this.slider.nativeElement.style.touchAction="none",this.sliderPos=(this.canvas.rendererCanvas.clientWidth||0)/2)}onPointerMove(t){if(this.controlsEnabled||!this.canvas||!this.canvas.rendererCanvas||!this.slider||t.isPrimary===!1)return;let o=this.canvas.rendererCanvas.getBoundingClientRect();this.sliderPos=Math.max(o.left,Math.min(o.right,t.pageX))-o.left,this.slider.nativeElement.style.left=this.sliderPos-this.slider.nativeElement.offsetWidth/2+"px"}onPointerUp(){this.controlsEnabled=!0}onSliderPointerDown(t){t.isPrimary!==!1&&(this.controlsEnabled=!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-multi-scene-example"]],viewQuery:function(r,o){if(r&1&&(Xt(Koe,7),Xt(It,7)),r&2){let s;at(s=ct())&&(o.slider=s.first),at(s=ct())&&(o.canvas=s.first)}},hostBindings:function(r,o){r&1&&Le("pointermove",function(a){return o.onPointerMove(a)},!1,BS)("pointerup",function(){return o.onPointerUp()},!1,BS)},decls:20,vars:33,consts:[["slider",""],["thecanvas",""],["cam",""],["light",""],["geo",""],[1,"slider",3,"pointerdown"],[3,"disableDefaultView"],[3,"args","position"],[3,"scissor","scissorTest","clearColor","camera"],[3,"background"],[3,"args","position","intensity"],[3,"args"],[3,"objRef"],[3,"geometry"],[3,"wireframe"]],template:function(r,o){if(r&1){let s=Zt();H(0,"div",5,0),Le("pointerdown",function(c){return ht(s),ft(o.onSliderPointerDown(c))}),J(),H(2,"th-canvas",6,1)(4,"th-perspectiveCamera",7,2),fe(6,"th-orbitControls"),J(),H(7,"th-view",8)(8,"th-scene",9),fe(9,"th-hemisphereLight",10,3),H(11,"th-mesh"),fe(12,"th-meshStandardMaterial")(13,"th-icosahedronGeometry",11,4),J()()(),H(15,"th-view",8)(16,"th-scene",9),fe(17,"th-hemisphereLight",12),H(18,"th-mesh",13),fe(19,"th-meshStandardMaterial",14),J()()()()}if(r&2){let s=At(3),a=At(5),c=At(10),l=At(14);j(2),P("disableDefaultView",!0),j(2),P("args",K(20,Joe))("position",K(21,ese)),j(3),P("scissor",$n(22,tse,o.sliderPos,(s.rendererCanvas==null?null:s.rendererCanvas.height)||0))("scissorTest",!0)("clearColor",o.colorLeft)("camera",a),j(),P("background",o.colorLeft),j(),P("args",K(25,ise))("position",vt(26,nse,-2))("intensity",3),j(4),P("args",K(28,rse)),j(2),P("scissor",qs(29,ose,o.sliderPos,(s.rendererCanvas==null?null:s.rendererCanvas.width)||0,(s.rendererCanvas==null?null:s.rendererCanvas.height)||0))("scissorTest",!0)("clearColor",o.colorRight)("camera",a),j(),P("background",o.colorRight),j(),P("objRef",c.objRef==null?null:c.objRef.clone()),j(),P("geometry",l.objRef),j(),P("wireframe",!0)}},dependencies:[In,Qt,hf,Ti,Ut,Rg,AU,It,Pr],styles:[".container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.slider[_ngcontent-%COMP%]{position:absolute;cursor:ew-resize;width:40px;height:40px;background-color:#f32196;opacity:.7;border-radius:50%;top:calc(50% - 20px);left:calc(50% - 20px)}"],changeDetection:0});let n=e;return n})();var $x={name:"RGBShiftShader",uniforms:{tDiffuse:{value:null},amount:{value:.005},angle:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float amount;
		uniform float angle;

		varying vec2 vUv;

		void main() {

			vec2 offset = amount * vec2( cos(angle), sin(angle));
			vec4 cr = texture2D(tDiffuse, vUv + offset);
			vec4 cga = texture2D(tDiffuse, vUv);
			vec4 cb = texture2D(tDiffuse, vUv - offset);
			gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);

		}`};var sse=["thecanvas"],ase=(n,e)=>({x:0,y:0,width:n,height:e}),cse=()=>[0,0,1],lse=()=>["#ffffff"],dse=()=>[0,0,0],qx=n=>[n,0,0],use=()=>[200,32,16],hse=()=>["#fac400"],fse=()=>["#f83f0d"],mse=()=>[400,0,0],mA=(n,e,i,t)=>({x:n,y:e,width:i,height:t}),pse=n=>[n],gse=()=>({value:.055}),bse=n=>({amount:n}),_se=()=>[.35,.5,2048,!0],mV=(()=>{let e=class e{constructor(){this.Math=Math,this.RGBShiftShader=$x,this.DotScreenShader=Mx,this.canvasWidth=128,this.canvasHeight=128,this.mouseX=0,this.mouseY=0,this.view1={left:0,bottom:0,width:.5,height:1,background:new pe(.5,.5,.7),eye:[0,300,1800],up:[0,1,0],fov:30,updateCamera:(t,r)=>{this.updateSize(),t.position.x+=this.mouseX*.05,t.position.x=Math.max(Math.min(t.position.x,2e3),-2e3),t.lookAt(r.position),t.updateProjectionMatrix()}},this.view2={left:.5,bottom:0,width:.5,height:.5,background:new pe(.7,.5,.5),eye:[0,1800,0],up:[0,0,1],fov:45,updateCamera:(t,r)=>{this.updateSize(),t.position.x-=this.mouseX*.05,t.position.x=Math.max(Math.min(t.position.x,2e3),-2e3),t.lookAt(t.position.clone().setY(0)),t.updateProjectionMatrix()}},this.view3={left:.5,bottom:.5,width:.5,height:.5,background:new pe(.5,.7,.7),eye:[1400,800,1400],up:[0,1,0],fov:60,updateCamera:(t,r)=>{this.updateSize(),t.position.y-=this.mouseX*.05,t.position.y=Math.max(Math.min(t.position.y,1600),-1600),t.lookAt(r.position),t.updateProjectionMatrix()}}}ngOnInit(){!this.canvas||!this.canvas.rendererCanvas||(this.shadowTexture=new zd(this.canvas.rendererCanvas))}updateSize(){!this.canvas||!this.canvas.rendererCanvas||(this.canvasWidth=this.canvas.rendererCanvas.width,this.canvasHeight=this.canvas.rendererCanvas.height)}onMouseMove(t){if(!this.canvas||!this.canvas.rendererCanvas)return;let r=this.canvas.rendererCanvas.getBoundingClientRect();this.mouseX=t.clientX-r.left-r.width/2,this.mouseY=t.clientY-r.right-r.height/2}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-multi-view-postprocessing-example"]],viewQuery:function(r,o){if(r&1&&Xt(sse,7),r&2){let s;at(s=ct())&&(o.canvas=s.first)}},hostBindings:function(r,o){r&1&&Le("mousemove",function(a){return o.onMouseMove(a)},!1,Zu)},decls:32,vars:96,consts:[["thecanvas",""],["scene",""],["geo",""],["mat",""],["thview1",""],["camera1",""],["thview2",""],["camera2",""],["thview3",""],["camera3",""],[3,"disableDefaultView","viewPort"],[3,"position","args","intensity"],[3,"position","rotation"],[3,"args"],[3,"flatShading","shininess","specular","color"],[3,"position","rotation","geometry","material"],[3,"onRender","scene","viewPort","scissor","scissorTest"],[3,"position","up","fov","aspect","near","far"],[3,"clearColor"],[3,"strength"],[3,"args","uniforms"],[3,"onRender","scene","viewPort","scissor","scissorTest","clearColor"]],template:function(r,o){if(r&1){let s=Zt();H(0,"th-canvas",10,0)(2,"th-scene",null,1),fe(4,"th-directionalLight",11),H(5,"th-mesh",12),fe(6,"th-sphereGeometry",13,2)(8,"th-meshPhongMaterial",14,3),J(),fe(10,"th-mesh",15)(11,"th-mesh",15),J(),H(12,"th-view",16,4),Le("onRender",function(){ht(s);let c=At(3),l=At(15);return ft(o.view1.updateCamera(l.objRef,c.objRef))}),fe(14,"th-perspectiveCamera",17,5),H(16,"th-effectComposer"),fe(17,"th-renderPass",18)(18,"th-unrealBloomPass",19)(19,"th-shaderPass",20)(20,"th-glitchPass"),J()(),H(21,"th-view",21,6),Le("onRender",function(){ht(s);let c=At(3),l=At(24);return ft(o.view2.updateCamera(l.objRef,c.objRef))}),fe(23,"th-perspectiveCamera",17,7),H(25,"th-effectComposer"),fe(26,"th-renderPass")(27,"th-filmPass",13),J()(),H(28,"th-view",21,8),Le("onRender",function(){ht(s);let c=At(3),l=At(31);return ft(o.view3.updateCamera(l.objRef,c.objRef))}),fe(30,"th-perspectiveCamera",17,9),J()()}if(r&2){let s=At(3),a=At(7),c=At(9),l=At(13),d=At(22),u=At(29);P("disableDefaultView",!0)("viewPort",$n(57,ase,.5*o.canvasWidth,o.canvasHeight)),j(4),P("position",K(60,cse))("args",K(61,lse))("intensity",3),j(),P("position",K(62,dse))("rotation",vt(63,qx,-o.Math.PI/2)),j(),P("args",K(65,use)),j(2),P("flatShading",!1)("shininess",30)("specular",K(66,hse))("color",K(67,fse)),j(2),P("position",vt(68,qx,-400))("rotation",vt(70,qx,-o.Math.PI/2))("geometry",a.objRef)("material",c.objRef),j(),P("position",K(72,mse))("rotation",vt(73,qx,-o.Math.PI/2))("geometry",a.objRef)("material",c.objRef),j(),P("scene",s)("viewPort",ih(75,mA,o.view1.left*o.canvasWidth,o.view1.bottom*o.canvasHeight,o.view1.width*o.canvasWidth,o.view1.height*o.canvasHeight))("scissor",l.viewPort)("scissorTest",!0),j(2),P("position",o.view1.eye)("up",o.view1.up)("fov",o.view1.fov)("aspect",o.view1.width*o.canvasWidth/(o.view1.height*o.canvasHeight))("near",1)("far",1e4),j(3),P("clearColor",o.view1.background),j(),P("strength",.2),j(),P("args",vt(80,pse,o.RGBShiftShader))("uniforms",vt(83,bse,K(82,gse))),j(2),P("scene",s)("viewPort",ih(85,mA,o.view2.left*o.canvasWidth,o.view2.bottom*o.canvasHeight,o.view2.width*o.canvasWidth,o.view2.height*o.canvasHeight))("scissor",d.viewPort)("scissorTest",!0)("clearColor",o.view2.background),j(2),P("position",o.view2.eye)("up",o.view2.up)("fov",o.view2.fov)("aspect",o.view2.width*o.canvasWidth/(o.view2.height*o.canvasHeight))("near",1)("far",1e4),j(4),P("args",K(90,_se)),j(),P("scene",s)("viewPort",ih(91,mA,o.view3.left*o.canvasWidth,o.view3.bottom*o.canvasHeight,o.view3.width*o.canvasWidth,o.view3.height*o.canvasHeight))("scissor",u.viewPort)("scissorTest",!0)("clearColor",o.view3.background),j(2),P("position",o.view3.eye)("up",o.view3.up)("fov",o.view3.fov)("aspect",o.view3.width*o.canvasWidth/(o.view3.height*o.canvasHeight))("near",1)("far",1e4)}},dependencies:[Qt,dr,Ti,Ut,lo,El,Sa,MU,DU,Lf,Sg,Vx,It,Pr],encapsulation:2,changeDetection:0});let n=e;return n})();var MV=(()=>{let e=class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}};e.\u0275fac=function(r){return new(r||e)(F(Gs),F(et))},e.\u0275dir=$e({type:e});let n=e;return n})(),Vg=(()=>{let e=class e extends MV{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275dir=$e({type:e,features:[q]});let n=e;return n})(),Vf=new Ee(""),vse={provide:Vf,useExisting:ge(()=>vA),multi:!0},vA=(()=>{let e=class e extends Vg{writeValue(t){this.setProperty("checked",t)}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275dir=$e({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,o){r&1&&Le("change",function(a){return o.onChange(a.target.checked)})("blur",function(){return o.onTouched()})},features:[ie([vse]),q]});let n=e;return n})(),yse={provide:Vf,useExisting:ge(()=>Qx),multi:!0};function xse(){let n=Xs()?Xs().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var wse=new Ee(""),Qx=(()=>{let e=class e extends MV{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!xse())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}};e.\u0275fac=function(r){return new(r||e)(F(Gs),F(et),F(wse,8))},e.\u0275dir=$e({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&Le("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[ie([yse]),q]});let n=e;return n})();var Mse=new Ee(""),Sse=new Ee("");function SV(n){return n!=null}function RV(n){return Hc(n)?ki(n):n}function TV(n){let e={};return n.forEach(i=>{e=i!=null?ve(ve({},e),i):e}),Object.keys(e).length===0?null:e}function CV(n,e){return e.map(i=>i(n))}function Rse(n){return!n.validate}function EV(n){return n.map(e=>Rse(e)?e:i=>e.validate(i))}function Tse(n){if(!n)return null;let e=n.filter(SV);return e.length==0?null:function(i){return TV(CV(i,e))}}function DV(n){return n!=null?Tse(EV(n)):null}function Cse(n){if(!n)return null;let e=n.filter(SV);return e.length==0?null:function(i){let t=CV(i,e).map(RV);return Vl(t).pipe(lt(TV))}}function AV(n){return n!=null?Cse(EV(n)):null}function pV(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ese(n){return n._rawValidators}function Dse(n){return n._rawAsyncValidators}function pA(n){return n?Array.isArray(n)?n:[n]:[]}function Yx(n,e){return Array.isArray(n)?n.includes(e):n===e}function gV(n,e){let i=pA(e);return pA(n).forEach(r=>{Yx(i,r)||i.push(r)}),i}function bV(n,e){return pA(e).filter(i=>!Yx(n,i))}var Zx=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=DV(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=AV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,i){return this.control?this.control.hasError(e,i):!1}getError(e,i){return this.control?this.control.getError(e,i):null}},gA=class extends Zx{get formDirective(){return null}get path(){return null}},Ug=class extends Zx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},bA=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},Ase={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},DGe=pi(ve({},Ase),{"[class.ng-submitted]":"isSubmitted"}),Kx=(()=>{let e=class e extends bA{constructor(t){super(t)}};e.\u0275fac=function(r){return new(r||e)(F(Ug,2))},e.\u0275dir=$e({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&$t("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[q]});let n=e;return n})();var Lg="VALID",Xx="INVALID",Uf="PENDING",Bg="DISABLED";function Ise(n){return(Jx(n)?n.validators:n)||null}function Pse(n){return Array.isArray(n)?DV(n):n||null}function kse(n,e){return(Jx(e)?e.asyncValidators:n)||null}function Fse(n){return Array.isArray(n)?AV(n):n||null}function Jx(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var _A=class{constructor(e,i){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(i)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Lg}get invalid(){return this.status===Xx}get pending(){return this.status==Uf}get disabled(){return this.status===Bg}get enabled(){return this.status!==Bg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(gV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(gV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(bV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(bV(e,this._rawAsyncValidators))}hasValidator(e){return Yx(this._rawValidators,e)}hasAsyncValidator(e){return Yx(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(i=>{i.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Uf,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=Bg,this.errors=null,this._forEachChild(t=>{t.disable(pi(ve({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pi(ve({},e),{skipPristineCheck:i})),this._onDisabledChange.forEach(t=>t(!0))}enable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=Lg,this._forEachChild(t=>{t.enable(pi(ve({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pi(ve({},e),{skipPristineCheck:i})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Lg||this.status===Uf)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bg:Lg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Uf,this._hasOwnPendingAsyncValidator=!0;let i=RV(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,i={}){this.errors=e,this._updateControlsErrors(i.emitEvent!==!1)}get(e){let i=e;return i==null||(Array.isArray(i)||(i=i.split(".")),i.length===0)?null:i.reduce((t,r)=>t&&t._find(r),this)}getError(e,i){let t=i?this.get(i):this;return t&&t.errors?t.errors[e]:null}hasError(e,i){return!!this.getError(e,i)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new nt,this.statusChanges=new nt}_calculateStatus(){return this._allControlsDisabled()?Bg:this.errors?Xx:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Uf)?Uf:this._anyControlsHaveStatus(Xx)?Xx:Lg}_anyControlsHaveStatus(e){return this._anyControls(i=>i.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Jx(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let i=this._parent&&this._parent.dirty;return!e&&!!i&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Pse(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Fse(this._rawAsyncValidators)}};var IV=new Ee("CallSetDisabledState",{providedIn:"root",factory:()=>yA}),yA="always";function jse(n,e){return[...e.path,n]}function Ose(n,e,i=yA){Lse(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||i==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Bse(n,e),Vse(n,e),Use(n,e),Nse(n,e)}function _V(n,e){n.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(e)})}function Nse(n,e){if(e.valueAccessor.setDisabledState){let i=t=>{e.valueAccessor.setDisabledState(t)};n.registerOnDisabledChange(i),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(i)})}}function Lse(n,e){let i=Ese(n);e.validator!==null?n.setValidators(pV(i,e.validator)):typeof i=="function"&&n.setValidators([i]);let t=Dse(n);e.asyncValidator!==null?n.setAsyncValidators(pV(t,e.asyncValidator)):typeof t=="function"&&n.setAsyncValidators([t]);let r=()=>n.updateValueAndValidity();_V(e._rawValidators,r),_V(e._rawAsyncValidators,r)}function Bse(n,e){e.valueAccessor.registerOnChange(i=>{n._pendingValue=i,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&PV(n,e)})}function Use(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&PV(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function PV(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Vse(n,e){let i=(t,r)=>{e.valueAccessor.writeValue(t),r&&e.viewToModelUpdate(t)};n.registerOnChange(i),e._registerOnDestroy(()=>{n._unregisterOnChange(i)})}function zse(n,e){if(!n.hasOwnProperty("model"))return!1;let i=n.model;return i.isFirstChange()?!0:!Object.is(e,i.currentValue)}function Hse(n){return Object.getPrototypeOf(n.constructor)===Vg}function Gse(n,e){if(!e)return null;Array.isArray(e);let i,t,r;return e.forEach(o=>{o.constructor===Qx?i=o:Hse(o)?t=o:r=o}),r||t||i||null}function vV(n,e){let i=n.indexOf(e);i>-1&&n.splice(i,1)}function yV(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Wse=class extends _A{constructor(e=null,i,t){super(Ise(i),kse(t,i)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Jx(i)&&(i.nonNullable||i.initialValueIsDefault)&&(yV(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,i={}){this.value=this._pendingValue=e,this._onChange.length&&i.emitModelToViewChange!==!1&&this._onChange.forEach(t=>t(this.value,i.emitViewToModelChange!==!1)),this.updateValueAndValidity(i)}patchValue(e,i={}){this.setValue(e,i)}reset(e=this.defaultValue,i={}){this._applyFormState(e),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){vV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){vV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){yV(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var $se={provide:Ug,useExisting:ge(()=>zg)},xV=Promise.resolve(),zg=(()=>{let e=class e extends Ug{constructor(t,r,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new Wse,this._registered=!1,this.name="",this.update=new nt,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=Gse(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),zse(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ose(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){xV.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,o=r!==0&&Si(r);xV.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?jse(t,this._parent):[t]}};e.\u0275fac=function(r){return new(r||e)(F(gA,9),F(Mse,10),F(Sse,10),F(Vf,10),F(Wi,8),F(IV,8))},e.\u0275dir=$e({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[ut.None,"disabled","isDisabled"],model:[ut.None,"ngModel","model"],options:[ut.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ie([$se]),q,Hn]});let n=e;return n})();var qse={provide:Vf,useExisting:ge(()=>xA),multi:!0},xA=(()=>{let e=class e extends Vg{writeValue(t){this.setProperty("value",parseFloat(t))}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275dir=$e({type:e,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,o){r&1&&Le("change",function(a){return o.onChange(a.target.value)})("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[ie([qse]),q]});let n=e;return n})();var Xse={provide:Vf,useExisting:ge(()=>ew),multi:!0};function kV(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Yse(n){return n.split(":")[0]}var ew=(()=>{let e=class e extends Vg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),o=kV(r,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=Yse(t);return this._optionMap.has(r)?this._optionMap.get(r):t}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275dir=$e({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,o){r&1&&Le("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[ie([Xse]),q]});let n=e;return n})(),FV=(()=>{let e=class e{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(kV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(F(et),F(Gs),F(ew,9))},e.\u0275dir=$e({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})(),Zse={provide:Vf,useExisting:ge(()=>jV),multi:!0};function wV(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Qse(n){return n.split(":")[0]}var jV=(()=>{let e=class e extends Vg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let o=t.map(s=>this._getOptionId(s));r=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else r=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let o=[],s=r.selectedOptions;if(s!==void 0){let a=s;for(let c=0;c<a.length;c++){let l=a[c],d=this._getOptionValue(l.value);o.push(d)}}else{let a=r.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let d=this._getOptionValue(l.value);o.push(d)}}}this.value=o,t(o)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=Qse(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275dir=$e({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,o){r&1&&Le("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[ie([Zse]),q]});let n=e;return n})(),OV=(()=>{let e=class e{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(wV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(wV(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(F(et),F(Gs),F(jV,9))},e.\u0275dir=$e({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})();var Kse=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({});let n=e;return n})();var NV=(()=>{let e=class e{static withConfig(t){return{ngModule:e,providers:[{provide:IV,useValue:t.callSetDisabledState??yA}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({imports:[Kse]});let n=e;return n})();var Jse=()=>[2,2,2],eae=()=>[1,1,1],tae=()=>[10,10],BV=()=>[10,10,10],iae=()=>[45,2,.1,100],nae=()=>[0,0,0],rae=n=>[n],oae=(n,e,i)=>[n,e,i];function sae(n,e){n&1&&fe(0,"th-orbitControls")}function aae(n,e){n&1&&fe(0,"th-mapControls")}function cae(n,e){n&1&&fe(0,"th-arcballControls")}function lae(n,e){if(n&1&&fe(0,"th-transformControls",18),n&2){qt();let i=At(26);P("object",i.objRef)}}function dae(n,e){if(n&1&&fe(0,"th-dragControls",12),n&2){qt();let i=At(22),t=At(26),r=At(30);P("args",qs(3,oae,vt(1,rae,t.objRef),r.objRef,i.hostElement.nativeElement))}}function uae(n,e){n&1&&fe(0,"th-flyControls")}function hae(n,e){n&1&&fe(0,"th-trackballControls")}function fae(n,e){n&1&&fe(0,"th-firstPersonControls")}var UV=(()=>{let e=class e{constructor(){this.controlType="orbit",this.renderOnDemand=!0,this.selected=!1,this.glbPath=`${an}DamagedHelmet.glb`}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-on-demand-example"]],decls:39,vars:29,consts:[["canvas",""],["model",""],["camera",""],[1,"control-panel"],["id","ondemand","type","checkbox",3,"ngModelChange","ngModel"],["for","ondemand"],[1,"form-control",3,"ngModelChange","ngModel"],[1,"works-on-demand"],[1,"needs-loop"],[3,"thStats","renderOnDemand"],[3,"intensity"],["loadGLTF","",3,"onClick","url","scale"],[3,"args"],[3,"position","decay"],[3,"ngSwitch","args","position","lookAt"],[4,"ngSwitchCase"],[3,"object",4,"ngSwitchCase"],[3,"args",4,"ngSwitchCase"],[3,"object"]],template:function(r,o){if(r&1){let s=Zt();H(0,"div",3)(1,"input",4),th("ngModelChange",function(c){return ht(s),Sm(o.renderOnDemand,c)||(o.renderOnDemand=c),ft(c)}),J(),H(2,"label",5),kt(3,"Render On-Demand"),J(),H(4,"select",6),th("ngModelChange",function(c){return ht(s),Sm(o.controlType,c)||(o.controlType=c),ft(c)}),H(5,"option",7),kt(6,"orbit"),J(),H(7,"option",7),kt(8,"map"),J(),H(9,"option",7),kt(10,"arcball"),J(),H(11,"option",7),kt(12,"transform"),J(),H(13,"option",7),kt(14,"drag"),J(),H(15,"option",8),kt(16,"fly"),J(),H(17,"option",8),kt(18,"trackball"),J(),H(19,"option",8),kt(20,"firstpersion"),J()()(),H(21,"th-canvas",9,0)(23,"th-scene"),fe(24,"th-ambientLight",10),H(25,"th-object3D",11,1),Le("onClick",function(){return ht(s),ft(o.selected=!o.selected)}),J(),fe(27,"th-gridHelper",12)(28,"th-pointLight",13),H(29,"th-perspectiveCamera",14,2),Vt(31,sae,1,0,"th-orbitControls",15)(32,aae,1,0,"th-mapControls",15)(33,cae,1,0,"th-arcballControls",15)(34,lae,1,1,"th-transformControls",16)(35,dae,1,7,"th-dragControls",17)(36,uae,1,0,"th-flyControls",15)(37,hae,1,0,"th-trackballControls",15)(38,fae,1,0,"th-firstPersonControls",15),J()()()}r&2&&(j(),eh("ngModel",o.renderOnDemand),j(3),eh("ngModel",o.controlType),j(17),P("thStats",!0)("renderOnDemand",o.renderOnDemand),j(3),P("intensity",3),j(),P("url",o.glbPath)("scale",o.selected?K(22,Jse):K(23,eae)),j(2),P("args",K(24,tae)),j(),P("position",K(25,BV))("decay",0),j(),P("ngSwitch",o.controlType)("args",K(26,iae))("position",K(27,BV))("lookAt",K(28,nae)),j(2),P("ngSwitchCase","orbit"),j(),P("ngSwitchCase","map"),j(),P("ngSwitchCase","arcball"),j(),P("ngSwitchCase","transform"),j(),P("ngSwitchCase","drag"),j(),P("ngSwitchCase","fly"),j(),P("ngSwitchCase","trackball"),j(),P("ngSwitchCase","firstpersion"))},dependencies:[wR,sO,JU,fU,xU,TU,CU,In,kU,Ox,Qt,me,Ir,Di,ur,Ut,It,Yn,Zo,vl,An,FV,OV,vA,ew,Kx,zg],styles:[".needs-loop[_ngcontent-%COMP%]{color:red}.works-on-demand[_ngcontent-%COMP%]{color:green}.control-panel[_ngcontent-%COMP%]{display:flex;gap:1em;margin:1em}"],changeDetection:0});let n=e;return n})();var Al=class n{constructor(e,i,t,r,o="div"){this.parent=e,this.object=i,this.property=t,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),n.nextNameID=n.nextNameID||0,this.$name.id=`lil-gui-name-${++n.nextNameID}`,this.$widget=document.createElement(o),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",s=>s.stopPropagation()),this.domElement.addEventListener("keyup",s=>s.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(t)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled?this:(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e),this)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){let i=this.parent.add(this.object,this.property,e);return i.name(this._name),this.destroy(),i}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);let e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}},wA=class extends Al{constructor(e,i,t){super(e,i,t,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}};function MA(n){let e,i;return(e=n.match(/(#|0x)?([a-f0-9]{6})/i))?i=e[2]:(e=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?i=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(i=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),i?"#"+i:!1}var mae={isPrimitive:!0,match:n=>typeof n=="string",fromHexString:MA,toHexString:MA},Gg={isPrimitive:!0,match:n=>typeof n=="number",fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},pae={isPrimitive:!1,match:n=>Array.isArray(n),fromHexString(n,e,i=1){let t=Gg.fromHexString(n);e[0]=(t>>16&255)/255*i,e[1]=(t>>8&255)/255*i,e[2]=(t&255)/255*i},toHexString([n,e,i],t=1){t=255/t;let r=n*t<<16^e*t<<8^i*t<<0;return Gg.toHexString(r)}},gae={isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,e,i=1){let t=Gg.fromHexString(n);e.r=(t>>16&255)/255*i,e.g=(t>>8&255)/255*i,e.b=(t&255)/255*i},toHexString({r:n,g:e,b:i},t=1){t=255/t;let r=n*t<<16^e*t<<8^i*t<<0;return Gg.toHexString(r)}},bae=[mae,Gg,pae,gae];function _ae(n){return bae.find(e=>e.match(n))}var SA=class extends Al{constructor(e,i,t,r){super(e,i,t,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=_ae(this.initialValue),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{let o=MA(this.$text.value);o&&this._setValueFromHexString(o)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){let i=this._format.fromHexString(e);this.setValue(i)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}},Hg=class extends Al{constructor(e,i,t){super(e,i,t,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",r=>{r.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}},RA=class extends Al{constructor(e,i,t,r,o,s){super(e,i,t,"number"),this._initInput(),this.min(r),this.max(o);let a=s!==void 0;this.step(a?s:this._getImplicitStep(),a),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,i=!0){return this._step=e,this._stepExplicit=i,this}updateDisplay(){let e=this.getValue();if(this._hasSlider){let i=(e-this._min)/(this._max-this._min);i=Math.max(0,Math.min(i,1)),this.$fill.style.width=i*100+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;let i=()=>{let v=parseFloat(this.$input.value);isNaN(v)||(this._stepExplicit&&(v=this._snap(v)),this.setValue(this._clamp(v)))},t=v=>{let _=parseFloat(this.$input.value);isNaN(_)||(this._snapClampSetValue(_+v),this.$input.value=this.getValue())},r=v=>{v.key==="Enter"&&this.$input.blur(),v.code==="ArrowUp"&&(v.preventDefault(),t(this._step*this._arrowKeyMultiplier(v))),v.code==="ArrowDown"&&(v.preventDefault(),t(this._step*this._arrowKeyMultiplier(v)*-1))},o=v=>{this._inputFocused&&(v.preventDefault(),t(this._step*this._normalizeMouseWheel(v)))},s=!1,a,c,l,d,u,h=5,f=v=>{a=v.clientX,c=l=v.clientY,s=!0,d=this.getValue(),u=0,window.addEventListener("mousemove",p),window.addEventListener("mouseup",b)},p=v=>{if(s){let _=v.clientX-a,y=v.clientY-c;Math.abs(y)>h?(v.preventDefault(),this.$input.blur(),s=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(_)>h&&b()}if(!s){let _=v.clientY-l;u-=_*this._step*this._arrowKeyMultiplier(v),d+u>this._max?u=this._max-d:d+u<this._min&&(u=this._min-d),this._snapClampSetValue(d+u)}l=v.clientY},b=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",b)},g=()=>{this._inputFocused=!0},m=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",i),this.$input.addEventListener("keydown",r),this.$input.addEventListener("wheel",o,{passive:!1}),this.$input.addEventListener("mousedown",f),this.$input.addEventListener("focus",g),this.$input.addEventListener("blur",m)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");let e=(m,v,_,y,C)=>(m-v)/(_-v)*(C-y)+y,i=m=>{let v=this.$slider.getBoundingClientRect(),_=e(m,v.left,v.right,this._min,this._max);this._snapClampSetValue(_)},t=m=>{this._setDraggingStyle(!0),i(m.clientX),window.addEventListener("mousemove",r),window.addEventListener("mouseup",o)},r=m=>{i(m.clientX)},o=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",o)},s=!1,a,c,l=m=>{m.preventDefault(),this._setDraggingStyle(!0),i(m.touches[0].clientX),s=!1},d=m=>{m.touches.length>1||(this._hasScrollBar?(a=m.touches[0].clientX,c=m.touches[0].clientY,s=!0):l(m),window.addEventListener("touchmove",u,{passive:!1}),window.addEventListener("touchend",h))},u=m=>{if(s){let v=m.touches[0].clientX-a,_=m.touches[0].clientY-c;Math.abs(v)>Math.abs(_)?l(m):(window.removeEventListener("touchmove",u),window.removeEventListener("touchend",h))}else m.preventDefault(),i(m.touches[0].clientX)},h=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",u),window.removeEventListener("touchend",h)},f=this._callOnFinishChange.bind(this),p=400,b,g=m=>{if(Math.abs(m.deltaX)<Math.abs(m.deltaY)&&this._hasScrollBar)return;m.preventDefault();let _=this._normalizeMouseWheel(m)*this._step;this._snapClampSetValue(this.getValue()+_),this.$input.value=this.getValue(),clearTimeout(b),b=setTimeout(f,p)};this.$slider.addEventListener("mousedown",t),this.$slider.addEventListener("touchstart",d,{passive:!1}),this.$slider.addEventListener("wheel",g,{passive:!1})}_setDraggingStyle(e,i="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle(`lil-gui-${i}`,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:i,deltaY:t}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(i=0,t=-e.wheelDelta/120,t*=this._stepExplicit?1:10),i+-t}_arrowKeyMultiplier(e){let i=this._stepExplicit?1:10;return e.shiftKey?i*=10:e.altKey&&(i/=10),i}_snap(e){let i=Math.round(e/this._step)*this._step;return parseFloat(i.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){let e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}},TA=class extends Al{constructor(e,i,t,r){super(e,i,t,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach(o=>{let s=document.createElement("option");s.innerHTML=o,this.$select.appendChild(s)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){let e=this.getValue(),i=this._values.indexOf(e);return this.$select.selectedIndex=i,this.$display.innerHTML=i===-1?e:this._names[i],this}},CA=class extends Al{constructor(e,i,t){super(e,i,t,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",r=>{r.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}},vae=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  background-color: var(--background-color);
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean .widget {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "\u2195";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background-color: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background-color: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background-color: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  height: var(--title-height);
  line-height: calc(var(--title-height) - 4px);
  font-weight: 600;
  padding: 0 var(--padding);
  -webkit-tap-highlight-color: transparent;
  cursor: pointer;
  outline: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "\u25BE";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "\u25B8";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui input {
  -webkit-tap-highlight-color: transparent;
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input::-webkit-outer-spin-button,
.lil-gui input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.lil-gui input[type=number] {
  -moz-appearance: textfield;
}
.lil-gui input[type=checkbox] {
  appearance: none;
  -webkit-appearance: none;
  height: var(--checkbox-size);
  width: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "\u2713";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  -webkit-tap-highlight-color: transparent;
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  border: 1px solid var(--widget-color);
  text-align: center;
  line-height: calc(var(--widget-height) - 4px);
}
@media (hover: hover) {
  .lil-gui button:hover {
    background: var(--hover-color);
    border-color: var(--hover-color);
  }
  .lil-gui button:focus {
    border-color: var(--focus-color);
  }
}
.lil-gui button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function yae(n){let e=document.createElement("style");e.innerHTML=n;let i=document.querySelector("head link[rel=stylesheet], head style");i?document.head.insertBefore(e,i):document.head.appendChild(e)}var VV=!1,EA=class n{constructor({parent:e,autoPlace:i=e===void 0,container:t,width:r,title:o="Controls",closeFolders:s=!1,injectStyles:a=!0,touchStyles:c=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",l=>{(l.code==="Enter"||l.code==="Space")&&(l.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(o),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),c&&this.domElement.classList.add("allow-touch-styles"),!VV&&a&&(yae(vae),VV=!0),t?t.appendChild(this.domElement):i&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this._closeFolders=s}add(e,i,t,r,o){if(Object(t)===t)return new TA(this,e,i,t);let s=e[i];switch(typeof s){case"number":return new RA(this,e,i,t,r,o);case"boolean":return new wA(this,e,i);case"string":return new CA(this,e,i);case"function":return new Hg(this,e,i)}console.error(`gui.add failed
	property:`,i,`
	object:`,e,`
	value:`,s)}addColor(e,i,t=1){return new SA(this,e,i,t)}addFolder(e){let i=new n({parent:this,title:e});return this.root._closeFolders&&i.close(),i}load(e,i=!0){return e.controllers&&this.controllers.forEach(t=>{t instanceof Hg||t._name in e.controllers&&t.load(e.controllers[t._name])}),i&&e.folders&&this.folders.forEach(t=>{t._title in e.folders&&t.load(e.folders[t._title])}),this}save(e=!0){let i={controllers:{},folders:{}};return this.controllers.forEach(t=>{if(!(t instanceof Hg)){if(t._name in i.controllers)throw new Error(`Cannot save GUI with duplicate property "${t._name}"`);i.controllers[t._name]=t.save()}}),e&&this.folders.forEach(t=>{if(t._title in i.folders)throw new Error(`Cannot save GUI with duplicate folder "${t._title}"`);i.folders[t._title]=t.save()}),i}open(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(e){this._closed!==e&&(this._closed=e,this._callOnOpenClose(this))}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{let i=this.$children.clientHeight;this.$children.style.height=i+"px",this.domElement.classList.add("transition");let t=o=>{o.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",t))};this.$children.addEventListener("transitionend",t);let r=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=r+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(t=>t.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),this._onChange!==void 0&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onOpenClose(e){return this._onOpenClose=e,this}_callOnOpenClose(e){this.parent&&this.parent._callOnOpenClose(e),this._onOpenClose!==void 0&&this._onOpenClose.call(this,e)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(i=>{e=e.concat(i.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(i=>{e=e.concat(i.foldersRecursive())}),e}},zV=EA;var xae=["outlinePass"],wae=()=>["#ffffff"],Mae=()=>[0,0,8],Sae=()=>["#aaaaaa"],Rae=()=>["#ddffdd"],Tae=()=>[3,48,24],DA=(n,e,i)=>[n,e,i];function Cae(n,e){if(n&1){let i=Zt();H(0,"th-mesh",13),Le("onMouseEnter",function(r){ht(i);let o=qt();return ft(o.onHover(r))})("onMouseExit",function(){ht(i);let r=qt();return ft(r.onBlur())})("onPointerDown",function(r){ht(i);let o=qt();return ft(o.onPointerDown(r))}),fe(1,"th-meshPhongMaterial",14),J()}if(n&2){let i=e.$implicit;qt();let t=At(11);P("geometry",t.objRef)("position",qs(7,DA,i.x,i.y,i.z))("scale",qs(11,DA,i.scale,i.scale,i.scale))("receiveShadow",!0)("castShadow",!0),j(),P("flatShading",!0)("color",i.color)}}var HV=(()=>{let e=class e{constructor(t){this.elem=t,this.outlinePassResolution=new z(window.innerWidth,window.innerHeight),this.meshData=[],this.visibleEdgeColor="#ffffff",this.hiddenEdgeColor="#190a05",this.edgeStrength=3,this.edgeGlow=.5,this.edgeThickness=1,this.pulsePeriod=1,this.initGUI(),this.initMeshData()}initGUI(){let t=new zV({title:"Settings",injectStyles:!0,container:this.elem.nativeElement,autoPlace:!0});t.add(this,"edgeStrength",.01,10),t.add(this,"edgeGlow",0,2),t.add(this,"edgeThickness",1,4),t.add(this,"pulsePeriod",0,5),t.addColor(this,"visibleEdgeColor"),t.addColor(this,"hiddenEdgeColor")}ngOnInit(){this.outlinePassResolution=new z(window.innerWidth,window.innerHeight),this.outlinePass&&(this.outlinePass.resolution=this.outlinePassResolution)}initMeshData(){for(let t=0;t<20;t++)this.meshData.push({color:new pe().setHSL(Math.random(),1,.3),x:Math.random()*4-2,y:Math.random()*4-2,z:Math.random()*4-2,scale:Math.random()*.3+.1})}onHover(t){t.component.objRef&&(this.outlinePass.selectedObjects=[t.component.objRef])}onBlur(){this.outlinePass.selectedObjects=[]}onPointerDown(t){t.component.material?.color.set("#ff0000")}};e.\u0275fac=function(r){return new(r||e)(F(et))},e.\u0275cmp=L({type:e,selectors:[["app-outline-pass-events-example"]],viewQuery:function(r,o){if(r&1&&Xt(xae,7),r&2){let s;at(s=ct())&&(o.outlinePass=s.first)}},decls:19,vars:33,consts:[["thecanvas",""],["scene",""],["camera",""],["light",""],["geometry",""],["outlinePass",""],[3,"shadow","thStats"],[3,"background"],[3,"position","fov","near","far"],[3,"color","intensity"],[3,"args"],[3,"geometry","position","scale","receiveShadow","castShadow","onMouseEnter","onMouseExit","onPointerDown",4,"ngFor","ngForOf"],[3,"args","visibleEdgeColor","hiddenEdgeColor","edgeStrength","edgeGlow","edgeThickness","pulsePeriod"],[3,"onMouseEnter","onMouseExit","onPointerDown","geometry","position","scale","receiveShadow","castShadow"],[3,"flatShading","color"]],template:function(r,o){if(r&1&&(H(0,"th-canvas",6,0)(2,"th-scene",7,1)(4,"th-perspectiveCamera",8,2),fe(6,"th-orbitControls"),J(),fe(7,"th-ambientLight",9)(8,"th-directionalLight",9,3)(10,"th-sphereGeometry",10,4),Vt(12,Cae,2,15,"th-mesh",11),J(),H(13,"th-effectComposer"),fe(14,"th-renderPass")(15,"th-outlinePass",12,5),Fi(17,"color"),Fi(18,"color"),J()()),r&2){let s=At(3),a=At(5);P("shadow",!0)("thStats",!0),j(2),P("background",K(24,wae)),j(2),P("position",K(25,Mae))("fov",45)("near",.1)("far",100),j(3),P("color",K(26,Sae))("intensity",3),j(),P("color",K(27,Rae))("intensity",1.8),j(2),P("args",K(28,Tae)),j(2),P("ngForOf",o.meshData),j(3),P("args",qs(29,DA,o.outlinePassResolution,s.objRef,a.objRef))("visibleEdgeColor",Gi(17,20,o.visibleEdgeColor))("hiddenEdgeColor",Gi(18,22,o.hiddenEdgeColor))("edgeStrength",o.edgeStrength)("edgeGlow",o.edgeGlow)("edgeThickness",o.edgeThickness)("pulsePeriod",o.pulsePeriod)}},dependencies:[to,In,Qt,Di,dr,Ti,Ut,lo,El,Sa,jU,Lf,It,Zo,An,Ea],styles:["[_nghost-%COMP%]     .lil-gui{position:fixed;right:0;z-index:9999}"]});let n=e;return n})();var Eae=["camera"],Dae=()=>["#72645b",2,15],Aae=n=>[0,n,0],GV=n=>[n,0,0],Iae=()=>[40,40],Pae=()=>({color:"#999999",specular:"#101010"}),kae=n=>[0,n,.3],Fae=()=>[.001,.001,.001],jae=()=>({color:"#0055ff",flatShading:!0}),Oae=()=>["#443333","#111122"],Nae=()=>[1,1,1],Lae=n=>[.5,1,n],Bae=()=>[35,2,1,15],WV=(()=>{let e=class e{constructor(){this.Math=Math,this.cameraPosition=new S(3,.15,3),this.assetPath=`${an}dolphins.ply`}onBeforeRender(){let t=Date.now()*5e-4;this.camera&&(this.camera.position=new S(Math.sin(t)*2.5,.15,Math.cos(t)*2.5),this.camera.lookAt=[0,.1,0])}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-plyloader-example"]],viewQuery:function(r,o){if(r&1&&Xt(Eae,5),r&2){let s;at(s=ct())&&(o.camera=s.first)}},decls:17,vars:58,consts:[["camera",""],[3,"onRender","shadow"],[3,"background","fog"],[3,"position","rotation","receiveShadow"],[3,"args"],[3,"rotation","position","scale","castShadow","receiveShadow"],["loadPLY","",3,"url"],[3,"args","intensity"],[3,"castShadow","position","color","intensity","receiveShadow"]],template:function(r,o){if(r&1){let s=Zt();H(0,"th-canvas",1),Le("onRender",function(){return ht(s),ft(o.onBeforeRender())}),H(1,"th-scene",2),Fi(2,"color"),Fi(3,"fog"),H(4,"th-mesh",3),fe(5,"th-planeGeometry",4)(6,"th-meshPhongMaterial",4),J(),H(7,"th-mesh",5),fe(8,"th-bufferGeometry",6)(9,"th-meshStandardMaterial",4),J(),fe(10,"th-hemisphereLight",7)(11,"th-directionalLight",8),Fi(12,"color"),fe(13,"th-directionalLight",8),Fi(14,"color"),fe(15,"th-perspectiveCamera",4,0),J()()}r&2&&(P("shadow",!0),j(),P("background",Gi(2,32,"#72645b"))("fog",Gi(3,34,K(40,Dae))),j(3),P("position",vt(41,Aae,-.5))("rotation",vt(43,GV,-o.Math.PI/2))("receiveShadow",!0),j(),P("args",K(45,Iae)),j(),P("args",K(46,Pae)),j(),P("rotation",vt(47,GV,-o.Math.PI/2))("position",vt(49,kae,-.2))("scale",K(51,Fae))("castShadow",!0)("receiveShadow",!0),j(),P("url",o.assetPath),j(),P("args",K(52,jae)),j(),P("args",K(53,Oae))("intensity",3),j(),P("castShadow",!0)("position",K(54,Nae))("color",Gi(12,36,"#ffffff"))("intensity",1.35)("castShadow",!0)("receiveShadow",!0)("intensity",3),j(2),P("castShadow",!0)("position",vt(55,Lae,-1))("color",Gi(14,38,"#ffaa00"))("intensity",1)("castShadow",!0)("receiveShadow",!0)("intensity",3),j(2),P("args",K(57,Bae)))},dependencies:[Qt,dr,hf,Ti,Ut,lo,Rg,ni,Xo,It,eV,Ea,Zy],encapsulation:2,changeDetection:0});let n=e;return n})();var Uae=["object"],Vae=["light"],zae=n=>[n],Hae=n=>({value:n}),Gae=n=>({amount:n}),$V=()=>["#ffffff"],Wae=n=>[0,0,n],$ae=()=>["#333333"],qae=()=>[1,4,4];function Xae(n,e){if(n&1&&(H(0,"th-mesh",15),fe(1,"th-meshPhongMaterial",16),J()),n&2){let i=e.$implicit;qt();let t=At(15);P("geometry",t.objRef)("position",i.pos)("rotation",i.rotation)("scale",i.scale),j(),P("flatShading",!0)("color",i.color)}}var qV=(()=>{let e=class e{constructor(){this.DotScreenShader=Mx,this.RGBShiftShader=$x,this.shiftAmount=.0015,this.zDist=400,this.meshData=[],this.initMeshData()}ngOnInit(){this.light?.position?.set(1,1,1)}initMeshData(){for(let t=0;t<100;t++){let r=Math.random()*50;this.meshData.push({pos:new S(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize().multiplyScalar(Math.random()*this.zDist),rotation:new so(Math.random()*2,Math.random()*2,Math.random()*2),scale:new S(r,r,r),color:new pe(16777215*Math.random())})}}animate(){this.object?.objRef?.rotation&&(this.object.objRef.rotation.x+=.005,this.object.objRef.rotation.y+=.01)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-post-processing-example"]],viewQuery:function(r,o){if(r&1&&(Xt(Uae,7),Xt(Vae,7)),r&2){let s;at(s=ct())&&(o.object=s.first),at(s=ct())&&(o.light=s.first)}},decls:19,vars:31,consts:[["thecanvas",""],["light",""],["geometry",""],["object",""],["for","shift"],["id","shift","type","range",3,"ngModelChange","ngModel","min","max","step"],[3,"onRender","shadow","thStats"],[3,"strength"],[3,"args","uniforms"],[3,"background"],[3,"position","fov","near","far"],[3,"color","intensity"],[3,"color"],[3,"args"],[3,"geometry","position","rotation","scale",4,"ngFor","ngForOf"],[3,"geometry","position","rotation","scale"],[3,"flatShading","color"]],template:function(r,o){if(r&1){let s=Zt();H(0,"label",4),kt(1,"Shift Amount"),J(),H(2,"input",5),th("ngModelChange",function(c){return ht(s),Sm(o.shiftAmount,c)||(o.shiftAmount=c),ft(c)}),J(),H(3,"th-canvas",6,0),Le("onRender",function(){return ht(s),ft(o.animate())}),H(5,"th-effectComposer"),fe(6,"th-renderPass")(7,"th-unrealBloomPass",7)(8,"th-shaderPass",8),J(),H(9,"th-scene",9),fe(10,"th-perspectiveCamera",10)(11,"th-ambientLight",11)(12,"th-directionalLight",12,1)(14,"th-sphereGeometry",13,2),H(16,"th-object3D",null,3),Vt(18,Xae,2,6,"th-mesh",14),J()()()}r&2&&(j(2),eh("ngModel",o.shiftAmount),P("min",.0015)("max",.2)("step",.005),j(),P("shadow",!0)("thStats",!0),j(4),P("strength",1),j(),P("args",vt(19,zae,o.RGBShiftShader))("uniforms",vt(23,Gae,vt(21,Hae,o.shiftAmount))),j(),P("background",K(25,$V)),j(),P("position",vt(26,Wae,o.zDist))("fov",70)("near",1)("far",1e3),j(),P("color",K(28,$ae))("intensity",6),j(),P("color",K(29,$V)),j(2),P("args",K(30,qae)),j(4),P("ngForOf",o.meshData))},dependencies:[to,Qt,me,Di,dr,Ti,Ut,lo,El,Sa,Lf,Sg,Vx,It,An,Qx,xA,Kx,zg],styles:["label[_ngcontent-%COMP%]{margin-right:.5em}"],changeDetection:0});let n=e;return n})();var AA=n=>[0,n,0],Yae=()=>[0,1,0],Zae=()=>[4,10,2],Qae=n=>[n,0,0],Kae=()=>[100,100],Jae=()=>[55,2,.1,100],ece=(n,e)=>[n,0,e],tce=()=>[0,0,0],XV=(()=>{let e=class e{constructor(t){this.Math=Math,this.selected=!1,this.glbPath=`${an}mac-draco.glb`,this.clock=new ao(!0),this.plane=new lr(new S(0,1,0),3),this.rotation=[0,0,0],this.position=[0,0,0],this.uniforms={time:{value:1}},this.fragmentShader1=`
uniform float time;
varying vec2 vUv;

void main( void ) {
  vec2 position = - 1.0 + 2.0 * vUv;

  float red = abs( sin( position.x * position.y + time / 5.0 ) );
  float green = abs( sin( position.x * position.y + time / 4.0 ) );
  float blue = abs( sin( position.x * position.y + time / 3.0 ) );
  gl_FragColor = vec4( red, green, blue, 1.0 );

}
`,this.fragmentShader2=`
  uniform float time;
  varying vec2 vUv;

  void main( void ) {
    vec2 position = vUv;
    float color = 0.0;
    color += sin( position.x * cos( time / 15.0 ) * 80.0 ) + cos( position.y * cos( time / 15.0 ) * 10.0 );
    color += sin( position.y * sin( time / 10.0 ) * 40.0 ) + cos( position.x * sin( time / 25.0 ) * 40.0 );
    color += sin( position.x * sin( time / 5.0 ) * 10.0 ) + sin( position.y * sin( time / 35.0 ) * 80.0 );
    color *= sin( time / 10.0 ) * 0.5;
    gl_FragColor = vec4( vec3( color, color * 0.5, sin( color + time / 3.0 ) * 0.75 ), 1.0 );
  }
  `,this.vertexShader=`varying vec2 vUv;
  void main() {
    vUv = uv;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;
  }
  `,t.setDecoderPath("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/jsm/libs/draco/gltf/"),t.setCrossOrigin("no-cors"),this.calcPose()}onBeforeRender(){this.calcPose(),this.calcUniforms()}calcPose(){let t=this.clock.getElapsedTime();this.rotation=[st.lerp(this.rotation[0],Math.cos(t/2)/20+.25,.1),st.lerp(this.rotation[1],Math.sin(t/4)/20,.1),st.lerp(this.rotation[2],Math.sin(t/8)/20,.1)],this.position=[0,st.lerp(this.position[1],(-2+Math.sin(t/2))/2,.1),0]}calcUniforms(){this.uniforms.time.value=1+this.clock.getElapsedTime()*5}};e.\u0275fac=function(r){return new(r||e)(F(_l))},e.\u0275cmp=L({type:e,selectors:[["app-ref-by-id-example"]],decls:17,vars:45,consts:[["shader",""],["light",""],[3,"onRender","thStats","shadow"],[3,"rotation","position"],["loadGLTF","",3,"onClick","castShadow","url","position","rotation"],[3,"refById"],[3,"vertexShader","fragmentShader","uniforms"],[3,"castShadow","position","lookAt","color","intensity"],[3,"receiveShadow","rotation","position"],[3,"args"],[3,"color"],[3,"args","position","lookAt"]],template:function(r,o){if(r&1){let s=Zt();H(0,"th-canvas",2),Le("onRender",function(){return ht(s),ft(o.onBeforeRender())}),H(1,"th-scene"),fe(2,"th-ambientLight"),H(3,"th-group",3)(4,"th-object3D",4),Le("onClick",function(){ht(s);let c=At(7);return o.selected=!o.selected,ft(c.uniformsNeedUpdate=!0)}),H(5,"th-mesh",5),fe(6,"th-shaderMaterial",6,0),J()()(),fe(8,"th-directionalLight",7,1),Fi(10,"color"),H(11,"th-mesh",8),fe(12,"th-planeGeometry",9)(13,"th-meshBasicMaterial",10),Fi(14,"color"),J(),H(15,"th-perspectiveCamera",11),fe(16,"th-orbitControls"),J()()()}r&2&&(P("thStats",!0)("shadow",!0),j(3),P("rotation",vt(29,AA,o.Math.PI))("position",K(31,Yae)),j(),P("castShadow",!0)("url",o.glbPath)("position",o.position)("rotation",o.rotation),j(),P("refById","Cube008_2"),j(),P("vertexShader",o.vertexShader)("fragmentShader",o.selected?o.fragmentShader1:o.fragmentShader2)("uniforms",o.uniforms),j(2),P("castShadow",!0)("position",K(32,Zae))("lookAt",vt(33,AA,-3))("color",Gi(10,25,"#ffffff"))("intensity",.75),j(3),P("receiveShadow",!0)("rotation",vt(35,Qae,3*o.Math.PI/2))("position",vt(37,AA,-3)),j(),P("args",K(39,Kae)),j(),P("color",Gi(14,27,"#efefef")),j(2),P("args",K(40,Jae))("position",$n(41,ece,-5,-15))("lookAt",K(44,tce)))},dependencies:[In,Qt,me,Di,dr,Cl,Ti,Ut,_a,q1,Xo,It,Yn,Zo,An,Bf,Ea],encapsulation:2,changeDetection:0});let n=e;return n})();var IA=()=>[0,0,0],ice=()=>[2,2,2],nce=()=>[1,1,1],rce=(n,e)=>[n,e],oce=()=>[10,10],YV=()=>[10,10,10],sce=()=>[45,2,.1,100],ace=(()=>{let e=class e extends Ti{constructor(t){super(t)}ngOnInit(){super.ngOnInit(),this.objRef&&(this.objRef.material=new Dr({color:"green"}),this.objRef.geometry=new Zi(1,1,1))}};e.\u0275fac=function(r){return new(r||e)(F(me,4))},e.\u0275cmp=L({type:e,selectors:[["th-box"]],features:[ie(rV(e)),q],decls:0,vars:0,template:function(r,o){},encapsulation:2,changeDetection:0});let n=e;return n})(),ZV=(()=>{let e=class e{constructor(){this.THREE=fl,this.box=new _n(new S(0,0,0),new S(1.5,1.5,1.5)),this.color=new pe(1,0,0),this.rotation=[0,0,0],this.material=new Dr,this.selected=!1,this.material.color.set("green"),setInterval(()=>{this.material.color.r!==0?(this.material=new Dr,this.material.color.set("green")):(this.material=new Dr,this.material.color.set("red"))},400)}onBeforeRender(){this.rotation=[0,this.rotation[2]+.01,this.rotation[2]+.01]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-simple-example"]],features:[ie([gl()])],decls:8,vars:27,consts:[[3,"onRender"],[3,"intensity"],[3,"position","material","rotation","scale"],[3,"onClick","args","material","position"],[3,"args"],[3,"position","intensity","decay"],[3,"args","position","lookAt"]],template:function(r,o){r&1&&(H(0,"th-canvas",0),Le("onRender",function(){return o.onBeforeRender()}),H(1,"th-scene"),fe(2,"th-ambientLight",1)(3,"th-box",2),H(4,"th-box3Helper",3),Le("onClick",function(){return o.selected=!o.selected}),J(),fe(5,"th-gridHelper",4)(6,"th-pointLight",5)(7,"th-perspectiveCamera",6),J()()),r&2&&(j(2),P("intensity",3),j(),P("position",K(15,IA))("material",o.material)("rotation",o.rotation)("scale",o.selected?K(16,ice):K(17,nce)),j(),P("args",$n(18,rce,o.box,o.color))("material",o.material)("position",K(21,IA)),j(),P("args",K(22,oce)),j(),P("position",K(23,YV))("intensity",3)("decay",0),j(),P("args",K(24,sce))("position",K(25,YV))("lookAt",K(26,IA)))},dependencies:[Qt,mU,Ir,Di,ur,Ut,It,Zo,ace],encapsulation:2,changeDetection:0});let n=e;return n})();var cce=["thecanvas"],lce=(n,e)=>({x:0,y:0,width:n,height:e}),dce=()=>[0,0,1],uce=()=>["#ffffff"],hce=()=>[0,0,0],tw=n=>[n,0,0],fce=()=>[200,32,16],mce=()=>["#fac400"],pce=()=>["#f83f0d"],gce=()=>[400,0,0],bce=(n,e,i,t)=>({x:n,y:e,width:i,height:t});function _ce(n,e){if(n&1){let i=Zt();H(0,"th-view",13,4),Le("onRender",function(){let r=ht(i).$implicit,o=At(3);qt();let s=At(3);return ft(r.updateCamera(o.objRef,s.objRef))}),fe(2,"th-perspectiveCamera",14,5),J()}if(n&2){let i=e.$implicit,t=At(1),r=qt(),o=At(3);P("scene",o)("viewPort",ih(11,bce,i.left*r.canvasWidth,i.bottom*r.canvasHeight,i.width*r.canvasWidth,i.height*r.canvasHeight))("scissor",t.viewPort)("scissorTest",!0)("clearColor",i.background),j(2),P("position",i.eye)("up",i.up)("fov",i.fov)("aspect",i.width*r.canvasWidth/(i.height*r.canvasHeight))("near",1)("far",1e4)}}var QV=(()=>{let e=class e{constructor(){this.Math=Math,this.canvasWidth=128,this.canvasHeight=128,this.mouseX=0,this.mouseY=0,this.views=[{left:0,bottom:0,width:.5,height:1,background:new pe(.5,.5,.7),eye:[0,300,1800],up:[0,1,0],fov:30,updateCamera:(t,r)=>{this.updateSize(),t.position.x+=this.mouseX*.05,t.position.x=Math.max(Math.min(t.position.x,2e3),-2e3),t.lookAt(r.position),t.updateProjectionMatrix()}},{left:.5,bottom:0,width:.5,height:.5,background:new pe(.7,.5,.5),eye:[0,1800,0],up:[0,0,1],fov:45,updateCamera:(t,r)=>{this.updateSize(),t.position.x-=this.mouseX*.05,t.position.x=Math.max(Math.min(t.position.x,2e3),-2e3),t.lookAt(t.position.clone().setY(0)),t.updateProjectionMatrix()}},{left:.5,bottom:.5,width:.5,height:.5,background:new pe(.5,.7,.7),eye:[1400,800,1400],up:[0,1,0],fov:60,updateCamera:(t,r)=>{this.updateSize(),t.position.y-=this.mouseX*.05,t.position.y=Math.max(Math.min(t.position.y,1600),-1600),t.lookAt(r.position),t.updateProjectionMatrix()}}]}ngOnInit(){!this.canvas||!this.canvas.rendererCanvas||(this.shadowTexture=new zd(this.canvas.rendererCanvas))}updateSize(){!this.canvas||!this.canvas.rendererCanvas||(this.canvasWidth=this.canvas.rendererCanvas.width,this.canvasHeight=this.canvas.rendererCanvas.height)}onMouseMove(t){if(!this.canvas||!this.canvas.rendererCanvas)return;let r=this.canvas.rendererCanvas.getBoundingClientRect();this.mouseX=t.clientX-r.left-r.width/2,this.mouseY=t.clientY-r.right-r.height/2}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-views-example"]],viewQuery:function(r,o){if(r&1&&Xt(cce,7),r&2){let s;at(s=ct())&&(o.canvas=s.first)}},hostBindings:function(r,o){r&1&&Le("mousemove",function(a){return o.onMouseMove(a)},!1,Zu)},decls:13,vars:39,consts:[["thecanvas",""],["scene",""],["geo",""],["mat",""],["thview",""],["camera",""],[3,"disableDefaultView","viewPort"],[3,"position","args","intensity"],[3,"position","rotation"],[3,"args"],[3,"flatShading","shininess","specular","color"],[3,"position","rotation","geometry","material"],[3,"scene","viewPort","scissor","scissorTest","clearColor","onRender",4,"ngFor","ngForOf"],[3,"onRender","scene","viewPort","scissor","scissorTest","clearColor"],[3,"position","up","fov","aspect","near","far"]],template:function(r,o){if(r&1&&(H(0,"th-canvas",6,0)(2,"th-scene",null,1),fe(4,"th-directionalLight",7),H(5,"th-mesh",8),fe(6,"th-sphereGeometry",9,2)(8,"th-meshPhongMaterial",10,3),J(),fe(10,"th-mesh",11)(11,"th-mesh",11),J(),Vt(12,_ce,4,16,"th-view",12),J()),r&2){let s=At(7),a=At(9);P("disableDefaultView",!0)("viewPort",$n(21,lce,.5*o.canvasWidth,o.canvasHeight)),j(4),P("position",K(24,dce))("args",K(25,uce))("intensity",3),j(),P("position",K(26,hce))("rotation",vt(27,tw,-o.Math.PI/2)),j(),P("args",K(29,fce)),j(2),P("flatShading",!1)("shininess",30)("specular",K(30,mce))("color",K(31,pce)),j(2),P("position",vt(32,tw,-400))("rotation",vt(34,tw,-o.Math.PI/2))("geometry",s.objRef)("material",a.objRef),j(),P("position",K(36,gce))("rotation",vt(37,tw,-o.Math.PI/2))("geometry",s.objRef)("material",a.objRef),j(),P("ngForOf",o.views)}},dependencies:[to,Qt,dr,Ti,Ut,lo,El,It,Pr],changeDetection:0});let n=e;return n})();var vce=()=>[0,1,0],yce=()=>[0,0,.2],xce=()=>[0,0],wce=()=>[10,10],KV=()=>[10,10,10],Mce=()=>[45,2,.1,100],Sce=()=>[0,0,0],JV=(()=>{let e=class e{constructor(){this.assetPath1=`${an}DamagedHelmet.glb`,this.assetPath2=`${an}BoomBox.glb`,this.rotation=[0,0,0]}onBeforeRender(){this.rotation=[0,this.rotation[1]+.01,0]}resetRotation(){this.rotation=[0,0,0]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-multi-renderer-example"]],features:[ie([gl(),D3()])],decls:13,vars:21,consts:[[3,"onRender"],[3,"thStats"],[3,"intensity"],["loadGLTF","",3,"url","rotation","position"],[3,"position","center"],[1,"label"],[3,"pointerdown"],[3,"args"],[3,"position","decay"],[3,"args","position","lookAt"]],template:function(r,o){r&1&&(H(0,"th-canvas",0),Le("onRender",function(){return o.onBeforeRender()}),H(1,"th-scene",1),fe(2,"th-ambientLight",2),H(3,"th-object3D",3)(4,"th-cSS2DObject",4)(5,"div",5),kt(6," A Helmet "),H(7,"button",6),Le("pointerdown",function(){return o.resetRotation()}),kt(8,"Reset"),J()()()(),fe(9,"th-gridHelper",7)(10,"th-pointLight",8),H(11,"th-perspectiveCamera",9),fe(12,"th-orbitControls"),J()()()),r&2&&(j(),P("thStats",!0),j(),P("intensity",3),j(),P("url",o.assetPath1)("rotation",o.rotation)("position",K(13,vce)),j(),P("position",K(14,yce))("center",K(15,xce)),j(5),P("args",K(16,wce)),j(),P("position",K(17,KV))("decay",0),j(),P("args",K(18,Mce))("position",K(19,KV))("lookAt",K(20,Sce)))},dependencies:[In,Qt,me,Ir,Di,ur,Ut,QU,It,Yn,An],styles:[".label{background-color:#d3d3d3;border-radius:5px;line-height:1rem;padding:.5rem;display:inline-block}"],changeDetection:0});let n=e;return n})();var Rce=()=>[10,10,10],Tce=()=>[45,2,1,1e4],Cce=()=>[0,0,3e3],Ece=()=>[0,0,0];function Dce(n,e){if(n&1&&(H(0,"th-cSS3DObject",12)(1,"div",13)(2,"div",14),kt(3),J(),H(4,"div",15),kt(5),J(),H(6,"div",16),kt(7),fe(8,"br"),kt(9),J()()()),n&2){let i=e.$implicit,t=e.index,r=qt();P("position",r.poses[t].position),j(),zo("background","rgba(0,127,127,"+(r.Math.random()*.5+.25)+")"),j(2),$s(" ",t+1," "),j(2),$s(" ",i[0]," "),j(2),$s(" ",i[1]," "),j(2),$s(" ",i[2]," ")}}var ez=(()=>{let e=class e{constructor(){this.Math=Math,this.table=[["H","Hydrogen","1.00794",1,1],["He","Helium","4.002602",18,1],["Li","Lithium","6.941",1,2],["Be","Beryllium","9.012182",2,2],["B","Boron","10.811",13,2],["C","Carbon","12.0107",14,2],["N","Nitrogen","14.0067",15,2],["O","Oxygen","15.9994",16,2],["F","Fluorine","18.9984032",17,2],["Ne","Neon","20.1797",18,2],["Na","Sodium","22.98976...",1,3],["Mg","Magnesium","24.305",2,3],["Al","Aluminium","26.9815386",13,3],["Si","Silicon","28.0855",14,3],["P","Phosphorus","30.973762",15,3],["S","Sulfur","32.065",16,3],["Cl","Chlorine","35.453",17,3],["Ar","Argon","39.948",18,3],["K","Potassium","39.948",1,4],["Ca","Calcium","40.078",2,4],["Sc","Scandium","44.955912",3,4],["Ti","Titanium","47.867",4,4],["V","Vanadium","50.9415",5,4],["Cr","Chromium","51.9961",6,4],["Mn","Manganese","54.938045",7,4],["Fe","Iron","55.845",8,4],["Co","Cobalt","58.933195",9,4],["Ni","Nickel","58.6934",10,4],["Cu","Copper","63.546",11,4],["Zn","Zinc","65.38",12,4],["Ga","Gallium","69.723",13,4],["Ge","Germanium","72.63",14,4],["As","Arsenic","74.9216",15,4],["Se","Selenium","78.96",16,4],["Br","Bromine","79.904",17,4],["Kr","Krypton","83.798",18,4],["Rb","Rubidium","85.4678",1,5],["Sr","Strontium","87.62",2,5],["Y","Yttrium","88.90585",3,5],["Zr","Zirconium","91.224",4,5],["Nb","Niobium","92.90628",5,5],["Mo","Molybdenum","95.96",6,5],["Tc","Technetium","(98)",7,5],["Ru","Ruthenium","101.07",8,5],["Rh","Rhodium","102.9055",9,5],["Pd","Palladium","106.42",10,5],["Ag","Silver","107.8682",11,5],["Cd","Cadmium","112.411",12,5],["In","Indium","114.818",13,5],["Sn","Tin","118.71",14,5],["Sb","Antimony","121.76",15,5],["Te","Tellurium","127.6",16,5],["I","Iodine","126.90447",17,5],["Xe","Xenon","131.293",18,5],["Cs","Caesium","132.9054",1,6],["Ba","Barium","132.9054",2,6],["La","Lanthanum","138.90547",4,9],["Ce","Cerium","140.116",5,9],["Pr","Praseodymium","140.90765",6,9],["Nd","Neodymium","144.242",7,9],["Pm","Promethium","(145)",8,9],["Sm","Samarium","150.36",9,9],["Eu","Europium","151.964",10,9],["Gd","Gadolinium","157.25",11,9],["Tb","Terbium","158.92535",12,9],["Dy","Dysprosium","162.5",13,9],["Ho","Holmium","164.93032",14,9],["Er","Erbium","167.259",15,9],["Tm","Thulium","168.93421",16,9],["Yb","Ytterbium","173.054",17,9],["Lu","Lutetium","174.9668",18,9],["Hf","Hafnium","178.49",4,6],["Ta","Tantalum","180.94788",5,6],["W","Tungsten","183.84",6,6],["Re","Rhenium","186.207",7,6],["Os","Osmium","190.23",8,6],["Ir","Iridium","192.217",9,6],["Pt","Platinum","195.084",10,6],["Au","Gold","196.966569",11,6],["Hg","Mercury","200.59",12,6],["Tl","Thallium","204.3833",13,6],["Pb","Lead","207.2",14,6],["Bi","Bismuth","208.9804",15,6],["Po","Polonium","(209)",16,6],["At","Astatine","(210)",17,6],["Rn","Radon","(222)",18,6],["Fr","Francium","(223)",1,7],["Ra","Radium","(226)",2,7],["Ac","Actinium","(227)",4,10],["Th","Thorium","232.03806",5,10],["Pa","Protactinium","231.0588",6,10],["U","Uranium","238.02891",7,10],["Np","Neptunium","(237)",8,10],["Pu","Plutonium","(244)",9,10],["Am","Americium","(243)",10,10],["Cm","Curium","(247)",11,10],["Bk","Berkelium","(247)",12,10],["Cf","Californium","(251)",13,10],["Es","Einstenium","(252)",14,10],["Fm","Fermium","(257)",15,10],["Md","Mendelevium","(258)",16,10],["No","Nobelium","(259)",17,10],["Lr","Lawrencium","(262)",18,10],["Rf","Rutherfordium","(267)",4,7],["Db","Dubnium","(268)",5,7],["Sg","Seaborgium","(271)",6,7],["Bh","Bohrium","(272)",7,7],["Hs","Hassium","(270)",8,7],["Mt","Meitnerium","(276)",9,7],["Ds","Darmstadium","(281)",10,7],["Rg","Roentgenium","(280)",11,7],["Cn","Copernicium","(285)",12,7],["Nh","Nihonium","(286)",13,7],["Fl","Flerovium","(289)",14,7],["Mc","Moscovium","(290)",15,7],["Lv","Livermorium","(293)",16,7],["Ts","Tennessine","(294)",17,7],["Og","Oganesson","(294)",18,7]],this.poses=[],this.createRandomPoses()}createRandomPoses(){this.poses=[];for(let t=0;t<this.table.length;t++){let r=new Tt;r.position.set(Math.random()*4e3-2e3,Math.random()*4e3-2e3,Math.random()*4e3-2e3),this.poses.push(r)}}createTablePoses(){this.poses=this.table.map(t=>{let r=new Tt;return r.position.x=t[3]*140-1330,r.position.y=-(t[4]*180)+990,r})}createSpherePoses(){let t=new S,r=this.table.length;this.poses=this.table.map((o,s)=>{let a=Math.acos(-1+2*s/r),c=Math.sqrt(r*Math.PI)*a,l=new Tt;return l.position.setFromSphericalCoords(800,a,c),t.copy(l.position).multiplyScalar(2),l.lookAt(t),l})}createHelixPoses(){let t=new S;this.poses=this.table.map((r,o)=>{let s=o*.175+Math.PI,a=-(o*8)+450,c=new Tt;return c.position.setFromCylindricalCoords(900,s,a),t.x=c.position.x*2,t.y=c.position.y,t.z=c.position.z*2,c.lookAt(t),c})}createGridPoses(){this.poses=this.table.map((t,r)=>{let o=new Tt;return o.position.x=r%5*400-800,o.position.y=-(Math.floor(r/5)%5)*400+800,o.position.z=Math.floor(r/25)*1e3-2e3,o})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-css3d-multi-renderer-example"]],features:[ie([Gy()])],decls:16,vars:15,consts:[["id","menu"],["id","table",3,"click"],["id","sphere",3,"click"],["id","helix",3,"click"],["id","grid",3,"click"],[1,"canvas-background",3,"renderOnDemand"],[3,"thStats"],[3,"intensity"],[3,"position",4,"ngFor","ngForOf"],[3,"position","intensity"],[3,"args","position","lookAt"],[3,"minDistance","maxDistance"],[3,"position"],[1,"element"],[1,"number"],[1,"symbol"],[1,"details"]],template:function(r,o){r&1&&(H(0,"div",0)(1,"button",1),Le("click",function(){return o.createTablePoses()}),kt(2,"TABLE"),J(),H(3,"button",2),Le("click",function(){return o.createSpherePoses()}),kt(4,"SPHERE"),J(),H(5,"button",3),Le("click",function(){return o.createHelixPoses()}),kt(6,"HELIX"),J(),H(7,"button",4),Le("click",function(){return o.createGridPoses()}),kt(8,"GRID"),J()(),H(9,"th-canvas",5)(10,"th-scene",6),fe(11,"th-ambientLight",7),Vt(12,Dce,10,7,"th-cSS3DObject",8),fe(13,"th-pointLight",9),H(14,"th-perspectiveCamera",10),fe(15,"th-trackballControls",11),J()()()),r&2&&(j(9),P("renderOnDemand",!0),j(),P("thStats",!0),j(),P("intensity",3),j(),P("ngForOf",o.table),j(),P("position",K(11,Rce))("intensity",3),j(),P("args",K(12,Tce))("position",K(13,Cce))("lookAt",K(14,Ece)),j(),P("minDistance",500)("maxDistance",6e3))},dependencies:[to,Ox,Qt,Di,ur,Ut,zx,It,vl,An],styles:[".canvas-background[_ngcontent-%COMP%]{background-color:#000}a[_ngcontent-%COMP%]{color:#8ff}#menu[_ngcontent-%COMP%]{position:absolute;bottom:20px;width:100%;text-align:center;z-index:10}.element[_ngcontent-%COMP%]{width:120px;height:160px;box-shadow:0 0 12px #00ffff80;border:1px solid rgba(127,255,255,.25);font-family:Helvetica,sans-serif;text-align:center;line-height:normal;cursor:default}.element[_ngcontent-%COMP%]:hover{box-shadow:0 0 12px #00ffffbf;border:1px solid rgba(127,255,255,.75)}.element[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;font-size:12px;color:#7fffffbf}.element[_ngcontent-%COMP%]   .symbol[_ngcontent-%COMP%]{position:absolute;top:40px;left:0;right:0;font-size:60px;font-weight:700;color:#ffffffbf;text-shadow:0 0 10px rgba(0,255,255,.95)}.element[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:0;right:0;font-size:12px;color:#7fffffbf}button[_ngcontent-%COMP%]{color:#7fffffbf;background:transparent;outline:1px solid rgba(127,255,255,.75);border:0px;padding:5px 10px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#00ffff80}button[_ngcontent-%COMP%]:active{color:#000;background-color:#00ffffbf}"],changeDetection:0});let n=e;return n})();var PA=n=>[0,n,0],Ace=()=>[0,1,0],tz=n=>[n,0,0],Ice=n=>[0,.04,n],Pce=()=>[.0043,.0043,.0043],kce=()=>[1960,1280],Fce=()=>[4,10,2],jce=()=>[100,100],Oce=()=>[55,2,.1,100],Nce=(n,e)=>[n,0,e],Lce=()=>[0,0,0],iz=(()=>{let e=class e{constructor(t){this.THREE=fl,this.Math=Math,this.sprite=!1,this.glbPath=`${an}mac-draco.glb`,this.clock=new ao(!0),this.rotation=[0,0,0],this.position=[0,0,0],this.webGlRenderer=te(Qd),t.setDecoderPath("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/jsm/libs/draco/gltf/"),t.setCrossOrigin("no-cors"),this.webGlRenderer.domElement.style.pointerEvents="none",this.webGlRenderer.domElement.style.zIndex="1",this.calcPose()}onBeforeRender(){this.calcPose()}calcPose(){let t=this.clock.getElapsedTime();this.rotation=[st.lerp(this.rotation[0],Math.cos(t/2)/20+.25,.1),st.lerp(this.rotation[1],Math.sin(t/4)/20,.1),st.lerp(this.rotation[2],Math.sin(t/8)/20,.1)],this.position=[0,st.lerp(this.position[1],(-2+Math.sin(t/2))/2,.1),0]}};e.\u0275fac=function(r){return new(r||e)(F(_l))},e.\u0275cmp=L({type:e,selectors:[["app-html-with-css3d-example"]],features:[ie([gl(),Gy()])],decls:23,vars:59,consts:[["holder",""],["light",""],[3,"onRender","thStats","shadow"],[3,"intensity"],[3,"rotation","position"],["loadGLTF","",3,"castShadow","url","position","rotation"],[3,"refById"],[3,"rotation","position","scale"],[3,"args"],[3,"opacity","blending","side","color"],["src",O_`./multi-view-postprocessing-example`,2,"width","1960px","height","1280px"],[3,"castShadow","position","lookAt","color","intensity"],[3,"receiveShadow","rotation","position"],[3,"color"],[3,"args","position","lookAt"]],template:function(r,o){if(r&1){let s=Zt();H(0,"th-canvas",2),Le("onRender",function(){return ht(s),ft(o.onBeforeRender())}),H(1,"th-scene"),fe(2,"th-ambientLight",3),H(3,"th-group",4)(4,"th-object3D",5)(5,"th-mesh",6)(6,"th-group",7,0)(8,"th-mesh"),fe(9,"th-planeGeometry",8)(10,"th-meshBasicMaterial",9),Fi(11,"color"),J(),H(12,"th-cSS3DObject"),fe(13,"iframe",10),J()()()()(),fe(14,"th-directionalLight",11,1),Fi(16,"color"),H(17,"th-mesh",12),fe(18,"th-planeGeometry",8)(19,"th-meshBasicMaterial",13),Fi(20,"color"),J(),H(21,"th-perspectiveCamera",14),fe(22,"th-orbitControls"),J()()()}r&2&&(P("thStats",!0)("shadow",!0),j(2),P("intensity",3),j(),P("rotation",vt(37,PA,o.Math.PI))("position",K(39,Ace)),j(),P("castShadow",!0)("url",o.glbPath)("position",o.position)("rotation",o.rotation),j(),P("refById","Cube008_2"),j(),P("rotation",vt(40,tz,-1*o.Math.PI/2))("position",vt(42,Ice,-.02))("scale",K(44,Pce)),j(3),P("args",K(45,kce)),j(),P("opacity",0)("blending",o.THREE.NoBlending)("side",o.THREE.DoubleSide)("color",Gi(11,31,"black")),j(4),P("castShadow",!0)("position",K(46,Fce))("lookAt",vt(47,PA,-3))("color",Gi(16,33,"#ffffff"))("intensity",2.2),j(3),P("receiveShadow",!0)("rotation",vt(49,tz,3*o.Math.PI/2))("position",vt(51,PA,-3)),j(),P("args",K(53,jce)),j(),P("color",Gi(20,35,"#efefef")),j(2),P("args",K(54,Oce))("position",$n(55,Nce,-5,-15))("lookAt",K(58,Lce)))},dependencies:[In,Qt,me,Di,dr,Cl,Ti,Ut,zx,_a,Xo,It,Yn,An,Bf,Ea],encapsulation:2,changeDetection:0});let n=e;return n})();var Wg=[{path:"basic-example",data:{title:"Basic Example",exampleComponent:U3,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/basic-example/basic-example.component.ts"]}},{path:"simple-example",data:{title:"Simple Example",exampleComponent:ZV,declarations:["SimpleExampleComponent","Box"],codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/simple-example/simple-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/simple-example/simple-example.component.ts"]}},{path:"introductory-example",data:{title:"Introductory Example",exampleComponent:dV,declarations:["IntroductoryExampleComponent","Box"],codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/introductory-example/introductory-example.component.ts"]}},{path:"controls-example",data:{title:"Controls Example",exampleComponent:W3,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/controls-example/controls-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/controls-example/controls-example.component.ts"]}},{path:"loader-example",data:{title:"Loader Example",exampleComponent:hV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/loader-example/loader-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/loader-example/loader-example.component.ts"]}},{path:"dynamic loader-example",data:{title:"Dynamic Loader Example",exampleComponent:q3,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/dynamic-loader-example/dynamic-loader-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/dynamic-loader-example/dynamic-loader-example.component.ts"]}},{path:"events-example",data:{title:"Events Example",exampleComponent:Z3,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/events-example/events-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/events-example/events-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/events-example/events-example.component.scss"]}},{path:"instanced-mesh-example",data:{title:"Instanced Mesh Example",exampleComponent:lV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/instanced-mesh-example/instanced-mesh-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/instanced-mesh-example/instanced-mesh-example.component.ts"]}},{path:"post-processing-example",data:{title:"Post Processing Example",exampleComponent:qV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/post-processing-example/post-processing-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/post-processing-example/post-processing-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/post-processing-example/post-processing-example.component.scss"]}},{path:"views-example",data:{title:"Multiple Views Example",exampleComponent:QV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/views-example/views-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/views-example/views-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/views-example/views-example.component.scss"]}},{path:"multi-scene-example",data:{title:"Multiple Scenes Example",codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-scene-example/multi-scene-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-scene-example/multi-scene-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-scene-example/multi-scene-example.component.scss"],exampleComponent:fV}},{path:"multi-view-postprocessing-example",data:{title:"Multiple View Post Processing Example",exampleComponent:mV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-view-postprocessing-example/multi-view-postprocessing-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-view-postprocessing-example/multi-view-postprocessing-example.component.ts"]}},{path:"animation-example",data:{title:"Animation Example",exampleComponent:B3,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/animation-example/animation-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/animation-example/animation-example.component.ts"]}},{path:"plyloader-example",data:{title:"PLY Loader Example",exampleComponent:WV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/plyloader-example/plyloader-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/plyloader-example/plyloader-example.component.ts"]}},{path:"on-demand-example",data:{title:"On-Demand Rendering Example",exampleComponent:UV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/on-demand-example/on-demand-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/on-demand-example/on-demand-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/on-demand-example/on-demand-example.component.scss"]}},{path:"ref-by-id-example",data:{title:"Ref By Id Example",exampleComponent:XV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/ref-by-id-example/ref-by-id-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/ref-by-id-example/ref-by-id-example.component.ts"]}},{path:"html-example",data:{title:"Html Content Example",exampleComponent:sV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-example/html-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-example/html-example.component.ts"]}},{path:"outline-pass-events-example",data:{title:"Render Pass + Events Example",exampleComponent:HV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/outline-pass-events-example/outline-pass-events-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/outline-pass-events-example/outline-pass-events-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/outline-pass-events-example/outline-pass-events-example.component.scss"]}},{path:"multi-renderer-example",data:{title:"Multi Renderer Example: WebGL + CSS2D",exampleComponent:JV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-renderer-example/multi-renderer-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-renderer-example/multi-renderer-example.component.ts"]}},{path:"css3d-renderer-example",data:{title:"CSS3D Renderer Example",exampleComponent:ez,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/css3d-renderer-example/css3d-renderer-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/css3d-renderer-example/css3d-renderer-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/css3d-renderer-example/css3d-renderer-example.component.scss"]}},{path:"html-with-css3d-example",data:{title:"Html with CSS3D Example",exampleComponent:iz,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-with-css3d-example/html-with-css3d-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-with-css3d-example/html-with-css3d-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-with-css3d-example/html-with-css3d-example.component.scss"]}}];Wg.forEach(n=>n.component=lU);var Bce=[];Wg.forEach(n=>{Bce.push(n.component)});var nz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({imports:[MT.forRoot(Wg),MT]});let n=e;return n})();var rz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({imports:[Mi,Mi]});let n=e;return n})();var Vce=["*"],zce='@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-list-divider::after{content:"";display:block;border-bottom-width:1px;border-bottom-style:solid}}.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item__wrapper{display:block}.mdc-list-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer}.mdc-list-item:focus{outline:none}.mdc-list-item.mdc-list-item--with-one-line{height:48px}.mdc-list-item.mdc-list-item--with-two-lines{height:64px}.mdc-list-item.mdc-list-item--with-three-lines{height:88px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--disabled,.mdc-list-item.mdc-list-item--non-interactive{cursor:auto}.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px double rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected:focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected:focus::before{border-color:CanvasText}}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__content[for]{pointer-events:none}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item__overline-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start,.mdc-list-item--with-leading-avatar .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-avatar .mdc-list-item__start{border-radius:50%}.mdc-list-item--with-leading-icon.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start,.mdc-list-item--with-leading-icon .mdc-list-item__start[dir=rtl]{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-thumbnail.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-thumbnail.mdc-list-item,.mdc-list-item--with-leading-thumbnail.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-thumbnail .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-thumbnail .mdc-list-item__start,.mdc-list-item--with-leading-thumbnail .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-image.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-image.mdc-list-item,.mdc-list-item--with-leading-image.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-image .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-image .mdc-list-item__start,.mdc-list-item--with-leading-image .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-video.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-video.mdc-list-item,.mdc-list-item--with-leading-video.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-video .mdc-list-item__start{margin-left:0;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-video .mdc-list-item__start,.mdc-list-item--with-leading-video .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-checkbox.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-radio.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-radio.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-radio .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-radio .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-switch.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-switch.mdc-list-item,.mdc-list-item--with-leading-switch.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-switch .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-switch .mdc-list-item__start,.mdc-list-item--with-leading-switch .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item,.mdc-list-item--with-trailing-icon.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-icon .mdc-list-item__end,.mdc-list-item--with-trailing-icon .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item,.mdc-list-item--with-trailing-meta.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-trailing-meta .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mdc-typography-caption-font-family);font-size:var(--mdc-typography-caption-font-size);line-height:var(--mdc-typography-caption-line-height);font-weight:var(--mdc-typography-caption-font-weight);letter-spacing:var(--mdc-typography-caption-letter-spacing);text-decoration:var(--mdc-typography-caption-text-decoration);text-transform:var(--mdc-typography-caption-text-transform)}.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-radio.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-radio .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-radio .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-switch.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-switch.mdc-list-item,.mdc-list-item--with-trailing-switch.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-switch .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-switch .mdc-list-item__end,.mdc-list-item--with-trailing-switch .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-switch.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item{padding-left:16px;padding-right:16px}[dir=rtl] .mdc-list-item,.mdc-list-item[dir=rtl]{padding-left:16px;padding-right:16px}.mdc-list-group .mdc-deprecated-list{padding:0}.mdc-list-group__subheader{margin:calc((3rem - 1.5rem)/2) 16px}.mdc-list-divider{padding:0;background-clip:content-box}.mdc-list-divider.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset{padding-left:16px;padding-right:auto}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset,.mdc-list-divider.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:16px}.mdc-list-divider.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset{padding-left:auto;padding-right:16px}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset,.mdc-list-divider.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset[dir=rtl]{padding-left:16px;padding-right:auto}.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset{padding-left:0px;padding-right:auto}[dir=rtl] .mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:0px}[dir=rtl] .mdc-list-divider,.mdc-list-divider[dir=rtl]{padding:0}.mdc-list-item{background-color:var(--mdc-list-list-item-container-color)}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item--with-one-line{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-avatar,.mdc-list-item--with-one-line.mdc-list-item--with-leading-icon,.mdc-list-item--with-one-line.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-one-line.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-one-line.mdc-list-item--with-leading-radio,.mdc-list-item--with-one-line.mdc-list-item--with-leading-switch{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-image,.mdc-list-item--with-one-line.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines.mdc-list-item--with-leading-avatar,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-icon,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-radio,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-switch,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-image,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-three-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height)}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height)}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height)}.mdc-list-item__primary-text{color:var(--mdc-list-list-item-label-text-color)}.mdc-list-item__primary-text{font-family:var(--mdc-list-list-item-label-text-font);line-height:var(--mdc-list-list-item-label-text-line-height);font-size:var(--mdc-list-list-item-label-text-size);font-weight:var(--mdc-list-list-item-label-text-weight);letter-spacing:var(--mdc-list-list-item-label-text-tracking)}.mdc-list-item__secondary-text{color:var(--mdc-list-list-item-supporting-text-color)}.mdc-list-item__secondary-text{font-family:var(--mdc-list-list-item-supporting-text-font);line-height:var(--mdc-list-list-item-supporting-text-line-height);font-size:var(--mdc-list-list-item-supporting-text-size);font-weight:var(--mdc-list-list-item-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-supporting-text-tracking)}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color)}.mdc-list-item--with-leading-icon .mdc-list-item__start{width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start>i{font-size:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon{font-size:var(--mdc-list-list-item-leading-icon-size);width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon,.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon>.materialdesignWizIconSvgsSvgIcon{display:block}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size);height:var(--mdc-list-list-item-leading-avatar-size)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color)}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font);line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height);font-size:var(--mdc-list-list-item-trailing-supporting-text-size);font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end>i{font-size:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon{font-size:var(--mdc-list-list-item-trailing-icon-size);width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon,.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon>.materialdesignWizIconSvgsSvgIcon{display:block}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color)}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text,.mdc-list-item--disabled .mdc-list-item__overline-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity)}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color)}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color)}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color)}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color);opacity:var(--mdc-list-list-item-hover-state-layer-opacity)}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color);opacity:var(--mdc-list-list-item-disabled-state-layer-opacity)}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color);opacity:var(--mdc-list-list-item-focus-state-layer-opacity)}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape);background-color:var(--mdc-list-list-item-leading-avatar-color)}.mat-mdc-list-item-icon{font-size:var(--mdc-list-list-item-leading-icon-size)}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape);--mat-mdc-focus-indicator-border-radius:var(--mat-list-active-indicator-shape)}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color)}',Hce=["unscopedContent"],Gce=["text"],Wce=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],$ce=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var qce=new Ee("ListOption"),Xce=(()=>{let e=class e{constructor(t){this._elementRef=t}};e.\u0275fac=function(r){return new(r||e)(F(et))},e.\u0275dir=$e({type:e,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"],standalone:!0});let n=e;return n})(),Yce=(()=>{let e=class e{constructor(t){this._elementRef=t}};e.\u0275fac=function(r){return new(r||e)(F(et))},e.\u0275dir=$e({type:e,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"],standalone:!0});let n=e;return n})(),Zce=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=$e({type:e,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"],standalone:!0});let n=e;return n})(),oz=(()=>{let e=class e{constructor(t){this._listOption=t}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}};e.\u0275fac=function(r){return new(r||e)(F(qce,8))},e.\u0275dir=$e({type:e,hostVars:4,hostBindings:function(r,o){r&2&&$t("mdc-list-item__start",o._isAlignedAtStart())("mdc-list-item__end",!o._isAlignedAtStart())},standalone:!0});let n=e;return n})(),Qce=(()=>{let e=class e extends oz{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275dir=$e({type:e,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],standalone:!0,features:[q]});let n=e;return n})(),Kce=(()=>{let e=class e extends oz{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275dir=$e({type:e,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],standalone:!0,features:[q]});let n=e;return n})(),Jce=new Ee("MAT_LIST_CONFIG"),iw=(()=>{let e=class e{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=te(Jce,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=ho(t)}get disabled(){return this._disabled}set disabled(t){this._disabled=ho(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=$e({type:e,hostVars:1,hostBindings:function(r,o){r&2&&Hi("aria-disabled",o.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},standalone:!0});let n=e;return n})(),ele=(()=>{let e=class e{set lines(t){this._explicitLines=_c(t,null),this._updateItemLines(!1)}get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(t){this._disableRipple=ho(t)}get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(t){this._disabled=ho(t)}get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(t,r,o,s,a,c){this._elementRef=t,this._ngZone=r,this._listBase=o,this._platform=s,this._explicitLines=null,this._disableRipple=!1,this._disabled=!1,this._subscriptions=new _i,this._rippleRenderer=null,this._hasUnscopedTextContent=!1,this.rippleConfig=a||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._noopAnimations=c==="NoopAnimations",o&&!o._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new fg(this,this._ngZone,this._hostElement,this._platform),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(rs(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(t){if(!this._lines||!this._titles||!this._unscopedContent)return;t&&this._checkDomForUnscopedTextContent();let r=this._explicitLines??this._inferLinesFromContent(),o=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",r<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",r<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",r===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",r===3),this._hasUnscopedTextContent){let s=this._titles.length===0&&r===1;o.classList.toggle("mdc-list-item__primary-text",s),o.classList.toggle("mdc-list-item__secondary-text",!s)}else o.classList.remove("mdc-list-item__primary-text"),o.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let t=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(t+=1),t}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(t=>t.nodeType!==t.COMMENT_NODE).some(t=>!!(t.textContent&&t.textContent.trim()))}};e.\u0275fac=function(r){return new(r||e)(F(et),F(Qe),F(iw,8),F(wi),F(nu,8),F(Gn,8))},e.\u0275dir=$e({type:e,contentQueries:function(r,o,s){if(r&1&&(Yi(s,Qce,4),Yi(s,Kce,4)),r&2){let a;at(a=ct())&&(o._avatars=a),at(a=ct())&&(o._icons=a)}},hostVars:4,hostBindings:function(r,o){r&2&&(Hi("aria-disabled",o.disabled)("disabled",o._isButtonElement&&o.disabled||null),$t("mdc-list-item--disabled",o.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"},standalone:!0});let n=e;return n})();var sz=(()=>{let e=class e extends ele{get activated(){return this._activated}set activated(t){this._activated=ho(t)}constructor(t,r,o,s,a,c){super(t,r,o,s,a,c),this._activated=!1}_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}};e.\u0275fac=function(r){return new(r||e)(F(et),F(Qe),F(iw,8),F(wi),F(nu,8),F(Gn,8))},e.\u0275cmp=L({type:e,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(r,o,s){if(r&1&&(Yi(s,Yce,5),Yi(s,Xce,5),Yi(s,Zce,5)),r&2){let a;at(a=ct())&&(o._lines=a),at(a=ct())&&(o._titles=a),at(a=ct())&&(o._meta=a)}},viewQuery:function(r,o){if(r&1&&(Xt(Hce,5),Xt(Gce,5)),r&2){let s;at(s=ct())&&(o._unscopedContent=s.first),at(s=ct())&&(o._itemText=s.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:11,hostBindings:function(r,o){r&2&&(Hi("aria-current",o._getAriaCurrent()),$t("mdc-list-item--activated",o.activated)("mdc-list-item--with-leading-avatar",o._avatars.length!==0)("mdc-list-item--with-leading-icon",o._icons.length!==0)("mdc-list-item--with-trailing-meta",o._meta.length!==0)("_mat-animation-noopable",o._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],standalone:!0,features:[q,Ei],ngContentSelectors:$ce,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-mdc-focus-indicator"]],template:function(r,o){if(r&1){let s=Zt();ae(Wce),Q(0),H(1,"span",1),Q(2,1),Q(3,2),H(4,"span",2,0),Le("cdkObserveContent",function(){return ht(s),ft(o._updateItemLines(!0))}),Q(6,3),J()(),Q(7,4),Q(8,5),fe(9,"div",3)}},dependencies:[ix],encapsulation:2,changeDetection:0});let n=e;return n})();var az=(()=>{let e=class e extends iw{constructor(){super(...arguments),this._isNonInteractive=!1}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-mdc-nav-list","mat-mdc-list-base","mdc-list"],exportAs:["matNavList"],standalone:!0,features:[ie([{provide:iw,useExisting:e}]),q,Ei],ngContentSelectors:Vce,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},styles:[zce],encapsulation:2,changeDetection:0});let n=e;return n})();var $g=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({imports:[nx,Go,Mi,ru,M1,rz]});let n=e;return n})();var ile=["*",[["mat-toolbar-row"]]],nle=["*","mat-toolbar-row"],rle=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=$e({type:e,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0});let n=e;return n})(),cz=(()=>{let e=class e{constructor(t,r,o){this._elementRef=t,this._platform=r,this._document=o}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}};e.\u0275fac=function(r){return new(r||e)(F(et),F(wi),F(xt))},e.\u0275cmp=L({type:e,selectors:[["mat-toolbar"]],contentQueries:function(r,o,s){if(r&1&&Yi(s,rle,5),r&2){let a;at(a=ct())&&(o._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(r,o){r&2&&(Ho(o.color?"mat-"+o.color:""),$t("mat-toolbar-multiple-rows",o._toolbarRows.length>0)("mat-toolbar-single-row",o._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[Ei],ngContentSelectors:nle,decls:2,vars:0,template:function(r,o){r&1&&(ae(ile),Q(0),Q(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color);--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color)}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0});let n=e;return n})();var qg=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({imports:[Mi,Mi]});let n=e;return n})();var ow=["*"],ale=["content"],cle=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],lle=["mat-drawer","mat-drawer-content","*"];function dle(n,e){if(n&1){let i=Zt();H(0,"div",1),Le("click",function(){ht(i);let r=qt();return ft(r._onBackdropClicked())}),J()}if(n&2){let i=qt();$t("mat-drawer-shown",i._isShowingBackdrop())}}function ule(n,e){n&1&&(H(0,"mat-drawer-content"),Q(1,2),J())}var hle=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],fle=["mat-sidenav","mat-sidenav-content","*"];function mle(n,e){if(n&1){let i=Zt();H(0,"div",1),Le("click",function(){ht(i);let r=qt();return ft(r._onBackdropClicked())}),J()}if(n&2){let i=qt();$t("mat-drawer-shown",i._isShowingBackdrop())}}function ple(n,e){n&1&&(H(0,"mat-sidenav-content"),Q(1,2),J())}var gle='.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color);box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}',lz={transformDrawer:bx("transform",[cu("open, open-instant",Qo({transform:"none",visibility:"visible"})),cu("void",Qo({"box-shadow":"none",visibility:"hidden"})),lu("void => open-instant",au("0ms")),lu("void <=> open, open-instant => void",au("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])};var ble=new Ee("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:_le}),kA=new Ee("MAT_DRAWER_CONTAINER");function _le(){return!1}var nw=(()=>{let e=class e extends Ml{constructor(t,r,o,s,a){super(o,s,a),this._changeDetectorRef=t,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}};e.\u0275fac=function(r){return new(r||e)(F(Wi),F(ge(()=>uz)),F(et),F(If),F(Qe))},e.\u0275cmp=L({type:e,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(r,o){r&2&&zo("margin-left",o._container._contentMargins.left,"px")("margin-right",o._container._contentMargins.right,"px")},standalone:!0,features:[ie([{provide:Ml,useExisting:e}]),q,Ei],ngContentSelectors:ow,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})(),dz=(()=>{let e=class e{get position(){return this._position}set position(t){t=t==="end"?"end":"start",t!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=ho(t)}get autoFocus(){let t=this._autoFocus;return t??(this.mode==="side"?"dialog":"first-tabbable")}set autoFocus(t){(t==="true"||t==="false"||t==null)&&(t=ho(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(ho(t))}constructor(t,r,o,s,a,c,l,d){this._elementRef=t,this._focusTrapFactory=r,this._focusMonitor=o,this._platform=s,this._ngZone=a,this._interactivityChecker=c,this._doc=l,this._container=d,this._focusTrap=null,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new gt,this._animationEnd=new gt,this._animationState="void",this.openedChange=new nt(!0),this._openedStream=this.openedChange.pipe(vi(u=>u),lt(()=>{})),this.openedStart=this._animationStarted.pipe(vi(u=>u.fromState!==u.toState&&u.toState.indexOf("open")===0),Eu(void 0)),this._closedStream=this.openedChange.pipe(vi(u=>!u),lt(()=>{})),this.closedStart=this._animationStarted.pipe(vi(u=>u.fromState!==u.toState&&u.toState==="void"),Eu(void 0)),this._destroyed=new gt,this.onPositionChanged=new nt,this._modeChanged=new gt,this.openedChange.subscribe(u=>{u?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{No(this._elementRef.nativeElement,"keydown").pipe(vi(u=>u.keyCode===27&&!this.disableClose&&!Ef(u)),Ci(this._destroyed)).subscribe(u=>this._ngZone.run(()=>{this.close(),u.stopPropagation(),u.preventDefault()}))}),this._animationEnd.pipe(Pc((u,h)=>u.fromState===h.fromState&&u.toState===h.toState)).subscribe(u=>{let{fromState:h,toState:f}=u;(f.indexOf("open")===0&&h==="void"||f==="void"&&h.indexOf("open")===0)&&this.openedChange.emit(this._opened)})}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{t.removeEventListener("blur",o),t.removeEventListener("mousedown",o),t.removeAttribute("tabindex")};t.addEventListener("blur",o),t.addEventListener("mousedown",o)})),t.focus(r)}_focusByCssSelector(t,r){let o=this._elementRef.nativeElement.querySelector(t);o&&this._forceFocus(o,r)}_takeFocus(){if(!this._focusTrap)return;let t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&typeof this._elementRef.nativeElement.focus=="function"&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus);break}}_restoreFocus(t){this.autoFocus!=="dialog"&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){let t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._position==="end"&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,r){t&&r&&(this._openedVia=r);let o=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),o}_setOpen(t,r,o){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(o)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe(Rn(1)).subscribe(a=>s(a?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop)}_updatePositionInParent(t){if(!this._platform.isBrowser)return;let r=this._elementRef.nativeElement,o=r.parentNode;t==="end"?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),o.insertBefore(this._anchor,r)),o.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}};e.\u0275fac=function(r){return new(r||e)(F(et),F(vB),F(ug),F(wi),F(Qe),F(g1),F(xt,8),F(kA,8))},e.\u0275cmp=L({type:e,selectors:[["mat-drawer"]],viewQuery:function(r,o){if(r&1&&Xt(ale,5),r&2){let s;at(s=ct())&&(o._content=s.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(r,o){r&1&&rR("@transform.start",function(a){return o._animationStarted.next(a)})("@transform.done",function(a){return o._animationEnd.next(a)}),r&2&&(nR("@transform",o._animationState),Hi("align",null),$t("mat-drawer-end",o.position==="end")("mat-drawer-over",o.mode==="over")("mat-drawer-push",o.mode==="push")("mat-drawer-side",o.mode==="side")("mat-drawer-opened",o.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],standalone:!0,features:[Ei],ngContentSelectors:ow,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(r,o){r&1&&(ae(),H(0,"div",1,0),Q(2),J())},dependencies:[Ml],encapsulation:2,data:{animation:[lz.transformDrawer]},changeDetection:0});let n=e;return n})(),uz=(()=>{let e=class e{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=ho(t)}get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(t){this._backdropOverride=t==null?null:ho(t)}get scrollable(){return this._userContent||this._content}constructor(t,r,o,s,a,c=!1,l){this._dir=t,this._element=r,this._ngZone=o,this._changeDetectorRef=s,this._animationMode=l,this._drawers=new Bs,this.backdropClick=new nt,this._destroyed=new gt,this._doCheckSubject=new gt,this._contentMargins={left:null,right:null},this._contentMarginChanges=new gt,t&&t.change.pipe(Ci(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),a.change().pipe(Ci(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=c}ngAfterContentInit(){this._allDrawers.changes.pipe(vo(this._allDrawers),Ci(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(vo(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(ka(10),Ci(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,r=0;if(this._left&&this._left.opened){if(this._left.mode=="side")t+=this._left._getWidth();else if(this._left.mode=="push"){let o=this._left._getWidth();t+=o,r-=o}}if(this._right&&this._right.opened){if(this._right.mode=="side")r+=this._right._getWidth();else if(this._right.mode=="push"){let o=this._right._getWidth();r+=o,t-=o}}t=t||null,r=r||null,(t!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:t,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(vi(r=>r.fromState!==r.toState),Ci(this._drawers.changes)).subscribe(r=>{r.toState!=="open-instant"&&this._animationMode!=="NoopAnimations"&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),t.mode!=="side"&&t.openedChange.pipe(Ci(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){t&&t.onPositionChanged.pipe(Ci(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(Rn(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(Ci(rs(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){let r=this._element.nativeElement.classList,o="mat-drawer-container-has-open";t?r.add(o):r.remove(o)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{t.position=="end"?(this._end!=null,this._end=t):(this._start!=null,this._start=t)}),this._right=this._left=null,this._dir&&this._dir.value==="rtl"?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&this._start.mode!="over"||this._isDrawerOpen(this._end)&&this._end.mode!="over"}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._drawerHasBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(t){return t!=null&&t.opened}_drawerHasBackdrop(t){return this._backdropOverride==null?!!t&&t.mode!=="side":this._backdropOverride}};e.\u0275fac=function(r){return new(r||e)(F(wa,8),F(et),F(Qe),F(Wi),F(Sl),F(ble),F(Gn,8))},e.\u0275cmp=L({type:e,selectors:[["mat-drawer-container"]],contentQueries:function(r,o,s){if(r&1&&(Yi(s,nw,5),Yi(s,dz,5)),r&2){let a;at(a=ct())&&(o._content=a.first),at(a=ct())&&(o._allDrawers=a)}},viewQuery:function(r,o){if(r&1&&Xt(nw,5),r&2){let s;at(s=ct())&&(o._userContent=s.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(r,o){r&2&&$t("mat-drawer-container-explicit-backdrop",o._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],standalone:!0,features:[ie([{provide:kA,useExisting:e}]),Ei],ngContentSelectors:lle,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,o){r&1&&(ae(cle),Vt(0,dle,1,2,"div",0),Q(1),Q(2,1),Vt(3,ule,2,0,"mat-drawer-content")),r&2&&(wo(0,o.hasBackdrop?0:-1),j(3),wo(3,o._content?-1:3))},dependencies:[nw],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color);box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0});let n=e;return n})(),rw=(()=>{let e=class e extends nw{constructor(t,r,o,s,a){super(t,r,o,s,a)}};e.\u0275fac=function(r){return new(r||e)(F(Wi),F(ge(()=>jA)),F(et),F(If),F(Qe))},e.\u0275cmp=L({type:e,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(r,o){r&2&&zo("margin-left",o._container._contentMargins.left,"px")("margin-right",o._container._contentMargins.right,"px")},standalone:!0,features:[ie([{provide:Ml,useExisting:e}]),q,Ei],ngContentSelectors:ow,decls:1,vars:0,template:function(r,o){r&1&&(ae(),Q(0))},encapsulation:2,changeDetection:0});let n=e;return n})(),FA=(()=>{let e=class e extends dz{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=ho(t)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=_c(t)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=_c(t)}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(r,o){r&2&&(Hi("align",null),zo("top",o.fixedInViewport?o.fixedTopGap:null,"px")("bottom",o.fixedInViewport?o.fixedBottomGap:null,"px"),$t("mat-drawer-end",o.position==="end")("mat-drawer-over",o.mode==="over")("mat-drawer-push",o.mode==="push")("mat-drawer-side",o.mode==="side")("mat-drawer-opened",o.opened)("mat-sidenav-fixed",o.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],standalone:!0,features:[q,Ei],ngContentSelectors:ow,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(r,o){r&1&&(ae(),H(0,"div",1,0),Q(2),J())},dependencies:[Ml],encapsulation:2,data:{animation:[lz.transformDrawer]},changeDetection:0});let n=e;return n})(),jA=(()=>{let e=class e extends uz{constructor(){super(...arguments),this._allDrawers=void 0,this._content=void 0}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["mat-sidenav-container"]],contentQueries:function(r,o,s){if(r&1&&(Yi(s,rw,5),Yi(s,FA,5)),r&2){let a;at(a=ct())&&(o._content=a.first),at(a=ct())&&(o._allDrawers=a)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(r,o){r&2&&$t("mat-drawer-container-explicit-backdrop",o._backdropOverride)},exportAs:["matSidenavContainer"],standalone:!0,features:[ie([{provide:kA,useExisting:e}]),q,Ei],ngContentSelectors:fle,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,o){r&1&&(ae(hle),Vt(0,mle,1,2,"div",0),Q(1),Q(2,1),Vt(3,ple,2,0,"mat-sidenav-content")),r&2&&(wo(0,o.hasBackdrop?0:-1),j(3),wo(3,o._content?-1:3))},dependencies:[rw],styles:[gle],encapsulation:2,changeDetection:0});let n=e;return n})(),hz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({imports:[Mi,su,su,Mi]});let n=e;return n})();function yle(n,e){if(n&1&&(H(0,"a",10),kt(1),J()),n&2){let i=e.$implicit;P("routerLink",i.path),j(),zc(i.data.title)}}function xle(n,e){if(n&1){let i=Zt();H(0,"button",11),Le("click",function(){ht(i),qt();let r=At(2);return ft(r.toggle())}),H(1,"mat-icon",12),kt(2,"menu"),J()()}}function wle(n,e){if(n&1){let i=Zt();H(0,"button",13),Le("click",function(r){ht(i);let o=qt();return ft(o.editorService.toCodeSandbox(r))}),H(1,"mat-icon"),kt(2,"crop_din"),J(),kt(3," CodeSandbox "),J()}}function Mle(n,e){if(n&1){let i=Zt();H(0,"button",13),Le("click",function(r){ht(i);let o=qt();return ft(o.editorService.toStackblitz(r))}),H(1,"mat-icon"),kt(2,"bolt"),J(),kt(3," Stackblitz "),J()}}var fz=(()=>{let e=class e{constructor(t,r){this.breakpointObserver=t,this.editorService=r,this.routes=Wg,this.isHandset$=this.breakpointObserver.observe(mB.Handset).pipe(lt(o=>o.matches),zl())}};e.\u0275fac=function(r){return new(r||e)(F(rx),F(ya))},e.\u0275cmp=L({type:e,selectors:[["app-navigation-shell"]],decls:21,vars:15,consts:[["drawer",""],[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["mat-list-item","",3,"routerLink",4,"ngFor","ngForOf"],[1,"content"],["color","primary"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[1,"toolbar-spacer"],["mat-button","","href","#",3,"click",4,"ngIf"],[1,"main-route-content"],["mat-list-item","",3,"routerLink"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],["mat-button","","href","#",3,"click"]],template:function(r,o){r&1&&(H(0,"mat-sidenav-container",1)(1,"mat-sidenav",2,0),Fi(3,"async"),Fi(4,"async"),Fi(5,"async"),H(6,"mat-toolbar"),kt(7,"ngx-three"),J(),H(8,"mat-nav-list"),Vt(9,yle,2,2,"a",3),J()(),H(10,"mat-sidenav-content",4)(11,"mat-toolbar",5),Vt(12,xle,3,0,"button",6),Fi(13,"async"),H(14,"span"),kt(15,"ngx-three-demo"),J(),fe(16,"span",7),Vt(17,wle,4,0,"button",8)(18,Mle,4,0,"button",8),J(),H(19,"div",9),fe(20,"router-outlet"),J()()()),r&2&&(j(),P("mode",Gi(3,7,o.isHandset$)?"over":"side")("opened",Gi(4,9,o.isHandset$)===!1),Hi("role",Gi(5,11,o.isHandset$)?"dialog":"navigation"),j(8),P("ngForOf",o.routes),j(3),P("ngIf",Gi(13,13,o.isHandset$)),j(5),P("ngIf",o.editorService.urls.length),j(),P("ngIf",o.editorService.urls.length))},dependencies:[to,oh,gT,f2,dx,FB,az,sz,fx,cz,FA,jA,rw,uv],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.content[_ngcontent-%COMP%]{height:100vh}.main-route-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{display:block;height:100%}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"],changeDetection:0});let n=e;return n})();var mz=(()=>{let e=class e{constructor(){this.title="ngx-three-demo"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(r,o){r&1&&fe(0,"app-navigation-shell")},dependencies:[fz]});let n=e;return n})();var pz=tx(),OA=class{constructor(e,i){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=i}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Bn(-this._previousScrollPosition.left),e.style.top=Bn(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,i=this._document.body,t=e.style,r=i.style,o=t.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),pz&&(t.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),pz&&(t.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let i=this._document.body,t=this._viewportRuler.getViewportSize();return i.scrollHeight>t.height||i.scrollWidth>t.width}};var NA=class{constructor(e,i,t,r){this._scrollDispatcher=e,this._ngZone=i,this._viewportRuler=t,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(vi(i=>!i||!this._overlayRef.overlayElement.contains(i.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let i=this._viewportRuler.getViewportScrollPosition().top;Math.abs(i-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},sw=class{enable(){}disable(){}attach(){}};function LA(n,e){return e.some(i=>{let t=n.bottom<i.top,r=n.top>i.bottom,o=n.right<i.left,s=n.left>i.right;return t||r||o||s})}function gz(n,e){return e.some(i=>{let t=n.top<i.top,r=n.bottom>i.bottom,o=n.left<i.left,s=n.right>i.right;return t||r||o||s})}var BA=class{constructor(e,i,t,r){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=t,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let i=this._overlayRef.overlayElement.getBoundingClientRect(),{width:t,height:r}=this._viewportRuler.getViewportSize();LA(i,[{width:t,height:r,bottom:r,right:t,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Rle=(()=>{let e=class e{constructor(t,r,o,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new sw,this.close=a=>new NA(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new OA(this._viewportRuler,this._document),this.reposition=a=>new BA(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=s}};e.\u0275fac=function(r){return new(r||e)(de(If),de(Sl),de(Qe),de(xt))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),UA=class{constructor(e){if(this.scrollStrategy=new sw,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let i=Object.keys(e);for(let t of i)e[t]!==void 0&&(this[t]=e[t])}}};var VA=class{constructor(e,i){this.connectionPair=e,this.scrollableViewProperties=i}};var xz=(()=>{let e=class e{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(de(xt))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Tle=(()=>{let e=class e extends xz{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=o=>{let s=this._attachedOverlays;for(let a=s.length-1;a>-1;a--)if(s[a]._keydownEvents.observers.length>0){let c=s[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(o)):c.next(o);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(de(xt),de(Qe,8))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Cle=(()=>{let e=class e extends xz{constructor(t,r,o){super(t),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Rs(s)},this._clickListener=s=>{let a=Rs(s),c=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let d=l.length-1;d>-1;d--){let u=l[d];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(a)||u.overlayElement.contains(c))break;let h=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(s)):h.next(s)}}}add(t){if(super.add(t),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(de(xt),de(wi),de(Qe,8))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),wz=(()=>{let e=class e{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||dg()){let o=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<o.length;s++)o[s].remove()}let r=this._document.createElement("div");r.classList.add(t),dg()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(de(xt),de(wi))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),zA=class{constructor(e,i,t,r,o,s,a,c,l,d=!1){this._portalOutlet=e,this._host=i,this._pane=t,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new gt,this._attachments=new gt,this._detachments=new gt,this._locationChanges=_i.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new gt,this._outsidePointerEvents=new gt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let i=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Rn(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof i?.onDestroy=="function"&&i.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),i}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=ve(ve({},this._config),e),this._updateElementSize()}setDirection(e){this._config=pi(ve({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Bn(this._config.width),e.height=Bn(this._config.height),e.minWidth=Bn(this._config.minWidth),e.minHeight=Bn(this._config.minHeight),e.maxWidth=Bn(this._config.maxWidth),e.maxHeight=Bn(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,i,t){let r=Df(i||[]).filter(o=>!!o);r.length&&(t?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let e=this._ngZone.onStable.pipe(Ci(rs(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},bz="cdk-overlay-connected-position-bounding-box",Ele=/([A-Za-z%]+)$/,HA=class{get positions(){return this._preferredPositions}constructor(e,i,t,r,o){this._viewportRuler=i,this._document=t,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new gt,this._resizeSubscription=_i.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(bz),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,i=this._overlayRect,t=this._viewportRect,r=this._containerRect,o=[],s;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,i,a),d=this._getOverlayFit(l,i,t,a);if(d.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(d,l,t)){o.push({position:a,origin:c,overlayRect:i,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:l,originPoint:c,position:a,overlayRect:i})}if(o.length){let a=null,c=-1;for(let l of o){let d=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);d>c&&(c=d,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&hu(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(bz),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let i=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,i)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,i,t){let r;if(t.originX=="center")r=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=t.originX=="start"?s:a}i.left<0&&(r-=i.left);let o;return t.originY=="center"?o=e.top+e.height/2:o=t.originY=="top"?e.top:e.bottom,i.top<0&&(o-=i.top),{x:r,y:o}}_getOverlayPoint(e,i,t){let r;t.overlayX=="center"?r=-i.width/2:t.overlayX==="start"?r=this._isRtl()?-i.width:0:r=this._isRtl()?0:-i.width;let o;return t.overlayY=="center"?o=-i.height/2:o=t.overlayY=="top"?0:-i.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,i,t,r){let o=vz(i),{x:s,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(s+=c),l&&(a+=l);let d=0-s,u=s+o.width-t.width,h=0-a,f=a+o.height-t.height,p=this._subtractOverflows(o.width,d,u),b=this._subtractOverflows(o.height,h,f),g=p*b;return{visibleArea:g,isCompletelyWithinViewport:o.width*o.height===g,fitsInViewportVertically:b===o.height,fitsInViewportHorizontally:p==o.width}}_canFitWithFlexibleDimensions(e,i,t){if(this._hasFlexibleDimensions){let r=t.bottom-i.y,o=t.right-i.x,s=_z(this._overlayRef.getConfig().minHeight),a=_z(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportVertically||s!=null&&s<=r,l=e.fitsInViewportHorizontally||a!=null&&a<=o;return c&&l}return!1}_pushOverlayOnScreen(e,i,t){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=vz(i),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),c=Math.max(o.top-t.top-e.y,0),l=Math.max(o.left-t.left-e.x,0),d=0,u=0;return r.width<=o.width?d=l||-s:d=e.x<this._viewportMargin?o.left-t.left-e.x:0,r.height<=o.height?u=c||-a:u=e.y<this._viewportMargin?o.top-t.top-e.y:0,this._previousPushAmount={x:d,y:u},{x:e.x+d,y:e.y+u}}_applyPosition(e,i){if(this._setTransformOrigin(e),this._setOverlayElementStyles(i,e),this._setBoundingBoxStyles(i,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let t=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!Dle(this._lastScrollVisibility,t)){let r=new VA(e,t);this._positionChanges.next(r)}this._lastScrollVisibility=t}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let i=this._boundingBox.querySelectorAll(this._transformOriginSelector),t,r=e.overlayY;e.overlayX==="center"?t="center":this._isRtl()?t=e.overlayX==="start"?"right":"left":t=e.overlayX==="start"?"left":"right";for(let o=0;o<i.length;o++)i[o].style.transformOrigin=`${t} ${r}`}_calculateBoundingBoxRect(e,i){let t=this._viewportRect,r=this._isRtl(),o,s,a;if(i.overlayY==="top")s=e.y,o=t.height-s+this._viewportMargin;else if(i.overlayY==="bottom")a=t.height-e.y+this._viewportMargin*2,o=t.height-a+this._viewportMargin;else{let f=Math.min(t.bottom-e.y+t.top,e.y),p=this._lastBoundingBoxSize.height;o=f*2,s=e.y-f,o>p&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-p/2)}let c=i.overlayX==="start"&&!r||i.overlayX==="end"&&r,l=i.overlayX==="end"&&!r||i.overlayX==="start"&&r,d,u,h;if(l)h=t.width-e.x+this._viewportMargin*2,d=e.x-this._viewportMargin;else if(c)u=e.x,d=t.right-e.x;else{let f=Math.min(t.right-e.x+t.left,e.x),p=this._lastBoundingBoxSize.width;d=f*2,u=e.x-f,d>p&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.x-p/2)}return{top:s,left:u,bottom:a,right:h,width:d,height:o}}_setBoundingBoxStyles(e,i){let t=this._calculateBoundingBoxRect(e,i);!this._isInitialRender&&!this._growAfterOpen&&(t.height=Math.min(t.height,this._lastBoundingBoxSize.height),t.width=Math.min(t.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=Bn(t.height),r.top=Bn(t.top),r.bottom=Bn(t.bottom),r.width=Bn(t.width),r.left=Bn(t.left),r.right=Bn(t.right),i.overlayX==="center"?r.alignItems="center":r.alignItems=i.overlayX==="end"?"flex-end":"flex-start",i.overlayY==="center"?r.justifyContent="center":r.justifyContent=i.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=Bn(o)),s&&(r.maxWidth=Bn(s))}this._lastBoundingBoxSize=t,hu(this._boundingBox.style,r)}_resetBoundingBoxStyles(){hu(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){hu(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,i){let t={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let d=this._viewportRuler.getViewportScrollPosition();hu(t,this._getExactOverlayY(i,e,d)),hu(t,this._getExactOverlayX(i,e,d))}else t.position="static";let a="",c=this._getOffset(i,"x"),l=this._getOffset(i,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),t.transform=a.trim(),s.maxHeight&&(r?t.maxHeight=Bn(s.maxHeight):o&&(t.maxHeight="")),s.maxWidth&&(r?t.maxWidth=Bn(s.maxWidth):o&&(t.maxWidth="")),hu(this._pane.style,t)}_getExactOverlayY(e,i,t){let r={top:"",bottom:""},o=this._getOverlayPoint(i,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,t)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=Bn(o.y);return r}_getExactOverlayX(e,i,t){let r={left:"",right:""},o=this._getOverlayPoint(i,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,t));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(o.x+this._overlayRect.width)}px`}else r.left=Bn(o.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),i=this._pane.getBoundingClientRect(),t=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:gz(e,t),isOriginOutsideView:LA(e,t),isOverlayClipped:gz(i,t),isOverlayOutsideView:LA(i,t)}}_subtractOverflows(e,...i){return i.reduce((t,r)=>t-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,i=this._document.documentElement.clientHeight,t=this._viewportRuler.getViewportScrollPosition();return{top:t.top+this._viewportMargin,left:t.left+this._viewportMargin,right:t.left+e-this._viewportMargin,bottom:t.top+i-this._viewportMargin,width:e-2*this._viewportMargin,height:i-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,i){return i==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Df(e).forEach(i=>{i!==""&&this._appliedPanelClasses.indexOf(i)===-1&&(this._appliedPanelClasses.push(i),this._pane.classList.add(i))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof et)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let i=e.width||0,t=e.height||0;return{top:e.y,bottom:e.y+t,left:e.x,right:e.x+i,height:t,width:i}}};function hu(n,e){for(let i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n}function _z(n){if(typeof n!="number"&&n!=null){let[e,i]=n.split(Ele);return!i||i==="px"?parseFloat(e):null}return n||null}function vz(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function Dle(n,e){return n===e?!0:n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}var yz="cdk-global-overlay-wrapper",GA=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let i=e.getConfig();this._overlayRef=e,this._width&&!i.width&&e.updateSize({width:this._width}),this._height&&!i.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(yz),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement.style,t=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=t,c=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),l=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),d=this._xPosition,u=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",p="",b="";c?b="flex-start":d==="center"?(b="center",h?p=u:f=u):h?d==="left"||d==="end"?(b="flex-end",f=u):(d==="right"||d==="start")&&(b="flex-start",p=u):d==="left"||d==="start"?(b="flex-start",f=u):(d==="right"||d==="end")&&(b="flex-end",p=u),e.position=this._cssPosition,e.marginLeft=c?"0":f,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":p,i.justifyContent=b,i.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement,t=i.style;i.classList.remove(yz),t.justifyContent=t.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},Ale=(()=>{let e=class e{constructor(t,r,o,s){this._viewportRuler=t,this._document=r,this._platform=o,this._overlayContainer=s}global(){return new GA}flexibleConnectedTo(t){return new HA(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(de(Sl),de(xt),de(wi),de(wz))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ile=0,zf=(()=>{let e=class e{constructor(t,r,o,s,a,c,l,d,u,h,f,p){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=s,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=d,this._directionality=u,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=p}create(t){let r=this._createHostElement(),o=this._createPaneElement(r),s=this._createPortalOutlet(o),a=new UA(t);return a.direction=a.direction||this._directionality.value,new zA(s,r,o,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(t){let r=this._document.createElement("div");return r.id=`cdk-overlay-${Ile++}`,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){let t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Ua)),new px(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(de(Rle),de(wz),de(Hs),de(Ale),de(Tle),de(_r),de(Qe),de(xt),de(wa),de(Gc),de(Cle),de(Gn,8))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Ple=new Ee("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=te(zf);return()=>n.scrollStrategies.reposition()}});function kle(n){return()=>n.scrollStrategies.reposition()}var Fle={provide:Ple,deps:[zf],useFactory:kle},Mz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({providers:[zf,Fle],imports:[wl,$B,E1,E1]});let n=e;return n})();var Sz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({imports:[Mi,Go,nx,Mi]});let n=e;return n})();var jle=new Ee("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let n=te(zf);return()=>n.scrollStrategies.reposition()}});function Ole(n){return()=>n.scrollStrategies.reposition()}var Nle={provide:jle,deps:[zf],useFactory:Ole};var WA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({providers:[Nle],imports:[Go,Mz,S1,Mi,su,Sz,S1,Mi]});let n=e;return n})();var $A=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({imports:[Mi,ru]});let n=e;return n})();var Lle=[pg,$g,bg,R1,qg,WA,j1,$A],Rz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({imports:[Lle,pg,$g,bg,R1,qg,WA,j1,$A]});let n=e;return n})();function Tz(n){return new je(3e3,!1)}function Ble(){return new je(3100,!1)}function Ule(){return new je(3101,!1)}function Vle(n){return new je(3001,!1)}function zle(n){return new je(3003,!1)}function Hle(n){return new je(3004,!1)}function Gle(n,e){return new je(3005,!1)}function Wle(){return new je(3006,!1)}function $le(){return new je(3007,!1)}function qle(n,e){return new je(3008,!1)}function Xle(n){return new je(3002,!1)}function Yle(n,e,i,t,r){return new je(3010,!1)}function Zle(){return new je(3011,!1)}function Qle(){return new je(3012,!1)}function Kle(){return new je(3200,!1)}function Jle(){return new je(3202,!1)}function ede(){return new je(3013,!1)}function tde(n){return new je(3014,!1)}function ide(n){return new je(3015,!1)}function nde(n){return new je(3016,!1)}function rde(n,e){return new je(3404,!1)}function ode(n){return new je(3502,!1)}function sde(n){return new je(3503,!1)}function ade(){return new je(3300,!1)}function cde(n){return new je(3504,!1)}function lde(n){return new je(3301,!1)}function dde(n,e){return new je(3302,!1)}function ude(n){return new je(3303,!1)}function hde(n,e){return new je(3400,!1)}function fde(n){return new je(3401,!1)}function mde(n){return new je(3402,!1)}function pde(n,e){return new je(3505,!1)}function Il(n){switch(n.length){case 0:return new Rl;case 1:return n[0];default:return new vg(n)}}function Uz(n,e,i=new Map,t=new Map){let r=[],o=[],s=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),d=l==s,u=d&&a||new Map;c.forEach((h,f)=>{let p=f,b=h;if(f!=="offset")switch(p=n.normalizePropertyName(p,r),b){case _x:b=i.get(f);break;case Ma:b=t.get(f);break;default:b=n.normalizeStyleValue(f,p,b,r);break}u.set(p,b)}),d||o.push(u),a=u,s=l}),r.length)throw ode(r);return o}function pI(n,e,i,t){switch(e){case"start":n.onStart(()=>t(i&&qA(i,"start",n)));break;case"done":n.onDone(()=>t(i&&qA(i,"done",n)));break;case"destroy":n.onDestroy(()=>t(i&&qA(i,"destroy",n)));break}}function qA(n,e,i){let t=i.totalTime,r=!!i.disabled,o=gI(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t??n.totalTime,r),s=n._data;return s!=null&&(o._data=s),o}function gI(n,e,i,t,r="",o=0,s){return{element:n,triggerName:e,fromState:i,toState:t,phaseName:r,totalTime:o,disabled:!!s}}function jo(n,e,i){let t=n.get(e);return t||n.set(e,t=i),t}function Cz(n){let e=n.indexOf(":"),i=n.substring(1,e),t=n.slice(e+1);return[i,t]}var gde=typeof document>"u"?null:document.documentElement;function bI(n){let e=n.parentNode||n.host||null;return e===gde?null:e}function bde(n){return n.substring(1,6)=="ebkit"}var fu=null,Ez=!1;function _de(n){fu||(fu=vde()||{},Ez=fu.style?"WebkitAppearance"in fu.style:!1);let e=!0;return fu.style&&!bde(n)&&(e=n in fu.style,!e&&Ez&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in fu.style)),e}function vde(){return typeof document<"u"?document.body:null}function Vz(n,e){for(;e;){if(e===n)return!0;e=bI(e)}return!1}function zz(n,e,i){if(i)return Array.from(n.querySelectorAll(e));let t=n.querySelector(e);return t?[t]:[]}var _I=(()=>{let e=class e{validateStyleProperty(t){return _de(t)}matchesElement(t,r){return!1}containsElement(t,r){return Vz(t,r)}getParentElement(t){return bI(t)}query(t,r,o){return zz(t,r,o)}computeStyle(t,r,o){return o||""}animate(t,r,o,s,a,c=[],l){return new Rl(o,s)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})(),wI=class wI{};wI.NOOP=new _I;var gu=wI,bu=class{};var yde=1e3,Hz="{{",xde="}}",Gz="ng-enter",JA="ng-leave",aw="ng-trigger",hw=".ng-trigger",Dz="ng-animating",eI=".ng-animating";function Tc(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:tI(parseFloat(e[1]),e[2])}function tI(n,e){switch(e){case"s":return n*yde;default:return n}}function fw(n,e,i){return n.hasOwnProperty("duration")?n:wde(n,e,i)}function wde(n,e,i){let t=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof n=="string"){let a=n.match(t);if(a===null)return e.push(Tz(n)),{duration:0,delay:0,easing:""};r=tI(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(o=tI(parseFloat(c),a[4]));let l=a[5];l&&(s=l)}else r=n;if(!i){let a=!1,c=e.length;r<0&&(e.push(Ble()),a=!0),o<0&&(e.push(Ule()),a=!0),a&&e.splice(c,0,Tz(n))}return{duration:r,delay:o,easing:s}}function Mde(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Aa(n,e,i){e.forEach((t,r)=>{let o=vI(r);i&&!i.has(r)&&i.set(r,n.style[o]),n.style[o]=t})}function pu(n,e){e.forEach((i,t)=>{let r=vI(t);n.style[r]=""})}function Xg(n){return Array.isArray(n)?n.length==1?n[0]:qB(n):n}function Sde(n,e,i){let t=e.params||{},r=Wz(n);r.length&&r.forEach(o=>{t.hasOwnProperty(o)||i.push(Vle(o))})}var iI=new RegExp(`${Hz}\\s*(.+?)\\s*${xde}`,"g");function Wz(n){let e=[];if(typeof n=="string"){let i;for(;i=iI.exec(n);)e.push(i[1]);iI.lastIndex=0}return e}function Zg(n,e,i){let t=`${n}`,r=t.replace(iI,(o,s)=>{let a=e[s];return a==null&&(i.push(zle(s)),a=""),a.toString()});return r==t?n:r}var Rde=/-+([a-z0-9])/g;function vI(n){return n.replace(Rde,(...e)=>e[1].toUpperCase())}function Tde(n,e){return n===0||e===0}function Cde(n,e,i){if(i.size&&e.length){let t=e[0],r=[];if(i.forEach((o,s)=>{t.has(s)||r.push(s),t.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,yI(n,a)))}}return e}function Fo(n,e,i){switch(e.type){case ri.Trigger:return n.visitTrigger(e,i);case ri.State:return n.visitState(e,i);case ri.Transition:return n.visitTransition(e,i);case ri.Sequence:return n.visitSequence(e,i);case ri.Group:return n.visitGroup(e,i);case ri.Animate:return n.visitAnimate(e,i);case ri.Keyframes:return n.visitKeyframes(e,i);case ri.Style:return n.visitStyle(e,i);case ri.Reference:return n.visitReference(e,i);case ri.AnimateChild:return n.visitAnimateChild(e,i);case ri.AnimateRef:return n.visitAnimateRef(e,i);case ri.Query:return n.visitQuery(e,i);case ri.Stagger:return n.visitStagger(e,i);default:throw Hle(e.type)}}function yI(n,e){return window.getComputedStyle(n)[e]}var Ede=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),mw=class extends bu{normalizePropertyName(e,i){return vI(e)}normalizeStyleValue(e,i,t,r){let o="",s=t.toString().trim();if(Ede.has(i)&&t!==0&&t!=="0")if(typeof t=="number")o="px";else{let a=t.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(Gle(e,t))}return s+o}};var pw="*";function Dde(n,e){let i=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(t=>Ade(t,i,e)):i.push(n),i}function Ade(n,e,i){if(n[0]==":"){let c=Ide(n,i);if(typeof c=="function"){e.push(c);return}n=c}let t=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(t==null||t.length<4)return i.push(ide(n)),e;let r=t[1],o=t[2],s=t[3];e.push(Az(r,s));let a=r==pw&&s==pw;o[0]=="<"&&!a&&e.push(Az(s,r))}function Ide(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(i,t)=>parseFloat(t)>parseFloat(i);case":decrement":return(i,t)=>parseFloat(t)<parseFloat(i);default:return e.push(nde(n)),"* => *"}}var cw=new Set(["true","1"]),lw=new Set(["false","0"]);function Az(n,e){let i=cw.has(n)||lw.has(n),t=cw.has(e)||lw.has(e);return(r,o)=>{let s=n==pw||n==r,a=e==pw||e==o;return!s&&i&&typeof r=="boolean"&&(s=r?cw.has(n):lw.has(n)),!a&&t&&typeof o=="boolean"&&(a=o?cw.has(e):lw.has(e)),s&&a}}var $z=":self",Pde=new RegExp(`s*${$z}s*,?`,"g");function qz(n,e,i,t){return new nI(n).build(e,i,t)}var Iz="",nI=class{constructor(e){this._driver=e}build(e,i,t){let r=new rI(i);return this._resetContextStyleTimingState(r),Fo(this,Xg(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=Iz,e.collectedStyles=new Map,e.collectedStyles.set(Iz,new Map),e.currentTime=0}visitTrigger(e,i){let t=i.queryCount=0,r=i.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&i.errors.push(Wle()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(i),a.type==ri.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(d=>{c.name=d,o.push(this.visitState(c,i))}),c.name=l}else if(a.type==ri.Transition){let c=this.visitTransition(a,i);t+=c.queryCount,r+=c.depCount,s.push(c)}else i.errors.push($le())}),{type:ri.Trigger,name:e.name,states:o,transitions:s,queryCount:t,depCount:r,options:null}}visitState(e,i){let t=this.visitStyle(e.styles,i),r=e.options&&e.options.params||null;if(t.containsDynamicStyles){let o=new Set,s=r||{};t.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{Wz(c).forEach(l=>{s.hasOwnProperty(l)||o.add(l)})})}),o.size&&i.errors.push(qle(e.name,[...o.values()]))}return{type:ri.State,name:e.name,style:t,options:r?{params:r}:null}}visitTransition(e,i){i.queryCount=0,i.depCount=0;let t=Fo(this,Xg(e.animation),i),r=Dde(e.expr,i.errors);return{type:ri.Transition,matchers:r,animation:t,queryCount:i.queryCount,depCount:i.depCount,options:mu(e.options)}}visitSequence(e,i){return{type:ri.Sequence,steps:e.steps.map(t=>Fo(this,t,i)),options:mu(e.options)}}visitGroup(e,i){let t=i.currentTime,r=0,o=e.steps.map(s=>{i.currentTime=t;let a=Fo(this,s,i);return r=Math.max(r,i.currentTime),a});return i.currentTime=r,{type:ri.Group,steps:o,options:mu(e.options)}}visitAnimate(e,i){let t=Ode(e.timings,i.errors);i.currentAnimateTimings=t;let r,o=e.styles?e.styles:Qo({});if(o.type==ri.Keyframes)r=this.visitKeyframes(o,i);else{let s=e.styles,a=!1;if(!s){a=!0;let l={};t.easing&&(l.easing=t.easing),s=Qo(l)}i.currentTime+=t.duration+t.delay;let c=this.visitStyle(s,i);c.isEmptyStep=a,r=c}return i.currentAnimateTimings=null,{type:ri.Animate,timings:t,style:r,options:null}}visitStyle(e,i){let t=this._makeStyleAst(e,i);return this._validateStyleAst(t,i),t}_makeStyleAst(e,i){let t=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===Ma?t.push(a):i.errors.push(Xle(a)):t.push(new Map(Object.entries(a)));let o=!1,s=null;return t.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let c of a.values())if(c.toString().indexOf(Hz)>=0){o=!0;break}}}),{type:ri.Style,styles:t,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,i){let t=i.currentAnimateTimings,r=i.currentTime,o=i.currentTime;t&&o>0&&(o-=t.duration+t.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,c)=>{let l=i.collectedStyles.get(i.currentQuerySelector),d=l.get(c),u=!0;d&&(o!=r&&o>=d.startTime&&r<=d.endTime&&(i.errors.push(Yle(c,d.startTime,d.endTime,o,r)),u=!1),o=d.startTime),u&&l.set(c,{startTime:o,endTime:r}),i.options&&Sde(a,i.options,i.errors)})})}visitKeyframes(e,i){let t={type:ri.Keyframes,styles:[],options:null};if(!i.currentAnimateTimings)return i.errors.push(Zle()),t;let r=1,o=0,s=[],a=!1,c=!1,l=0,d=e.steps.map(m=>{let v=this._makeStyleAst(m,i),_=v.offset!=null?v.offset:jde(v.styles),y=0;return _!=null&&(o++,y=v.offset=_),c=c||y<0||y>1,a=a||y<l,l=y,s.push(y),v});c&&i.errors.push(Qle()),a&&i.errors.push(Kle());let u=e.steps.length,h=0;o>0&&o<u?i.errors.push(Jle()):o==0&&(h=r/(u-1));let f=u-1,p=i.currentTime,b=i.currentAnimateTimings,g=b.duration;return d.forEach((m,v)=>{let _=h>0?v==f?1:h*v:s[v],y=_*g;i.currentTime=p+b.delay+y,b.duration=y,this._validateStyleAst(m,i),m.offset=_,t.styles.push(m)}),t}visitReference(e,i){return{type:ri.Reference,animation:Fo(this,Xg(e.animation),i),options:mu(e.options)}}visitAnimateChild(e,i){return i.depCount++,{type:ri.AnimateChild,options:mu(e.options)}}visitAnimateRef(e,i){return{type:ri.AnimateRef,animation:this.visitReference(e.animation,i),options:mu(e.options)}}visitQuery(e,i){let t=i.currentQuerySelector,r=e.options||{};i.queryCount++,i.currentQuery=e;let[o,s]=kde(e.selector);i.currentQuerySelector=t.length?t+" "+o:o,jo(i.collectedStyles,i.currentQuerySelector,new Map);let a=Fo(this,Xg(e.animation),i);return i.currentQuery=null,i.currentQuerySelector=t,{type:ri.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:mu(e.options)}}visitStagger(e,i){i.currentQuery||i.errors.push(ede());let t=e.timings==="full"?{duration:0,delay:0,easing:"full"}:fw(e.timings,i.errors,!0);return{type:ri.Stagger,animation:Fo(this,Xg(e.animation),i),timings:t,options:null}}};function kde(n){let e=!!n.split(/\s*,\s*/).find(i=>i==$z);return e&&(n=n.replace(Pde,"")),n=n.replace(/@\*/g,hw).replace(/@\w+/g,i=>hw+"-"+i.slice(1)).replace(/:animating/g,eI),[n,e]}function Fde(n){return n?ve({},n):null}var rI=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function jde(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(i=>{if(i instanceof Map&&i.has("offset")){let t=i;e=parseFloat(t.get("offset")),t.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let i=n;e=parseFloat(i.get("offset")),i.delete("offset")}return e}function Ode(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=fw(n,e).duration;return XA(o,0,"")}let i=n;if(i.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=XA(0,0,"");return o.dynamic=!0,o.strValue=i,o}let r=fw(i,e);return XA(r.duration,r.delay,r.easing)}function mu(n){return n?(n=ve({},n),n.params&&(n.params=Fde(n.params))):n={},n}function XA(n,e,i){return{duration:n,delay:e,easing:i}}function xI(n,e,i,t,r,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:i,postStyleProps:t,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var Qg=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,i){let t=this._map.get(e);t||this._map.set(e,t=[]),t.push(...i)}has(e){return this._map.has(e)}clear(){this._map.clear()}},Nde=1,Lde=":enter",Bde=new RegExp(Lde,"g"),Ude=":leave",Vde=new RegExp(Ude,"g");function Xz(n,e,i,t,r,o=new Map,s=new Map,a,c,l=[]){return new oI().buildKeyframes(n,e,i,t,r,o,s,a,c,l)}var oI=class{buildKeyframes(e,i,t,r,o,s,a,c,l,d=[]){l=l||new Qg;let u=new sI(e,i,l,r,o,d,[]);u.options=c;let h=c.delay?Tc(c.delay):0;u.currentTimeline.delayNextStep(h),u.currentTimeline.setStyles([s],null,u.errors,c),Fo(this,t,u);let f=u.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let b=f.length-1;b>=0;b--){let g=f[b];if(g.element===i){p=g;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,u.errors,c)}return f.length?f.map(p=>p.buildKeyframes()):[xI(i,[],[],[],0,h,"",!1)]}visitTrigger(e,i){}visitState(e,i){}visitTransition(e,i){}visitAnimateChild(e,i){let t=i.subInstructions.get(i.element);if(t){let r=i.createSubContext(e.options),o=i.currentTimeline.currentTime,s=this._visitSubInstructions(t,r,r.options);o!=s&&i.transformIntoNewTimeline(s)}i.previousNode=e}visitAnimateRef(e,i){let t=i.createSubContext(e.options);t.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],i,t),this.visitReference(e.animation,t),i.transformIntoNewTimeline(t.currentTimeline.currentTime),i.previousNode=e}_applyAnimationRefDelays(e,i,t){for(let r of e){let o=r?.delay;if(o){let s=typeof o=="number"?o:Tc(Zg(o,r?.params??{},i.errors));t.delayNextStep(s)}}}_visitSubInstructions(e,i,t){let o=i.currentTimeline.currentTime,s=t.duration!=null?Tc(t.duration):null,a=t.delay!=null?Tc(t.delay):null;return s!==0&&e.forEach(c=>{let l=i.appendInstructionToTimeline(c,s,a);o=Math.max(o,l.duration+l.delay)}),o}visitReference(e,i){i.updateOptions(e.options,!0),Fo(this,e.animation,i),i.previousNode=e}visitSequence(e,i){let t=i.subContextCount,r=i,o=e.options;if(o&&(o.params||o.delay)&&(r=i.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==ri.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=gw);let s=Tc(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>Fo(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>t&&r.transformIntoNewTimeline()),i.previousNode=e}visitGroup(e,i){let t=[],r=i.currentTimeline.currentTime,o=e.options&&e.options.delay?Tc(e.options.delay):0;e.steps.forEach(s=>{let a=i.createSubContext(e.options);o&&a.delayNextStep(o),Fo(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),t.push(a.currentTimeline)}),t.forEach(s=>i.currentTimeline.mergeTimelineCollectedStyles(s)),i.transformIntoNewTimeline(r),i.previousNode=e}_visitTiming(e,i){if(e.dynamic){let t=e.strValue,r=i.params?Zg(t,i.params,i.errors):t;return fw(r,i.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,i){let t=i.currentAnimateTimings=this._visitTiming(e.timings,i),r=i.currentTimeline;t.delay&&(i.incrementTime(t.delay),r.snapshotCurrentStyles());let o=e.style;o.type==ri.Keyframes?this.visitKeyframes(o,i):(i.incrementTime(t.duration),this.visitStyle(o,i),r.applyStylesToKeyframe()),i.currentAnimateTimings=null,i.previousNode=e}visitStyle(e,i){let t=i.currentTimeline,r=i.currentAnimateTimings;!r&&t.hasCurrentStyleProperties()&&t.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?t.applyEmptyStep(o):t.setStyles(e.styles,o,i.errors,i.options),i.previousNode=e}visitKeyframes(e,i){let t=i.currentAnimateTimings,r=i.currentTimeline.duration,o=t.duration,a=i.createSubContext().currentTimeline;a.easing=t.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*o),a.setStyles(c.styles,c.easing,i.errors,i.options),a.applyStylesToKeyframe()}),i.currentTimeline.mergeTimelineCollectedStyles(a),i.transformIntoNewTimeline(r+o),i.previousNode=e}visitQuery(e,i){let t=i.currentTimeline.currentTime,r=e.options||{},o=r.delay?Tc(r.delay):0;o&&(i.previousNode.type===ri.Style||t==0&&i.currentTimeline.hasCurrentStyleProperties())&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=gw);let s=t,a=i.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,i.errors);i.currentQueryTotal=a.length;let c=null;a.forEach((l,d)=>{i.currentQueryIndex=d;let u=i.createSubContext(e.options,l);o&&u.delayNextStep(o),l===i.element&&(c=u.currentTimeline),Fo(this,e.animation,u),u.currentTimeline.applyStylesToKeyframe();let h=u.currentTimeline.currentTime;s=Math.max(s,h)}),i.currentQueryIndex=0,i.currentQueryTotal=0,i.transformIntoNewTimeline(s),c&&(i.currentTimeline.mergeTimelineCollectedStyles(c),i.currentTimeline.snapshotCurrentStyles()),i.previousNode=e}visitStagger(e,i){let t=i.parentContext,r=i.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(i.currentQueryTotal-1),c=s*i.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=t.currentStaggerTime;break}let d=i.currentTimeline;c&&d.delayNextStep(c);let u=d.currentTime;Fo(this,e.animation,i),i.previousNode=e,t.currentStaggerTime=r.currentTime-u+(r.startTime-t.currentTimeline.startTime)}},gw={},sI=class n{constructor(e,i,t,r,o,s,a,c){this._driver=e,this.element=i,this.subInstructions=t,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=gw,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new bw(this._driver,i,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,i){if(!e)return;let t=e,r=this.options;t.duration!=null&&(r.duration=Tc(t.duration)),t.delay!=null&&(r.delay=Tc(t.delay));let o=t.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!i||!s.hasOwnProperty(a))&&(s[a]=Zg(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let i=this.options.params;if(i){let t=e.params={};Object.keys(i).forEach(r=>{t[r]=i[r]})}}return e}createSubContext(e=null,i,t){let r=i||this.element,o=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,t||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=gw,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,i,t){let r={duration:i??e.duration,delay:this.currentTimeline.currentTime+(t??0)+e.delay,easing:""},o=new aI(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,i,t,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(Bde,"."+this._enterClassName),e=e.replace(Vde,"."+this._leaveClassName);let c=t!=1,l=this._driver.query(this.element,e,c);t!==0&&(l=t<0?l.slice(l.length+t,l.length):l.slice(0,t)),a.push(...l)}return!o&&a.length==0&&s.push(tde(i)),a}},bw=class n{constructor(e,i,t,r){this._driver=e,this.element=i,this.startTime=t,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(i),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(i,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let i=this._keyframes.size===1&&this._pendingStyles.size;this.duration||i?(this.forwardTime(this.currentTime+e),i&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,i){return this.applyStylesToKeyframe(),new n(this._driver,e,i||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Nde,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,i){this._localTimelineStyles.set(e,i),this._globalTimelineStyles.set(e,i),this._styleSummary.set(e,{time:this.currentTime,value:i})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[i,t]of this._globalTimelineStyles)this._backFill.set(i,t||Ma),this._currentKeyframe.set(i,Ma);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,i,t,r){i&&this._previousKeyframe.set("easing",i);let o=r&&r.params||{},s=zde(e,this._globalTimelineStyles);for(let[a,c]of s){let l=Zg(c,o,t);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ma),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,i)=>{this._currentKeyframe.set(i,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,i)=>{this._currentKeyframe.has(i)||this._currentKeyframe.set(i,e)}))}snapshotCurrentStyles(){for(let[e,i]of this._localTimelineStyles)this._pendingStyles.set(e,i),this._updateStyle(e,i)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let i in this._currentKeyframe)e.push(i);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((i,t)=>{let r=this._styleSummary.get(t);(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,i=new Set,t=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((d,u)=>{d===_x?e.add(u):d===Ma&&i.add(u)}),t||l.set("offset",c/this.duration),r.push(l)});let o=[...e.values()],s=[...i.values()];if(t){let a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return xI(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},aI=class extends bw{constructor(e,i,t,r,o,s,a=!1){super(e,i,s.delay),this.keyframes=t,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:i,duration:t,easing:r}=this.timings;if(this._stretchStartingKeyframe&&i){let o=[],s=t+i,a=i/s,c=new Map(e[0]);c.set("offset",0),o.push(c);let l=new Map(e[0]);l.set("offset",Pz(a)),o.push(l);let d=e.length-1;for(let u=1;u<=d;u++){let h=new Map(e[u]),f=h.get("offset"),p=i+f*t;h.set("offset",Pz(p/s)),o.push(h)}t=s,i=0,r="",e=o}return xI(this.element,e,this.preStyleProps,this.postStyleProps,t,i,r,!0)}};function Pz(n,e=3){let i=Math.pow(10,e-1);return Math.round(n*i)/i}function zde(n,e){let i=new Map,t;return n.forEach(r=>{if(r==="*"){t??=e.keys();for(let o of t)i.set(o,Ma)}else for(let[o,s]of r)i.set(o,s)}),i}function kz(n,e,i,t,r,o,s,a,c,l,d,u,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:i,fromStyles:o,toState:t,toStyles:s,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:d,totalTime:u,errors:h}}var YA={},_w=class{constructor(e,i,t){this._triggerName=e,this.ast=i,this._stateStyles=t}match(e,i,t,r){return Hde(this.ast.matchers,e,i,t,r)}buildStyles(e,i,t){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(i,t):new Map}build(e,i,t,r,o,s,a,c,l,d){let u=[],h=this.ast.options&&this.ast.options.params||YA,f=a&&a.params||YA,p=this.buildStyles(t,f,u),b=c&&c.params||YA,g=this.buildStyles(r,b,u),m=new Set,v=new Map,_=new Map,y=r==="void",C={params:Yz(b,h),delay:this.ast.options?.delay},R=d?[]:Xz(e,i,this.ast.animation,o,s,p,g,C,l,u),M=0;return R.forEach(A=>{M=Math.max(A.duration+A.delay,M)}),u.length?kz(i,this._triggerName,t,r,y,p,g,[],[],v,_,M,u):(R.forEach(A=>{let T=A.element,x=jo(v,T,new Set);A.preStyleProps.forEach(V=>x.add(V));let I=jo(_,T,new Set);A.postStyleProps.forEach(V=>I.add(V)),T!==i&&m.add(T)}),kz(i,this._triggerName,t,r,y,p,g,R,[...m.values()],v,_,M))}};function Hde(n,e,i,t,r){return n.some(o=>o(e,i,t,r))}function Yz(n,e){let i=ve({},e);return Object.entries(n).forEach(([t,r])=>{r!=null&&(i[t]=r)}),i}var cI=class{constructor(e,i,t){this.styles=e,this.defaultParams=i,this.normalizer=t}buildStyles(e,i){let t=new Map,r=Yz(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Zg(s,r,i));let c=this.normalizer.normalizePropertyName(a,i);s=this.normalizer.normalizeStyleValue(a,c,s,i),t.set(a,s)})}),t}};function Gde(n,e,i){return new lI(n,e,i)}var lI=class{constructor(e,i,t){this.name=e,this.ast=i,this._normalizer=t,this.transitionFactories=[],this.states=new Map,i.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new cI(r.style,o,t))}),Fz(this.states,"true","1"),Fz(this.states,"false","0"),i.transitions.forEach(r=>{this.transitionFactories.push(new _w(e,r,this.states))}),this.fallbackTransition=Wde(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,i,t,r){return this.transitionFactories.find(s=>s.match(e,i,t,r))||null}matchStyles(e,i,t){return this.fallbackTransition.buildStyles(e,i,t)}};function Wde(n,e,i){let t=[(s,a)=>!0],r={type:ri.Sequence,steps:[],options:null},o={type:ri.Transition,animation:r,matchers:t,options:null,queryCount:0,depCount:0};return new _w(n,o,e)}function Fz(n,e,i){n.has(e)?n.has(i)||n.set(i,n.get(e)):n.has(i)&&n.set(e,n.get(i))}var $de=new Qg,dI=class{constructor(e,i,t){this.bodyNode=e,this._driver=i,this._normalizer=t,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,i){let t=[],r=[],o=qz(this._driver,i,t,r);if(t.length)throw sde(t);r.length&&void 0,this._animations.set(e,o)}_buildPlayer(e,i,t){let r=e.element,o=Uz(this._normalizer,e.keyframes,i,t);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,i,t={}){let r=[],o=this._animations.get(e),s,a=new Map;if(o?(s=Xz(this._driver,i,o,Gz,JA,new Map,new Map,t,$de,r),s.forEach(d=>{let u=jo(a,d.element,new Map);d.postStyleProps.forEach(h=>u.set(h,null))})):(r.push(ade()),s=[]),r.length)throw cde(r);a.forEach((d,u)=>{d.forEach((h,f)=>{d.set(f,this._driver.computeStyle(u,f,Ma))})});let c=s.map(d=>{let u=a.get(d.element);return this._buildPlayer(d,new Map,u)}),l=Il(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let i=this._getPlayer(e);i.destroy(),this._playersById.delete(e);let t=this.players.indexOf(i);t>=0&&this.players.splice(t,1)}_getPlayer(e){let i=this._playersById.get(e);if(!i)throw lde(e);return i}listen(e,i,t,r){let o=gI(i,"","","");return pI(this._getPlayer(e),t,o,r),()=>{}}command(e,i,t,r){if(t=="register"){this.register(e,r[0]);return}if(t=="create"){let s=r[0]||{};this.create(e,i,s);return}let o=this._getPlayer(e);switch(t){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},jz="ng-animate-queued",qde=".ng-animate-queued",ZA="ng-animate-disabled",Xde=".ng-animate-disabled",Yde="ng-star-inserted",Zde=".ng-star-inserted",Qde=[],Zz={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Kde={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Is="__ng_removed",Kg=class{get params(){return this.options.params}constructor(e,i=""){this.namespaceId=i;let t=e&&e.hasOwnProperty("value"),r=t?e.value:e;if(this.value=eue(r),t){let o=e,{value:s}=o,a=Tw(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let i=e.params;if(i){let t=this.options.params;Object.keys(i).forEach(r=>{t[r]==null&&(t[r]=i[r])})}}},Yg="void",QA=new Kg(Yg),uI=class{constructor(e,i,t){this.id=e,this.hostElement=i,this._engine=t,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Jo(i,this._hostClassName)}listen(e,i,t,r){if(!this._triggers.has(i))throw dde(t,i);if(t==null||t.length==0)throw ude(i);if(!tue(t))throw hde(t,i);let o=jo(this._elementListeners,e,[]),s={name:i,phase:t,callback:r};o.push(s);let a=jo(this._engine.statesByElement,e,new Map);return a.has(i)||(Jo(e,aw),Jo(e,aw+"-"+i),a.set(i,QA)),()=>{this._engine.afterFlush(()=>{let c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(i)||a.delete(i)})}}register(e,i){return this._triggers.has(e)?!1:(this._triggers.set(e,i),!0)}_getTrigger(e){let i=this._triggers.get(e);if(!i)throw fde(e);return i}trigger(e,i,t,r=!0){let o=this._getTrigger(i),s=new Jg(this.id,i,e),a=this._engine.statesByElement.get(e);a||(Jo(e,aw),Jo(e,aw+"-"+i),this._engine.statesByElement.set(e,a=new Map));let c=a.get(i),l=new Kg(t,this.id);if(!(t&&t.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(i,l),c||(c=QA),!(l.value===Yg)&&c.value===l.value){if(!rue(c.params,l.params)){let b=[],g=o.matchStyles(c.value,c.params,b),m=o.matchStyles(l.value,l.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{pu(e,g),Aa(e,m)})}return}let h=jo(this._engine.playersByElement,e,[]);h.forEach(b=>{b.namespaceId==this.id&&b.triggerName==i&&b.queued&&b.destroy()});let f=o.matchTransition(c.value,l.value,e,l.params),p=!1;if(!f){if(!r)return;f=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:i,transition:f,fromState:c,toState:l,player:s,isFallbackTransition:p}),p||(Jo(e,jz),s.onStart(()=>{Hf(e,jz)})),s.onDone(()=>{let b=this.players.indexOf(s);b>=0&&this.players.splice(b,1);let g=this._engine.playersByElement.get(e);if(g){let m=g.indexOf(s);m>=0&&g.splice(m,1)}}),this.players.push(s),h.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(i=>i.delete(e)),this._elementListeners.forEach((i,t)=>{this._elementListeners.set(t,i.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let i=this._engine.playersByElement.get(e);i&&(i.forEach(t=>t.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,i){let t=this._engine.driver.query(e,hw,!0);t.forEach(r=>{if(r[Is])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,i,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>t.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,i,t,r){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((c,l)=>{if(s.set(l,c.value),this._triggers.has(l)){let d=this.trigger(e,l,Yg,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,i,s),t&&Il(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let i=this._elementListeners.get(e),t=this._engine.statesByElement.get(e);if(i&&t){let r=new Set;i.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let c=this._triggers.get(s).fallbackTransition,l=t.get(s)||QA,d=new Kg(Yg),u=new Jg(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:l,toState:d,player:u,isFallbackTransition:!0})})}}removeNode(e,i){let t=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,i),this.triggerLeaveAnimation(e,i,!0))return;let r=!1;if(t.totalAnimations){let o=t.players.length?t.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(t.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)t.markElementAsRemoved(this.id,e,!1,i);else{let o=e[Is];(!o||o===Zz)&&(t.afterFlush(()=>this.clearElementCache(e)),t.destroyInnerAnimations(e),t._onRemovalComplete(e,i))}}insertNode(e,i){Jo(e,this._hostClassName)}drainQueuedTransitions(e){let i=[];return this._queue.forEach(t=>{let r=t.player;if(r.destroyed)return;let o=t.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==t.triggerName){let c=gI(o,t.triggerName,t.fromState.value,t.toState.value);c._data=e,pI(t.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):i.push(t)}),this._queue=[],i.sort((t,r)=>{let o=t.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(t.element,r.element)?1:-1})}destroy(e){this.players.forEach(i=>i.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},hI=class{_onRemovalComplete(e,i){this.onRemovalComplete(e,i)}constructor(e,i,t,r){this.bodyNode=e,this.driver=i,this._normalizer=t,this.scheduler=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(i=>{i.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,i){let t=new uI(e,i,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,i)?this._balanceNamespaceList(t,i):(this.newHostElements.set(i,t),this.collectEnterElement(i)),this._namespaceLookup[e]=t}_balanceNamespaceList(e,i){let t=this._namespaceList,r=this.namespacesByHostElement;if(t.length-1>=0){let s=!1,a=this.driver.getParentElement(i);for(;a;){let c=r.get(a);if(c){let l=t.indexOf(c);t.splice(l+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||t.unshift(e)}else t.push(e);return r.set(i,e),e}register(e,i){let t=this._namespaceLookup[e];return t||(t=this.createNamespace(e,i)),t}registerTrigger(e,i,t){let r=this._namespaceLookup[e];r&&r.register(i,t)&&this.totalAnimations++}destroy(e,i){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let t=this._fetchNamespace(e);this.namespacesByHostElement.delete(t.hostElement);let r=this._namespaceList.indexOf(t);r>=0&&this._namespaceList.splice(r,1),t.destroy(i),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let i=new Set,t=this.statesByElement.get(e);if(t){for(let r of t.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&i.add(o)}}return i}trigger(e,i,t,r){if(dw(i)){let o=this._fetchNamespace(e);if(o)return o.trigger(i,t,r),!0}return!1}insertNode(e,i,t,r){if(!dw(i))return;let o=i[Is];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(i);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(i,t)}r&&this.collectEnterElement(i)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,i){i?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Jo(e,ZA)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Hf(e,ZA))}removeNode(e,i,t){if(dw(i)){this.scheduler?.notify();let r=e?this._fetchNamespace(e):null;r?r.removeNode(i,t):this.markElementAsRemoved(e,i,!1,t);let o=this.namespacesByHostElement.get(i);o&&o.id!==e&&o.removeNode(i,t)}else this._onRemovalComplete(i,t)}markElementAsRemoved(e,i,t,r,o){this.collectedLeaveElements.push(i),i[Is]={namespaceId:e,setForRemoval:r,hasAnimation:t,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,i,t,r,o){return dw(i)?this._fetchNamespace(e).listen(i,t,r,o):()=>{}}_buildInstruction(e,i,t,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,t,r,e.fromState.options,e.toState.options,i,o)}destroyInnerAnimations(e){let i=this.driver.query(e,hw,!0);i.forEach(t=>this.destroyActiveAnimationsForElement(t)),this.playersByQueriedElement.size!=0&&(i=this.driver.query(e,eI,!0),i.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(e){let i=this.playersByElement.get(e);i&&i.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(e){let i=this.playersByQueriedElement.get(e);i&&i.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Il(this.players).onDone(()=>e());e()})}processLeaveNode(e){let i=e[Is];if(i&&i.setForRemoval){if(e[Is]=Zz,i.namespaceId){this.destroyInnerAnimations(e);let t=this._fetchNamespace(i.namespaceId);t&&t.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}e.classList?.contains(ZA)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Xde,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(e=-1){let i=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,r)=>this._balanceNamespaceList(t,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let t=0;t<this.collectedEnterElements.length;t++){let r=this.collectedEnterElements[t];Jo(r,Yde)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let t=[];try{i=this._flushAnimations(t,e)}finally{for(let r=0;r<t.length;r++)t[r]()}}else for(let t=0;t<this.collectedLeaveElements.length;t++){let r=this.collectedLeaveElements[t];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){let t=this._whenQuietFns;this._whenQuietFns=[],i.length?Il(i).onDone(()=>{t.forEach(r=>r())}):t.forEach(r=>r())}}reportError(e){throw mde(e)}_flushAnimations(e,i){let t=new Qg,r=[],o=new Map,s=[],a=new Map,c=new Map,l=new Map,d=new Set;this.disabledNodes.forEach(B=>{d.add(B);let G=this.driver.query(B,qde,!0);for(let U=0;U<G.length;U++)d.add(G[U])});let u=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=Lz(h,this.collectedEnterElements),p=new Map,b=0;f.forEach((B,G)=>{let U=Gz+b++;p.set(G,U),B.forEach(se=>Jo(se,U))});let g=[],m=new Set,v=new Set;for(let B=0;B<this.collectedLeaveElements.length;B++){let G=this.collectedLeaveElements[B],U=G[Is];U&&U.setForRemoval&&(g.push(G),m.add(G),U.hasAnimation?this.driver.query(G,Zde,!0).forEach(se=>m.add(se)):v.add(G))}let _=new Map,y=Lz(h,Array.from(m));y.forEach((B,G)=>{let U=JA+b++;_.set(G,U),B.forEach(se=>Jo(se,U))}),e.push(()=>{f.forEach((B,G)=>{let U=p.get(G);B.forEach(se=>Hf(se,U))}),y.forEach((B,G)=>{let U=_.get(G);B.forEach(se=>Hf(se,U))}),g.forEach(B=>{this.processLeaveNode(B)})});let C=[],R=[];for(let B=this._namespaceList.length-1;B>=0;B--)this._namespaceList[B].drainQueuedTransitions(i).forEach(U=>{let se=U.player,Te=U.element;if(C.push(se),this.collectedEnterElements.length){let N=Te[Is];if(N&&N.setForMove){if(N.previousTriggersValues&&N.previousTriggersValues.has(U.triggerName)){let xe=N.previousTriggersValues.get(U.triggerName),Ne=this.statesByElement.get(U.element);if(Ne&&Ne.has(U.triggerName)){let Ue=Ne.get(U.triggerName);Ue.value=xe,Ne.set(U.triggerName,Ue)}}se.destroy();return}}let Ie=!u||!this.driver.containsElement(u,Te),Ze=_.get(Te),yt=p.get(Te),Z=this._buildInstruction(U,t,yt,Ze,Ie);if(Z.errors&&Z.errors.length){R.push(Z);return}if(Ie){se.onStart(()=>pu(Te,Z.fromStyles)),se.onDestroy(()=>Aa(Te,Z.toStyles)),r.push(se);return}if(U.isFallbackTransition){se.onStart(()=>pu(Te,Z.fromStyles)),se.onDestroy(()=>Aa(Te,Z.toStyles)),r.push(se);return}let Ce=[];Z.timelines.forEach(N=>{N.stretchStartingKeyframe=!0,this.disabledNodes.has(N.element)||Ce.push(N)}),Z.timelines=Ce,t.append(Te,Z.timelines);let We={instruction:Z,player:se,element:Te};s.push(We),Z.queriedElements.forEach(N=>jo(a,N,[]).push(se)),Z.preStyleProps.forEach((N,xe)=>{if(N.size){let Ne=c.get(xe);Ne||c.set(xe,Ne=new Set),N.forEach((Ue,O)=>Ne.add(O))}}),Z.postStyleProps.forEach((N,xe)=>{let Ne=l.get(xe);Ne||l.set(xe,Ne=new Set),N.forEach((Ue,O)=>Ne.add(O))})});if(R.length){let B=[];R.forEach(G=>{B.push(pde(G.triggerName,G.errors))}),C.forEach(G=>G.destroy()),this.reportError(B)}let M=new Map,A=new Map;s.forEach(B=>{let G=B.element;t.has(G)&&(A.set(G,G),this._beforeAnimationBuild(B.player.namespaceId,B.instruction,M))}),r.forEach(B=>{let G=B.element;this._getPreviousPlayers(G,!1,B.namespaceId,B.triggerName,null).forEach(se=>{jo(M,G,[]).push(se),se.destroy()})});let T=g.filter(B=>Bz(B,c,l)),x=new Map;Nz(x,this.driver,v,l,Ma).forEach(B=>{Bz(B,c,l)&&T.push(B)});let V=new Map;f.forEach((B,G)=>{Nz(V,this.driver,new Set(B),c,_x)}),T.forEach(B=>{let G=x.get(B),U=V.get(B);x.set(B,new Map([...G?.entries()??[],...U?.entries()??[]]))});let W=[],ee=[],ne={};s.forEach(B=>{let{element:G,player:U,instruction:se}=B;if(t.has(G)){if(d.has(G)){U.onDestroy(()=>Aa(G,se.toStyles)),U.disabled=!0,U.overrideTotalTime(se.totalTime),r.push(U);return}let Te=ne;if(A.size>1){let Ze=G,yt=[];for(;Ze=Ze.parentNode;){let Z=A.get(Ze);if(Z){Te=Z;break}yt.push(Ze)}yt.forEach(Z=>A.set(Z,Te))}let Ie=this._buildAnimation(U.namespaceId,se,M,o,V,x);if(U.setRealPlayer(Ie),Te===ne)W.push(U);else{let Ze=this.playersByElement.get(Te);Ze&&Ze.length&&(U.parentPlayer=Il(Ze)),r.push(U)}}else pu(G,se.fromStyles),U.onDestroy(()=>Aa(G,se.toStyles)),ee.push(U),d.has(G)&&r.push(U)}),ee.forEach(B=>{let G=o.get(B.element);if(G&&G.length){let U=Il(G);B.setRealPlayer(U)}}),r.forEach(B=>{B.parentPlayer?B.syncPlayerEvents(B.parentPlayer):B.destroy()});for(let B=0;B<g.length;B++){let G=g[B],U=G[Is];if(Hf(G,JA),U&&U.hasAnimation)continue;let se=[];if(a.size){let Ie=a.get(G);Ie&&Ie.length&&se.push(...Ie);let Ze=this.driver.query(G,eI,!0);for(let yt=0;yt<Ze.length;yt++){let Z=a.get(Ze[yt]);Z&&Z.length&&se.push(...Z)}}let Te=se.filter(Ie=>!Ie.destroyed);Te.length?iue(this,G,Te):this.processLeaveNode(G)}return g.length=0,W.forEach(B=>{this.players.push(B),B.onDone(()=>{B.destroy();let G=this.players.indexOf(B);this.players.splice(G,1)}),B.play()}),W}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,i,t,r,o){let s=[];if(i){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let c=!o||o==Yg;a.forEach(l=>{l.queued||!c&&l.triggerName!=r||s.push(l)})}}return(t||r)&&(s=s.filter(a=>!(t&&t!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,i,t){let r=i.triggerName,o=i.element,s=i.isRemovalTransition?void 0:e,a=i.isRemovalTransition?void 0:r;for(let c of i.timelines){let l=c.element,d=l!==o,u=jo(t,l,[]);this._getPreviousPlayers(l,d,s,a,i.toState).forEach(f=>{let p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),u.push(f)})}pu(o,i.fromStyles)}_buildAnimation(e,i,t,r,o,s){let a=i.triggerName,c=i.element,l=[],d=new Set,u=new Set,h=i.timelines.map(p=>{let b=p.element;d.add(b);let g=b[Is];if(g&&g.removedBeforeQueried)return new Rl(p.duration,p.delay);let m=b!==c,v=nue((t.get(b)||Qde).map(M=>M.getRealPlayer())).filter(M=>{let A=M;return A.element?A.element===b:!1}),_=o.get(b),y=s.get(b),C=Uz(this._normalizer,p.keyframes,_,y),R=this._buildPlayer(p,C,v);if(p.subTimeline&&r&&u.add(b),m){let M=new Jg(e,a,b);M.setRealPlayer(R),l.push(M)}return R});l.forEach(p=>{jo(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>Jde(this.playersByQueriedElement,p.element,p))}),d.forEach(p=>Jo(p,Dz));let f=Il(h);return f.onDestroy(()=>{d.forEach(p=>Hf(p,Dz)),Aa(c,i.toStyles)}),u.forEach(p=>{jo(r,p,[]).push(f)}),f}_buildPlayer(e,i,t){return i.length>0?this.driver.animate(e.element,i,e.duration,e.delay,e.easing,t):new Rl(e.duration,e.delay)}},Jg=class{constructor(e,i,t){this.namespaceId=e,this.triggerName=i,this.element=t,this._player=new Rl,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((i,t)=>{i.forEach(r=>pI(e,t,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let i=this._player;i.triggerCallback&&e.onStart(()=>i.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,i){jo(this._queuedCallbacks,e,[]).push(i)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let i=this._player;i.triggerCallback&&i.triggerCallback(e)}};function Jde(n,e,i){let t=n.get(e);if(t){if(t.length){let r=t.indexOf(i);t.splice(r,1)}t.length==0&&n.delete(e)}return t}function eue(n){return n??null}function dw(n){return n&&n.nodeType===1}function tue(n){return n=="start"||n=="done"}function Oz(n,e){let i=n.style.display;return n.style.display=e??"none",i}function Nz(n,e,i,t,r){let o=[];i.forEach(c=>o.push(Oz(c)));let s=[];t.forEach((c,l)=>{let d=new Map;c.forEach(u=>{let h=e.computeStyle(l,u,r);d.set(u,h),(!h||h.length==0)&&(l[Is]=Kde,s.push(l))}),n.set(l,d)});let a=0;return i.forEach(c=>Oz(c,o[a++])),s}function Lz(n,e){let i=new Map;if(n.forEach(a=>i.set(a,[])),e.length==0)return i;let t=1,r=new Set(e),o=new Map;function s(a){if(!a)return t;let c=o.get(a);if(c)return c;let l=a.parentNode;return i.has(l)?c=l:r.has(l)?c=t:c=s(l),o.set(a,c),c}return e.forEach(a=>{let c=s(a);c!==t&&i.get(c).push(a)}),i}function Jo(n,e){n.classList?.add(e)}function Hf(n,e){n.classList?.remove(e)}function iue(n,e,i){Il(i).onDone(()=>n.processLeaveNode(e))}function nue(n){let e=[];return Qz(n,e),e}function Qz(n,e){for(let i=0;i<n.length;i++){let t=n[i];t instanceof vg?Qz(t.players,e):e.push(t)}}function rue(n,e){let i=Object.keys(n),t=Object.keys(e);if(i.length!=t.length)return!1;for(let r=0;r<i.length;r++){let o=i[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function Bz(n,e,i){let t=i.get(n);if(!t)return!1;let r=e.get(n);return r?t.forEach(o=>r.add(o)):e.set(n,t),i.delete(n),!0}var Wf=class{constructor(e,i,t,r){this._driver=i,this._normalizer=t,this._triggerCache={},this.onRemovalComplete=(o,s)=>{},this._transitionEngine=new hI(e.body,i,t,r),this._timelineEngine=new dI(e.body,i,t),this._transitionEngine.onRemovalComplete=(o,s)=>this.onRemovalComplete(o,s)}registerTrigger(e,i,t,r,o){let s=e+"-"+r,a=this._triggerCache[s];if(!a){let c=[],l=[],d=qz(this._driver,o,c,l);if(c.length)throw rde(r,c);l.length&&void 0,a=Gde(r,d,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(i,r,a)}register(e,i){this._transitionEngine.register(e,i)}destroy(e,i){this._transitionEngine.destroy(e,i)}onInsert(e,i,t,r){this._transitionEngine.insertNode(e,i,t,r)}onRemove(e,i,t){this._transitionEngine.removeNode(e,i,t)}disableAnimations(e,i){this._transitionEngine.markElementAsDisabled(e,i)}process(e,i,t,r){if(t.charAt(0)=="@"){let[o,s]=Cz(t),a=r;this._timelineEngine.command(o,i,s,a)}else this._transitionEngine.trigger(e,i,t,r)}listen(e,i,t,r,o){if(t.charAt(0)=="@"){let[s,a]=Cz(t);return this._timelineEngine.listen(s,i,a,o)}return this._transitionEngine.listen(e,i,t,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function oue(n,e){let i=null,t=null;return Array.isArray(e)&&e.length?(i=KA(e[0]),e.length>1&&(t=KA(e[e.length-1]))):e instanceof Map&&(i=KA(e)),i||t?new fI(n,i,t):null}var Gf=class Gf{constructor(e,i,t){this._element=e,this._startStyles=i,this._endStyles=t,this._state=0;let r=Gf.initialStylesByElement.get(e);r||Gf.initialStylesByElement.set(e,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Aa(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Aa(this._element,this._initialStyles),this._endStyles&&(Aa(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Gf.initialStylesByElement.delete(this._element),this._startStyles&&(pu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(pu(this._element,this._endStyles),this._endStyles=null),Aa(this._element,this._initialStyles),this._state=3)}};Gf.initialStylesByElement=new WeakMap;var fI=Gf;function KA(n){let e=null;return n.forEach((i,t)=>{sue(t)&&(e=e||new Map,e.set(t,i))}),e}function sue(n){return n==="display"||n==="position"}var vw=class{constructor(e,i,t,r){this.element=e,this.keyframes=i,this.options=t,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=t.duration,this._delay=t.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let i=()=>this._onFinish();this.domPlayer.addEventListener("finish",i),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",i)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let i=[];return e.forEach(t=>{i.push(Object.fromEntries(t))}),i}_triggerWebAnimation(e,i,t){return e.animate(this._convertKeyframesToObject(i),t)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((t,r)=>{r!=="offset"&&e.set(r,this._finished?t:yI(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let i=e==="start"?this._onStartFns:this._onDoneFns;i.forEach(t=>t()),i.length=0}},yw=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,i){return!1}containsElement(e,i){return Vz(e,i)}getParentElement(e){return bI(e)}query(e,i,t){return zz(e,i,t)}computeStyle(e,i,t){return yI(e,i)}animate(e,i,t,r,o,s=[]){let a=r==0?"both":"forwards",c={duration:t,delay:r,fill:a};o&&(c.easing=o);let l=new Map,d=s.filter(f=>f instanceof vw);Tde(t,r)&&d.forEach(f=>{f.currentSnapshot.forEach((p,b)=>l.set(b,p))});let u=Mde(i).map(f=>new Map(f));u=Cde(e,u,l);let h=oue(e,u);return new vw(e,u,c,h)}};var uw="@",Kz="@.disabled",xw=class{constructor(e,i,t,r){this.namespaceId=e,this.delegate=i,this.engine=t,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,i){return this.delegate.createElement(e,i)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,i){this.delegate.appendChild(e,i),this.engine.onInsert(this.namespaceId,i,e,!1)}insertBefore(e,i,t,r=!0){this.delegate.insertBefore(e,i,t),this.engine.onInsert(this.namespaceId,i,e,r)}removeChild(e,i,t){this.engine.onRemove(this.namespaceId,i,this.delegate)}selectRootElement(e,i){return this.delegate.selectRootElement(e,i)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,i,t,r){this.delegate.setAttribute(e,i,t,r)}removeAttribute(e,i,t){this.delegate.removeAttribute(e,i,t)}addClass(e,i){this.delegate.addClass(e,i)}removeClass(e,i){this.delegate.removeClass(e,i)}setStyle(e,i,t,r){this.delegate.setStyle(e,i,t,r)}removeStyle(e,i,t){this.delegate.removeStyle(e,i,t)}setProperty(e,i,t){i.charAt(0)==uw&&i==Kz?this.disableAnimations(e,!!t):this.delegate.setProperty(e,i,t)}setValue(e,i){this.delegate.setValue(e,i)}listen(e,i,t){return this.delegate.listen(e,i,t)}disableAnimations(e,i){this.engine.disableAnimations(e,i)}},mI=class extends xw{constructor(e,i,t,r,o){super(i,t,r,o),this.factory=e,this.namespaceId=i}setProperty(e,i,t){i.charAt(0)==uw?i.charAt(1)=="."&&i==Kz?(t=t===void 0?!0:!!t,this.disableAnimations(e,t)):this.engine.process(this.namespaceId,e,i.slice(1),t):this.delegate.setProperty(e,i,t)}listen(e,i,t){if(i.charAt(0)==uw){let r=aue(e),o=i.slice(1),s="";return o.charAt(0)!=uw&&([o,s]=cue(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,t,a)})}return this.delegate.listen(e,i,t)}};function aue(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function cue(n){let e=n.indexOf("."),i=n.substring(0,e),t=n.slice(e+1);return[i,t]}var ww=class{constructor(e,i,t){this.delegate=e,this.engine=i,this._zone=t,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(r,o)=>{let s=o?.parentNode(r);s&&o.removeChild(s,r)}}createRenderer(e,i){let t="",r=this.delegate.createRenderer(e,i);if(!e||!i?.data?.animation){let l=this._rendererCache,d=l.get(r);if(!d){let u=()=>l.delete(r);d=new xw(t,r,this.engine,u),l.set(r,d)}return d}let o=i.id,s=i.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(o,s,e,l.name,l)};return i.data.animation.forEach(a),new mI(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,t){if(e>=0&&e<this._microtaskId){this._zone.run(()=>i(t));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([i,t])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var due=(()=>{let e=class e extends Wf{constructor(t,r,o){super(t,r,o,te(Hu,{optional:!0}))}ngOnDestroy(){this.flush()}};e.\u0275fac=function(r){return new(r||e)(de(xt),de(gu),de(bu))},e.\u0275prov=we({token:e,factory:e.\u0275fac});let n=e;return n})();function uue(){return new mw}function hue(n,e,i){return new ww(n,e,i)}var e4=[{provide:bu,useFactory:uue},{provide:Wf,useClass:due},{provide:Jl,useFactory:hue,deps:[yv,Wf,Qe]}],Jz=[{provide:gu,useFactory:()=>new yw},{provide:Gn,useValue:"BrowserAnimations"},...e4],fue=[{provide:gu,useClass:_I},{provide:Gn,useValue:"NoopAnimations"},...e4],t4=(()=>{let e=class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?fue:Jz}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e}),e.\u0275inj=tt({providers:Jz,imports:[wv]});let n=e;return n})();var i4=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=it({type:e,bootstrap:[mz]}),e.\u0275inj=tt({providers:[iU({fullLibraryLoader:()=>import("./chunk-A6DKN3TA.js")}),ya],imports:[wv,nz,nV,Rz,NV,rU,aU,t4,fB,qg,pg,hz,bg,$g,vO]});let n=e;return n})();var n4={production:!0};n4.production&&void 0;TO().bootstrapModule(i4).catch(n=>console.error(n));
