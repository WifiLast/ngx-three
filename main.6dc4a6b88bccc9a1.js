"use strict";(self.webpackChunkngx_three_demo=self.webpackChunkngx_three_demo||[]).push([[792],{6421:(Ix,g1,zd)=>{var Hd={};function _1(i,t,e,n,r,s,o){try{var a=i[s](o),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(n,r)}function Si(i){return function(){var t=this,e=arguments;return new Promise(function(n,r){var s=i.apply(t,e);function o(l){_1(s,n,r,o,a,"next",l)}function a(l){_1(s,n,r,o,a,"throw",l)}o(void 0)})}}function b1(i,t){return Object.is(i,t)}zd.r(Hd),zd.d(Hd,{ACESFilmicToneMapping:()=>o3,AddEquation:()=>es,AddOperation:()=>t3,AdditiveAnimationBlendMode:()=>dC,AdditiveBlending:()=>ep,AgXToneMapping:()=>l3,AlphaFormat:()=>m3,AlwaysCompare:()=>I3,AlwaysDepth:()=>qB,AlwaysStencilFunc:()=>fC,AmbientLight:()=>IE,AnimationAction:()=>QV,AnimationClip:()=>qh,AnimationLoader:()=>_ue,AnimationMixer:()=>JV,AnimationObjectGroup:()=>zue,AnimationUtils:()=>fue,ArcCurve:()=>sV,ArrayCamera:()=>LU,ArrowHelper:()=>ahe,AttachedBindMode:()=>DR,Audio:()=>YV,AudioAnalyser:()=>Pue,AudioContext:()=>PE,AudioListener:()=>Aue,AudioLoader:()=>Rue,AxesHelper:()=>lhe,BackSide:()=>jr,BasicDepthPacking:()=>T3,BasicShadowMap:()=>cse,BatchedMesh:()=>QU,Bone:()=>vy,BooleanKeyframeTrack:()=>cd,Box2:()=>Yue,Box3:()=>ir,Box3Helper:()=>dz,BoxGeometry:()=>Ki,BoxHelper:()=>she,BufferAttribute:()=>ui,BufferGeometry:()=>pt,BufferGeometryLoader:()=>VV,ByteType:()=>u3,Cache:()=>Ua,Camera:()=>xp,CameraHelper:()=>rhe,CanvasTexture:()=>aE,CapsuleGeometry:()=>Fy,CatmullRomCurve3:()=>oV,CineonToneMapping:()=>s3,CircleGeometry:()=>Ly,ClampToEdgeWrapping:()=>ws,Clock:()=>md,Color:()=>Te,ColorKeyframeTrack:()=>ME,ColorManagement:()=>xi,CompressedArrayTexture:()=>Ode,CompressedCubeTexture:()=>Nde,CompressedTexture:()=>Iy,CompressedTextureLoader:()=>bue,ConeGeometry:()=>Oy,ConstantAlphaFactor:()=>WB,ConstantColorFactor:()=>HB,CubeCamera:()=>sU,CubeReflectionMapping:()=>Ea,CubeRefractionMapping:()=>yl,CubeTexture:()=>wp,CubeTextureLoader:()=>vue,CubeUVReflectionMapping:()=>fh,CubicBezierCurve:()=>hE,CubicBezierCurve3:()=>lV,CubicInterpolant:()=>AV,CullFaceBack:()=>RR,CullFaceFront:()=>IB,CullFaceFrontBack:()=>lse,CullFaceNone:()=>DB,Curve:()=>xo,CurvePath:()=>dV,CustomBlending:()=>tp,CustomToneMapping:()=>a3,CylinderGeometry:()=>On,Cylindrical:()=>que,Data3DTexture:()=>yC,DataArrayTexture:()=>Vv,DataTexture:()=>Jo,DataTextureLoader:()=>yue,DataUtils:()=>moe,DecrementStencilOp:()=>_se,DecrementWrapStencilOp:()=>vse,DefaultLoadingManager:()=>PV,DepthFormat:()=>Vc,DepthStencilFormat:()=>wl,DepthTexture:()=>jh,DetachedBindMode:()=>d3,DirectionalLight:()=>Ky,DirectionalLightHelper:()=>nhe,DiscreteInterpolant:()=>DV,DisplayP3ColorSpace:()=>Bv,DodecahedronGeometry:()=>Ny,DoubleSide:()=>Br,DstAlphaFactor:()=>Rv,DstColorFactor:()=>Cv,DynamicCopyUsage:()=>Fse,DynamicDrawUsage:()=>Ese,DynamicReadUsage:()=>Ise,EdgesGeometry:()=>uV,EllipseCurve:()=>Fl,EqualCompare:()=>C3,EqualDepth:()=>ZB,EqualStencilFunc:()=>Tse,EquirectangularReflectionMapping:()=>rp,EquirectangularRefractionMapping:()=>sp,Euler:()=>Bs,EventDispatcher:()=>is,ExtrudeGeometry:()=>Gy,FileLoader:()=>rs,Float16BufferAttribute:()=>yoe,Float32BufferAttribute:()=>qe,FloatType:()=>ts,Fog:()=>Sp,FogExp2:()=>fy,FramebufferTexture:()=>Lde,FrontSide:()=>Yo,Frustum:()=>Tp,GLBufferAttribute:()=>Xue,GLSL1:()=>Ose,GLSL3:()=>pC,GreaterCompare:()=>E3,GreaterDepth:()=>QB,GreaterEqualCompare:()=>D3,GreaterEqualDepth:()=>KB,GreaterEqualStencilFunc:()=>Cse,GreaterStencilFunc:()=>Sse,GridHelper:()=>jE,Group:()=>yo,HalfFloatType:()=>mn,HemisphereLight:()=>RE,HemisphereLightHelper:()=>the,IcosahedronGeometry:()=>zp,ImageBitmapLoader:()=>GV,ImageLoader:()=>Gp,ImageUtils:()=>B3,IncrementStencilOp:()=>gse,IncrementWrapStencilOp:()=>bse,InstancedBufferAttribute:()=>nd,InstancedBufferGeometry:()=>UV,InstancedInterleavedBuffer:()=>$ue,InstancedMesh:()=>xy,Int16BufferAttribute:()=>boe,Int32BufferAttribute:()=>voe,Int8BufferAttribute:()=>poe,IntType:()=>IR,InterleavedBuffer:()=>Rp,InterleavedBufferAttribute:()=>Pl,Interpolant:()=>Xh,InterpolateDiscrete:()=>gh,InterpolateLinear:()=>zc,InterpolateSmooth:()=>Ov,InvertStencilOp:()=>yse,KeepStencilOp:()=>Wc,KeyframeTrack:()=>wo,LOD:()=>VU,LatheGeometry:()=>jp,Layers:()=>qv,LessCompare:()=>R3,LessDepth:()=>YB,LessEqualCompare:()=>mC,LessEqualDepth:()=>ip,LessEqualStencilFunc:()=>Mse,LessStencilFunc:()=>wse,Light:()=>Ol,LightProbe:()=>BV,Line:()=>En,Line3:()=>Zue,LineBasicMaterial:()=>Ln,LineCurve:()=>fE,LineCurve3:()=>cV,LineDashedMaterial:()=>RV,LineLoop:()=>rE,LineSegments:()=>zs,LinearDisplayP3ColorSpace:()=>lp,LinearFilter:()=>fn,LinearInterpolant:()=>TE,LinearMipMapLinearFilter:()=>fse,LinearMipMapNearestFilter:()=>hse,LinearMipmapLinearFilter:()=>js,LinearMipmapNearestFilter:()=>ph,LinearSRGBColorSpace:()=>Yn,LinearToneMapping:()=>n3,LinearTransfer:()=>cp,Loader:()=>Tr,LoaderUtils:()=>Nl,LoadingManager:()=>SE,LoopOnce:()=>cC,LoopPingPong:()=>x3,LoopRepeat:()=>y3,LuminanceAlphaFormat:()=>_3,LuminanceFormat:()=>g3,MOUSE:()=>xs,Material:()=>kn,MaterialLoader:()=>Qy,MathUtils:()=>st,Matrix3:()=>Bt,Matrix4:()=>je,MaxEquation:()=>OB,Mesh:()=>Be,MeshBasicMaterial:()=>Zn,MeshDepthMaterial:()=>uy,MeshDistanceMaterial:()=>XC,MeshLambertMaterial:()=>MV,MeshMatcapMaterial:()=>SV,MeshNormalMaterial:()=>Hp,MeshPhongMaterial:()=>yE,MeshPhysicalMaterial:()=>Hs,MeshStandardMaterial:()=>ta,MeshToonMaterial:()=>TV,MinEquation:()=>LB,MirroredRepeatWrapping:()=>mh,MixOperation:()=>e3,MultiplyBlending:()=>AR,MultiplyOperation:()=>np,NearestFilter:()=>ci,NearestMipMapLinearFilter:()=>use,NearestMipMapNearestFilter:()=>dse,NearestMipmapLinearFilter:()=>Bc,NearestMipmapNearestFilter:()=>Av,NeutralToneMapping:()=>c3,NeverCompare:()=>S3,NeverDepth:()=>XB,NeverStencilFunc:()=>xse,NoBlending:()=>oi,NoColorSpace:()=>Da,NoToneMapping:()=>Ca,NormalAnimationBlendMode:()=>Nv,NormalBlending:()=>Zo,NotEqualCompare:()=>A3,NotEqualDepth:()=>JB,NotEqualStencilFunc:()=>Rse,NumberKeyframeTrack:()=>dd,Object3D:()=>Nt,ObjectLoader:()=>Mue,ObjectSpaceNormalMap:()=>M3,OctahedronGeometry:()=>ja,OneFactor:()=>NB,OneMinusConstantAlphaFactor:()=>$B,OneMinusConstantColorFactor:()=>GB,OneMinusDstAlphaFactor:()=>UB,OneMinusDstColorFactor:()=>VB,OneMinusSrcAlphaFactor:()=>hh,OneMinusSrcColorFactor:()=>BB,OrthographicCamera:()=>Il,P3Primaries:()=>up,PCFShadowMap:()=>CR,PCFSoftShadowMap:()=>PB,PMREMGenerator:()=>HC,Path:()=>Np,PerspectiveCamera:()=>Cn,Plane:()=>Vs,PlaneGeometry:()=>Dl,PlaneHelper:()=>ohe,PointLight:()=>Zy,PointLightHelper:()=>Jue,Points:()=>oE,PointsMaterial:()=>Ey,PolarGridHelper:()=>ihe,PolyhedronGeometry:()=>Na,PositionalAudio:()=>Iue,PropertyBinding:()=>Fi,PropertyMixer:()=>KV,QuadraticBezierCurve:()=>mE,QuadraticBezierCurve3:()=>pE,Quaternion:()=>mi,QuaternionKeyframeTrack:()=>Ll,QuaternionLinearInterpolant:()=>IV,RED_GREEN_RGTC2_Format:()=>aC,RED_RGTC1_Format:()=>v3,REVISION:()=>Sv,RGBADepthPacking:()=>hC,RGBAFormat:()=>Ts,RGBAIntegerFormat:()=>OR,RGBA_ASTC_10x10_Format:()=>tC,RGBA_ASTC_10x5_Format:()=>QR,RGBA_ASTC_10x6_Format:()=>JR,RGBA_ASTC_10x8_Format:()=>eC,RGBA_ASTC_12x10_Format:()=>iC,RGBA_ASTC_12x12_Format:()=>nC,RGBA_ASTC_4x4_Format:()=>GR,RGBA_ASTC_5x4_Format:()=>WR,RGBA_ASTC_5x5_Format:()=>$R,RGBA_ASTC_6x5_Format:()=>XR,RGBA_ASTC_6x6_Format:()=>qR,RGBA_ASTC_8x5_Format:()=>YR,RGBA_ASTC_8x6_Format:()=>ZR,RGBA_ASTC_8x8_Format:()=>KR,RGBA_BPTC_Format:()=>Lv,RGBA_ETC2_EAC_Format:()=>HR,RGBA_PVRTC_2BPPV1_Format:()=>UR,RGBA_PVRTC_4BPPV1_Format:()=>BR,RGBA_S3TC_DXT1_Format:()=>Pv,RGBA_S3TC_DXT3_Format:()=>kv,RGBA_S3TC_DXT5_Format:()=>Fv,RGBFormat:()=>p3,RGB_BPTC_SIGNED_Format:()=>rC,RGB_BPTC_UNSIGNED_Format:()=>sC,RGB_ETC1_Format:()=>VR,RGB_ETC2_Format:()=>zR,RGB_PVRTC_2BPPV1_Format:()=>jR,RGB_PVRTC_4BPPV1_Format:()=>NR,RGB_S3TC_DXT1_Format:()=>Iv,RGFormat:()=>b3,RGIntegerFormat:()=>LR,RawShaderMaterial:()=>wV,Ray:()=>Zc,Raycaster:()=>vd,Rec709Primaries:()=>dp,RectAreaLight:()=>NV,RedFormat:()=>op,RedIntegerFormat:()=>FR,ReinhardToneMapping:()=>r3,RenderTarget:()=>U3,RepeatWrapping:()=>Ko,ReplaceStencilOp:()=>pse,ReverseSubtractEquation:()=>FB,RingGeometry:()=>Wy,SIGNED_RED_GREEN_RGTC2_Format:()=>lC,SIGNED_RED_RGTC1_Format:()=>oC,SRGBColorSpace:()=>qn,SRGBTransfer:()=>Hi,Scene:()=>YC,ShaderChunk:()=>Gt,ShaderLib:()=>vo,ShaderMaterial:()=>ei,ShadowMaterial:()=>xV,Shape:()=>sd,ShapeGeometry:()=>$y,ShapePath:()=>che,ShapeUtils:()=>ea,ShortType:()=>h3,Skeleton:()=>Dp,SkeletonHelper:()=>Que,SkinnedMesh:()=>eE,Source:()=>Xc,Sphere:()=>nr,SphereGeometry:()=>ad,Spherical:()=>e0,SphericalHarmonics3:()=>jV,SplineCurve:()=>gE,SpotLight:()=>AE,SpotLightHelper:()=>Kue,Sprite:()=>BU,SpriteMaterial:()=>ZC,SrcAlphaFactor:()=>uh,SrcAlphaSaturateFactor:()=>zB,SrcColorFactor:()=>jB,StaticCopyUsage:()=>kse,StaticDrawUsage:()=>hp,StaticReadUsage:()=>Dse,StereoCamera:()=>Cue,StreamCopyUsage:()=>Lse,StreamDrawUsage:()=>Ase,StreamReadUsage:()=>Pse,StringKeyframeTrack:()=>ud,SubtractEquation:()=>kB,SubtractiveBlending:()=>ER,TOUCH:()=>Ra,TangentSpaceNormalMap:()=>Tl,TetrahedronGeometry:()=>Xy,Texture:()=>Sn,TextureLoader:()=>kV,TorusGeometry:()=>Ba,TorusKnotGeometry:()=>qy,Triangle:()=>Rs,TriangleFanDrawMode:()=>jv,TriangleStripDrawMode:()=>uC,TrianglesDrawMode:()=>w3,TubeGeometry:()=>Yy,UVMapping:()=>Ev,Uint16BufferAttribute:()=>kC,Uint32BufferAttribute:()=>FC,Uint8BufferAttribute:()=>goe,Uint8ClampedBufferAttribute:()=>_oe,Uniform:()=>LE,UniformsGroup:()=>Wue,UniformsLib:()=>Ge,UniformsUtils:()=>Rn,UnsignedByteType:()=>Aa,UnsignedInt248Type:()=>xl,UnsignedInt5999Type:()=>f3,UnsignedIntType:()=>Uc,UnsignedShort4444Type:()=>PR,UnsignedShort5551Type:()=>kR,UnsignedShortType:()=>Dv,VSMShadowMap:()=>qo,Vector2:()=>$,Vector3:()=>C,Vector4:()=>fi,VectorKeyframeTrack:()=>hd,VideoTexture:()=>Fde,WebGL3DRenderTarget:()=>roe,WebGLArrayRenderTarget:()=>noe,WebGLCoordinateSystem:()=>Qo,WebGLCubeRenderTarget:()=>oU,WebGLMultipleRenderTargets:()=>dhe,WebGLRenderTarget:()=>gi,WebGLRenderer:()=>hy,WebGLUtils:()=>FU,WebGPUCoordinateSystem:()=>fp,WireframeGeometry:()=>bV,WrapAroundEnding:()=>ap,ZeroCurvatureEnding:()=>Hc,ZeroFactor:()=>dh,ZeroSlopeEnding:()=>Gc,ZeroStencilOp:()=>mse,createCanvasElement:()=>F3});let Vn=null,_f=!1,Vg=1;const ks=Symbol("SIGNAL");function $t(i){const t=Vn;return Vn=i,t}const zg={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Hg(i){if(_f)throw new Error("");if(null===Vn)return;Vn.consumerOnSignalRead(i);const t=Vn.nextProducerIndex++;Gd(Vn),t<Vn.producerNode.length&&Vn.producerNode[t]!==i&&bf(Vn)&&Gg(Vn.producerNode[t],Vn.producerIndexOfThis[t]),Vn.producerNode[t]!==i&&(Vn.producerNode[t]=i,Vn.producerIndexOfThis[t]=bf(Vn)?S1(i,Vn,t):0),Vn.producerLastReadVersion[t]=i.version}function y1(i){if((!bf(i)||i.dirty)&&(i.dirty||i.lastCleanEpoch!==Vg)){if(!i.producerMustRecompute(i)&&!Fx(i))return i.dirty=!1,void(i.lastCleanEpoch=Vg);i.producerRecomputeValue(i),i.dirty=!1,i.lastCleanEpoch=Vg}}function x1(i){if(void 0===i.liveConsumerNode)return;const t=_f;_f=!0;try{for(const e of i.liveConsumerNode)e.dirty||T1(e)}finally{_f=t}}function w1(){return!1!==Vn?.consumerAllowSignalWrites}function T1(i){i.dirty=!0,x1(i),i.consumerMarkedDirty?.(i)}function Px(i){return i&&(i.nextProducerIndex=0),$t(i)}function kx(i,t){if($t(t),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(bf(i))for(let e=i.nextProducerIndex;e<i.producerNode.length;e++)Gg(i.producerNode[e],i.producerIndexOfThis[e]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function Fx(i){Gd(i);for(let t=0;t<i.producerNode.length;t++){const e=i.producerNode[t],n=i.producerLastReadVersion[t];if(n!==e.version||(y1(e),n!==e.version))return!0}return!1}function M1(i){if(Gd(i),bf(i))for(let t=0;t<i.producerNode.length;t++)Gg(i.producerNode[t],i.producerIndexOfThis[t]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function S1(i,t,e){if(R1(i),Gd(i),0===i.liveConsumerNode.length)for(let n=0;n<i.producerNode.length;n++)i.producerIndexOfThis[n]=S1(i.producerNode[n],i,n);return i.liveConsumerIndexOfThis.push(e),i.liveConsumerNode.push(t)-1}function Gg(i,t){if(R1(i),Gd(i),1===i.liveConsumerNode.length)for(let n=0;n<i.producerNode.length;n++)Gg(i.producerNode[n],i.producerIndexOfThis[n]);const e=i.liveConsumerNode.length-1;if(i.liveConsumerNode[t]=i.liveConsumerNode[e],i.liveConsumerIndexOfThis[t]=i.liveConsumerIndexOfThis[e],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,t<i.liveConsumerNode.length){const n=i.liveConsumerIndexOfThis[t],r=i.liveConsumerNode[t];Gd(r),r.producerIndexOfThis[n]=t}}function bf(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function Gd(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}function R1(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}const Lx=Symbol("UNSET"),Ox=Symbol("COMPUTING"),Wg=Symbol("ERRORED"),HW={...zg,value:Lx,dirty:!0,error:null,equal:b1,producerMustRecompute:i=>i.value===Lx||i.value===Ox,producerRecomputeValue(i){if(i.value===Ox)throw new Error("Detected cycle in computations.");const t=i.value;i.value=Ox;const e=Px(i);let n;try{n=i.computation()}catch(r){n=Wg,i.error=r}finally{kx(i,e)}t!==Lx&&t!==Wg&&n!==Wg&&i.equal(t,n)?i.value=t:(i.value=n,i.version++)}};let C1=function GW(){throw new Error};function E1(){C1()}let Nx=null;function jx(i,t){w1()||E1(),i.equal(i.value,t)||(i.value=t,function qW(i){i.version++,function VW(){Vg++}(),x1(i),Nx?.()}(i))}const A1={...zg,equal:b1,value:void 0};const Bx=()=>{},ZW={...zg,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{null!==i.schedule&&i.schedule(i.ref)},hasRun:!1,cleanupFn:Bx};function pi(i){return"function"==typeof i}function Ux(i){const e=i(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Vx=Ux(i=>function(e){i(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function $g(i,t){if(i){const e=i.indexOf(t);0<=e&&i.splice(e,1)}}class Oi{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(pi(n))try{n()}catch(s){t=s instanceof Vx?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{P1(s)}catch(o){t=t??[],o instanceof Vx?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Vx(t)}}add(t){var e;if(t&&t!==this)if(this.closed)P1(t);else{if(t instanceof Oi){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&$g(e,t)}remove(t){const{_finalizers:e}=this;e&&$g(e,t),t instanceof Oi&&t._removeParent(this)}}Oi.EMPTY=(()=>{const i=new Oi;return i.closed=!0,i})();const D1=Oi.EMPTY;function I1(i){return i instanceof Oi||i&&"closed"in i&&pi(i.remove)&&pi(i.add)&&pi(i.unsubscribe)}function P1(i){pi(i)?i():i.unsubscribe()}const cc={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Xg={setTimeout(i,t,...e){const{delegate:n}=Xg;return n?.setTimeout?n.setTimeout(i,t,...e):setTimeout(i,t,...e)},clearTimeout(i){const{delegate:t}=Xg;return(t?.clearTimeout||clearTimeout)(i)},delegate:void 0};function k1(i){Xg.setTimeout(()=>{const{onUnhandledError:t}=cc;if(!t)throw i;t(i)})}function zx(){}const KW=Hx("C",void 0,void 0);function Hx(i,t,e){return{kind:i,value:t,error:e}}let dc=null;function qg(i){if(cc.useDeprecatedSynchronousErrorHandling){const t=!dc;if(t&&(dc={errorThrown:!1,error:null}),i(),t){const{errorThrown:e,error:n}=dc;if(dc=null,e)throw n}}else i()}class Gx extends Oi{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,I1(t)&&t.add(this)):this.destination=r8}static create(t,e,n){return new Wd(t,e,n)}next(t){this.isStopped?$x(function JW(i){return Hx("N",i,void 0)}(t),this):this._next(t)}error(t){this.isStopped?$x(function QW(i){return Hx("E",void 0,i)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?$x(KW,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const t8=Function.prototype.bind;function Wx(i,t){return t8.call(i,t)}class i8{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(n){Yg(n)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(n){Yg(n)}else Yg(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Yg(e)}}}class Wd extends Gx{constructor(t,e,n){let r;if(super(),pi(t)||!t)r={next:t??void 0,error:e??void 0,complete:n??void 0};else{let s;this&&cc.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&Wx(t.next,s),error:t.error&&Wx(t.error,s),complete:t.complete&&Wx(t.complete,s)}):r=t}this.destination=new i8(r)}}function Yg(i){cc.useDeprecatedSynchronousErrorHandling?function e8(i){cc.useDeprecatedSynchronousErrorHandling&&dc&&(dc.errorThrown=!0,dc.error=i)}(i):k1(i)}function $x(i,t){const{onStoppedNotification:e}=cc;e&&Xg.setTimeout(()=>e(i,t))}const r8={closed:!0,next:zx,error:function n8(i){throw i},complete:zx},Xx="function"==typeof Symbol&&Symbol.observable||"@@observable";function el(i){return i}function F1(i){return 0===i.length?el:1===i.length?i[0]:function(e){return i.reduce((n,r)=>r(n),e)}}let Pi=(()=>{class i{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new i;return n.source=this,n.operator=e,n}subscribe(e,n,r){const s=function a8(i){return i&&i instanceof Gx||function o8(i){return i&&pi(i.next)&&pi(i.error)&&pi(i.complete)}(i)&&I1(i)}(e)?e:new Wd(e,n,r);return qg(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=L1(n))((r,s)=>{const o=new Wd({next:a=>{try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[Xx](){return this}pipe(...e){return F1(e)(this)}toPromise(e){return new(e=L1(e))((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=t=>new i(t),i})();function L1(i){var t;return null!==(t=i??cc.Promise)&&void 0!==t?t:Promise}const l8=Ux(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Et=(()=>{class i extends Pi{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new O1(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new l8}next(e){qg(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(e)}})}error(e){qg(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){qg(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:s}=this;return n||r?D1:(this.currentObservers=null,s.push(e),new Oi(()=>{this.currentObservers=null,$g(s,e)}))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:s}=this;n?e.error(r):s&&e.complete()}asObservable(){const e=new Pi;return e.source=this,e}}return i.create=(t,e)=>new O1(t,e),i})();class O1 extends Et{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)}error(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:D1}}class Wr extends Et{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}}function N1(i){return pi(i?.lift)}function _n(i){return t=>{if(N1(t))return t.lift(function(e){try{return i(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function tn(i,t,e,n,r){return new c8(i,t,e,n,r)}class c8 extends Gx{constructor(t,e,n,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Ct(i,t){return _n((e,n)=>{let r=0;e.subscribe(tn(n,s=>{n.next(i.call(t,s,r++))}))})}const j1="https://g.co/ng/security#xss";class te extends Error{constructor(t,e){super(function $d(i,t){return`NG0${Math.abs(i)}${t?": "+t:""}`}(t,e)),this.code=t}}const Zg=Symbol("InputSignalNode#UNSET"),B1={...A1,transformFn:void 0,applyValueToInputSignal(i,t){jx(i,t)}};function U1(i,t){const e=Object.create(B1);function n(){if(Hg(e),e.value===Zg)throw new te(-950,!1);return e.value}return e.value=i,e.transformFn=t?.transform,n[ks]=e,n}function da(i){return{toString:i}.toString()}const qd="__parameters__";function Zd(i,t,e){return da(()=>{const n=function qx(i){return function(...e){if(i){const n=i(...e);for(const r in n)this[r]=n[r]}}}(t);function r(...s){if(this instanceof r)return n.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,d){const u=l.hasOwnProperty(qd)?l[qd]:Object.defineProperty(l,qd,{value:[]})[qd];for(;u.length<=d;)u.push(null);return(u[d]=u[d]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}const wi=globalThis;function Ri(i){for(let t in i)if(i[t]===Ri)return t;throw Error("Could not find renamed property on target object.")}function d8(i,t){for(const e in t)t.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(i[e]=t[e])}function zn(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(zn).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const t=i.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Yx(i,t){return null==i||""===i?null===t?"":t:null==t||""===t?i:i+" "+t}const u8=Ri({__forward_ref__:Ri});function Le(i){return i.__forward_ref__=Le,i.toString=function(){return zn(this())},i}function yt(i){return Kg(i)?i():i}function Kg(i){return"function"==typeof i&&i.hasOwnProperty(u8)&&i.__forward_ref__===Le}function Re(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Yt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Qg(i){return z1(i,e_)||z1(i,H1)}function z1(i,t){return i.hasOwnProperty(t)?i[t]:null}function Jg(i){return i&&(i.hasOwnProperty(Zx)||i.hasOwnProperty(_8))?i[Zx]:null}const e_=Ri({\u0275prov:Ri}),Zx=Ri({\u0275inj:Ri}),H1=Ri({ngInjectableDef:Ri}),_8=Ri({ngInjectorDef:Ri});class le{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Re({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function tw(i){return i&&!!i.\u0275providers}const vf=Ri({\u0275cmp:Ri}),iw=Ri({\u0275dir:Ri}),nw=Ri({\u0275pipe:Ri}),W1=Ri({\u0275mod:Ri}),ua=Ri({\u0275fac:Ri}),yf=Ri({__NG_ELEMENT_ID__:Ri}),$1=Ri({__NG_ENV_ID__:Ri});function Dt(i){return"string"==typeof i?i:null==i?"":String(i)}function rw(i,t){throw new te(-201,!1)}var ni=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(ni||{});let sw;function X1(){return sw}function $r(i){const t=sw;return sw=i,t}function q1(i,t,e){const n=Qg(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&ni.Optional?null:void 0!==t?t:void rw()}const xf={},ow="__NG_DI_FLAG__",t_="ngTempTokenPath",T8=/\n/gm,Y1="__source";let Kd;function il(i){const t=Kd;return Kd=i,t}function R8(i,t=ni.Default){if(void 0===Kd)throw new te(-203,!1);return null===Kd?q1(i,void 0,t):Kd.get(i,t&ni.Optional?null:void 0,t)}function ue(i,t=ni.Default){return(X1()||R8)(yt(i),t)}function ee(i,t=ni.Default){return ue(i,i_(t))}function i_(i){return typeof i>"u"||"number"==typeof i?i:(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function aw(i){const t=[];for(let e=0;e<i.length;e++){const n=yt(i[e]);if(Array.isArray(n)){if(0===n.length)throw new te(900,!1);let r,s=ni.Default;for(let o=0;o<n.length;o++){const a=n[o],l=C8(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}t.push(ue(r,s))}else t.push(ue(n))}return t}function wf(i,t){return i[ow]=t,i.prototype[ow]=t,i}function C8(i){return i[ow]}const uc=wf(Zd("Optional"),8),Tf=wf(Zd("SkipSelf"),4);function hc(i,t){return i.hasOwnProperty(ua)?i[ua]:null}function Qd(i,t){i.forEach(e=>Array.isArray(e)?Qd(e,t):t(e))}function K1(i,t,e){t>=i.length?i.push(e):i.splice(t,0,e)}function n_(i,t){return t>=i.length-1?i.pop():i.splice(t,1)[0]}function ds(i,t,e){let n=Jd(i,t);return n>=0?i[1|n]=e:(n=~n,function Q1(i,t,e,n){let r=i.length;if(r==t)i.push(e,n);else if(1===r)i.push(n,i[0]),i[0]=e;else{for(r--,i.push(i[r-1],i[r]);r>t;)i[r]=i[r-2],r--;i[t]=e,i[t+1]=n}}(i,n,t,e)),n}function cw(i,t){const e=Jd(i,t);if(e>=0)return i[1|e]}function Jd(i,t){return function J1(i,t,e){let n=0,r=i.length>>e;for(;r!==n;){const s=n+(r-n>>1),o=i[s<<e];if(t===o)return s<<e;o>t?r=s:n=s+1}return~(r<<e)}(i,t,1)}const Ao={},hi=[],fc=new le(""),eI=new le("",-1),dw=new le("");class s_{get(t,e=xf){if(e===xf){const n=new Error(`NullInjectorError: No provider for ${zn(t)}!`);throw n.name="NullInjectorError",n}return e}}var o_=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(o_||{}),eo=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(eo||{}),rt=function(i){return i[i.None=0]="None",i[i.SignalBased=1]="SignalBased",i[i.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",i}(rt||{});function F8(i,t,e){let n=i.length;for(;;){const r=i.indexOf(t,e);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=t.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}e=r+1}}function uw(i,t,e){let n=0;for(;n<e.length;){const r=e[n];if("number"==typeof r){if(0!==r)break;n++;const s=e[n++],o=e[n++],a=e[n++];i.setAttribute(t,o,a,s)}else{const s=r,o=e[++n];iI(s)?i.setProperty(t,s,o):i.setAttribute(t,s,o),n++}}return n}function tI(i){return 3===i||4===i||6===i}function iI(i){return 64===i.charCodeAt(0)}function Mf(i,t){if(null!==t&&0!==t.length)if(null===i||0===i.length)i=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){const r=t[n];"number"==typeof r?e=r:0===e||nI(i,e,r,null,-1===e||2===e?t[++n]:null)}}return i}function nI(i,t,e,n,r){let s=0,o=i.length;if(-1===t)o=-1;else for(;s<i.length;){const a=i[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<i.length;){const a=i[s];if("number"==typeof a)break;if(a===e){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==o&&(i.splice(o,0,t),s=o+1),i.splice(s++,0,e),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}const rI="ng-template";function L8(i,t,e,n){let r=0;if(n){for(;r<t.length&&"string"==typeof t[r];r+=2)if("class"===t[r]&&-1!==F8(t[r+1].toLowerCase(),e,0))return!0}else if(hw(i))return!1;if(r=t.indexOf(1,r),r>-1){let s;for(;++r<t.length&&"string"==typeof(s=t[r]);)if(s.toLowerCase()===e)return!0}return!1}function hw(i){return 4===i.type&&i.value!==rI}function O8(i,t,e){return t===(4!==i.type||e?i.value:rI)}function N8(i,t,e){let n=4;const r=i.attrs,s=null!==r?function U8(i){for(let t=0;t<i.length;t++)if(tI(i[t]))return t;return i.length}(r):0;let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&n){if(n=2|1&n,""!==l&&!O8(i,l,e)||""===l&&1===t.length){if(to(n))return!1;o=!0}}else if(8&n){if(null===r||!L8(i,r,l,e)){if(to(n))return!1;o=!0}}else{const c=t[++a],d=j8(l,r,hw(i),e);if(-1===d){if(to(n))return!1;o=!0;continue}if(""!==c){let u;if(u=d>s?"":r[d+1].toLowerCase(),2&n&&c!==u){if(to(n))return!1;o=!0}}}}else{if(!o&&!to(n)&&!to(l))return!1;if(o&&to(l))continue;o=!1,n=l|1&n}}return to(n)||o}function to(i){return!(1&i)}function j8(i,t,e,n){if(null===t)return-1;let r=0;if(n||!e){let s=!1;for(;r<t.length;){const o=t[r];if(o===i)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function V8(i,t){let e=i.indexOf(4);if(e>-1)for(e++;e<i.length;){const n=i[e];if("number"==typeof n)return-1;if(n===t)return e;e++}return-1}(t,i)}function sI(i,t,e=!1){for(let n=0;n<t.length;n++)if(N8(i,t[n],e))return!0;return!1}function z8(i,t){e:for(let e=0;e<t.length;e++){const n=t[e];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function oI(i,t){return i?":not("+t.trim()+")":t}function H8(i){let t=i[0],e=1,n=2,r="",s=!1;for(;e<i.length;){let o=i[e];if("string"==typeof o)if(2&n){const a=i[++e];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!to(o)&&(t+=oI(s,r),r=""),n=o,s=s||!to(n);e++}return""!==r&&(t+=oI(s,r)),t}function pe(i){return da(()=>{const t=lI(i),e={...t,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===o_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||eo.Emulated,styles:i.styles||hi,_:null,schemas:i.schemas||null,tView:null,id:""};cI(e);const n=i.dependencies;return e.directiveDefs=a_(n,!1),e.pipeDefs=a_(n,!0),e.id=function Y8(i){let t=0;const e=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const r of e)t=Math.imul(31,t)+r.charCodeAt(0)|0;return t+=2147483648,"c"+t}(e),e})}function $8(i){return Zt(i)||Hn(i)}function X8(i){return null!==i}function Kt(i){return da(()=>({type:i.type,bootstrap:i.bootstrap||hi,declarations:i.declarations||hi,imports:i.imports||hi,exports:i.exports||hi,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function aI(i,t){if(null==i)return Ao;const e={};for(const n in i)if(i.hasOwnProperty(n)){const r=i[n];let s,o,a=rt.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),t?(e[s]=a!==rt.None?[n,a]:n,t[s]=o):e[s]=n}return e}function Pe(i){return da(()=>{const t=lI(i);return cI(t),t})}function Jn(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Zt(i){return i[vf]||null}function Hn(i){return i[iw]||null}function or(i){return i[nw]||null}function ur(i,t){const e=i[W1]||null;if(!e&&!0===t)throw new Error(`Type ${zn(i)} does not have '\u0275mod' property.`);return e}function lI(i){const t={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:i.inputs||Ao,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||hi,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:aI(i.inputs,t),outputs:aI(i.outputs),debugInfo:null}}function cI(i){i.features?.forEach(t=>t(i))}function a_(i,t){if(!i)return null;const e=t?or:$8;return()=>("function"==typeof i?i():i).map(n=>e(n)).filter(X8)}function Z8(...i){return{\u0275providers:fw(0,i),\u0275fromNgModule:!0}}function fw(i,...t){const e=[],n=new Set;let r;const s=o=>{e.push(o)};return Qd(t,o=>{const a=o;l_(a,s,[],n)&&(r||=[],r.push(a))}),void 0!==r&&dI(r,s),e}function dI(i,t){for(let e=0;e<i.length;e++){const{ngModule:n,providers:r}=i[e];mw(r,s=>{t(s,n)})}}function l_(i,t,e,n){if(!(i=yt(i)))return!1;let r=null,s=Jg(i);const o=!s&&Zt(i);if(s||o){if(o&&!o.standalone)return!1;r=i}else{const l=i.ngModule;if(s=Jg(l),!s)return!1;r=l}const a=n.has(r);if(o){if(a)return!1;if(n.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)l_(c,t,e,n)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;n.add(r);try{Qd(s.imports,d=>{l_(d,t,e,n)&&(c||=[],c.push(d))})}finally{}void 0!==c&&dI(c,t)}if(!a){const c=hc(r)||(()=>new r);t({provide:r,useFactory:c,deps:hi},r),t({provide:dw,useValue:r,multi:!0},r),t({provide:fc,useValue:()=>ue(r),multi:!0},r)}const l=s.providers;if(null!=l&&!a){const c=i;mw(l,d=>{t(d,c)})}}}return r!==i&&void 0!==i.providers}function mw(i,t){for(let e of i)tw(e)&&(e=e.\u0275providers),Array.isArray(e)?mw(e,t):t(e)}const K8=Ri({provide:String,useValue:Ri});function pw(i){return null!==i&&"object"==typeof i&&K8 in i}function mc(i){return"function"==typeof i}const gw=new le(""),c_={},J8={};let _w;function d_(){return void 0===_w&&(_w=new s_),_w}class Ir{}class eu extends Ir{get destroyed(){return this._destroyed}constructor(t,e,n,r){super(),this.parent=e,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vw(t,o=>this.processProvider(o)),this.records.set(eI,tu(void 0,this)),r.has("environment")&&this.records.set(Ir,tu(void 0,this));const s=this.records.get(gw);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(dw,hi,ni.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const t=$t(null);try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),$t(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const e=il(this),n=$r(void 0);try{return t()}finally{il(e),$r(n)}}get(t,e=xf,n=ni.Default){if(this.assertNotDestroyed(),t.hasOwnProperty($1))return t[$1](this);n=i_(n);const s=il(this),o=$r(void 0);try{if(!(n&ni.SkipSelf)){let l=this.records.get(t);if(void 0===l){const c=function r6(i){return"function"==typeof i||"object"==typeof i&&i instanceof le}(t)&&Qg(t);l=c&&this.injectableDefInScope(c)?tu(bw(t),c_):null,this.records.set(t,l)}if(null!=l)return this.hydrate(t,l)}return(n&ni.Self?d_():this.parent).get(t,e=n&ni.Optional&&e===xf?null:e)}catch(a){if("NullInjectorError"===a.name){if((a[t_]=a[t_]||[]).unshift(zn(t)),s)throw a;return function E8(i,t,e,n){const r=i[t_];throw t[Y1]&&r.unshift(t[Y1]),i.message=function A8(i,t,e,n=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let r=zn(t);if(Array.isArray(t))r=t.map(zn).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):zn(a)))}r=`{${s.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${i.replace(T8,"\n  ")}`}("\n"+i.message,r,e,n),i.ngTokenPath=r,i[t_]=null,i}(a,t,"R3InjectorError",this.source)}throw a}finally{$r(o),il(s)}}resolveInjectorInitializers(){const t=$t(null),e=il(this),n=$r(void 0);try{const s=this.get(fc,hi,ni.Self);for(const o of s)o()}finally{il(e),$r(n),$t(t)}}toString(){const t=[],e=this.records;for(const n of e.keys())t.push(zn(n));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new te(205,!1)}processProvider(t){let e=mc(t=yt(t))?t:yt(t&&t.provide);const n=function t6(i){return pw(i)?tu(void 0,i.useValue):tu(fI(i),c_)}(t);if(!mc(t)&&!0===t.multi){let r=this.records.get(e);r||(r=tu(void 0,c_,!0),r.factory=()=>aw(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,n)}hydrate(t,e){const n=$t(null);try{return e.value===c_&&(e.value=J8,e.value=e.factory()),"object"==typeof e.value&&e.value&&function n6(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{$t(n)}}injectableDefInScope(t){if(!t.providedIn)return!1;const e=yt(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){const e=this._onDestroyHooks.indexOf(t);-1!==e&&this._onDestroyHooks.splice(e,1)}}function bw(i){const t=Qg(i),e=null!==t?t.factory:hc(i);if(null!==e)return e;if(i instanceof le)throw new te(204,!1);if(i instanceof Function)return function e6(i){if(i.length>0)throw new te(204,!1);const e=function g8(i){return i&&(i[e_]||i[H1])||null}(i);return null!==e?()=>e.factory(i):()=>new i}(i);throw new te(204,!1)}function fI(i,t,e){let n;if(mc(i)){const r=yt(i);return hc(r)||bw(r)}if(pw(i))n=()=>yt(i.useValue);else if(function hI(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...aw(i.deps||[]));else if(function uI(i){return!(!i||!i.useExisting)}(i))n=()=>ue(yt(i.useExisting));else{const r=yt(i&&(i.useClass||i.provide));if(!function i6(i){return!!i.deps}(i))return hc(r)||bw(r);n=()=>new r(...aw(i.deps))}return n}function tu(i,t,e=!1){return{factory:i,value:t,multi:e?[]:void 0}}function vw(i,t){for(const e of i)Array.isArray(e)?vw(e,t):e&&tw(e)?vw(e.\u0275providers,t):t(e)}function Do(i,t){i instanceof eu&&i.assertNotDestroyed();const n=il(i),r=$r(void 0);try{return t()}finally{il(n),$r(r)}}function mI(){return void 0!==X1()||null!=function S8(){return Kd}()}function u_(i){if(!mI())throw new te(-203,!1)}const Yi=0,Fe=1,ut=2,bn=3,io=4,hr=5,us=6,nu=7,Ni=8,er=9,no=10,Tt=11,Cf=12,gI=13,ru=14,nn=15,Ef=16,su=17,ha=18,Af=19,_I=20,rl=21,f_=22,pc=23,It=25,xw=1,Io=7,ou=9,vn=10;var ww=function(i){return i[i.None=0]="None",i[i.HasTransplantedViews=2]="HasTransplantedViews",i}(ww||{});function fr(i){return Array.isArray(i)&&"object"==typeof i[xw]}function mr(i){return Array.isArray(i)&&!0===i[xw]}function Tw(i){return!!(4&i.flags)}function gc(i){return i.componentOffset>-1}function p_(i){return!(1&~i.flags)}function ro(i){return!!i.template}function Mw(i){return!!(512&i[ut])}class _6{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function xI(i,t,e,n){null!==t?t.applyValueToInputSignal(t,n):i[e]=n}function pr(){return wI}function wI(i){return i.type.prototype.ngOnChanges&&(i.setInput=v6),b6}function b6(){const i=MI(this),t=i?.current;if(t){const e=i.previous;if(e===Ao)i.previous=t;else for(let n in t)e[n]=t[n];i.current=null,this.ngOnChanges(t)}}function v6(i,t,e,n,r){const s=this.declaredInputs[n],o=MI(i)||function y6(i,t){return i[TI]=t}(i,{previous:Ao,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new _6(c&&c.currentValue,e,l===Ao),xI(i,t,r,e)}pr.ngInherit=!0;const TI="__ngSimpleChanges__";function MI(i){return i[TI]||null}const Po=function(i,t,e){};let CI=!1;function Di(i){for(;Array.isArray(i);)i=i[Yi];return i}function If(i,t){return Di(t[i])}function Pr(i,t){return Di(t[i.index])}function Pf(i,t){return i.data[t]}function au(i,t){return i[t]}function hs(i,t){const e=t[i];return fr(e)?e:e[Yi]}function Aw(i){return!(128&~i[ut])}function ko(i,t){return null==t?null:i[t]}function EI(i){i[su]=0}function R6(i){1024&i[ut]||(i[ut]|=1024,Aw(i)&&kf(i))}function Dw(i){return!!(9216&i[ut]||i[pc]?.dirty)}function Iw(i){i[no].changeDetectionScheduler?.notify(1),Dw(i)?kf(i):64&i[ut]&&(function w6(){return CI}()?(i[ut]|=1024,kf(i)):i[no].changeDetectionScheduler?.notify())}function kf(i){i[no].changeDetectionScheduler?.notify();let t=_c(i);for(;null!==t&&!(8192&t[ut])&&(t[ut]|=8192,Aw(t));)t=_c(t)}function g_(i,t){if(!(256&~i[ut]))throw new te(911,!1);null===i[rl]&&(i[rl]=[]),i[rl].push(t)}function _c(i){const t=i[bn];return mr(t)?t[bn]:t}const Mt={lFrame:jI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function II(){return Mt.bindingsEnabled}function lu(){return null!==Mt.skipHydrationRootTNode}function ce(){return Mt.lFrame.lView}function ri(){return Mt.lFrame.tView}function Pt(i){return Mt.lFrame.contextLView=i,i[Ni]}function kt(i){return Mt.lFrame.contextLView=null,i}function Ci(){let i=PI();for(;null!==i&&64===i.type;)i=i.parent;return i}function PI(){return Mt.lFrame.currentTNode}function Fo(i,t){const e=Mt.lFrame;e.currentTNode=i,e.isParent=t}function kw(){return Mt.lFrame.isParent}function Fw(){Mt.lFrame.isParent=!1}function kr(){const i=Mt.lFrame;let t=i.bindingRootIndex;return-1===t&&(t=i.bindingRootIndex=i.tView.bindingStartIndex),t}function so(){return Mt.lFrame.bindingIndex++}function ma(i){const t=Mt.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+i,e}function N6(i,t){const e=Mt.lFrame;e.bindingIndex=e.bindingRootIndex=i,Lw(t)}function Lw(i){Mt.lFrame.currentDirectiveIndex=i}function Ow(i){const t=Mt.lFrame.currentDirectiveIndex;return-1===t?null:i[t]}function Nw(){return Mt.lFrame.currentQueryIndex}function __(i){Mt.lFrame.currentQueryIndex=i}function B6(i){const t=i[Fe];return 2===t.type?t.declTNode:1===t.type?i[hr]:null}function OI(i,t,e){if(e&ni.SkipSelf){let r=t,s=i;for(;!(r=r.parent,null!==r||e&ni.Host||(r=B6(s),null===r||(s=s[ru],10&r.type))););if(null===r)return!1;t=r,i=s}const n=Mt.lFrame=NI();return n.currentTNode=t,n.lView=i,!0}function jw(i){const t=NI(),e=i[Fe];Mt.lFrame=t,t.currentTNode=e.firstChild,t.lView=i,t.tView=e,t.contextLView=i,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function NI(){const i=Mt.lFrame,t=null===i?null:i.child;return null===t?jI(i):t}function jI(i){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=t),t}function BI(){const i=Mt.lFrame;return Mt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const UI=BI;function Bw(){const i=BI();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function gr(){return Mt.lFrame.selectedIndex}function bc(i){Mt.lFrame.selectedIndex=i}function ji(){const i=Mt.lFrame;return Pf(i.tView,i.selectedIndex)}let GI=!0;function Lf(){return GI}function Lo(i){GI=i}function b_(i,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){const s=i.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=s;o&&(i.contentHooks??=[]).push(-e,o),a&&((i.contentHooks??=[]).push(e,a),(i.contentCheckHooks??=[]).push(e,a)),l&&(i.viewHooks??=[]).push(-e,l),c&&((i.viewHooks??=[]).push(e,c),(i.viewCheckHooks??=[]).push(e,c)),null!=d&&(i.destroyHooks??=[]).push(e,d)}}function v_(i,t,e){WI(i,t,3,e)}function y_(i,t,e,n){(3&i[ut])===e&&WI(i,t,e,n)}function Uw(i,t){let e=i[ut];(3&e)===t&&(e&=16383,e+=1,i[ut]=e)}function WI(i,t,e,n){const s=n??-1,o=t.length-1;let a=0;for(let l=void 0!==n?65535&i[su]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=n&&a>=n)break}else t[l]<0&&(i[su]+=65536),(a<s||-1==s)&&(G6(i,e,t,l),i[su]=(4294901760&i[su])+l+2),l++}function $I(i,t){Po(4,i,t);const e=$t(null);try{t.call(i)}finally{$t(e),Po(5,i,t)}}function G6(i,t,e,n){const r=e[n]<0,s=e[n+1],a=i[r?-e[n]:e[n]];r?i[ut]>>14<i[su]>>16&&(3&i[ut])===t&&(i[ut]+=16384,$I(a,s)):$I(a,s)}const cu=-1;class Of{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function zw(i){return i!==cu}function Nf(i){return 32767&i}function jf(i,t){let e=function Y6(i){return i>>16}(i),n=t;for(;e>0;)n=n[ru],e--;return n}let Hw=!0;function x_(i){const t=Hw;return Hw=i,t}const XI=255,qI=5;let Z6=0;const Oo={};function w_(i,t){const e=YI(i,t);if(-1!==e)return e;const n=t[Fe];n.firstCreatePass&&(i.injectorIndex=t.length,Gw(n.data,i),Gw(t,null),Gw(n.blueprint,null));const r=T_(i,t),s=i.injectorIndex;if(zw(r)){const o=Nf(r),a=jf(r,t),l=a[Fe].data;for(let c=0;c<8;c++)t[s+c]=a[o+c]|l[o+c]}return t[s+8]=r,s}function Gw(i,t){i.push(0,0,0,0,0,0,0,0,t)}function YI(i,t){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===t[i.injectorIndex+8]?-1:i.injectorIndex}function T_(i,t){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let e=0,n=null,r=t;for(;null!==r;){if(n=iP(r),null===n)return cu;if(e++,r=r[ru],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return cu}function Ww(i,t,e){!function K6(i,t,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(yf)&&(n=e[yf]),null==n&&(n=e[yf]=Z6++);const r=n&XI;t.data[i+(r>>qI)]|=1<<r}(i,t,e)}function ZI(i,t,e){if(e&ni.Optional||void 0!==i)return i;rw()}function KI(i,t,e,n){if(e&ni.Optional&&void 0===n&&(n=null),!(e&(ni.Self|ni.Host))){const r=i[er],s=$r(void 0);try{return r?r.get(t,n,e&ni.Optional):q1(t,n,e&ni.Optional)}finally{$r(s)}}return ZI(n,0,e)}function QI(i,t,e,n=ni.Default,r){if(null!==i){if(2048&t[ut]&&!(n&ni.Self)){const o=function i$(i,t,e,n,r){let s=i,o=t;for(;null!==s&&null!==o&&2048&o[ut]&&!(512&o[ut]);){const a=JI(s,o,e,n|ni.Self,Oo);if(a!==Oo)return a;let l=s.parent;if(!l){const c=o[_I];if(c){const d=c.get(e,Oo,n);if(d!==Oo)return d}l=iP(o),o=o[ru]}s=l}return r}(i,t,e,n,Oo);if(o!==Oo)return o}const s=JI(i,t,e,n,Oo);if(s!==Oo)return s}return KI(t,e,n,r)}function JI(i,t,e,n,r){const s=function e$(i){if("string"==typeof i)return i.charCodeAt(0)||0;const t=i.hasOwnProperty(yf)?i[yf]:void 0;return"number"==typeof t?t>=0?t&XI:t$:t}(e);if("function"==typeof s){if(!OI(t,i,n))return n&ni.Host?ZI(r,0,n):KI(t,e,n,r);try{let o;if(o=s(n),null!=o||n&ni.Optional)return o;rw()}finally{UI()}}else if("number"==typeof s){let o=null,a=YI(i,t),l=cu,c=n&ni.Host?t[nn][hr]:null;for((-1===a||n&ni.SkipSelf)&&(l=-1===a?T_(i,t):t[a+8],l!==cu&&tP(n,!1)?(o=t[Fe],a=Nf(l),t=jf(l,t)):a=-1);-1!==a;){const d=t[Fe];if(eP(s,a,d.data)){const u=J6(a,t,e,o,n,c);if(u!==Oo)return u}l=t[a+8],l!==cu&&tP(n,t[Fe].data[a+8]===c)&&eP(s,a,t)?(o=d,a=Nf(l),t=jf(l,t)):a=-1}}return r}function J6(i,t,e,n,r,s){const o=t[Fe],a=o.data[i+8],d=M_(a,o,e,null==n?gc(a)&&Hw:n!=o&&!!(3&a.type),r&ni.Host&&s===a);return null!==d?vc(t,o,d,a):Oo}function M_(i,t,e,n,r){const s=i.providerIndexes,o=t.data,a=1048575&s,l=i.directiveStart,d=s>>20,h=r?a+d:i.directiveEnd;for(let f=n?a:a+d;f<h;f++){const m=o[f];if(f<l&&e===m||f>=l&&m.type===e)return f}if(r){const f=o[l];if(f&&ro(f)&&f.type===e)return l}return null}function vc(i,t,e,n){let r=i[e];const s=t.data;if(function W6(i){return i instanceof Of}(r)){const o=r;o.resolving&&function y8(i,t){throw t&&t.join(" > "),new te(-200,i)}(function bi(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Dt(i)}(s[e]));const a=x_(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?$r(o.injectImpl):null;OI(i,n,ni.Default);try{r=i[e]=o.factory(void 0,s,i,n),t.firstCreatePass&&e>=n.directiveStart&&function H6(i,t,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(n){const o=wI(t);(e.preOrderHooks??=[]).push(i,o),(e.preOrderCheckHooks??=[]).push(i,o)}r&&(e.preOrderHooks??=[]).push(0-i,r),s&&((e.preOrderHooks??=[]).push(i,s),(e.preOrderCheckHooks??=[]).push(i,s))}(e,s[e],t)}finally{null!==c&&$r(c),x_(a),o.resolving=!1,UI()}}return r}function eP(i,t,e){return!!(e[t+(i>>qI)]&1<<i)}function tP(i,t){return!(i&ni.Self||i&ni.Host&&t)}class Wn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return QI(this._tNode,this._lView,t,i_(n),e)}}function t$(){return new Wn(Ci(),ce())}function He(i){return da(()=>{const t=i.prototype.constructor,e=t[ua]||$w(t),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[ua]||$w(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function $w(i){return Kg(i)?()=>{const t=$w(yt(i));return t&&t()}:hc(i)}function iP(i){const t=i[Fe],e=t.type;return 2===e?t.declTNode:1===e?i[hr]:null}function hu(i){return function Q6(i,t){if("class"===t)return i.classes;if("style"===t)return i.styles;const e=i.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const s=e[r];if(tI(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(s===t)return e[r+1];r+=2}}}return null}(Ci(),i)}function aP(i,t=null,e=null,n){const r=lP(i,t,e,n);return r.resolveInjectorInitializers(),r}function lP(i,t=null,e=null,n,r=new Set){const s=[e||hi,Z8(i)];return n=n||("object"==typeof i?void 0:zn(i)),new eu(s,t||d_(),n||null,r)}let ar=(()=>{class i{static#e=this.THROW_IF_NOT_FOUND=xf;static#t=this.NULL=new s_;static create(e,n){if(Array.isArray(e))return aP({name:""},n,e,"");{const r=e.name??"";return aP({name:r},e.parent,e.providers,r)}}static#i=this.\u0275prov=Re({token:i,providedIn:"any",factory:()=>ue(eI)});static#n=this.__NG_ELEMENT_ID__=-1}return i})();function qw(i){return i.ngOriginalError}class fs{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&qw(t);for(;e&&qw(e);)e=qw(e);return e||null}}const dP=new le("",{providedIn:"root",factory:()=>ee(fs).handleError.bind(void 0)});let fu=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=u$;static#t=this.__NG_ENV_ID__=e=>e}return i})();class d$ extends fu{constructor(t){super(),this._lView=t}onDestroy(t){return g_(this._lView,t),()=>function Pw(i,t){if(null===i[rl])return;const e=i[rl].indexOf(t);-1!==e&&i[rl].splice(e,1)}(this._lView,t)}}function u$(){return new d$(ce())}function hP(i,t){return U1(i,t)}const f$=(hP.required=function h$(i){return U1(Zg,i)},hP);function m$(){return mu(Ci(),ce())}function mu(i,t){return new xt(Pr(i,t))}let xt=(()=>{class i{constructor(e){this.nativeElement=e}static#e=this.__NG_ELEMENT_ID__=m$}return i})();function fP(i){return i instanceof xt?i.nativeElement:i}function Yw(i){return t=>{setTimeout(i,void 0,t)}}const lt=class p$ extends Et{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,mI()&&(this.destroyRef=ee(fu,{optional:!0})??void 0)}emit(t){const e=$t(null);try{super.next(t)}finally{$t(e)}}subscribe(t,e,n){let r=t,s=e||(()=>null),o=n;if(t&&"object"==typeof t){const l=t;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=Yw(s),r&&(r=Yw(r)),o&&(o=Yw(o)));const a=super.subscribe({next:r,error:s,complete:o});return t instanceof Oi&&t.add(a),a}};function g$(){return this._results[Symbol.iterator]()}class yc{static#e=Symbol.iterator;get changes(){return this._changes??=new lt}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const e=yc.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=g$)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;const n=function Xr(i){return i.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function k8(i,t,e){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=t[n];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(this._results,n,e))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function R_(i){return!(128&~i.flags)}const Zw=new Map;let b$=0;const Qw="__ngContext__";function _r(i,t){fr(t)?(i[Qw]=t[Af],function y$(i){Zw.set(i[Af],i)}(t)):i[Qw]=t}function TP(i){return SP(i[Cf])}function MP(i){return SP(i[io])}function SP(i){for(;null!==i&&!mr(i);)i=i[io];return i}let Jw;const A_=new le("",{providedIn:"root",factory:()=>j$}),j$="ng",kP=new le(""),oo=new le("",{providedIn:"platform",factory:()=>"unknown"}),Yr=new le(""),eT=new le("",{providedIn:"root",factory:()=>function sl(){if(void 0!==Jw)return Jw;if(typeof document<"u")return document;throw new te(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let FP=()=>null;function lT(i,t,e=!1){return FP(i,t,e)}const BP=new le("",{providedIn:"root",factory:()=>!1});let O_,N_;function hT(){if(void 0===O_&&(O_=null,wi.trustedTypes))try{O_=wi.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return O_}function _u(i){return hT()?.createHTML(i)||i}function HP(i){return function fT(){if(void 0===N_&&(N_=null,wi.trustedTypes))try{N_=wi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return N_}()?.createScriptURL(i)||i}class xc{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${j1})`}}class Q$ extends xc{getTypeName(){return"HTML"}}class J$ extends xc{getTypeName(){return"Style"}}class eX extends xc{getTypeName(){return"Script"}}class tX extends xc{getTypeName(){return"URL"}}class iX extends xc{getTypeName(){return"ResourceURL"}}function ms(i){return i instanceof xc?i.changingThisBreaksApplicationSecurity:i}function No(i,t){const e=function nX(i){return i instanceof xc&&i.getTypeName()||null}(i);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${j1})`)}return e===t}class cX{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(_u(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class dX{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const e=this.inertDocument.createElement("template");return e.innerHTML=_u(t),e}}const hX=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function j_(i){return(i=String(i)).match(hX)?i:"unsafe:"+i}function pa(i){const t={};for(const e of i.split(","))t[e]=!0;return t}function Wf(...i){const t={};for(const e of i)for(const n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}const WP=pa("area,br,col,hr,img,wbr"),$P=pa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),XP=pa("rp,rt"),mT=Wf(WP,Wf($P,pa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Wf(XP,pa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Wf(XP,$P)),pT=pa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),qP=Wf(pT,pa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),pa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),fX=pa("script,style,template");class mX{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0,r=[];for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)r.push(e),e=_X(e);else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let s=gX(e);if(s){e=s;break}e=r.pop()}return this.buf.join("")}startElement(t){const e=YP(t).toLowerCase();if(!mT.hasOwnProperty(e))return this.sanitizedSomething=!0,!fX.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const s=n.item(r),o=s.name,a=o.toLowerCase();if(!qP.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;pT[a]&&(l=j_(l)),this.buf.push(" ",o,'="',KP(l),'"')}return this.buf.push(">"),!0}endElement(t){const e=YP(t).toLowerCase();mT.hasOwnProperty(e)&&!WP.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(KP(t))}}function gX(i){const t=i.nextSibling;if(t&&i!==t.previousSibling)throw ZP(t);return t}function _X(i){const t=i.firstChild;if(t&&function pX(i,t){return(i.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(i,t))throw ZP(t);return t}function YP(i){const t=i.nodeName;return"string"==typeof t?t:"FORM"}function ZP(i){return new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`)}const bX=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,vX=/([^\#-~ |!])/g;function KP(i){return i.replace(/&/g,"&amp;").replace(bX,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(vX,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let B_;function QP(i,t){let e=null;try{B_=B_||function GP(i){const t=new dX(i);return function uX(){try{return!!(new window.DOMParser).parseFromString(_u(""),"text/html")}catch{return!1}}()?new cX(t):t}(i);let n=t?String(t):"";e=B_.getInertBodyElement(n);let r=5,s=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=s,s=e.innerHTML,e=B_.getInertBodyElement(n)}while(n!==s);return _u((new mX).sanitizeChildren(gT(e)||e))}finally{if(e){const n=gT(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function gT(i){return"content"in i&&function yX(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var tr=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(tr||{});function JP(i){const t=$f();return t?t.sanitize(tr.URL,i)||"":No(i,"URL")?ms(i):j_(Dt(i))}function ek(i){const t=$f();if(t)return HP(t.sanitize(tr.RESOURCE_URL,i)||"");if(No(i,"ResourceURL"))return HP(ms(i));throw new te(904,!1)}function _T(i){return function K$(i){return hT()?.createScriptURL(i)||i}(i[0])}function $f(){const i=ce();return i&&i[no].sanitizer}const RX=/^>|^->|<!--|-->|--!>|<!-$/g,CX=/(<|>)/g,EX="\u200b$1\u200b";function xT(i){return i.ownerDocument.defaultView}function z_(i){return i.ownerDocument}function ps(i){return i instanceof Function?i():i}var ol=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(ol||{});let wT;function TT(i,t){return wT(i,t)}function vu(i,t,e,n,r){if(null!=n){let s,o=!1;mr(n)?s=n:fr(n)&&(o=!0,n=n[Yi]);const a=Di(n);0===i&&null!==e?null==r?fk(t,e,a):wc(t,e,a,r||null,!0):1===i&&null!==e?wc(t,e,a,r||null,!0):2===i?function Yf(i,t,e){const n=W_(i,t);n&&function WX(i,t,e,n){i.removeChild(t,e,n)}(i,n,t,e)}(t,a,o):3===i&&t.destroyNode(a),null!=s&&function qX(i,t,e,n,r){const s=e[Io];s!==Di(e)&&vu(t,i,n,s,r);for(let a=vn;a<e.length;a++){const l=e[a];X_(l[Fe],l,i,t,n,s)}}(t,i,s,e,r)}}function ST(i,t){return i.createComment(function ik(i){return i.replace(RX,t=>t.replace(CX,EX))}(t))}function H_(i,t,e){return i.createElement(t,e)}function dk(i,t){t[no].changeDetectionScheduler?.notify(1),X_(i,t,t[Tt],2,null,null)}function uk(i,t){const e=i[ou],n=e.indexOf(t);e.splice(n,1)}function Xf(i,t){if(i.length<=vn)return;const e=vn+t,n=i[e];if(n){const r=n[Ef];null!==r&&r!==i&&uk(r,n),t>0&&(i[e-1][io]=n[io]);const s=n_(i,vn+t);!function jX(i,t){dk(i,t),t[Yi]=null,t[hr]=null}(n[Fe],n);const o=s[ha];null!==o&&o.detachView(s[Fe]),n[bn]=null,n[io]=null,n[ut]&=-129}return n}function G_(i,t){if(!(256&t[ut])){const e=t[Tt];e.destroyNode&&X_(i,t,e,3,null,null),function UX(i){let t=i[Cf];if(!t)return RT(i[Fe],i);for(;t;){let e=null;if(fr(t))e=t[Cf];else{const n=t[vn];n&&(e=n)}if(!e){for(;t&&!t[io]&&t!==i;)fr(t)&&RT(t[Fe],t),t=t[bn];null===t&&(t=i),fr(t)&&RT(t[Fe],t),e=t&&t[io]}t=e}}(t)}}function RT(i,t){if(256&t[ut])return;const e=$t(null);try{t[ut]&=-129,t[ut]|=256,t[pc]&&M1(t[pc]),function GX(i,t){let e;if(null!=i&&null!=(e=i.destroyHooks))for(let n=0;n<e.length;n+=2){const r=t[e[n]];if(!(r instanceof Of)){const s=e[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];Po(4,a,l);try{l.call(a)}finally{Po(5,a,l)}}else{Po(4,r,s);try{s.call(r)}finally{Po(5,r,s)}}}}}(i,t),function HX(i,t){const e=i.cleanup,n=t[nu];if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+3];o>=0?n[o]():n[-o].unsubscribe(),s+=2}else e[s].call(n[e[s+1]]);null!==n&&(t[nu]=null);const r=t[rl];if(null!==r){t[rl]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(i,t),1===t[Fe].type&&t[Tt].destroy();const n=t[Ef];if(null!==n&&mr(t[bn])){n!==t[bn]&&uk(n,t);const r=t[ha];null!==r&&r.detachView(i)}!function x$(i){Zw.delete(i[Af])}(t)}finally{$t(e)}}function CT(i,t,e){return function hk(i,t,e){let n=t;for(;null!==n&&40&n.type;)n=(t=n).parent;if(null===n)return e[Yi];{const{componentOffset:r}=n;if(r>-1){const{encapsulation:s}=i.data[n.directiveStart+r];if(s===eo.None||s===eo.Emulated)return null}return Pr(n,e)}}(i,t.parent,e)}function wc(i,t,e,n,r){i.insertBefore(t,e,n,r)}function fk(i,t,e){i.appendChild(t,e)}function mk(i,t,e,n,r){null!==n?wc(i,t,e,n,r):fk(i,t,e)}function W_(i,t){return i.parentNode(t)}function pk(i,t,e){return _k(i,t,e)}let ET,_k=function gk(i,t,e){return 40&i.type?Pr(i,e):null};function $_(i,t,e,n){const r=CT(i,n,t),s=t[Tt],a=pk(n.parent||t[hr],n,t);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)mk(s,r,e[l],a,!1);else mk(s,r,e,a,!1);void 0!==ET&&ET(s,n,t,e,r)}function qf(i,t){if(null!==t){const e=t.type;if(3&e)return Pr(t,i);if(4&e)return AT(-1,i[t.index]);if(8&e){const n=t.child;if(null!==n)return qf(i,n);{const r=i[t.index];return mr(r)?AT(-1,r):Di(r)}}if(32&e)return TT(t,i)()||Di(i[t.index]);{const n=vk(i,t);return null!==n?Array.isArray(n)?n[0]:qf(_c(i[nn]),n):qf(i,t.next)}}return null}function vk(i,t){return null!==t?i[nn][hr].projection[t.projection]:null}function AT(i,t){const e=vn+i+1;if(e<t.length){const n=t[e],r=n[Fe].firstChild;if(null!==r)return qf(n,r)}return t[Io]}function DT(i,t,e,n,r,s,o){for(;null!=e;){const a=n[e.index],l=e.type;if(o&&0===t&&(a&&_r(Di(a),n),e.flags|=2),32&~e.flags)if(8&l)DT(i,t,e.child,n,r,s,!1),vu(t,i,r,a,s);else if(32&l){const c=TT(e,n);let d;for(;d=c();)vu(t,i,r,d,s);vu(t,i,r,a,s)}else 16&l?xk(i,t,n,e,r,s):vu(t,i,r,a,s);e=o?e.projectionNext:e.next}}function X_(i,t,e,n,r,s){DT(e,n,i.firstChild,t,r,s,!1)}function xk(i,t,e,n,r,s){const o=e[nn],l=o[hr].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)vu(t,i,r,l[c],s);else{let c=l;const d=o[bn];R_(n)&&(c.flags|=128),DT(i,t,c,d,r,s,!0)}}function wk(i,t,e){""===e?i.removeAttribute(t,"class"):i.setAttribute(t,"class",e)}function Tk(i,t,e){const{mergedAttrs:n,classes:r,styles:s}=e;null!==n&&uw(i,t,n),null!==r&&wk(i,t,r),null!==s&&function ZX(i,t,e){i.setAttribute(t,"style",e)}(i,t,s)}const Lt={};function B(i=1){Mk(ri(),ce(),gr()+i,!1)}function Mk(i,t,e,n){if(!n)if(3&~t[ut]){const s=i.preOrderHooks;null!==s&&y_(t,s,0,e)}else{const s=i.preOrderCheckHooks;null!==s&&v_(t,s,e)}bc(e)}function P(i,t=ni.Default){const e=ce();return null===e?ue(i,t):QI(Ci(),e,yt(i),t)}function q_(){throw new Error("invalid")}function Sk(i,t,e,n,r,s){const o=$t(null);try{let a=null;r&rt.SignalBased&&(a=t[n][ks]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),r&rt.HasDecoratorInputTransform&&(s=i.inputTransforms[n].call(t,s)),null!==i.setInput?i.setInput(t,a,s,e,n):xI(t,a,n,s)}finally{$t(o)}}function Y_(i,t,e,n,r,s,o,a,l,c,d){const u=t.blueprint.slice();return u[Yi]=r,u[ut]=204|n,(null!==c||i&&2048&i[ut])&&(u[ut]|=2048),EI(u),u[bn]=u[ru]=i,u[Ni]=e,u[no]=o||i&&i[no],u[Tt]=a||i&&i[Tt],u[er]=l||i&&i[er]||null,u[hr]=s,u[Af]=function v$(){return b$++}(),u[us]=d,u[_I]=c,u[nn]=2==t.type?i[nn]:u,u}function yu(i,t,e,n,r){let s=i.data[t];if(null===s)s=function IT(i,t,e,n,r){const s=PI(),o=kw(),l=i.data[t]=function rq(i,t,e,n,r,s){let o=t?t.injectorIndex:-1,a=0;return lu()&&(a|=128),{type:e,index:n,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,n,r);return null===i.firstChild&&(i.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(i,t,e,n,r),function O6(){return Mt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=e,s.value=n,s.attrs=r;const o=function Ff(){const i=Mt.lFrame,t=i.currentTNode;return i.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Fo(s,!0),s}function Zf(i,t,e,n){if(0===e)return-1;const r=t.length;for(let s=0;s<e;s++)t.push(n),i.blueprint.push(n),i.data.push(null);return r}function Rk(i,t,e,n,r){const s=gr(),o=2&n;try{bc(-1),o&&t.length>It&&Mk(i,t,It,!1),Po(o?2:0,r),e(n,r)}finally{bc(s),Po(o?3:1,r)}}function PT(i,t,e){if(Tw(t)){const n=$t(null);try{const s=t.directiveEnd;for(let o=t.directiveStart;o<s;o++){const a=i.data[o];a.contentQueries&&a.contentQueries(1,e[o],o)}}finally{$t(n)}}}function kT(i,t,e){II()&&(function uq(i,t,e,n){const r=e.directiveStart,s=e.directiveEnd;gc(e)&&function bq(i,t,e){const n=Pr(t,i),r=Ck(e);let o=16;e.signals?o=4096:e.onPush&&(o=64);const a=Z_(i,Y_(i,r,null,o,n,t,null,i[no].rendererFactory.createRenderer(n,e),null,null,null));i[t.index]=a}(t,e,i.data[r+e.componentOffset]),i.firstCreatePass||w_(e,t),_r(n,t);const o=e.initialInputs;for(let a=r;a<s;a++){const l=i.data[a],c=vc(t,i,a,e);_r(c,t),null!==o&&vq(0,a-r,c,l,0,o),ro(l)&&(hs(e.index,t)[Ni]=vc(t,i,a,e))}}(i,t,e,Pr(e,t)),!(64&~e.flags)&&Pk(i,t,e))}function FT(i,t,e=Pr){const n=t.localNames;if(null!==n){let r=t.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],a=-1===o?e(t,i):i[o];i[r++]=a}}}function Ck(i){const t=i.tView;return null===t||t.incompleteFirstPass?i.tView=LT(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):t}function LT(i,t,e,n,r,s,o,a,l,c,d){const u=It+n,h=u+r,f=function QX(i,t){const e=[];for(let n=0;n<t;n++)e.push(n<i?null:Lt);return e}(u,h),m="function"==typeof c?c():c;return f[Fe]={type:i,blueprint:f,template:e,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1,ssrId:d}}let Ek=()=>null;function Ak(i,t,e,n,r){for(let s in t){if(!t.hasOwnProperty(s))continue;const o=t[s];if(void 0===o)continue;n??={};let a,l=rt.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=s;if(null!==r){if(!r.hasOwnProperty(s))continue;c=r[s]}0===i?Dk(n,e,c,a,l):Dk(n,e,c,a)}return n}function Dk(i,t,e,n,r){let s;i.hasOwnProperty(e)?(s=i[e]).push(t,n):s=i[e]=[t,n],void 0!==r&&s.push(r)}function Zr(i,t,e,n,r,s,o,a){const l=Pr(t,e);let d,c=t.inputs;!a&&null!=c&&(d=c[n])?(UT(i,e,d,n,r),gc(t)&&function aq(i,t){const e=hs(t,i);16&e[ut]||(e[ut]|=64)}(e,t.index)):3&t.type&&(n=function oq(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=o?o(r,t.value||"",n):r,s.setProperty(l,n,r))}function OT(i,t,e,n){if(II()){const r=null===n?null:{"":-1},s=function fq(i,t){const e=i.directiveRegistry;let n=null,r=null;if(e)for(let s=0;s<e.length;s++){const o=e[s];if(sI(t,o.selectors,!1))if(n||(n=[]),ro(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),n.unshift(...a,o),NT(i,t,a.length)}else n.unshift(o),NT(i,t,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,n,r),n.push(o)}return null===n?null:[n,r]}(i,e);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&Ik(i,t,e,o,r,a),r&&function mq(i,t,e){if(t){const n=i.localNames=[];for(let r=0;r<t.length;r+=2){const s=e[t[r+1]];if(null==s)throw new te(-301,!1);n.push(t[r],s)}}}(e,n,r)}e.mergedAttrs=Mf(e.mergedAttrs,e.attrs)}function Ik(i,t,e,n,r,s){for(let c=0;c<n.length;c++)Ww(w_(e,t),i,n[c].type);!function gq(i,t,e){i.flags|=1,i.directiveStart=t,i.directiveEnd=t+e,i.providerIndexes=t}(e,i.data.length,n.length);for(let c=0;c<n.length;c++){const d=n[c];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,l=Zf(i,t,n.length,null);for(let c=0;c<n.length;c++){const d=n[c];e.mergedAttrs=Mf(e.mergedAttrs,d.hostAttrs),_q(i,e,t,l,d),pq(l,d,r),null!==d.contentQueries&&(e.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(e.flags|=64);const u=d.type.prototype;!o&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((i.preOrderHooks??=[]).push(e.index),o=!0),!a&&(u.ngOnChanges||u.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}!function sq(i,t,e){const r=t.directiveEnd,s=i.data,o=t.attrs,a=[];let l=null,c=null;for(let d=t.directiveStart;d<r;d++){const u=s[d],h=e?e.get(u):null,m=h?h.outputs:null;l=Ak(0,u.inputs,d,l,h?h.inputs:null),c=Ak(1,u.outputs,d,c,m);const _=null===l||null===o||hw(t)?null:yq(l,d,o);a.push(_)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}(i,e,s)}function Pk(i,t,e){const n=e.directiveStart,r=e.directiveEnd,s=e.index,o=function j6(){return Mt.lFrame.currentDirectiveIndex}();try{bc(s);for(let a=n;a<r;a++){const l=i.data[a],c=t[a];Lw(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&hq(l,c)}}finally{bc(-1),Lw(o)}}function hq(i,t){null!==i.hostBindings&&i.hostBindings(1,t)}function NT(i,t,e){t.componentOffset=e,(i.components??=[]).push(t.index)}function pq(i,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=i;ro(t)&&(e[""]=i)}}function _q(i,t,e,n,r){i.data[n]=r;const s=r.factory||(r.factory=hc(r.type)),o=new Of(s,ro(r),P);i.blueprint[n]=o,e[n]=o,function cq(i,t,e,n,r){const s=r.hostBindings;if(s){let o=i.hostBindingOpCodes;null===o&&(o=i.hostBindingOpCodes=[]);const a=~t.index;(function dq(i){let t=i.length;for(;t>0;){const e=i[--t];if("number"==typeof e&&e<0)return e}return 0})(o)!=a&&o.push(a),o.push(e,n,s)}}(i,t,n,Zf(i,e,r.hostVars,Lt),r)}function jo(i,t,e,n,r,s){const o=Pr(i,t);!function jT(i,t,e,n,r,s,o){if(null==s)i.removeAttribute(t,r,e);else{const a=null==o?Dt(s):o(s,n||"",r);i.setAttribute(t,r,a,e)}}(t[Tt],o,s,i.value,e,n,r)}function vq(i,t,e,n,r,s){const o=s[t];if(null!==o)for(let a=0;a<o.length;)Sk(n,e,o[a++],o[a++],o[a++],o[a++])}function yq(i,t,e){let n=null,r=0;for(;r<e.length;){const s=e[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(i.hasOwnProperty(s)){null===n&&(n=[]);const o=i[s];for(let a=0;a<o.length;a+=3)if(o[a]===t){n.push(s,o[a+1],o[a+2],e[r+1]);break}}r+=2}else r+=2;else r+=4}return n}function kk(i,t,e,n){return[i,!0,0,t,null,n,null,e,null,null]}function Fk(i,t){const e=i.contentQueries;if(null!==e){const n=$t(null);try{for(let r=0;r<e.length;r+=2){const o=e[r+1];if(-1!==o){const a=i.data[o];__(e[r]),a.contentQueries(2,t[o],o)}}}finally{$t(n)}}}function Z_(i,t){return i[Cf]?i[gI][io]=t:i[Cf]=t,i[gI]=t,t}function BT(i,t,e){__(0);const n=$t(null);try{t(i,e)}finally{$t(n)}}function Lk(i){return i[nu]||(i[nu]=[])}function Ok(i){return i.cleanup||(i.cleanup=[])}function Nk(i,t,e){return(null===i||ro(i))&&(e=function Ew(i){for(;Array.isArray(i);){if("object"==typeof i[xw])return i;i=i[Yi]}return null}(e[t.index])),e[Tt]}function K_(i,t){const e=i[er],n=e?e.get(fs,null):null;n&&n.handleError(t)}function UT(i,t,e,n,r){for(let s=0;s<e.length;){const o=e[s++],a=e[s++],l=e[s++];Sk(i.data[o],t[o],n,a,l,r)}}function xq(i,t){const e=hs(t,i),n=e[Fe];!function wq(i,t){for(let e=t.length;e<i.blueprint.length;e++)t.push(i.blueprint[e])}(n,e);const r=e[Yi];null!==r&&null===e[us]&&(e[us]=lT(r,e[er])),VT(n,e,e[Ni])}function VT(i,t,e){jw(t);try{const n=i.viewQuery;null!==n&&BT(1,n,e);const r=i.template;null!==r&&Rk(i,t,r,1,e),i.firstCreatePass&&(i.firstCreatePass=!1),t[ha]?.finishViewCreation(i),i.staticContentQueries&&Fk(i,t),i.staticViewQueries&&BT(2,i.viewQuery,e);const s=i.components;null!==s&&function Tq(i,t){for(let e=0;e<t.length;e++)xq(i,t[e])}(t,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{t[ut]&=-5,Bw()}}function Kf(i,t,e,n){const r=$t(null);try{const s=t.tView,l=Y_(i,s,e,4096&i[ut]?4096:16,null,t,null,null,n?.injector??null,n?.embeddedViewInjector??null,n?.dehydratedView??null);l[Ef]=i[t.index];const d=i[ha];return null!==d&&(l[ha]=d.createEmbeddedView(s)),VT(s,l,e),l}finally{$t(r)}}function jk(i,t){const e=vn+t;if(e<i.length)return i[e]}function xu(i,t){return!t||null===t.firstChild||R_(i)}function Qf(i,t,e,n=!0){const r=t[Fe];if(function VX(i,t,e,n){const r=vn+n,s=e.length;n>0&&(e[r-1][io]=t),n<s-vn?(t[io]=e[r],K1(e,vn+n,t)):(e.push(t),t[io]=null),t[bn]=e;const o=t[Ef];null!==o&&e!==o&&function zX(i,t){const e=i[ou];t[nn]!==t[bn][bn][nn]&&(i[ut]|=ww.HasTransplantedViews),null===e?i[ou]=[t]:e.push(t)}(o,t);const a=t[ha];null!==a&&a.insertView(i),Iw(t),t[ut]|=128}(r,t,i,e),n){const o=AT(e,i),a=t[Tt],l=W_(a,i[Io]);null!==l&&function BX(i,t,e,n,r,s){n[Yi]=r,n[hr]=t,X_(i,n,e,1,r,s)}(r,i[hr],a,t,l,o)}const s=t[us];null!==s&&null!==s.firstChild&&(s.firstChild=null)}function zT(i,t){const e=Xf(i,t);return void 0!==e&&G_(e[Fe],e),e}function Jf(i,t,e,n,r=!1){for(;null!==e;){const s=t[e.index];null!==s&&n.push(Di(s)),mr(s)&&Bk(s,n);const o=e.type;if(8&o)Jf(i,t,e.child,n);else if(32&o){const a=TT(e,t);let l;for(;l=a();)n.push(l)}else if(16&o){const a=vk(t,e);if(Array.isArray(a))n.push(...a);else{const l=_c(t[nn]);Jf(l[Fe],l,a,n,!0)}}e=r?e.projectionNext:e.next}return n}function Bk(i,t){for(let e=vn;e<i.length;e++){const n=i[e],r=n[Fe].firstChild;null!==r&&Jf(n[Fe],n,r,t)}i[Io]!==i[Yi]&&t.push(i[Io])}let Uk=[];const Cq={...zg,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{kf(i.lView)},consumerOnSignalRead(){this.lView[pc]=this}},Vk=100;function Q_(i,t=!0,e=0){const n=i[no],r=n.rendererFactory;r.begin?.();try{!function Eq(i,t){HT(i,t);let e=0;for(;Dw(i);){if(e===Vk)throw new te(103,!1);e++,HT(i,1)}}(i,e)}catch(o){throw t&&K_(i,o),o}finally{r.end?.(),n.inlineEffectRunner?.flush()}}function Aq(i,t,e,n){const r=t[ut];if(!(256&~r))return;t[no].inlineEffectRunner?.flush(),jw(t);let o=null,a=null;(function Dq(i){return 2!==i.type})(i)&&(a=function Mq(i){return i[pc]??function Sq(i){const t=Uk.pop()??Object.create(Cq);return t.lView=i,t}(i)}(t),o=Px(a));try{EI(t),function FI(i){return Mt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==e&&Rk(i,t,e,2,n);const l=!(3&~r);if(l){const u=i.preOrderCheckHooks;null!==u&&v_(t,u,null)}else{const u=i.preOrderHooks;null!==u&&y_(t,u,0,null),Uw(t,0)}if(function Iq(i){for(let t=TP(i);null!==t;t=MP(t)){if(!(t[ut]&ww.HasTransplantedViews))continue;const e=t[ou];for(let n=0;n<e.length;n++){R6(e[n])}}}(t),zk(t,0),null!==i.contentQueries&&Fk(i,t),l){const u=i.contentCheckHooks;null!==u&&v_(t,u)}else{const u=i.contentHooks;null!==u&&y_(t,u,1),Uw(t,1)}!function KX(i,t){const e=i.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)bc(~r);else{const s=r,o=e[++n],a=e[++n];N6(o,s),a(2,t[s])}}}finally{bc(-1)}}(i,t);const c=i.components;null!==c&&Gk(t,c,0);const d=i.viewQuery;if(null!==d&&BT(2,d,n),l){const u=i.viewCheckHooks;null!==u&&v_(t,u)}else{const u=i.viewHooks;null!==u&&y_(t,u,2),Uw(t,2)}if(!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),t[f_]){for(const u of t[f_])u();t[f_]=null}t[ut]&=-73}catch(l){throw kf(t),l}finally{null!==a&&(kx(a,o),function Rq(i){i.lView[pc]!==i&&(i.lView=null,Uk.push(i))}(a)),Bw()}}function zk(i,t){for(let e=TP(i);null!==e;e=MP(e))for(let n=vn;n<e.length;n++)Hk(e[n],t)}function Pq(i,t,e){Hk(hs(t,i),e)}function Hk(i,t){Aw(i)&&HT(i,t)}function HT(i,t){const n=i[Fe],r=i[ut],s=i[pc];let o=!!(0===t&&16&r);if(o||=!!(64&r&&0===t),o||=!!(1024&r),o||=!(!s?.dirty||!Fx(s)),s&&(s.dirty=!1),i[ut]&=-9217,o)Aq(n,i,n.template,i[Ni]);else if(8192&r){zk(i,1);const a=n.components;null!==a&&Gk(i,a,1)}}function Gk(i,t,e){for(let n=0;n<t.length;n++)Pq(i,t[n],e)}function em(i){for(i[no].changeDetectionScheduler?.notify();i;){i[ut]|=64;const t=_c(i);if(Mw(i)&&!t)return i;i=t}return null}class tm{get rootNodes(){const t=this._lView,e=t[Fe];return Jf(e,t,e.firstChild,[])}constructor(t,e,n=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ni]}set context(t){this._lView[Ni]=t}get destroyed(){return!(256&~this._lView[ut])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[bn];if(mr(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Xf(t,n),n_(e,n))}this._attachedToViewContainer=!1}G_(this._lView[Fe],this._lView)}onDestroy(t){g_(this._lView,t)}markForCheck(){em(this._cdRefInjectingView||this._lView)}detach(){this._lView[ut]&=-129}reattach(){Iw(this._lView),this._lView[ut]|=128}detectChanges(){this._lView[ut]|=1024,Q_(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,dk(this._lView[Fe],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=t,Iw(this._lView)}}let Kr=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=Lq}return i})();const kq=Kr,Fq=class extends kq{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,n){const r=Kf(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:n});return new tm(r)}};function Lq(){return J_(Ci(),ce())}function J_(i,t){return 4&i.type?new Fq(t,i,mu(i,t)):null}let Zk=()=>null;function wu(i,t){return Zk(i,t)}class rb{}class s7{}class Kk{}class a7{resolveComponentFactory(t){throw function o7(i){const t=Error(`No component factory found for ${zn(i)}.`);return t.ngComponent=i,t}(t)}}let Tc=(()=>{class i{static#e=this.NULL=new a7}return i})();class YT{}let ba=(()=>{class i{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function l7(){const i=ce(),e=hs(Ci().index,i);return(fr(e)?e:i)[Tt]}()}return i})(),c7=(()=>{class i{static#e=this.\u0275prov=Re({token:i,providedIn:"root",factory:()=>null})}return i})();const ZT={},Jk=new Set;function Bo(i){Jk.has(i)||(Jk.add(i),performance?.mark?.("mark_feature_usage",{detail:{feature:i}}))}var Mc=function(i){return i[i.EarlyRead=0]="EarlyRead",i[i.Write=1]="Write",i[i.MixedReadWrite=2]="MixedReadWrite",i[i.Read=3]="Read",i}(Mc||{});const eF={destroy(){}};function QT(i,t){!t&&u_();const e=t?.injector??ee(ar);if(!function ga(i){return"browser"===(i??ee(ar)).get(oo)}(e))return eF;Bo("NgAfterNextRender");const n=e.get(om),r=n.handler??=new iF,s=t?.phase??Mc.MixedReadWrite,o=()=>{r.unregister(l),a()},a=e.get(fu).onDestroy(o),l=Do(e,()=>new tF(s,()=>{o(),i()}));return r.register(l),{destroy:o}}class tF{constructor(t,e){this.phase=t,this.callbackFn=e,this.errorHandler=ee(fs,{optional:!0}),ee(rb,{optional:!0})?.notify(1)}invoke(){try{this.callbackFn()}catch(t){this.errorHandler?.handleError(t)}}}class iF{constructor(){this.executingCallbacks=!1,this.buckets={[Mc.EarlyRead]:new Set,[Mc.Write]:new Set,[Mc.MixedReadWrite]:new Set,[Mc.Read]:new Set},this.deferredCallbacks=new Set}register(t){(this.executingCallbacks?this.deferredCallbacks:this.buckets[t.phase]).add(t)}unregister(t){this.buckets[t.phase].delete(t),this.deferredCallbacks.delete(t)}execute(){this.executingCallbacks=!0;for(const t of Object.values(this.buckets))for(const e of t)e.invoke();this.executingCallbacks=!1;for(const t of this.deferredCallbacks)this.buckets[t.phase].add(t);this.deferredCallbacks.clear()}destroy(){for(const t of Object.values(this.buckets))t.clear();this.deferredCallbacks.clear()}}let om=(()=>{class i{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const e=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const n of e)n()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Re({token:i,providedIn:"root",factory:()=>new i})}return i})();function ob(i,t,e){let n=e?i.styles:null,r=e?i.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?r=Yx(r,a):2==s&&(n=Yx(n,a+": "+t[++o]+";"))}e?i.styles=n:i.stylesWithoutHost=n,e?i.classes=r:i.classesWithoutHost=r}class sF extends Tc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Zt(t);return new cm(e,this.ngModule)}}function oF(i){const t=[];for(const e in i){if(!i.hasOwnProperty(e))continue;const n=i[e];void 0!==n&&t.push({propName:Array.isArray(n)?n[0]:n,templateName:e})}return t}class ab{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,n){n=i_(n);const r=this.injector.get(t,ZT,n);return r!==ZT||e===ZT?r:this.parentInjector.get(t,e,n)}}class cm extends Kk{get inputs(){const t=this.componentDef,e=t.inputTransforms,n=oF(t.inputs);if(null!==e)for(const r of n)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return n}get outputs(){return oF(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function G8(i){return i.map(H8).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,n,r){const s=$t(null);try{let o=(r=r||this.ngModule)instanceof Ir?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new ab(t,o):t,l=a.get(YT,null);if(null===l)throw new te(407,!1);const c=a.get(c7,null),h={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:a.get(om,null),changeDetectionScheduler:a.get(rb,null)},f=l.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",_=n?function JX(i,t,e,n){const s=n.get(BP,!1)||e===eo.ShadowDom,o=i.selectRootElement(t,s);return function eq(i){Ek(i)}(o),o}(f,n,this.componentDef.encapsulation,a):H_(f,m,function f7(i){const t=i.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(m));let p=512;this.componentDef.signals?p|=4096:this.componentDef.onPush||(p|=16);let g=null;null!==_&&(g=lT(_,a,!0));const b=LT(0,null,null,1,0,null,null,null,null,null,null),v=Y_(null,b,null,p,null,null,h,f,a,null,g);let y,T;jw(v);try{const w=this.componentDef;let M,D=null;w.findHostDirectiveDefs?(M=[],D=new Map,w.findHostDirectiveDefs(w,M,D),M.push(w)):M=[w];const S=function p7(i,t){const e=i[Fe],n=It;return i[n]=t,yu(e,n,2,"#host",null)}(v,_),x=function g7(i,t,e,n,r,s,o){const a=r[Fe];!function _7(i,t,e,n){for(const r of i)t.mergedAttrs=Mf(t.mergedAttrs,r.hostAttrs);null!==t.mergedAttrs&&(ob(t,t.mergedAttrs,!0),null!==e&&Tk(n,e,t))}(n,i,t,o);let l=null;null!==t&&(l=lT(t,r[er]));const c=s.rendererFactory.createRenderer(t,e);let d=16;e.signals?d=4096:e.onPush&&(d=64);const u=Y_(r,Ck(e),null,d,r[i.index],i,s,c,null,null,l);return a.firstCreatePass&&NT(a,i,n.length-1),Z_(r,u),r[i.index]=u}(S,_,w,M,v,h,f);T=Pf(b,It),_&&function v7(i,t,e,n){if(n)uw(i,e,["ng-version","17.3.7"]);else{const{attrs:r,classes:s}=function W8(i){const t=[],e=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&t.push(s,i[++n]):8===r&&e.push(s);else{if(!to(r))break;r=s}n++}return{attrs:t,classes:e}}(t.selectors[0]);r&&uw(i,e,r),s&&s.length>0&&wk(i,e,s.join(" "))}}(f,w,_,n),void 0!==e&&function y7(i,t,e){const n=i.projection=[];for(let r=0;r<t.length;r++){const s=e[r];n.push(null!=s?Array.from(s):null)}}(T,this.ngContentSelectors,e),y=function b7(i,t,e,n,r,s){const o=Ci(),a=r[Fe],l=Pr(o,r);Ik(a,r,o,e,null,n);for(let d=0;d<e.length;d++)_r(vc(r,a,o.directiveStart+d,o),r);Pk(a,r,o),l&&_r(l,r);const c=vc(r,a,o.directiveStart+o.componentOffset,o);if(i[Ni]=r[Ni]=c,null!==s)for(const d of s)d(c,t);return PT(a,o,r),c}(x,w,M,D,v,[x7]),VT(b,v,null)}finally{Bw()}return new m7(this.componentType,y,mu(T,v),v,T)}finally{$t(s)}}}class m7 extends s7{constructor(t,e,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new tm(r,void 0,!1),this.componentType=t}setInput(t,e){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;const s=this._rootLView;UT(s[Fe],s,r,t,e),this.previousInputValues.set(t,e),em(hs(this._tNode.index,s))}}get injector(){return new Wn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function x7(){const i=Ci();b_(ce()[Fe],i)}let br=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=w7}return i})();function w7(){return cF(Ci(),ce())}const T7=br,aF=class extends T7{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return mu(this._hostTNode,this._hostLView)}get injector(){return new Wn(this._hostTNode,this._hostLView)}get parentInjector(){const t=T_(this._hostTNode,this._hostLView);if(zw(t)){const e=jf(t,this._hostLView),n=Nf(t);return new Wn(e[Fe].data[n+8],e)}return new Wn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=lF(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-vn}createEmbeddedView(t,e,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const o=wu(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},s,o);return this.insertImpl(a,r,xu(this._hostTNode,o)),a}createComponent(t,e,n,r,s){const o=t&&!function Rf(i){return"function"==typeof i}(t);let a;if(o)a=e;else{const m=e||{};a=m.index,n=m.injector,r=m.projectableNodes,s=m.environmentInjector||m.ngModuleRef}const l=o?t:new cm(Zt(t)),c=n||this.parentInjector;if(!s&&null==l.ngModule){const _=(o?c:this.parentInjector).get(Ir,null);_&&(s=_)}const d=Zt(l.componentType??{}),u=wu(this._lContainer,d?.id??null),f=l.create(c,r,u?.firstChild??null,s);return this.insertImpl(f.hostView,a,xu(this._hostTNode,u)),f}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,n){const r=t._lView;if(function S6(i){return mr(i[bn])}(r)){const a=this.indexOf(t);if(-1!==a)this.detach(a);else{const l=r[bn],c=new aF(l,l[hr],l[bn]);c.detach(c.indexOf(t))}}const s=this._adjustIndex(e),o=this._lContainer;return Qf(o,r,s,n),t.attachToViewContainerRef(),K1(tM(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=lF(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Xf(this._lContainer,e);n&&(n_(tM(this._lContainer),e),G_(n[Fe],n))}detach(t){const e=this._adjustIndex(t,-1),n=Xf(this._lContainer,e);return n&&null!=n_(tM(this._lContainer),e)?new tm(n):null}_adjustIndex(t,e=0){return t??this.length+e}};function lF(i){return i[8]}function tM(i){return i[8]||(i[8]=[])}function cF(i,t){let e;const n=t[i.index];return mr(n)?e=n:(e=kk(n,t,null,i),t[i.index]=e,Z_(t,e)),dF(e,t,i,n),new aF(e,i,t)}let dF=function hF(i,t,e,n){if(i[Io])return;let r;r=8&e.type?Di(n):function M7(i,t){const e=i[Tt],n=e.createComment(""),r=Pr(t,i);return wc(e,W_(e,r),n,function $X(i,t){return i.nextSibling(t)}(e,r),!1),n}(t,e),i[Io]=r},iM=()=>!1;class nM{constructor(t){this.queryList=t,this.matches=null}clone(){return new nM(this.queryList)}setDirty(){this.queryList.setDirty()}}class rM{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let s=0;s<n;s++){const o=e.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new rM(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==cM(t,e).matches&&this.queries[e].setDirty()}}class fF{constructor(t,e,n=null){this.flags=e,this.read=n,this.predicate="string"==typeof t?function P7(i){return i.split(",").map(t=>t.trim())}(t):t}}class sM{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,s=this.getByIndex(n).embeddedTView(t,r);s&&(s.indexInDeclarationView=n,null!==e?e.push(s):e=[s])}return null!==e?new sM(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class oM{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new oM(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1&~this.metadata.flags){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(t,e,E7(e,s)),this.matchTNodeWithReadOption(t,e,M_(e,t,s,!1,!1))}else n===Kr?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,M_(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===xt||r===br||r===Kr&&4&e.type)this.addMatch(e.index,-2);else{const s=M_(e,t,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function E7(i,t){const e=i.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1];return null}function D7(i,t,e,n){return-1===e?function A7(i,t){return 11&i.type?mu(i,t):4&i.type?J_(i,t):null}(t,i):-2===e?function I7(i,t,e){return e===xt?mu(t,i):e===Kr?J_(t,i):e===br?cF(t,i):void 0}(i,t,n):vc(i,i[Fe],e,t)}function mF(i,t,e,n){const r=t[ha].queries[n];if(null===r.matches){const s=i.data,o=e.matches,a=[];for(let l=0;null!==o&&l<o.length;l+=2){const c=o[l];a.push(c<0?null:D7(t,s[c],o[l+1],e.metadata.read))}r.matches=a}return r.matches}function aM(i,t,e,n){const r=i.queries.getByIndex(e),s=r.matches;if(null!==s){const o=mF(i,t,r,e);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)n.push(o[a/2]);else{const c=s[a+1],d=t[-l];for(let u=vn;u<d.length;u++){const h=d[u];h[Ef]===h[bn]&&aM(h[Fe],h,c,n)}if(null!==d[ou]){const u=d[ou];for(let h=0;h<u.length;h++){const f=u[h];aM(f[Fe],f,c,n)}}}}}return n}function pF(i,t,e){const n=new yc(!(4&~e));return function nq(i,t,e,n){const r=Lk(t);r.push(e),i.firstCreatePass&&Ok(i).push(n,r.length-1)}(i,t,n,n.destroy),(t[ha]??=new rM).queries.push(new nM(n))-1}function bF(i,t,e){null===i.queries&&(i.queries=new sM),i.queries.track(new oM(t,e))}function cM(i,t){return i.queries.getByIndex(t)}function vF(i,t){const e=i[Fe],n=cM(e,t);return n.crossesNgTemplate?aM(e,i,t,[]):mF(e,i,n,t)}function lb(i){return"function"==typeof i&&void 0!==i[ks]}function dM(i,t){Bo("NgSignals");const e=function $W(i){const t=Object.create(A1);t.value=i;const e=()=>(Hg(t),t.value);return e[ks]=t,e}(i),n=e[ks];return t?.equal&&(n.equal=t.equal),e.set=r=>jx(n,r),e.update=r=>function XW(i,t){w1()||E1(),jx(i,t(i.value))}(n,r),e.asReadonly=yF.bind(e),e}function yF(){const i=this[ks];if(void 0===i.readonlyFn){const t=()=>this();t[ks]=i,i.readonlyFn=t}return i.readonlyFn}function xF(i){return lb(i)&&"function"==typeof i.set}function ge(i){let t=function PF(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),e=!0;const n=[i];for(;t;){let r;if(ro(i))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new te(903,!1);r=t.\u0275dir}if(r){if(e){n.push(r);const o=i;o.inputs=db(i.inputs),o.inputTransforms=db(i.inputTransforms),o.declaredInputs=db(i.declaredInputs),o.outputs=db(i.outputs);const a=r.hostBindings;a&&X7(i,a);const l=r.viewQuery,c=r.contentQueries;if(l&&W7(i,l),c&&$7(i,c),H7(i,r),d8(i.outputs,r.outputs),ro(r)&&r.data.animation){const d=i.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(i),a===ge&&(e=!1)}}t=Object.getPrototypeOf(t)}!function G7(i){let t=0,e=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=t+=r.hostVars,r.hostAttrs=Mf(r.hostAttrs,e=Mf(e,r.hostAttrs))}}(n)}function H7(i,t){for(const e in t.inputs){if(!t.inputs.hasOwnProperty(e)||i.inputs.hasOwnProperty(e))continue;const n=t.inputs[e];if(void 0!==n&&(i.inputs[e]=n,i.declaredInputs[e]=t.declaredInputs[e],null!==t.inputTransforms)){const r=Array.isArray(n)?n[0]:n;if(!t.inputTransforms.hasOwnProperty(r))continue;i.inputTransforms??={},i.inputTransforms[r]=t.inputTransforms[r]}}}function db(i){return i===Ao?{}:i===hi?[]:i}function W7(i,t){const e=i.viewQuery;i.viewQuery=e?(n,r)=>{t(n,r),e(n,r)}:t}function $7(i,t){const e=i.contentQueries;i.contentQueries=e?(n,r,s)=>{t(n,r,s),e(n,r,s)}:t}function X7(i,t){const e=i.hostBindings;i.hostBindings=e?(n,r)=>{t(n,r),e(n,r)}:t}function gs(i){const t=i.inputConfig,e={};for(const n in t)if(t.hasOwnProperty(n)){const r=t[n];Array.isArray(r)&&r[3]&&(e[n]=r[3])}i.inputTransforms=e}class Sc{}class OF{}class hM extends Sc{constructor(t,e,n){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new sF(this);const r=ur(t);this._bootstrapComponents=ps(r.bootstrap),this._r3Injector=lP(t,e,[{provide:Sc,useValue:this},{provide:Tc,useValue:this.componentFactoryResolver},...n],zn(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class fM extends OF{constructor(t){super(),this.moduleType=t}create(t){return new hM(this.moduleType,t,[])}}class NF extends Sc{constructor(t){super(),this.componentFactoryResolver=new sF(this),this.instance=null;const e=new eu([...t.providers,{provide:Sc,useValue:this},{provide:Tc,useValue:this.componentFactoryResolver}],t.parent||d_(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function ub(i,t,e=null){return new NF({providers:i,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}let cl=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Wr(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function fb(i){return!!mM(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function mM(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Uo(i,t,e){return i[t]=e}function yn(i,t,e){return!Object.is(i[t],e)&&(i[t]=e,!0)}function Rc(i,t,e,n){const r=yn(i,t,e);return yn(i,t+1,n)||r}function si(i,t,e,n,r,s,o,a){const l=ce(),c=ri(),d=i+It,u=c.firstCreatePass?function o9(i,t,e,n,r,s,o,a,l){const c=t.consts,d=yu(t,i,4,o||null,ko(c,a));OT(t,e,d,ko(c,l)),b_(t,d);const u=d.tView=LT(2,d,n,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return null!==t.queries&&(t.queries.template(t,d),u.queries=t.queries.embeddedTView(d)),d}(d,c,l,t,e,n,r,s,o):c.data[d];Fo(u,!1);const h=jF(c,l,u,i);Lf()&&$_(c,l,h,u),_r(h,l);const f=kk(h,l,h,u);return l[d]=f,Z_(l,f),function uF(i,t,e){return iM(i,t,e)}(f,u,l),p_(u)&&kT(c,l,u),null!=o&&FT(l,u,a),si}let jF=function BF(i,t,e,n){return Lo(!0),t[Tt].createComment("")};function WF(...i){}class it{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lt(!1),this.onMicrotaskEmpty=new lt(!1),this.onStable=new lt(!1),this.onError=new lt(!1),typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function d9(){const i="function"==typeof wi.requestAnimationFrame;let t=wi[i?"requestAnimationFrame":"setTimeout"],e=wi[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function f9(i){const t=()=>{!function h9(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(wi,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,_M(i),i.isCheckStableRunning=!0,gM(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),_M(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,s,o,a)=>{if(function m9(i){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0].data?.__ignore_ng_zone__}(a))return e.invokeTask(r,s,o,a);try{return $F(i),e.invokeTask(r,s,o,a)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&t(),XF(i)}},onInvoke:(e,n,r,s,o,a,l)=>{try{return $F(i),e.invoke(r,s,o,a,l)}finally{i.shouldCoalesceRunChangeDetection&&t(),XF(i)}},onHasTask:(e,n,r,s)=>{e.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,_M(i),gM(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,n,r,s)=>(e.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!it.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(it.isInAngularZone())throw new te(909,!1)}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,u9,WF,WF);try{return s.runTask(o,e,n)}finally{s.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const u9={};function gM(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function _M(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function $F(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function XF(i){i._nesting--,gM(i)}class qF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lt,this.onMicrotaskEmpty=new lt,this.onStable=new lt,this.onError=new lt}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}function Wi(i,t,e,n){const r=ce();return yn(r,so(),t)&&(ri(),jo(ji(),r,i,t,e,n)),Wi}function yb(i,t){return i<<17|t<<2}function ul(i){return i>>17&32767}function RM(i){return 2|i}function Ec(i){return(131068&i)>>2}function CM(i,t){return-131069&i|t<<2}function EM(i){return 1|i}function yL(i,t,e,n){const r=i[e+1],s=null===t;let o=n?ul(r):Ec(r),a=!1;for(;0!==o&&(!1===a||s);){const c=i[o+1];Q9(i[o],t)&&(a=!0,i[o+1]=n?EM(c):RM(c)),o=n?ul(c):Ec(c)}a&&(i[e+1]=n?RM(r):EM(r))}function Q9(i,t){return null===i||null==t||(Array.isArray(i)?i[1]:i)===t||!(!Array.isArray(i)||"string"!=typeof t)&&Jd(i,t)>=0}const $n={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xL(i){return i.substring($n.key,$n.keyEnd)}function J9(i){return i.substring($n.value,$n.valueEnd)}function wL(i,t){const e=$n.textEnd;return e===t?-1:(t=$n.keyEnd=function iY(i,t,e){for(;t<e&&i.charCodeAt(t)>32;)t++;return t}(i,$n.key=t,e),Bu(i,t,e))}function TL(i,t){const e=$n.textEnd;let n=$n.key=Bu(i,t,e);return e===n?-1:(n=$n.keyEnd=function nY(i,t,e){let n;for(;t<e&&(45===(n=i.charCodeAt(t))||95===n||(-33&n)>=65&&(-33&n)<=90||n>=48&&n<=57);)t++;return t}(i,n,e),n=SL(i,n,e),n=$n.value=Bu(i,n,e),n=$n.valueEnd=function rY(i,t,e){let n=-1,r=-1,s=-1,o=t,a=o;for(;o<e;){const l=i.charCodeAt(o++);if(59===l)return a;34===l||39===l?a=o=RL(i,l,o,e):t===o-4&&85===s&&82===r&&76===n&&40===l?a=o=RL(i,41,o,e):l>32&&(a=o),s=r,r=n,n=-33&l}return a}(i,n,e),SL(i,n,e))}function ML(i){$n.key=0,$n.keyEnd=0,$n.value=0,$n.valueEnd=0,$n.textEnd=i.length}function Bu(i,t,e){for(;t<e&&i.charCodeAt(t)<=32;)t++;return t}function SL(i,t,e,n){return(t=Bu(i,t,e))<e&&t++,t}function RL(i,t,e,n){let r=-1,s=e;for(;s<n;){const o=i.charCodeAt(s++);if(o==t&&92!==r)return s;r=92==o&&92===r?0:o}throw new Error}function O(i,t,e){const n=ce();return yn(n,so(),t)&&Zr(ri(),ji(),n,i,t,n[Tt],e,!1),O}function AM(i,t,e,n,r){const o=r?"class":"style";UT(i,e,t.inputs[o],o,n)}function Ac(i,t,e){return ao(i,t,e,!1),Ac}function di(i,t){return ao(i,t,null,!0),di}function Ls(i){lo(AL,sY,i,!1)}function sY(i,t){for(let e=function tY(i){return ML(i),TL(i,Bu(i,0,$n.textEnd))}(t);e>=0;e=TL(t,e))AL(i,xL(t),J9(t))}function hl(i){lo(uY,Vo,i,!0)}function Vo(i,t){for(let e=function eY(i){return ML(i),wL(i,Bu(i,0,$n.textEnd))}(t);e>=0;e=wL(t,e))ds(i,xL(t),!0)}function ao(i,t,e,n){const r=ce(),s=ri(),o=ma(2);s.firstUpdatePass&&EL(s,i,o,n),t!==Lt&&yn(r,o,t)&&DL(s,s.data[gr()],r,r[Tt],i,r[o+1]=function fY(i,t){return null==i||""===i||("string"==typeof t?i+=t:"object"==typeof i&&(i=zn(ms(i)))),i}(t,e),n,o)}function lo(i,t,e,n){const r=ri(),s=ma(2);r.firstUpdatePass&&EL(r,null,s,n);const o=ce();if(e!==Lt&&yn(o,s,e)){const a=r.data[gr()];if(PL(a,n)&&!CL(r,s)){let l=n?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(e=Yx(l,e||"")),AM(r,a,o,e,n)}else!function hY(i,t,e,n,r,s,o,a){r===Lt&&(r=hi);let l=0,c=0,d=0<r.length?r[0]:null,u=0<s.length?s[0]:null;for(;null!==d||null!==u;){const h=l<r.length?r[l+1]:void 0,f=c<s.length?s[c+1]:void 0;let _,m=null;d===u?(l+=2,c+=2,h!==f&&(m=u,_=f)):null===u||null!==d&&d<u?(l+=2,m=d):(c+=2,m=u,_=f),null!==m&&DL(i,t,e,n,m,_,o,a),d=l<r.length?r[l]:null,u=c<s.length?s[c]:null}}(r,a,o,o[Tt],o[s+1],o[s+1]=function dY(i,t,e){if(null==e||""===e)return hi;const n=[],r=ms(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)i(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&i(n,s,r[s]);else"string"==typeof r&&t(n,r);return n}(i,t,e),n,s)}}function CL(i,t){return t>=i.expandoStartIndex}function EL(i,t,e,n){const r=i.data;if(null===r[e+1]){const s=r[gr()],o=CL(i,e);PL(s,n)&&null===t&&!o&&(t=!1),t=function oY(i,t,e,n){const r=Ow(i);let s=n?t.residualClasses:t.residualStyles;if(null===r)0===(n?t.classBindings:t.styleBindings)&&(e=gm(e=DM(null,i,t,e,n),t.attrs,n),s=null);else{const o=t.directiveStylingLast;if(-1===o||i[o]!==r)if(e=DM(r,i,t,e,n),null===s){let l=function aY(i,t,e){const n=e?t.classBindings:t.styleBindings;if(0!==Ec(n))return i[ul(n)]}(i,t,n);void 0!==l&&Array.isArray(l)&&(l=DM(null,i,t,l[1],n),l=gm(l,t.attrs,n),function lY(i,t,e,n){i[ul(e?t.classBindings:t.styleBindings)]=n}(i,t,n,l))}else s=function cY(i,t,e){let n;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)n=gm(n,i[s].hostAttrs,e);return gm(n,t.attrs,e)}(i,t,n)}return void 0!==s&&(n?t.residualClasses=s:t.residualStyles=s),e}(r,s,t,n),function Z9(i,t,e,n,r,s){let o=s?t.classBindings:t.styleBindings,a=ul(o),l=Ec(o);i[n]=e;let d,c=!1;if(Array.isArray(e)?(d=e[1],(null===d||Jd(e,d)>0)&&(c=!0)):d=e,r)if(0!==l){const h=ul(i[a+1]);i[n+1]=yb(h,a),0!==h&&(i[h+1]=CM(i[h+1],n)),i[a+1]=function q9(i,t){return 131071&i|t<<17}(i[a+1],n)}else i[n+1]=yb(a,0),0!==a&&(i[a+1]=CM(i[a+1],n)),a=n;else i[n+1]=yb(l,0),0===a?a=n:i[l+1]=CM(i[l+1],n),l=n;c&&(i[n+1]=RM(i[n+1])),yL(i,d,n,!0),yL(i,d,n,!1),function K9(i,t,e,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof t&&Jd(s,t)>=0&&(e[n+1]=EM(e[n+1]))}(t,d,i,n,s),o=yb(a,l),s?t.classBindings=o:t.styleBindings=o}(r,s,t,e,o,n)}}function DM(i,t,e,n,r){let s=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(s=t[a],n=gm(n,s.hostAttrs,r),s!==i);)a++;return null!==i&&(e.directiveStylingLast=a),n}function gm(i,t,e){const n=e?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),ds(i,o,!!e||t[++s]))}return void 0===i?null:i}function AL(i,t,e){ds(i,t,ms(e))}function uY(i,t,e){const n=String(t);""!==n&&!n.includes(" ")&&ds(i,n,e)}function DL(i,t,e,n,r,s,o,a){if(!(3&t.type))return;const l=i.data,c=l[a+1],d=function Y9(i){return!(1&~i)}(c)?IL(l,t,e,r,Ec(c),o):void 0;xb(d)||(xb(s)||function X9(i){return!(2&~i)}(c)&&(s=IL(l,null,e,r,a,o)),function YX(i,t,e,n,r){if(t)r?i.addClass(e,n):i.removeClass(e,n);else{let s=-1===n.indexOf("-")?void 0:ol.DashCase;null==r?i.removeStyle(e,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=ol.Important),i.setStyle(e,n,r,s))}}(n,o,If(gr(),e),r,s))}function IL(i,t,e,n,r,s){const o=null===t;let a;for(;r>0;){const l=i[r],c=Array.isArray(l),d=c?l[1]:l,u=null===d;let h=e[r+1];h===Lt&&(h=u?hi:void 0);let f=u?cw(h,n):d===n?h:void 0;if(c&&!xb(f)&&(f=cw(l,n)),xb(f)&&(a=f,o))return a;const m=i[r+1];r=o?ul(m):Ec(m)}if(null!==t){let l=s?t.residualClasses:t.residualStyles;null!=l&&(a=cw(l,n))}return a}function xb(i){return void 0!==i}function PL(i,t){return!!(i.flags&(t?8:16))}class MY{destroy(t){}updateValue(t,e){}swap(t,e){const n=Math.min(t,e),r=Math.max(t,e),s=this.detach(r);if(r-n>1){const o=this.detach(n);this.attach(n,s),this.attach(r,o)}else this.attach(n,s)}move(t,e){this.attach(e,this.detach(t))}}function IM(i,t,e,n,r){return i===e&&Object.is(t,n)?1:Object.is(r(i,t),r(e,n))?-1:0}function PM(i,t,e,n){return!(void 0===t||!t.has(n)||(i.attach(e,t.get(n)),t.delete(n),0))}function kL(i,t,e,n,r){if(PM(i,t,n,e(n,r)))i.updateValue(n,r);else{const s=i.create(n,r);i.attach(n,s)}}function FL(i,t,e,n){const r=new Set;for(let s=t;s<=e;s++)r.add(n(s,i.at(s)));return r}class LL{constructor(){this.kvMap=new Map,this._vMap=void 0}has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;const e=this.kvMap.get(t);return void 0!==this._vMap&&this._vMap.has(e)?(this.kvMap.set(t,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,e){if(this.kvMap.has(t)){let n=this.kvMap.get(t);void 0===this._vMap&&(this._vMap=new Map);const r=this._vMap;for(;r.has(n);)n=r.get(n);r.set(n,e)}else this.kvMap.set(t,e)}forEach(t){for(let[e,n]of this.kvMap)if(t(n,e),void 0!==this._vMap){const r=this._vMap;for(;r.has(n);)n=r.get(n),t(n,e)}}}function co(i,t,e){Bo("NgControlFlow");const n=ce(),r=so(),s=OM(n,It+i);if(yn(n,r,t)){const a=$t(null);try{if(zT(s,0),-1!==t){const l=NM(n[Fe],It+t),c=wu(s,l.tView.ssrId);Qf(s,Kf(n,l,e,{dehydratedView:c}),0,xu(l,c))}}finally{$t(a)}}else{const a=jk(s,0);void 0!==a&&(a[Ni]=e)}}class RY{constructor(t,e,n){this.lContainer=t,this.$implicit=e,this.$index=n}get $count(){return this.lContainer.length-vn}}function kM(i,t){return t}class EY{constructor(t,e,n){this.hasEmptyBlock=t,this.trackByFn=e,this.liveCollection=n}}function FM(i,t,e,n,r,s,o,a,l,c,d,u,h){Bo("NgControlFlow");const f=void 0!==l,m=ce(),_=a?o.bind(m[nn][Ni]):o,p=new EY(f,_);m[It+i]=p,si(i+1,t,e,n,r,s),f&&si(i+2,l,c,d,u,h)}class AY extends MY{constructor(t,e,n){super(),this.lContainer=t,this.hostLView=e,this.templateTNode=n,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-vn}at(t){return this.getLView(t)[Ni].$implicit}attach(t,e){const n=e[us];this.needsIndexUpdate||=t!==this.length,Qf(this.lContainer,e,t,xu(this.templateTNode,n))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,function DY(i,t){return Xf(i,t)}(this.lContainer,t)}create(t,e){const n=wu(this.lContainer,this.templateTNode.tView.ssrId);return Kf(this.hostLView,this.templateTNode,new RY(this.lContainer,e,t),{dehydratedView:n})}destroy(t){G_(t[Fe],t)}updateValue(t,e){this.getLView(t)[Ni].$implicit=e}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[Ni].$index=t}getLView(t){return function IY(i,t){return jk(i,t)}(this.lContainer,t)}}function LM(i){const t=$t(null),e=gr();try{const n=ce(),r=n[Fe],s=n[e];if(void 0===s.liveCollection){const a=e+1,l=OM(n,a),c=NM(r,a);s.liveCollection=new AY(l,n,c)}else s.liveCollection.reset();const o=s.liveCollection;if(function SY(i,t,e){let n,r,s=0,o=i.length-1;if(Array.isArray(t)){let a=t.length-1;for(;s<=o&&s<=a;){const l=i.at(s),c=t[s],d=IM(s,l,s,c,e);if(0!==d){d<0&&i.updateValue(s,c),s++;continue}const u=i.at(o),h=t[a],f=IM(o,u,a,h,e);if(0!==f){f<0&&i.updateValue(o,h),o--,a--;continue}const m=e(s,l),_=e(o,u),p=e(s,c);if(Object.is(p,_)){const g=e(a,h);Object.is(g,m)?(i.swap(s,o),i.updateValue(o,h),a--,o--):i.move(o,s),i.updateValue(s,c),s++}else if(n??=new LL,r??=FL(i,s,o,e),PM(i,n,s,p))i.updateValue(s,c),s++,o++;else if(r.has(p))n.set(m,i.detach(s)),o--;else{const g=i.create(s,t[s]);i.attach(s,g),s++,o++}}for(;s<=a;)kL(i,n,e,s,t[s]),s++}else if(null!=t){const a=t[Symbol.iterator]();let l=a.next();for(;!l.done&&s<=o;){const c=i.at(s),d=l.value,u=IM(s,c,s,d,e);if(0!==u)u<0&&i.updateValue(s,d),s++,l=a.next();else{n??=new LL,r??=FL(i,s,o,e);const h=e(s,d);if(PM(i,n,s,h))i.updateValue(s,d),s++,o++,l=a.next();else if(r.has(h)){const f=e(s,c);n.set(f,i.detach(s)),o--}else i.attach(s,i.create(s,d)),s++,o++,l=a.next()}}for(;!l.done;)kL(i,n,e,i.length,l.value),l=a.next()}for(;s<=o;)i.destroy(i.detach(o--));n?.forEach(a=>{i.destroy(a)})}(o,i,s.trackByFn),o.updateIndexes(),s.hasEmptyBlock){const a=so(),l=0===o.length;if(yn(n,a,l)){const c=e+2,d=OM(n,c);if(l){const u=NM(r,c),h=wu(d,u.tView.ssrId);Qf(d,Kf(n,u,void 0,{dehydratedView:h}),0,xu(u,h))}else zT(d,0)}}}finally{$t(t)}}function OM(i,t){return i[t]}function NM(i,t){return Pf(i,t)}function K(i,t,e,n){const r=ce(),s=ri(),o=It+i,a=r[Tt],l=s.firstCreatePass?function PY(i,t,e,n,r,s){const o=t.consts,l=yu(t,i,2,n,ko(o,r));return OT(t,e,l,ko(o,s)),null!==l.attrs&&ob(l,l.attrs,!1),null!==l.mergedAttrs&&ob(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,s,r,t,e,n):s.data[o],c=OL(s,r,l,a,t,i);r[o]=c;const d=p_(l);return Fo(l,!0),Tk(a,c,l),!function hm(i){return!(32&~i.flags)}(l)&&Lf()&&$_(s,r,c,l),0===function C6(){return Mt.lFrame.elementDepthCount}()&&_r(c,r),function E6(){Mt.lFrame.elementDepthCount++}(),d&&(kT(s,r,l),PT(s,l,r)),null!==n&&FT(r,l),K}function de(){let i=Ci();kw()?Fw():(i=i.parent,Fo(i,!1));const t=i;(function D6(i){return Mt.skipHydrationRootTNode===i})(t)&&function F6(){Mt.skipHydrationRootTNode=null}(),function A6(){Mt.lFrame.elementDepthCount--}();const e=ri();return e.firstCreatePass&&(b_(e,i),Tw(i)&&e.queries.elementEnd(i)),null!=t.classesWithoutHost&&function X6(i){return!!(8&i.flags)}(t)&&AM(e,t,ce(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function q6(i){return!!(16&i.flags)}(t)&&AM(e,t,ce(),t.stylesWithoutHost,!1),de}function ve(i,t,e,n){return K(i,t,e,n),de(),ve}let OL=(i,t,e,n,r,s)=>(Lo(!0),H_(n,r,function HI(){return Mt.lFrame.currentNamespace}()));function jM(i,t,e){const n=ce(),r=ri(),s=i+It,o=r.firstCreatePass?function LY(i,t,e,n,r){const s=t.consts,o=ko(s,n),a=yu(t,i,8,"ng-container",o);return null!==o&&ob(a,o,!0),OT(t,e,a,ko(s,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,r,n,t,e):r.data[s];Fo(o,!0);const a=NL(r,n,o,i);return n[s]=a,Lf()&&$_(r,n,a,o),_r(a,n),p_(o)&&(kT(r,n,o),PT(r,o,n)),null!=e&&FT(n,o),jM}function BM(){let i=Ci();const t=ri();return kw()?Fw():(i=i.parent,Fo(i,!1)),t.firstCreatePass&&(b_(t,i),Tw(i)&&t.queries.elementEnd(i)),BM}function _m(i,t,e){return jM(i,t,e),BM(),_m}let NL=(i,t,e,n)=>(Lo(!0),ST(t[Tt],""));function Bi(){return ce()}function UM(i,t,e){const n=ce();if(yn(n,so(),t)){const s=ri(),o=ji();Zr(s,o,n,i,t,Nk(Ow(s.data),o,n),e,!0)}return UM}const Vu="en-US";let VL=Vu;function Ke(i,t,e,n){const r=ce(),s=ri(),o=Ci();return GM(s,r,r[Tt],o,i,t,n),Ke}function HM(i,t){const e=Ci(),n=ce(),r=ri();return GM(r,n,Nk(Ow(r.data),e,n),e,i,t),HM}function GM(i,t,e,n,r,s,o){const a=p_(n),c=i.firstCreatePass&&Ok(i),d=t[Ni],u=Lk(t);let h=!0;if(3&n.type||o){const _=Pr(n,t),p=o?o(_):_,g=u.length,b=o?y=>o(Di(y[n.index])):n.index;let v=null;if(!o&&a&&(v=function OZ(i,t,e,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===e&&r[s+1]===n){const a=t[nu],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(i,t,r,n.index)),null!==v)(v.__ngLastListenerFn__||v).__ngNextListenerFn__=s,v.__ngLastListenerFn__=s,h=!1;else{s=p2(n,t,d,s,!1);const y=e.listen(p,r,s);u.push(s,y),c&&c.push(r,b,g,g+1)}}else s=p2(n,t,d,s,!1);const f=n.outputs;let m;if(h&&null!==f&&(m=f[r])){const _=m.length;if(_)for(let p=0;p<_;p+=2){const T=t[m[p]][m[p+1]].subscribe(s),w=u.length;u.push(s,T),c&&c.push(r,n.index,w,-(w+1))}}}function m2(i,t,e,n){const r=$t(null);try{return Po(6,t,e),!1!==e(n)}catch(s){return K_(i,s),!1}finally{Po(7,t,e),$t(r)}}function p2(i,t,e,n,r){return function s(o){if(o===Function)return n;em(i.componentOffset>-1?hs(i.index,t):t);let l=m2(t,e,n,o),c=s.__ngNextListenerFn__;for(;c;)l=m2(t,e,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&o.preventDefault(),l}}function Qt(i=1){return function U6(i){return(Mt.lFrame.contextLView=function AI(i,t){for(;i>0;)t=t[ru],i--;return t}(i,Mt.lFrame.contextLView))[Ni]}(i)}function NZ(i,t){let e=null;const n=function B8(i){const t=i.attrs;if(null!=t){const e=t.indexOf(5);if(!(1&e))return t[e+1]}return null}(i);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===n?sI(i,s,!0):z8(n,s))return r}else e=r}return e}function ze(i){const t=ce()[nn][hr];if(!t.projection){const n=t.projection=function r_(i,t){const e=[];for(let n=0;n<i;n++)e.push(t);return e}(i?i.length:1,null),r=n.slice();let s=t.child;for(;null!==s;){const o=i?NZ(s,i):0;null!==o&&(r[o]?r[o].projectionNext=s:n[o]=s,r[o]=s),s=s.next}}}function Ce(i,t=0,e){const n=ce(),r=ri(),s=yu(r,It+i,16,null,e||null);null===s.projection&&(s.projection=t),Fw(),(!n[us]||lu())&&32&~s.flags&&function XX(i,t,e){xk(t[Tt],0,t,e,CT(i,e,t),pk(e.parent||t[hr],e,t))}(r,n,s)}function dn(i,t,e,n){!function _F(i,t,e,n){const r=ri();if(r.firstCreatePass){const s=Ci();bF(r,new fF(t,e,n),s.index),function k7(i,t){const e=i.contentQueries||(i.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(i.queries.length-1,t)}(r,i),!(2&~e)&&(r.staticContentQueries=!0)}return pF(r,ce(),e)}(i,t,e,n)}function Ei(i,t,e){!function gF(i,t,e){const n=ri();return n.firstCreatePass&&(bF(n,new fF(i,t,e),-1),!(2&~t)&&(n.staticViewQueries=!0)),pF(n,ce(),t)}(i,t,e)}function bt(i){const t=ce(),e=ri(),n=Nw();__(n+1);const r=cM(e,n);if(i.dirty&&function M6(i){return!(4&~i[ut])}(t)===!(2&~r.metadata.flags)){if(null===r.matches)i.reset([]);else{const s=vF(t,n);i.reset(s,fP),i.notifyOnChanges()}return!0}return!1}function vt(){return function lM(i,t){return i[ha].queries[t].queryList}(ce(),Nw())}function Ot(i){return au(function L6(){return Mt.lFrame.contextLView}(),It+i)}function Jt(i,t=""){const e=ce(),n=ri(),r=i+It,s=n.firstCreatePass?yu(n,r,1,t,null):n.data[r],o=F2(n,e,s,t,i);e[r]=o,Lf()&&$_(n,e,o,s),Fo(s,!1)}let F2=(i,t,e,n,r)=>(Lo(!0),function MT(i,t){return i.createText(t)}(t[Tt],n));function Rb(i){return fl("",i,""),Rb}function fl(i,t,e){const n=ce(),r=function Iu(i,t,e,n){return yn(i,so(),e)?t+Dt(e)+n:Lt}(n,i,t,e);return r!==Lt&&function _a(i,t,e){const n=If(t,i);!function ck(i,t,e){i.setValue(t,e)}(i[Tt],n,e)}(n,gr(),r),fl}function Mm(i,t,e){xF(t)&&(t=t());const n=ce();return yn(n,so(),t)&&Zr(ri(),ji(),n,i,t,n[Tt],e,!1),Mm}function Cb(i,t){const e=xF(i);return e&&i.set(t),e}function Sm(i,t){const e=ce(),n=ri(),r=Ci();return GM(n,e,e[Tt],r,i,t),Sm}function $M(i,t,e,n,r){if(i=yt(i),Array.isArray(i))for(let s=0;s<i.length;s++)$M(i[s],t,e,n,r);else{const s=ri(),o=ce(),a=Ci();let l=mc(i)?i:yt(i.provide);const c=fI(i),d=1048575&a.providerIndexes,u=a.directiveStart,h=a.providerIndexes>>20;if(mc(i)||!i.multi){const f=new Of(c,r,P),m=qM(l,t,r?d:d+h,u);-1===m?(Ww(w_(a,o),s,l),XM(s,i,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(f),o.push(f)):(e[m]=f,o[m]=f)}else{const f=qM(l,t,d+h,u),m=qM(l,t,d,d+h),p=m>=0&&e[m];if(r&&!p||!r&&!(f>=0&&e[f])){Ww(w_(a,o),s,l);const g=function iK(i,t,e,n,r){const s=new Of(i,e,P);return s.multi=[],s.index=t,s.componentProviders=0,H2(s,r,n&&!e),s}(r?tK:eK,e.length,r,n,c);!r&&p&&(e[m].providerFactory=g),XM(s,i,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(g),o.push(g)}else XM(s,i,f>-1?f:m,H2(e[r?m:f],c,!r&&n));!r&&n&&p&&e[m].componentProviders++}}}function XM(i,t,e,n){const r=mc(t),s=function Q8(i){return!!i.useClass}(t);if(r||s){const l=(s?yt(t.useClass):t).prototype.ngOnDestroy;if(l){const c=i.destroyHooks||(i.destroyHooks=[]);if(!r&&t.multi){const d=c.indexOf(e);-1===d?c.push(e,[n,l]):c[d+1].push(n,l)}else c.push(e,l)}}}function H2(i,t,e){return e&&i.componentProviders++,i.multi.push(t)-1}function qM(i,t,e,n){for(let r=e;r<n;r++)if(t[r]===i)return r;return-1}function eK(i,t,e,n){return YM(this.multi,[])}function tK(i,t,e,n){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=vc(e,e[Fe],this.providerFactory.index,n);s=a.slice(0,o),YM(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],YM(r,s);return s}function YM(i,t){for(let e=0;e<i.length;e++)t.push((0,i[e])());return t}function Ee(i,t=[]){return e=>{e.providersResolver=(n,r)=>function JZ(i,t,e){const n=ri();if(n.firstCreatePass){const r=ro(i);$M(e,n.data,n.blueprint,r,!0),$M(t,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,t)}}let nK=(()=>{class i{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const n=fw(0,e.type),r=n.length>0?ub([n],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Re({token:i,providedIn:"environment",factory:()=>new i(ue(Ir))})}return i})();function rn(i){Bo("NgStandalone"),i.getStandaloneInjector=t=>t.get(nK).getOrCreateStandaloneInjector(i)}function ae(i,t,e){const n=kr()+i,r=ce();return r[n]===Lt?Uo(r,n,e?t.call(e):t()):function um(i,t){return i[t]}(r,n)}function Ft(i,t,e,n){return W2(ce(),kr(),i,t,e,n)}function uo(i,t,e,n,r){return $2(ce(),kr(),i,t,e,n,r)}function Ic(i,t,e,n,r,s){return function X2(i,t,e,n,r,s,o,a){const l=t+e;return function mb(i,t,e,n,r){const s=Rc(i,t,e,n);return yn(i,t+2,r)||s}(i,l,r,s,o)?Uo(i,l+3,a?n.call(a,r,s,o):n(r,s,o)):Cm(i,l+3)}(ce(),kr(),i,t,e,n,r,s)}function Rm(i,t,e,n,r,s,o){return function q2(i,t,e,n,r,s,o,a,l){const c=t+e;return function Fs(i,t,e,n,r,s){const o=Rc(i,t,e,n);return Rc(i,t+2,r,s)||o}(i,c,r,s,o,a)?Uo(i,c+4,l?n.call(l,r,s,o,a):n(r,s,o,a)):Cm(i,c+4)}(ce(),kr(),i,t,e,n,r,s,o)}function Cm(i,t){const e=i[t];return e===Lt?void 0:e}function W2(i,t,e,n,r,s){const o=t+e;return yn(i,o,r)?Uo(i,o+1,s?n.call(s,r):n(r)):Cm(i,o+1)}function $2(i,t,e,n,r,s,o){const a=t+e;return Rc(i,a,r,s)?Uo(i,a+2,o?n.call(o,r,s):n(r,s)):Cm(i,a+2)}function un(i,t){const e=ri();let n;const r=i+It;e.firstCreatePass?(n=function uK(i,t){if(t)for(let e=t.length-1;e>=0;e--){const n=t[e];if(i===n.name)return n}}(t,e.pipeRegistry),e.data[r]=n,n.onDestroy&&(e.destroyHooks??=[]).push(r,n.onDestroy)):n=e.data[r];const s=n.factory||(n.factory=hc(n.type)),a=$r(P);try{const l=x_(!1),c=s();return x_(l),function VZ(i,t,e,n){e>=i.data.length&&(i.data[e]=null,i.blueprint[e]=null),t[e]=n}(e,ce(),r,c),c}finally{$r(a)}}function Tn(i,t,e){const n=i+It,r=ce(),s=au(r,n);return Em(r,n)?W2(r,kr(),t,s.transform,e,s):s.transform(e)}function Em(i,t){return i[Fe].data[t].pure}function zu(i,t){return J_(i,t)}let hO=(()=>{class i{log(e){console.log(e)}warn(e){console.warn(e)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();const _O=new le(""),Ib=new le("");let nS,tS=(()=>{class i{constructor(e,n,r){this._ngZone=e,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,nS||(function aQ(i){nS=i}(r),r.addToWindow(n)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{it.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e()},n)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,n,r){return[]}static#e=this.\u0275fac=function(n){return new(n||i)(ue(it),ue(iS),ue(Ib))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})(),iS=(()=>{class i{constructor(){this._applications=new Map}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return nS?.findTestabilityInTree(this,e,n)??null}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();function Im(i){return!!i&&"function"==typeof i.then}function bO(i){return!!i&&"function"==typeof i.subscribe}const rS=new le("");let sS=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,n)=>{this.resolve=e,this.reject=n}),this.appInits=ee(rS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const r of this.appInits){const s=r();if(Im(s))e.push(s);else if(bO(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}const n=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const oS=new le("");function xO(i,t){return Array.isArray(t)?t.reduce(xO,i):{...i,...t}}let va=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ee(dP),this.afterRenderEffectManager=ee(om),this.externalTestViews=new Set,this.beforeRender=new Et,this.afterTick=new Et,this.componentTypes=[],this.components=[],this.isStable=ee(cl).hasPendingTasks.pipe(Ct(e=>!e)),this._injector=ee(Ir)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,n){const r=e instanceof Kk;if(!this._injector.get(sS).done)throw!r&&function nl(i){const t=Zt(i)||Hn(i)||or(i);return null!==t&&t.standalone}(e),new te(405,!1);let o;o=r?e:this._injector.get(Tc).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const a=function lQ(i){return i.isBoundToModule}(o)?void 0:this._injector.get(Sc),c=o.create(ar.NULL,[],n||o.selector,a),d=c.location.nativeElement,u=c.injector.get(_O,null);return u?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),Pb(this.components,c),u?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){this._tick(!0)}_tick(e){if(this._runningTick)throw new te(101,!1);const n=$t(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(e)}catch(r){this.internalErrorHandler(r)}finally{this.afterTick.next(),this._runningTick=!1,$t(n)}}detectChangesInAttachedViews(e){let n=0;const r=this.afterRenderEffectManager;for(;;){if(n===Vk)throw new te(103,!1);if(e){const s=0===n;this.beforeRender.next(s);for(let{_lView:o,notifyErrorHandler:a}of this._views)dQ(o,s,a)}if(n++,r.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>aS(s))&&(r.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>aS(s))))break}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;Pb(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const n=this._injector.get(oS,[]);[...this._bootstrapListeners,...n].forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Pb(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new te(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Pb(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}function dQ(i,t,e){!t&&!aS(i)||function uQ(i,t,e){let n;e?(n=0,i[ut]|=1024):n=64&i[ut]?0:1,Q_(i,t,n)}(i,e,t)}function aS(i){return Dw(i)}class hQ{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let wO=(()=>{class i{compileModuleSync(e){return new fM(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),s=ps(ur(e).declarations).reduce((o,a)=>{const l=Zt(a);return l&&o.push(new cm(l)),o},[]);return new hQ(n,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),pQ=(()=>{class i{constructor(){this.zone=ee(it),this.applicationRef=ee(va)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function gQ(){const i=ee(it),t=ee(fs);return e=>i.runOutsideAngular(()=>t.handleError(e))}let bQ=(()=>{class i{constructor(){this.subscription=new Oi,this.initialized=!1,this.zone=ee(it),this.pendingTasks=ee(cl)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{it.assertNotInAngularZone(),queueMicrotask(()=>{null!==e&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{it.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const zo=new le("",{providedIn:"root",factory:()=>ee(zo,ni.Optional|ni.SkipSelf)||function vQ(){return typeof $localize<"u"&&$localize.locale||Vu}()}),lS=new le("");let RO=(()=>{class i{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const r=function p9(i="zone.js",t){return"noop"===i?new qF:"zone.js"===i?new it(t):i}(n?.ngZone,function SO(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:n?.ngZoneEventCoalescing,runCoalescing:n?.ngZoneRunCoalescing}));return r.run(()=>{const s=function e9(i,t,e){return new hM(i,t,e)}(e.moduleType,this.injector,function MO(i){return[{provide:it,useFactory:i},{provide:fc,multi:!0,useFactory:()=>{const t=ee(pQ,{optional:!0});return()=>t.initialize()}},{provide:fc,multi:!0,useFactory:()=>{const t=ee(bQ);return()=>{t.initialize()}}},{provide:dP,useFactory:gQ}]}(()=>r)),o=s.injector.get(fs,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:l=>{o.handleError(l)}});s.onDestroy(()=>{Pb(this._modules,s),a.unsubscribe()})}),function yO(i,t,e){try{const n=e();return Im(n)?n.catch(r=>{throw t.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw t.runOutsideAngular(()=>i.handleError(n)),n}}(o,r,()=>{const a=s.injector.get(sS);return a.runInitializers(),a.donePromise.then(()=>(function zL(i){"string"==typeof i&&(VL=i.toLowerCase().replace(/_/g,"-"))}(s.injector.get(zo,Vu)||Vu),this._moduleDoBootstrap(s),s))})})}bootstrapModule(e,n=[]){const r=xO({},n);return function mQ(i,t,e){const n=new fM(e);return Promise.resolve(n)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(e){const n=e.injector.get(va);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new te(-403,!1);e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new te(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const e=this._injector.get(lS,null);e&&(e.forEach(n=>n()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(n){return new(n||i)(ue(ar))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})(),ml=null;const CO=new le("");function EO(i,t,e=[]){const n=`Platform: ${t}`,r=new le(n);return(s=[])=>{let o=cS();if(!o||o.injector.get(CO,!1)){const a=[...e,...s,{provide:r,useValue:!0}];i?i(a):function wQ(i){if(ml&&!ml.get(CO,!1))throw new te(400,!1);(function vO(){!function WW(i){C1=i}(()=>{throw new te(600,!1)})})(),ml=i;const t=i.get(RO);(function DO(i){i.get(kP,null)?.forEach(e=>e())})(i)}(function AO(i=[],t){return ar.create({name:t,providers:[{provide:gw,useValue:"platform"},{provide:lS,useValue:new Set([()=>ml=null])},...i]})}(a,n))}return function TQ(i){const t=cS();if(!t)throw new te(401,!1);return t}()}}function cS(){return ml?.get(RO)??null}function SQ(){return!1}let lr=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=RQ}return i})();function RQ(i){return function CQ(i,t,e){if(gc(i)&&!e){const n=hs(i.index,t);return new tm(n,n)}return 47&i.type?new tm(t[nn],t):null}(Ci(),ce(),!(16&~i))}class LO{constructor(){}supports(t){return fb(t)}create(t){return new PQ(t)}}const IQ=(i,t)=>t;class PQ{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||IQ}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){const o=!n||e&&e.currentIndex<NO(n,r,s)?e:n,a=NO(o,r,s),l=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,d=l-r;if(c!=d){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,m=f+h;d<=m&&m<c&&(s[h]=f+1)}s[o.previousIndex]=d-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!fb(t))throw new te(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,o,e=this._itHead,n=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,a),n=!0),e=e._next}else r=0,function r9(i,t){if(Array.isArray(i))for(let e=0;e<i.length;e++)t(i[e]);else{const e=i[Symbol.iterator]();let n;for(;!(n=e.next()).done;)t(n.value)}}(t,a=>{o=this._trackByFn(r,a),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,a,o,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new kQ(e,n),s,r),t}_verifyReinsertion(t,e,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new OO),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new OO),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class kQ{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class FQ{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class OO{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new FQ,this.map.set(e,n)),n.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function NO(i,t,e){const n=i.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+t+r}class jO{constructor(){}supports(t){return t instanceof Map||mM(t)}create(){return new LQ}}class LQ{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||mM(t)))throw new te(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(n,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,n);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const n=new OQ(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class OQ{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function BO(){return new mS([new LO])}let mS=(()=>{class i{static#e=this.\u0275prov=Re({token:i,providedIn:"root",factory:BO});constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||BO()),deps:[[i,new Tf,new uc]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new te(901,!1)}}return i})();function UO(){return new Ob([new jO])}let Ob=(()=>{class i{static#e=this.\u0275prov=Re({token:i,providedIn:"root",factory:UO});constructor(e){this.factories=e}static create(e,n){if(n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||UO()),deps:[[i,new Tf,new uc]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(n)return n;throw new te(901,!1)}}return i})();const BQ=EO(null,"core",[]);let UQ=(()=>{class i{constructor(e){}static#e=this.\u0275fac=function(n){return new(n||i)(ue(va))};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({})}return i})();function $i(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function pl(i,t=NaN){return isNaN(parseFloat(i))||isNaN(Number(i))?t:Number(i)}function lN(i){const t=$t(null);try{return i()}finally{$t(t)}}const _J=new le("",{providedIn:"root",factory:()=>ee(bJ)});let bJ=(()=>{class i{static#e=this.\u0275prov=Re({token:i,providedIn:"root",factory:()=>new vJ})}return i})();class vJ{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=ee(cl),this.taskId=null}scheduleEffect(t){if(this.enqueue(t),null===this.taskId){const e=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(e),this.taskId=null})}}enqueue(t){const e=t.creationZone;this.queues.has(e)||this.queues.set(e,new Set);const n=this.queues.get(e);n.has(t)||(this.queuedEffectCount++,n.add(t))}flush(){for(;this.queuedEffectCount>0;)for(const[t,e]of this.queues)null===t?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(const e of t)t.delete(e),this.queuedEffectCount--,e.run()}}class yJ{constructor(t,e,n,r,s,o){this.scheduler=t,this.effectFn=e,this.creationZone=n,this.injector=s,this.watcher=function YW(i,t,e){const n=Object.create(ZW);e&&(n.consumerAllowSignalWrites=!0),n.fn=i,n.schedule=t;const r=l=>{n.cleanupFn=l};return n.ref={notify:()=>T1(n),run:()=>{if(null===n.fn)return;if(function UW(){return _f}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(n.dirty=!1,n.hasRun&&!Fx(n))return;n.hasRun=!0;const l=Px(n);try{n.cleanupFn(),n.cleanupFn=Bx,n.fn(r)}finally{kx(n,l)}},cleanup:()=>n.cleanupFn(),destroy:()=>function o(l){(function s(l){return null===l.fn&&null===l.schedule})(l)||(M1(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=Bx)}(n),[ks]:n},n.ref}(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}runEffect(t){try{this.effectFn(t)}catch(e){this.injector.get(fs,null,{optional:!0})?.handleError(e)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}function zb(i,t){Bo("NgSignals"),!t?.injector&&u_();const e=t?.injector??ee(ar),n=!0!==t?.manualCleanup?e.get(fu):null,r=new yJ(e.get(_J),i,typeof Zone>"u"?null:Zone.current,n,e,t?.allowSignalWrites??!1),s=e.get(lr,null,{optional:!0});return s&&8&s._lView[ut]?(s._lView[f_]??=[]).push(r.watcher.notify):r.watcher.notify(),r}let cN=null;function gl(){return cN}class TJ{}const Xt=new le("");let _S=(()=>{class i{historyGo(e){throw new Error("")}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:()=>ee(SJ),providedIn:"platform"})}return i})();const MJ=new le("");let SJ=(()=>{class i extends _S{constructor(){super(),this._doc=ee(Xt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return gl().getBaseHref(this._doc)}onPopState(e){const n=gl().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=gl().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,n,r){this._history.pushState(e,n,r)}replaceState(e,n,r){this._history.replaceState(e,n,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:()=>new i,providedIn:"platform"})}return i})();function bS(i,t){if(0==i.length)return t;if(0==t.length)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?i+t.substring(1):1==e?i+t:i+"/"+t}function dN(i){const t=i.match(/#|\?|$/),e=t&&t.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function ya(i){return i&&"?"!==i[0]?"?"+i:i}let Fc=(()=>{class i{historyGo(e){throw new Error("")}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:()=>ee(hN),providedIn:"root"})}return i})();const uN=new le("");let hN=(()=>{class i extends Fc{constructor(e,n){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??ee(Xt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return bS(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+ya(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,s){const o=this.prepareExternalUrl(r+ya(s));this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){const o=this.prepareExternalUrl(r+ya(s));this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(n){return new(n||i)(ue(_S),ue(uN,8))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),RJ=(()=>{class i extends Fc{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){const n=this._platformLocation.hash??"#";return n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=bS(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,s){let o=this.prepareExternalUrl(r+ya(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){let o=this.prepareExternalUrl(r+ya(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(n){return new(n||i)(ue(_S),ue(uN,8))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})(),$u=(()=>{class i{constructor(e){this._subject=new lt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const n=this._locationStrategy.getBaseHref();this._basePath=function AJ(i){if(new RegExp("^(https?:)?//").test(i)){const[,e]=i.split(/\/\/[^\/]+/);return e}return i}(dN(fN(n))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+ya(n))}normalize(e){return i.stripTrailingSlash(function EJ(i,t){if(!i||!t.startsWith(i))return t;const e=t.substring(i.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,fN(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._locationStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ya(n)),r)}replaceState(e,n="",r=null){this._locationStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ya(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}),()=>{const n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}static#e=this.normalizeQueryParams=ya;static#t=this.joinWithSlash=bS;static#i=this.stripTrailingSlash=dN;static#n=this.\u0275fac=function(n){return new(n||i)(ue(Fc))};static#r=this.\u0275prov=Re({token:i,factory:()=>function CJ(){return new $u(ue(Fc))}(),providedIn:"root"})}return i})();function fN(i){return i.replace(/\/index.html$/,"")}function wN(i,t){t=encodeURIComponent(t);for(const e of i.split(";")){const n=e.indexOf("="),[r,s]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}let MN=(()=>{class i{constructor(e){this._viewContainerRef=e,this.ngComponentOutlet=null,this._inputsUsed=new Map}_needToReCreateNgModuleInstance(e){return void 0!==e.ngComponentOutletNgModule||void 0!==e.ngComponentOutletNgModuleFactory}_needToReCreateComponentInstance(e){return void 0!==e.ngComponentOutlet||void 0!==e.ngComponentOutletContent||void 0!==e.ngComponentOutletInjector||this._needToReCreateNgModuleInstance(e)}ngOnChanges(e){if(this._needToReCreateComponentInstance(e)&&(this._viewContainerRef.clear(),this._inputsUsed.clear(),this._componentRef=void 0,this.ngComponentOutlet)){const n=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;this._needToReCreateNgModuleInstance(e)&&(this._moduleRef?.destroy(),this._moduleRef=this.ngComponentOutletNgModule?function J7(i,t){return new hM(i,t??null,[])}(this.ngComponentOutletNgModule,SN(n)):this.ngComponentOutletNgModuleFactory?this.ngComponentOutletNgModuleFactory.create(SN(n)):void 0),this._componentRef=this._viewContainerRef.createComponent(this.ngComponentOutlet,{injector:n,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent})}}ngDoCheck(){if(this._componentRef){if(this.ngComponentOutletInputs)for(const e of Object.keys(this.ngComponentOutletInputs))this._inputsUsed.set(e,!0);this._applyInputStateDiff(this._componentRef)}}ngOnDestroy(){this._moduleRef?.destroy()}_applyInputStateDiff(e){for(const[n,r]of this._inputsUsed)r?(e.setInput(n,this.ngComponentOutletInputs[n]),this._inputsUsed.set(n,!1)):(e.setInput(n,void 0),this._inputsUsed.delete(n))}static#e=this.\u0275fac=function(n){return new(n||i)(P(br))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInputs:"ngComponentOutletInputs",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},standalone:!0,features:[pr]})}return i})();function SN(i){return i.get(Sc).injector}class mee{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _l=(()=>{class i{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,s,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new mee(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===s?void 0:s);else if(null!==s){const a=n.get(s);n.move(a,o),RN(a,r)}});for(let r=0,s=n.length;r<s;r++){const a=n.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{RN(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}static#e=this.\u0275fac=function(n){return new(n||i)(P(br),P(Kr),P(mS))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return i})();function RN(i,t){i.context.$implicit=t.item}let ev=(()=>{class i{constructor(e,n){this._viewContainer=e,this._context=new pee,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){CN("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){CN("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}static#e=this.\u0275fac=function(n){return new(n||i)(P(br),P(Kr))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return i})();class pee{constructor(){this.$implicit=null,this.ngIf=null}}function CN(i,t){if(t&&!t.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${zn(t)}'.`)}class AS{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let tv=(()=>{class i{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const n=e===this._ngSwitch;return this._lastCasesMatched||=n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const n of this._defaultViews)n.enforceState(e)}}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275dir=Pe({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}return i})(),EN=(()=>{class i{constructor(e,n,r){this.ngSwitch=r,r._addCase(),this._view=new AS(e,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static#e=this.\u0275fac=function(n){return new(n||i)(P(br),P(Kr),P(tv,9))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}return i})(),DN=(()=>{class i{constructor(e,n,r){this._ngEl=e,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,n){const[r,s]=e.split("."),o=-1===r.indexOf("-")?void 0:ol.DashCase;null!=n?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${n}${s}`:n,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(e){e.forEachRemovedItem(n=>this._setStyle(n.key,null)),e.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),e.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt),P(Ob),P(ba))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return i})(),DS=(()=>{class i{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(this._shouldRecreateView(e)){const n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const r=this._createContextForwardProxy();this._viewRef=n.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,n,r)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,n,r),get:(e,n,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,n,r)}})}static#e=this.\u0275fac=function(n){return new(n||i)(P(br))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[pr]})}return i})();class vee{createSubscription(t,e){return lN(()=>t.subscribe({next:e,error:n=>{throw n}}))}dispose(t){lN(()=>t.unsubscribe())}}class yee{createSubscription(t,e){return t.then(e,n=>{throw n})}dispose(t){}}const xee=new yee,wee=new vee;let IS=(()=>{class i{constructor(e){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,n=>this._updateLatestValue(e,n))}_selectStrategy(e){if(Im(e))return xee;if(bO(e))return wee;throw function fo(i,t){return new te(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,n){e===this._obj&&(this._latestValue=n,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(n){return new(n||i)(P(lr,16))};static#t=this.\u0275pipe=Jn({name:"async",type:i,pure:!1,standalone:!0})}return i})(),qu=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({})}return i})();const PN="browser";function iv(i){return i===PN}function kN(i){return"server"===i}let Hee=(()=>{class i{static#e=this.\u0275prov=Re({token:i,providedIn:"root",factory:()=>iv(ee(oo))?new Gee(ee(Xt),window):new $ee})}return i})();class Gee{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){const e=function Wee(i,t){const e=i.getElementById(t)||i.getElementsByName(t)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&"function"==typeof i.body.attachShadow){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}}class $ee{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}}class FN{}class yte extends TJ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class LS extends yte{static makeCurrent(){!function wJ(i){cN??=i}(new LS)}onAndCancel(t,e,n){return t.addEventListener(e,n),()=>{t.removeEventListener(e,n)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function xte(){return Nm=Nm||document.querySelector("base"),Nm?Nm.getAttribute("href"):null}();return null==e?null:function wte(i){return new URL(i,document.baseURI).pathname}(e)}resetBaseElement(){Nm=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return wN(document.cookie,t)}}let Nm=null,Mte=(()=>{class i{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})();const OS=new le("");let HN=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){let n=this._eventNameToPlugin.get(e);if(n)return n;if(n=this._plugins.find(s=>s.supports(e)),!n)throw new te(5101,!1);return this._eventNameToPlugin.set(e,n),n}static#e=this.\u0275fac=function(n){return new(n||i)(ue(OS),ue(it))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})();class GN{constructor(t){this._doc=t}}const NS="ng-app-id";let WN=(()=>{class i{constructor(e,n,r,s={}){this.doc=e,this.appId=n,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=kN(s),this.resetHostNodes()}addStyles(e){for(const n of e)1===this.changeUsageCount(n,1)&&this.onStyleAdded(n)}removeStyles(e){for(const n of e)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(n=>n.remove()),e.clear());for(const n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const n of this.getAllStyles())this.addStyleToHost(e,n)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const n of this.hostNodes)this.addStyleToHost(n,e)}onStyleRemoved(e){const n=this.styleRef;n.get(e)?.elements?.forEach(r=>r.remove()),n.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${NS}="${this.appId}"]`);if(e?.length){const n=new Map;return e.forEach(r=>{null!=r.textContent&&n.set(r.textContent,r)}),n}return null}changeUsageCount(e,n){const r=this.styleRef;if(r.has(e)){const s=r.get(e);return s.usage+=n,s.usage}return r.set(e,{usage:n,elements:[]}),n}getStyleElement(e,n){const r=this.styleNodesInDOM,s=r?.get(n);if(s?.parentNode===e)return r.delete(n),s.removeAttribute(NS),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=n,this.platformIsServer&&o.setAttribute(NS,this.appId),e.appendChild(o),o}}addStyleToHost(e,n){const r=this.getStyleElement(e,n),s=this.styleRef,o=s.get(n)?.elements;o?o.push(r):s.set(n,{elements:[r],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static#e=this.\u0275fac=function(n){return new(n||i)(ue(Xt),ue(A_),ue(eT,8),ue(oo))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})();const jS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},BS=/%COMP%/g,Ete=new le("",{providedIn:"root",factory:()=>!0});function XN(i,t){return t.map(e=>e.replace(BS,i))}let US=(()=>{class i{constructor(e,n,r,s,o,a,l,c=null){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=kN(a),this.defaultRenderer=new VS(e,o,l,this.platformIsServer)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===eo.ShadowDom&&(n={...n,encapsulation:eo.Emulated});const r=this.getOrCreateRenderer(e,n);return r instanceof YN?r.applyToHost(e):r instanceof zS&&r.applyStyles(),r}getOrCreateRenderer(e,n){const r=this.rendererByCompId;let s=r.get(n.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,u=this.platformIsServer;switch(n.encapsulation){case eo.Emulated:s=new YN(l,c,n,this.appId,d,o,a,u);break;case eo.ShadowDom:return new Pte(l,c,e,n,o,a,this.nonce,u);default:s=new zS(l,c,n,d,o,a,u)}r.set(n.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(n){return new(n||i)(ue(HN),ue(WN),ue(A_),ue(Ete),ue(Xt),ue(oo),ue(it),ue(eT))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})();class VS{constructor(t,e,n,r){this.eventManager=t,this.doc=e,this.ngZone=n,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(jS[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(qN(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(qN(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?this.doc.querySelector(t):t;if(!n)throw new te(-5104,!1);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const s=jS[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=jS[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(ol.DashCase|ol.Important)?t.style.setProperty(e,n,r&ol.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&ol.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){null!=t&&(t[e]=n)}setValue(t,e){t.nodeValue=e}listen(t,e,n){if("string"==typeof t&&!(t=gl().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(n))}decoratePreventDefault(t){return e=>{if("__ngUnwrap__"===e)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))&&e.preventDefault()}}}function qN(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class Pte extends VS{constructor(t,e,n,r,s,o,a,l){super(t,s,o,l),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=XN(r.id,r.styles);for(const d of c){const u=document.createElement("style");a&&u.setAttribute("nonce",a),u.textContent=d,this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class zS extends VS{constructor(t,e,n,r,s,o,a,l){super(t,s,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?XN(l,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class YN extends zS{constructor(t,e,n,r,s,o,a,l){const c=r+"-"+n.id;super(t,e,n,s,o,a,l,c),this.contentAttr=function Ate(i){return"_ngcontent-%COMP%".replace(BS,i)}(c),this.hostAttr=function Dte(i){return"_nghost-%COMP%".replace(BS,i)}(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}let kte=(()=>{class i extends GN{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}static#e=this.\u0275fac=function(n){return new(n||i)(ue(Xt))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})();const ZN=["alt","control","meta","shift"],Fte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Lte={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let Ote=(()=>{class i extends GN{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,n,r){const s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>gl().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let o="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),o="code."),ZN.forEach(c=>{const d=n.indexOf(c);d>-1&&(n.splice(d,1),o+=c+".")}),o+=s,0!=n.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(e,n){let r=Fte[e.key]||e.key,s="";return n.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),ZN.forEach(o=>{o!==r&&(0,Lte[o])(e)&&(s+=o+".")}),s+=r,s===n)}static eventCallback(e,n,r){return s=>{i.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}static#e=this.\u0275fac=function(n){return new(n||i)(ue(Xt))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})();const Ute=EO(BQ,"browser",[{provide:oo,useValue:PN},{provide:kP,useValue:function Nte(){LS.makeCurrent()},multi:!0},{provide:Xt,useFactory:function Bte(){return function N$(i){Jw=i}(document),document},deps:[]}]),Vte=new le(""),JN=[{provide:Ib,useClass:class Tte{addToWindow(t){wi.getAngularTestability=(n,r=!0)=>{const s=t.findTestabilityInTree(n,r);if(null==s)throw new te(5103,!1);return s},wi.getAllAngularTestabilities=()=>t.getAllTestabilities(),wi.getAllAngularRootElements=()=>t.getAllRootElements(),wi.frameworkStabilizers||(wi.frameworkStabilizers=[]),wi.frameworkStabilizers.push(n=>{const r=wi.getAllAngularTestabilities();let s=r.length;const o=function(){s--,0==s&&n()};r.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(t,e,n){return null==e?null:t.getTestability(e)??(n?gl().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:_O,useClass:tS,deps:[it,iS,Ib]},{provide:tS,useClass:tS,deps:[it,iS,Ib]}],ej=[{provide:gw,useValue:"root"},{provide:fs,useFactory:function jte(){return new fs},deps:[]},{provide:OS,useClass:kte,multi:!0,deps:[Xt,it,oo]},{provide:OS,useClass:Ote,multi:!0,deps:[Xt]},US,WN,HN,{provide:YT,useExisting:US},{provide:FN,useClass:Mte,deps:[]},[]];let tj=(()=>{class i{constructor(e){}static withServerTransition(e){return{ngModule:i,providers:[{provide:A_,useValue:e.appId}]}}static#e=this.\u0275fac=function(n){return new(n||i)(ue(Vte,12))};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({providers:[...ej,...JN],imports:[qu,UQ]})}return i})(),zte=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static#e=this.\u0275fac=function(n){return new(n||i)(ue(Xt))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ov=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:function(n){let r=null;return r=n?new(n||i):ue($te),r},providedIn:"root"})}return i})(),$te=(()=>{class i extends ov{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case tr.NONE:return n;case tr.HTML:return No(n,"HTML")?ms(n):QP(this._doc,String(n)).toString();case tr.STYLE:return No(n,"Style")?ms(n):n;case tr.SCRIPT:if(No(n,"Script"))return ms(n);throw new te(5200,!1);case tr.URL:return No(n,"URL")?ms(n):j_(String(n));case tr.RESOURCE_URL:if(No(n,"ResourceURL"))return ms(n);throw new te(5201,!1);default:throw new te(5202,!1)}}bypassSecurityTrustHtml(e){return function rX(i){return new Q$(i)}(e)}bypassSecurityTrustStyle(e){return function sX(i){return new J$(i)}(e)}bypassSecurityTrustScript(e){return function oX(i){return new eX(i)}(e)}bypassSecurityTrustUrl(e){return function aX(i){return new tX(i)}(e)}bypassSecurityTrustResourceUrl(e){return function lX(i){return new iX(i)}(e)}static#e=this.\u0275fac=function(n){return new(n||i)(ue(Xt))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function bl(i){return this instanceof bl?(this.v=i,this):new bl(i)}function cj(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=i[Symbol.asyncIterator];return t?t.call(i):(i=function $S(i){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=i[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=i[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const XS=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function dj(i){return pi(i?.then)}function uj(i){return pi(i[Xx])}function hj(i){return Symbol.asyncIterator&&pi(i?.[Symbol.asyncIterator])}function fj(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const mj=function mie(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function pj(i){return pi(i?.[mj])}function gj(i){return function lj(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(i,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){n[h]&&(r[h]=function(f){return new Promise(function(m,_){s.push([h,f,m,_])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof bl?Promise.resolve(h.value.v).then(c,d):u(s[0][2],h)}(n[h](f))}catch(m){u(s[0][3],m)}}function c(h){a("next",h)}function d(h){a("throw",h)}function u(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const e=i.getReader();try{for(;;){const{value:n,done:r}=yield bl(e.read());if(r)return yield bl(void 0);yield yield bl(n)}}finally{e.releaseLock()}})}function _j(i){return pi(i?.getReader)}function Nr(i){if(i instanceof Pi)return i;if(null!=i){if(uj(i))return function pie(i){return new Pi(t=>{const e=i[Xx]();if(pi(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(XS(i))return function gie(i){return new Pi(t=>{for(let e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()})}(i);if(dj(i))return function _ie(i){return new Pi(t=>{i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,k1)})}(i);if(hj(i))return bj(i);if(pj(i))return function bie(i){return new Pi(t=>{for(const e of i)if(t.next(e),t.closed)return;t.complete()})}(i);if(_j(i))return function vie(i){return bj(gj(i))}(i)}throw fj(i)}function bj(i){return new Pi(t=>{(function yie(i,t){var e,n,r,s;return function oj(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=cj(i);!(n=yield e.next()).done;)if(t.next(n.value),t.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})})(i,t).catch(e=>t.error(e))})}function Ta(i,t,e,n=0,r=!1){const s=t.schedule(function(){e(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function vj(i,t=0){return _n((e,n)=>{e.subscribe(tn(n,r=>Ta(n,i,()=>n.next(r),t),()=>Ta(n,i,()=>n.complete(),t),r=>Ta(n,i,()=>n.error(r),t)))})}function yj(i,t=0){return _n((e,n)=>{n.add(i.schedule(()=>e.subscribe(n),t))})}function xj(i,t){if(!i)throw new Error("Iterable cannot be null");return new Pi(e=>{Ta(e,t,()=>{const n=i[Symbol.asyncIterator]();Ta(e,t,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function hn(i,t){return t?function Rie(i,t){if(null!=i){if(uj(i))return function xie(i,t){return Nr(i).pipe(yj(t),vj(t))}(i,t);if(XS(i))return function Tie(i,t){return new Pi(e=>{let n=0;return t.schedule(function(){n===i.length?e.complete():(e.next(i[n++]),e.closed||this.schedule())})})}(i,t);if(dj(i))return function wie(i,t){return Nr(i).pipe(yj(t),vj(t))}(i,t);if(hj(i))return xj(i,t);if(pj(i))return function Mie(i,t){return new Pi(e=>{let n;return Ta(e,t,()=>{n=i[mj](),Ta(e,t,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(o){return void e.error(o)}s?e.complete():e.next(r)},0,!0)}),()=>pi(n?.return)&&n.return()})}(i,t);if(_j(i))return function Sie(i,t){return xj(gj(i),t)}(i,t)}throw fj(i)}(i,t):Nr(i)}function wj(i){return i&&pi(i.schedule)}function qS(i){return i[i.length-1]}function Tj(i){return pi(qS(i))?i.pop():void 0}function Bm(i){return wj(qS(i))?i.pop():void 0}function ct(...i){return hn(i,Bm(i))}const{isArray:Eie}=Array,{getPrototypeOf:Aie,prototype:Die,keys:Iie}=Object;function Mj(i){if(1===i.length){const t=i[0];if(Eie(t))return{args:t,keys:null};if(function Pie(i){return i&&"object"==typeof i&&Aie(i)===Die}(t)){const e=Iie(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:i,keys:null}}const{isArray:kie}=Array;function YS(i){return Ct(t=>function Fie(i,t){return kie(t)?i(...t):i(t)}(i,t))}function Sj(i,t){return i.reduce((e,n,r)=>(e[n]=t[r],e),{})}function av(...i){const t=Bm(i),e=Tj(i),{args:n,keys:r}=Mj(i);if(0===n.length)return hn([],t);const s=new Pi(function Lie(i,t,e=el){return n=>{Rj(t,()=>{const{length:r}=i,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)Rj(t,()=>{const c=hn(i[l],t);let d=!1;c.subscribe(tn(n,u=>{s[l]=u,d||(d=!0,a--),a||n.next(e(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,t,r?o=>Sj(r,o):el));return e?s.pipe(YS(e)):s}function Rj(i,t,e){i?Ta(e,i,t):t()}const Um=Ux(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});function cr(i,t,e=1/0){return pi(t)?cr((n,r)=>Ct((s,o)=>t(n,s,r,o))(Nr(i(n,r))),e):("number"==typeof t&&(e=t),_n((n,r)=>function Oie(i,t,e,n,r,s,o,a){const l=[];let c=0,d=0,u=!1;const h=()=>{u&&!l.length&&!c&&t.complete()},f=_=>c<n?m(_):l.push(_),m=_=>{s&&t.next(_),c++;let p=!1;Nr(e(_,d++)).subscribe(tn(t,g=>{r?.(g),s?f(g):t.next(g)},()=>{p=!0},void 0,()=>{if(p)try{for(c--;l.length&&c<n;){const g=l.shift();o?Ta(t,o,()=>m(g)):m(g)}h()}catch(g){t.error(g)}}))};return i.subscribe(tn(t,f,()=>{u=!0,h()})),()=>{a?.()}}(n,r,i,e)))}function Yu(i=1/0){return cr(el,i)}function lv(...i){return function Nie(){return Yu(1)}()(hn(i,Bm(i)))}function Cj(i){return new Pi(t=>{Nr(i()).subscribe(t)})}function Ho(i,t){const e=pi(i)?i:()=>i,n=r=>r.error(e());return new Pi(t?r=>t.schedule(n,0,r):n)}const vr=new Pi(i=>i.complete());function ZS(){return _n((i,t)=>{let e=null;i._refCount++;const n=tn(t,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const r=i._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});i.subscribe(n),n.closed||(e=i.connect())})}class Ej extends Pi{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,N1(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Oi;const e=this.getSubject();t.add(this.source.subscribe(tn(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Oi.EMPTY)}return t}refCount(){return ZS()(this)}}function Jr(i,t){return _n((e,n)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&n.complete();e.subscribe(tn(n,l=>{r?.unsubscribe();let c=0;const d=s++;Nr(i(l,d)).subscribe(r=tn(n,u=>n.next(t?t(l,u,d,c++):u),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function vs(i){return i<=0?()=>vr:_n((t,e)=>{let n=0;t.subscribe(tn(e,r=>{++n<=i&&(e.next(r),i<=n&&e.complete())}))})}function Lc(...i){const t=Bm(i);return _n((e,n)=>{(t?lv(i,e,t):lv(i,e)).subscribe(n)})}function sn(i,t){return _n((e,n)=>{let r=0;e.subscribe(tn(n,s=>i.call(t,s,r++)&&n.next(s)))})}function cv(i){return _n((t,e)=>{let n=!1;t.subscribe(tn(e,r=>{n=!0,e.next(r)},()=>{n||e.next(i),e.complete()}))})}function Aj(i=Bie){return _n((t,e)=>{let n=!1;t.subscribe(tn(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(i())))})}function Bie(){return new Um}function Oc(i,t){const e=arguments.length>=2;return n=>n.pipe(i?sn((r,s)=>i(r,s,n)):el,vs(1),e?cv(t):Aj(()=>new Um))}function Zu(i,t){return pi(t)?cr(i,t,1):cr(i,1)}function Mn(i,t,e){const n=pi(i)||t||e?{next:i,error:t,complete:e}:i;return n?_n((r,s)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let a=!0;r.subscribe(tn(s,l=>{var c;null===(c=n.next)||void 0===c||c.call(n,l),s.next(l)},()=>{var l;a=!1,null===(l=n.complete)||void 0===l||l.call(n),s.complete()},l=>{var c;a=!1,null===(c=n.error)||void 0===c||c.call(n,l),s.error(l)},()=>{var l,c;a&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(c=n.finalize)||void 0===c||c.call(n)}))}):el}function Ma(i){return _n((t,e)=>{let s,n=null,r=!1;n=t.subscribe(tn(e,void 0,void 0,o=>{s=Nr(i(o,Ma(i)(t))),n?(n.unsubscribe(),n=null,s.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(e))})}function KS(i){return i<=0?()=>vr:_n((t,e)=>{let n=[];t.subscribe(tn(e,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function QS(i){return Ct(()=>i)}function Ku(i){return _n((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}function Zi(i){return _n((t,e)=>{Nr(i).subscribe(tn(e,()=>e.complete(),zx)),!e.closed&&t.subscribe(e)})}const Ht="primary",Vm=Symbol("RouteTitle");class Hie{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Qu(i){return new Hie(i)}function Gie(i,t,e){const n=e.path.split("/");if(n.length>i.length||"full"===e.pathMatch&&(t.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const o=n[s],a=i[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function Go(i,t){const e=i?JS(i):void 0,n=t?JS(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!Dj(i[r],t[r]))return!1;return!0}function JS(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function Dj(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;const e=[...i].sort(),n=[...t].sort();return e.every((r,s)=>n[s]===r)}return i===t}function Ij(i){return i.length>0?i[i.length-1]:null}function vl(i){return function sj(i){return!!i&&(i instanceof Pi||pi(i.lift)&&pi(i.subscribe))}(i)?i:Im(i)?hn(Promise.resolve(i)):ct(i)}const $ie={exact:function Fj(i,t,e){if(!Nc(i.segments,t.segments)||!dv(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children)if(!i.children[n]||!Fj(i.children[n],t.children[n],e))return!1;return!0},subset:Lj},Pj={exact:function Xie(i,t){return Go(i,t)},subset:function qie(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>Dj(i[e],t[e]))},ignored:()=>!0};function kj(i,t,e){return $ie[e.paths](i.root,t.root,e.matrixParams)&&Pj[e.queryParams](i.queryParams,t.queryParams)&&!("exact"===e.fragment&&i.fragment!==t.fragment)}function Lj(i,t,e){return Oj(i,t,t.segments,e)}function Oj(i,t,e,n){if(i.segments.length>e.length){const r=i.segments.slice(0,e.length);return!(!Nc(r,e)||t.hasChildren()||!dv(r,e,n))}if(i.segments.length===e.length){if(!Nc(i.segments,e)||!dv(i.segments,e,n))return!1;for(const r in t.children)if(!i.children[r]||!Lj(i.children[r],t.children[r],n))return!1;return!0}{const r=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!!(Nc(i.segments,r)&&dv(i.segments,r,n)&&i.children[Ht])&&Oj(i.children[Ht],t,s,n)}}function dv(i,t,e){return t.every((n,r)=>Pj[e](i[r].parameters,n.parameters))}class Ju{constructor(t=new Ii([],{}),e={},n=null){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap??=Qu(this.queryParams),this._queryParamMap}toString(){return Kie.serialize(this)}}class Ii{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return uv(this)}}class zm{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Qu(this.parameters),this._parameterMap}toString(){return Bj(this)}}function Nc(i,t){return i.length===t.length&&i.every((e,n)=>e.path===t[n].path)}let eh=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:()=>new eR,providedIn:"root"})}return i})();class eR{parse(t){const e=new lne(t);return new Ju(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Hm(t.root,!0)}`,n=function ene(i){const t=Object.entries(i).map(([e,n])=>Array.isArray(n)?n.map(r=>`${hv(e)}=${hv(r)}`).join("&"):`${hv(e)}=${hv(n)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${n}${"string"==typeof t.fragment?`#${function Qie(i){return encodeURI(i)}(t.fragment)}`:""}`}}const Kie=new eR;function uv(i){return i.segments.map(t=>Bj(t)).join("/")}function Hm(i,t){if(!i.hasChildren())return uv(i);if(t){const e=i.children[Ht]?Hm(i.children[Ht],!1):"",n=[];return Object.entries(i.children).forEach(([r,s])=>{r!==Ht&&n.push(`${r}:${Hm(s,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function Zie(i,t){let e=[];return Object.entries(i.children).forEach(([n,r])=>{n===Ht&&(e=e.concat(t(r,n)))}),Object.entries(i.children).forEach(([n,r])=>{n!==Ht&&(e=e.concat(t(r,n)))}),e}(i,(n,r)=>r===Ht?[Hm(i.children[Ht],!1)]:[`${r}:${Hm(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[Ht]?`${uv(i)}/${e[0]}`:`${uv(i)}/(${e.join("//")})`}}function Nj(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hv(i){return Nj(i).replace(/%3B/gi,";")}function tR(i){return Nj(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fv(i){return decodeURIComponent(i)}function jj(i){return fv(i.replace(/\+/g,"%20"))}function Bj(i){return`${tR(i.path)}${function Jie(i){return Object.entries(i).map(([t,e])=>`;${tR(t)}=${tR(e)}`).join("")}(i.parameters)}`}const tne=/^[^\/()?;#]+/;function iR(i){const t=i.match(tne);return t?t[0]:""}const ine=/^[^\/()?;=#]+/,rne=/^[^=?&#]+/,one=/^[^&#]+/;class lne{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ii([],{}):new Ii([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Ht]=new Ii(t,e)),n}parseSegment(){const t=iR(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new te(4009,!1);return this.capture(t),new zm(fv(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=function nne(i){const t=i.match(ine);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=iR(this.remaining);r&&(n=r,this.capture(n))}t[fv(e)]=fv(n)}parseQueryParam(t){const e=function sne(i){const t=i.match(rne);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const o=function ane(i){const t=i.match(one);return t?t[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=jj(e),s=jj(n);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=iR(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new te(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Ht);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[Ht]:new Ii([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new te(4011,!1)}}function Uj(i){return i.segments.length>0?new Ii([],{[Ht]:i}):i}function Vj(i){const t={};for(const[n,r]of Object.entries(i.children)){const s=Vj(r);if(n===Ht&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[n]=s)}return function cne(i){if(1===i.numberOfChildren&&i.children[Ht]){const t=i.children[Ht];return new Ii(i.segments.concat(t.segments),t.children)}return i}(new Ii(i.segments,t))}function th(i){return i instanceof Ju}function zj(i){let t;const r=Uj(function e(s){const o={};for(const l of s.children){const c=e(l);o[l.outlet]=c}const a=new Ii(s.url,o);return s===i&&(t=a),a}(i.root));return t??r}function Hj(i,t,e,n){let r=i;for(;r.parent;)r=r.parent;if(0===t.length)return nR(r,r,r,e,n);const s=function une(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new Wj(!0,0,i);let t=0,e=!1;const n=i.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new Wj(e,t,n)}(t);if(s.toRoot())return nR(r,r,new Ii([],{}),e,n);const o=function hne(i,t,e){if(i.isAbsolute)return new pv(t,!0,0);if(!e)return new pv(t,!1,NaN);if(null===e.parent)return new pv(e,!0,0);const n=mv(i.commands[0])?0:1;return function fne(i,t,e){let n=i,r=t,s=e;for(;s>r;){if(s-=r,n=n.parent,!n)throw new te(4005,!1);r=n.segments.length}return new pv(n,!1,r-s)}(e,e.segments.length-1+n,i.numberOfDoubleDots)}(s,r,i),a=o.processChildren?Wm(o.segmentGroup,o.index,s.commands):$j(o.segmentGroup,o.index,s.commands);return nR(r,o.segmentGroup,a,e,n)}function mv(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function Gm(i){return"object"==typeof i&&null!=i&&i.outlets}function nR(i,t,e,n,r){let o,s={};n&&Object.entries(n).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`}),o=i===t?e:Gj(i,t,e);const a=Uj(Vj(o));return new Ju(a,s,r)}function Gj(i,t,e){const n={};return Object.entries(i.children).forEach(([r,s])=>{n[r]=s===t?e:Gj(s,t,e)}),new Ii(i.segments,n)}class Wj{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&mv(n[0]))throw new te(4003,!1);const r=n.find(Gm);if(r&&r!==Ij(n))throw new te(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class pv{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function $j(i,t,e){if(i??=new Ii([],{}),0===i.segments.length&&i.hasChildren())return Wm(i,t,e);const n=function pne(i,t,e){let n=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return s;const o=i.segments[r],a=e[n];if(Gm(a))break;const l=`${a}`,c=n<e.length-1?e[n+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!qj(l,c,o))return s;n+=2}else{if(!qj(l,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new Ii(i.segments.slice(0,n.pathIndex),{});return s.children[Ht]=new Ii(i.segments.slice(n.pathIndex),i.children),Wm(s,0,r)}return n.match&&0===r.length?new Ii(i.segments,{}):n.match&&!i.hasChildren()?rR(i,t,e):n.match?Wm(i,0,r):rR(i,t,e)}function Wm(i,t,e){if(0===e.length)return new Ii(i.segments,{});{const n=function mne(i){return Gm(i[0])?i[0].outlets:{[Ht]:i}}(e),r={};if(Object.keys(n).some(s=>s!==Ht)&&i.children[Ht]&&1===i.numberOfChildren&&0===i.children[Ht].segments.length){const s=Wm(i.children[Ht],t,e);return new Ii(i.segments,s.children)}return Object.entries(n).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=$j(i.children[s],t,o))}),Object.entries(i.children).forEach(([s,o])=>{void 0===n[s]&&(r[s]=o)}),new Ii(i.segments,r)}}function rR(i,t,e){const n=i.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(Gm(s)){const l=gne(s.outlets);return new Ii(n,l)}if(0===r&&mv(e[0])){n.push(new zm(i.segments[t].path,Xj(e[0]))),r++;continue}const o=Gm(s)?s.outlets[Ht]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&mv(a)?(n.push(new zm(o,Xj(a))),r+=2):(n.push(new zm(o,{})),r++)}return new Ii(n,{})}function gne(i){const t={};return Object.entries(i).forEach(([e,n])=>{"string"==typeof n&&(n=[n]),null!==n&&(t[e]=rR(new Ii([],{}),0,n))}),t}function Xj(i){const t={};return Object.entries(i).forEach(([e,n])=>t[e]=`${n}`),t}function qj(i,t,e){return i==e.path&&Go(t,e.parameters)}const $m="imperative";var li=function(i){return i[i.NavigationStart=0]="NavigationStart",i[i.NavigationEnd=1]="NavigationEnd",i[i.NavigationCancel=2]="NavigationCancel",i[i.NavigationError=3]="NavigationError",i[i.RoutesRecognized=4]="RoutesRecognized",i[i.ResolveStart=5]="ResolveStart",i[i.ResolveEnd=6]="ResolveEnd",i[i.GuardsCheckStart=7]="GuardsCheckStart",i[i.GuardsCheckEnd=8]="GuardsCheckEnd",i[i.RouteConfigLoadStart=9]="RouteConfigLoadStart",i[i.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",i[i.ChildActivationStart=11]="ChildActivationStart",i[i.ChildActivationEnd=12]="ChildActivationEnd",i[i.ActivationStart=13]="ActivationStart",i[i.ActivationEnd=14]="ActivationEnd",i[i.Scroll=15]="Scroll",i[i.NavigationSkipped=16]="NavigationSkipped",i}(li||{});class Wo{constructor(t,e){this.id=t,this.url=e}}class gv extends Wo{constructor(t,e,n="imperative",r=null){super(t,e),this.type=li.NavigationStart,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Sa extends Wo{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=li.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var ys=function(i){return i[i.Redirect=0]="Redirect",i[i.SupersededByNewNavigation=1]="SupersededByNewNavigation",i[i.NoDataFromResolver=2]="NoDataFromResolver",i[i.GuardRejected=3]="GuardRejected",i}(ys||{}),_v=function(i){return i[i.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",i[i.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",i}(_v||{});class ih extends Wo{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=li.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class nh extends Wo{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=li.NavigationSkipped}}class bv extends Wo{constructor(t,e,n,r){super(t,e),this.error=n,this.target=r,this.type=li.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Yj extends Wo{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=li.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _ne extends Wo{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=li.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bne extends Wo{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=li.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class vne extends Wo{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=li.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yne extends Wo{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=li.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xne{constructor(t){this.route=t,this.type=li.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wne{constructor(t){this.route=t,this.type=li.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Tne{constructor(t){this.snapshot=t,this.type=li.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mne{constructor(t){this.snapshot=t,this.type=li.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sne{constructor(t){this.snapshot=t,this.type=li.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rne{constructor(t){this.snapshot=t,this.type=li.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zj{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n,this.type=li.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class sR{}class oR{constructor(t){this.url=t}}class Cne{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Xm,this.attachRef=null}}let Xm=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new Cne,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class Kj{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=aR(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){const e=aR(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=lR(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return lR(t,this._root).map(e=>e.value)}}function aR(i,t){if(i===t.value)return t;for(const e of t.children){const n=aR(i,e);if(n)return n}return null}function lR(i,t){if(i===t.value)return[t];for(const e of t.children){const n=lR(i,e);if(n.length)return n.unshift(t),n}return[]}class mo{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function rh(i){const t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}class Qj extends Kj{constructor(t,e){super(t),this.snapshot=e,uR(this,t)}toString(){return this.snapshot.toString()}}function Jj(i){const t=function Ene(i){const s=new dR([],{},{},"",{},Ht,i,null,{});return new eB("",new mo(s,[]))}(i),e=new Wr([new zm("",{})]),n=new Wr({}),r=new Wr({}),s=new Wr({}),o=new Wr(""),a=new jc(e,n,s,o,r,Ht,i,t.root);return a.snapshot=t.root,new Qj(new mo(a,[]),t)}class jc{constructor(t,e,n,r,s,o,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ct(c=>c[Vm]))??ct(void 0),this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ct(t=>Qu(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ct(t=>Qu(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function cR(i,t,e="emptyOnly"){let n;const{routeConfig:r}=i;return n=null===t||"always"!==e&&""!==r?.path&&(t.component||t.routeConfig?.loadComponent)?{params:{...i.params},data:{...i.data},resolve:{...i.data,...i._resolvedData??{}}}:{params:{...t.params,...i.params},data:{...t.data,...i.data},resolve:{...i.data,...t.data,...r?.data,...i._resolvedData}},r&&iB(r)&&(n.resolve[Vm]=r.title),n}class dR{get title(){return this.data?.[Vm]}constructor(t,e,n,r,s,o,a,l,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qu(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qu(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class eB extends Kj{constructor(t,e){super(e),this.url=t,uR(this,e)}toString(){return tB(this._root)}}function uR(i,t){t.value._routerState=i,t.children.forEach(e=>uR(i,e))}function tB(i){const t=i.children.length>0?` { ${i.children.map(tB).join(", ")} } `:"";return`${i.value}${t}`}function hR(i){if(i.snapshot){const t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,Go(t.queryParams,e.queryParams)||i.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&i.fragmentSubject.next(e.fragment),Go(t.params,e.params)||i.paramsSubject.next(e.params),function Wie(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!Go(i[e],t[e]))return!1;return!0}(t.url,e.url)||i.urlSubject.next(e.url),Go(t.data,e.data)||i.dataSubject.next(e.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function fR(i,t){const e=Go(i.params,t.params)&&function Yie(i,t){return Nc(i,t)&&i.every((e,n)=>Go(e.parameters,t[n].parameters))}(i.url,t.url);return e&&!(!i.parent!=!t.parent)&&(!i.parent||fR(i.parent,t.parent))}function iB(i){return"string"==typeof i.title||null===i.title}let mR=(()=>{class i{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ht,this.activateEvents=new lt,this.deactivateEvents=new lt,this.attachEvents=new lt,this.detachEvents=new lt,this.parentContexts=ee(Xm),this.location=ee(br),this.changeDetector=ee(lr),this.environmentInjector=ee(Ir),this.inputBinder=ee(vv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:n,previousValue:r}=e.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new te(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new te(4013,!1);this._activatedRoute=e;const r=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new pR(e,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:n??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275dir=Pe({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[pr]})}return i})();class pR{__ngOutletInjector(t){return new pR(this.route,this.childContexts,t)}constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===jc?this.route:t===Xm?this.childContexts:this.parent.get(t,e)}}const vv=new le("");let nB=(()=>{class i{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:n}=e,r=av([n.queryParams,n.params,n.data]).pipe(Jr(([s,o,a],l)=>(a={...s,...o,...a},0===l?ct(a):Promise.resolve(a)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==n||null===n.component)return void this.unsubscribeFromRouteData(e);const o=function xJ(i){const t=Zt(i);if(!t)return null;const e=new cm(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}(n.component);if(o)for(const{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,r)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})();function qm(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=t.value;const r=function Dne(i,t,e){return t.children.map(n=>{for(const r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return qm(i,n,r);return qm(i,n)})}(i,t,e);return new mo(n,r)}{if(i.shouldAttach(t.value)){const s=i.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>qm(i,a)),o}}const n=function Ine(i){return new jc(new Wr(i.url),new Wr(i.params),new Wr(i.queryParams),new Wr(i.fragment),new Wr(i.data),i.outlet,i.component,i)}(t.value),r=t.children.map(s=>qm(i,s));return new mo(n,r)}}const rB="ngNavigationCancelingError";function sB(i,t){const{redirectTo:e,navigationBehaviorOptions:n}=th(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=oB(!1,ys.Redirect);return r.url=e,r.navigationBehaviorOptions=n,r}function oB(i,t){const e=new Error(`NavigationCancelingError: ${i||""}`);return e[rB]=!0,e.cancellationCode=t,e}function aB(i){return!!i&&i[rB]}let lB=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["ng-component"]],standalone:!0,features:[rn],decls:1,vars:0,template:function(n,r){1&n&&ve(0,"router-outlet")},dependencies:[mR],encapsulation:2})}return i})();function gR(i){const t=i.children&&i.children.map(gR),e=t?{...i,children:t}:{...i};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Ht&&(e.component=lB),e}function $o(i){return i.outlet||Ht}function Ym(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class Bne{constructor(t,e,n,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),hR(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=rh(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=rh(t);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(n&&n.outlet){const o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=rh(t);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(t,e,n){const r=rh(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new Rne(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Mne(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(hR(r),r===s)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),hR(a.route.value),this.activateChildRoutes(t,null,o.children)}else{const a=Ym(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,n)}}class cB{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class yv{constructor(t,e){this.component=t,this.route=e}}function Une(i,t,e){const n=i._root;return Zm(n,t?t._root:null,e,[n.value])}function sh(i,t){const e=Symbol(),n=t.get(i,e);return n===e?"function"!=typeof i||function p8(i){return null!==Qg(i)}(i)?t.get(i):i:n}function Zm(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=rh(t);return i.children.forEach(o=>{(function zne(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,o=t?t.value:null,a=e?e.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Hne(i,t,e){if("function"==typeof e)return e(i,t);switch(e){case"pathParamsChange":return!Nc(i.url,t.url);case"pathParamsOrQueryParamsChange":return!Nc(i.url,t.url)||!Go(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fR(i,t)||!Go(i.queryParams,t.queryParams);default:return!fR(i,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new cB(n)):(s.data=o.data,s._resolvedData=o._resolvedData),Zm(i,t,s.component?a?a.children:null:e,n,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new yv(a.outlet.component,o))}else o&&Km(t,a,r),r.canActivateChecks.push(new cB(n)),Zm(i,null,s.component?a?a.children:null:e,n,r)})(o,s[o.value.outlet],e,n.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Km(a,e.getContext(o),r)),r}function Km(i,t,e){const n=rh(i),r=i.value;Object.entries(n).forEach(([s,o])=>{Km(o,r.component?t?t.children.getContext(s):null:t,e)}),e.canDeactivateChecks.push(new yv(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Qm(i){return"function"==typeof i}function dB(i){return i instanceof Um||"EmptyError"===i?.name}const xv=Symbol("INITIAL_VALUE");function oh(){return Jr(i=>av(i.map(t=>t.pipe(vs(1),Lc(xv)))).pipe(Ct(t=>{for(const e of t)if(!0!==e){if(e===xv)return xv;if(!1===e||e instanceof Ju)return e}return!0}),sn(t=>t!==xv),vs(1)))}function uB(i){return function s8(...i){return F1(i)}(Mn(t=>{if(th(t))throw sB(0,t)}),Ct(t=>!0===t))}class _R{constructor(t){this.segmentGroup=t||null}}class bR extends Error{constructor(t){super(),this.urlTree=t}}function ah(i){return Ho(new _R(i))}class lre{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return ct(n);if(r.numberOfChildren>1||!r.children[Ht])return Ho(new te(4e3,!1));r=r.children[Ht]}}applyRedirectCommands(t,e,n){const r=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n);if(e.startsWith("/"))throw new bR(r);return r}applyRedirectCreateUrlTree(t,e,n,r){const s=this.createSegmentGroup(t,e.root,n,r);return new Ju(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Object.entries(t).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);n[r]=e[a]}else n[r]=s}),n}createSegmentGroup(t,e,n,r){const s=this.createSegments(t,e.segments,n,r);let o={};return Object.entries(e.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(t,l,n,r)}),new Ii(s,o)}createSegments(t,e,n,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new te(4001,!1);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}const vR={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cre(i,t,e,n,r){const s=yR(i,t,e);return s.matched?(n=function kne(i,t){return i.providers&&!i._injector&&(i._injector=ub(i.providers,t,`Route: ${i.path}`)),i._injector??t}(t,n),function sre(i,t,e,n){const r=t.canMatch;return r&&0!==r.length?ct(r.map(o=>{const a=sh(o,i);return vl(function Yne(i){return i&&Qm(i.canMatch)}(a)?a.canMatch(t,e):Do(i,()=>a(t,e)))})).pipe(oh(),uB()):ct(!0)}(n,t,e).pipe(Ct(o=>!0===o?s:{...vR}))):ct(s)}function yR(i,t,e){if("**"===t.path)return function dre(i){return{matched:!0,parameters:i.length>0?Ij(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}(e);if(""===t.path)return"full"===t.pathMatch&&(i.hasChildren()||e.length>0)?{...vR}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||Gie)(e,i,t);if(!r)return{...vR};const s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function hB(i,t,e,n){return e.length>0&&function fre(i,t,e){return e.some(n=>wv(i,t,n)&&$o(n)!==Ht)}(i,e,n)?{segmentGroup:new Ii(t,hre(n,new Ii(e,i.children))),slicedSegments:[]}:0===e.length&&function mre(i,t,e){return e.some(n=>wv(i,t,n))}(i,e,n)?{segmentGroup:new Ii(i.segments,ure(i,e,n,i.children)),slicedSegments:e}:{segmentGroup:new Ii(i.segments,i.children),slicedSegments:e}}function ure(i,t,e,n){const r={};for(const s of e)if(wv(i,t,s)&&!n[$o(s)]){const o=new Ii([],{});r[$o(s)]=o}return{...n,...r}}function hre(i,t){const e={};e[Ht]=t;for(const n of i)if(""===n.path&&$o(n)!==Ht){const r=new Ii([],{});e[$o(n)]=r}return e}function wv(i,t,e){return(!(i.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}class _re{}class yre{constructor(t,e,n,r,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=n,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new lre(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new te(4002,`'${t.segmentGroup}'`)}recognize(){const t=hB(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Ct(e=>{const n=new dR([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ht,this.rootComponentType,null,{}),r=new mo(n,e),s=new eB("",r),o=function dne(i,t,e=null,n=null){return Hj(zj(i),t,e,n)}(n,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,Ht).pipe(Ma(n=>{if(n instanceof bR)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof _R?this.noMatchError(n):n}))}inheritParamsAndData(t,e){const n=t.value,r=cR(n,e,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(s=>this.inheritParamsAndData(s,n))}processSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,e,n):this.processSegment(t,e,n,n.segments,r,!0).pipe(Ct(s=>s instanceof mo?[s]:[]))}processChildren(t,e,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return hn(r).pipe(Zu(s=>{const o=n.children[s],a=function Nne(i,t){const e=i.filter(n=>$o(n)===t);return e.push(...i.filter(n=>$o(n)!==t)),e}(e,s);return this.processSegmentGroup(t,a,o,s)}),function Vie(i,t){return _n(function Uie(i,t,e,n,r){return(s,o)=>{let a=e,l=t,c=0;s.subscribe(tn(o,d=>{const u=c++;l=a?i(l,d,u):(a=!0,d),n&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}(i,t,arguments.length>=2,!0))}((s,o)=>(s.push(...o),s)),cv(null),function zie(i,t){const e=arguments.length>=2;return n=>n.pipe(i?sn((r,s)=>i(r,s,n)):el,KS(1),e?cv(t):Aj(()=>new Um))}(),cr(s=>{if(null===s)return ah(n);const o=fB(s);return function xre(i){i.sort((t,e)=>t.value.outlet===Ht?-1:e.value.outlet===Ht?1:t.value.outlet.localeCompare(e.value.outlet))}(o),ct(o)}))}processSegment(t,e,n,r,s,o){return hn(e).pipe(Zu(a=>this.processSegmentAgainstRoute(a._injector??t,e,a,n,r,s,o).pipe(Ma(l=>{if(l instanceof _R)return ct(null);throw l}))),Oc(a=>!!a),Ma(a=>{if(dB(a))return function gre(i,t,e){return 0===t.length&&!i.children[e]}(n,r,s)?ct(new _re):ah(n);throw a}))}processSegmentAgainstRoute(t,e,n,r,s,o,a){return function pre(i,t,e,n){return!!($o(i)===n||n!==Ht&&wv(t,e,i))&&yR(t,i,e).matched}(n,r,s,o)?void 0===n.redirectTo?this.matchSegmentAgainstRoute(t,r,n,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,n,s,o):ah(r):ah(r)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){const{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:d}=yR(e,r,s);if(!a)return ah(e);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const u=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,c);return this.applyRedirects.lineralizeSegments(r,u).pipe(cr(h=>this.processSegment(t,n,e,h.concat(d),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,s){const o=cre(e,n,r,t);return"**"===n.path&&(e.children={}),o.pipe(Jr(a=>a.matched?this.getChildConfig(t=n._injector??t,n,r).pipe(Jr(({routes:l})=>{const c=n._loadedInjector??t,{consumedSegments:d,remainingSegments:u,parameters:h}=a,f=new dR(d,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function Tre(i){return i.data||{}}(n),$o(n),n.component??n._loadedComponent??null,n,function Mre(i){return i.resolve||{}}(n)),{segmentGroup:m,slicedSegments:_}=hB(e,d,u,l);if(0===_.length&&m.hasChildren())return this.processChildren(c,l,m).pipe(Ct(g=>null===g?null:new mo(f,g)));if(0===l.length&&0===_.length)return ct(new mo(f,[]));const p=$o(n)===s;return this.processSegment(c,l,m,_,p?Ht:s,!0).pipe(Ct(g=>new mo(f,g instanceof mo?[g]:[])))})):ah(e)))}getChildConfig(t,e,n){return e.children?ct({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?ct({routes:e._loadedRoutes,injector:e._loadedInjector}):function rre(i,t,e,n){const r=t.canLoad;return void 0===r||0===r.length?ct(!0):ct(r.map(o=>{const a=sh(o,i);return vl(function Wne(i){return i&&Qm(i.canLoad)}(a)?a.canLoad(t,e):Do(i,()=>a(t,e)))})).pipe(oh(),uB())}(t,e,n).pipe(cr(r=>r?this.configLoader.loadChildren(t,e).pipe(Mn(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function are(i){return Ho(oB(!1,ys.GuardRejected))}())):ct({routes:[],injector:t})}}function wre(i){const t=i.value.routeConfig;return t&&""===t.path}function fB(i){const t=[],e=new Set;for(const n of i){if(!wre(n)){t.push(n);continue}const r=t.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):t.push(n)}for(const n of e){const r=fB(n.children);t.push(new mo(n.value,r))}return t.filter(n=>!e.has(n))}function mB(i){const t=i.children.map(e=>mB(e)).flat();return[i,...t]}function xR(i){return Jr(t=>{const e=i(t);return e?hn(e).pipe(Ct(()=>t)):ct(t)})}let pB=(()=>{class i{buildTitle(e){let n,r=e.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===Ht);return n}getResolvedTitleForRoute(e){return e.data[Vm]}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:()=>ee(Dre),providedIn:"root"})}return i})(),Dre=(()=>{class i extends pB{constructor(e){super(),this.title=e}updateTitle(e){const n=this.buildTitle(e);void 0!==n&&this.title.setTitle(n)}static#e=this.\u0275fac=function(n){return new(n||i)(ue(zte))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const lh=new le("",{providedIn:"root",factory:()=>({})}),ch=new le("");let wR=(()=>{class i{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ee(wO)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ct(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const n=vl(e.loadComponent()).pipe(Ct(gB),Mn(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),Ku(()=>{this.componentLoaders.delete(e)})),r=new Ej(n,()=>new Et).pipe(ZS());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return ct({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const s=function Ire(i,t,e,n){return vl(i.loadChildren()).pipe(Ct(gB),cr(r=>r instanceof OF||Array.isArray(r)?ct(r):hn(t.compileModuleAsync(r))),Ct(r=>{n&&n(i);let s,o,a=!1;return Array.isArray(r)?(o=r,!0):(s=r.create(e).injector,o=s.get(ch,[],{optional:!0,self:!0}).flat()),{routes:o.map(gR),injector:s}}))}(n,this.compiler,e,this.onLoadEndListener).pipe(Ku(()=>{this.childrenLoaders.delete(n)})),o=new Ej(s,()=>new Et).pipe(ZS());return this.childrenLoaders.set(n,o),o}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function gB(i){return function Pre(i){return i&&"object"==typeof i&&"default"in i}(i)?i.default:i}let TR=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:()=>ee(kre),providedIn:"root"})}return i})(),kre=(()=>{class i{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const _B=new le(""),bB=new le("");function Fre(i,t,e){const n=i.get(bB),r=i.get(Xt);return i.get(it).runOutsideAngular(()=>{if(!r.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,Promise.resolve();let s;const o=new Promise(c=>{s=c}),a=r.startViewTransition(()=>(s(),function Lre(i){return new Promise(t=>{QT(t,{injector:i})})}(i))),{onViewTransitionCreated:l}=n;return l&&Do(i,()=>l({transition:a,from:t,to:e})),o})}let Tv=(()=>{class i{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Et,this.transitionAbortSubject=new Et,this.configLoader=ee(wR),this.environmentInjector=ee(Ir),this.urlSerializer=ee(eh),this.rootContexts=ee(Xm),this.location=ee($u),this.inputBindingEnabled=null!==ee(vv,{optional:!0}),this.titleStrategy=ee(pB),this.options=ee(lh,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ee(TR),this.createViewTransition=ee(_B,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ct(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new wne(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new xne(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const n=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:n})}setupNavigations(e,n,r){return this.transitions=new Wr({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:$m,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(sn(s=>0!==s.id),Ct(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Jr(s=>{let o=!1,a=!1;return ct(s).pipe(Jr(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",ys.SupersededByNewNavigation),vr;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!c&&"reload"!==(l.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const u="";return this.events.next(new nh(l.id,this.urlSerializer.serialize(l.rawUrl),u,_v.IgnoredSameUrlNavigation)),l.resolve(null),vr}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ct(l).pipe(Jr(u=>{const h=this.transitions?.getValue();return this.events.next(new gv(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),h!==this.transitions?.getValue()?vr:Promise.resolve(u)}),function Sre(i,t,e,n,r,s){return cr(o=>function bre(i,t,e,n,r,s,o="emptyOnly"){return new yre(i,t,e,n,r,o,s).recognize()}(i,t,e,n,o.extractedUrl,r,s).pipe(Ct(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Mn(u=>{s.targetSnapshot=u.targetSnapshot,s.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects};const h=new Yj(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:u,extractedUrl:h,source:f,restoredState:m,extras:_}=l,p=new gv(u,this.urlSerializer.serialize(h),f,m);this.events.next(p);const g=Jj(this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:g,urlAfterRedirects:h,extras:{..._,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=h,ct(s)}{const u="";return this.events.next(new nh(l.id,this.urlSerializer.serialize(l.extractedUrl),u,_v.IgnoredByUrlHandlingStrategy)),l.resolve(null),vr}}),Mn(l=>{const c=new _ne(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Ct(l=>(this.currentTransition=s={...l,guards:Une(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function Zne(i,t){return cr(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?ct({...e,guardsResult:!0}):function Kne(i,t,e,n){return hn(i).pipe(cr(r=>function nre(i,t,e,n,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?ct(s.map(a=>{const l=Ym(t)??r,c=sh(a,l);return vl(function qne(i){return i&&Qm(i.canDeactivate)}(c)?c.canDeactivate(i,t,e,n):Do(l,()=>c(i,t,e,n))).pipe(Oc())})).pipe(oh()):ct(!0)}(r.component,r.route,e,t,n)),Oc(r=>!0!==r,!0))}(o,n,r,i).pipe(cr(a=>a&&function Gne(i){return"boolean"==typeof i}(a)?function Qne(i,t,e,n){return hn(t).pipe(Zu(r=>lv(function ere(i,t){return null!==i&&t&&t(new Tne(i)),ct(!0)}(r.route.parent,n),function Jne(i,t){return null!==i&&t&&t(new Sne(i)),ct(!0)}(r.route,n),function ire(i,t,e){const n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function Vne(i){const t=i.routeConfig?i.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:i,guards:t}:null}(o)).filter(o=>null!==o).map(o=>Cj(()=>ct(o.guards.map(l=>{const c=Ym(o.node)??e,d=sh(l,c);return vl(function Xne(i){return i&&Qm(i.canActivateChild)}(d)?d.canActivateChild(n,i):Do(c,()=>d(n,i))).pipe(Oc())})).pipe(oh())));return ct(s).pipe(oh())}(i,r.path,e),function tre(i,t,e){const n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||0===n.length)return ct(!0);const r=n.map(s=>Cj(()=>{const o=Ym(t)??e,a=sh(s,o);return vl(function $ne(i){return i&&Qm(i.canActivate)}(a)?a.canActivate(t,i):Do(o,()=>a(t,i))).pipe(Oc())}));return ct(r).pipe(oh())}(i,r.route,e))),Oc(r=>!0!==r,!0))}(n,s,i,t):ct(a)),Ct(a=>({...e,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),Mn(l=>{if(s.guardsResult=l.guardsResult,th(l.guardsResult))throw sB(0,l.guardsResult);const c=new bne(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),sn(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",ys.GuardRejected),!1)),xR(l=>{if(l.guards.canActivateChecks.length)return ct(l).pipe(Mn(c=>{const d=new vne(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),Jr(c=>{let d=!1;return ct(c).pipe(function Rre(i,t){return cr(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return ct(e);const s=new Set(r.map(l=>l.route)),o=new Set;for(const l of s)if(!o.has(l))for(const c of mB(l))o.add(c);let a=0;return hn(o).pipe(Zu(l=>s.has(l)?function Cre(i,t,e,n){const r=i.routeConfig,s=i._resolve;return void 0!==r?.title&&!iB(r)&&(s[Vm]=r.title),function Ere(i,t,e,n){const r=JS(i);if(0===r.length)return ct({});const s={};return hn(r).pipe(cr(o=>function Are(i,t,e,n){const r=Ym(t)??n,s=sh(i,r);return vl(s.resolve?s.resolve(t,e):Do(r,()=>s(t,e)))}(i[o],t,e,n).pipe(Oc(),Mn(a=>{s[o]=a}))),KS(1),QS(s),Ma(o=>dB(o)?vr:Ho(o)))}(s,i,t,n).pipe(Ct(o=>(i._resolvedData=o,i.data=cR(i,i.parent,e).resolve,null)))}(l,n,i,t):(l.data=cR(l,l.parent,i).resolve,ct(void 0))),Mn(()=>a++),KS(1),cr(l=>a===o.size?ct(e):vr))})}(this.paramsInheritanceStrategy,this.environmentInjector),Mn({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(c,"",ys.NoDataFromResolver)}}))}),Mn(c=>{const d=new yne(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}))}),xR(l=>{const c=d=>{const u=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(d.routeConfig).pipe(Mn(h=>{d.component=h}),Ct(()=>{})));for(const h of d.children)u.push(...c(h));return u};return av(c(l.targetSnapshot.root)).pipe(cv(null),vs(1))}),xR(()=>this.afterPreactivation()),Jr(()=>{const{currentSnapshot:l,targetSnapshot:c}=s,d=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return d?hn(d).pipe(Ct(()=>s)):ct(s)}),Ct(l=>{const c=function Ane(i,t,e){const n=qm(i,t._root,e?e._root:void 0);return new Qj(n,t)}(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},this.currentNavigation.targetRouterState=c,s}),Mn(()=>{this.events.next(new sR)}),((i,t,e,n)=>Ct(r=>(new Bne(t,r.targetRouterState,r.currentRouterState,e,n).activate(i),r)))(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),vs(1),Mn({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Sa(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Zi(this.transitionAbortSubject.pipe(Mn(l=>{throw l}))),Ku(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",ys.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ma(l=>{if(a=!0,aB(l))this.events.next(new ih(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function Pne(i){return aB(i)&&th(i.url)}(l)?this.events.next(new oR(l.url)):s.resolve(!1);else{this.events.next(new bv(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(e.errorHandler(l))}catch(c){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(c)}}return vr}))}))}cancelNavigationTransition(e,n,r){const s=new ih(e.id,this.urlSerializer.serialize(e.extractedUrl),n,r);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Ore(i){return i!==$m}let Nre=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:()=>ee(Bre),providedIn:"root"})}return i})();class jre{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let Bre=(()=>{class i extends jre{static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),vB=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:()=>ee(Ure),providedIn:"root"})}return i})(),Ure=(()=>{class i extends vB{constructor(){super(...arguments),this.location=ee($u),this.urlSerializer=ee(eh),this.options=ee(lh,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ee(TR),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ju,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Jj(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(n=>{"popstate"===n.type&&e(n.url,n.state)})}handleRouterEvent(e,n){if(e instanceof gv)this.stateMemento=this.createStateMemento();else if(e instanceof nh)this.rawUrlTree=n.initialUrl;else if(e instanceof Yj){if("eager"===this.urlUpdateStrategy&&!n.extras.skipLocationChange){const r=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(r,n)}}else e instanceof sR?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,"deferred"===this.urlUpdateStrategy&&(n.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,n))):e instanceof ih&&(e.code===ys.GuardRejected||e.code===ys.NoDataFromResolver)?this.restoreHistory(n):e instanceof bv?this.restoreHistory(n,!0):e instanceof Sa&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,n){const r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl){const o={...n.extras.state,...this.generateNgRouterState(n.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...n.extras.state,...this.generateNgRouterState(n.id,this.browserPageId+1)};this.location.go(r,"",s)}}restoreHistory(e,n=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===e.finalUrl&&0===s&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Jm=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.FAILED=1]="FAILED",i[i.REDIRECTING=2]="REDIRECTING",i}(Jm||{});function yB(i,t){i.events.pipe(sn(e=>e instanceof Sa||e instanceof ih||e instanceof bv||e instanceof nh),Ct(e=>e instanceof Sa||e instanceof nh?Jm.COMPLETE:e instanceof ih&&(e.code===ys.Redirect||e.code===ys.SupersededByNewNavigation)?Jm.REDIRECTING:Jm.FAILED),sn(e=>e!==Jm.REDIRECTING),vs(1)).subscribe(()=>{t()})}function Vre(i){throw i}const zre={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Hre={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let po=(()=>{class i{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=ee(hO),this.stateManager=ee(vB),this.options=ee(lh,{optional:!0})||{},this.pendingTasks=ee(cl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ee(Tv),this.urlSerializer=ee(eh),this.location=ee($u),this.urlHandlingStrategy=ee(TR),this._events=new Et,this.errorHandler=this.options.errorHandler||Vre,this.navigated=!1,this.routeReuseStrategy=ee(Nre),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ee(ch,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ee(vv,{optional:!0}),this.eventsSubscription=new Oi,this.isNgZoneEnabled=ee(it)instanceof it&&it.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(n=>{try{const r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==r&&null!==s)if(this.stateManager.handleRouterEvent(n,s),n instanceof ih&&n.code!==ys.Redirect&&n.code!==ys.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof Sa)this.navigated=!0;else if(n instanceof oR){const o=this.urlHandlingStrategy.merge(n.url,r.currentRawUrl),a={info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ore(r.source)};this.scheduleNavigation(o,$m,null,a,{resolve:r.resolve,reject:r.reject,promise:r.promise})}(function Wre(i){return!(i instanceof sR||i instanceof oR)})(n)&&this._events.next(n)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$m,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",n)},0)})}navigateToSyncWithBrowser(e,n,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,n,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(gR),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,n={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=n,c=l?this.currentUrlTree.fragment:o;let u,d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...s};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}null!==d&&(d=this.removeEmptyProps(d));try{u=zj(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),u=this.currentUrlTree.root}return Hj(u,e,d,c??null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=th(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,$m,null,n)}navigate(e,n={skipLocationChange:!1}){return function Gre(i){for(let t=0;t<i.length;t++)if(null==i[t])throw new te(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,n){let r;if(r=!0===n?{...zre}:!1===n?{...Hre}:n,th(e))return kj(this.currentUrlTree,e,r);const s=this.parseUrl(e);return kj(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.entries(e).reduce((n,[r,s])=>(null!=s&&(n[r]=s),n),{})}scheduleNavigation(e,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((u,h)=>{a=u,l=h});const d=this.pendingTasks.add();return yB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(u=>Promise.reject(u))}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Mv=(()=>{class i{constructor(e,n,r,s,o,a){this.router=e,this.route=n,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new Et,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof Sa&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,n,r,s,o){const a=this.urlTree;return!!(null===a||this.isAnchorElement&&(0!==e||n||r||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(a,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const e=this.urlTree;this.href=null!==e&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;const n=null===this.href?null:function tk(i,t,e){return function SX(i,t){return"src"===t&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===t&&("base"===i||"link"===i)?ek:JP}(t,e)(i)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(e,n){const r=this.renderer,s=this.el.nativeElement;null!==n?r.setAttribute(s,e,n):r.removeAttribute(s,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(n){return new(n||i)(P(po),P(jc),hu("tabindex"),P(ba),P(xt),P(Fc))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,r){1&n&&Ke("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&n&&Wi("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[rt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",$i],skipLocationChange:[rt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",$i],replaceUrl:[rt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",$i],routerLink:"routerLink"},standalone:!0,features:[gs,pr]})}return i})();class xB{}let qre=(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(sn(e=>e instanceof Sa),Zu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const s of n){s.providers&&!s._injector&&(s._injector=ub(s.providers,e,`Route: ${s.path}`));const o=s._injector??e,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return hn(r).pipe(Yu())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(e,n):ct(null);const s=r.pipe(cr(o=>null===o?ct(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));return n.loadComponent&&!n._loadedComponent?hn([s,this.loader.loadComponent(n)]).pipe(Yu()):s})}static#e=this.\u0275fac=function(n){return new(n||i)(ue(po),ue(wO),ue(Ir),ue(xB),ue(wR))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const MR=new le("");let wB=(()=>{class i{constructor(e,n,r,s,o={}){this.urlSerializer=e,this.transitions=n,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=ee(Ir),o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof gv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Sa?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof nh&&e.code===_v.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Zj&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){var r=this;this.zone.runOutsideAngular(Si(function*(){yield new Promise(s=>{setTimeout(()=>{s()}),QT(()=>{s()},{injector:r.environmentInjector})}),r.zone.run(()=>{r.transitions.events.next(new Zj(e,"popstate"===r.lastSource?r.store[r.restoredId]:null,n))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(n){q_()};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})();function Xo(i,t){return{\u0275kind:i,\u0275providers:t}}function MB(){const i=ee(ar);return t=>{const e=i.get(va);if(t!==e.components[0])return;const n=i.get(po),r=i.get(SB);1===i.get(SR)&&n.initialNavigation(),i.get(RB,null,ni.Optional)?.setUpPreloading(),i.get(MR,null,ni.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const SB=new le("",{factory:()=>new Et}),SR=new le("",{providedIn:"root",factory:()=>1}),RB=new le("");function Qre(i){return Xo(0,[{provide:RB,useExisting:qre},{provide:xB,useExisting:i}])}function ese(i){return Xo(9,[{provide:_B,useValue:Fre},{provide:bB,useValue:{skipNextTransition:!!i?.skipInitialTransition,...i}}])}const CB=new le("ROUTER_FORROOT_GUARD"),tse=[$u,{provide:eh,useClass:eR},po,Xm,{provide:jc,useFactory:function TB(i){return i.routerState.root},deps:[po]},wR,[]];let EB=(()=>{class i{constructor(e){}static forRoot(e,n){return{ngModule:i,providers:[tse,[],{provide:ch,multi:!0,useValue:e},{provide:CB,useFactory:sse,deps:[[po,new uc,new Tf]]},{provide:lh,useValue:n||{}},n?.useHash?{provide:Fc,useClass:RJ}:{provide:Fc,useClass:hN},{provide:MR,useFactory:()=>{const i=ee(Hee),t=ee(it),e=ee(lh),n=ee(Tv),r=ee(eh);return e.scrollOffset&&i.setOffset(e.scrollOffset),new wB(r,n,i,t,e)}},n?.preloadingStrategy?Qre(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?ose(n):[],n?.bindToComponentInputs?Xo(8,[nB,{provide:vv,useExisting:nB}]).\u0275providers:[],n?.enableViewTransitions?ese().\u0275providers:[],[{provide:AB,useFactory:MB},{provide:oS,multi:!0,useExisting:AB}]]}}static forChild(e){return{ngModule:i,providers:[{provide:ch,multi:!0,useValue:e}]}}static#e=this.\u0275fac=function(n){return new(n||i)(ue(CB,8))};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({})}return i})();function sse(i){return"guarded"}function ose(i){return["disabled"===i.initialNavigation?Xo(3,[{provide:rS,multi:!0,useFactory:()=>{const t=ee(po);return()=>{t.setUpLocationChangeListener()}}},{provide:SR,useValue:2}]).\u0275providers:[],"enabledBlocking"===i.initialNavigation?Xo(2,[{provide:SR,useValue:0},{provide:rS,multi:!0,deps:[ar],useFactory:t=>{const e=t.get(MJ,Promise.resolve());return()=>e.then(()=>new Promise(n=>{const r=t.get(po),s=t.get(SB);yB(r,()=>{n(!0)}),t.get(Tv).afterPreactivation=()=>(n(!0),s.closed?ct(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const AB=new le(""),Sv="164",xs={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ra={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},DB=0,RR=1,IB=2,lse=3,cse=0,CR=1,PB=2,qo=3,Yo=0,jr=1,Br=2,oi=0,Zo=1,ep=2,ER=3,AR=4,tp=5,es=100,kB=101,FB=102,LB=103,OB=104,dh=200,NB=201,jB=202,BB=203,uh=204,hh=205,Rv=206,UB=207,Cv=208,VB=209,zB=210,HB=211,GB=212,WB=213,$B=214,XB=0,qB=1,YB=2,ip=3,ZB=4,KB=5,QB=6,JB=7,np=0,e3=1,t3=2,Ca=0,n3=1,r3=2,s3=3,o3=4,a3=5,l3=6,c3=7,DR="attached",d3="detached",Ev=300,Ea=301,yl=302,rp=303,sp=304,fh=306,Ko=1e3,ws=1001,mh=1002,ci=1003,Av=1004,dse=1004,Bc=1005,use=1005,fn=1006,ph=1007,hse=1007,js=1008,fse=1008,Aa=1009,u3=1010,h3=1011,Dv=1012,IR=1013,Uc=1014,ts=1015,mn=1016,PR=1017,kR=1018,xl=1020,f3=35902,m3=1021,p3=1022,Ts=1023,g3=1024,_3=1025,Vc=1026,wl=1027,op=1028,FR=1029,b3=1030,LR=1031,OR=1033,Iv=33776,Pv=33777,kv=33778,Fv=33779,NR=35840,jR=35841,BR=35842,UR=35843,VR=36196,zR=37492,HR=37496,GR=37808,WR=37809,$R=37810,XR=37811,qR=37812,YR=37813,ZR=37814,KR=37815,QR=37816,JR=37817,eC=37818,tC=37819,iC=37820,nC=37821,Lv=36492,rC=36494,sC=36495,v3=36283,oC=36284,aC=36285,lC=36286,cC=2200,y3=2201,x3=2202,gh=2300,zc=2301,Ov=2302,Hc=2400,Gc=2401,ap=2402,Nv=2500,dC=2501,w3=0,uC=1,jv=2,T3=3200,hC=3201,Tl=0,M3=1,Da="",qn="srgb",Yn="srgb-linear",Bv="display-p3",lp="display-p3-linear",cp="linear",Hi="srgb",dp="rec709",up="p3",mse=0,Wc=7680,pse=7681,gse=7682,_se=7683,bse=34055,vse=34056,yse=5386,xse=512,wse=513,Tse=514,Mse=515,Sse=516,Rse=517,Cse=518,fC=519,S3=512,R3=513,C3=514,mC=515,E3=516,A3=517,D3=518,I3=519,hp=35044,Ese=35048,Ase=35040,Dse=35045,Ise=35049,Pse=35041,kse=35046,Fse=35050,Lse=35042,Ose="100",pC="300 es",Qo=2e3,fp=2001;class is{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const s=r.indexOf(e);-1!==s&&r.splice(s,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const n=this._listeners[t.type];if(void 0!==n){t.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,t);t.target=null}}}const yr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let P3=1234567;const $c=Math.PI/180,_h=180/Math.PI;function Ms(){const i=4294967295*Math.random()|0,t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(yr[255&i]+yr[i>>8&255]+yr[i>>16&255]+yr[i>>24&255]+"-"+yr[255&t]+yr[t>>8&255]+"-"+yr[t>>16&15|64]+yr[t>>24&255]+"-"+yr[63&e|128]+yr[e>>8&255]+"-"+yr[e>>16&255]+yr[e>>24&255]+yr[255&n]+yr[n>>8&255]+yr[n>>16&255]+yr[n>>24&255]).toLowerCase()}function pn(i,t,e){return Math.max(t,Math.min(e,i))}function gC(i,t){return(i%t+t)%t}function mp(i,t,e){return(1-e)*i+e*t}function Ur(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function jt(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return Math.round(4294967295*i);case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int32Array:return Math.round(2147483647*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}}const st={DEG2RAD:$c,RAD2DEG:_h,generateUUID:Ms,clamp:pn,euclideanModulo:gC,mapLinear:function Nse(i,t,e,n,r){return n+(i-t)*(r-n)/(e-t)},inverseLerp:function jse(i,t,e){return i!==t?(e-i)/(t-i):0},lerp:mp,damp:function Bse(i,t,e,n){return mp(i,t,1-Math.exp(-e*n))},pingpong:function Use(i,t=1){return t-Math.abs(gC(i,2*t)-t)},smoothstep:function Vse(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t))*i*(3-2*i)},smootherstep:function zse(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t))*i*i*(i*(6*i-15)+10)},randInt:function Hse(i,t){return i+Math.floor(Math.random()*(t-i+1))},randFloat:function Gse(i,t){return i+Math.random()*(t-i)},randFloatSpread:function Wse(i){return i*(.5-Math.random())},seededRandom:function $se(i){void 0!==i&&(P3=i);let t=P3+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function Xse(i){return i*$c},radToDeg:function qse(i){return i*_h},isPowerOfTwo:function Yse(i){return!(i&i-1)&&0!==i},ceilPowerOfTwo:function Zse(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},floorPowerOfTwo:function Kse(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))},setQuaternionFromProperEuler:function Qse(i,t,e,n,r){const s=Math.cos,o=Math.sin,a=s(e/2),l=o(e/2),c=s((t+n)/2),d=o((t+n)/2),u=s((t-n)/2),h=o((t-n)/2),f=s((n-t)/2),m=o((n-t)/2);switch(r){case"XYX":i.set(a*d,l*u,l*h,a*c);break;case"YZY":i.set(l*h,a*d,l*u,a*c);break;case"ZXZ":i.set(l*u,l*h,a*d,a*c);break;case"XZX":i.set(a*d,l*m,l*f,a*c);break;case"YXY":i.set(l*f,a*d,l*m,a*c);break;case"ZYZ":i.set(l*m,l*f,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:jt,denormalize:Ur};class ${constructor(t=0,e=0){$.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(pn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),s=this.x-t.x,o=this.y-t.y;return this.x=s*n-o*r+t.x,this.y=s*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Bt{constructor(t,e,n,r,s,o,a,l,c){Bt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,r,s,o,a,l,c)}set(t,e,n,r,s,o,a,l,c){const d=this.elements;return d[0]=t,d[1]=r,d[2]=a,d[3]=e,d[4]=s,d[5]=l,d[6]=n,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],d=n[4],u=n[7],h=n[2],f=n[5],m=n[8],_=r[0],p=r[3],g=r[6],b=r[1],v=r[4],y=r[7],T=r[2],w=r[5],M=r[8];return s[0]=o*_+a*b+l*T,s[3]=o*p+a*v+l*w,s[6]=o*g+a*y+l*M,s[1]=c*_+d*b+u*T,s[4]=c*p+d*v+u*w,s[7]=c*g+d*y+u*M,s[2]=h*_+f*b+m*T,s[5]=h*p+f*v+m*w,s[8]=h*g+f*y+m*M,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8];return e*o*d-e*a*c-n*s*d+n*a*l+r*s*c-r*o*l}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8],u=d*o-a*c,h=a*l-d*s,f=c*s-o*l,m=e*u+n*h+r*f;if(0===m)return this.set(0,0,0,0,0,0,0,0,0);const _=1/m;return t[0]=u*_,t[1]=(r*c-d*n)*_,t[2]=(a*n-r*o)*_,t[3]=h*_,t[4]=(d*e-r*l)*_,t[5]=(r*s-a*e)*_,t[6]=f*_,t[7]=(n*l-c*e)*_,t[8]=(o*e-n*s)*_,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*o+c*a)+o+t,-r*c,r*l,-r*(-c*o+l*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(_C.makeScale(t,e)),this}rotate(t){return this.premultiply(_C.makeRotation(-t)),this}translate(t,e){return this.premultiply(_C.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const _C=new Bt;function k3(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}const Jse={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function bh(i,t){return new Jse[i](t)}function pp(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function F3(){const i=pp("canvas");return i.style.display="block",i}const L3={};function O3(i){i in L3||(L3[i]=!0,console.warn(i))}const N3=(new Bt).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),j3=(new Bt).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Uv={[Yn]:{transfer:cp,primaries:dp,toReference:i=>i,fromReference:i=>i},[qn]:{transfer:Hi,primaries:dp,toReference:i=>i.convertSRGBToLinear(),fromReference:i=>i.convertLinearToSRGB()},[lp]:{transfer:cp,primaries:up,toReference:i=>i.applyMatrix3(j3),fromReference:i=>i.applyMatrix3(N3)},[Bv]:{transfer:Hi,primaries:up,toReference:i=>i.convertSRGBToLinear().applyMatrix3(j3),fromReference:i=>i.applyMatrix3(N3).convertLinearToSRGB()}},eoe=new Set([Yn,lp]),xi={enabled:!0,_workingColorSpace:Yn,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(i){if(!eoe.has(i))throw new Error(`Unsupported working color space, "${i}".`);this._workingColorSpace=i},convert:function(i,t,e){return!1!==this.enabled&&t!==e&&t&&e?(0,Uv[e].fromReference)((0,Uv[t].toReference)(i)):i},fromWorkingColorSpace:function(i,t){return this.convert(i,this._workingColorSpace,t)},toWorkingColorSpace:function(i,t){return this.convert(i,t,this._workingColorSpace)},getPrimaries:function(i){return Uv[i].primaries},getTransfer:function(i){return i===Da?cp:Uv[i].transfer}};function vh(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function bC(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}let yh;class B3{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===yh&&(yh=pp("canvas")),yh.width=t.width,yh.height=t.height;const n=yh.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=yh}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=pp("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*vh(s[o]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e[n]=e instanceof Uint8Array||e instanceof Uint8ClampedArray?Math.floor(255*vh(e[n]/255)):vh(e[n]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let toe=0;class Xc{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:toe++}),this.uuid=Ms(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(vC(r[o].isDataTexture?r[o].image:r[o]))}else s=vC(r);n.url=s}return e||(t.images[this.uuid]=n),n}}function vC(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?B3.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ioe=0,Sn=(()=>{class i extends is{constructor(e=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=ws,s=ws,o=fn,a=js,l=Ts,c=Aa,d=i.DEFAULT_ANISOTROPY,u=Da){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ioe++}),this.uuid=Ms(),this.name="",this.source=new Xc(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=c,this.offset=new $(0,0),this.repeat=new $(1,1),this.center=new $(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Bt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=void 0===e||"string"==typeof e;if(!n&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Ev)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ko:e.x=e.x-Math.floor(e.x);break;case ws:e.x=e.x<0?0:1;break;case mh:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Ko:e.y=e.y-Math.floor(e.y);break;case ws:e.y=e.y<0?0:1;break;case mh:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=Ev,i.DEFAULT_ANISOTROPY=1,i})();class fi{constructor(t=0,e=0,n=0,r=1){fi.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,s;const l=t.elements,c=l[0],d=l[4],u=l[8],h=l[1],f=l[5],m=l[9],_=l[2],p=l[6],g=l[10];if(Math.abs(d-h)<.01&&Math.abs(u-_)<.01&&Math.abs(m-p)<.01){if(Math.abs(d+h)<.1&&Math.abs(u+_)<.1&&Math.abs(m+p)<.1&&Math.abs(c+f+g-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const v=(c+1)/2,y=(f+1)/2,T=(g+1)/2,w=(d+h)/4,M=(u+_)/4,D=(m+p)/4;return v>y&&v>T?v<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(v),r=w/n,s=M/n):y>T?y<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(y),n=w/r,s=D/r):T<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(T),n=M/s,r=D/s),this.set(n,r,s,e),this}let b=Math.sqrt((p-m)*(p-m)+(u-_)*(u-_)+(h-d)*(h-d));return Math.abs(b)<.001&&(b=1),this.x=(p-m)/b,this.y=(u-_)/b,this.z=(h-d)/b,this.w=Math.acos((c+f+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class U3 extends is{constructor(t=1,e=1,n={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new fi(0,0,t,e),this.scissorTest=!1,this.viewport=new fi(0,0,t,e);const r={width:t,height:e,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:fn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new Sn(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let n=0,r=t.textures.length;n<r;n++)this.textures[n]=t.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new Xc(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class gi extends U3{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class Vv extends Sn{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=ci,this.minFilter=ci,this.wrapR=ws,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class noe extends gi{constructor(t=1,e=1,n=1,r={}){super(t,e,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Vv(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class yC extends Sn{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=ci,this.minFilter=ci,this.wrapR=ws,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class roe extends gi{constructor(t=1,e=1,n=1,r={}){super(t,e,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new yC(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class mi{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,s,o,a){let l=n[r+0],c=n[r+1],d=n[r+2],u=n[r+3];const h=s[o+0],f=s[o+1],m=s[o+2],_=s[o+3];if(0===a)return t[e+0]=l,t[e+1]=c,t[e+2]=d,void(t[e+3]=u);if(1===a)return t[e+0]=h,t[e+1]=f,t[e+2]=m,void(t[e+3]=_);if(u!==_||l!==h||c!==f||d!==m){let p=1-a;const g=l*h+c*f+d*m+u*_,b=g>=0?1:-1,v=1-g*g;if(v>Number.EPSILON){const T=Math.sqrt(v),w=Math.atan2(T,g*b);p=Math.sin(p*w)/T,a=Math.sin(a*w)/T}const y=a*b;if(l=l*p+h*y,c=c*p+f*y,d=d*p+m*y,u=u*p+_*y,p===1-a){const T=1/Math.sqrt(l*l+c*c+d*d+u*u);l*=T,c*=T,d*=T,u*=T}}t[e]=l,t[e+1]=c,t[e+2]=d,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,r,s,o){const a=n[r],l=n[r+1],c=n[r+2],d=n[r+3],u=s[o],h=s[o+1],f=s[o+2],m=s[o+3];return t[e]=a*m+d*u+l*f-c*h,t[e+1]=l*m+d*h+c*u-a*f,t[e+2]=c*m+d*f+a*h-l*u,t[e+3]=d*m-a*u-l*h-c*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,r=t._y,s=t._z,o=t._order,a=Math.cos,l=Math.sin,c=a(n/2),d=a(r/2),u=a(s/2),h=l(n/2),f=l(r/2),m=l(s/2);switch(o){case"XYZ":this._x=h*d*u+c*f*m,this._y=c*f*u-h*d*m,this._z=c*d*m+h*f*u,this._w=c*d*u-h*f*m;break;case"YXZ":this._x=h*d*u+c*f*m,this._y=c*f*u-h*d*m,this._z=c*d*m-h*f*u,this._w=c*d*u+h*f*m;break;case"ZXY":this._x=h*d*u-c*f*m,this._y=c*f*u+h*d*m,this._z=c*d*m+h*f*u,this._w=c*d*u-h*f*m;break;case"ZYX":this._x=h*d*u-c*f*m,this._y=c*f*u+h*d*m,this._z=c*d*m-h*f*u,this._w=c*d*u+h*f*m;break;case"YZX":this._x=h*d*u+c*f*m,this._y=c*f*u+h*d*m,this._z=c*d*m-h*f*u,this._w=c*d*u-h*f*m;break;case"XZY":this._x=h*d*u-c*f*m,this._y=c*f*u-h*d*m,this._z=c*d*m+h*f*u,this._w=c*d*u+h*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],s=e[8],o=e[1],a=e[5],l=e[9],c=e[2],d=e[6],u=e[10],h=n+a+u;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(d-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(n>a&&n>u){const f=2*Math.sqrt(1+n-a-u);this._w=(d-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>u){const f=2*Math.sqrt(1+a-n-u);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+d)/f}else{const f=2*Math.sqrt(1+u-n-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+d)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(pn(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,s=t._z,o=t._w,a=e._x,l=e._y,c=e._z,d=e._w;return this._x=n*d+o*a+r*c-s*l,this._y=r*d+o*l+s*a-n*c,this._z=s*d+o*c+n*l-r*a,this._w=o*d-n*a-r*l-s*c,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*t._w+n*t._x+r*t._y+s*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-e;return this._w=f*o+e*this._w,this._x=f*n+e*this._x,this._y=f*r+e*this._y,this._z=f*s+e*this._z,this.normalize(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),u=Math.sin((1-e)*d)/c,h=Math.sin(e*d)/c;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=s*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(t),r*Math.cos(t),s*Math.sin(e),s*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class C{constructor(t=0,e=0,n=0){C.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(V3.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(V3.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6]*r,this.y=s[1]*e+s[4]*n+s[7]*r,this.z=s[2]*e+s[5]*n+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=t.elements,o=1/(s[3]*e+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*e+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*e+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,s=t.x,o=t.y,a=t.z,l=t.w,c=2*(o*r-a*n),d=2*(a*e-s*r),u=2*(s*n-o*e);return this.x=e+l*c+o*u-a*d,this.y=n+l*d+a*c-s*u,this.z=r+l*u+s*d-o*c,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*r,this.y=s[1]*e+s[5]*n+s[9]*r,this.z=s[2]*e+s[6]*n+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,s=t.z,o=e.x,a=e.y,l=e.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return xC.copy(this).projectOnVector(t),this.sub(xC)}reflect(t){return this.sub(xC.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(pn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=2*Math.random()-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const xC=new C,V3=new mi;class ir{constructor(t=new C(1/0,1/0,1/0),e=new C(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(go.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(go.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=go.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n){const s=n.getAttribute("position");if(!0===e&&void 0!==s&&!0!==t.isInstancedMesh)for(let o=0,a=s.count;o<a;o++)!0===t.isMesh?t.getVertexPosition(o,go):go.fromBufferAttribute(s,o),go.applyMatrix4(t.matrixWorld),this.expandByPoint(go);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),zv.copy(t.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),zv.copy(n.boundingBox)),zv.applyMatrix4(t.matrixWorld),this.union(zv)}const r=t.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,go),go.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(gp),Hv.subVectors(this.max,gp),xh.subVectors(t.a,gp),wh.subVectors(t.b,gp),Th.subVectors(t.c,gp),Ml.subVectors(wh,xh),Sl.subVectors(Th,wh),qc.subVectors(xh,Th);let e=[0,-Ml.z,Ml.y,0,-Sl.z,Sl.y,0,-qc.z,qc.y,Ml.z,0,-Ml.x,Sl.z,0,-Sl.x,qc.z,0,-qc.x,-Ml.y,Ml.x,0,-Sl.y,Sl.x,0,-qc.y,qc.x,0];return!(!wC(e,xh,wh,Th,Hv)||(e=[1,0,0,0,1,0,0,0,1],!wC(e,xh,wh,Th,Hv)))&&(Gv.crossVectors(Ml,Sl),e=[Gv.x,Gv.y,Gv.z],wC(e,xh,wh,Th,Hv))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,go).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(go).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Ia[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ia[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ia[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ia[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ia[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ia[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ia[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ia[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ia)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Ia=[new C,new C,new C,new C,new C,new C,new C,new C],go=new C,zv=new ir,xh=new C,wh=new C,Th=new C,Ml=new C,Sl=new C,qc=new C,gp=new C,Hv=new C,Gv=new C,Yc=new C;function wC(i,t,e,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){Yc.fromArray(i,s);const a=r.x*Math.abs(Yc.x)+r.y*Math.abs(Yc.y)+r.z*Math.abs(Yc.z),l=t.dot(Yc),c=e.dot(Yc),d=n.dot(Yc);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const soe=new ir,_p=new C,TC=new C;class nr{constructor(t=new C,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):soe.setFromPoints(t).getCenter(n);let r=0;for(let s=0,o=t.length;s<o;s++)r=Math.max(r,n.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;_p.subVectors(t,this.center);const e=_p.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),r=.5*(n-this.radius);this.center.addScaledVector(_p,r/n),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(TC.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(_p.copy(t.center).add(TC)),this.expandByPoint(_p.copy(t.center).sub(TC))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Pa=new C,MC=new C,Wv=new C,Rl=new C,SC=new C,$v=new C,RC=new C;class Zc{constructor(t=new C,e=new C(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Pa)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Pa.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Pa.copy(this.origin).addScaledVector(this.direction,e),Pa.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){MC.copy(t).add(e).multiplyScalar(.5),Wv.copy(e).sub(t).normalize(),Rl.copy(this.origin).sub(MC);const s=.5*t.distanceTo(e),o=-this.direction.dot(Wv),a=Rl.dot(this.direction),l=-Rl.dot(Wv),c=Rl.lengthSq(),d=Math.abs(1-o*o);let u,h,f,m;if(d>0)if(u=o*l-a,h=o*a-l,m=s*d,u>=0)if(h>=-m)if(h<=m){const _=1/d;u*=_,h*=_,f=u*(u+o*h+2*a)+h*(o*u+h+2*l)+c}else h=s,u=Math.max(0,-(o*h+a)),f=-u*u+h*(h+2*l)+c;else h=-s,u=Math.max(0,-(o*h+a)),f=-u*u+h*(h+2*l)+c;else h<=-m?(u=Math.max(0,-(-o*s+a)),h=u>0?-s:Math.min(Math.max(-s,-l),s),f=-u*u+h*(h+2*l)+c):h<=m?(u=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(u=Math.max(0,-(o*s+a)),h=u>0?s:Math.min(Math.max(-s,-l),s),f=-u*u+h*(h+2*l)+c);else h=o>0?-s:s,u=Math.max(0,-(o*h+a)),f=-u*u+h*(h+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(MC).addScaledVector(Wv,h),f}intersectSphere(t,e){Pa.subVectors(t.center,this.origin);const n=Pa.dot(this.direction),r=Pa.dot(Pa)-n*n,s=t.radius*t.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return l<0?null:this.at(a<0?l:a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,s,o,a,l;const c=1/this.direction.x,d=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(t.min.x-h.x)*c,r=(t.max.x-h.x)*c):(n=(t.max.x-h.x)*c,r=(t.min.x-h.x)*c),d>=0?(s=(t.min.y-h.y)*d,o=(t.max.y-h.y)*d):(s=(t.max.y-h.y)*d,o=(t.min.y-h.y)*d),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),u>=0?(a=(t.min.z-h.z)*u,l=(t.max.z-h.z)*u):(a=(t.max.z-h.z)*u,l=(t.min.z-h.z)*u),n>l||a>r)||((a>n||n!=n)&&(n=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(n>=0?n:r,e)}intersectsBox(t){return null!==this.intersectBox(t,Pa)}intersectTriangle(t,e,n,r,s){SC.subVectors(e,t),$v.subVectors(n,t),RC.crossVectors(SC,$v);let a,o=this.direction.dot(RC);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Rl.subVectors(this.origin,t);const l=a*this.direction.dot($v.crossVectors(Rl,$v));if(l<0)return null;const c=a*this.direction.dot(SC.cross(Rl));if(c<0||l+c>o)return null;const d=-a*Rl.dot(RC);return d<0?null:this.at(d/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class je{constructor(t,e,n,r,s,o,a,l,c,d,u,h,f,m,_,p){je.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,r,s,o,a,l,c,d,u,h,f,m,_,p)}set(t,e,n,r,s,o,a,l,c,d,u,h,f,m,_,p){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=d,g[10]=u,g[14]=h,g[3]=f,g[7]=m,g[11]=_,g[15]=p,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new je).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/Mh.setFromMatrixColumn(t,0).length(),s=1/Mh.setFromMatrixColumn(t,1).length(),o=1/Mh.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,s=t.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),c=Math.sin(r),d=Math.cos(s),u=Math.sin(s);if("XYZ"===t.order){const h=o*d,f=o*u,m=a*d,_=a*u;e[0]=l*d,e[4]=-l*u,e[8]=c,e[1]=f+m*c,e[5]=h-_*c,e[9]=-a*l,e[2]=_-h*c,e[6]=m+f*c,e[10]=o*l}else if("YXZ"===t.order){const h=l*d,f=l*u,m=c*d,_=c*u;e[0]=h+_*a,e[4]=m*a-f,e[8]=o*c,e[1]=o*u,e[5]=o*d,e[9]=-a,e[2]=f*a-m,e[6]=_+h*a,e[10]=o*l}else if("ZXY"===t.order){const h=l*d,f=l*u,m=c*d,_=c*u;e[0]=h-_*a,e[4]=-o*u,e[8]=m+f*a,e[1]=f+m*a,e[5]=o*d,e[9]=_-h*a,e[2]=-o*c,e[6]=a,e[10]=o*l}else if("ZYX"===t.order){const h=o*d,f=o*u,m=a*d,_=a*u;e[0]=l*d,e[4]=m*c-f,e[8]=h*c+_,e[1]=l*u,e[5]=_*c+h,e[9]=f*c-m,e[2]=-c,e[6]=a*l,e[10]=o*l}else if("YZX"===t.order){const h=o*l,f=o*c,m=a*l,_=a*c;e[0]=l*d,e[4]=_-h*u,e[8]=m*u+f,e[1]=u,e[5]=o*d,e[9]=-a*d,e[2]=-c*d,e[6]=f*u+m,e[10]=h-_*u}else if("XZY"===t.order){const h=o*l,f=o*c,m=a*l,_=a*c;e[0]=l*d,e[4]=-u,e[8]=c*d,e[1]=h*u+_,e[5]=o*d,e[9]=f*u-m,e[2]=m*u-f,e[6]=a*d,e[10]=_*u+h}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(ooe,t,aoe)}lookAt(t,e,n){const r=this.elements;return Ss.subVectors(t,e),0===Ss.lengthSq()&&(Ss.z=1),Ss.normalize(),Cl.crossVectors(n,Ss),0===Cl.lengthSq()&&(1===Math.abs(n.z)?Ss.x+=1e-4:Ss.z+=1e-4,Ss.normalize(),Cl.crossVectors(n,Ss)),Cl.normalize(),Xv.crossVectors(Ss,Cl),r[0]=Cl.x,r[4]=Xv.x,r[8]=Ss.x,r[1]=Cl.y,r[5]=Xv.y,r[9]=Ss.y,r[2]=Cl.z,r[6]=Xv.z,r[10]=Ss.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],d=n[1],u=n[5],h=n[9],f=n[13],m=n[2],_=n[6],p=n[10],g=n[14],b=n[3],v=n[7],y=n[11],T=n[15],w=r[0],M=r[4],D=r[8],S=r[12],x=r[1],k=r[5],U=r[9],L=r[13],H=r[2],Y=r[6],V=r[10],q=r[14],z=r[3],X=r[7],se=r[11],Me=r[15];return s[0]=o*w+a*x+l*H+c*z,s[4]=o*M+a*k+l*Y+c*X,s[8]=o*D+a*U+l*V+c*se,s[12]=o*S+a*L+l*q+c*Me,s[1]=d*w+u*x+h*H+f*z,s[5]=d*M+u*k+h*Y+f*X,s[9]=d*D+u*U+h*V+f*se,s[13]=d*S+u*L+h*q+f*Me,s[2]=m*w+_*x+p*H+g*z,s[6]=m*M+_*k+p*Y+g*X,s[10]=m*D+_*U+p*V+g*se,s[14]=m*S+_*L+p*q+g*Me,s[3]=b*w+v*x+y*H+T*z,s[7]=b*M+v*k+y*Y+T*X,s[11]=b*D+v*U+y*V+T*se,s[15]=b*S+v*L+y*q+T*Me,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],s=t[12],o=t[1],a=t[5],l=t[9],c=t[13],d=t[2],u=t[6],h=t[10],f=t[14];return t[3]*(+s*l*u-r*c*u-s*a*h+n*c*h+r*a*f-n*l*f)+t[7]*(+e*l*f-e*c*h+s*o*h-r*o*f+r*c*d-s*l*d)+t[11]*(+e*c*u-e*a*f-s*o*u+n*o*f+s*a*d-n*c*d)+t[15]*(-r*a*d-e*l*u+e*a*h+r*o*u-n*o*h+n*l*d)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8],u=t[9],h=t[10],f=t[11],m=t[12],_=t[13],p=t[14],g=t[15],b=u*p*c-_*h*c+_*l*f-a*p*f-u*l*g+a*h*g,v=m*h*c-d*p*c-m*l*f+o*p*f+d*l*g-o*h*g,y=d*_*c-m*u*c+m*a*f-o*_*f-d*a*g+o*u*g,T=m*u*l-d*_*l-m*a*h+o*_*h+d*a*p-o*u*p,w=e*b+n*v+r*y+s*T;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/w;return t[0]=b*M,t[1]=(_*h*s-u*p*s-_*r*f+n*p*f+u*r*g-n*h*g)*M,t[2]=(a*p*s-_*l*s+_*r*c-n*p*c-a*r*g+n*l*g)*M,t[3]=(u*l*s-a*h*s-u*r*c+n*h*c+a*r*f-n*l*f)*M,t[4]=v*M,t[5]=(d*p*s-m*h*s+m*r*f-e*p*f-d*r*g+e*h*g)*M,t[6]=(m*l*s-o*p*s-m*r*c+e*p*c+o*r*g-e*l*g)*M,t[7]=(o*h*s-d*l*s+d*r*c-e*h*c-o*r*f+e*l*f)*M,t[8]=y*M,t[9]=(m*u*s-d*_*s-m*n*f+e*_*f+d*n*g-e*u*g)*M,t[10]=(o*_*s-m*a*s+m*n*c-e*_*c-o*n*g+e*a*g)*M,t[11]=(d*a*s-o*u*s-d*n*c+e*u*c+o*n*f-e*a*f)*M,t[12]=T*M,t[13]=(d*_*r-m*u*r+m*n*h-e*_*h-d*n*p+e*u*p)*M,t[14]=(m*a*r-o*_*r-m*n*l+e*_*l+o*n*p-e*a*p)*M,t[15]=(o*u*r-d*a*r+d*n*l-e*u*l-o*n*h+e*a*h)*M,this}scale(t){const e=this.elements,n=t.x,r=t.y,s=t.z;return e[0]*=n,e[4]*=r,e[8]*=s,e[1]*=n,e[5]*=r,e[9]*=s,e[2]*=n,e[6]*=r,e[10]*=s,e[3]*=n,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),s=1-n,o=t.x,a=t.y,l=t.z,c=s*o,d=s*a;return this.set(c*o+n,c*a-r*l,c*l+r*a,0,c*a+r*l,d*a+n,d*l-r*o,0,c*l-r*a,d*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,s,o){return this.set(1,n,s,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,s=e._x,o=e._y,a=e._z,l=e._w,c=s+s,d=o+o,u=a+a,h=s*c,f=s*d,m=s*u,_=o*d,p=o*u,g=a*u,b=l*c,v=l*d,y=l*u,T=n.x,w=n.y,M=n.z;return r[0]=(1-(_+g))*T,r[1]=(f+y)*T,r[2]=(m-v)*T,r[3]=0,r[4]=(f-y)*w,r[5]=(1-(h+g))*w,r[6]=(p+b)*w,r[7]=0,r[8]=(m+v)*M,r[9]=(p-b)*M,r[10]=(1-(h+_))*M,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let s=Mh.set(r[0],r[1],r[2]).length();const o=Mh.set(r[4],r[5],r[6]).length(),a=Mh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],_o.copy(this);const c=1/s,d=1/o,u=1/a;return _o.elements[0]*=c,_o.elements[1]*=c,_o.elements[2]*=c,_o.elements[4]*=d,_o.elements[5]*=d,_o.elements[6]*=d,_o.elements[8]*=u,_o.elements[9]*=u,_o.elements[10]*=u,e.setFromRotationMatrix(_o),n.x=s,n.y=o,n.z=a,this}makePerspective(t,e,n,r,s,o,a=Qo){const l=this.elements,c=2*s/(e-t),d=2*s/(n-r),u=(e+t)/(e-t),h=(n+r)/(n-r);let f,m;if(a===Qo)f=-(o+s)/(o-s),m=-2*o*s/(o-s);else{if(a!==fp)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);f=-o/(o-s),m=-o*s/(o-s)}return l[0]=c,l[4]=0,l[8]=u,l[12]=0,l[1]=0,l[5]=d,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,n,r,s,o,a=Qo){const l=this.elements,c=1/(e-t),d=1/(n-r),u=1/(o-s),h=(e+t)*c,f=(n+r)*d;let m,_;if(a===Qo)m=(o+s)*u,_=-2*u;else{if(a!==fp)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);m=s*u,_=-1*u}return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=_,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Mh=new C,_o=new je,ooe=new C(0,0,0),aoe=new C(1,1,1),Cl=new C,Xv=new C,Ss=new C,z3=new je,H3=new mi;let Bs=(()=>{class i{constructor(e=0,n=0,r=0,s=i.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,s=this._order){return this._x=e,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const s=e.elements,o=s[0],a=s[4],l=s[8],c=s[1],d=s[5],u=s[9],h=s[2],f=s[6],m=s[10];switch(n){case"XYZ":this._y=Math.asin(pn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,d),this._z=0);break;case"YXZ":this._x=Math.asin(-pn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(l,m),this._z=Math.atan2(c,d)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(pn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-pn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,m),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin(pn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,d),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(l,m));break;case"XZY":this._z=Math.asin(-pn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,d),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return z3.makeRotationFromQuaternion(e),this.setFromRotationMatrix(z3,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return H3.setFromEuler(this),this.setFromQuaternion(H3,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return i.DEFAULT_ORDER="XYZ",i})();class qv{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return!!(this.mask&t.mask)}isEnabled(t){return!!(this.mask&1<<t)}}let loe=0;const G3=new C,Sh=new mi,ka=new je,Yv=new C,bp=new C,coe=new C,doe=new mi,W3=new C(1,0,0),$3=new C(0,1,0),X3=new C(0,0,1),q3={type:"added"},uoe={type:"removed"},Rh={type:"childadded",child:null},CC={type:"childremoved",child:null};let Nt=(()=>{class i extends is{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:loe++}),this.uuid=Ms(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DEFAULT_UP.clone();const e=new C,n=new Bs,r=new mi,s=new C(1,1,1);n._onChange(function o(){r.setFromEuler(n,!1)}),r._onChange(function a(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new je},normalMatrix:{value:new Bt}}),this.matrix=new je,this.matrixWorld=new je,this.matrixAutoUpdate=i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new qv,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Sh.setFromAxisAngle(e,n),this.quaternion.multiply(Sh),this}rotateOnWorldAxis(e,n){return Sh.setFromAxisAngle(e,n),this.quaternion.premultiply(Sh),this}rotateX(e){return this.rotateOnAxis(W3,e)}rotateY(e){return this.rotateOnAxis($3,e)}rotateZ(e){return this.rotateOnAxis(X3,e)}translateOnAxis(e,n){return G3.copy(e).applyQuaternion(this.quaternion),this.position.add(G3.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(W3,e)}translateY(e){return this.translateOnAxis($3,e)}translateZ(e){return this.translateOnAxis(X3,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ka.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?Yv.copy(e):Yv.set(e,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),bp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ka.lookAt(bp,Yv,this.up):ka.lookAt(Yv,bp,this.up),this.quaternion.setFromRotationMatrix(ka),s&&(ka.extractRotation(s.matrixWorld),Sh.setFromRotationMatrix(ka),this.quaternion.premultiply(Sh.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(q3),Rh.child=e,this.dispatchEvent(Rh),Rh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(uoe),CC.child=e,this.dispatchEvent(CC),CC.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ka.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),ka.multiply(e.parent.matrixWorld)),e.applyMatrix4(ka),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(q3),Rh.child=e,this.dispatchEvent(Rh),Rh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(e,n);if(void 0!==a)return a}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bp,e,coe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bp,doe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;null!==n&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++){const o=n[r];(!0===o.matrixWorldAutoUpdate||!0===e)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(!0===e&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===n){const s=this.children;for(let o=0,a=s.length;o<a;o++){const l=s[o];!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=void 0===e||"string"==typeof e,r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),null!==this.boundingSphere&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),null!==this.boundingBox&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let d=0,u=c.length;d<u;d++)o(e.shapes,c[d]);else o(e.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,d=this.material.length;c<d;c++)l.push(o(e.materials,this.material[c]));s.material=l}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(e.animations,this.animations[l]))}if(n){const l=a(e.geometries),c=a(e.materials),d=a(e.textures),u=a(e.images),h=a(e.shapes),f=a(e.skeletons),m=a(e.animations),_=a(e.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),d.length>0&&(r.textures=d),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),m.length>0&&(r.animations=m),_.length>0&&(r.nodes=_)}return r.object=s,r;function a(l){const c=[];for(const d in l){const u=l[d];delete u.metadata,c.push(u)}return c}}clone(e){return(new this.constructor).copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===n)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}return i.DEFAULT_UP=new C(0,1,0),i.DEFAULT_MATRIX_AUTO_UPDATE=!0,i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,i})();const bo=new C,Fa=new C,EC=new C,La=new C,Ch=new C,Eh=new C,Y3=new C,AC=new C,DC=new C,IC=new C;class Rs{constructor(t=new C,e=new C,n=new C){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),bo.subVectors(t,e),r.cross(bo);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,n,r,s){bo.subVectors(r,e),Fa.subVectors(n,e),EC.subVectors(t,e);const o=bo.dot(bo),a=bo.dot(Fa),l=bo.dot(EC),c=Fa.dot(Fa),d=Fa.dot(EC),u=o*c-a*a;if(0===u)return s.set(0,0,0),null;const h=1/u,f=(c*l-a*d)*h,m=(o*d-a*l)*h;return s.set(1-f-m,m,f)}static containsPoint(t,e,n,r){return null!==this.getBarycoord(t,e,n,r,La)&&La.x>=0&&La.y>=0&&La.x+La.y<=1}static getInterpolation(t,e,n,r,s,o,a,l){return null===this.getBarycoord(t,e,n,r,La)?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,La.x),l.addScaledVector(o,La.y),l.addScaledVector(a,La.z),l)}static isFrontFacing(t,e,n,r){return bo.subVectors(n,e),Fa.subVectors(t,e),bo.cross(Fa).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return bo.subVectors(this.c,this.b),Fa.subVectors(this.a,this.b),.5*bo.cross(Fa).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Rs.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Rs.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,r,s){return Rs.getInterpolation(t,this.a,this.b,this.c,e,n,r,s)}containsPoint(t){return Rs.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Rs.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,s=this.c;let o,a;Ch.subVectors(r,n),Eh.subVectors(s,n),AC.subVectors(t,n);const l=Ch.dot(AC),c=Eh.dot(AC);if(l<=0&&c<=0)return e.copy(n);DC.subVectors(t,r);const d=Ch.dot(DC),u=Eh.dot(DC);if(d>=0&&u<=d)return e.copy(r);const h=l*u-d*c;if(h<=0&&l>=0&&d<=0)return o=l/(l-d),e.copy(n).addScaledVector(Ch,o);IC.subVectors(t,s);const f=Ch.dot(IC),m=Eh.dot(IC);if(m>=0&&f<=m)return e.copy(s);const _=f*c-l*m;if(_<=0&&c>=0&&m<=0)return a=c/(c-m),e.copy(n).addScaledVector(Eh,a);const p=d*m-f*u;if(p<=0&&u-d>=0&&f-m>=0)return Y3.subVectors(s,r),a=(u-d)/(u-d+(f-m)),e.copy(r).addScaledVector(Y3,a);const g=1/(p+_+h);return o=_*g,a=h*g,e.copy(n).addScaledVector(Ch,o).addScaledVector(Eh,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const Z3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},El={h:0,s:0,l:0},Zv={h:0,s:0,l:0};function PC(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+6*(t-i)*e:e<.5?t:e<2/3?i+6*(t-i)*(2/3-e):i}class Te{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const r=t;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=qn){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,xi.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r=xi.workingColorSpace){return this.r=t,this.g=e,this.b=n,xi.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r=xi.workingColorSpace){if(t=gC(t,1),e=pn(e,0,1),n=pn(n,0,1),0===e)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+e):n+e-n*e,o=2*n-s;this.r=PC(o,s,t+1/3),this.g=PC(o,s,t),this.b=PC(o,s,t-1/3)}return xi.toWorkingColorSpace(this,r),this}setStyle(t,e=qn){function n(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,e);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,e);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,e);if(6===o)return this.setHex(parseInt(s,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=qn){const n=Z3[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=vh(t.r),this.g=vh(t.g),this.b=vh(t.b),this}copyLinearToSRGB(t){return this.r=bC(t.r),this.g=bC(t.g),this.b=bC(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=qn){return xi.fromWorkingColorSpace(xr.copy(this),t),65536*Math.round(pn(255*xr.r,0,255))+256*Math.round(pn(255*xr.g,0,255))+Math.round(pn(255*xr.b,0,255))}getHexString(t=qn){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=xi.workingColorSpace){xi.fromWorkingColorSpace(xr.copy(this),e);const n=xr.r,r=xr.g,s=xr.b,o=Math.max(n,r,s),a=Math.min(n,r,s);let l,c;const d=(a+o)/2;if(a===o)l=0,c=0;else{const u=o-a;switch(c=d<=.5?u/(o+a):u/(2-o-a),o){case n:l=(r-s)/u+(r<s?6:0);break;case r:l=(s-n)/u+2;break;case s:l=(n-r)/u+4}l/=6}return t.h=l,t.s=c,t.l=d,t}getRGB(t,e=xi.workingColorSpace){return xi.fromWorkingColorSpace(xr.copy(this),e),t.r=xr.r,t.g=xr.g,t.b=xr.b,t}getStyle(t=qn){xi.fromWorkingColorSpace(xr.copy(this),t);const e=xr.r,n=xr.g,r=xr.b;return t!==qn?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(t,e,n){return this.getHSL(El),this.setHSL(El.h+t,El.s+e,El.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(El),t.getHSL(Zv);const n=mp(El.h,Zv.h,e),r=mp(El.s,Zv.s,e),s=mp(El.l,Zv.l,e);return this.setHSL(n,r,s),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,r=this.b,s=t.elements;return this.r=s[0]*e+s[3]*n+s[6]*r,this.g=s[1]*e+s[4]*n+s[7]*r,this.b=s[2]*e+s[5]*n+s[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const xr=new Te;Te.NAMES=Z3;let hoe=0;class kn extends is{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:hoe++}),this.uuid=Ms(),this.name="",this.type="Material",this.blending=Zo,this.side=Yo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=uh,this.blendDst=hh,this.blendEquation=es,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Te(0,0,0),this.blendAlpha=0,this.depthFunc=ip,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=fC,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Wc,this.stencilZFail=Wc,this.stencilZPass=Wc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Zo&&(n.blending=this.blending),this.side!==Yo&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==uh&&(n.blendSrc=this.blendSrc),this.blendDst!==hh&&(n.blendDst=this.blendDst),this.blendEquation!==es&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==ip&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==fC&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Wc&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Wc&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Wc&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const s=r(t.textures),o=r(t.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const r=e.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=e[s].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class Zn extends kn{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Te(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Bs,this.combine=np,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Oa=foe();function foe(){const i=new ArrayBuffer(4),t=new Float32Array(i),e=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(n[l]=0,n[256|l]=32768,r[l]=24,r[256|l]=24):c<-14?(n[l]=1024>>-c-14,n[256|l]=1024>>-c-14|32768,r[l]=-c-1,r[256|l]=-c-1):c<=15?(n[l]=c+15<<10,n[256|l]=c+15<<10|32768,r[l]=13,r[256|l]=13):c<128?(n[l]=31744,n[256|l]=64512,r[l]=24,r[256|l]=24):(n[l]=31744,n[256|l]=64512,r[l]=13,r[256|l]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,d=0;for(;!(8388608&c);)c<<=1,d-=8388608;c&=-8388609,d+=947912704,s[l]=c|d}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(a[l]=1024);return{floatView:t,uint32View:e,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function ns(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=pn(i,-65504,65504),Oa.floatView[0]=i;const t=Oa.uint32View[0],e=t>>23&511;return Oa.baseTable[e]+((8388607&t)>>Oa.shiftTable[e])}function vp(i){const t=i>>10;return Oa.uint32View[0]=Oa.mantissaTable[Oa.offsetTable[t]+(1023&i)]+Oa.exponentTable[t],Oa.floatView[0]}const moe={toHalfFloat:ns,fromHalfFloat:vp},Fn=new C,Kv=new $;class ui{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=hp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ts,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}get updateRange(){return O3("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Kv.fromBufferAttribute(this,e),Kv.applyMatrix3(t),this.setXY(e,Kv.x,Kv.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Fn.fromBufferAttribute(this,e),Fn.applyMatrix3(t),this.setXYZ(e,Fn.x,Fn.y,Fn.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Fn.fromBufferAttribute(this,e),Fn.applyMatrix4(t),this.setXYZ(e,Fn.x,Fn.y,Fn.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Fn.fromBufferAttribute(this,e),Fn.applyNormalMatrix(t),this.setXYZ(e,Fn.x,Fn.y,Fn.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Fn.fromBufferAttribute(this,e),Fn.transformDirection(t),this.setXYZ(e,Fn.x,Fn.y,Fn.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=Ur(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=jt(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Ur(e,this.array)),e}setX(t,e){return this.normalized&&(e=jt(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Ur(e,this.array)),e}setY(t,e){return this.normalized&&(e=jt(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Ur(e,this.array)),e}setZ(t,e){return this.normalized&&(e=jt(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Ur(e,this.array)),e}setW(t,e){return this.normalized&&(e=jt(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=jt(e,this.array),n=jt(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=jt(e,this.array),n=jt(n,this.array),r=jt(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,s){return t*=this.itemSize,this.normalized&&(e=jt(e,this.array),n=jt(n,this.array),r=jt(r,this.array),s=jt(s,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==hp&&(t.usage=this.usage),t}}class poe extends ui{constructor(t,e,n){super(new Int8Array(t),e,n)}}class goe extends ui{constructor(t,e,n){super(new Uint8Array(t),e,n)}}class _oe extends ui{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}}class boe extends ui{constructor(t,e,n){super(new Int16Array(t),e,n)}}class kC extends ui{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class voe extends ui{constructor(t,e,n){super(new Int32Array(t),e,n)}}class FC extends ui{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class yoe extends ui{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}getX(t){let e=vp(this.array[t*this.itemSize]);return this.normalized&&(e=Ur(e,this.array)),e}setX(t,e){return this.normalized&&(e=jt(e,this.array)),this.array[t*this.itemSize]=ns(e),this}getY(t){let e=vp(this.array[t*this.itemSize+1]);return this.normalized&&(e=Ur(e,this.array)),e}setY(t,e){return this.normalized&&(e=jt(e,this.array)),this.array[t*this.itemSize+1]=ns(e),this}getZ(t){let e=vp(this.array[t*this.itemSize+2]);return this.normalized&&(e=Ur(e,this.array)),e}setZ(t,e){return this.normalized&&(e=jt(e,this.array)),this.array[t*this.itemSize+2]=ns(e),this}getW(t){let e=vp(this.array[t*this.itemSize+3]);return this.normalized&&(e=Ur(e,this.array)),e}setW(t,e){return this.normalized&&(e=jt(e,this.array)),this.array[t*this.itemSize+3]=ns(e),this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=jt(e,this.array),n=jt(n,this.array)),this.array[t+0]=ns(e),this.array[t+1]=ns(n),this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=jt(e,this.array),n=jt(n,this.array),r=jt(r,this.array)),this.array[t+0]=ns(e),this.array[t+1]=ns(n),this.array[t+2]=ns(r),this}setXYZW(t,e,n,r,s){return t*=this.itemSize,this.normalized&&(e=jt(e,this.array),n=jt(n,this.array),r=jt(r,this.array),s=jt(s,this.array)),this.array[t+0]=ns(e),this.array[t+1]=ns(n),this.array[t+2]=ns(r),this.array[t+3]=ns(s),this}}class qe extends ui{constructor(t,e,n){super(new Float32Array(t),e,n)}}let xoe=0;const Us=new je,LC=new Nt,Ah=new C,Cs=new ir,yp=new ir,rr=new C;class pt extends is{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:xoe++}),this.uuid=Ms(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(k3(t)?FC:kC)(t,1):t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new Bt).getNormalMatrix(t);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Us.makeRotationFromQuaternion(t),this.applyMatrix4(Us),this}rotateX(t){return Us.makeRotationX(t),this.applyMatrix4(Us),this}rotateY(t){return Us.makeRotationY(t),this.applyMatrix4(Us),this}rotateZ(t){return Us.makeRotationZ(t),this.applyMatrix4(Us),this}translate(t,e,n){return Us.makeTranslation(t,e,n),this.applyMatrix4(Us),this}scale(t,e,n){return Us.makeScale(t,e,n),this.applyMatrix4(Us),this}lookAt(t){return LC.lookAt(t),LC.updateMatrix(),this.applyMatrix4(LC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ah).negate(),this.translate(Ah.x,Ah.y,Ah.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const s=t[n];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new qe(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ir);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new C(-1/0,-1/0,-1/0),new C(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++)Cs.setFromBufferAttribute(e[n]),this.morphTargetsRelative?(rr.addVectors(this.boundingBox.min,Cs.min),this.boundingBox.expandByPoint(rr),rr.addVectors(this.boundingBox.max,Cs.max),this.boundingBox.expandByPoint(rr)):(this.boundingBox.expandByPoint(Cs.min),this.boundingBox.expandByPoint(Cs.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new nr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new C,1/0);if(t){const n=this.boundingSphere.center;if(Cs.setFromBufferAttribute(t),e)for(let s=0,o=e.length;s<o;s++)yp.setFromBufferAttribute(e[s]),this.morphTargetsRelative?(rr.addVectors(Cs.min,yp.min),Cs.expandByPoint(rr),rr.addVectors(Cs.max,yp.max),Cs.expandByPoint(rr)):(Cs.expandByPoint(yp.min),Cs.expandByPoint(yp.max));Cs.getCenter(n);let r=0;for(let s=0,o=t.count;s<o;s++)rr.fromBufferAttribute(t,s),r=Math.max(r,n.distanceToSquared(rr));if(e)for(let s=0,o=e.length;s<o;s++){const a=e[s],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)rr.fromBufferAttribute(a,c),l&&(Ah.fromBufferAttribute(t,c),rr.add(Ah)),r=Math.max(r,n.distanceToSquared(rr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.position,r=e.normal,s=e.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new ui(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let D=0;D<n.count;D++)a[D]=new C,l[D]=new C;const c=new C,d=new C,u=new C,h=new $,f=new $,m=new $,_=new C,p=new C;function g(D,S,x){c.fromBufferAttribute(n,D),d.fromBufferAttribute(n,S),u.fromBufferAttribute(n,x),h.fromBufferAttribute(s,D),f.fromBufferAttribute(s,S),m.fromBufferAttribute(s,x),d.sub(c),u.sub(c),f.sub(h),m.sub(h);const k=1/(f.x*m.y-m.x*f.y);isFinite(k)&&(_.copy(d).multiplyScalar(m.y).addScaledVector(u,-f.y).multiplyScalar(k),p.copy(u).multiplyScalar(f.x).addScaledVector(d,-m.x).multiplyScalar(k),a[D].add(_),a[S].add(_),a[x].add(_),l[D].add(p),l[S].add(p),l[x].add(p))}let b=this.groups;0===b.length&&(b=[{start:0,count:t.count}]);for(let D=0,S=b.length;D<S;++D){const x=b[D],k=x.start;for(let L=k,H=k+x.count;L<H;L+=3)g(t.getX(L+0),t.getX(L+1),t.getX(L+2))}const v=new C,y=new C,T=new C,w=new C;function M(D){T.fromBufferAttribute(r,D),w.copy(T);const S=a[D];v.copy(S),v.sub(T.multiplyScalar(T.dot(S))).normalize(),y.crossVectors(w,S);const k=y.dot(l[D])<0?-1:1;o.setXYZW(D,v.x,v.y,v.z,k)}for(let D=0,S=b.length;D<S;++D){const x=b[D],k=x.start;for(let L=k,H=k+x.count;L<H;L+=3)M(t.getX(L+0)),M(t.getX(L+1)),M(t.getX(L+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new ui(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let h=0,f=n.count;h<f;h++)n.setXYZ(h,0,0,0);const r=new C,s=new C,o=new C,a=new C,l=new C,c=new C,d=new C,u=new C;if(t)for(let h=0,f=t.count;h<f;h+=3){const m=t.getX(h+0),_=t.getX(h+1),p=t.getX(h+2);r.fromBufferAttribute(e,m),s.fromBufferAttribute(e,_),o.fromBufferAttribute(e,p),d.subVectors(o,s),u.subVectors(r,s),d.cross(u),a.fromBufferAttribute(n,m),l.fromBufferAttribute(n,_),c.fromBufferAttribute(n,p),a.add(d),l.add(d),c.add(d),n.setXYZ(m,a.x,a.y,a.z),n.setXYZ(_,l.x,l.y,l.z),n.setXYZ(p,c.x,c.y,c.z)}else for(let h=0,f=e.count;h<f;h+=3)r.fromBufferAttribute(e,h+0),s.fromBufferAttribute(e,h+1),o.fromBufferAttribute(e,h+2),d.subVectors(o,s),u.subVectors(r,s),d.cross(u),n.setXYZ(h+0,d.x,d.y,d.z),n.setXYZ(h+1,d.x,d.y,d.z),n.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)rr.fromBufferAttribute(t,e),rr.normalize(),t.setXYZ(e,rr.x,rr.y,rr.z)}toNonIndexed(){function t(a,l){const c=a.array,d=a.itemSize,u=a.normalized,h=new c.constructor(l.length*d);let f=0,m=0;for(let _=0,p=l.length;_<p;_++){f=a.isInterleavedBufferAttribute?l[_]*a.data.stride+a.offset:l[_]*d;for(let g=0;g<d;g++)h[m++]=c[f++]}return new ui(h,d,u)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new pt,n=this.index.array,r=this.attributes;for(const a in r){const c=t(r[a],n);e.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let d=0,u=c.length;d<u;d++){const f=t(c[d],n);l.push(f)}e.morphAttributes[a]=l}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];e.addGroup(c.start,c.count,c.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(t[c]=l[c]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const l in n)t.data.attributes[l]=n[l].toJSON(t.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let u=0,h=c.length;u<h;u++)d.push(c[u].toJSON(t.data));d.length>0&&(r[l]=d,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const c in r)this.setAttribute(c,r[c].clone(e));const s=t.morphAttributes;for(const c in s){const d=[],u=s[c];for(let h=0,f=u.length;h<f;h++)d.push(u[h].clone(e));this.morphAttributes[c]=d}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let c=0,d=o.length;c<d;c++){const u=o[c];this.addGroup(u.start,u.count,u.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=t.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const K3=new je,Kc=new Zc,Qv=new nr,Q3=new C,Dh=new C,Ih=new C,Ph=new C,OC=new C,Jv=new C,ey=new $,ty=new $,iy=new $,J3=new C,eU=new C,tU=new C,ny=new C,ry=new C;class Be extends Nt{constructor(t=new pt,e=new Zn){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(t,e){const n=this.geometry,s=n.morphAttributes.position,o=n.morphTargetsRelative;e.fromBufferAttribute(n.attributes.position,t);const a=this.morphTargetInfluences;if(s&&a){Jv.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const d=a[l];0!==d&&(OC.fromBufferAttribute(s[l],t),Jv.addScaledVector(o?OC:OC.sub(e),d))}e.add(Jv)}return e}raycast(t,e){const n=this.geometry,s=this.matrixWorld;void 0!==this.material&&(null===n.boundingSphere&&n.computeBoundingSphere(),Qv.copy(n.boundingSphere),Qv.applyMatrix4(s),Kc.copy(t.ray).recast(t.near),(!1!==Qv.containsPoint(Kc.origin)||!(null===Kc.intersectSphere(Qv,Q3)||Kc.origin.distanceToSquared(Q3)>(t.far-t.near)**2))&&(K3.copy(s).invert(),Kc.copy(t.ray).applyMatrix4(K3),(null===n.boundingBox||!1!==Kc.intersectsBox(n.boundingBox))&&this._computeIntersections(t,e,Kc)))}_computeIntersections(t,e,n){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,d=s.attributes.uv1,u=s.attributes.normal,h=s.groups,f=s.drawRange;if(null!==a)if(Array.isArray(o))for(let m=0,_=h.length;m<_;m++){const p=h[m],g=o[p.materialIndex];for(let y=Math.max(p.start,f.start),T=Math.min(a.count,Math.min(p.start+p.count,f.start+f.count));y<T;y+=3)r=sy(this,g,t,n,c,d,u,a.getX(y),a.getX(y+1),a.getX(y+2)),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=p.materialIndex,e.push(r))}else for(let p=Math.max(0,f.start),g=Math.min(a.count,f.start+f.count);p<g;p+=3)r=sy(this,o,t,n,c,d,u,a.getX(p),a.getX(p+1),a.getX(p+2)),r&&(r.faceIndex=Math.floor(p/3),e.push(r));else if(void 0!==l)if(Array.isArray(o))for(let m=0,_=h.length;m<_;m++){const p=h[m],g=o[p.materialIndex];for(let y=Math.max(p.start,f.start),T=Math.min(l.count,Math.min(p.start+p.count,f.start+f.count));y<T;y+=3)r=sy(this,g,t,n,c,d,u,y,y+1,y+2),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=p.materialIndex,e.push(r))}else for(let p=Math.max(0,f.start),g=Math.min(l.count,f.start+f.count);p<g;p+=3)r=sy(this,o,t,n,c,d,u,p,p+1,p+2),r&&(r.faceIndex=Math.floor(p/3),e.push(r))}}function sy(i,t,e,n,r,s,o,a,l,c){i.getVertexPosition(a,Dh),i.getVertexPosition(l,Ih),i.getVertexPosition(c,Ph);const d=function woe(i,t,e,n,r,s,o,a){let l;if(l=t.side===jr?n.intersectTriangle(o,s,r,!0,a):n.intersectTriangle(r,s,o,t.side===Yo,a),null===l)return null;ry.copy(a),ry.applyMatrix4(i.matrixWorld);const c=e.ray.origin.distanceTo(ry);return c<e.near||c>e.far?null:{distance:c,point:ry.clone(),object:i}}(i,t,e,n,Dh,Ih,Ph,ny);if(d){r&&(ey.fromBufferAttribute(r,a),ty.fromBufferAttribute(r,l),iy.fromBufferAttribute(r,c),d.uv=Rs.getInterpolation(ny,Dh,Ih,Ph,ey,ty,iy,new $)),s&&(ey.fromBufferAttribute(s,a),ty.fromBufferAttribute(s,l),iy.fromBufferAttribute(s,c),d.uv1=Rs.getInterpolation(ny,Dh,Ih,Ph,ey,ty,iy,new $)),o&&(J3.fromBufferAttribute(o,a),eU.fromBufferAttribute(o,l),tU.fromBufferAttribute(o,c),d.normal=Rs.getInterpolation(ny,Dh,Ih,Ph,J3,eU,tU,new C),d.normal.dot(n.direction)>0&&d.normal.multiplyScalar(-1));const u={a,b:l,c,normal:new C,materialIndex:0};Rs.getNormal(Dh,Ih,Ph,u.normal),d.face=u}return d}class Ki extends pt{constructor(t=1,e=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],d=[],u=[];let h=0,f=0;function m(_,p,g,b,v,y,T,w,M,D,S){const x=y/M,k=T/D,U=y/2,L=T/2,H=w/2,Y=M+1,V=D+1;let q=0,z=0;const X=new C;for(let se=0;se<V;se++){const Me=se*k-L;for(let Ve=0;Ve<Y;Ve++)X[_]=(Ve*x-U)*b,X[p]=Me*v,X[g]=H,c.push(X.x,X.y,X.z),X[_]=0,X[p]=0,X[g]=w>0?1:-1,d.push(X.x,X.y,X.z),u.push(Ve/M),u.push(1-se/D),q+=1}for(let se=0;se<D;se++)for(let Me=0;Me<M;Me++){const Qe=h+Me+Y*(se+1),W=h+(Me+1)+Y*(se+1),be=h+(Me+1)+Y*se;l.push(h+Me+Y*se,Qe,be),l.push(Qe,W,be),z+=6}a.addGroup(f,z,S),f+=z,h+=q}m("z","y","x",-1,-1,n,e,t,o,s,0),m("z","y","x",1,-1,n,e,-t,o,s,1),m("x","z","y",1,1,t,n,e,r,o,2),m("x","z","y",1,-1,t,n,-e,r,o,3),m("x","y","z",1,-1,t,e,n,r,s,4),m("x","y","z",-1,-1,t,e,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new qe(c,3)),this.setAttribute("normal",new qe(d,3)),this.setAttribute("uv",new qe(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ki(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function kh(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const r=i[e][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][n]=null):t[e][n]=r.clone():t[e][n]=Array.isArray(r)?r.slice():r}}return t}function Vr(i){const t={};for(let e=0;e<i.length;e++){const n=kh(i[e]);for(const r in n)t[r]=n[r]}return t}function iU(i){const t=i.getRenderTarget();return null===t?i.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:xi.workingColorSpace}const Rn={clone:kh,merge:Vr};class ei extends kn{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=kh(t.uniforms),this.uniformsGroups=function Toe(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;e.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class xp extends Nt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new je,this.projectionMatrix=new je,this.projectionMatrixInverse=new je,this.coordinateSystem=Qo}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Al=new C,nU=new $,rU=new $;class Cn extends xp{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*_h*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*$c*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*_h*Math.atan(Math.tan(.5*$c*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){Al.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(Al.x,Al.y).multiplyScalar(-t/Al.z),Al.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Al.x,Al.y).multiplyScalar(-t/Al.z)}getViewSize(t,e){return this.getViewBounds(t,nU,rU),e.subVectors(rU,nU)}setViewOffset(t,e,n,r,s,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*$c*this.fov)/this.zoom,n=2*e,r=this.aspect*n,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,e-=o.offsetY*n/c,r*=o.width/l,n*=o.height/c}const a=this.filmOffset;0!==a&&(s+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}class sU extends Nt{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Cn(-90,1,t,e);r.layers=this.layers,this.add(r);const s=new Cn(-90,1,t,e);s.layers=this.layers,this.add(s);const o=new Cn(-90,1,t,e);o.layers=this.layers,this.add(o);const a=new Cn(-90,1,t,e);a.layers=this.layers,this.add(a);const l=new Cn(-90,1,t,e);l.layers=this.layers,this.add(l);const c=new Cn(-90,1,t,e);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,r,s,o,a,l]=e;for(const c of e)this.remove(c);if(t===Qo)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else{if(t!==fp)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1)}for(const c of e)this.add(c),c.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,d]=this.children,u=t.getRenderTarget(),h=t.getActiveCubeFace(),f=t.getActiveMipmapLevel(),m=t.xr.enabled;t.xr.enabled=!1;const _=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,r),t.render(e,s),t.setRenderTarget(n,1,r),t.render(e,o),t.setRenderTarget(n,2,r),t.render(e,a),t.setRenderTarget(n,3,r),t.render(e,l),t.setRenderTarget(n,4,r),t.render(e,c),n.texture.generateMipmaps=_,t.setRenderTarget(n,5,r),t.render(e,d),t.setRenderTarget(u,h,f),t.xr.enabled=m,n.texture.needsPMREMUpdate=!0}}class wp extends Sn{constructor(t,e,n,r,s,o,a,l,c,d){super(t=void 0!==t?t:[],e=void 0!==e?e:Ea,n,r,s,o,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class oU extends gi{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1};this.texture=new wp([n,n,n,n,n,n],e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:fn}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Ki(5,5,5),s=new ei({name:"CubemapFromEquirect",uniforms:kh(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:jr,blending:oi});s.uniforms.tEquirect.value=e;const o=new Be(r,s),a=e.minFilter;return e.minFilter===js&&(e.minFilter=fn),new sU(1,10,this).update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,r){const s=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(s)}}const NC=new C,Roe=new C,Coe=new Bt;class Vs{constructor(t=new C(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=NC.subVectors(n,e).cross(Roe.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(NC),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:e.copy(t.start).addScaledVector(n,s)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Coe.getNormalMatrix(t),r=this.coplanarPoint(NC).applyMatrix4(t),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Qc=new nr,oy=new C;class Tp{constructor(t=new Vs,e=new Vs,n=new Vs,r=new Vs,s=new Vs,o=new Vs){this.planes=[t,e,n,r,s,o]}set(t,e,n,r,s,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=Qo){const n=this.planes,r=t.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],d=r[5],u=r[6],h=r[7],f=r[8],m=r[9],_=r[10],p=r[11],g=r[12],b=r[13],v=r[14],y=r[15];if(n[0].setComponents(l-s,h-c,p-f,y-g).normalize(),n[1].setComponents(l+s,h+c,p+f,y+g).normalize(),n[2].setComponents(l+o,h+d,p+m,y+b).normalize(),n[3].setComponents(l-o,h-d,p-m,y-b).normalize(),n[4].setComponents(l-a,h-u,p-_,y-v).normalize(),e===Qo)n[5].setComponents(l+a,h+u,p+_,y+v).normalize();else{if(e!==fp)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);n[5].setComponents(a,u,_,v).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),Qc.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),Qc.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Qc)}intersectsSprite(t){return Qc.center.set(0,0,0),Qc.radius=.7071067811865476,Qc.applyMatrix4(t.matrixWorld),this.intersectsSphere(Qc)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(oy.x=r.normal.x>0?t.max.x:t.min.x,oy.y=r.normal.y>0?t.max.y:t.min.y,oy.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(oy)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function aU(){let i=null,t=!1,e=null,n=null;function r(s,o){e(s,o),n=i.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==e&&(n=i.requestAnimationFrame(r),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){i=s}}}function Eoe(i){const t=new WeakMap;return{get:function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),t.get(a)},remove:function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=t.get(a);l&&(i.deleteBuffer(l.buffer),t.delete(a))},update:function o(a,l){if(a.isGLBufferAttribute){const d=t.get(a);return void((!d||d.version<a.version)&&t.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version}))}a.isInterleavedBufferAttribute&&(a=a.data);const c=t.get(a);if(void 0===c)t.set(a,function e(a,l){const c=a.array,d=a.usage,u=c.byteLength,h=i.createBuffer();let f;if(i.bindBuffer(l,h),i.bufferData(l,c,d),a.onUploadCallback(),c instanceof Float32Array)f=i.FLOAT;else if(c instanceof Uint16Array)f=a.isFloat16BufferAttribute?i.HALF_FLOAT:i.UNSIGNED_SHORT;else if(c instanceof Int16Array)f=i.SHORT;else if(c instanceof Uint32Array)f=i.UNSIGNED_INT;else if(c instanceof Int32Array)f=i.INT;else if(c instanceof Int8Array)f=i.BYTE;else if(c instanceof Uint8Array)f=i.UNSIGNED_BYTE;else{if(!(c instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);f=i.UNSIGNED_BYTE}return{buffer:h,type:f,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:u}}(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function n(a,l,c){const d=l.array,u=l._updateRange,h=l.updateRanges;if(i.bindBuffer(c,a),-1===u.count&&0===h.length&&i.bufferSubData(c,0,d),0!==h.length){for(let f=0,m=h.length;f<m;f++){const _=h[f];i.bufferSubData(c,_.start*d.BYTES_PER_ELEMENT,d,_.start,_.count)}l.clearUpdateRanges()}-1!==u.count&&(i.bufferSubData(c,u.offset*d.BYTES_PER_ELEMENT,d,u.offset,u.count),u.count=-1),l.onUploadCallback()})(c.buffer,a,l),c.version=a.version}}}}class Dl extends pt{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const s=t/2,o=e/2,a=Math.floor(n),l=Math.floor(r),c=a+1,d=l+1,u=t/a,h=e/l,f=[],m=[],_=[],p=[];for(let g=0;g<d;g++){const b=g*h-o;for(let v=0;v<c;v++)m.push(v*u-s,-b,0),_.push(0,0,1),p.push(v/a),p.push(1-g/l)}for(let g=0;g<l;g++)for(let b=0;b<a;b++){const y=b+c*(g+1),T=b+1+c*(g+1),w=b+1+c*g;f.push(b+c*g,y,w),f.push(y,T,w)}this.setIndex(f),this.setAttribute("position",new qe(m,3)),this.setAttribute("normal",new qe(_,3)),this.setAttribute("uv",new qe(p,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Dl(t.width,t.height,t.widthSegments,t.heightSegments)}}const Gt={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[MORPHTARGETS_COUNT];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t#endif\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\t#ifndef USE_INSTANCING_MORPH\n\t\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\t#endif\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Ge={common:{diffuse:{value:new Te(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Bt},alphaMap:{value:null},alphaMapTransform:{value:new Bt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Bt}},envmap:{envMap:{value:null},envMapRotation:{value:new Bt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Bt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Bt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Bt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Bt},normalScale:{value:new $(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Bt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Bt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Bt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Bt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Te(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Te(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Bt},alphaTest:{value:0},uvTransform:{value:new Bt}},sprite:{diffuse:{value:new Te(16777215)},opacity:{value:1},center:{value:new $(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Bt},alphaMap:{value:null},alphaMapTransform:{value:new Bt},alphaTest:{value:0}}},vo={basic:{uniforms:Vr([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.fog]),vertexShader:Gt.meshbasic_vert,fragmentShader:Gt.meshbasic_frag},lambert:{uniforms:Vr([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,Ge.lights,{emissive:{value:new Te(0)}}]),vertexShader:Gt.meshlambert_vert,fragmentShader:Gt.meshlambert_frag},phong:{uniforms:Vr([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,Ge.lights,{emissive:{value:new Te(0)},specular:{value:new Te(1118481)},shininess:{value:30}}]),vertexShader:Gt.meshphong_vert,fragmentShader:Gt.meshphong_frag},standard:{uniforms:Vr([Ge.common,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.roughnessmap,Ge.metalnessmap,Ge.fog,Ge.lights,{emissive:{value:new Te(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Gt.meshphysical_vert,fragmentShader:Gt.meshphysical_frag},toon:{uniforms:Vr([Ge.common,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.gradientmap,Ge.fog,Ge.lights,{emissive:{value:new Te(0)}}]),vertexShader:Gt.meshtoon_vert,fragmentShader:Gt.meshtoon_frag},matcap:{uniforms:Vr([Ge.common,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,{matcap:{value:null}}]),vertexShader:Gt.meshmatcap_vert,fragmentShader:Gt.meshmatcap_frag},points:{uniforms:Vr([Ge.points,Ge.fog]),vertexShader:Gt.points_vert,fragmentShader:Gt.points_frag},dashed:{uniforms:Vr([Ge.common,Ge.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Gt.linedashed_vert,fragmentShader:Gt.linedashed_frag},depth:{uniforms:Vr([Ge.common,Ge.displacementmap]),vertexShader:Gt.depth_vert,fragmentShader:Gt.depth_frag},normal:{uniforms:Vr([Ge.common,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,{opacity:{value:1}}]),vertexShader:Gt.meshnormal_vert,fragmentShader:Gt.meshnormal_frag},sprite:{uniforms:Vr([Ge.sprite,Ge.fog]),vertexShader:Gt.sprite_vert,fragmentShader:Gt.sprite_frag},background:{uniforms:{uvTransform:{value:new Bt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Gt.background_vert,fragmentShader:Gt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Bt}},vertexShader:Gt.backgroundCube_vert,fragmentShader:Gt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Gt.cube_vert,fragmentShader:Gt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Gt.equirect_vert,fragmentShader:Gt.equirect_frag},distanceRGBA:{uniforms:Vr([Ge.common,Ge.displacementmap,{referencePosition:{value:new C},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Gt.distanceRGBA_vert,fragmentShader:Gt.distanceRGBA_frag},shadow:{uniforms:Vr([Ge.lights,Ge.fog,{color:{value:new Te(0)},opacity:{value:1}}]),vertexShader:Gt.shadow_vert,fragmentShader:Gt.shadow_frag}};vo.physical={uniforms:Vr([vo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Bt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Bt},clearcoatNormalScale:{value:new $(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Bt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Bt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Bt},sheen:{value:0},sheenColor:{value:new Te(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Bt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Bt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Bt},transmissionSamplerSize:{value:new $},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Bt},attenuationDistance:{value:0},attenuationColor:{value:new Te(0)},specularColor:{value:new Te(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Bt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Bt},anisotropyVector:{value:new $},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Bt}}]),vertexShader:Gt.meshphysical_vert,fragmentShader:Gt.meshphysical_frag};const ay={r:0,b:0,g:0},Jc=new Bs,Ele=new je;function Ale(i,t,e,n,r,s,o){const a=new Te(0);let c,d,l=!0===s?0:1,u=null,h=0,f=null;function m(b){let v=!0===b.isScene?b.background:null;return v&&v.isTexture&&(v=(b.backgroundBlurriness>0?e:t).get(v)),v}function g(b,v){b.getRGB(ay,iU(i)),n.buffers.color.setClear(ay.r,ay.g,ay.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(b,v=1){a.set(b),l=v,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(b){l=b,g(a,l)},render:function _(b){let v=!1;const y=m(b);null===y?g(a,l):y&&y.isColor&&(g(y,1),v=!0);const T=i.xr.getEnvironmentBlendMode();"additive"===T?n.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===T&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||v)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil)},addToRenderList:function p(b,v){const y=m(v);y&&(y.isCubeTexture||y.mapping===fh)?(void 0===d&&(d=new Be(new Ki(1,1,1),new ei({name:"BackgroundCubeMaterial",uniforms:kh(vo.backgroundCube.uniforms),vertexShader:vo.backgroundCube.vertexShader,fragmentShader:vo.backgroundCube.fragmentShader,side:jr,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(T,w,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),Jc.copy(v.backgroundRotation),Jc.x*=-1,Jc.y*=-1,Jc.z*=-1,y.isCubeTexture&&!1===y.isRenderTargetTexture&&(Jc.y*=-1,Jc.z*=-1),d.material.uniforms.envMap.value=y,d.material.uniforms.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,d.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(Ele.makeRotationFromEuler(Jc)),d.material.toneMapped=xi.getTransfer(y.colorSpace)!==Hi,(u!==y||h!==y.version||f!==i.toneMapping)&&(d.material.needsUpdate=!0,u=y,h=y.version,f=i.toneMapping),d.layers.enableAll(),b.unshift(d,d.geometry,d.material,0,0,null)):y&&y.isTexture&&(void 0===c&&(c=new Be(new Dl(2,2),new ei({name:"BackgroundMaterial",uniforms:kh(vo.background.uniforms),vertexShader:vo.background.vertexShader,fragmentShader:vo.background.fragmentShader,side:Yo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=y,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=xi.getTransfer(y.colorSpace)!==Hi,!0===y.matrixAutoUpdate&&y.updateMatrix(),c.material.uniforms.uvTransform.value.copy(y.matrix),(u!==y||h!==y.version||f!==i.toneMapping)&&(c.material.needsUpdate=!0,u=y,h=y.version,f=i.toneMapping),c.layers.enableAll(),b.unshift(c,c.geometry,c.material,0,0,null))}}}function Dle(i,t){const e=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=h(null);let s=r,o=!1;function c(x){return i.bindVertexArray(x)}function d(x){return i.deleteVertexArray(x)}function h(x){const k=[],U=[],L=[];for(let H=0;H<e;H++)k[H]=0,U[H]=0,L[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:U,attributeDivisors:L,object:x,attributes:{},index:null}}function _(){const x=s.newAttributes;for(let k=0,U=x.length;k<U;k++)x[k]=0}function p(x){g(x,0)}function g(x,k){const L=s.enabledAttributes,H=s.attributeDivisors;s.newAttributes[x]=1,0===L[x]&&(i.enableVertexAttribArray(x),L[x]=1),H[x]!==k&&(i.vertexAttribDivisor(x,k),H[x]=k)}function b(){const x=s.newAttributes,k=s.enabledAttributes;for(let U=0,L=k.length;U<L;U++)k[U]!==x[U]&&(i.disableVertexAttribArray(U),k[U]=0)}function v(x,k,U,L,H,Y,V){!0===V?i.vertexAttribIPointer(x,k,U,H,Y):i.vertexAttribPointer(x,k,U,L,H,Y)}function D(){S(),o=!0,s!==r&&(s=r,c(s.object))}function S(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function a(x,k,U,L,H){let Y=!1;const V=function u(x,k,U){const L=!0===U.wireframe;let H=n[x.id];void 0===H&&(H={},n[x.id]=H);let Y=H[k.id];void 0===Y&&(Y={},H[k.id]=Y);let V=Y[L];return void 0===V&&(V=h(function l(){return i.createVertexArray()}()),Y[L]=V),V}(L,U,k);s!==V&&(s=V,c(s.object)),Y=function f(x,k,U,L){const H=s.attributes,Y=k.attributes;let V=0;const q=U.getAttributes();for(const z in q)if(q[z].location>=0){const se=H[z];let Me=Y[z];if(void 0===Me&&("instanceMatrix"===z&&x.instanceMatrix&&(Me=x.instanceMatrix),"instanceColor"===z&&x.instanceColor&&(Me=x.instanceColor)),void 0===se||se.attribute!==Me||Me&&se.data!==Me.data)return!0;V++}return s.attributesNum!==V||s.index!==L}(x,L,U,H),Y&&function m(x,k,U,L){const H={},Y=k.attributes;let V=0;const q=U.getAttributes();for(const z in q)if(q[z].location>=0){let se=Y[z];void 0===se&&("instanceMatrix"===z&&x.instanceMatrix&&(se=x.instanceMatrix),"instanceColor"===z&&x.instanceColor&&(se=x.instanceColor));const Me={};Me.attribute=se,se&&se.data&&(Me.data=se.data),H[z]=Me,V++}s.attributes=H,s.attributesNum=V,s.index=L}(x,L,U,H),null!==H&&t.update(H,i.ELEMENT_ARRAY_BUFFER),(Y||o)&&(o=!1,function y(x,k,U,L){_();const H=L.attributes,Y=U.getAttributes(),V=k.defaultAttributeValues;for(const q in Y){const z=Y[q];if(z.location>=0){let X=H[q];if(void 0===X&&("instanceMatrix"===q&&x.instanceMatrix&&(X=x.instanceMatrix),"instanceColor"===q&&x.instanceColor&&(X=x.instanceColor)),void 0!==X){const se=X.normalized,Me=X.itemSize,Ve=t.get(X);if(void 0===Ve)continue;const Qe=Ve.buffer,W=Ve.type,be=Ve.bytesPerElement,Ie=W===i.INT||W===i.UNSIGNED_INT||X.gpuType===IR;if(X.isInterleavedBufferAttribute){const N=X.data,me=N.stride,Ae=X.offset;if(N.isInstancedInterleavedBuffer){for(let j=0;j<z.locationSize;j++)g(z.location+j,N.meshPerAttribute);!0!==x.isInstancedMesh&&void 0===L._maxInstanceCount&&(L._maxInstanceCount=N.meshPerAttribute*N.count)}else for(let j=0;j<z.locationSize;j++)p(z.location+j);i.bindBuffer(i.ARRAY_BUFFER,Qe);for(let j=0;j<z.locationSize;j++)v(z.location+j,Me/z.locationSize,W,se,me*be,(Ae+Me/z.locationSize*j)*be,Ie)}else{if(X.isInstancedBufferAttribute){for(let N=0;N<z.locationSize;N++)g(z.location+N,X.meshPerAttribute);!0!==x.isInstancedMesh&&void 0===L._maxInstanceCount&&(L._maxInstanceCount=X.meshPerAttribute*X.count)}else for(let N=0;N<z.locationSize;N++)p(z.location+N);i.bindBuffer(i.ARRAY_BUFFER,Qe);for(let N=0;N<z.locationSize;N++)v(z.location+N,Me/z.locationSize,W,se,Me*be,Me/z.locationSize*N*be,Ie)}}else if(void 0!==V){const se=V[q];if(void 0!==se)switch(se.length){case 2:i.vertexAttrib2fv(z.location,se);break;case 3:i.vertexAttrib3fv(z.location,se);break;case 4:i.vertexAttrib4fv(z.location,se);break;default:i.vertexAttrib1fv(z.location,se)}}}}b()}(x,k,U,L),null!==H&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(H).buffer))},reset:D,resetDefaultState:S,dispose:function T(){D();for(const x in n){const k=n[x];for(const U in k){const L=k[U];for(const H in L)d(L[H].object),delete L[H];delete k[U]}delete n[x]}},releaseStatesOfGeometry:function w(x){if(void 0===n[x.id])return;const k=n[x.id];for(const U in k){const L=k[U];for(const H in L)d(L[H].object),delete L[H];delete k[U]}delete n[x.id]},releaseStatesOfProgram:function M(x){for(const k in n){const U=n[k];if(void 0===U[x.id])continue;const L=U[x.id];for(const H in L)d(L[H].object),delete L[H];delete U[x.id]}},initAttributes:_,enableAttribute:p,disableUnusedAttributes:b}}function Ile(i,t,e){let n;function o(c,d,u){0!==u&&(i.drawArraysInstanced(n,c,d,u),e.update(d,n,u))}this.setMode=function r(c){n=c},this.render=function s(c,d){i.drawArrays(n,c,d),e.update(d,n,1)},this.renderInstances=o,this.renderMultiDraw=function a(c,d,u){if(0===u)return;const h=t.get("WEBGL_multi_draw");if(null===h)for(let f=0;f<u;f++)this.render(c[f],d[f]);else{h.multiDrawArraysWEBGL(n,c,0,d,0,u);let f=0;for(let m=0;m<u;m++)f+=d[m];e.update(f,n,1)}},this.renderMultiDrawInstances=function l(c,d,u,h){if(0===u)return;const f=t.get("WEBGL_multi_draw");if(null===f)for(let m=0;m<c.length;m++)o(c[m],d[m],h[m]);else{f.multiDrawArraysInstancedWEBGL(n,c,0,d,0,h,0,u);let m=0;for(let _=0;_<u;_++)m+=d[_];for(let _=0;_<h.length;_++)e.update(m,n,h[_])}}}function Ple(i,t,e,n){let r;function l(w){if("highp"===w){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";w="mediump"}return"mediump"===w&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=void 0!==e.precision?e.precision:"highp";const d=l(c);d!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",d,"instead."),c=d);const u=!0===e.logarithmicDepthBuffer,h=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),f=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function s(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const w=t.get("EXT_texture_filter_anisotropic");r=i.getParameter(w.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:l,textureFormatReadable:function o(w){return!(w!==Ts&&n.convert(w)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function a(w){const M=w===mn&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(w!==Aa&&n.convert(w)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&w!==ts&&!M)},precision:c,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:f,maxTextureSize:i.getParameter(i.MAX_TEXTURE_SIZE),maxCubemapSize:i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:i.getParameter(i.MAX_VERTEX_ATTRIBS),maxVertexUniforms:i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:i.getParameter(i.MAX_VARYING_VECTORS),maxFragmentUniforms:i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:f>0,maxSamples:i.getParameter(i.MAX_SAMPLES)}}function kle(i){const t=this;let e=null,n=0,r=!1,s=!1;const o=new Vs,a=new Bt,l={value:null,needsUpdate:!1};function d(u,h,f,m){const _=null!==u?u.length:0;let p=null;if(0!==_){if(p=l.value,!0!==m||null===p){const g=f+4*_,b=h.matrixWorldInverse;a.getNormalMatrix(b),(null===p||p.length<g)&&(p=new Float32Array(g));for(let v=0,y=f;v!==_;++v,y+=4)o.copy(u[v]).applyMatrix4(b,a),o.normal.toArray(p,y),p[y+3]=o.constant}l.value=p,l.needsUpdate=!0}return t.numPlanes=_,t.numIntersection=0,p}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,h){const f=0!==u.length||h||0!==n||r;return r=h,n=u.length,f},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(u,h){e=d(u,h,0)},this.setState=function(u,h,f){const m=u.clippingPlanes,_=u.clipIntersection,p=u.clipShadows,g=i.get(u);if(!r||null===m||0===m.length||s&&!p)s?d(null):function c(){l.value!==e&&(l.value=e,l.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}();else{const b=s?0:n,v=4*b;let y=g.clippingState||null;l.value=y,y=d(m,h,v,f);for(let T=0;T!==v;++T)y[T]=e[T];g.clippingState=y,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=b}}}function Fle(i){let t=new WeakMap;function e(o,a){return a===rp?o.mapping=Ea:a===sp&&(o.mapping=yl),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=t.get(a);void 0!==l&&(t.delete(a),l.dispose())}return{get:function n(o){if(o&&o.isTexture){const a=o.mapping;if(a===rp||a===sp){if(t.has(o))return e(t.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new oU(l.height);return c.fromEquirectangularTexture(i,o),t.set(o,c),o.addEventListener("dispose",r),e(c.texture,o.mapping)}return null}}}return o},dispose:function s(){t=new WeakMap}}}class Il extends xp{constructor(t=-1,e=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-t,o=n+t,a=r+e,l=r-e;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const lU=[.125,.215,.35,.446,.526,.582],jC=new Il,cU=new Te;let BC=null,UC=0,VC=0,zC=!1;const td=(1+Math.sqrt(5))/2,Nh=1/td,dU=[new C(-td,Nh,0),new C(td,Nh,0),new C(-Nh,0,td),new C(Nh,0,td),new C(0,td,-Nh),new C(0,td,Nh),new C(-1,1,-1),new C(1,1,-1),new C(-1,1,1),new C(1,1,1)];class HC{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){BC=this._renderer.getRenderTarget(),UC=this._renderer.getActiveCubeFace(),VC=this._renderer.getActiveMipmapLevel(),zC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(t,n,r,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=fU(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=hU(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(BC,UC,VC),this._renderer.xr.enabled=zC,t.scissorTest=!1,ly(t,0,0,t.width,t.height)}_fromTexture(t,e){this._setSize(t.mapping===Ea||t.mapping===yl?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),BC=this._renderer.getRenderTarget(),UC=this._renderer.getActiveCubeFace(),VC=this._renderer.getActiveMipmapLevel(),zC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:fn,minFilter:fn,generateMipmaps:!1,type:mn,format:Ts,colorSpace:Yn,depthBuffer:!1},r=uU(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=uU(t,e,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Lle(i){const t=[],e=[],n=[];let r=i;const s=i-4+1+lU.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);e.push(a);let l=1/a;o>i-4?l=lU[o-i+4-1]:0===o&&(l=0),n.push(l);const c=1/(a-2),d=-c,u=1+c,h=[d,d,u,d,u,u,d,d,u,u,d,u],f=6,m=6,_=3,p=2,g=1,b=new Float32Array(_*m*f),v=new Float32Array(p*m*f),y=new Float32Array(g*m*f);for(let w=0;w<f;w++){const M=w%3*2/3-1,D=w>2?0:-1;b.set([M,D,0,M+2/3,D,0,M+2/3,D+1,0,M,D,0,M+2/3,D+1,0,M,D+1,0],_*m*w),v.set(h,p*m*w),y.set([w,w,w,w,w,w],g*m*w)}const T=new pt;T.setAttribute("position",new ui(b,_)),T.setAttribute("uv",new ui(v,p)),T.setAttribute("faceIndex",new ui(y,g)),t.push(T),r>4&&r--}return{lodPlanes:t,sizeLods:e,sigmas:n}}(s)),this._blurMaterial=function Ole(i,t,e){const n=new Float32Array(20),r=new C(0,1,0);return new ei({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:oi,depthTest:!1,depthWrite:!1})}(s,t,e)}return r}_compileMaterial(t){const e=new Be(this._lodPlanes[0],t);this._renderer.compile(e,jC)}_sceneToCubeUV(t,e,n,r){const a=new Cn(90,1,e,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,u=d.autoClear,h=d.toneMapping;d.getClearColor(cU),d.toneMapping=Ca,d.autoClear=!1;const f=new Zn({name:"PMREM.Background",side:jr,depthWrite:!1,depthTest:!1}),m=new Be(new Ki,f);let _=!1;const p=t.background;p?p.isColor&&(f.color.copy(p),t.background=null,_=!0):(f.color.copy(cU),_=!0);for(let g=0;g<6;g++){const b=g%3;0===b?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):1===b?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const v=this._cubeSize;ly(r,b*v,g>2?v:0,v,v),d.setRenderTarget(r),_&&d.render(m,a),d.render(t,a)}m.geometry.dispose(),m.material.dispose(),d.toneMapping=h,d.autoClear=u,t.background=p}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===Ea||t.mapping===yl;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=fU()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=hU());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Be(this._lodPlanes[0],s);s.uniforms.envMap.value=t;const l=this._cubeSize;ly(e,0,0,3*l,2*l),n.setRenderTarget(e),n.render(o,jC)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]);this._blur(t,s-1,s,o,dU[(r-s-1)%dU.length])}e.autoClear=n}_blur(t,e,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",s),this._halfBlur(o,t,n,n,r,"longitudinal",s)}_halfBlur(t,e,n,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new Be(this._lodPlanes[r],c),h=c.uniforms,f=this._sizeLods[n]-1,m=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,_=s/m,p=isFinite(s)?1+Math.floor(3*_):20;p>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const g=[];let b=0;for(let M=0;M<20;++M){const D=M/_,S=Math.exp(-D*D/2);g.push(S),0===M?b+=S:M<p&&(b+=2*S)}for(let M=0;M<g.length;M++)g[M]=g[M]/b;h.envMap.value=t.texture,h.samples.value=p,h.weights.value=g,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:v}=this;h.dTheta.value=m,h.mipInt.value=v-n;const y=this._sizeLods[r];ly(e,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),l.setRenderTarget(e),l.render(u,jC)}}function uU(i,t,e){const n=new gi(i,t,e);return n.texture.mapping=fh,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function ly(i,t,e,n,r){i.viewport.set(t,e,n,r),i.scissor.set(t,e,n,r)}function hU(){return new ei({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:oi,depthTest:!1,depthWrite:!1})}function fU(){return new ei({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:oi,depthTest:!1,depthWrite:!1})}function Nle(i){let t=new WeakMap,e=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=t.get(l);void 0!==c&&(t.delete(l),c.dispose())}return{get:function n(a){if(a&&a.isTexture){const l=a.mapping,c=l===rp||l===sp,d=l===Ea||l===yl;if(c||d){let u=t.get(a);if(a.isRenderTargetTexture&&a.pmremVersion!==(void 0!==u?u.texture.pmremVersion:0))return null===e&&(e=new HC(i)),u=c?e.fromEquirectangular(a,u):e.fromCubemap(a,u),u.texture.pmremVersion=a.pmremVersion,t.set(a,u),u.texture;if(void 0!==u)return u.texture;{const f=a.image;return c&&f&&f.height>0||d&&f&&function r(a){let l=0;for(let d=0;d<6;d++)void 0!==a[d]&&l++;return 6===l}(f)?(null===e&&(e=new HC(i)),u=c?e.fromEquirectangular(a):e.fromCubemap(a),u.texture.pmremVersion=a.pmremVersion,t.set(a,u),a.addEventListener("dispose",s),u.texture):null}}}return a},dispose:function o(){t=new WeakMap,null!==e&&(e.dispose(),e=null)}}}function jle(i){const t={};function e(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return t[n]=r,r}return{has:function(n){return null!==e(n)},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(n){const r=e(n);return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function Ble(i,t,e,n){const r={},s=new WeakMap;function o(u){const h=u.target;null!==h.index&&t.remove(h.index);for(const m in h.attributes)t.remove(h.attributes[m]);for(const m in h.morphAttributes){const _=h.morphAttributes[m];for(let p=0,g=_.length;p<g;p++)t.remove(_[p])}h.removeEventListener("dispose",o),delete r[h.id];const f=s.get(h);f&&(t.remove(f),s.delete(h)),n.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,e.memory.geometries--}function c(u){const h=[],f=u.index,m=u.attributes.position;let _=0;if(null!==f){const b=f.array;_=f.version;for(let v=0,y=b.length;v<y;v+=3){const T=b[v+0],w=b[v+1],M=b[v+2];h.push(T,w,w,M,M,T)}}else{if(void 0===m)return;_=m.version;for(let v=0,y=m.array.length/3-1;v<y;v+=3){const T=v+0,w=v+1,M=v+2;h.push(T,w,w,M,M,T)}}const p=new(k3(h)?FC:kC)(h,1);p.version=_;const g=s.get(u);g&&t.remove(g),s.set(u,p)}return{get:function a(u,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,e.memory.geometries++),h},update:function l(u){const h=u.attributes;for(const m in h)t.update(h[m],i.ARRAY_BUFFER);const f=u.morphAttributes;for(const m in f){const _=f[m];for(let p=0,g=_.length;p<g;p++)t.update(_[p],i.ARRAY_BUFFER)}},getWireframeAttribute:function d(u){const h=s.get(u);if(h){const f=u.index;null!==f&&h.version<f.version&&c(u)}else c(u);return s.get(u)}}}function Ule(i,t,e){let n,s,o;function c(h,f,m){0!==m&&(i.drawElementsInstanced(n,f,s,h*o,m),e.update(f,n,m))}this.setMode=function r(h){n=h},this.setIndex=function a(h){s=h.type,o=h.bytesPerElement},this.render=function l(h,f){i.drawElements(n,f,s,h*o),e.update(f,n,1)},this.renderInstances=c,this.renderMultiDraw=function d(h,f,m){if(0===m)return;const _=t.get("WEBGL_multi_draw");if(null===_)for(let p=0;p<m;p++)this.render(h[p]/o,f[p]);else{_.multiDrawElementsWEBGL(n,f,0,s,h,0,m);let p=0;for(let g=0;g<m;g++)p+=f[g];e.update(p,n,1)}},this.renderMultiDrawInstances=function u(h,f,m,_){if(0===m)return;const p=t.get("WEBGL_multi_draw");if(null===p)for(let g=0;g<h.length;g++)c(h[g]/o,f[g],_[g]);else{p.multiDrawElementsInstancedWEBGL(n,f,0,s,h,0,_,0,m);let g=0;for(let b=0;b<m;b++)g+=f[b];for(let b=0;b<_.length;b++)e.update(g,n,_[b])}}}function Vle(i){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function r(){e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function n(s,o,a){switch(e.calls++,o){case i.TRIANGLES:e.triangles+=a*(s/3);break;case i.LINES:e.lines+=a*(s/2);break;case i.LINE_STRIP:e.lines+=a*(s-1);break;case i.LINE_LOOP:e.lines+=a*s;break;case i.POINTS:e.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function zle(i,t,e){const n=new WeakMap,r=new fi;return{update:function s(o,a,l){const c=o.morphTargetInfluences,d=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,u=void 0!==d?d.length:0;let h=n.get(a);if(void 0===h||h.count!==u){let S=function(){M.dispose(),n.delete(a),a.removeEventListener("dispose",S)};void 0!==h&&h.texture.dispose();const f=void 0!==a.morphAttributes.position,m=void 0!==a.morphAttributes.normal,_=void 0!==a.morphAttributes.color,p=a.morphAttributes.position||[],g=a.morphAttributes.normal||[],b=a.morphAttributes.color||[];let v=0;!0===f&&(v=1),!0===m&&(v=2),!0===_&&(v=3);let y=a.attributes.position.count*v,T=1;y>t.maxTextureSize&&(T=Math.ceil(y/t.maxTextureSize),y=t.maxTextureSize);const w=new Float32Array(y*T*4*u),M=new Vv(w,y,T,u);M.type=ts,M.needsUpdate=!0;const D=4*v;for(let x=0;x<u;x++){const k=p[x],U=g[x],L=b[x],H=y*T*4*x;for(let Y=0;Y<k.count;Y++){const V=Y*D;!0===f&&(r.fromBufferAttribute(k,Y),w[H+V+0]=r.x,w[H+V+1]=r.y,w[H+V+2]=r.z,w[H+V+3]=0),!0===m&&(r.fromBufferAttribute(U,Y),w[H+V+4]=r.x,w[H+V+5]=r.y,w[H+V+6]=r.z,w[H+V+7]=0),!0===_&&(r.fromBufferAttribute(L,Y),w[H+V+8]=r.x,w[H+V+9]=r.y,w[H+V+10]=r.z,w[H+V+11]=4===L.itemSize?r.w:1)}}h={count:u,texture:M,size:new $(y,T)},n.set(a,h),a.addEventListener("dispose",S)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)l.getUniforms().setValue(i,"morphTexture",o.morphTexture,e);else{let f=0;for(let _=0;_<c.length;_++)f+=c[_];const m=a.morphTargetsRelative?1:1-f;l.getUniforms().setValue(i,"morphTargetBaseInfluence",m),l.getUniforms().setValue(i,"morphTargetInfluences",c)}l.getUniforms().setValue(i,"morphTargetsTexture",h.texture,e),l.getUniforms().setValue(i,"morphTargetsTextureSize",h.size)}}}function Hle(i,t,e,n){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),e.remove(c.instanceMatrix),null!==c.instanceColor&&e.remove(c.instanceColor)}return{update:function s(l){const c=n.render.frame,u=t.get(l,l.geometry);if(r.get(u)!==c&&(t.update(u),r.set(u,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),r.get(l)!==c&&(e.update(l.instanceMatrix,i.ARRAY_BUFFER),null!==l.instanceColor&&e.update(l.instanceColor,i.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;r.get(h)!==c&&(h.update(),r.set(h,c))}return u},dispose:function o(){r=new WeakMap}}}class jh extends Sn{constructor(t,e,n,r,s,o,a,l,c,d){if((d=void 0!==d?d:Vc)!==Vc&&d!==wl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&d===Vc&&(n=Uc),void 0===n&&d===wl&&(n=xl),super(null,r,s,o,a,l,d,n,c),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:ci,this.minFilter=void 0!==l?l:ci,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}const mU=new Sn,pU=new jh(1,1);pU.compareFunction=mC;const gU=new Vv,_U=new yC,bU=new wp,vU=[],yU=[],xU=new Float32Array(16),wU=new Float32Array(9),TU=new Float32Array(4);function Bh(i,t,e){const n=i[0];if(n<=0||n>0)return i;const r=t*e;let s=vU[r];if(void 0===s&&(s=new Float32Array(r),vU[r]=s),0!==t){n.toArray(s,0);for(let o=1,a=0;o!==t;++o)a+=e,i[o].toArray(s,a)}return s}function Kn(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function Qn(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function cy(i,t){let e=yU[t];void 0===e&&(e=new Int32Array(t),yU[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function Gle(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function Wle(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Kn(e,t))return;i.uniform2fv(this.addr,t),Qn(e,t)}}function $le(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(void 0!==t.r)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Kn(e,t))return;i.uniform3fv(this.addr,t),Qn(e,t)}}function Xle(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Kn(e,t))return;i.uniform4fv(this.addr,t),Qn(e,t)}}function qle(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(Kn(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),Qn(e,t)}else{if(Kn(e,n))return;TU.set(n),i.uniformMatrix2fv(this.addr,!1,TU),Qn(e,n)}}function Yle(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(Kn(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),Qn(e,t)}else{if(Kn(e,n))return;wU.set(n),i.uniformMatrix3fv(this.addr,!1,wU),Qn(e,n)}}function Zle(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(Kn(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),Qn(e,t)}else{if(Kn(e,n))return;xU.set(n),i.uniformMatrix4fv(this.addr,!1,xU),Qn(e,n)}}function Kle(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function Qle(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Kn(e,t))return;i.uniform2iv(this.addr,t),Qn(e,t)}}function Jle(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Kn(e,t))return;i.uniform3iv(this.addr,t),Qn(e,t)}}function ece(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Kn(e,t))return;i.uniform4iv(this.addr,t),Qn(e,t)}}function tce(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function ice(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Kn(e,t))return;i.uniform2uiv(this.addr,t),Qn(e,t)}}function nce(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Kn(e,t))return;i.uniform3uiv(this.addr,t),Qn(e,t)}}function rce(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Kn(e,t))return;i.uniform4uiv(this.addr,t),Qn(e,t)}}function sce(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2D(t||(this.type===i.SAMPLER_2D_SHADOW?pU:mU),r)}function oce(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture3D(t||_U,r)}function ace(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTextureCube(t||bU,r)}function lce(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2DArray(t||gU,r)}function dce(i,t){i.uniform1fv(this.addr,t)}function uce(i,t){const e=Bh(t,this.size,2);i.uniform2fv(this.addr,e)}function hce(i,t){const e=Bh(t,this.size,3);i.uniform3fv(this.addr,e)}function fce(i,t){const e=Bh(t,this.size,4);i.uniform4fv(this.addr,e)}function mce(i,t){const e=Bh(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function pce(i,t){const e=Bh(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function gce(i,t){const e=Bh(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function _ce(i,t){i.uniform1iv(this.addr,t)}function bce(i,t){i.uniform2iv(this.addr,t)}function vce(i,t){i.uniform3iv(this.addr,t)}function yce(i,t){i.uniform4iv(this.addr,t)}function xce(i,t){i.uniform1uiv(this.addr,t)}function wce(i,t){i.uniform2uiv(this.addr,t)}function Tce(i,t){i.uniform3uiv(this.addr,t)}function Mce(i,t){i.uniform4uiv(this.addr,t)}function Sce(i,t,e){const n=this.cache,r=t.length,s=cy(e,r);Kn(n,s)||(i.uniform1iv(this.addr,s),Qn(n,s));for(let o=0;o!==r;++o)e.setTexture2D(t[o]||mU,s[o])}function Rce(i,t,e){const n=this.cache,r=t.length,s=cy(e,r);Kn(n,s)||(i.uniform1iv(this.addr,s),Qn(n,s));for(let o=0;o!==r;++o)e.setTexture3D(t[o]||_U,s[o])}function Cce(i,t,e){const n=this.cache,r=t.length,s=cy(e,r);Kn(n,s)||(i.uniform1iv(this.addr,s),Qn(n,s));for(let o=0;o!==r;++o)e.setTextureCube(t[o]||bU,s[o])}function Ece(i,t,e){const n=this.cache,r=t.length,s=cy(e,r);Kn(n,s)||(i.uniform1iv(this.addr,s),Qn(n,s));for(let o=0;o!==r;++o)e.setTexture2DArray(t[o]||gU,s[o])}class Dce{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=function cce(i){switch(i){case 5126:return Gle;case 35664:return Wle;case 35665:return $le;case 35666:return Xle;case 35674:return qle;case 35675:return Yle;case 35676:return Zle;case 5124:case 35670:return Kle;case 35667:case 35671:return Qle;case 35668:case 35672:return Jle;case 35669:case 35673:return ece;case 5125:return tce;case 36294:return ice;case 36295:return nce;case 36296:return rce;case 35678:case 36198:case 36298:case 36306:case 35682:return sce;case 35679:case 36299:case 36307:return oce;case 35680:case 36300:case 36308:case 36293:return ace;case 36289:case 36303:case 36311:case 36292:return lce}}(e.type)}}class Ice{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=function Ace(i){switch(i){case 5126:return dce;case 35664:return uce;case 35665:return hce;case 35666:return fce;case 35674:return mce;case 35675:return pce;case 35676:return gce;case 5124:case 35670:return _ce;case 35667:case 35671:return bce;case 35668:case 35672:return vce;case 35669:case 35673:return yce;case 5125:return xce;case 36294:return wce;case 36295:return Tce;case 36296:return Mce;case 35678:case 36198:case 36298:case 36306:case 35682:return Sce;case 35679:case 36299:case 36307:return Rce;case 35680:case 36300:case 36308:case 36293:return Cce;case 36289:case 36303:case 36311:case 36292:return Ece}}(e.type)}}class Pce{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(t,e[a.id],n)}}}const WC=/(\w+)(\])?(\[|\.)?/g;function MU(i,t){i.seq.push(t),i.map[t.id]=t}function kce(i,t,e){const n=i.name,r=n.length;for(WC.lastIndex=0;;){const s=WC.exec(n);let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&WC.lastIndex+2===r){MU(e,void 0===c?new Dce(a,i,t):new Ice(a,i,t));break}{let u=e.map[a];void 0===u&&(u=new Pce(a),MU(e,u)),e=u}}}class dy{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=t.getActiveUniform(e,r);kce(s,t.getUniformLocation(e,s.name),this)}}setValue(t,e,n,r){const s=this.map[e];void 0!==s&&s.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let s=0,o=e.length;s!==o;++s){const a=e[s],l=n[a.id];!1!==l.needsUpdate&&a.setValue(t,l.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,s=t.length;r!==s;++r){const o=t[r];o.id in e&&n.push(o)}return n}}function SU(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}const Fce=37297;let Lce=0;function RU(i,t,e){const n=i.getShaderParameter(t,i.COMPILE_STATUS),r=i.getShaderInfoLog(t).trim();if(n&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return e.toUpperCase()+"\n\n"+r+"\n\n"+function Oce(i,t){const e=i.split("\n"),n=[],r=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let o=r;o<s;o++){const a=o+1;n.push(`${a===t?">":" "} ${a}: ${e[o]}`)}return n.join("\n")}(i.getShaderSource(t),o)}return r}function jce(i,t){const e=function Nce(i){const t=xi.getPrimaries(xi.workingColorSpace),e=xi.getPrimaries(i);let n;switch(t===e?n="":t===up&&e===dp?n="LinearDisplayP3ToLinearSRGB":t===dp&&e===up&&(n="LinearSRGBToLinearDisplayP3"),i){case Yn:case lp:return[n,"LinearTransferOETF"];case qn:case Bv:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),[n,"LinearTransferOETF"]}}(t);return`vec4 ${i}( vec4 value ) { return ${e[0]}( ${e[1]}( value ) ); }`}function Bce(i,t){let e;switch(t){case n3:e="Linear";break;case r3:e="Reinhard";break;case s3:e="OptimizedCineon";break;case o3:e="ACESFilmic";break;case l3:e="AgX";break;case c3:e="Neutral";break;case a3:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function Mp(i){return""!==i}function CU(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function EU(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Hce=/^[ \t]*#include +<([\w\d./]+)>/gm;function $C(i){return i.replace(Hce,Wce)}const Gce=new Map;function Wce(i,t){let e=Gt[t];if(void 0===e){const n=Gce.get(t);if(void 0===n)throw new Error("Can not resolve #include <"+t+">");e=Gt[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n)}return $C(e)}const $ce=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function AU(i){return i.replace($ce,Xce)}function Xce(i,t,e,n){let r="";for(let s=parseInt(t);s<parseInt(e);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function DU(i){let t=`precision ${i.precision} float;\n\tprecision ${i.precision} int;\n\tprecision ${i.precision} sampler2D;\n\tprecision ${i.precision} samplerCube;\n\tprecision ${i.precision} sampler3D;\n\tprecision ${i.precision} sampler2DArray;\n\tprecision ${i.precision} sampler2DShadow;\n\tprecision ${i.precision} samplerCubeShadow;\n\tprecision ${i.precision} sampler2DArrayShadow;\n\tprecision ${i.precision} isampler2D;\n\tprecision ${i.precision} isampler3D;\n\tprecision ${i.precision} isamplerCube;\n\tprecision ${i.precision} isampler2DArray;\n\tprecision ${i.precision} usampler2D;\n\tprecision ${i.precision} usampler3D;\n\tprecision ${i.precision} usamplerCube;\n\tprecision ${i.precision} usampler2DArray;\n\t`;return"highp"===i.precision?t+="\n#define HIGH_PRECISION":"mediump"===i.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(t+="\n#define LOW_PRECISION"),t}function Jce(i,t,e,n){const r=i.getContext(),s=e.defines;let o=e.vertexShader,a=e.fragmentShader;const l=function qce(i){let t="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===CR?t="SHADOWMAP_TYPE_PCF":i.shadowMapType===PB?t="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===qo&&(t="SHADOWMAP_TYPE_VSM"),t}(e),c=function Yce(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Ea:case yl:t="ENVMAP_TYPE_CUBE";break;case fh:t="ENVMAP_TYPE_CUBE_UV"}return t}(e),d=function Zce(i){let t="ENVMAP_MODE_REFLECTION";return i.envMap&&i.envMapMode===yl&&(t="ENVMAP_MODE_REFRACTION"),t}(e),u=function Kce(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case np:t="ENVMAP_BLENDING_MULTIPLY";break;case e3:t="ENVMAP_BLENDING_MIX";break;case t3:t="ENVMAP_BLENDING_ADD"}return t}(e),h=function Qce(i){const t=i.envMapCubeUVHeight;if(null===t)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}(e),f=function Uce(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Mp).join("\n")}(e),m=function Vce(i){const t=[];for(const e in i){const n=i[e];!1!==n&&t.push("#define "+e+" "+n)}return t.join("\n")}(s),_=r.createProgram();let p,g,b=e.glslVersion?"#version "+e.glslVersion+"\n":"";e.isRawShaderMaterial?(p=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,m].filter(Mp).join("\n"),p.length>0&&(p+="\n"),g=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,m].filter(Mp).join("\n"),g.length>0&&(g+="\n")):(p=[DU(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,m,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+d:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&!1===e.flatShading?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&!1===e.flatShading?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.useLegacyLights?"#define LEGACY_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Mp).join("\n"),g=[DU(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,m,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+c:"",e.envMap?"#define "+d:"",e.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&!1===e.flatShading?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.useLegacyLights?"#define LEGACY_LIGHTS":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Ca?"#define TONE_MAPPING":"",e.toneMapping!==Ca?Gt.tonemapping_pars_fragment:"",e.toneMapping!==Ca?Bce("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Gt.colorspace_pars_fragment,jce("linearToOutputTexel",e.outputColorSpace),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"","\n"].filter(Mp).join("\n")),o=$C(o),o=CU(o,e),o=EU(o,e),a=$C(a),a=CU(a,e),a=EU(a,e),o=AU(o),a=AU(a),!0!==e.isRawShaderMaterial&&(b="#version 300 es\n",p=[f,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+p,g=["#define varying in",e.glslVersion===pC?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===pC?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g);const y=b+g+a,T=SU(r,r.VERTEX_SHADER,b+p+o),w=SU(r,r.FRAGMENT_SHADER,y);function M(k){if(i.debug.checkShaderErrors){const U=r.getProgramInfoLog(_).trim(),L=r.getShaderInfoLog(T).trim(),H=r.getShaderInfoLog(w).trim();let Y=!0,V=!0;if(!1===r.getProgramParameter(_,r.LINK_STATUS))if(Y=!1,"function"==typeof i.debug.onShaderError)i.debug.onShaderError(r,_,T,w);else{const q=RU(r,T,"vertex"),z=RU(r,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(_,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+k.name+"\nMaterial Type: "+k.type+"\n\nProgram Info Log: "+U+"\n"+q+"\n"+z)}else""!==U?console.warn("THREE.WebGLProgram: Program Info Log:",U):(""===L||""===H)&&(V=!1);V&&(k.diagnostics={runnable:Y,programLog:U,vertexShader:{log:L,prefix:p},fragmentShader:{log:H,prefix:g}})}r.deleteShader(T),r.deleteShader(w),D=new dy(r,_),S=function zce(i,t){const e={},n=i.getProgramParameter(t,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(t,r),o=s.name;let a=1;s.type===i.FLOAT_MAT2&&(a=2),s.type===i.FLOAT_MAT3&&(a=3),s.type===i.FLOAT_MAT4&&(a=4),e[o]={type:s.type,location:i.getAttribLocation(t,o),locationSize:a}}return e}(r,_)}let D,S;r.attachShader(_,T),r.attachShader(_,w),void 0!==e.index0AttributeName?r.bindAttribLocation(_,0,e.index0AttributeName):!0===e.morphTargets&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_),this.getUniforms=function(){return void 0===D&&M(this),D},this.getAttributes=function(){return void 0===S&&M(this),S};let x=!1===e.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===x&&(x=r.getProgramParameter(_,Fce)),x},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=Lce++,this.cacheKey=t,this.usedTimes=1,this.program=_,this.vertexShader=T,this.fragmentShader=w,this}let ede=0;class tde{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.fragmentShader,r=this._getShaderStage(t.vertexShader),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new ide(t),e.set(t,n)),n}}class ide{constructor(t){this.id=ede++,this.code=t,this.usedTimes=0}}function nde(i,t,e,n,r,s,o){const a=new qv,l=new tde,c=new Set,d=[],u=r.logarithmicDepthBuffer,h=r.vertexTextures;let f=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(S){return c.add(S),0===S?"uv":`uv${S}`}return{getParameters:function p(S,x,k,U,L){const H=U.fog,Y=L.geometry,q=(S.isMeshStandardMaterial?e:t).get(S.envMap||(S.isMeshStandardMaterial?U.environment:null)),z=q&&q.mapping===fh?q.image.height:null,X=m[S.type];null!==S.precision&&(f=r.getMaxPrecision(S.precision),f!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",f,"instead."));const se=Y.morphAttributes.position||Y.morphAttributes.normal||Y.morphAttributes.color,Me=void 0!==se?se.length:0;let Qe,W,be,Ie,Ve=0;if(void 0!==Y.morphAttributes.position&&(Ve=1),void 0!==Y.morphAttributes.normal&&(Ve=2),void 0!==Y.morphAttributes.color&&(Ve=3),X){const _i=vo[X];Qe=_i.vertexShader,W=_i.fragmentShader}else Qe=S.vertexShader,W=S.fragmentShader,l.update(S),be=l.getVertexShaderID(S),Ie=l.getFragmentShaderID(S);const N=i.getRenderTarget(),me=!0===L.isInstancedMesh,j=!!S.map,re=!!q,Se=!!S.aoMap,he=!!S.lightMap,ke=!!S.bumpMap,xe=!!S.normalMap,$e=!!S.displacementMap,nt=!!S.emissiveMap,F=!!S.metalnessMap,E=!!S.roughnessMap,Q=S.anisotropy>0,fe=S.clearcoat>0,_e=S.iridescence>0,et=S.sheen>0,Ne=S.transmission>0,Oe=Q&&!!S.anisotropyMap,dt=fe&&!!S.clearcoatMap,De=fe&&!!S.clearcoatNormalMap,Ze=fe&&!!S.clearcoatRoughnessMap,gt=_e&&!!S.iridescenceMap,ot=_e&&!!S.iridescenceThicknessMap,Xe=et&&!!S.sheenColorMap,wt=et&&!!S.sheenRoughnessMap,Je=!!S.specularMap,Ti=!!S.specularColorMap,At=!!S.specularIntensityMap,R=Ne&&!!S.transmissionMap,G=Ne&&!!S.thicknessMap,we=!!S.alphaMap,ti=!!S.extensions;let cn=Ca;S.toneMapped&&(null===N||!0===N.isXRRenderTarget)&&(cn=i.toneMapping);const sr={shaderID:X,shaderType:S.type,shaderName:S.name,vertexShader:Qe,fragmentShader:W,defines:S.defines,customVertexShaderID:be,customFragmentShaderID:Ie,isRawShaderMaterial:!0===S.isRawShaderMaterial,glslVersion:S.glslVersion,precision:f,batching:!0===L.isBatchedMesh,instancing:me,instancingColor:me&&null!==L.instanceColor,instancingMorph:me&&null!==L.morphTexture,supportsVertexTextures:h,outputColorSpace:null===N?i.outputColorSpace:!0===N.isXRRenderTarget?N.texture.colorSpace:Yn,alphaToCoverage:!!S.alphaToCoverage,map:j,matcap:!!S.matcap,envMap:re,envMapMode:re&&q.mapping,envMapCubeUVHeight:z,aoMap:Se,lightMap:he,bumpMap:ke,normalMap:xe,displacementMap:h&&$e,emissiveMap:nt,normalMapObjectSpace:xe&&S.normalMapType===M3,normalMapTangentSpace:xe&&S.normalMapType===Tl,metalnessMap:F,roughnessMap:E,anisotropy:Q,anisotropyMap:Oe,clearcoat:fe,clearcoatMap:dt,clearcoatNormalMap:De,clearcoatRoughnessMap:Ze,dispersion:S.dispersion>0,iridescence:_e,iridescenceMap:gt,iridescenceThicknessMap:ot,sheen:et,sheenColorMap:Xe,sheenRoughnessMap:wt,specularMap:Je,specularColorMap:Ti,specularIntensityMap:At,transmission:Ne,transmissionMap:R,thicknessMap:G,gradientMap:!!S.gradientMap,opaque:!1===S.transparent&&S.blending===Zo&&!1===S.alphaToCoverage,alphaMap:we,alphaTest:S.alphaTest>0,alphaHash:!!S.alphaHash,combine:S.combine,mapUv:j&&_(S.map.channel),aoMapUv:Se&&_(S.aoMap.channel),lightMapUv:he&&_(S.lightMap.channel),bumpMapUv:ke&&_(S.bumpMap.channel),normalMapUv:xe&&_(S.normalMap.channel),displacementMapUv:$e&&_(S.displacementMap.channel),emissiveMapUv:nt&&_(S.emissiveMap.channel),metalnessMapUv:F&&_(S.metalnessMap.channel),roughnessMapUv:E&&_(S.roughnessMap.channel),anisotropyMapUv:Oe&&_(S.anisotropyMap.channel),clearcoatMapUv:dt&&_(S.clearcoatMap.channel),clearcoatNormalMapUv:De&&_(S.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ze&&_(S.clearcoatRoughnessMap.channel),iridescenceMapUv:gt&&_(S.iridescenceMap.channel),iridescenceThicknessMapUv:ot&&_(S.iridescenceThicknessMap.channel),sheenColorMapUv:Xe&&_(S.sheenColorMap.channel),sheenRoughnessMapUv:wt&&_(S.sheenRoughnessMap.channel),specularMapUv:Je&&_(S.specularMap.channel),specularColorMapUv:Ti&&_(S.specularColorMap.channel),specularIntensityMapUv:At&&_(S.specularIntensityMap.channel),transmissionMapUv:R&&_(S.transmissionMap.channel),thicknessMapUv:G&&_(S.thicknessMap.channel),alphaMapUv:we&&_(S.alphaMap.channel),vertexTangents:!!Y.attributes.tangent&&(xe||Q),vertexColors:S.vertexColors,vertexAlphas:!0===S.vertexColors&&!!Y.attributes.color&&4===Y.attributes.color.itemSize,pointsUvs:!0===L.isPoints&&!!Y.attributes.uv&&(j||we),fog:!!H,useFog:!0===S.fog,fogExp2:!!H&&H.isFogExp2,flatShading:!0===S.flatShading,sizeAttenuation:!0===S.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===L.isSkinnedMesh,morphTargets:void 0!==Y.morphAttributes.position,morphNormals:void 0!==Y.morphAttributes.normal,morphColors:void 0!==Y.morphAttributes.color,morphTargetsCount:Me,morphTextureStride:Ve,numDirLights:x.directional.length,numPointLights:x.point.length,numSpotLights:x.spot.length,numSpotLightMaps:x.spotLightMap.length,numRectAreaLights:x.rectArea.length,numHemiLights:x.hemi.length,numDirLightShadows:x.directionalShadowMap.length,numPointLightShadows:x.pointShadowMap.length,numSpotLightShadows:x.spotShadowMap.length,numSpotLightShadowsWithMaps:x.numSpotLightShadowsWithMaps,numLightProbes:x.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:S.dithering,shadowMapEnabled:i.shadowMap.enabled&&k.length>0,shadowMapType:i.shadowMap.type,toneMapping:cn,useLegacyLights:i._useLegacyLights,decodeVideoTexture:j&&!0===S.map.isVideoTexture&&xi.getTransfer(S.map.colorSpace)===Hi,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===Br,flipSided:S.side===jr,useDepthPacking:S.depthPacking>=0,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,extensionClipCullDistance:ti&&!0===S.extensions.clipCullDistance&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:ti&&!0===S.extensions.multiDraw&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:S.customProgramCacheKey()};return sr.vertexUv1s=c.has(1),sr.vertexUv2s=c.has(2),sr.vertexUv3s=c.has(3),c.clear(),sr},getProgramCacheKey:function g(S){const x=[];if(S.shaderID?x.push(S.shaderID):(x.push(S.customVertexShaderID),x.push(S.customFragmentShaderID)),void 0!==S.defines)for(const k in S.defines)x.push(k),x.push(S.defines[k]);return!1===S.isRawShaderMaterial&&(function b(S,x){S.push(x.precision),S.push(x.outputColorSpace),S.push(x.envMapMode),S.push(x.envMapCubeUVHeight),S.push(x.mapUv),S.push(x.alphaMapUv),S.push(x.lightMapUv),S.push(x.aoMapUv),S.push(x.bumpMapUv),S.push(x.normalMapUv),S.push(x.displacementMapUv),S.push(x.emissiveMapUv),S.push(x.metalnessMapUv),S.push(x.roughnessMapUv),S.push(x.anisotropyMapUv),S.push(x.clearcoatMapUv),S.push(x.clearcoatNormalMapUv),S.push(x.clearcoatRoughnessMapUv),S.push(x.iridescenceMapUv),S.push(x.iridescenceThicknessMapUv),S.push(x.sheenColorMapUv),S.push(x.sheenRoughnessMapUv),S.push(x.specularMapUv),S.push(x.specularColorMapUv),S.push(x.specularIntensityMapUv),S.push(x.transmissionMapUv),S.push(x.thicknessMapUv),S.push(x.combine),S.push(x.fogExp2),S.push(x.sizeAttenuation),S.push(x.morphTargetsCount),S.push(x.morphAttributeCount),S.push(x.numDirLights),S.push(x.numPointLights),S.push(x.numSpotLights),S.push(x.numSpotLightMaps),S.push(x.numHemiLights),S.push(x.numRectAreaLights),S.push(x.numDirLightShadows),S.push(x.numPointLightShadows),S.push(x.numSpotLightShadows),S.push(x.numSpotLightShadowsWithMaps),S.push(x.numLightProbes),S.push(x.shadowMapType),S.push(x.toneMapping),S.push(x.numClippingPlanes),S.push(x.numClipIntersection),S.push(x.depthPacking)}(x,S),function v(S,x){a.disableAll(),x.supportsVertexTextures&&a.enable(0),x.instancing&&a.enable(1),x.instancingColor&&a.enable(2),x.instancingMorph&&a.enable(3),x.matcap&&a.enable(4),x.envMap&&a.enable(5),x.normalMapObjectSpace&&a.enable(6),x.normalMapTangentSpace&&a.enable(7),x.clearcoat&&a.enable(8),x.iridescence&&a.enable(9),x.alphaTest&&a.enable(10),x.vertexColors&&a.enable(11),x.vertexAlphas&&a.enable(12),x.vertexUv1s&&a.enable(13),x.vertexUv2s&&a.enable(14),x.vertexUv3s&&a.enable(15),x.vertexTangents&&a.enable(16),x.anisotropy&&a.enable(17),x.alphaHash&&a.enable(18),x.batching&&a.enable(19),x.dispersion&&a.enable(20),S.push(a.mask),a.disableAll(),x.fog&&a.enable(0),x.useFog&&a.enable(1),x.flatShading&&a.enable(2),x.logarithmicDepthBuffer&&a.enable(3),x.skinning&&a.enable(4),x.morphTargets&&a.enable(5),x.morphNormals&&a.enable(6),x.morphColors&&a.enable(7),x.premultipliedAlpha&&a.enable(8),x.shadowMapEnabled&&a.enable(9),x.useLegacyLights&&a.enable(10),x.doubleSided&&a.enable(11),x.flipSided&&a.enable(12),x.useDepthPacking&&a.enable(13),x.dithering&&a.enable(14),x.transmission&&a.enable(15),x.sheen&&a.enable(16),x.opaque&&a.enable(17),x.pointsUvs&&a.enable(18),x.decodeVideoTexture&&a.enable(19),x.alphaToCoverage&&a.enable(20),S.push(a.mask)}(x,S),x.push(i.outputColorSpace)),x.push(S.customProgramCacheKey),x.join()},getUniforms:function y(S){const x=m[S.type];let k;return k=x?Rn.clone(vo[x].uniforms):S.uniforms,k},acquireProgram:function T(S,x){let k;for(let U=0,L=d.length;U<L;U++){const H=d[U];if(H.cacheKey===x){k=H,++k.usedTimes;break}}return void 0===k&&(k=new Jce(i,x,S,s),d.push(k)),k},releaseProgram:function w(S){if(0==--S.usedTimes){const x=d.indexOf(S);d[x]=d[d.length-1],d.pop(),S.destroy()}},releaseShaderCache:function M(S){l.remove(S)},programs:d,dispose:function D(){l.dispose()}}}function rde(){let i=new WeakMap;return{get:function t(s){let o=i.get(s);return void 0===o&&(o={},i.set(s,o)),o},remove:function e(s){i.delete(s)},update:function n(s,o,a){i.get(s)[o]=a},dispose:function r(){i=new WeakMap}}}function sde(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function IU(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function PU(){const i=[];let t=0;const e=[],n=[],r=[];function o(u,h,f,m,_,p){let g=i[t];return void 0===g?(g={id:u.id,object:u,geometry:h,material:f,groupOrder:m,renderOrder:u.renderOrder,z:_,group:p},i[t]=g):(g.id=u.id,g.object=u,g.geometry=h,g.material=f,g.groupOrder=m,g.renderOrder=u.renderOrder,g.z=_,g.group=p),t++,g}return{opaque:e,transmissive:n,transparent:r,init:function s(){t=0,e.length=0,n.length=0,r.length=0},push:function a(u,h,f,m,_,p){const g=o(u,h,f,m,_,p);f.transmission>0?n.push(g):!0===f.transparent?r.push(g):e.push(g)},unshift:function l(u,h,f,m,_,p){const g=o(u,h,f,m,_,p);f.transmission>0?n.unshift(g):!0===f.transparent?r.unshift(g):e.unshift(g)},finish:function d(){for(let u=t,h=i.length;u<h;u++){const f=i[u];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(u,h){e.length>1&&e.sort(u||sde),n.length>1&&n.sort(h||IU),r.length>1&&r.sort(h||IU)}}}function ode(){let i=new WeakMap;return{get:function t(n,r){const s=i.get(n);let o;return void 0===s?(o=new PU,i.set(n,[o])):r>=s.length?(o=new PU,s.push(o)):o=s[r],o},dispose:function e(){i=new WeakMap}}}function ade(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new C,color:new Te};break;case"SpotLight":e={position:new C,direction:new C,color:new Te,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new C,color:new Te,distance:0,decay:0};break;case"HemisphereLight":e={direction:new C,skyColor:new Te,groundColor:new Te};break;case"RectAreaLight":e={color:new Te,position:new C,halfWidth:new C,halfHeight:new C}}return i[t.id]=e,e}}}let cde=0;function dde(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function ude(i){const t=new ade,e=function lde(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $,shadowCameraNear:1,shadowCameraFar:1e3}}return i[t.id]=e,e}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)n.probe.push(new C);const r=new C,s=new je,o=new je;return{setup:function a(c,d){let u=0,h=0,f=0;for(let k=0;k<9;k++)n.probe[k].set(0,0,0);let m=0,_=0,p=0,g=0,b=0,v=0,y=0,T=0,w=0,M=0,D=0;c.sort(dde);const S=!0===d?Math.PI:1;for(let k=0,U=c.length;k<U;k++){const L=c[k],H=L.color,Y=L.intensity,V=L.distance,q=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)u+=H.r*Y*S,h+=H.g*Y*S,f+=H.b*Y*S;else if(L.isLightProbe){for(let z=0;z<9;z++)n.probe[z].addScaledVector(L.sh.coefficients[z],Y);D++}else if(L.isDirectionalLight){const z=t.get(L);if(z.color.copy(L.color).multiplyScalar(L.intensity*S),L.castShadow){const X=L.shadow,se=e.get(L);se.shadowBias=X.bias,se.shadowNormalBias=X.normalBias,se.shadowRadius=X.radius,se.shadowMapSize=X.mapSize,n.directionalShadow[m]=se,n.directionalShadowMap[m]=q,n.directionalShadowMatrix[m]=L.shadow.matrix,v++}n.directional[m]=z,m++}else if(L.isSpotLight){const z=t.get(L);z.position.setFromMatrixPosition(L.matrixWorld),z.color.copy(H).multiplyScalar(Y*S),z.distance=V,z.coneCos=Math.cos(L.angle),z.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),z.decay=L.decay,n.spot[p]=z;const X=L.shadow;if(L.map&&(n.spotLightMap[w]=L.map,w++,X.updateMatrices(L),L.castShadow&&M++),n.spotLightMatrix[p]=X.matrix,L.castShadow){const se=e.get(L);se.shadowBias=X.bias,se.shadowNormalBias=X.normalBias,se.shadowRadius=X.radius,se.shadowMapSize=X.mapSize,n.spotShadow[p]=se,n.spotShadowMap[p]=q,T++}p++}else if(L.isRectAreaLight){const z=t.get(L);z.color.copy(H).multiplyScalar(Y),z.halfWidth.set(.5*L.width,0,0),z.halfHeight.set(0,.5*L.height,0),n.rectArea[g]=z,g++}else if(L.isPointLight){const z=t.get(L);if(z.color.copy(L.color).multiplyScalar(L.intensity*S),z.distance=L.distance,z.decay=L.decay,L.castShadow){const X=L.shadow,se=e.get(L);se.shadowBias=X.bias,se.shadowNormalBias=X.normalBias,se.shadowRadius=X.radius,se.shadowMapSize=X.mapSize,se.shadowCameraNear=X.camera.near,se.shadowCameraFar=X.camera.far,n.pointShadow[_]=se,n.pointShadowMap[_]=q,n.pointShadowMatrix[_]=L.shadow.matrix,y++}n.point[_]=z,_++}else if(L.isHemisphereLight){const z=t.get(L);z.skyColor.copy(L.color).multiplyScalar(Y*S),z.groundColor.copy(L.groundColor).multiplyScalar(Y*S),n.hemi[b]=z,b++}}g>0&&(!0===i.has("OES_texture_float_linear")?(n.rectAreaLTC1=Ge.LTC_FLOAT_1,n.rectAreaLTC2=Ge.LTC_FLOAT_2):(n.rectAreaLTC1=Ge.LTC_HALF_1,n.rectAreaLTC2=Ge.LTC_HALF_2)),n.ambient[0]=u,n.ambient[1]=h,n.ambient[2]=f;const x=n.hash;(x.directionalLength!==m||x.pointLength!==_||x.spotLength!==p||x.rectAreaLength!==g||x.hemiLength!==b||x.numDirectionalShadows!==v||x.numPointShadows!==y||x.numSpotShadows!==T||x.numSpotMaps!==w||x.numLightProbes!==D)&&(n.directional.length=m,n.spot.length=p,n.rectArea.length=g,n.point.length=_,n.hemi.length=b,n.directionalShadow.length=v,n.directionalShadowMap.length=v,n.pointShadow.length=y,n.pointShadowMap.length=y,n.spotShadow.length=T,n.spotShadowMap.length=T,n.directionalShadowMatrix.length=v,n.pointShadowMatrix.length=y,n.spotLightMatrix.length=T+w-M,n.spotLightMap.length=w,n.numSpotLightShadowsWithMaps=M,n.numLightProbes=D,x.directionalLength=m,x.pointLength=_,x.spotLength=p,x.rectAreaLength=g,x.hemiLength=b,x.numDirectionalShadows=v,x.numPointShadows=y,x.numSpotShadows=T,x.numSpotMaps=w,x.numLightProbes=D,n.version=cde++)},setupView:function l(c,d){let u=0,h=0,f=0,m=0,_=0;const p=d.matrixWorldInverse;for(let g=0,b=c.length;g<b;g++){const v=c[g];if(v.isDirectionalLight){const y=n.directional[u];y.direction.setFromMatrixPosition(v.matrixWorld),r.setFromMatrixPosition(v.target.matrixWorld),y.direction.sub(r),y.direction.transformDirection(p),u++}else if(v.isSpotLight){const y=n.spot[f];y.position.setFromMatrixPosition(v.matrixWorld),y.position.applyMatrix4(p),y.direction.setFromMatrixPosition(v.matrixWorld),r.setFromMatrixPosition(v.target.matrixWorld),y.direction.sub(r),y.direction.transformDirection(p),f++}else if(v.isRectAreaLight){const y=n.rectArea[m];y.position.setFromMatrixPosition(v.matrixWorld),y.position.applyMatrix4(p),o.identity(),s.copy(v.matrixWorld),s.premultiply(p),o.extractRotation(s),y.halfWidth.set(.5*v.width,0,0),y.halfHeight.set(0,.5*v.height,0),y.halfWidth.applyMatrix4(o),y.halfHeight.applyMatrix4(o),m++}else if(v.isPointLight){const y=n.point[h];y.position.setFromMatrixPosition(v.matrixWorld),y.position.applyMatrix4(p),h++}else if(v.isHemisphereLight){const y=n.hemi[_];y.direction.setFromMatrixPosition(v.matrixWorld),y.direction.transformDirection(p),_++}}},state:n}}function kU(i){const t=new ude(i),e=[],n=[],c={lightsArray:e,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function r(d){c.camera=d,e.length=0,n.length=0},state:c,setupLights:function a(d){t.setup(e,d)},setupLightsView:function l(d){t.setupView(e,d)},pushLight:function s(d){e.push(d)},pushShadow:function o(d){n.push(d)}}}function hde(i){let t=new WeakMap;return{get:function e(r,s=0){const o=t.get(r);let a;return void 0===o?(a=new kU(i),t.set(r,[a])):s>=o.length?(a=new kU(i),o.push(a)):a=o[s],a},dispose:function n(){t=new WeakMap}}}class uy extends kn{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=T3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class XC extends kn{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function pde(i,t,e){let n=new Tp;const r=new $,s=new $,o=new fi,a=new uy({depthPacking:hC}),l=new XC,c={},d=e.maxTextureSize,u={[Yo]:jr,[jr]:Yo,[Br]:Br},h=new ei({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new $},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const m=new pt;m.setAttribute("position",new ui(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Be(m,h),p=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=CR;let g=this.type;function b(w,M){const D=t.update(_);h.defines.VSM_SAMPLES!==w.blurSamples&&(h.defines.VSM_SAMPLES=w.blurSamples,f.defines.VSM_SAMPLES=w.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),null===w.mapPass&&(w.mapPass=new gi(r.x,r.y)),h.uniforms.shadow_pass.value=w.map.texture,h.uniforms.resolution.value=w.mapSize,h.uniforms.radius.value=w.radius,i.setRenderTarget(w.mapPass),i.clear(),i.renderBufferDirect(M,null,D,h,_,null),f.uniforms.shadow_pass.value=w.mapPass.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,i.setRenderTarget(w.map),i.clear(),i.renderBufferDirect(M,null,D,f,_,null)}function v(w,M,D,S){let x=null;const k=!0===D.isPointLight?w.customDistanceMaterial:w.customDepthMaterial;if(void 0!==k)x=k;else if(x=!0===D.isPointLight?l:a,i.localClippingEnabled&&!0===M.clipShadows&&Array.isArray(M.clippingPlanes)&&0!==M.clippingPlanes.length||M.displacementMap&&0!==M.displacementScale||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const U=x.uuid,L=M.uuid;let H=c[U];void 0===H&&(H={},c[U]=H);let Y=H[L];void 0===Y&&(Y=x.clone(),H[L]=Y,M.addEventListener("dispose",T)),x=Y}return x.visible=M.visible,x.wireframe=M.wireframe,x.side=S===qo?null!==M.shadowSide?M.shadowSide:M.side:null!==M.shadowSide?M.shadowSide:u[M.side],x.alphaMap=M.alphaMap,x.alphaTest=M.alphaTest,x.map=M.map,x.clipShadows=M.clipShadows,x.clippingPlanes=M.clippingPlanes,x.clipIntersection=M.clipIntersection,x.displacementMap=M.displacementMap,x.displacementScale=M.displacementScale,x.displacementBias=M.displacementBias,x.wireframeLinewidth=M.wireframeLinewidth,x.linewidth=M.linewidth,!0===D.isPointLight&&!0===x.isMeshDistanceMaterial&&(i.properties.get(x).light=D),x}function y(w,M,D,S,x){if(!1===w.visible)return;if(w.layers.test(M.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&x===qo)&&(!w.frustumCulled||n.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,w.matrixWorld);const L=t.update(w),H=w.material;if(Array.isArray(H)){const Y=L.groups;for(let V=0,q=Y.length;V<q;V++){const z=Y[V],X=H[z.materialIndex];if(X&&X.visible){const se=v(w,X,S,x);w.onBeforeShadow(i,w,M,D,L,se,z),i.renderBufferDirect(D,null,L,se,w,z),w.onAfterShadow(i,w,M,D,L,se,z)}}}else if(H.visible){const Y=v(w,H,S,x);w.onBeforeShadow(i,w,M,D,L,Y,null),i.renderBufferDirect(D,null,L,Y,w,null),w.onAfterShadow(i,w,M,D,L,Y,null)}}const U=w.children;for(let L=0,H=U.length;L<H;L++)y(U[L],M,D,S,x)}function T(w){w.target.removeEventListener("dispose",T);for(const D in c){const S=c[D],x=w.target.uuid;x in S&&(S[x].dispose(),delete S[x])}}this.render=function(w,M,D){if(!1===p.enabled||!1===p.autoUpdate&&!1===p.needsUpdate||0===w.length)return;const S=i.getRenderTarget(),x=i.getActiveCubeFace(),k=i.getActiveMipmapLevel(),U=i.state;U.setBlending(oi),U.buffers.color.setClear(1,1,1,1),U.buffers.depth.setTest(!0),U.setScissorTest(!1);const L=g!==qo&&this.type===qo,H=g===qo&&this.type!==qo;for(let Y=0,V=w.length;Y<V;Y++){const q=w[Y],z=q.shadow;if(void 0===z){console.warn("THREE.WebGLShadowMap:",q,"has no shadow.");continue}if(!1===z.autoUpdate&&!1===z.needsUpdate)continue;r.copy(z.mapSize);const X=z.getFrameExtents();if(r.multiply(X),s.copy(z.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/X.x),r.x=s.x*X.x,z.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/X.y),r.y=s.y*X.y,z.mapSize.y=s.y)),null===z.map||!0===L||!0===H){const Me=this.type!==qo?{minFilter:ci,magFilter:ci}:{};null!==z.map&&z.map.dispose(),z.map=new gi(r.x,r.y,Me),z.map.texture.name=q.name+".shadowMap",z.camera.updateProjectionMatrix()}i.setRenderTarget(z.map),i.clear();const se=z.getViewportCount();for(let Me=0;Me<se;Me++){const Ve=z.getViewport(Me);o.set(s.x*Ve.x,s.y*Ve.y,s.x*Ve.z,s.y*Ve.w),U.viewport(o),z.updateMatrices(q,Me),n=z.getFrustum(),y(M,D,z.camera,q,this.type)}!0!==z.isPointLightShadow&&this.type===qo&&b(z,D),z.needsUpdate=!1}g=this.type,p.needsUpdate=!1,i.setRenderTarget(S,x,k)}}function gde(i){const r=new function t(){let R=!1;const G=new fi;let J=null;const we=new fi(0,0,0,0);return{setMask:function(Ue){J!==Ue&&!R&&(i.colorMask(Ue,Ue,Ue,Ue),J=Ue)},setLocked:function(Ue){R=Ue},setClear:function(Ue,Wt,ti,cn,sr){!0===sr&&(Ue*=cn,Wt*=cn,ti*=cn),G.set(Ue,Wt,ti,cn),!1===we.equals(G)&&(i.clearColor(Ue,Wt,ti,cn),we.copy(G))},reset:function(){R=!1,J=null,we.set(-1,0,0,0)}}},s=new function e(){let R=!1,G=null,J=null,we=null;return{setTest:function(Ue){Ue?Ie(i.DEPTH_TEST):N(i.DEPTH_TEST)},setMask:function(Ue){G!==Ue&&!R&&(i.depthMask(Ue),G=Ue)},setFunc:function(Ue){if(J!==Ue){switch(Ue){case XB:i.depthFunc(i.NEVER);break;case qB:i.depthFunc(i.ALWAYS);break;case YB:i.depthFunc(i.LESS);break;case ip:i.depthFunc(i.LEQUAL);break;case ZB:i.depthFunc(i.EQUAL);break;case KB:i.depthFunc(i.GEQUAL);break;case QB:i.depthFunc(i.GREATER);break;case JB:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}J=Ue}},setLocked:function(Ue){R=Ue},setClear:function(Ue){we!==Ue&&(i.clearDepth(Ue),we=Ue)},reset:function(){R=!1,G=null,J=null,we=null}}},o=new function n(){let R=!1,G=null,J=null,we=null,Ue=null,Wt=null,ti=null,cn=null,sr=null;return{setTest:function(_i){R||(_i?Ie(i.STENCIL_TEST):N(i.STENCIL_TEST))},setMask:function(_i){G!==_i&&!R&&(i.stencilMask(_i),G=_i)},setFunc:function(_i,Bn,qi){(J!==_i||we!==Bn||Ue!==qi)&&(i.stencilFunc(_i,Bn,qi),J=_i,we=Bn,Ue=qi)},setOp:function(_i,Bn,qi){(Wt!==_i||ti!==Bn||cn!==qi)&&(i.stencilOp(_i,Bn,qi),Wt=_i,ti=Bn,cn=qi)},setLocked:function(_i){R=_i},setClear:function(_i){sr!==_i&&(i.clearStencil(_i),sr=_i)},reset:function(){R=!1,G=null,J=null,we=null,Ue=null,Wt=null,ti=null,cn=null,sr=null}}},a=new WeakMap,l=new WeakMap;let c={},d={},u=new WeakMap,h=[],f=null,m=!1,_=null,p=null,g=null,b=null,v=null,y=null,T=null,w=new Te(0,0,0),M=0,D=!1,S=null,x=null,k=null,U=null,L=null;const H=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Y=!1,V=0;const q=i.getParameter(i.VERSION);-1!==q.indexOf("WebGL")?(V=parseFloat(/^WebGL (\d)/.exec(q)[1]),Y=V>=1):-1!==q.indexOf("OpenGL ES")&&(V=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),Y=V>=2);let z=null,X={};const se=i.getParameter(i.SCISSOR_BOX),Me=i.getParameter(i.VIEWPORT),Ve=(new fi).fromArray(se),Qe=(new fi).fromArray(Me);function W(R,G,J,we){const Ue=new Uint8Array(4),Wt=i.createTexture();i.bindTexture(R,Wt),i.texParameteri(R,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(R,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let ti=0;ti<J;ti++)R===i.TEXTURE_3D||R===i.TEXTURE_2D_ARRAY?i.texImage3D(G,0,i.RGBA,1,1,we,0,i.RGBA,i.UNSIGNED_BYTE,Ue):i.texImage2D(G+ti,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,Ue);return Wt}const be={};function Ie(R){!0!==c[R]&&(i.enable(R),c[R]=!0)}function N(R){!1!==c[R]&&(i.disable(R),c[R]=!1)}be[i.TEXTURE_2D]=W(i.TEXTURE_2D,i.TEXTURE_2D,1),be[i.TEXTURE_CUBE_MAP]=W(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),be[i.TEXTURE_2D_ARRAY]=W(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),be[i.TEXTURE_3D]=W(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Ie(i.DEPTH_TEST),s.setFunc(ip),ke(!1),xe(RR),Ie(i.CULL_FACE),Se(oi);const tt={[es]:i.FUNC_ADD,[kB]:i.FUNC_SUBTRACT,[FB]:i.FUNC_REVERSE_SUBTRACT};tt[LB]=i.MIN,tt[OB]=i.MAX;const re={[dh]:i.ZERO,[NB]:i.ONE,[jB]:i.SRC_COLOR,[uh]:i.SRC_ALPHA,[zB]:i.SRC_ALPHA_SATURATE,[Cv]:i.DST_COLOR,[Rv]:i.DST_ALPHA,[BB]:i.ONE_MINUS_SRC_COLOR,[hh]:i.ONE_MINUS_SRC_ALPHA,[VB]:i.ONE_MINUS_DST_COLOR,[UB]:i.ONE_MINUS_DST_ALPHA,[HB]:i.CONSTANT_COLOR,[GB]:i.ONE_MINUS_CONSTANT_COLOR,[WB]:i.CONSTANT_ALPHA,[$B]:i.ONE_MINUS_CONSTANT_ALPHA};function Se(R,G,J,we,Ue,Wt,ti,cn,sr,_i){if(R!==oi){if(!1===m&&(Ie(i.BLEND),m=!0),R===tp)Ue=Ue||G,Wt=Wt||J,ti=ti||we,(G!==p||Ue!==v)&&(i.blendEquationSeparate(tt[G],tt[Ue]),p=G,v=Ue),(J!==g||we!==b||Wt!==y||ti!==T)&&(i.blendFuncSeparate(re[J],re[we],re[Wt],re[ti]),g=J,b=we,y=Wt,T=ti),(!1===cn.equals(w)||sr!==M)&&(i.blendColor(cn.r,cn.g,cn.b,sr),w.copy(cn),M=sr),_=R,D=!1;else if(R!==_||_i!==D){if((p!==es||v!==es)&&(i.blendEquation(i.FUNC_ADD),p=es,v=es),_i)switch(R){case Zo:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case ep:i.blendFunc(i.ONE,i.ONE);break;case ER:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case AR:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",R)}else switch(R){case Zo:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case ep:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case ER:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case AR:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",R)}g=null,b=null,y=null,T=null,w.set(0,0,0),M=0,_=R,D=_i}}else!0===m&&(N(i.BLEND),m=!1)}function ke(R){S!==R&&(i.frontFace(R?i.CW:i.CCW),S=R)}function xe(R){R!==DB?(Ie(i.CULL_FACE),R!==x&&i.cullFace(R===RR?i.BACK:R===IB?i.FRONT:i.FRONT_AND_BACK)):N(i.CULL_FACE),x=R}function nt(R,G,J){R?(Ie(i.POLYGON_OFFSET_FILL),(U!==G||L!==J)&&(i.polygonOffset(G,J),U=G,L=J)):N(i.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:s,stencil:o},enable:Ie,disable:N,bindFramebuffer:function me(R,G){return d[R]!==G&&(i.bindFramebuffer(R,G),d[R]=G,R===i.DRAW_FRAMEBUFFER&&(d[i.FRAMEBUFFER]=G),R===i.FRAMEBUFFER&&(d[i.DRAW_FRAMEBUFFER]=G),!0)},drawBuffers:function Ae(R,G){let J=h,we=!1;if(R){J=u.get(G),void 0===J&&(J=[],u.set(G,J));const Ue=R.textures;if(J.length!==Ue.length||J[0]!==i.COLOR_ATTACHMENT0){for(let Wt=0,ti=Ue.length;Wt<ti;Wt++)J[Wt]=i.COLOR_ATTACHMENT0+Wt;J.length=Ue.length,we=!0}}else J[0]!==i.BACK&&(J[0]=i.BACK,we=!0);we&&i.drawBuffers(J)},useProgram:function j(R){return f!==R&&(i.useProgram(R),f=R,!0)},setBlending:Se,setMaterial:function he(R,G){R.side===Br?N(i.CULL_FACE):Ie(i.CULL_FACE);let J=R.side===jr;G&&(J=!J),ke(J),R.blending===Zo&&!1===R.transparent?Se(oi):Se(R.blending,R.blendEquation,R.blendSrc,R.blendDst,R.blendEquationAlpha,R.blendSrcAlpha,R.blendDstAlpha,R.blendColor,R.blendAlpha,R.premultipliedAlpha),s.setFunc(R.depthFunc),s.setTest(R.depthTest),s.setMask(R.depthWrite),r.setMask(R.colorWrite);const we=R.stencilWrite;o.setTest(we),we&&(o.setMask(R.stencilWriteMask),o.setFunc(R.stencilFunc,R.stencilRef,R.stencilFuncMask),o.setOp(R.stencilFail,R.stencilZFail,R.stencilZPass)),nt(R.polygonOffset,R.polygonOffsetFactor,R.polygonOffsetUnits),!0===R.alphaToCoverage?Ie(i.SAMPLE_ALPHA_TO_COVERAGE):N(i.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:ke,setCullFace:xe,setLineWidth:function $e(R){R!==k&&(Y&&i.lineWidth(R),k=R)},setPolygonOffset:nt,setScissorTest:function F(R){R?Ie(i.SCISSOR_TEST):N(i.SCISSOR_TEST)},activeTexture:function E(R){void 0===R&&(R=i.TEXTURE0+H-1),z!==R&&(i.activeTexture(R),z=R)},bindTexture:function Q(R,G,J){void 0===J&&(J=null===z?i.TEXTURE0+H-1:z);let we=X[J];void 0===we&&(we={type:void 0,texture:void 0},X[J]=we),(we.type!==R||we.texture!==G)&&(z!==J&&(i.activeTexture(J),z=J),i.bindTexture(R,G||be[R]),we.type=R,we.texture=G)},unbindTexture:function fe(){const R=X[z];void 0!==R&&void 0!==R.type&&(i.bindTexture(R.type,null),R.type=void 0,R.texture=void 0)},compressedTexImage2D:function ye(){try{i.compressedTexImage2D.apply(i,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},compressedTexImage3D:function _e(){try{i.compressedTexImage3D.apply(i,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},texImage2D:function gt(){try{i.texImage2D.apply(i,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},texImage3D:function ot(){try{i.texImage3D.apply(i,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},updateUBOMapping:function Je(R,G){let J=l.get(G);void 0===J&&(J=new WeakMap,l.set(G,J));let we=J.get(R);void 0===we&&(we=i.getUniformBlockIndex(G,R.name),J.set(R,we))},uniformBlockBinding:function Ti(R,G){const we=l.get(G).get(R);a.get(G)!==we&&(i.uniformBlockBinding(G,we,R.__bindingPointIndex),a.set(G,we))},texStorage2D:function De(){try{i.texStorage2D.apply(i,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},texStorage3D:function Ze(){try{i.texStorage3D.apply(i,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},texSubImage2D:function et(){try{i.texSubImage2D.apply(i,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},texSubImage3D:function Ne(){try{i.texSubImage3D.apply(i,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},compressedTexSubImage2D:function Oe(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},compressedTexSubImage3D:function dt(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},scissor:function Xe(R){!1===Ve.equals(R)&&(i.scissor(R.x,R.y,R.z,R.w),Ve.copy(R))},viewport:function wt(R){!1===Qe.equals(R)&&(i.viewport(R.x,R.y,R.z,R.w),Qe.copy(R))},reset:function At(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),c={},z=null,X={},d={},u=new WeakMap,h=[],f=null,m=!1,_=null,p=null,g=null,b=null,v=null,y=null,T=null,w=new Te(0,0,0),M=0,D=!1,S=null,x=null,k=null,U=null,L=null,Ve.set(0,0,i.canvas.width,i.canvas.height),Qe.set(0,0,i.canvas.width,i.canvas.height),r.reset(),s.reset(),o.reset()}}}function _de(i,t,e,n,r,s,o){const a=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),c=new $,d=new WeakMap;let u;const h=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function m(F,E){return f?new OffscreenCanvas(F,E):pp("canvas")}function _(F,E,Q){let fe=1;const ye=nt(F);if((ye.width>Q||ye.height>Q)&&(fe=Q/Math.max(ye.width,ye.height)),fe<1){if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap||typeof VideoFrame<"u"&&F instanceof VideoFrame){const _e=Math.floor(fe*ye.width),et=Math.floor(fe*ye.height);void 0===u&&(u=m(_e,et));const Ne=E?m(_e,et):u;return Ne.width=_e,Ne.height=et,Ne.getContext("2d").drawImage(F,0,0,_e,et),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ye.width+"x"+ye.height+") to ("+_e+"x"+et+")."),Ne}return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ye.width+"x"+ye.height+")."),F}return F}function p(F){return F.generateMipmaps&&F.minFilter!==ci&&F.minFilter!==fn}function g(F){i.generateMipmap(F)}function b(F,E,Q,fe,ye=!1){if(null!==F){if(void 0!==i[F])return i[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let _e=E;if(E===i.RED&&(Q===i.FLOAT&&(_e=i.R32F),Q===i.HALF_FLOAT&&(_e=i.R16F),Q===i.UNSIGNED_BYTE&&(_e=i.R8)),E===i.RED_INTEGER&&(Q===i.UNSIGNED_BYTE&&(_e=i.R8UI),Q===i.UNSIGNED_SHORT&&(_e=i.R16UI),Q===i.UNSIGNED_INT&&(_e=i.R32UI),Q===i.BYTE&&(_e=i.R8I),Q===i.SHORT&&(_e=i.R16I),Q===i.INT&&(_e=i.R32I)),E===i.RG&&(Q===i.FLOAT&&(_e=i.RG32F),Q===i.HALF_FLOAT&&(_e=i.RG16F),Q===i.UNSIGNED_BYTE&&(_e=i.RG8)),E===i.RG_INTEGER&&(Q===i.UNSIGNED_BYTE&&(_e=i.RG8UI),Q===i.UNSIGNED_SHORT&&(_e=i.RG16UI),Q===i.UNSIGNED_INT&&(_e=i.RG32UI),Q===i.BYTE&&(_e=i.RG8I),Q===i.SHORT&&(_e=i.RG16I),Q===i.INT&&(_e=i.RG32I)),E===i.RGB&&Q===i.UNSIGNED_INT_5_9_9_9_REV&&(_e=i.RGB9_E5),E===i.RGBA){const et=ye?cp:xi.getTransfer(fe);Q===i.FLOAT&&(_e=i.RGBA32F),Q===i.HALF_FLOAT&&(_e=i.RGBA16F),Q===i.UNSIGNED_BYTE&&(_e=et===Hi?i.SRGB8_ALPHA8:i.RGBA8),Q===i.UNSIGNED_SHORT_4_4_4_4&&(_e=i.RGBA4),Q===i.UNSIGNED_SHORT_5_5_5_1&&(_e=i.RGB5_A1)}return(_e===i.R16F||_e===i.R32F||_e===i.RG16F||_e===i.RG32F||_e===i.RGBA16F||_e===i.RGBA32F)&&t.get("EXT_color_buffer_float"),_e}function v(F,E){return!0===p(F)||F.isFramebufferTexture&&F.minFilter!==ci&&F.minFilter!==fn?Math.log2(Math.max(E.width,E.height))+1:void 0!==F.mipmaps&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?E.mipmaps.length:1}function y(F){const E=F.target;E.removeEventListener("dispose",y),function w(F){const E=n.get(F);if(void 0===E.__webglInit)return;const Q=F.source,fe=h.get(Q);if(fe){const ye=fe[E.__cacheKey];ye.usedTimes--,0===ye.usedTimes&&M(F),0===Object.keys(fe).length&&h.delete(Q)}n.remove(F)}(E),E.isVideoTexture&&d.delete(E)}function T(F){const E=F.target;E.removeEventListener("dispose",T),function D(F){const E=n.get(F);if(F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let fe=0;fe<6;fe++){if(Array.isArray(E.__webglFramebuffer[fe]))for(let ye=0;ye<E.__webglFramebuffer[fe].length;ye++)i.deleteFramebuffer(E.__webglFramebuffer[fe][ye]);else i.deleteFramebuffer(E.__webglFramebuffer[fe]);E.__webglDepthbuffer&&i.deleteRenderbuffer(E.__webglDepthbuffer[fe])}else{if(Array.isArray(E.__webglFramebuffer))for(let fe=0;fe<E.__webglFramebuffer.length;fe++)i.deleteFramebuffer(E.__webglFramebuffer[fe]);else i.deleteFramebuffer(E.__webglFramebuffer);if(E.__webglDepthbuffer&&i.deleteRenderbuffer(E.__webglDepthbuffer),E.__webglMultisampledFramebuffer&&i.deleteFramebuffer(E.__webglMultisampledFramebuffer),E.__webglColorRenderbuffer)for(let fe=0;fe<E.__webglColorRenderbuffer.length;fe++)E.__webglColorRenderbuffer[fe]&&i.deleteRenderbuffer(E.__webglColorRenderbuffer[fe]);E.__webglDepthRenderbuffer&&i.deleteRenderbuffer(E.__webglDepthRenderbuffer)}const Q=F.textures;for(let fe=0,ye=Q.length;fe<ye;fe++){const _e=n.get(Q[fe]);_e.__webglTexture&&(i.deleteTexture(_e.__webglTexture),o.memory.textures--),n.remove(Q[fe])}n.remove(F)}(E)}function M(F){const E=n.get(F);i.deleteTexture(E.__webglTexture),delete h.get(F.source)[E.__cacheKey],o.memory.textures--}let S=0;function L(F,E){const Q=n.get(F);if(F.isVideoTexture&&function xe(F){const E=o.render.frame;d.get(F)!==E&&(d.set(F,E),F.update())}(F),!1===F.isRenderTargetTexture&&F.version>0&&Q.__version!==F.version){const fe=F.image;if(null===fe)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==fe.complete)return void Ve(Q,F,E);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}e.bindTexture(i.TEXTURE_2D,Q.__webglTexture,i.TEXTURE0+E)}const q={[Ko]:i.REPEAT,[ws]:i.CLAMP_TO_EDGE,[mh]:i.MIRRORED_REPEAT},z={[ci]:i.NEAREST,[Av]:i.NEAREST_MIPMAP_NEAREST,[Bc]:i.NEAREST_MIPMAP_LINEAR,[fn]:i.LINEAR,[ph]:i.LINEAR_MIPMAP_NEAREST,[js]:i.LINEAR_MIPMAP_LINEAR},X={[S3]:i.NEVER,[I3]:i.ALWAYS,[R3]:i.LESS,[mC]:i.LEQUAL,[C3]:i.EQUAL,[D3]:i.GEQUAL,[E3]:i.GREATER,[A3]:i.NOTEQUAL};function se(F,E){if(E.type===ts&&!1===t.has("OES_texture_float_linear")&&(E.magFilter===fn||E.magFilter===ph||E.magFilter===Bc||E.magFilter===js||E.minFilter===fn||E.minFilter===ph||E.minFilter===Bc||E.minFilter===js)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(F,i.TEXTURE_WRAP_S,q[E.wrapS]),i.texParameteri(F,i.TEXTURE_WRAP_T,q[E.wrapT]),(F===i.TEXTURE_3D||F===i.TEXTURE_2D_ARRAY)&&i.texParameteri(F,i.TEXTURE_WRAP_R,q[E.wrapR]),i.texParameteri(F,i.TEXTURE_MAG_FILTER,z[E.magFilter]),i.texParameteri(F,i.TEXTURE_MIN_FILTER,z[E.minFilter]),E.compareFunction&&(i.texParameteri(F,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(F,i.TEXTURE_COMPARE_FUNC,X[E.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(E.magFilter===ci||E.minFilter!==Bc&&E.minFilter!==js||E.type===ts&&!1===t.has("OES_texture_float_linear"))return;if(E.anisotropy>1||n.get(E).__currentAnisotropy){const Q=t.get("EXT_texture_filter_anisotropic");i.texParameterf(F,Q.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(E.anisotropy,r.getMaxAnisotropy())),n.get(E).__currentAnisotropy=E.anisotropy}}}function Me(F,E){let Q=!1;void 0===F.__webglInit&&(F.__webglInit=!0,E.addEventListener("dispose",y));const fe=E.source;let ye=h.get(fe);void 0===ye&&(ye={},h.set(fe,ye));const _e=function U(F){const E=[];return E.push(F.wrapS),E.push(F.wrapT),E.push(F.wrapR||0),E.push(F.magFilter),E.push(F.minFilter),E.push(F.anisotropy),E.push(F.internalFormat),E.push(F.format),E.push(F.type),E.push(F.generateMipmaps),E.push(F.premultiplyAlpha),E.push(F.flipY),E.push(F.unpackAlignment),E.push(F.colorSpace),E.join()}(E);if(_e!==F.__cacheKey){void 0===ye[_e]&&(ye[_e]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,Q=!0),ye[_e].usedTimes++;const et=ye[F.__cacheKey];void 0!==et&&(ye[F.__cacheKey].usedTimes--,0===et.usedTimes&&M(E)),F.__cacheKey=_e,F.__webglTexture=ye[_e].texture}return Q}function Ve(F,E,Q){let fe=i.TEXTURE_2D;(E.isDataArrayTexture||E.isCompressedArrayTexture)&&(fe=i.TEXTURE_2D_ARRAY),E.isData3DTexture&&(fe=i.TEXTURE_3D);const ye=Me(F,E),_e=E.source;e.bindTexture(fe,F.__webglTexture,i.TEXTURE0+Q);const et=n.get(_e);if(_e.version!==et.__version||!0===ye){e.activeTexture(i.TEXTURE0+Q);const Ne=xi.getPrimaries(xi.workingColorSpace),Oe=E.colorSpace===Da?null:xi.getPrimaries(E.colorSpace),dt=E.colorSpace===Da||Ne===Oe?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,E.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,E.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,dt);let De=_(E.image,!1,r.maxTextureSize);De=$e(E,De);const Ze=s.convert(E.format,E.colorSpace),gt=s.convert(E.type);let Xe,ot=b(E.internalFormat,Ze,gt,E.colorSpace,E.isVideoTexture);se(fe,E);const wt=E.mipmaps,Je=!0!==E.isVideoTexture,Ti=void 0===et.__version||!0===ye,At=_e.dataReady,R=v(E,De);if(E.isDepthTexture)ot=i.DEPTH_COMPONENT16,E.type===ts?ot=i.DEPTH_COMPONENT32F:E.type===Uc?ot=i.DEPTH_COMPONENT24:E.type===xl&&(ot=i.DEPTH24_STENCIL8),Ti&&(Je?e.texStorage2D(i.TEXTURE_2D,1,ot,De.width,De.height):e.texImage2D(i.TEXTURE_2D,0,ot,De.width,De.height,0,Ze,gt,null));else if(E.isDataTexture)if(wt.length>0){Je&&Ti&&e.texStorage2D(i.TEXTURE_2D,R,ot,wt[0].width,wt[0].height);for(let G=0,J=wt.length;G<J;G++)Xe=wt[G],Je?At&&e.texSubImage2D(i.TEXTURE_2D,G,0,0,Xe.width,Xe.height,Ze,gt,Xe.data):e.texImage2D(i.TEXTURE_2D,G,ot,Xe.width,Xe.height,0,Ze,gt,Xe.data);E.generateMipmaps=!1}else Je?(Ti&&e.texStorage2D(i.TEXTURE_2D,R,ot,De.width,De.height),At&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,De.width,De.height,Ze,gt,De.data)):e.texImage2D(i.TEXTURE_2D,0,ot,De.width,De.height,0,Ze,gt,De.data);else if(E.isCompressedTexture)if(E.isCompressedArrayTexture){Je&&Ti&&e.texStorage3D(i.TEXTURE_2D_ARRAY,R,ot,wt[0].width,wt[0].height,De.depth);for(let G=0,J=wt.length;G<J;G++)Xe=wt[G],E.format!==Ts?null!==Ze?Je?At&&e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,G,0,0,0,Xe.width,Xe.height,De.depth,Ze,Xe.data,0,0):e.compressedTexImage3D(i.TEXTURE_2D_ARRAY,G,ot,Xe.width,Xe.height,De.depth,0,Xe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Je?At&&e.texSubImage3D(i.TEXTURE_2D_ARRAY,G,0,0,0,Xe.width,Xe.height,De.depth,Ze,gt,Xe.data):e.texImage3D(i.TEXTURE_2D_ARRAY,G,ot,Xe.width,Xe.height,De.depth,0,Ze,gt,Xe.data)}else{Je&&Ti&&e.texStorage2D(i.TEXTURE_2D,R,ot,wt[0].width,wt[0].height);for(let G=0,J=wt.length;G<J;G++)Xe=wt[G],E.format!==Ts?null!==Ze?Je?At&&e.compressedTexSubImage2D(i.TEXTURE_2D,G,0,0,Xe.width,Xe.height,Ze,Xe.data):e.compressedTexImage2D(i.TEXTURE_2D,G,ot,Xe.width,Xe.height,0,Xe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Je?At&&e.texSubImage2D(i.TEXTURE_2D,G,0,0,Xe.width,Xe.height,Ze,gt,Xe.data):e.texImage2D(i.TEXTURE_2D,G,ot,Xe.width,Xe.height,0,Ze,gt,Xe.data)}else if(E.isDataArrayTexture)Je?(Ti&&e.texStorage3D(i.TEXTURE_2D_ARRAY,R,ot,De.width,De.height,De.depth),At&&e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,De.width,De.height,De.depth,Ze,gt,De.data)):e.texImage3D(i.TEXTURE_2D_ARRAY,0,ot,De.width,De.height,De.depth,0,Ze,gt,De.data);else if(E.isData3DTexture)Je?(Ti&&e.texStorage3D(i.TEXTURE_3D,R,ot,De.width,De.height,De.depth),At&&e.texSubImage3D(i.TEXTURE_3D,0,0,0,0,De.width,De.height,De.depth,Ze,gt,De.data)):e.texImage3D(i.TEXTURE_3D,0,ot,De.width,De.height,De.depth,0,Ze,gt,De.data);else if(E.isFramebufferTexture){if(Ti)if(Je)e.texStorage2D(i.TEXTURE_2D,R,ot,De.width,De.height);else{let G=De.width,J=De.height;for(let we=0;we<R;we++)e.texImage2D(i.TEXTURE_2D,we,ot,G,J,0,Ze,gt,null),G>>=1,J>>=1}}else if(wt.length>0){if(Je&&Ti){const G=nt(wt[0]);e.texStorage2D(i.TEXTURE_2D,R,ot,G.width,G.height)}for(let G=0,J=wt.length;G<J;G++)Xe=wt[G],Je?At&&e.texSubImage2D(i.TEXTURE_2D,G,0,0,Ze,gt,Xe):e.texImage2D(i.TEXTURE_2D,G,ot,Ze,gt,Xe);E.generateMipmaps=!1}else if(Je){if(Ti){const G=nt(De);e.texStorage2D(i.TEXTURE_2D,R,ot,G.width,G.height)}At&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,Ze,gt,De)}else e.texImage2D(i.TEXTURE_2D,0,ot,Ze,gt,De);p(E)&&g(fe),et.__version=_e.version,E.onUpdate&&E.onUpdate(E)}F.__version=E.version}function W(F,E,Q,fe,ye,_e){const et=s.convert(Q.format,Q.colorSpace),Ne=s.convert(Q.type),Oe=b(Q.internalFormat,et,Ne,Q.colorSpace);if(!n.get(E).__hasExternalTextures){const De=Math.max(1,E.width>>_e),Ze=Math.max(1,E.height>>_e);ye===i.TEXTURE_3D||ye===i.TEXTURE_2D_ARRAY?e.texImage3D(ye,_e,Oe,De,Ze,E.depth,0,et,Ne,null):e.texImage2D(ye,_e,Oe,De,Ze,0,et,Ne,null)}e.bindFramebuffer(i.FRAMEBUFFER,F),ke(E)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,fe,ye,n.get(Q).__webglTexture,0,he(E)):(ye===i.TEXTURE_2D||ye>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&ye<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,fe,ye,n.get(Q).__webglTexture,_e),e.bindFramebuffer(i.FRAMEBUFFER,null)}function be(F,E,Q){if(i.bindRenderbuffer(i.RENDERBUFFER,F),E.depthBuffer&&!E.stencilBuffer){let fe=i.DEPTH_COMPONENT24;if(Q||ke(E)){const ye=E.depthTexture;ye&&ye.isDepthTexture&&(ye.type===ts?fe=i.DEPTH_COMPONENT32F:ye.type===Uc&&(fe=i.DEPTH_COMPONENT24));const _e=he(E);ke(E)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,_e,fe,E.width,E.height):i.renderbufferStorageMultisample(i.RENDERBUFFER,_e,fe,E.width,E.height)}else i.renderbufferStorage(i.RENDERBUFFER,fe,E.width,E.height);i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,F)}else if(E.depthBuffer&&E.stencilBuffer){const fe=he(E);Q&&!1===ke(E)?i.renderbufferStorageMultisample(i.RENDERBUFFER,fe,i.DEPTH24_STENCIL8,E.width,E.height):ke(E)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,fe,i.DEPTH24_STENCIL8,E.width,E.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,E.width,E.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,F)}else{const fe=E.textures;for(let ye=0;ye<fe.length;ye++){const _e=fe[ye],et=s.convert(_e.format,_e.colorSpace),Ne=s.convert(_e.type),Oe=b(_e.internalFormat,et,Ne,_e.colorSpace),dt=he(E);Q&&!1===ke(E)?i.renderbufferStorageMultisample(i.RENDERBUFFER,dt,Oe,E.width,E.height):ke(E)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,dt,Oe,E.width,E.height):i.renderbufferStorage(i.RENDERBUFFER,Oe,E.width,E.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function N(F){const E=n.get(F),Q=!0===F.isWebGLCubeRenderTarget;if(F.depthTexture&&!E.__autoAllocateDepthBuffer){if(Q)throw new Error("target.depthTexture not supported in Cube render targets");!function Ie(F,E){if(E&&E.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(i.FRAMEBUFFER,F),!E.depthTexture||!E.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(E.depthTexture).__webglTexture||E.depthTexture.image.width!==E.width||E.depthTexture.image.height!==E.height)&&(E.depthTexture.image.width=E.width,E.depthTexture.image.height=E.height,E.depthTexture.needsUpdate=!0),L(E.depthTexture,0);const fe=n.get(E.depthTexture).__webglTexture,ye=he(E);if(E.depthTexture.format===Vc)ke(E)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,fe,0,ye):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,fe,0);else{if(E.depthTexture.format!==wl)throw new Error("Unknown depthTexture format");ke(E)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,fe,0,ye):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,fe,0)}}(E.__webglFramebuffer,F)}else if(Q){E.__webglDepthbuffer=[];for(let fe=0;fe<6;fe++)e.bindFramebuffer(i.FRAMEBUFFER,E.__webglFramebuffer[fe]),E.__webglDepthbuffer[fe]=i.createRenderbuffer(),be(E.__webglDepthbuffer[fe],F,!1)}else e.bindFramebuffer(i.FRAMEBUFFER,E.__webglFramebuffer),E.__webglDepthbuffer=i.createRenderbuffer(),be(E.__webglDepthbuffer,F,!1);e.bindFramebuffer(i.FRAMEBUFFER,null)}const tt=[],re=[];function he(F){return Math.min(r.maxSamples,F.samples)}function ke(F){const E=n.get(F);return F.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==E.__useRenderToTexture}function $e(F,E){const Q=F.colorSpace,fe=F.format,ye=F.type;return!0===F.isCompressedTexture||!0===F.isVideoTexture||Q!==Yn&&Q!==Da&&(xi.getTransfer(Q)===Hi?(fe!==Ts||ye!==Aa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Q)),E}function nt(F){return typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement?(c.width=F.naturalWidth||F.width,c.height=F.naturalHeight||F.height):typeof VideoFrame<"u"&&F instanceof VideoFrame?(c.width=F.displayWidth,c.height=F.displayHeight):(c.width=F.width,c.height=F.height),c}this.allocateTextureUnit=function k(){const F=S;return F>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+r.maxTextures),S+=1,F},this.resetTextureUnits=function x(){S=0},this.setTexture2D=L,this.setTexture2DArray=function H(F,E){const Q=n.get(F);F.version>0&&Q.__version!==F.version?Ve(Q,F,E):e.bindTexture(i.TEXTURE_2D_ARRAY,Q.__webglTexture,i.TEXTURE0+E)},this.setTexture3D=function Y(F,E){const Q=n.get(F);F.version>0&&Q.__version!==F.version?Ve(Q,F,E):e.bindTexture(i.TEXTURE_3D,Q.__webglTexture,i.TEXTURE0+E)},this.setTextureCube=function V(F,E){const Q=n.get(F);F.version>0&&Q.__version!==F.version?function Qe(F,E,Q){if(6!==E.image.length)return;const fe=Me(F,E),ye=E.source;e.bindTexture(i.TEXTURE_CUBE_MAP,F.__webglTexture,i.TEXTURE0+Q);const _e=n.get(ye);if(ye.version!==_e.__version||!0===fe){e.activeTexture(i.TEXTURE0+Q);const et=xi.getPrimaries(xi.workingColorSpace),Ne=E.colorSpace===Da?null:xi.getPrimaries(E.colorSpace),Oe=E.colorSpace===Da||et===Ne?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,E.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,E.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Oe);const dt=E.isCompressedTexture||E.image[0].isCompressedTexture,De=E.image[0]&&E.image[0].isDataTexture,Ze=[];for(let J=0;J<6;J++)Ze[J]=dt||De?De?E.image[J].image:E.image[J]:_(E.image[J],!0,r.maxCubemapSize),Ze[J]=$e(E,Ze[J]);const gt=Ze[0],ot=s.convert(E.format,E.colorSpace),Xe=s.convert(E.type),wt=b(E.internalFormat,ot,Xe,E.colorSpace),Je=!0!==E.isVideoTexture,Ti=void 0===_e.__version||!0===fe,At=ye.dataReady;let G,R=v(E,gt);if(se(i.TEXTURE_CUBE_MAP,E),dt){Je&&Ti&&e.texStorage2D(i.TEXTURE_CUBE_MAP,R,wt,gt.width,gt.height);for(let J=0;J<6;J++){G=Ze[J].mipmaps;for(let we=0;we<G.length;we++){const Ue=G[we];E.format!==Ts?null!==ot?Je?At&&e.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+J,we,0,0,Ue.width,Ue.height,ot,Ue.data):e.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+J,we,wt,Ue.width,Ue.height,0,Ue.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Je?At&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+J,we,0,0,Ue.width,Ue.height,ot,Xe,Ue.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+J,we,wt,Ue.width,Ue.height,0,ot,Xe,Ue.data)}}}else{if(G=E.mipmaps,Je&&Ti){G.length>0&&R++;const J=nt(Ze[0]);e.texStorage2D(i.TEXTURE_CUBE_MAP,R,wt,J.width,J.height)}for(let J=0;J<6;J++)if(De){Je?At&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,0,0,Ze[J].width,Ze[J].height,ot,Xe,Ze[J].data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,wt,Ze[J].width,Ze[J].height,0,ot,Xe,Ze[J].data);for(let we=0;we<G.length;we++){const Wt=G[we].image[J].image;Je?At&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+J,we+1,0,0,Wt.width,Wt.height,ot,Xe,Wt.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+J,we+1,wt,Wt.width,Wt.height,0,ot,Xe,Wt.data)}}else{Je?At&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,0,0,ot,Xe,Ze[J]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,wt,ot,Xe,Ze[J]);for(let we=0;we<G.length;we++){const Ue=G[we];Je?At&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+J,we+1,0,0,ot,Xe,Ue.image[J]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+J,we+1,wt,ot,Xe,Ue.image[J])}}}p(E)&&g(i.TEXTURE_CUBE_MAP),_e.__version=ye.version,E.onUpdate&&E.onUpdate(E)}F.__version=E.version}(Q,F,E):e.bindTexture(i.TEXTURE_CUBE_MAP,Q.__webglTexture,i.TEXTURE0+E)},this.rebindTextures=function me(F,E,Q){const fe=n.get(F);void 0!==E&&W(fe.__webglFramebuffer,F,F.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),void 0!==Q&&N(F)},this.setupRenderTarget=function Ae(F){const E=F.texture,Q=n.get(F),fe=n.get(E);F.addEventListener("dispose",T);const ye=F.textures,_e=!0===F.isWebGLCubeRenderTarget,et=ye.length>1;if(et||(void 0===fe.__webglTexture&&(fe.__webglTexture=i.createTexture()),fe.__version=E.version,o.memory.textures++),_e){Q.__webglFramebuffer=[];for(let Ne=0;Ne<6;Ne++)if(E.mipmaps&&E.mipmaps.length>0){Q.__webglFramebuffer[Ne]=[];for(let Oe=0;Oe<E.mipmaps.length;Oe++)Q.__webglFramebuffer[Ne][Oe]=i.createFramebuffer()}else Q.__webglFramebuffer[Ne]=i.createFramebuffer()}else{if(E.mipmaps&&E.mipmaps.length>0){Q.__webglFramebuffer=[];for(let Ne=0;Ne<E.mipmaps.length;Ne++)Q.__webglFramebuffer[Ne]=i.createFramebuffer()}else Q.__webglFramebuffer=i.createFramebuffer();if(et)for(let Ne=0,Oe=ye.length;Ne<Oe;Ne++){const dt=n.get(ye[Ne]);void 0===dt.__webglTexture&&(dt.__webglTexture=i.createTexture(),o.memory.textures++)}if(F.samples>0&&!1===ke(F)){Q.__webglMultisampledFramebuffer=i.createFramebuffer(),Q.__webglColorRenderbuffer=[],e.bindFramebuffer(i.FRAMEBUFFER,Q.__webglMultisampledFramebuffer);for(let Ne=0;Ne<ye.length;Ne++){const Oe=ye[Ne];Q.__webglColorRenderbuffer[Ne]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,Q.__webglColorRenderbuffer[Ne]);const dt=s.convert(Oe.format,Oe.colorSpace),De=s.convert(Oe.type),Ze=b(Oe.internalFormat,dt,De,Oe.colorSpace,!0===F.isXRRenderTarget),gt=he(F);i.renderbufferStorageMultisample(i.RENDERBUFFER,gt,Ze,F.width,F.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ne,i.RENDERBUFFER,Q.__webglColorRenderbuffer[Ne])}i.bindRenderbuffer(i.RENDERBUFFER,null),F.depthBuffer&&(Q.__webglDepthRenderbuffer=i.createRenderbuffer(),be(Q.__webglDepthRenderbuffer,F,!0)),e.bindFramebuffer(i.FRAMEBUFFER,null)}}if(_e){e.bindTexture(i.TEXTURE_CUBE_MAP,fe.__webglTexture),se(i.TEXTURE_CUBE_MAP,E);for(let Ne=0;Ne<6;Ne++)if(E.mipmaps&&E.mipmaps.length>0)for(let Oe=0;Oe<E.mipmaps.length;Oe++)W(Q.__webglFramebuffer[Ne][Oe],F,E,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,Oe);else W(Q.__webglFramebuffer[Ne],F,E,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0);p(E)&&g(i.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(et){for(let Ne=0,Oe=ye.length;Ne<Oe;Ne++){const dt=ye[Ne],De=n.get(dt);e.bindTexture(i.TEXTURE_2D,De.__webglTexture),se(i.TEXTURE_2D,dt),W(Q.__webglFramebuffer,F,dt,i.COLOR_ATTACHMENT0+Ne,i.TEXTURE_2D,0),p(dt)&&g(i.TEXTURE_2D)}e.unbindTexture()}else{let Ne=i.TEXTURE_2D;if((F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(Ne=F.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(Ne,fe.__webglTexture),se(Ne,E),E.mipmaps&&E.mipmaps.length>0)for(let Oe=0;Oe<E.mipmaps.length;Oe++)W(Q.__webglFramebuffer[Oe],F,E,i.COLOR_ATTACHMENT0,Ne,Oe);else W(Q.__webglFramebuffer,F,E,i.COLOR_ATTACHMENT0,Ne,0);p(E)&&g(Ne),e.unbindTexture()}F.depthBuffer&&N(F)},this.updateRenderTargetMipmap=function j(F){const E=F.textures;for(let Q=0,fe=E.length;Q<fe;Q++){const ye=E[Q];if(p(ye)){const _e=F.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,et=n.get(ye).__webglTexture;e.bindTexture(_e,et),g(_e),e.unbindTexture()}}},this.updateMultisampleRenderTarget=function Se(F){if(F.samples>0)if(!1===ke(F)){const E=F.textures,Q=F.width,fe=F.height;let ye=i.COLOR_BUFFER_BIT;const _e=F.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,et=n.get(F),Ne=E.length>1;if(Ne)for(let Oe=0;Oe<E.length;Oe++)e.bindFramebuffer(i.FRAMEBUFFER,et.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Oe,i.RENDERBUFFER,null),e.bindFramebuffer(i.FRAMEBUFFER,et.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Oe,i.TEXTURE_2D,null,0);e.bindFramebuffer(i.READ_FRAMEBUFFER,et.__webglMultisampledFramebuffer),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,et.__webglFramebuffer);for(let Oe=0;Oe<E.length;Oe++){if(F.resolveDepthBuffer&&(F.depthBuffer&&(ye|=i.DEPTH_BUFFER_BIT),F.stencilBuffer&&F.resolveStencilBuffer&&(ye|=i.STENCIL_BUFFER_BIT)),Ne){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,et.__webglColorRenderbuffer[Oe]);const dt=n.get(E[Oe]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,dt,0)}i.blitFramebuffer(0,0,Q,fe,0,0,Q,fe,ye,i.NEAREST),!0===l&&(tt.length=0,re.length=0,tt.push(i.COLOR_ATTACHMENT0+Oe),F.depthBuffer&&!1===F.resolveDepthBuffer&&(tt.push(_e),re.push(_e),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,re)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,tt))}if(e.bindFramebuffer(i.READ_FRAMEBUFFER,null),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Ne)for(let Oe=0;Oe<E.length;Oe++){e.bindFramebuffer(i.FRAMEBUFFER,et.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Oe,i.RENDERBUFFER,et.__webglColorRenderbuffer[Oe]);const dt=n.get(E[Oe]).__webglTexture;e.bindFramebuffer(i.FRAMEBUFFER,et.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Oe,i.TEXTURE_2D,dt,0)}e.bindFramebuffer(i.DRAW_FRAMEBUFFER,et.__webglMultisampledFramebuffer)}else F.depthBuffer&&!1===F.resolveDepthBuffer&&l&&i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[F.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=N,this.setupFrameBufferTexture=W,this.useMultisampledRTT=ke}function FU(i,t){return{convert:function e(n,r=Da){let s;const o=xi.getTransfer(r);if(n===Aa)return i.UNSIGNED_BYTE;if(n===PR)return i.UNSIGNED_SHORT_4_4_4_4;if(n===kR)return i.UNSIGNED_SHORT_5_5_5_1;if(n===f3)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===u3)return i.BYTE;if(n===h3)return i.SHORT;if(n===Dv)return i.UNSIGNED_SHORT;if(n===IR)return i.INT;if(n===Uc)return i.UNSIGNED_INT;if(n===ts)return i.FLOAT;if(n===mn)return i.HALF_FLOAT;if(n===m3)return i.ALPHA;if(n===p3)return i.RGB;if(n===Ts)return i.RGBA;if(n===g3)return i.LUMINANCE;if(n===_3)return i.LUMINANCE_ALPHA;if(n===Vc)return i.DEPTH_COMPONENT;if(n===wl)return i.DEPTH_STENCIL;if(n===op)return i.RED;if(n===FR)return i.RED_INTEGER;if(n===b3)return i.RG;if(n===LR)return i.RG_INTEGER;if(n===OR)return i.RGBA_INTEGER;if(n===Iv||n===Pv||n===kv||n===Fv)if(o===Hi){if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(n===Iv)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Pv)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===kv)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Fv)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=t.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(n===Iv)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Pv)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===kv)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Fv)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===NR||n===jR||n===BR||n===UR){if(s=t.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(n===NR)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===jR)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===BR)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===UR)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===VR||n===zR||n===HR){if(s=t.get("WEBGL_compressed_texture_etc"),null===s)return null;if(n===VR||n===zR)return o===Hi?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===HR)return o===Hi?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(n===GR||n===WR||n===$R||n===XR||n===qR||n===YR||n===ZR||n===KR||n===QR||n===JR||n===eC||n===tC||n===iC||n===nC){if(s=t.get("WEBGL_compressed_texture_astc"),null===s)return null;if(n===GR)return o===Hi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===WR)return o===Hi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===$R)return o===Hi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===XR)return o===Hi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===qR)return o===Hi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===YR)return o===Hi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===ZR)return o===Hi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===KR)return o===Hi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===QR)return o===Hi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===JR)return o===Hi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===eC)return o===Hi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===tC)return o===Hi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===iC)return o===Hi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===nC)return o===Hi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Lv||n===rC||n===sC){if(s=t.get("EXT_texture_compression_bptc"),null===s)return null;if(n===Lv)return o===Hi?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===rC)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===sC)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===v3||n===oC||n===aC||n===lC){if(s=t.get("EXT_texture_compression_rgtc"),null===s)return null;if(n===Lv)return s.COMPRESSED_RED_RGTC1_EXT;if(n===oC)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===aC)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===lC)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===xl?i.UNSIGNED_INT_24_8:void 0!==i[n]?i[n]:null}}}class LU extends Cn{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class yo extends Nt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const bde={type:"move"};class qC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new yo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new yo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new C,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new C),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new yo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new C,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new C),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(c&&t.hand){o=!0;for(const _ of t.hand.values()){const p=e.getJointPose(_,n),g=this._getHandJoint(c,_);null!==p&&(g.matrix.fromArray(p.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=p.radius),g.visible=null!==p}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,m=.005;c.inputState.pinching&&h>f+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!c.inputState.pinching&&h<=f-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==l&&t.gripSpace&&(s=e.getPose(t.gripSpace,n),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(bde)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new yo;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class xde{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,n){if(null===this.texture){const r=new Sn;t.properties.get(r).__webglTexture=e.texture,(e.depthNear!=n.depthNear||e.depthFar!=n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}render(t,e){if(null!==this.texture){if(null===this.mesh){const n=e.cameras[0].viewport,r=new ei({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Be(new Dl(20,20),r)}t.render(this.mesh,e)}}reset(){this.texture=null,this.mesh=null}}class wde extends is{constructor(t,e){super();const n=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,d=null,u=null,h=null,f=null,m=null;const _=new xde,p=e.getContextAttributes();let g=null,b=null;const v=[],y=[],T=new $;let w=null;const M=new Cn;M.layers.enable(1),M.viewport=new fi;const D=new Cn;D.layers.enable(2),D.viewport=new fi;const S=[M,D],x=new LU;x.layers.enable(1),x.layers.enable(2);let k=null,U=null;function L(W){const be=y.indexOf(W.inputSource);if(-1===be)return;const Ie=v[be];void 0!==Ie&&(Ie.update(W.inputSource,W.frame,c||o),Ie.dispatchEvent({type:W.type,data:W.inputSource}))}function H(){r.removeEventListener("select",L),r.removeEventListener("selectstart",L),r.removeEventListener("selectend",L),r.removeEventListener("squeeze",L),r.removeEventListener("squeezestart",L),r.removeEventListener("squeezeend",L),r.removeEventListener("end",H),r.removeEventListener("inputsourceschange",Y);for(let W=0;W<v.length;W++){const be=y[W];null!==be&&(y[W]=null,v[W].disconnect(be))}k=null,U=null,_.reset(),t.setRenderTarget(g),f=null,h=null,u=null,r=null,b=null,Qe.stop(),n.isPresenting=!1,t.setPixelRatio(w),t.setSize(T.width,T.height,!1),n.dispatchEvent({type:"sessionend"})}function Y(W){for(let be=0;be<W.removed.length;be++){const Ie=W.removed[be],N=y.indexOf(Ie);N>=0&&(y[N]=null,v[N].disconnect(Ie))}for(let be=0;be<W.added.length;be++){const Ie=W.added[be];let N=y.indexOf(Ie);if(-1===N){for(let Ae=0;Ae<v.length;Ae++){if(Ae>=y.length){y.push(Ie),N=Ae;break}if(null===y[Ae]){y[Ae]=Ie,N=Ae;break}}if(-1===N)break}const me=v[N];me&&me.connect(Ie)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(W){let be=v[W];return void 0===be&&(be=new qC,v[W]=be),be.getTargetRaySpace()},this.getControllerGrip=function(W){let be=v[W];return void 0===be&&(be=new qC,v[W]=be),be.getGripSpace()},this.getHand=function(W){let be=v[W];return void 0===be&&(be=new qC,v[W]=be),be.getHandSpace()},this.setFramebufferScaleFactor=function(W){s=W,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(W){a=W,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(W){c=W},this.getBaseLayer=function(){return null!==h?h:f},this.getBinding=function(){return u},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=function(){var W=Si(function*(be){if(r=be,null!==r){if(g=t.getRenderTarget(),r.addEventListener("select",L),r.addEventListener("selectstart",L),r.addEventListener("selectend",L),r.addEventListener("squeeze",L),r.addEventListener("squeezestart",L),r.addEventListener("squeezeend",L),r.addEventListener("end",H),r.addEventListener("inputsourceschange",Y),!0!==p.xrCompatible&&(yield e.makeXRCompatible()),w=t.getPixelRatio(),t.getSize(T),void 0===r.renderState.layers)f=new XRWebGLLayer(r,e,{antialias:p.antialias,alpha:!0,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:f}),t.setPixelRatio(1),t.setSize(f.framebufferWidth,f.framebufferHeight,!1),b=new gi(f.framebufferWidth,f.framebufferHeight,{format:Ts,type:Aa,colorSpace:t.outputColorSpace,stencilBuffer:p.stencil});else{let Ie=null,N=null,me=null;p.depth&&(me=p.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Ie=p.stencil?wl:Vc,N=p.stencil?xl:Uc);const Ae={colorFormat:e.RGBA8,depthFormat:me,scaleFactor:s};u=new XRWebGLBinding(r,e),h=u.createProjectionLayer(Ae),r.updateRenderState({layers:[h]}),t.setPixelRatio(1),t.setSize(h.textureWidth,h.textureHeight,!1),b=new gi(h.textureWidth,h.textureHeight,{format:Ts,type:Aa,depthTexture:new jh(h.textureWidth,h.textureHeight,N,void 0,void 0,void 0,void 0,void 0,void 0,Ie),stencilBuffer:p.stencil,colorSpace:t.outputColorSpace,samples:p.antialias?4:0,resolveDepthBuffer:!1===h.ignoreDepthValues})}b.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=yield r.requestReferenceSpace(a),Qe.setContext(r),Qe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(be){return W.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const V=new C,q=new C;function X(W,be){null===be?W.matrixWorld.copy(W.matrix):W.matrixWorld.multiplyMatrices(be.matrixWorld,W.matrix),W.matrixWorldInverse.copy(W.matrixWorld).invert()}this.updateCamera=function(W){if(null===r)return;null!==_.texture&&(W.near=_.depthNear,W.far=_.depthFar),x.near=D.near=M.near=W.near,x.far=D.far=M.far=W.far,(k!==x.near||U!==x.far)&&(r.updateRenderState({depthNear:x.near,depthFar:x.far}),k=x.near,U=x.far,M.near=k,M.far=U,D.near=k,D.far=U,M.updateProjectionMatrix(),D.updateProjectionMatrix(),W.updateProjectionMatrix());const be=W.parent,Ie=x.cameras;X(x,be);for(let N=0;N<Ie.length;N++)X(Ie[N],be);2===Ie.length?function z(W,be,Ie){V.setFromMatrixPosition(be.matrixWorld),q.setFromMatrixPosition(Ie.matrixWorld);const N=V.distanceTo(q),me=be.projectionMatrix.elements,Ae=Ie.projectionMatrix.elements,j=me[14]/(me[10]-1),tt=me[14]/(me[10]+1),re=(me[9]+1)/me[5],Se=(me[9]-1)/me[5],he=(me[8]-1)/me[0],ke=(Ae[8]+1)/Ae[0],xe=j*he,$e=j*ke,nt=N/(-he+ke),F=nt*-he;be.matrixWorld.decompose(W.position,W.quaternion,W.scale),W.translateX(F),W.translateZ(nt),W.matrixWorld.compose(W.position,W.quaternion,W.scale),W.matrixWorldInverse.copy(W.matrixWorld).invert();const E=j+nt,Q=tt+nt;W.projectionMatrix.makePerspective(xe-F,$e+(N-F),re*tt/Q*E,Se*tt/Q*E,E,Q),W.projectionMatrixInverse.copy(W.projectionMatrix).invert()}(x,M,D):x.projectionMatrix.copy(M.projectionMatrix),function se(W,be,Ie){null===Ie?W.matrix.copy(be.matrixWorld):(W.matrix.copy(Ie.matrixWorld),W.matrix.invert(),W.matrix.multiply(be.matrixWorld)),W.matrix.decompose(W.position,W.quaternion,W.scale),W.updateMatrixWorld(!0),W.projectionMatrix.copy(be.projectionMatrix),W.projectionMatrixInverse.copy(be.projectionMatrixInverse),W.isPerspectiveCamera&&(W.fov=2*_h*Math.atan(1/W.projectionMatrix.elements[5]),W.zoom=1)}(W,x,be)},this.getCamera=function(){return x},this.getFoveation=function(){if(null!==h||null!==f)return l},this.setFoveation=function(W){l=W,null!==h&&(h.fixedFoveation=W),null!==f&&void 0!==f.fixedFoveation&&(f.fixedFoveation=W)},this.hasDepthSensing=function(){return null!==_.texture};let Me=null;const Qe=new aU;Qe.setAnimationLoop(function Ve(W,be){if(d=be.getViewerPose(c||o),m=be,null!==d){const Ie=d.views;null!==f&&(t.setRenderTargetFramebuffer(b,f.framebuffer),t.setRenderTarget(b));let N=!1;Ie.length!==x.cameras.length&&(x.cameras.length=0,N=!0);for(let Ae=0;Ae<Ie.length;Ae++){const j=Ie[Ae];let tt=null;if(null!==f)tt=f.getViewport(j);else{const Se=u.getViewSubImage(h,j);tt=Se.viewport,0===Ae&&(t.setRenderTargetTextures(b,Se.colorTexture,h.ignoreDepthValues?void 0:Se.depthStencilTexture),t.setRenderTarget(b))}let re=S[Ae];void 0===re&&(re=new Cn,re.layers.enable(Ae),re.viewport=new fi,S[Ae]=re),re.matrix.fromArray(j.transform.matrix),re.matrix.decompose(re.position,re.quaternion,re.scale),re.projectionMatrix.fromArray(j.projectionMatrix),re.projectionMatrixInverse.copy(re.projectionMatrix).invert(),re.viewport.set(tt.x,tt.y,tt.width,tt.height),0===Ae&&(x.matrix.copy(re.matrix),x.matrix.decompose(x.position,x.quaternion,x.scale)),!0===N&&x.cameras.push(re)}const me=r.enabledFeatures;if(me&&me.includes("depth-sensing")){const Ae=u.getDepthInformation(Ie[0]);Ae&&Ae.isValid&&Ae.texture&&_.init(t,Ae,r.renderState)}}for(let Ie=0;Ie<v.length;Ie++){const N=y[Ie],me=v[Ie];null!==N&&void 0!==me&&me.update(N,be,c||o)}_.render(t,x),Me&&Me(W,be),be.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:be}),m=null}),this.setAnimationLoop=function(W){Me=W},this.dispose=function(){}}}const id=new Bs,Tde=new je;function Mde(i,t){function e(p,g){!0===p.matrixAutoUpdate&&p.updateMatrix(),g.value.copy(p.matrix)}function s(p,g){p.opacity.value=g.opacity,g.color&&p.diffuse.value.copy(g.color),g.emissive&&p.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(p.map.value=g.map,e(g.map,p.mapTransform)),g.alphaMap&&(p.alphaMap.value=g.alphaMap,e(g.alphaMap,p.alphaMapTransform)),g.bumpMap&&(p.bumpMap.value=g.bumpMap,e(g.bumpMap,p.bumpMapTransform),p.bumpScale.value=g.bumpScale,g.side===jr&&(p.bumpScale.value*=-1)),g.normalMap&&(p.normalMap.value=g.normalMap,e(g.normalMap,p.normalMapTransform),p.normalScale.value.copy(g.normalScale),g.side===jr&&p.normalScale.value.negate()),g.displacementMap&&(p.displacementMap.value=g.displacementMap,e(g.displacementMap,p.displacementMapTransform),p.displacementScale.value=g.displacementScale,p.displacementBias.value=g.displacementBias),g.emissiveMap&&(p.emissiveMap.value=g.emissiveMap,e(g.emissiveMap,p.emissiveMapTransform)),g.specularMap&&(p.specularMap.value=g.specularMap,e(g.specularMap,p.specularMapTransform)),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest);const b=t.get(g),v=b.envMap,y=b.envMapRotation;if(v&&(p.envMap.value=v,id.copy(y),id.x*=-1,id.y*=-1,id.z*=-1,v.isCubeTexture&&!1===v.isRenderTargetTexture&&(id.y*=-1,id.z*=-1),p.envMapRotation.value.setFromMatrix4(Tde.makeRotationFromEuler(id)),p.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,p.reflectivity.value=g.reflectivity,p.ior.value=g.ior,p.refractionRatio.value=g.refractionRatio),g.lightMap){p.lightMap.value=g.lightMap;const T=!0===i._useLegacyLights?Math.PI:1;p.lightMapIntensity.value=g.lightMapIntensity*T,e(g.lightMap,p.lightMapTransform)}g.aoMap&&(p.aoMap.value=g.aoMap,p.aoMapIntensity.value=g.aoMapIntensity,e(g.aoMap,p.aoMapTransform))}return{refreshFogUniforms:function n(p,g){g.color.getRGB(p.fogColor.value,iU(i)),g.isFog?(p.fogNear.value=g.near,p.fogFar.value=g.far):g.isFogExp2&&(p.fogDensity.value=g.density)},refreshMaterialUniforms:function r(p,g,b,v,y){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(p,g):g.isMeshToonMaterial?(s(p,g),function u(p,g){g.gradientMap&&(p.gradientMap.value=g.gradientMap)}(p,g)):g.isMeshPhongMaterial?(s(p,g),function d(p,g){p.specular.value.copy(g.specular),p.shininess.value=Math.max(g.shininess,1e-4)}(p,g)):g.isMeshStandardMaterial?(s(p,g),function h(p,g){p.metalness.value=g.metalness,g.metalnessMap&&(p.metalnessMap.value=g.metalnessMap,e(g.metalnessMap,p.metalnessMapTransform)),p.roughness.value=g.roughness,g.roughnessMap&&(p.roughnessMap.value=g.roughnessMap,e(g.roughnessMap,p.roughnessMapTransform)),g.envMap&&(p.envMapIntensity.value=g.envMapIntensity)}(p,g),g.isMeshPhysicalMaterial&&function f(p,g,b){p.ior.value=g.ior,g.sheen>0&&(p.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),p.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(p.sheenColorMap.value=g.sheenColorMap,e(g.sheenColorMap,p.sheenColorMapTransform)),g.sheenRoughnessMap&&(p.sheenRoughnessMap.value=g.sheenRoughnessMap,e(g.sheenRoughnessMap,p.sheenRoughnessMapTransform))),g.clearcoat>0&&(p.clearcoat.value=g.clearcoat,p.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(p.clearcoatMap.value=g.clearcoatMap,e(g.clearcoatMap,p.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,e(g.clearcoatRoughnessMap,p.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(p.clearcoatNormalMap.value=g.clearcoatNormalMap,e(g.clearcoatNormalMap,p.clearcoatNormalMapTransform),p.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===jr&&p.clearcoatNormalScale.value.negate())),g.dispersion>0&&(p.dispersion.value=g.dispersion),g.iridescence>0&&(p.iridescence.value=g.iridescence,p.iridescenceIOR.value=g.iridescenceIOR,p.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(p.iridescenceMap.value=g.iridescenceMap,e(g.iridescenceMap,p.iridescenceMapTransform)),g.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=g.iridescenceThicknessMap,e(g.iridescenceThicknessMap,p.iridescenceThicknessMapTransform))),g.transmission>0&&(p.transmission.value=g.transmission,p.transmissionSamplerMap.value=b.texture,p.transmissionSamplerSize.value.set(b.width,b.height),g.transmissionMap&&(p.transmissionMap.value=g.transmissionMap,e(g.transmissionMap,p.transmissionMapTransform)),p.thickness.value=g.thickness,g.thicknessMap&&(p.thicknessMap.value=g.thicknessMap,e(g.thicknessMap,p.thicknessMapTransform)),p.attenuationDistance.value=g.attenuationDistance,p.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(p.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(p.anisotropyMap.value=g.anisotropyMap,e(g.anisotropyMap,p.anisotropyMapTransform))),p.specularIntensity.value=g.specularIntensity,p.specularColor.value.copy(g.specularColor),g.specularColorMap&&(p.specularColorMap.value=g.specularColorMap,e(g.specularColorMap,p.specularColorMapTransform)),g.specularIntensityMap&&(p.specularIntensityMap.value=g.specularIntensityMap,e(g.specularIntensityMap,p.specularIntensityMapTransform))}(p,g,y)):g.isMeshMatcapMaterial?(s(p,g),function m(p,g){g.matcap&&(p.matcap.value=g.matcap)}(p,g)):g.isMeshDepthMaterial?s(p,g):g.isMeshDistanceMaterial?(s(p,g),function _(p,g){const b=t.get(g).light;p.referencePosition.value.setFromMatrixPosition(b.matrixWorld),p.nearDistance.value=b.shadow.camera.near,p.farDistance.value=b.shadow.camera.far}(p,g)):g.isMeshNormalMaterial?s(p,g):g.isLineBasicMaterial?(function o(p,g){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,g.map&&(p.map.value=g.map,e(g.map,p.mapTransform))}(p,g),g.isLineDashedMaterial&&function a(p,g){p.dashSize.value=g.dashSize,p.totalSize.value=g.dashSize+g.gapSize,p.scale.value=g.scale}(p,g)):g.isPointsMaterial?function l(p,g,b,v){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.size.value=g.size*b,p.scale.value=.5*v,g.map&&(p.map.value=g.map,e(g.map,p.uvTransform)),g.alphaMap&&(p.alphaMap.value=g.alphaMap,e(g.alphaMap,p.alphaMapTransform)),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest)}(p,g,b,v):g.isSpriteMaterial?function c(p,g){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.rotation.value=g.rotation,g.map&&(p.map.value=g.map,e(g.map,p.mapTransform)),g.alphaMap&&(p.alphaMap.value=g.alphaMap,e(g.alphaMap,p.alphaMapTransform)),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest)}(p,g):g.isShadowMaterial?(p.color.value.copy(g.color),p.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function Sde(i,t,e,n){let r={},s={},o=[];const a=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function f(b,v,y,T){const w=b.value,M=v+"_"+y;if(void 0===T[M])return T[M]="number"==typeof w||"boolean"==typeof w?w:w.clone(),!0;{const D=T[M];if("number"==typeof w||"boolean"==typeof w){if(D!==w)return T[M]=w,!0}else if(!1===D.equals(w))return D.copy(w),!0}return!1}function _(b){const v={boundary:0,storage:0};return"number"==typeof b||"boolean"==typeof b?(v.boundary=4,v.storage=4):b.isVector2?(v.boundary=8,v.storage=8):b.isVector3||b.isColor?(v.boundary=16,v.storage=12):b.isVector4?(v.boundary=16,v.storage=16):b.isMatrix3?(v.boundary=48,v.storage=48):b.isMatrix4?(v.boundary=64,v.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),v}function p(b){const v=b.target;v.removeEventListener("dispose",p);const y=o.indexOf(v.__bindingPointIndex);o.splice(y,1),i.deleteBuffer(r[v.id]),delete r[v.id],delete s[v.id]}return{bind:function l(b,v){n.uniformBlockBinding(b,v.program)},update:function c(b,v){let y=r[b.id];void 0===y&&(function m(b){const v=b.uniforms;let y=0;for(let M=0,D=v.length;M<D;M++){const S=Array.isArray(v[M])?v[M]:[v[M]];for(let x=0,k=S.length;x<k;x++){const U=S[x],L=Array.isArray(U.value)?U.value:[U.value];for(let H=0,Y=L.length;H<Y;H++){const q=_(L[H]),z=y%16;0!==z&&16-z<q.boundary&&(y+=16-z),U.__data=new Float32Array(q.storage/Float32Array.BYTES_PER_ELEMENT),U.__offset=y,y+=q.storage}}}const w=y%16;w>0&&(y+=16-w),b.__size=y,b.__cache={}}(b),y=function d(b){const v=function u(){for(let b=0;b<a;b++)if(-1===o.indexOf(b))return o.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();b.__bindingPointIndex=v;const y=i.createBuffer(),T=b.__size,w=b.usage;return i.bindBuffer(i.UNIFORM_BUFFER,y),i.bufferData(i.UNIFORM_BUFFER,T,w),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,v,y),y}(b),r[b.id]=y,b.addEventListener("dispose",p)),n.updateUBOMapping(b,v.program);const w=t.render.frame;s[b.id]!==w&&(function h(b){const y=b.uniforms,T=b.__cache;i.bindBuffer(i.UNIFORM_BUFFER,r[b.id]);for(let w=0,M=y.length;w<M;w++){const D=Array.isArray(y[w])?y[w]:[y[w]];for(let S=0,x=D.length;S<x;S++){const k=D[S];if(!0===f(k,w,S,T)){const U=k.__offset,L=Array.isArray(k.value)?k.value:[k.value];let H=0;for(let Y=0;Y<L.length;Y++){const V=L[Y],q=_(V);"number"==typeof V||"boolean"==typeof V?(k.__data[0]=V,i.bufferSubData(i.UNIFORM_BUFFER,U+H,k.__data)):V.isMatrix3?(k.__data[0]=V.elements[0],k.__data[1]=V.elements[1],k.__data[2]=V.elements[2],k.__data[3]=0,k.__data[4]=V.elements[3],k.__data[5]=V.elements[4],k.__data[6]=V.elements[5],k.__data[7]=0,k.__data[8]=V.elements[6],k.__data[9]=V.elements[7],k.__data[10]=V.elements[8],k.__data[11]=0):(V.toArray(k.__data,H),H+=q.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,U,k.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}(b),s[b.id]=w)},dispose:function g(){for(const b in r)i.deleteBuffer(r[b]);o=[],r={},s={}}}}class hy{constructor(t={}){const{canvas:e=F3(),context:n=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:u=!1}=t;let h;if(this.isWebGLRenderer=!0,null!==n){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=n.getContextAttributes().alpha}else h=o;const f=new Uint32Array(4),m=new Int32Array(4);let _=null,p=null;const g=[],b=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=qn,this._useLegacyLights=!1,this.toneMapping=Ca,this.toneMappingExposure=1;const v=this;let y=!1,T=0,w=0,M=null,D=-1,S=null;const x=new fi,k=new fi;let U=null;const L=new Te(0);let H=0,Y=e.width,V=e.height,q=1,z=null,X=null;const se=new fi(0,0,Y,V),Me=new fi(0,0,Y,V);let Ve=!1;const Qe=new Tp;let W=!1,be=!1;const Ie=new je,N=new C,me={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ae(){return null===M?q:1}let re,Se,he,ke,xe,$e,nt,F,E,Q,fe,ye,_e,et,Ne,Oe,dt,De,Ze,gt,ot,Xe,wt,Je,j=n;function tt(I,Z){return e.getContext(I,Z)}try{const I={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Sv}`),e.addEventListener("webglcontextlost",R,!1),e.addEventListener("webglcontextrestored",G,!1),e.addEventListener("webglcontextcreationerror",J,!1),null===j){const Z="webgl2";if(j=tt(Z,I),null===j)throw tt(Z)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(I){throw console.error("THREE.WebGLRenderer: "+I.message),I}function Ti(){re=new jle(j),re.init(),Xe=new FU(j,re),Se=new Ple(j,re,t,Xe),he=new gde(j),ke=new Vle(j),xe=new rde,$e=new _de(j,re,he,xe,Se,Xe,ke),nt=new Fle(v),F=new Nle(v),E=new Eoe(j),wt=new Dle(j,E),Q=new Ble(j,E,ke,wt),fe=new Hle(j,Q,E,ke),Ze=new zle(j,Se,$e),Oe=new kle(xe),ye=new nde(v,nt,F,re,Se,wt,Oe),_e=new Mde(v,xe),et=new ode,Ne=new hde(re),De=new Ale(v,nt,F,he,fe,h,l),dt=new pde(v,fe,Se),Je=new Sde(j,ke,Se,he),gt=new Ile(j,re,ke),ot=new Ule(j,re,ke),ke.programs=ye.programs,v.capabilities=Se,v.extensions=re,v.properties=xe,v.renderLists=et,v.shadowMap=dt,v.state=he,v.info=ke}Ti();const At=new wde(v,j);function R(I){I.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function G(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const I=ke.autoReset,Z=dt.enabled,oe=dt.autoUpdate,ie=dt.needsUpdate,ne=dt.type;Ti(),ke.autoReset=I,dt.enabled=Z,dt.autoUpdate=oe,dt.needsUpdate=ie,dt.type=ne}function J(I){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",I.statusMessage)}function we(I){const Z=I.target;Z.removeEventListener("dispose",we),function Ue(I){(function Wt(I){const Z=xe.get(I).programs;void 0!==Z&&(Z.forEach(function(oe){ye.releaseProgram(oe)}),I.isShaderMaterial&&ye.releaseShaderCache(I))})(I),xe.remove(I)}(Z)}function ti(I,Z,oe){!0===I.transparent&&I.side===Br&&!1===I.forceSinglePass?(I.side=jr,I.needsUpdate=!0,Dx(I,Z,oe),I.side=Yo,I.needsUpdate=!0,Dx(I,Z,oe),I.side=Br):Dx(I,Z,oe)}this.xr=At,this.getContext=function(){return j},this.getContextAttributes=function(){return j.getContextAttributes()},this.forceContextLoss=function(){const I=re.get("WEBGL_lose_context");I&&I.loseContext()},this.forceContextRestore=function(){const I=re.get("WEBGL_lose_context");I&&I.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(I){void 0!==I&&(q=I,this.setSize(Y,V,!1))},this.getSize=function(I){return I.set(Y,V)},this.setSize=function(I,Z,oe=!0){At.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Y=I,V=Z,e.width=Math.floor(I*q),e.height=Math.floor(Z*q),!0===oe&&(e.style.width=I+"px",e.style.height=Z+"px"),this.setViewport(0,0,I,Z))},this.getDrawingBufferSize=function(I){return I.set(Y*q,V*q).floor()},this.setDrawingBufferSize=function(I,Z,oe){Y=I,V=Z,q=oe,e.width=Math.floor(I*oe),e.height=Math.floor(Z*oe),this.setViewport(0,0,I,Z)},this.getCurrentViewport=function(I){return I.copy(x)},this.getViewport=function(I){return I.copy(se)},this.setViewport=function(I,Z,oe,ie){I.isVector4?se.set(I.x,I.y,I.z,I.w):se.set(I,Z,oe,ie),he.viewport(x.copy(se).multiplyScalar(q).round())},this.getScissor=function(I){return I.copy(Me)},this.setScissor=function(I,Z,oe,ie){I.isVector4?Me.set(I.x,I.y,I.z,I.w):Me.set(I,Z,oe,ie),he.scissor(k.copy(Me).multiplyScalar(q).round())},this.getScissorTest=function(){return Ve},this.setScissorTest=function(I){he.setScissorTest(Ve=I)},this.setOpaqueSort=function(I){z=I},this.setTransparentSort=function(I){X=I},this.getClearColor=function(I){return I.copy(De.getClearColor())},this.setClearColor=function(){De.setClearColor.apply(De,arguments)},this.getClearAlpha=function(){return De.getClearAlpha()},this.setClearAlpha=function(){De.setClearAlpha.apply(De,arguments)},this.clear=function(I=!0,Z=!0,oe=!0){let ie=0;if(I){let ne=!1;if(null!==M){const Ye=M.texture.format;ne=Ye===OR||Ye===LR||Ye===FR}if(ne){const Ye=M.texture.type,at=Ye===Aa||Ye===Uc||Ye===Dv||Ye===xl||Ye===PR||Ye===kR,ft=De.getClearColor(),Rt=De.getClearAlpha(),Vt=ft.r,qt=ft.g,ii=ft.b;at?(f[0]=Vt,f[1]=qt,f[2]=ii,f[3]=Rt,j.clearBufferuiv(j.COLOR,0,f)):(m[0]=Vt,m[1]=qt,m[2]=ii,m[3]=Rt,j.clearBufferiv(j.COLOR,0,m))}else ie|=j.COLOR_BUFFER_BIT}Z&&(ie|=j.DEPTH_BUFFER_BIT),oe&&(ie|=j.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),j.clear(ie)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",R,!1),e.removeEventListener("webglcontextrestored",G,!1),e.removeEventListener("webglcontextcreationerror",J,!1),et.dispose(),Ne.dispose(),xe.dispose(),nt.dispose(),F.dispose(),fe.dispose(),wt.dispose(),Je.dispose(),ye.dispose(),At.dispose(),At.removeEventListener("sessionstart",_i),At.removeEventListener("sessionend",Bn),qi.stop()},this.renderBufferDirect=function(I,Z,oe,ie,ne,Ye){null===Z&&(Z=me);const at=ne.isMesh&&ne.matrixWorld.determinant()<0,ft=function GCe(I,Z,oe,ie,ne){!0!==Z.isScene&&(Z=me),$e.resetTextureUnits();const Ye=Z.fog,ft=null===M?v.outputColorSpace:!0===M.isXRRenderTarget?M.texture.colorSpace:Yn,Rt=(ie.isMeshStandardMaterial?F:nt).get(ie.envMap||(ie.isMeshStandardMaterial?Z.environment:null)),Vt=!0===ie.vertexColors&&!!oe.attributes.color&&4===oe.attributes.color.itemSize,qt=!!oe.attributes.tangent&&(!!ie.normalMap||ie.anisotropy>0),ii=!!oe.morphAttributes.position,Un=!!oe.morphAttributes.normal,Ar=!!oe.morphAttributes.color;let Ps=Ca;ie.toneMapped&&(null===M||!0===M.isXRRenderTarget)&&(Ps=v.toneMapping);const Ja=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,Mi=void 0!==Ja?Ja.length:0,zt=xe.get(ie),Bg=p.state.lights;!0!==W||!0!==be&&I===S||Oe.setState(ie,I,I===S&&ie.id===D);let en=!1;ie.version===zt.__version?(zt.needsLights&&zt.lightsStateVersion!==Bg.state.version||zt.outputColorSpace!==ft||ne.isBatchedMesh&&!1===zt.batching||!ne.isBatchedMesh&&!0===zt.batching||ne.isInstancedMesh&&!1===zt.instancing||!ne.isInstancedMesh&&!0===zt.instancing||ne.isSkinnedMesh&&!1===zt.skinning||!ne.isSkinnedMesh&&!0===zt.skinning||ne.isInstancedMesh&&!0===zt.instancingColor&&null===ne.instanceColor||ne.isInstancedMesh&&!1===zt.instancingColor&&null!==ne.instanceColor||ne.isInstancedMesh&&!0===zt.instancingMorph&&null===ne.morphTexture||ne.isInstancedMesh&&!1===zt.instancingMorph&&null!==ne.morphTexture||zt.envMap!==Rt||!0===ie.fog&&zt.fog!==Ye||void 0!==zt.numClippingPlanes&&(zt.numClippingPlanes!==Oe.numPlanes||zt.numIntersection!==Oe.numIntersection)||zt.vertexAlphas!==Vt||zt.vertexTangents!==qt||zt.morphTargets!==ii||zt.morphNormals!==Un||zt.morphColors!==Ar||zt.toneMapping!==Ps||zt.morphTargetsCount!==Mi)&&(en=!0):(en=!0,zt.__version=ie.version);let Vd=zt.currentProgram;!0===en&&(Vd=Dx(ie,Z,ne));let jW=!1,Ug=!1,f1=!1;const Dr=Vd.getUniforms(),lc=zt.uniforms;if(he.useProgram(Vd.program)&&(jW=!0,Ug=!0,f1=!0),ie.id!==D&&(D=ie.id,Ug=!0),jW||S!==I){Dr.setValue(j,"projectionMatrix",I.projectionMatrix),Dr.setValue(j,"viewMatrix",I.matrixWorldInverse);const Js=Dr.map.cameraPosition;void 0!==Js&&Js.setValue(j,N.setFromMatrixPosition(I.matrixWorld)),Se.logarithmicDepthBuffer&&Dr.setValue(j,"logDepthBufFC",2/(Math.log(I.far+1)/Math.LN2)),(ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshLambertMaterial||ie.isMeshBasicMaterial||ie.isMeshStandardMaterial||ie.isShaderMaterial)&&Dr.setValue(j,"isOrthographic",!0===I.isOrthographicCamera),S!==I&&(S=I,Ug=!0,f1=!0)}if(ne.isSkinnedMesh){Dr.setOptional(j,ne,"bindMatrix"),Dr.setOptional(j,ne,"bindMatrixInverse");const Js=ne.skeleton;Js&&(null===Js.boneTexture&&Js.computeBoneTexture(),Dr.setValue(j,"boneTexture",Js.boneTexture,$e))}ne.isBatchedMesh&&(Dr.setOptional(j,ne,"batchingTexture"),Dr.setValue(j,"batchingTexture",ne._matricesTexture,$e));const m1=oe.morphAttributes;if((void 0!==m1.position||void 0!==m1.normal||void 0!==m1.color)&&Ze.update(ne,oe,Vd),(Ug||zt.receiveShadow!==ne.receiveShadow)&&(zt.receiveShadow=ne.receiveShadow,Dr.setValue(j,"receiveShadow",ne.receiveShadow)),ie.isMeshGouraudMaterial&&null!==ie.envMap&&(lc.envMap.value=Rt,lc.flipEnvMap.value=Rt.isCubeTexture&&!1===Rt.isRenderTargetTexture?-1:1),ie.isMeshStandardMaterial&&null===ie.envMap&&null!==Z.environment&&(lc.envMapIntensity.value=Z.environmentIntensity),Ug&&(Dr.setValue(j,"toneMappingExposure",v.toneMappingExposure),zt.needsLights&&function WCe(I,Z){I.ambientLightColor.needsUpdate=Z,I.lightProbe.needsUpdate=Z,I.directionalLights.needsUpdate=Z,I.directionalLightShadows.needsUpdate=Z,I.pointLights.needsUpdate=Z,I.pointLightShadows.needsUpdate=Z,I.spotLights.needsUpdate=Z,I.spotLightShadows.needsUpdate=Z,I.rectAreaLights.needsUpdate=Z,I.hemisphereLights.needsUpdate=Z}(lc,f1),Ye&&!0===ie.fog&&_e.refreshFogUniforms(lc,Ye),_e.refreshMaterialUniforms(lc,ie,q,V,p.state.transmissionRenderTarget[I.id]),dy.upload(j,OW(zt),lc,$e)),ie.isShaderMaterial&&!0===ie.uniformsNeedUpdate&&(dy.upload(j,OW(zt),lc,$e),ie.uniformsNeedUpdate=!1),ie.isSpriteMaterial&&Dr.setValue(j,"center",ne.center),Dr.setValue(j,"modelViewMatrix",ne.modelViewMatrix),Dr.setValue(j,"normalMatrix",ne.normalMatrix),Dr.setValue(j,"modelMatrix",ne.matrixWorld),ie.isShaderMaterial||ie.isRawShaderMaterial){const Js=ie.uniformsGroups;for(let p1=0,XCe=Js.length;p1<XCe;p1++){const BW=Js[p1];Je.update(BW,Vd),Je.bind(BW,Vd)}}return Vd}(I,Z,oe,ie,ne);he.setMaterial(ie,at);let Rt=oe.index,Vt=1;if(!0===ie.wireframe){if(Rt=Q.getWireframeAttribute(oe),void 0===Rt)return;Vt=2}const qt=oe.drawRange,ii=oe.attributes.position;let Un=qt.start*Vt,Ar=(qt.start+qt.count)*Vt;null!==Ye&&(Un=Math.max(Un,Ye.start*Vt),Ar=Math.min(Ar,(Ye.start+Ye.count)*Vt)),null!==Rt?(Un=Math.max(Un,0),Ar=Math.min(Ar,Rt.count)):null!=ii&&(Un=Math.max(Un,0),Ar=Math.min(Ar,ii.count));const Ps=Ar-Un;if(Ps<0||Ps===1/0)return;wt.setup(ne,ie,ft,oe,Rt);let Ja,Mi=gt;if(null!==Rt&&(Ja=E.get(Rt),Mi=ot,Mi.setIndex(Ja)),ne.isMesh)!0===ie.wireframe?(he.setLineWidth(ie.wireframeLinewidth*Ae()),Mi.setMode(j.LINES)):Mi.setMode(j.TRIANGLES);else if(ne.isLine){let zt=ie.linewidth;void 0===zt&&(zt=1),he.setLineWidth(zt*Ae()),Mi.setMode(ne.isLineSegments?j.LINES:ne.isLineLoop?j.LINE_LOOP:j.LINE_STRIP)}else ne.isPoints?Mi.setMode(j.POINTS):ne.isSprite&&Mi.setMode(j.TRIANGLES);if(ne.isBatchedMesh)null!==ne._multiDrawInstances?Mi.renderMultiDrawInstances(ne._multiDrawStarts,ne._multiDrawCounts,ne._multiDrawCount,ne._multiDrawInstances):Mi.renderMultiDraw(ne._multiDrawStarts,ne._multiDrawCounts,ne._multiDrawCount);else if(ne.isInstancedMesh)Mi.renderInstances(Un,Ps,ne.count);else if(oe.isInstancedBufferGeometry){const Bg=Math.min(oe.instanceCount,void 0!==oe._maxInstanceCount?oe._maxInstanceCount:1/0);Mi.renderInstances(Un,Ps,Bg)}else Mi.render(Un,Ps)},this.compile=function(I,Z,oe=null){null===oe&&(oe=I),p=Ne.get(oe),p.init(Z),b.push(p),oe.traverseVisible(function(ne){ne.isLight&&ne.layers.test(Z.layers)&&(p.pushLight(ne),ne.castShadow&&p.pushShadow(ne))}),I!==oe&&I.traverseVisible(function(ne){ne.isLight&&ne.layers.test(Z.layers)&&(p.pushLight(ne),ne.castShadow&&p.pushShadow(ne))}),p.setupLights(v._useLegacyLights);const ie=new Set;return I.traverse(function(ne){const Ye=ne.material;if(Ye)if(Array.isArray(Ye))for(let at=0;at<Ye.length;at++){const ft=Ye[at];ti(ft,oe,ne),ie.add(ft)}else ti(Ye,oe,ne),ie.add(Ye)}),b.pop(),p=null,ie},this.compileAsync=function(I,Z,oe=null){const ie=this.compile(I,Z,oe);return new Promise(ne=>{function Ye(){ie.forEach(function(at){xe.get(at).currentProgram.isReady()&&ie.delete(at)}),0!==ie.size?setTimeout(Ye,10):ne(I)}null!==re.get("KHR_parallel_shader_compile")?Ye():setTimeout(Ye,10)})};let cn=null;function _i(){qi.stop()}function Bn(){qi.start()}const qi=new aU;function oc(I,Z,oe,ie){if(!1===I.visible)return;if(I.layers.test(Z.layers))if(I.isGroup)oe=I.renderOrder;else if(I.isLOD)!0===I.autoUpdate&&I.update(Z);else if(I.isLight)p.pushLight(I),I.castShadow&&p.pushShadow(I);else if(I.isSprite){if(!I.frustumCulled||Qe.intersectsSprite(I)){ie&&N.setFromMatrixPosition(I.matrixWorld).applyMatrix4(Ie);const at=fe.update(I),ft=I.material;ft.visible&&_.push(I,at,ft,oe,N.z,null)}}else if((I.isMesh||I.isLine||I.isPoints)&&(!I.frustumCulled||Qe.intersectsObject(I))){const at=fe.update(I),ft=I.material;if(ie&&(void 0!==I.boundingSphere?(null===I.boundingSphere&&I.computeBoundingSphere(),N.copy(I.boundingSphere.center)):(null===at.boundingSphere&&at.computeBoundingSphere(),N.copy(at.boundingSphere.center)),N.applyMatrix4(I.matrixWorld).applyMatrix4(Ie)),Array.isArray(ft)){const Rt=at.groups;for(let Vt=0,qt=Rt.length;Vt<qt;Vt++){const ii=Rt[Vt],Un=ft[ii.materialIndex];Un&&Un.visible&&_.push(I,at,Un,oe,N.z,ii)}}else ft.visible&&_.push(I,at,ft,oe,N.z,null)}const Ye=I.children;for(let at=0,ft=Ye.length;at<ft;at++)oc(Ye[at],Z,oe,ie)}function Qs(I,Z,oe,ie){const ne=I.opaque,Ye=I.transmissive,at=I.transparent;p.setupLightsView(oe),!0===W&&Oe.setGlobalState(v.clippingPlanes,oe),ie&&he.viewport(x.copy(ie)),ne.length>0&&Qa(ne,Z,oe),Ye.length>0&&Qa(Ye,Z,oe),at.length>0&&Qa(at,Z,oe),he.buffers.depth.setTest(!0),he.buffers.depth.setMask(!0),he.buffers.color.setMask(!0),he.setPolygonOffset(!1)}function ac(I,Z,oe,ie){if(null!==(!0===oe.isScene?oe.overrideMaterial:null))return;void 0===p.state.transmissionRenderTarget[ie.id]&&(p.state.transmissionRenderTarget[ie.id]=new gi(1,1,{generateMipmaps:!0,type:re.has("EXT_color_buffer_half_float")||re.has("EXT_color_buffer_float")?mn:Aa,minFilter:js,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1}));const Ye=p.state.transmissionRenderTarget[ie.id],at=ie.viewport||x;Ye.setSize(at.z,at.w);const ft=v.getRenderTarget();v.setRenderTarget(Ye),v.getClearColor(L),H=v.getClearAlpha(),H<1&&v.setClearColor(16777215,.5),v.clear();const Rt=v.toneMapping;v.toneMapping=Ca;const Vt=ie.viewport;if(void 0!==ie.viewport&&(ie.viewport=void 0),p.setupLightsView(ie),!0===W&&Oe.setGlobalState(v.clippingPlanes,ie),Qa(I,oe,ie),$e.updateMultisampleRenderTarget(Ye),$e.updateRenderTargetMipmap(Ye),!1===re.has("WEBGL_multisampled_render_to_texture")){let qt=!1;for(let ii=0,Un=Z.length;ii<Un;ii++){const Ar=Z[ii],Ps=Ar.object,Ja=Ar.geometry,Mi=Ar.material,zt=Ar.group;if(Mi.side===Br&&Ps.layers.test(ie.layers)){const Bg=Mi.side;Mi.side=jr,Mi.needsUpdate=!0,jg(Ps,oe,ie,Ja,Mi,zt),Mi.side=Bg,Mi.needsUpdate=!0,qt=!0}}!0===qt&&($e.updateMultisampleRenderTarget(Ye),$e.updateRenderTargetMipmap(Ye))}v.setRenderTarget(ft),v.setClearColor(L,H),void 0!==Vt&&(ie.viewport=Vt),v.toneMapping=Rt}function Qa(I,Z,oe){const ie=!0===Z.isScene?Z.overrideMaterial:null;for(let ne=0,Ye=I.length;ne<Ye;ne++){const at=I[ne],ft=at.object,Rt=at.geometry,Vt=null===ie?at.material:ie,qt=at.group;ft.layers.test(oe.layers)&&jg(ft,Z,oe,Rt,Vt,qt)}}function jg(I,Z,oe,ie,ne,Ye){I.onBeforeRender(v,Z,oe,ie,ne,Ye),I.modelViewMatrix.multiplyMatrices(oe.matrixWorldInverse,I.matrixWorld),I.normalMatrix.getNormalMatrix(I.modelViewMatrix),ne.onBeforeRender(v,Z,oe,ie,I,Ye),!0===ne.transparent&&ne.side===Br&&!1===ne.forceSinglePass?(ne.side=jr,ne.needsUpdate=!0,v.renderBufferDirect(oe,Z,ie,ne,I,Ye),ne.side=Yo,ne.needsUpdate=!0,v.renderBufferDirect(oe,Z,ie,ne,I,Ye),ne.side=Br):v.renderBufferDirect(oe,Z,ie,ne,I,Ye),I.onAfterRender(v,Z,oe,ie,ne,Ye)}function Dx(I,Z,oe){!0!==Z.isScene&&(Z=me);const ie=xe.get(I),ne=p.state.lights,at=ne.state.version,ft=ye.getParameters(I,ne.state,p.state.shadowsArray,Z,oe),Rt=ye.getProgramCacheKey(ft);let Vt=ie.programs;ie.environment=I.isMeshStandardMaterial?Z.environment:null,ie.fog=Z.fog,ie.envMap=(I.isMeshStandardMaterial?F:nt).get(I.envMap||ie.environment),ie.envMapRotation=null!==ie.environment&&null===I.envMap?Z.environmentRotation:I.envMapRotation,void 0===Vt&&(I.addEventListener("dispose",we),Vt=new Map,ie.programs=Vt);let qt=Vt.get(Rt);if(void 0!==qt){if(ie.currentProgram===qt&&ie.lightsStateVersion===at)return NW(I,ft),qt}else ft.uniforms=ye.getUniforms(I),I.onBuild(oe,ft,v),I.onBeforeCompile(ft,v),qt=ye.acquireProgram(ft,Rt),Vt.set(Rt,qt),ie.uniforms=ft.uniforms;const ii=ie.uniforms;return(!I.isShaderMaterial&&!I.isRawShaderMaterial||!0===I.clipping)&&(ii.clippingPlanes=Oe.uniform),NW(I,ft),ie.needsLights=function $Ce(I){return I.isMeshLambertMaterial||I.isMeshToonMaterial||I.isMeshPhongMaterial||I.isMeshStandardMaterial||I.isShadowMaterial||I.isShaderMaterial&&!0===I.lights}(I),ie.lightsStateVersion=at,ie.needsLights&&(ii.ambientLightColor.value=ne.state.ambient,ii.lightProbe.value=ne.state.probe,ii.directionalLights.value=ne.state.directional,ii.directionalLightShadows.value=ne.state.directionalShadow,ii.spotLights.value=ne.state.spot,ii.spotLightShadows.value=ne.state.spotShadow,ii.rectAreaLights.value=ne.state.rectArea,ii.ltc_1.value=ne.state.rectAreaLTC1,ii.ltc_2.value=ne.state.rectAreaLTC2,ii.pointLights.value=ne.state.point,ii.pointLightShadows.value=ne.state.pointShadow,ii.hemisphereLights.value=ne.state.hemi,ii.directionalShadowMap.value=ne.state.directionalShadowMap,ii.directionalShadowMatrix.value=ne.state.directionalShadowMatrix,ii.spotShadowMap.value=ne.state.spotShadowMap,ii.spotLightMatrix.value=ne.state.spotLightMatrix,ii.spotLightMap.value=ne.state.spotLightMap,ii.pointShadowMap.value=ne.state.pointShadowMap,ii.pointShadowMatrix.value=ne.state.pointShadowMatrix),ie.currentProgram=qt,ie.uniformsList=null,qt}function OW(I){if(null===I.uniformsList){const Z=I.currentProgram.getUniforms();I.uniformsList=dy.seqWithValue(Z.seq,I.uniforms)}return I.uniformsList}function NW(I,Z){const oe=xe.get(I);oe.outputColorSpace=Z.outputColorSpace,oe.batching=Z.batching,oe.instancing=Z.instancing,oe.instancingColor=Z.instancingColor,oe.instancingMorph=Z.instancingMorph,oe.skinning=Z.skinning,oe.morphTargets=Z.morphTargets,oe.morphNormals=Z.morphNormals,oe.morphColors=Z.morphColors,oe.morphTargetsCount=Z.morphTargetsCount,oe.numClippingPlanes=Z.numClippingPlanes,oe.numIntersection=Z.numClipIntersection,oe.vertexAlphas=Z.vertexAlphas,oe.vertexTangents=Z.vertexTangents,oe.toneMapping=Z.toneMapping}qi.setAnimationLoop(function sr(I){cn&&cn(I)}),typeof self<"u"&&qi.setContext(self),this.setAnimationLoop=function(I){cn=I,At.setAnimationLoop(I),null===I?qi.stop():qi.start()},At.addEventListener("sessionstart",_i),At.addEventListener("sessionend",Bn),this.render=function(I,Z){if(void 0!==Z&&!0!==Z.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===y)return;!0===I.matrixWorldAutoUpdate&&I.updateMatrixWorld(),null===Z.parent&&!0===Z.matrixWorldAutoUpdate&&Z.updateMatrixWorld(),!0===At.enabled&&!0===At.isPresenting&&(!0===At.cameraAutoUpdate&&At.updateCamera(Z),Z=At.getCamera()),!0===I.isScene&&I.onBeforeRender(v,I,Z,M),p=Ne.get(I,b.length),p.init(Z),b.push(p),Ie.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),Qe.setFromProjectionMatrix(Ie),be=this.localClippingEnabled,W=Oe.init(this.clippingPlanes,be),_=et.get(I,g.length),_.init(),g.push(_),oc(I,Z,0,v.sortObjects),_.finish(),!0===v.sortObjects&&_.sort(z,X);const oe=!1===At.enabled||!1===At.isPresenting||!1===At.hasDepthSensing();oe&&De.addToRenderList(_,I),this.info.render.frame++,!0===W&&Oe.beginShadows(),dt.render(p.state.shadowsArray,I,Z),!0===W&&Oe.endShadows(),!0===this.info.autoReset&&this.info.reset();const ne=_.opaque,Ye=_.transmissive;if(p.setupLights(v._useLegacyLights),Z.isArrayCamera){const at=Z.cameras;if(Ye.length>0)for(let ft=0,Rt=at.length;ft<Rt;ft++)ac(ne,Ye,I,at[ft]);oe&&De.render(I);for(let ft=0,Rt=at.length;ft<Rt;ft++){const Vt=at[ft];Qs(_,I,Vt,Vt.viewport)}}else Ye.length>0&&ac(ne,Ye,I,Z),oe&&De.render(I),Qs(_,I,Z);null!==M&&($e.updateMultisampleRenderTarget(M),$e.updateRenderTargetMipmap(M)),!0===I.isScene&&I.onAfterRender(v,I,Z),wt.resetDefaultState(),D=-1,S=null,b.pop(),b.length>0?(p=b[b.length-1],!0===W&&Oe.setGlobalState(v.clippingPlanes,p.state.camera)):p=null,g.pop(),_=g.length>0?g[g.length-1]:null},this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(I,Z,oe){xe.get(I.texture).__webglTexture=Z,xe.get(I.depthTexture).__webglTexture=oe;const ie=xe.get(I);ie.__hasExternalTextures=!0,ie.__autoAllocateDepthBuffer=void 0===oe,ie.__autoAllocateDepthBuffer||!0===re.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ie.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(I,Z){const oe=xe.get(I);oe.__webglFramebuffer=Z,oe.__useDefaultFramebuffer=void 0===Z},this.setRenderTarget=function(I,Z=0,oe=0){M=I,T=Z,w=oe;let ie=!0,ne=null,Ye=!1,at=!1;if(I){const Rt=xe.get(I);void 0!==Rt.__useDefaultFramebuffer?(he.bindFramebuffer(j.FRAMEBUFFER,null),ie=!1):void 0===Rt.__webglFramebuffer?$e.setupRenderTarget(I):Rt.__hasExternalTextures&&$e.rebindTextures(I,xe.get(I.texture).__webglTexture,xe.get(I.depthTexture).__webglTexture);const Vt=I.texture;(Vt.isData3DTexture||Vt.isDataArrayTexture||Vt.isCompressedArrayTexture)&&(at=!0);const qt=xe.get(I).__webglFramebuffer;I.isWebGLCubeRenderTarget?(ne=Array.isArray(qt[Z])?qt[Z][oe]:qt[Z],Ye=!0):ne=I.samples>0&&!1===$e.useMultisampledRTT(I)?xe.get(I).__webglMultisampledFramebuffer:Array.isArray(qt)?qt[oe]:qt,x.copy(I.viewport),k.copy(I.scissor),U=I.scissorTest}else x.copy(se).multiplyScalar(q).floor(),k.copy(Me).multiplyScalar(q).floor(),U=Ve;if(he.bindFramebuffer(j.FRAMEBUFFER,ne)&&ie&&he.drawBuffers(I,ne),he.viewport(x),he.scissor(k),he.setScissorTest(U),Ye){const Rt=xe.get(I.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+Z,Rt.__webglTexture,oe)}else if(at){const Rt=xe.get(I.texture);j.framebufferTextureLayer(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,Rt.__webglTexture,oe||0,Z||0)}D=-1},this.readRenderTargetPixels=function(I,Z,oe,ie,ne,Ye,at){if(!I||!I.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ft=xe.get(I).__webglFramebuffer;if(I.isWebGLCubeRenderTarget&&void 0!==at&&(ft=ft[at]),ft){he.bindFramebuffer(j.FRAMEBUFFER,ft);try{const Rt=I.texture,Vt=Rt.format,qt=Rt.type;if(!Se.textureFormatReadable(Vt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!Se.textureTypeReadable(qt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Z>=0&&Z<=I.width-ie&&oe>=0&&oe<=I.height-ne&&j.readPixels(Z,oe,ie,ne,Xe.convert(Vt),Xe.convert(qt),Ye)}finally{const Rt=null!==M?xe.get(M).__webglFramebuffer:null;he.bindFramebuffer(j.FRAMEBUFFER,Rt)}}},this.copyFramebufferToTexture=function(I,Z,oe=0){const ie=Math.pow(2,-oe),ne=Math.floor(Z.image.width*ie),Ye=Math.floor(Z.image.height*ie);$e.setTexture2D(Z,0),j.copyTexSubImage2D(j.TEXTURE_2D,oe,0,0,I.x,I.y,ne,Ye),he.unbindTexture()},this.copyTextureToTexture=function(I,Z,oe,ie=0){const ne=Z.image.width,Ye=Z.image.height,at=Xe.convert(oe.format),ft=Xe.convert(oe.type);$e.setTexture2D(oe,0),j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,oe.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,oe.unpackAlignment),Z.isDataTexture?j.texSubImage2D(j.TEXTURE_2D,ie,I.x,I.y,ne,Ye,at,ft,Z.image.data):Z.isCompressedTexture?j.compressedTexSubImage2D(j.TEXTURE_2D,ie,I.x,I.y,Z.mipmaps[0].width,Z.mipmaps[0].height,at,Z.mipmaps[0].data):j.texSubImage2D(j.TEXTURE_2D,ie,I.x,I.y,at,ft,Z.image),0===ie&&oe.generateMipmaps&&j.generateMipmap(j.TEXTURE_2D),he.unbindTexture()},this.copyTextureToTexture3D=function(I,Z,oe,ie,ne=0){const Ye=I.max.x-I.min.x,at=I.max.y-I.min.y,ft=I.max.z-I.min.z,Rt=Xe.convert(ie.format),Vt=Xe.convert(ie.type);let qt;if(ie.isData3DTexture)$e.setTexture3D(ie,0),qt=j.TEXTURE_3D;else{if(!ie.isDataArrayTexture&&!ie.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");$e.setTexture2DArray(ie,0),qt=j.TEXTURE_2D_ARRAY}j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,ie.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,ie.unpackAlignment);const ii=j.getParameter(j.UNPACK_ROW_LENGTH),Un=j.getParameter(j.UNPACK_IMAGE_HEIGHT),Ar=j.getParameter(j.UNPACK_SKIP_PIXELS),Ps=j.getParameter(j.UNPACK_SKIP_ROWS),Ja=j.getParameter(j.UNPACK_SKIP_IMAGES),Mi=oe.isCompressedTexture?oe.mipmaps[ne]:oe.image;j.pixelStorei(j.UNPACK_ROW_LENGTH,Mi.width),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,Mi.height),j.pixelStorei(j.UNPACK_SKIP_PIXELS,I.min.x),j.pixelStorei(j.UNPACK_SKIP_ROWS,I.min.y),j.pixelStorei(j.UNPACK_SKIP_IMAGES,I.min.z),oe.isDataTexture||oe.isData3DTexture?j.texSubImage3D(qt,ne,Z.x,Z.y,Z.z,Ye,at,ft,Rt,Vt,Mi.data):ie.isCompressedArrayTexture?j.compressedTexSubImage3D(qt,ne,Z.x,Z.y,Z.z,Ye,at,ft,Rt,Mi.data):j.texSubImage3D(qt,ne,Z.x,Z.y,Z.z,Ye,at,ft,Rt,Vt,Mi),j.pixelStorei(j.UNPACK_ROW_LENGTH,ii),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,Un),j.pixelStorei(j.UNPACK_SKIP_PIXELS,Ar),j.pixelStorei(j.UNPACK_SKIP_ROWS,Ps),j.pixelStorei(j.UNPACK_SKIP_IMAGES,Ja),0===ne&&ie.generateMipmaps&&j.generateMipmap(qt),he.unbindTexture()},this.initTexture=function(I){I.isCubeTexture?$e.setTextureCube(I,0):I.isData3DTexture?$e.setTexture3D(I,0):I.isDataArrayTexture||I.isCompressedArrayTexture?$e.setTexture2DArray(I,0):$e.setTexture2D(I,0),he.unbindTexture()},this.resetState=function(){T=0,w=0,M=null,he.reset(),wt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Qo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=t===Bv?"display-p3":"srgb",e.unpackColorSpace=xi.workingColorSpace===lp?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(t){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=t}}class fy{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new Te(t),this.density=e}clone(){return new fy(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Sp{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new Te(t),this.near=e,this.far=n}clone(){return new Sp(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class YC extends Nt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Bs,this.environmentIntensity=1,this.environmentRotation=new Bs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class Rp{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=hp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Ms()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}get updateRange(){return O3("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,s=this.stride;r<s;r++)this.array[t+r]=e.array[n+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ms()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ms()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const zr=new C;class Pl{constructor(t,e,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)zr.fromBufferAttribute(this,e),zr.applyMatrix4(t),this.setXYZ(e,zr.x,zr.y,zr.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)zr.fromBufferAttribute(this,e),zr.applyNormalMatrix(t),this.setXYZ(e,zr.x,zr.y,zr.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)zr.fromBufferAttribute(this,e),zr.transformDirection(t),this.setXYZ(e,zr.x,zr.y,zr.z);return this}getComponent(t,e){let n=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(n=Ur(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=jt(n,this.array)),this.data.array[t*this.data.stride+this.offset+e]=n,this}setX(t,e){return this.normalized&&(e=jt(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=jt(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=jt(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=jt(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Ur(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Ur(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Ur(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Ur(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=jt(e,this.array),n=jt(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=jt(e,this.array),n=jt(n,this.array),r=jt(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}setXYZW(t,e,n,r,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=jt(e,this.array),n=jt(n,this.array),r=jt(r,this.array),s=jt(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=s,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return new ui(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Pl(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ZC extends kn{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Te(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Uh;const Cp=new C,Vh=new C,zh=new C,Hh=new $,Ep=new $,OU=new je,my=new C,Ap=new C,py=new C,NU=new $,KC=new $,jU=new $;class BU extends Nt{constructor(t=new ZC){if(super(),this.isSprite=!0,this.type="Sprite",void 0===Uh){Uh=new pt;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Rp(e,5);Uh.setIndex([0,1,2,0,2,3]),Uh.setAttribute("position",new Pl(n,3,0,!1)),Uh.setAttribute("uv",new Pl(n,2,3,!1))}this.geometry=Uh,this.material=t,this.center=new $(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Vh.setFromMatrixScale(this.matrixWorld),OU.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),zh.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Vh.multiplyScalar(-zh.z);const n=this.material.rotation;let r,s;0!==n&&(s=Math.cos(n),r=Math.sin(n));const o=this.center;gy(my.set(-.5,-.5,0),zh,o,Vh,r,s),gy(Ap.set(.5,-.5,0),zh,o,Vh,r,s),gy(py.set(.5,.5,0),zh,o,Vh,r,s),NU.set(0,0),KC.set(1,0),jU.set(1,1);let a=t.ray.intersectTriangle(my,Ap,py,!1,Cp);if(null===a&&(gy(Ap.set(-.5,.5,0),zh,o,Vh,r,s),KC.set(0,1),a=t.ray.intersectTriangle(my,py,Ap,!1,Cp),null===a))return;const l=t.ray.origin.distanceTo(Cp);l<t.near||l>t.far||e.push({distance:l,point:Cp.clone(),uv:Rs.getInterpolation(Cp,my,Ap,py,NU,KC,jU,new $),face:null,object:this})}copy(t,e){return super.copy(t,e),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function gy(i,t,e,n,r,s){Hh.subVectors(i,e).addScalar(.5).multiply(n),void 0!==r?(Ep.x=s*Hh.x-r*Hh.y,Ep.y=r*Hh.x+s*Hh.y):Ep.copy(Hh),i.copy(t),i.x+=Ep.x,i.y+=Ep.y,i.applyMatrix4(OU)}const _y=new C,UU=new C;class VU extends Nt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let n=0,r=e.length;n<r;n++){const s=e[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,n=0){e=Math.abs(e);const r=this.levels;let s;for(s=0;s<r.length&&!(e<r[s].distance);s++);return r.splice(s,0,{distance:e,hysteresis:n,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,r;for(n=1,r=e.length;n<r;n++){let s=e[n].distance;if(e[n].object.visible&&(s-=s*e[n].hysteresis),t<s)break}return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){_y.setFromMatrixPosition(this.matrixWorld);const r=t.ray.origin.distanceTo(_y);this.getObjectForDistance(r).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){_y.setFromMatrixPosition(t.matrixWorld),UU.setFromMatrixPosition(this.matrixWorld);const n=_y.distanceTo(UU)/t.zoom;let r,s;for(e[0].object.visible=!0,r=1,s=e.length;r<s;r++){let o=e[r].distance;if(e[r].object.visible&&(o-=o*e[r].hysteresis),!(n>=o))break;e[r-1].object.visible=!1,e[r].object.visible=!0}for(this._currentLevel=r-1;r<s;r++)e[r].object.visible=!1}}toJSON(t){const e=super.toJSON(t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let r=0,s=n.length;r<s;r++){const o=n[r];e.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return e}}const zU=new C,HU=new fi,GU=new fi,Rde=new C,WU=new je,by=new C,QC=new nr,$U=new je,JC=new Zc;class eE extends Be{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=DR,this.bindMatrix=new je,this.bindMatrixInverse=new je,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;null===this.boundingBox&&(this.boundingBox=new ir),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,by),this.boundingBox.expandByPoint(by)}computeBoundingSphere(){const t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new nr),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,by),this.boundingSphere.expandByPoint(by)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const r=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),QC.copy(this.boundingSphere),QC.applyMatrix4(r),!1!==t.ray.intersectsSphere(QC)&&($U.copy(r).invert(),JC.copy(t.ray).applyMatrix4($U),(null===this.boundingBox||!1!==JC.intersectsBox(this.boundingBox))&&this._computeIntersections(t,e,JC)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new fi,e=this.geometry.attributes.skinWeight;for(let n=0,r=e.count;n<r;n++){t.fromBufferAttribute(e,n);const s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===DR?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===d3?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,r=this.geometry;HU.fromBufferAttribute(r.attributes.skinIndex,t),GU.fromBufferAttribute(r.attributes.skinWeight,t),zU.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let s=0;s<4;s++){const o=GU.getComponent(s);if(0!==o){const a=HU.getComponent(s);WU.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),e.addScaledVector(Rde.copy(zU).applyMatrix4(WU),o)}}return e.applyMatrix4(this.bindMatrixInverse)}}class vy extends Nt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Jo extends Sn{constructor(t=null,e=1,n=1,r,s,o,a,l,c=ci,d=ci,u,h){super(null,o,a,l,c,d,r,s,u,h),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const XU=new je,Cde=new je;class Dp{constructor(t=[],e=[]){this.uuid=Ms(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new je)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new je;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=t.length;s<o;s++)XU.multiplyMatrices(t[s]?t[s].matrixWorld:Cde,e[s]),XU.toArray(n,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new Dp(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=4*Math.ceil(t/4),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Jo(e,t,t,Ts,ts);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];if(r.name===t)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,r=t.bones.length;n<r;n++){const s=t.bones[n];let o=e[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new vy),this.bones.push(o),this.boneInverses.push((new je).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let r=0,s=e.length;r<s;r++)t.bones.push(e[r].uuid),t.boneInverses.push(n[r].toArray());return t}}class nd extends ui{constructor(t,e,n,r=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Gh=new je,qU=new je,yy=[],YU=new ir,Ede=new je,Ip=new Be,Pp=new nr;class xy extends Be{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new nd(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,Ede)}computeBoundingBox(){const t=this.geometry,e=this.count;null===this.boundingBox&&(this.boundingBox=new ir),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Gh),YU.copy(t.boundingBox).applyMatrix4(Gh),this.boundingBox.union(YU)}computeBoundingSphere(){const t=this.geometry,e=this.count;null===this.boundingSphere&&(this.boundingSphere=new nr),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Gh),Pp.copy(t.boundingSphere).applyMatrix4(Gh),this.boundingSphere.union(Pp)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),null!==t.morphTexture&&(this.morphTexture=t.morphTexture.clone()),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}getMorphAt(t,e){const n=e.morphTargetInfluences,r=this.morphTexture.source.data.data,o=t*(n.length+1)+1;for(let a=0;a<n.length;a++)n[a]=r[o+a]}raycast(t,e){const n=this.matrixWorld,r=this.count;if(Ip.geometry=this.geometry,Ip.material=this.material,void 0!==Ip.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Pp.copy(this.boundingSphere),Pp.applyMatrix4(n),!1!==t.ray.intersectsSphere(Pp)))for(let s=0;s<r;s++){this.getMatrixAt(s,Gh),qU.multiplyMatrices(n,Gh),Ip.matrixWorld=qU,Ip.raycast(t,yy);for(let o=0,a=yy.length;o<a;o++){const l=yy[o];l.instanceId=s,l.object=this,e.push(l)}yy.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new nd(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}setMorphAt(t,e){const n=e.morphTargetInfluences,r=n.length+1;null===this.morphTexture&&(this.morphTexture=new Jo(new Float32Array(r*this.count),r,this.count,op,ts));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<n.length;c++)o+=n[c];const l=r*t;s[l]=this.geometry.morphTargetsRelative?1:1-o,s.set(n,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function Ade(i,t){return i.z-t.z}function Dde(i,t){return t.z-i.z}class Ide{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e){const n=this.pool,r=this.list;this.index>=n.length&&n.push({start:-1,count:-1,z:-1});const s=n[this.index];r.push(s),this.index++,s.start=t.start,s.count=t.count,s.z=e}reset(){this.list.length=0,this.index=0}}const Wh="batchId",kl=new je,ZU=new je,Pde=new je,KU=new je,tE=new Tp,wy=new ir,rd=new nr,kp=new C,iE=new Ide,wr=new Be,Ty=[];function kde(i,t,e=0){const n=t.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==t.array.constructor){const r=i.count;for(let s=0;s<r;s++)for(let o=0;o<n;o++)t.setComponent(s+e,o,i.getComponent(s,o))}else t.array.set(i.array,e*n);t.needsUpdate=!0}class QU extends Be{get maxGeometryCount(){return this._maxGeometryCount}constructor(t,e,n=2*e,r){super(new pt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=t,this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let t=Math.sqrt(4*this._maxGeometryCount);t=4*Math.ceil(t/4),t=Math.max(t,4);const e=new Float32Array(t*t*4),n=new Jo(e,t,t,Ts,ts);this._matricesTexture=n}_initializeGeometry(t){const e=this.geometry,n=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(!1===this._geometryInitialized){for(const a in t.attributes){const l=t.getAttribute(a),{array:c,itemSize:d,normalized:u}=l,h=new c.constructor(n*d),f=new ui(h,d,u);e.setAttribute(a,f)}if(null!==t.getIndex()){const a=n>65536?new Uint32Array(s):new Uint16Array(s);e.setIndex(new ui(a,1))}const o=r>65536?new Uint32Array(n):new Uint16Array(n);e.setAttribute(Wh,new ui(o,1)),this._geometryInitialized=!0}}_validateGeometry(t){if(t.getAttribute(Wh))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Wh}"`);const e=this.geometry;if(!!t.getIndex()!=!!e.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in e.attributes){if(n===Wh)continue;if(!t.hasAttribute(n))throw new Error(`BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=t.getAttribute(n),s=e.getAttribute(n);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ir);const t=this._geometryCount,e=this.boundingBox,n=this._active;e.makeEmpty();for(let r=0;r<t;r++)!1!==n[r]&&(this.getMatrixAt(r,kl),this.getBoundingBoxAt(r,wy).applyMatrix4(kl),e.union(wy))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new nr);const t=this._geometryCount,e=this.boundingSphere,n=this._active;e.makeEmpty();for(let r=0;r<t;r++)!1!==n[r]&&(this.getMatrixAt(r,kl),this.getBoundingSphereAt(r,rd).applyMatrix4(kl),e.union(rd))}addGeometry(t,e=-1,n=-1){if(this._initializeGeometry(t),this._validateGeometry(t),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;0!==this._geometryCount&&(s=o[o.length-1]),r.vertexCount=-1===e?t.getAttribute("position").count:e,r.vertexStart=null===s?0:s.vertexStart+s.vertexCount;const c=t.getIndex(),d=null!==c;if(d&&(r.indexCount=-1===n?c.count:n,r.indexStart=null===s?0:s.indexStart+s.indexCount),-1!==r.indexStart&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const h=this._active,f=this._matricesTexture,m=this._matricesTexture.image.data;this._visibility.push(!0),h.push(!0);const _=this._geometryCount;this._geometryCount++,Pde.toArray(m,16*_),f.needsUpdate=!0,o.push(r),a.push({start:d?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new ir,sphereInitialized:!1,sphere:new nr});const p=this.geometry.getAttribute(Wh);for(let g=0;g<r.vertexCount;g++)p.setX(r.vertexStart+g,_);return p.needsUpdate=!0,this.setGeometryAt(_,t),_}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const n=this.geometry,r=null!==n.getIndex(),s=n.getIndex(),o=e.getIndex(),a=this._reservedRanges[t];if(r&&o.count>a.indexCount||e.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const f in n.attributes){if(f===Wh)continue;const m=e.getAttribute(f),_=n.getAttribute(f);kde(m,_,l);const p=m.itemSize;for(let g=m.count,b=c;g<b;g++){const v=l+g;for(let y=0;y<p;y++)_.setComponent(v,y,0)}_.needsUpdate=!0,_.addUpdateRange(l*p,c*p)}if(r){const f=a.indexStart;for(let m=0;m<o.count;m++)s.setX(f+m,l+o.getX(m));for(let m=o.count,_=a.indexCount;m<_;m++)s.setX(f+m,l);s.needsUpdate=!0,s.addUpdateRange(f,a.indexCount)}const d=this._bounds[t];null!==e.boundingBox?(d.box.copy(e.boundingBox),d.boxInitialized=!0):d.boxInitialized=!1,null!==e.boundingSphere?(d.sphere.copy(e.boundingSphere),d.sphereInitialized=!0):d.sphereInitialized=!1;const u=this._drawRanges[t],h=e.getAttribute("position");return u.count=r?o.count:h.count,this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._active;return t>=e.length||!1===e[t]||(e[t]=!1,this._visibilityChanged=!0),this}getInstanceCountAt(t){return null===this._multiDrawInstances?null:this._multiDrawInstances[t]}setInstanceCountAt(t,e){return null===this._multiDrawInstances&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[t]=e,t}getBoundingBoxAt(t,e){if(!1===this._active[t])return null;const r=this._bounds[t],s=r.box,o=this.geometry;if(!1===r.boxInitialized){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[t];for(let d=c.start,u=c.start+c.count;d<u;d++){let h=d;a&&(h=a.getX(h)),s.expandByPoint(kp.fromBufferAttribute(l,h))}r.boxInitialized=!0}return e.copy(s),e}getBoundingSphereAt(t,e){if(!1===this._active[t])return null;const r=this._bounds[t],s=r.sphere,o=this.geometry;if(!1===r.sphereInitialized){s.makeEmpty(),this.getBoundingBoxAt(t,wy),wy.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[t];let d=0;for(let u=c.start,h=c.start+c.count;u<h;u++){let f=u;a&&(f=a.getX(f)),kp.fromBufferAttribute(l,f),d=Math.max(d,s.center.distanceToSquared(kp))}s.radius=Math.sqrt(d),r.sphereInitialized=!0}return e.copy(s),e}setMatrixAt(t,e){const r=this._matricesTexture;return t>=this._geometryCount||!1===this._active[t]||(e.toArray(this._matricesTexture.image.data,16*t),r.needsUpdate=!0),this}getMatrixAt(t,e){return t>=this._geometryCount||!1===this._active[t]?null:e.fromArray(this._matricesTexture.image.data,16*t)}setVisibleAt(t,e){const n=this._visibility;return t>=this._geometryCount||!1===this._active[t]||n[t]===e||(n[t]=e,this._visibilityChanged=!0),this}getVisibleAt(t){return!(t>=this._geometryCount||!1===this._active[t])&&this._visibility[t]}raycast(t,e){const n=this._visibility,r=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;wr.material=this.material,wr.geometry.index=l.index,wr.geometry.attributes=l.attributes,null===wr.geometry.boundingBox&&(wr.geometry.boundingBox=new ir),null===wr.geometry.boundingSphere&&(wr.geometry.boundingSphere=new nr);for(let c=0;c<o;c++){if(!n[c]||!r[c])continue;const d=s[c];wr.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(c,wr.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,wr.geometry.boundingBox),this.getBoundingSphereAt(c,wr.geometry.boundingSphere),wr.raycast(t,Ty);for(let u=0,h=Ty.length;u<h;u++){const f=Ty[u];f.object=this,f.batchId=c,e.push(f)}Ty.length=0}wr.material=null,wr.geometry.index=null,wr.geometry.attributes={},wr.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=null!==t.boundingBox?t.boundingBox.clone():null,this.boundingSphere=null!==t.boundingSphere?t.boundingSphere.clone():null,this._drawRanges=t._drawRanges.map(e=>({...e})),this._reservedRanges=t._reservedRanges.map(e=>({...e})),this._visibility=t._visibility.slice(),this._active=t._active.slice(),this._bounds=t._bounds.map(e=>({boxInitialized:e.boxInitialized,box:e.box.clone(),sphereInitialized:e.sphereInitialized,sphere:e.sphere.clone()})),this._maxGeometryCount=t._maxGeometryCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._geometryCount=t._geometryCount,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(t,e,n,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=null===o?1:o.array.BYTES_PER_ELEMENT,l=this._active,c=this._visibility,d=this._multiDrawStarts,u=this._multiDrawCounts,h=this._drawRanges,f=this.perObjectFrustumCulled;f&&(KU.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),tE.setFromProjectionMatrix(KU,t.coordinateSystem));let m=0;if(this.sortObjects){ZU.copy(this.matrixWorld).invert(),kp.setFromMatrixPosition(n.matrixWorld).applyMatrix4(ZU);for(let g=0,b=c.length;g<b;g++)if(c[g]&&l[g]){this.getMatrixAt(g,kl),this.getBoundingSphereAt(g,rd).applyMatrix4(kl);let v=!1;if(f&&(v=!tE.intersectsSphere(rd)),!v){const y=kp.distanceTo(rd.center);iE.push(h[g],y)}}const _=iE.list,p=this.customSort;null===p?_.sort(s.transparent?Dde:Ade):p.call(this,_,n);for(let g=0,b=_.length;g<b;g++){const v=_[g];d[m]=v.start*a,u[m]=v.count,m++}iE.reset()}else for(let _=0,p=c.length;_<p;_++)if(c[_]&&l[_]){let g=!1;if(f&&(this.getMatrixAt(_,kl),this.getBoundingSphereAt(_,rd).applyMatrix4(kl),g=!tE.intersectsSphere(rd)),!g){const b=h[_];d[m]=b.start*a,u[m]=b.count,m++}}this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(t,e,n,r,s,o){this.onBeforeRender(t,null,r,s,o)}}class Ln extends kn{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Te(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const My=new C,Sy=new C,JU=new je,Fp=new Zc,Ry=new nr,nE=new C,eV=new C;class En extends Nt{constructor(t=new pt,e=new Ln){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let r=1,s=e.count;r<s;r++)My.fromBufferAttribute(e,r-1),Sy.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=My.distanceTo(Sy);t.setAttribute("lineDistance",new qe(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,s=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ry.copy(n.boundingSphere),Ry.applyMatrix4(r),Ry.radius+=s,!1===t.ray.intersectsSphere(Ry))return;JU.copy(r).invert(),Fp.copy(t.ray).applyMatrix4(JU);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,d=n.index,h=n.attributes.position;if(null!==d){const f=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let _=f,p=m-1;_<p;_+=c){const g=d.getX(_),b=d.getX(_+1),v=Cy(this,t,Fp,l,g,b);v&&e.push(v)}if(this.isLineLoop){const _=d.getX(m-1),p=d.getX(f),g=Cy(this,t,Fp,l,_,p);g&&e.push(g)}}else{const f=Math.max(0,o.start),m=Math.min(h.count,o.start+o.count);for(let _=f,p=m-1;_<p;_+=c){const g=Cy(this,t,Fp,l,_,_+1);g&&e.push(g)}if(this.isLineLoop){const _=Cy(this,t,Fp,l,m-1,f);_&&e.push(_)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Cy(i,t,e,n,r,s){const o=i.geometry.attributes.position;if(My.fromBufferAttribute(o,r),Sy.fromBufferAttribute(o,s),e.distanceSqToSegment(My,Sy,nE,eV)>n)return;nE.applyMatrix4(i.matrixWorld);const l=t.ray.origin.distanceTo(nE);return l<t.near||l>t.far?void 0:{distance:l,point:eV.clone().applyMatrix4(i.matrixWorld),index:r,face:null,faceIndex:null,object:i}}const tV=new C,iV=new C;class zs extends En{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let r=0,s=e.count;r<s;r+=2)tV.fromBufferAttribute(e,r),iV.fromBufferAttribute(e,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+tV.distanceTo(iV);t.setAttribute("lineDistance",new qe(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class rE extends En{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class Ey extends kn{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Te(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const nV=new je,sE=new Zc,Ay=new nr,Dy=new C;class oE extends Nt{constructor(t=new pt,e=new Ey){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,s=t.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ay.copy(n.boundingSphere),Ay.applyMatrix4(r),Ay.radius+=s,!1===t.ray.intersectsSphere(Ay))return;nV.copy(r).invert(),sE.copy(t.ray).applyMatrix4(nV);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=n.index,u=n.attributes.position;if(null!==c)for(let m=Math.max(0,o.start),_=Math.min(c.count,o.start+o.count);m<_;m++){const p=c.getX(m);Dy.fromBufferAttribute(u,p),rV(Dy,p,l,r,t,e,this)}else for(let m=Math.max(0,o.start),_=Math.min(u.count,o.start+o.count);m<_;m++)Dy.fromBufferAttribute(u,m),rV(Dy,m,l,r,t,e,this)}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function rV(i,t,e,n,r,s,o){const a=sE.distanceSqToPoint(i);if(a<e){const l=new C;sE.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:t,face:null,object:o})}}class Fde extends Sn{constructor(t,e,n,r,s,o,a,l,c){super(t,e,n,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=void 0!==o?o:fn,this.magFilter=void 0!==s?s:fn,this.generateMipmaps=!1;const d=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(function u(){d.needsUpdate=!0,t.requestVideoFrameCallback(u)})}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t==0&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Lde extends Sn{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=ci,this.minFilter=ci,this.generateMipmaps=!1,this.needsUpdate=!0}}class Iy extends Sn{constructor(t,e,n,r,s,o,a,l,c,d,u,h){super(null,o,a,l,c,d,r,s,u,h),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class Ode extends Iy{constructor(t,e,n,r,s,o){super(t,e,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=ws}}class Nde extends Iy{constructor(t,e,n){super(void 0,t[0].width,t[0].height,e,n,Ea),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class aE extends Sn{constructor(t,e,n,r,s,o,a,l,c){super(t,e,n,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class xo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),s=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),s+=n.distanceTo(r),e.push(s),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const s=n.length;let o;o=e||t*n[s-1];let c,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=n[r]-o,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(s-1);const d=n[r];return(r+(o-d)/(n[r+1]-d))/(s-1)}getTangent(t,e){let r=t-1e-4,s=t+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=e||(o.isVector2?new $:new C);return l.copy(a).sub(o).normalize(),l}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new C,r=[],s=[],o=[],a=new C,l=new je;for(let f=0;f<=t;f++)r[f]=this.getTangentAt(f/t,new C);s[0]=new C,o[0]=new C;let c=Number.MAX_VALUE;const d=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);d<=c&&(c=d,n.set(1,0,0)),u<=c&&(c=u,n.set(0,1,0)),h<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let f=1;f<=t;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();const m=Math.acos(pn(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,m))}o[f].crossVectors(r[f],s[f])}if(!0===e){let f=Math.acos(pn(s[0].dot(s[t]),-1,1));f/=t,r[0].dot(a.crossVectors(s[0],s[t]))>0&&(f=-f);for(let m=1;m<=t;m++)s[m].applyMatrix4(l.makeRotationAxis(r[m],f*m)),o[m].crossVectors(r[m],s[m])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Fl extends xo{constructor(t=0,e=0,n=1,r=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(t,e=new $){const n=e,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+t*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const d=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*d-f*u+this.aX,c=h*u+f*d+this.aY}return n.set(l,c)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class sV extends Fl{constructor(t,e,n,r,s,o){super(t,e,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function lE(){let i=0,t=0,e=0,n=0;function r(s,o,a,l){i=s,t=a,e=-3*s+3*o-2*a-l,n=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,d,u){let h=(o-s)/c-(a-s)/(c+d)+(a-o)/d,f=(a-o)/d-(l-o)/(d+u)+(l-a)/u;h*=d,f*=d,r(o,a,h,f)},calc:function(s){const o=s*s;return i+t*s+e*o+n*(o*s)}}}const Py=new C,cE=new lE,dE=new lE,uE=new lE;class oV extends xo{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new C){const n=e,r=this.points,s=r.length,o=(s-(this.closed?0:1))*t;let c,d,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=r[(a-1)%s]:(Py.subVectors(r[0],r[1]).add(r[0]),c=Py);const u=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?d=r[(a+2)%s]:(Py.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=Py),"centripetal"===this.curveType||"chordal"===this.curveType){const f="chordal"===this.curveType?.5:.25;let m=Math.pow(c.distanceToSquared(u),f),_=Math.pow(u.distanceToSquared(h),f),p=Math.pow(h.distanceToSquared(d),f);_<1e-4&&(_=1),m<1e-4&&(m=_),p<1e-4&&(p=_),cE.initNonuniformCatmullRom(c.x,u.x,h.x,d.x,m,_,p),dE.initNonuniformCatmullRom(c.y,u.y,h.y,d.y,m,_,p),uE.initNonuniformCatmullRom(c.z,u.z,h.z,d.z,m,_,p)}else"catmullrom"===this.curveType&&(cE.initCatmullRom(c.x,u.x,h.x,d.x,this.tension),dE.initCatmullRom(c.y,u.y,h.y,d.y,this.tension),uE.initCatmullRom(c.z,u.z,h.z,d.z,this.tension));return n.set(cE.calc(l),dE.calc(l),uE.calc(l)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new C).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function aV(i,t,e,n,r){const s=.5*(n-t),o=.5*(r-e),a=i*i;return(2*e-2*n+s+o)*(i*a)+(-3*e+3*n-2*s-o)*a+s*i+e}function Lp(i,t,e,n){return function jde(i,t){const e=1-i;return e*e*t}(i,t)+function Bde(i,t){return 2*(1-i)*i*t}(i,e)+function Ude(i,t){return i*i*t}(i,n)}function Op(i,t,e,n,r){return function Vde(i,t){const e=1-i;return e*e*e*t}(i,t)+function zde(i,t){const e=1-i;return 3*e*e*i*t}(i,e)+function Hde(i,t){return 3*(1-i)*i*i*t}(i,n)+function Gde(i,t){return i*i*i*t}(i,r)}class hE extends xo{constructor(t=new $,e=new $,n=new $,r=new $){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new $){const n=e,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Op(t,r.x,s.x,o.x,a.x),Op(t,r.y,s.y,o.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class lV extends xo{constructor(t=new C,e=new C,n=new C,r=new C){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new C){const n=e,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Op(t,r.x,s.x,o.x,a.x),Op(t,r.y,s.y,o.y,a.y),Op(t,r.z,s.z,o.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class fE extends xo{constructor(t=new $,e=new $){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new $){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new $){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class cV extends xo{constructor(t=new C,e=new C){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new C){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new C){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class mE extends xo{constructor(t=new $,e=new $,n=new $){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new $){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(Lp(t,r.x,s.x,o.x),Lp(t,r.y,s.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class pE extends xo{constructor(t=new C,e=new C,n=new C){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new C){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(Lp(t,r.x,s.x,o.x),Lp(t,r.y,s.y,o.y),Lp(t,r.z,s.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class gE extends xo{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new $){const n=e,r=this.points,s=(r.length-1)*t,o=Math.floor(s),a=s-o,l=r[0===o?o:o-1],c=r[o],d=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(aV(a,l.x,c.x,d.x,u.x),aV(a,l.y,c.y,d.y,u.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new $).fromArray(r))}return this}}var ky=Object.freeze({__proto__:null,ArcCurve:sV,CatmullRomCurve3:oV,CubicBezierCurve:hE,CubicBezierCurve3:lV,EllipseCurve:Fl,LineCurve:fE,LineCurve3:cV,QuadraticBezierCurve:mE,QuadraticBezierCurve3:pE,SplineCurve:gE});class dV extends xo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);return t.equals(e)||this.curves.push(new ky[!0===t.isVector2?"LineCurve":"LineCurve3"](e,t)),this}getPoint(t,e){const n=t*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.getPoints(o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t);for(let c=0;c<l.length;c++){const d=l[c];n&&n.equals(d)||(e.push(d),n=d)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const r=t.curves[e];this.curves.push((new ky[r.type]).fromJSON(r))}return this}}class Np extends dV{constructor(t){super(),this.type="Path",this.currentPoint=new $,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new fE(this.currentPoint.clone(),new $(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const s=new mE(this.currentPoint.clone(),new $(t,e),new $(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,s,o){const a=new hE(this.currentPoint.clone(),new $(t,e),new $(n,r),new $(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new gE(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,s,o){return this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o),this}absarc(t,e,n,r,s,o){return this.absellipse(t,e,n,n,r,s,o),this}ellipse(t,e,n,r,s,o,a,l){return this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o,a,l),this}absellipse(t,e,n,r,s,o,a,l){const c=new Fl(t,e,n,r,s,o,a,l);if(this.curves.length>0){const u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class jp extends pt{constructor(t=[new $(0,-.5),new $(.5,0),new $(0,.5)],e=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e),r=pn(r,0,2*Math.PI);const s=[],o=[],a=[],l=[],c=[],d=1/e,u=new C,h=new $,f=new C,m=new C,_=new C;let p=0,g=0;for(let b=0;b<=t.length-1;b++)switch(b){case 0:p=t[b+1].x-t[b].x,g=t[b+1].y-t[b].y,f.x=1*g,f.y=-p,f.z=0*g,_.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case t.length-1:l.push(_.x,_.y,_.z);break;default:p=t[b+1].x-t[b].x,g=t[b+1].y-t[b].y,f.x=1*g,f.y=-p,f.z=0*g,m.copy(f),f.x+=_.x,f.y+=_.y,f.z+=_.z,f.normalize(),l.push(f.x,f.y,f.z),_.copy(m)}for(let b=0;b<=e;b++){const v=n+b*d*r,y=Math.sin(v),T=Math.cos(v);for(let w=0;w<=t.length-1;w++)u.x=t[w].x*y,u.y=t[w].y,u.z=t[w].x*T,o.push(u.x,u.y,u.z),h.x=b/e,h.y=w/(t.length-1),a.push(h.x,h.y),c.push(l[3*w+0]*y,l[3*w+1],l[3*w+0]*T)}for(let b=0;b<e;b++)for(let v=0;v<t.length-1;v++){const y=v+b*t.length,w=y+t.length,M=y+t.length+1,D=y+1;s.push(y,w,D),s.push(M,D,w)}this.setIndex(s),this.setAttribute("position",new qe(o,3)),this.setAttribute("uv",new qe(a,2)),this.setAttribute("normal",new qe(c,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new jp(t.points,t.segments,t.phiStart,t.phiLength)}}class Fy extends jp{constructor(t=1,e=1,n=4,r=8){const s=new Np;s.absarc(0,-e/2,t,1.5*Math.PI,0),s.absarc(0,e/2,t,0,.5*Math.PI),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:t,length:e,capSegments:n,radialSegments:r}}static fromJSON(t){return new Fy(t.radius,t.length,t.capSegments,t.radialSegments)}}class Ly extends pt{constructor(t=1,e=32,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},e=Math.max(3,e);const s=[],o=[],a=[],l=[],c=new C,d=new $;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let u=0,h=3;u<=e;u++,h+=3){const f=n+u/e*r;c.x=t*Math.cos(f),c.y=t*Math.sin(f),o.push(c.x,c.y,c.z),a.push(0,0,1),d.x=(o[h]/t+1)/2,d.y=(o[h+1]/t+1)/2,l.push(d.x,d.y)}for(let u=1;u<=e;u++)s.push(u,u+1,0);this.setIndex(s),this.setAttribute("position",new qe(o,3)),this.setAttribute("normal",new qe(a,3)),this.setAttribute("uv",new qe(l,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ly(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class On extends pt{constructor(t=1,e=1,n=1,r=32,s=1,o=!1,a=0,l=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const d=[],u=[],h=[],f=[];let m=0;const _=[],p=n/2;let g=0;function v(y){const T=m,w=new $,M=new C;let D=0;const S=!0===y?t:e,x=!0===y?1:-1;for(let U=1;U<=r;U++)u.push(0,p*x,0),h.push(0,x,0),f.push(.5,.5),m++;const k=m;for(let U=0;U<=r;U++){const H=U/r*l+a,Y=Math.cos(H),V=Math.sin(H);M.x=S*V,M.y=p*x,M.z=S*Y,u.push(M.x,M.y,M.z),h.push(0,x,0),w.x=.5*Y+.5,w.y=.5*V*x+.5,f.push(w.x,w.y),m++}for(let U=0;U<r;U++){const L=T+U,H=k+U;!0===y?d.push(H,H+1,L):d.push(H+1,H,L),D+=3}c.addGroup(g,D,!0===y?1:2),g+=D}(function b(){const y=new C,T=new C;let w=0;const M=(e-t)/n;for(let D=0;D<=s;D++){const S=[],x=D/s,k=x*(e-t)+t;for(let U=0;U<=r;U++){const L=U/r,H=L*l+a,Y=Math.sin(H),V=Math.cos(H);T.x=k*Y,T.y=-x*n+p,T.z=k*V,u.push(T.x,T.y,T.z),y.set(Y,M,V).normalize(),h.push(y.x,y.y,y.z),f.push(L,1-x),S.push(m++)}_.push(S)}for(let D=0;D<r;D++)for(let S=0;S<s;S++){const k=_[S+1][D],U=_[S+1][D+1],L=_[S][D+1];d.push(_[S][D],k,L),d.push(k,U,L),w+=6}c.addGroup(g,w,0),g+=w})(),!1===o&&(t>0&&v(!0),e>0&&v(!1)),this.setIndex(d),this.setAttribute("position",new qe(u,3)),this.setAttribute("normal",new qe(h,3)),this.setAttribute("uv",new qe(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new On(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Oy extends On{constructor(t=1,e=1,n=32,r=1,s=!1,o=0,a=2*Math.PI){super(0,t,e,n,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(t){return new Oy(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Na extends pt{constructor(t=[],e=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r};const s=[],o=[];function l(b,v,y,T){const w=T+1,M=[];for(let D=0;D<=w;D++){M[D]=[];const S=b.clone().lerp(y,D/w),x=v.clone().lerp(y,D/w),k=w-D;for(let U=0;U<=k;U++)M[D][U]=0===U&&D===w?S:S.clone().lerp(x,U/k)}for(let D=0;D<w;D++)for(let S=0;S<2*(w-D)-1;S++){const x=Math.floor(S/2);S%2==0?(h(M[D][x+1]),h(M[D+1][x]),h(M[D][x])):(h(M[D][x+1]),h(M[D+1][x+1]),h(M[D+1][x]))}}function h(b){s.push(b.x,b.y,b.z)}function f(b,v){const y=3*b;v.x=t[y+0],v.y=t[y+1],v.z=t[y+2]}function _(b,v,y,T){T<0&&1===b.x&&(o[v]=b.x-1),0===y.x&&0===y.z&&(o[v]=T/2/Math.PI+.5)}function p(b){return Math.atan2(b.z,-b.x)}function g(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}(function a(b){const v=new C,y=new C,T=new C;for(let w=0;w<e.length;w+=3)f(e[w+0],v),f(e[w+1],y),f(e[w+2],T),l(v,y,T,b)})(r),function c(b){const v=new C;for(let y=0;y<s.length;y+=3)v.x=s[y+0],v.y=s[y+1],v.z=s[y+2],v.normalize().multiplyScalar(b),s[y+0]=v.x,s[y+1]=v.y,s[y+2]=v.z}(n),function d(){const b=new C;for(let v=0;v<s.length;v+=3){b.x=s[v+0],b.y=s[v+1],b.z=s[v+2];const y=p(b)/2/Math.PI+.5,T=g(b)/Math.PI+.5;o.push(y,1-T)}(function m(){const b=new C,v=new C,y=new C,T=new C,w=new $,M=new $,D=new $;for(let S=0,x=0;S<s.length;S+=9,x+=6){b.set(s[S+0],s[S+1],s[S+2]),v.set(s[S+3],s[S+4],s[S+5]),y.set(s[S+6],s[S+7],s[S+8]),w.set(o[x+0],o[x+1]),M.set(o[x+2],o[x+3]),D.set(o[x+4],o[x+5]),T.copy(b).add(v).add(y).divideScalar(3);const k=p(T);_(w,x+0,b,k),_(M,x+2,v,k),_(D,x+4,y,k)}})(),function u(){for(let b=0;b<o.length;b+=6){const v=o[b+0],y=o[b+2],T=o[b+4],w=Math.max(v,y,T),M=Math.min(v,y,T);w>.9&&M<.1&&(v<.2&&(o[b+0]+=1),y<.2&&(o[b+2]+=1),T<.2&&(o[b+4]+=1))}}()}(),this.setAttribute("position",new qe(s,3)),this.setAttribute("normal",new qe(s.slice(),3)),this.setAttribute("uv",new qe(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Na(t.vertices,t.indices,t.radius,t.details)}}class Ny extends Na{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Ny(t.radius,t.detail)}}const jy=new C,By=new C,_E=new C,Uy=new Rs;class uV extends pt{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},null!==t){const r=Math.pow(10,4),s=Math.cos($c*e),o=t.getIndex(),a=t.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],d=["a","b","c"],u=new Array(3),h={},f=[];for(let m=0;m<l;m+=3){o?(c[0]=o.getX(m),c[1]=o.getX(m+1),c[2]=o.getX(m+2)):(c[0]=m,c[1]=m+1,c[2]=m+2);const{a:_,b:p,c:g}=Uy;if(_.fromBufferAttribute(a,c[0]),p.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),Uy.getNormal(_E),u[0]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,u[1]=`${Math.round(p.x*r)},${Math.round(p.y*r)},${Math.round(p.z*r)}`,u[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let b=0;b<3;b++){const v=(b+1)%3,y=u[b],T=u[v],w=Uy[d[b]],M=Uy[d[v]],D=`${y}_${T}`,S=`${T}_${y}`;S in h&&h[S]?(_E.dot(h[S].normal)<=s&&(f.push(w.x,w.y,w.z),f.push(M.x,M.y,M.z)),h[S]=null):D in h||(h[D]={index0:c[b],index1:c[v],normal:_E.clone()})}}for(const m in h)if(h[m]){const{index0:_,index1:p}=h[m];jy.fromBufferAttribute(a,_),By.fromBufferAttribute(a,p),f.push(jy.x,jy.y,jy.z),f.push(By.x,By.y,By.z)}this.setAttribute("position",new qe(f,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class sd extends Np{constructor(t){super(t),this.uuid=Ms(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++)this.holes.push(t.holes[e].clone());return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++)t.holes.push(this.holes[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const r=t.holes[e];this.holes.push((new Np).fromJSON(r))}return this}}function hV(i,t,e,n,r){let s,o;if(r===function aue(i,t,e,n){let r=0;for(let s=t,o=e-n;s<e;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}(i,t,e,n)>0)for(s=t;s<e;s+=n)o=pV(s,i[s],i[s+1],o);else for(s=e-n;s>=t;s-=n)o=pV(s,i[s],i[s+1],o);return o&&Vy(o,o.next)&&(Vp(o),o=o.next),o}function od(i,t){if(!i)return i;t||(t=i);let n,e=i;do{if(n=!1,e.steiner||!Vy(e,e.next)&&0!==on(e.prev,e,e.next))e=e.next;else{if(Vp(e),e=t=e.prev,e===e.next)break;n=!0}}while(n||e!==t);return t}function Bp(i,t,e,n,r,s,o){if(!i)return;!o&&s&&function tue(i,t,e,n){let r=i;do{0===r.z&&(r.z=bE(r.x,r.y,t,e,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,function iue(i){let t,e,n,r,s,o,a,l,c=1;do{for(e=i,i=null,s=null,o=0;e;){for(o++,n=e,a=0,t=0;t<c&&(a++,n=n.nextZ,n);t++);for(l=c;a>0||l>0&&n;)0!==a&&(0===l||!n||e.z<=n.z)?(r=e,e=e.nextZ,a--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;e=n}s.nextZ=null,c*=2}while(o>1)}(r)}(i,n,r,s);let l,c,a=i;for(;i.prev!==i.next;)if(l=i.prev,c=i.next,s?Xde(i,n,r,s):$de(i))t.push(l.i/e|0),t.push(i.i/e|0),t.push(c.i/e|0),Vp(i),i=c.next,a=c.next;else if((i=c)===a){o?1===o?Bp(i=qde(od(i),t,e),t,e,n,r,s,2):2===o&&Yde(i,t,e,n,r,s):Bp(od(i),t,e,n,r,s,1);break}}function $de(i){const t=i.prev,e=i,n=i.next;if(on(t,e,n)>=0)return!1;const r=t.x,s=e.x,o=n.x,a=t.y,l=e.y,c=n.y,d=r<s?r<o?r:o:s<o?s:o,u=a<l?a<c?a:c:l<c?l:c,h=r>s?r>o?r:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c;let m=n.next;for(;m!==t;){if(m.x>=d&&m.x<=h&&m.y>=u&&m.y<=f&&$h(r,a,s,l,o,c,m.x,m.y)&&on(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Xde(i,t,e,n){const r=i.prev,s=i,o=i.next;if(on(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,d=r.y,u=s.y,h=o.y,f=a<l?a<c?a:c:l<c?l:c,m=d<u?d<h?d:h:u<h?u:h,_=a>l?a>c?a:c:l>c?l:c,p=d>u?d>h?d:h:u>h?u:h,g=bE(f,m,t,e,n),b=bE(_,p,t,e,n);let v=i.prevZ,y=i.nextZ;for(;v&&v.z>=g&&y&&y.z<=b;){if(v.x>=f&&v.x<=_&&v.y>=m&&v.y<=p&&v!==r&&v!==o&&$h(a,d,l,u,c,h,v.x,v.y)&&on(v.prev,v,v.next)>=0||(v=v.prevZ,y.x>=f&&y.x<=_&&y.y>=m&&y.y<=p&&y!==r&&y!==o&&$h(a,d,l,u,c,h,y.x,y.y)&&on(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;v&&v.z>=g;){if(v.x>=f&&v.x<=_&&v.y>=m&&v.y<=p&&v!==r&&v!==o&&$h(a,d,l,u,c,h,v.x,v.y)&&on(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;y&&y.z<=b;){if(y.x>=f&&y.x<=_&&y.y>=m&&y.y<=p&&y!==r&&y!==o&&$h(a,d,l,u,c,h,y.x,y.y)&&on(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function qde(i,t,e){let n=i;do{const r=n.prev,s=n.next.next;!Vy(r,s)&&fV(r,n,n.next,s)&&Up(r,s)&&Up(s,r)&&(t.push(r.i/e|0),t.push(n.i/e|0),t.push(s.i/e|0),Vp(n),Vp(n.next),n=i=s),n=n.next}while(n!==i);return od(n)}function Yde(i,t,e,n,r,s){let o=i;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&rue(o,a)){let l=mV(o,a);return o=od(o,o.next),l=od(l,l.next),Bp(o,t,e,n,r,s,0),void Bp(l,t,e,n,r,s,0)}a=a.next}o=o.next}while(o!==i)}function Kde(i,t){return i.x-t.x}function Qde(i,t){const e=function Jde(i,t){let r,e=t,n=-1/0;const s=i.x,o=i.y;do{if(o<=e.y&&o>=e.next.y&&e.next.y!==e.y){const h=e.x+(o-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(h<=s&&h>n&&(n=h,r=e.x<e.next.x?e:e.next,h===s))return r}e=e.next}while(e!==t);if(!r)return null;const a=r,l=r.x,c=r.y;let u,d=1/0;e=r;do{s>=e.x&&e.x>=l&&s!==e.x&&$h(o<c?s:n,o,l,c,o<c?n:s,o,e.x,e.y)&&(u=Math.abs(o-e.y)/(s-e.x),Up(e,i)&&(u<d||u===d&&(e.x>r.x||e.x===r.x&&eue(r,e)))&&(r=e,d=u)),e=e.next}while(e!==a);return r}(i,t);if(!e)return t;const n=mV(e,i);return od(n,n.next),od(e,e.next)}function eue(i,t){return on(i.prev,i,t.prev)<0&&on(t.next,i,i.next)<0}function bE(i,t,e,n,r){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-e)*r|0)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function nue(i){let t=i,e=i;do{(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next}while(t!==i);return e}function $h(i,t,e,n,r,s,o,a){return(r-o)*(t-a)>=(i-o)*(s-a)&&(i-o)*(n-a)>=(e-o)*(t-a)&&(e-o)*(s-a)>=(r-o)*(n-a)}function rue(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function sue(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&fV(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}(i,t)&&(Up(i,t)&&Up(t,i)&&function oue(i,t){let e=i,n=!1;const r=(i.x+t.x)/2,s=(i.y+t.y)/2;do{e.y>s!=e.next.y>s&&e.next.y!==e.y&&r<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next}while(e!==i);return n}(i,t)&&(on(i.prev,i,t.prev)||on(i,t.prev,t))||Vy(i,t)&&on(i.prev,i,i.next)>0&&on(t.prev,t,t.next)>0)}function on(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function Vy(i,t){return i.x===t.x&&i.y===t.y}function fV(i,t,e,n){const r=Hy(on(i,t,e)),s=Hy(on(i,t,n)),o=Hy(on(e,n,i)),a=Hy(on(e,n,t));return!!(r!==s&&o!==a||0===r&&zy(i,e,t)||0===s&&zy(i,n,t)||0===o&&zy(e,i,n)||0===a&&zy(e,t,n))}function zy(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function Hy(i){return i>0?1:i<0?-1:0}function Up(i,t){return on(i.prev,i,i.next)<0?on(i,t,i.next)>=0&&on(i,i.prev,t)>=0:on(i,t,i.prev)<0||on(i,i.next,t)<0}function mV(i,t){const e=new vE(i.i,i.x,i.y),n=new vE(t.i,t.x,t.y),r=i.next,s=t.prev;return i.next=t,t.prev=i,e.next=r,r.prev=e,n.next=e,e.prev=n,s.next=n,n.prev=s,n}function pV(i,t,e,n){const r=new vE(i,t,e);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Vp(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function vE(i,t,e){this.i=i,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class ea{static area(t){const e=t.length;let n=0;for(let r=e-1,s=0;s<e;r=s++)n+=t[r].x*t[s].y-t[s].x*t[r].y;return.5*n}static isClockWise(t){return ea.area(t)<0}static triangulateShape(t,e){const n=[],r=[],s=[];gV(t),_V(n,t);let o=t.length;e.forEach(gV);for(let l=0;l<e.length;l++)r.push(o),o+=e[l].length,_V(n,e[l]);const a=function(i,t,e=2){const n=t&&t.length,r=n?t[0]*e:i.length;let s=hV(i,0,r,e,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,d,u,h,f;if(n&&(s=function Zde(i,t,e,n){const r=[];let s,o,a,l,c;for(s=0,o=t.length;s<o;s++)a=t[s]*n,l=s<o-1?t[s+1]*n:i.length,c=hV(i,a,l,n,!1),c===c.next&&(c.steiner=!0),r.push(nue(c));for(r.sort(Kde),s=0;s<r.length;s++)e=Qde(r[s],e);return e}(i,t,s,e)),i.length>80*e){a=c=i[0],l=d=i[1];for(let m=e;m<r;m+=e)u=i[m],h=i[m+1],u<a&&(a=u),h<l&&(l=h),u>c&&(c=u),h>d&&(d=h);f=Math.max(c-a,d-l),f=0!==f?32767/f:0}return Bp(s,o,e,a,l,f,0),o}(n,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function gV(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function _V(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class Gy extends pt{constructor(t=new sd([new $(.5,.5),new $(-.5,.5),new $(-.5,-.5),new $(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],s=[];for(let a=0,l=t.length;a<l;a++)o(t[a]);function o(a){const l=[],c=void 0!==e.curveSegments?e.curveSegments:12,d=void 0!==e.steps?e.steps:1,u=void 0!==e.depth?e.depth:1;let h=void 0===e.bevelEnabled||e.bevelEnabled,f=void 0!==e.bevelThickness?e.bevelThickness:.2,m=void 0!==e.bevelSize?e.bevelSize:f-.1,_=void 0!==e.bevelOffset?e.bevelOffset:0,p=void 0!==e.bevelSegments?e.bevelSegments:3;const g=e.extrudePath,b=void 0!==e.UVGenerator?e.UVGenerator:lue;let v,T,w,M,D,y=!1;g&&(v=g.getSpacedPoints(d),y=!0,h=!1,T=g.computeFrenetFrames(d,!1),w=new C,M=new C,D=new C),h||(p=0,f=0,m=0,_=0);const S=a.extractPoints(c);let x=S.shape;const k=S.holes;if(!ea.isClockWise(x)){x=x.reverse();for(let re=0,Se=k.length;re<Se;re++){const he=k[re];ea.isClockWise(he)&&(k[re]=he.reverse())}}const L=ea.triangulateShape(x,k),H=x;for(let re=0,Se=k.length;re<Se;re++)x=x.concat(k[re]);function Y(re,Se,he){return Se||console.error("THREE.ExtrudeGeometry: vec does not exist"),re.clone().addScaledVector(Se,he)}const V=x.length,q=L.length;function z(re,Se,he){let ke,xe,$e;const nt=re.x-Se.x,F=re.y-Se.y,E=he.x-re.x,Q=he.y-re.y,fe=nt*nt+F*F;if(Math.abs(nt*Q-F*E)>Number.EPSILON){const _e=Math.sqrt(fe),et=Math.sqrt(E*E+Q*Q),Ne=Se.x-F/_e,Oe=Se.y+nt/_e,Ze=((he.x-Q/et-Ne)*Q-(he.y+E/et-Oe)*E)/(nt*Q-F*E);ke=Ne+nt*Ze-re.x,xe=Oe+F*Ze-re.y;const gt=ke*ke+xe*xe;if(gt<=2)return new $(ke,xe);$e=Math.sqrt(gt/2)}else{let _e=!1;nt>Number.EPSILON?E>Number.EPSILON&&(_e=!0):nt<-Number.EPSILON?E<-Number.EPSILON&&(_e=!0):Math.sign(F)===Math.sign(Q)&&(_e=!0),_e?(ke=-F,xe=nt,$e=Math.sqrt(fe)):(ke=nt,xe=F,$e=Math.sqrt(fe/2))}return new $(ke/$e,xe/$e)}const X=[];for(let re=0,Se=H.length,he=Se-1,ke=re+1;re<Se;re++,he++,ke++)he===Se&&(he=0),ke===Se&&(ke=0),X[re]=z(H[re],H[he],H[ke]);const se=[];let Me,Ve=X.concat();for(let re=0,Se=k.length;re<Se;re++){const he=k[re];Me=[];for(let ke=0,xe=he.length,$e=xe-1,nt=ke+1;ke<xe;ke++,$e++,nt++)$e===xe&&($e=0),nt===xe&&(nt=0),Me[ke]=z(he[ke],he[$e],he[nt]);se.push(Me),Ve=Ve.concat(Me)}for(let re=0;re<p;re++){const Se=re/p,he=f*Math.cos(Se*Math.PI/2),ke=m*Math.sin(Se*Math.PI/2)+_;for(let xe=0,$e=H.length;xe<$e;xe++){const nt=Y(H[xe],X[xe],ke);N(nt.x,nt.y,-he)}for(let xe=0,$e=k.length;xe<$e;xe++){const nt=k[xe];Me=se[xe];for(let F=0,E=nt.length;F<E;F++){const Q=Y(nt[F],Me[F],ke);N(Q.x,Q.y,-he)}}}const Qe=m+_;for(let re=0;re<V;re++){const Se=h?Y(x[re],Ve[re],Qe):x[re];y?(M.copy(T.normals[0]).multiplyScalar(Se.x),w.copy(T.binormals[0]).multiplyScalar(Se.y),D.copy(v[0]).add(M).add(w),N(D.x,D.y,D.z)):N(Se.x,Se.y,0)}for(let re=1;re<=d;re++)for(let Se=0;Se<V;Se++){const he=h?Y(x[Se],Ve[Se],Qe):x[Se];y?(M.copy(T.normals[re]).multiplyScalar(he.x),w.copy(T.binormals[re]).multiplyScalar(he.y),D.copy(v[re]).add(M).add(w),N(D.x,D.y,D.z)):N(he.x,he.y,u/d*re)}for(let re=p-1;re>=0;re--){const Se=re/p,he=f*Math.cos(Se*Math.PI/2),ke=m*Math.sin(Se*Math.PI/2)+_;for(let xe=0,$e=H.length;xe<$e;xe++){const nt=Y(H[xe],X[xe],ke);N(nt.x,nt.y,u+he)}for(let xe=0,$e=k.length;xe<$e;xe++){const nt=k[xe];Me=se[xe];for(let F=0,E=nt.length;F<E;F++){const Q=Y(nt[F],Me[F],ke);y?N(Q.x,Q.y+v[d-1].y,v[d-1].x+he):N(Q.x,Q.y,u+he)}}}function Ie(re,Se){let he=re.length;for(;--he>=0;){const ke=he;let xe=he-1;xe<0&&(xe=re.length-1);for(let $e=0,nt=d+2*p;$e<nt;$e++){const F=V*$e,E=V*($e+1);Ae(Se+ke+F,Se+xe+F,Se+xe+E,Se+ke+E)}}}function N(re,Se,he){l.push(re),l.push(Se),l.push(he)}function me(re,Se,he){j(re),j(Se),j(he);const ke=r.length/3,xe=b.generateTopUV(n,r,ke-3,ke-2,ke-1);tt(xe[0]),tt(xe[1]),tt(xe[2])}function Ae(re,Se,he,ke){j(re),j(Se),j(ke),j(Se),j(he),j(ke);const xe=r.length/3,$e=b.generateSideWallUV(n,r,xe-6,xe-3,xe-2,xe-1);tt($e[0]),tt($e[1]),tt($e[3]),tt($e[1]),tt($e[2]),tt($e[3])}function j(re){r.push(l[3*re+0]),r.push(l[3*re+1]),r.push(l[3*re+2])}function tt(re){s.push(re.x),s.push(re.y)}(function W(){const re=r.length/3;if(h){let Se=0,he=V*Se;for(let ke=0;ke<q;ke++){const xe=L[ke];me(xe[2]+he,xe[1]+he,xe[0]+he)}Se=d+2*p,he=V*Se;for(let ke=0;ke<q;ke++){const xe=L[ke];me(xe[0]+he,xe[1]+he,xe[2]+he)}}else{for(let Se=0;Se<q;Se++){const he=L[Se];me(he[2],he[1],he[0])}for(let Se=0;Se<q;Se++){const he=L[Se];me(he[0]+V*d,he[1]+V*d,he[2]+V*d)}}n.addGroup(re,r.length/3-re,0)})(),function be(){const re=r.length/3;let Se=0;Ie(H,Se),Se+=H.length;for(let he=0,ke=k.length;he<ke;he++){const xe=k[he];Ie(xe,Se),Se+=xe.length}n.addGroup(re,r.length/3-re,1)}()}this.setAttribute("position",new qe(r,3)),this.setAttribute("uv",new qe(s,2)),this.computeVertexNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function cue(i,t,e){if(e.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++)e.shapes.push(i[n].uuid);else e.shapes.push(i.uuid);return e.options=Object.assign({},t),void 0!==t.extrudePath&&(e.options.extrudePath=t.extrudePath.toJSON()),e}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let s=0,o=t.shapes.length;s<o;s++)n.push(e[t.shapes[s]]);const r=t.options.extrudePath;return void 0!==r&&(t.options.extrudePath=(new ky[r.type]).fromJSON(r)),new Gy(n,t.options)}}const lue={generateTopUV:function(i,t,e,n,r){const a=t[3*n],l=t[3*n+1],c=t[3*r],d=t[3*r+1];return[new $(t[3*e],t[3*e+1]),new $(a,l),new $(c,d)]},generateSideWallUV:function(i,t,e,n,r,s){const o=t[3*e],a=t[3*e+1],l=t[3*e+2],c=t[3*n],d=t[3*n+1],u=t[3*n+2],h=t[3*r],f=t[3*r+1],m=t[3*r+2],_=t[3*s],p=t[3*s+1],g=t[3*s+2];return Math.abs(a-d)<Math.abs(o-c)?[new $(o,1-l),new $(c,1-u),new $(h,1-m),new $(_,1-g)]:[new $(a,1-l),new $(d,1-u),new $(f,1-m),new $(p,1-g)]}};class zp extends Na{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new zp(t.radius,t.detail)}}class ja extends Na{constructor(t=1,e=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new ja(t.radius,t.detail)}}class Wy extends pt{constructor(t=.5,e=1,n=32,r=1,s=0,o=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:o},n=Math.max(3,n);const a=[],l=[],c=[],d=[];let u=t;const h=(e-t)/(r=Math.max(1,r)),f=new C,m=new $;for(let _=0;_<=r;_++){for(let p=0;p<=n;p++){const g=s+p/n*o;f.x=u*Math.cos(g),f.y=u*Math.sin(g),l.push(f.x,f.y,f.z),c.push(0,0,1),m.x=(f.x/e+1)/2,m.y=(f.y/e+1)/2,d.push(m.x,m.y)}u+=h}for(let _=0;_<r;_++){const p=_*(n+1);for(let g=0;g<n;g++){const b=g+p,y=b+n+1,T=b+n+2,w=b+1;a.push(b,y,w),a.push(y,T,w)}}this.setIndex(a),this.setAttribute("position",new qe(l,3)),this.setAttribute("normal",new qe(c,3)),this.setAttribute("uv",new qe(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Wy(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class $y extends pt{constructor(t=new sd([new $(0,.5),new $(-.5,-.5),new $(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],r=[],s=[],o=[];let a=0,l=0;if(!1===Array.isArray(t))c(t);else for(let d=0;d<t.length;d++)c(t[d]),this.addGroup(a,l,d),a+=l,l=0;function c(d){const u=r.length/3,h=d.extractPoints(e);let f=h.shape;const m=h.holes;!1===ea.isClockWise(f)&&(f=f.reverse());for(let p=0,g=m.length;p<g;p++){const b=m[p];!0===ea.isClockWise(b)&&(m[p]=b.reverse())}const _=ea.triangulateShape(f,m);for(let p=0,g=m.length;p<g;p++)f=f.concat(m[p]);for(let p=0,g=f.length;p<g;p++){const b=f[p];r.push(b.x,b.y,0),s.push(0,0,1),o.push(b.x,b.y)}for(let p=0,g=_.length;p<g;p++){const b=_[p];n.push(b[0]+u,b[1]+u,b[2]+u),l+=3}}this.setIndex(n),this.setAttribute("position",new qe(r,3)),this.setAttribute("normal",new qe(s,3)),this.setAttribute("uv",new qe(o,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function due(i,t){if(t.shapes=[],Array.isArray(i))for(let e=0,n=i.length;e<n;e++)t.shapes.push(i[e].uuid);else t.shapes.push(i.uuid);return t}(this.parameters.shapes,t)}static fromJSON(t,e){const n=[];for(let r=0,s=t.shapes.length;r<s;r++)n.push(e[t.shapes[r]]);return new $y(n,t.curveSegments)}}class ad extends pt{constructor(t=1,e=32,n=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let c=0;const d=[],u=new C,h=new C,f=[],m=[],_=[],p=[];for(let g=0;g<=n;g++){const b=[],v=g/n;let y=0;0===g&&0===o?y=.5/e:g===n&&l===Math.PI&&(y=-.5/e);for(let T=0;T<=e;T++){const w=T/e;u.x=-t*Math.cos(r+w*s)*Math.sin(o+v*a),u.y=t*Math.cos(o+v*a),u.z=t*Math.sin(r+w*s)*Math.sin(o+v*a),m.push(u.x,u.y,u.z),h.copy(u).normalize(),_.push(h.x,h.y,h.z),p.push(w+y,1-v),b.push(c++)}d.push(b)}for(let g=0;g<n;g++)for(let b=0;b<e;b++){const y=d[g][b],T=d[g+1][b],w=d[g+1][b+1];(0!==g||o>0)&&f.push(d[g][b+1],y,w),(g!==n-1||l<Math.PI)&&f.push(y,T,w)}this.setIndex(f),this.setAttribute("position",new qe(m,3)),this.setAttribute("normal",new qe(_,3)),this.setAttribute("uv",new qe(p,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ad(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Xy extends Na{constructor(t=1,e=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Xy(t.radius,t.detail)}}class Ba extends pt{constructor(t=1,e=.4,n=12,r=48,s=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],l=[],c=[],d=new C,u=new C,h=new C;for(let f=0;f<=n;f++)for(let m=0;m<=r;m++){const _=m/r*s,p=f/n*Math.PI*2;u.x=(t+e*Math.cos(p))*Math.cos(_),u.y=(t+e*Math.cos(p))*Math.sin(_),u.z=e*Math.sin(p),a.push(u.x,u.y,u.z),d.x=t*Math.cos(_),d.y=t*Math.sin(_),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(m/r),c.push(f/n)}for(let f=1;f<=n;f++)for(let m=1;m<=r;m++){const p=(r+1)*(f-1)+m-1,g=(r+1)*(f-1)+m,b=(r+1)*f+m;o.push((r+1)*f+m-1,p,b),o.push(p,g,b)}this.setIndex(o),this.setAttribute("position",new qe(a,3)),this.setAttribute("normal",new qe(l,3)),this.setAttribute("uv",new qe(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ba(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class qy extends pt{constructor(t=1,e=.4,n=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:s,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],l=[],c=[],d=[],u=new C,h=new C,f=new C,m=new C,_=new C,p=new C,g=new C;for(let v=0;v<=n;++v){const y=v/n*s*Math.PI*2;b(y,s,o,t,f),b(y+.01,s,o,t,m),p.subVectors(m,f),g.addVectors(m,f),_.crossVectors(p,g),g.crossVectors(_,p),_.normalize(),g.normalize();for(let T=0;T<=r;++T){const w=T/r*Math.PI*2,M=-e*Math.cos(w),D=e*Math.sin(w);u.x=f.x+(M*g.x+D*_.x),u.y=f.y+(M*g.y+D*_.y),u.z=f.z+(M*g.z+D*_.z),l.push(u.x,u.y,u.z),h.subVectors(u,f).normalize(),c.push(h.x,h.y,h.z),d.push(v/n),d.push(T/r)}}for(let v=1;v<=n;v++)for(let y=1;y<=r;y++){const w=(r+1)*v+(y-1),M=(r+1)*v+y,D=(r+1)*(v-1)+y;a.push((r+1)*(v-1)+(y-1),w,D),a.push(w,M,D)}function b(v,y,T,w,M){const D=Math.cos(v),S=Math.sin(v),x=T/y*v,k=Math.cos(x);M.x=w*(2+k)*.5*D,M.y=w*(2+k)*S*.5,M.z=w*Math.sin(x)*.5}this.setIndex(a),this.setAttribute("position",new qe(l,3)),this.setAttribute("normal",new qe(c,3)),this.setAttribute("uv",new qe(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new qy(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class Yy extends pt{constructor(t=new pE(new C(-1,-1,0),new C(-1,1,0),new C(1,1,0)),e=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:s};const o=t.computeFrenetFrames(e,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new C,l=new C,c=new $;let d=new C;const u=[],h=[],f=[],m=[];function p(v){d=t.getPointAt(v/e,d);const y=o.normals[v],T=o.binormals[v];for(let w=0;w<=r;w++){const M=w/r*Math.PI*2,D=Math.sin(M),S=-Math.cos(M);l.x=S*y.x+D*T.x,l.y=S*y.y+D*T.y,l.z=S*y.z+D*T.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=d.x+n*l.x,a.y=d.y+n*l.y,a.z=d.z+n*l.z,u.push(a.x,a.y,a.z)}}(function _(){for(let v=0;v<e;v++)p(v);p(!1===s?e:0),function b(){for(let v=0;v<=e;v++)for(let y=0;y<=r;y++)c.x=v/e,c.y=y/r,f.push(c.x,c.y)}(),function g(){for(let v=1;v<=e;v++)for(let y=1;y<=r;y++){const w=(r+1)*v+(y-1),M=(r+1)*v+y,D=(r+1)*(v-1)+y;m.push((r+1)*(v-1)+(y-1),w,D),m.push(w,M,D)}}()})(),this.setIndex(m),this.setAttribute("position",new qe(u,3)),this.setAttribute("normal",new qe(h,3)),this.setAttribute("uv",new qe(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new Yy((new ky[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class bV extends pt{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},null!==t){const e=[],n=new Set,r=new C,s=new C;if(null!==t.index){const o=t.attributes.position,a=t.index;let l=t.groups;0===l.length&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,d=l.length;c<d;++c){const u=l[c],h=u.start;for(let m=h,_=h+u.count;m<_;m+=3)for(let p=0;p<3;p++){const g=a.getX(m+p),b=a.getX(m+(p+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,b),!0===vV(r,s,n)&&(e.push(r.x,r.y,r.z),e.push(s.x,s.y,s.z))}}}else{const o=t.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+(c+1)%3;r.fromBufferAttribute(o,3*a+c),s.fromBufferAttribute(o,u),!0===vV(r,s,n)&&(e.push(r.x,r.y,r.z),e.push(s.x,s.y,s.z))}}this.setAttribute("position",new qe(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function vV(i,t,e){const n=`${i.x},${i.y},${i.z}-${t.x},${t.y},${t.z}`,r=`${t.x},${t.y},${t.z}-${i.x},${i.y},${i.z}`;return!0!==e.has(n)&&!0!==e.has(r)&&(e.add(n),e.add(r),!0)}var yV=Object.freeze({__proto__:null,BoxGeometry:Ki,CapsuleGeometry:Fy,CircleGeometry:Ly,ConeGeometry:Oy,CylinderGeometry:On,DodecahedronGeometry:Ny,EdgesGeometry:uV,ExtrudeGeometry:Gy,IcosahedronGeometry:zp,LatheGeometry:jp,OctahedronGeometry:ja,PlaneGeometry:Dl,PolyhedronGeometry:Na,RingGeometry:Wy,ShapeGeometry:$y,SphereGeometry:ad,TetrahedronGeometry:Xy,TorusGeometry:Ba,TorusKnotGeometry:qy,TubeGeometry:Yy,WireframeGeometry:bV});class xV extends kn{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Te(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class wV extends ei{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class ta extends kn{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Te(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tl,this.normalScale=new $(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Bs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Hs extends ta{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new $(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return pn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Te(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Te(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Te(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class yE extends kn{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Te(16777215),this.specular=new Te(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tl,this.normalScale=new $(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Bs,this.combine=np,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class TV extends kn{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Te(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tl,this.normalScale=new $(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class Hp extends kn{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tl,this.normalScale=new $(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class MV extends kn{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Te(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tl,this.normalScale=new $(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Bs,this.combine=np,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class SV extends kn{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Te(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tl,this.normalScale=new $(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class RV extends Ln{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function ld(i,t,e){return!i||!e&&i.constructor===t?i:"number"==typeof t.BYTES_PER_ELEMENT?new t(i):Array.prototype.slice.call(i)}function CV(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function EV(i){const e=i.length,n=new Array(e);for(let r=0;r!==e;++r)n[r]=r;return n.sort(function t(r,s){return i[r]-i[s]}),n}function xE(i,t,e){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const a=e[s]*t;for(let l=0;l!==t;++l)r[o++]=i[a+l]}return r}function wE(i,t,e,n){let r=1,s=i[0];for(;void 0!==s&&void 0===s[n];)s=i[r++];if(void 0===s)return;let o=s[n];if(void 0!==o)if(Array.isArray(o))do{o=s[n],void 0!==o&&(t.push(s.time),e.push.apply(e,o)),s=i[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[n],void 0!==o&&(t.push(s.time),o.toArray(e,e.length)),s=i[r++]}while(void 0!==s);else do{o=s[n],void 0!==o&&(t.push(s.time),e.push(o)),s=i[r++]}while(void 0!==s)}const fue={convertArray:ld,isTypedArray:CV,getKeyframeOrder:EV,sortedArray:xE,flattenJSON:wE,subclip:function uue(i,t,e,n,r=30){const s=i.clone();s.name=t;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],d=c.getValueSize(),u=[],h=[];for(let f=0;f<c.times.length;++f){const m=c.times[f]*r;if(!(m<e||m>=n)){u.push(c.times[f]);for(let _=0;_<d;++_)h.push(c.values[f*d+_])}}0!==u.length&&(c.times=ld(u,c.times.constructor),c.values=ld(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function hue(i,t=0,e=i,n=30){n<=0&&(n=30);const r=e.tracks.length,s=t/n;for(let o=0;o<r;++o){const a=e.tracks[o],l=a.ValueTypeName;if("bool"===l||"string"===l)continue;const c=i.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(void 0===c)continue;let d=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=u/3);let h=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const m=a.times.length-1;let _;if(s<=a.times[0])_=a.values.slice(d,u-d);else if(s>=a.times[m]){const g=m*u+d;_=a.values.slice(g,g+u-d)}else{const g=a.createInterpolant(),b=d,v=u-d;g.evaluate(s),_=g.resultBuffer.slice(b,v)}"quaternion"===l&&(new mi).fromArray(_).normalize().conjugate().toArray(_);const p=c.times.length;for(let g=0;g<p;++g){const b=g*f+h;if("quaternion"===l)mi.multiplyQuaternionsFlat(c.values,b,_,0,c.values,b);else{const v=f-2*h;for(let y=0;y<v;++y)c.values[b+y]-=_[y]}}}return i.blendMode=dC,i}};class Xh{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],s=e[n-1];e:{t:{let o;i:{n:if(!(t<r)){for(let a=n+2;;){if(void 0===r){if(t<s)break n;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=r,r=e[++n],t<r)break t}o=e.length;break i}if(t>=s)break e;{const a=e[1];t<a&&(n=2,s=a);for(let l=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=e[--n-1],t>=s)break t}o=n,n=0}}for(;n<o;){const a=n+o>>>1;t<e[a]?o=a:n=a+1}if(r=e[n],s=e[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=t*r;for(let o=0;o!==r;++o)e[o]=n[s+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class AV extends Xh{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Hc,endingEnd:Hc}}intervalChanged_(t,e,n){const r=this.parameterPositions;let s=t-2,o=t+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Gc:s=t,a=2*e-n;break;case ap:s=r.length-2,a=e+r[s]-r[s+1];break;default:s=t,a=n}if(void 0===l)switch(this.getSettings_().endingEnd){case Gc:o=t,l=2*n-e;break;case ap:o=1,l=n+r[1]-r[0];break;default:o=t-1,l=e}const c=.5*(n-e),d=this.valueSize;this._weightPrev=c/(e-a),this._weightNext=c/(l-n),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,d=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,f=this._weightNext,m=(n-e)/(r-e),_=m*m,p=_*m,g=-h*p+2*h*_-h*m,b=(1+h)*p+(-1.5-2*h)*_+(-.5+h)*m+1,v=(-1-f)*p+(1.5+f)*_+.5*m,y=f*p-f*_;for(let T=0;T!==a;++T)s[T]=g*o[d+T]+b*o[c+T]+v*o[l+T]+y*o[u+T];return s}}class TE extends Xh{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,d=(n-e)/(r-e),u=1-d;for(let h=0;h!==a;++h)s[h]=o[c+h]*u+o[l+h]*d;return s}}class DV extends Xh{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class wo{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=ld(e,this.TimeBufferType),this.values=ld(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:ld(t.times,Array),values:ld(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(n.interpolation=r)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new DV(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new TE(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new AV(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case gh:e=this.InterpolantFactoryMethodDiscrete;break;case zc:e=this.InterpolantFactoryMethodLinear;break;case Ov:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return gh;case this.InterpolantFactoryMethodLinear:return zc;case this.InterpolantFactoryMethodSmooth:return Ov}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<t;)++s;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),t=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),t=!1;break}o=l}if(void 0!==r&&CV(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===Ov,s=t.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=t[a];if(c!==t[a+1]&&(1!==a||c!==t[0]))if(r)l=!0;else{const u=a*n,h=u-n,f=u+n;for(let m=0;m!==n;++m){const _=e[u+m];if(_!==e[h+m]||_!==e[f+m]){l=!0;break}}}if(l){if(a!==o){t[o]=t[a];const u=a*n,h=o*n;for(let f=0;f!==n;++f)e[h+f]=e[u+f]}++o}}if(s>0){t[o]=t[s];for(let a=s*n,l=o*n,c=0;c!==n;++c)e[l+c]=e[a+c];++o}return o!==t.length?(this.times=t.slice(0,o),this.values=e.slice(0,o*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}wo.prototype.TimeBufferType=Float32Array,wo.prototype.ValueBufferType=Float32Array,wo.prototype.DefaultInterpolation=zc;class cd extends wo{}cd.prototype.ValueTypeName="bool",cd.prototype.ValueBufferType=Array,cd.prototype.DefaultInterpolation=gh,cd.prototype.InterpolantFactoryMethodLinear=void 0,cd.prototype.InterpolantFactoryMethodSmooth=void 0;class ME extends wo{}ME.prototype.ValueTypeName="color";class dd extends wo{}dd.prototype.ValueTypeName="number";class IV extends Xh{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-e)/(r-e);let c=t*a;for(let d=c+a;c!==d;c+=4)mi.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Ll extends wo{InterpolantFactoryMethodLinear(t){return new IV(this.times,this.values,this.getValueSize(),t)}}Ll.prototype.ValueTypeName="quaternion",Ll.prototype.DefaultInterpolation=zc,Ll.prototype.InterpolantFactoryMethodSmooth=void 0;class ud extends wo{}ud.prototype.ValueTypeName="string",ud.prototype.ValueBufferType=Array,ud.prototype.DefaultInterpolation=gh,ud.prototype.InterpolantFactoryMethodLinear=void 0,ud.prototype.InterpolantFactoryMethodSmooth=void 0;class hd extends wo{}hd.prototype.ValueTypeName="vector";class qh{constructor(t="",e=-1,n=[],r=Nv){this.name=t,this.tracks=n,this.duration=e,this.blendMode=r,this.uuid=Ms(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let o=0,a=n.length;o!==a;++o)e.push(pue(n[o]).scale(r));const s=new this(t.name,t.duration,e,t.blendMode);return s.uuid=t.uuid,s}static toJSON(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let s=0,o=n.length;s!==o;++s)e.push(wo.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(t,e,n,r){const s=e.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const d=EV(l);l=xE(l,1,d),c=xE(c,1,d),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new dd(".morphTargetInfluences["+e[a].name+"]",l,c).scale(1/n))}return new this(t,-1,o)}static findByName(t,e){let n=t;Array.isArray(t)||(n=t.geometry&&t.geometry.animations||t.animations);for(let r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=t.length;a<l;a++){const c=t[a],d=c.name.match(s);if(d&&d.length>1){const u=d[1];let h=r[u];h||(r[u]=h=[]),h.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],e,n));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(u,h,f,m,_){if(0!==f.length){const p=[],g=[];wE(f,p,g,m),0!==p.length&&_.push(new u(h,p,g))}},r=[],s=t.name||"default",o=t.fps||30,a=t.blendMode;let l=t.length||-1;const c=t.hierarchy||[];for(let u=0;u<c.length;u++){const h=c[u].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let m;for(m=0;m<h.length;m++)if(h[m].morphTargets)for(let _=0;_<h[m].morphTargets.length;_++)f[h[m].morphTargets[_]]=-1;for(const _ in f){const p=[],g=[];for(let b=0;b!==h[m].morphTargets.length;++b){const v=h[m];p.push(v.time),g.push(v.morphTarget===_?1:0)}r.push(new dd(".morphTargetInfluence["+_+"]",p,g))}l=f.length*o}else{const f=".bones["+e[u].name+"]";n(hd,f+".position",h,"pos",r),n(Ll,f+".quaternion",h,"rot",r),n(hd,f+".scale",h,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let e=0;for(let n=0,r=this.tracks.length;n!==r;++n){const s=this.tracks[n];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function pue(i){if(void 0===i.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function mue(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return dd;case"vector":case"vector2":case"vector3":case"vector4":return hd;case"color":return ME;case"quaternion":return Ll;case"bool":case"boolean":return cd;case"string":return ud}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}(i.type);if(void 0===i.times){const e=[],n=[];wE(i.keys,e,n,"value"),i.times=e,i.values=n}return void 0!==t.parse?t.parse(i):new t(i.name,i.times,i.values,i.interpolation)}const Ua={enabled:!1,files:{},add:function(i,t){!1!==this.enabled&&(this.files[i]=t)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class SE{constructor(t,e,n){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(d){a++,!1===s&&void 0!==r.onStart&&r.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,void 0!==r.onProgress&&r.onProgress(d,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(d){void 0!==r.onError&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,u){return c.push(d,u),this},this.removeHandler=function(d){const u=c.indexOf(d);return-1!==u&&c.splice(u,2),this},this.getHandler=function(d){for(let u=0,h=c.length;u<h;u+=2){const f=c[u],m=c[u+1];if(f.global&&(f.lastIndex=0),f.test(d))return m}return null}}}const PV=new SE;let Tr=(()=>{class i{constructor(e){this.manager=void 0!==e?e:PV,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(s,o){r.load(e,s,n,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}return i.DEFAULT_MATERIAL_NAME="__DEFAULT",i})();const Va={};class gue extends Error{constructor(t,e){super(t),this.response=e}}class rs extends Tr{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=Ua.get(t);if(void 0!==s)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(void 0!==Va[t])return void Va[t].push({onLoad:e,onProgress:n,onError:r});Va[t]=[],Va[t].push({onLoad:e,onProgress:n,onError:r});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===c.body||void 0===c.body.getReader)return c;const d=Va[t],u=c.body.getReader(),h=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),f=h?parseInt(h):0,m=0!==f;let _=0;const p=new ReadableStream({start(g){!function b(){u.read().then(({done:v,value:y})=>{if(v)g.close();else{_+=y.byteLength;const T=new ProgressEvent("progress",{lengthComputable:m,loaded:_,total:f});for(let w=0,M=d.length;w<M;w++){const D=d[w];D.onProgress&&D.onProgress(T)}g.enqueue(y),b()}})}()}});return new Response(p)}throw new gue(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>(new DOMParser).parseFromString(d,a));case"json":return c.json();default:if(void 0===a)return c.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),h=u&&u[1]?u[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(m=>f.decode(m))}}}).then(c=>{Ua.add(t,c);const d=Va[t];delete Va[t];for(let u=0,h=d.length;u<h;u++){const f=d[u];f.onLoad&&f.onLoad(c)}}).catch(c=>{const d=Va[t];if(void 0===d)throw this.manager.itemError(t),c;delete Va[t];for(let u=0,h=d.length;u<h;u++){const f=d[u];f.onError&&f.onError(c)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class _ue extends Tr{constructor(t){super(t)}load(t,e,n,r){const s=this,o=new rs(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(a){try{e(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(t)}},n,r)}parse(t){const e=[];for(let n=0;n<t.length;n++){const r=qh.parse(t[n]);e.push(r)}return e}}class bue extends Tr{constructor(t){super(t)}load(t,e,n,r){const s=this,o=[],a=new Iy,l=new rs(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function d(u){l.load(t[u],function(h){const f=s.parse(h,!0);o[u]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},c+=1,6===c&&(1===f.mipmapCount&&(a.minFilter=fn),a.image=o,a.format=f.format,a.needsUpdate=!0,e&&e(a))},n,r)}if(Array.isArray(t))for(let u=0,h=t.length;u<h;++u)d(u);else l.load(t,function(u){const h=s.parse(u,!0);if(h.isCubemap){const f=h.mipmaps.length/h.mipmapCount;for(let m=0;m<f;m++){o[m]={mipmaps:[]};for(let _=0;_<h.mipmapCount;_++)o[m].mipmaps.push(h.mipmaps[m*h.mipmapCount+_]),o[m].format=h.format,o[m].width=h.width,o[m].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;1===h.mipmapCount&&(a.minFilter=fn),a.format=h.format,a.needsUpdate=!0,e&&e(a)},n,r);return a}}class Gp extends Tr{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,o=Ua.get(t);if(void 0!==o)return s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o;const a=pp("img");function l(){d(),Ua.add(t,this),e&&e(this),s.manager.itemEnd(t)}function c(u){d(),r&&r(u),s.manager.itemError(t),s.manager.itemEnd(t)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(t),a.src=t,a}}class vue extends Tr{constructor(t){super(t)}load(t,e,n,r){const s=new wp;s.colorSpace=qn;const o=new Gp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(t[c],function(d){s.images[c]=d,a++,6===a&&(s.needsUpdate=!0,e&&e(s))},void 0,r)}for(let c=0;c<t.length;++c)l(c);return s}}class yue extends Tr{constructor(t){super(t)}load(t,e,n,r){const s=this,o=new Jo,a=new rs(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(t,function(l){let c;try{c=s.parse(l)}catch(d){if(void 0===r)return void console.error(d);r(d)}void 0!==c.image?o.image=c.image:void 0!==c.data&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=void 0!==c.wrapS?c.wrapS:ws,o.wrapT=void 0!==c.wrapT?c.wrapT:ws,o.magFilter=void 0!==c.magFilter?c.magFilter:fn,o.minFilter=void 0!==c.minFilter?c.minFilter:fn,o.anisotropy=void 0!==c.anisotropy?c.anisotropy:1,void 0!==c.colorSpace&&(o.colorSpace=c.colorSpace),void 0!==c.flipY&&(o.flipY=c.flipY),void 0!==c.format&&(o.format=c.format),void 0!==c.type&&(o.type=c.type),void 0!==c.mipmaps&&(o.mipmaps=c.mipmaps,o.minFilter=js),1===c.mipmapCount&&(o.minFilter=fn),void 0!==c.generateMipmaps&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,e&&e(o,c)},n,r),o}}class kV extends Tr{constructor(t){super(t)}load(t,e,n,r){const s=new Sn,o=new Gp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(a){s.image=a,s.needsUpdate=!0,void 0!==e&&e(s)},n,r),s}}class Ol extends Nt{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Te(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}class RE extends Ol{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Nt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Te(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const CE=new je,FV=new C,LV=new C;class EE{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new $(512,512),this.map=null,this.mapPass=null,this.matrix=new je,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Tp,this._frameExtents=new $(1,1),this._viewportCount=1,this._viewports=[new fi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;FV.setFromMatrixPosition(t.matrixWorld),e.position.copy(FV),LV.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(LV),e.updateMatrixWorld(),CE.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(CE),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(CE)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class xue extends EE{constructor(){super(new Cn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*_h*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(n!==e.fov||r!==e.aspect||s!==e.far)&&(e.fov=n,e.aspect=r,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class AE extends Ol{constructor(t,e,n=0,r=Math.PI/3,s=0,o=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Nt.DEFAULT_UP),this.updateMatrix(),this.target=new Nt,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new xue}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const OV=new je,Wp=new C,DE=new C;class wue extends EE{constructor(){super(new Cn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new $(4,2),this._viewportCount=6,this._viewports=[new fi(2,1,1,1),new fi(0,1,1,1),new fi(3,1,1,1),new fi(1,1,1,1),new fi(3,0,1,1),new fi(1,0,1,1)],this._cubeDirections=[new C(1,0,0),new C(-1,0,0),new C(0,0,1),new C(0,0,-1),new C(0,1,0),new C(0,-1,0)],this._cubeUps=[new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,0,1),new C(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,r=this.matrix,s=t.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Wp.setFromMatrixPosition(t.matrixWorld),n.position.copy(Wp),DE.copy(n.position),DE.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(DE),n.updateMatrixWorld(),r.makeTranslation(-Wp.x,-Wp.y,-Wp.z),OV.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(OV)}}class Zy extends Ol{constructor(t,e,n=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new wue}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Tue extends EE{constructor(){super(new Il(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Ky extends Ol{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Nt.DEFAULT_UP),this.updateMatrix(),this.target=new Nt,this.shadow=new Tue}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class IE extends Ol{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class NV extends Ol{constructor(t,e,n=10,r=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class jV{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new C)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,r=t.y,s=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*r),e.addScaledVector(o[2],.488603*s),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*r*1.092548),e.addScaledVector(o[5],r*s*1.092548),e.addScaledVector(o[6],.315392*(3*s*s-1)),e.addScaledVector(o[7],n*s*1.092548),e.addScaledVector(o[8],.546274*(n*n-r*r)),e}getIrradianceAt(t,e){const n=t.x,r=t.y,s=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*r),e.addScaledVector(o[2],1.023328*s),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*r),e.addScaledVector(o[5],.858086*r*s),e.addScaledVector(o[6],.743125*s*s-.247708),e.addScaledVector(o[7],.858086*n*s),e.addScaledVector(o[8],.429043*(n*n-r*r)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this}toArray(t=[],e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}static getBasisAt(t,e){const n=t.x,r=t.y,s=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*s,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*s,e[6]=.315392*(3*s*s-1),e[7]=1.092548*n*s,e[8]=.546274*(n*n-r*r)}}class BV extends Ol{constructor(t=new jV,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class Qy extends Tr{constructor(t){super(t),this.textures={}}load(t,e,n,r){const s=this,o=new rs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(t,function(a){try{e(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(t)}},n,r)}parse(t){const e=this.textures;function n(s){return void 0===e[s]&&console.warn("THREE.MaterialLoader: Undefined texture",s),e[s]}const r=Qy.createMaterialFromType(t.type);if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&void 0!==r.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.sheen&&(r.sheen=t.sheen),void 0!==t.sheenColor&&(r.sheenColor=(new Te).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(r.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==r.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==r.specular&&r.specular.setHex(t.specular),void 0!==t.specularIntensity&&(r.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearcoat&&(r.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(r.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.dispersion&&(r.dispersion=t.dispersion),void 0!==t.iridescence&&(r.iridescence=t.iridescence),void 0!==t.iridescenceIOR&&(r.iridescenceIOR=t.iridescenceIOR),void 0!==t.iridescenceThicknessRange&&(r.iridescenceThicknessRange=t.iridescenceThicknessRange),void 0!==t.transmission&&(r.transmission=t.transmission),void 0!==t.thickness&&(r.thickness=t.thickness),void 0!==t.attenuationDistance&&(r.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(t.attenuationColor),void 0!==t.anisotropy&&(r.anisotropy=t.anisotropy),void 0!==t.anisotropyRotation&&(r.anisotropyRotation=t.anisotropyRotation),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.shadowSide&&(r.shadowSide=t.shadowSide),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.alphaHash&&(r.alphaHash=t.alphaHash),void 0!==t.depthFunc&&(r.depthFunc=t.depthFunc),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.blendSrc&&(r.blendSrc=t.blendSrc),void 0!==t.blendDst&&(r.blendDst=t.blendDst),void 0!==t.blendEquation&&(r.blendEquation=t.blendEquation),void 0!==t.blendSrcAlpha&&(r.blendSrcAlpha=t.blendSrcAlpha),void 0!==t.blendDstAlpha&&(r.blendDstAlpha=t.blendDstAlpha),void 0!==t.blendEquationAlpha&&(r.blendEquationAlpha=t.blendEquationAlpha),void 0!==t.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(t.blendColor),void 0!==t.blendAlpha&&(r.blendAlpha=t.blendAlpha),void 0!==t.stencilWriteMask&&(r.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(r.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(r.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(r.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(r.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(r.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(r.stencilZPass=t.stencilZPass),void 0!==t.stencilWrite&&(r.stencilWrite=t.stencilWrite),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),void 0!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.alphaToCoverage&&(r.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(r.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.forceSinglePass&&(r.forceSinglePass=t.forceSinglePass),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.toneMapped&&(r.toneMapped=t.toneMapped),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.vertexColors&&(r.vertexColors="number"==typeof t.vertexColors?t.vertexColors>0:t.vertexColors),void 0!==t.uniforms)for(const s in t.uniforms){const o=t.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=n(o.value);break;case"c":r.uniforms[s].value=(new Te).setHex(o.value);break;case"v2":r.uniforms[s].value=(new $).fromArray(o.value);break;case"v3":r.uniforms[s].value=(new C).fromArray(o.value);break;case"v4":r.uniforms[s].value=(new fi).fromArray(o.value);break;case"m3":r.uniforms[s].value=(new Bt).fromArray(o.value);break;case"m4":r.uniforms[s].value=(new je).fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.glslVersion&&(r.glslVersion=t.glslVersion),void 0!==t.extensions)for(const s in t.extensions)r.extensions[s]=t.extensions[s];if(void 0!==t.lights&&(r.lights=t.lights),void 0!==t.clipping&&(r.clipping=t.clipping),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.matcap&&(r.matcap=n(t.matcap)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){let s=t.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new $).fromArray(s)}return void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.specularIntensityMap&&(r.specularIntensityMap=n(t.specularIntensityMap)),void 0!==t.specularColorMap&&(r.specularColorMap=n(t.specularColorMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapRotation&&r.envMapRotation.fromArray(t.envMapRotation),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(r.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(r.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(r.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(r.clearcoatNormalScale=(new $).fromArray(t.clearcoatNormalScale)),void 0!==t.iridescenceMap&&(r.iridescenceMap=n(t.iridescenceMap)),void 0!==t.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),void 0!==t.transmissionMap&&(r.transmissionMap=n(t.transmissionMap)),void 0!==t.thicknessMap&&(r.thicknessMap=n(t.thicknessMap)),void 0!==t.anisotropyMap&&(r.anisotropyMap=n(t.anisotropyMap)),void 0!==t.sheenColorMap&&(r.sheenColorMap=n(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(r.sheenRoughnessMap=n(t.sheenRoughnessMap)),r}setTextures(t){return this.textures=t,this}static createMaterialFromType(t){return new{ShadowMaterial:xV,SpriteMaterial:ZC,RawShaderMaterial:wV,ShaderMaterial:ei,PointsMaterial:Ey,MeshPhysicalMaterial:Hs,MeshStandardMaterial:ta,MeshPhongMaterial:yE,MeshToonMaterial:TV,MeshNormalMaterial:Hp,MeshLambertMaterial:MV,MeshDepthMaterial:uy,MeshDistanceMaterial:XC,MeshBasicMaterial:Zn,MeshMatcapMaterial:SV,LineDashedMaterial:RV,LineBasicMaterial:Ln,Material:kn}[t]}}class Nl{static decodeText(t){if(typeof TextDecoder<"u")return(new TextDecoder).decode(t);let e="";for(let n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class UV extends pt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class VV extends Tr{constructor(t){super(t)}load(t,e,n,r){const s=this,o=new rs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(t,function(a){try{e(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(t)}},n,r)}parse(t){const e={},n={};function r(f,m){if(void 0!==e[m])return e[m];const p=f.interleavedBuffers[m],g=function s(f,m){if(void 0!==n[m])return n[m];const g=new Uint32Array(f.arrayBuffers[m]).buffer;return n[m]=g,g}(f,p.buffer),b=bh(p.type,g),v=new Rp(b,p.stride);return v.uuid=p.uuid,e[m]=v,v}const o=t.isInstancedBufferGeometry?new UV:new pt,a=t.data.index;if(void 0!==a){const f=bh(a.type,a.array);o.setIndex(new ui(f,1))}const l=t.data.attributes;for(const f in l){const m=l[f];let _;if(m.isInterleavedBufferAttribute){const p=r(t.data,m.data);_=new Pl(p,m.itemSize,m.offset,m.normalized)}else{const p=bh(m.type,m.array);_=new(m.isInstancedBufferAttribute?nd:ui)(p,m.itemSize,m.normalized)}void 0!==m.name&&(_.name=m.name),void 0!==m.usage&&_.setUsage(m.usage),o.setAttribute(f,_)}const c=t.data.morphAttributes;if(c)for(const f in c){const m=c[f],_=[];for(let p=0,g=m.length;p<g;p++){const b=m[p];let v;if(b.isInterleavedBufferAttribute){const y=r(t.data,b.data);v=new Pl(y,b.itemSize,b.offset,b.normalized)}else{const y=bh(b.type,b.array);v=new ui(y,b.itemSize,b.normalized)}void 0!==b.name&&(v.name=b.name),_.push(v)}o.morphAttributes[f]=_}t.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const u=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==u)for(let f=0,m=u.length;f!==m;++f){const _=u[f];o.addGroup(_.start,_.count,_.materialIndex)}const h=t.data.boundingSphere;if(void 0!==h){const f=new C;void 0!==h.center&&f.fromArray(h.center),o.boundingSphere=new nr(f,h.radius)}return t.name&&(o.name=t.name),t.userData&&(o.userData=t.userData),o}}class Mue extends Tr{constructor(t){super(t)}load(t,e,n,r){const s=this,o=""===this.path?Nl.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;const a=new rs(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(l){let c=null;try{c=JSON.parse(l)}catch(u){return void 0!==r&&r(u),void console.error("THREE:ObjectLoader: Can't parse "+t+".",u.message)}const d=c.metadata;if(void 0===d||void 0===d.type||"geometry"===d.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+t)),void console.error("THREE.ObjectLoader: Can't load "+t);s.parse(c,e)},n,r)}loadAsync(t,e){var n=this;return Si(function*(){const r=n,s=""===n.path?Nl.extractUrlBase(t):n.path;n.resourcePath=n.resourcePath||s;const o=new rs(n.manager);o.setPath(n.path),o.setRequestHeader(n.requestHeader),o.setWithCredentials(n.withCredentials);const a=yield o.loadAsync(t,e),l=JSON.parse(a),c=l.metadata;if(void 0===c||void 0===c.type||"geometry"===c.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+t);return yield r.parseAsync(l)})()}parse(t,e){const n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),s=this.parseGeometries(t.geometries,r),o=this.parseImages(t.images,function(){void 0!==e&&e(c)}),a=this.parseTextures(t.textures,o),l=this.parseMaterials(t.materials,a),c=this.parseObject(t.object,s,l,a,n),d=this.parseSkeletons(t.skeletons,c);if(this.bindSkeletons(c,d),void 0!==e){let u=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){u=!0;break}!1===u&&e(c)}return c}parseAsync(t){var e=this;return Si(function*(){const n=e.parseAnimations(t.animations),r=e.parseShapes(t.shapes),s=e.parseGeometries(t.geometries,r),o=yield e.parseImagesAsync(t.images),a=e.parseTextures(t.textures,o),l=e.parseMaterials(t.materials,a),c=e.parseObject(t.object,s,l,a,n),d=e.parseSkeletons(t.skeletons,c);return e.bindSkeletons(c,d),c})()}parseShapes(t){const e={};if(void 0!==t)for(let n=0,r=t.length;n<r;n++){const s=(new sd).fromJSON(t[n]);e[s.uuid]=s}return e}parseSkeletons(t,e){const n={},r={};if(e.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),void 0!==t)for(let s=0,o=t.length;s<o;s++){const a=(new Dp).fromJSON(t[s],r);n[a.uuid]=a}return n}parseGeometries(t,e){const n={};if(void 0!==t){const r=new VV;for(let s=0,o=t.length;s<o;s++){let a;const l=t[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in yV?a=yV[l.type].fromJSON(l,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,void 0!==l.name&&(a.name=l.name),void 0!==l.userData&&(a.userData=l.userData),n[l.uuid]=a}}return n}parseMaterials(t,e){const n={},r={};if(void 0!==t){const s=new Qy;s.setTextures(e);for(let o=0,a=t.length;o<a;o++){const l=t[o];void 0===n[l.uuid]&&(n[l.uuid]=s.parse(l)),r[l.uuid]=n[l.uuid]}}return r}parseAnimations(t){const e={};if(void 0!==t)for(let n=0;n<t.length;n++){const s=qh.parse(t[n]);e[s.uuid]=s}return e}parseImages(t,e){const n=this,r={};let s;function a(l){if("string"==typeof l){const c=l;return function o(l){return n.manager.itemStart(l),s.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:n.resourcePath+c)}return l.data?{data:bh(l.type,l.data),width:l.width,height:l.height}:null}if(void 0!==t&&t.length>0){const l=new SE(e);s=new Gp(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,d=t.length;c<d;c++){const u=t[c],h=u.url;if(Array.isArray(h)){const f=[];for(let m=0,_=h.length;m<_;m++){const g=a(h[m]);null!==g&&(g instanceof HTMLImageElement?f.push(g):f.push(new Jo(g.data,g.width,g.height)))}r[u.uuid]=new Xc(f)}else{const f=a(u.url);r[u.uuid]=new Xc(f)}}}return r}parseImagesAsync(t){var e=this;return Si(function*(){const n=e,r={};let s;function o(l){return a.apply(this,arguments)}function a(){return(a=Si(function*(l){if("string"==typeof l){const c=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:n.resourcePath+c;return yield s.loadAsync(d)}return l.data?{data:bh(l.type,l.data),width:l.width,height:l.height}:null})).apply(this,arguments)}if(void 0!==t&&t.length>0){s=new Gp(e.manager),s.setCrossOrigin(e.crossOrigin);for(let l=0,c=t.length;l<c;l++){const d=t[l],u=d.url;if(Array.isArray(u)){const h=[];for(let f=0,m=u.length;f<m;f++){const _=u[f],p=yield o(_);null!==p&&(p instanceof HTMLImageElement?h.push(p):h.push(new Jo(p.data,p.width,p.height)))}r[d.uuid]=new Xc(h)}else{const h=yield o(d.url);r[d.uuid]=new Xc(h)}}}return r})()}parseTextures(t,e){function n(s,o){return"number"==typeof s?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(void 0!==t)for(let s=0,o=t.length;s<o;s++){const a=t[s];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===e[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=e[a.image],c=l.data;let d;Array.isArray(c)?(d=new wp,6===c.length&&(d.needsUpdate=!0)):(d=c&&c.data?new Jo:new Sn,c&&(d.needsUpdate=!0)),d.source=l,d.uuid=a.uuid,void 0!==a.name&&(d.name=a.name),void 0!==a.mapping&&(d.mapping=n(a.mapping,Sue)),void 0!==a.channel&&(d.channel=a.channel),void 0!==a.offset&&d.offset.fromArray(a.offset),void 0!==a.repeat&&d.repeat.fromArray(a.repeat),void 0!==a.center&&d.center.fromArray(a.center),void 0!==a.rotation&&(d.rotation=a.rotation),void 0!==a.wrap&&(d.wrapS=n(a.wrap[0],zV),d.wrapT=n(a.wrap[1],zV)),void 0!==a.format&&(d.format=a.format),void 0!==a.internalFormat&&(d.internalFormat=a.internalFormat),void 0!==a.type&&(d.type=a.type),void 0!==a.colorSpace&&(d.colorSpace=a.colorSpace),void 0!==a.minFilter&&(d.minFilter=n(a.minFilter,HV)),void 0!==a.magFilter&&(d.magFilter=n(a.magFilter,HV)),void 0!==a.anisotropy&&(d.anisotropy=a.anisotropy),void 0!==a.flipY&&(d.flipY=a.flipY),void 0!==a.generateMipmaps&&(d.generateMipmaps=a.generateMipmaps),void 0!==a.premultiplyAlpha&&(d.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(d.unpackAlignment=a.unpackAlignment),void 0!==a.compareFunction&&(d.compareFunction=a.compareFunction),void 0!==a.userData&&(d.userData=a.userData),r[a.uuid]=d}return r}parseObject(t,e,n,r,s){let o,d,u;function a(h){return void 0===e[h]&&console.warn("THREE.ObjectLoader: Undefined geometry",h),e[h]}function l(h){if(void 0!==h){if(Array.isArray(h)){const f=[];for(let m=0,_=h.length;m<_;m++){const p=h[m];void 0===n[p]&&console.warn("THREE.ObjectLoader: Undefined material",p),f.push(n[p])}return f}return void 0===n[h]&&console.warn("THREE.ObjectLoader: Undefined material",h),n[h]}}function c(h){return void 0===r[h]&&console.warn("THREE.ObjectLoader: Undefined texture",h),r[h]}switch(t.type){case"Scene":o=new YC,void 0!==t.background&&(o.background=Number.isInteger(t.background)?new Te(t.background):c(t.background)),void 0!==t.environment&&(o.environment=c(t.environment)),void 0!==t.fog&&("Fog"===t.fog.type?o.fog=new Sp(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(o.fog=new fy(t.fog.color,t.fog.density)),""!==t.fog.name&&(o.fog.name=t.fog.name)),void 0!==t.backgroundBlurriness&&(o.backgroundBlurriness=t.backgroundBlurriness),void 0!==t.backgroundIntensity&&(o.backgroundIntensity=t.backgroundIntensity),void 0!==t.backgroundRotation&&o.backgroundRotation.fromArray(t.backgroundRotation),void 0!==t.environmentIntensity&&(o.environmentIntensity=t.environmentIntensity),void 0!==t.environmentRotation&&o.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":o=new Cn(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(o.focus=t.focus),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.filmGauge&&(o.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(o.filmOffset=t.filmOffset),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"OrthographicCamera":o=new Il(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"AmbientLight":o=new IE(t.color,t.intensity);break;case"DirectionalLight":o=new Ky(t.color,t.intensity);break;case"PointLight":o=new Zy(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":o=new NV(t.color,t.intensity,t.width,t.height);break;case"SpotLight":o=new AE(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":o=new RE(t.color,t.groundColor,t.intensity);break;case"LightProbe":o=(new BV).fromJSON(t);break;case"SkinnedMesh":d=a(t.geometry),u=l(t.material),o=new eE(d,u),void 0!==t.bindMode&&(o.bindMode=t.bindMode),void 0!==t.bindMatrix&&o.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(o.skeleton=t.skeleton);break;case"Mesh":d=a(t.geometry),u=l(t.material),o=new Be(d,u);break;case"InstancedMesh":d=a(t.geometry),u=l(t.material);const f=t.instanceMatrix,m=t.instanceColor;o=new xy(d,u,t.count),o.instanceMatrix=new nd(new Float32Array(f.array),16),void 0!==m&&(o.instanceColor=new nd(new Float32Array(m.array),m.itemSize));break;case"BatchedMesh":d=a(t.geometry),u=l(t.material),o=new QU(t.maxGeometryCount,t.maxVertexCount,t.maxIndexCount,u),o.geometry=d,o.perObjectFrustumCulled=t.perObjectFrustumCulled,o.sortObjects=t.sortObjects,o._drawRanges=t.drawRanges,o._reservedRanges=t.reservedRanges,o._visibility=t.visibility,o._active=t.active,o._bounds=t.bounds.map(_=>{const p=new ir;p.min.fromArray(_.boxMin),p.max.fromArray(_.boxMax);const g=new nr;return g.radius=_.sphereRadius,g.center.fromArray(_.sphereCenter),{boxInitialized:_.boxInitialized,box:p,sphereInitialized:_.sphereInitialized,sphere:g}}),o._maxGeometryCount=t.maxGeometryCount,o._maxVertexCount=t.maxVertexCount,o._maxIndexCount=t.maxIndexCount,o._geometryInitialized=t.geometryInitialized,o._geometryCount=t.geometryCount,o._matricesTexture=c(t.matricesTexture.uuid);break;case"LOD":o=new VU;break;case"Line":o=new En(a(t.geometry),l(t.material));break;case"LineLoop":o=new rE(a(t.geometry),l(t.material));break;case"LineSegments":o=new zs(a(t.geometry),l(t.material));break;case"PointCloud":case"Points":o=new oE(a(t.geometry),l(t.material));break;case"Sprite":o=new BU(l(t.material));break;case"Group":o=new yo;break;case"Bone":o=new vy;break;default:o=new Nt}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(o.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(o.matrixAutoUpdate=t.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.quaternion&&o.quaternion.fromArray(t.quaternion),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.up&&o.up.fromArray(t.up),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(o.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(o.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(o.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&o.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(o.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.frustumCulled&&(o.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(o.renderOrder=t.renderOrder),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.layers&&(o.layers.mask=t.layers),void 0!==t.children){const h=t.children;for(let f=0;f<h.length;f++)o.add(this.parseObject(h[f],e,n,r,s))}if(void 0!==t.animations){const h=t.animations;for(let f=0;f<h.length;f++)o.animations.push(s[h[f]])}if("LOD"===t.type){void 0!==t.autoUpdate&&(o.autoUpdate=t.autoUpdate);const h=t.levels;for(let f=0;f<h.length;f++){const m=h[f],_=o.getObjectByProperty("uuid",m.object);void 0!==_&&o.addLevel(_,m.distance,m.hysteresis)}}return o}bindSkeletons(t,e){0!==Object.keys(e).length&&t.traverse(function(n){if(!0===n.isSkinnedMesh&&void 0!==n.skeleton){const r=e[n.skeleton];void 0===r?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}}const Sue={UVMapping:Ev,CubeReflectionMapping:Ea,CubeRefractionMapping:yl,EquirectangularReflectionMapping:rp,EquirectangularRefractionMapping:sp,CubeUVReflectionMapping:fh},zV={RepeatWrapping:Ko,ClampToEdgeWrapping:ws,MirroredRepeatWrapping:mh},HV={NearestFilter:ci,NearestMipmapNearestFilter:Av,NearestMipmapLinearFilter:Bc,LinearFilter:fn,LinearMipmapNearestFilter:ph,LinearMipmapLinearFilter:js};class GV extends Tr{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,o=Ua.get(t);if(void 0!==o)return s.manager.itemStart(t),o.then?void o.then(c=>{e&&e(c),s.manager.itemEnd(t)}).catch(c=>{r&&r(c)}):(setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(t,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Ua.add(t,c),e&&e(c),s.manager.itemEnd(t),c}).catch(function(c){r&&r(c),Ua.remove(t),s.manager.itemError(t),s.manager.itemEnd(t)});Ua.add(t,l),s.manager.itemStart(t)}}let Jy;class PE{static getContext(){return void 0===Jy&&(Jy=new(window.AudioContext||window.webkitAudioContext)),Jy}static setContext(t){Jy=t}}class Rue extends Tr{constructor(t){super(t)}load(t,e,n,r){const s=this,o=new rs(this.manager);function a(l){r?r(l):console.error(l),s.manager.itemError(t)}o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(l){try{const c=l.slice(0);PE.getContext().decodeAudioData(c,function(u){e(u)}).catch(a)}catch(c){a(c)}},n,r)}}const WV=new je,$V=new je,fd=new je;class Cue{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Cn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Cn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,fd.copy(t.projectionMatrix);const r=e.eyeSep/2,s=r*e.near/e.focus,o=e.near*Math.tan($c*e.fov*.5)/e.zoom;let a,l;$V.elements[12]=-r,WV.elements[12]=r,a=-o*e.aspect+s,l=o*e.aspect+s,fd.elements[0]=2*e.near/(l-a),fd.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(fd),a=-o*e.aspect-s,l=o*e.aspect-s,fd.elements[0]=2*e.near/(l-a),fd.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(fd)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply($V),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(WV)}}class md{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=XV(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=XV();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function XV(){return(typeof performance>"u"?Date:performance).now()}const pd=new C,qV=new mi,Eue=new C,gd=new C;class Aue extends Nt{constructor(){super(),this.type="AudioListener",this.context=PE.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new md}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(pd,qV,Eue),gd.set(0,0,-1).applyQuaternion(qV),e.positionX){const r=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(pd.x,r),e.positionY.linearRampToValueAtTime(pd.y,r),e.positionZ.linearRampToValueAtTime(pd.z,r),e.forwardX.linearRampToValueAtTime(gd.x,r),e.forwardY.linearRampToValueAtTime(gd.y,r),e.forwardZ.linearRampToValueAtTime(gd.z,r),e.upX.linearRampToValueAtTime(n.x,r),e.upY.linearRampToValueAtTime(n.y,r),e.upZ.linearRampToValueAtTime(n.z,r)}else e.setPosition(pd.x,pd.y,pd.z),e.setOrientation(gd.x,gd.y,gd.z,n.x,n.y,n.z)}}class YV extends Nt{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const _d=new C,ZV=new mi,Due=new C,bd=new C;class Iue extends YV{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(_d,ZV,Due),bd.set(0,0,1).applyQuaternion(ZV);const e=this.panner;if(e.positionX){const n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(_d.x,n),e.positionY.linearRampToValueAtTime(_d.y,n),e.positionZ.linearRampToValueAtTime(_d.z,n),e.orientationX.linearRampToValueAtTime(bd.x,n),e.orientationY.linearRampToValueAtTime(bd.y,n),e.orientationZ.linearRampToValueAtTime(bd.z,n)}else e.setPosition(_d.x,_d.y,_d.z),e.setOrientation(bd.x,bd.y,bd.z)}}class Pue{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}class KV{constructor(t,e,n){let r,s,o;switch(this.binding=t,this.valueSize=n,e){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,r=this.valueSize,s=t*r+r;let o=this.cumulativeWeight;if(0===o){for(let a=0;a!==r;++a)n[s+a]=n[a];o=e}else o+=e,this._mixBufferRegion(n,s,0,e/o,r);this.cumulativeWeight=o}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,r=t*e+e,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1&&this._mixBufferRegion(n,r,e*this._origIndex,1-s,e),o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(let l=e,c=e+e;l!==c;++l)if(n[l]!==n[l+e]){a.setValue(n,r);break}}saveOriginalState(){const e=this.buffer,n=this.valueSize,r=n*this._origIndex;this.binding.getValue(e,r);for(let s=n,o=r;s!==o;++s)e[s]=e[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,r,s){if(r>=.5)for(let o=0;o!==s;++o)t[e+o]=t[n+o]}_slerp(t,e,n,r){mi.slerpFlat(t,e,t,e,t,n,r)}_slerpAdditive(t,e,n,r,s){const o=this._workIndex*s;mi.multiplyQuaternionsFlat(t,o,t,e,t,n),mi.slerpFlat(t,e,t,e,t,o,r)}_lerp(t,e,n,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=e+a;t[l]=t[l]*o+t[n+a]*r}}_lerpAdditive(t,e,n,r,s){for(let o=0;o!==s;++o){const a=e+o;t[a]=t[a]+t[n+o]*r}}}const kE="\\[\\]\\.:\\/",kue=new RegExp("["+kE+"]","g"),FE="[^"+kE+"]",Fue="[^"+kE.replace("\\.","")+"]",Bue=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",FE)+/(WCOD+)?/.source.replace("WCOD",Fue)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",FE)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",FE)+"$"),Uue=["material","materials","bones","map"];class Vue{constructor(t,e,n){const r=n||Fi.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}let Fi=(()=>{class i{constructor(e,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new i.Composite(e,n,r):new i(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(kue,"")}static parseTrackName(e){const n=Bue.exec(e);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==Uue.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(void 0===n||""===n||"."===n||-1===n||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(void 0!==r)return r}if(e.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===n||l.uuid===n)return l;const c=r(l.children);if(c)return c}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)e[n++]=r[s]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(e||(e=i.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let d=n.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===d){d=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==d){if(void 0===e[d])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[d]}}const a=e[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",e);let l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=Vue,i})();Fi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Fi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Fi.prototype.GetterByBindingType=[Fi.prototype._getValue_direct,Fi.prototype._getValue_array,Fi.prototype._getValue_arrayElement,Fi.prototype._getValue_toArray],Fi.prototype.SetterByBindingTypeAndVersioning=[[Fi.prototype._setValue_direct,Fi.prototype._setValue_direct_setNeedsUpdate,Fi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Fi.prototype._setValue_array,Fi.prototype._setValue_array_setNeedsUpdate,Fi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Fi.prototype._setValue_arrayElement,Fi.prototype._setValue_arrayElement_setNeedsUpdate,Fi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Fi.prototype._setValue_fromArray,Fi.prototype._setValue_fromArray_setNeedsUpdate,Fi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class zue{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ms(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=t.length,c=this.nCachedObjects_;for(let d=0,u=arguments.length;d!==u;++d){const h=arguments[d],f=h.uuid;let m=e[f];if(void 0===m){m=l++,e[f]=m,t.push(h);for(let _=0,p=o;_!==p;++_)s[_].push(new Fi(h,n[_],r[_]))}else if(m<c){a=t[m];const _=--c,p=t[_];e[p.uuid]=m,t[m]=p,e[f]=_,t[_]=h;for(let g=0,b=o;g!==b;++g){const v=s[g];let T=v[m];v[m]=v[_],void 0===T&&(T=new Fi(h,n[g],r[g])),v[_]=T}}else t[m]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,d=e[c];if(void 0!==d&&d>=s){const u=s++,h=t[u];e[h.uuid]=d,t[d]=h,e[c]=u,t[u]=l;for(let f=0,m=r;f!==m;++f){const _=n[f],g=_[d];_[d]=_[u],_[u]=g}}}this.nCachedObjects_=s}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_,o=t.length;for(let a=0,l=arguments.length;a!==l;++a){const d=arguments[a].uuid,u=e[d];if(void 0!==u)if(delete e[d],u<s){const h=--s,f=t[h],m=--o,_=t[m];e[f.uuid]=u,t[u]=f,e[_.uuid]=h,t[h]=_,t.pop();for(let p=0,g=r;p!==g;++p){const b=n[p],y=b[m];b[u]=b[h],b[h]=y,b.pop()}}else{const h=--o,f=t[h];h>0&&(e[f.uuid]=u),t[u]=f,t.pop();for(let m=0,_=r;m!==_;++m){const p=n[m];p[u]=p[h],p.pop()}}}this.nCachedObjects_=s}subscribe_(t,e){const n=this._bindingsIndicesByPath;let r=n[t];const s=this._bindings;if(void 0!==r)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,d=this.nCachedObjects_,u=new Array(l.length);r=s.length,n[t]=r,o.push(t),a.push(e),s.push(u);for(let h=d,f=l.length;h!==f;++h)u[h]=new Fi(l[h],t,e);return u}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a];e[t[a]]=n,o[n]=l,o.pop(),s[n]=s[a],s.pop(),r[n]=r[a],r.pop()}}}class QV{constructor(t,e,n=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=r;const s=e.tracks,o=s.length,a=new Array(o),l={endingStart:Hc,endingEnd:Hc};for(let c=0;c!==o;++c){const d=s[c].createInterpolant(null);a[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=y3,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const r=this._clip.duration,s=t._clip.duration,a=r/s;t.warp(1,s/r,e),this.warp(a,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+n,c[0]=t/o,c[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,r){if(!this.enabled)return void this._updateWeight(t);const s=this._startTime;if(null!==s){const l=(t-s)*n;l<0||0===n?e=0:(this._startTime=null,e=n*l)}e*=this._updateTimeScale(t);const o=this._updateTime(e),a=this._updateWeight(t);if(a>0){const l=this._interpolants,c=this._propertyBindings;if(this.blendMode===dC)for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(o),c[d].accumulateAdditive(a);else for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(o),c[d].accumulate(r,a)}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let r=this.time+t,s=this._loopCount;const o=n===x3;if(0===t)return-1===s||!o||1&~s?r:e-r;if(n===cC){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===s&&(t>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=e||r<0){const a=Math.floor(r/e);r-=e*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===l){const c=t<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&!(1&~s))return e-r}return r}_setEndings(t,e,n){const r=this._interpolantSettings;n?(r.endingStart=Gc,r.endingEnd=Gc):(r.endingStart=t?this.zeroSlopeAtStart?Gc:Hc:ap,r.endingEnd=e?this.zeroSlopeAtEnd?Gc:Hc:ap)}_scheduleFading(t,e,n){const r=this._mixer,s=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=e,a[1]=s+t,l[1]=n,this}}const Hue=new Float32Array(1);class JV extends is{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,r=t._clip.tracks,s=r.length,o=t._propertyBindings,a=t._interpolants,l=n.uuid,c=this._bindingsByRootAndName;let d=c[l];void 0===d&&(d={},c[l]=d);for(let u=0;u!==s;++u){const h=r[u],f=h.name;let m=d[f];if(void 0!==m)++m.referenceCount,o[u]=m;else{if(m=o[u],void 0!==m){null===m._cacheIndex&&(++m.referenceCount,this._addInactiveBinding(m,l,f));continue}m=new KV(Fi.create(n,f,e&&e._propertyBindings[u].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,f),o[u]=m}a[u].resultBuffer=m.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const n=(t._localRoot||this._root).uuid,r=t._clip.uuid,s=this._actionsByClip[r];this._bindAction(t,s&&s.knownActions[0]),this._addInactiveAction(t,r,n)}const e=t._propertyBindings;for(let n=0,r=e.length;n!==r;++n){const s=e[n];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let n=0,r=e.length;n!==r;++n){const s=e[n];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const r=this._actions,s=this._actionsByClip;let o=s[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,s[e]=o;else{const a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;const s=t._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],d=t._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===l.length&&delete o[s],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,r=e.length;n!==r;++n){const s=e[n];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=n,e[n]=s}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=n,e[n]=s}_addInactiveBinding(t,e,n){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[e];void 0===o&&(o={},r[e]=o),o[n]=t,t._cacheIndex=s.length,s.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,r=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,a=o[r],l=e[e.length-1],c=t._cacheIndex;l._cacheIndex=c,e[c]=l,e.pop(),delete a[s],0===Object.keys(a).length&&delete o[r]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=n,e[n]=s}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=n,e[n]=s}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new TE(new Float32Array(2),new Float32Array(2),1,Hue),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,s=e[r];t.__cacheIndex=r,e[r]=t,s.__cacheIndex=n,e[n]=s}clipAction(t,e,n){const r=e||this._root,s=r.uuid;let o="string"==typeof t?qh.findByName(r,t):t;const a=null!==o?o.uuid:t,l=this._actionsByClip[a];let c=null;if(void 0===n&&(n=null!==o?o.blendMode:Nv),void 0!==l){const u=l.actionByRoot[s];if(void 0!==u&&u.blendMode===n)return u;c=l.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const d=new QV(this,o,e,n);return this._bindAction(d,c),this._addInactiveAction(d,a,s),d}existingAction(t,e){const n=e||this._root,r=n.uuid,s="string"==typeof t?qh.findByName(n,t):t,a=this._actionsByClip[s?s.uuid:t];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const t=this._actions;for(let n=this._nActiveActions-1;n>=0;--n)t[n].stop();return this}update(t){const e=this._actions,n=this._nActiveActions,r=this.time+=t*=this.timeScale,s=Math.sign(t),o=this._accuIndex^=1;for(let c=0;c!==n;++c)e[c]._update(r,t,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,r=this._actionsByClip,s=r[n];if(void 0!==s){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const d=c._cacheIndex,u=e[e.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=d,e[d]=u,e.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const o in n){const l=n[o].actionByRoot[e];void 0!==l&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName[e];if(void 0!==s)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class LE{constructor(t){this.value=t}clone(){return new LE(void 0===this.value.clone?this.value:this.value.clone())}}let Gue=0;class Wue extends is{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Gue++}),this.name="",this.usage=hp,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return-1!==e&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let n=0,r=e.length;n<r;n++){const s=Array.isArray(e[n])?e[n]:[e[n]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return(new this.constructor).copy(this)}}class $ue extends Rp{constructor(t,e,n=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class Xue{constructor(t,e,n,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(t){!0===t&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const ez=new je;class vd{constructor(t,e,n=0,r=1/0){this.ray=new Zc(t,e),this.near=n,this.far=r,this.camera=null,this.layers=new qv,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return ez.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(ez),this}intersectObject(t,e=!0,n=[]){return OE(t,this,n,e),n.sort(tz),n}intersectObjects(t,e=!0,n=[]){for(let r=0,s=t.length;r<s;r++)OE(t[r],this,n,e);return n.sort(tz),n}}function tz(i,t){return i.distance-t.distance}function OE(i,t,e,n){if(i.layers.test(t.layers)&&i.raycast(t,e),!0===n){const r=i.children;for(let s=0,o=r.length;s<o;s++)OE(r[s],t,e,!0)}}class e0{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(pn(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class que{constructor(t=1,e=0,n=0){return this.radius=t,this.theta=e,this.y=n,this}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return(new this.constructor).copy(this)}}const iz=new $;class Yue{constructor(t=new $(1/0,1/0),e=new $(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=iz.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,iz).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const nz=new C,t0=new C;class Zue{constructor(t=new C,e=new C){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){nz.subVectors(t,this.start),t0.subVectors(this.end,this.start);const n=t0.dot(t0);let s=t0.dot(nz)/n;return e&&(s=pn(s,0,1)),s}closestPointToPoint(t,e,n){const r=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const rz=new C;class Kue extends Nt{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const n=new pt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,d=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(d),Math.sin(d),1)}n.setAttribute("position",new qe(r,3));const s=new Ln({fog:!1,toneMapped:!1});this.cone=new zs(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),rz.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(rz),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const jl=new C,n0=new je,NE=new je;class Que extends zs{constructor(t){const e=sz(t),n=new pt,r=[],s=[],o=new Te(0,0,1),a=new Te(0,1,0);for(let c=0;c<e.length;c++){const d=e[c];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}n.setAttribute("position",new qe(r,3)),n.setAttribute("color",new qe(s,3)),super(n,new Ln({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,r=n.getAttribute("position");NE.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<e.length;s++){const a=e[s];a.parent&&a.parent.isBone&&(n0.multiplyMatrices(NE,a.matrixWorld),jl.setFromMatrixPosition(n0),r.setXYZ(o,jl.x,jl.y,jl.z),n0.multiplyMatrices(NE,a.parent.matrixWorld),jl.setFromMatrixPosition(n0),r.setXYZ(o+1,jl.x,jl.y,jl.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function sz(i){const t=[];!0===i.isBone&&t.push(i);for(let e=0;e<i.children.length;e++)t.push.apply(t,sz(i.children[e]));return t}class Jue extends Be{constructor(t,e,n){super(new ad(e,4,2),new Zn({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const ehe=new C,oz=new Te,az=new Te;class the extends Nt{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new ja(e);r.rotateY(.5*Math.PI),this.material=new Zn({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(3*s.count);r.setAttribute("color",new ui(o,3)),this.add(new Be(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");oz.copy(this.light.color),az.copy(this.light.groundColor);for(let n=0,r=e.count;n<r;n++){const s=n<r/2?oz:az;e.setXYZ(n,s.r,s.g,s.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(ehe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class jE extends zs{constructor(t=10,e=10,n=4473924,r=8947848){n=new Te(n),r=new Te(r);const s=e/2,o=t/e,a=t/2,l=[],c=[];for(let h=0,f=0,m=-a;h<=e;h++,m+=o){l.push(-a,0,m,a,0,m),l.push(m,0,-a,m,0,a);const _=h===s?n:r;_.toArray(c,f),f+=3,_.toArray(c,f),f+=3,_.toArray(c,f),f+=3,_.toArray(c,f),f+=3}const d=new pt;d.setAttribute("position",new qe(l,3)),d.setAttribute("color",new qe(c,3)),super(d,new Ln({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class ihe extends zs{constructor(t=10,e=16,n=8,r=64,s=4473924,o=8947848){s=new Te(s),o=new Te(o);const a=[],l=[];if(e>1)for(let u=0;u<e;u++){const h=u/e*(2*Math.PI),f=Math.sin(h)*t,m=Math.cos(h)*t;a.push(0,0,0),a.push(f,0,m);const _=1&u?s:o;l.push(_.r,_.g,_.b),l.push(_.r,_.g,_.b)}for(let u=0;u<n;u++){const h=1&u?s:o,f=t-t/n*u;for(let m=0;m<r;m++){let _=m/r*(2*Math.PI),p=Math.sin(_)*f,g=Math.cos(_)*f;a.push(p,0,g),l.push(h.r,h.g,h.b),_=(m+1)/r*(2*Math.PI),p=Math.sin(_)*f,g=Math.cos(_)*f,a.push(p,0,g),l.push(h.r,h.g,h.b)}}const c=new pt;c.setAttribute("position",new qe(a,3)),c.setAttribute("color",new qe(l,3)),super(c,new Ln({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const lz=new C,r0=new C,cz=new C;class nhe extends Nt{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===e&&(e=1);let r=new pt;r.setAttribute("position",new qe([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const s=new Ln({fog:!1,toneMapped:!1});this.lightPlane=new En(r,s),this.add(this.lightPlane),r=new pt,r.setAttribute("position",new qe([0,0,0,0,0,1],3)),this.targetLine=new En(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),lz.setFromMatrixPosition(this.light.matrixWorld),r0.setFromMatrixPosition(this.light.target.matrixWorld),cz.subVectors(r0,lz),this.lightPlane.lookAt(r0),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(r0),this.targetLine.scale.z=cz.length()}}const s0=new C,gn=new xp;class rhe extends zs{constructor(t){const e=new pt,n=new Ln({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};function a(m,_){l(m),l(_)}function l(m){r.push(0,0,0),s.push(0,0,0),void 0===o[m]&&(o[m]=[]),o[m].push(r.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),e.setAttribute("position",new qe(r,3)),e.setAttribute("color",new qe(s,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Te(16755200),d=new Te(16711680),u=new Te(43775),h=new Te(16777215),f=new Te(3355443);this.setColors(c,d,u,h,f)}setColors(t,e,n,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,t.r,t.g,t.b),a.setXYZ(1,t.r,t.g,t.b),a.setXYZ(2,t.r,t.g,t.b),a.setXYZ(3,t.r,t.g,t.b),a.setXYZ(4,t.r,t.g,t.b),a.setXYZ(5,t.r,t.g,t.b),a.setXYZ(6,t.r,t.g,t.b),a.setXYZ(7,t.r,t.g,t.b),a.setXYZ(8,t.r,t.g,t.b),a.setXYZ(9,t.r,t.g,t.b),a.setXYZ(10,t.r,t.g,t.b),a.setXYZ(11,t.r,t.g,t.b),a.setXYZ(12,t.r,t.g,t.b),a.setXYZ(13,t.r,t.g,t.b),a.setXYZ(14,t.r,t.g,t.b),a.setXYZ(15,t.r,t.g,t.b),a.setXYZ(16,t.r,t.g,t.b),a.setXYZ(17,t.r,t.g,t.b),a.setXYZ(18,t.r,t.g,t.b),a.setXYZ(19,t.r,t.g,t.b),a.setXYZ(20,t.r,t.g,t.b),a.setXYZ(21,t.r,t.g,t.b),a.setXYZ(22,t.r,t.g,t.b),a.setXYZ(23,t.r,t.g,t.b),a.setXYZ(24,e.r,e.g,e.b),a.setXYZ(25,e.r,e.g,e.b),a.setXYZ(26,e.r,e.g,e.b),a.setXYZ(27,e.r,e.g,e.b),a.setXYZ(28,e.r,e.g,e.b),a.setXYZ(29,e.r,e.g,e.b),a.setXYZ(30,e.r,e.g,e.b),a.setXYZ(31,e.r,e.g,e.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap;gn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),An("c",e,t,gn,0,0,-1),An("t",e,t,gn,0,0,1),An("n1",e,t,gn,-1,-1,-1),An("n2",e,t,gn,1,-1,-1),An("n3",e,t,gn,-1,1,-1),An("n4",e,t,gn,1,1,-1),An("f1",e,t,gn,-1,-1,1),An("f2",e,t,gn,1,-1,1),An("f3",e,t,gn,-1,1,1),An("f4",e,t,gn,1,1,1),An("u1",e,t,gn,.7,1.1,-1),An("u2",e,t,gn,-.7,1.1,-1),An("u3",e,t,gn,0,2,-1),An("cf1",e,t,gn,-1,0,1),An("cf2",e,t,gn,1,0,1),An("cf3",e,t,gn,0,-1,1),An("cf4",e,t,gn,0,1,1),An("cn1",e,t,gn,-1,0,-1),An("cn2",e,t,gn,1,0,-1),An("cn3",e,t,gn,0,-1,-1),An("cn4",e,t,gn,0,1,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function An(i,t,e,n,r,s,o){s0.set(r,s,o).unproject(n);const a=t[i];if(void 0!==a){const l=e.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],s0.x,s0.y,s0.z)}}const o0=new ir;class she extends zs{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),s=new pt;s.setIndex(new ui(n,1)),s.setAttribute("position",new ui(r,3)),super(s,new Ln({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&o0.setFromObject(this.object),o0.isEmpty())return;const e=o0.min,n=o0.max,r=this.geometry.attributes.position,s=r.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=e.x,s[4]=n.y,s[5]=n.z,s[6]=e.x,s[7]=e.y,s[8]=n.z,s[9]=n.x,s[10]=e.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=e.z,s[15]=e.x,s[16]=n.y,s[17]=e.z,s[18]=e.x,s[19]=e.y,s[20]=e.z,s[21]=n.x,s[22]=e.y,s[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class dz extends zs{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new pt;s.setIndex(new ui(n,1)),s.setAttribute("position",new qe([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(s,new Ln({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class ohe extends En{constructor(t,e=1,n=16776960){const r=n,o=new pt;o.setAttribute("position",new qe([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),o.computeBoundingSphere(),super(o,new Ln({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const l=new pt;l.setAttribute("position",new qe([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),l.computeBoundingSphere(),this.add(new Be(l,new Zn({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const uz=new C;let a0,BE;class ahe extends Nt{constructor(t=new C(0,0,1),e=new C(0,0,0),n=1,r=16776960,s=.2*n,o=.2*s){super(),this.type="ArrowHelper",void 0===a0&&(a0=new pt,a0.setAttribute("position",new qe([0,0,0,0,1,0],3)),BE=new On(0,.5,1,5,1),BE.translate(0,-.5,0)),this.position.copy(e),this.line=new En(a0,new Ln({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Be(BE,new Zn({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,s,o)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{uz.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(uz,e)}}setLength(t,e=.2*t,n=.2*e){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class lhe extends zs{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],r=new pt;r.setAttribute("position",new qe(e,3)),r.setAttribute("color",new qe([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(r,new Ln({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,e,n){const r=new Te,s=this.geometry.attributes.color.array;return r.set(t),r.toArray(s,0),r.toArray(s,3),r.set(e),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class che{constructor(){this.type="ShapePath",this.color=new Te,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new Np,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this}bezierCurveTo(t,e,n,r,s,o){return this.currentPath.bezierCurveTo(t,e,n,r,s,o),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function n(g,b){const v=b.length;let y=!1;for(let T=v-1,w=0;w<v;T=w++){let M=b[T],D=b[w],S=D.x-M.x,x=D.y-M.y;if(Math.abs(x)>Number.EPSILON){if(x<0&&(M=b[w],S=-S,D=b[T],x=-x),g.y<M.y||g.y>D.y)continue;if(g.y===M.y){if(g.x===M.x)return!0}else{const k=x*(g.x-M.x)-S*(g.y-M.y);if(0===k)return!0;if(k<0)continue;y=!y}}else{if(g.y!==M.y)continue;if(D.x<=g.x&&g.x<=M.x||M.x<=g.x&&g.x<=D.x)return!0}}return y}const r=ea.isClockWise,s=this.subPaths;if(0===s.length)return[];let o,a,l;const c=[];if(1===s.length)return a=s[0],l=new sd,l.curves=a.curves,c.push(l),c;let d=!r(s[0].getPoints());d=t?!d:d;const u=[],h=[];let _,p,f=[],m=0;h[m]=void 0,f[m]=[];for(let g=0,b=s.length;g<b;g++)a=s[g],_=a.getPoints(),o=r(_),o=t?!o:o,o?(!d&&h[m]&&m++,h[m]={s:new sd,p:_},h[m].s.curves=a.curves,d&&m++,f[m]=[]):f[m].push({h:a,p:_[0]});if(!h[0])return function e(g){const b=[];for(let v=0,y=g.length;v<y;v++){const T=g[v],w=new sd;w.curves=T.curves,b.push(w)}return b}(s);if(h.length>1){let g=!1,b=0;for(let v=0,y=h.length;v<y;v++)u[v]=[];for(let v=0,y=h.length;v<y;v++){const T=f[v];for(let w=0;w<T.length;w++){const M=T[w];let D=!0;for(let S=0;S<h.length;S++)n(M.p,h[S].p)&&(v!==S&&b++,D?(D=!1,u[S].push(M)):g=!0);D&&u[v].push(M)}}b>0&&!1===g&&(f=u)}for(let g=0,b=h.length;g<b;g++){l=h[g].s,c.push(l),p=f[g];for(let v=0,y=p.length;v<y;v++)l.holes.push(p[v].h)}return c}}class dhe extends gi{constructor(t=1,e=1,n=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(t,e,{...r,count:n}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}function hz(i){return!(!i||!i.set)}function We(i,t){return hz(i)?void 0===t?i:Array.isArray(t)?(i.set(...t),i):i.copy&&t?(i.copy(t),i):void 0!==t?(i.set(t),i):i:t}function UE(i){return void 0!==i&&(i.observed||i.observers?.length>0)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Sv}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Sv);const VE={now:()=>(VE.delegate||Date).now(),delegate:void 0};class fz extends Et{constructor(t=1/0,e=1/0,n=VE){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:n,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;e||(n.push(t),!r&&n.push(s.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:n,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!t.closed;o+=n?1:2)t.next(s[o]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:n,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<n.length&&n.splice(0,n.length-s),!r){const o=e.now();let a=0;for(let l=1;l<n.length&&n[l]<=o;l+=2)a=l;a&&n.splice(0,a+1)}}}class hhe{constructor(t){this.memberMap=new Map,this.children=[],this.eventListener={},this.loaded=!1,this.add=(...e)=>(this.objRef&&this.objRef.add(...e),this.children.push(...e),this),this.remove=(...e)=>{this.objRef&&this.objRef.remove(...e);for(const n of e){const r=this.children.indexOf(n);r>=0&&(this.children=this.children.splice(r,1))}return this},this.applyToObject3D=e=>{if(this.memberMap.forEach((n,r)=>{const s=e[r];hz(s)?We(s,n):e[r]=n}),this.children.forEach(n=>e.add(n)),this.objRef?.parent){const n=this.objRef?.parent;n.remove(this.objRef),n.add(e)}},this.addEventListener=(e,n)=>{let r=this.eventListener[e];r||(r=[],this.eventListener[e]=r),r.push(n),this.objRef&&this.objRef.addEventListener(e,n)},this.removeEventListener=(e,n)=>{const r=this.eventListener[e];if(!r)return;const s=r.indexOf(n);s>=0&&r.splice(s,1)},this.objRef=t}get(t,e,n){switch(e){case"__isProxy":return!0;case"applyToObject3D":return this.applyToObject3D;case"objRef":return this.loaded?this.objRef:void 0;case"add":return this.add;case"remove":return this.remove;case"children":return this.objRef?this.objRef.children:this.children;default:{const s=this.objRef[e];return void 0!==s&&this.memberMap.set(e,s),s}}}set(t,e,n,r){return"objRef"===e?(n&&this.applyToObject3D(n),this.loaded=!0,this.objRef=n):(this.memberMap.set(e,n),this.objRef&&(this.objRef[e]=n)),!0}}function mz(i=new Nt){const t=new hhe(i);return new Proxy(t,t)}function zE(i){return!0===i.__isProxy&&void 0===i.objRef}let yd=(()=>{class i{set objRef(e){this.applyObjRef(e)}get objRef(){return this._objRef}constructor(){this.autoAddToParent=!0,this.autoDispose=!0}addToParent(){}removeFromParent(){}set threeEvents(e){this.removeEvents(),this.eventListeners=e,this.applyEvents()}get threeEvents(){return this.eventListeners}get onUpdate(){return this.updateEmitter||(this.updateEmitter=new lt),this.updateEmitter}get objRef$(){return this._objRef$||(this._objRef$=new fz(1)),this._objRef$}ngOnInit(){this.objRef||(this.objRef=this.createThreeInstance(this.args))}getType(){throw new Error("derive me")}createThreeInstance(e){return Array.isArray(e)?new(this.getType())(...e):new(this.getType())(e)}ngOnChanges(e){if(!this.objRef||zE(this.objRef)){this.objRef||(this.objRef=this.createThreeInstance(e.args?.currentValue));for(const n in e)this[n]=e[n].currentValue;this.emitPropertyChanges(e)}else this.emitPropertyChanges(e)}disposeObjRef(){(function uhe(i){return!(!i||"function"!=typeof i.dispose)})(this.objRef)&&this.objRef.dispose()}ngOnDestroy(){this.removeEvents(),this.removeFromParent(),this.autoDispose&&this.disposeObjRef()}applyObjRef(e){this._objRef!==e&&(this.removeFromParent(),this._objRef=e,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}emitObjRefChange(){this._objRef&&!zE(this._objRef)&&(this._objRef.dispatchEvent?.({type:"loaded",object:this._objRef}),this._objRef$&&this._objRef$.next(this._objRef))}emitPropertyChanges(e){this._objRef&&this._objRef.dispatchEvent?.({type:"changes",changes:e}),this.updateEmitter&&this.updateEmitter.next(e)}removeEvents(){if(this.eventListeners&&this._objRef){for(const e of Object.entries(this.eventListeners))this._objRef.removeEventListener(e[0],e[1]);this.eventListeners=void 0}}applyEvents(){if(this.eventListeners&&this._objRef)for(const e of Object.entries(this.eventListeners))this._objRef.addEventListener(e[0],e[1])}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["th-abs-wrapper"]],inputs:{autoAddToParent:"autoAddToParent",autoDispose:"autoDispose",objRef:"objRef",args:"args",threeEvents:"threeEvents"},outputs:{onUpdate:"onUpdate",objRef$:"objRef$"},features:[pr],decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})();const fhe=["*"];let mhe=(()=>{class i extends yd{constructor(e){super(),this.parent=e}addToParent(){this._objRef&&this.parent.objRef&&(!this._objRef.parent||this._objRef.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(this._objRef)}removeFromParent(){this._objRef?.parent?.remove(this._objRef)}applyObjRef(e){(this._objRef!==e||this._objRef?.parent?.uuid!==this.parent.objRef.uuid)&&(this.removeFromParent(),this._objRef=e,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}attachToParent(e,n){!this.parent.objRef||e===n&&n?.parent?.uuid===this.parent.objRef.uuid||(n&&n.parent&&n.parent.remove(n),e&&(!e.parent||e.parent&&e.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(e))}set lookAt(e){Promise.resolve().then(()=>{this.objRef&&(Array.isArray(e)?this.objRef.lookAt(...e):this.objRef.lookAt(e))})}static#e=this.\u0275fac=function(n){return new(n||i)(P(i))};static#t=this.\u0275cmp=pe({type:i,selectors:[["th-abs-object"]],inputs:{lookAt:"lookAt"},features:[ge],ngContentSelectors:fhe,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2})}return i})();const phe=["*"];class ht extends mhe{getType(){return Nt}get isObject3D(){return this._objRef?.isObject3D}get id(){return this._objRef?.id}set uuid(t){this._objRef&&(this._objRef.uuid=t)}get uuid(){return this._objRef?.uuid}set name(t){this._objRef&&(this._objRef.name=t)}get name(){return this._objRef?.name}get type(){return this._objRef?.type}set children(t){this._objRef&&(this._objRef.children=t)}get children(){return this._objRef?.children}set up(t){this._objRef&&(this._objRef.up=We(this._objRef.up,t))}get up(){return this._objRef?.up}set position(t){this._objRef&&We(this._objRef.position,t)}get position(){return this._objRef?.position}set rotation(t){this._objRef&&We(this._objRef.rotation,t)}get rotation(){return this._objRef?.rotation}set quaternion(t){this._objRef&&We(this._objRef.quaternion,t)}get quaternion(){return this._objRef?.quaternion}set scale(t){this._objRef&&We(this._objRef.scale,t)}get scale(){return this._objRef?.scale}set modelViewMatrix(t){this._objRef&&We(this._objRef.modelViewMatrix,t)}get modelViewMatrix(){return this._objRef?.modelViewMatrix}set normalMatrix(t){this._objRef&&We(this._objRef.normalMatrix,t)}get normalMatrix(){return this._objRef?.normalMatrix}set matrix(t){this._objRef&&(this._objRef.matrix=We(this._objRef.matrix,t))}get matrix(){return this._objRef?.matrix}set matrixWorld(t){this._objRef&&(this._objRef.matrixWorld=We(this._objRef.matrixWorld,t))}get matrixWorld(){return this._objRef?.matrixWorld}set matrixAutoUpdate(t){this._objRef&&(this._objRef.matrixAutoUpdate=t)}get matrixAutoUpdate(){return this._objRef?.matrixAutoUpdate}set matrixWorldAutoUpdate(t){this._objRef&&(this._objRef.matrixWorldAutoUpdate=t)}get matrixWorldAutoUpdate(){return this._objRef?.matrixWorldAutoUpdate}set matrixWorldNeedsUpdate(t){this._objRef&&(this._objRef.matrixWorldNeedsUpdate=t)}get matrixWorldNeedsUpdate(){return this._objRef?.matrixWorldNeedsUpdate}set layers(t){this._objRef&&(this._objRef.layers=We(this._objRef.layers,t))}get layers(){return this._objRef?.layers}set visible(t){this._objRef&&(this._objRef.visible=t)}get visible(){return this._objRef?.visible}set castShadow(t){this._objRef&&(this._objRef.castShadow=t)}get castShadow(){return this._objRef?.castShadow}set receiveShadow(t){this._objRef&&(this._objRef.receiveShadow=t)}get receiveShadow(){return this._objRef?.receiveShadow}set frustumCulled(t){this._objRef&&(this._objRef.frustumCulled=t)}get frustumCulled(){return this._objRef?.frustumCulled}set renderOrder(t){this._objRef&&(this._objRef.renderOrder=t)}get renderOrder(){return this._objRef?.renderOrder}set animations(t){this._objRef&&(this._objRef.animations=t)}get animations(){return this._objRef?.animations}set userData(t){this._objRef&&(this._objRef.userData=t)}get userData(){return this._objRef?.userData}set customDepthMaterial(t){this._objRef&&(this._objRef.customDepthMaterial=t)}get customDepthMaterial(){return this._objRef?.customDepthMaterial}set customDistanceMaterial(t){this._objRef&&(this._objRef.customDistanceMaterial=t)}get customDistanceMaterial(){return this._objRef?.customDistanceMaterial}static#e=this.DEFAULT_UP=Nt.DEFAULT_UP;static#t=this.DEFAULT_MATRIX_AUTO_UPDATE=Nt.DEFAULT_MATRIX_AUTO_UPDATE;static#i=this.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=Nt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE;constructor(t){super(t)}static#n=this.\u0275fac=function(e){return new(e||ht)(P(ht,4))};static#r=this.\u0275cmp=pe({type:ht,selectors:[["th-object3D"]],inputs:{uuid:"uuid",name:"name",children:"children",up:"up",position:"position",rotation:"rotation",quaternion:"quaternion",scale:"scale",modelViewMatrix:"modelViewMatrix",normalMatrix:"normalMatrix",matrix:"matrix",matrixWorld:"matrixWorld",matrixAutoUpdate:"matrixAutoUpdate",matrixWorldAutoUpdate:"matrixWorldAutoUpdate",matrixWorldNeedsUpdate:"matrixWorldNeedsUpdate",layers:"layers",visible:"visible",castShadow:"castShadow",receiveShadow:"receiveShadow",frustumCulled:"frustumCulled",renderOrder:"renderOrder",animations:"animations",userData:"userData",customDepthMaterial:"customDepthMaterial",customDistanceMaterial:"customDistanceMaterial"},features:[Ee([]),ge],ngContentSelectors:phe,decls:1,vars:0,template:function(e,n){1&e&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}const ghe=["*"];let HE=(()=>{class i extends ht{getType(){return xp}get isCamera(){return this._objRef?.isCamera}get type(){return this._objRef?.type}set layers(e){this._objRef&&(this._objRef.layers=We(this._objRef.layers,e))}get layers(){return this._objRef?.layers}set matrixWorldInverse(e){this._objRef&&(this._objRef.matrixWorldInverse=We(this._objRef.matrixWorldInverse,e))}get matrixWorldInverse(){return this._objRef?.matrixWorldInverse}set projectionMatrix(e){this._objRef&&(this._objRef.projectionMatrix=We(this._objRef.projectionMatrix,e))}get projectionMatrix(){return this._objRef?.projectionMatrix}set projectionMatrixInverse(e){this._objRef&&(this._objRef.projectionMatrixInverse=We(this._objRef.projectionMatrixInverse,e))}get projectionMatrixInverse(){return this._objRef?.projectionMatrixInverse}set coordinateSystem(e){this._objRef&&(this._objRef.coordinateSystem=e)}get coordinateSystem(){return this._objRef?.coordinateSystem}set viewport(e){this._objRef&&(this._objRef.viewport=We(this._objRef.viewport,e))}get viewport(){return this._objRef?.viewport}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-camera"]],inputs:{layers:"layers",matrixWorldInverse:"matrixWorldInverse",projectionMatrix:"projectionMatrix",projectionMatrixInverse:"projectionMatrixInverse",coordinateSystem:"coordinateSystem",viewport:"viewport"},features:[Ee([{provide:ht,useExisting:Le(()=>i)}]),ge],ngContentSelectors:ghe,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const _he=["*"];let Dn=(()=>{class i extends HE{getType(){return Cn}get isPerspectiveCamera(){return this._objRef?.isPerspectiveCamera}get type(){return this._objRef?.type}set zoom(e){this._objRef&&(this._objRef.zoom=e)}get zoom(){return this._objRef?.zoom}set fov(e){this._objRef&&(this._objRef.fov=e)}get fov(){return this._objRef?.fov}set aspect(e){this._objRef&&(this._objRef.aspect=e)}get aspect(){return this._objRef?.aspect}set near(e){this._objRef&&(this._objRef.near=e)}get near(){return this._objRef?.near}set far(e){this._objRef&&(this._objRef.far=e)}get far(){return this._objRef?.far}set focus(e){this._objRef&&(this._objRef.focus=e)}get focus(){return this._objRef?.focus}set view(e){this._objRef&&(this._objRef.view=e)}get view(){return this._objRef?.view}set filmGauge(e){this._objRef&&(this._objRef.filmGauge=e)}get filmGauge(){return this._objRef?.filmGauge}set filmOffset(e){this._objRef&&(this._objRef.filmOffset=e)}get filmOffset(){return this._objRef?.filmOffset}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-perspectiveCamera"]],inputs:{zoom:"zoom",fov:"fov",aspect:"aspect",near:"near",far:"far",focus:"focus",view:"view",filmGauge:"filmGauge",filmOffset:"filmOffset"},features:[Ee([{provide:ht,useExisting:Le(()=>i)},{provide:HE,useExisting:Le(()=>i)}]),ge],ngContentSelectors:_he,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const bhe=["*"];let vhe=(()=>{class i extends ht{getType(){return En}get isLine(){return this._objRef?.isLine}get type(){return this._objRef?.type}set geometry(e){this._objRef&&(this._objRef.geometry=e)}get geometry(){return this._objRef?.geometry}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set morphTargetInfluences(e){this._objRef&&(this._objRef.morphTargetInfluences=e)}get morphTargetInfluences(){return this._objRef?.morphTargetInfluences}set morphTargetDictionary(e){this._objRef&&(this._objRef.morphTargetDictionary=e)}get morphTargetDictionary(){return this._objRef?.morphTargetDictionary}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-line"]],inputs:{geometry:"geometry",material:"material",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary"},features:[Ee([{provide:ht,useExisting:Le(()=>i)}]),ge],ngContentSelectors:bhe,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const yhe=["*"];let pz=(()=>{class i extends vhe{getType(){return zs}get isLineSegments(){return this._objRef?.isLineSegments}get type(){return this._objRef?.type}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-lineSegments"]],features:[Ee([{provide:ht,useExisting:Le(()=>i)}]),ge],ngContentSelectors:yhe,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const xhe=["*"];let Bl=(()=>{class i extends pz{getType(){return jE}get type(){return this._objRef?.type}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-gridHelper"]],features:[Ee([{provide:ht,useExisting:Le(()=>i)}]),ge],ngContentSelectors:xhe,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const whe=["*"];let l0=(()=>{class i extends ht{get isLight(){return this._objRef?.isLight}get type(){return this._objRef?.type}set color(e){this._objRef&&(this._objRef.color=We(this._objRef.color,e))}get color(){return this._objRef?.color}set intensity(e){this._objRef&&(this._objRef.intensity=e)}get intensity(){return this._objRef?.intensity}set shadow(e){this._objRef&&(this._objRef.shadow=e)}get shadow(){return this._objRef?.shadow}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-light"]],inputs:{color:"color",intensity:"intensity",shadow:"shadow"},features:[Ee([{provide:ht,useExisting:Le(()=>i)}]),ge],ngContentSelectors:whe,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const The=["*"];let za=(()=>{class i extends l0{getType(){return Ky}get isDirectionalLight(){return this._objRef?.isDirectionalLight}get type(){return this._objRef?.type}set castShadow(e){this._objRef&&(this._objRef.castShadow=e)}get castShadow(){return this._objRef?.castShadow}set position(e){this._objRef&&We(this._objRef.position,e)}get position(){return this._objRef?.position}set shadow(e){this._objRef&&(this._objRef.shadow=e)}get shadow(){return this._objRef?.shadow}set target(e){this._objRef&&(this._objRef.target=e)}get target(){return this._objRef?.target}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-directionalLight"]],inputs:{castShadow:"castShadow",position:"position",shadow:"shadow",target:"target"},features:[Ee([{provide:ht,useExisting:Le(()=>i)}]),ge],ngContentSelectors:The,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const Mhe=["*"];let GE=(()=>{class i extends l0{getType(){return RE}get isHemisphereLight(){return this._objRef?.isHemisphereLight}get type(){return this._objRef?.type}set position(e){this._objRef&&We(this._objRef.position,e)}get position(){return this._objRef?.position}set color(e){this._objRef&&(this._objRef.color=We(this._objRef.color,e))}get color(){return this._objRef?.color}set groundColor(e){this._objRef&&(this._objRef.groundColor=We(this._objRef.groundColor,e))}get groundColor(){return this._objRef?.groundColor}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-hemisphereLight"]],inputs:{position:"position",color:"color",groundColor:"groundColor"},features:[Ee([{provide:ht,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Mhe,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const She=["*"];let Mr=(()=>{class i extends ht{getType(){return Be}get isMesh(){return this._objRef?.isMesh}get type(){return this._objRef?.type}set geometry(e){this._objRef&&(this._objRef.geometry=e)}get geometry(){return this._objRef?.geometry}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set morphTargetInfluences(e){this._objRef&&(this._objRef.morphTargetInfluences=e)}get morphTargetInfluences(){return this._objRef?.morphTargetInfluences}set morphTargetDictionary(e){this._objRef&&(this._objRef.morphTargetDictionary=e)}get morphTargetDictionary(){return this._objRef?.morphTargetDictionary}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-mesh"]],inputs:{geometry:"geometry",material:"material",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary"},features:[Ee([{provide:ht,useExisting:Le(()=>i)}]),ge],ngContentSelectors:She,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const Rhe=["*"];let an=(()=>{class i extends ht{getType(){return YC}get isScene(){return this._objRef?.isScene}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}set backgroundBlurriness(e){this._objRef&&(this._objRef.backgroundBlurriness=e)}get backgroundBlurriness(){return this._objRef?.backgroundBlurriness}set backgroundIntensity(e){this._objRef&&(this._objRef.backgroundIntensity=e)}get backgroundIntensity(){return this._objRef?.backgroundIntensity}set overrideMaterial(e){this._objRef&&(this._objRef.overrideMaterial=e)}get overrideMaterial(){return this._objRef?.overrideMaterial}set background(e){this._objRef&&(this._objRef.background=We(this._objRef.background,e))}get background(){return this._objRef?.background}set backgroundRotation(e){this._objRef&&(this._objRef.backgroundRotation=We(this._objRef.backgroundRotation,e))}get backgroundRotation(){return this._objRef?.backgroundRotation}set environment(e){this._objRef&&(this._objRef.environment=e)}get environment(){return this._objRef?.environment}set environmentIntensity(e){this._objRef&&(this._objRef.environmentIntensity=e)}get environmentIntensity(){return this._objRef?.environmentIntensity}set environmentRotation(e){this._objRef&&(this._objRef.environmentRotation=We(this._objRef.environmentRotation,e))}get environmentRotation(){return this._objRef?.environmentRotation}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-scene"]],inputs:{type:"type",fog:"fog",backgroundBlurriness:"backgroundBlurriness",backgroundIntensity:"backgroundIntensity",overrideMaterial:"overrideMaterial",background:"background",backgroundRotation:"backgroundRotation",environment:"environment",environmentIntensity:"environmentIntensity",environmentRotation:"environmentRotation"},features:[Ee([{provide:ht,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Rhe,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})(),Che=(()=>{class i extends yd{constructor(e){super(),this.parent=e}addToParent(){if(!this.parent.objRef)throw new Error("parent object doesn't hold a three js object instance");this.parent.objRef.material=this.objRef}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.material=void 0)}static#e=this.\u0275fac=function(n){return new(n||i)(P(ht))};static#t=this.\u0275cmp=pe({type:i,selectors:[["th-abs-material"]],features:[ge],decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})();const Ehe=["*"];let Ul=(()=>{class i extends Che{getType(){return kn}get isMaterial(){return this._objRef?.isMaterial}set alphaHash(e){this._objRef&&(this._objRef.alphaHash=e)}get alphaHash(){return this._objRef?.alphaHash}set alphaToCoverage(e){this._objRef&&(this._objRef.alphaToCoverage=e)}get alphaToCoverage(){return this._objRef?.alphaToCoverage}set blendAlpha(e){this._objRef&&(this._objRef.blendAlpha=e)}get blendAlpha(){return this._objRef?.blendAlpha}set blendColor(e){this._objRef&&(this._objRef.blendColor=We(this._objRef.blendColor,e))}get blendColor(){return this._objRef?.blendColor}set blendDst(e){this._objRef&&(this._objRef.blendDst=e)}get blendDst(){return this._objRef?.blendDst}set blendDstAlpha(e){this._objRef&&(this._objRef.blendDstAlpha=e)}get blendDstAlpha(){return this._objRef?.blendDstAlpha}set blendEquation(e){this._objRef&&(this._objRef.blendEquation=e)}get blendEquation(){return this._objRef?.blendEquation}set blendEquationAlpha(e){this._objRef&&(this._objRef.blendEquationAlpha=e)}get blendEquationAlpha(){return this._objRef?.blendEquationAlpha}set blending(e){this._objRef&&(this._objRef.blending=e)}get blending(){return this._objRef?.blending}set blendSrc(e){this._objRef&&(this._objRef.blendSrc=e)}get blendSrc(){return this._objRef?.blendSrc}set blendSrcAlpha(e){this._objRef&&(this._objRef.blendSrcAlpha=e)}get blendSrcAlpha(){return this._objRef?.blendSrcAlpha}set clipIntersection(e){this._objRef&&(this._objRef.clipIntersection=e)}get clipIntersection(){return this._objRef?.clipIntersection}set clippingPlanes(e){this._objRef&&(this._objRef.clippingPlanes=e)}get clippingPlanes(){return this._objRef?.clippingPlanes}set clipShadows(e){this._objRef&&(this._objRef.clipShadows=e)}get clipShadows(){return this._objRef?.clipShadows}set colorWrite(e){this._objRef&&(this._objRef.colorWrite=e)}get colorWrite(){return this._objRef?.colorWrite}set defines(e){this._objRef&&(this._objRef.defines=e)}get defines(){return this._objRef?.defines}set depthFunc(e){this._objRef&&(this._objRef.depthFunc=e)}get depthFunc(){return this._objRef?.depthFunc}set depthTest(e){this._objRef&&(this._objRef.depthTest=e)}get depthTest(){return this._objRef?.depthTest}set depthWrite(e){this._objRef&&(this._objRef.depthWrite=e)}get depthWrite(){return this._objRef?.depthWrite}set id(e){this._objRef&&(this._objRef.id=e)}get id(){return this._objRef?.id}set stencilWrite(e){this._objRef&&(this._objRef.stencilWrite=e)}get stencilWrite(){return this._objRef?.stencilWrite}set stencilFunc(e){this._objRef&&(this._objRef.stencilFunc=e)}get stencilFunc(){return this._objRef?.stencilFunc}set stencilRef(e){this._objRef&&(this._objRef.stencilRef=e)}get stencilRef(){return this._objRef?.stencilRef}set stencilWriteMask(e){this._objRef&&(this._objRef.stencilWriteMask=e)}get stencilWriteMask(){return this._objRef?.stencilWriteMask}set stencilFuncMask(e){this._objRef&&(this._objRef.stencilFuncMask=e)}get stencilFuncMask(){return this._objRef?.stencilFuncMask}set stencilFail(e){this._objRef&&(this._objRef.stencilFail=e)}get stencilFail(){return this._objRef?.stencilFail}set stencilZFail(e){this._objRef&&(this._objRef.stencilZFail=e)}get stencilZFail(){return this._objRef?.stencilZFail}set stencilZPass(e){this._objRef&&(this._objRef.stencilZPass=e)}get stencilZPass(){return this._objRef?.stencilZPass}set name(e){this._objRef&&(this._objRef.name=e)}get name(){return this._objRef?.name}set opacity(e){this._objRef&&(this._objRef.opacity=e)}get opacity(){return this._objRef?.opacity}set polygonOffset(e){this._objRef&&(this._objRef.polygonOffset=e)}get polygonOffset(){return this._objRef?.polygonOffset}set polygonOffsetFactor(e){this._objRef&&(this._objRef.polygonOffsetFactor=e)}get polygonOffsetFactor(){return this._objRef?.polygonOffsetFactor}set polygonOffsetUnits(e){this._objRef&&(this._objRef.polygonOffsetUnits=e)}get polygonOffsetUnits(){return this._objRef?.polygonOffsetUnits}set precision(e){this._objRef&&(this._objRef.precision=e)}get precision(){return this._objRef?.precision}set premultipliedAlpha(e){this._objRef&&(this._objRef.premultipliedAlpha=e)}get premultipliedAlpha(){return this._objRef?.premultipliedAlpha}set forceSinglePass(e){this._objRef&&(this._objRef.forceSinglePass=e)}get forceSinglePass(){return this._objRef?.forceSinglePass}set dithering(e){this._objRef&&(this._objRef.dithering=e)}get dithering(){return this._objRef?.dithering}set side(e){this._objRef&&(this._objRef.side=e)}get side(){return this._objRef?.side}set shadowSide(e){this._objRef&&(this._objRef.shadowSide=e)}get shadowSide(){return this._objRef?.shadowSide}set toneMapped(e){this._objRef&&(this._objRef.toneMapped=e)}get toneMapped(){return this._objRef?.toneMapped}set transparent(e){this._objRef&&(this._objRef.transparent=e)}get transparent(){return this._objRef?.transparent}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set uuid(e){this._objRef&&(this._objRef.uuid=e)}get uuid(){return this._objRef?.uuid}set vertexColors(e){this._objRef&&(this._objRef.vertexColors=e)}get vertexColors(){return this._objRef?.vertexColors}set visible(e){this._objRef&&(this._objRef.visible=e)}get visible(){return this._objRef?.visible}set userData(e){this._objRef&&(this._objRef.userData=e)}get userData(){return this._objRef?.userData}set version(e){this._objRef&&(this._objRef.version=e)}get version(){return this._objRef?.version}constructor(e){super(e)}static#e=this.\u0275fac=function(n){return new(n||i)(P(ht,4))};static#t=this.\u0275cmp=pe({type:i,selectors:[["th-material"]],inputs:{alphaHash:"alphaHash",alphaToCoverage:"alphaToCoverage",blendAlpha:"blendAlpha",blendColor:"blendColor",blendDst:"blendDst",blendDstAlpha:"blendDstAlpha",blendEquation:"blendEquation",blendEquationAlpha:"blendEquationAlpha",blending:"blending",blendSrc:"blendSrc",blendSrcAlpha:"blendSrcAlpha",clipIntersection:"clipIntersection",clippingPlanes:"clippingPlanes",clipShadows:"clipShadows",colorWrite:"colorWrite",defines:"defines",depthFunc:"depthFunc",depthTest:"depthTest",depthWrite:"depthWrite",id:"id",stencilWrite:"stencilWrite",stencilFunc:"stencilFunc",stencilRef:"stencilRef",stencilWriteMask:"stencilWriteMask",stencilFuncMask:"stencilFuncMask",stencilFail:"stencilFail",stencilZFail:"stencilZFail",stencilZPass:"stencilZPass",name:"name",opacity:"opacity",polygonOffset:"polygonOffset",polygonOffsetFactor:"polygonOffsetFactor",polygonOffsetUnits:"polygonOffsetUnits",precision:"precision",premultipliedAlpha:"premultipliedAlpha",forceSinglePass:"forceSinglePass",dithering:"dithering",side:"side",shadowSide:"shadowSide",toneMapped:"toneMapped",transparent:"transparent",type:"type",uuid:"uuid",vertexColors:"vertexColors",visible:"visible",userData:"userData",version:"version"},features:[Ee([]),ge],ngContentSelectors:Ehe,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const Ahe=["*"];let xd=(()=>{class i extends Ul{getType(){return yE}get isMeshPhongMaterial(){return this._objRef?.isMeshPhongMaterial}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set color(e){this._objRef&&(this._objRef.color=We(this._objRef.color,e))}get color(){return this._objRef?.color}set specular(e){this._objRef&&(this._objRef.specular=We(this._objRef.specular,e))}get specular(){return this._objRef?.specular}set shininess(e){this._objRef&&(this._objRef.shininess=e)}get shininess(){return this._objRef?.shininess}set map(e){this._objRef&&(this._objRef.map=e)}get map(){return this._objRef?.map}set lightMap(e){this._objRef&&(this._objRef.lightMap=e)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(e){this._objRef&&(this._objRef.lightMapIntensity=e)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set aoMap(e){this._objRef&&(this._objRef.aoMap=e)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(e){this._objRef&&(this._objRef.aoMapIntensity=e)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set emissive(e){this._objRef&&(this._objRef.emissive=We(this._objRef.emissive,e))}get emissive(){return this._objRef?.emissive}set emissiveIntensity(e){this._objRef&&(this._objRef.emissiveIntensity=e)}get emissiveIntensity(){return this._objRef?.emissiveIntensity}set emissiveMap(e){this._objRef&&(this._objRef.emissiveMap=e)}get emissiveMap(){return this._objRef?.emissiveMap}set bumpMap(e){this._objRef&&(this._objRef.bumpMap=e)}get bumpMap(){return this._objRef?.bumpMap}set bumpScale(e){this._objRef&&(this._objRef.bumpScale=e)}get bumpScale(){return this._objRef?.bumpScale}set normalMap(e){this._objRef&&(this._objRef.normalMap=e)}get normalMap(){return this._objRef?.normalMap}set normalMapType(e){this._objRef&&(this._objRef.normalMapType=e)}get normalMapType(){return this._objRef?.normalMapType}set normalScale(e){this._objRef&&(this._objRef.normalScale=We(this._objRef.normalScale,e))}get normalScale(){return this._objRef?.normalScale}set displacementMap(e){this._objRef&&(this._objRef.displacementMap=e)}get displacementMap(){return this._objRef?.displacementMap}set displacementScale(e){this._objRef&&(this._objRef.displacementScale=e)}get displacementScale(){return this._objRef?.displacementScale}set displacementBias(e){this._objRef&&(this._objRef.displacementBias=e)}get displacementBias(){return this._objRef?.displacementBias}set specularMap(e){this._objRef&&(this._objRef.specularMap=e)}get specularMap(){return this._objRef?.specularMap}set alphaMap(e){this._objRef&&(this._objRef.alphaMap=e)}get alphaMap(){return this._objRef?.alphaMap}set envMap(e){this._objRef&&(this._objRef.envMap=e)}get envMap(){return this._objRef?.envMap}set envMapRotation(e){this._objRef&&(this._objRef.envMapRotation=We(this._objRef.envMapRotation,e))}get envMapRotation(){return this._objRef?.envMapRotation}set combine(e){this._objRef&&(this._objRef.combine=e)}get combine(){return this._objRef?.combine}set reflectivity(e){this._objRef&&(this._objRef.reflectivity=e)}get reflectivity(){return this._objRef?.reflectivity}set refractionRatio(e){this._objRef&&(this._objRef.refractionRatio=e)}get refractionRatio(){return this._objRef?.refractionRatio}set wireframe(e){this._objRef&&(this._objRef.wireframe=e)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(e){this._objRef&&(this._objRef.wireframeLinewidth=e)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(e){this._objRef&&(this._objRef.wireframeLinecap=e)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(e){this._objRef&&(this._objRef.wireframeLinejoin=e)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set flatShading(e){this._objRef&&(this._objRef.flatShading=e)}get flatShading(){return this._objRef?.flatShading}set metal(e){this._objRef&&(this._objRef.metal=e)}get metal(){return this._objRef?.metal}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-meshPhongMaterial"]],inputs:{type:"type",color:"color",specular:"specular",shininess:"shininess",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",emissive:"emissive",emissiveIntensity:"emissiveIntensity",emissiveMap:"emissiveMap",bumpMap:"bumpMap",bumpScale:"bumpScale",normalMap:"normalMap",normalMapType:"normalMapType",normalScale:"normalScale",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",specularMap:"specularMap",alphaMap:"alphaMap",envMap:"envMap",envMapRotation:"envMapRotation",combine:"combine",reflectivity:"reflectivity",refractionRatio:"refractionRatio",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",flatShading:"flatShading",metal:"metal",fog:"fog"},features:[Ee([{provide:Ul,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Ahe,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})(),Dhe=(()=>{class i extends yd{constructor(e){super(),this.parent=e}addToParent(){this.parent.objRef&&(this.parent.objRef.geometry=this.objRef,this.parent.objRef.updateMorphTargets&&this.parent.objRef.updateMorphTargets())}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.geometry=void 0)}static#e=this.\u0275fac=function(n){return new(n||i)(P(ht))};static#t=this.\u0275cmp=pe({type:i,selectors:[["th-abs-geometry"]],features:[ge],decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})();const Ihe=["*"];let To=(()=>{class i extends Dhe{getType(){return pt}set id(e){this._objRef&&(this._objRef.id=e)}get id(){return this._objRef?.id}set uuid(e){this._objRef&&(this._objRef.uuid=e)}get uuid(){return this._objRef?.uuid}set name(e){this._objRef&&(this._objRef.name=e)}get name(){return this._objRef?.name}get type(){return this._objRef?.type}set index(e){this._objRef&&(this._objRef.index=We(this._objRef.index,e))}get index(){return this._objRef?.index}set attributes(e){this._objRef&&(this._objRef.attributes=e)}get attributes(){return this._objRef?.attributes}set morphAttributes(e){this._objRef&&(this._objRef.morphAttributes=e)}get morphAttributes(){return this._objRef?.morphAttributes}set morphTargetsRelative(e){this._objRef&&(this._objRef.morphTargetsRelative=e)}get morphTargetsRelative(){return this._objRef?.morphTargetsRelative}set groups(e){this._objRef&&(this._objRef.groups=e)}get groups(){return this._objRef?.groups}set boundingBox(e){this._objRef&&(this._objRef.boundingBox=We(this._objRef.boundingBox,e))}get boundingBox(){return this._objRef?.boundingBox}set boundingSphere(e){this._objRef&&(this._objRef.boundingSphere=We(this._objRef.boundingSphere,e))}get boundingSphere(){return this._objRef?.boundingSphere}set drawRange(e){this._objRef&&(this._objRef.drawRange=e)}get drawRange(){return this._objRef?.drawRange}set userData(e){this._objRef&&(this._objRef.userData=e)}get userData(){return this._objRef?.userData}get isBufferGeometry(){return this._objRef?.isBufferGeometry}constructor(e){super(e)}static#e=this.\u0275fac=function(n){return new(n||i)(P(ht,4))};static#t=this.\u0275cmp=pe({type:i,selectors:[["th-bufferGeometry"]],inputs:{id:"id",uuid:"uuid",name:"name",index:"index",attributes:"attributes",morphAttributes:"morphAttributes",morphTargetsRelative:"morphTargetsRelative",groups:"groups",boundingBox:"boundingBox",boundingSphere:"boundingSphere",drawRange:"drawRange",userData:"userData"},features:[Ee([]),ge],ngContentSelectors:Ihe,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const Phe=["*"];let Yh=(()=>{class i extends To{getType(){return Dl}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-planeGeometry"]],features:[Ee([{provide:To,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Phe,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const c0=new le("A reference to the raycaster object",{factory:()=>new vd});let $p=(()=>{class i{static#e=this.instanceCnt=0;constructor(){this.raycaster=ee(c0),this.selected=null,this.enabled=!0,this.groups=[],this.paused=!1,this.maxClickDistance=23,this.nid=i.instanceCnt++,this.onPointerMove=this.onPointerMove.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerUp=this.onPointerUp.bind(this)}ngOnDestroy(){this.disable(),this.unsubscribe()}subscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.addEventListener("pointermove",this.onPointerMove),this.canvas.addEventListener("pointerdown",this.onPointerDown),this.canvas.addEventListener("pointerup",this.onPointerUp)}unsubscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.removeEventListener("pointermove",this.onPointerMove),this.canvas.removeEventListener("pointerdown",this.onPointerDown),this.canvas.removeEventListener("pointerup",this.onPointerUp)}enable(){this.enabled=!0}disable(){this.enabled=!1}pause(){this.paused=!0}resume(){this.paused=!1}get isEnabled(){return this.enabled}init(e,n){this.camera=e,this.canvas=n,this.subscribe()}addEventTarget(e){this.groups.push(e)}removeEventTarget(e){const n=this.groups.indexOf(e);n>=0&&this.groups.splice(n,1)}onPointerMove(e){if(!this.isReady())return;const n=this.getFirstIntersectedGroup(e.layerX,e.layerY,"mouseEnter");if((!this.selected||this.selected!==n?.target)&&(this.selected&&(this.selected.host.objRef?.dispatchEvent({type:"mouseExit",component:this.selected.host}),this.selected.emitOnMouseExit(),this.selected=null),n&&n.target)){this.selected=n.target;const r={type:"mouseEnter",component:n.target.host,...n};this.selected.host.objRef?.dispatchEvent(r),this.selected.emitOnMouseEnter(r)}}onPointerDown(e){if(this.maxClickDistance=e.width,this.pointerDownEvent=e,!this.isReady())return;const n=this.getFirstIntersectedGroup(e.layerX,e.layerY,"pointerDown");if(n&&n.target&&n.target.host.objRef){const r={type:"pointerDown",component:n.target.host,...n};n.target.host.objRef.dispatchEvent(r),n.target.emitOnPointerDown(r)}}onPointerUp(e){const n=this.pointerDownEvent;if(this.pointerDownEvent=void 0,!this.isReady())return;let r=this.getFirstIntersectedGroup(e.layerX,e.layerY,"pointerUp");if(r&&r.target&&r.target.host.objRef){const s={type:"pointerUp",component:r.target.host,...r};r.target.host.objRef.dispatchEvent(s),r.target.emitOnPointerUp(s)}if(!(this.calcPointerDownUpDinstance(e,n)>this.maxClickDistance)&&(r=this.getFirstIntersectedGroup(e.layerX,e.layerY,"click"),r&&r.target&&r.target.host.objRef)){const s={type:"click",component:r.target.host,...r};r.target.host.objRef.dispatchEvent(s),r.target.emitOnClick(s)}}isReady(e){return!!(this.enabled&&(e||!this.paused)&&this.camera&&this.camera.objRef&&this.groups&&this.groups.length>0)}calcPointerDownUpDinstance(e,n){if(!n)return Number.MAX_VALUE;const r=e.layerX-n.layerX,s=e.layerY-n.layerY;return Math.sqrt(r*r+s*s)}getFirstIntersectedGroup(e,n,r){if(!this.camera||!this.canvas||!this.camera.objRef)return;const s=new $(e=e/this.canvas.clientWidth*2-1,n=-n/this.canvas.clientHeight*2+1);let o,a;this.raycaster.setFromCamera(s,this.camera.objRef);for(const l of this.groups){const c=l.host.objRef;if(!l[r]||!c)continue;const d=this.raycaster.intersectObject(c,!0);d.length>0&&(!o||o.distance>d[0].distance)&&(o=d[0],a=l)}return a&&o?{target:a,...o}:void 0}static#t=this.\u0275fac=function(n){return new(n||i)};static#i=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})();const khe=["*"],WE=new le("HOST_ELEMENT");let Ha=(()=>{class i{constructor(e,n){this.engServ=e,this.raycaster=n,this.hostElement=ee(WE),this.onRender=new lt}set contentScene(e){e&&(this.scene=e)}set effectComposer(e){this._effectComposer=e,this.configureEffectComposerRenderTarget()}get effectComposer(){return this._effectComposer}set camera(e){this._camera=e,this.initRaycaster()}get camera(){return this._camera}set contentCamera(e){e&&(this.camera=e)}set viewPort(e){this._viewPort=e,this.configureEffectComposerRenderTarget()}get viewPort(){return this._viewPort}ngOnInit(){this.initRaycaster()}initRaycaster(){this.camera&&this.raycaster.init(this.camera,this.hostElement.nativeElement)}add(e){}remove(e){}configureEffectComposerRenderTarget(){if(this.viewPort&&this.effectComposer){let e,n;this.viewPort instanceof fi?(e=this.viewPort.z,n=this.viewPort?.width):(e=this.viewPort.width,n=this.viewPort.height),this.effectComposer.setSize(e,n)}}static#e=this.\u0275fac=function(n){return new(n||i)(P(Td),P($p))};static#t=this.\u0275cmp=pe({type:i,selectors:[["th-view"]],contentQueries:function(n,r,s){if(1&n&&(dn(s,an,5),dn(s,HE,5)),2&n){let o;bt(o=vt())&&(r.contentScene=o.first),bt(o=vt())&&(r.contentCamera=o.first)}},inputs:{scene:"scene",effectComposer:"effectComposer",camera:"camera",shadow:"shadow",viewPort:"viewPort",scissor:"scissor",scissorTest:"scissorTest",clearColor:"clearColor",clearAlpha:"clearAlpha"},outputs:{onRender:"onRender"},features:[Ee([{provide:ht,useExisting:Le(()=>i)},{provide:c0,useValue:new vd},$p])],ngContentSelectors:khe,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2})}return i})();const gz=new C,Fhe=new mi,_z=new C;class $E extends Nt{constructor(t=document.createElement("div")){super(),this.isCSS3DObject=!0,this.element=t,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)})})}copy(t,e){return super.copy(t,e),this.element=t.element.cloneNode(!0),this}}const ia=new je,Lhe=new je;class Ohe{constructor(t={}){const e=this;let n,r,s,o;const a={camera:{style:""},objects:new WeakMap},l=void 0!==t.element?t.element:document.createElement("div");l.style.overflow="hidden",this.domElement=l;const c=document.createElement("div");c.style.transformOrigin="0 0",c.style.pointerEvents="none",l.appendChild(c);const d=document.createElement("div");function u(_){return Math.abs(_)<1e-10?0:_}function h(_){const p=_.elements;return"matrix3d("+u(p[0])+","+u(-p[1])+","+u(p[2])+","+u(p[3])+","+u(p[4])+","+u(-p[5])+","+u(p[6])+","+u(p[7])+","+u(p[8])+","+u(-p[9])+","+u(p[10])+","+u(p[11])+","+u(p[12])+","+u(-p[13])+","+u(p[14])+","+u(p[15])+")"}function f(_){const p=_.elements;return"translate(-50%,-50%)matrix3d("+u(p[0])+","+u(p[1])+","+u(p[2])+","+u(p[3])+","+u(-p[4])+","+u(-p[5])+","+u(-p[6])+","+u(-p[7])+","+u(p[8])+","+u(p[9])+","+u(p[10])+","+u(p[11])+","+u(p[12])+","+u(p[13])+","+u(p[14])+","+u(p[15])+")"}function m(_,p,g,b){if(_.isCSS3DObject){const v=!0===_.visible&&!0===_.layers.test(g.layers);if(_.element.style.display=!0===v?"":"none",!0===v){let y;_.onBeforeRender(e,p,g),_.isCSS3DSprite?(ia.copy(g.matrixWorldInverse),ia.transpose(),0!==_.rotation2D&&ia.multiply(Lhe.makeRotationZ(_.rotation2D)),_.matrixWorld.decompose(gz,Fhe,_z),ia.setPosition(gz),ia.scale(_z),ia.elements[3]=0,ia.elements[7]=0,ia.elements[11]=0,ia.elements[15]=1,y=f(ia)):y=f(_.matrixWorld);const T=_.element,w=a.objects.get(_);void 0!==w&&w.style===y||(T.style.transform=y,a.objects.set(_,{style:y})),T.parentNode!==d&&d.appendChild(T),_.onAfterRender(e,p,g)}}for(let v=0,y=_.children.length;v<y;v++)m(_.children[v],p,g,b)}d.style.transformStyle="preserve-3d",c.appendChild(d),this.getSize=function(){return{width:n,height:r}},this.render=function(_,p){const g=p.projectionMatrix.elements[5]*o;let b,v;p.view&&p.view.enabled?(c.style.transform=`translate( ${n/p.view.width*-p.view.offsetX}px, ${r/p.view.height*-p.view.offsetY}px )`,c.style.transform+=`scale( ${p.view.fullWidth/p.view.width}, ${p.view.fullHeight/p.view.height} )`):c.style.transform="",!0===_.matrixWorldAutoUpdate&&_.updateMatrixWorld(),null===p.parent&&!0===p.matrixWorldAutoUpdate&&p.updateMatrixWorld(),p.isOrthographicCamera&&(b=-(p.right+p.left)/2,v=(p.top+p.bottom)/2);const y=p.view&&p.view.enabled?p.view.height/p.view.fullHeight:1,T=p.isOrthographicCamera?`scale( ${y} )scale(`+g+")translate("+u(b)+"px,"+u(v)+"px)"+h(p.matrixWorldInverse):`scale( ${y} )translateZ(`+g+"px)"+h(p.matrixWorldInverse),M=(p.isPerspectiveCamera?"perspective("+g+"px) ":"")+T+"translate("+s+"px,"+o+"px)";a.camera.style!==M&&(d.style.transform=M,a.camera.style=M),m(_,_,p,T)},this.setSize=function(_,p){n=_,r=p,s=n/2,o=r/2,l.style.width=_+"px",l.style.height=p+"px",c.style.width=_+"px",c.style.height=p+"px",d.style.width=_+"px",d.style.height=p+"px"}}}class bz extends Nt{constructor(t=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=t,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new $(.5,.5),this.addEventListener("removed",function(){this.traverse(function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)})})}copy(t,e){return super.copy(t,e),this.element=t.element.cloneNode(!0),this.center=t.center,this}}const Zh=new C,vz=new je,yz=new je,xz=new C,wz=new C;class Nhe{constructor(t={}){const e=this;let n,r,s,o;const a={objects:new WeakMap},l=void 0!==t.element?t.element:document.createElement("div");function c(f,m,_){if(f.isCSS2DObject){Zh.setFromMatrixPosition(f.matrixWorld),Zh.applyMatrix4(yz);const p=!0===f.visible&&Zh.z>=-1&&Zh.z<=1&&!0===f.layers.test(_.layers);if(f.element.style.display=!0===p?"":"none",!0===p){f.onBeforeRender(e,m,_);const b=f.element;b.style.transform="translate("+-100*f.center.x+"%,"+-100*f.center.y+"%)translate("+(Zh.x*s+s)+"px,"+(-Zh.y*o+o)+"px)",b.parentNode!==l&&l.appendChild(b),f.onAfterRender(e,m,_)}const g={distanceToCameraSquared:d(_,f)};a.objects.set(f,g)}for(let p=0,g=f.children.length;p<g;p++)c(f.children[p],m,_)}function d(f,m){return xz.setFromMatrixPosition(f.matrixWorld),wz.setFromMatrixPosition(m.matrixWorld),xz.distanceToSquared(wz)}l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:n,height:r}},this.render=function(f,m){!0===f.matrixWorldAutoUpdate&&f.updateMatrixWorld(),null===m.parent&&!0===m.matrixWorldAutoUpdate&&m.updateMatrixWorld(),vz.copy(m.matrixWorldInverse),yz.multiplyMatrices(m.projectionMatrix,vz),c(f,f,m),function h(f){const m=function u(f){const m=[];return f.traverse(function(_){_.isCSS2DObject&&m.push(_)}),m}(f).sort(function(p,g){return p.renderOrder!==g.renderOrder?g.renderOrder-p.renderOrder:a.objects.get(p).distanceToCameraSquared-a.objects.get(g).distanceToCameraSquared}),_=m.length;for(let p=0,g=m.length;p<g;p++)m[p].element.style.zIndex=_-p}(f)},this.setSize=function(f,m){n=f,r=m,s=n/2,o=r/2,l.style.width=f+"px",l.style.height=m+"px"}}}const Tz={alpha:!0,antialias:!0,preserveDrawingBuffer:!0},Vl=new le("Renderer Providers"),Mz=new le("CSS3DRenderer"),Sz=new le("CSS2DRenderer"),wd=new le("WebGLRenderer");function d0(i){const t=new hy({...Tz,...i});return Object.assign(t,{...Tz,...i}),[{provide:wd,useValue:t},{provide:Vl,multi:!0,useExisting:wd}]}function Rz(i){return[{provide:Mz,useFactory:()=>{const e=new Ohe(i),n=e.domElement.style;return n.position="absolute",n.top="0px",n.bottom="0px",n.left="0px",n.right="0px",n.overflow="hidden",e}},{provide:Vl,multi:!0,useExisting:Mz}]}function jhe(i){return[{provide:Sz,useFactory:()=>{const e=new Nhe(i),n=e.domElement.style;return n.position="absolute",n.top="0px",n.bottom="0px",n.left="0px",n.right="0px",n.overflow="hidden",e}},{provide:Vl,multi:!0,useExisting:Sz}]}let Td=(()=>{class i{constructor(e){this.ngZone=e,this.hostElement=ee(WE),this.clock=new md,this.destroyed$=new Et,this.resizeEmitter=new lt,this.beforeRenderEmitter=new lt,this.views=[],this.beforeRender$=this.beforeRenderEmitter.pipe(Zi(this.destroyed$)),this.resize$=this.resizeEmitter.pipe(Zi(this.destroyed$));const n=this.initRenderer();this.renderers=n.renderers,this.canvas=n.canvas,this.wegblRenderer=n.mainRenderer,this.initResizeObserver()}ngOnDestroy(){this.resizeObserver&&this.hostElement&&this.resizeObserver.unobserve(this.hostElement.nativeElement)}initResizeObserver(){this.ngZone.runOutsideAngular(()=>{this.initCanvasSize(),this.resizeObserver||(this.resizeObserver=new ResizeObserver(()=>{this.resize()})),this.resizeObserver.observe(this.hostElement.nativeElement)})}initCanvasSize(){this.canvas?.style.setProperty("width","100%"),this.canvas?.style.setProperty("height","100%")}initRenderer(){const e=ee(Vl);let n,r;for(const s of e)s.domElement instanceof HTMLCanvasElement&&(r=s,n=r.domElement);if(!e||e.length<1)throw new Error("missing Canvas Renderer");return{canvas:n,mainRenderer:r,renderers:e}}setViews(e){this.views=e}addView(e){this.views.push(e);const n=this.calcRendererSize();n&&this.adjustViewDimensions(e,n.width,n.height)}render(){this.beforeRenderEmitter.emit({engine:this,delta:this.clock.getDelta()});for(const e of this.views)this.renderView(e)}renderView(e){const n=e.camera,r=e.scene;if(n&&r&&n.objRef&&r.objRef){UE(e.onRender)&&this.ngZone.run(()=>e.onRender.emit({renderer:this.renderers,scene:r,camera:n}));for(const s of this.renderers)if(!e.effectComposer||s instanceof hy){if(this.applyRendererParametersFromView(e,s),e.effectComposer)return void e.effectComposer.render();s.render(r.objRef,n.objRef)}}}applyRendererParametersFromView(e,n){e.viewPort&&n.setViewport&&(e.viewPort instanceof fi?n.setViewport(e.viewPort):n.setViewport(e.viewPort.x,e.viewPort.y,e.viewPort.width,e.viewPort.height)),e.scissor&&n.setScissor&&(e.scissor instanceof fi?n.setScissor(e.scissor):n.setScissor(e.scissor.x,e.scissor.y,e.scissor.width,e.scissor.height)),void 0!==e.scissorTest&&n.setScissorTest&&n.setScissorTest(e.scissorTest),e.clearColor&&n.setClearColor&&n.setClearColor(e.clearColor),void 0!==e.clearAlpha&&n.setClearAlpha&&n.setClearAlpha(e.clearAlpha),void 0!==e.shadow&&n.shadowMap&&(n.shadowMap.enabled=!0)}resize(){const{width:e,height:n}=this.calcRendererSize();this.renderers?.forEach(r=>r.setSize(e,n,!1));for(const r of this.views)this.adjustViewDimensions(r,e,n);return this.resizeEmitter.emit({width:e,height:n}),!0}calcRendererSize(){return{width:this.hostElement.nativeElement.clientWidth??0,height:this.hostElement.nativeElement.clientHeight??0}}adjustViewDimensions(e,n,r){e.viewPort||(e.camera&&e.camera.objRef.aspect&&(e.camera.objRef.aspect=n/r,e.camera.objRef.updateProjectionMatrix()),e.effectComposer?.setSize(n,r))}static#e=this.\u0275fac=function(n){return new(n||i)(ue(it))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})(),Xp=(()=>{class i{constructor(e,n){this.engineService=e,this.ngZone=n,this.active=!0,this.destroyed$=new Et,this.beforeRender$=this.engineService.beforeRender$,this.engineService.resize$.pipe(Zi(this.destroyed$)).subscribe(()=>this.requestAnimationFrame())}ngOnDestroy(){this.stop(),this.destroyed$.next(),this.destroyed$.complete()}start(){this.active||(this.active=!0,this.requestAnimationFrame())}stop(){this.active=!1,void 0!==this.frameId&&(cancelAnimationFrame(this.frameId),this.frameId=void 0)}isActive(){return this.active}requestAnimationFrame(){void 0===this.frameId&&this.ngZone.runOutsideAngular(()=>this.frameId=requestAnimationFrame(()=>{this.frameId=void 0,this.engineService.render(),this.active&&this.requestAnimationFrame()}))}static#e=this.\u0275fac=function(n){return new(n||i)(ue(Td),ue(it))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})();const Bhe=["*"];function Uhe(i,t){1&i&&Ce(0,0,["*ngIf","isDevMode()"])}function Vhe(){return[{provide:Vl,useFactory:()=>ee(Vl,{skipSelf:!0,optional:!0})||[d0()[0].useValue]},{provide:wd,useFactory:()=>{const i=ee(wd,{skipSelf:!0,optional:!0});if(i)return i;const t=ee(Vl),e=t[0];return 1===t.length&&e instanceof hy?e:void 0}}]}let Xi=(()=>{class i extends Ha{static#e=this.instanceCnt=0;get obj(){return this}set views(e){this.setViews(e)}get rendererCanvas(){return this.engServ.canvas}constructor(e,n,r,s){super(e,r),this.engServ=e,this.animationLoop=n,this.raycaster=r,this.elementRef=s,this.isDevMode=SQ,this.nid=i.instanceCnt++,this.disableDefaultView=!1,this.engServ.renderers.forEach(o=>this.elementRef.nativeElement.appendChild(o.domElement))}ngAfterContentChecked(){this.animationLoop.requestAnimationFrame()}ngAfterViewInit(){this.animationLoop.requestAnimationFrame()}ngOnInit(){this.engServ.resize(),super.ngOnInit(),this.setViews()}setViews(e){this.engServ.setViews([]),this.disableDefaultView||this.engServ.addView(this),e?.forEach(n=>this.engServ.addView(n))}static#t=this.\u0275fac=function(n){return new(n||i)(P(Td),P(Xp),P(Le(()=>$p)),P(xt))};static#i=this.\u0275cmp=pe({type:i,selectors:[["th-canvas"]],contentQueries:function(n,r,s){if(1&n&&dn(s,Ha,4),2&n){let o;bt(o=vt())&&(r.views=o)}},inputs:{disableDefaultView:"disableDefaultView"},features:[Ee([{provide:WE,useFactory:()=>ee(xt)},{provide:ht,useExisting:Le(()=>i)},Td,Xp,{provide:c0,useValue:new vd},Le(()=>$p),{provide:Ha,useExisting:Le(()=>i)},Vhe()]),ge],ngContentSelectors:Bhe,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(n,r){1&n&&(ze(),si(0,Uhe,1,0,"ng-content",0)),2&n&&O("ngIf",r.isDevMode())},dependencies:[ev],styles:["[_nghost-%COMP%]{display:flex;flex:auto;line-height:0;height:100%}canvas[_ngcontent-%COMP%]{flex:auto;outline:none;width:100%;height:100%}"],changeDetection:0})}return i})();var qp=function(){var i=0,t=document.createElement("div");function e(d){return t.appendChild(d.dom),d}function n(d){for(var u=0;u<t.children.length;u++)t.children[u].style.display=u===d?"block":"none";i=d}t.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",t.addEventListener("click",function(d){d.preventDefault(),n(++i%t.children.length)},!1);var r=(performance||Date).now(),s=r,o=0,a=e(new qp.Panel("FPS","#0ff","#002")),l=e(new qp.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=e(new qp.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:t,addPanel:e,showPanel:n,begin:function(){r=(performance||Date).now()},end:function(){o++;var d=(performance||Date).now();if(l.update(d-r,200),d>=s+1e3&&(a.update(1e3*o/(d-s),100),s=d,o=0,c)){var u=performance.memory;c.update(u.usedJSHeapSize/1048576,u.jsHeapSizeLimit/1048576)}return d},update:function(){r=this.end()},domElement:t,setMode:n}};qp.Panel=function(i,t,e){var n=1/0,r=0,s=Math.round,o=s(window.devicePixelRatio||1),a=80*o,l=48*o,c=3*o,d=2*o,u=3*o,h=15*o,f=74*o,m=30*o,_=document.createElement("canvas");_.width=a,_.height=l,_.style.cssText="width:80px;height:48px";var p=_.getContext("2d");return p.font="bold "+9*o+"px Helvetica,Arial,sans-serif",p.textBaseline="top",p.fillStyle=e,p.fillRect(0,0,a,l),p.fillStyle=t,p.fillText(i,c,d),p.fillRect(u,h,f,m),p.fillStyle=e,p.globalAlpha=.9,p.fillRect(u,h,f,m),{dom:_,update:function(g,b){n=Math.min(n,g),r=Math.max(r,g),p.fillStyle=e,p.globalAlpha=1,p.fillRect(0,0,a,h),p.fillStyle=t,p.fillText(s(g)+" "+i+" ("+s(n)+"-"+s(r)+")",c,d),p.drawImage(_,u+o,h,f-o,m,u,h,f-o,m),p.fillRect(u+f-o,h,o,m),p.fillStyle=e,p.globalAlpha=.9,p.fillRect(u+f-o,h,o,s((1-g/b)*m))}}};const zhe=qp;let Mo=(()=>{class i{constructor(e,n){this.engineService=e,this.canvas=n,this.stats=new zhe}ngOnDestroy(){this.renderSubscription&&this.renderSubscription.unsubscribe()}ngOnInit(){if(!this.canvas.elementRef)throw new Error("No canvas present");const e=this.canvas.elementRef.nativeElement;e&&(e.style.position="relative",this.stats.dom.style.position="absolute",this.stats.showPanel(0),e.appendChild(this.stats.dom),this.renderSubscription=this.engineService.beforeRender$.subscribe(()=>{this.stats.update()}))}set thStats(e){this.stats.dom.style.visibility=e?"visible":"hidden"}static#e=this.\u0275fac=function(n){return new(n||i)(P(Td),P(Xi))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","thStats",""]],inputs:{thStats:"thStats"}})}return i})();const Cz="https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/assets/",ss="assets/";function Az(i,t){if(t===w3)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(t===jv||t===uC){let e=i.getIndex();if(null===e){const o=[],a=i.getAttribute("position");if(void 0===a)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i;for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),e=i.getIndex()}const n=e.count-2,r=[];if(t===jv)for(let o=1;o<=n;o++)r.push(e.getX(0)),r.push(e.getX(o)),r.push(e.getX(o+1));else for(let o=0;o<n;o++)o%2==0?(r.push(e.getX(o)),r.push(e.getX(o+1)),r.push(e.getX(o+2))):(r.push(e.getX(o+2)),r.push(e.getX(o+1)),r.push(e.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),i}class Hhe extends Tr{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new qhe(e)}),this.register(function(e){return new Yhe(e)}),this.register(function(e){return new rfe(e)}),this.register(function(e){return new sfe(e)}),this.register(function(e){return new ofe(e)}),this.register(function(e){return new Khe(e)}),this.register(function(e){return new Qhe(e)}),this.register(function(e){return new Jhe(e)}),this.register(function(e){return new efe(e)}),this.register(function(e){return new Xhe(e)}),this.register(function(e){return new tfe(e)}),this.register(function(e){return new Zhe(e)}),this.register(function(e){return new nfe(e)}),this.register(function(e){return new ife(e)}),this.register(function(e){return new Whe(e)}),this.register(function(e){return new afe(e)}),this.register(function(e){return new lfe(e)})}load(t,e,n,r){const s=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const c=Nl.extractUrlBase(t);o=Nl.resolveURL(c,this.path)}else o=Nl.extractUrlBase(t);this.manager.itemStart(t);const a=function(c){r?r(c):console.error(c),s.manager.itemError(t),s.manager.itemEnd(t)},l=new rs(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(c){try{s.parse(c,o,function(d){e(d),s.manager.itemEnd(t)},a)}catch(d){a(d)}},n,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,r){let s;const o={},a={},l=new TextDecoder;if("string"==typeof t)s=JSON.parse(t);else if(t instanceof ArrayBuffer)if(l.decode(new Uint8Array(t,0,4))===Dz){try{o[ai.KHR_BINARY_GLTF]=new cfe(t)}catch(u){return void(r&&r(u))}s=JSON.parse(o[ai.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(t));else s=t;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new wfe(s,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const u=this.pluginCallbacks[d](c);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let d=0;d<s.extensionsUsed.length;++d){const u=s.extensionsUsed[d],h=s.extensionsRequired||[];switch(u){case ai.KHR_MATERIALS_UNLIT:o[u]=new $he;break;case ai.KHR_DRACO_MESH_COMPRESSION:o[u]=new dfe(s,this.dracoLoader);break;case ai.KHR_TEXTURE_TRANSFORM:o[u]=new ufe;break;case ai.KHR_MESH_QUANTIZATION:o[u]=new hfe;break;default:h.indexOf(u)>=0&&void 0===a[u]&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(n,r)}parseAsync(t,e){const n=this;return new Promise(function(r,s){n.parse(t,e,r,s)})}}function Ghe(){let i={};return{get:function(t){return i[t]},add:function(t,e){i[t]=e},remove:function(t){delete i[t]},removeAll:function(){i={}}}}const ai={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Whe{constructor(t){this.parser=t,this.name=ai.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,r=e.length;n<r;n++){const s=e[n];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&t._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let r=e.cache.get(n);if(r)return r;const s=e.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[t];let c;const d=new Te(16777215);void 0!==l.color&&d.setRGB(l.color[0],l.color[1],l.color[2],Yn);const u=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new Ky(d),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Zy(d),c.distance=u;break;case"spot":c=new AE(d),c.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Hl(c,l),void 0!==l.intensity&&(c.intensity=l.intensity),c.name=e.createUniqueName(l.name||"light_"+t),r=Promise.resolve(c),e.cache.add(n,r),r}getDependency(t,e){if("light"===t)return this._loadLight(e)}createNodeAttachment(t){const e=this,n=this.parser,s=n.json.nodes[t],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return n._getNodeRef(e.cache,a,l)})}}class $he{constructor(){this.name=ai.KHR_MATERIALS_UNLIT}getMaterialType(){return Zn}extendParams(t,e,n){const r=[];t.color=new Te(1,1,1),t.opacity=1;const s=e.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;t.color.setRGB(o[0],o[1],o[2],Yn),t.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(n.assignTexture(t,"map",s.baseColorTexture,qn))}return Promise.all(r)}}class Xhe{constructor(t){this.parser=t,this.name=ai.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(e.emissiveIntensity=s),Promise.resolve()}}class qhe{constructor(t){this.parser=t,this.name=ai.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Hs:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(e.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(n.assignTexture(e,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(e.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(n.assignTexture(e,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(n.assignTexture(e,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new $(a,a)}return Promise.all(s)}}class Yhe{constructor(t){this.parser=t,this.name=ai.KHR_MATERIALS_DISPERSION}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Hs:null}extendMaterialParams(t,e){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return e.dispersion=void 0!==s.dispersion?s.dispersion:0,Promise.resolve()}}class Zhe{constructor(t){this.parser=t,this.name=ai.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Hs:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(e.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(n.assignTexture(e,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(e.iridescenceIOR=o.iridescenceIor),void 0===e.iridescenceThicknessRange&&(e.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(e.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(e.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(n.assignTexture(e,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Khe{constructor(t){this.parser=t,this.name=ai.KHR_MATERIALS_SHEEN}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Hs:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];e.sheenColor=new Te(0,0,0),e.sheenRoughness=0,e.sheen=1;const o=r.extensions[this.name];if(void 0!==o.sheenColorFactor){const a=o.sheenColorFactor;e.sheenColor.setRGB(a[0],a[1],a[2],Yn)}return void 0!==o.sheenRoughnessFactor&&(e.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(n.assignTexture(e,"sheenColorMap",o.sheenColorTexture,qn)),void 0!==o.sheenRoughnessTexture&&s.push(n.assignTexture(e,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Qhe{constructor(t){this.parser=t,this.name=ai.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Hs:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(e.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(n.assignTexture(e,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Jhe{constructor(t){this.parser=t,this.name=ai.KHR_MATERIALS_VOLUME}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Hs:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];e.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(n.assignTexture(e,"thicknessMap",o.thicknessTexture)),e.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return e.attenuationColor=(new Te).setRGB(a[0],a[1],a[2],Yn),Promise.all(s)}}class efe{constructor(t){this.parser=t,this.name=ai.KHR_MATERIALS_IOR}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Hs:null}extendMaterialParams(t,e){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return e.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class tfe{constructor(t){this.parser=t,this.name=ai.KHR_MATERIALS_SPECULAR}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Hs:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];e.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(n.assignTexture(e,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return e.specularColor=(new Te).setRGB(a[0],a[1],a[2],Yn),void 0!==o.specularColorTexture&&s.push(n.assignTexture(e,"specularColorMap",o.specularColorTexture,qn)),Promise.all(s)}}class ife{constructor(t){this.parser=t,this.name=ai.EXT_MATERIALS_BUMP}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Hs:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return e.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&s.push(n.assignTexture(e,"bumpMap",o.bumpTexture)),Promise.all(s)}}class nfe{constructor(t){this.parser=t,this.name=ai.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Hs:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.anisotropyStrength&&(e.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(e.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&s.push(n.assignTexture(e,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class rfe{constructor(t){this.parser=t,this.name=ai.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,r=n.textures[t];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=e.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,s.source,o)}}class sfe{constructor(t){this.parser=t,this.name=ai.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,r=n.json,s=r.textures[t];if(!s.extensions||!s.extensions[e])return null;const o=s.extensions[e],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(t,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}})),this.isSupported}}class ofe{constructor(t){this.parser=t,this.name=ai.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,r=n.json,s=r.textures[t];if(!s.extensions||!s.extensions[e])return null;const o=s.extensions[e],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(t,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(1===e.height)}})),this.isSupported}}class afe{constructor(t){this.name=ai.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const d=r.count,u=r.byteStride,h=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(d,u,h,r.mode,r.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(d*u);return o.decodeGltfBuffer(new Uint8Array(f),d,u,h,r.mode,r.filter),f})})}return null}}class lfe{constructor(t){this.name=ai.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,n=e.nodes[t];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=e.meshes[n.mesh];for(const c of r.primitives)if(c.mode!==Gs.TRIANGLES&&c.mode!==Gs.TRIANGLE_STRIP&&c.mode!==Gs.TRIANGLE_FAN&&void 0!==c.mode)return null;const o=n.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(d=>(l[c]=d,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(t)),Promise.all(a).then(c=>{const d=c.pop(),u=d.isGroup?d.children:[d],h=c[0].count,f=[];for(const m of u){const _=new je,p=new C,g=new mi,b=new C(1,1,1),v=new xy(m.geometry,m.material,h);for(let y=0;y<h;y++)l.TRANSLATION&&p.fromBufferAttribute(l.TRANSLATION,y),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,y),l.SCALE&&b.fromBufferAttribute(l.SCALE,y),v.setMatrixAt(y,_.compose(p,g,b));for(const y in l)if("_COLOR_0"===y){const T=l[y];v.instanceColor=new nd(T.array,T.itemSize,T.normalized)}else"TRANSLATION"!==y&&"ROTATION"!==y&&"SCALE"!==y&&m.geometry.setAttribute(y,l[y]);Nt.prototype.copy.call(v,m),this.parser.assignFinalMaterial(v),f.push(v)}return d.isGroup?(d.clear(),d.add(...f),d):f[0]}))}}const Dz="glTF";class cfe{constructor(t){this.name=ai.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==Dz)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,s=new DataView(t,12);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,1313821514===l){const c=new Uint8Array(t,12+o,a);this.content=n.decode(c)}else if(5130562===l){const c=12+o;this.body=t.slice(c,c+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class dfe{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ai.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,r=this.dracoLoader,s=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,a={},l={},c={};for(const d in o){const u=YE[d]||d.toLowerCase();a[u]=o[d]}for(const d in t.attributes){const u=YE[d]||d.toLowerCase();if(void 0!==o[d]){const h=n.accessors[t.attributes[d]];c[u]=Kh[h.componentType].name,l[u]=!0===h.normalized}}return e.getDependency("bufferView",s).then(function(d){return new Promise(function(u,h){r.decodeDracoFile(d,function(f){for(const m in f.attributes){const p=l[m];void 0!==p&&(f.attributes[m].normalized=p)}u(f)},a,c,Yn,h)})})}}class ufe{constructor(){this.name=ai.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(void 0===e.texCoord||e.texCoord===t.channel)&&void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(t=t.clone(),void 0!==e.texCoord&&(t.channel=e.texCoord),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class hfe{constructor(){this.name=ai.KHR_MESH_QUANTIZATION}}class Pz extends Xh{constructor(t,e,n,r){super(t,e,n,r)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=t*r*3+r;for(let o=0;o!==r;o++)e[o]=n[s+o];return e}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=2*a,c=3*a,d=r-e,u=(n-e)/d,h=u*u,f=h*u,m=t*c,_=m-c,p=-2*f+3*h,g=f-h,b=1-p,v=g-h+u;for(let y=0;y!==a;y++)s[y]=b*o[_+y+a]+v*(o[_+y+l]*d)+p*o[m+y+a]+g*(o[m+y]*d);return s}}const ffe=new mi;class mfe extends Pz{interpolate_(t,e,n,r){const s=super.interpolate_(t,e,n,r);return ffe.fromArray(s).normalize().toArray(s),s}}const Gs={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Kh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},kz={9728:ci,9729:fn,9984:Av,9985:ph,9986:Bc,9987:js},Fz={33071:ws,33648:mh,10497:Ko},qE={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},YE={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},zl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},pfe={CUBICSPLINE:void 0,LINEAR:zc,STEP:gh};function Md(i,t,e){for(const n in e.extensions)void 0===i[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=e.extensions[n])}function Hl(i,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(i.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function bfe(i,t){if(i.updateMorphTargets(),void 0!==t.weights)for(let e=0,n=t.weights.length;e<n;e++)i.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(i.morphTargetInfluences.length===e.length){i.morphTargetDictionary={};for(let n=0,r=e.length;n<r;n++)i.morphTargetDictionary[e[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function vfe(i){let t;const e=i.extensions&&i.extensions[ai.KHR_DRACO_MESH_COMPRESSION];if(t=e?"draco:"+e.bufferView+":"+e.indices+":"+KE(e.attributes):i.indices+":"+KE(i.attributes)+":"+i.mode,void 0!==i.targets)for(let n=0,r=i.targets.length;n<r;n++)t+=":"+KE(i.targets[n]);return t}function KE(i){let t="";const e=Object.keys(i).sort();for(let n=0,r=e.length;n<r;n++)t+=e[n]+":"+i[e[n]]+";";return t}function QE(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const xfe=new je;class wfe{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new Ghe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,s=-1;typeof navigator<"u"&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),this.textureLoader=typeof createImageBitmap>"u"||n||r&&s<98?new kV(this.options.manager):new GV(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new rs(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};return Md(s,a,r),Hl(a,r),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();t(a)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=e.length;r<s;r++){const o=e[r].joints;for(let a=0,l=o.length;a<l;a++)t[o[a]].isBone=!0}for(let r=0,s=t.length;r<s;r++){const o=t[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(n[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const r=n.clone(),s=(o,a)=>{const l=this.associations.get(o);null!=l&&this.associations.set(a,l);for(const[c,d]of o.children.entries())s(d,a.children[c])};return s(n,r),r.name+="_instance_"+t.uses[e]++,r}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const r=t(e[n]);if(r)return r}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let r=0;r<e.length;r++){const s=t(e[r]);s&&n.push(s)}return n}getDependency(t,e){const n=t+":"+e;let r=this.cache.get(n);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(e)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(e)});break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(e)});break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(e)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(e)});break;case"skin":r=this.loadSkin(e);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(e)});break;case"camera":r=this.loadCamera(e);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(t,e)}),!r)throw new Error("Unknown type: "+t)}this.cache.add(n,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this;e=Promise.all((this.json[t+("mesh"===t?"es":"s")]||[]).map(function(s,o){return n.getDependency(t,o)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[ai.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(Nl.resolveURL(e.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(n){const s=e.byteOffset||0;return n.slice(s,s+(e.byteLength||0))})}loadAccessor(t){const e=this,n=this.json,r=this.json.accessors[t];if(void 0===r.bufferView&&void 0===r.sparse){const o=qE[r.type],l=!0===r.normalized,c=new(0,Kh[r.componentType])(r.count*o);return Promise.resolve(new ui(c,o,l))}const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=qE[r.type],c=Kh[r.componentType],d=c.BYTES_PER_ELEMENT,h=r.byteOffset||0,f=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,m=!0===r.normalized;let _,p;if(f&&f!==d*l){const g=Math.floor(h/f),b="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let v=e.cache.get(b);v||(_=new c(a,g*f,r.count*f/d),v=new Rp(_,f/d),e.cache.add(b,v)),p=new Pl(v,l,h%f/d,m)}else _=null===a?new c(r.count*l):new c(a,h,r.count*l),p=new ui(_,l,m);if(void 0!==r.sparse){const y=r.sparse.values.byteOffset||0,T=new(0,Kh[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*qE.SCALAR),w=new c(o[2],y,r.sparse.count*l);null!==a&&(p=new ui(p.array.slice(),p.itemSize,p.normalized));for(let M=0,D=T.length;M<D;M++){const S=T[M];if(p.setX(S,w[M*l]),l>=2&&p.setY(S,w[M*l+1]),l>=3&&p.setZ(S,w[M*l+2]),l>=4&&p.setW(S,w[M*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p})}loadTexture(t){const e=this.json,s=e.textures[t].source,o=e.images[s];let a=this.textureLoader;if(o.uri){const l=this.options.manager.getHandler(o.uri);null!==l&&(a=l)}return this.loadTextureImage(t,s,a)}loadTextureImage(t,e,n){const r=this,s=this.json,o=s.textures[t],a=s.images[e],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(e,n).then(function(d){d.flipY=!1,d.name=o.name||a.name||"",""===d.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(d.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return d.magFilter=kz[h.magFilter]||fn,d.minFilter=kz[h.minFilter]||js,d.wrapS=Fz[h.wrapS]||Ko,d.wrapT=Fz[h.wrapT]||Ko,r.associations.set(d,{textures:t}),d}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(t,e){const r=this.json,s=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then(u=>u.clone());const o=r.images[t],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=this.getDependency("bufferView",o.bufferView).then(function(u){c=!0;const h=new Blob([u],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(u){return new Promise(function(h,f){let m=h;!0===e.isImageBitmapLoader&&(m=function(_){const p=new Sn(_);p.needsUpdate=!0,h(p)}),e.load(Nl.resolveURL(u,s.path),m,void 0,f)})}).then(function(u){return!0===c&&a.revokeObjectURL(l),u.userData.mimeType=o.mimeType||function yfe(i){return i.search(/\.jpe?g($|\?)/i)>0||0===i.search(/^data\:image\/jpeg/)?"image/jpeg":i.search(/\.webp($|\?)/i)>0||0===i.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),u});return this.sourceCache[t]=d,d}assignTexture(t,e,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((o=o.clone()).channel=n.texCoord),s.extensions[ai.KHR_TEXTURE_TRANSFORM]){const a=void 0!==n.extensions?n.extensions[ai.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[ai.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return void 0!==r&&(o.colorSpace=r),t[e]=o,o})}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const r=void 0===e.attributes.tangent,s=void 0!==e.attributes.color,o=void 0===e.attributes.normal;if(t.isPoints){const a="PointsMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new Ey,kn.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(a,l)),n=l}else if(t.isLine){const a="LineBasicMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new Ln,kn.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(a,l)),n=l}if(r||s||o){let a="ClonedMaterial:"+n.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=n.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(n))),n=l}t.material=n}getMaterialType(){return ta}loadMaterial(t){const e=this,r=this.extensions,s=this.json.materials[t];let o;const a={},c=[];if((s.extensions||{})[ai.KHR_MATERIALS_UNLIT]){const u=r[ai.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),c.push(u.extendParams(a,s,e))}else{const u=s.pbrMetallicRoughness||{};if(a.color=new Te(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const h=u.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],Yn),a.opacity=h[3]}void 0!==u.baseColorTexture&&c.push(e.assignTexture(a,"map",u.baseColorTexture,qn)),a.metalness=void 0!==u.metallicFactor?u.metallicFactor:1,a.roughness=void 0!==u.roughnessFactor?u.roughnessFactor:1,void 0!==u.metallicRoughnessTexture&&(c.push(e.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),c.push(e.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(t)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(t,a)})))}!0===s.doubleSided&&(a.side=Br);const d=s.alphaMode||"OPAQUE";if("BLEND"===d?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===d&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==Zn&&(c.push(e.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new $(1,1),void 0!==s.normalTexture.scale)){const u=s.normalTexture.scale;a.normalScale.set(u,u)}if(void 0!==s.occlusionTexture&&o!==Zn&&(c.push(e.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==Zn){const u=s.emissiveFactor;a.emissive=(new Te).setRGB(u[0],u[1],u[2],Yn)}return void 0!==s.emissiveTexture&&o!==Zn&&c.push(e.assignTexture(a,"emissiveMap",s.emissiveTexture,qn)),Promise.all(c).then(function(){const u=new o(a);return s.name&&(u.name=s.name),Hl(u,s),e.associations.set(u,{materials:t}),s.extensions&&Md(r,u,s),u})}createUniqueName(t){const e=Fi.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){const e=this,n=this.extensions,r=this.primitiveCache;function s(a){return n[ai.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,e).then(function(l){return Lz(l,a,e)})}const o=[];for(let a=0,l=t.length;a<l;a++){const c=t[a],d=vfe(c),u=r[d];if(u)o.push(u.promise);else{let h;h=c.extensions&&c.extensions[ai.KHR_DRACO_MESH_COMPRESSION]?s(c):Lz(new pt,c,e),r[d]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(t){const e=this,r=this.extensions,s=this.json.meshes[t],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const d=void 0===o[l].material?(void 0===(i=this.cache).DefaultMaterial&&(i.DefaultMaterial=new ta({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Yo})),i.DefaultMaterial):this.getDependency("material",o[l].material);a.push(d)}var i;return a.push(e.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),d=l[l.length-1],u=[];for(let f=0,m=d.length;f<m;f++){const _=d[f],p=o[f];let g;const b=c[f];if(p.mode===Gs.TRIANGLES||p.mode===Gs.TRIANGLE_STRIP||p.mode===Gs.TRIANGLE_FAN||void 0===p.mode)g=!0===s.isSkinnedMesh?new eE(_,b):new Be(_,b),!0===g.isSkinnedMesh&&g.normalizeSkinWeights(),p.mode===Gs.TRIANGLE_STRIP?g.geometry=Az(g.geometry,uC):p.mode===Gs.TRIANGLE_FAN&&(g.geometry=Az(g.geometry,jv));else if(p.mode===Gs.LINES)g=new zs(_,b);else if(p.mode===Gs.LINE_STRIP)g=new En(_,b);else if(p.mode===Gs.LINE_LOOP)g=new rE(_,b);else{if(p.mode!==Gs.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);g=new oE(_,b)}Object.keys(g.geometry.morphAttributes).length>0&&bfe(g,s),g.name=e.createUniqueName(s.name||"mesh_"+t),Hl(g,s),p.extensions&&Md(r,g,p),e.assignFinalMaterial(g),u.push(g)}for(let f=0,m=u.length;f<m;f++)e.associations.set(u[f],{meshes:t,primitives:f});if(1===u.length)return s.extensions&&Md(r,u[0],s),u[0];const h=new yo;s.extensions&&Md(r,h,s),e.associations.set(h,{meshes:t});for(let f=0,m=u.length;f<m;f++)h.add(u[f]);return h})}loadCamera(t){let e;const n=this.json.cameras[t],r=n[n.type];if(r)return"perspective"===n.type?e=new Cn(st.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(e=new Il(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),Hl(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],n=[];for(let r=0,s=e.joints.length;r<s;r++)n.push(this._loadNodeShallow(e.joints[r]));return n.push(void 0!==e.inverseBindMatrices?this.getDependency("accessor",e.inverseBindMatrices):null),Promise.all(n).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,d=o.length;c<d;c++){const u=o[c];if(u){a.push(u);const h=new je;null!==s&&h.fromArray(s.array,16*c),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[c])}return new Dp(a,l)})}loadAnimation(t){const n=this,r=this.json.animations[t],s=r.name?r.name:"animation_"+t,o=[],a=[],l=[],c=[],d=[];for(let u=0,h=r.channels.length;u<h;u++){const f=r.channels[u],m=r.samplers[f.sampler],_=f.target,g=void 0!==r.parameters?r.parameters[m.input]:m.input,b=void 0!==r.parameters?r.parameters[m.output]:m.output;void 0!==_.node&&(o.push(this.getDependency("node",_.node)),a.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",b)),c.push(m),d.push(_))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(d)]).then(function(u){const h=u[0],f=u[1],m=u[2],_=u[3],p=u[4],g=[];for(let b=0,v=h.length;b<v;b++){const y=h[b],T=f[b],w=m[b],M=_[b],D=p[b];if(void 0===y)continue;y.updateMatrix&&y.updateMatrix();const S=n._createAnimationTracks(y,T,w,M,D);if(S)for(let x=0;x<S.length;x++)g.push(S[x])}return new qh(s,void 0,g)})}createNodeMesh(t){const n=this,r=this.json.nodes[t];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(t){const n=this,r=this.json.nodes[t],s=n._loadNodeShallow(t),o=[],a=r.children||[];for(let c=0,d=a.length;c<d;c++)o.push(n.getDependency("node",a[c]));const l=void 0===r.skin?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const d=c[0],u=c[1],h=c[2];null!==h&&d.traverse(function(f){f.isSkinnedMesh&&f.bind(h,xfe)});for(let f=0,m=u.length;f<m;f++)d.add(u[f]);return d})}_loadNodeShallow(t){const n=this.extensions,r=this;if(void 0!==this.nodeCache[t])return this.nodeCache[t];const s=this.json.nodes[t],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(t)});return l&&a.push(l),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(t)}).forEach(function(c){a.push(c)}),this.nodeCache[t]=Promise.all(a).then(function(c){let d;if(d=!0===s.isBone?new vy:c.length>1?new yo:1===c.length?c[0]:new Nt,d!==c[0])for(let u=0,h=c.length;u<h;u++)d.add(c[u]);if(s.name&&(d.userData.name=s.name,d.name=o),Hl(d,s),s.extensions&&Md(n,d,s),void 0!==s.matrix){const u=new je;u.fromArray(s.matrix),d.applyMatrix4(u)}else void 0!==s.translation&&d.position.fromArray(s.translation),void 0!==s.rotation&&d.quaternion.fromArray(s.rotation),void 0!==s.scale&&d.scale.fromArray(s.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=t,d}),this.nodeCache[t]}loadScene(t){const e=this.extensions,n=this.json.scenes[t],r=this,s=new yo;n.name&&(s.name=r.createUniqueName(n.name)),Hl(s,n),n.extensions&&Md(e,s,n);const o=n.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let d=0,u=l.length;d<u;d++)s.add(l[d]);return r.associations=(d=>{const u=new Map;for(const[h,f]of r.associations)(h instanceof kn||h instanceof Sn)&&u.set(h,f);return d.traverse(h=>{const f=r.associations.get(h);null!=f&&u.set(h,f)}),u})(s),s})}_createAnimationTracks(t,e,n,r,s){const o=[],a=t.name?t.name:t.uuid,l=[];let c;switch(zl[s.path]===zl.weights?t.traverse(function(h){h.morphTargetInfluences&&l.push(h.name?h.name:h.uuid)}):l.push(a),zl[s.path]){case zl.weights:c=dd;break;case zl.rotation:c=Ll;break;case zl.position:case zl.scale:c=hd;break;default:c=1===n.itemSize?dd:hd}const d=void 0!==r.interpolation?pfe[r.interpolation]:zc,u=this._getArrayFromAccessor(n);for(let h=0,f=l.length;h<f;h++){const m=new c(l[h]+"."+zl[s.path],e.array,u,d);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(m),o.push(m)}return o}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){const n=QE(e.constructor),r=new Float32Array(e.length);for(let s=0,o=e.length;s<o;s++)r[s]=e[s]*n;e=r}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(n){return new(this instanceof Ll?mfe:Pz)(this.times,this.values,this.getValueSize()/3,n)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Lz(i,t,e){const n=t.attributes,r=[];function s(o,a){return e.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in n){const a=YE[o]||o.toLowerCase();a in i.attributes||r.push(s(n[o],a))}if(void 0!==t.indices&&!i.index){const o=e.getDependency("accessor",t.indices).then(function(a){i.setIndex(a)});r.push(o)}return xi.workingColorSpace!==Yn&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${xi.workingColorSpace}" not supported.`),Hl(i,t),function Tfe(i,t,e){const n=t.attributes,r=new ir;if(void 0===n.POSITION)return;{const a=e.json.accessors[n.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new C(l[0],l[1],l[2]),new C(c[0],c[1],c[2])),a.normalized){const d=QE(Kh[a.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}const s=t.targets;if(void 0!==s){const a=new C,l=new C;for(let c=0,d=s.length;c<d;c++){const u=s[c];if(void 0!==u.POSITION){const h=e.json.accessors[u.POSITION],f=h.min,m=h.max;if(void 0!==f&&void 0!==m){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(m[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(m[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(m[2]))),h.normalized){const _=QE(Kh[h.componentType]);l.multiplyScalar(_)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}i.boundingBox=r;const o=new nr;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}(i,t,e),Promise.all(r).then(function(){return void 0!==t.targets?function _fe(i,t,e){let n=!1,r=!1,s=!1;for(let c=0,d=t.length;c<d;c++){const u=t[c];if(void 0!==u.POSITION&&(n=!0),void 0!==u.NORMAL&&(r=!0),void 0!==u.COLOR_0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],a=[],l=[];for(let c=0,d=t.length;c<d;c++){const u=t[c];if(n){const h=void 0!==u.POSITION?e.getDependency("accessor",u.POSITION):i.attributes.position;o.push(h)}if(r){const h=void 0!==u.NORMAL?e.getDependency("accessor",u.NORMAL):i.attributes.normal;a.push(h)}if(s){const h=void 0!==u.COLOR_0?e.getDependency("accessor",u.COLOR_0):i.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[1],h=c[2];return n&&(i.morphAttributes.position=c[0]),r&&(i.morphAttributes.normal=u),s&&(i.morphAttributes.color=h),i.morphTargetsRelative=!0,i})}(i,t.targets,e):i})}class Oz{setCrossOrigin(t){this.crossOrigin=t}setWithCredentials(t){this.withCredentials=t}createLoaderInstance(){const t=new this.clazz;return this.crossOrigin&&t.setCrossOrigin(this.crossOrigin),void 0!==this.withCredentials&&t.setWithCredentials(this.withCredentials),t}}let Nz=(()=>{class i extends Oz{load(...e){return this.createLoaderInstance().loadAsync(...e)}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})(),jz=(()=>{class i{set url(e){this._url=e,this.load()}get url(){return this._url}get onLoaded(){return this.onLoaded$||(this.onLoaded$=new lt),this.onLoaded$}get onProgress(){return this.onProgress$||(this.onProgress$=new lt),this.onProgress$}constructor(e,n){this.host=e,this.zone=n,this.initialized=!1,this.animationLoop=ee(Xp),this.proxy=mz(),e.objRef=this.proxy}ngOnInit(){this.initialized=!0,this.load()}load(){var e=this;return Si(function*(){if(!e.initialized)return;if(void 0===e._url)throw new Error("missing url");if(!e.proxy)return;const n=e._url,r=UE(e.onProgress$)?o=>{e.zone.run(()=>{e.onProgress$?.next(o)})}:void 0,s=yield e.zone.runOutsideAngular(()=>e.service.load(n,r));e.animationLoop.requestAnimationFrame(),e.proxy.objRef=e.getRefFromResponse(s),e.host.objRef=e.proxy,e.onLoaded$&&null!=s&&e.zone.run(()=>e.onLoaded$?.next(s))})()}static#e=this.\u0275fac=function(n){q_()};static#t=this.\u0275dir=Pe({type:i,inputs:{url:"url"},outputs:{onLoaded:"onLoaded",onProgress:"onProgress"}})}return i})();const JE=new WeakMap;class Mfe extends Tr{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,n,r){const s=new rs(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,o=>{this.parse(o,e,r)},n,r)}parse(t,e,n=(()=>{})){this.decodeDracoFile(t,e,null,null,qn).catch(n)}decodeDracoFile(t,e,n,r,s=Yn,o=(()=>{})){return this.decodeGeometry(t,{attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:s}).then(e).catch(o)}decodeGeometry(t,e){const n=JSON.stringify(e);if(JE.has(t)){const l=JE.get(t);if(l.key===n)return l.promise;if(0===t.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,a=this._getWorker(s,t.byteLength).then(l=>(r=l,new Promise((c,d)=>{r._callbacks[s]={resolve:c,reject:d},r.postMessage({type:"decode",id:s,taskConfig:e,buffer:t},[t])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),JE.set(t,{key:n,promise:a}),a}_createGeometry(t){const e=new pt;t.index&&e.setIndex(new ui(t.index.array,1));for(let n=0;n<t.attributes.length;n++){const r=t.attributes[n],s=r.name,o=r.array,l=new ui(o,r.itemSize);"color"===s&&(this._assignVertexColorSpace(l,r.vertexColorSpace),l.normalized=!(o instanceof Float32Array)),e.setAttribute(s,l)}return e}_assignVertexColorSpace(t,e){if(e!==qn)return;const n=new Te;for(let r=0,s=t.count;r<s;r++)n.fromBufferAttribute(t,r).convertSRGBToLinear(),t.setXYZ(r,n.r,n.g,n.b)}_loadLibrary(t,e){const n=new rs(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise((r,s)=>{n.load(t,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(n=>{const r=n[0];t||(this.decoderConfig.wasmBinary=n[1]);const s=Sfe.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(t,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[t]=e,n._taskLoad+=e,n})}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}function Sfe(){let i,t;function r(o,a,l,c,d,u){const h=u.num_components(),m=l.num_points()*h,_=m*d.BYTES_PER_ELEMENT,p=function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}(o,d),g=o._malloc(_);a.GetAttributeDataArrayForAllPoints(l,u,p,_,g);const b=new d(o.HEAPF32.buffer,g,m).slice();return o._free(g),{name:c,array:b,itemSize:h}}onmessage=function(o){const a=o.data;switch(a.type){case"init":i=a.decoderConfig,t=new Promise(function(d){i.onModuleLoaded=function(u){d({draco:u})},DracoDecoderModule(i)});break;case"decode":const l=a.buffer,c=a.taskConfig;t.then(d=>{const u=d.draco,h=new u.Decoder;try{const f=function e(o,a,l,c){const d=c.attributeIDs,u=c.attributeTypes;let h,f;const m=a.GetEncodedGeometryType(l);if(m===o.TRIANGULAR_MESH)h=new o.Mesh,f=a.DecodeArrayToMesh(l,l.byteLength,h);else{if(m!==o.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");h=new o.PointCloud,f=a.DecodeArrayToPointCloud(l,l.byteLength,h)}if(!f.ok()||0===h.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());const _={index:null,attributes:[]};for(const p in d){const g=self[u[p]];let b,v;if(c.useUniqueIDs)v=d[p],b=a.GetAttributeByUniqueId(h,v);else{if(v=a.GetAttributeId(h,o[d[p]]),-1===v)continue;b=a.GetAttribute(h,v)}const y=r(o,a,h,p,g,b);"color"===p&&(y.vertexColorSpace=c.vertexColorSpace),_.attributes.push(y)}return m===o.TRIANGULAR_MESH&&(_.index=function n(o,a,l){const d=3*l.num_faces(),u=4*d,h=o._malloc(u);a.GetTrianglesUInt32Array(l,u,h);const f=new Uint32Array(o.HEAPF32.buffer,h,d).slice();return o._free(h),{array:f,itemSize:1}}(o,a,h)),o.destroy(h),_}(u,h,new Int8Array(l),c),m=f.attributes.map(_=>_.array.buffer);f.index&&m.push(f.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:f},m)}catch(f){console.error(f),self.postMessage({type:"error",id:a.id,error:f.message})}finally{u.destroy(h)}})}}}class Rfe extends Oz{load(...t){return this.createLoaderInstance().load(...t)}}let u0=(()=>{class i extends Rfe{constructor(){super(...arguments),this.clazz=Mfe,this.decoderPath="",this.reuseInstance=!0}setDecoderPath(e){this.decoderPath=e}setDecoderConfig(e){this.decoderConfig=e}setWorkerLimit(e){this.workerLimit=e}setReuseInstance(e){this.reuseInstance=e}createLoaderInstance(){if(this.reuseInstance&&this.instance)return this.instance;const e=super.createLoaderInstance();return e.setDecoderPath(this.decoderPath),this.decoderConfig&&e.setDecoderConfig(this.decoderConfig),this.workerLimit&&e.setWorkerLimit(this.workerLimit),this.reuseInstance&&(this.instance=e),e}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Cfe=(()=>{class i extends Nz{constructor(e){super(),this.dracoLoaderService=e,this.clazz=Hhe}createLoaderInstance(){const e=super.createLoaderInstance();return e.setDRACOLoader(this.dracoLoaderService.createLoaderInstance()),e}static#e=this.\u0275fac=function(n){return new(n||i)(ue(u0))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),na=(()=>{class i extends jz{constructor(e,n,r){super(e,n),this.host=e,this.zone=n,this.service=r}getRefFromResponse(e){return e.scene}static#e=this.\u0275fac=function(n){return new(n||i)(P(ht,1),P(it),P(Cfe))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","loadGLTF",""]],features:[ge]})}return i})(),h0=(()=>{class i{constructor(e,n){this.engineService=e,this.animationLoopService=n}get beforeRender(){return this.engineService.beforeRender$}get onResize(){return this.engineService.resize$}set renderOnDemand(e){e?this.animationLoopService.stop():this.animationLoopService.start()}get renderOnDemand(){return!this.animationLoopService.isActive()}static#e=this.\u0275fac=function(n){return new(n||i)(P(Td),P(Xp))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","beforeRender",""],["","onResize",""],["","renderOnDemand",""]],inputs:{renderOnDemand:"renderOnDemand"},outputs:{beforeRender:"beforeRender",onResize:"onResize"}})}return i})(),Efe=(()=>{class i{constructor(){this.assetPath=ss+"RobotExpressive.glb",this.states=["Idle","Walking","Running","Dance","Death","Sitting","Standing"],this.emotes=["Jump","Yes","No","Wave","Punch","ThumbsUp"],this.actions={}}onInit(e){this.animationMixer=new JV(e.scene),e.scene.traverse(n=>{n.isMesh&&(n.castShadow=!0,n.receiveShadow=!0)});for(const n of e.animations){const r=this.animationMixer.clipAction(n);this.actions[n.name]=r,(this.emotes.indexOf(n.name)>=0||this.states.indexOf(n.name)>=4)&&(r.clampWhenFinished=!0,r.loop=cC)}this.activeAction=this.actions.Walking,this.activeAction.play()}beforeRender(e){this.animationMixer&&this.animationMixer.update(e.delta)}fadeToAction(e,n){this.previousAction=this.activeAction,this.activeAction=this.actions[e],this.previousAction&&this.previousAction!==this.activeAction&&this.previousAction.fadeOut(n),this.activeAction.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(n).play()}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-robot"]],decls:1,vars:2,consts:[["loadGLTF","",3,"onLoaded","beforeRender","url","castShadow"]],template:function(n,r){1&n&&(K(0,"th-mesh",0),Ke("onLoaded",function(o){return r.onInit(o)})("beforeRender",function(o){return r.beforeRender(o)}),de()),2&n&&O("url",r.assetPath)("castShadow",!0)},dependencies:[Mr,na,h0],encapsulation:2,changeDetection:0})}return i})(),Bz=(()=>{class i{transform(e){return new Sp(...e)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275pipe=Jn({name:"fog",type:i,pure:!0})}return i})();const Afe=["gridHelper"],Dfe=()=>["#e0e0e0"],Ife=()=>["#e0e0e0",20,100],Pfe=()=>[45,2,.25,100],kfe=i=>[i,5,10],Ffe=()=>[0,2,0],Lfe=()=>["#ffffff","#444444"],Ofe=()=>[0,20,0],Nfe=()=>["#ffffff"],jfe=()=>[0,20,10],Bfe=i=>[i,0,0],Ufe=()=>[2e3,2e3],Vfe=()=>({color:"#999999",depthWrite:!1}),zfe=()=>[200,40,"#000000","#000000"];let Hfe=(()=>{class i{constructor(){this.Math=Math}ngAfterViewInit(){const e=this.gridHelper?.objRef?.material;e&&(e.opacity=.2,e.transparent=!0)}onBeforeRender(){}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-animation-example"]],viewQuery:function(n,r){if(1&n&&Ei(Afe,7),2&n){let s;bt(s=vt())&&(r.gridHelper=s.first)}},decls:12,vars:37,consts:[["gridHelper",""],[3,"onRender","thStats","shadow"],[3,"background","fog"],[3,"args","position","lookAt"],[3,"args","position","intensity"],[3,"args","position","castShadow","intensity"],[3,"rotation","receiveShadow"],[3,"args"],[3,"args","receiveShadow"]],template:function(n,r){if(1&n){const s=Bi();K(0,"th-canvas",1),Ke("onRender",function(){return Pt(s),kt(r.onBeforeRender())}),K(1,"th-scene",2),un(2,"fog"),ve(3,"th-perspectiveCamera",3)(4,"th-hemisphereLight",4)(5,"th-directionalLight",5),K(6,"th-mesh",6),ve(7,"th-planeGeometry",7)(8,"th-meshPhongMaterial",7),de(),ve(9,"th-gridHelper",8,0)(11,"app-robot"),de()()}2&n&&(O("thStats",!0)("shadow",!0),B(),O("background",ae(22,Dfe))("fog",Tn(2,20,ae(23,Ife))),B(2),O("args",ae(24,Pfe))("position",Ft(25,kfe,-5))("lookAt",ae(27,Ffe)),B(),O("args",ae(28,Lfe))("position",ae(29,Ofe))("intensity",3),B(),O("args",ae(30,Nfe))("position",ae(31,jfe))("castShadow",!0)("intensity",3),B(),O("rotation",Ft(32,Bfe,-.5*r.Math.PI))("receiveShadow",!0),B(),O("args",ae(34,Ufe)),B(),O("args",ae(35,Vfe)),B(),O("args",ae(36,zfe))("receiveShadow",!0))},dependencies:[Dn,Bl,za,GE,Mr,an,xd,Yh,Xi,Mo,Efe,Bz],encapsulation:2,changeDetection:0})}return i})();const Gfe=["*"];let Sr=(()=>{class i extends l0{getType(){return IE}get isAmbientLight(){return this._objRef?.isAmbientLight}get type(){return this._objRef?.type}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-ambientLight"]],features:[Ee([{provide:ht,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Gfe,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const Wfe=["*"];let Zp=(()=>{class i extends Ul{getType(){return Zn}get isMeshBasicMaterial(){return this._objRef?.isMeshBasicMaterial}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set color(e){this._objRef&&(this._objRef.color=We(this._objRef.color,e))}get color(){return this._objRef?.color}set map(e){this._objRef&&(this._objRef.map=e)}get map(){return this._objRef?.map}set lightMap(e){this._objRef&&(this._objRef.lightMap=e)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(e){this._objRef&&(this._objRef.lightMapIntensity=e)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set aoMap(e){this._objRef&&(this._objRef.aoMap=e)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(e){this._objRef&&(this._objRef.aoMapIntensity=e)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set specularMap(e){this._objRef&&(this._objRef.specularMap=e)}get specularMap(){return this._objRef?.specularMap}set alphaMap(e){this._objRef&&(this._objRef.alphaMap=e)}get alphaMap(){return this._objRef?.alphaMap}set envMap(e){this._objRef&&(this._objRef.envMap=e)}get envMap(){return this._objRef?.envMap}set envMapRotation(e){this._objRef&&(this._objRef.envMapRotation=We(this._objRef.envMapRotation,e))}get envMapRotation(){return this._objRef?.envMapRotation}set combine(e){this._objRef&&(this._objRef.combine=e)}get combine(){return this._objRef?.combine}set reflectivity(e){this._objRef&&(this._objRef.reflectivity=e)}get reflectivity(){return this._objRef?.reflectivity}set refractionRatio(e){this._objRef&&(this._objRef.refractionRatio=e)}get refractionRatio(){return this._objRef?.refractionRatio}set wireframe(e){this._objRef&&(this._objRef.wireframe=e)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(e){this._objRef&&(this._objRef.wireframeLinewidth=e)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(e){this._objRef&&(this._objRef.wireframeLinecap=e)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(e){this._objRef&&(this._objRef.wireframeLinejoin=e)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-meshBasicMaterial"]],inputs:{type:"type",color:"color",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",specularMap:"specularMap",alphaMap:"alphaMap",envMap:"envMap",envMapRotation:"envMapRotation",combine:"combine",reflectivity:"reflectivity",refractionRatio:"refractionRatio",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",fog:"fog"},features:[Ee([{provide:Ul,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Wfe,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const $fe=["*"];let eA=(()=>{class i extends To{getType(){return Ki}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-boxGeometry"]],features:[Ee([{provide:To,useExisting:Le(()=>i)}]),ge],ngContentSelectors:$fe,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const Xfe=()=>({color:"purple"}),qfe=()=>[75,2,.1,1e3],Yfe=()=>[1,1,5];let Zfe=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-basic-example"]],decls:7,vars:6,consts:[[3,"args"],[3,"args","position"]],template:function(n,r){1&n&&(K(0,"th-canvas")(1,"th-scene")(2,"th-mesh"),ve(3,"th-boxGeometry")(4,"th-meshBasicMaterial",0),de(),ve(5,"th-ambientLight")(6,"th-perspectiveCamera",1),de()()),2&n&&(B(4),O("args",ae(3,Xfe)),B(2),O("args",ae(4,qfe))("position",ae(5,Yfe)))},dependencies:[Dn,Sr,Mr,an,Zp,eA,Xi],encapsulation:2,changeDetection:0})}return i})();const Uz={type:"change"},tA={type:"start"},Vz={type:"end"},f0=new Zc,zz=new Vs,Kfe=Math.cos(70*st.DEG2RAD);class Hz extends is{constructor(t,e){super(),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new C,this.cursor=new C,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:xs.ROTATE,MIDDLE:xs.DOLLY,RIGHT:xs.PAN},this.touches={ONE:Ra.ROTATE,TWO:Ra.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(R){R.addEventListener("keydown",dt),this._domElementKeyEvents=R},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",dt),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(Uz),n.update(),s=r.NONE},this.update=function(){const R=new C,G=(new mi).setFromUnitVectors(t.up,new C(0,1,0)),J=G.clone().invert(),we=new C,Ue=new mi,Wt=new C,ti=2*Math.PI;return function(sr=null){const _i=n.object.position;R.copy(_i).sub(n.target),R.applyQuaternion(G),a.setFromVector3(R),n.autoRotate&&s===r.NONE&&U(function x(R){return null!==R?2*Math.PI/60*n.autoRotateSpeed*R:2*Math.PI/60/60*n.autoRotateSpeed}(sr)),n.enableDamping?(a.theta+=l.theta*n.dampingFactor,a.phi+=l.phi*n.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let Bn=n.minAzimuthAngle,qi=n.maxAzimuthAngle;isFinite(Bn)&&isFinite(qi)&&(Bn<-Math.PI?Bn+=ti:Bn>Math.PI&&(Bn-=ti),qi<-Math.PI?qi+=ti:qi>Math.PI&&(qi-=ti),a.theta=Bn<=qi?Math.max(Bn,Math.min(qi,a.theta)):a.theta>(Bn+qi)/2?Math.max(Bn,a.theta):Math.min(qi,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(d,n.dampingFactor):n.target.add(d),n.target.sub(n.cursor),n.target.clampLength(n.minTargetRadius,n.maxTargetRadius),n.target.add(n.cursor);let oc=!1;if(n.zoomToCursor&&w||n.object.isOrthographicCamera)a.radius=se(a.radius);else{const Qs=a.radius;a.radius=se(a.radius*c),oc=Qs!=a.radius}if(R.setFromSpherical(a),R.applyQuaternion(J),_i.copy(n.target).add(R),n.object.lookAt(n.target),!0===n.enableDamping?(l.theta*=1-n.dampingFactor,l.phi*=1-n.dampingFactor,d.multiplyScalar(1-n.dampingFactor)):(l.set(0,0,0),d.set(0,0,0)),n.zoomToCursor&&w){let Qs=null;if(n.object.isPerspectiveCamera){const ac=R.length();Qs=se(ac*c);const Qa=ac-Qs;n.object.position.addScaledVector(y,Qa),n.object.updateMatrixWorld(),oc=!!Qa}else if(n.object.isOrthographicCamera){const ac=new C(T.x,T.y,0);ac.unproject(n.object);const Qa=n.object.zoom;n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/c)),n.object.updateProjectionMatrix(),oc=Qa!==n.object.zoom;const jg=new C(T.x,T.y,0);jg.unproject(n.object),n.object.position.sub(jg).add(ac),n.object.updateMatrixWorld(),Qs=R.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==Qs&&(this.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Qs).add(n.object.position):(f0.origin.copy(n.object.position),f0.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(f0.direction))<Kfe?t.lookAt(n.target):(zz.setFromNormalAndCoplanarPoint(n.object.up,n.target),f0.intersectPlane(zz,n.target))))}else if(n.object.isOrthographicCamera){const Qs=n.object.zoom;n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/c)),Qs!==n.object.zoom&&(n.object.updateProjectionMatrix(),oc=!0)}return c=1,w=!1,!!(oc||we.distanceToSquared(n.object.position)>o||8*(1-Ue.dot(n.object.quaternion))>o||Wt.distanceToSquared(n.target)>o)&&(n.dispatchEvent(Uz),we.copy(n.object.position),Ue.copy(n.object.quaternion),Wt.copy(n.target),!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",gt),n.domElement.removeEventListener("pointerdown",F),n.domElement.removeEventListener("pointercancel",Q),n.domElement.removeEventListener("wheel",_e),n.domElement.removeEventListener("pointermove",E),n.domElement.removeEventListener("pointerup",Q),n.domElement.getRootNode().removeEventListener("keydown",Ne,{capture:!0}),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",dt),n._domElementKeyEvents=null)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const o=1e-6,a=new e0,l=new e0;let c=1;const d=new C,u=new $,h=new $,f=new $,m=new $,_=new $,p=new $,g=new $,b=new $,v=new $,y=new C,T=new $;let w=!1;const M=[],D={};let S=!1;function k(R){const G=Math.abs(.01*R);return Math.pow(.95,n.zoomSpeed*G)}function U(R){l.theta-=R}function L(R){l.phi-=R}const H=function(){const R=new C;return function(J,we){R.setFromMatrixColumn(we,0),R.multiplyScalar(-J),d.add(R)}}(),Y=function(){const R=new C;return function(J,we){!0===n.screenSpacePanning?R.setFromMatrixColumn(we,1):(R.setFromMatrixColumn(we,0),R.crossVectors(n.object.up,R)),R.multiplyScalar(J),d.add(R)}}(),V=function(){const R=new C;return function(J,we){const Ue=n.domElement;if(n.object.isPerspectiveCamera){R.copy(n.object.position).sub(n.target);let ti=R.length();ti*=Math.tan(n.object.fov/2*Math.PI/180),H(2*J*ti/Ue.clientHeight,n.object.matrix),Y(2*we*ti/Ue.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(H(J*(n.object.right-n.object.left)/n.object.zoom/Ue.clientWidth,n.object.matrix),Y(we*(n.object.top-n.object.bottom)/n.object.zoom/Ue.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function q(R){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?c/=R:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function z(R){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?c*=R:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function X(R,G){if(!n.zoomToCursor)return;w=!0;const J=n.domElement.getBoundingClientRect(),Ue=G-J.top,ti=J.height;T.x=(R-J.left)/J.width*2-1,T.y=-Ue/ti*2+1,y.set(T.x,T.y,1).unproject(n.object).sub(n.object.position).normalize()}function se(R){return Math.max(n.minDistance,Math.min(n.maxDistance,R))}function Me(R){u.set(R.clientX,R.clientY)}function Qe(R){m.set(R.clientX,R.clientY)}function Ae(R){if(1===M.length)u.set(R.pageX,R.pageY);else{const G=Ti(R);u.set(.5*(R.pageX+G.x),.5*(R.pageY+G.y))}}function j(R){if(1===M.length)m.set(R.pageX,R.pageY);else{const G=Ti(R);m.set(.5*(R.pageX+G.x),.5*(R.pageY+G.y))}}function tt(R){const G=Ti(R),J=R.pageX-G.x,we=R.pageY-G.y,Ue=Math.sqrt(J*J+we*we);g.set(0,Ue)}function he(R){if(1==M.length)h.set(R.pageX,R.pageY);else{const J=Ti(R);h.set(.5*(R.pageX+J.x),.5*(R.pageY+J.y))}f.subVectors(h,u).multiplyScalar(n.rotateSpeed);const G=n.domElement;U(2*Math.PI*f.x/G.clientHeight),L(2*Math.PI*f.y/G.clientHeight),u.copy(h)}function ke(R){if(1===M.length)_.set(R.pageX,R.pageY);else{const G=Ti(R);_.set(.5*(R.pageX+G.x),.5*(R.pageY+G.y))}p.subVectors(_,m).multiplyScalar(n.panSpeed),V(p.x,p.y),m.copy(_)}function xe(R){const G=Ti(R),J=R.pageX-G.x,we=R.pageY-G.y,Ue=Math.sqrt(J*J+we*we);b.set(0,Ue),v.set(0,Math.pow(b.y/g.y,n.zoomSpeed)),q(v.y),g.copy(b),X(.5*(R.pageX+G.x),.5*(R.pageY+G.y))}function F(R){!1!==n.enabled&&(0===M.length&&(n.domElement.setPointerCapture(R.pointerId),n.domElement.addEventListener("pointermove",E),n.domElement.addEventListener("pointerup",Q)),!function wt(R){for(let G=0;G<M.length;G++)if(M[G]==R.pointerId)return!0;return!1}(R)&&(function ot(R){M.push(R.pointerId)}(R),"touch"===R.pointerType?De(R):function fe(R){let G;switch(R.button){case 0:G=n.mouseButtons.LEFT;break;case 1:G=n.mouseButtons.MIDDLE;break;case 2:G=n.mouseButtons.RIGHT;break;default:G=-1}switch(G){case xs.DOLLY:if(!1===n.enableZoom)return;(function Ve(R){X(R.clientX,R.clientX),g.set(R.clientX,R.clientY)})(R),s=r.DOLLY;break;case xs.ROTATE:if(R.ctrlKey||R.metaKey||R.shiftKey){if(!1===n.enablePan)return;Qe(R),s=r.PAN}else{if(!1===n.enableRotate)return;Me(R),s=r.ROTATE}break;case xs.PAN:if(R.ctrlKey||R.metaKey||R.shiftKey){if(!1===n.enableRotate)return;Me(R),s=r.ROTATE}else{if(!1===n.enablePan)return;Qe(R),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(tA)}(R)))}function E(R){!1!==n.enabled&&("touch"===R.pointerType?function Ze(R){switch(Je(R),s){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;he(R),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;ke(R),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;(function $e(R){n.enableZoom&&xe(R),n.enablePan&&ke(R)})(R),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;(function nt(R){n.enableZoom&&xe(R),n.enableRotate&&he(R)})(R),n.update();break;default:s=r.NONE}}(R):function ye(R){switch(s){case r.ROTATE:if(!1===n.enableRotate)return;!function W(R){h.set(R.clientX,R.clientY),f.subVectors(h,u).multiplyScalar(n.rotateSpeed);const G=n.domElement;U(2*Math.PI*f.x/G.clientHeight),L(2*Math.PI*f.y/G.clientHeight),u.copy(h),n.update()}(R);break;case r.DOLLY:if(!1===n.enableZoom)return;!function be(R){b.set(R.clientX,R.clientY),v.subVectors(b,g),v.y>0?q(k(v.y)):v.y<0&&z(k(v.y)),g.copy(b),n.update()}(R);break;case r.PAN:if(!1===n.enablePan)return;!function Ie(R){_.set(R.clientX,R.clientY),p.subVectors(_,m).multiplyScalar(n.panSpeed),V(p.x,p.y),m.copy(_),n.update()}(R)}}(R))}function Q(R){switch(function Xe(R){delete D[R.pointerId];for(let G=0;G<M.length;G++)if(M[G]==R.pointerId)return void M.splice(G,1)}(R),M.length){case 0:n.domElement.releasePointerCapture(R.pointerId),n.domElement.removeEventListener("pointermove",E),n.domElement.removeEventListener("pointerup",Q),n.dispatchEvent(Vz),s=r.NONE;break;case 1:const G=M[0],J=D[G];De({pointerId:G,pageX:J.x,pageY:J.y})}}function _e(R){!1===n.enabled||!1===n.enableZoom||s!==r.NONE||(R.preventDefault(),n.dispatchEvent(tA),function N(R){X(R.clientX,R.clientY),R.deltaY<0?z(k(R.deltaY)):R.deltaY>0&&q(k(R.deltaY)),n.update()}(function et(R){const J={clientX:R.clientX,clientY:R.clientY,deltaY:R.deltaY};switch(R.deltaMode){case 1:J.deltaY*=16;break;case 2:J.deltaY*=100}return R.ctrlKey&&!S&&(J.deltaY*=10),J}(R)),n.dispatchEvent(Vz))}function Ne(R){"Control"===R.key&&(S=!0,n.domElement.getRootNode().addEventListener("keyup",Oe,{passive:!0,capture:!0}))}function Oe(R){"Control"===R.key&&(S=!1,n.domElement.getRootNode().removeEventListener("keyup",Oe,{passive:!0,capture:!0}))}function dt(R){!1===n.enabled||!1===n.enablePan||function me(R){let G=!1;switch(R.code){case n.keys.UP:R.ctrlKey||R.metaKey||R.shiftKey?L(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):V(0,n.keyPanSpeed),G=!0;break;case n.keys.BOTTOM:R.ctrlKey||R.metaKey||R.shiftKey?L(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):V(0,-n.keyPanSpeed),G=!0;break;case n.keys.LEFT:R.ctrlKey||R.metaKey||R.shiftKey?U(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):V(n.keyPanSpeed,0),G=!0;break;case n.keys.RIGHT:R.ctrlKey||R.metaKey||R.shiftKey?U(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):V(-n.keyPanSpeed,0),G=!0}G&&(R.preventDefault(),n.update())}(R)}function De(R){switch(Je(R),M.length){case 1:switch(n.touches.ONE){case Ra.ROTATE:if(!1===n.enableRotate)return;Ae(R),s=r.TOUCH_ROTATE;break;case Ra.PAN:if(!1===n.enablePan)return;j(R),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(n.touches.TWO){case Ra.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;(function re(R){n.enableZoom&&tt(R),n.enablePan&&j(R)})(R),s=r.TOUCH_DOLLY_PAN;break;case Ra.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;(function Se(R){n.enableZoom&&tt(R),n.enableRotate&&Ae(R)})(R),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(tA)}function gt(R){!1!==n.enabled&&R.preventDefault()}function Je(R){let G=D[R.pointerId];void 0===G&&(G=new $,D[R.pointerId]=G),G.set(R.pageX,R.pageY)}function Ti(R){return D[R.pointerId===M[0]?M[1]:M[0]]}n.domElement.addEventListener("contextmenu",gt),n.domElement.addEventListener("pointerdown",F),n.domElement.addEventListener("pointercancel",Q),n.domElement.addEventListener("wheel",_e,{passive:!1}),n.domElement.getRootNode().addEventListener("keydown",Ne,{passive:!0,capture:!0}),this.update()}}let Rr=(()=>{class i extends yd{constructor(e,n){super(),this._camera=e,this.canvas=n,this.renderLoop=ee(Xp)}createThreeInstance(e){e||(e=[this._camera.objRef,this.canvas?.elementRef.nativeElement]);const n=super.createThreeInstance(e);return this.patchDispatchEvent(n),this.subscribeControlUpdater(n),n}patchDispatchEvent(e){if(e.dispatchEvent){this.origDispatchEventMethod=e.dispatchEvent;const n=this.origDispatchEventMethod;e.dispatchEvent=r=>{n.call(e,r),this.renderLoop.requestAnimationFrame()}}}ngOnDestroy(){super.ngOnDestroy(),this.unpatchDispatchEvent(),this.unsubscribeControlUpdater()}unpatchDispatchEvent(){this.origDispatchEventMethod&&this._objRef&&(this._objRef.dispatchEvent=this.origDispatchEventMethod)}subscribeControlUpdater(e){void 0!==e.update&&(this.beforeRenderSubscription=this.renderLoop.beforeRender$.subscribe(n=>{e.update(n.delta)}))}unsubscribeControlUpdater(){this.beforeRenderSubscription&&this.beforeRenderSubscription.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(P(ht),P(Xi))};static#t=this.\u0275cmp=pe({type:i,selectors:[["th-abs-control"]],features:[ge],decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})();const Qfe=["*"];let So=(()=>{class i extends Rr{getType(){return Hz}set object(e){this._objRef&&(this._objRef.object=e)}get object(){return this._objRef?.object}set domElement(e){this._objRef&&(this._objRef.domElement=e)}get domElement(){return this._objRef?.domElement}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set target(e){this._objRef&&(this._objRef.target=We(this._objRef.target,e))}get target(){return this._objRef?.target}set center(e){this._objRef&&(this._objRef.center=We(this._objRef.center,e))}get center(){return this._objRef?.center}set cursor(e){this._objRef&&(this._objRef.cursor=We(this._objRef.cursor,e))}get cursor(){return this._objRef?.cursor}set minDistance(e){this._objRef&&(this._objRef.minDistance=e)}get minDistance(){return this._objRef?.minDistance}set maxDistance(e){this._objRef&&(this._objRef.maxDistance=e)}get maxDistance(){return this._objRef?.maxDistance}set minZoom(e){this._objRef&&(this._objRef.minZoom=e)}get minZoom(){return this._objRef?.minZoom}set maxZoom(e){this._objRef&&(this._objRef.maxZoom=e)}get maxZoom(){return this._objRef?.maxZoom}set minTargetRadius(e){this._objRef&&(this._objRef.minTargetRadius=e)}get minTargetRadius(){return this._objRef?.minTargetRadius}set maxTargetRadius(e){this._objRef&&(this._objRef.maxTargetRadius=e)}get maxTargetRadius(){return this._objRef?.maxTargetRadius}set minPolarAngle(e){this._objRef&&(this._objRef.minPolarAngle=e)}get minPolarAngle(){return this._objRef?.minPolarAngle}set maxPolarAngle(e){this._objRef&&(this._objRef.maxPolarAngle=e)}get maxPolarAngle(){return this._objRef?.maxPolarAngle}set minAzimuthAngle(e){this._objRef&&(this._objRef.minAzimuthAngle=e)}get minAzimuthAngle(){return this._objRef?.minAzimuthAngle}set maxAzimuthAngle(e){this._objRef&&(this._objRef.maxAzimuthAngle=e)}get maxAzimuthAngle(){return this._objRef?.maxAzimuthAngle}set enableDamping(e){this._objRef&&(this._objRef.enableDamping=e)}get enableDamping(){return this._objRef?.enableDamping}set dampingFactor(e){this._objRef&&(this._objRef.dampingFactor=e)}get dampingFactor(){return this._objRef?.dampingFactor}set enableZoom(e){this._objRef&&(this._objRef.enableZoom=e)}get enableZoom(){return this._objRef?.enableZoom}set zoomSpeed(e){this._objRef&&(this._objRef.zoomSpeed=e)}get zoomSpeed(){return this._objRef?.zoomSpeed}set zoomToCursor(e){this._objRef&&(this._objRef.zoomToCursor=e)}get zoomToCursor(){return this._objRef?.zoomToCursor}set enableRotate(e){this._objRef&&(this._objRef.enableRotate=e)}get enableRotate(){return this._objRef?.enableRotate}set rotateSpeed(e){this._objRef&&(this._objRef.rotateSpeed=e)}get rotateSpeed(){return this._objRef?.rotateSpeed}set enablePan(e){this._objRef&&(this._objRef.enablePan=e)}get enablePan(){return this._objRef?.enablePan}set panSpeed(e){this._objRef&&(this._objRef.panSpeed=e)}get panSpeed(){return this._objRef?.panSpeed}set screenSpacePanning(e){this._objRef&&(this._objRef.screenSpacePanning=e)}get screenSpacePanning(){return this._objRef?.screenSpacePanning}set keyPanSpeed(e){this._objRef&&(this._objRef.keyPanSpeed=e)}get keyPanSpeed(){return this._objRef?.keyPanSpeed}set autoRotate(e){this._objRef&&(this._objRef.autoRotate=e)}get autoRotate(){return this._objRef?.autoRotate}set autoRotateSpeed(e){this._objRef&&(this._objRef.autoRotateSpeed=e)}get autoRotateSpeed(){return this._objRef?.autoRotateSpeed}set keys(e){this._objRef&&(this._objRef.keys=e)}get keys(){return this._objRef?.keys}set mouseButtons(e){this._objRef&&(this._objRef.mouseButtons=e)}get mouseButtons(){return this._objRef?.mouseButtons}set touches(e){this._objRef&&(this._objRef.touches=e)}get touches(){return this._objRef?.touches}set target0(e){this._objRef&&(this._objRef.target0=We(this._objRef.target0,e))}get target0(){return this._objRef?.target0}set position0(e){this._objRef&&(this._objRef.position0=We(this._objRef.position0,e))}get position0(){return this._objRef?.position0}set zoom0(e){this._objRef&&(this._objRef.zoom0=e)}get zoom0(){return this._objRef?.zoom0}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-orbitControls"]],inputs:{object:"object",domElement:"domElement",enabled:"enabled",target:"target",center:"center",cursor:"cursor",minDistance:"minDistance",maxDistance:"maxDistance",minZoom:"minZoom",maxZoom:"maxZoom",minTargetRadius:"minTargetRadius",maxTargetRadius:"maxTargetRadius",minPolarAngle:"minPolarAngle",maxPolarAngle:"maxPolarAngle",minAzimuthAngle:"minAzimuthAngle",maxAzimuthAngle:"maxAzimuthAngle",enableDamping:"enableDamping",dampingFactor:"dampingFactor",enableZoom:"enableZoom",zoomSpeed:"zoomSpeed",zoomToCursor:"zoomToCursor",enableRotate:"enableRotate",rotateSpeed:"rotateSpeed",enablePan:"enablePan",panSpeed:"panSpeed",screenSpacePanning:"screenSpacePanning",keyPanSpeed:"keyPanSpeed",autoRotate:"autoRotate",autoRotateSpeed:"autoRotateSpeed",keys:"keys",mouseButtons:"mouseButtons",touches:"touches",target0:"target0",position0:"position0",zoom0:"zoom0"},features:[Ee([{provide:Rr,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Qfe,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const Jfe=["*"];let Ga=(()=>{class i extends l0{getType(){return Zy}get isPointLight(){return this._objRef?.isPointLight}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set intensity(e){this._objRef&&(this._objRef.intensity=e)}get intensity(){return this._objRef?.intensity}set distance(e){this._objRef&&(this._objRef.distance=e)}get distance(){return this._objRef?.distance}set castShadow(e){this._objRef&&(this._objRef.castShadow=e)}get castShadow(){return this._objRef?.castShadow}set decay(e){this._objRef&&(this._objRef.decay=e)}get decay(){return this._objRef?.decay}set shadow(e){this._objRef&&(this._objRef.shadow=e)}get shadow(){return this._objRef?.shadow}set power(e){this._objRef&&(this._objRef.power=e)}get power(){return this._objRef?.power}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-pointLight"]],inputs:{type:"type",intensity:"intensity",distance:"distance",castShadow:"castShadow",decay:"decay",shadow:"shadow",power:"power"},features:[Ee([{provide:ht,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Jfe,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})(),Qh=(()=>{class i{get onMouseEnter(){return this.mouseEnter||(this.mouseEnter=new lt),this.mouseEnter}get onMouseExit(){return this.mouseExit||(this.mouseExit=new lt),this.mouseExit}get onClick(){return this.click||(this.click=new lt),this.click}get onPointerDown(){return this.pointerDown||(this.pointerDown=new lt),this.pointerDown}get onPointerUp(){return this.pointerUp||(this.pointerUp=new lt),this.pointerUp}constructor(e,n){this.host=e,this.raycasterService=n,this.emitOnMouseEnter=this.emitOnMouseEnter.bind(this),this.emitOnMouseExit=this.emitOnMouseExit.bind(this),this.emitOnClick=this.emitOnClick.bind(this)}ngAfterViewInit(){this.subscribeEvents()}subscribeEvents(){this.raycasterService.addEventTarget(this)}unSubscribeEvents(){this.raycasterService.removeEventTarget(this)}emitOnMouseExit(){this.mouseExit?.emit({component:this.host,type:"mouseExit"})}emitOnMouseEnter(e){this.mouseEnter?.emit(e)}emitOnClick(e){this.click?.emit(e)}emitOnPointerDown(e){this.pointerDown?.emit(e)}emitOnPointerUp(e){this.pointerUp?.emit(e)}ngOnDestroy(){this.unSubscribeEvents()}static#e=this.\u0275fac=function(n){return new(n||i)(P(ht,1),P($p))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","onClick",""],["","onMouseEnter",""],["","onMouseExit",""],["","onPointerDown",""],["","onPointerUp",""]],outputs:{onMouseEnter:"onMouseEnter",onMouseExit:"onMouseExit",onClick:"onClick",onPointerDown:"onPointerDown",onPointerUp:"onPointerUp"}})}return i})();const eme=()=>[2,2,2],tme=()=>[1,1,1],ime=()=>[10,10],Gz=()=>[10,10,10],nme=()=>[45,2,.1,100],rme=()=>[0,0,0];let sme=(()=>{class i{constructor(){this.selected=!1,this.glbPath=`${ss}DamagedHelmet.glb`}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-controls-example"]],decls:8,vars:17,consts:[[3,"thStats"],[3,"intensity"],["loadGLTF","",3,"onClick","url","scale"],[3,"args"],[3,"position","intensity"],[3,"args","position","lookAt"]],template:function(n,r){1&n&&(K(0,"th-canvas",0)(1,"th-scene"),ve(2,"th-ambientLight",1),K(3,"th-object3D",2),Ke("onClick",function(){return r.selected=!r.selected}),de(),ve(4,"th-gridHelper",3)(5,"th-pointLight",4),K(6,"th-perspectiveCamera",5),ve(7,"th-orbitControls"),de()()()),2&n&&(O("thStats",!0),B(2),O("intensity",3),B(),O("url",r.glbPath)("scale",r.selected?ae(10,eme):ae(11,tme)),B(),O("args",ae(12,ime)),B(),O("position",ae(13,Gz))("intensity",3),B(),O("args",ae(14,nme))("position",ae(15,Gz))("lookAt",ae(16,rme)))},dependencies:[So,Dn,ht,Bl,Sr,Ga,an,Xi,na,Qh,Mo],encapsulation:2,changeDetection:0})}return i})();const ome=()=>[0,1,0],ame=()=>[10,10],Wz=()=>[10,10,10],lme=()=>[45,2,.1,100],cme=()=>[0,0,0];let dme=(()=>{class i{constructor(e){this.cdref=e,this.modelScale=[1,1,1],this.rotation=[0,0,0],this.modelUrl1=`${ss}DamagedHelmet.glb`,this.modelUrl2=`${ss}BoomBox.glb`,this.modelUrl=this.toggleModel(),this.intervalHandle=window.setInterval(()=>this.toggleModel(),3e3)}toggleModel(){return this.modelUrl=this.modelUrl!==this.modelUrl1?this.modelUrl1:this.modelUrl2,this.cdref.markForCheck(),this.modelUrl}onLoaded(){this.modelScale=this.modelUrl!==this.modelUrl1?[100,100,100]:[1,1,1]}onRefChange(e){}onBeforeRender(){this.rotation=[0,this.rotation[1]+.01,0]}ngOnDestroy(){window.clearInterval(this.intervalHandle)}static#e=this.\u0275fac=function(n){return new(n||i)(P(lr))};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-dynamic-loader-example"]],decls:7,vars:17,consts:[[3,"onRender"],[3,"intensity"],["loadGLTF","",3,"onLoaded","objRef$","url","scale","rotation","position"],[3,"args"],[3,"position","intensity"],[3,"args","position","lookAt"]],template:function(n,r){1&n&&(K(0,"th-canvas",0),Ke("onRender",function(){return r.onBeforeRender()}),K(1,"th-scene"),ve(2,"th-ambientLight",1),K(3,"th-object3D",2),Ke("onLoaded",function(){return r.onLoaded()})("objRef$",function(o){return r.onRefChange(o)}),de(),ve(4,"th-gridHelper",3)(5,"th-pointLight",4)(6,"th-perspectiveCamera",5),de()()),2&n&&(B(2),O("intensity",3),B(),O("url",r.modelUrl)("scale",r.modelScale)("rotation",r.rotation)("position",ae(11,ome)),B(),O("args",ae(12,ame)),B(),O("position",ae(13,Wz))("intensity",3),B(),O("args",ae(14,lme))("position",ae(15,Wz))("lookAt",ae(16,cme)))},dependencies:[Dn,ht,Bl,Sr,Ga,an,Xi,na],encapsulation:2})}return i})(),ume=(()=>{class i{transform(e,n){return e.bind(n)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275pipe=Jn({name:"bind",type:i,pure:!0})}return i})();const hme=()=>[10,10],$z=()=>[10,10,10],fme=()=>[45,2,.1,100],mme=()=>[0,0,0],pme=(i,t)=>({change:i,end:t});function gme(i,t){if(1&i&&(K(0,"li"),Jt(1),de()),2&i){const e=t.$implicit;B(),fl(" ",e," ")}}let _me=(()=>{class i{constructor(e){this.cdref=e,this.id="CID",this.changes=[],this.rotation=[0,0,0],this.position=[0,1,0],this.assetPath=`${ss}DamagedHelmet.glb`,this.onOrbitControlEnd=()=>{this.pushToChangesArray(`${this.id}: orbit control end`)},window.setInterval(()=>{this.rotation=[0,this.rotation[1]+.05,0],this.cdref.markForCheck()},1500),window.setInterval(()=>{this.position=[0,(this.position[1]+1)%5,0],this.cdref.markForCheck()},3e3)}logUpdates(e){this.pushToChangesArray(Object.keys(e).toString())}onLoaded(){this.changes.push("Model loaded")}onOrbitControlChange(){this.pushToChangesArray(`${this.id}: orbit control change`)}pushToChangesArray(e){this.changes.length>=20&&this.changes.shift(),this.changes.push(e)}static#e=this.\u0275fac=function(n){return new(n||i)(P(lr))};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-events-example"]],decls:14,vars:23,consts:[[3,"intensity"],["loadGLTF","",3,"onUpdate","onLoaded","url","rotation","position"],[3,"args"],[3,"position","intensity"],[3,"args","position","lookAt"],[3,"threeEvents"],[1,"change-list"],[4,"ngFor","ngForOf"]],template:function(n,r){1&n&&(K(0,"th-canvas")(1,"th-scene"),ve(2,"th-ambientLight",0),K(3,"th-object3D",1),Ke("onUpdate",function(o){return r.logUpdates(o)})("onLoaded",function(){return r.onLoaded()}),de(),ve(4,"th-gridHelper",2)(5,"th-pointLight",3),K(6,"th-perspectiveCamera",4),ve(7,"th-orbitControls",5),un(8,"bind"),de()()(),K(9,"div",6)(10,"h1"),Jt(11,"Updates"),de(),K(12,"ol"),si(13,gme,2,1,"li",7),de()()),2&n&&(B(2),O("intensity",3),B(),O("url",r.assetPath)("rotation",r.rotation)("position",r.position),B(),O("args",ae(15,hme)),B(),O("position",ae(16,$z))("intensity",3),B(),O("args",ae(17,fme))("position",ae(18,$z))("lookAt",ae(19,mme)),B(),O("threeEvents",uo(20,pme,function Z2(i,t,e,n){const r=i+It,s=ce(),o=au(s,r);return Em(s,r)?$2(s,kr(),t,o.transform,e,n,o):o.transform(e,n)}(8,12,r.onOrbitControlChange,r),r.onOrbitControlEnd)),B(6),O("ngForOf",r.changes))},dependencies:[_l,So,Dn,ht,Bl,Sr,Ga,an,Xi,na,ume],styles:[".change-list[_ngcontent-%COMP%]{padding:1em;box-shadow:0 4px 8px #0003;transition:.3s}[_nghost-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr)}"],changeDetection:0})}return i})();const Jh=JSON.parse('{"name":"ngx-three","version":"0.31.1","scripts":{"ng":"ng","start":"ng serve","build":"ng build ngx-three","build:prod":"ng build ngx-three --configuration production","build:demo":"ng build ngx-three-demo --configuration production --base-href /ngx-three/","test":"ng test","test-headless":"ng test --watch=false --browsers=ChromeHeadless","lint":"ng lint","e2e":"ng e2e","copy:docs":"(cp README.md dist/ngx-three/ || copy README.md dist\\\\ngx-three)","package":"ng build --configuration production ngx-three && npm run copy:docs","format":"prettier-eslint --write \\"{,!(node_modules|dist)/**/}*.{ts,tsx}\\""},"private":true,"dependencies":{"@angular/animations":"^17.3.7","@angular/cdk":"^17.3.7","@angular/common":"^17.3.7","@angular/compiler":"^17.3.7","@angular/core":"^17.3.7","@angular/forms":"^17.3.7","@angular/material":"^17.3.7","@angular/platform-browser":"^17.3.7","@angular/platform-browser-dynamic":"^17.3.7","@angular/router":"^17.3.7","@stackblitz/sdk":"^1.9.0","@types/webxr":"^0.5.5","highlight.js":"^11.9.0","lil-gui":"^0.18.2","ngx-highlightjs":"^11.0.0-beta.1","normalize.css":"^8.0.1","rxjs":"~7.8.1","simplex-noise":"^4.0.1","three":"~0.164.1","tslib":"^2.6.2","zone.js":"~0.14.5"},"devDependencies":{"@angular-devkit/build-angular":"^17.3.6","@angular-eslint/builder":"~17.3.0","@angular-eslint/eslint-plugin":"~17.3.0","@angular-eslint/eslint-plugin-template":"~17.3.0","@angular-eslint/schematics":"^17.3.0","@angular-eslint/template-parser":"~17.3.0","@angular/cli":"^17.3.6","@angular/compiler-cli":"^17.3.7","@types/jasmine":"^4.3.5","@types/node":"^20.5.3","@types/three":"^0.164.0","@typescript-eslint/eslint-plugin":"^7.2.0","@typescript-eslint/parser":"^7.2.0","acorn":">=8","eslint":"^8.57.0","eslint-plugin-import":"^2.28.1","eslint-plugin-jsdoc":"^46.5.0","eslint-plugin-prefer-arrow":"^1.2.3","jasmine-core":"^5.1.0","jasmine-spec-reporter":"^7.0.0","karma":"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","ng-packagr":"^17.3.0","prettier":"^3.0.2","prettier-eslint":"^15.0.1","prettier-eslint-cli":"^7.1.0","ts-node":"^10.9.1","typescript":"^5.4.5","utility-types":"^3.10.0"}}'),Xz='\nimport "zone.js";';function iA(){return iA=Si(function*(i,t){const n=Kp(Kz(i)),r=Zz(n),s={"package.json":{content:{main:"src/main.ts",dependencies:{"ngx-three":"latest","@types/three":Jh.devDependencies["@types/three"],...Jh.dependencies},devDependencies:{...Jh.devDependencies}}},"src/index.html":{content:Yz(r)},"src/main.ts":{content:qz(n,t)},"src/polyfills.ts":{content:Xz},"src/assets.ts":{content:`export const ASSET_PATH = '${Cz}';`}};yield function vme(i,t){return Promise.all(i.map(e=>fetch(e).then(function(){var n=Si(function*(r){t[`src/app/${Kp(e)}`]={content:yield r.text()}});return function(r){return n.apply(this,arguments)}}())))}(i,s),fetch("https://codesandbox.io/api/v1/sandboxes/define?json=1",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({files:s})}).then(o=>o.json()).then(o=>window.open(`https://codesandbox.io/s/${o.sandbox_id}`,"_blank"))}),iA.apply(this,arguments)}function Kp(i){return i.replace(/^.*[\\\/]/,"")}function qz(i,t){const e=function Tme(i){if(i&&i.length>0)return i[0]}(t)??function xme(i){return i.replace(".ts","").replace(/(?:^\w|[A-Z]|\b\w)/g,(t,e)=>t.toUpperCase()).replace(/[-.]/g,"")}(i),n=function Mme(i,t){return i&&i.length>0?i.join(","):t}(t,e);return`\n            import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n            import { NgModule } from '@angular/core';\n            import { BrowserModule } from '@angular/platform-browser';\n            import { NgxThreeModule } from 'ngx-three';\n            import { FormsModule } from '@angular/forms';\n            import { ${n} } from './app/${i.replace(".ts","")}';\n\n            @NgModule({\n                imports: [\n                    BrowserModule,\n                    NgxThreeModule,\n                    FormsModule\n                ],\n                providers: [],\n                declarations: [${n}],\n                bootstrap: [${e}]\n            })\n            export class AppModule {}\n\n            platformBrowserDynamic().bootstrapModule(AppModule)\n            .catch(err => console.log(err));\n            `}function Yz(i){return`\n    <!DOCTYPE html>\n    <html lang="en">\n    <head>\n        <meta charset="utf-8" />\n        <title>NgxThreeDemo</title>\n        <base href="/" />\n        <meta name="viewport" content="width=device-width, initial-scale=1" />\n        <link rel="icon" type="image/x-icon" href="favicon.ico" />\n    </head>\n    <body>\n        <${i}></${i}>\n    </body>\n    </html>\n    `}function Zz(i){return"app-"+i.replace(".component.ts","")}function Kz(i){for(const t of i)if(t.endsWith(".ts"))return t;return""}const Eme="https://stackblitz.com",Qz=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],Ame=["project","search","ports","settings"],Dme=["light","dark"],Ime=["editor","preview"],Jz={clickToLoad:i=>ef("ctl",i),devToolsHeight:i=>tH("devtoolsheight",i),forceEmbedLayout:i=>ef("embed",i),hideDevTools:i=>ef("hidedevtools",i),hideExplorer:i=>ef("hideExplorer",i),hideNavigation:i=>ef("hideNavigation",i),openFile:i=>iH("file",i),showSidebar:i=>function Pme(i,t){return"boolean"==typeof t?`${i}=${t?"1":"0"}`:""}("showSidebar",i),sidebarView:i=>nA("sidebarView",i,Ame),startScript:i=>iH("startScript",i),terminalHeight:i=>tH("terminalHeight",i),theme:i=>nA("theme",i,Dme),view:i=>nA("view",i,Ime),zenMode:i=>ef("zenMode",i)};function eH(i={}){const t=Object.entries(i).map(([e,n])=>null!=n&&Jz.hasOwnProperty(e)?Jz[e](n):"").filter(Boolean);return t.length?`?${t.join("&")}`:""}function ef(i,t){return!0===t?`${i}=1`:""}function tH(i,t){if("number"==typeof t&&!Number.isNaN(t)){const e=Math.min(100,Math.max(0,t));return`${i}=${encodeURIComponent(Math.round(e))}`}return""}function nA(i,t="",e=[]){return e.includes(t)?`${i}=${encodeURIComponent(t)}`:""}function iH(i,t){return(Array.isArray(t)?t:[t]).filter(n=>"string"==typeof n&&""!==n.trim()).map(n=>`${i}=${encodeURIComponent(n)}`).join("&")}function rA(i,t){return`${rH(t)}${i}${eH(t)}`}function rH(i={}){return("string"==typeof i.origin?i.origin:Eme).replace(/\/$/,"")}function lA(i){return i&&!1===i.newWindow?"_self":"_blank"}function sH({template:i,title:t,description:e,dependencies:n,files:r,settings:s}){if(!Qz.includes(i)){const c=Qz.map(d=>`'${d}'`).join(", ");console.warn(`Unsupported project.template: must be one of ${c}`)}const o=[],a=(c,d,u="")=>{o.push(function jme(i,t){const e=document.createElement("input");return e.type="hidden",e.name=i,e.value=t,e}(c,"string"==typeof d?d:u))};a("project[title]",t),"string"==typeof e&&e.length>0&&a("project[description]",e),a("project[template]",i,"javascript"),n&&("node"===i?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):a("project[dependencies]",JSON.stringify(n))),s&&a("project[settings]",JSON.stringify(s)),Object.entries(r).forEach(([c,d])=>{a(`project[files][${function Bme(i){return i.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}(c)}]`,d)});const l=document.createElement("form");return l.method="POST",l.setAttribute("style","display:none!important;"),l.append(...o),l}const qme_openProject=function zme(i,t){!function Vme(i,t){const e=sH(i);e.action=rA("/run",t),e.target=lA(t),document.body.appendChild(e),e.submit(),document.body.removeChild(e)}(i,t)};function cA(){return cA=Si(function*(i,t){const e=Kz(i),n=function wme(i){for(const t of i)if(t.endsWith(".html"))return t}(i),r=Kp(e),s=Zz(r),o={template:"angular-cli",title:s,description:"ngx-three example "+s,files:{"src/index.html":Yz(s),"src/main.ts":qz(r,t),"src/polyfills.ts":Xz,"src/assets.ts":`export const ASSET_PATH = '${Cz}';`},dependencies:{"ngx-three":"latest","@types/three":Jh.devDependencies["@types/three"],...Jh.dependencies},devDependencies:{...Jh.devDependencies}};yield function Zme(i,t){return Promise.all(i.map(e=>fetch(e).then(function(){var n=Si(function*(r){const s=yield r.text();t[`src/app/${Kp(e)}`]=s});return function(r){return n.apply(this,arguments)}}())))}(i,o.files);const a=n?{openFile:`src/app/${Kp(n)}`}:void 0;qme_openProject(o,a)}),cA.apply(this,arguments)}class g0{constructor(){this.urls=[],this.fileNames=[]}setUrls(t){this.urls=t,this.fileNames=this.extractFileNames()}extractFileNames(){return this.urls.map(t=>t.split("/").pop()??"")}toStackblitz(t){t?.preventDefault(),function Yme(i,t){cA.apply(this,arguments)}(this.urls,this.declarations)}toCodeSandbox(t){t?.preventDefault(),function bme(i,t){iA.apply(this,arguments)}(this.urls,this.declarations)}getLanguage(t){switch(t.substring(t.lastIndexOf(".")+1)){case"ts":default:return"typescript";case"js":return"javascript";case"html":return"html";case"css":return"css"}}}let dA;try{dA=typeof Intl<"u"&&Intl.v8BreakIterator}catch{dA=!1}let Qp,ln=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?iv(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!dA)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(n){return new(n||i)(ue(oo))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Jp(i){return function Kme(){if(null==Qp&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Qp=!0}))}finally{Qp=Qp||!1}return Qp}()?i:!!i.capture}var ra=function(i){return i[i.NORMAL=0]="NORMAL",i[i.NEGATED=1]="NEGATED",i[i.INVERTED=2]="INVERTED",i}(ra||{});let _0,Sd,uA;function aH(){if(null==Sd){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Sd=!1,Sd;if("scrollBehavior"in document.documentElement.style)Sd=!0;else{const i=Element.prototype.scrollTo;Sd=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return Sd}function eg(){if("object"!=typeof document||!document)return ra.NORMAL;if(null==_0){const i=document.createElement("div"),t=i.style;i.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),n=e.style;n.width="2px",n.height="1px",i.appendChild(e),document.body.appendChild(i),_0=ra.NORMAL,0===i.scrollLeft&&(i.scrollLeft=1,_0=0===i.scrollLeft?ra.NEGATED:ra.INVERTED),i.remove()}return _0}function Gl(i){return i.composedPath?i.composedPath()[0]:i.target}function hA(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function b0(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}class vpe extends Oi{constructor(t,e){super()}schedule(t,e=0){return this}}const v0={setInterval(i,t,...e){const{delegate:n}=v0;return n?.setInterval?n.setInterval(i,t,...e):setInterval(i,t,...e)},clearInterval(i){const{delegate:t}=v0;return(t?.clearInterval||clearInterval)(i)},delegate:void 0};class fA extends vpe{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var n;if(this.closed)return this;this.state=t;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,e)),this.pending=!0,this.delay=e,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,n=0){return v0.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;null!=e&&v0.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,n=!1;try{this.work(t)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,$g(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}class tg{constructor(t,e=tg.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}}tg.now=VE.now;class mA extends tg{constructor(t,e=tg.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const pA=new mA(fA),ype=pA;function y0(i,t=pA){return _n((e,n)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,n.next(c)}};function l(){const c=o+i,d=t.now();if(d<c)return r=this.schedule(void 0,c-d),void n.add(r);a()}e.subscribe(tn(n,c=>{s=c,o=t.now(),r||(r=t.schedule(l,i),n.add(r))},()=>{a(),n.complete()},void 0,()=>{s=r=null}))})}function gA(i){return sn((t,e)=>i<=e)}function _A(i,t=el){return i=i??xpe,_n((e,n)=>{let r,s=!0;e.subscribe(tn(n,o=>{const a=t(o);(s||!i(r,a))&&(s=!1,r=a,n.next(o))}))})}function xpe(i,t){return i===t}function Hr(i){return null!=i&&"false"!=`${i}`}function x0(i,t=0){return function wpe(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):t}function w0(i){return Array.isArray(i)?i:[i]}function Nn(i){return null==i?"":"string"==typeof i?i:`${i}px`}function Rd(i){return i instanceof xt?i.nativeElement:i}let Tpe=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({})}return i})();const uH=new Set;let Cd,Mpe=(()=>{class i{constructor(e,n){this._platform=e,this._nonce=n,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Rpe}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function Spe(i,t){if(!uH.has(i))try{Cd||(Cd=document.createElement("style"),t&&Cd.setAttribute("nonce",t),Cd.setAttribute("type","text/css"),document.head.appendChild(Cd)),Cd.sheet&&(Cd.sheet.insertRule(`@media ${i} {body{ }}`,0),uH.add(i))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}static#e=this.\u0275fac=function(n){return new(n||i)(ue(ln),ue(eT,8))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Rpe(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let hH=(()=>{class i{constructor(e,n){this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new Et}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return fH(w0(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let s=av(fH(w0(e)).map(o=>this._registerQuery(o).observable));return s=lv(s.pipe(vs(1)),s.pipe(gA(1),y0(0))),s.pipe(Ct(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const n=this._mediaMatcher.matchMedia(e),s={observable:new Pi(o=>{const a=l=>this._zone.run(()=>o.next(l));return n.addListener(a),()=>{n.removeListener(a)}}).pipe(Lc(n),Ct(({matches:o})=>({query:e,matches:o})),Zi(this._destroySubject)),mql:n};return this._queries.set(e,s),s}static#e=this.\u0275fac=function(n){return new(n||i)(ue(Mpe),ue(it))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function fH(i){return i.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}class Dpe{constructor(t,e){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Et,this._typeaheadSubscription=Oi.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=n=>n.disabled,this._pressedLetters=[],this.tabOut=new Et,this.change=new Et,t instanceof yc?this._itemChangesSubscription=t.changes.subscribe(n=>this._itemsChanged(n.toArray())):lb(t)&&(this._effectRef=zb(()=>this._itemsChanged(t()),{injector:e}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Mn(e=>this._pressedLetters.push(e)),y0(t),sn(()=>this._pressedLetters.length>0),Ct(()=>this._pressedLetters.join(""))).subscribe(e=>{const n=this._getItemsArray();for(let r=1;r<n.length+1;r++){const s=(this._activeItemIndex+r)%n.length,o=n[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}return;default:return void((r||b0(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t);this._activeItem=e[n]??null,this._activeItemIndex=n}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const r=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return lb(this._items)?this._items():this._items instanceof yc?this._items.toArray():this._items}_itemsChanged(t){if(this._activeItem){const e=t.indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e)}}}class gH extends Dpe{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let _H=(()=>{class i{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function Ppe(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const n=function Ipe(i){try{return i.frameElement}catch{return null}}(function Upe(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(e));if(n&&(-1===vH(n)||!this.isVisible(n)))return!1;let r=e.nodeName.toLowerCase(),s=vH(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function jpe(i){let t=i.nodeName.toLowerCase(),e="input"===t&&i.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,n){return function Bpe(i){return!function Fpe(i){return function Ope(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function kpe(i){let t=i.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(i)||function Lpe(i){return function Npe(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||bH(i))}(e)&&!this.isDisabled(e)&&(n?.ignoreVisibility||this.isVisible(e))}static#e=this.\u0275fac=function(n){return new(n||i)(ue(ln))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function bH(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let t=i.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function vH(i){if(!bH(i))return null;const t=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class yH{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,n,r,s=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const n=this._getFirstTabbableElement(e);return n?.focus(t),!!n}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let n=0;n<e.length;n++){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let n=e.length-1;n>=0;n--){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(vs(1)).subscribe(t)}}let Vpe=(()=>{class i{constructor(e,n,r){this._checker=e,this._ngZone=n,this._document=r}create(e,n=!1){return new yH(e,this._checker,this._ngZone,this._document,n)}static#e=this.\u0275fac=function(n){return new(n||i)(ue(_H),ue(it),ue(Xt))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function xH(i){return 0===i.buttons||0===i.detail}function wH(i){const t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const zpe=new le("cdk-input-modality-detector-options"),Hpe={ignoreKeys:[18,17,224,91,16]},nf=Jp({passive:!0,capture:!0});let Gpe=(()=>{class i{get mostRecentModality(){return this._modality.value}constructor(e,n,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new Wr(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Gl(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(xH(o)?"keyboard":"mouse"),this._mostRecentTarget=Gl(o))},this._onTouchstart=o=>{wH(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Gl(o))},this._options={...Hpe,...s},this.modalityDetected=this._modality.pipe(gA(1)),this.modalityChanged=this.modalityDetected.pipe(_A()),e.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,nf),r.addEventListener("mousedown",this._onMousedown,nf),r.addEventListener("touchstart",this._onTouchstart,nf)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,nf),document.removeEventListener("mousedown",this._onMousedown,nf),document.removeEventListener("touchstart",this._onTouchstart,nf))}static#e=this.\u0275fac=function(n){return new(n||i)(ue(ln),ue(it),ue(Xt),ue(zpe,8))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var T0=function(i){return i[i.IMMEDIATE=0]="IMMEDIATE",i[i.EVENTUAL=1]="EVENTUAL",i}(T0||{});const $pe=new le("cdk-focus-monitor-default-options"),M0=Jp({passive:!0,capture:!0});let bA=(()=>{class i{constructor(e,n,r,s,o){this._ngZone=e,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Et,this._rootNodeFocusAndBlurListener=a=>{for(let c=Gl(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||T0.IMMEDIATE}monitor(e,n=!1){const r=Rd(e);if(!this._platform.isBrowser||1!==r.nodeType)return ct();const s=function Jme(i){if(function Qme(){if(null==uA){const i=typeof document<"u"?document.head:null;uA=!(!i||!i.createShadowRoot&&!i.attachShadow)}return uA}()){const t=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return n&&(o.checkChildren=!0),o.subject;const a={checkChildren:n,subject:new Et,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const n=Rd(e),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(e,n,r){const s=Rd(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,n,l)):(this._setOrigin(n),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===T0.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,n){e.classList.toggle("cdk-focused",!!n),e.classList.toggle("cdk-touch-focused","touch"===n),e.classList.toggle("cdk-keyboard-focused","keyboard"===n),e.classList.toggle("cdk-mouse-focused","mouse"===n),e.classList.toggle("cdk-program-focused","program"===n)}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&n,this._detectionMode===T0.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,n){const r=this._elementInfo.get(n),s=Gl(e);!r||!r.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),r)}_onBlur(e,n){const r=this._elementInfo.get(n);!r||r.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(e,n){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const n=e.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,M0),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,M0)}),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Zi(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,M0),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,M0),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,r){this._setClasses(e,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){const n=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&n.push([s,r])}),n}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!n||n===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const s=e.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(n))return!0;return!1}static#e=this.\u0275fac=function(n){return new(n||i)(ue(it),ue(ln),ue(Gpe),ue(Xt,8),ue($pe,8))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Xpe=(()=>{class i{constructor(e,n){this._elementRef=e,this._focusMonitor=n,this._focusOrigin=null,this.cdkFocusChange=new lt}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){const e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,1===e.nodeType&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(n=>{this._focusOrigin=n,this.cdkFocusChange.emit(n)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt),P(bA))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"],standalone:!0})}return i})();var Ed=function(i){return i[i.NONE=0]="NONE",i[i.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",i[i.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",i}(Ed||{});const MH="cdk-high-contrast-black-on-white",SH="cdk-high-contrast-white-on-black",vA="cdk-high-contrast-active";let qpe=(()=>{class i{constructor(e,n){this._platform=e,this._document=n,this._breakpointSubscription=ee(hH).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Ed.NONE;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Ed.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Ed.BLACK_ON_WHITE}return Ed.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(vA,MH,SH),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();n===Ed.BLACK_ON_WHITE?e.add(vA,MH):n===Ed.WHITE_ON_BLACK&&e.add(vA,SH)}}static#e=this.\u0275fac=function(n){return new(n||i)(ue(ln),ue(Xt))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Ype=new le("cdk-dir-doc",{providedIn:"root",factory:function Zpe(){return ee(Xt)}}),Kpe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let rf=(()=>{class i{constructor(e){this.value="ltr",this.change=new lt,e&&(this.value=function Qpe(i){const t=i?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?Kpe.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(n){return new(n||i)(ue(Ype,8))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ig=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({})}return i})();const ege=new le("mat-sanity-checks",{providedIn:"root",factory:function Jpe(){return!0}});let Qi=(()=>{class i{constructor(e,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!hA()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}static#e=this.\u0275fac=function(n){return new(n||i)(ue(qpe),ue(ege,8),ue(Xt))};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({imports:[ig,ig]})}return i})();var Ws=function(i){return i[i.FADING_IN=0]="FADING_IN",i[i.VISIBLE=1]="VISIBLE",i[i.FADING_OUT=2]="FADING_OUT",i[i.HIDDEN=3]="HIDDEN",i}(Ws||{});class age{constructor(t,e,n,r=!1){this._renderer=t,this.element=e,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=Ws.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const EH=Jp({passive:!0,capture:!0});class lge{constructor(){this._events=new Map,this._delegateEventHandler=t=>{const e=Gl(t);e&&this._events.get(t.type)?.forEach((n,r)=>{(r===e||r.contains(e))&&n.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,n,r){const s=this._events.get(e);if(s){const o=s.get(n);o?o.add(r):s.set(n,new Set([r]))}else this._events.set(e,new Map([[n,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,EH)})}removeHandler(t,e,n){const r=this._events.get(t);if(!r)return;const s=r.get(e);s&&(s.delete(n),0===s.size&&r.delete(e),0===r.size&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,EH)))}}const AH={enterDuration:225,exitDuration:150},DH=Jp({passive:!0,capture:!0}),IH=["mousedown","touchstart"],PH=["mouseup","mouseleave","touchend","touchcancel"];class rg{static#e=this._eventManager=new lge;constructor(t,e,n,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Rd(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...AH,...n.animation};n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const o=n.radius||function dge(i,t,e){const n=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(n*n+r*r)}(t,e,r),a=t-r.left,l=e-r.top,c=s.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-o+"px",d.style.top=l-o+"px",d.style.height=2*o+"px",d.style.width=2*o+"px",null!=n.color&&(d.style.backgroundColor=n.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d);const u=window.getComputedStyle(d),f=u.transitionDuration,m="none"===u.transitionProperty||"0s"===f||"0s, 0s"===f||0===r.width&&0===r.height,_=new age(this,d,n,m);d.style.transform="scale3d(1, 1, 1)",_.state=Ws.FADING_IN,n.persistent||(this._mostRecentTransientRipple=_);let p=null;return!m&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const g=()=>this._finishRippleTransition(_),b=()=>this._destroyRipple(_);d.addEventListener("transitionend",g),d.addEventListener("transitioncancel",b),p={onTransitionEnd:g,onTransitionCancel:b}}),this._activeRipples.set(_,p),(m||!c)&&this._finishRippleTransition(_),_}fadeOutRipple(t){if(t.state===Ws.FADING_OUT||t.state===Ws.HIDDEN)return;const e=t.element,n={...AH,...t.config.animation};e.style.transitionDuration=`${n.exitDuration}ms`,e.style.opacity="0",t.state=Ws.FADING_OUT,(t._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Rd(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,IH.forEach(n=>{rg._eventManager.addHandler(this._ngZone,n,e,this)}))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{PH.forEach(e=>{this._triggerElement.addEventListener(e,this,DH)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===Ws.FADING_IN?this._startFadeOutTransition(t):t.state===Ws.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:n}=t.config;t.state=Ws.VISIBLE,!n&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=Ws.HIDDEN,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=xH(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!wH(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;if(e)for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(t.state===Ws.VISIBLE||t.config.terminateOnPointerUp&&t.state===Ws.FADING_IN)&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const t=this._triggerElement;t&&(IH.forEach(e=>rg._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&PH.forEach(e=>t.removeEventListener(e,this,DH)))}}const sg=new le("mat-ripple-global-options");let yA=(()=>{class i{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,n,r,s,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new rg(this,n,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,n,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt),P(it),P(ln),P(sg,8),P(Yr,8))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,r){2&n&&di("mat-ripple-unbounded",r.unbounded)},inputs:{color:[rt.None,"matRippleColor","color"],unbounded:[rt.None,"matRippleUnbounded","unbounded"],centered:[rt.None,"matRippleCentered","centered"],radius:[rt.None,"matRippleRadius","radius"],animation:[rt.None,"matRippleAnimation","animation"],disabled:[rt.None,"matRippleDisabled","disabled"],trigger:[rt.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}return i})(),S0=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({imports:[Qi,Qi]})}return i})(),kH=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({imports:[Qi]})}return i})(),FH=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({imports:[S0,Qi,kH]})}return i})();const LH={capture:!0},OH=["focus","click","mouseenter","touchstart"],xA="mat-ripple-loader-uninitialized",wA="mat-ripple-loader-class-name",NH="mat-ripple-loader-centered",R0="mat-ripple-loader-disabled";let uge=(()=>{class i{constructor(){this._document=ee(Xt,{optional:!0}),this._animationMode=ee(Yr,{optional:!0}),this._globalRippleOptions=ee(sg,{optional:!0}),this._platform=ee(ln),this._ngZone=ee(it),this._hosts=new Map,this._onInteraction=e=>{if(!(e.target instanceof HTMLElement))return;const r=e.target.closest(`[${xA}]`);r&&this._createRipple(r)},this._ngZone.runOutsideAngular(()=>{for(const e of OH)this._document?.addEventListener(e,this._onInteraction,LH)})}ngOnDestroy(){const e=this._hosts.keys();for(const n of e)this.destroyRipple(n);for(const n of OH)this._document?.removeEventListener(n,this._onInteraction,LH)}configureRipple(e,n){e.setAttribute(xA,""),(n.className||!e.hasAttribute(wA))&&e.setAttribute(wA,n.className||""),n.centered&&e.setAttribute(NH,""),n.disabled&&e.setAttribute(R0,"")}getRipple(e){return this._hosts.get(e)||this._createRipple(e)}setDisabled(e,n){const r=this._hosts.get(e);r?r.disabled=n:n?e.setAttribute(R0,""):e.removeAttribute(R0)}_createRipple(e){if(!this._document)return;const n=this._hosts.get(e);if(n)return n;e.querySelector(".mat-ripple")?.remove();const r=this._document.createElement("span");r.classList.add("mat-ripple",e.getAttribute(wA)),e.append(r);const s=new yA(new xt(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=e,s.centered=e.hasAttribute(NH),s.disabled=e.hasAttribute(R0),this.attachRipple(e,s),s}attachRipple(e,n){e.removeAttribute(xA),this._hosts.set(e,n)}destroyRipple(e){const n=this._hosts.get(e);n&&(n.ngOnDestroy(),this._hosts.delete(e))}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const hge=["mat-button",""],fge=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],mge=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],gge=["mat-icon-button",""],_ge=["*"],bge=new le("MAT_BUTTON_CONFIG"),vge=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}];let jH=(()=>{class i{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}constructor(e,n,r,s){this._elementRef=e,this._platform=n,this._ngZone=r,this._animationMode=s,this._focusMonitor=ee(bA),this._rippleLoader=ee(uge),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;const o=ee(bge,{optional:!0}),a=e.nativeElement,l=a.classList;this.disabledInteractive=o?.disabledInteractive??!1,this._rippleLoader?.configureRipple(a,{className:"mat-mdc-button-ripple"});for(const{attribute:c,mdcClasses:d}of vge)a.hasAttribute(c)&&l.add(...d)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",n){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,n):this._elementRef.nativeElement.focus(n)}_getAriaDisabled(){return null!=this.ariaDisabled?this.ariaDisabled:!(!this.disabled||!this.disabledInteractive)||null}_getDisabledAttribute(){return!(this.disabledInteractive||!this.disabled)||null}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static#e=this.\u0275fac=function(n){q_()};static#t=this.\u0275dir=Pe({type:i,inputs:{color:"color",disableRipple:[rt.HasDecoratorInputTransform,"disableRipple","disableRipple",$i],disabled:[rt.HasDecoratorInputTransform,"disabled","disabled",$i],ariaDisabled:[rt.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",$i],disabledInteractive:[rt.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",$i]},features:[gs]})}return i})(),BH=(()=>{class i extends jH{constructor(e,n,r,s){super(e,n,r,s)}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt),P(ln),P(it),P(Yr,8))};static#t=this.\u0275cmp=pe({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(n,r){2&n&&(Wi("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),hl(r.color?"mat-"+r.color:""),di("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[ge,rn],attrs:hge,ngContentSelectors:mge,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,r){1&n&&(ze(fge),ve(0,"span",0),Ce(1),K(2,"span",1),Ce(3,1),de(),Ce(4,2),ve(5,"span",2)(6,"span",3)),2&n&&di("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return i})(),xge=(()=>{class i extends jH{constructor(e,n,r,s){super(e,n,r,s),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt),P(ln),P(it),P(Yr,8))};static#t=this.\u0275cmp=pe({type:i,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(n,r){2&n&&(Wi("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),hl(r.color?"mat-"+r.color:""),di("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[ge,rn],attrs:gge,ngContentSelectors:_ge,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,r){1&n&&(ze(),ve(0,"span",0),Ce(1),ve(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{color:var(--mdc-icon-button-icon-color)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color)}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color)}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity)}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity)}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity)}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return i})(),TA=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({imports:[Qi,S0,Qi]})}return i})();function MA(...i){const t=Tj(i),{args:e,keys:n}=Mj(i),r=new Pi(s=>{const{length:o}=e;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let d=0;d<o;d++){let u=!1;Nr(e[d]).subscribe(tn(s,h=>{u||(u=!0,c--),a[d]=h},()=>l--,void 0,()=>{(!l||!u)&&(c||s.next(n?Sj(n,a):a),s.complete())}))}});return t?r.pipe(YS(t)):r}function UH(i={}){const{connector:t=(()=>new Et),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let o,a,l,c=0,d=!1,u=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,d=u=!1},m=()=>{const _=o;f(),_?.unsubscribe()};return _n((_,p)=>{c++,!u&&!d&&h();const g=l=l??t();p.add(()=>{c--,0===c&&!u&&!d&&(a=SA(m,r))}),g.subscribe(p),!o&&c>0&&(o=new Wd({next:b=>g.next(b),error:b=>{u=!0,h(),a=SA(f,e,b),g.error(b)},complete:()=>{d=!0,h(),a=SA(f,n),g.complete()}}),Nr(_).subscribe(o))})(s)}}function SA(i,t,...e){if(!0===t)return void i();if(!1===t)return;const n=new Wd({next:()=>{n.unsubscribe(),i()}});return Nr(t(...e)).subscribe(n)}class C0{}class E0{}class $s{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?"string"==typeof t?this.lazyInit=()=>{this.headers=new Map,t.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const r=e.slice(0,n),s=r.toLowerCase(),o=e.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,n)=>{this.setHeaderEntries(n,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,n])=>{this.setHeaderEntries(e,n)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof $s?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new $s;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof $s?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(t,e){const n=(Array.isArray(e)?e:[e]).map(s=>s.toString()),r=t.toLowerCase();this.headers.set(r,n),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class wge{encodeKey(t){return VH(t)}encodeValue(t){return VH(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const Mge=/%(\d[a-f0-9])/gi,Sge={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function VH(i){return encodeURIComponent(i).replace(Mge,(t,e)=>Sge[e]??t)}function A0(i){return`${i}`}class Wa{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new wge,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Tge(i,t){const e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e],r=Array.isArray(n)?n.map(A0):[A0(n)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(s=>{e.push({param:n,value:s,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Wa({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(A0(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let n=this.map.get(t.param)||[];const r=n.indexOf(A0(t.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Rge{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function zH(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function HH(i){return typeof Blob<"u"&&i instanceof Blob}function GH(i){return typeof FormData<"u"&&i instanceof FormData}class og{constructor(t,e,n,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function Cge(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new $s,this.context??=new Rge,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new Wa,this.urlWithParams=e}serializeBody(){return null===this.body?null:"string"==typeof this.body||zH(this.body)||HH(this.body)||GH(this.body)||function Ege(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Wa?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||GH(this.body)?null:HH(this.body)?this.body.type||null:zH(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Wa?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,s=t.transferCache??this.transferCache,o=void 0!==t.body?t.body:this.body,a=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress;let c=t.headers||this.headers,d=t.params||this.params;const u=t.context??this.context;return void 0!==t.setHeaders&&(c=Object.keys(t.setHeaders).reduce((h,f)=>h.set(f,t.setHeaders[f]),c)),t.setParams&&(d=Object.keys(t.setParams).reduce((h,f)=>h.set(f,t.setParams[f]),d)),new og(e,n,o,{params:d,headers:c,context:u,reportProgress:l,responseType:r,withCredentials:a,transferCache:s})}}var Wl=function(i){return i[i.Sent=0]="Sent",i[i.UploadProgress=1]="UploadProgress",i[i.ResponseHeader=2]="ResponseHeader",i[i.DownloadProgress=3]="DownloadProgress",i[i.Response=4]="Response",i[i.User=5]="User",i}(Wl||{});class RA{constructor(t,e=ag.Ok,n="OK"){this.headers=t.headers||new $s,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class D0 extends RA{constructor(t={}){super(t),this.type=Wl.ResponseHeader}clone(t={}){return new D0({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Ad extends RA{constructor(t={}){super(t),this.type=Wl.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Ad({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class sf extends RA{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}var ag=function(i){return i[i.Continue=100]="Continue",i[i.SwitchingProtocols=101]="SwitchingProtocols",i[i.Processing=102]="Processing",i[i.EarlyHints=103]="EarlyHints",i[i.Ok=200]="Ok",i[i.Created=201]="Created",i[i.Accepted=202]="Accepted",i[i.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",i[i.NoContent=204]="NoContent",i[i.ResetContent=205]="ResetContent",i[i.PartialContent=206]="PartialContent",i[i.MultiStatus=207]="MultiStatus",i[i.AlreadyReported=208]="AlreadyReported",i[i.ImUsed=226]="ImUsed",i[i.MultipleChoices=300]="MultipleChoices",i[i.MovedPermanently=301]="MovedPermanently",i[i.Found=302]="Found",i[i.SeeOther=303]="SeeOther",i[i.NotModified=304]="NotModified",i[i.UseProxy=305]="UseProxy",i[i.Unused=306]="Unused",i[i.TemporaryRedirect=307]="TemporaryRedirect",i[i.PermanentRedirect=308]="PermanentRedirect",i[i.BadRequest=400]="BadRequest",i[i.Unauthorized=401]="Unauthorized",i[i.PaymentRequired=402]="PaymentRequired",i[i.Forbidden=403]="Forbidden",i[i.NotFound=404]="NotFound",i[i.MethodNotAllowed=405]="MethodNotAllowed",i[i.NotAcceptable=406]="NotAcceptable",i[i.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",i[i.RequestTimeout=408]="RequestTimeout",i[i.Conflict=409]="Conflict",i[i.Gone=410]="Gone",i[i.LengthRequired=411]="LengthRequired",i[i.PreconditionFailed=412]="PreconditionFailed",i[i.PayloadTooLarge=413]="PayloadTooLarge",i[i.UriTooLong=414]="UriTooLong",i[i.UnsupportedMediaType=415]="UnsupportedMediaType",i[i.RangeNotSatisfiable=416]="RangeNotSatisfiable",i[i.ExpectationFailed=417]="ExpectationFailed",i[i.ImATeapot=418]="ImATeapot",i[i.MisdirectedRequest=421]="MisdirectedRequest",i[i.UnprocessableEntity=422]="UnprocessableEntity",i[i.Locked=423]="Locked",i[i.FailedDependency=424]="FailedDependency",i[i.TooEarly=425]="TooEarly",i[i.UpgradeRequired=426]="UpgradeRequired",i[i.PreconditionRequired=428]="PreconditionRequired",i[i.TooManyRequests=429]="TooManyRequests",i[i.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",i[i.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",i[i.InternalServerError=500]="InternalServerError",i[i.NotImplemented=501]="NotImplemented",i[i.BadGateway=502]="BadGateway",i[i.ServiceUnavailable=503]="ServiceUnavailable",i[i.GatewayTimeout=504]="GatewayTimeout",i[i.HttpVersionNotSupported=505]="HttpVersionNotSupported",i[i.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",i[i.InsufficientStorage=507]="InsufficientStorage",i[i.LoopDetected=508]="LoopDetected",i[i.NotExtended=510]="NotExtended",i[i.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",i}(ag||{});function CA(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials,transferCache:i.transferCache}}let I0=(()=>{class i{constructor(e){this.handler=e}request(e,n,r={}){let s;if(e instanceof og)s=e;else{let l,c;l=r.headers instanceof $s?r.headers:new $s(r.headers),r.params&&(c=r.params instanceof Wa?r.params:new Wa({fromObject:r.params})),s=new og(e,n,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}const o=ct(s).pipe(Zu(l=>this.handler.handle(l)));if(e instanceof og||"events"===r.observe)return o;const a=o.pipe(sn(l=>l instanceof Ad));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Ct(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Ct(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Ct(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Ct(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new Wa).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,CA(r,n))}post(e,n,r={}){return this.request("POST",e,CA(r,n))}put(e,n,r={}){return this.request("PUT",e,CA(r,n))}static#e=this.\u0275fac=function(n){return new(n||i)(ue(C0))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})();function $H(i,t){return t(i)}function kge(i,t){return(e,n)=>t.intercept(e,{handle:r=>i(r,n)})}const Lge=new le(""),lg=new le(""),XH=new le(""),qH=new le("");function Oge(){let i=null;return(t,e)=>{null===i&&(i=(ee(Lge,{optional:!0})??[]).reduceRight(kge,$H));const n=ee(cl),r=n.add();return i(t,e).pipe(Ku(()=>n.remove(r)))}}let YH=(()=>{class i extends C0{constructor(e,n){super(),this.backend=e,this.injector=n,this.chain=null,this.pendingTasks=ee(cl);const r=ee(qH,{optional:!0});this.backend=r??e}handle(e){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(lg),...this.injector.get(XH,[])]));this.chain=r.reduceRight((s,o)=>function Fge(i,t,e){return(n,r)=>Do(e,()=>t(n,s=>i(s,r)))}(s,o,this.injector),$H)}const n=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(Ku(()=>this.pendingTasks.remove(n)))}static#e=this.\u0275fac=function(n){return new(n||i)(ue(E0),ue(Ir))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})();const Vge=/^\)\]\}',?\n/;let KH=(()=>{class i{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new te(-2800,!1);const n=this.xhrFactory;return(n.\u0275loadImpl?hn(n.\u0275loadImpl()):ct(null)).pipe(Jr(()=>new Pi(s=>{const o=n.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((_,p)=>o.setRequestHeader(_,p.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const _=e.detectContentTypeHeader();null!==_&&o.setRequestHeader("Content-Type",_)}if(e.responseType){const _=e.responseType.toLowerCase();o.responseType="json"!==_?_:"text"}const a=e.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const _=o.statusText||"OK",p=new $s(o.getAllResponseHeaders()),g=function zge(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(o)||e.url;return l=new D0({headers:p,status:o.status,statusText:_,url:g}),l},d=()=>{let{headers:_,status:p,statusText:g,url:b}=c(),v=null;p!==ag.NoContent&&(v=typeof o.response>"u"?o.responseText:o.response),0===p&&(p=v?ag.Ok:0);let y=p>=200&&p<300;if("json"===e.responseType&&"string"==typeof v){const T=v;v=v.replace(Vge,"");try{v=""!==v?JSON.parse(v):null}catch(w){v=T,y&&(y=!1,v={error:w,text:v})}}y?(s.next(new Ad({body:v,headers:_,status:p,statusText:g,url:b||void 0})),s.complete()):s.error(new sf({error:v,headers:_,status:p,statusText:g,url:b||void 0}))},u=_=>{const{url:p}=c(),g=new sf({error:_,status:o.status||0,statusText:o.statusText||"Unknown Error",url:p||void 0});s.error(g)};let h=!1;const f=_=>{h||(s.next(c()),h=!0);let p={type:Wl.DownloadProgress,loaded:_.loaded};_.lengthComputable&&(p.total=_.total),"text"===e.responseType&&o.responseText&&(p.partialText=o.responseText),s.next(p)},m=_=>{let p={type:Wl.UploadProgress,loaded:_.loaded};_.lengthComputable&&(p.total=_.total),s.next(p)};return o.addEventListener("load",d),o.addEventListener("error",u),o.addEventListener("timeout",u),o.addEventListener("abort",u),e.reportProgress&&(o.addEventListener("progress",f),null!==a&&o.upload&&o.upload.addEventListener("progress",m)),o.send(a),s.next({type:Wl.Sent}),()=>{o.removeEventListener("error",u),o.removeEventListener("abort",u),o.removeEventListener("load",d),o.removeEventListener("timeout",u),e.reportProgress&&(o.removeEventListener("progress",f),null!==a&&o.upload&&o.upload.removeEventListener("progress",m)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(n){return new(n||i)(ue(FN))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})();const DA=new le(""),QH=new le("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),JH=new le("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class e4{}let Wge=(()=>{class i{constructor(e,n,r){this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=wN(e,this.cookieName),this.lastCookieString=e),this.lastToken}static#e=this.\u0275fac=function(n){return new(n||i)(ue(Xt),ue(oo),ue(QH))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})();function $ge(i,t){const e=i.url.toLowerCase();if(!ee(DA)||"GET"===i.method||"HEAD"===i.method||e.startsWith("http://")||e.startsWith("https://"))return t(i);const n=ee(e4).getToken(),r=ee(JH);return null!=n&&!i.headers.has(r)&&(i=i.clone({headers:i.headers.set(r,n)})),t(i)}var $l=function(i){return i[i.Interceptors=0]="Interceptors",i[i.LegacyInterceptors=1]="LegacyInterceptors",i[i.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",i[i.NoXsrfProtection=3]="NoXsrfProtection",i[i.JsonpSupport=4]="JsonpSupport",i[i.RequestsMadeViaParent=5]="RequestsMadeViaParent",i[i.Fetch=6]="Fetch",i}($l||{});function Xge(...i){const t=[I0,KH,YH,{provide:C0,useExisting:YH},{provide:E0,useExisting:KH},{provide:lg,useValue:$ge,multi:!0},{provide:DA,useValue:!0},{provide:e4,useClass:Wge}];for(const e of i)t.push(...e.\u0275providers);return function Sf(i){return{\u0275providers:i}}(t)}const t4=new le("");function qge(){return function Dd(i,t){return{\u0275kind:i,\u0275providers:t}}($l.LegacyInterceptors,[{provide:t4,useFactory:Oge},{provide:lg,useExisting:t4,multi:!0}])}let Yge=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({providers:[Xge(qge())]})}return i})();const t_e=["*"];let k0;function cg(i){return function i_e(){if(void 0===k0&&(k0=null,typeof window<"u")){const i=window;void 0!==i.trustedTypes&&(k0=i.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return k0}()?.createHTML(i)||i}function d4(i){return Error(`Unable to find icon with the name "${i}"`)}function u4(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function h4(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class Id{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let F0=(()=>{class i{constructor(e,n,r,s){this._httpClient=e,this._sanitizer=n,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,n,r){return this.addSvgIconInNamespace("",e,n,r)}addSvgIconLiteral(e,n,r){return this.addSvgIconLiteralInNamespace("",e,n,r)}addSvgIconInNamespace(e,n,r,s){return this._addSvgIconConfig(e,n,new Id(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,n,r,s){const o=this._sanitizer.sanitize(tr.HTML,r);if(!o)throw h4(r);const a=cg(o);return this._addSvgIconConfig(e,n,new Id("",a,s))}addSvgIconSet(e,n){return this.addSvgIconSetInNamespace("",e,n)}addSvgIconSetLiteral(e,n){return this.addSvgIconSetLiteralInNamespace("",e,n)}addSvgIconSetInNamespace(e,n,r){return this._addSvgIconSetConfig(e,new Id(n,null,r))}addSvgIconSetLiteralInNamespace(e,n,r){const s=this._sanitizer.sanitize(tr.HTML,n);if(!s)throw h4(n);const o=cg(s);return this._addSvgIconSetConfig(e,new Id("",o,r))}registerFontClassAlias(e,n=e){return this._fontCssClassesByAlias.set(e,n),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const n=this._sanitizer.sanitize(tr.RESOURCE_URL,e);if(!n)throw u4(e);const r=this._cachedIconsByUrl.get(n);return r?ct(L0(r)):this._loadSvgIconFromConfig(new Id(e,null)).pipe(Mn(s=>this._cachedIconsByUrl.set(n,s)),Ct(s=>L0(s)))}getNamedSvgIcon(e,n=""){const r=f4(n,e);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(n,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(n);return o?this._getSvgFromIconSetConfigs(e,o):Ho(d4(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?ct(L0(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Ct(n=>L0(n)))}_getSvgFromIconSetConfigs(e,n){const r=this._extractIconWithNameFromAnySet(e,n);return r?ct(r):MA(n.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Ma(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(tr.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),ct(null)})))).pipe(Ct(()=>{const o=this._extractIconWithNameFromAnySet(e,n);if(!o)throw d4(e);return o}))}_extractIconWithNameFromAnySet(e,n){for(let r=n.length-1;r>=0;r--){const s=n[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,e,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Mn(n=>e.svgText=n),Ct(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?ct(null):this._fetchIcon(e).pipe(Mn(n=>e.svgText=n))}_extractSvgIconFromSet(e,n,r){const s=e.querySelector(`[id="${n}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(cg("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(e){const n=this._document.createElement("DIV");n.innerHTML=e;const r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const n=this._svgElementFromString(cg("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&n.setAttribute(o,a)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&n.appendChild(e.childNodes[s].cloneNode(!0));return n}_setSvgAttributes(e,n){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),n&&n.viewBox&&e.setAttribute("viewBox",n.viewBox),e}_fetchIcon(e){const{url:n,options:r}=e,s=r?.withCredentials??!1;if(!this._httpClient)throw function n_e(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const o=this._sanitizer.sanitize(tr.RESOURCE_URL,n);if(!o)throw u4(n);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Ct(c=>cg(c)),Ku(()=>this._inProgressUrlFetches.delete(o)),UH());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(e,n,r){return this._svgIconConfigs.set(f4(e,n),r),this}_addSvgIconSetConfig(e,n){const r=this._iconSetConfigs.get(e);return r?r.push(n):this._iconSetConfigs.set(e,[n]),this}_svgElementFromConfig(e){if(!e.svgElement){const n=this._svgElementFromString(e.svgText);this._setSvgAttributes(n,e.options),e.svgElement=n}return e.svgElement}_getIconConfigFromResolvers(e,n){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](n,e);if(s)return s_e(s)?new Id(s.url,null,s.options):new Id(s,null)}}static#e=this.\u0275fac=function(n){return new(n||i)(ue(I0,8),ue(ov),ue(Xt,8),ue(fs))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function L0(i){return i.cloneNode(!0)}function f4(i,t){return i+":"+t}function s_e(i){return!(!i.url||!i.options)}const o_e=new le("MAT_ICON_DEFAULT_OPTIONS"),a_e=new le("mat-icon-location",{providedIn:"root",factory:function l_e(){const i=ee(Xt),t=i?i.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),m4=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],c_e=m4.map(i=>`[${i}]`).join(", "),d_e=/^url\(['"]?#(.*?)['"]?\)$/;let p4=(()=>{class i{get color(){return this._color||this._defaultColor}set color(e){this._color=e}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const n=this._cleanupFontValue(e);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const n=this._cleanupFontValue(e);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}constructor(e,n,r,s,o,a){this._elementRef=e,this._iconRegistry=n,this._location=s,this._errorHandler=o,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Oi.EMPTY,a&&(a.color&&(this.color=this._defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];const n=e.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let n=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const r=e.childNodes[n];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),n.forEach(r=>e.classList.add(r)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const n=this._elementsWithExternalReferences;n&&n.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${e}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(e){const n=e.querySelectorAll(c_e),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<n.length;s++)m4.forEach(o=>{const a=n[s],l=a.getAttribute(o),c=l?l.match(d_e):null;if(c){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:o,value:c[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[n,r]=this._splitIconName(e);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(vs(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${r}! ${s.message}`))})}}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt),P(F0),hu("aria-hidden"),P(a_e),P(fs),P(o_e,8))};static#t=this.\u0275cmp=pe({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(n,r){2&n&&(Wi("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),hl(r.color?"mat-"+r.color:""),di("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:[rt.HasDecoratorInputTransform,"inline","inline",$i],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[gs,rn],ngContentSelectors:t_e,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return i})(),IA=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({imports:[Qi,Qi]})}return i})();const u_e=["*"],g_e=new le("MAT_CARD_CONFIG");let g4=(()=>{class i{constructor(e){this.appearance=e?.appearance||"raised"}static#e=this.\u0275fac=function(n){return new(n||i)(P(g_e,8))};static#t=this.\u0275cmp=pe({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(n,r){2&n&&di("mat-mdc-card-outlined","outlined"===r.appearance)("mdc-card--outlined","outlined"===r.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[rn],ngContentSelectors:u_e,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return i})(),_4=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275dir=Pe({type:i,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0})}return i})(),b4=(()=>{class i{constructor(){this.align="start"}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275dir=Pe({type:i,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(n,r){2&n&&di("mat-mdc-card-actions-align-end","end"===r.align)},inputs:{align:"align"},exportAs:["matCardActions"],standalone:!0})}return i})(),v4=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({imports:[Qi,qu,Qi]})}return i})();class PA{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class y_e extends PA{constructor(t,e,n,r,s){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r,this.projectableNodes=s}}class kA extends PA{constructor(t,e,n,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class x_e extends PA{constructor(t){super(),this.element=t instanceof xt?t.nativeElement:t}}class y4{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof y_e?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof kA?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof x_e?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class w_e extends y4{constructor(t,e,n,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(t){const n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=n.create(t.injector||this._defaultInjector||ar.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(n);-1!==r&&e.remove(r)}),this._attachedPortal=t,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let T_e=(()=>{class i extends kA{constructor(e,n){super(e,n)}static#e=this.\u0275fac=function(n){return new(n||i)(P(Kr),P(br))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],standalone:!0,features:[ge]})}return i})(),FA=(()=>{class i extends y4{constructor(e,n,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new lt,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const n=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),o=n.createComponent(s,n.length,e.injector||n.injector,e.projectableNodes||void 0);return n!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static#e=this.\u0275fac=function(n){return new(n||i)(P(Tc),P(br),P(Xt))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[rt.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[ge]})}return i})(),M_e=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({})}return i})();const S_e=["addListener","removeListener"],R_e=["addEventListener","removeEventListener"],C_e=["on","off"];function Xl(i,t,e,n){if(pi(e)&&(n=e,e=void 0),n)return Xl(i,t,e).pipe(YS(n));const[r,s]=function D_e(i){return pi(i.addEventListener)&&pi(i.removeEventListener)}(i)?R_e.map(o=>a=>i[o](t,a,e)):function E_e(i){return pi(i.addListener)&&pi(i.removeListener)}(i)?S_e.map(x4(i,t)):function A_e(i){return pi(i.on)&&pi(i.off)}(i)?C_e.map(x4(i,t)):[];if(!r&&XS(i))return cr(o=>Xl(o,t,e))(Nr(i));if(!r)throw new TypeError("Invalid event target");return new Pi(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function x4(i,t){return e=>n=>i[e](t,n)}function af(...i){const t=Bm(i),e=function Cie(i,t){return"number"==typeof qS(i)?i.pop():t}(i,1/0),n=i;return n.length?1===n.length?Nr(n[0]):Yu(e)(hn(n,t)):vr}function w4(i=0,t,e=ype){let n=-1;return null!=t&&(wj(t)?e=t:n=t),new Pi(r=>{let s=function I_e(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},s)})}const dg={schedule(i){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:n}=dg;n&&(t=n.requestAnimationFrame,e=n.cancelAnimationFrame);const r=t(s=>{e=void 0,i(s)});return new Oi(()=>e?.(r))},requestAnimationFrame(...i){const{delegate:t}=dg;return(t?.requestAnimationFrame||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:t}=dg;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...i)},delegate:void 0};new class k_e extends mA{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;t=t||n.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=n[0])&&t.id===e&&n.shift());if(this._active=!1,r){for(;(t=n[0])&&t.id===e&&n.shift();)t.unsubscribe();throw r}}}(class P_e extends fA{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=dg.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(t,e,n);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(dg.cancelAnimationFrame(e),t._scheduled=void 0)}});let LA,L_e=1;const O0={};function T4(i){return i in O0&&(delete O0[i],!0)}const O_e={setImmediate(i){const t=L_e++;return O0[t]=!0,LA||(LA=Promise.resolve()),LA.then(()=>T4(t)&&i()),t},clearImmediate(i){T4(i)}},{setImmediate:N_e,clearImmediate:j_e}=O_e,N0={setImmediate(...i){const{delegate:t}=N0;return(t?.setImmediate||N_e)(...i)},clearImmediate(i){const{delegate:t}=N0;return(t?.clearImmediate||j_e)(i)},delegate:void 0};new class U_e extends mA{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;t=t||n.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=n[0])&&t.id===e&&n.shift());if(this._active=!1,r){for(;(t=n[0])&&t.id===e&&n.shift();)t.unsubscribe();throw r}}}(class B_e extends fA{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=N0.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(t,e,n);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(N0.clearImmediate(e),t._scheduled===e&&(t._scheduled=void 0))}});function M4(i,t=pA){return function z_e(i){return _n((t,e)=>{let n=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,n){n=!1;const c=r;r=null,e.next(c)}o&&e.complete()},l=()=>{s=null,o&&e.complete()};t.subscribe(tn(e,c=>{n=!0,r=c,s||Nr(i(c)).subscribe(s=tn(e,a,l))},()=>{o=!0,(!n||!s||s.closed)&&e.complete()}))})}(()=>w4(i,t))}let j0=(()=>{class i{constructor(e,n,r){this._ngZone=e,this._platform=n,this._scrolled=new Et,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Pi(n=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(M4(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ct()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){const r=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(sn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let r=Rd(n),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Xl(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(n){return new(n||i)(ue(it),ue(ln),ue(Xt,8))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),lf=(()=>{class i{constructor(e,n,r,s){this.elementRef=e,this.scrollDispatcher=n,this.ngZone=r,this.dir=s,this._destroyed=new Et,this._elementScrolled=new Pi(o=>this.ngZone.runOutsideAngular(()=>Xl(this.elementRef.nativeElement,"scroll").pipe(Zi(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const n=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=r?e.end:e.start),null==e.right&&(e.right=r?e.start:e.end),null!=e.bottom&&(e.top=n.scrollHeight-n.clientHeight-e.bottom),r&&eg()!=ra.NORMAL?(null!=e.left&&(e.right=n.scrollWidth-n.clientWidth-e.left),eg()==ra.INVERTED?e.left=e.right:eg()==ra.NEGATED&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=n.scrollWidth-n.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const n=this.elementRef.nativeElement;aH()?n.scrollTo(e):(null!=e.top&&(n.scrollTop=e.top),null!=e.left&&(n.scrollLeft=e.left))}measureScrollOffset(e){const n="left",r="right",s=this.elementRef.nativeElement;if("top"==e)return s.scrollTop;if("bottom"==e)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==e?e=o?r:n:"end"==e&&(e=o?n:r),o&&eg()==ra.INVERTED?e==n?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&eg()==ra.NEGATED?e==n?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==n?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt),P(j0),P(it),P(rf,8))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}return i})(),ug=(()=>{class i{constructor(e,n,r){this._platform=e,this._change=new Et,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,n=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||n.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||n.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(M4(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(n){return new(n||i)(ue(ln),ue(it),ue(Xt,8))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),hg=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({})}return i})(),S4=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({imports:[ig,hg,ig,hg]})}return i})(),R4=(()=>{class i{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),$_e=(()=>{class i{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,n)=>this._cleanupObserver(n))}observe(e){const n=Rd(e);return new Pi(r=>{const o=this._observeElement(n).pipe(Ct(a=>a.filter(l=>!function W_e(i){if("characterData"===i.type&&i.target instanceof Comment)return!0;if("childList"===i.type){for(let t=0;t<i.addedNodes.length;t++)if(!(i.addedNodes[t]instanceof Comment))return!1;for(let t=0;t<i.removedNodes.length;t++)if(!(i.removedNodes[t]instanceof Comment))return!1;return!0}return!1}(l))),sn(a=>!!a.length)).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(n)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const n=new Et,r=this._mutationObserverFactory.create(s=>n.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:n,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:n,stream:r}=this._observedElements.get(e);n&&n.disconnect(),r.complete(),this._observedElements.delete(e)}}static#e=this.\u0275fac=function(n){return new(n||i)(ue(R4))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),OA=(()=>{class i{get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=x0(e),this._subscribe()}constructor(e,n,r){this._contentObserver=e,this._elementRef=n,this._ngZone=r,this.event=new lt,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(y0(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(P($_e),P(xt),P(it))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[rt.HasDecoratorInputTransform,"cdkObserveContentDisabled","disabled",$i],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"],standalone:!0,features:[gs]})}return i})(),C4=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({providers:[R4]})}return i})();var St=function(i){return i[i.State=0]="State",i[i.Transition=1]="Transition",i[i.Sequence=2]="Sequence",i[i.Group=3]="Group",i[i.Animate=4]="Animate",i[i.Keyframes=5]="Keyframes",i[i.Style=6]="Style",i[i.Trigger=7]="Trigger",i[i.Reference=8]="Reference",i[i.AnimateChild=9]="AnimateChild",i[i.AnimateRef=10]="AnimateRef",i[i.Query=11]="Query",i[i.Stagger=12]="Stagger",i}(St||{});const $a="*";function fg(i,t){return{type:St.Trigger,name:i,definitions:t,options:{}}}function ql(i,t=null){return{type:St.Animate,styles:t,timings:i}}function os(i){return{type:St.Style,styles:i,offset:null}}function Pd(i,t,e){return{type:St.State,name:i,styles:t,options:e}}function Xa(i,t,e=null){return{type:St.Transition,expr:i,animation:t,options:e}}class mg{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class E4{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(r)})}getPosition(){const t=this.players.reduce((e,n)=>null===e||n.totalTime>e.totalTime?n:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}const jA=["*"];function ebe(i,t){1&i&&Ce(0)}const tbe=["tabListContainer"],ibe=["tabList"],nbe=["tabListInner"],rbe=["nextPaginator"],sbe=["previousPaginator"],obe=i=>({animationDuration:i}),abe=(i,t)=>({value:i,params:t});function lbe(i,t){}const cbe=["tabBodyWrapper"],dbe=["tabHeader"];function ube(i,t){}function hbe(i,t){1&i&&si(0,ube,0,0,"ng-template",12),2&i&&O("cdkPortalOutlet",Qt().$implicit.templateLabel)}function fbe(i,t){1&i&&Jt(0),2&i&&Rb(Qt().$implicit.textLabel)}function mbe(i,t){if(1&i){const e=Bi();K(0,"div",7,2),Ke("click",function(){const r=Pt(e),s=r.$implicit,o=r.$index,a=Qt(),l=Ot(1);return kt(a._handleClick(s,l,o))})("cdkFocusChange",function(r){const s=Pt(e).$index;return kt(Qt()._tabFocusChanged(r,s))}),ve(2,"span",8)(3,"div",9),K(4,"span",10)(5,"span",11),si(6,hbe,1,1,null,12)(7,fbe,1,1),de()()()}if(2&i){const e=t.$implicit,n=t.$index,r=Ot(1),s=Qt();hl(e.labelClass),di("mdc-tab--active",s.selectedIndex===n),O("id",s._getTabLabelId(n))("disabled",e.disabled)("fitInkBarToContent",s.fitInkBarToContent),Wi("tabIndex",s._getTabIndex(n))("aria-posinset",n+1)("aria-setsize",s._tabs.length)("aria-controls",s._getTabContentId(n))("aria-selected",s.selectedIndex===n)("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null),B(3),O("matRippleTrigger",r)("matRippleDisabled",e.disabled||s.disableRipple),B(3),co(6,e.templateLabel?6:7)}}function pbe(i,t){1&i&&Ce(0)}function gbe(i,t){if(1&i){const e=Bi();K(0,"mat-tab-body",13),Ke("_onCentered",function(){return Pt(e),kt(Qt()._removeTabBodyWrapperHeight())})("_onCentering",function(r){return Pt(e),kt(Qt()._setTabBodyWrapperHeight(r))}),de()}if(2&i){const e=t.$implicit,n=t.$index,r=Qt();hl(e.bodyClass),di("mat-mdc-tab-body-active",r.selectedIndex===n),O("id",r._getTabContentId(n))("content",e.content)("position",e.position)("origin",e.origin)("animationDuration",r.animationDuration)("preserveContent",r.preserveContent),Wi("tabindex",null!=r.contentTabIndex&&r.selectedIndex===n?r.contentTabIndex:null)("aria-labelledby",r._getTabLabelId(n))("aria-hidden",r.selectedIndex!==n)}}const _be=new le("MatTabContent");let bbe=(()=>{class i{constructor(e){this.template=e}static#e=this.\u0275fac=function(n){return new(n||i)(P(Kr))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","matTabContent",""]],standalone:!0,features:[Ee([{provide:_be,useExisting:i}])]})}return i})();const vbe=new le("MatTabLabel"),A4=new le("MAT_TAB");let ybe=(()=>{class i extends T_e{constructor(e,n,r){super(e,n),this._closestTab=r}static#e=this.\u0275fac=function(n){return new(n||i)(P(Kr),P(br),P(A4,8))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],standalone:!0,features:[Ee([{provide:vbe,useExisting:i}]),ge]})}return i})();const D4=new le("MAT_TAB_GROUP");let I4=(()=>{class i{get templateLabel(){return this._templateLabel}set templateLabel(e){this._setTemplateLabelInput(e)}get content(){return this._contentPortal}constructor(e,n){this._viewContainerRef=e,this._closestTabGroup=n,this.disabled=!1,this._explicitContent=void 0,this.textLabel="",this._contentPortal=null,this._stateChanges=new Et,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(e){(e.hasOwnProperty("textLabel")||e.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new kA(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(e){e&&e._closestTab===this&&(this._templateLabel=e)}static#e=this.\u0275fac=function(n){return new(n||i)(P(br),P(D4,8))};static#t=this.\u0275cmp=pe({type:i,selectors:[["mat-tab"]],contentQueries:function(n,r,s){if(1&n&&(dn(s,ybe,5),dn(s,bbe,7,Kr)),2&n){let o;bt(o=vt())&&(r.templateLabel=o.first),bt(o=vt())&&(r._explicitContent=o.first)}},viewQuery:function(n,r){if(1&n&&Ei(Kr,7),2&n){let s;bt(s=vt())&&(r._implicitContent=s.first)}},hostAttrs:["hidden",""],inputs:{disabled:[rt.HasDecoratorInputTransform,"disabled","disabled",$i],textLabel:[rt.None,"label","textLabel"],ariaLabel:[rt.None,"aria-label","ariaLabel"],ariaLabelledby:[rt.None,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],standalone:!0,features:[Ee([{provide:A4,useExisting:i}]),gs,pr,rn],ngContentSelectors:jA,decls:1,vars:0,template:function(n,r){1&n&&(ze(),si(0,ebe,1,0,"ng-template"))},encapsulation:2})}return i})();const BA="mdc-tab-indicator--active",P4="mdc-tab-indicator--no-transition";class xbe{constructor(t){this._items=t}hide(){this._items.forEach(t=>t.deactivateInkBar())}alignToElement(t){const e=this._items.find(r=>r.elementRef.nativeElement===t),n=this._currentItem;if(e!==n&&(n?.deactivateInkBar(),e)){const r=n?.elementRef.nativeElement.getBoundingClientRect?.();e.activateInkBar(r),this._currentItem=e}}}let wbe=(()=>{class i{constructor(){this._elementRef=ee(xt),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(e){this._fitToContent!==e&&(this._fitToContent=e,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(e){const n=this._elementRef.nativeElement;if(!e||!n.getBoundingClientRect||!this._inkBarContentElement)return void n.classList.add(BA);const r=n.getBoundingClientRect(),s=e.width/r.width,o=e.left-r.left;n.classList.add(P4),this._inkBarContentElement.style.setProperty("transform",`translateX(${o}px) scaleX(${s})`),n.getBoundingClientRect(),n.classList.remove(P4),n.classList.add(BA),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this._elementRef.nativeElement.classList.remove(BA)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){const e=this._elementRef.nativeElement.ownerDocument||document,n=this._inkBarElement=e.createElement("span"),r=this._inkBarContentElement=e.createElement("span");n.className="mdc-tab-indicator",r.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",n.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){(this._fitToContent?this._elementRef.nativeElement.querySelector(".mdc-tab__content"):this._elementRef.nativeElement).appendChild(this._inkBarElement)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275dir=Pe({type:i,inputs:{fitInkBarToContent:[rt.HasDecoratorInputTransform,"fitInkBarToContent","fitInkBarToContent",$i]},features:[gs]})}return i})(),k4=(()=>{class i extends wbe{constructor(e){super(),this.elementRef=e,this.disabled=!1}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(n,r){2&n&&(Wi("aria-disabled",!!r.disabled),di("mat-mdc-tab-disabled",r.disabled))},inputs:{disabled:[rt.HasDecoratorInputTransform,"disabled","disabled",$i]},standalone:!0,features:[gs,ge]})}return i})();const F4=Jp({passive:!0});let Rbe=(()=>{class i{get selectedIndex(){return this._selectedIndex}set selectedIndex(e){const n=isNaN(e)?0:e;this._selectedIndex!=n&&(this._selectedIndexChanged=!0,this._selectedIndex=n,this._keyManager&&this._keyManager.updateActiveItem(n))}constructor(e,n,r,s,o,a,l){this._elementRef=e,this._changeDetectorRef=n,this._viewportRuler=r,this._dir=s,this._ngZone=o,this._platform=a,this._animationMode=l,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new Et,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new Et,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new lt,this.indexFocused=new lt,o.runOutsideAngular(()=>{Xl(e.nativeElement,"mouseleave").pipe(Zi(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){Xl(this._previousPaginator.nativeElement,"touchstart",F4).pipe(Zi(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Xl(this._nextPaginator.nativeElement,"touchstart",F4).pipe(Zi(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const e=this._dir?this._dir.change:ct("ltr"),n=this._viewportRuler.change(150),r=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new gH(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe(vs(1)).subscribe(r),af(e,n,this._items.changes,this._itemsResized()).pipe(Zi(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),r()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(s=>{this.indexFocused.emit(s),this._setTabFocus(s)})}_itemsResized(){return"function"!=typeof ResizeObserver?vr:this._items.changes.pipe(Lc(this._items),Jr(e=>new Pi(n=>this._ngZone.runOutsideAngular(()=>{const r=new ResizeObserver(s=>n.next(s));return e.forEach(s=>r.observe(s.elementRef.nativeElement)),()=>{r.disconnect()}}))),gA(1),sn(e=>e.some(n=>n.contentRect.width>0&&n.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(e){if(!b0(e))switch(e.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){const n=this._items.get(this.focusIndex);n&&!n.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(e))}break;default:this._keyManager.onKeydown(e)}}_onContentChanges(){const e=this._elementRef.nativeElement.textContent;e!==this._currentTextContent&&(this._currentTextContent=e||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(e){!this._isValidIndex(e)||this.focusIndex===e||!this._keyManager||this._keyManager.setActiveItem(e)}_isValidIndex(e){return!this._items||!!this._items.toArray()[e]}_setTabFocus(e){if(this._showPaginationControls&&this._scrollToLabel(e),this._items&&this._items.length){this._items.toArray()[e].focus();const n=this._tabListContainer.nativeElement;n.scrollLeft="ltr"==this._getLayoutDirection()?0:n.scrollWidth-n.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const e=this.scrollDistance,n="ltr"===this._getLayoutDirection()?-e:e;this._tabList.nativeElement.style.transform=`translateX(${Math.round(n)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(e){this._scrollTo(e)}_scrollHeader(e){return this._scrollTo(this._scrollDistance+("before"==e?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(e){this._stopInterval(),this._scrollHeader(e)}_scrollToLabel(e){if(this.disablePagination)return;const n=this._items?this._items.toArray()[e]:null;if(!n)return;const r=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:s,offsetWidth:o}=n.elementRef.nativeElement;let a,l;"ltr"==this._getLayoutDirection()?(a=s,l=a+o):(l=this._tabListInner.nativeElement.offsetWidth-s,a=l-o);const c=this.scrollDistance,d=this.scrollDistance+r;a<c?this.scrollDistance-=c-a:l>d&&(this.scrollDistance+=Math.min(l-d,a-c))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const e=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;e||(this.scrollDistance=0),e!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=e}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const e=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,n=e?e.elementRef.nativeElement:null;n?this._inkBar.alignToElement(n):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(e,n){n&&null!=n.button&&0!==n.button||(this._stopInterval(),w4(650,100).pipe(Zi(af(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:r,distance:s}=this._scrollHeader(e);(0===s||s>=r)&&this._stopInterval()}))}_scrollTo(e){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const n=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(n,e)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:n,distance:this._scrollDistance}}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt),P(lr),P(ug),P(rf,8),P(it),P(ln),P(Yr,8))};static#t=this.\u0275dir=Pe({type:i,inputs:{disablePagination:[rt.HasDecoratorInputTransform,"disablePagination","disablePagination",$i],selectedIndex:[rt.HasDecoratorInputTransform,"selectedIndex","selectedIndex",pl]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[gs]})}return i})(),Cbe=(()=>{class i extends Rbe{constructor(e,n,r,s,o,a,l){super(e,n,r,s,o,a,l),this.disableRipple=!1}ngAfterContentInit(){this._inkBar=new xbe(this._items),super.ngAfterContentInit()}_itemSelected(e){e.preventDefault()}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt),P(lr),P(ug),P(rf,8),P(it),P(ln),P(Yr,8))};static#t=this.\u0275cmp=pe({type:i,selectors:[["mat-tab-header"]],contentQueries:function(n,r,s){if(1&n&&dn(s,k4,4),2&n){let o;bt(o=vt())&&(r._items=o)}},viewQuery:function(n,r){if(1&n&&(Ei(tbe,7),Ei(ibe,7),Ei(nbe,7),Ei(rbe,5),Ei(sbe,5)),2&n){let s;bt(s=vt())&&(r._tabListContainer=s.first),bt(s=vt())&&(r._tabList=s.first),bt(s=vt())&&(r._tabListInner=s.first),bt(s=vt())&&(r._nextPaginator=s.first),bt(s=vt())&&(r._previousPaginator=s.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(n,r){2&n&&di("mat-mdc-tab-header-pagination-controls-enabled",r._showPaginationControls)("mat-mdc-tab-header-rtl","rtl"==r._getLayoutDirection())},inputs:{disableRipple:[rt.HasDecoratorInputTransform,"disableRipple","disableRipple",$i]},standalone:!0,features:[gs,ge,rn],ngContentSelectors:jA,decls:13,vars:10,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"click","mousedown","touchend","matRippleDisabled","disabled"],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],[1,"mat-mdc-tab-labels"],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"mousedown","click","touchend","matRippleDisabled","disabled"]],template:function(n,r){if(1&n){const s=Bi();ze(),K(0,"button",5,0),Ke("click",function(){return Pt(s),kt(r._handlePaginatorClick("before"))})("mousedown",function(a){return Pt(s),kt(r._handlePaginatorPress("before",a))})("touchend",function(){return Pt(s),kt(r._stopInterval())}),ve(2,"div",6),de(),K(3,"div",7,1),Ke("keydown",function(a){return Pt(s),kt(r._handleKeydown(a))}),K(5,"div",8,2),Ke("cdkObserveContent",function(){return Pt(s),kt(r._onContentChanges())}),K(7,"div",9,3),Ce(9),de()()(),K(10,"button",10,4),Ke("mousedown",function(a){return Pt(s),kt(r._handlePaginatorPress("after",a))})("click",function(){return Pt(s),kt(r._handlePaginatorClick("after"))})("touchend",function(){return Pt(s),kt(r._stopInterval())}),ve(12,"div",6),de()}2&n&&(di("mat-mdc-tab-header-pagination-disabled",r._disableScrollBefore),O("matRippleDisabled",r._disableScrollBefore||r.disableRipple)("disabled",r._disableScrollBefore||null),B(3),di("_mat-animation-noopable","NoopAnimations"===r._animationMode),B(7),di("mat-mdc-tab-header-pagination-disabled",r._disableScrollAfter),O("matRippleDisabled",r._disableScrollAfter||r.disableRipple)("disabled",r._disableScrollAfter||null))},dependencies:[yA,OA],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color)}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}._mat-animation-noopable span.mdc-tab-indicator__content,._mat-animation-noopable span.mdc-tab__text-label{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height);border-bottom-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height);border-top-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2})}return i})();const Ebe=new le("MAT_TABS_CONFIG"),Abe={translateTab:fg("translateTab",[Pd("center, void, left-origin-center, right-origin-center",os({transform:"none"})),Pd("left",os({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),Pd("right",os({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),Xa("* => left, * => right, left => center, right => center",ql("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),Xa("void => left-origin-center",[os({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),ql("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),Xa("void => right-origin-center",[os({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),ql("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let Dbe=(()=>{class i extends FA{constructor(e,n,r,s){super(e,n,s),this._host=r,this._centeringSub=Oi.EMPTY,this._leavingSub=Oi.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(Lc(this._host._isCenterPosition(this._host._position))).subscribe(e=>{e&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(P(Tc),P(br),P(Le(()=>L4)),P(Xt))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","matTabBodyHost",""]],standalone:!0,features:[ge]})}return i})(),L4=(()=>{class i{set position(e){this._positionIndex=e,this._computePositionAnimationState()}constructor(e,n,r){this._elementRef=e,this._dir=n,this._dirChangeSubscription=Oi.EMPTY,this._translateTabComplete=new Et,this._onCentering=new lt,this._beforeCentering=new lt,this._afterLeavingCenter=new lt,this._onCentered=new lt(!0),this.animationDuration="500ms",this.preserveContent=!1,n&&(this._dirChangeSubscription=n.change.subscribe(s=>{this._computePositionAnimationState(s),r.markForCheck()})),this._translateTabComplete.pipe(_A((s,o)=>s.fromState===o.fromState&&s.toState===o.toState)).subscribe(s=>{this._isCenterPosition(s.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(s.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(e){const n=this._isCenterPosition(e.toState);this._beforeCentering.emit(n),n&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(e){return"center"==e||"left-origin-center"==e||"right-origin-center"==e}_computePositionAnimationState(e=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==e?"left":"right":this._positionIndex>0?"ltr"==e?"right":"left":"center"}_computePositionFromOrigin(e){const n=this._getLayoutDirection();return"ltr"==n&&e<=0||"rtl"==n&&e>0?"left-origin-center":"right-origin-center"}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt),P(rf,8),P(lr))};static#t=this.\u0275cmp=pe({type:i,selectors:[["mat-tab-body"]],viewQuery:function(n,r){if(1&n&&Ei(FA,5),2&n){let s;bt(s=vt())&&(r._portalHost=s.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:[rt.None,"content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},standalone:!0,features:[rn],decls:3,vars:6,consts:[["content",""],["cdkScrollable","",1,"mat-mdc-tab-body-content"],["matTabBodyHost",""]],template:function(n,r){if(1&n){const s=Bi();K(0,"div",1,0),Ke("@translateTab.start",function(a){return Pt(s),kt(r._onTranslateTabStarted(a))})("@translateTab.done",function(a){return Pt(s),kt(r._translateTabComplete.next(a))}),si(2,lbe,0,0,"ng-template",2),de()}2&n&&O("@translateTab",uo(3,abe,r._position,Ft(1,obe,r.animationDuration)))},dependencies:[Dbe,lf],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[Abe.translateTab]}})}return i})(),Ibe=0,kbe=(()=>{class i{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(e){this._fitInkBarToContent=e,this._changeDetectorRef.markForCheck()}get selectedIndex(){return this._selectedIndex}set selectedIndex(e){this._indexToSelect=isNaN(e)?null:e}get animationDuration(){return this._animationDuration}set animationDuration(e){const n=e+"";this._animationDuration=/^\d+$/.test(n)?e+"ms":n}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(e){this._contentTabIndex=isNaN(e)?null:e}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){const n=this._elementRef.nativeElement.classList;n.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),e&&n.add("mat-tabs-with-background",`mat-background-${e}`),this._backgroundColor=e}constructor(e,n,r,s){this._elementRef=e,this._changeDetectorRef=n,this._animationMode=s,this._tabs=new yc,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=Oi.EMPTY,this._tabLabelSubscription=Oi.EMPTY,this._fitInkBarToContent=!1,this.stretchTabs=!0,this.dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this.disablePagination=!1,this.disableRipple=!1,this.preserveContent=!1,this.selectedIndexChange=new lt,this.focusChange=new lt,this.animationDone=new lt,this.selectedTabChange=new lt(!0),this._isServer=!ee(ln).isBrowser,this._groupId=Ibe++,this.animationDuration=r&&r.animationDuration?r.animationDuration:"500ms",this.disablePagination=!(!r||null==r.disablePagination)&&r.disablePagination,this.dynamicHeight=!(!r||null==r.dynamicHeight)&&r.dynamicHeight,null!=r?.contentTabIndex&&(this.contentTabIndex=r.contentTabIndex),this.preserveContent=!!r?.preserveContent,this.fitInkBarToContent=!(!r||null==r.fitInkBarToContent)&&r.fitInkBarToContent,this.stretchTabs=!r||null==r.stretchTabs||r.stretchTabs}ngAfterContentChecked(){const e=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=e){const n=null==this._selectedIndex;if(!n){this.selectedTabChange.emit(this._createChangeEvent(e));const r=this._tabBodyWrapper.nativeElement;r.style.minHeight=r.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((r,s)=>r.isActive=s===e),n||(this.selectedIndexChange.emit(e),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((n,r)=>{n.position=r-e,null!=this._selectedIndex&&0==n.position&&!n.origin&&(n.origin=e-this._selectedIndex)}),this._selectedIndex!==e&&(this._selectedIndex=e,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{const e=this._clampTabIndex(this._indexToSelect);if(e===this._selectedIndex){const n=this._tabs.toArray();let r;for(let s=0;s<n.length;s++)if(n[s].isActive){this._indexToSelect=this._selectedIndex=s,this._lastFocusedTabIndex=null,r=n[s];break}!r&&n[e]&&Promise.resolve().then(()=>{n[e].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(e))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(Lc(this._allTabs)).subscribe(e=>{this._tabs.reset(e.filter(n=>n._closestTabGroup===this||!n._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(e){const n=this._tabHeader;n&&(n.focusIndex=e)}_focusChanged(e){this._lastFocusedTabIndex=e,this.focusChange.emit(this._createChangeEvent(e))}_createChangeEvent(e){const n=new Fbe;return n.index=e,this._tabs&&this._tabs.length&&(n.tab=this._tabs.toArray()[e]),n}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=af(...this._tabs.map(e=>e._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(e){return Math.min(this._tabs.length-1,Math.max(e||0,0))}_getTabLabelId(e){return`mat-tab-label-${this._groupId}-${e}`}_getTabContentId(e){return`mat-tab-content-${this._groupId}-${e}`}_setTabBodyWrapperHeight(e){if(!this.dynamicHeight||!this._tabBodyWrapperHeight)return;const n=this._tabBodyWrapper.nativeElement;n.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(n.style.height=e+"px")}_removeTabBodyWrapperHeight(){const e=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=e.clientHeight,e.style.height="",this.animationDone.emit()}_handleClick(e,n,r){n.focusIndex=r,e.disabled||(this.selectedIndex=r)}_getTabIndex(e){return e===(this._lastFocusedTabIndex??this.selectedIndex)?0:-1}_tabFocusChanged(e,n){e&&"mouse"!==e&&"touch"!==e&&(this._tabHeader.focusIndex=n)}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt),P(lr),P(Ebe,8),P(Yr,8))};static#t=this.\u0275cmp=pe({type:i,selectors:[["mat-tab-group"]],contentQueries:function(n,r,s){if(1&n&&dn(s,I4,5),2&n){let o;bt(o=vt())&&(r._allTabs=o)}},viewQuery:function(n,r){if(1&n&&(Ei(cbe,5),Ei(dbe,5)),2&n){let s;bt(s=vt())&&(r._tabBodyWrapper=s.first),bt(s=vt())&&(r._tabHeader=s.first)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:10,hostBindings:function(n,r){2&n&&(hl("mat-"+(r.color||"primary")),Ac("--mat-tab-animation-duration",r.animationDuration),di("mat-mdc-tab-group-dynamic-height",r.dynamicHeight)("mat-mdc-tab-group-inverted-header","below"===r.headerPosition)("mat-mdc-tab-group-stretch-tabs",r.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[rt.HasDecoratorInputTransform,"fitInkBarToContent","fitInkBarToContent",$i],stretchTabs:[rt.HasDecoratorInputTransform,"mat-stretch-tabs","stretchTabs",$i],dynamicHeight:[rt.HasDecoratorInputTransform,"dynamicHeight","dynamicHeight",$i],selectedIndex:[rt.HasDecoratorInputTransform,"selectedIndex","selectedIndex",pl],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[rt.HasDecoratorInputTransform,"contentTabIndex","contentTabIndex",pl],disablePagination:[rt.HasDecoratorInputTransform,"disablePagination","disablePagination",$i],disableRipple:[rt.HasDecoratorInputTransform,"disableRipple","disableRipple",$i],preserveContent:[rt.HasDecoratorInputTransform,"preserveContent","preserveContent",$i],backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],standalone:!0,features:[Ee([{provide:D4,useExisting:i}]),gs,rn],ngContentSelectors:jA,decls:9,vars:6,consts:[["tabHeader",""],["tabBodyWrapper",""],["tabNode",""],[3,"indexFocused","selectFocusedIndex","selectedIndex","disableRipple","disablePagination"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","mdc-tab--active","class","disabled","fitInkBarToContent"],[1,"mat-mdc-tab-body-wrapper"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","class","content","position","origin","animationDuration","preserveContent"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"click","cdkFocusChange","id","disabled","fitInkBarToContent"],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"_onCentered","_onCentering","id","content","position","origin","animationDuration","preserveContent"]],template:function(n,r){if(1&n){const s=Bi();ze(),K(0,"mat-tab-header",3,0),Ke("indexFocused",function(a){return Pt(s),kt(r._focusChanged(a))})("selectFocusedIndex",function(a){return Pt(s),kt(r.selectedIndex=a)}),FM(2,mbe,8,17,"div",4,kM),de(),si(4,pbe,1,0),K(5,"div",5,1),FM(7,gbe,1,13,"mat-tab-body",6,kM),de()}2&n&&(O("selectedIndex",r.selectedIndex||0)("disableRipple",r.disableRipple)("disablePagination",r.disablePagination),B(2),LM(r._tabs),B(2),co(4,r._isServer?4:-1),B(),di("_mat-animation-noopable","NoopAnimations"===r._animationMode),B(2),LM(r._tabs))},dependencies:[Cbe,k4,Xpe,yA,FA,L4],styles:['.mdc-tab{min-width:90px;padding-right:24px;padding-left:24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;margin:0;padding-top:0;padding-bottom:0;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;-webkit-appearance:none;z-index:1}.mdc-tab::-moz-focus-inner{padding:0;border:0}.mdc-tab[hidden]{display:none}.mdc-tab--min-width{flex:0 1 auto}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab__icon{transition:150ms color linear;z-index:2}.mdc-tab--stacked .mdc-tab__content{flex-direction:column;align-items:center;justify-content:center}.mdc-tab--stacked .mdc-tab__text-label{padding-top:6px;padding-bottom:4px}.mdc-tab--active .mdc-tab__text-label,.mdc-tab--active .mdc-tab__icon{transition-delay:100ms}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label,.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl]{padding-left:0;padding-right:8px}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator__content--icon{align-self:center;margin:0 auto}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}.mdc-tab-indicator .mdc-tab-indicator__content{transition:250ms transform cubic-bezier(0.4, 0, 0.2, 1)}.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition:150ms opacity linear}.mdc-tab-indicator--active.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition-delay:100ms}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;font-family:var(--mat-tab-header-label-text-font);font-size:var(--mat-tab-header-label-text-size);letter-spacing:var(--mat-tab-header-label-text-tracking);line-height:var(--mat-tab-header-label-text-line-height);font-weight:var(--mat-tab-header-label-text-weight)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-top-width:var(--mdc-tab-indicator-active-indicator-height)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:not(.mdc-tab--stacked){height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab:not(:disabled).mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color)}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color)}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color);display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2})}return i})();class Fbe{}let O4=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({imports:[Qi,Qi]})}return i})();const UA=new le("HIGHLIGHT_OPTIONS");function Obe(i){return[{provide:UA,useValue:i}]}var cf=function(i){return i.FULL_WITH_CORE_LIBRARY_IMPORTS="The full library and the core library were imported, only one of them should be imported!",i.FULL_WITH_LANGUAGE_IMPORTS="The highlighting languages were imported they are not needed!",i.CORE_WITHOUT_LANGUAGE_IMPORTS="The highlighting languages were not imported!",i.LANGUAGE_WITHOUT_CORE_IMPORTS="The core library was not imported!",i.NO_FULL_AND_NO_CORE_IMPORTS="Highlight.js library was not imported!",i}(cf||{});let Nbe=(()=>{class i{constructor(){this.document=ee(Xt),this.isPlatformBrowser=iv(ee(oo)),this.options=ee(UA,{optional:!0}),this._ready=new Wr(null),this.ready=function Lbe(i,t){const e="object"==typeof t;return new Promise((n,r)=>{const s=new Wd({next:o=>{n(o),s.unsubscribe()},error:r,complete:()=>{e?n(t.defaultValue):r(new Um)}});i.subscribe(s)})}(this._ready.asObservable().pipe(sn(e=>!!e))),this.isPlatformBrowser&&(this.document.defaultView.hljs?this._ready.next(this.document.defaultView.hljs):this._loadLibrary().pipe(Jr(e=>this.options?.lineNumbersLoader?(this.document.defaultView.hljs=e,this.loadLineNumbers().pipe(Mn(n=>{n.activateLineNumbers(),this._ready.next(e)}))):(this._ready.next(e),vr)),Ma(e=>(console.error("[HLJS] ",e),this._ready.error(e),vr))).subscribe(),this.options?.themePath&&this.loadTheme(this.options.themePath))}_loadLibrary(){if(this.options){if(this.options.fullLibraryLoader&&this.options.coreLibraryLoader)return Ho(()=>cf.FULL_WITH_CORE_LIBRARY_IMPORTS);if(this.options.fullLibraryLoader&&this.options.languages)return Ho(()=>cf.FULL_WITH_LANGUAGE_IMPORTS);if(this.options.coreLibraryLoader&&!this.options.languages)return Ho(()=>cf.CORE_WITHOUT_LANGUAGE_IMPORTS);if(!this.options.coreLibraryLoader&&this.options.languages)return Ho(()=>cf.LANGUAGE_WITHOUT_CORE_IMPORTS);if(this.options.fullLibraryLoader)return this.loadFullLibrary();if(this.options.coreLibraryLoader&&this.options.languages&&Object.keys(this.options.languages).length)return this.loadCoreLibrary().pipe(Jr(e=>this._loadLanguages(e)))}return Ho(()=>cf.NO_FULL_AND_NO_CORE_IMPORTS)}_loadLanguages(e){return MA(Object.entries(this.options.languages).map(([r,s])=>VA(s()).pipe(Mn(o=>e.registerLanguage(r,o))))).pipe(Ct(()=>e))}loadCoreLibrary(){return VA(this.options.coreLibraryLoader())}loadFullLibrary(){return VA(this.options.fullLibraryLoader())}loadLineNumbers(){return hn(this.options.lineNumbersLoader())}setTheme(e){this.isPlatformBrowser&&(this._themeLinkElement?this._themeLinkElement.href=e:this.loadTheme(e))}loadTheme(e){this._themeLinkElement=this.document.createElement("link"),this._themeLinkElement.href=e,this._themeLinkElement.type="text/css",this._themeLinkElement.rel="stylesheet",this._themeLinkElement.media="screen,print",this.document.head.appendChild(this._themeLinkElement)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const VA=i=>hn(i).pipe(sn(t=>!!t?.default),Ct(t=>t.default));let zA,jbe=(()=>{class i{constructor(){this.loader=ee(Nbe),this.options=ee(UA,{optional:!0}),this.hljsSignal=dM(null),this.hljs=function gJ(i,t){Bo("NgSignals");const e=function zW(i){const t=Object.create(HW);t.computation=i;const e=()=>{if(y1(t),Hg(t),t.value===Wg)throw t.error;return t.value};return e[ks]=t,e}(i);return t?.equal&&(e[ks].equal=t.equal),e}(()=>this.hljsSignal()),this.loader.ready.then(e=>{this.hljsSignal.set(e),this.options?.highlightOptions&&e.configure(this.options.highlightOptions)})}highlight(e,n){var r=this;return Si(function*(){return(yield r.loader.ready).highlight(e,n)})()}highlightAuto(e,n){var r=this;return Si(function*(){return(yield r.loader.ready).highlightAuto(e,n)})()}highlightElement(e){var n=this;return Si(function*(){(yield n.loader.ready).highlightElement(e)})()}highlightAll(){var e=this;return Si(function*(){(yield e.loader.ready).highlightAll()})()}configure(e){var n=this;return Si(function*(){(yield n.loader.ready).configure(e)})()}registerLanguage(e,n){var r=this;return Si(function*(){(yield r.loader.ready).registerLanguage(e,n)})()}unregisterLanguage(e){var n=this;return Si(function*(){(yield n.loader.ready).unregisterLanguage(e)})()}registerAliases(e,{languageName:n}){var r=this;return Si(function*(){(yield r.loader.ready).registerAliases(e,{languageName:n})})()}listLanguages(){var e=this;return Si(function*(){return(yield e.loader.ready).listLanguages()})()}getLanguage(e){var n=this;return Si(function*(){return(yield n.loader.ready).getLanguage(e)})()}safeMode(){var e=this;return Si(function*(){(yield e.loader.ready).safeMode()})()}debugMode(){var e=this;return Si(function*(){(yield e.loader.ready).debugMode()})()}lineNumbersBlock(e,n){var r=this;return Si(function*(){const s=yield r.loader.ready;s.lineNumbersBlock&&s.lineNumbersBlock(e,n)})()}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();let N4=(()=>{class i{constructor(){this._hljs=ee(jbe),this._nativeElement=ee(xt).nativeElement,this._sanitizer=ee(ov),this._platform=ee(oo),iv(this._platform)&&(zb(()=>{const e=this.code();this.setTextContent(e||""),e&&this.highlightElement(e)}),zb(()=>{const e=this.highlightResult();this.setInnerHTML(e?.value),this.highlighted.emit(e)}))}setTextContent(e){requestAnimationFrame(()=>this._nativeElement.textContent=e)}setInnerHTML(e){requestAnimationFrame(()=>this._nativeElement.innerHTML=function Ube(i){return function Bbe(){if(!zA)try{zA=window?.trustedTypes?.createPolicy("ngx-highlightjs",{createHTML:i=>i})}catch{}return zA}()?.createHTML(i)||i}(this._sanitizer.sanitize(tr.HTML,e)||""))}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275dir=Pe({type:i})}return i})(),Vbe=(()=>{class i extends N4{constructor(){super(...arguments),this.code=f$(null,{alias:"highlight"}),this.highlightResult=dM(null),this.highlighted=new lt}highlightElement(e){var n=this;return Si(function*(){const r=yield n._hljs.highlight(e,{language:n.language,ignoreIllegals:n.ignoreIllegals});n.highlightResult.set(r)})()}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275dir=Pe({type:i,selectors:[["","highlight",""]],hostVars:2,hostBindings:function(n,r){2&n&&di("hljs",!0)},inputs:{code:[rt.SignalBased,"highlight","code"],language:"language",ignoreIllegals:[rt.HasDecoratorInputTransform,"ignoreIllegals","ignoreIllegals",$i]},outputs:{highlighted:"highlighted"},standalone:!0,features:[Ee([{provide:N4,useExisting:i}]),gs,ge]})}return i})(),zbe=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({})}return i})();function j4(i,t,e){let n,r=!1;return i&&"object"==typeof i?({bufferSize:n=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=i):n=i??1/0,UH({connector:()=>new fz(n,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function B4(i){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!]))?/.test(i)}const U4=new le("GIST_OPTIONS");let Hbe=(()=>{class i{constructor(){this._http=ee(I0),this._options=ee(U4,{optional:!0})}getCodeFromGist(e){let n;return this._options?.clientId&&this._options?.clientSecret&&(n=(new Wa).set("client_id",this._options.clientId).set("client_secret",this._options.clientSecret)),this.fetchFile(`https://api.github.com/gists/${e}`,{params:n,responseType:"json"})}getCodeFromUrl(e){return this.fetchFile(e,{responseType:"text"})}fetchFile(e,n){return B4(e)?this._http.get(e,n).pipe(j4(1),Ma(r=>(console.error("[NgxHighlight]: Unable to fetch the URL!",r.message),vr))):vr}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Gbe=new le("HIGHLIGHT_FILE_LOCATION",{providedIn:"root",factory:function Wbe(){const i=ee(Xt)?.location;return{getPathname:()=>i?i.origin:""}}});let $be=(()=>{class i{constructor(){this._location=ee(Gbe),this._loader=ee(Hbe)}transform(e){return this._loader.getCodeFromUrl(B4(e)?e:`${this._location.getPathname()}/${e}`)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275pipe=Jn({name:"codeFromUrl",type:i,pure:!0,standalone:!0})}return i})(),Xbe=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({})}return i})();function qbe(i,t){if(1&i&&(K(0,"mat-tab",5)(1,"pre"),Jt(2,"            "),ve(3,"code",6),un(4,"codeFromUrl"),un(5,"async"),Jt(6,"\n        "),de()()),2&i){const e=t.$implicit,n=t.index,r=Qt();O("label",r.fileNames[n]),B(3),O("highlight",Tn(5,5,Tn(4,3,e)))("language",r.getLanguage(r.fileNames[n]))}}let Ybe=(()=>{class i{constructor(e){this.editorService=e,this.fileNames=[],this.lineNumbers=!1}set codeUrls(e){this.editorService.setUrls(e),this.fileNames=this.editorService.fileNames}get codeUrls(){return this.editorService.urls}getLanguage(e){return this.editorService.getLanguage(e)}static#e=this.\u0275fac=function(n){return new(n||i)(P(g0))};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-code"]],inputs:{codeUrls:"codeUrls",lineNumbers:"lineNumbers"},decls:14,vars:1,consts:[[1,"code-wrapper","hljs"],["dynamicHeight","","color","primary","backgroundColor","primary"],[3,"label",4,"ngFor","ngForOf"],["align","end"],["mat-button","","href","#",1,"gist-url",3,"click"],[3,"label"],[3,"highlight","language"]],template:function(n,r){1&n&&(K(0,"mat-card")(1,"mat-card-content")(2,"div",0)(3,"mat-tab-group",1),si(4,qbe,7,7,"mat-tab",2),de()()(),K(5,"mat-card-actions",3)(6,"button",4),Ke("click",function(o){return r.editorService.toCodeSandbox(o)}),K(7,"mat-icon"),Jt(8,"crop_din"),de(),Jt(9," CodeSandbox "),de(),K(10,"button",4),Ke("click",function(o){return r.editorService.toStackblitz(o)}),K(11,"mat-icon"),Jt(12,"bolt"),de(),Jt(13," Stackblitz "),de()()()),2&n&&(B(4),O("ngForOf",r.codeUrls))},dependencies:[_l,BH,p4,g4,b4,_4,I4,kbe,Vbe,IS,$be],styles:["pre[_ngcontent-%COMP%]{display:flex;margin-top:0;margin-bottom:0;word-wrap:break-word}pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{flex:1;line-height:1.8em;font-size:14px;min-height:100%;padding:1em 1.2em}pre[_ngcontent-%COMP%]   code.hljs-line-numbers[_ngcontent-%COMP%]{padding:0}.mat-mdc-card[_ngcontent-%COMP%]{padding:0;margin-bottom:3em}.mat-card-header[_ngcontent-%COMP%]{margin:0!important;padding:0!important;display:flex;align-items:center;height:40px}.mat-card-content[_ngcontent-%COMP%]{position:relative;overflow:hidden;padding:1px;margin-bottom:0}.mat-card-footer[_ngcontent-%COMP%]{padding:10px!important;margin:0!important;display:flex;flex-direction:row-reverse}.mat-card-footer[_ngcontent-%COMP%]   .gist-url[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:300;font-size:13px;text-decoration:unset}.mat-card-footer[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.mat-icon[_ngcontent-%COMP%]{margin:0 3px}.code-wrapper[_ngcontent-%COMP%]{border-radius:3px 3px 0 0}  .hljs{padding:0;border:none;transition:border ease 1s}  .hljs-ln{padding:10px 0}  .hljs-ln tr:first-child td{padding-top:10px!important}  .hljs-ln tr:last-child td{padding-bottom:10px!important}  td.hljs-ln-numbers{-webkit-user-select:none;user-select:none;text-align:center;color:#cccccc6b;border-right:1px solid rgba(204,204,204,.1098039216);vertical-align:top;padding-right:10px!important;padding-left:10px!important}  td.hljs-ln-code{padding-left:10px!important}"],changeDetection:0})}return i})();function Zbe(i,t){1&i&&_m(0)}let Kbe=(()=>{class i{constructor(e,n){this.editorService=e,this.route=n,this.exampleComponent=null,this.codeUrls=this.route.snapshot.data.codeUrls??[],this.editorService.declarations=this.route.snapshot.data.declarations,this.exampleComponent=this.route.snapshot.data.exampleComponent}static#e=this.\u0275fac=function(n){return new(n||i)(P(g0),P(jc))};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-example-page"]],decls:3,vars:3,consts:[[1,"example-container"],[4,"ngComponentOutlet"],[3,"lineNumbers","codeUrls"]],template:function(n,r){1&n&&(K(0,"div",0),si(1,Zbe,1,0,"ng-container",1),de(),ve(2,"app-code",2)),2&n&&(B(),O("ngComponentOutlet",r.exampleComponent),B(),O("lineNumbers",!0)("codeUrls",r.codeUrls))},dependencies:[MN,Ybe]})}return i})(),V4=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({})}return i})(),Qbe=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({imports:[V4,qu,V4]})}return i})();const Xs={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}"};class qs{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const Jbe=new Il(-1,1,1,-1,0,1),tve=new class eve extends pt{constructor(){super(),this.setAttribute("position",new qe([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new qe([0,2,0,0,2,0],2))}};class Yl{constructor(t){this._mesh=new Be(tve,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,Jbe)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class z4 extends qs{constructor(t,e){super(),this.textureID=void 0!==e?e:"tDiffuse",t instanceof ei?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=Rn.clone(t.uniforms),this.material=new ei({name:void 0!==t.name?t.name:"unspecified",defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new Yl(this.material)}render(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class H4 extends qs{constructor(t,e){super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,e,n){const r=t.getContext(),s=t.state;let o,a;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0),this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class ive extends qs{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class nve{constructor(t,e){if(this.renderer=t,this._pixelRatio=t.getPixelRatio(),void 0===e){const n=t.getSize(new $);this._width=n.width,this._height=n.height,(e=new gi(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:mn})).texture.name="EffectComposer.rt1"}else this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new z4(Xs),this.copyPass.material.blending=oi,this.clock=new md}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const e=this.passes.indexOf(t);-1!==e&&this.passes.splice(e,1)}isLastEnabledPass(t){for(let e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(t){void 0===t&&(t=this.clock.getDelta());const e=this.renderer.getRenderTarget();let n=!1;for(let r=0,s=this.passes.length;r<s;r++){const o=this.passes[r];if(!1!==o.enabled){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),o.render(this.renderer,this.writeBuffer,this.readBuffer,t,n),o.needsSwap){if(n){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==H4&&(o instanceof H4?n=!0:o instanceof ive&&(n=!1))}}this.renderer.setRenderTarget(e)}reset(t){if(void 0===t){const e=this.renderer.getSize(new $);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,e){this._width=t,this._height=e;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(n,r)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}const rve=["*"];let sve=(()=>{class i extends yd{getType(){return nve}set renderer(e){this._objRef&&(this._objRef.renderer=e)}get renderer(){return this._objRef?.renderer}set renderTarget1(e){this._objRef&&(this._objRef.renderTarget1=e)}get renderTarget1(){return this._objRef?.renderTarget1}set renderTarget2(e){this._objRef&&(this._objRef.renderTarget2=e)}get renderTarget2(){return this._objRef?.renderTarget2}set writeBuffer(e){this._objRef&&(this._objRef.writeBuffer=e)}get writeBuffer(){return this._objRef?.writeBuffer}set readBuffer(e){this._objRef&&(this._objRef.readBuffer=e)}get readBuffer(){return this._objRef?.readBuffer}set passes(e){this._objRef&&(this._objRef.passes=e)}get passes(){return this._objRef?.passes}set copyPass(e){this._objRef&&(this._objRef.copyPass=e)}get copyPass(){return this._objRef?.copyPass}set clock(e){this._objRef&&(this._objRef.clock=e)}get clock(){return this._objRef?.clock}set renderToScreen(e){this._objRef&&(this._objRef.renderToScreen=e)}get renderToScreen(){return this._objRef?.renderToScreen}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-effectComposerGen"]],inputs:{renderer:"renderer",renderTarget1:"renderTarget1",renderTarget2:"renderTarget2",writeBuffer:"writeBuffer",readBuffer:"readBuffer",passes:"passes",copyPass:"copyPass",clock:"clock",renderToScreen:"renderToScreen"},features:[Ee([]),ge],ngContentSelectors:rve,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const ove=["*"];let pg=(()=>{class i extends sve{constructor(e,n){super(),this.view=e,this.engineService=n}createThreeInstance(e){return e||(e=new Array(5)),e[0]=e[0]??this.engineService.wegblRenderer,e[1]=e[1]??this.initRenderTarget(),super.createThreeInstance(e)}initRenderTarget(){if(this.view.viewPort){let e,n;return this.view.viewPort instanceof fi?(e=this.view.viewPort.z,n=this.view.viewPort?.width):(e=this.view.viewPort.width,n=this.view.viewPort.height),new gi(e,n)}}addToParent(){this._objRef&&(this.view.effectComposer=this._objRef)}removeFromParent(){this.view.effectComposer=void 0}static#e=this.\u0275fac=function(n){return new(n||i)(P(Ha),P(Td))};static#t=this.\u0275cmp=pe({type:i,selectors:[["th-effectComposer"]],features:[Ee([]),ge],ngContentSelectors:ove,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})(),Ys=(()=>{class i extends yd{constructor(e){super(),this.effectComposer=e}addToParent(){this._objRef&&this.effectComposer&&this.effectComposer.objRef&&this.effectComposer.objRef.addPass(this._objRef)}removeFromParent(){this._objRef&&this.effectComposer&&this.effectComposer.objRef&&this.effectComposer.objRef.removePass(this._objRef)}static#e=this.\u0275fac=function(n){return new(n||i)(P(pg,8))};static#t=this.\u0275cmp=pe({type:i,selectors:[["th-abs-control"]],features:[ge],decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})();const ave=["*"];let qa=(()=>{class i extends Ys{getType(){return qs}set isPass(e){this._objRef&&(this._objRef.isPass=e)}get isPass(){return this._objRef?.isPass}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set needsSwap(e){this._objRef&&(this._objRef.needsSwap=e)}get needsSwap(){return this._objRef?.needsSwap}set clear(e){this._objRef&&(this._objRef.clear=e)}get clear(){return this._objRef?.clear}set renderToScreen(e){this._objRef&&(this._objRef.renderToScreen=e)}get renderToScreen(){return this._objRef?.renderToScreen}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-pass"]],inputs:{isPass:"isPass",enabled:"enabled",needsSwap:"needsSwap",clear:"clear",renderToScreen:"renderToScreen"},features:[Ee([{provide:Ys,useExisting:Le(()=>i)}]),ge],ngContentSelectors:ave,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const mt={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},Ai={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},Ut={x:0,y:0},Es={camera:new je,gizmos:new je},Gi={type:"change"},Ro={type:"start"},Zs={type:"end"},lve=new vd,jn=new C,G4=new je,W4=new je,Co=new C;class cve extends is{constructor(t,e,n=null){super(),this.camera=null,this.domElement=e,this.scene=n,this.target=new C,this._currentTarget=new C,this.radiusFactor=.67,this.mouseActions=[],this._mouseOp=null,this._v2_1=new $,this._v3_1=new C,this._v3_2=new C,this._m4_1=new je,this._m4_2=new je,this._quat=new mi,this._translationMatrix=new je,this._rotationMatrix=new je,this._scaleMatrix=new je,this._rotationAxis=new C,this._cameraMatrixState=new je,this._cameraProjectionState=new je,this._fovState=1,this._upState=new C,this._zoomState=1,this._nearPos=0,this._farPos=0,this._gizmoMatrixState=new je,this._up0=new C,this._zoom0=1,this._fov0=0,this._initialNear=0,this._nearPos0=0,this._initialFar=0,this._farPos0=0,this._cameraMatrixState0=new je,this._gizmoMatrixState0=new je,this._button=-1,this._touchStart=[],this._touchCurrent=[],this._input=Ai.NONE,this._switchSensibility=32,this._startFingerDistance=0,this._currentFingerDistance=0,this._startFingerRotation=0,this._currentFingerRotation=0,this._devPxRatio=0,this._downValid=!0,this._nclicks=0,this._downEvents=[],this._downStart=0,this._clickStart=0,this._maxDownTime=250,this._maxInterval=300,this._posThreshold=24,this._movementThreshold=24,this._currentCursorPosition=new C,this._startCursorPosition=new C,this._grid=null,this._gridPosition=new C,this._gizmos=new yo,this._curvePts=128,this._timeStart=-1,this._animationId=-1,this.focusAnimationTime=500,this._timePrev=0,this._timeCurrent=0,this._anglePrev=0,this._angleCurrent=0,this._cursorPosPrev=new C,this._cursorPosCurr=new C,this._wPrev=0,this._wCurr=0,this.adjustNearFar=!1,this.scaleFactor=1.1,this.dampingFactor=25,this.wMax=20,this.enableAnimations=!0,this.enableGrid=!1,this.cursorZoom=!1,this.minFov=5,this.maxFov=90,this.rotateSpeed=1,this.enabled=!0,this.enablePan=!0,this.enableRotate=!0,this.enableZoom=!0,this.enableGizmos=!0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this._tbRadius=1,this._state=mt.IDLE,this.setCamera(t),null!=this.scene&&this.scene.add(this._gizmos),this.domElement.style.touchAction="none",this._devPxRatio=window.devicePixelRatio,this.initializeMouseActions(),this._onContextMenu=uve.bind(this),this._onWheel=gve.bind(this),this._onPointerUp=pve.bind(this),this._onPointerMove=mve.bind(this),this._onPointerDown=fve.bind(this),this._onPointerCancel=hve.bind(this),this._onWindowResize=dve.bind(this),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onWheel),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),window.addEventListener("resize",this._onWindowResize)}onSinglePanStart(t,e){if(this.enabled)switch(this.dispatchEvent(Ro),this.setCenter(t.clientX,t.clientY),e){case"PAN":if(!this.enablePan)return;-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(Gi)),this.updateTbState(mt.PAN,!0),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.camera,Ut.x,Ut.y,this.domElement)),this.enableGrid&&(this.drawGrid(),this.dispatchEvent(Gi));break;case"ROTATE":if(!this.enableRotate)return;-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1),this.updateTbState(mt.ROTATE,!0),this._startCursorPosition.copy(this.unprojectOnTbSurface(this.camera,Ut.x,Ut.y,this.domElement,this._tbRadius)),this.activateGizmos(!0),this.enableAnimations&&(this._timePrev=this._timeCurrent=performance.now(),this._angleCurrent=this._anglePrev=0,this._cursorPosPrev.copy(this._startCursorPosition),this._cursorPosCurr.copy(this._cursorPosPrev),this._wCurr=0,this._wPrev=this._wCurr),this.dispatchEvent(Gi);break;case"FOV":if(!this.camera.isPerspectiveCamera||!this.enableZoom)return;-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(Gi)),this.updateTbState(mt.FOV,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(Ut.x,Ut.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition);break;case"ZOOM":if(!this.enableZoom)return;-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(Gi)),this.updateTbState(mt.SCALE,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(Ut.x,Ut.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition)}}onSinglePanMove(t,e){if(this.enabled){const n=e!=this._state;switch(this.setCenter(t.clientX,t.clientY),e){case mt.PAN:this.enablePan&&(n?(this.dispatchEvent(Zs),this.dispatchEvent(Ro),this.updateTbState(e,!0),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.camera,Ut.x,Ut.y,this.domElement)),this.enableGrid&&this.drawGrid(),this.activateGizmos(!1)):(this._currentCursorPosition.copy(this.unprojectOnTbPlane(this.camera,Ut.x,Ut.y,this.domElement)),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition))));break;case mt.ROTATE:if(this.enableRotate)if(n)this.dispatchEvent(Zs),this.dispatchEvent(Ro),this.updateTbState(e,!0),this._startCursorPosition.copy(this.unprojectOnTbSurface(this.camera,Ut.x,Ut.y,this.domElement,this._tbRadius)),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!0);else{this._currentCursorPosition.copy(this.unprojectOnTbSurface(this.camera,Ut.x,Ut.y,this.domElement,this._tbRadius));const r=this._startCursorPosition.distanceTo(this._currentCursorPosition),s=this._startCursorPosition.angleTo(this._currentCursorPosition),o=Math.max(r/this._tbRadius,s)*this.rotateSpeed;this.applyTransformMatrix(this.rotate(this.calculateRotationAxis(this._startCursorPosition,this._currentCursorPosition),o)),this.enableAnimations&&(this._timePrev=this._timeCurrent,this._timeCurrent=performance.now(),this._anglePrev=this._angleCurrent,this._angleCurrent=o,this._cursorPosPrev.copy(this._cursorPosCurr),this._cursorPosCurr.copy(this._currentCursorPosition),this._wPrev=this._wCurr,this._wCurr=this.calculateAngularSpeed(this._anglePrev,this._angleCurrent,this._timePrev,this._timeCurrent))}break;case mt.SCALE:if(this.enableZoom)if(n)this.dispatchEvent(Zs),this.dispatchEvent(Ro),this.updateTbState(e,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(Ut.x,Ut.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(.5*this.getCursorNDC(Ut.x,Ut.y,this.domElement).y);const s=this._currentCursorPosition.y-this._startCursorPosition.y;let o=1;s<0?o=1/Math.pow(this.scaleFactor,8*-s):s>0&&(o=Math.pow(this.scaleFactor,8*s)),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this.applyTransformMatrix(this.scale(o,this._v3_1))}break;case mt.FOV:if(this.enableZoom&&this.camera.isPerspectiveCamera)if(n)this.dispatchEvent(Zs),this.dispatchEvent(Ro),this.updateTbState(e,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(Ut.x,Ut.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(.5*this.getCursorNDC(Ut.x,Ut.y,this.domElement).y);const s=this._currentCursorPosition.y-this._startCursorPosition.y;let o=1;s<0?o=1/Math.pow(this.scaleFactor,8*-s):s>0&&(o=Math.pow(this.scaleFactor,8*s)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const a=this._v3_1.distanceTo(this._gizmos.position);let l=a/o;l=st.clamp(l,this.minDistance,this.maxDistance);const c=a*Math.tan(st.DEG2RAD*this._fovState*.5);let d=st.RAD2DEG*(2*Math.atan(c/l));d=st.clamp(d,this.minFov,this.maxFov);const u=c/Math.tan(st.DEG2RAD*(d/2));o=a/u,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.scale(o,this._v3_2,!1)),jn.copy(this._gizmos.position).sub(this.camera.position).normalize().multiplyScalar(u/a),this._m4_1.makeTranslation(jn.x,jn.y,jn.z)}}this.dispatchEvent(Gi)}}onSinglePanEnd(){if(this._state==mt.ROTATE){if(!this.enableRotate)return;if(this.enableAnimations)if(performance.now()-this._timeCurrent<120){const e=Math.abs((this._wPrev+this._wCurr)/2),n=this;this._animationId=window.requestAnimationFrame(function(r){n.updateTbState(mt.ANIMATION_ROTATE,!0);const s=n.calculateRotationAxis(n._cursorPosPrev,n._cursorPosCurr);n.onRotationAnim(r,s,Math.min(e,n.wMax))})}else this.updateTbState(mt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Gi);else this.updateTbState(mt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Gi)}else(this._state==mt.PAN||this._state==mt.IDLE)&&(this.updateTbState(mt.IDLE,!1),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1),this.dispatchEvent(Gi));this.dispatchEvent(Zs)}onDoubleTap(t){if(this.enabled&&this.enablePan&&null!=this.scene){this.dispatchEvent(Ro),this.setCenter(t.clientX,t.clientY);const e=this.unprojectOnObj(this.getCursorNDC(Ut.x,Ut.y,this.domElement),this.camera);if(null!=e&&this.enableAnimations){const n=this;-1!=this._animationId&&window.cancelAnimationFrame(this._animationId),this._timeStart=-1,this._animationId=window.requestAnimationFrame(function(r){n.updateTbState(mt.ANIMATION_FOCUS,!0),n.onFocusAnim(r,e,n._cameraMatrixState,n._gizmoMatrixState)})}else null!=e&&!this.enableAnimations&&(this.updateTbState(mt.FOCUS,!0),this.focus(e,this.scaleFactor),this.updateTbState(mt.IDLE,!1),this.dispatchEvent(Gi))}this.dispatchEvent(Zs)}onDoublePanStart(){this.enabled&&this.enablePan&&(this.dispatchEvent(Ro),this.updateTbState(mt.PAN,!0),this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.camera,Ut.x,Ut.y,this.domElement,!0)),this._currentCursorPosition.copy(this._startCursorPosition),this.activateGizmos(!1))}onDoublePanMove(){this.enabled&&this.enablePan&&(this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=mt.PAN&&(this.updateTbState(mt.PAN,!0),this._startCursorPosition.copy(this._currentCursorPosition)),this._currentCursorPosition.copy(this.unprojectOnTbPlane(this.camera,Ut.x,Ut.y,this.domElement,!0)),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition,!0)),this.dispatchEvent(Gi))}onDoublePanEnd(){this.updateTbState(mt.IDLE,!1),this.dispatchEvent(Zs)}onRotateStart(){this.enabled&&this.enableRotate&&(this.dispatchEvent(Ro),this.updateTbState(mt.ZROTATE,!0),this._startFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this._currentFingerRotation=this._startFingerRotation,this.camera.getWorldDirection(this._rotationAxis),!this.enablePan&&!this.enableZoom&&this.activateGizmos(!0))}onRotateMove(){if(this.enabled&&this.enableRotate){let t;this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=mt.ZROTATE&&(this.updateTbState(mt.ZROTATE,!0),this._startFingerRotation=this._currentFingerRotation),this._currentFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this.enablePan?(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),t=this.unprojectOnTbPlane(this.camera,Ut.x,Ut.y,this.domElement).applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._v3_2)):t=(new C).setFromMatrixPosition(this._gizmoMatrixState),this.applyTransformMatrix(this.zRotate(t,st.DEG2RAD*(this._startFingerRotation-this._currentFingerRotation))),this.dispatchEvent(Gi)}}onRotateEnd(){this.updateTbState(mt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Zs)}onPinchStart(){this.enabled&&this.enableZoom&&(this.dispatchEvent(Ro),this.updateTbState(mt.SCALE,!0),this._startFingerDistance=this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),this._currentFingerDistance=this._startFingerDistance,this.activateGizmos(!1))}onPinchMove(){if(this.enabled&&this.enableZoom){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const t=12;this._state!=mt.SCALE&&(this._startFingerDistance=this._currentFingerDistance,this.updateTbState(mt.SCALE,!0)),this._currentFingerDistance=Math.max(this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),t*this._devPxRatio);const e=this._currentFingerDistance/this._startFingerDistance;let n;this.enablePan?this.camera.isOrthographicCamera?n=this.unprojectOnTbPlane(this.camera,Ut.x,Ut.y,this.domElement).applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera.isPerspectiveCamera&&(n=this.unprojectOnTbPlane(this.camera,Ut.x,Ut.y,this.domElement).applyQuaternion(this.camera.quaternion).add(this._gizmos.position)):n=this._gizmos.position,this.applyTransformMatrix(this.scale(e,n)),this.dispatchEvent(Gi)}}onPinchEnd(){this.updateTbState(mt.IDLE,!1),this.dispatchEvent(Zs)}onTriplePanStart(){if(this.enabled&&this.enableZoom){this.dispatchEvent(Ro),this.updateTbState(mt.SCALE,!0);let t=0,e=0;const n=this._touchCurrent.length;for(let r=0;r<n;r++)t+=this._touchCurrent[r].clientX,e+=this._touchCurrent[r].clientY;this.setCenter(t/n,e/n),this._startCursorPosition.setY(.5*this.getCursorNDC(Ut.x,Ut.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition)}}onTriplePanMove(){if(this.enabled&&this.enableZoom){let t=0,e=0;const n=this._touchCurrent.length;for(let h=0;h<n;h++)t+=this._touchCurrent[h].clientX,e+=this._touchCurrent[h].clientY;this.setCenter(t/n,e/n);const r=8;this._currentCursorPosition.setY(.5*this.getCursorNDC(Ut.x,Ut.y,this.domElement).y);const s=this._currentCursorPosition.y-this._startCursorPosition.y;let o=1;s<0?o=1/Math.pow(this.scaleFactor,-s*r):s>0&&(o=Math.pow(this.scaleFactor,s*r)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const a=this._v3_1.distanceTo(this._gizmos.position);let l=a/o;l=st.clamp(l,this.minDistance,this.maxDistance);const c=a*Math.tan(st.DEG2RAD*this._fovState*.5);let d=st.RAD2DEG*(2*Math.atan(c/l));d=st.clamp(d,this.minFov,this.maxFov);const u=c/Math.tan(st.DEG2RAD*(d/2));o=a/u,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.scale(o,this._v3_2,!1)),jn.copy(this._gizmos.position).sub(this.camera.position).normalize().multiplyScalar(u/a),this._m4_1.makeTranslation(jn.x,jn.y,jn.z),this.dispatchEvent(Gi)}}onTriplePanEnd(){this.updateTbState(mt.IDLE,!1),this.dispatchEvent(Zs)}setCenter(t,e){Ut.x=t,Ut.y=e}initializeMouseActions(){this.setMouseAction("PAN",0,"CTRL"),this.setMouseAction("PAN",2),this.setMouseAction("ROTATE",0),this.setMouseAction("ZOOM","WHEEL"),this.setMouseAction("ZOOM",1),this.setMouseAction("FOV","WHEEL","SHIFT"),this.setMouseAction("FOV",1,"SHIFT")}compareMouseAction(t,e){return t.operation==e.operation&&t.mouse==e.mouse&&t.key==e.key}setMouseAction(t,e,n=null){let a;if(!["PAN","ROTATE","ZOOM","FOV"].includes(t)||![0,1,2,"WHEEL"].includes(e)||!["CTRL","SHIFT",null].includes(n)||"WHEEL"==e&&"ZOOM"!=t&&"FOV"!=t)return!1;switch(t){case"PAN":a=mt.PAN;break;case"ROTATE":a=mt.ROTATE;break;case"ZOOM":a=mt.SCALE;break;case"FOV":a=mt.FOV}const l={operation:t,mouse:e,key:n,state:a};for(let c=0;c<this.mouseActions.length;c++)if(this.mouseActions[c].mouse==l.mouse&&this.mouseActions[c].key==l.key)return this.mouseActions.splice(c,1,l),!0;return this.mouseActions.push(l),!0}unsetMouseAction(t,e=null){for(let n=0;n<this.mouseActions.length;n++)if(this.mouseActions[n].mouse==t&&this.mouseActions[n].key==e)return this.mouseActions.splice(n,1),!0;return!1}getOpFromAction(t,e){let n;for(let r=0;r<this.mouseActions.length;r++)if(n=this.mouseActions[r],n.mouse==t&&n.key==e)return n.operation;if(null!=e)for(let r=0;r<this.mouseActions.length;r++)if(n=this.mouseActions[r],n.mouse==t&&null==n.key)return n.operation;return null}getOpStateFromAction(t,e){let n;for(let r=0;r<this.mouseActions.length;r++)if(n=this.mouseActions[r],n.mouse==t&&n.key==e)return n.state;if(null!=e)for(let r=0;r<this.mouseActions.length;r++)if(n=this.mouseActions[r],n.mouse==t&&null==n.key)return n.state;return null}getAngle(t,e){return 180*Math.atan2(e.clientY-t.clientY,e.clientX-t.clientX)/Math.PI}updateTouchEvent(t){for(let e=0;e<this._touchCurrent.length;e++)if(this._touchCurrent[e].pointerId==t.pointerId){this._touchCurrent.splice(e,1,t);break}}applyTransformMatrix(t){if(null!=t.camera&&(this._m4_1.copy(this._cameraMatrixState).premultiply(t.camera),this._m4_1.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.updateMatrix(),(this._state==mt.ROTATE||this._state==mt.ZROTATE||this._state==mt.ANIMATION_ROTATE)&&this.camera.up.copy(this._upState).applyQuaternion(this.camera.quaternion)),null!=t.gizmos&&(this._m4_1.copy(this._gizmoMatrixState).premultiply(t.gizmos),this._m4_1.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix()),this._state==mt.SCALE||this._state==mt.FOCUS||this._state==mt.ANIMATION_FOCUS)if(this._tbRadius=this.calculateTbRadius(this.camera),this.adjustNearFar){const e=this.camera.position.distanceTo(this._gizmos.position),n=new ir;n.setFromObject(this._gizmos);const r=new nr;n.getBoundingSphere(r);const s=Math.max(this._nearPos0,r.radius+r.center.length()),a=Math.min(s,e-this._initialNear);this.camera.near=e-a;const l=Math.min(this._farPos0,-r.radius+r.center.length()),d=Math.min(l,e-this._initialFar);this.camera.far=e-d,this.camera.updateProjectionMatrix()}else{let e=!1;this.camera.near!=this._initialNear&&(this.camera.near=this._initialNear,e=!0),this.camera.far!=this._initialFar&&(this.camera.far=this._initialFar,e=!0),e&&this.camera.updateProjectionMatrix()}}calculateAngularSpeed(t,e,n,r){const o=(r-n)/1e3;return 0==o?0:(e-t)/o}calculatePointersDistance(t,e){return Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2))}calculateRotationAxis(t,e){return this._rotationMatrix.extractRotation(this._cameraMatrixState),this._quat.setFromRotationMatrix(this._rotationMatrix),this._rotationAxis.crossVectors(t,e).applyQuaternion(this._quat),this._rotationAxis.normalize().clone()}calculateTbRadius(t){const e=t.position.distanceTo(this._gizmos.position);if("PerspectiveCamera"==t.type){const n=st.DEG2RAD*t.fov*.5,r=Math.atan(t.aspect*Math.tan(n));return Math.tan(Math.min(n,r))*e*this.radiusFactor}if("OrthographicCamera"==t.type)return Math.min(t.top,t.right)*this.radiusFactor}focus(t,e,n=1){jn.copy(t).sub(this._gizmos.position).multiplyScalar(n),this._translationMatrix.makeTranslation(jn.x,jn.y,jn.z),G4.copy(this._gizmoMatrixState),this._gizmoMatrixState.premultiply(this._translationMatrix),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),W4.copy(this._cameraMatrixState),this._cameraMatrixState.premultiply(this._translationMatrix),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.enableZoom&&this.applyTransformMatrix(this.scale(e,this._gizmos.position)),this._gizmoMatrixState.copy(G4),this._cameraMatrixState.copy(W4)}drawGrid(){if(null!=this.scene){let n,r,s,o;if(this.camera.isOrthographicCamera)s=Math.max(this.camera.right-this.camera.left,this.camera.bottom-this.camera.top),o=s/20,n=s/this.camera.zoom*3,r=n/o*this.camera.zoom;else if(this.camera.isPerspectiveCamera){const a=this.camera.position.distanceTo(this._gizmos.position),l=st.DEG2RAD*this.camera.fov*.5,c=Math.atan(this.camera.aspect*Math.tan(l));s=Math.tan(Math.max(l,c))*a*2,o=s/20,n=3*s,r=n/o}null==this._grid&&(this._grid=new jE(n,r,8947848,8947848),this._grid.position.copy(this._gizmos.position),this._gridPosition.copy(this._grid.position),this._grid.quaternion.copy(this.camera.quaternion),this._grid.rotateX(.5*Math.PI),this.scene.add(this._grid))}}dispose(){-1!=this._animationId&&window.cancelAnimationFrame(this._animationId),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),window.removeEventListener("resize",this._onWindowResize),null!==this.scene&&this.scene.remove(this._gizmos),this.disposeGrid()}disposeGrid(){null!=this._grid&&null!=this.scene&&(this.scene.remove(this._grid),this._grid=null)}easeOutCubic(t){return 1-Math.pow(1-t,3)}activateGizmos(t){const e=this._gizmos.children[0],n=this._gizmos.children[1],r=this._gizmos.children[2];t?(e.material.setValues({opacity:1}),n.material.setValues({opacity:1}),r.material.setValues({opacity:1})):(e.material.setValues({opacity:.6}),n.material.setValues({opacity:.6}),r.material.setValues({opacity:.6}))}getCursorNDC(t,e,n){const r=n.getBoundingClientRect();return this._v2_1.setX((t-r.left)/r.width*2-1),this._v2_1.setY((r.bottom-e)/r.height*2-1),this._v2_1.clone()}getCursorPosition(t,e,n){return this._v2_1.copy(this.getCursorNDC(t,e,n)),this._v2_1.x*=.5*(this.camera.right-this.camera.left),this._v2_1.y*=.5*(this.camera.top-this.camera.bottom),this._v2_1.clone()}setCamera(t){t.lookAt(this.target),t.updateMatrix(),"PerspectiveCamera"==t.type&&(this._fov0=t.fov,this._fovState=t.fov),this._cameraMatrixState0.copy(t.matrix),this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraProjectionState.copy(t.projectionMatrix),this._zoom0=t.zoom,this._zoomState=this._zoom0,this._initialNear=t.near,this._nearPos0=t.position.distanceTo(this.target)-t.near,this._nearPos=this._initialNear,this._initialFar=t.far,this._farPos0=t.position.distanceTo(this.target)-t.far,this._farPos=this._initialFar,this._up0.copy(t.up),this._upState.copy(t.up),this.camera=t,this.camera.updateProjectionMatrix(),this._tbRadius=this.calculateTbRadius(t),this.makeGizmos(this.target,this._tbRadius)}setGizmosVisible(t){this._gizmos.visible=t,this.dispatchEvent(Gi)}setTbRadius(t){this.radiusFactor=t,this._tbRadius=this.calculateTbRadius(this.camera);const n=new Fl(0,0,this._tbRadius,this._tbRadius).getPoints(this._curvePts),r=(new pt).setFromPoints(n);for(const s in this._gizmos.children)this._gizmos.children[s].geometry=r;this.dispatchEvent(Gi)}makeGizmos(t,e){const r=new Fl(0,0,e,e).getPoints(this._curvePts),s=(new pt).setFromPoints(r),o=new Ln({color:16744576,fog:!1,transparent:!0,opacity:.6}),a=new Ln({color:8454016,fog:!1,transparent:!0,opacity:.6}),l=new Ln({color:8421631,fog:!1,transparent:!0,opacity:.6}),c=new En(s,o),d=new En(s,a),u=new En(s,l),h=.5*Math.PI;if(c.rotation.x=h,d.rotation.y=h,this._gizmoMatrixState0.identity().setPosition(t),this._gizmoMatrixState.copy(this._gizmoMatrixState0),1!==this.camera.zoom){const f=1/this.camera.zoom;this._scaleMatrix.makeScale(f,f,f),this._translationMatrix.makeTranslation(-t.x,-t.y,-t.z),this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix),this._translationMatrix.makeTranslation(t.x,t.y,t.z),this._gizmoMatrixState.premultiply(this._translationMatrix)}this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.traverse(function(f){f.isLine&&(f.geometry.dispose(),f.material.dispose())}),this._gizmos.clear(),this._gizmos.add(c),this._gizmos.add(d),this._gizmos.add(u)}onFocusAnim(t,e,n,r){if(-1==this._timeStart&&(this._timeStart=t),this._state==mt.ANIMATION_FOCUS){const o=(t-this._timeStart)/this.focusAnimationTime;if(this._gizmoMatrixState.copy(r),o>=1)this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(e,this.scaleFactor),this._timeStart=-1,this.updateTbState(mt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Gi);else{const a=this.easeOutCubic(o),l=1-a+this.scaleFactor*a;this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(e,l,a),this.dispatchEvent(Gi);const c=this;this._animationId=window.requestAnimationFrame(function(d){c.onFocusAnim(d,e,n,r.clone())})}}else this._animationId=-1,this._timeStart=-1}onRotationAnim(t,e,n){if(-1==this._timeStart&&(this._anglePrev=0,this._angleCurrent=0,this._timeStart=t),this._state==mt.ANIMATION_ROTATE){const r=(t-this._timeStart)/1e3;if(n+-this.dampingFactor*r>0){this._angleCurrent=.5*-this.dampingFactor*Math.pow(r,2)+n*r+0,this.applyTransformMatrix(this.rotate(e,this._angleCurrent)),this.dispatchEvent(Gi);const o=this;this._animationId=window.requestAnimationFrame(function(a){o.onRotationAnim(a,e,n)})}else this._animationId=-1,this._timeStart=-1,this.updateTbState(mt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Gi)}else this._animationId=-1,this._timeStart=-1,this._state!=mt.ROTATE&&(this.activateGizmos(!1),this.dispatchEvent(Gi))}pan(t,e,n=!1){const r=t.clone().sub(e);if(this.camera.isOrthographicCamera)r.multiplyScalar(1/this.camera.zoom);else if(this.camera.isPerspectiveCamera&&n){this._v3_1.setFromMatrixPosition(this._cameraMatrixState0),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0);const s=this._v3_1.distanceTo(this._v3_2)/this.camera.position.distanceTo(this._gizmos.position);r.multiplyScalar(1/s)}return this._v3_1.set(r.x,r.y,0).applyQuaternion(this.camera.quaternion),this._m4_1.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z),this.setTransformationMatrices(this._m4_1,this._m4_1),Es}reset(){this.camera.zoom=this._zoom0,this.camera.isPerspectiveCamera&&(this.camera.fov=this._fov0),this.camera.near=this._nearPos,this.camera.far=this._farPos,this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(this._up0),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this._gizmoMatrixState0.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix(),this._tbRadius=this.calculateTbRadius(this.camera),this.makeGizmos(this._gizmos.position,this._tbRadius),this.camera.lookAt(this._gizmos.position),this.updateTbState(mt.IDLE,!1),this.dispatchEvent(Gi)}rotate(t,e){const n=this._gizmos.position;return this._translationMatrix.makeTranslation(-n.x,-n.y,-n.z),this._rotationMatrix.makeRotationAxis(t,-e),this._m4_1.makeTranslation(n.x,n.y,n.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1),Es}copyState(){let t;this.camera.isOrthographicCamera?t=JSON.stringify({arcballState:{cameraFar:this.camera.far,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}}):this.camera.isPerspectiveCamera&&(t=JSON.stringify({arcballState:{cameraFar:this.camera.far,cameraFov:this.camera.fov,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}})),navigator.clipboard.writeText(t)}pasteState(){const t=this;navigator.clipboard.readText().then(function(n){t.setStateFromJSON(n)})}saveState(){this._cameraMatrixState0.copy(this.camera.matrix),this._gizmoMatrixState0.copy(this._gizmos.matrix),this._nearPos=this.camera.near,this._farPos=this.camera.far,this._zoom0=this.camera.zoom,this._up0.copy(this.camera.up),this.camera.isPerspectiveCamera&&(this._fov0=this.camera.fov)}scale(t,e,n=!0){Co.copy(e);let r=1/t;if(this.camera.isOrthographicCamera){this.camera.zoom=this._zoomState,this.camera.zoom*=t,this.camera.zoom>this.maxZoom?(this.camera.zoom=this.maxZoom,r=this._zoomState/this.maxZoom):this.camera.zoom<this.minZoom&&(this.camera.zoom=this.minZoom,r=this._zoomState/this.minZoom),this.camera.updateProjectionMatrix(),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this._scaleMatrix.makeScale(r,r,r),this._translationMatrix.makeTranslation(-this._v3_1.x,-this._v3_1.y,-this._v3_1.z),this._m4_2.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z).multiply(this._scaleMatrix),this._m4_2.multiply(this._translationMatrix),Co.sub(this._v3_1);const s=Co.clone().multiplyScalar(r);return Co.sub(s),this._m4_1.makeTranslation(Co.x,Co.y,Co.z),this._m4_2.premultiply(this._m4_1),this.setTransformationMatrices(this._m4_1,this._m4_2),Es}if(this.camera.isPerspectiveCamera){this._v3_1.setFromMatrixPosition(this._cameraMatrixState),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);let s=this._v3_1.distanceTo(Co),o=s-s*r;const a=s-o;if(a<this.minDistance?(r=this.minDistance/s,o=s-s*r):a>this.maxDistance&&(r=this.maxDistance/s,o=s-s*r),jn.copy(Co).sub(this._v3_1).normalize().multiplyScalar(o),this._m4_1.makeTranslation(jn.x,jn.y,jn.z),n){const l=this._v3_2;s=l.distanceTo(Co),o=s-s*r,jn.copy(Co).sub(this._v3_2).normalize().multiplyScalar(o),this._translationMatrix.makeTranslation(l.x,l.y,l.z),this._scaleMatrix.makeScale(r,r,r),this._m4_2.makeTranslation(jn.x,jn.y,jn.z).multiply(this._translationMatrix),this._m4_2.multiply(this._scaleMatrix),this._translationMatrix.makeTranslation(-l.x,-l.y,-l.z),this._m4_2.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1,this._m4_2)}else this.setTransformationMatrices(this._m4_1);return Es}}setFov(t){this.camera.isPerspectiveCamera&&(this.camera.fov=st.clamp(t,this.minFov,this.maxFov),this.camera.updateProjectionMatrix())}setTransformationMatrices(t=null,e=null){null!=t?null!=Es.camera?Es.camera.copy(t):Es.camera=t.clone():Es.camera=null,null!=e?null!=Es.gizmos?Es.gizmos.copy(e):Es.gizmos=e.clone():Es.gizmos=null}zRotate(t,e){return this._rotationMatrix.makeRotationAxis(this._rotationAxis,e),this._translationMatrix.makeTranslation(-t.x,-t.y,-t.z),this._m4_1.makeTranslation(t.x,t.y,t.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(t),this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis,e),this._v3_2.sub(this._v3_1),this._m4_2.makeTranslation(this._v3_2.x,this._v3_2.y,this._v3_2.z),this.setTransformationMatrices(this._m4_1,this._m4_2),Es}getRaycaster(){return lve}unprojectOnObj(t,e){const n=this.getRaycaster();n.near=e.near,n.far=e.far,n.setFromCamera(t,e);const r=n.intersectObjects(this.scene.children,!0);for(let s=0;s<r.length;s++)if(r[s].object.uuid!=this._gizmos.uuid&&null!=r[s].face)return r[s].point.clone();return null}unprojectOnTbSurface(t,e,n,r,s){if("OrthographicCamera"==t.type){this._v2_1.copy(this.getCursorPosition(e,n,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0);const o=Math.pow(this._v2_1.x,2),a=Math.pow(this._v2_1.y,2),l=Math.pow(this._tbRadius,2);return this._v3_1.setZ(o+a<=.5*l?Math.sqrt(l-(o+a)):.5*l/Math.sqrt(o+a)),this._v3_1}if("PerspectiveCamera"==t.type){this._v2_1.copy(this.getCursorNDC(e,n,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(t.projectionMatrixInverse);const o=this._v3_1.clone().normalize(),a=t.position.distanceTo(this._gizmos.position),l=Math.pow(s,2),c=this._v3_1.z,d=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));if(0==d)return o.set(this._v3_1.x,this._v3_1.y,s),o;const u=c/d,h=a;let f=Math.pow(u,2)+1,m=2*u*h,_=Math.pow(h,2)-l,p=Math.pow(m,2)-4*f*_;if(p>=0&&(this._v2_1.setX((-m-Math.sqrt(p))/(2*f)),this._v2_1.setY(u*this._v2_1.x+h),st.RAD2DEG*this._v2_1.angle()>=45)){const v=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(a-this._v2_1.y,2));return o.multiplyScalar(v),o.z+=a,o}f=u,m=h,_=.5*-l,p=Math.pow(m,2)-4*f*_,this._v2_1.setX((-m-Math.sqrt(p))/(2*f)),this._v2_1.setY(u*this._v2_1.x+h);const g=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(a-this._v2_1.y,2));return o.multiplyScalar(g),o.z+=a,o}}unprojectOnTbPlane(t,e,n,r,s=!1){if("OrthographicCamera"==t.type)return this._v2_1.copy(this.getCursorPosition(e,n,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0),this._v3_1.clone();if("PerspectiveCamera"==t.type){this._v2_1.copy(this.getCursorNDC(e,n,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(t.projectionMatrixInverse);const o=this._v3_1.clone().normalize(),a=this._v3_1.z,l=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));let c;if(c=s?this._v3_1.setFromMatrixPosition(this._cameraMatrixState0).distanceTo(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0)):t.position.distanceTo(this._gizmos.position),0==l)return o.set(0,0,0),o;const h=-c/(a/l),f=Math.sqrt(Math.pow(c,2)+Math.pow(h,2));return o.multiplyScalar(f),o.z=0,o}}updateMatrixState(){this._cameraMatrixState.copy(this.camera.matrix),this._gizmoMatrixState.copy(this._gizmos.matrix),this.camera.isOrthographicCamera?(this._cameraProjectionState.copy(this.camera.projectionMatrix),this.camera.updateProjectionMatrix(),this._zoomState=this.camera.zoom):this.camera.isPerspectiveCamera&&(this._fovState=this.camera.fov)}updateTbState(t,e){this._state=t,e&&this.updateMatrixState()}update(){if(!1===this.target.equals(this._currentTarget)&&(this._gizmos.position.copy(this.target),this._tbRadius=this.calculateTbRadius(this.camera),this.makeGizmos(this.target,this._tbRadius),this._currentTarget.copy(this.target)),this.camera.isOrthographicCamera){if(this.camera.zoom>this.maxZoom||this.camera.zoom<this.minZoom){const e=st.clamp(this.camera.zoom,this.minZoom,this.maxZoom);this.applyTransformMatrix(this.scale(e/this.camera.zoom,this._gizmos.position,!0))}}else if(this.camera.isPerspectiveCamera){const e=this.camera.position.distanceTo(this._gizmos.position);if(e>this.maxDistance+1e-6||e<this.minDistance-1e-6){const r=st.clamp(e,this.minDistance,this.maxDistance);this.applyTransformMatrix(this.scale(r/e,this._gizmos.position)),this.updateMatrixState()}(this.camera.fov<this.minFov||this.camera.fov>this.maxFov)&&(this.camera.fov=st.clamp(this.camera.fov,this.minFov,this.maxFov),this.camera.updateProjectionMatrix());const n=this._tbRadius;if(this._tbRadius=this.calculateTbRadius(this.camera),n<this._tbRadius-1e-6||n>this._tbRadius+1e-6){const s=this._tbRadius/((this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3),a=new Fl(0,0,s,s).getPoints(this._curvePts),l=(new pt).setFromPoints(a);for(const c in this._gizmos.children)this._gizmos.children[c].geometry=l}}this.camera.lookAt(this._gizmos.position)}setStateFromJSON(t){const e=JSON.parse(t);if(null!=e.arcballState){this._cameraMatrixState.fromArray(e.arcballState.cameraMatrix.elements),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(e.arcballState.cameraUp),this.camera.near=e.arcballState.cameraNear,this.camera.far=e.arcballState.cameraFar,this.camera.zoom=e.arcballState.cameraZoom,this.camera.isPerspectiveCamera&&(this.camera.fov=e.arcballState.cameraFov),this._gizmoMatrixState.fromArray(e.arcballState.gizmoMatrix.elements),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmos.updateMatrix(),this._tbRadius=this.calculateTbRadius(this.camera);const n=(new je).copy(this._gizmoMatrixState0);this.makeGizmos(this._gizmos.position,this._tbRadius),this._gizmoMatrixState0.copy(n),this.camera.lookAt(this._gizmos.position),this.updateTbState(mt.IDLE,!1),this.dispatchEvent(Gi)}}}function dve(){const i=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3;this._tbRadius=this.calculateTbRadius(this.camera);const t=this._tbRadius/i,n=new Fl(0,0,t,t).getPoints(this._curvePts),r=(new pt).setFromPoints(n);for(const s in this._gizmos.children)this._gizmos.children[s].geometry=r;this.dispatchEvent(Gi)}function uve(i){if(this.enabled)for(let t=0;t<this.mouseActions.length;t++)if(2==this.mouseActions[t].mouse){i.preventDefault();break}}function hve(){this._touchStart.splice(0,this._touchStart.length),this._touchCurrent.splice(0,this._touchCurrent.length),this._input=Ai.NONE}function fve(i){if(0==i.button&&i.isPrimary?(this._downValid=!0,this._downEvents.push(i),this._downStart=performance.now()):this._downValid=!1,"touch"==i.pointerType&&this._input!=Ai.CURSOR)switch(this._touchStart.push(i),this._touchCurrent.push(i),this._input){case Ai.NONE:this._input=Ai.ONE_FINGER,this.onSinglePanStart(i,"ROTATE"),window.addEventListener("pointermove",this._onPointerMove),window.addEventListener("pointerup",this._onPointerUp);break;case Ai.ONE_FINGER:case Ai.ONE_FINGER_SWITCHED:this._input=Ai.TWO_FINGER,this.onRotateStart(),this.onPinchStart(),this.onDoublePanStart();break;case Ai.TWO_FINGER:this._input=Ai.MULT_FINGER,this.onTriplePanStart(i)}else if("touch"!=i.pointerType&&this._input==Ai.NONE){let t=null;i.ctrlKey||i.metaKey?t="CTRL":i.shiftKey&&(t="SHIFT"),this._mouseOp=this.getOpFromAction(i.button,t),null!=this._mouseOp&&(window.addEventListener("pointermove",this._onPointerMove),window.addEventListener("pointerup",this._onPointerUp),this._input=Ai.CURSOR,this._button=i.button,this.onSinglePanStart(i,this._mouseOp))}}function mve(i){if("touch"==i.pointerType&&this._input!=Ai.CURSOR)switch(this._input){case Ai.ONE_FINGER:this.updateTouchEvent(i),this.onSinglePanMove(i,mt.ROTATE);break;case Ai.ONE_FINGER_SWITCHED:if(this.calculatePointersDistance(this._touchCurrent[0],i)*this._devPxRatio>=this._switchSensibility){this._input=Ai.ONE_FINGER,this.updateTouchEvent(i),this.onSinglePanStart(i,"ROTATE");break}break;case Ai.TWO_FINGER:this.updateTouchEvent(i),this.onRotateMove(),this.onPinchMove(),this.onDoublePanMove();break;case Ai.MULT_FINGER:this.updateTouchEvent(i),this.onTriplePanMove(i)}else if("touch"!=i.pointerType&&this._input==Ai.CURSOR){let t=null;i.ctrlKey||i.metaKey?t="CTRL":i.shiftKey&&(t="SHIFT");const e=this.getOpStateFromAction(this._button,t);null!=e&&this.onSinglePanMove(i,e)}this._downValid&&this.calculatePointersDistance(this._downEvents[this._downEvents.length-1],i)*this._devPxRatio>this._movementThreshold&&(this._downValid=!1)}function pve(i){if("touch"==i.pointerType&&this._input!=Ai.CURSOR){const t=this._touchCurrent.length;for(let e=0;e<t;e++)if(this._touchCurrent[e].pointerId==i.pointerId){this._touchCurrent.splice(e,1),this._touchStart.splice(e,1);break}switch(this._input){case Ai.ONE_FINGER:case Ai.ONE_FINGER_SWITCHED:window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=Ai.NONE,this.onSinglePanEnd();break;case Ai.TWO_FINGER:this.onDoublePanEnd(i),this.onPinchEnd(i),this.onRotateEnd(i),this._input=Ai.ONE_FINGER_SWITCHED;break;case Ai.MULT_FINGER:0==this._touchCurrent.length&&(window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=Ai.NONE,this.onTriplePanEnd())}}else"touch"!=i.pointerType&&this._input==Ai.CURSOR&&(window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=Ai.NONE,this.onSinglePanEnd(),this._button=-1);if(i.isPrimary)if(this._downValid)if(i.timeStamp-this._downEvents[this._downEvents.length-1].timeStamp<=this._maxDownTime)if(0==this._nclicks)this._nclicks=1,this._clickStart=performance.now();else{const e=i.timeStamp-this._clickStart,n=this.calculatePointersDistance(this._downEvents[1],this._downEvents[0])*this._devPxRatio;e<=this._maxInterval&&n<=this._posThreshold?(this._nclicks=0,this._downEvents.splice(0,this._downEvents.length),this.onDoubleTap(i)):(this._nclicks=1,this._downEvents.shift(),this._clickStart=performance.now())}else this._downValid=!1,this._nclicks=0,this._downEvents.splice(0,this._downEvents.length);else this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)}function gve(i){if(this.enabled&&this.enableZoom){let t=null;i.ctrlKey||i.metaKey?t="CTRL":i.shiftKey&&(t="SHIFT");const e=this.getOpFromAction("WHEEL",t);if(null!=e){i.preventDefault(),this.dispatchEvent(Ro);const n=125;let r=i.deltaY/n,s=1;switch(r>0?s=1/this.scaleFactor:r<0&&(s=this.scaleFactor),e){case"ZOOM":if(this.updateTbState(mt.SCALE,!0),r>0?s=1/Math.pow(this.scaleFactor,r):r<0&&(s=Math.pow(this.scaleFactor,-r)),this.cursorZoom&&this.enablePan){let o;this.camera.isOrthographicCamera?o=this.unprojectOnTbPlane(this.camera,i.clientX,i.clientY,this.domElement).applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera.isPerspectiveCamera&&(o=this.unprojectOnTbPlane(this.camera,i.clientX,i.clientY,this.domElement).applyQuaternion(this.camera.quaternion).add(this._gizmos.position)),this.applyTransformMatrix(this.scale(s,o))}else this.applyTransformMatrix(this.scale(s,this._gizmos.position));null!=this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(mt.IDLE,!1),this.dispatchEvent(Gi),this.dispatchEvent(Zs);break;case"FOV":if(this.camera.isPerspectiveCamera){this.updateTbState(mt.FOV,!0),0!=i.deltaX&&(r=i.deltaX/n,s=1,r>0?s=1/Math.pow(this.scaleFactor,r):r<0&&(s=Math.pow(this.scaleFactor,-r))),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const o=this._v3_1.distanceTo(this._gizmos.position);let a=o/s;a=st.clamp(a,this.minDistance,this.maxDistance);const l=o*Math.tan(st.DEG2RAD*this.camera.fov*.5);let c=st.RAD2DEG*(2*Math.atan(l/a));c>this.maxFov?c=this.maxFov:c<this.minFov&&(c=this.minFov),s=o/(l/Math.tan(st.DEG2RAD*(c/2))),this.setFov(c),this.applyTransformMatrix(this.scale(s,this._gizmos.position,!1))}null!=this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(mt.IDLE,!1),this.dispatchEvent(Gi),this.dispatchEvent(Zs)}}}}const _ve=["*"];let bve=(()=>{class i extends Rr{getType(){return cve}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set domElement(e){this._objRef&&(this._objRef.domElement=e)}get domElement(){return this._objRef?.domElement}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set focusAnimationTime(e){this._objRef&&(this._objRef.focusAnimationTime=e)}get focusAnimationTime(){return this._objRef?.focusAnimationTime}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set enablePan(e){this._objRef&&(this._objRef.enablePan=e)}get enablePan(){return this._objRef?.enablePan}set enableRotate(e){this._objRef&&(this._objRef.enableRotate=e)}get enableRotate(){return this._objRef?.enableRotate}set enableZoom(e){this._objRef&&(this._objRef.enableZoom=e)}get enableZoom(){return this._objRef?.enableZoom}set enableGizmos(e){this._objRef&&(this._objRef.enableGizmos=e)}get enableGizmos(){return this._objRef?.enableGizmos}set adjustNearFar(e){this._objRef&&(this._objRef.adjustNearFar=e)}get adjustNearFar(){return this._objRef?.adjustNearFar}set scaleFactor(e){this._objRef&&(this._objRef.scaleFactor=e)}get scaleFactor(){return this._objRef?.scaleFactor}set dampingFactor(e){this._objRef&&(this._objRef.dampingFactor=e)}get dampingFactor(){return this._objRef?.dampingFactor}set wMax(e){this._objRef&&(this._objRef.wMax=e)}get wMax(){return this._objRef?.wMax}set enableAnimations(e){this._objRef&&(this._objRef.enableAnimations=e)}get enableAnimations(){return this._objRef?.enableAnimations}set enableGrid(e){this._objRef&&(this._objRef.enableGrid=e)}get enableGrid(){return this._objRef?.enableGrid}set cursorZoom(e){this._objRef&&(this._objRef.cursorZoom=e)}get cursorZoom(){return this._objRef?.cursorZoom}set minFov(e){this._objRef&&(this._objRef.minFov=e)}get minFov(){return this._objRef?.minFov}set maxFov(e){this._objRef&&(this._objRef.maxFov=e)}get maxFov(){return this._objRef?.maxFov}set minDistance(e){this._objRef&&(this._objRef.minDistance=e)}get minDistance(){return this._objRef?.minDistance}set maxDistance(e){this._objRef&&(this._objRef.maxDistance=e)}get maxDistance(){return this._objRef?.maxDistance}set minZoom(e){this._objRef&&(this._objRef.minZoom=e)}get minZoom(){return this._objRef?.minZoom}set maxZoom(e){this._objRef&&(this._objRef.maxZoom=e)}get maxZoom(){return this._objRef?.maxZoom}set target(e){this._objRef&&(this._objRef.target=We(this._objRef.target,e))}get target(){return this._objRef?.target}set radiusFactor(e){this._objRef&&(this._objRef.radiusFactor=e)}get radiusFactor(){return this._objRef?.radiusFactor}set rotateSpeed(e){this._objRef&&(this._objRef.rotateSpeed=e)}get rotateSpeed(){return this._objRef?.rotateSpeed}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-arcballControls"]],inputs:{camera:"camera",domElement:"domElement",scene:"scene",focusAnimationTime:"focusAnimationTime",enabled:"enabled",enablePan:"enablePan",enableRotate:"enableRotate",enableZoom:"enableZoom",enableGizmos:"enableGizmos",adjustNearFar:"adjustNearFar",scaleFactor:"scaleFactor",dampingFactor:"dampingFactor",wMax:"wMax",enableAnimations:"enableAnimations",enableGrid:"enableGrid",cursorZoom:"cursorZoom",minFov:"minFov",maxFov:"maxFov",minDistance:"minDistance",maxDistance:"maxDistance",minZoom:"minZoom",maxZoom:"maxZoom",target:"target",radiusFactor:"radiusFactor",rotateSpeed:"rotateSpeed"},features:[Ee([{provide:Rr,useExisting:Le(()=>i)}]),ge],ngContentSelectors:_ve,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const vve=["*"];let yve=(()=>{class i extends pz{getType(){return dz}get type(){return this._objRef?.type}set box(e){this._objRef&&(this._objRef.box=We(this._objRef.box,e))}get box(){return this._objRef?.box}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-box3Helper"]],inputs:{box:"box"},features:[Ee([{provide:ht,useExisting:Le(()=>i)}]),ge],ngContentSelectors:vve,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const xve=["*"];let wve=(()=>{class i extends ht{getType(){return bz}set element(e){this._objRef&&(this._objRef.element=e)}get element(){return this._objRef?.element}set center(e){this._objRef&&(this._objRef.center=We(this._objRef.center,e))}get center(){return this._objRef?.center}set onBeforeRender(e){this._objRef&&(this._objRef.onBeforeRender=e)}get onBeforeRender(){return this._objRef?.onBeforeRender}set onAfterRender(e){this._objRef&&(this._objRef.onAfterRender=e)}get onAfterRender(){return this._objRef?.onAfterRender}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-cSS2DObjectGen"]],inputs:{element:"element",center:"center",onBeforeRender:"onBeforeRender",onAfterRender:"onAfterRender"},features:[Ee([{provide:ht,useExisting:Le(()=>i)}]),ge],ngContentSelectors:xve,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const Tve=["*"];let Mve=(()=>{class i extends ht{getType(){return $E}set element(e){this._objRef&&(this._objRef.element=e)}get element(){return this._objRef?.element}set onBeforeRender(e){this._objRef&&(this._objRef.onBeforeRender=e)}get onBeforeRender(){return this._objRef?.onBeforeRender}set onAfterRender(e){this._objRef&&(this._objRef.onAfterRender=e)}get onAfterRender(){return this._objRef?.onAfterRender}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-cSS3DObjectGen"]],inputs:{element:"element",onBeforeRender:"onBeforeRender",onAfterRender:"onAfterRender"},features:[Ee([{provide:ht,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Tve,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})(),$4=(()=>{class i extends yd{static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-abs-texture"]],features:[ge],decls:0,vars:0,template:function(n,r){},encapsulation:2})}return i})();const Sve=["*"];class gg extends $4{getType(){return Sn}get isTexture(){return this._objRef?.isTexture}get id(){return this._objRef?.id}set uuid(t){this._objRef&&(this._objRef.uuid=t)}get uuid(){return this._objRef?.uuid}set name(t){this._objRef&&(this._objRef.name=t)}get name(){return this._objRef?.name}set source(t){this._objRef&&(this._objRef.source=t)}get source(){return this._objRef?.source}set mipmaps(t){this._objRef&&(this._objRef.mipmaps=t)}get mipmaps(){return this._objRef?.mipmaps}set mapping(t){this._objRef&&(this._objRef.mapping=t)}get mapping(){return this._objRef?.mapping}set channel(t){this._objRef&&(this._objRef.channel=t)}get channel(){return this._objRef?.channel}set wrapS(t){this._objRef&&(this._objRef.wrapS=t)}get wrapS(){return this._objRef?.wrapS}set wrapT(t){this._objRef&&(this._objRef.wrapT=t)}get wrapT(){return this._objRef?.wrapT}set magFilter(t){this._objRef&&(this._objRef.magFilter=t)}get magFilter(){return this._objRef?.magFilter}set minFilter(t){this._objRef&&(this._objRef.minFilter=t)}get minFilter(){return this._objRef?.minFilter}set anisotropy(t){this._objRef&&(this._objRef.anisotropy=t)}get anisotropy(){return this._objRef?.anisotropy}set format(t){this._objRef&&(this._objRef.format=t)}get format(){return this._objRef?.format}set type(t){this._objRef&&(this._objRef.type=t)}get type(){return this._objRef?.type}set internalFormat(t){this._objRef&&(this._objRef.internalFormat=t)}get internalFormat(){return this._objRef?.internalFormat}set matrix(t){this._objRef&&(this._objRef.matrix=We(this._objRef.matrix,t))}get matrix(){return this._objRef?.matrix}set matrixAutoUpdate(t){this._objRef&&(this._objRef.matrixAutoUpdate=t)}get matrixAutoUpdate(){return this._objRef?.matrixAutoUpdate}set offset(t){this._objRef&&(this._objRef.offset=We(this._objRef.offset,t))}get offset(){return this._objRef?.offset}set repeat(t){this._objRef&&(this._objRef.repeat=We(this._objRef.repeat,t))}get repeat(){return this._objRef?.repeat}set center(t){this._objRef&&(this._objRef.center=We(this._objRef.center,t))}get center(){return this._objRef?.center}set rotation(t){this._objRef&&(this._objRef.rotation=t)}get rotation(){return this._objRef?.rotation}set generateMipmaps(t){this._objRef&&(this._objRef.generateMipmaps=t)}get generateMipmaps(){return this._objRef?.generateMipmaps}set premultiplyAlpha(t){this._objRef&&(this._objRef.premultiplyAlpha=t)}get premultiplyAlpha(){return this._objRef?.premultiplyAlpha}set flipY(t){this._objRef&&(this._objRef.flipY=t)}get flipY(){return this._objRef?.flipY}set unpackAlignment(t){this._objRef&&(this._objRef.unpackAlignment=t)}get unpackAlignment(){return this._objRef?.unpackAlignment}set colorSpace(t){this._objRef&&(this._objRef.colorSpace=t)}get colorSpace(){return this._objRef?.colorSpace}set isRenderTargetTexture(t){this._objRef&&(this._objRef.isRenderTargetTexture=t)}get isRenderTargetTexture(){return this._objRef?.isRenderTargetTexture}set userData(t){this._objRef&&(this._objRef.userData=t)}get userData(){return this._objRef?.userData}set version(t){this._objRef&&(this._objRef.version=t)}get version(){return this._objRef?.version}set pmremVersion(t){this._objRef&&(this._objRef.pmremVersion=t)}get pmremVersion(){return this._objRef?.pmremVersion}static#e=this.DEFAULT_ANISOTROPY=Sn.DEFAULT_ANISOTROPY;static#t=this.DEFAULT_IMAGE=Sn.DEFAULT_IMAGE;static#i=this.DEFAULT_MAPPING=Sn.DEFAULT_MAPPING;static#n=this.\u0275fac=(()=>{let t;return function(n){return(t||(t=He(gg)))(n||gg)}})();static#r=this.\u0275cmp=pe({type:gg,selectors:[["th-texture"]],inputs:{uuid:"uuid",name:"name",source:"source",mipmaps:"mipmaps",mapping:"mapping",channel:"channel",wrapS:"wrapS",wrapT:"wrapT",magFilter:"magFilter",minFilter:"minFilter",anisotropy:"anisotropy",format:"format",type:"type",internalFormat:"internalFormat",matrix:"matrix",matrixAutoUpdate:"matrixAutoUpdate",offset:"offset",repeat:"repeat",center:"center",rotation:"rotation",generateMipmaps:"generateMipmaps",premultiplyAlpha:"premultiplyAlpha",flipY:"flipY",unpackAlignment:"unpackAlignment",colorSpace:"colorSpace",isRenderTargetTexture:"isRenderTargetTexture",userData:"userData",version:"version",pmremVersion:"pmremVersion"},features:[Ee([{provide:$4,useExisting:Le(()=>gg)}]),ge],ngContentSelectors:Sve,decls:1,vars:0,template:function(e,n){1&e&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}const Rve=["*"];let Cve=(()=>{class i extends To{getType(){return Na}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-polyhedronGeometry"]],features:[Ee([{provide:To,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Rve,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const df=new Vs,Zl=new vd,Ya=new $,X4=new C,HA=new $,B0=new $,U0=new C,GA=new C,q4=new je,Y4=new C,Z4=new C;class Eve extends is{constructor(t,e,n){super(),n.style.touchAction="none";let r=null,s=null;const o=[];this.mode="translate",this.rotateSpeed=1;const a=this;function l(){n.addEventListener("pointermove",m),n.addEventListener("pointerdown",_),n.addEventListener("pointerup",p),n.addEventListener("pointerleave",p)}function c(){n.removeEventListener("pointermove",m),n.removeEventListener("pointerdown",_),n.removeEventListener("pointerup",p),n.removeEventListener("pointerleave",p),n.style.cursor=""}function m(v){if(!1!==a.enabled){if(g(v),Zl.setFromCamera(Ya,e),r)"translate"===a.mode?Zl.ray.intersectPlane(df,U0)&&r.position.copy(U0.sub(X4).applyMatrix4(q4)):"rotate"===a.mode&&(HA.subVectors(Ya,B0).multiplyScalar(a.rotateSpeed),r.rotateOnWorldAxis(Y4,HA.x),r.rotateOnWorldAxis(Z4.normalize(),-HA.y)),a.dispatchEvent({type:"drag",object:r}),B0.copy(Ya);else if("mouse"===v.pointerType||"pen"===v.pointerType)if(o.length=0,Zl.setFromCamera(Ya,e),Zl.intersectObjects(t,a.recursive,o),o.length>0){const y=o[0].object;df.setFromNormalAndCoplanarPoint(e.getWorldDirection(df.normal),GA.setFromMatrixPosition(y.matrixWorld)),s!==y&&null!==s&&(a.dispatchEvent({type:"hoveroff",object:s}),n.style.cursor="auto",s=null),s!==y&&(a.dispatchEvent({type:"hoveron",object:y}),n.style.cursor="pointer",s=y)}else null!==s&&(a.dispatchEvent({type:"hoveroff",object:s}),n.style.cursor="auto",s=null);B0.copy(Ya)}}function _(v){!1!==a.enabled&&(g(v),o.length=0,Zl.setFromCamera(Ya,e),Zl.intersectObjects(t,a.recursive,o),o.length>0&&(r=!0===a.transformGroup?b(o[0].object):o[0].object,df.setFromNormalAndCoplanarPoint(e.getWorldDirection(df.normal),GA.setFromMatrixPosition(r.matrixWorld)),Zl.ray.intersectPlane(df,U0)&&("translate"===a.mode?(q4.copy(r.parent.matrixWorld).invert(),X4.copy(U0).sub(GA.setFromMatrixPosition(r.matrixWorld))):"rotate"===a.mode&&(Y4.set(0,1,0).applyQuaternion(e.quaternion).normalize(),Z4.set(1,0,0).applyQuaternion(e.quaternion).normalize())),n.style.cursor="move",a.dispatchEvent({type:"dragstart",object:r})),B0.copy(Ya))}function p(){!1!==a.enabled&&(r&&(a.dispatchEvent({type:"dragend",object:r}),r=null),n.style.cursor=s?"pointer":"auto")}function g(v){const y=n.getBoundingClientRect();Ya.x=(v.clientX-y.left)/y.width*2-1,Ya.y=-(v.clientY-y.top)/y.height*2+1}function b(v,y=null){return v.isGroup&&(y=v),null===v.parent?y:b(v.parent,y)}l(),this.enabled=!0,this.recursive=!0,this.transformGroup=!1,this.activate=l,this.deactivate=c,this.dispose=function d(){c()},this.getObjects=function u(){return t},this.getRaycaster=function f(){return Zl},this.setObjects=function h(v){t=v}}}const Ave=["*"];let Dve=(()=>{class i extends Rr{getType(){return Eve}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set recursive(e){this._objRef&&(this._objRef.recursive=e)}get recursive(){return this._objRef?.recursive}set transformGroup(e){this._objRef&&(this._objRef.transformGroup=e)}get transformGroup(){return this._objRef?.transformGroup}set mode(e){this._objRef&&(this._objRef.mode=e)}get mode(){return this._objRef?.mode}set rotateSpeed(e){this._objRef&&(this._objRef.rotateSpeed=e)}get rotateSpeed(){return this._objRef?.rotateSpeed}set activate(e){this._objRef&&(this._objRef.activate=e)}get activate(){return this._objRef?.activate}set deactivate(e){this._objRef&&(this._objRef.deactivate=e)}get deactivate(){return this._objRef?.deactivate}set dispose(e){this._objRef&&(this._objRef.dispose=e)}get dispose(){return this._objRef?.dispose}set getObjects(e){this._objRef&&(this._objRef.getObjects=e)}get getObjects(){return this._objRef?.getObjects}set getRaycaster(e){this._objRef&&(this._objRef.getRaycaster=e)}get getRaycaster(){return this._objRef?.getRaycaster}set setObjects(e){this._objRef&&(this._objRef.setObjects=e)}get setObjects(){return this._objRef?.setObjects}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-dragControls"]],inputs:{enabled:"enabled",recursive:"recursive",transformGroup:"transformGroup",mode:"mode",rotateSpeed:"rotateSpeed",activate:"activate",deactivate:"deactivate",dispose:"dispose",getObjects:"getObjects",getRaycaster:"getRaycaster",setObjects:"setObjects"},features:[Ee([{provide:Rr,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Ave,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const Ive={name:"FilmShader",uniforms:{tDiffuse:{value:null},time:{value:0},intensity:{value:.5},grayscale:{value:!1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\n\t\tuniform float intensity;\n\t\tuniform bool grayscale;\n\t\tuniform float time;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 base = texture2D( tDiffuse, vUv );\n\n\t\t\tfloat noise = rand( fract( vUv + time ) );\n\n\t\t\tvec3 color = base.rgb + base.rgb * clamp( 0.1 + noise, 0.0, 1.0 );\n\n\t\t\tcolor = mix( base.rgb, color, intensity );\n\n\t\t\tif ( grayscale ) {\n\n\t\t\t\tcolor = vec3( luminance( color ) ); // assuming linear-srgb\n\n\t\t\t}\n\n\t\t\tgl_FragColor = vec4( color, base.a );\n\n\t\t}"};class Pve extends qs{constructor(t=.5,e=!1){super();const n=Ive;this.uniforms=Rn.clone(n.uniforms),this.material=new ei({name:n.name,uniforms:this.uniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader}),this.uniforms.intensity.value=t,this.uniforms.grayscale.value=e,this.fsQuad=new Yl(this.material)}render(t,e,n,r){this.uniforms.tDiffuse.value=n.texture,this.uniforms.time.value+=r,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(),this.fsQuad.render(t))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}const kve=["*"];let Fve=(()=>{class i extends qa{getType(){return Pve}set uniforms(e){this._objRef&&Object.assign(this._objRef.uniforms,e)}get uniforms(){return this._objRef?.uniforms}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-filmPass"]],inputs:{uniforms:"uniforms",material:"material",fsQuad:"fsQuad"},features:[Ee([{provide:Ys,useExisting:Le(()=>i)}]),ge],ngContentSelectors:kve,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const K4=new C,WA=new e0,$A=new C;class Lve{constructor(t,e){this.object=t,this.domElement=e,this.enabled=!0,this.movementSpeed=1,this.lookSpeed=.005,this.lookVertical=!0,this.autoForward=!1,this.activeLook=!0,this.heightSpeed=!1,this.heightCoef=1,this.heightMin=0,this.heightMax=1,this.constrainVertical=!1,this.verticalMin=0,this.verticalMax=Math.PI,this.mouseDragOn=!1,this.autoSpeedFactor=0,this.pointerX=0,this.pointerY=0,this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.viewHalfX=0,this.viewHalfY=0;let n=0,r=0;this.handleResize=function(){this.domElement===document?(this.viewHalfX=window.innerWidth/2,this.viewHalfY=window.innerHeight/2):(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)},this.onPointerDown=function(u){if(this.domElement!==document&&this.domElement.focus(),this.activeLook)switch(u.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0}this.mouseDragOn=!0},this.onPointerUp=function(u){if(this.activeLook)switch(u.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1}this.mouseDragOn=!1},this.onPointerMove=function(u){this.domElement===document?(this.pointerX=u.pageX-this.viewHalfX,this.pointerY=u.pageY-this.viewHalfY):(this.pointerX=u.pageX-this.domElement.offsetLeft-this.viewHalfX,this.pointerY=u.pageY-this.domElement.offsetTop-this.viewHalfY)},this.onKeyDown=function(u){switch(u.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0}},this.onKeyUp=function(u){switch(u.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1}},this.lookAt=function(u,h,f){return u.isVector3?$A.copy(u):$A.set(u,h,f),this.object.lookAt($A),d(this),this},this.update=function(){const u=new C;return function(f){if(!1===this.enabled)return;if(this.heightSpeed){const T=st.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=f*(T*this.heightCoef)}else this.autoSpeedFactor=0;const m=f*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(m+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(m),this.moveLeft&&this.object.translateX(-m),this.moveRight&&this.object.translateX(m),this.moveUp&&this.object.translateY(m),this.moveDown&&this.object.translateY(-m);let _=f*this.lookSpeed;this.activeLook||(_=0);let p=1;this.constrainVertical&&(p=Math.PI/(this.verticalMax-this.verticalMin)),r-=this.pointerX*_,this.lookVertical&&(n-=this.pointerY*_*p),n=Math.max(-85,Math.min(85,n));let g=st.degToRad(90-n);const b=st.degToRad(r);this.constrainVertical&&(g=st.mapLinear(g,0,Math.PI,this.verticalMin,this.verticalMax));const v=this.object.position;u.setFromSphericalCoords(1,g,b).add(v),this.object.lookAt(u)}}(),this.dispose=function(){this.domElement.removeEventListener("contextmenu",Q4),this.domElement.removeEventListener("pointerdown",o),this.domElement.removeEventListener("pointermove",s),this.domElement.removeEventListener("pointerup",a),window.removeEventListener("keydown",l),window.removeEventListener("keyup",c)};const s=this.onPointerMove.bind(this),o=this.onPointerDown.bind(this),a=this.onPointerUp.bind(this),l=this.onKeyDown.bind(this),c=this.onKeyUp.bind(this);function d(u){const h=u.object.quaternion;K4.set(0,0,-1).applyQuaternion(h),WA.setFromVector3(K4),n=90-st.radToDeg(WA.phi),r=st.radToDeg(WA.theta)}this.domElement.addEventListener("contextmenu",Q4),this.domElement.addEventListener("pointerdown",o),this.domElement.addEventListener("pointermove",s),this.domElement.addEventListener("pointerup",a),window.addEventListener("keydown",l),window.addEventListener("keyup",c),this.handleResize(),d(this)}}function Q4(i){i.preventDefault()}const Ove=["*"];let Nve=(()=>{class i extends Rr{getType(){return Lve}set object(e){this._objRef&&(this._objRef.object=e)}get object(){return this._objRef?.object}set domElement(e){this._objRef&&(this._objRef.domElement=e)}get domElement(){return this._objRef?.domElement}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set movementSpeed(e){this._objRef&&(this._objRef.movementSpeed=e)}get movementSpeed(){return this._objRef?.movementSpeed}set lookSpeed(e){this._objRef&&(this._objRef.lookSpeed=e)}get lookSpeed(){return this._objRef?.lookSpeed}set lookVertical(e){this._objRef&&(this._objRef.lookVertical=e)}get lookVertical(){return this._objRef?.lookVertical}set autoForward(e){this._objRef&&(this._objRef.autoForward=e)}get autoForward(){return this._objRef?.autoForward}set activeLook(e){this._objRef&&(this._objRef.activeLook=e)}get activeLook(){return this._objRef?.activeLook}set heightSpeed(e){this._objRef&&(this._objRef.heightSpeed=e)}get heightSpeed(){return this._objRef?.heightSpeed}set heightCoef(e){this._objRef&&(this._objRef.heightCoef=e)}get heightCoef(){return this._objRef?.heightCoef}set heightMin(e){this._objRef&&(this._objRef.heightMin=e)}get heightMin(){return this._objRef?.heightMin}set heightMax(e){this._objRef&&(this._objRef.heightMax=e)}get heightMax(){return this._objRef?.heightMax}set constrainVertical(e){this._objRef&&(this._objRef.constrainVertical=e)}get constrainVertical(){return this._objRef?.constrainVertical}set verticalMin(e){this._objRef&&(this._objRef.verticalMin=e)}get verticalMin(){return this._objRef?.verticalMin}set verticalMax(e){this._objRef&&(this._objRef.verticalMax=e)}get verticalMax(){return this._objRef?.verticalMax}set mouseDragOn(e){this._objRef&&(this._objRef.mouseDragOn=e)}get mouseDragOn(){return this._objRef?.mouseDragOn}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-firstPersonControls"]],inputs:{object:"object",domElement:"domElement",enabled:"enabled",movementSpeed:"movementSpeed",lookSpeed:"lookSpeed",lookVertical:"lookVertical",autoForward:"autoForward",activeLook:"activeLook",heightSpeed:"heightSpeed",heightCoef:"heightCoef",heightMin:"heightMin",heightMax:"heightMax",constrainVertical:"constrainVertical",verticalMin:"verticalMin",verticalMax:"verticalMax",mouseDragOn:"mouseDragOn"},features:[Ee([{provide:Rr,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Ove,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const jve={type:"change"};class Bve extends is{constructor(t,e){super(),this.object=t,this.domElement=e,this.enabled=!0,this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;const n=this,r=1e-6,s=new mi,o=new C;this.tmpQuaternion=new mi,this.status=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new C(0,0,0),this.rotationVector=new C(0,0,0),this.keydown=function(m){if(!m.altKey&&!1!==this.enabled){switch(m.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(m){if(!1!==this.enabled){switch(m.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()}},this.pointerdown=function(m){if(!1!==this.enabled)if(this.dragToLook)this.status++;else{switch(m.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}},this.pointermove=function(m){if(!1!==this.enabled&&(!this.dragToLook||this.status>0)){const _=this.getContainerDimensions(),p=_.size[0]/2,g=_.size[1]/2;this.moveState.yawLeft=-(m.pageX-_.offset[0]-p)/p,this.moveState.pitchDown=(m.pageY-_.offset[1]-g)/g,this.updateRotationVector()}},this.pointerup=function(m){if(!1!==this.enabled){if(this.dragToLook)this.status--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(m.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()}},this.pointercancel=function(){!1!==this.enabled&&(this.dragToLook?(this.status=0,this.moveState.yawLeft=this.moveState.pitchDown=0):(this.moveState.forward=0,this.moveState.back=0,this.updateMovementVector()),this.updateRotationVector())},this.contextMenu=function(m){!1!==this.enabled&&m.preventDefault()},this.update=function(m){if(!1===this.enabled)return;const _=m*n.movementSpeed,p=m*n.rollSpeed;n.object.translateX(n.moveVector.x*_),n.object.translateY(n.moveVector.y*_),n.object.translateZ(n.moveVector.z*_),n.tmpQuaternion.set(n.rotationVector.x*p,n.rotationVector.y*p,n.rotationVector.z*p,1).normalize(),n.object.quaternion.multiply(n.tmpQuaternion),(o.distanceToSquared(n.object.position)>r||8*(1-s.dot(n.object.quaternion))>r)&&(n.dispatchEvent(jve),s.copy(n.object.quaternion),o.copy(n.object.position))},this.updateMovementVector=function(){const m=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-m+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",a),this.domElement.removeEventListener("pointerdown",c),this.domElement.removeEventListener("pointermove",l),this.domElement.removeEventListener("pointerup",d),this.domElement.removeEventListener("pointercancel",u),window.removeEventListener("keydown",h),window.removeEventListener("keyup",f)};const a=this.contextMenu.bind(this),l=this.pointermove.bind(this),c=this.pointerdown.bind(this),d=this.pointerup.bind(this),u=this.pointercancel.bind(this),h=this.keydown.bind(this),f=this.keyup.bind(this);this.domElement.addEventListener("contextmenu",a),this.domElement.addEventListener("pointerdown",c),this.domElement.addEventListener("pointermove",l),this.domElement.addEventListener("pointerup",d),this.domElement.addEventListener("pointercancel",u),window.addEventListener("keydown",h),window.addEventListener("keyup",f),this.updateMovementVector(),this.updateRotationVector()}}const Uve=["*"];let Vve=(()=>{class i extends Rr{getType(){return Bve}set autoForward(e){this._objRef&&(this._objRef.autoForward=e)}get autoForward(){return this._objRef?.autoForward}set domElement(e){this._objRef&&(this._objRef.domElement=e)}get domElement(){return this._objRef?.domElement}set dragToLook(e){this._objRef&&(this._objRef.dragToLook=e)}get dragToLook(){return this._objRef?.dragToLook}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set movementSpeed(e){this._objRef&&(this._objRef.movementSpeed=e)}get movementSpeed(){return this._objRef?.movementSpeed}set object(e){this._objRef&&(this._objRef.object=e)}get object(){return this._objRef?.object}set rollSpeed(e){this._objRef&&(this._objRef.rollSpeed=e)}get rollSpeed(){return this._objRef?.rollSpeed}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-flyControls"]],inputs:{autoForward:"autoForward",domElement:"domElement",dragToLook:"dragToLook",enabled:"enabled",movementSpeed:"movementSpeed",object:"object",rollSpeed:"rollSpeed"},features:[Ee([{provide:Rr,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Uve,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const zve={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\tuniform int byp; //should we apply the glitch ?\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tDisp;\n\n\t\tuniform float amount;\n\t\tuniform float angle;\n\t\tuniform float seed;\n\t\tuniform float seed_x;\n\t\tuniform float seed_y;\n\t\tuniform float distortion_x;\n\t\tuniform float distortion_y;\n\t\tuniform float col_s;\n\n\t\tvarying vec2 vUv;\n\n\n\t\tfloat rand(vec2 co){\n\t\t\treturn fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tif(byp<1) {\n\t\t\t\tvec2 p = vUv;\n\t\t\t\tfloat xs = floor(gl_FragCoord.x / 0.5);\n\t\t\t\tfloat ys = floor(gl_FragCoord.y / 0.5);\n\t\t\t\t//based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\n\t\t\t\tfloat disp = texture2D(tDisp, p*seed*seed).r;\n\t\t\t\tif(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {\n\t\t\t\t\tif(seed_x>0.){\n\t\t\t\t\t\tp.y = 1. - (p.y + distortion_y);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.y = distortion_y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {\n\t\t\t\t\tif(seed_y>0.){\n\t\t\t\t\t\tp.x=distortion_x;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.x = 1. - (p.x + distortion_x);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tp.x+=disp*seed_x*(seed/5.);\n\t\t\t\tp.y+=disp*seed_y*(seed/5.);\n\t\t\t\t//base from RGB shift shader\n\t\t\t\tvec2 offset = amount * vec2( cos(angle), sin(angle));\n\t\t\t\tvec4 cr = texture2D(tDiffuse, p + offset);\n\t\t\t\tvec4 cga = texture2D(tDiffuse, p);\n\t\t\t\tvec4 cb = texture2D(tDiffuse, p - offset);\n\t\t\t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n\t\t\t\t//add noise\n\t\t\t\tvec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);\n\t\t\t\tgl_FragColor = gl_FragColor+ snow;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor=texture2D (tDiffuse, vUv);\n\t\t\t}\n\t\t}"};class Hve extends qs{constructor(t=64){super();const e=zve;this.uniforms=Rn.clone(e.uniforms),this.heightMap=this.generateHeightmap(t),this.uniforms.tDisp.value=this.heightMap,this.material=new ei({uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.fsQuad=new Yl(this.material),this.goWild=!1,this.curF=0,this.generateTrigger()}render(t,e,n){this.uniforms.tDiffuse.value=n.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||1==this.goWild?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=st.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=st.randFloat(-1,1),this.uniforms.seed_y.value=st.randFloat(-1,1),this.uniforms.distortion_x.value=st.randFloat(0,1),this.uniforms.distortion_y.value=st.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=st.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=st.randFloat(0,1),this.uniforms.distortion_y.value=st.randFloat(0,1),this.uniforms.seed_x.value=st.randFloat(-.3,.3),this.uniforms.seed_y.value=st.randFloat(-.3,.3)):0==this.goWild&&(this.uniforms.byp.value=1),this.curF++,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(),this.fsQuad.render(t))}generateTrigger(){this.randX=st.randInt(120,240)}generateHeightmap(t){const e=new Float32Array(t*t),n=t*t;for(let s=0;s<n;s++){const o=st.randFloat(0,1);e[s]=o}const r=new Jo(e,t,t,op,ts);return r.needsUpdate=!0,r}dispose(){this.material.dispose(),this.heightMap.dispose(),this.fsQuad.dispose()}}const Gve=["*"];let Wve=(()=>{class i extends qa{getType(){return Hve}set uniforms(e){this._objRef&&Object.assign(this._objRef.uniforms,e)}get uniforms(){return this._objRef?.uniforms}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set goWild(e){this._objRef&&(this._objRef.goWild=e)}get goWild(){return this._objRef?.goWild}set curF(e){this._objRef&&(this._objRef.curF=e)}get curF(){return this._objRef?.curF}set randX(e){this._objRef&&(this._objRef.randX=e)}get randX(){return this._objRef?.randX}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-glitchPass"]],inputs:{uniforms:"uniforms",material:"material",fsQuad:"fsQuad",goWild:"goWild",curF:"curF",randX:"randX"},features:[Ee([{provide:Ys,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Gve,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const $ve=["*"];let V0=(()=>{class i extends ht{getType(){return yo}get isGroup(){return this._objRef?.isGroup}get type(){return this._objRef?.type}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-group"]],features:[Ee([{provide:ht,useExisting:Le(()=>i)}]),ge],ngContentSelectors:$ve,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const Xve=["*"];let qve=(()=>{class i extends Cve{getType(){return zp}get type(){return this._objRef?.type}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-icosahedronGeometry"]],features:[Ee([{provide:To,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Xve,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const Yve=["*"];let Zve=(()=>{class i extends Mr{getType(){return xy}get isInstancedMesh(){return this._objRef?.isInstancedMesh}set boundingBox(e){this._objRef&&(this._objRef.boundingBox=We(this._objRef.boundingBox,e))}get boundingBox(){return this._objRef?.boundingBox}set boundingSphere(e){this._objRef&&(this._objRef.boundingSphere=We(this._objRef.boundingSphere,e))}get boundingSphere(){return this._objRef?.boundingSphere}set count(e){this._objRef&&(this._objRef.count=e)}get count(){return this._objRef?.count}set instanceColor(e){this._objRef&&(this._objRef.instanceColor=We(this._objRef.instanceColor,e))}get instanceColor(){return this._objRef?.instanceColor}set instanceMatrix(e){this._objRef&&(this._objRef.instanceMatrix=We(this._objRef.instanceMatrix,e))}get instanceMatrix(){return this._objRef?.instanceMatrix}set morphTexture(e){this._objRef&&(this._objRef.morphTexture=e)}get morphTexture(){return this._objRef?.morphTexture}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-instancedMesh"]],inputs:{boundingBox:"boundingBox",boundingSphere:"boundingSphere",count:"count",instanceColor:"instanceColor",instanceMatrix:"instanceMatrix",morphTexture:"morphTexture"},features:[Ee([{provide:ht,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Yve,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const Kve=["*"];let J4=(()=>{class i extends qa{getType(){return z4}set textureID(e){this._objRef&&(this._objRef.textureID=e)}get textureID(){return this._objRef?.textureID}set uniforms(e){this._objRef&&Object.assign(this._objRef.uniforms,e)}get uniforms(){return this._objRef?.uniforms}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-shaderPass"]],inputs:{textureID:"textureID",uniforms:"uniforms",material:"material",fsQuad:"fsQuad"},features:[Ee([{provide:Ys,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Kve,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();class Qve extends Hz{constructor(t,e){super(t,e),this.screenSpacePanning=!1,this.mouseButtons={LEFT:xs.PAN,MIDDLE:xs.DOLLY,RIGHT:xs.ROTATE},this.touches={ONE:Ra.PAN,TWO:Ra.DOLLY_ROTATE}}}const Jve=["*"];let eye=(()=>{class i extends So{getType(){return Qve}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-mapControls"]],features:[Ee([{provide:Rr,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Jve,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const tye=["*"];let eG=(()=>{class i extends Ul{getType(){return ta}get isMeshStandardMaterial(){return this._objRef?.isMeshStandardMaterial}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set defines(e){this._objRef&&(this._objRef.defines=e)}get defines(){return this._objRef?.defines}set color(e){this._objRef&&(this._objRef.color=We(this._objRef.color,e))}get color(){return this._objRef?.color}set roughness(e){this._objRef&&(this._objRef.roughness=e)}get roughness(){return this._objRef?.roughness}set metalness(e){this._objRef&&(this._objRef.metalness=e)}get metalness(){return this._objRef?.metalness}set map(e){this._objRef&&(this._objRef.map=e)}get map(){return this._objRef?.map}set lightMap(e){this._objRef&&(this._objRef.lightMap=e)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(e){this._objRef&&(this._objRef.lightMapIntensity=e)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set aoMap(e){this._objRef&&(this._objRef.aoMap=e)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(e){this._objRef&&(this._objRef.aoMapIntensity=e)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set emissive(e){this._objRef&&(this._objRef.emissive=We(this._objRef.emissive,e))}get emissive(){return this._objRef?.emissive}set emissiveIntensity(e){this._objRef&&(this._objRef.emissiveIntensity=e)}get emissiveIntensity(){return this._objRef?.emissiveIntensity}set emissiveMap(e){this._objRef&&(this._objRef.emissiveMap=e)}get emissiveMap(){return this._objRef?.emissiveMap}set bumpMap(e){this._objRef&&(this._objRef.bumpMap=e)}get bumpMap(){return this._objRef?.bumpMap}set bumpScale(e){this._objRef&&(this._objRef.bumpScale=e)}get bumpScale(){return this._objRef?.bumpScale}set normalMap(e){this._objRef&&(this._objRef.normalMap=e)}get normalMap(){return this._objRef?.normalMap}set normalMapType(e){this._objRef&&(this._objRef.normalMapType=e)}get normalMapType(){return this._objRef?.normalMapType}set normalScale(e){this._objRef&&(this._objRef.normalScale=We(this._objRef.normalScale,e))}get normalScale(){return this._objRef?.normalScale}set displacementMap(e){this._objRef&&(this._objRef.displacementMap=e)}get displacementMap(){return this._objRef?.displacementMap}set displacementScale(e){this._objRef&&(this._objRef.displacementScale=e)}get displacementScale(){return this._objRef?.displacementScale}set displacementBias(e){this._objRef&&(this._objRef.displacementBias=e)}get displacementBias(){return this._objRef?.displacementBias}set roughnessMap(e){this._objRef&&(this._objRef.roughnessMap=e)}get roughnessMap(){return this._objRef?.roughnessMap}set metalnessMap(e){this._objRef&&(this._objRef.metalnessMap=e)}get metalnessMap(){return this._objRef?.metalnessMap}set alphaMap(e){this._objRef&&(this._objRef.alphaMap=e)}get alphaMap(){return this._objRef?.alphaMap}set envMap(e){this._objRef&&(this._objRef.envMap=e)}get envMap(){return this._objRef?.envMap}set envMapRotation(e){this._objRef&&(this._objRef.envMapRotation=We(this._objRef.envMapRotation,e))}get envMapRotation(){return this._objRef?.envMapRotation}set envMapIntensity(e){this._objRef&&(this._objRef.envMapIntensity=e)}get envMapIntensity(){return this._objRef?.envMapIntensity}set wireframe(e){this._objRef&&(this._objRef.wireframe=e)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(e){this._objRef&&(this._objRef.wireframeLinewidth=e)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(e){this._objRef&&(this._objRef.wireframeLinecap=e)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(e){this._objRef&&(this._objRef.wireframeLinejoin=e)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set flatShading(e){this._objRef&&(this._objRef.flatShading=e)}get flatShading(){return this._objRef?.flatShading}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-meshStandardMaterial"]],inputs:{type:"type",defines:"defines",color:"color",roughness:"roughness",metalness:"metalness",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",emissive:"emissive",emissiveIntensity:"emissiveIntensity",emissiveMap:"emissiveMap",bumpMap:"bumpMap",bumpScale:"bumpScale",normalMap:"normalMap",normalMapType:"normalMapType",normalScale:"normalScale",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",roughnessMap:"roughnessMap",metalnessMap:"metalnessMap",alphaMap:"alphaMap",envMap:"envMap",envMapRotation:"envMapRotation",envMapIntensity:"envMapIntensity",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",flatShading:"flatShading",fog:"fog"},features:[Ee([{provide:Ul,useExisting:Le(()=>i)}]),ge],ngContentSelectors:tye,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();class Kl extends qs{constructor(t,e,n,r){super(),this.renderScene=e,this.renderCamera=n,this.selectedObjects=void 0!==r?r:[],this.visibleEdgeColor=new Te(1,1,1),this.hiddenEdgeColor=new Te(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=void 0!==t?new $(t.x,t.y):new $(256,256);const s=Math.round(this.resolution.x/this.downSampleRatio),o=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new gi(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new uy,this.depthMaterial.side=Br,this.depthMaterial.depthPacking=hC,this.depthMaterial.blending=oi,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=Br,this.prepareMaskMaterial.fragmentShader=function d(u,h){return u.replace(/DEPTH_TO_VIEW_Z/g,(h.isPerspectiveCamera?"perspective":"orthographic")+"DepthToViewZ")}(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new gi(this.resolution.x,this.resolution.y,{type:mn}),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new gi(s,o,{type:mn}),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new gi(s,o,{type:mn}),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new gi(Math.round(s/2),Math.round(o/2),{type:mn}),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new gi(s,o,{type:mn}),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new gi(Math.round(s/2),Math.round(o/2),{type:mn}),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1,this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value.set(s,o),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(s/2),Math.round(o/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial();const c=Xs;this.copyUniforms=Rn.clone(c.uniforms),this.materialCopy=new ei({uniforms:this.copyUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,blending:oi,depthTest:!1,depthWrite:!1}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Te,this.oldClearAlpha=1,this.fsQuad=new Yl(null),this.tempPulseColor1=new Te,this.tempPulseColor2=new Te,this.textureMatrix=new je}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}setSize(t,e){this.renderTargetMaskBuffer.setSize(t,e),this.renderTargetDepthBuffer.setSize(t,e);let n=Math.round(t/this.downSampleRatio),r=Math.round(e/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(n,r),this.renderTargetBlurBuffer1.setSize(n,r),this.renderTargetEdgeBuffer1.setSize(n,r),this.separableBlurMaterial1.uniforms.texSize.value.set(n,r),n=Math.round(n/2),r=Math.round(r/2),this.renderTargetBlurBuffer2.setSize(n,r),this.renderTargetEdgeBuffer2.setSize(n,r),this.separableBlurMaterial2.uniforms.texSize.value.set(n,r)}changeVisibilityOfSelectedObjects(t){const e=this._visibilityCache;function n(r){r.isMesh&&(!0===t?r.visible=e.get(r):(e.set(r,r.visible),r.visible=t))}for(let r=0;r<this.selectedObjects.length;r++)this.selectedObjects[r].traverse(n)}changeVisibilityOfNonSelectedObjects(t){const e=this._visibilityCache,n=[];function r(o){o.isMesh&&n.push(o)}for(let o=0;o<this.selectedObjects.length;o++)this.selectedObjects[o].traverse(r);this.renderScene.traverse(function s(o){if(o.isMesh||o.isSprite){let a=!1;for(let l=0;l<n.length;l++)if(n[l].id===o.id){a=!0;break}if(!1===a){const l=o.visible;(!1===t||!0===e.get(o))&&(o.visible=t),e.set(o,l)}}else(o.isPoints||o.isLine)&&(!0===t?o.visible=e.get(o):(e.set(o,o.visible),o.visible=t))})}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(t,e,n,r,s){if(this.selectedObjects.length>0){t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();const o=t.autoClear;t.autoClear=!1,s&&t.state.buffers.stencil.setTest(!1),t.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const a=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,t.setRenderTarget(this.renderTargetDepthBuffer),t.clear(),t.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,t.setRenderTarget(this.renderTargetMaskBuffer),t.clear(),t.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=a,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,t.setRenderTarget(this.renderTargetMaskDownSampleBuffer),t.clear(),this.fsQuad.render(t),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const l=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(l),this.tempPulseColor2.multiplyScalar(l)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,t.setRenderTarget(this.renderTargetEdgeBuffer1),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Kl.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,t.setRenderTarget(this.renderTargetBlurBuffer1),t.clear(),this.fsQuad.render(t),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Kl.BlurDirectionY,t.setRenderTarget(this.renderTargetEdgeBuffer1),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=Kl.BlurDirectionX,t.setRenderTarget(this.renderTargetBlurBuffer2),t.clear(),this.fsQuad.render(t),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=Kl.BlurDirectionY,t.setRenderTarget(this.renderTargetEdgeBuffer2),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,s&&t.state.buffers.stencil.setTest(!0),t.setRenderTarget(n),this.fsQuad.render(t),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=o}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=n.texture,t.setRenderTarget(null),this.fsQuad.render(t))}getPrepareMaskMaterial(){return new ei({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new $(.5,.5)},textureMatrix:{value:null}},vertexShader:"#include <morphtarget_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tuniform mat4 textureMatrix;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <morphtarget_vertex>\n\t\t\t\t\t#include <skinning_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t\tvPosition = mvPosition;\n\n\t\t\t\t\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t\t\t\t\t#ifdef USE_INSTANCING\n\n\t\t\t\t\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t\t\t\t\t#endif\n\t\t\t\t\t\n\t\t\t\t\tworldPosition = modelMatrix * worldPosition;\n\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n\n\t\t\t\t}",fragmentShader:"#include <packing>\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 cameraNearFar;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n\t\t\t\t\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\n\n\t\t\t\t}"})}getEdgeDetectionMaterial(){return new ei({uniforms:{maskTexture:{value:null},texSize:{value:new $(.5,.5)},visibleEdgeColor:{value:new C(1,1,1)},hiddenEdgeColor:{value:new C(1,1,1)}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec3 visibleEdgeColor;\n\t\t\t\tuniform vec3 hiddenEdgeColor;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\n\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\n\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\n\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\n\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\n\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\n\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\n\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\n\t\t\t\t}"})}getSeperableBlurMaterial(t){return new ei({defines:{MAX_RADIUS:t},uniforms:{colorTexture:{value:null},texSize:{value:new $(.5,.5)},direction:{value:new $(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float kernelRadius;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat sigma = kernelRadius/2.0;\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, sigma);\n\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\n\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n\t\t\t\t\tvec2 uvOffset = delta;\n\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = kernelRadius * float(i) / float(MAX_RADIUS);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, sigma);\n\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\n\t\t\t\t\t\tweightSum += (2.0 * w);\n\t\t\t\t\t\tuvOffset += delta;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}"})}getOverlayMaterial(){return new ei({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform sampler2D edgeTexture1;\n\t\t\t\tuniform sampler2D edgeTexture2;\n\t\t\t\tuniform sampler2D patternTexture;\n\t\t\t\tuniform float edgeStrength;\n\t\t\t\tuniform float edgeGlow;\n\t\t\t\tuniform bool usePatternTexture;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\n\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\n\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\n\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n\t\t\t\t\tif(usePatternTexture)\n\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\n\t\t\t\t\tgl_FragColor = finalColor;\n\t\t\t\t}",blending:ep,depthTest:!1,depthWrite:!1,transparent:!0})}}Kl.BlurDirectionX=new $(1,0),Kl.BlurDirectionY=new $(0,1);const iye=["*"];let nye=(()=>{class i extends qa{getType(){return Kl}set renderScene(e){this._objRef&&(this._objRef.renderScene=e)}get renderScene(){return this._objRef?.renderScene}set renderCamera(e){this._objRef&&(this._objRef.renderCamera=e)}get renderCamera(){return this._objRef?.renderCamera}set selectedObjects(e){this._objRef&&(this._objRef.selectedObjects=e)}get selectedObjects(){return this._objRef?.selectedObjects}set visibleEdgeColor(e){this._objRef&&(this._objRef.visibleEdgeColor=We(this._objRef.visibleEdgeColor,e))}get visibleEdgeColor(){return this._objRef?.visibleEdgeColor}set hiddenEdgeColor(e){this._objRef&&(this._objRef.hiddenEdgeColor=We(this._objRef.hiddenEdgeColor,e))}get hiddenEdgeColor(){return this._objRef?.hiddenEdgeColor}set edgeGlow(e){this._objRef&&(this._objRef.edgeGlow=e)}get edgeGlow(){return this._objRef?.edgeGlow}set usePatternTexture(e){this._objRef&&(this._objRef.usePatternTexture=e)}get usePatternTexture(){return this._objRef?.usePatternTexture}set edgeThickness(e){this._objRef&&(this._objRef.edgeThickness=e)}get edgeThickness(){return this._objRef?.edgeThickness}set edgeStrength(e){this._objRef&&(this._objRef.edgeStrength=e)}get edgeStrength(){return this._objRef?.edgeStrength}set downSampleRatio(e){this._objRef&&(this._objRef.downSampleRatio=e)}get downSampleRatio(){return this._objRef?.downSampleRatio}set pulsePeriod(e){this._objRef&&(this._objRef.pulsePeriod=e)}get pulsePeriod(){return this._objRef?.pulsePeriod}set resolution(e){this._objRef&&(this._objRef.resolution=We(this._objRef.resolution,e))}get resolution(){return this._objRef?.resolution}set patternTexture(e){this._objRef&&(this._objRef.patternTexture=e)}get patternTexture(){return this._objRef?.patternTexture}set maskBufferMaterial(e){this._objRef&&(this._objRef.maskBufferMaterial=e)}get maskBufferMaterial(){return this._objRef?.maskBufferMaterial}set renderTargetMaskBuffer(e){this._objRef&&(this._objRef.renderTargetMaskBuffer=e)}get renderTargetMaskBuffer(){return this._objRef?.renderTargetMaskBuffer}set depthMaterial(e){this._objRef&&(this._objRef.depthMaterial=e)}get depthMaterial(){return this._objRef?.depthMaterial}set prepareMaskMaterial(e){this._objRef&&(this._objRef.prepareMaskMaterial=e)}get prepareMaskMaterial(){return this._objRef?.prepareMaskMaterial}set renderTargetDepthBuffer(e){this._objRef&&(this._objRef.renderTargetDepthBuffer=e)}get renderTargetDepthBuffer(){return this._objRef?.renderTargetDepthBuffer}set renderTargetMaskDownSampleBuffer(e){this._objRef&&(this._objRef.renderTargetMaskDownSampleBuffer=e)}get renderTargetMaskDownSampleBuffer(){return this._objRef?.renderTargetMaskDownSampleBuffer}set renderTargetBlurBuffer1(e){this._objRef&&(this._objRef.renderTargetBlurBuffer1=e)}get renderTargetBlurBuffer1(){return this._objRef?.renderTargetBlurBuffer1}set renderTargetBlurBuffer2(e){this._objRef&&(this._objRef.renderTargetBlurBuffer2=e)}get renderTargetBlurBuffer2(){return this._objRef?.renderTargetBlurBuffer2}set edgeDetectionMaterial(e){this._objRef&&(this._objRef.edgeDetectionMaterial=e)}get edgeDetectionMaterial(){return this._objRef?.edgeDetectionMaterial}set renderTargetEdgeBuffer1(e){this._objRef&&(this._objRef.renderTargetEdgeBuffer1=e)}get renderTargetEdgeBuffer1(){return this._objRef?.renderTargetEdgeBuffer1}set renderTargetEdgeBuffer2(e){this._objRef&&(this._objRef.renderTargetEdgeBuffer2=e)}get renderTargetEdgeBuffer2(){return this._objRef?.renderTargetEdgeBuffer2}set separableBlurMaterial1(e){this._objRef&&(this._objRef.separableBlurMaterial1=e)}get separableBlurMaterial1(){return this._objRef?.separableBlurMaterial1}set separableBlurMaterial2(e){this._objRef&&(this._objRef.separableBlurMaterial2=e)}get separableBlurMaterial2(){return this._objRef?.separableBlurMaterial2}set overlayMaterial(e){this._objRef&&(this._objRef.overlayMaterial=e)}get overlayMaterial(){return this._objRef?.overlayMaterial}set copyUniforms(e){this._objRef&&(this._objRef.copyUniforms=e)}get copyUniforms(){return this._objRef?.copyUniforms}set materialCopy(e){this._objRef&&(this._objRef.materialCopy=e)}get materialCopy(){return this._objRef?.materialCopy}set oldClearColor(e){this._objRef&&(this._objRef.oldClearColor=We(this._objRef.oldClearColor,e))}get oldClearColor(){return this._objRef?.oldClearColor}set oldClearAlpha(e){this._objRef&&(this._objRef.oldClearAlpha=e)}get oldClearAlpha(){return this._objRef?.oldClearAlpha}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set tempPulseColor1(e){this._objRef&&(this._objRef.tempPulseColor1=We(this._objRef.tempPulseColor1,e))}get tempPulseColor1(){return this._objRef?.tempPulseColor1}set tempPulseColor2(e){this._objRef&&(this._objRef.tempPulseColor2=We(this._objRef.tempPulseColor2,e))}get tempPulseColor2(){return this._objRef?.tempPulseColor2}set textureMatrix(e){this._objRef&&(this._objRef.textureMatrix=We(this._objRef.textureMatrix,e))}get textureMatrix(){return this._objRef?.textureMatrix}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-outlinePass"]],inputs:{renderScene:"renderScene",renderCamera:"renderCamera",selectedObjects:"selectedObjects",visibleEdgeColor:"visibleEdgeColor",hiddenEdgeColor:"hiddenEdgeColor",edgeGlow:"edgeGlow",usePatternTexture:"usePatternTexture",edgeThickness:"edgeThickness",edgeStrength:"edgeStrength",downSampleRatio:"downSampleRatio",pulsePeriod:"pulsePeriod",resolution:"resolution",patternTexture:"patternTexture",maskBufferMaterial:"maskBufferMaterial",renderTargetMaskBuffer:"renderTargetMaskBuffer",depthMaterial:"depthMaterial",prepareMaskMaterial:"prepareMaskMaterial",renderTargetDepthBuffer:"renderTargetDepthBuffer",renderTargetMaskDownSampleBuffer:"renderTargetMaskDownSampleBuffer",renderTargetBlurBuffer1:"renderTargetBlurBuffer1",renderTargetBlurBuffer2:"renderTargetBlurBuffer2",edgeDetectionMaterial:"edgeDetectionMaterial",renderTargetEdgeBuffer1:"renderTargetEdgeBuffer1",renderTargetEdgeBuffer2:"renderTargetEdgeBuffer2",separableBlurMaterial1:"separableBlurMaterial1",separableBlurMaterial2:"separableBlurMaterial2",overlayMaterial:"overlayMaterial",copyUniforms:"copyUniforms",materialCopy:"materialCopy",oldClearColor:"oldClearColor",oldClearAlpha:"oldClearAlpha",fsQuad:"fsQuad",tempPulseColor1:"tempPulseColor1",tempPulseColor2:"tempPulseColor2",textureMatrix:"textureMatrix"},features:[Ee([{provide:Ys,useExisting:Le(()=>i)}]),ge],ngContentSelectors:iye,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const rye=["*"];let sye=(()=>{class i extends Ul{getType(){return ei}get isShaderMaterial(){return this._objRef?.isShaderMaterial}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set defines(e){this._objRef&&(this._objRef.defines=e)}get defines(){return this._objRef?.defines}set uniforms(e){this._objRef&&(this._objRef.uniforms=e)}get uniforms(){return this._objRef?.uniforms}set uniformsGroups(e){this._objRef&&(this._objRef.uniformsGroups=e)}get uniformsGroups(){return this._objRef?.uniformsGroups}set vertexShader(e){this._objRef&&(this._objRef.vertexShader=e)}get vertexShader(){return this._objRef?.vertexShader}set fragmentShader(e){this._objRef&&(this._objRef.fragmentShader=e)}get fragmentShader(){return this._objRef?.fragmentShader}set linewidth(e){this._objRef&&(this._objRef.linewidth=e)}get linewidth(){return this._objRef?.linewidth}set wireframe(e){this._objRef&&(this._objRef.wireframe=e)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(e){this._objRef&&(this._objRef.wireframeLinewidth=e)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}set lights(e){this._objRef&&(this._objRef.lights=e)}get lights(){return this._objRef?.lights}set clipping(e){this._objRef&&(this._objRef.clipping=e)}get clipping(){return this._objRef?.clipping}set extensions(e){this._objRef&&(this._objRef.extensions=e)}get extensions(){return this._objRef?.extensions}set defaultAttributeValues(e){this._objRef&&(this._objRef.defaultAttributeValues=e)}get defaultAttributeValues(){return this._objRef?.defaultAttributeValues}set index0AttributeName(e){this._objRef&&(this._objRef.index0AttributeName=e)}get index0AttributeName(){return this._objRef?.index0AttributeName}set uniformsNeedUpdate(e){this._objRef&&(this._objRef.uniformsNeedUpdate=e)}get uniformsNeedUpdate(){return this._objRef?.uniformsNeedUpdate}set glslVersion(e){this._objRef&&(this._objRef.glslVersion=e)}get glslVersion(){return this._objRef?.glslVersion}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-shaderMaterial"]],inputs:{type:"type",defines:"defines",uniforms:"uniforms",uniformsGroups:"uniformsGroups",vertexShader:"vertexShader",fragmentShader:"fragmentShader",linewidth:"linewidth",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",fog:"fog",lights:"lights",clipping:"clipping",extensions:"extensions",defaultAttributeValues:"defaultAttributeValues",index0AttributeName:"index0AttributeName",uniformsNeedUpdate:"uniformsNeedUpdate",glslVersion:"glslVersion"},features:[Ee([{provide:Ul,useExisting:Le(()=>i)}]),ge],ngContentSelectors:rye,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();class oye extends qs{constructor(t,e,n=null,r=null,s=null){super(),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Te}render(t,e,n){const r=t.autoClear;let s,o;t.autoClear=!1,null!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),null!==this.clearColor&&(t.getClearColor(this._oldClearColor),t.setClearColor(this.clearColor)),null!==this.clearAlpha&&(s=t.getClearAlpha(),t.setClearAlpha(this.clearAlpha)),1==this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),!0===this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),null!==this.clearColor&&t.setClearColor(this._oldClearColor),null!==this.clearAlpha&&t.setClearAlpha(s),null!==this.overrideMaterial&&(this.scene.overrideMaterial=o),t.autoClear=r}}const aye=["*"];let lye=(()=>{class i extends qa{getType(){return oye}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set overrideMaterial(e){this._objRef&&(this._objRef.overrideMaterial=e)}get overrideMaterial(){return this._objRef?.overrideMaterial}set clearColor(e){this._objRef&&(this._objRef.clearColor=We(this._objRef.clearColor,e))}get clearColor(){return this._objRef?.clearColor}set clearAlpha(e){this._objRef&&(this._objRef.clearAlpha=e)}get clearAlpha(){return this._objRef?.clearAlpha}set clearDepth(e){this._objRef&&(this._objRef.clearDepth=e)}get clearDepth(){return this._objRef?.clearDepth}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-renderPassGen"]],inputs:{scene:"scene",camera:"camera",overrideMaterial:"overrideMaterial",clearColor:"clearColor",clearAlpha:"clearAlpha",clearDepth:"clearDepth"},features:[Ee([{provide:Ys,useExisting:Le(()=>i)}]),ge],ngContentSelectors:aye,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const z0={name:"SAOShader",defines:{NUM_SAMPLES:7,NUM_RINGS:4,DIFFUSE_TEXTURE:0,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new $(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new je},cameraInverseProjectionMatrix:{value:new je},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\t\t#include <common>\n\n\t\tvarying vec2 vUv;\n\n\t\t#if DIFFUSE_TEXTURE == 1\n\t\tuniform sampler2D tDiffuse;\n\t\t#endif\n\n\t\tuniform highp sampler2D tDepth;\n\t\tuniform highp sampler2D tNormal;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform mat4 cameraProjectionMatrix;\n\t\tuniform mat4 cameraInverseProjectionMatrix;\n\n\t\tuniform float scale;\n\t\tuniform float intensity;\n\t\tuniform float bias;\n\t\tuniform float kernelRadius;\n\t\tuniform float minResolution;\n\t\tuniform vec2 size;\n\t\tuniform float randomSeed;\n\n\t\t// RGBA depth\n\n\t\t#include <packing>\n\n\t\tvec4 getDefaultColor( const in vec2 screenPosition ) {\n\t\t\t#if DIFFUSE_TEXTURE == 1\n\t\t\treturn texture2D( tDiffuse, vUv );\n\t\t\t#else\n\t\t\treturn vec4( 1.0 );\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#else\n\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#endif\n\t\t}\n\n\t\tvec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\n\t\t\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\n\t\t\tclipPosition *= clipW; // unprojection.\n\n\t\t\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\n\t\t}\n\n\t\tvec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {\n\t\t\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\n\t\t}\n\n\t\tfloat scaleDividedByCameraFar;\n\t\tfloat minResolutionMultipliedByCameraFar;\n\n\t\tfloat getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {\n\t\t\tvec3 viewDelta = sampleViewPosition - centerViewPosition;\n\t\t\tfloat viewDistance = length( viewDelta );\n\t\t\tfloat scaledScreenDistance = scaleDividedByCameraFar * viewDistance;\n\n\t\t\treturn max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );\n\t\t}\n\n\t\t// moving costly divides into consts\n\t\tconst float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );\n\t\tconst float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );\n\n\t\tfloat getAmbientOcclusion( const in vec3 centerViewPosition ) {\n\t\t\t// precompute some variables require in getOcclusion.\n\t\t\tscaleDividedByCameraFar = scale / cameraFar;\n\t\t\tminResolutionMultipliedByCameraFar = minResolution * cameraFar;\n\t\t\tvec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );\n\n\t\t\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\n\t\t\tfloat angle = rand( vUv + randomSeed ) * PI2;\n\t\t\tvec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;\n\t\t\tvec2 radiusStep = radius;\n\n\t\t\tfloat occlusionSum = 0.0;\n\t\t\tfloat weightSum = 0.0;\n\n\t\t\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {\n\t\t\t\tvec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;\n\t\t\t\tradius += radiusStep;\n\t\t\t\tangle += ANGLE_STEP;\n\n\t\t\t\tfloat sampleDepth = getDepth( sampleUv );\n\t\t\t\tif( sampleDepth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfloat sampleViewZ = getViewZ( sampleDepth );\n\t\t\t\tvec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );\n\t\t\t\tocclusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );\n\t\t\t\tweightSum += 1.0;\n\t\t\t}\n\n\t\t\tif( weightSum == 0.0 ) discard;\n\n\t\t\treturn occlusionSum * ( intensity / weightSum );\n\t\t}\n\n\t\tvoid main() {\n\t\t\tfloat centerDepth = getDepth( vUv );\n\t\t\tif( centerDepth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\tdiscard;\n\t\t\t}\n\n\t\t\tfloat centerViewZ = getViewZ( centerDepth );\n\t\t\tvec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );\n\n\t\t\tfloat ambientOcclusion = getAmbientOcclusion( viewPosition );\n\n\t\t\tgl_FragColor = getDefaultColor( vUv );\n\t\t\tgl_FragColor.xyz *=  1.0 - ambientOcclusion;\n\t\t}"},Ql={name:"DepthLimitedBlurShader",defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new $(512,512)},sampleUvOffsets:{value:[new $(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1e3},depthCutoff:{value:10}},vertexShader:"\n\n\t\t#include <common>\n\n\t\tuniform vec2 size;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec2 vInvSize;\n\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tvInvSize = 1.0 / size;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\t\t#include <packing>\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tDepth;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform float depthCutoff;\n\n\t\tuniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];\n\t\tuniform float sampleWeights[ KERNEL_RADIUS + 1 ];\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec2 vInvSize;\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\t\t\t#if DEPTH_PACKING == 1\n\t\t\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\n\t\t\t#else\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#else\n\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#endif\n\t\t}\n\n\t\tvoid main() {\n\t\t\tfloat depth = getDepth( vUv );\n\t\t\tif( depth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\tdiscard;\n\t\t\t}\n\n\t\t\tfloat centerViewZ = -getViewZ( depth );\n\t\t\tbool rBreak = false, lBreak = false;\n\n\t\t\tfloat weightSum = sampleWeights[0];\n\t\t\tvec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;\n\n\t\t\tfor( int i = 1; i <= KERNEL_RADIUS; i ++ ) {\n\n\t\t\t\tfloat sampleWeight = sampleWeights[i];\n\t\t\t\tvec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;\n\n\t\t\t\tvec2 sampleUv = vUv + sampleUvOffset;\n\t\t\t\tfloat viewZ = -getViewZ( getDepth( sampleUv ) );\n\n\t\t\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;\n\n\t\t\t\tif( ! rBreak ) {\n\t\t\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\n\t\t\t\t\tweightSum += sampleWeight;\n\t\t\t\t}\n\n\t\t\t\tsampleUv = vUv - sampleUvOffset;\n\t\t\t\tviewZ = -getViewZ( getDepth( sampleUv ) );\n\n\t\t\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;\n\n\t\t\t\tif( ! lBreak ) {\n\t\t\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\n\t\t\t\t\tweightSum += sampleWeight;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgl_FragColor = diffuseSum / weightSum;\n\t\t}"},H0={createSampleWeights:function(i,t){const e=[];for(let n=0;n<=i;n++)e.push(cye(n,t));return e},createSampleOffsets:function(i,t){const e=[];for(let n=0;n<=i;n++)e.push(t.clone().multiplyScalar(n));return e},configure:function(i,t,e,n){i.defines.KERNEL_RADIUS=t,i.uniforms.sampleUvOffsets.value=H0.createSampleOffsets(t,n),i.uniforms.sampleWeights.value=H0.createSampleWeights(t,e),i.needsUpdate=!0}};function cye(i,t){return Math.exp(-i*i/(t*t*2))/(Math.sqrt(2*Math.PI)*t)}let tG=(()=>{class i extends qs{constructor(e,n,r=new $(256,256)){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.originalClearColor=new Te,this._oldClearColor=new Te,this.oldClearAlpha=1,this.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},this.resolution=new $(r.x,r.y),this.saoRenderTarget=new gi(this.resolution.x,this.resolution.y,{type:mn}),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone();const s=new jh;s.format=wl,s.type=xl,this.normalRenderTarget=new gi(this.resolution.x,this.resolution.y,{minFilter:ci,magFilter:ci,type:mn,depthTexture:s}),this.normalMaterial=new Hp,this.normalMaterial.blending=oi,this.saoMaterial=new ei({defines:Object.assign({},z0.defines),fragmentShader:z0.fragmentShader,vertexShader:z0.vertexShader,uniforms:Rn.clone(z0.uniforms)}),this.saoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms.tDepth.value=s,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.blending=oi,this.vBlurMaterial=new ei({uniforms:Rn.clone(Ql.uniforms),defines:Object.assign({},Ql.defines),vertexShader:Ql.vertexShader,fragmentShader:Ql.fragmentShader}),this.vBlurMaterial.defines.DEPTH_PACKING=0,this.vBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms.tDepth.value=s,this.vBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=oi,this.hBlurMaterial=new ei({uniforms:Rn.clone(Ql.uniforms),defines:Object.assign({},Ql.defines),vertexShader:Ql.vertexShader,fragmentShader:Ql.fragmentShader}),this.hBlurMaterial.defines.DEPTH_PACKING=0,this.hBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms.tDiffuse.value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms.tDepth.value=s,this.hBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=oi,this.materialCopy=new ei({uniforms:Rn.clone(Xs.uniforms),vertexShader:Xs.vertexShader,fragmentShader:Xs.fragmentShader,blending:oi}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=tp,this.materialCopy.blendSrc=Cv,this.materialCopy.blendDst=dh,this.materialCopy.blendEquation=es,this.materialCopy.blendSrcAlpha=Rv,this.materialCopy.blendDstAlpha=dh,this.materialCopy.blendEquationAlpha=es,this.fsQuad=new Yl(null)}render(e,n,r){this.renderToScreen&&(this.materialCopy.blending=oi,this.materialCopy.uniforms.tDiffuse.value=r.texture,this.materialCopy.needsUpdate=!0,this.renderPass(e,this.materialCopy,null)),e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const s=e.autoClear;e.autoClear=!1,this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;const o=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);this.vBlurMaterial.uniforms.depthCutoff.value=o,this.hBlurMaterial.uniforms.depthCutoff.value=o,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),(this.prevStdDev!==this.params.saoBlurStdDev||this.prevNumSamples!==this.params.saoBlurRadius)&&(H0.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new $(0,1)),H0.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new $(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(e,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(e,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(e,this.hBlurMaterial,this.saoRenderTarget,16777215,1));const a=this.materialCopy;this.params.output===i.OUTPUT.Normal?(this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),a.blending=this.params.output===i.OUTPUT.Default?tp:oi,this.renderPass(e,a,this.renderToScreen?null:r),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}renderPass(e,n,r,s,o){e.getClearColor(this.originalClearColor);const a=e.getClearAlpha(),l=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,null!=s&&(e.setClearColor(s),e.setClearAlpha(o||0),e.clear()),this.fsQuad.material=n,this.fsQuad.render(e),e.autoClear=l,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}renderOverride(e,n,r,s,o){e.getClearColor(this.originalClearColor);const a=e.getClearAlpha(),l=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,o=n.clearAlpha||o,null!=(s=n.clearColor||s)&&(e.setClearColor(s),e.setClearAlpha(o||0),e.clear()),this.scene.overrideMaterial=n,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=l,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}setSize(e,n){this.saoRenderTarget.setSize(e,n),this.blurIntermediateRenderTarget.setSize(e,n),this.normalRenderTarget.setSize(e,n),this.saoMaterial.uniforms.size.value.set(e,n),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(e,n),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(e,n),this.hBlurMaterial.needsUpdate=!0}dispose(){this.saoRenderTarget.dispose(),this.blurIntermediateRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.normalMaterial.dispose(),this.saoMaterial.dispose(),this.vBlurMaterial.dispose(),this.hBlurMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}}return i.OUTPUT={Default:0,SAO:1,Normal:2},i})();const dye=["*"];class _g extends qa{getType(){return tG}set scene(t){this._objRef&&(this._objRef.scene=t)}get scene(){return this._objRef?.scene}set camera(t){this._objRef&&(this._objRef.camera=t)}get camera(){return this._objRef?.camera}set originalClearColor(t){this._objRef&&(this._objRef.originalClearColor=We(this._objRef.originalClearColor,t))}get originalClearColor(){return this._objRef?.originalClearColor}set oldClearColor(t){this._objRef&&(this._objRef.oldClearColor=We(this._objRef.oldClearColor,t))}get oldClearColor(){return this._objRef?.oldClearColor}set oldClearAlpha(t){this._objRef&&(this._objRef.oldClearAlpha=t)}get oldClearAlpha(){return this._objRef?.oldClearAlpha}set resolution(t){this._objRef&&(this._objRef.resolution=We(this._objRef.resolution,t))}get resolution(){return this._objRef?.resolution}set saoRenderTarget(t){this._objRef&&(this._objRef.saoRenderTarget=t)}get saoRenderTarget(){return this._objRef?.saoRenderTarget}set blurIntermediateRenderTarget(t){this._objRef&&(this._objRef.blurIntermediateRenderTarget=t)}get blurIntermediateRenderTarget(){return this._objRef?.blurIntermediateRenderTarget}set normalRenderTarget(t){this._objRef&&(this._objRef.normalRenderTarget=t)}get normalRenderTarget(){return this._objRef?.normalRenderTarget}set normalMaterial(t){this._objRef&&(this._objRef.normalMaterial=t)}get normalMaterial(){return this._objRef?.normalMaterial}set saoMaterial(t){this._objRef&&(this._objRef.saoMaterial=t)}get saoMaterial(){return this._objRef?.saoMaterial}set vBlurMaterial(t){this._objRef&&(this._objRef.vBlurMaterial=t)}get vBlurMaterial(){return this._objRef?.vBlurMaterial}set hBlurMaterial(t){this._objRef&&(this._objRef.hBlurMaterial=t)}get hBlurMaterial(){return this._objRef?.hBlurMaterial}set materialCopy(t){this._objRef&&(this._objRef.materialCopy=t)}get materialCopy(){return this._objRef?.materialCopy}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}set params(t){this._objRef&&(this._objRef.params=t)}get params(){return this._objRef?.params}static#e=this.OUTPUT=tG.OUTPUT;static#t=this.\u0275fac=(()=>{let t;return function(n){return(t||(t=He(_g)))(n||_g)}})();static#i=this.\u0275cmp=pe({type:_g,selectors:[["th-sAOPass"]],inputs:{scene:"scene",camera:"camera",originalClearColor:"originalClearColor",oldClearColor:"oldClearColor",oldClearAlpha:"oldClearAlpha",resolution:"resolution",saoRenderTarget:"saoRenderTarget",blurIntermediateRenderTarget:"blurIntermediateRenderTarget",normalRenderTarget:"normalRenderTarget",normalMaterial:"normalMaterial",saoMaterial:"saoMaterial",vBlurMaterial:"vBlurMaterial",hBlurMaterial:"hBlurMaterial",materialCopy:"materialCopy",fsQuad:"fsQuad",params:"params"},features:[Ee([{provide:Ys,useExisting:Le(()=>_g)}]),ge],ngContentSelectors:dye,decls:1,vars:0,template:function(e,n){1&e&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}class uye{constructor(t=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let e=0;e<256;e++)this.p[e]=Math.floor(256*t.random());this.perm=[];for(let e=0;e<512;e++)this.perm[e]=this.p[255&e];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(t,e,n){return t[0]*e+t[1]*n}dot3(t,e,n,r){return t[0]*e+t[1]*n+t[2]*r}dot4(t,e,n,r,s){return t[0]*e+t[1]*n+t[2]*r+t[3]*s}noise(t,e){let n,r,s;const a=(t+e)*(.5*(Math.sqrt(3)-1)),l=Math.floor(t+a),c=Math.floor(e+a),d=(3-Math.sqrt(3))/6,u=(l+c)*d,m=t-(l-u),_=e-(c-u);let p,g;m>_?(p=1,g=0):(p=0,g=1);const b=m-p+d,v=_-g+d,y=m-1+2*d,T=_-1+2*d,w=255&l,M=255&c,S=this.perm[w+p+this.perm[M+g]]%12,x=this.perm[w+1+this.perm[M+1]]%12;let k=.5-m*m-_*_;k<0?n=0:(k*=k,n=k*k*this.dot(this.grad3[this.perm[w+this.perm[M]]%12],m,_));let U=.5-b*b-v*v;U<0?r=0:(U*=U,r=U*U*this.dot(this.grad3[S],b,v));let L=.5-y*y-T*T;return L<0?s=0:(L*=L,s=L*L*this.dot(this.grad3[x],y,T)),70*(n+r+s)}noise3d(t,e,n){let r,s,o,a;const c=.3333333333333333*(t+e+n),d=Math.floor(t+c),u=Math.floor(e+c),h=Math.floor(n+c),f=1/6,m=(d+u+h)*f,b=t-(d-m),v=e-(u-m),y=n-(h-m);let T,w,M,D,S,x;b>=v?v>=y?(T=1,w=0,M=0,D=1,S=1,x=0):b>=y?(T=1,w=0,M=0,D=1,S=0,x=1):(T=0,w=0,M=1,D=1,S=0,x=1):v<y?(T=0,w=0,M=1,D=0,S=1,x=1):b<y?(T=0,w=1,M=0,D=0,S=1,x=1):(T=0,w=1,M=0,D=1,S=1,x=0);const k=b-T+f,U=v-w+f,L=y-M+f,H=b-D+2*f,Y=v-S+2*f,V=y-x+2*f,q=b-1+.5,z=v-1+.5,X=y-1+.5,se=255&d,Me=255&u,Ve=255&h,W=this.perm[se+T+this.perm[Me+w+this.perm[Ve+M]]]%12,be=this.perm[se+D+this.perm[Me+S+this.perm[Ve+x]]]%12,Ie=this.perm[se+1+this.perm[Me+1+this.perm[Ve+1]]]%12;let N=.6-b*b-v*v-y*y;N<0?r=0:(N*=N,r=N*N*this.dot3(this.grad3[this.perm[se+this.perm[Me+this.perm[Ve]]]%12],b,v,y));let me=.6-k*k-U*U-L*L;me<0?s=0:(me*=me,s=me*me*this.dot3(this.grad3[W],k,U,L));let Ae=.6-H*H-Y*Y-V*V;Ae<0?o=0:(Ae*=Ae,o=Ae*Ae*this.dot3(this.grad3[be],H,Y,V));let j=.6-q*q-z*z-X*X;return j<0?a=0:(j*=j,a=j*j*this.dot3(this.grad3[Ie],q,z,X)),32*(r+s+o+a)}noise4d(t,e,n,r){const s=this.grad4,o=this.simplex,a=this.perm,l=(Math.sqrt(5)-1)/4,c=(5-Math.sqrt(5))/20;let d,u,h,f,m;const _=(t+e+n+r)*l,p=Math.floor(t+_),g=Math.floor(e+_),b=Math.floor(n+_),v=Math.floor(r+_),y=(p+g+b+v)*c,S=t-(p-y),x=e-(g-y),k=n-(b-y),U=r-(v-y),X=(S>x?32:0)+(S>k?16:0)+(x>k?8:0)+(S>U?4:0)+(x>U?2:0)+(k>U?1:0),se=o[X][0]>=3?1:0,Me=o[X][1]>=3?1:0,Ve=o[X][2]>=3?1:0,Qe=o[X][3]>=3?1:0,W=o[X][0]>=2?1:0,be=o[X][1]>=2?1:0,Ie=o[X][2]>=2?1:0,N=o[X][3]>=2?1:0,me=o[X][0]>=1?1:0,Ae=o[X][1]>=1?1:0,j=o[X][2]>=1?1:0,tt=o[X][3]>=1?1:0,re=S-se+c,Se=x-Me+c,he=k-Ve+c,ke=U-Qe+c,xe=S-W+2*c,$e=x-be+2*c,nt=k-Ie+2*c,F=U-N+2*c,E=S-me+3*c,Q=x-Ae+3*c,fe=k-j+3*c,ye=U-tt+3*c,_e=S-1+4*c,et=x-1+4*c,Ne=k-1+4*c,Oe=U-1+4*c,dt=255&p,De=255&g,Ze=255&b,gt=255&v,Xe=a[dt+se+a[De+Me+a[Ze+Ve+a[gt+Qe]]]]%32,wt=a[dt+W+a[De+be+a[Ze+Ie+a[gt+N]]]]%32,Je=a[dt+me+a[De+Ae+a[Ze+j+a[gt+tt]]]]%32,Ti=a[dt+1+a[De+1+a[Ze+1+a[gt+1]]]]%32;let At=.6-S*S-x*x-k*k-U*U;At<0?d=0:(At*=At,d=At*At*this.dot4(s[a[dt+a[De+a[Ze+a[gt]]]]%32],S,x,k,U));let R=.6-re*re-Se*Se-he*he-ke*ke;R<0?u=0:(R*=R,u=R*R*this.dot4(s[Xe],re,Se,he,ke));let G=.6-xe*xe-$e*$e-nt*nt-F*F;G<0?h=0:(G*=G,h=G*G*this.dot4(s[wt],xe,$e,nt,F));let J=.6-E*E-Q*Q-fe*fe-ye*ye;J<0?f=0:(J*=J,f=J*J*this.dot4(s[Je],E,Q,fe,ye));let we=.6-_e*_e-et*et-Ne*Ne-Oe*Oe;return we<0?m=0:(we*=we,m=we*we*this.dot4(s[Ti],_e,et,Ne,Oe)),27*(d+u+h+f+m)}}const G0={name:"SSAOShader",defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new $},cameraProjectionMatrix:{value:new je},cameraInverseProjectionMatrix:{value:new je},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\t\tuniform highp sampler2D tNormal;\n\t\tuniform highp sampler2D tDepth;\n\t\tuniform sampler2D tNoise;\n\n\t\tuniform vec3 kernel[ KERNEL_SIZE ];\n\n\t\tuniform vec2 resolution;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform mat4 cameraProjectionMatrix;\n\t\tuniform mat4 cameraInverseProjectionMatrix;\n\n\t\tuniform float kernelRadius;\n\t\tuniform float minDistance; // avoid artifacts caused by neighbour fragments with minimal depth difference\n\t\tuniform float maxDistance; // avoid the influence of fragments which are too far away\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t}\n\n\t\tfloat getLinearDepth( const in vec2 screenPosition ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tvec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\n\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\n\n\t\t\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\n\n\t\t\tclipPosition *= clipW; // unprojection.\n\n\t\t\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\n\n\t\t}\n\n\t\tvec3 getViewNormal( const in vec2 screenPosition ) {\n\n\t\t\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = getDepth( vUv );\n\n\t\t\tif ( depth == 1.0 ) {\n\n\t\t\t\tgl_FragColor = vec4( 1.0 ); // don't influence background\n\t\t\t\t\n\t\t\t} else {\n\n\t\t\t\tfloat viewZ = getViewZ( depth );\n\n\t\t\t\tvec3 viewPosition = getViewPosition( vUv, depth, viewZ );\n\t\t\t\tvec3 viewNormal = getViewNormal( vUv );\n\n\t\t\t\tvec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );\n\t\t\t\tvec3 random = vec3( texture2D( tNoise, vUv * noiseScale ).r );\n\n\t\t\t\t// compute matrix used to reorient a kernel vector\n\n\t\t\t\tvec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );\n\t\t\t\tvec3 bitangent = cross( viewNormal, tangent );\n\t\t\t\tmat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );\n\n\t\t\t\tfloat occlusion = 0.0;\n\n\t\t\t\tfor ( int i = 0; i < KERNEL_SIZE; i ++ ) {\n\n\t\t\t\t\tvec3 sampleVector = kernelMatrix * kernel[ i ]; // reorient sample vector in view space\n\t\t\t\t\tvec3 samplePoint = viewPosition + ( sampleVector * kernelRadius ); // calculate sample point\n\n\t\t\t\t\tvec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 ); // project point and calculate NDC\n\t\t\t\t\tsamplePointNDC /= samplePointNDC.w;\n\n\t\t\t\t\tvec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5; // compute uv coordinates\n\n\t\t\t\t\tfloat realDepth = getLinearDepth( samplePointUv ); // get linear depth from depth texture\n\t\t\t\t\tfloat sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar ); // compute linear depth of the sample view Z value\n\t\t\t\t\tfloat delta = sampleDepth - realDepth;\n\n\t\t\t\t\tif ( delta > minDistance && delta < maxDistance ) { // if fragment is before sample point, increase occlusion\n\n\t\t\t\t\t\tocclusion += 1.0;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tocclusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );\n\n\t\t\t\tgl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );\n\n\t\t\t}\n\n\t\t}"},W0_defines={PERSPECTIVE_CAMERA:1},W0_uniforms={tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},W0_vertexShader="varying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",W0_fragmentShader="uniform sampler2D tDepth;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tfloat getLinearDepth( const in vec2 screenPosition ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = getLinearDepth( vUv );\n\t\t\tgl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );\n\n\t\t}",$0={name:"SSAOBlurShader",uniforms:{tDiffuse:{value:null},resolution:{value:new $}},vertexShader:"varying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"uniform sampler2D tDiffuse;\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec2 texelSize = ( 1.0 / resolution );\n\t\t\tfloat result = 0.0;\n\n\t\t\tfor ( int i = - 2; i <= 2; i ++ ) {\n\n\t\t\t\tfor ( int j = - 2; j <= 2; j ++ ) {\n\n\t\t\t\t\tvec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;\n\t\t\t\t\tresult += texture2D( tDiffuse, vUv + offset ).r;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );\n\n\t\t}"};let iG=(()=>{class i extends qs{constructor(e,n,r,s,o=32){super(),this.width=void 0!==r?r:512,this.height=void 0!==s?s:512,this.clear=!0,this.camera=n,this.scene=e,this.kernelRadius=8,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(o),this.generateRandomKernelRotations();const a=new jh;a.format=wl,a.type=xl,this.normalRenderTarget=new gi(this.width,this.height,{minFilter:ci,magFilter:ci,type:mn,depthTexture:a}),this.ssaoRenderTarget=new gi(this.width,this.height,{type:mn}),this.blurRenderTarget=this.ssaoRenderTarget.clone(),this.ssaoMaterial=new ei({defines:Object.assign({},G0.defines),uniforms:Rn.clone(G0.uniforms),vertexShader:G0.vertexShader,fragmentShader:G0.fragmentShader,blending:oi}),this.ssaoMaterial.defines.KERNEL_SIZE=o,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new Hp,this.normalMaterial.blending=oi,this.blurMaterial=new ei({defines:Object.assign({},$0.defines),uniforms:Rn.clone($0.uniforms),vertexShader:$0.vertexShader,fragmentShader:$0.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new ei({defines:Object.assign({},W0_defines),uniforms:Rn.clone(W0_uniforms),vertexShader:W0_vertexShader,fragmentShader:W0_fragmentShader,blending:oi}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new ei({uniforms:Rn.clone(Xs.uniforms),vertexShader:Xs.vertexShader,fragmentShader:Xs.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:Cv,blendDst:dh,blendEquation:es,blendSrcAlpha:Rv,blendDstAlpha:dh,blendEquationAlpha:es}),this.fsQuad=new Yl(null),this.originalClearColor=new Te}dispose(){this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(e,n,r){switch(this.overrideVisibility(),this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(e,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(e,this.blurMaterial,this.blurRenderTarget),this.output){case i.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=oi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:n);break;case i.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=oi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:n);break;case i.OUTPUT.Depth:this.renderPass(e,this.depthRenderMaterial,this.renderToScreen?null:n);break;case i.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=oi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:n);break;case i.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=r.texture,this.copyMaterial.blending=oi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:n),this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=tp,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:n);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}renderPass(e,n,r,s,o){e.getClearColor(this.originalClearColor);const a=e.getClearAlpha(),l=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,null!=s&&(e.setClearColor(s),e.setClearAlpha(o||0),e.clear()),this.fsQuad.material=n,this.fsQuad.render(e),e.autoClear=l,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}renderOverride(e,n,r,s,o){e.getClearColor(this.originalClearColor);const a=e.getClearAlpha(),l=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,o=n.clearAlpha||o,null!=(s=n.clearColor||s)&&(e.setClearColor(s),e.setClearAlpha(o||0),e.clear()),this.scene.overrideMaterial=n,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=l,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}setSize(e,n){this.width=e,this.height=n,this.ssaoRenderTarget.setSize(e,n),this.normalRenderTarget.setSize(e,n),this.blurRenderTarget.setSize(e,n),this.ssaoMaterial.uniforms.resolution.value.set(e,n),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(e,n)}generateSampleKernel(e){const n=this.kernel;for(let r=0;r<e;r++){const s=new C;s.x=2*Math.random()-1,s.y=2*Math.random()-1,s.z=Math.random(),s.normalize();let o=r/e;o=st.lerp(.1,1,o*o),s.multiplyScalar(o),n.push(s)}}generateRandomKernelRotations(){const r=new uye,o=new Float32Array(16);for(let a=0;a<16;a++){const l=2*Math.random()-1,c=2*Math.random()-1;o[a]=r.noise3d(l,c,0)}this.noiseTexture=new Jo(o,4,4,op,ts),this.noiseTexture.wrapS=Ko,this.noiseTexture.wrapT=Ko,this.noiseTexture.needsUpdate=!0}overrideVisibility(){const n=this._visibilityCache;this.scene.traverse(function(r){n.set(r,r.visible),(r.isPoints||r.isLine)&&(r.visible=!1)})}restoreVisibility(){const n=this._visibilityCache;this.scene.traverse(function(r){const s=n.get(r);r.visible=s}),n.clear()}}return i.OUTPUT={Default:0,SSAO:1,Blur:2,Depth:3,Normal:4},i})();const hye=["*"];class bg extends qa{getType(){return iG}set scene(t){this._objRef&&(this._objRef.scene=t)}get scene(){return this._objRef?.scene}set camera(t){this._objRef&&(this._objRef.camera=t)}get camera(){return this._objRef?.camera}set width(t){this._objRef&&(this._objRef.width=t)}get width(){return this._objRef?.width}set height(t){this._objRef&&(this._objRef.height=t)}get height(){return this._objRef?.height}set clear(t){this._objRef&&(this._objRef.clear=t)}get clear(){return this._objRef?.clear}set kernelRadius(t){this._objRef&&(this._objRef.kernelRadius=t)}get kernelRadius(){return this._objRef?.kernelRadius}set kernel(t){this._objRef&&(this._objRef.kernel=t)}get kernel(){return this._objRef?.kernel}set noiseTexture(t){this._objRef&&(this._objRef.noiseTexture=t)}get noiseTexture(){return this._objRef?.noiseTexture}set output(t){this._objRef&&(this._objRef.output=t)}get output(){return this._objRef?.output}set minDistance(t){this._objRef&&(this._objRef.minDistance=t)}get minDistance(){return this._objRef?.minDistance}set maxDistance(t){this._objRef&&(this._objRef.maxDistance=t)}get maxDistance(){return this._objRef?.maxDistance}set normalRenderTarget(t){this._objRef&&(this._objRef.normalRenderTarget=t)}get normalRenderTarget(){return this._objRef?.normalRenderTarget}set ssaoRenderTarget(t){this._objRef&&(this._objRef.ssaoRenderTarget=t)}get ssaoRenderTarget(){return this._objRef?.ssaoRenderTarget}set blurRenderTarget(t){this._objRef&&(this._objRef.blurRenderTarget=t)}get blurRenderTarget(){return this._objRef?.blurRenderTarget}set ssaoMaterial(t){this._objRef&&(this._objRef.ssaoMaterial=t)}get ssaoMaterial(){return this._objRef?.ssaoMaterial}set normalMaterial(t){this._objRef&&(this._objRef.normalMaterial=t)}get normalMaterial(){return this._objRef?.normalMaterial}set blurMaterial(t){this._objRef&&(this._objRef.blurMaterial=t)}get blurMaterial(){return this._objRef?.blurMaterial}set depthRenderMaterial(t){this._objRef&&(this._objRef.depthRenderMaterial=t)}get depthRenderMaterial(){return this._objRef?.depthRenderMaterial}set copyMaterial(t){this._objRef&&(this._objRef.copyMaterial=t)}get copyMaterial(){return this._objRef?.copyMaterial}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}set originalClearColor(t){this._objRef&&(this._objRef.originalClearColor=We(this._objRef.originalClearColor,t))}get originalClearColor(){return this._objRef?.originalClearColor}static#e=this.OUTPUT=iG.OUTPUT;static#t=this.\u0275fac=(()=>{let t;return function(n){return(t||(t=He(bg)))(n||bg)}})();static#i=this.\u0275cmp=pe({type:bg,selectors:[["th-sSAOPass"]],inputs:{scene:"scene",camera:"camera",width:"width",height:"height",clear:"clear",kernelRadius:"kernelRadius",kernel:"kernel",noiseTexture:"noiseTexture",output:"output",minDistance:"minDistance",maxDistance:"maxDistance",normalRenderTarget:"normalRenderTarget",ssaoRenderTarget:"ssaoRenderTarget",blurRenderTarget:"blurRenderTarget",ssaoMaterial:"ssaoMaterial",normalMaterial:"normalMaterial",blurMaterial:"blurMaterial",depthRenderMaterial:"depthRenderMaterial",copyMaterial:"copyMaterial",fsQuad:"fsQuad",originalClearColor:"originalClearColor"},features:[Ee([{provide:Ys,useExisting:Le(()=>bg)}]),ge],ngContentSelectors:hye,decls:1,vars:0,template:function(e,n){1&e&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}const sa={name:"SSRShader",defines:{MAX_STEP:0,PERSPECTIVE_CAMERA:!0,DISTANCE_ATTENUATION:!0,FRESNEL:!0,INFINITE_THICK:!1,SELECTIVE:!1},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tMetalness:{value:null},tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new $},cameraProjectionMatrix:{value:new je},cameraInverseProjectionMatrix:{value:new je},opacity:{value:.5},maxDistance:{value:180},cameraRange:{value:0},thickness:{value:.018}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}\n\n\t",fragmentShader:'\n\t\t// precision highp float;\n\t\tprecision highp sampler2D;\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D tDepth;\n\t\tuniform sampler2D tNormal;\n\t\tuniform sampler2D tMetalness;\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float cameraRange;\n\t\tuniform vec2 resolution;\n\t\tuniform float opacity;\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform float maxDistance;\n\t\tuniform float thickness;\n\t\tuniform mat4 cameraProjectionMatrix;\n\t\tuniform mat4 cameraInverseProjectionMatrix;\n\t\t#include <packing>\n\t\tfloat pointToLineDistance(vec3 x0, vec3 x1, vec3 x2) {\n\t\t\t//x0: point, x1: linePointA, x2: linePointB\n\t\t\t//https://mathworld.wolfram.com/Point-LineDistance3-Dimensional.html\n\t\t\treturn length(cross(x0-x1,x0-x2))/length(x2-x1);\n\t\t}\n\t\tfloat pointPlaneDistance(vec3 point,vec3 planePoint,vec3 planeNormal){\n\t\t\t// https://mathworld.wolfram.com/Point-PlaneDistance.html\n\t\t\t//// https://en.wikipedia.org/wiki/Plane_(geometry)\n\t\t\t//// http://paulbourke.net/geometry/pointlineplane/\n\t\t\tfloat a=planeNormal.x,b=planeNormal.y,c=planeNormal.z;\n\t\t\tfloat x0=point.x,y0=point.y,z0=point.z;\n\t\t\tfloat x=planePoint.x,y=planePoint.y,z=planePoint.z;\n\t\t\tfloat d=-(a*x+b*y+c*z);\n\t\t\tfloat distance=(a*x0+b*y0+c*z0+d)/sqrt(a*a+b*b+c*c);\n\t\t\treturn distance;\n\t\t}\n\t\tfloat getDepth( const in vec2 uv ) {\n\t\t\treturn texture2D( tDepth, uv ).x;\n\t\t}\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#ifdef PERSPECTIVE_CAMERA\n\t\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#else\n\t\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#endif\n\t\t}\n\t\tvec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {\n\t\t\tvec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc\n\t\t\tclipPosition *= clipW; //clip\n\t\t\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;//view\n\t\t}\n\t\tvec3 getViewNormal( const in vec2 uv ) {\n\t\t\treturn unpackRGBToNormal( texture2D( tNormal, uv ).xyz );\n\t\t}\n\t\tvec2 viewPositionToXY(vec3 viewPosition){\n\t\t\tvec2 xy;\n\t\t\tvec4 clip=cameraProjectionMatrix*vec4(viewPosition,1);\n\t\t\txy=clip.xy;//clip\n\t\t\tfloat clipW=clip.w;\n\t\t\txy/=clipW;//NDC\n\t\t\txy=(xy+1.)/2.;//uv\n\t\t\txy*=resolution;//screen\n\t\t\treturn xy;\n\t\t}\n\t\tvoid main(){\n\t\t\t#ifdef SELECTIVE\n\t\t\t\tfloat metalness=texture2D(tMetalness,vUv).r;\n\t\t\t\tif(metalness==0.) return;\n\t\t\t#endif\n\n\t\t\tfloat depth = getDepth( vUv );\n\t\t\tfloat viewZ = getViewZ( depth );\n\t\t\tif(-viewZ>=cameraFar) return;\n\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ+cameraProjectionMatrix[3][3];\n\t\t\tvec3 viewPosition=getViewPosition( vUv, depth, clipW );\n\n\t\t\tvec2 d0=gl_FragCoord.xy;\n\t\t\tvec2 d1;\n\n\t\t\tvec3 viewNormal=getViewNormal( vUv );\n\n\t\t\t#ifdef PERSPECTIVE_CAMERA\n\t\t\t\tvec3 viewIncidentDir=normalize(viewPosition);\n\t\t\t\tvec3 viewReflectDir=reflect(viewIncidentDir,viewNormal);\n\t\t\t#else\n\t\t\t\tvec3 viewIncidentDir=vec3(0,0,-1);\n\t\t\t\tvec3 viewReflectDir=reflect(viewIncidentDir,viewNormal);\n\t\t\t#endif\n\n\t\t\tfloat maxReflectRayLen=maxDistance/dot(-viewIncidentDir,viewNormal);\n\t\t\t// dot(a,b)==length(a)*length(b)*cos(theta) // https://www.mathsisfun.com/algebra/vectors-dot-product.html\n\t\t\t// if(a.isNormalized&&b.isNormalized) dot(a,b)==cos(theta)\n\t\t\t// maxDistance/maxReflectRayLen=cos(theta)\n\t\t\t// maxDistance/maxReflectRayLen==dot(a,b)\n\t\t\t// maxReflectRayLen==maxDistance/dot(a,b)\n\n\t\t\tvec3 d1viewPosition=viewPosition+viewReflectDir*maxReflectRayLen;\n\t\t\t#ifdef PERSPECTIVE_CAMERA\n\t\t\t\tif(d1viewPosition.z>-cameraNear){\n\t\t\t\t\t//https://tutorial.math.lamar.edu/Classes/CalcIII/EqnsOfLines.aspx\n\t\t\t\t\tfloat t=(-cameraNear-viewPosition.z)/viewReflectDir.z;\n\t\t\t\t\td1viewPosition=viewPosition+viewReflectDir*t;\n\t\t\t\t}\n\t\t\t#endif\n\t\t\td1=viewPositionToXY(d1viewPosition);\n\n\t\t\tfloat totalLen=length(d1-d0);\n\t\t\tfloat xLen=d1.x-d0.x;\n\t\t\tfloat yLen=d1.y-d0.y;\n\t\t\tfloat totalStep=max(abs(xLen),abs(yLen));\n\t\t\tfloat xSpan=xLen/totalStep;\n\t\t\tfloat ySpan=yLen/totalStep;\n\t\t\tfor(float i=0.;i<float(MAX_STEP);i++){\n\t\t\t\tif(i>=totalStep) break;\n\t\t\t\tvec2 xy=vec2(d0.x+i*xSpan,d0.y+i*ySpan);\n\t\t\t\tif(xy.x<0.||xy.x>resolution.x||xy.y<0.||xy.y>resolution.y) break;\n\t\t\t\tfloat s=length(xy-d0)/totalLen;\n\t\t\t\tvec2 uv=xy/resolution;\n\n\t\t\t\tfloat d = getDepth(uv);\n\t\t\t\tfloat vZ = getViewZ( d );\n\t\t\t\tif(-vZ>=cameraFar) continue;\n\t\t\t\tfloat cW = cameraProjectionMatrix[2][3] * vZ+cameraProjectionMatrix[3][3];\n\t\t\t\tvec3 vP=getViewPosition( uv, d, cW );\n\n\t\t\t\t#ifdef PERSPECTIVE_CAMERA\n\t\t\t\t\t// https://comp.nus.edu.sg/~lowkl/publications/lowk_persp_interp_techrep.pdf\n\t\t\t\t\tfloat recipVPZ=1./viewPosition.z;\n\t\t\t\t\tfloat viewReflectRayZ=1./(recipVPZ+s*(1./d1viewPosition.z-recipVPZ));\n\t\t\t\t#else\n\t\t\t\t\tfloat viewReflectRayZ=viewPosition.z+s*(d1viewPosition.z-viewPosition.z);\n\t\t\t\t#endif\n\n\t\t\t\t// if(viewReflectRayZ>vZ) continue; // will cause "npm run make-screenshot webgl_postprocessing_ssr" high probability hang.\n\t\t\t\t// https://github.com/mrdoob/three.js/pull/21539#issuecomment-821061164\n\t\t\t\tif(viewReflectRayZ<=vZ){\n\n\t\t\t\t\tbool hit;\n\t\t\t\t\t#ifdef INFINITE_THICK\n\t\t\t\t\t\thit=true;\n\t\t\t\t\t#else\n\t\t\t\t\t\tfloat away=pointToLineDistance(vP,viewPosition,d1viewPosition);\n\n\t\t\t\t\t\tfloat minThickness;\n\t\t\t\t\t\tvec2 xyNeighbor=xy;\n\t\t\t\t\t\txyNeighbor.x+=1.;\n\t\t\t\t\t\tvec2 uvNeighbor=xyNeighbor/resolution;\n\t\t\t\t\t\tvec3 vPNeighbor=getViewPosition(uvNeighbor,d,cW);\n\t\t\t\t\t\tminThickness=vPNeighbor.x-vP.x;\n\t\t\t\t\t\tminThickness*=3.;\n\t\t\t\t\t\tfloat tk=max(minThickness,thickness);\n\n\t\t\t\t\t\thit=away<=tk;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tif(hit){\n\t\t\t\t\t\tvec3 vN=getViewNormal( uv );\n\t\t\t\t\t\tif(dot(viewReflectDir,vN)>=0.) continue;\n\t\t\t\t\t\tfloat distance=pointPlaneDistance(vP,viewPosition,viewNormal);\n\t\t\t\t\t\tif(distance>maxDistance) break;\n\t\t\t\t\t\tfloat op=opacity;\n\t\t\t\t\t\t#ifdef DISTANCE_ATTENUATION\n\t\t\t\t\t\t\tfloat ratio=1.-(distance/maxDistance);\n\t\t\t\t\t\t\tfloat attenuation=ratio*ratio;\n\t\t\t\t\t\t\top=opacity*attenuation;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#ifdef FRESNEL\n\t\t\t\t\t\t\tfloat fresnelCoe=(dot(viewIncidentDir,viewReflectDir)+1.)/2.;\n\t\t\t\t\t\t\top*=fresnelCoe;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tvec4 reflectColor=texture2D(tDiffuse,uv);\n\t\t\t\t\t\tgl_FragColor.xyz=reflectColor.xyz;\n\t\t\t\t\t\tgl_FragColor.a=op;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t'},X0_defines={PERSPECTIVE_CAMERA:1},X0_uniforms={tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},X0_vertexShader="\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}\n\n\t",X0_fragmentShader="\n\n\t\tuniform sampler2D tDepth;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tfloat getLinearDepth( const in vec2 uv ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, uv ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, uv ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = getLinearDepth( vUv );\n\t\t\tfloat d = 1.0 - depth;\n\t\t\t// d=(d-.999)*1000.;\n\t\t\tgl_FragColor = vec4( vec3( d ), 1.0 );\n\n\t\t}\n\n\t",Jl={name:"SSRBlurShader",uniforms:{tDiffuse:{value:null},resolution:{value:new $},opacity:{value:.5}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}\n\n\t",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec2 resolution;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\t//reverse engineering from PhotoShop blur filter, then change coefficient\n\n\t\t\tvec2 texelSize = ( 1.0 / resolution );\n\n\t\t\tvec4 c=texture2D(tDiffuse,vUv);\n\n\t\t\tvec2 offset;\n\n\t\t\toffset=(vec2(-1,0))*texelSize;\n\t\t\tvec4 cl=texture2D(tDiffuse,vUv+offset);\n\n\t\t\toffset=(vec2(1,0))*texelSize;\n\t\t\tvec4 cr=texture2D(tDiffuse,vUv+offset);\n\n\t\t\toffset=(vec2(0,-1))*texelSize;\n\t\t\tvec4 cb=texture2D(tDiffuse,vUv+offset);\n\n\t\t\toffset=(vec2(0,1))*texelSize;\n\t\t\tvec4 ct=texture2D(tDiffuse,vUv+offset);\n\n\t\t\t// float coeCenter=.5;\n\t\t\t// float coeSide=.125;\n\t\t\tfloat coeCenter=.2;\n\t\t\tfloat coeSide=.2;\n\t\t\tfloat a=c.a*coeCenter+cl.a*coeSide+cr.a*coeSide+cb.a*coeSide+ct.a*coeSide;\n\t\t\tvec3 rgb=(c.rgb*c.a*coeCenter+cl.rgb*cl.a*coeSide+cr.rgb*cr.a*coeSide+cb.rgb*cb.a*coeSide+ct.rgb*ct.a*coeSide)/a;\n\t\t\tgl_FragColor=vec4(rgb,a);\n\n\t\t}\n\t"};let nG=(()=>{class i extends qs{constructor({renderer:e,scene:n,camera:r,width:s,height:o,selects:a,bouncing:l=!1,groundReflector:c}){super(),this.width=void 0!==s?s:512,this.height=void 0!==o?o:512,this.clear=!0,this.renderer=e,this.scene=n,this.camera=r,this.groundReflector=c,this.opacity=sa.uniforms.opacity.value,this.output=0,this.maxDistance=sa.uniforms.maxDistance.value,this.thickness=sa.uniforms.thickness.value,this.tempColor=new Te,this._selects=a,this.selective=Array.isArray(this._selects),Object.defineProperty(this,"selects",{get(){return this._selects},set(u){this._selects!==u&&(this._selects=u,Array.isArray(u)?(this.selective=!0,this.ssrMaterial.defines.SELECTIVE=!0,this.ssrMaterial.needsUpdate=!0):(this.selective=!1,this.ssrMaterial.defines.SELECTIVE=!1,this.ssrMaterial.needsUpdate=!0))}}),this._bouncing=l,Object.defineProperty(this,"bouncing",{get(){return this._bouncing},set(u){this._bouncing!==u&&(this._bouncing=u,this.ssrMaterial.uniforms.tDiffuse.value=u?this.prevRenderTarget.texture:this.beautyRenderTarget.texture)}}),this.blur=!0,this._distanceAttenuation=sa.defines.DISTANCE_ATTENUATION,Object.defineProperty(this,"distanceAttenuation",{get(){return this._distanceAttenuation},set(u){this._distanceAttenuation!==u&&(this._distanceAttenuation=u,this.ssrMaterial.defines.DISTANCE_ATTENUATION=u,this.ssrMaterial.needsUpdate=!0)}}),this._fresnel=sa.defines.FRESNEL,Object.defineProperty(this,"fresnel",{get(){return this._fresnel},set(u){this._fresnel!==u&&(this._fresnel=u,this.ssrMaterial.defines.FRESNEL=u,this.ssrMaterial.needsUpdate=!0)}}),this._infiniteThick=sa.defines.INFINITE_THICK,Object.defineProperty(this,"infiniteThick",{get(){return this._infiniteThick},set(u){this._infiniteThick!==u&&(this._infiniteThick=u,this.ssrMaterial.defines.INFINITE_THICK=u,this.ssrMaterial.needsUpdate=!0)}});const d=new jh;d.type=Dv,d.minFilter=ci,d.magFilter=ci,this.beautyRenderTarget=new gi(this.width,this.height,{minFilter:ci,magFilter:ci,type:mn,depthTexture:d,depthBuffer:!0}),this.prevRenderTarget=new gi(this.width,this.height,{minFilter:ci,magFilter:ci}),this.normalRenderTarget=new gi(this.width,this.height,{minFilter:ci,magFilter:ci,type:mn}),this.metalnessRenderTarget=new gi(this.width,this.height,{minFilter:ci,magFilter:ci,type:mn}),this.ssrRenderTarget=new gi(this.width,this.height,{minFilter:ci,magFilter:ci}),this.blurRenderTarget=this.ssrRenderTarget.clone(),this.blurRenderTarget2=this.ssrRenderTarget.clone(),this.ssrMaterial=new ei({defines:Object.assign({},sa.defines,{MAX_STEP:Math.sqrt(this.width*this.width+this.height*this.height)}),uniforms:Rn.clone(sa.uniforms),vertexShader:sa.vertexShader,fragmentShader:sa.fragmentShader,blending:oi}),this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssrMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssrMaterial.defines.SELECTIVE=this.selective,this.ssrMaterial.needsUpdate=!0,this.ssrMaterial.uniforms.tMetalness.value=this.metalnessRenderTarget.texture,this.ssrMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.ssrMaterial.uniforms.cameraNear.value=this.camera.near,this.ssrMaterial.uniforms.cameraFar.value=this.camera.far,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.ssrMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new Hp,this.normalMaterial.blending=oi,this.metalnessOnMaterial=new Zn({color:"white"}),this.metalnessOffMaterial=new Zn({color:"black"}),this.blurMaterial=new ei({defines:Object.assign({},Jl.defines),uniforms:Rn.clone(Jl.uniforms),vertexShader:Jl.vertexShader,fragmentShader:Jl.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.blurMaterial2=new ei({defines:Object.assign({},Jl.defines),uniforms:Rn.clone(Jl.uniforms),vertexShader:Jl.vertexShader,fragmentShader:Jl.fragmentShader}),this.blurMaterial2.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.blurMaterial2.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new ei({defines:Object.assign({},X0_defines),uniforms:Rn.clone(X0_uniforms),vertexShader:X0_vertexShader,fragmentShader:X0_fragmentShader,blending:oi}),this.depthRenderMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new ei({uniforms:Rn.clone(Xs.uniforms),vertexShader:Xs.vertexShader,fragmentShader:Xs.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:uh,blendDst:hh,blendEquation:es,blendSrcAlpha:uh,blendDstAlpha:hh,blendEquationAlpha:es}),this.fsQuad=new Yl(null),this.originalClearColor=new Te}dispose(){this.beautyRenderTarget.dispose(),this.prevRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.metalnessRenderTarget.dispose(),this.ssrRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.blurRenderTarget2.dispose(),this.normalMaterial.dispose(),this.metalnessOnMaterial.dispose(),this.metalnessOffMaterial.dispose(),this.blurMaterial.dispose(),this.blurMaterial2.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(e,n){switch(e.setRenderTarget(this.beautyRenderTarget),e.clear(),this.groundReflector&&(this.groundReflector.visible=!1,this.groundReflector.doRender(this.renderer,this.scene,this.camera),this.groundReflector.visible=!0),e.render(this.scene,this.camera),this.groundReflector&&(this.groundReflector.visible=!1),this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,0,0),this.selective&&this.renderMetalness(e,this.metalnessOnMaterial,this.metalnessRenderTarget,0,0),this.ssrMaterial.uniforms.opacity.value=this.opacity,this.ssrMaterial.uniforms.maxDistance.value=this.maxDistance,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.renderPass(e,this.ssrMaterial,this.ssrRenderTarget),this.blur&&(this.renderPass(e,this.blurMaterial,this.blurRenderTarget),this.renderPass(e,this.blurMaterial2,this.blurRenderTarget2)),this.output){case i.OUTPUT.Default:this.bouncing?(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=oi,this.renderPass(e,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.blur?this.blurRenderTarget2.texture:this.ssrRenderTarget.texture,this.copyMaterial.blending=Zo,this.renderPass(e,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture,this.copyMaterial.blending=oi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:n)):(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=oi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:n),this.copyMaterial.uniforms.tDiffuse.value=this.blur?this.blurRenderTarget2.texture:this.ssrRenderTarget.texture,this.copyMaterial.blending=Zo,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:n));break;case i.OUTPUT.SSR:this.copyMaterial.uniforms.tDiffuse.value=this.blur?this.blurRenderTarget2.texture:this.ssrRenderTarget.texture,this.copyMaterial.blending=oi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:n),this.bouncing&&(this.copyMaterial.uniforms.tDiffuse.value=this.blur?this.blurRenderTarget2.texture:this.beautyRenderTarget.texture,this.copyMaterial.blending=oi,this.renderPass(e,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=Zo,this.renderPass(e,this.copyMaterial,this.prevRenderTarget));break;case i.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=oi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:n);break;case i.OUTPUT.Depth:this.renderPass(e,this.depthRenderMaterial,this.renderToScreen?null:n);break;case i.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=oi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:n);break;case i.OUTPUT.Metalness:this.copyMaterial.uniforms.tDiffuse.value=this.metalnessRenderTarget.texture,this.copyMaterial.blending=oi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:n);break;default:console.warn("THREE.SSRPass: Unknown output type.")}}renderPass(e,n,r,s,o){this.originalClearColor.copy(e.getClearColor(this.tempColor));const a=e.getClearAlpha(this.tempColor),l=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,null!=s&&(e.setClearColor(s),e.setClearAlpha(o||0),e.clear()),this.fsQuad.material=n,this.fsQuad.render(e),e.autoClear=l,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}renderOverride(e,n,r,s,o){this.originalClearColor.copy(e.getClearColor(this.tempColor));const a=e.getClearAlpha(this.tempColor),l=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,o=n.clearAlpha||o,null!=(s=n.clearColor||s)&&(e.setClearColor(s),e.setClearAlpha(o||0),e.clear()),this.scene.overrideMaterial=n,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=l,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}renderMetalness(e,n,r,s,o){this.originalClearColor.copy(e.getClearColor(this.tempColor));const a=e.getClearAlpha(this.tempColor),l=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,o=n.clearAlpha||o,null!=(s=n.clearColor||s)&&(e.setClearColor(s),e.setClearAlpha(o||0),e.clear()),this.scene.traverseVisible(c=>{c._SSRPassBackupMaterial=c.material,c.material=this._selects.includes(c)?this.metalnessOnMaterial:this.metalnessOffMaterial}),e.render(this.scene,this.camera),this.scene.traverseVisible(c=>{c.material=c._SSRPassBackupMaterial}),e.autoClear=l,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}setSize(e,n){this.width=e,this.height=n,this.ssrMaterial.defines.MAX_STEP=Math.sqrt(e*e+n*n),this.ssrMaterial.needsUpdate=!0,this.beautyRenderTarget.setSize(e,n),this.prevRenderTarget.setSize(e,n),this.ssrRenderTarget.setSize(e,n),this.normalRenderTarget.setSize(e,n),this.metalnessRenderTarget.setSize(e,n),this.blurRenderTarget.setSize(e,n),this.blurRenderTarget2.setSize(e,n),this.ssrMaterial.uniforms.resolution.value.set(e,n),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(e,n),this.blurMaterial2.uniforms.resolution.value.set(e,n)}}return i.OUTPUT={Default:0,SSR:1,Beauty:3,Depth:4,Normal:5,Metalness:7},i})();const fye=["*"];class vg extends qa{getType(){return nG}set width(t){this._objRef&&(this._objRef.width=t)}get width(){return this._objRef?.width}set height(t){this._objRef&&(this._objRef.height=t)}get height(){return this._objRef?.height}set clear(t){this._objRef&&(this._objRef.clear=t)}get clear(){return this._objRef?.clear}set renderer(t){this._objRef&&(this._objRef.renderer=t)}get renderer(){return this._objRef?.renderer}set scene(t){this._objRef&&(this._objRef.scene=t)}get scene(){return this._objRef?.scene}set camera(t){this._objRef&&(this._objRef.camera=t)}get camera(){return this._objRef?.camera}set groundReflector(t){this._objRef&&(this._objRef.groundReflector=t)}get groundReflector(){return this._objRef?.groundReflector}set opacity(t){this._objRef&&(this._objRef.opacity=t)}get opacity(){return this._objRef?.opacity}set output(t){this._objRef&&(this._objRef.output=t)}get output(){return this._objRef?.output}set maxDistance(t){this._objRef&&(this._objRef.maxDistance=t)}get maxDistance(){return this._objRef?.maxDistance}set thickness(t){this._objRef&&(this._objRef.thickness=t)}get thickness(){return this._objRef?.thickness}set tempColor(t){this._objRef&&(this._objRef.tempColor=We(this._objRef.tempColor,t))}get tempColor(){return this._objRef?.tempColor}set selective(t){this._objRef&&(this._objRef.selective=t)}get selective(){return this._objRef?.selective}set blur(t){this._objRef&&(this._objRef.blur=t)}get blur(){return this._objRef?.blur}set beautyRenderTarget(t){this._objRef&&(this._objRef.beautyRenderTarget=t)}get beautyRenderTarget(){return this._objRef?.beautyRenderTarget}set prevRenderTarget(t){this._objRef&&(this._objRef.prevRenderTarget=t)}get prevRenderTarget(){return this._objRef?.prevRenderTarget}set normalRenderTarget(t){this._objRef&&(this._objRef.normalRenderTarget=t)}get normalRenderTarget(){return this._objRef?.normalRenderTarget}set metalnessRenderTarget(t){this._objRef&&(this._objRef.metalnessRenderTarget=t)}get metalnessRenderTarget(){return this._objRef?.metalnessRenderTarget}set ssrRenderTarget(t){this._objRef&&(this._objRef.ssrRenderTarget=t)}get ssrRenderTarget(){return this._objRef?.ssrRenderTarget}set blurRenderTarget(t){this._objRef&&(this._objRef.blurRenderTarget=t)}get blurRenderTarget(){return this._objRef?.blurRenderTarget}set blurRenderTarget2(t){this._objRef&&(this._objRef.blurRenderTarget2=t)}get blurRenderTarget2(){return this._objRef?.blurRenderTarget2}set ssrMaterial(t){this._objRef&&(this._objRef.ssrMaterial=t)}get ssrMaterial(){return this._objRef?.ssrMaterial}set normalMaterial(t){this._objRef&&(this._objRef.normalMaterial=t)}get normalMaterial(){return this._objRef?.normalMaterial}set metalnessOnMaterial(t){this._objRef&&(this._objRef.metalnessOnMaterial=t)}get metalnessOnMaterial(){return this._objRef?.metalnessOnMaterial}set metalnessOffMaterial(t){this._objRef&&(this._objRef.metalnessOffMaterial=t)}get metalnessOffMaterial(){return this._objRef?.metalnessOffMaterial}set blurMaterial(t){this._objRef&&(this._objRef.blurMaterial=t)}get blurMaterial(){return this._objRef?.blurMaterial}set blurMaterial2(t){this._objRef&&(this._objRef.blurMaterial2=t)}get blurMaterial2(){return this._objRef?.blurMaterial2}set depthRenderMaterial(t){this._objRef&&(this._objRef.depthRenderMaterial=t)}get depthRenderMaterial(){return this._objRef?.depthRenderMaterial}set copyMaterial(t){this._objRef&&(this._objRef.copyMaterial=t)}get copyMaterial(){return this._objRef?.copyMaterial}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}set originalClearColor(t){this._objRef&&(this._objRef.originalClearColor=We(this._objRef.originalClearColor,t))}get originalClearColor(){return this._objRef?.originalClearColor}static#e=this.OUTPUT=nG.OUTPUT;set dispose(t){this._objRef&&(this._objRef.dispose=t)}get dispose(){return this._objRef?.dispose}set renderPass(t){this._objRef&&(this._objRef.renderPass=t)}get renderPass(){return this._objRef?.renderPass}set renderOverride(t){this._objRef&&(this._objRef.renderOverride=t)}get renderOverride(){return this._objRef?.renderOverride}set renderMetalness(t){this._objRef&&(this._objRef.renderMetalness=t)}get renderMetalness(){return this._objRef?.renderMetalness}static#t=this.\u0275fac=(()=>{let t;return function(n){return(t||(t=He(vg)))(n||vg)}})();static#i=this.\u0275cmp=pe({type:vg,selectors:[["th-sSRPass"]],inputs:{width:"width",height:"height",clear:"clear",renderer:"renderer",scene:"scene",camera:"camera",groundReflector:"groundReflector",opacity:"opacity",output:"output",maxDistance:"maxDistance",thickness:"thickness",tempColor:"tempColor",selective:"selective",blur:"blur",beautyRenderTarget:"beautyRenderTarget",prevRenderTarget:"prevRenderTarget",normalRenderTarget:"normalRenderTarget",metalnessRenderTarget:"metalnessRenderTarget",ssrRenderTarget:"ssrRenderTarget",blurRenderTarget:"blurRenderTarget",blurRenderTarget2:"blurRenderTarget2",ssrMaterial:"ssrMaterial",normalMaterial:"normalMaterial",metalnessOnMaterial:"metalnessOnMaterial",metalnessOffMaterial:"metalnessOffMaterial",blurMaterial:"blurMaterial",blurMaterial2:"blurMaterial2",depthRenderMaterial:"depthRenderMaterial",copyMaterial:"copyMaterial",fsQuad:"fsQuad",originalClearColor:"originalClearColor",dispose:"dispose",renderPass:"renderPass",renderOverride:"renderOverride",renderMetalness:"renderMetalness"},features:[Ee([{provide:Ys,useExisting:Le(()=>vg)}]),ge],ngContentSelectors:fye,decls:1,vars:0,template:function(e,n){1&e&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}const mye=["*"];let q0=(()=>{class i extends To{getType(){return ad}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-sphereGeometry"]],features:[Ee([{provide:To,useExisting:Le(()=>i)}]),ge],ngContentSelectors:mye,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const XA={type:"change"},qA={type:"start"},YA={type:"end"};class pye extends is{constructor(t,e){super();const n=this;this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:xs.ROTATE,MIDDLE:xs.DOLLY,RIGHT:xs.PAN},this.target=new C;const s=1e-6,o=new C;let a=1,l=-1,c=-1,d=0,u=0,h=0;const f=new C,m=new $,_=new $,p=new C,g=new $,b=new $,v=new $,y=new $,T=[],w={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){const N=n.domElement.getBoundingClientRect(),me=n.domElement.ownerDocument.documentElement;n.screen.left=N.left+window.pageXOffset-me.clientLeft,n.screen.top=N.top+window.pageYOffset-me.clientTop,n.screen.width=N.width,n.screen.height=N.height};const M=function(){const N=new $;return function(Ae,j){return N.set((Ae-n.screen.left)/n.screen.width,(j-n.screen.top)/n.screen.height),N}}(),D=function(){const N=new $;return function(Ae,j){return N.set((Ae-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-j))/n.screen.width),N}}();function S(N){!1!==n.enabled&&(0===T.length&&(n.domElement.setPointerCapture(N.pointerId),n.domElement.addEventListener("pointermove",x),n.domElement.addEventListener("pointerup",k)),function Qe(N){T.push(N)}(N),"touch"===N.pointerType?function X(N){if(1===(be(N),T.length))l=3,_.copy(D(T[0].pageX,T[0].pageY)),m.copy(_);else{l=4;const me=T[0].pageX-T[1].pageX,Ae=T[0].pageY-T[1].pageY;u=d=Math.sqrt(me*me+Ae*Ae),v.copy(M((T[0].pageX+T[1].pageX)/2,(T[0].pageY+T[1].pageY)/2)),y.copy(v)}n.dispatchEvent(qA)}(N):function Y(N){if(-1===l)switch(N.button){case n.mouseButtons.LEFT:l=0;break;case n.mouseButtons.MIDDLE:l=1;break;case n.mouseButtons.RIGHT:l=2}const me=-1!==c?c:l;0!==me||n.noRotate?1!==me||n.noZoom?2===me&&!n.noPan&&(v.copy(M(N.pageX,N.pageY)),y.copy(v)):(g.copy(M(N.pageX,N.pageY)),b.copy(g)):(_.copy(D(N.pageX,N.pageY)),m.copy(_)),n.dispatchEvent(qA)}(N))}function x(N){!1!==n.enabled&&("touch"===N.pointerType?function se(N){if(1===(be(N),T.length))m.copy(_),_.copy(D(N.pageX,N.pageY));else{const me=function Ie(N){return w[(N.pointerId===T[0].pointerId?T[1]:T[0]).pointerId]}(N),Ae=N.pageX-me.x,j=N.pageY-me.y;u=Math.sqrt(Ae*Ae+j*j),y.copy(M((N.pageX+me.x)/2,(N.pageY+me.y)/2))}}(N):function V(N){const me=-1!==c?c:l;0!==me||n.noRotate?1!==me||n.noZoom?2===me&&!n.noPan&&y.copy(M(N.pageX,N.pageY)):b.copy(M(N.pageX,N.pageY)):(m.copy(_),_.copy(D(N.pageX,N.pageY)))}(N))}function k(N){!1!==n.enabled&&("touch"===N.pointerType?function Me(N){switch(T.length){case 0:l=-1;break;case 1:l=3,_.copy(D(N.pageX,N.pageY)),m.copy(_);break;case 2:l=4;for(let me=0;me<T.length;me++)if(T[me].pointerId!==N.pointerId){const Ae=w[T[me].pointerId];_.copy(D(Ae.x,Ae.y)),m.copy(_);break}}n.dispatchEvent(YA)}(N):function q(){l=-1,n.dispatchEvent(YA)}(),W(N),0===T.length&&(n.domElement.releasePointerCapture(N.pointerId),n.domElement.removeEventListener("pointermove",x),n.domElement.removeEventListener("pointerup",k)))}function U(N){W(N)}function L(N){!1!==n.enabled&&(window.removeEventListener("keydown",L),-1===c&&(N.code!==n.keys[0]||n.noRotate?N.code!==n.keys[1]||n.noZoom?N.code===n.keys[2]&&!n.noPan&&(c=2):c=1:c=0))}function H(){!1!==n.enabled&&(c=-1,window.addEventListener("keydown",L))}function z(N){if(!1!==n.enabled&&!0!==n.noZoom){switch(N.preventDefault(),N.deltaMode){case 2:g.y-=.025*N.deltaY;break;case 1:g.y-=.01*N.deltaY;break;default:g.y-=25e-5*N.deltaY}n.dispatchEvent(qA),n.dispatchEvent(YA)}}function Ve(N){!1!==n.enabled&&N.preventDefault()}function W(N){delete w[N.pointerId];for(let me=0;me<T.length;me++)if(T[me].pointerId==N.pointerId)return void T.splice(me,1)}function be(N){let me=w[N.pointerId];void 0===me&&(me=new $,w[N.pointerId]=me),me.set(N.pageX,N.pageY)}this.rotateCamera=function(){const N=new C,me=new mi,Ae=new C,j=new C,tt=new C,re=new C;return function(){re.set(_.x-m.x,_.y-m.y,0);let he=re.length();he?(f.copy(n.object.position).sub(n.target),Ae.copy(f).normalize(),j.copy(n.object.up).normalize(),tt.crossVectors(j,Ae).normalize(),j.setLength(_.y-m.y),tt.setLength(_.x-m.x),re.copy(j.add(tt)),N.crossVectors(re,f).normalize(),he*=n.rotateSpeed,me.setFromAxisAngle(N,he),f.applyQuaternion(me),n.object.up.applyQuaternion(me),p.copy(N),h=he):!n.staticMoving&&h&&(h*=Math.sqrt(1-n.dynamicDampingFactor),f.copy(n.object.position).sub(n.target),me.setFromAxisAngle(p,h),f.applyQuaternion(me),n.object.up.applyQuaternion(me)),m.copy(_)}}(),this.zoomCamera=function(){let N;4===l?(N=d/u,d=u,n.object.isPerspectiveCamera?f.multiplyScalar(N):n.object.isOrthographicCamera?(n.object.zoom=st.clamp(n.object.zoom/N,n.minZoom,n.maxZoom),a!==n.object.zoom&&n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(N=1+(b.y-g.y)*n.zoomSpeed,1!==N&&N>0&&(n.object.isPerspectiveCamera?f.multiplyScalar(N):n.object.isOrthographicCamera?(n.object.zoom=st.clamp(n.object.zoom/N,n.minZoom,n.maxZoom),a!==n.object.zoom&&n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),n.staticMoving?g.copy(b):g.y+=(b.y-g.y)*this.dynamicDampingFactor)},this.panCamera=function(){const N=new $,me=new C,Ae=new C;return function(){if(N.copy(y).sub(v),N.lengthSq()){if(n.object.isOrthographicCamera){const re=(n.object.top-n.object.bottom)/n.object.zoom/n.domElement.clientWidth;N.x*=(n.object.right-n.object.left)/n.object.zoom/n.domElement.clientWidth,N.y*=re}N.multiplyScalar(f.length()*n.panSpeed),Ae.copy(f).cross(n.object.up).setLength(N.x),Ae.add(me.copy(n.object.up).setLength(N.y)),n.object.position.add(Ae),n.target.add(Ae),n.staticMoving?v.copy(y):v.add(N.subVectors(y,v).multiplyScalar(n.dynamicDampingFactor))}}}(),this.checkDistances=function(){(!n.noZoom||!n.noPan)&&(f.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,f.setLength(n.maxDistance)),g.copy(b)),f.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,f.setLength(n.minDistance)),g.copy(b)))},this.update=function(){f.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,f),n.object.isPerspectiveCamera?(n.checkDistances(),n.object.lookAt(n.target),o.distanceToSquared(n.object.position)>s&&(n.dispatchEvent(XA),o.copy(n.object.position))):n.object.isOrthographicCamera?(n.object.lookAt(n.target),(o.distanceToSquared(n.object.position)>s||a!==n.object.zoom)&&(n.dispatchEvent(XA),o.copy(n.object.position),a=n.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){l=-1,c=-1,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),f.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(XA),o.copy(n.object.position),a=n.object.zoom},this.dispose=function(){n.domElement.removeEventListener("contextmenu",Ve),n.domElement.removeEventListener("pointerdown",S),n.domElement.removeEventListener("pointercancel",U),n.domElement.removeEventListener("wheel",z),n.domElement.removeEventListener("pointermove",x),n.domElement.removeEventListener("pointerup",k),window.removeEventListener("keydown",L),window.removeEventListener("keyup",H)},this.domElement.addEventListener("contextmenu",Ve),this.domElement.addEventListener("pointerdown",S),this.domElement.addEventListener("pointercancel",U),this.domElement.addEventListener("wheel",z,{passive:!1}),window.addEventListener("keydown",L),window.addEventListener("keyup",H),this.handleResize(),this.update()}}const gye=["*"];let rG=(()=>{class i extends Rr{getType(){return pye}set object(e){this._objRef&&(this._objRef.object=e)}get object(){return this._objRef?.object}set domElement(e){this._objRef&&(this._objRef.domElement=e)}get domElement(){return this._objRef?.domElement}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set screen(e){this._objRef&&(this._objRef.screen=e)}get screen(){return this._objRef?.screen}set rotateSpeed(e){this._objRef&&(this._objRef.rotateSpeed=e)}get rotateSpeed(){return this._objRef?.rotateSpeed}set zoomSpeed(e){this._objRef&&(this._objRef.zoomSpeed=e)}get zoomSpeed(){return this._objRef?.zoomSpeed}set panSpeed(e){this._objRef&&(this._objRef.panSpeed=e)}get panSpeed(){return this._objRef?.panSpeed}set noRotate(e){this._objRef&&(this._objRef.noRotate=e)}get noRotate(){return this._objRef?.noRotate}set noZoom(e){this._objRef&&(this._objRef.noZoom=e)}get noZoom(){return this._objRef?.noZoom}set noPan(e){this._objRef&&(this._objRef.noPan=e)}get noPan(){return this._objRef?.noPan}set noRoll(e){this._objRef&&(this._objRef.noRoll=e)}get noRoll(){return this._objRef?.noRoll}set staticMoving(e){this._objRef&&(this._objRef.staticMoving=e)}get staticMoving(){return this._objRef?.staticMoving}set dynamicDampingFactor(e){this._objRef&&(this._objRef.dynamicDampingFactor=e)}get dynamicDampingFactor(){return this._objRef?.dynamicDampingFactor}set minDistance(e){this._objRef&&(this._objRef.minDistance=e)}get minDistance(){return this._objRef?.minDistance}set maxDistance(e){this._objRef&&(this._objRef.maxDistance=e)}get maxDistance(){return this._objRef?.maxDistance}set minZoom(e){this._objRef&&(this._objRef.minZoom=e)}get minZoom(){return this._objRef?.minZoom}set maxZoom(e){this._objRef&&(this._objRef.maxZoom=e)}get maxZoom(){return this._objRef?.maxZoom}set keys(e){this._objRef&&(this._objRef.keys=e)}get keys(){return this._objRef?.keys}set mouseButtons(e){this._objRef&&(this._objRef.mouseButtons=e)}get mouseButtons(){return this._objRef?.mouseButtons}set target(e){this._objRef&&(this._objRef.target=We(this._objRef.target,e))}get target(){return this._objRef?.target}set position0(e){this._objRef&&(this._objRef.position0=We(this._objRef.position0,e))}get position0(){return this._objRef?.position0}set target0(e){this._objRef&&(this._objRef.target0=We(this._objRef.target0,e))}get target0(){return this._objRef?.target0}set up0(e){this._objRef&&(this._objRef.up0=We(this._objRef.up0,e))}get up0(){return this._objRef?.up0}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-trackballControls"]],inputs:{object:"object",domElement:"domElement",enabled:"enabled",screen:"screen",rotateSpeed:"rotateSpeed",zoomSpeed:"zoomSpeed",panSpeed:"panSpeed",noRotate:"noRotate",noZoom:"noZoom",noPan:"noPan",noRoll:"noRoll",staticMoving:"staticMoving",dynamicDampingFactor:"dynamicDampingFactor",minDistance:"minDistance",maxDistance:"maxDistance",minZoom:"minZoom",maxZoom:"maxZoom",keys:"keys",mouseButtons:"mouseButtons",target:"target",position0:"position0",target0:"target0",up0:"up0"},features:[Ee([{provide:Rr,useExisting:Le(()=>i)}]),ge],ngContentSelectors:gye,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const kd=new vd,Cr=new C,ec=new C,Ji=new mi,sG={X:new C(1,0,0),Y:new C(0,1,0),Z:new C(0,0,1)},ZA={type:"change"},oG={type:"mouseDown"},aG={type:"mouseUp",mode:null},lG={type:"objectChange"};class cG extends Nt{constructor(t,e){super(),void 0===e&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),e=document),this.isTransformControls=!0,this.visible=!1,this.domElement=e,this.domElement.style.touchAction="none";const n=new wye;this._gizmo=n,this.add(n);const r=new Tye;this._plane=r,this.add(r);const s=this;function o(b,v){let y=v;Object.defineProperty(s,b,{get:function(){return void 0!==y?y:v},set:function(T){y!==T&&(y=T,r[b]=T,n[b]=T,s.dispatchEvent({type:b+"-changed",value:T}),s.dispatchEvent(ZA))}}),s[b]=v,r[b]=v,n[b]=v}o("camera",t),o("object",void 0),o("enabled",!0),o("axis",null),o("mode","translate"),o("translationSnap",null),o("rotationSnap",null),o("scaleSnap",null),o("space","world"),o("size",1),o("dragging",!1),o("showX",!0),o("showY",!0),o("showZ",!0);const a=new C,l=new C,c=new mi,d=new mi,u=new C,h=new mi,f=new C,m=new C,_=new C,g=new C;o("worldPosition",a),o("worldPositionStart",l),o("worldQuaternion",c),o("worldQuaternionStart",d),o("cameraPosition",u),o("cameraQuaternion",h),o("pointStart",f),o("pointEnd",m),o("rotationAxis",_),o("rotationAngle",0),o("eye",g),this._offset=new C,this._startNorm=new C,this._endNorm=new C,this._cameraScale=new C,this._parentPosition=new C,this._parentQuaternion=new mi,this._parentQuaternionInv=new mi,this._parentScale=new C,this._worldScaleStart=new C,this._worldQuaternionInv=new mi,this._worldScale=new C,this._positionStart=new C,this._quaternionStart=new mi,this._scaleStart=new C,this._getPointer=_ye.bind(this),this._onPointerDown=vye.bind(this),this._onPointerHover=bye.bind(this),this._onPointerMove=yye.bind(this),this._onPointerUp=xye.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(t){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(t)}pointerHover(t){if(void 0===this.object||!0===this.dragging)return;null!==t&&kd.setFromCamera(t,this.camera);const e=KA(this._gizmo.picker[this.mode],kd);this.axis=e?e.object.name:null}pointerDown(t){if(void 0!==this.object&&!0!==this.dragging&&(null==t||0===t.button)&&null!==this.axis){null!==t&&kd.setFromCamera(t,this.camera);const e=KA(this._plane,kd,!0);e&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(e.point).sub(this.worldPositionStart)),this.dragging=!0,oG.mode=this.mode,this.dispatchEvent(oG)}}pointerMove(t){const e=this.axis,n=this.mode,r=this.object;let s=this.space;if("scale"===n?s="local":("E"===e||"XYZE"===e||"XYZ"===e)&&(s="world"),void 0===r||null===e||!1===this.dragging||null!==t&&-1!==t.button)return;null!==t&&kd.setFromCamera(t,this.camera);const o=KA(this._plane,kd,!0);if(o){if(this.pointEnd.copy(o.point).sub(this.worldPositionStart),"translate"===n)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===s&&"XYZ"!==e&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===e.indexOf("X")&&(this._offset.x=0),-1===e.indexOf("Y")&&(this._offset.y=0),-1===e.indexOf("Z")&&(this._offset.z=0),"local"===s&&"XYZ"!==e?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),r.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===s&&(r.position.applyQuaternion(Ji.copy(this._quaternionStart).invert()),-1!==e.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.position.applyQuaternion(this._quaternionStart)),"world"===s&&(r.parent&&r.position.add(Cr.setFromMatrixPosition(r.parent.matrixWorld)),-1!==e.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.parent&&r.position.sub(Cr.setFromMatrixPosition(r.parent.matrixWorld))));else if("scale"===n){if(-1!==e.search("XYZ")){let a=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(a*=-1),ec.set(a,a,a)}else Cr.copy(this.pointStart),ec.copy(this.pointEnd),Cr.applyQuaternion(this._worldQuaternionInv),ec.applyQuaternion(this._worldQuaternionInv),ec.divide(Cr),-1===e.search("X")&&(ec.x=1),-1===e.search("Y")&&(ec.y=1),-1===e.search("Z")&&(ec.z=1);r.scale.copy(this._scaleStart).multiply(ec),this.scaleSnap&&(-1!==e.search("X")&&(r.scale.x=Math.round(r.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Y")&&(r.scale.y=Math.round(r.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Z")&&(r.scale.z=Math.round(r.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){this._offset.copy(this.pointEnd).sub(this.pointStart);const a=20/this.worldPosition.distanceTo(Cr.setFromMatrixPosition(this.camera.matrixWorld));let l=!1;"XYZE"===e?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(Cr.copy(this.rotationAxis).cross(this.eye))*a):("X"===e||"Y"===e||"Z"===e)&&(this.rotationAxis.copy(sG[e]),Cr.copy(sG[e]),"local"===s&&Cr.applyQuaternion(this.worldQuaternion),Cr.cross(this.eye),0===Cr.length()?l=!0:this.rotationAngle=this._offset.dot(Cr.normalize())*a),("E"===e||l)&&(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===s&&"E"!==e&&"XYZE"!==e?(r.quaternion.copy(this._quaternionStart),r.quaternion.multiply(Ji.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),r.quaternion.copy(Ji.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),r.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(ZA),this.dispatchEvent(lG)}}pointerUp(t){null!==t&&0!==t.button||(this.dragging&&null!==this.axis&&(aG.mode=this.mode,this.dispatchEvent(aG)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(t){t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()})}attach(t){return this.object=t,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(ZA),this.dispatchEvent(lG),this.pointStart.copy(this.pointEnd))}getRaycaster(){return kd}getMode(){return this.mode}setMode(t){this.mode=t}setTranslationSnap(t){this.translationSnap=t}setRotationSnap(t){this.rotationSnap=t}setScaleSnap(t){this.scaleSnap=t}setSize(t){this.size=t}setSpace(t){this.space=t}}function _ye(i){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:i.button};{const t=this.domElement.getBoundingClientRect();return{x:(i.clientX-t.left)/t.width*2-1,y:-(i.clientY-t.top)/t.height*2+1,button:i.button}}}function bye(i){if(this.enabled)switch(i.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(i))}}function vye(i){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(i.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(i)),this.pointerDown(this._getPointer(i)))}function yye(i){this.enabled&&this.pointerMove(this._getPointer(i))}function xye(i){this.enabled&&(this.domElement.releasePointerCapture(i.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(i)))}function KA(i,t,e){const n=t.intersectObject(i,!0);for(let r=0;r<n.length;r++)if(n[r].object.visible||e)return n[r];return!1}const Y0=new Bs,Li=new C(0,1,0),dG=new C(0,0,0),uG=new je,Z0=new mi,K0=new mi,oa=new C,hG=new je,yg=new C(1,0,0),Fd=new C(0,1,0),xg=new C(0,0,1),Q0=new C,wg=new C,Tg=new C;class wye extends Nt{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const t=new Zn({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),e=new Ln({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),n=t.clone();n.opacity=.15;const r=e.clone();r.opacity=.5;const s=t.clone();s.color.setHex(16711680);const o=t.clone();o.color.setHex(65280);const a=t.clone();a.color.setHex(255);const l=t.clone();l.color.setHex(16711680),l.opacity=.5;const c=t.clone();c.color.setHex(65280),c.opacity=.5;const d=t.clone();d.color.setHex(255),d.opacity=.5;const u=t.clone();u.opacity=.25;const h=t.clone();h.color.setHex(16776960),h.opacity=.25,t.clone().color.setHex(16776960);const m=t.clone();m.color.setHex(7895160);const _=new On(0,.04,.1,12);_.translate(0,.05,0);const p=new Ki(.08,.08,.08);p.translate(0,.04,0);const g=new pt;g.setAttribute("position",new qe([0,0,0,1,0,0],3));const b=new On(.0075,.0075,.5,3);function v(Y,V){const q=new Ba(Y,.0075,3,64,V*Math.PI*2);return q.rotateY(Math.PI/2),q.rotateX(Math.PI/2),q}b.translate(0,.25,0);const T={X:[[new Be(_,s),[.5,0,0],[0,0,-Math.PI/2]],[new Be(_,s),[-.5,0,0],[0,0,Math.PI/2]],[new Be(b,s),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new Be(_,o),[0,.5,0]],[new Be(_,o),[0,-.5,0],[Math.PI,0,0]],[new Be(b,o)]],Z:[[new Be(_,a),[0,0,.5],[Math.PI/2,0,0]],[new Be(_,a),[0,0,-.5],[-Math.PI/2,0,0]],[new Be(b,a),null,[Math.PI/2,0,0]]],XYZ:[[new Be(new ja(.1,0),u.clone()),[0,0,0]]],XY:[[new Be(new Ki(.15,.15,.01),d.clone()),[.15,.15,0]]],YZ:[[new Be(new Ki(.15,.15,.01),l.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Be(new Ki(.15,.15,.01),c.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},w={X:[[new Be(new On(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new Be(new On(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Be(new On(.2,0,.6,4),n),[0,.3,0]],[new Be(new On(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Be(new On(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new Be(new On(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new Be(new ja(.2,0),n)]],XY:[[new Be(new Ki(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new Be(new Ki(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Be(new Ki(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]]},M={START:[[new Be(new ja(.01,2),r),null,null,null,"helper"]],END:[[new Be(new ja(.01,2),r),null,null,null,"helper"]],DELTA:[[new En(function y(){const Y=new pt;return Y.setAttribute("position",new qe([0,0,0,1,1,1],3)),Y}(),r),null,null,null,"helper"]],X:[[new En(g,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new En(g,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new En(g,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},D={XYZE:[[new Be(v(.5,1),m),null,[0,Math.PI/2,0]]],X:[[new Be(v(.5,.5),s)]],Y:[[new Be(v(.5,.5),o),null,[0,0,-Math.PI/2]]],Z:[[new Be(v(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new Be(v(.75,1),h),null,[0,Math.PI/2,0]]]},S={AXIS:[[new En(g,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},x={XYZE:[[new Be(new ad(.25,10,8),n)]],X:[[new Be(new Ba(.5,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Be(new Ba(.5,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Be(new Ba(.5,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Be(new Ba(.75,.1,2,24),n)]]},k={X:[[new Be(p,s),[.5,0,0],[0,0,-Math.PI/2]],[new Be(b,s),[0,0,0],[0,0,-Math.PI/2]],[new Be(p,s),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new Be(p,o),[0,.5,0]],[new Be(b,o)],[new Be(p,o),[0,-.5,0],[0,0,Math.PI]]],Z:[[new Be(p,a),[0,0,.5],[Math.PI/2,0,0]],[new Be(b,a),[0,0,0],[Math.PI/2,0,0]],[new Be(p,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new Be(new Ki(.15,.15,.01),d),[.15,.15,0]]],YZ:[[new Be(new Ki(.15,.15,.01),l),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Be(new Ki(.15,.15,.01),c),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Be(new Ki(.1,.1,.1),u.clone())]]},U={X:[[new Be(new On(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new Be(new On(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Be(new On(.2,0,.6,4),n),[0,.3,0]],[new Be(new On(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Be(new On(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new Be(new On(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new Be(new Ki(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new Be(new Ki(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Be(new Ki(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Be(new Ki(.2,.2,.2),n),[0,0,0]]]},L={X:[[new En(g,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new En(g,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new En(g,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function H(Y){const V=new Nt;for(const q in Y)for(let z=Y[q].length;z--;){const X=Y[q][z][0].clone(),se=Y[q][z][1],Me=Y[q][z][2],Ve=Y[q][z][3],Qe=Y[q][z][4];X.name=q,X.tag=Qe,se&&X.position.set(se[0],se[1],se[2]),Me&&X.rotation.set(Me[0],Me[1],Me[2]),Ve&&X.scale.set(Ve[0],Ve[1],Ve[2]),X.updateMatrix();const W=X.geometry.clone();W.applyMatrix4(X.matrix),X.geometry=W,X.renderOrder=1/0,X.position.set(0,0,0),X.rotation.set(0,0,0),X.scale.set(1,1,1),V.add(X)}return V}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=H(T)),this.add(this.gizmo.rotate=H(D)),this.add(this.gizmo.scale=H(k)),this.add(this.picker.translate=H(w)),this.add(this.picker.rotate=H(x)),this.add(this.picker.scale=H(U)),this.add(this.helper.translate=H(M)),this.add(this.helper.rotate=H(S)),this.add(this.helper.scale=H(L)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(t){const n="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:K0;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let r=[];r=r.concat(this.picker[this.mode].children),r=r.concat(this.gizmo[this.mode].children),r=r.concat(this.helper[this.mode].children);for(let s=0;s<r.length;s++){const o=r[s];let a;o.visible=!0,o.rotation.set(0,0,0),o.position.copy(this.worldPosition),a=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),o.scale.set(1,1,1).multiplyScalar(a*this.size/4),"helper"!==o.tag?(o.quaternion.copy(n),"translate"===this.mode||"scale"===this.mode?("X"===o.name&&Math.abs(Li.copy(yg).applyQuaternion(n).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"Y"===o.name&&Math.abs(Li.copy(Fd).applyQuaternion(n).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"Z"===o.name&&Math.abs(Li.copy(xg).applyQuaternion(n).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"XY"===o.name&&Math.abs(Li.copy(xg).applyQuaternion(n).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"YZ"===o.name&&Math.abs(Li.copy(yg).applyQuaternion(n).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"XZ"===o.name&&Math.abs(Li.copy(Fd).applyQuaternion(n).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1)):"rotate"===this.mode&&(Z0.copy(n),Li.copy(this.eye).applyQuaternion(Ji.copy(n).invert()),-1!==o.name.search("E")&&o.quaternion.setFromRotationMatrix(uG.lookAt(this.eye,dG,Fd)),"X"===o.name&&(Ji.setFromAxisAngle(yg,Math.atan2(-Li.y,Li.z)),Ji.multiplyQuaternions(Z0,Ji),o.quaternion.copy(Ji)),"Y"===o.name&&(Ji.setFromAxisAngle(Fd,Math.atan2(Li.x,Li.z)),Ji.multiplyQuaternions(Z0,Ji),o.quaternion.copy(Ji)),"Z"===o.name&&(Ji.setFromAxisAngle(xg,Math.atan2(Li.y,Li.x)),Ji.multiplyQuaternions(Z0,Ji),o.quaternion.copy(Ji))),o.visible=o.visible&&(-1===o.name.indexOf("X")||this.showX),o.visible=o.visible&&(-1===o.name.indexOf("Y")||this.showY),o.visible=o.visible&&(-1===o.name.indexOf("Z")||this.showZ),o.visible=o.visible&&(-1===o.name.indexOf("E")||this.showX&&this.showY&&this.showZ),o.material._color=o.material._color||o.material.color.clone(),o.material._opacity=o.material._opacity||o.material.opacity,o.material.color.copy(o.material._color),o.material.opacity=o.material._opacity,this.enabled&&this.axis&&(o.name===this.axis||this.axis.split("").some(function(l){return o.name===l}))&&(o.material.color.setHex(16776960),o.material.opacity=1)):(o.visible=!1,"AXIS"===o.name?(o.visible=!!this.axis,"X"===this.axis&&(Ji.setFromEuler(Y0.set(0,0,0)),o.quaternion.copy(n).multiply(Ji),Math.abs(Li.copy(yg).applyQuaternion(n).dot(this.eye))>.9&&(o.visible=!1)),"Y"===this.axis&&(Ji.setFromEuler(Y0.set(0,0,Math.PI/2)),o.quaternion.copy(n).multiply(Ji),Math.abs(Li.copy(Fd).applyQuaternion(n).dot(this.eye))>.9&&(o.visible=!1)),"Z"===this.axis&&(Ji.setFromEuler(Y0.set(0,Math.PI/2,0)),o.quaternion.copy(n).multiply(Ji),Math.abs(Li.copy(xg).applyQuaternion(n).dot(this.eye))>.9&&(o.visible=!1)),"XYZE"===this.axis&&(Ji.setFromEuler(Y0.set(0,Math.PI/2,0)),Li.copy(this.rotationAxis),o.quaternion.setFromRotationMatrix(uG.lookAt(dG,Li,Fd)),o.quaternion.multiply(Ji),o.visible=this.dragging),"E"===this.axis&&(o.visible=!1)):"START"===o.name?(o.position.copy(this.worldPositionStart),o.visible=this.dragging):"END"===o.name?(o.position.copy(this.worldPosition),o.visible=this.dragging):"DELTA"===o.name?(o.position.copy(this.worldPositionStart),o.quaternion.copy(this.worldQuaternionStart),Cr.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),Cr.applyQuaternion(this.worldQuaternionStart.clone().invert()),o.scale.copy(Cr),o.visible=this.dragging):(o.quaternion.copy(n),o.position.copy(this.dragging?this.worldPositionStart:this.worldPosition),this.axis&&(o.visible=-1!==this.axis.search(o.name))))}super.updateMatrixWorld(t)}}class Tye extends Be{constructor(){super(new Dl(1e5,1e5,2,2),new Zn({visible:!1,wireframe:!0,side:Br,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(t){let e=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(e="local"),Q0.copy(yg).applyQuaternion("local"===e?this.worldQuaternion:K0),wg.copy(Fd).applyQuaternion("local"===e?this.worldQuaternion:K0),Tg.copy(xg).applyQuaternion("local"===e?this.worldQuaternion:K0),Li.copy(wg),this.mode){case"translate":case"scale":switch(this.axis){case"X":Li.copy(this.eye).cross(Q0),oa.copy(Q0).cross(Li);break;case"Y":Li.copy(this.eye).cross(wg),oa.copy(wg).cross(Li);break;case"Z":Li.copy(this.eye).cross(Tg),oa.copy(Tg).cross(Li);break;case"XY":oa.copy(Tg);break;case"YZ":oa.copy(Q0);break;case"XZ":Li.copy(Tg),oa.copy(wg);break;case"XYZ":case"E":oa.set(0,0,0)}break;default:oa.set(0,0,0)}0===oa.length()?this.quaternion.copy(this.cameraQuaternion):(hG.lookAt(Cr.set(0,0,0),oa,Li),this.quaternion.setFromRotationMatrix(hG)),super.updateMatrixWorld(t)}}const Mye=["*"];let Sye=(()=>{class i extends Rr{getType(){return cG}set domElement(e){this._objRef&&(this._objRef.domElement=e)}get domElement(){return this._objRef?.domElement}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set object(e){this._objRef&&(this._objRef.object=e)}get object(){return this._objRef?.object}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set axis(e){this._objRef&&(this._objRef.axis=e)}get axis(){return this._objRef?.axis}set mode(e){this._objRef&&(this._objRef.mode=e)}get mode(){return this._objRef?.mode}set translationSnap(e){this._objRef&&(this._objRef.translationSnap=e)}get translationSnap(){return this._objRef?.translationSnap}set rotationSnap(e){this._objRef&&(this._objRef.rotationSnap=e)}get rotationSnap(){return this._objRef?.rotationSnap}set space(e){this._objRef&&(this._objRef.space=e)}get space(){return this._objRef?.space}set size(e){this._objRef&&(this._objRef.size=e)}get size(){return this._objRef?.size}set dragging(e){this._objRef&&(this._objRef.dragging=e)}get dragging(){return this._objRef?.dragging}set showX(e){this._objRef&&(this._objRef.showX=e)}get showX(){return this._objRef?.showX}set showY(e){this._objRef&&(this._objRef.showY=e)}get showY(){return this._objRef?.showY}set showZ(e){this._objRef&&(this._objRef.showZ=e)}get showZ(){return this._objRef?.showZ}get isTransformControls(){return this._objRef?.isTransformControls}set mouseButtons(e){this._objRef&&(this._objRef.mouseButtons=e)}get mouseButtons(){return this._objRef?.mouseButtons}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-transformControlsGen"]],inputs:{domElement:"domElement",camera:"camera",object:"object",enabled:"enabled",axis:"axis",mode:"mode",translationSnap:"translationSnap",rotationSnap:"rotationSnap",space:"space",size:"size",dragging:"dragging",showX:"showX",showY:"showY",showZ:"showZ",mouseButtons:"mouseButtons"},features:[Ee([{provide:Rr,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Mye,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const Rye={name:"LuminosityHighPassShader",shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Te(0)},defaultOpacity:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n\t\t\tfloat v = dot( texel.xyz, luma );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}"};class uf extends qs{constructor(t,e,n,r){super(),this.strength=void 0!==e?e:1,this.radius=n,this.threshold=r,this.resolution=void 0!==t?new $(t.x,t.y):new $(256,256),this.clearColor=new Te(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);this.renderTargetBright=new gi(s,o,{type:mn}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let u=0;u<this.nMips;u++){const h=new gi(s,o,{type:mn});h.texture.name="UnrealBloomPass.h"+u,h.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(h);const f=new gi(s,o,{type:mn});f.texture.name="UnrealBloomPass.v"+u,f.texture.generateMipmaps=!1,this.renderTargetsVertical.push(f),s=Math.round(s/2),o=Math.round(o/2)}const a=Rye;this.highPassUniforms=Rn.clone(a.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new ei({uniforms:this.highPassUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}),this.separableBlurMaterials=[];const l=[3,5,7,9,11];s=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);for(let u=0;u<this.nMips;u++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(l[u])),this.separableBlurMaterials[u].uniforms.invSize.value=new $(1/s,1/o),s=Math.round(s/2),o=Math.round(o/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=e,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new C(1,1,1),new C(1,1,1),new C(1,1,1),new C(1,1,1),new C(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const d=Xs;this.copyUniforms=Rn.clone(d.uniforms),this.blendMaterial=new ei({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:ep,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Te,this.oldClearAlpha=1,this.basic=new Zn,this.fsQuad=new Yl(null)}dispose(){for(let t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(let t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose();for(let t=0;t<this.separableBlurMaterials.length;t++)this.separableBlurMaterials[t].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(t,e){let n=Math.round(t/2),r=Math.round(e/2);this.renderTargetBright.setSize(n,r);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(n,r),this.renderTargetsVertical[s].setSize(n,r),this.separableBlurMaterials[s].uniforms.invSize.value=new $(1/n,1/r),n=Math.round(n/2),r=Math.round(r/2)}render(t,e,n,r,s){t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();const o=t.autoClear;t.autoClear=!1,t.setClearColor(this.clearColor,0),s&&t.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,t.setRenderTarget(null),t.clear(),this.fsQuad.render(t)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,t.setRenderTarget(this.renderTargetBright),t.clear(),this.fsQuad.render(t);let a=this.renderTargetBright;for(let l=0;l<this.nMips;l++)this.fsQuad.material=this.separableBlurMaterials[l],this.separableBlurMaterials[l].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[l].uniforms.direction.value=uf.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[l]),t.clear(),this.fsQuad.render(t),this.separableBlurMaterials[l].uniforms.colorTexture.value=this.renderTargetsHorizontal[l].texture,this.separableBlurMaterials[l].uniforms.direction.value=uf.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[l]),t.clear(),this.fsQuad.render(t),a=this.renderTargetsVertical[l];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.setRenderTarget(this.renderTargetsHorizontal[0]),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(n),this.fsQuad.render(t)),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=o}getSeperableBlurMaterial(t){const e=[];for(let n=0;n<t;n++)e.push(.39894*Math.exp(-.5*n*n/(t*t))/t);return new ei({defines:{KERNEL_RADIUS:t},uniforms:{colorTexture:{value:null},invSize:{value:new $(.5,.5)},direction:{value:new $(.5,.5)},gaussianCoefficients:{value:e}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 invSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float gaussianCoefficients[KERNEL_RADIUS];\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tfloat weightSum = gaussianCoefficients[0];\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianCoefficients[i];\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n\t\t\t\t\t\tweightSum += 2.0 * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})}getCompositeMaterial(t){return new ei({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}uf.BlurDirectionX=new $(1,0),uf.BlurDirectionY=new $(0,1);const Cye=["*"];let fG=(()=>{class i extends qa{getType(){return uf}set resolution(e){this._objRef&&(this._objRef.resolution=We(this._objRef.resolution,e))}get resolution(){return this._objRef?.resolution}set strength(e){this._objRef&&(this._objRef.strength=e)}get strength(){return this._objRef?.strength}set radius(e){this._objRef&&(this._objRef.radius=e)}get radius(){return this._objRef?.radius}set threshold(e){this._objRef&&(this._objRef.threshold=e)}get threshold(){return this._objRef?.threshold}set clearColor(e){this._objRef&&(this._objRef.clearColor=We(this._objRef.clearColor,e))}get clearColor(){return this._objRef?.clearColor}set renderTargetsHorizontal(e){this._objRef&&(this._objRef.renderTargetsHorizontal=e)}get renderTargetsHorizontal(){return this._objRef?.renderTargetsHorizontal}set renderTargetsVertical(e){this._objRef&&(this._objRef.renderTargetsVertical=e)}get renderTargetsVertical(){return this._objRef?.renderTargetsVertical}set nMips(e){this._objRef&&(this._objRef.nMips=e)}get nMips(){return this._objRef?.nMips}set renderTargetBright(e){this._objRef&&(this._objRef.renderTargetBright=e)}get renderTargetBright(){return this._objRef?.renderTargetBright}set highPassUniforms(e){this._objRef&&(this._objRef.highPassUniforms=e)}get highPassUniforms(){return this._objRef?.highPassUniforms}set materialHighPassFilter(e){this._objRef&&(this._objRef.materialHighPassFilter=e)}get materialHighPassFilter(){return this._objRef?.materialHighPassFilter}set separableBlurMaterials(e){this._objRef&&(this._objRef.separableBlurMaterials=e)}get separableBlurMaterials(){return this._objRef?.separableBlurMaterials}set compositeMaterial(e){this._objRef&&(this._objRef.compositeMaterial=e)}get compositeMaterial(){return this._objRef?.compositeMaterial}set bloomTintColors(e){this._objRef&&(this._objRef.bloomTintColors=e)}get bloomTintColors(){return this._objRef?.bloomTintColors}set copyUniforms(e){this._objRef&&(this._objRef.copyUniforms=e)}get copyUniforms(){return this._objRef?.copyUniforms}set blendMaterial(e){this._objRef&&(this._objRef.blendMaterial=e)}get blendMaterial(){return this._objRef?.blendMaterial}set oldClearColor(e){this._objRef&&(this._objRef.oldClearColor=We(this._objRef.oldClearColor,e))}get oldClearColor(){return this._objRef?.oldClearColor}set oldClearAlpha(e){this._objRef&&(this._objRef.oldClearAlpha=e)}get oldClearAlpha(){return this._objRef?.oldClearAlpha}set basic(e){this._objRef&&(this._objRef.basic=e)}get basic(){return this._objRef?.basic}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-unrealBloomPass"]],inputs:{resolution:"resolution",strength:"strength",radius:"radius",threshold:"threshold",clearColor:"clearColor",renderTargetsHorizontal:"renderTargetsHorizontal",renderTargetsVertical:"renderTargetsVertical",nMips:"nMips",renderTargetBright:"renderTargetBright",highPassUniforms:"highPassUniforms",materialHighPassFilter:"materialHighPassFilter",separableBlurMaterials:"separableBlurMaterials",compositeMaterial:"compositeMaterial",bloomTintColors:"bloomTintColors",copyUniforms:"copyUniforms",blendMaterial:"blendMaterial",oldClearColor:"oldClearColor",oldClearAlpha:"oldClearAlpha",basic:"basic",fsQuad:"fsQuad"},features:[Ee([{provide:Ys,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Cye,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const Eye=["*"];let Aye=(()=>{class i extends wve{constructor(){super(...arguments),this.elementRef=ee(xt)}getType(){return bz}createThreeInstance(e){return super.createThreeInstance(e??this.elementRef?.nativeElement)}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-cSS2DObject"]],features:[Ee([{provide:ht,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Eye,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0})}return i})();const Dye=["*"];let mG=(()=>{class i extends Mve{constructor(){super(...arguments),this.elementRef=ee(xt)}getType(){return $E}createThreeInstance(e){return super.createThreeInstance(e??this.elementRef?.nativeElement)}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["th-cSS3DObject"]],features:[Ee([{provide:ht,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Dye,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0})}return i})();const Iye=["*"];let QA=(()=>{class i extends lye{constructor(e,n){super(e),this.effectComposer=e,this.view=n}createThreeInstance(e){return e||(e=new Array(5)),e[0]=e[0]??this.view.scene,e[1]=e[1]??this.view.camera,e[2]=e[2]??this.overrideMaterial,e[3]=e[3]??this.clearColor,e[4]=e[4]??this.clearAlpha,super.createThreeInstance(e)}ngAfterContentChecked(){this._objRef&&(this.view.scene&&this.view.scene.objRef&&(this._objRef.scene=this.view.scene.objRef),this.view.camera&&this.view.camera.objRef&&(this._objRef.camera=this.view.camera.objRef))}static#e=this.\u0275fac=function(n){return new(n||i)(P(pg),P(Ha))};static#t=this.\u0275cmp=pe({type:i,selectors:[["th-renderPass"]],features:[Ee([{provide:Ys,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Iye,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();const Pye=["*"];let kye=(()=>{class i extends Sye{constructor(e,n,r){super(e,n),this.scene=r,this.objectAdded=()=>{this.objRef&&null!=this.targetObject&&this.targetObject.parent&&this.objRef.attach(this.targetObject)},this.objectRemoved=()=>{this._objRef?.detach()}}getType(){return cG}set object(e){this._objRef&&(this.removeObjectListeners(),this.targetObject=e,this.addObjectListeners(),e?this.objectAdded():this.objectRemoved())}addToParent(){this._objRef&&!this._objRef.parent&&this.scene?.objRef?.add(this._objRef)}removeFromParent(){this._objRef&&this.scene?.objRef?.remove(this._objRef)}ngOnDestroy(){this.removeObjectListeners(),this.objectRemoved(),this.targetObject=void 0}removeObjectListeners(){this.targetObject&&(this.targetObject.removeEventListener("added",this.objectAdded),this.targetObject.removeEventListener("removed",this.objectRemoved))}addObjectListeners(){this.targetObject?.addEventListener("added",this.objectAdded),this.targetObject?.addEventListener("removed",this.objectRemoved)}static#e=this.\u0275fac=function(n){return new(n||i)(P(ht),P(Xi),P(an))};static#t=this.\u0275cmp=pe({type:i,selectors:[["th-transformControls"]],inputs:{object:"object"},features:[Ee([{provide:Rr,useExisting:Le(()=>i)}]),ge],ngContentSelectors:Pye,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})();function Fye(i){return[{provide:ht,useExisting:Le(()=>i)}]}const as=new Te;class Lye extends Tr{constructor(t){super(t),this.propertyNameMapping={},this.customPropertyMapping={}}load(t,e,n,r){const s=this,o=new rs(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(a){try{e(s.parse(a))}catch(l){r?r(l):console.error(l),s.manager.itemError(t)}},n,r)}setPropertyNameMapping(t){this.propertyNameMapping=t}setCustomPropertyNameMapping(t){this.customPropertyMapping=t}parse(t){function e(p,g=0){let v="";const y=/^ply([\s\S]*)end_header(\r\n|\r|\n)/.exec(p);null!==y&&(v=y[1]);const T={comments:[],elements:[],headerLength:g,objInfo:""},w=v.split(/\r\n|\r|\n/);let M;function D(S,x){const k={type:S[0]};return"list"===k.type?(k.name=S[3],k.countType=S[1],k.itemType=S[2]):k.name=S[1],k.name in x&&(k.name=x[k.name]),k}for(let S=0;S<w.length;S++){let x=w[S];if(x=x.trim(),""===x)continue;const k=x.split(/\s+/),U=k.shift();switch(x=k.join(" "),U){case"format":T.format=k[0],T.version=k[1];break;case"comment":T.comments.push(x);break;case"element":void 0!==M&&T.elements.push(M),M={},M.name=k[0],M.count=parseInt(k[1]),M.properties=[];break;case"property":M.properties.push(D(k,_.propertyNameMapping));break;case"obj_info":T.objInfo=x;break;default:console.log("unhandled",U,k)}}return void 0!==M&&T.elements.push(M),T}function n(p,g){switch(g){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(p);case"float":case"double":case"float32":case"float64":return parseFloat(p)}}function r(p,g){const b={};for(let v=0;v<p.length;v++){if(g.empty())return null;if("list"===p[v].type){const y=[],T=n(g.next(),p[v].countType);for(let w=0;w<T;w++){if(g.empty())return null;y.push(n(g.next(),p[v].itemType))}b[p[v].name]=y}else b[p[v].name]=n(g.next(),p[v].type)}return b}function s(){const p={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[],faceVertexColors:[]};for(const g of Object.keys(_.customPropertyMapping))p[g]=[];return p}function o(p){const g=p.map(v=>v.name);function b(v){for(let y=0,T=v.length;y<T;y++){const w=v[y];if(g.includes(w))return w}return null}return{attrX:b(["x","px","posx"])||"x",attrY:b(["y","py","posy"])||"y",attrZ:b(["z","pz","posz"])||"z",attrNX:b(["nx","normalx"]),attrNY:b(["ny","normaly"]),attrNZ:b(["nz","normalz"]),attrS:b(["s","u","texture_u","tx"]),attrT:b(["t","v","texture_v","ty"]),attrR:b(["red","diffuse_red","r","diffuse_r"]),attrG:b(["green","diffuse_green","g","diffuse_g"]),attrB:b(["blue","diffuse_blue","b","diffuse_b"])}}function a(p,g){const b=s();let y,T;y=null!==(T=/end_header\s+(\S[\s\S]*\S|\S)\s*$/.exec(p))?T[1].split(/\s+/):[];const w=new Oye(y);e:for(let M=0;M<g.elements.length;M++){const D=g.elements[M],S=o(D.properties);for(let x=0;x<D.count;x++){const k=r(D.properties,w);if(!k)break e;c(b,D.name,k,S)}}return l(b)}function l(p){let g=new pt;p.indices.length>0&&g.setIndex(p.indices),g.setAttribute("position",new qe(p.vertices,3)),p.normals.length>0&&g.setAttribute("normal",new qe(p.normals,3)),p.uvs.length>0&&g.setAttribute("uv",new qe(p.uvs,2)),p.colors.length>0&&g.setAttribute("color",new qe(p.colors,3)),(p.faceVertexUvs.length>0||p.faceVertexColors.length>0)&&(g=g.toNonIndexed(),p.faceVertexUvs.length>0&&g.setAttribute("uv",new qe(p.faceVertexUvs,2)),p.faceVertexColors.length>0&&g.setAttribute("color",new qe(p.faceVertexColors,3)));for(const b of Object.keys(_.customPropertyMapping))p[b].length>0&&g.setAttribute(b,new qe(p[b],_.customPropertyMapping[b].length));return g.computeBoundingSphere(),g}function c(p,g,b,v){if("vertex"===g){p.vertices.push(b[v.attrX],b[v.attrY],b[v.attrZ]),null!==v.attrNX&&null!==v.attrNY&&null!==v.attrNZ&&p.normals.push(b[v.attrNX],b[v.attrNY],b[v.attrNZ]),null!==v.attrS&&null!==v.attrT&&p.uvs.push(b[v.attrS],b[v.attrT]),null!==v.attrR&&null!==v.attrG&&null!==v.attrB&&(as.setRGB(b[v.attrR]/255,b[v.attrG]/255,b[v.attrB]/255).convertSRGBToLinear(),p.colors.push(as.r,as.g,as.b));for(const y of Object.keys(_.customPropertyMapping))for(const T of _.customPropertyMapping[y])p[y].push(b[T])}else if("face"===g){const y=b.vertex_indices||b.vertex_index,T=b.texcoord;3===y.length?(p.indices.push(y[0],y[1],y[2]),T&&6===T.length&&(p.faceVertexUvs.push(T[0],T[1]),p.faceVertexUvs.push(T[2],T[3]),p.faceVertexUvs.push(T[4],T[5]))):4===y.length&&(p.indices.push(y[0],y[1],y[3]),p.indices.push(y[1],y[2],y[3])),null!==v.attrR&&null!==v.attrG&&null!==v.attrB&&(as.setRGB(b[v.attrR]/255,b[v.attrG]/255,b[v.attrB]/255).convertSRGBToLinear(),p.faceVertexColors.push(as.r,as.g,as.b),p.faceVertexColors.push(as.r,as.g,as.b),p.faceVertexColors.push(as.r,as.g,as.b))}}function d(p,g){const b={};let v=0;for(let y=0;y<g.length;y++){const T=g[y],w=T.valueReader;if("list"===T.type){const M=[],D=T.countReader.read(p+v);v+=T.countReader.size;for(let S=0;S<D;S++)M.push(w.read(p+v)),v+=w.size;b[T.name]=M}else b[T.name]=w.read(p+v),v+=w.size}return[b,v]}function u(p,g,b){function v(y,T,w){switch(T){case"int8":case"char":return{read:M=>y.getInt8(M),size:1};case"uint8":case"uchar":return{read:M=>y.getUint8(M),size:1};case"int16":case"short":return{read:M=>y.getInt16(M,w),size:2};case"uint16":case"ushort":return{read:M=>y.getUint16(M,w),size:2};case"int32":case"int":return{read:M=>y.getInt32(M,w),size:4};case"uint32":case"uint":return{read:M=>y.getUint32(M,w),size:4};case"float32":case"float":return{read:M=>y.getFloat32(M,w),size:4};case"float64":case"double":return{read:M=>y.getFloat64(M,w),size:8}}}for(let y=0,T=p.length;y<T;y++){const w=p[y];"list"===w.type?(w.countReader=v(g,w.countType,b),w.valueReader=v(g,w.itemType,b)):w.valueReader=v(g,w.type,b)}}let m;const _=this;if(t instanceof ArrayBuffer){const p=new Uint8Array(t),{headerText:g,headerLength:b}=function f(p){let g=0,b=!0,v="";const y=[],T=(new TextDecoder).decode(p.subarray(0,5)),w=/^ply\r\n/.test(T);do{const M=String.fromCharCode(p[g++]);"\n"!==M&&"\r"!==M?v+=M:("end_header"===v&&(b=!1),""!==v&&(y.push(v),v=""))}while(b&&g<p.length);return!0===w&&g++,{headerText:y.join("\r")+"\r",headerLength:g}}(p),v=e(g,b);m="ascii"===v.format?a((new TextDecoder).decode(p),v):function h(p,g){const b=s(),v="binary_little_endian"===g.format,y=new DataView(p,g.headerLength);let T,w=0;for(let M=0;M<g.elements.length;M++){const D=g.elements[M],S=D.properties,x=o(S);u(S,y,v);for(let k=0;k<D.count;k++)T=d(w,S),w+=T[1],c(b,D.name,T[0],x)}return l(b)}(t,v)}else m=a(t,e(t));return m}}class Oye{constructor(t){this.arr=t,this.i=0}empty(){return this.i>=this.arr.length}next(){return this.arr[this.i++]}}let Nye=(()=>{class i extends Nz{constructor(){super(...arguments),this.clazz=Lye}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),jye=(()=>{class i extends jz{constructor(e,n,r){super(e,n),this.host=e,this.zone=n,this.service=r}getRefFromResponse(e){return e.computeVertexNormals(),e}load(){var e=this;return Si(function*(){if(!e.initialized)return;if(void 0===e._url)throw new Error("missing url");const n=e._url,r=UE(e.onProgress$)?o=>{e.onProgress$?.next(o)}:void 0,s=yield e.zone.runOutsideAngular(()=>e.service.load(n,r));e.host.objRef=e.getRefFromResponse(s),e.onLoaded$&&void 0!==s&&e.onLoaded$?.next(s)})()}static#e=this.\u0275fac=function(n){return new(n||i)(P(To,1),P(it),P(Nye))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","loadPLY",""]],features:[ge]})}return i})(),JA=(()=>{class i{constructor(e,n){this.host=e,this.parent=n,this.host.autoAddToParent=!1,this.host.autoDispose=!1,this.host.objRef=mz()}set refById(e){this.id=e,this.subscription?.unsubscribe(),this.subscription=this.parent.objRef$.subscribe(n=>{this.parentObj=n,this.applyRef()})}applyRef(){if(!this.parentObj||void 0===this.id)return;const e=this.findById(this.parentObj,this.id);e&&this.setRef(this.host,e)}findById(e,n){if((e.name??e.uuid)===n)return e;for(const r of e.children){const s=this.findById(r,n);if(void 0!==s)return s}}setRef(e,n){const r=e.objRef;r&&zE(r)&&(r.objRef=n,e.objRef=r)}ngOnDestroy(){this.subscription?.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(P(ht,2),P(ht,4))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","refById",""]],inputs:{refById:"refById"}})}return i})();const Bye=["outerRef"],Uye=["innerRef"],Vye=["*"];function zye(i,t){1&i&&_m(0)}function Hye(i,t){if(1&i){const e=Bi();K(0,"div",5,2),Ke("onResize",function(){return Pt(e),kt(Qt().onResize())}),K(2,"div",6,3)(4,"div",7),si(5,zye,1,0,"ng-container",8),de()()()}if(2&i){const e=Qt(),n=Ot(4);O("ngStyle",e.styles),B(2),O("ngStyle",e.transformInnerStyles),B(2),Ls(e.style),O("className",e.className),B(),O("ngTemplateOutlet",n)}}function Gye(i,t){1&i&&_m(0)}function Wye(i,t){if(1&i&&(K(0,"div",9,2),si(2,Gye,1,0,"ng-container",8),de()),2&i){const e=Qt(),n=Ot(4);O("ngStyle",e.styles)("className",e.className),B(2),O("ngTemplateOutlet",n)}}function $ye(i,t){1&i&&Ce(0)}const Mg=new C,eD=new C,Xye=new C;function qye(i,t,e){const n=Mg.setFromMatrixPosition(i.matrixWorld);n.project(t);const r=e.width/2,s=e.height/2;return[n.x*r+r,-n.y*s+s]}const tD=i=>Math.abs(i)<1e-10?0:i;function pG(i,t,e=""){let n="matrix3d(";for(let r=0;16!==r;r++)n+=tD(t[r]*i.elements[r])+(15!==r?",":")");return e+n}const Jye=(i=>t=>pG(t,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),e0e=(i=>(t,e)=>pG(t,(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1])(e),"translate(-50%,-50%)"))();let t0e=(()=>{class i extends V0{constructor(e,n){super(n),this.view=e,this.DoubleSide=Br,this.FRAGMENT_SHADER=n0e,this.VERTEX_SHADER=i0e,this.prepend=!1,this.center=!1,this.fullscreen=!1,this.eps=.001,this.sprite=!1,this.transform=!1,this.zIndexRange=[16777271,0],this.onOcclude=new lt,this.calculatePosition=qye,this.as="div",this.pointerEvents="auto",this.transformInnerStyles=this.computeInnerStyles(),this.styles=null,this.oldZoom=0,this.oldPosition=[0,0],this.notOccluded=!0,this.raycaster=ee(c0)}ngOnInit(){super.ngOnInit(),this.styles=this.computeStyles()}ngAfterViewInit(){this.el=document.createElement(this.as),this.frameSubscription=this.view.onRender.subscribe(()=>this.onFrame()),this.transformOuterRef&&this.el.appendChild(this.transformOuterRef.nativeElement),this.el&&!this.target&&this.appendElement(this.el)}onResize(){this.styles=this.computeStyles()}ngOnChanges(e){super.ngOnChanges(e)}appendElement(e){if(this.el&&this.objRef&&this.view.hostElement&&this.view.camera){if(this.target=this.portal??this.view.hostElement.nativeElement,this.view.scene?.objRef?.updateMatrixWorld(),this.transform)e.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const n=this.calculatePosition(this.objRef,this.view.camera.objRef,this.getSize());e.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${n[0]}px,${n[1]}px,0);transform-origin:0 0;`}this.target&&(this.prepend?this.target.prepend(e):this.target.appendChild(e))}}onFrame(){const e=this.view.camera?.objRef,n=this.view.scene?.objRef,r=this._objRef,s=this.getSize();if(!(e&&r&&n&&this.el))return;e.updateMatrixWorld(),r.updateWorldMatrix(!0,!1);const o=this.transform?this.oldPosition:this.calculatePosition(r,e,s);if(this.transform||Math.abs(this.oldZoom-e.zoom)>this.eps||Math.abs(this.oldPosition[0]-o[0])>this.eps||Math.abs(this.oldPosition[1]-o[1])>this.eps){const a=function Yye(i,t){const e=Mg.setFromMatrixPosition(i.matrixWorld),n=eD.setFromMatrixPosition(t.matrixWorld),r=e.sub(n),s=t.getWorldDirection(Xye);return r.angleTo(s)>Math.PI/2}(r,e);let l=!1;"boolean"==typeof this.occlude?!0===this.occlude&&(l=[n]):Array.isArray(this.occlude)&&(l=this.occlude.map(d=>d.objRef??d));const c=this.notOccluded;if(this.notOccluded=l?!a&&function Zye(i,t,e,n){const r=Mg.setFromMatrixPosition(i.matrixWorld),s=r.clone();s.project(t),e.setFromCamera(s,t);const o=e.intersectObjects(n,!0);if(o.length){const a=o[0].distance;return r.distanceTo(e.ray.origin)<a}return!0}(r,e,this.raycaster,l):!a,c!==this.notOccluded&&(this.onOcclude.length>0?this.onOcclude.next(!this.notOccluded):this.el.style.display=this.notOccluded?"block":"none"),this.el.style.zIndex=`${function Qye(i,t,e){if(t instanceof Cn||t instanceof Il){const n=Mg.setFromMatrixPosition(i.matrixWorld),r=eD.setFromMatrixPosition(t.matrixWorld),s=n.distanceTo(r),o=(e[1]-e[0])/(t.far-t.near);return Math.round(o*s+(e[1]-o*t.far))}}(r,e,this.zIndexRange)}`,this.transform){const[d,u]=[s.width/2,s.height/2],h=e.projectionMatrix.elements[5]*u,{isOrthographicCamera:f,top:m,left:_,bottom:p,right:g}=e,b=Jye(e.matrixWorldInverse),v=f?`scale(${h})translate(${tD(-(g+_)/2)}px,${tD((m+p)/2)}px)`:`translateZ(${h}px)`;let y=r.matrixWorld;this.sprite&&(y=e.matrixWorldInverse.clone().transpose().copyPosition(y).scale(r.scale),y.elements[3]=y.elements[7]=y.elements[11]=0,y.elements[15]=1),this.el.style.width=s.width+"px",this.el.style.height=s.height+"px",this.el.style.perspective=f?"":`${h}px`,this.transformOuterRef&&this.transformInnerRef&&(this.transformOuterRef.nativeElement.style.transform=`${v}${b}translate(${d}px,${u}px)`,this.transformInnerRef.nativeElement.style.transform=e0e(y,1/((this.distanceFactor||10)/400)))}else{const d=void 0===this.distanceFactor?1:function Kye(i,t){if(t instanceof Il)return t.zoom;if(t instanceof Cn){const e=Mg.setFromMatrixPosition(i.matrixWorld),n=eD.setFromMatrixPosition(t.matrixWorld),r=t.fov*Math.PI/180,s=e.distanceTo(n);return 1/(2*Math.tan(r/2)*s)}return 1}(r,e)*this.distanceFactor;this.el.style.transform=`translate3d(${o[0]}px,${o[1]}px,0) scale(${d})`}this.oldPosition=o,this.oldZoom=e.zoom}}ngOnDestroy(){this.el?.remove(),this.frameSubscription?.unsubscribe()}computeStyles(){const e=this.getSize();return this.transform?{position:"absolute",top:0,left:0,width:e.width+"px",height:e.height+"px",transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:this.center?"translate3d(-50%,-50%,0)":"none",...this.fullscreen&&{top:-e.height/2+"px",left:-e.width/2+"px",width:e.width+"px",height:e.height+"px"},...this.style}}computeInnerStyles(){return{position:"absolute",pointerEvents:this.pointerEvents}}getSize(){return this.view.viewPort??this.view.hostElement.nativeElement.getBoundingClientRect()??{width:0,height:0}}static#e=this.\u0275fac=function(n){return new(n||i)(P(Ha),P(ht,4))};static#t=this.\u0275cmp=pe({type:i,selectors:[["th-html"]],viewQuery:function(n,r){if(1&n&&(Ei(Bye,5),Ei(Uye,5)),2&n){let s;bt(s=vt())&&(r.transformOuterRef=s.first),bt(s=vt())&&(r.transformInnerRef=s.first)}},inputs:{prepend:"prepend",center:"center",fullscreen:"fullscreen",portal:"portal",distanceFactor:"distanceFactor",sprite:"sprite",transform:"transform",zIndexRange:"zIndexRange",style:"style",className:"className",occlude:"occlude",calculatePosition:"calculatePosition",as:"as",wrapperClass:"wrapperClass",pointerEvents:"pointerEvents"},outputs:{onOcclude:"onOcclude"},features:[ge,pr],ngContentSelectors:Vye,decls:5,vars:2,consts:[["noTransform",""],["tempOutlet",""],["outerRef",""],["innerRef",""],[3,"ngStyle","onResize",4,"ngIf","ngIfElse"],[3,"onResize","ngStyle"],[3,"ngStyle"],[3,"className"],[4,"ngTemplateOutlet"],[3,"ngStyle","className"]],template:function(n,r){if(1&n&&(ze(),si(0,Hye,6,6,"div",4)(1,Wye,3,3,"ng-template",null,0,zu)(3,$ye,1,0,"ng-template",null,1,zu)),2&n){const s=Ot(2);O("ngIf",r.transform)("ngIfElse",s)}},dependencies:[ev,DS,DN,h0],encapsulation:2,changeDetection:0})}return i})();const i0e='\n/*\n  This shader is from the THREE\'s SpriteMaterial.\n  We need to turn the backing plane into a Sprite\n  (make it always face the camera) if "transfrom" \n  is false. \n*/\n#include <common>\nvoid main() {\n  vec2 center = vec2(0., 1.);\n  float rotation = 0.0;\n  \n  // This is somewhat arbitrary, but it seems to work well\n  // Need to figure out how to derive this dynamically if it even matters\n  float size = 0.03;\n  vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n  vec2 scale;\n  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n  bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n  if ( isPerspective ) scale *= - mvPosition.z;\n  vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;\n  vec2 rotatedPosition;\n  rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n  rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n  mvPosition.xy += rotatedPosition;\n  gl_Position = projectionMatrix * mvPosition;\n}\n',n0e="\nvoid main() {\n  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n}\n";let Sg=(()=>{class i{transform(e){return Array.isArray(e)?new Te(...e):new Te(e)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275pipe=Jn({name:"color",type:i,pure:!0})}return i})();const iD=i=>[0,i,0],r0e=()=>[0,1,0],s0e=()=>({background:"lightblue",borderRadius:"1em",padding:"1em",display:"flex",flexDirection:"column"}),gG=i=>[i,0,0],o0e=i=>[0,.039,i],a0e=()=>[.17,.17,.17],l0e=()=>[4,10,2],c0e=()=>[100,100],d0e=()=>[55,2,.1,100],u0e=(i,t)=>[i,0,t],h0e=()=>[0,0,0];let f0e=(()=>{class i{constructor(e){this.Math=Math,this.sprite=!1,this.glbPath=`${ss}mac-draco.glb`,this.clock=new md(!0),this.plane=new Vs(new C(0,1,0),3),this.rotation=[0,0,0],this.position=[0,0,0],e.setDecoderPath("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/jsm/libs/draco/gltf/"),e.setCrossOrigin("no-cors"),this.calcPose()}onBeforeRender(){this.calcPose()}calcPose(){const e=this.clock.getElapsedTime();this.rotation=[st.lerp(this.rotation[0],Math.cos(e/2)/20+.25,.1),st.lerp(this.rotation[1],Math.sin(e/4)/20,.1),st.lerp(this.rotation[2],Math.sin(e/8)/20,.1)],this.position=[0,st.lerp(this.position[1],(-2+Math.sin(e/2))/2,.1),0]}static#e=this.\u0275fac=function(n){return new(n||i)(P(u0))};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-html-example"]],decls:17,vars:57,consts:[["light",""],[3,"onRender","thStats","shadow"],[3,"intensity"],[3,"rotation","position"],["loadGLTF","",3,"castShadow","url","position","rotation"],[3,"refById"],[3,"rotation","position","scale","sprite","transform","occlude"],["src",_T`./multi-view-postprocessing-example`,2,"width","1960px","height","1280px"],[3,"castShadow","position","lookAt","color","intensity"],[3,"receiveShadow","rotation","position"],[3,"args"],[3,"color"],[3,"args","position","lookAt"]],template:function(n,r){if(1&n){const s=Bi();K(0,"th-canvas",1),Ke("onRender",function(){return Pt(s),kt(r.onBeforeRender())}),K(1,"th-scene"),ve(2,"th-ambientLight",2),K(3,"th-group",3)(4,"th-object3D",4)(5,"th-mesh",5)(6,"th-html",6),ve(7,"iframe",7),de()()()(),ve(8,"th-directionalLight",8,0),un(10,"color"),K(11,"th-mesh",9),ve(12,"th-planeGeometry",10)(13,"th-meshBasicMaterial",11),un(14,"color"),de(),K(15,"th-perspectiveCamera",12),ve(16,"th-orbitControls"),de()()()}2&n&&(O("thStats",!0)("shadow",!0),B(2),O("intensity",3),B(),O("rotation",Ft(35,iD,r.Math.PI))("position",ae(37,r0e)),B(),O("castShadow",!0)("url",r.glbPath)("position",r.position)("rotation",r.rotation),B(),O("refById","Cube008_2"),B(),Ls(ae(38,s0e)),O("rotation",Ft(39,gG,-1*r.Math.PI/2))("position",Ft(41,o0e,-.5))("scale",ae(43,a0e))("sprite",r.sprite)("transform",!0)("occlude",!0),B(2),O("castShadow",!0)("position",ae(44,l0e))("lookAt",Ft(45,iD,-3))("color",Tn(10,31,"#ffffff"))("intensity",2),B(3),O("receiveShadow",!0)("rotation",Ft(47,gG,3*r.Math.PI/2))("position",Ft(49,iD,-3)),B(),O("args",ae(51,c0e)),B(),O("color",Tn(14,33,"#efefef")),B(2),O("args",ae(52,d0e))("position",uo(53,u0e,-5,-15))("lookAt",ae(56,h0e)))},dependencies:[So,Dn,ht,Sr,za,V0,Mr,an,Zp,Yh,Xi,na,Mo,JA,t0e,Sg],encapsulation:2,changeDetection:0})}return i})();Math.sqrt(3),Math.sqrt(3);const aa=1/6,Za=(Math.sqrt(5),Math.sqrt(5),i=>0|Math.floor(i)),nD=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);const b0e=["canvas"],v0e=["light"],y0e=["instancedMesh"],x0e=()=>[0,0,30],w0e=()=>[0,0,0],T0e=()=>["#808080"],M0e=i=>[void 0,void 0,i],S0e=(i,t,e)=>[i,t,e],bG=()=>["#9C1E15"],R0e=i=>[0,0,i],C0e=(i,t)=>[i,t];let E0e=(()=>{class i{constructor(){this.SIZE=1.5,this.NX=20,this.NY=20,this.PADDING=1,this.SIZEP=this.SIZE+this.PADDING,this.W=this.NX*this.SIZEP-this.PADDING,this.H=this.NY*this.SIZEP-this.PADDING,this.NUM_INSTANCES=this.NX*this.NY,this.dummy=new Nt,this.simplexNoise=function _0e(i=Math.random){const t=function rD(i){const e=new Uint8Array(512);for(let n=0;n<256;n++)e[n]=n;for(let n=0;n<255;n++){const r=n+~~(i()*(256-n)),s=e[n];e[n]=e[r],e[r]=s}for(let n=256;n<512;n++)e[n]=e[n-256];return e}(i),e=new Float64Array(t).map(s=>nD[s%12*3]),n=new Float64Array(t).map(s=>nD[s%12*3+1]),r=new Float64Array(t).map(s=>nD[s%12*3+2]);return function(o,a,l){let c,d,u,h;const f=.3333333333333333*(o+a+l),m=Za(o+f),_=Za(a+f),p=Za(l+f),g=(m+_+p)*aa,T=o-(m-g),w=a-(_-g),M=l-(p-g);let D,S,x,k,U,L;T>=w?w>=M?(D=1,S=0,x=0,k=1,U=1,L=0):T>=M?(D=1,S=0,x=0,k=1,U=0,L=1):(D=0,S=0,x=1,k=1,U=0,L=1):w<M?(D=0,S=0,x=1,k=0,U=1,L=1):T<M?(D=0,S=1,x=0,k=0,U=1,L=1):(D=0,S=1,x=0,k=1,U=1,L=0);const H=T-D+aa,Y=w-S+aa,V=M-x+aa,q=T-k+2*aa,z=w-U+2*aa,X=M-L+2*aa,se=T-1+.5,Me=w-1+.5,Ve=M-1+.5,Qe=255&m,W=255&_,be=255&p;let Ie=.6-T*T-w*w-M*M;if(Ie<0)c=0;else{const j=Qe+t[W+t[be]];Ie*=Ie,c=Ie*Ie*(e[j]*T+n[j]*w+r[j]*M)}let N=.6-H*H-Y*Y-V*V;if(N<0)d=0;else{const j=Qe+D+t[W+S+t[be+x]];N*=N,d=N*N*(e[j]*H+n[j]*Y+r[j]*V)}let me=.6-q*q-z*z-X*X;if(me<0)u=0;else{const j=Qe+k+t[W+U+t[be+L]];me*=me,u=me*me*(e[j]*q+n[j]*z+r[j]*X)}let Ae=.6-se*se-Me*Me-Ve*Ve;if(Ae<0)h=0;else{const j=Qe+1+t[W+1+t[be+1]];Ae*=Ae,h=Ae*Ae*(e[j]*se+n[j]*Me+r[j]*Ve)}return 32*(c+d+u+h)}}(),this.pointerPN={x:0,y:0}}ngOnInit(){this.light?.shadow&&(this.light.shadow.mapSize.width=1024,this.light.shadow.mapSize.height=1024)}onRender(){this.updateLightPosition(),this.updateInstanceMatrix()}updateLightPosition(){const e=this.light?.position;e&&(e.x=this.pointerPN.x*this.W,e.y=this.pointerPN.y*this.H)}updateInstanceMatrix(){if(!this.instancedMesh||!this.instancedMesh.objRef)return;const e=-this.W/2+this.PADDING,n=-this.H/2+this.PADDING,r=1e-4*Date.now(),s=.1*this.pointerPN.x,o=.1*this.pointerPN.y;let l,c,d,u,h,f;for(let m=0;m<this.NX;m++)for(let _=0;_<this.NY;_++)l=e+m*this.SIZEP,c=n+_*this.SIZEP,d=.005*l+s,u=.005*c+o,h=this.simplexNoise(d,u,r)*Math.PI,f=this.simplexNoise(u,d,r)*Math.PI,this.dummy.position.set(l,c,-10),this.dummy.rotation.set(h,f,0),this.dummy.updateMatrix(),this.instancedMesh?.objRef?.setMatrixAt(m*this.NY+_,this.dummy.matrix);this.instancedMesh.objRef.instanceMatrix.needsUpdate=!0}onMouseMove(e){if(!this.canvas||!this.canvas.hostElement.nativeElement)return;const n=this.canvas.hostElement.nativeElement;this.pointerPN.x=(e.clientX-n.offsetLeft+window.scrollX)/n.clientWidth*2-1,this.pointerPN.y=-(e.clientY-n.offsetTop+window.scrollY)/n.clientHeight*2+1}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-instanced-mesh-example"]],viewQuery:function(n,r){if(1&n&&(Ei(b0e,5),Ei(v0e,5),Ei(y0e,5)),2&n){let s;bt(s=vt())&&(r.canvas=s.first),bt(s=vt())&&(r.light=s.first),bt(s=vt())&&(r.instancedMesh=s.first)}},hostBindings:function(n,r){1&n&&Ke("mousemove",function(o){return r.onMouseMove(o)},0,z_)},decls:15,vars:34,consts:[["canvas",""],["light",""],["instancedMesh",""],[3,"onRender","shadow"],[3,"position","lookAt"],[3,"intensity","color"],[3,"castShadow","intensity","decay"],[3,"args","count","castShadow","receiveShadow"],[3,"args"],[3,"color"],[3,"position","receiveShadow"]],template:function(n,r){if(1&n){const s=Bi();K(0,"th-canvas",3,0),Ke("onRender",function(){return Pt(s),kt(r.onRender())}),K(2,"th-scene")(3,"th-perspectiveCamera",4),ve(4,"th-orbitControls"),de(),ve(5,"th-ambientLight",5)(6,"th-pointLight",6,1),K(8,"th-instancedMesh",7,2),ve(10,"th-boxGeometry",8)(11,"th-meshPhongMaterial",9),de(),K(12,"th-mesh",10),ve(13,"th-planeGeometry",8)(14,"th-meshPhongMaterial",9),de()()()}2&n&&(O("shadow",!0),B(3),O("position",ae(18,x0e))("lookAt",ae(19,w0e)),B(2),O("intensity",3)("color",ae(20,T0e)),B(),O("castShadow",!0)("intensity",3)("decay",0),B(2),O("args",Ft(21,M0e,r.NUM_INSTANCES))("count",r.NUM_INSTANCES)("castShadow",!0)("receiveShadow",!0),B(2),O("args",Ic(23,S0e,r.SIZE,r.SIZE,r.SIZE)),B(),O("color",ae(27,bG)),B(),O("position",Ft(28,R0e,-10-r.SIZE))("receiveShadow",!0),B(),O("args",uo(30,C0e,2*r.W,2*r.H)),B(),O("color",ae(33,bG)))},dependencies:[So,Dn,Sr,Ga,Zve,Mr,an,xd,eA,Yh,Xi],encapsulation:2,changeDetection:0})}return i})();const A0e=()=>[2,2,2],D0e=()=>[1,1,1],I0e=()=>({color:"purple"}),P0e=i=>[i,0,0],k0e=()=>[2,0,0],F0e=()=>[75,2,.1,1e3],L0e=()=>[1,1,5];let O0e=(()=>{class i{constructor(){this.selected=!1,this.rotation=[0,0,0],this.position=[0,0,0]}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-box"]],inputs:{rotation:"rotation",position:"position"},decls:3,vars:7,consts:[[3,"onClick","rotation","position","scale"],[3,"args"]],template:function(n,r){1&n&&(K(0,"th-mesh",0),Ke("onClick",function(){return r.selected=!r.selected}),ve(1,"th-boxGeometry")(2,"th-meshBasicMaterial",1),de()),2&n&&(O("rotation",r.rotation)("position",r.position)("scale",r.selected?ae(4,A0e):ae(5,D0e)),B(2),O("args",ae(6,I0e)))},dependencies:[Mr,Zp,eA,Qh],encapsulation:2,changeDetection:0})}return i})(),N0e=(()=>{class i{constructor(){this.rotation=[0,0,0]}onBeforeRender(){this.rotation=[0,this.rotation[2]+.01,this.rotation[2]+.01]}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-introductory-example"]],decls:6,vars:11,consts:[[3,"onRender"],[3,"position","rotation"],[3,"args","position"]],template:function(n,r){1&n&&(K(0,"th-canvas",0),Ke("onRender",function(){return r.onBeforeRender()}),K(1,"th-scene"),ve(2,"app-box",1)(3,"app-box",1)(4,"th-ambientLight")(5,"th-perspectiveCamera",2),de()()),2&n&&(B(2),O("position",Ft(6,P0e,-2))("rotation",r.rotation),B(),O("position",ae(8,k0e))("rotation",r.rotation),B(2),O("args",ae(9,F0e))("position",ae(10,L0e)))},dependencies:[Dn,Sr,an,Xi,O0e],encapsulation:2,changeDetection:0})}return i})();const j0e=()=>[0,1,0],B0e=()=>[100,100,100],U0e=i=>[0,0,i],V0e=()=>[10,10],vG=()=>[10,10,10],z0e=()=>[45,2,.1,100],H0e=()=>[0,0,0];let G0e=(()=>{class i{constructor(){this.assetPath1=`${ss}DamagedHelmet.glb`,this.assetPath2=`${ss}BoomBox.glb`,this.rotation=[0,0,0]}onBeforeRender(){this.rotation=[0,this.rotation[1]+.01,0]}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-loader-example"]],decls:8,vars:24,consts:[[3,"onRender"],[3,"thStats"],[3,"intensity"],["loadGLTF","",3,"url","rotation","position"],["loadGLTF","",3,"url","scale","rotation","position"],[3,"args"],[3,"position","decay"],[3,"args","position","lookAt"]],template:function(n,r){1&n&&(K(0,"th-canvas",0),Ke("onRender",function(){return r.onBeforeRender()}),K(1,"th-scene",1),ve(2,"th-ambientLight",2),K(3,"th-object3D",3),ve(4,"th-object3D",4),de(),ve(5,"th-gridHelper",5)(6,"th-pointLight",6)(7,"th-perspectiveCamera",7),de()()),2&n&&(B(),O("thStats",!0),B(),O("intensity",3),B(),O("url",r.assetPath1)("rotation",r.rotation)("position",ae(15,j0e)),B(),O("url",r.assetPath2)("scale",ae(16,B0e))("rotation",r.rotation)("position",Ft(17,U0e,-3)),B(),O("args",ae(19,V0e)),B(),O("position",ae(20,vG))("decay",0),B(),O("args",ae(21,z0e))("position",ae(22,vG))("lookAt",ae(23,H0e)))},dependencies:[Dn,ht,Bl,Sr,Ga,an,Xi,na,Mo],encapsulation:2,changeDetection:0})}return i})();const W0e=["slider"],$0e=()=>[35,2,.1,100],X0e=()=>[0,0,6],q0e=(i,t)=>({x:0,y:0,width:i,height:t}),Y0e=()=>["#ffffff","#444444",1],Z0e=i=>[i,2,2],K0e=()=>[1,3],Q0e=(i,t,e)=>({x:i,y:0,width:t,height:e});let J0e=(()=>{class i{constructor(){this.sliderPos=0,this.controlsEnabled=!0,this.colorLeft=new Te(12375183),this.colorRight=new Te(9419988)}ngOnInit(){!this.slider||!this.canvas||!this.canvas.rendererCanvas||(this.slider.nativeElement.style.touchAction="none",this.sliderPos=(this.canvas.rendererCanvas.clientWidth||0)/2)}onPointerMove(e){if(this.controlsEnabled||!this.canvas||!this.canvas.rendererCanvas||!this.slider||!1===e.isPrimary)return;const r=this.canvas.rendererCanvas.getBoundingClientRect();this.sliderPos=Math.max(r.left,Math.min(r.right,e.pageX))-r.left,this.slider.nativeElement.style.left=this.sliderPos-this.slider.nativeElement.offsetWidth/2+"px"}onPointerUp(){this.controlsEnabled=!0}onSliderPointerDown(e){!1!==e.isPrimary&&(this.controlsEnabled=!1)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-multi-scene-example"]],viewQuery:function(n,r){if(1&n&&(Ei(W0e,7),Ei(Xi,7)),2&n){let s;bt(s=vt())&&(r.slider=s.first),bt(s=vt())&&(r.canvas=s.first)}},hostBindings:function(n,r){1&n&&Ke("pointermove",function(o){return r.onPointerMove(o)},0,xT)("pointerup",function(){return r.onPointerUp()},!1,xT)},decls:20,vars:33,consts:[["slider",""],["thecanvas",""],["cam",""],["light",""],["geo",""],[1,"slider",3,"pointerdown"],[3,"disableDefaultView"],[3,"args","position"],[3,"scissor","scissorTest","clearColor","camera"],[3,"background"],[3,"args","position","intensity"],[3,"args"],[3,"objRef"],[3,"geometry"],[3,"wireframe"]],template:function(n,r){if(1&n){const s=Bi();K(0,"div",5,0),Ke("pointerdown",function(a){return Pt(s),kt(r.onSliderPointerDown(a))}),de(),K(2,"th-canvas",6,1)(4,"th-perspectiveCamera",7,2),ve(6,"th-orbitControls"),de(),K(7,"th-view",8)(8,"th-scene",9),ve(9,"th-hemisphereLight",10,3),K(11,"th-mesh"),ve(12,"th-meshStandardMaterial")(13,"th-icosahedronGeometry",11,4),de()()(),K(15,"th-view",8)(16,"th-scene",9),ve(17,"th-hemisphereLight",12),K(18,"th-mesh",13),ve(19,"th-meshStandardMaterial",14),de()()()()}if(2&n){const s=Ot(3),o=Ot(5),a=Ot(10),l=Ot(14);B(2),O("disableDefaultView",!0),B(2),O("args",ae(20,$0e))("position",ae(21,X0e)),B(3),O("scissor",uo(22,q0e,r.sliderPos,(null==s.rendererCanvas?null:s.rendererCanvas.height)||0))("scissorTest",!0)("clearColor",r.colorLeft)("camera",o),B(),O("background",r.colorLeft),B(),O("args",ae(25,Y0e))("position",Ft(26,Z0e,-2))("intensity",3),B(4),O("args",ae(28,K0e)),B(2),O("scissor",Ic(29,Q0e,r.sliderPos,(null==s.rendererCanvas?null:s.rendererCanvas.width)||0,(null==s.rendererCanvas?null:s.rendererCanvas.height)||0))("scissorTest",!0)("clearColor",r.colorRight)("camera",o),B(),O("background",r.colorRight),B(),O("objRef",null==a.objRef?null:a.objRef.clone()),B(),O("geometry",l.objRef),B(),O("wireframe",!0)}},dependencies:[So,Dn,GE,Mr,an,eG,qve,Xi,Ha],styles:[".container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.slider[_ngcontent-%COMP%]{position:absolute;cursor:ew-resize;width:40px;height:40px;background-color:#f32196;opacity:.7;border-radius:50%;top:calc(50% - 20px);left:calc(50% - 20px)}"],changeDetection:0})}return i})();const yG={name:"DotScreenShader",uniforms:{tDiffuse:{value:null},tSize:{value:new $(256,256)},center:{value:new $(.5,.5)},angle:{value:1.57},scale:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform vec2 center;\n\t\tuniform float angle;\n\t\tuniform float scale;\n\t\tuniform vec2 tSize;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tfloat pattern() {\n\n\t\t\tfloat s = sin( angle ), c = cos( angle );\n\n\t\t\tvec2 tex = vUv * tSize - center;\n\t\t\tvec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;\n\n\t\t\treturn ( sin( point.x ) * sin( point.y ) ) * 4.0;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 color = texture2D( tDiffuse, vUv );\n\n\t\t\tfloat average = ( color.r + color.g + color.b ) / 3.0;\n\n\t\t\tgl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );\n\n\t\t}"},xG={name:"RGBShiftShader",uniforms:{tDiffuse:{value:null},amount:{value:.005},angle:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float amount;\n\t\tuniform float angle;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec2 offset = amount * vec2( cos(angle), sin(angle));\n\t\t\tvec4 cr = texture2D(tDiffuse, vUv + offset);\n\t\t\tvec4 cga = texture2D(tDiffuse, vUv);\n\t\t\tvec4 cb = texture2D(tDiffuse, vUv - offset);\n\t\t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n\n\t\t}"},exe=["thecanvas"],txe=(i,t)=>({x:0,y:0,width:i,height:t}),ixe=()=>[0,0,1],nxe=()=>["#ffffff"],rxe=()=>[0,0,0],ex=i=>[i,0,0],sxe=()=>[200,32,16],oxe=()=>["#fac400"],axe=()=>["#f83f0d"],lxe=()=>[400,0,0],sD=(i,t,e,n)=>({x:i,y:t,width:e,height:n}),cxe=i=>[i],dxe=()=>({value:.055}),uxe=i=>({amount:i}),hxe=()=>[.35,.5,2048,!0];let fxe=(()=>{class i{constructor(){this.Math=Math,this.RGBShiftShader=xG,this.DotScreenShader=yG,this.canvasWidth=128,this.canvasHeight=128,this.mouseX=0,this.mouseY=0,this.view1={left:0,bottom:0,width:.5,height:1,background:new Te(.5,.5,.7),eye:[0,300,1800],up:[0,1,0],fov:30,updateCamera:(e,n)=>{this.updateSize(),e.position.x+=.05*this.mouseX,e.position.x=Math.max(Math.min(e.position.x,2e3),-2e3),e.lookAt(n.position),e.updateProjectionMatrix()}},this.view2={left:.5,bottom:0,width:.5,height:.5,background:new Te(.7,.5,.5),eye:[0,1800,0],up:[0,0,1],fov:45,updateCamera:(e,n)=>{this.updateSize(),e.position.x-=.05*this.mouseX,e.position.x=Math.max(Math.min(e.position.x,2e3),-2e3),e.lookAt(e.position.clone().setY(0)),e.updateProjectionMatrix()}},this.view3={left:.5,bottom:.5,width:.5,height:.5,background:new Te(.5,.7,.7),eye:[1400,800,1400],up:[0,1,0],fov:60,updateCamera:(e,n)=>{this.updateSize(),e.position.y-=.05*this.mouseX,e.position.y=Math.max(Math.min(e.position.y,1600),-1600),e.lookAt(n.position),e.updateProjectionMatrix()}}}ngOnInit(){!this.canvas||!this.canvas.rendererCanvas||(this.shadowTexture=new aE(this.canvas.rendererCanvas))}updateSize(){!this.canvas||!this.canvas.rendererCanvas||(this.canvasWidth=this.canvas.rendererCanvas.width,this.canvasHeight=this.canvas.rendererCanvas.height)}onMouseMove(e){if(!this.canvas||!this.canvas.rendererCanvas)return;const n=this.canvas.rendererCanvas.getBoundingClientRect();this.mouseX=e.clientX-n.left-n.width/2,this.mouseY=e.clientY-n.right-n.height/2}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-multi-view-postprocessing-example"]],viewQuery:function(n,r){if(1&n&&Ei(exe,7),2&n){let s;bt(s=vt())&&(r.canvas=s.first)}},hostBindings:function(n,r){1&n&&Ke("mousemove",function(o){return r.onMouseMove(o)},0,z_)},decls:32,vars:96,consts:[["thecanvas",""],["scene",""],["geo",""],["mat",""],["thview1",""],["camera1",""],["thview2",""],["camera2",""],["thview3",""],["camera3",""],[3,"disableDefaultView","viewPort"],[3,"position","args","intensity"],[3,"position","rotation"],[3,"args"],[3,"flatShading","shininess","specular","color"],[3,"position","rotation","geometry","material"],[3,"onRender","scene","viewPort","scissor","scissorTest"],[3,"position","up","fov","aspect","near","far"],[3,"clearColor"],[3,"strength"],[3,"args","uniforms"],[3,"onRender","scene","viewPort","scissor","scissorTest","clearColor"]],template:function(n,r){if(1&n){const s=Bi();K(0,"th-canvas",10,0)(2,"th-scene",null,1),ve(4,"th-directionalLight",11),K(5,"th-mesh",12),ve(6,"th-sphereGeometry",13,2)(8,"th-meshPhongMaterial",14,3),de(),ve(10,"th-mesh",15)(11,"th-mesh",15),de(),K(12,"th-view",16,4),Ke("onRender",function(){Pt(s);const a=Ot(3),l=Ot(15);return kt(r.view1.updateCamera(l.objRef,a.objRef))}),ve(14,"th-perspectiveCamera",17,5),K(16,"th-effectComposer"),ve(17,"th-renderPass",18)(18,"th-unrealBloomPass",19)(19,"th-shaderPass",20)(20,"th-glitchPass"),de()(),K(21,"th-view",21,6),Ke("onRender",function(){Pt(s);const a=Ot(3),l=Ot(24);return kt(r.view2.updateCamera(l.objRef,a.objRef))}),ve(23,"th-perspectiveCamera",17,7),K(25,"th-effectComposer"),ve(26,"th-renderPass")(27,"th-filmPass",13),de()(),K(28,"th-view",21,8),Ke("onRender",function(){Pt(s);const a=Ot(3),l=Ot(31);return kt(r.view3.updateCamera(l.objRef,a.objRef))}),ve(30,"th-perspectiveCamera",17,9),de()()}if(2&n){const s=Ot(3),o=Ot(7),a=Ot(9),l=Ot(13),c=Ot(22),d=Ot(29);O("disableDefaultView",!0)("viewPort",uo(57,txe,.5*r.canvasWidth,r.canvasHeight)),B(4),O("position",ae(60,ixe))("args",ae(61,nxe))("intensity",3),B(),O("position",ae(62,rxe))("rotation",Ft(63,ex,-r.Math.PI/2)),B(),O("args",ae(65,sxe)),B(2),O("flatShading",!1)("shininess",30)("specular",ae(66,oxe))("color",ae(67,axe)),B(2),O("position",Ft(68,ex,-400))("rotation",Ft(70,ex,-r.Math.PI/2))("geometry",o.objRef)("material",a.objRef),B(),O("position",ae(72,lxe))("rotation",Ft(73,ex,-r.Math.PI/2))("geometry",o.objRef)("material",a.objRef),B(),O("scene",s)("viewPort",Rm(75,sD,r.view1.left*r.canvasWidth,r.view1.bottom*r.canvasHeight,r.view1.width*r.canvasWidth,r.view1.height*r.canvasHeight))("scissor",l.viewPort)("scissorTest",!0),B(2),O("position",r.view1.eye)("up",r.view1.up)("fov",r.view1.fov)("aspect",r.view1.width*r.canvasWidth/(r.view1.height*r.canvasHeight))("near",1)("far",1e4),B(3),O("clearColor",r.view1.background),B(),O("strength",.2),B(),O("args",Ft(80,cxe,r.RGBShiftShader))("uniforms",Ft(83,uxe,ae(82,dxe))),B(2),O("scene",s)("viewPort",Rm(85,sD,r.view2.left*r.canvasWidth,r.view2.bottom*r.canvasHeight,r.view2.width*r.canvasWidth,r.view2.height*r.canvasHeight))("scissor",c.viewPort)("scissorTest",!0)("clearColor",r.view2.background),B(2),O("position",r.view2.eye)("up",r.view2.up)("fov",r.view2.fov)("aspect",r.view2.width*r.canvasWidth/(r.view2.height*r.canvasHeight))("near",1)("far",1e4),B(4),O("args",ae(90,hxe)),B(),O("scene",s)("viewPort",Rm(91,sD,r.view3.left*r.canvasWidth,r.view3.bottom*r.canvasHeight,r.view3.width*r.canvasWidth,r.view3.height*r.canvasHeight))("scissor",d.viewPort)("scissorTest",!0)("clearColor",r.view3.background),B(2),O("position",r.view3.eye)("up",r.view3.up)("fov",r.view3.fov)("aspect",r.view3.width*r.canvasWidth/(r.view3.height*r.canvasHeight))("near",1)("far",1e4)}},dependencies:[Dn,za,Mr,an,xd,q0,pg,Fve,Wve,QA,J4,fG,Xi,Ha],encapsulation:2,changeDetection:0})}return i})(),wG=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static#e=this.\u0275fac=function(n){return new(n||i)(P(ba),P(xt))};static#t=this.\u0275dir=Pe({type:i})}return i})(),Ld=(()=>{class i extends wG{static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275dir=Pe({type:i,features:[ge]})}return i})();const As=new le(""),mxe={provide:As,useExisting:Le(()=>oD),multi:!0};let oD=(()=>{class i extends Ld{writeValue(e){this.setProperty("checked",e)}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275dir=Pe({type:i,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(n,r){1&n&&Ke("change",function(o){return r.onChange(o.target.checked)})("blur",function(){return r.onTouched()})},features:[Ee([mxe]),ge]})}return i})();const pxe={provide:As,useExisting:Le(()=>tx),multi:!0},_xe=new le("");let tx=(()=>{class i extends wG{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function gxe(){const i=gl()?gl().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static#e=this.\u0275fac=function(n){return new(n||i)(P(ba),P(xt),P(_xe,8))};static#t=this.\u0275dir=Pe({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){1&n&&Ke("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[Ee([pxe]),ge]})}return i})();const Er=new le(""),ic=new le("");function PG(i){return null!=i}function kG(i){return Im(i)?hn(i):i}function FG(i){let t={};return i.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function LG(i,t){return t.map(e=>e(i))}function OG(i){return i.map(t=>function vxe(i){return!i.validate}(t)?t:e=>t.validate(e))}function aD(i){return null!=i?function NG(i){if(!i)return null;const t=i.filter(PG);return 0==t.length?null:function(e){return FG(LG(e,t))}}(OG(i)):null}function lD(i){return null!=i?function jG(i){if(!i)return null;const t=i.filter(PG);return 0==t.length?null:function(e){return MA(LG(e,t).map(kG)).pipe(Ct(FG))}}(OG(i)):null}function BG(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function cD(i){return i?Array.isArray(i)?i:[i]:[]}function nx(i,t){return Array.isArray(i)?i.includes(t):i===t}function zG(i,t){const e=cD(t);return cD(i).forEach(r=>{nx(e,r)||e.push(r)}),e}function HG(i,t){return cD(t).filter(e=>!nx(i,e))}class GG{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=aD(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=lD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Gr extends GG{get formDirective(){return null}get path(){return null}}class nc extends GG{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class WG{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let dD=(()=>{class i extends WG{constructor(e){super(e)}static#e=this.\u0275fac=function(n){return new(n||i)(P(nc,2))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){2&n&&di("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[ge]})}return i})();const Cg="VALID",sx="INVALID",hf="PENDING",Eg="DISABLED";function ox(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}class pD{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Cg}get invalid(){return this.status===sx}get pending(){return this.status==hf}get disabled(){return this.status===Eg}get enabled(){return this.status!==Eg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(zG(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(zG(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(HG(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(HG(t,this._rawAsyncValidators))}hasValidator(t){return nx(this._rawValidators,t)}hasAsyncValidator(t){return nx(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=hf,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Eg,this.errors=null,this._forEachChild(n=>{n.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Cg,this._forEachChild(n=>{n.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Cg||this.status===hf)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Eg:Cg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=hf,this._hasOwnPendingAsyncValidator=!0;const e=kG(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new lt,this.statusChanges=new lt}_calculateStatus(){return this._allControlsDisabled()?Eg:this.errors?sx:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hf)?hf:this._anyControlsHaveStatus(sx)?sx:Cg}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){ox(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function Mxe(i){return Array.isArray(i)?aD(i):i||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function Sxe(i){return Array.isArray(i)?lD(i):i||null}(this._rawAsyncValidators)}}const ff=new le("CallSetDisabledState",{providedIn:"root",factory:()=>ax}),ax="always";function Ag(i,t,e=ax){(function _D(i,t){const e=function UG(i){return i._rawValidators}(i);null!==t.validator?i.setValidators(BG(e,t.validator)):"function"==typeof e&&i.setValidators([e]);const n=function VG(i){return i._rawAsyncValidators}(i);null!==t.asyncValidator?i.setAsyncValidators(BG(n,t.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();dx(t._rawValidators,r),dx(t._rawAsyncValidators,r)})(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(i.disabled),function Exe(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&YG(i,t)})}(i,t),function Dxe(i,t){const e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,t),function Axe(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&YG(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function Cxe(i,t){if(t.valueAccessor.setDisabledState){const e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,t)}function dx(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function YG(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function QG(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}function JG(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}Promise.resolve();const e5=class extends pD{constructor(t=null,e,n){super(function fD(i){return(ox(i)?i.validators:i)||null}(e),function mD(i,t){return(ox(t)?t.asyncValidators:i)||null}(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ox(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=JG(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){QG(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){QG(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){JG(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},jxe={provide:nc,useExisting:Le(()=>hx)},r5=Promise.resolve();let hx=(()=>{class i extends nc{constructor(e,n,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new e5,this._registered=!1,this.name="",this.update=new lt,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=function yD(i,t){if(!t)return null;let e,n,r;return Array.isArray(t),t.forEach(s=>{s.constructor===tx?e=s:function kxe(i){return Object.getPrototypeOf(i.constructor)===Ld}(s)?n=s:r=s}),r||n||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function vD(i,t){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ag(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){r5.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const n=e.isDisabled.currentValue,r=0!==n&&$i(n);r5.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function lx(i,t){return[...t.path,i]}(e,this._parent):[e]}static#e=this.\u0275fac=function(n){return new(n||i)(P(Gr,9),P(Er,10),P(ic,10),P(As,10),P(lr,8),P(ff,8))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[rt.None,"disabled","isDisabled"],model:[rt.None,"ngModel","model"],options:[rt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ee([jxe]),ge,pr]})}return i})();const Hxe={provide:As,useExisting:Le(()=>wD),multi:!0};let wD=(()=>{class i extends Ld{writeValue(e){this.setProperty("value",parseFloat(e))}registerOnChange(e){this.onChange=n=>{e(""==n?null:parseFloat(n))}}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275dir=Pe({type:i,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(n,r){1&n&&Ke("change",function(o){return r.onChange(o.target.value)})("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[Ee([Hxe]),ge]})}return i})();const Yxe={provide:As,useExisting:Le(()=>fx),multi:!0};function u5(i,t){return null==i?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${i}: ${t}`.slice(0,50))}let fx=(()=>{class i extends Ld{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=u5(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=n=>{this.value=this._getOptionValue(n),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),e))return n;return null}_getOptionValue(e){const n=function Zxe(i){return i.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n):e}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275dir=Pe({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,r){1&n&&Ke("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ee([Yxe]),ge]})}return i})(),h5=(()=>{class i{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(u5(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt),P(ba),P(fx,9))};static#t=this.\u0275dir=Pe({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return i})();const Kxe={provide:As,useExisting:Le(()=>RD),multi:!0};function f5(i,t){return null==i?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${i}: ${t}`.slice(0,50))}let RD=(()=>{class i extends Ld{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let n;if(this.value=e,Array.isArray(e)){const r=e.map(s=>this._getOptionId(s));n=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else n=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(e){this.onChange=n=>{const r=[],s=n.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const c=this._getOptionValue(o[a].value);r.push(c)}}else{const o=n.options;for(let a=0;a<o.length;a++){const l=o[a];if(l.selected){const c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,e(r)}}_registerOption(e){const n=(this._idCounter++).toString();return this._optionMap.set(n,e),n}_getOptionId(e){for(const n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,e))return n;return null}_getOptionValue(e){const n=function Qxe(i){return i.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275dir=Pe({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,r){1&n&&Ke("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ee([Kxe]),ge]})}return i})(),m5=(()=>{class i{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(f5(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(f5(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt),P(ba),P(RD,9))};static#t=this.\u0275dir=Pe({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return i})(),awe=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({})}return i})(),cwe=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:ff,useValue:e.callSetDisabledState??ax}]}}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({imports:[awe]})}return i})();const dwe=()=>[2,2,2],uwe=()=>[1,1,1],hwe=()=>[10,10],M5=()=>[10,10,10],fwe=()=>[45,2,.1,100],mwe=()=>[0,0,0],pwe=i=>[i],gwe=(i,t,e)=>[i,t,e];function _we(i,t){1&i&&ve(0,"th-orbitControls")}function bwe(i,t){1&i&&ve(0,"th-mapControls")}function vwe(i,t){1&i&&ve(0,"th-arcballControls")}function ywe(i,t){1&i&&ve(0,"th-transformControls",18),2&i&&(Qt(),O("object",Ot(26).objRef))}function xwe(i,t){if(1&i&&ve(0,"th-dragControls",12),2&i){Qt();const e=Ot(22),n=Ot(26),r=Ot(30);O("args",Ic(3,gwe,Ft(1,pwe,n.objRef),r.objRef,e.hostElement.nativeElement))}}function wwe(i,t){1&i&&ve(0,"th-flyControls")}function Twe(i,t){1&i&&ve(0,"th-trackballControls")}function Mwe(i,t){1&i&&ve(0,"th-firstPersonControls")}let Swe=(()=>{class i{constructor(){this.controlType="orbit",this.renderOnDemand=!0,this.selected=!1,this.glbPath=`${ss}DamagedHelmet.glb`}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-on-demand-example"]],decls:39,vars:29,consts:[["canvas",""],["model",""],["camera",""],[1,"control-panel"],["id","ondemand","type","checkbox",3,"ngModelChange","ngModel"],["for","ondemand"],[1,"form-control",3,"ngModelChange","ngModel"],[1,"works-on-demand"],[1,"needs-loop"],[3,"thStats","renderOnDemand"],[3,"intensity"],["loadGLTF","",3,"onClick","url","scale"],[3,"args"],[3,"position","decay"],[3,"ngSwitch","args","position","lookAt"],[4,"ngSwitchCase"],[3,"object",4,"ngSwitchCase"],[3,"args",4,"ngSwitchCase"],[3,"object"]],template:function(n,r){if(1&n){const s=Bi();K(0,"div",3)(1,"input",4),Sm("ngModelChange",function(a){return Pt(s),Cb(r.renderOnDemand,a)||(r.renderOnDemand=a),kt(a)}),de(),K(2,"label",5),Jt(3,"Render On-Demand"),de(),K(4,"select",6),Sm("ngModelChange",function(a){return Pt(s),Cb(r.controlType,a)||(r.controlType=a),kt(a)}),K(5,"option",7),Jt(6,"orbit"),de(),K(7,"option",7),Jt(8,"map"),de(),K(9,"option",7),Jt(10,"arcball"),de(),K(11,"option",7),Jt(12,"transform"),de(),K(13,"option",7),Jt(14,"drag"),de(),K(15,"option",8),Jt(16,"fly"),de(),K(17,"option",8),Jt(18,"trackball"),de(),K(19,"option",8),Jt(20,"firstpersion"),de()()(),K(21,"th-canvas",9,0)(23,"th-scene"),ve(24,"th-ambientLight",10),K(25,"th-object3D",11,1),Ke("onClick",function(){return Pt(s),kt(r.selected=!r.selected)}),de(),ve(27,"th-gridHelper",12)(28,"th-pointLight",13),K(29,"th-perspectiveCamera",14,2),si(31,_we,1,0,"th-orbitControls",15)(32,bwe,1,0,"th-mapControls",15)(33,vwe,1,0,"th-arcballControls",15)(34,ywe,1,1,"th-transformControls",16)(35,xwe,1,7,"th-dragControls",17)(36,wwe,1,0,"th-flyControls",15)(37,Twe,1,0,"th-trackballControls",15)(38,Mwe,1,0,"th-firstPersonControls",15),de()()()}2&n&&(B(),Mm("ngModel",r.renderOnDemand),B(3),Mm("ngModel",r.controlType),B(17),O("thStats",!0)("renderOnDemand",r.renderOnDemand),B(3),O("intensity",3),B(),O("url",r.glbPath)("scale",r.selected?ae(22,dwe):ae(23,uwe)),B(2),O("args",ae(24,hwe)),B(),O("position",ae(25,M5))("decay",0),B(),O("ngSwitch",r.controlType)("args",ae(26,fwe))("position",ae(27,M5))("lookAt",ae(28,mwe)),B(2),O("ngSwitchCase","orbit"),B(),O("ngSwitchCase","map"),B(),O("ngSwitchCase","arcball"),B(),O("ngSwitchCase","transform"),B(),O("ngSwitchCase","drag"),B(),O("ngSwitchCase","fly"),B(),O("ngSwitchCase","trackball"),B(),O("ngSwitchCase","firstpersion"))},dependencies:[tv,EN,kye,bve,Dve,Nve,Vve,So,eye,rG,Dn,ht,Bl,Sr,Ga,an,Xi,na,Qh,h0,Mo,h5,m5,oD,fx,dD,hx],styles:[".needs-loop[_ngcontent-%COMP%]{color:red}.works-on-demand[_ngcontent-%COMP%]{color:green}.control-panel[_ngcontent-%COMP%]{display:flex;gap:1em;margin:1em}"],changeDetection:0})}return i})();class la{constructor(t,e,n,r,s="div"){this.parent=t,this.object=e,this.property=n,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),la.nextNameID=la.nextNameID||0,this.$name.id="lil-gui-name-"+ ++la.nextNameID,this.$widget=document.createElement(s),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",o=>o.stopPropagation()),this.domElement.addEventListener("keyup",o=>o.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(n)}name(t){return this._name=t,this.$name.innerHTML=t,this}onChange(t){return this._onChange=t,this}_callOnChange(){this.parent._callOnChange(this),void 0!==this._onChange&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),void 0!==this._onFinishChange&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(t=!0){return this.disable(!t)}disable(t=!0){return t===this._disabled||(this._disabled=t,this.domElement.classList.toggle("disabled",t),this.$disable.toggleAttribute("disabled",t)),this}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(t){const e=this.parent.add(this.object,this.property,t);return e.name(this._name),this.destroy(),e}min(t){return this}max(t){return this}step(t){return this}decimals(t){return this}listen(t=!0){return this._listening=t,void 0!==this._listenCallbackID&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const t=this.save();t!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=t}getValue(){return this.object[this.property]}setValue(t){return this.object[this.property]=t,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(t){return this.setValue(t),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class Rwe extends la{constructor(t,e,n){super(t,e,n,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function ED(i){let t,e;return(t=i.match(/(#|0x)?([a-f0-9]{6})/i))?e=t[2]:(t=i.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?e=parseInt(t[1]).toString(16).padStart(2,0)+parseInt(t[2]).toString(16).padStart(2,0)+parseInt(t[3]).toString(16).padStart(2,0):(t=i.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(e=t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),!!e&&"#"+e}const Ig={isPrimitive:!0,match:i=>"number"==typeof i,fromHexString:i=>parseInt(i.substring(1),16),toHexString:i=>"#"+i.toString(16).padStart(6,0)},Ewe=[{isPrimitive:!0,match:i=>"string"==typeof i,fromHexString:ED,toHexString:ED},Ig,{isPrimitive:!1,match:i=>Array.isArray(i),fromHexString(i,t,e=1){const n=Ig.fromHexString(i);t[0]=(n>>16&255)/255*e,t[1]=(n>>8&255)/255*e,t[2]=(255&n)/255*e},toHexString:([i,t,e],n=1)=>Ig.toHexString(i*(n=255/n)<<16^t*n<<8^e*n)},{isPrimitive:!1,match:i=>Object(i)===i,fromHexString(i,t,e=1){const n=Ig.fromHexString(i);t.r=(n>>16&255)/255*e,t.g=(n>>8&255)/255*e,t.b=(255&n)/255*e},toHexString:({r:i,g:t,b:e},n=1)=>Ig.toHexString(i*(n=255/n)<<16^t*n<<8^e*n)}];class Dwe extends la{constructor(t,e,n,r){super(t,e,n,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=function Awe(i){return Ewe.find(t=>t.match(i))}(this.initialValue),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const s=ED(this.$text.value);s&&this._setValueFromHexString(s)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(t){if(this._format.isPrimitive){const e=this._format.fromHexString(t);this.setValue(e)}else this._format.fromHexString(t,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(t){return this._setValueFromHexString(t),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class AD extends la{constructor(t,e,n){super(t,e,n,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",r=>{r.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class Iwe extends la{constructor(t,e,n,r,s,o){super(t,e,n,"number"),this._initInput(),this.min(r),this.max(s);const a=void 0!==o;this.step(a?o:this._getImplicitStep(),a),this.updateDisplay()}decimals(t){return this._decimals=t,this.updateDisplay(),this}min(t){return this._min=t,this._onUpdateMinMax(),this}max(t){return this._max=t,this._onUpdateMinMax(),this}step(t,e=!0){return this._step=t,this._stepExplicit=e,this}updateDisplay(){const t=this.getValue();if(this._hasSlider){let e=(t-this._min)/(this._max-this._min);e=Math.max(0,Math.min(e,1)),this.$fill.style.width=100*e+"%"}return this._inputFocused||(this.$input.value=void 0===this._decimals?t:t.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;const n=b=>{const v=parseFloat(this.$input.value);isNaN(v)||(this._snapClampSetValue(v+b),this.$input.value=this.getValue())};let a,l,c,d,u,o=!1;const m=b=>{if(o){const v=b.clientX-a;Math.abs(b.clientY-l)>5?(b.preventDefault(),this.$input.blur(),o=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(v)>5&&_()}o||(u-=(b.clientY-c)*this._step*this._arrowKeyMultiplier(b),d+u>this._max?u=this._max-d:d+u<this._min&&(u=this._min-d),this._snapClampSetValue(d+u)),c=b.clientY},_=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",_)};this.$input.addEventListener("input",()=>{let b=parseFloat(this.$input.value);isNaN(b)||(this._stepExplicit&&(b=this._snap(b)),this.setValue(this._clamp(b)))}),this.$input.addEventListener("keydown",b=>{"Enter"===b.key&&this.$input.blur(),"ArrowUp"===b.code&&(b.preventDefault(),n(this._step*this._arrowKeyMultiplier(b))),"ArrowDown"===b.code&&(b.preventDefault(),n(this._step*this._arrowKeyMultiplier(b)*-1))}),this.$input.addEventListener("wheel",b=>{this._inputFocused&&(b.preventDefault(),n(this._step*this._normalizeMouseWheel(b)))},{passive:!1}),this.$input.addEventListener("mousedown",b=>{a=b.clientX,l=c=b.clientY,o=!0,d=this.getValue(),u=0,window.addEventListener("mousemove",m),window.addEventListener("mouseup",_)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=g=>{const b=this.$slider.getBoundingClientRect();let v=((g,b,v,y,T)=>(g-b)/(v-b)*(this._max-y)+y)(g,b.left,b.right,this._min);this._snapClampSetValue(v)},r=g=>{e(g.clientX)},s=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",s)};let a,l,o=!1;const c=g=>{g.preventDefault(),this._setDraggingStyle(!0),e(g.touches[0].clientX),o=!1},u=g=>{if(o){const v=g.touches[0].clientY-l;Math.abs(g.touches[0].clientX-a)>Math.abs(v)?c(g):(window.removeEventListener("touchmove",u),window.removeEventListener("touchend",h))}else g.preventDefault(),e(g.touches[0].clientX)},h=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",u),window.removeEventListener("touchend",h)},f=this._callOnFinishChange.bind(this);let _;this.$slider.addEventListener("mousedown",g=>{this._setDraggingStyle(!0),e(g.clientX),window.addEventListener("mousemove",r),window.addEventListener("mouseup",s)}),this.$slider.addEventListener("touchstart",g=>{g.touches.length>1||(this._hasScrollBar?(a=g.touches[0].clientX,l=g.touches[0].clientY,o=!0):c(g),window.addEventListener("touchmove",u,{passive:!1}),window.addEventListener("touchend",h))},{passive:!1}),this.$slider.addEventListener("wheel",g=>{if(Math.abs(g.deltaX)<Math.abs(g.deltaY)&&this._hasScrollBar)return;g.preventDefault();const v=this._normalizeMouseWheel(g)*this._step;this._snapClampSetValue(this.getValue()+v),this.$input.value=this.getValue(),clearTimeout(_),_=setTimeout(f,400)},{passive:!1})}_setDraggingStyle(t,e="horizontal"){this.$slider&&this.$slider.classList.toggle("active",t),document.body.classList.toggle("lil-gui-dragging",t),document.body.classList.toggle(`lil-gui-${e}`,t)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(t){let{deltaX:e,deltaY:n}=t;return Math.floor(t.deltaY)!==t.deltaY&&t.wheelDelta&&(e=0,n=-t.wheelDelta/120,n*=this._stepExplicit?1:10),e+-n}_arrowKeyMultiplier(t){let e=this._stepExplicit?1:10;return t.shiftKey?e*=10:t.altKey&&(e/=10),e}_snap(t){const e=Math.round(t/this._step)*this._step;return parseFloat(e.toPrecision(15))}_clamp(t){return t<this._min&&(t=this._min),t>this._max&&(t=this._max),t}_snapClampSetValue(t){this.setValue(this._clamp(this._snap(t)))}get _hasScrollBar(){const t=this.parent.root.$children;return t.scrollHeight>t.clientHeight}get _hasMin(){return void 0!==this._min}get _hasMax(){return void 0!==this._max}}class Pwe extends la{constructor(t,e,n,r){super(t,e,n,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach(s=>{const o=document.createElement("option");o.innerHTML=s,this.$select.appendChild(o)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const t=this.getValue(),e=this._values.indexOf(t);return this.$select.selectedIndex=e,this.$display.innerHTML=-1===e?t:this._names[e],this}}class kwe extends la{constructor(t,e,n){super(t,e,n,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",r=>{"Enter"===r.code&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let S5=!1;class DD{constructor({parent:t,autoPlace:e=void 0===t,container:n,width:r,title:s="Controls",closeFolders:o=!1,injectStyles:a=!0,touchStyles:l=!0}={}){if(this.parent=t,this.root=t?t.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",c=>{("Enter"===c.code||"Space"===c.code)&&(c.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(s),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),l&&this.domElement.classList.add("allow-touch-styles"),!S5&&a&&(function Lwe(i){const t=document.createElement("style");t.innerHTML=i;const e=document.querySelector("head link[rel=stylesheet], head style");e?document.head.insertBefore(t,e):document.head.appendChild(t)}('.lil-gui {\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  line-height: 1;\n  font-weight: normal;\n  font-style: normal;\n  text-align: left;\n  background-color: var(--background-color);\n  color: var(--text-color);\n  user-select: none;\n  -webkit-user-select: none;\n  touch-action: manipulation;\n  --background-color: #1f1f1f;\n  --text-color: #ebebeb;\n  --title-background-color: #111111;\n  --title-text-color: #ebebeb;\n  --widget-color: #424242;\n  --hover-color: #4f4f4f;\n  --focus-color: #595959;\n  --number-color: #2cc9ff;\n  --string-color: #a2db3c;\n  --font-size: 11px;\n  --input-font-size: 11px;\n  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;\n  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;\n  --padding: 4px;\n  --spacing: 4px;\n  --widget-height: 20px;\n  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);\n  --name-width: 45%;\n  --slider-knob-width: 2px;\n  --slider-input-width: 27%;\n  --color-input-width: 27%;\n  --slider-input-min-width: 45px;\n  --color-input-min-width: 45px;\n  --folder-indent: 7px;\n  --widget-padding: 0 0 0 3px;\n  --widget-border-radius: 2px;\n  --checkbox-size: calc(0.75 * var(--widget-height));\n  --scrollbar-width: 5px;\n}\n.lil-gui, .lil-gui * {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n.lil-gui.root {\n  width: var(--width, 245px);\n  display: flex;\n  flex-direction: column;\n}\n.lil-gui.root > .title {\n  background: var(--title-background-color);\n  color: var(--title-text-color);\n}\n.lil-gui.root > .children {\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.lil-gui.root > .children::-webkit-scrollbar {\n  width: var(--scrollbar-width);\n  height: var(--scrollbar-width);\n  background: var(--background-color);\n}\n.lil-gui.root > .children::-webkit-scrollbar-thumb {\n  border-radius: var(--scrollbar-width);\n  background: var(--focus-color);\n}\n@media (pointer: coarse) {\n  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {\n    --widget-height: 28px;\n    --padding: 6px;\n    --spacing: 6px;\n    --font-size: 13px;\n    --input-font-size: 16px;\n    --folder-indent: 10px;\n    --scrollbar-width: 7px;\n    --slider-input-min-width: 50px;\n    --color-input-min-width: 65px;\n  }\n}\n.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {\n  --widget-height: 28px;\n  --padding: 6px;\n  --spacing: 6px;\n  --font-size: 13px;\n  --input-font-size: 16px;\n  --folder-indent: 10px;\n  --scrollbar-width: 7px;\n  --slider-input-min-width: 50px;\n  --color-input-min-width: 65px;\n}\n.lil-gui.autoPlace {\n  max-height: 100%;\n  position: fixed;\n  top: 0;\n  right: 15px;\n  z-index: 1001;\n}\n\n.lil-gui .controller {\n  display: flex;\n  align-items: center;\n  padding: 0 var(--padding);\n  margin: var(--spacing) 0;\n}\n.lil-gui .controller.disabled {\n  opacity: 0.5;\n}\n.lil-gui .controller.disabled, .lil-gui .controller.disabled * {\n  pointer-events: none !important;\n}\n.lil-gui .controller > .name {\n  min-width: var(--name-width);\n  flex-shrink: 0;\n  white-space: pre;\n  padding-right: var(--spacing);\n  line-height: var(--widget-height);\n}\n.lil-gui .controller .widget {\n  position: relative;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  min-height: var(--widget-height);\n}\n.lil-gui .controller.string input {\n  color: var(--string-color);\n}\n.lil-gui .controller.boolean .widget {\n  cursor: pointer;\n}\n.lil-gui .controller.color .display {\n  width: 100%;\n  height: var(--widget-height);\n  border-radius: var(--widget-border-radius);\n  position: relative;\n}\n@media (hover: hover) {\n  .lil-gui .controller.color .display:hover:before {\n    content: " ";\n    display: block;\n    position: absolute;\n    border-radius: var(--widget-border-radius);\n    border: 1px solid #fff9;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n}\n.lil-gui .controller.color input[type=color] {\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n}\n.lil-gui .controller.color input[type=text] {\n  margin-left: var(--spacing);\n  font-family: var(--font-family-mono);\n  min-width: var(--color-input-min-width);\n  width: var(--color-input-width);\n  flex-shrink: 0;\n}\n.lil-gui .controller.option select {\n  opacity: 0;\n  position: absolute;\n  width: 100%;\n  max-width: 100%;\n}\n.lil-gui .controller.option .display {\n  position: relative;\n  pointer-events: none;\n  border-radius: var(--widget-border-radius);\n  height: var(--widget-height);\n  line-height: var(--widget-height);\n  max-width: 100%;\n  overflow: hidden;\n  word-break: break-all;\n  padding-left: 0.55em;\n  padding-right: 1.75em;\n  background: var(--widget-color);\n}\n@media (hover: hover) {\n  .lil-gui .controller.option .display.focus {\n    background: var(--focus-color);\n  }\n}\n.lil-gui .controller.option .display.active {\n  background: var(--focus-color);\n}\n.lil-gui .controller.option .display:after {\n  font-family: "lil-gui";\n  content: "\u2195";\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  padding-right: 0.375em;\n}\n.lil-gui .controller.option .widget,\n.lil-gui .controller.option select {\n  cursor: pointer;\n}\n@media (hover: hover) {\n  .lil-gui .controller.option .widget:hover .display {\n    background: var(--hover-color);\n  }\n}\n.lil-gui .controller.number input {\n  color: var(--number-color);\n}\n.lil-gui .controller.number.hasSlider input {\n  margin-left: var(--spacing);\n  width: var(--slider-input-width);\n  min-width: var(--slider-input-min-width);\n  flex-shrink: 0;\n}\n.lil-gui .controller.number .slider {\n  width: 100%;\n  height: var(--widget-height);\n  background-color: var(--widget-color);\n  border-radius: var(--widget-border-radius);\n  padding-right: var(--slider-knob-width);\n  overflow: hidden;\n  cursor: ew-resize;\n  touch-action: pan-y;\n}\n@media (hover: hover) {\n  .lil-gui .controller.number .slider:hover {\n    background-color: var(--hover-color);\n  }\n}\n.lil-gui .controller.number .slider.active {\n  background-color: var(--focus-color);\n}\n.lil-gui .controller.number .slider.active .fill {\n  opacity: 0.95;\n}\n.lil-gui .controller.number .fill {\n  height: 100%;\n  border-right: var(--slider-knob-width) solid var(--number-color);\n  box-sizing: content-box;\n}\n\n.lil-gui-dragging .lil-gui {\n  --hover-color: var(--widget-color);\n}\n.lil-gui-dragging * {\n  cursor: ew-resize !important;\n}\n\n.lil-gui-dragging.lil-gui-vertical * {\n  cursor: ns-resize !important;\n}\n\n.lil-gui .title {\n  height: var(--title-height);\n  line-height: calc(var(--title-height) - 4px);\n  font-weight: 600;\n  padding: 0 var(--padding);\n  -webkit-tap-highlight-color: transparent;\n  cursor: pointer;\n  outline: none;\n  text-decoration-skip: objects;\n}\n.lil-gui .title:before {\n  font-family: "lil-gui";\n  content: "\u25be";\n  padding-right: 2px;\n  display: inline-block;\n}\n.lil-gui .title:active {\n  background: var(--title-background-color);\n  opacity: 0.75;\n}\n@media (hover: hover) {\n  body:not(.lil-gui-dragging) .lil-gui .title:hover {\n    background: var(--title-background-color);\n    opacity: 0.85;\n  }\n  .lil-gui .title:focus {\n    text-decoration: underline var(--focus-color);\n  }\n}\n.lil-gui.root > .title:focus {\n  text-decoration: none !important;\n}\n.lil-gui.closed > .title:before {\n  content: "\u25b8";\n}\n.lil-gui.closed > .children {\n  transform: translateY(-7px);\n  opacity: 0;\n}\n.lil-gui.closed:not(.transition) > .children {\n  display: none;\n}\n.lil-gui.transition > .children {\n  transition-duration: 300ms;\n  transition-property: height, opacity, transform;\n  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);\n  overflow: hidden;\n  pointer-events: none;\n}\n.lil-gui .children:empty:before {\n  content: "Empty";\n  padding: 0 var(--padding);\n  margin: var(--spacing) 0;\n  display: block;\n  height: var(--widget-height);\n  font-style: italic;\n  line-height: var(--widget-height);\n  opacity: 0.5;\n}\n.lil-gui.root > .children > .lil-gui > .title {\n  border: 0 solid var(--widget-color);\n  border-width: 1px 0;\n  transition: border-color 300ms;\n}\n.lil-gui.root > .children > .lil-gui.closed > .title {\n  border-bottom-color: transparent;\n}\n.lil-gui + .controller {\n  border-top: 1px solid var(--widget-color);\n  margin-top: 0;\n  padding-top: var(--spacing);\n}\n.lil-gui .lil-gui .lil-gui > .title {\n  border: none;\n}\n.lil-gui .lil-gui .lil-gui > .children {\n  border: none;\n  margin-left: var(--folder-indent);\n  border-left: 2px solid var(--widget-color);\n}\n.lil-gui .lil-gui .controller {\n  border: none;\n}\n\n.lil-gui input {\n  -webkit-tap-highlight-color: transparent;\n  border: 0;\n  outline: none;\n  font-family: var(--font-family);\n  font-size: var(--input-font-size);\n  border-radius: var(--widget-border-radius);\n  height: var(--widget-height);\n  background: var(--widget-color);\n  color: var(--text-color);\n  width: 100%;\n}\n@media (hover: hover) {\n  .lil-gui input:hover {\n    background: var(--hover-color);\n  }\n  .lil-gui input:active {\n    background: var(--focus-color);\n  }\n}\n.lil-gui input:disabled {\n  opacity: 1;\n}\n.lil-gui input[type=text],\n.lil-gui input[type=number] {\n  padding: var(--widget-padding);\n}\n.lil-gui input[type=text]:focus,\n.lil-gui input[type=number]:focus {\n  background: var(--focus-color);\n}\n.lil-gui input::-webkit-outer-spin-button,\n.lil-gui input::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n.lil-gui input[type=number] {\n  -moz-appearance: textfield;\n}\n.lil-gui input[type=checkbox] {\n  appearance: none;\n  -webkit-appearance: none;\n  height: var(--checkbox-size);\n  width: var(--checkbox-size);\n  border-radius: var(--widget-border-radius);\n  text-align: center;\n  cursor: pointer;\n}\n.lil-gui input[type=checkbox]:checked:before {\n  font-family: "lil-gui";\n  content: "\u2713";\n  font-size: var(--checkbox-size);\n  line-height: var(--checkbox-size);\n}\n@media (hover: hover) {\n  .lil-gui input[type=checkbox]:focus {\n    box-shadow: inset 0 0 0 1px var(--focus-color);\n  }\n}\n.lil-gui button {\n  -webkit-tap-highlight-color: transparent;\n  outline: none;\n  cursor: pointer;\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  color: var(--text-color);\n  width: 100%;\n  height: var(--widget-height);\n  text-transform: none;\n  background: var(--widget-color);\n  border-radius: var(--widget-border-radius);\n  border: 1px solid var(--widget-color);\n  text-align: center;\n  line-height: calc(var(--widget-height) - 4px);\n}\n@media (hover: hover) {\n  .lil-gui button:hover {\n    background: var(--hover-color);\n    border-color: var(--hover-color);\n  }\n  .lil-gui button:focus {\n    border-color: var(--focus-color);\n  }\n}\n.lil-gui button:active {\n  background: var(--focus-color);\n}\n\n@font-face {\n  font-family: "lil-gui";\n  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");\n}'),S5=!0),n?n.appendChild(this.domElement):e&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this._closeFolders=o}add(t,e,n,r,s){if(Object(n)===n)return new Pwe(this,t,e,n);const o=t[e];switch(typeof o){case"number":return new Iwe(this,t,e,n,r,s);case"boolean":return new Rwe(this,t,e);case"string":return new kwe(this,t,e);case"function":return new AD(this,t,e)}console.error("gui.add failed\n\tproperty:",e,"\n\tobject:",t,"\n\tvalue:",o)}addColor(t,e,n=1){return new Dwe(this,t,e,n)}addFolder(t){const e=new DD({parent:this,title:t});return this.root._closeFolders&&e.close(),e}load(t,e=!0){return t.controllers&&this.controllers.forEach(n=>{n instanceof AD||n._name in t.controllers&&n.load(t.controllers[n._name])}),e&&t.folders&&this.folders.forEach(n=>{n._title in t.folders&&n.load(t.folders[n._title])}),this}save(t=!0){const e={controllers:{},folders:{}};return this.controllers.forEach(n=>{if(!(n instanceof AD)){if(n._name in e.controllers)throw new Error(`Cannot save GUI with duplicate property "${n._name}"`);e.controllers[n._name]=n.save()}}),t&&this.folders.forEach(n=>{if(n._title in e.folders)throw new Error(`Cannot save GUI with duplicate folder "${n._title}"`);e.folders[n._title]=n.save()}),e}open(t=!0){return this._setClosed(!t),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(t){this._closed!==t&&(this._closed=t,this._callOnOpenClose(this))}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(t=!0){return this._setClosed(!t),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{this.$children.style.height=this.$children.clientHeight+"px",this.domElement.classList.add("transition");const n=s=>{s.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",n))};this.$children.addEventListener("transitionend",n);const r=t?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!t),requestAnimationFrame(()=>{this.$children.style.height=r+"px"})}),this}title(t){return this._title=t,this.$title.innerHTML=t,this}reset(t=!0){return(t?this.controllersRecursive():this.controllers).forEach(n=>n.reset()),this}onChange(t){return this._onChange=t,this}_callOnChange(t){this.parent&&this.parent._callOnChange(t),void 0!==this._onChange&&this._onChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(t){this.parent&&this.parent._callOnFinishChange(t),void 0!==this._onFinishChange&&this._onFinishChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onOpenClose(t){return this._onOpenClose=t,this}_callOnOpenClose(t){this.parent&&this.parent._callOnOpenClose(t),void 0!==this._onOpenClose&&this._onOpenClose.call(this,t)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(t=>t.destroy())}controllersRecursive(){let t=Array.from(this.controllers);return this.folders.forEach(e=>{t=t.concat(e.controllersRecursive())}),t}foldersRecursive(){let t=Array.from(this.folders);return this.folders.forEach(e=>{t=t.concat(e.foldersRecursive())}),t}}const Owe=DD,Nwe=["outlinePass"],jwe=()=>["#ffffff"],Bwe=()=>[0,0,8],Uwe=()=>["#aaaaaa"],Vwe=()=>["#ddffdd"],zwe=()=>[3,48,24],ID=(i,t,e)=>[i,t,e];function Hwe(i,t){if(1&i){const e=Bi();K(0,"th-mesh",13),Ke("onMouseEnter",function(r){return Pt(e),kt(Qt().onHover(r))})("onMouseExit",function(){return Pt(e),kt(Qt().onBlur())})("onPointerDown",function(r){return Pt(e),kt(Qt().onPointerDown(r))}),ve(1,"th-meshPhongMaterial",14),de()}if(2&i){const e=t.$implicit;Qt(),O("geometry",Ot(11).objRef)("position",Ic(7,ID,e.x,e.y,e.z))("scale",Ic(11,ID,e.scale,e.scale,e.scale))("receiveShadow",!0)("castShadow",!0),B(),O("flatShading",!0)("color",e.color)}}let Gwe=(()=>{class i{constructor(e){this.elem=e,this.outlinePassResolution=new $(window.innerWidth,window.innerHeight),this.meshData=[],this.visibleEdgeColor="#ffffff",this.hiddenEdgeColor="#190a05",this.edgeStrength=3,this.edgeGlow=.5,this.edgeThickness=1,this.pulsePeriod=1,this.initGUI(),this.initMeshData()}initGUI(){const e=new Owe({title:"Settings",injectStyles:!0,container:this.elem.nativeElement,autoPlace:!0});e.add(this,"edgeStrength",.01,10),e.add(this,"edgeGlow",0,2),e.add(this,"edgeThickness",1,4),e.add(this,"pulsePeriod",0,5),e.addColor(this,"visibleEdgeColor"),e.addColor(this,"hiddenEdgeColor")}ngOnInit(){this.outlinePassResolution=new $(window.innerWidth,window.innerHeight),this.outlinePass&&(this.outlinePass.resolution=this.outlinePassResolution)}initMeshData(){for(let e=0;e<20;e++)this.meshData.push({color:(new Te).setHSL(Math.random(),1,.3),x:4*Math.random()-2,y:4*Math.random()-2,z:4*Math.random()-2,scale:.3*Math.random()+.1})}onHover(e){e.component.objRef&&(this.outlinePass.selectedObjects=[e.component.objRef])}onBlur(){this.outlinePass.selectedObjects=[]}onPointerDown(e){e.component.material?.color.set("#ff0000")}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt))};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-outline-pass-events-example"]],viewQuery:function(n,r){if(1&n&&Ei(Nwe,7),2&n){let s;bt(s=vt())&&(r.outlinePass=s.first)}},decls:19,vars:33,consts:[["thecanvas",""],["scene",""],["camera",""],["light",""],["geometry",""],["outlinePass",""],[3,"shadow","thStats"],[3,"background"],[3,"position","fov","near","far"],[3,"color","intensity"],[3,"args"],[3,"geometry","position","scale","receiveShadow","castShadow","onMouseEnter","onMouseExit","onPointerDown",4,"ngFor","ngForOf"],[3,"args","visibleEdgeColor","hiddenEdgeColor","edgeStrength","edgeGlow","edgeThickness","pulsePeriod"],[3,"onMouseEnter","onMouseExit","onPointerDown","geometry","position","scale","receiveShadow","castShadow"],[3,"flatShading","color"]],template:function(n,r){if(1&n&&(K(0,"th-canvas",6,0)(2,"th-scene",7,1)(4,"th-perspectiveCamera",8,2),ve(6,"th-orbitControls"),de(),ve(7,"th-ambientLight",9)(8,"th-directionalLight",9,3)(10,"th-sphereGeometry",10,4),si(12,Hwe,2,15,"th-mesh",11),de(),K(13,"th-effectComposer"),ve(14,"th-renderPass")(15,"th-outlinePass",12,5),un(17,"color"),un(18,"color"),de()()),2&n){const s=Ot(3),o=Ot(5);O("shadow",!0)("thStats",!0),B(2),O("background",ae(24,jwe)),B(2),O("position",ae(25,Bwe))("fov",45)("near",.1)("far",100),B(3),O("color",ae(26,Uwe))("intensity",3),B(),O("color",ae(27,Vwe))("intensity",1.8),B(2),O("args",ae(28,zwe)),B(2),O("ngForOf",r.meshData),B(3),O("args",Ic(29,ID,r.outlinePassResolution,s.objRef,o.objRef))("visibleEdgeColor",Tn(17,20,r.visibleEdgeColor))("hiddenEdgeColor",Tn(18,22,r.hiddenEdgeColor))("edgeStrength",r.edgeStrength)("edgeGlow",r.edgeGlow)("edgeThickness",r.edgeThickness)("pulsePeriod",r.pulsePeriod)}},dependencies:[_l,So,Dn,Sr,za,Mr,an,xd,q0,pg,nye,QA,Xi,Qh,Mo,Sg],styles:["[_nghost-%COMP%]     .lil-gui{position:fixed;right:0;z-index:9999}"]})}return i})();const Wwe=["camera"],$we=()=>["#72645b",2,15],Xwe=i=>[0,i,0],R5=i=>[i,0,0],qwe=()=>[40,40],Ywe=()=>({color:"#999999",specular:"#101010"}),Zwe=i=>[0,i,.3],Kwe=()=>[.001,.001,.001],Qwe=()=>({color:"#0055ff",flatShading:!0}),Jwe=()=>["#443333","#111122"],eTe=()=>[1,1,1],tTe=i=>[.5,1,i],iTe=()=>[35,2,1,15];let nTe=(()=>{class i{constructor(){this.Math=Math,this.cameraPosition=new C(3,.15,3),this.assetPath=`${ss}dolphins.ply`}onBeforeRender(){const e=5e-4*Date.now();this.camera&&(this.camera.position=new C(2.5*Math.sin(e),.15,2.5*Math.cos(e)),this.camera.lookAt=[0,.1,0])}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-plyloader-example"]],viewQuery:function(n,r){if(1&n&&Ei(Wwe,5),2&n){let s;bt(s=vt())&&(r.camera=s.first)}},decls:17,vars:58,consts:[["camera",""],[3,"onRender","shadow"],[3,"background","fog"],[3,"position","rotation","receiveShadow"],[3,"args"],[3,"rotation","position","scale","castShadow","receiveShadow"],["loadPLY","",3,"url"],[3,"args","intensity"],[3,"castShadow","position","color","intensity","receiveShadow"]],template:function(n,r){if(1&n){const s=Bi();K(0,"th-canvas",1),Ke("onRender",function(){return Pt(s),kt(r.onBeforeRender())}),K(1,"th-scene",2),un(2,"color"),un(3,"fog"),K(4,"th-mesh",3),ve(5,"th-planeGeometry",4)(6,"th-meshPhongMaterial",4),de(),K(7,"th-mesh",5),ve(8,"th-bufferGeometry",6)(9,"th-meshStandardMaterial",4),de(),ve(10,"th-hemisphereLight",7)(11,"th-directionalLight",8),un(12,"color"),ve(13,"th-directionalLight",8),un(14,"color"),ve(15,"th-perspectiveCamera",4,0),de()()}2&n&&(O("shadow",!0),B(),O("background",Tn(2,32,"#72645b"))("fog",Tn(3,34,ae(40,$we))),B(3),O("position",Ft(41,Xwe,-.5))("rotation",Ft(43,R5,-r.Math.PI/2))("receiveShadow",!0),B(),O("args",ae(45,qwe)),B(),O("args",ae(46,Ywe)),B(),O("rotation",Ft(47,R5,-r.Math.PI/2))("position",Ft(49,Zwe,-.2))("scale",ae(51,Kwe))("castShadow",!0)("receiveShadow",!0),B(),O("url",r.assetPath),B(),O("args",ae(52,Qwe)),B(),O("args",ae(53,Jwe))("intensity",3),B(),O("castShadow",!0)("position",ae(54,eTe))("color",Tn(12,36,"#ffffff"))("intensity",1.35)("castShadow",!0)("receiveShadow",!0)("intensity",3),B(2),O("castShadow",!0)("position",Ft(55,tTe,-1))("color",Tn(14,38,"#ffaa00"))("intensity",1)("castShadow",!0)("receiveShadow",!0)("intensity",3),B(2),O("args",ae(57,iTe)))},dependencies:[Dn,za,GE,Mr,an,xd,eG,To,Yh,Xi,jye,Sg,Bz],encapsulation:2,changeDetection:0})}return i})();const rTe=["object"],sTe=["light"],oTe=i=>[i],aTe=i=>({value:i}),lTe=i=>({amount:i}),C5=()=>["#ffffff"],cTe=i=>[0,0,i],dTe=()=>["#333333"],uTe=()=>[1,4,4];function hTe(i,t){if(1&i&&(K(0,"th-mesh",15),ve(1,"th-meshPhongMaterial",16),de()),2&i){const e=t.$implicit;Qt(),O("geometry",Ot(15).objRef)("position",e.pos)("rotation",e.rotation)("scale",e.scale),B(),O("flatShading",!0)("color",e.color)}}let fTe=(()=>{class i{constructor(){this.DotScreenShader=yG,this.RGBShiftShader=xG,this.shiftAmount=.0015,this.zDist=400,this.meshData=[],this.initMeshData()}ngOnInit(){this.light?.position?.set(1,1,1)}initMeshData(){for(let e=0;e<100;e++){const n=50*Math.random();this.meshData.push({pos:new C(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize().multiplyScalar(Math.random()*this.zDist),rotation:new Bs(2*Math.random(),2*Math.random(),2*Math.random()),scale:new C(n,n,n),color:new Te(16777215*Math.random())})}}animate(){this.object?.objRef?.rotation&&(this.object.objRef.rotation.x+=.005,this.object.objRef.rotation.y+=.01)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-post-processing-example"]],viewQuery:function(n,r){if(1&n&&(Ei(rTe,7),Ei(sTe,7)),2&n){let s;bt(s=vt())&&(r.object=s.first),bt(s=vt())&&(r.light=s.first)}},decls:19,vars:31,consts:[["thecanvas",""],["light",""],["geometry",""],["object",""],["for","shift"],["id","shift","type","range",3,"ngModelChange","ngModel","min","max","step"],[3,"onRender","shadow","thStats"],[3,"strength"],[3,"args","uniforms"],[3,"background"],[3,"position","fov","near","far"],[3,"color","intensity"],[3,"color"],[3,"args"],[3,"geometry","position","rotation","scale",4,"ngFor","ngForOf"],[3,"geometry","position","rotation","scale"],[3,"flatShading","color"]],template:function(n,r){if(1&n){const s=Bi();K(0,"label",4),Jt(1,"Shift Amount"),de(),K(2,"input",5),Sm("ngModelChange",function(a){return Pt(s),Cb(r.shiftAmount,a)||(r.shiftAmount=a),kt(a)}),de(),K(3,"th-canvas",6,0),Ke("onRender",function(){return Pt(s),kt(r.animate())}),K(5,"th-effectComposer"),ve(6,"th-renderPass")(7,"th-unrealBloomPass",7)(8,"th-shaderPass",8),de(),K(9,"th-scene",9),ve(10,"th-perspectiveCamera",10)(11,"th-ambientLight",11)(12,"th-directionalLight",12,1)(14,"th-sphereGeometry",13,2),K(16,"th-object3D",null,3),si(18,hTe,2,6,"th-mesh",14),de()()()}2&n&&(B(2),Mm("ngModel",r.shiftAmount),O("min",.0015)("max",.2)("step",.005),B(),O("shadow",!0)("thStats",!0),B(4),O("strength",1),B(),O("args",Ft(19,oTe,r.RGBShiftShader))("uniforms",Ft(23,lTe,Ft(21,aTe,r.shiftAmount))),B(),O("background",ae(25,C5)),B(),O("position",Ft(26,cTe,r.zDist))("fov",70)("near",1)("far",1e3),B(),O("color",ae(28,dTe))("intensity",6),B(),O("color",ae(29,C5)),B(2),O("args",ae(30,uTe)),B(4),O("ngForOf",r.meshData))},dependencies:[_l,Dn,ht,Sr,za,Mr,an,xd,q0,pg,QA,J4,fG,Xi,Mo,tx,wD,dD,hx],styles:["label[_ngcontent-%COMP%]{margin-right:.5em}"],changeDetection:0})}return i})();const PD=i=>[0,i,0],mTe=()=>[0,1,0],pTe=()=>[4,10,2],gTe=i=>[i,0,0],_Te=()=>[100,100],bTe=()=>[55,2,.1,100],vTe=(i,t)=>[i,0,t],yTe=()=>[0,0,0];let xTe=(()=>{class i{constructor(e){this.Math=Math,this.selected=!1,this.glbPath=`${ss}mac-draco.glb`,this.clock=new md(!0),this.plane=new Vs(new C(0,1,0),3),this.rotation=[0,0,0],this.position=[0,0,0],this.uniforms={time:{value:1}},this.fragmentShader1="\nuniform float time;\nvarying vec2 vUv;\n\nvoid main( void ) {\n  vec2 position = - 1.0 + 2.0 * vUv;\n\n  float red = abs( sin( position.x * position.y + time / 5.0 ) );\n  float green = abs( sin( position.x * position.y + time / 4.0 ) );\n  float blue = abs( sin( position.x * position.y + time / 3.0 ) );\n  gl_FragColor = vec4( red, green, blue, 1.0 );\n\n}\n",this.fragmentShader2="\n  uniform float time;\n  varying vec2 vUv;\n\n  void main( void ) {\n    vec2 position = vUv;\n    float color = 0.0;\n    color += sin( position.x * cos( time / 15.0 ) * 80.0 ) + cos( position.y * cos( time / 15.0 ) * 10.0 );\n    color += sin( position.y * sin( time / 10.0 ) * 40.0 ) + cos( position.x * sin( time / 25.0 ) * 40.0 );\n    color += sin( position.x * sin( time / 5.0 ) * 10.0 ) + sin( position.y * sin( time / 35.0 ) * 80.0 );\n    color *= sin( time / 10.0 ) * 0.5;\n    gl_FragColor = vec4( vec3( color, color * 0.5, sin( color + time / 3.0 ) * 0.75 ), 1.0 );\n  }\n  ",this.vertexShader="varying vec2 vUv;\n  void main() {\n    vUv = uv;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix * mvPosition;\n  }\n  ",e.setDecoderPath("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/jsm/libs/draco/gltf/"),e.setCrossOrigin("no-cors"),this.calcPose()}onBeforeRender(){this.calcPose(),this.calcUniforms()}calcPose(){const e=this.clock.getElapsedTime();this.rotation=[st.lerp(this.rotation[0],Math.cos(e/2)/20+.25,.1),st.lerp(this.rotation[1],Math.sin(e/4)/20,.1),st.lerp(this.rotation[2],Math.sin(e/8)/20,.1)],this.position=[0,st.lerp(this.position[1],(-2+Math.sin(e/2))/2,.1),0]}calcUniforms(){this.uniforms.time.value=1+5*this.clock.getElapsedTime()}static#e=this.\u0275fac=function(n){return new(n||i)(P(u0))};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-ref-by-id-example"]],decls:17,vars:45,consts:[["shader",""],["light",""],[3,"onRender","thStats","shadow"],[3,"rotation","position"],["loadGLTF","",3,"onClick","castShadow","url","position","rotation"],[3,"refById"],[3,"vertexShader","fragmentShader","uniforms"],[3,"castShadow","position","lookAt","color","intensity"],[3,"receiveShadow","rotation","position"],[3,"args"],[3,"color"],[3,"args","position","lookAt"]],template:function(n,r){if(1&n){const s=Bi();K(0,"th-canvas",2),Ke("onRender",function(){return Pt(s),kt(r.onBeforeRender())}),K(1,"th-scene"),ve(2,"th-ambientLight"),K(3,"th-group",3)(4,"th-object3D",4),Ke("onClick",function(){Pt(s);const a=Ot(7);return r.selected=!r.selected,kt(a.uniformsNeedUpdate=!0)}),K(5,"th-mesh",5),ve(6,"th-shaderMaterial",6,0),de()()(),ve(8,"th-directionalLight",7,1),un(10,"color"),K(11,"th-mesh",8),ve(12,"th-planeGeometry",9)(13,"th-meshBasicMaterial",10),un(14,"color"),de(),K(15,"th-perspectiveCamera",11),ve(16,"th-orbitControls"),de()()()}2&n&&(O("thStats",!0)("shadow",!0),B(3),O("rotation",Ft(29,PD,r.Math.PI))("position",ae(31,mTe)),B(),O("castShadow",!0)("url",r.glbPath)("position",r.position)("rotation",r.rotation),B(),O("refById","Cube008_2"),B(),O("vertexShader",r.vertexShader)("fragmentShader",r.selected?r.fragmentShader1:r.fragmentShader2)("uniforms",r.uniforms),B(2),O("castShadow",!0)("position",ae(32,pTe))("lookAt",Ft(33,PD,-3))("color",Tn(10,25,"#ffffff"))("intensity",.75),B(3),O("receiveShadow",!0)("rotation",Ft(35,gTe,3*r.Math.PI/2))("position",Ft(37,PD,-3)),B(),O("args",ae(39,_Te)),B(),O("color",Tn(14,27,"#efefef")),B(2),O("args",ae(40,bTe))("position",uo(41,vTe,-5,-15))("lookAt",ae(44,yTe)))},dependencies:[So,Dn,ht,Sr,za,V0,Mr,an,Zp,sye,Yh,Xi,na,Qh,Mo,JA,Sg],encapsulation:2,changeDetection:0})}return i})();const kD=()=>[0,0,0],wTe=()=>[2,2,2],TTe=()=>[1,1,1],MTe=(i,t)=>[i,t],STe=()=>[10,10],E5=()=>[10,10,10],RTe=()=>[45,2,.1,100];let CTe=(()=>{class i extends Mr{constructor(e){super(e)}ngOnInit(){super.ngOnInit(),this.objRef&&(this.objRef.material=new ta({color:"green"}),this.objRef.geometry=new Ki(1,1,1))}static#e=this.\u0275fac=function(n){return new(n||i)(P(ht,4))};static#t=this.\u0275cmp=pe({type:i,selectors:[["th-box"]],features:[Ee(Fye(i)),ge],decls:0,vars:0,template:function(n,r){},encapsulation:2,changeDetection:0})}return i})();const ATe=["thecanvas"],DTe=(i,t)=>({x:0,y:0,width:i,height:t}),ITe=()=>[0,0,1],PTe=()=>["#ffffff"],kTe=()=>[0,0,0],mx=i=>[i,0,0],FTe=()=>[200,32,16],LTe=()=>["#fac400"],OTe=()=>["#f83f0d"],NTe=()=>[400,0,0],jTe=(i,t,e,n)=>({x:i,y:t,width:e,height:n});function BTe(i,t){if(1&i){const e=Bi();K(0,"th-view",13,4),Ke("onRender",function(){const r=Pt(e).$implicit,s=Ot(3);Qt();const o=Ot(3);return kt(r.updateCamera(s.objRef,o.objRef))}),ve(2,"th-perspectiveCamera",14,5),de()}if(2&i){const e=t.$implicit,n=Ot(1),r=Qt();O("scene",Ot(3))("viewPort",Rm(11,jTe,e.left*r.canvasWidth,e.bottom*r.canvasHeight,e.width*r.canvasWidth,e.height*r.canvasHeight))("scissor",n.viewPort)("scissorTest",!0)("clearColor",e.background),B(2),O("position",e.eye)("up",e.up)("fov",e.fov)("aspect",e.width*r.canvasWidth/(e.height*r.canvasHeight))("near",1)("far",1e4)}}const VTe=()=>[0,1,0],zTe=()=>[0,0,.2],HTe=()=>[0,0],GTe=()=>[10,10],A5=()=>[10,10,10],WTe=()=>[45,2,.1,100],$Te=()=>[0,0,0],qTe=()=>[10,10,10],YTe=()=>[45,2,1,1e4],ZTe=()=>[0,0,3e3],KTe=()=>[0,0,0];function QTe(i,t){if(1&i&&(K(0,"th-cSS3DObject",12)(1,"div",13)(2,"div",14),Jt(3),de(),K(4,"div",15),Jt(5),de(),K(6,"div",16),Jt(7),ve(8,"br"),Jt(9),de()()()),2&i){const e=t.$implicit,n=t.index,r=Qt();O("position",r.poses[n].position),B(),Ac("background","rgba(0,127,127,"+(.5*r.Math.random()+.25)+")"),B(2),fl(" ",n+1," "),B(2),fl(" ",e[0]," "),B(2),fl(" ",e[1]," "),B(2),fl(" ",e[2]," ")}}const FD=i=>[0,i,0],eMe=()=>[0,1,0],D5=i=>[i,0,0],tMe=i=>[0,.04,i],iMe=()=>[.0043,.0043,.0043],nMe=()=>[1960,1280],rMe=()=>[4,10,2],sMe=()=>[100,100],oMe=()=>[55,2,.1,100],aMe=(i,t)=>[i,0,t],lMe=()=>[0,0,0],px=[{path:"basic-example",data:{title:"Basic Example",exampleComponent:Zfe,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/basic-example/basic-example.component.ts"]}},{path:"simple-example",data:{title:"Simple Example",exampleComponent:(()=>{class i{constructor(){this.THREE=Hd,this.box=new ir(new C(0,0,0),new C(1.5,1.5,1.5)),this.color=new Te(1,0,0),this.rotation=[0,0,0],this.material=new ta,this.selected=!1,this.material.color.set("green"),setInterval(()=>{0!==this.material.color.r?(this.material=new ta,this.material.color.set("green")):(this.material=new ta,this.material.color.set("red"))},400)}onBeforeRender(){this.rotation=[0,this.rotation[2]+.01,this.rotation[2]+.01]}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-simple-example"]],features:[Ee([d0()])],decls:8,vars:27,consts:[[3,"onRender"],[3,"intensity"],[3,"position","material","rotation","scale"],[3,"onClick","args","material","position"],[3,"args"],[3,"position","intensity","decay"],[3,"args","position","lookAt"]],template:function(n,r){1&n&&(K(0,"th-canvas",0),Ke("onRender",function(){return r.onBeforeRender()}),K(1,"th-scene"),ve(2,"th-ambientLight",1)(3,"th-box",2),K(4,"th-box3Helper",3),Ke("onClick",function(){return r.selected=!r.selected}),de(),ve(5,"th-gridHelper",4)(6,"th-pointLight",5)(7,"th-perspectiveCamera",6),de()()),2&n&&(B(2),O("intensity",3),B(),O("position",ae(15,kD))("material",r.material)("rotation",r.rotation)("scale",r.selected?ae(16,wTe):ae(17,TTe)),B(),O("args",uo(18,MTe,r.box,r.color))("material",r.material)("position",ae(21,kD)),B(),O("args",ae(22,STe)),B(),O("position",ae(23,E5))("intensity",3)("decay",0),B(),O("args",ae(24,RTe))("position",ae(25,E5))("lookAt",ae(26,kD)))},dependencies:[Dn,yve,Bl,Sr,Ga,an,Xi,Qh,CTe],encapsulation:2,changeDetection:0})}return i})(),declarations:["SimpleExampleComponent","Box"],codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/simple-example/simple-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/simple-example/simple-example.component.ts"]}},{path:"introductory-example",data:{title:"Introductory Example",exampleComponent:N0e,declarations:["IntroductoryExampleComponent","Box"],codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/introductory-example/introductory-example.component.ts"]}},{path:"controls-example",data:{title:"Controls Example",exampleComponent:sme,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/controls-example/controls-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/controls-example/controls-example.component.ts"]}},{path:"loader-example",data:{title:"Loader Example",exampleComponent:G0e,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/loader-example/loader-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/loader-example/loader-example.component.ts"]}},{path:"dynamic loader-example",data:{title:"Dynamic Loader Example",exampleComponent:dme,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/dynamic-loader-example/dynamic-loader-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/dynamic-loader-example/dynamic-loader-example.component.ts"]}},{path:"events-example",data:{title:"Events Example",exampleComponent:_me,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/events-example/events-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/events-example/events-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/events-example/events-example.component.scss"]}},{path:"instanced-mesh-example",data:{title:"Instanced Mesh Example",exampleComponent:E0e,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/instanced-mesh-example/instanced-mesh-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/instanced-mesh-example/instanced-mesh-example.component.ts"]}},{path:"post-processing-example",data:{title:"Post Processing Example",exampleComponent:fTe,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/post-processing-example/post-processing-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/post-processing-example/post-processing-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/post-processing-example/post-processing-example.component.scss"]}},{path:"views-example",data:{title:"Multiple Views Example",exampleComponent:(()=>{class i{constructor(){this.Math=Math,this.canvasWidth=128,this.canvasHeight=128,this.mouseX=0,this.mouseY=0,this.views=[{left:0,bottom:0,width:.5,height:1,background:new Te(.5,.5,.7),eye:[0,300,1800],up:[0,1,0],fov:30,updateCamera:(e,n)=>{this.updateSize(),e.position.x+=.05*this.mouseX,e.position.x=Math.max(Math.min(e.position.x,2e3),-2e3),e.lookAt(n.position),e.updateProjectionMatrix()}},{left:.5,bottom:0,width:.5,height:.5,background:new Te(.7,.5,.5),eye:[0,1800,0],up:[0,0,1],fov:45,updateCamera:(e,n)=>{this.updateSize(),e.position.x-=.05*this.mouseX,e.position.x=Math.max(Math.min(e.position.x,2e3),-2e3),e.lookAt(e.position.clone().setY(0)),e.updateProjectionMatrix()}},{left:.5,bottom:.5,width:.5,height:.5,background:new Te(.5,.7,.7),eye:[1400,800,1400],up:[0,1,0],fov:60,updateCamera:(e,n)=>{this.updateSize(),e.position.y-=.05*this.mouseX,e.position.y=Math.max(Math.min(e.position.y,1600),-1600),e.lookAt(n.position),e.updateProjectionMatrix()}}]}ngOnInit(){!this.canvas||!this.canvas.rendererCanvas||(this.shadowTexture=new aE(this.canvas.rendererCanvas))}updateSize(){!this.canvas||!this.canvas.rendererCanvas||(this.canvasWidth=this.canvas.rendererCanvas.width,this.canvasHeight=this.canvas.rendererCanvas.height)}onMouseMove(e){if(!this.canvas||!this.canvas.rendererCanvas)return;const n=this.canvas.rendererCanvas.getBoundingClientRect();this.mouseX=e.clientX-n.left-n.width/2,this.mouseY=e.clientY-n.right-n.height/2}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-views-example"]],viewQuery:function(n,r){if(1&n&&Ei(ATe,7),2&n){let s;bt(s=vt())&&(r.canvas=s.first)}},hostBindings:function(n,r){1&n&&Ke("mousemove",function(o){return r.onMouseMove(o)},0,z_)},decls:13,vars:39,consts:[["thecanvas",""],["scene",""],["geo",""],["mat",""],["thview",""],["camera",""],[3,"disableDefaultView","viewPort"],[3,"position","args","intensity"],[3,"position","rotation"],[3,"args"],[3,"flatShading","shininess","specular","color"],[3,"position","rotation","geometry","material"],[3,"scene","viewPort","scissor","scissorTest","clearColor","onRender",4,"ngFor","ngForOf"],[3,"onRender","scene","viewPort","scissor","scissorTest","clearColor"],[3,"position","up","fov","aspect","near","far"]],template:function(n,r){if(1&n&&(K(0,"th-canvas",6,0)(2,"th-scene",null,1),ve(4,"th-directionalLight",7),K(5,"th-mesh",8),ve(6,"th-sphereGeometry",9,2)(8,"th-meshPhongMaterial",10,3),de(),ve(10,"th-mesh",11)(11,"th-mesh",11),de(),si(12,BTe,4,16,"th-view",12),de()),2&n){const s=Ot(7),o=Ot(9);O("disableDefaultView",!0)("viewPort",uo(21,DTe,.5*r.canvasWidth,r.canvasHeight)),B(4),O("position",ae(24,ITe))("args",ae(25,PTe))("intensity",3),B(),O("position",ae(26,kTe))("rotation",Ft(27,mx,-r.Math.PI/2)),B(),O("args",ae(29,FTe)),B(2),O("flatShading",!1)("shininess",30)("specular",ae(30,LTe))("color",ae(31,OTe)),B(2),O("position",Ft(32,mx,-400))("rotation",Ft(34,mx,-r.Math.PI/2))("geometry",s.objRef)("material",o.objRef),B(),O("position",ae(36,NTe))("rotation",Ft(37,mx,-r.Math.PI/2))("geometry",s.objRef)("material",o.objRef),B(),O("ngForOf",r.views)}},dependencies:[_l,Dn,za,Mr,an,xd,q0,Xi,Ha],changeDetection:0})}return i})(),codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/views-example/views-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/views-example/views-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/views-example/views-example.component.scss"]}},{path:"multi-scene-example",data:{title:"Multiple Scenes Example",codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-scene-example/multi-scene-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-scene-example/multi-scene-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-scene-example/multi-scene-example.component.scss"],exampleComponent:J0e}},{path:"multi-view-postprocessing-example",data:{title:"Multiple View Post Processing Example",exampleComponent:fxe,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-view-postprocessing-example/multi-view-postprocessing-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-view-postprocessing-example/multi-view-postprocessing-example.component.ts"]}},{path:"animation-example",data:{title:"Animation Example",exampleComponent:Hfe,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/animation-example/animation-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/animation-example/animation-example.component.ts"]}},{path:"plyloader-example",data:{title:"PLY Loader Example",exampleComponent:nTe,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/plyloader-example/plyloader-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/plyloader-example/plyloader-example.component.ts"]}},{path:"on-demand-example",data:{title:"On-Demand Rendering Example",exampleComponent:Swe,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/on-demand-example/on-demand-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/on-demand-example/on-demand-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/on-demand-example/on-demand-example.component.scss"]}},{path:"ref-by-id-example",data:{title:"Ref By Id Example",exampleComponent:xTe,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/ref-by-id-example/ref-by-id-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/ref-by-id-example/ref-by-id-example.component.ts"]}},{path:"html-example",data:{title:"Html Content Example",exampleComponent:f0e,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-example/html-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-example/html-example.component.ts"]}},{path:"outline-pass-events-example",data:{title:"Render Pass + Events Example",exampleComponent:Gwe,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/outline-pass-events-example/outline-pass-events-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/outline-pass-events-example/outline-pass-events-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/outline-pass-events-example/outline-pass-events-example.component.scss"]}},{path:"multi-renderer-example",data:{title:"Multi Renderer Example: WebGL + CSS2D",exampleComponent:(()=>{class i{constructor(){this.assetPath1=`${ss}DamagedHelmet.glb`,this.assetPath2=`${ss}BoomBox.glb`,this.rotation=[0,0,0]}onBeforeRender(){this.rotation=[0,this.rotation[1]+.01,0]}resetRotation(){this.rotation=[0,0,0]}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-multi-renderer-example"]],features:[Ee([d0(),jhe()])],decls:13,vars:21,consts:[[3,"onRender"],[3,"thStats"],[3,"intensity"],["loadGLTF","",3,"url","rotation","position"],[3,"position","center"],[1,"label"],[3,"pointerdown"],[3,"args"],[3,"position","decay"],[3,"args","position","lookAt"]],template:function(n,r){1&n&&(K(0,"th-canvas",0),Ke("onRender",function(){return r.onBeforeRender()}),K(1,"th-scene",1),ve(2,"th-ambientLight",2),K(3,"th-object3D",3)(4,"th-cSS2DObject",4)(5,"div",5),Jt(6," A Helmet "),K(7,"button",6),Ke("pointerdown",function(){return r.resetRotation()}),Jt(8,"Reset"),de()()()(),ve(9,"th-gridHelper",7)(10,"th-pointLight",8),K(11,"th-perspectiveCamera",9),ve(12,"th-orbitControls"),de()()()),2&n&&(B(),O("thStats",!0),B(),O("intensity",3),B(),O("url",r.assetPath1)("rotation",r.rotation)("position",ae(13,VTe)),B(),O("position",ae(14,zTe))("center",ae(15,HTe)),B(5),O("args",ae(16,GTe)),B(),O("position",ae(17,A5))("decay",0),B(),O("args",ae(18,WTe))("position",ae(19,A5))("lookAt",ae(20,$Te)))},dependencies:[So,Dn,ht,Bl,Sr,Ga,an,Aye,Xi,na,Mo],styles:[".label{background-color:#d3d3d3;border-radius:5px;line-height:1rem;padding:.5rem;display:inline-block}"],changeDetection:0})}return i})(),codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-renderer-example/multi-renderer-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-renderer-example/multi-renderer-example.component.ts"]}},{path:"css3d-renderer-example",data:{title:"CSS3D Renderer Example",exampleComponent:(()=>{class i{constructor(){this.Math=Math,this.table=[["H","Hydrogen","1.00794",1,1],["He","Helium","4.002602",18,1],["Li","Lithium","6.941",1,2],["Be","Beryllium","9.012182",2,2],["B","Boron","10.811",13,2],["C","Carbon","12.0107",14,2],["N","Nitrogen","14.0067",15,2],["O","Oxygen","15.9994",16,2],["F","Fluorine","18.9984032",17,2],["Ne","Neon","20.1797",18,2],["Na","Sodium","22.98976...",1,3],["Mg","Magnesium","24.305",2,3],["Al","Aluminium","26.9815386",13,3],["Si","Silicon","28.0855",14,3],["P","Phosphorus","30.973762",15,3],["S","Sulfur","32.065",16,3],["Cl","Chlorine","35.453",17,3],["Ar","Argon","39.948",18,3],["K","Potassium","39.948",1,4],["Ca","Calcium","40.078",2,4],["Sc","Scandium","44.955912",3,4],["Ti","Titanium","47.867",4,4],["V","Vanadium","50.9415",5,4],["Cr","Chromium","51.9961",6,4],["Mn","Manganese","54.938045",7,4],["Fe","Iron","55.845",8,4],["Co","Cobalt","58.933195",9,4],["Ni","Nickel","58.6934",10,4],["Cu","Copper","63.546",11,4],["Zn","Zinc","65.38",12,4],["Ga","Gallium","69.723",13,4],["Ge","Germanium","72.63",14,4],["As","Arsenic","74.9216",15,4],["Se","Selenium","78.96",16,4],["Br","Bromine","79.904",17,4],["Kr","Krypton","83.798",18,4],["Rb","Rubidium","85.4678",1,5],["Sr","Strontium","87.62",2,5],["Y","Yttrium","88.90585",3,5],["Zr","Zirconium","91.224",4,5],["Nb","Niobium","92.90628",5,5],["Mo","Molybdenum","95.96",6,5],["Tc","Technetium","(98)",7,5],["Ru","Ruthenium","101.07",8,5],["Rh","Rhodium","102.9055",9,5],["Pd","Palladium","106.42",10,5],["Ag","Silver","107.8682",11,5],["Cd","Cadmium","112.411",12,5],["In","Indium","114.818",13,5],["Sn","Tin","118.71",14,5],["Sb","Antimony","121.76",15,5],["Te","Tellurium","127.6",16,5],["I","Iodine","126.90447",17,5],["Xe","Xenon","131.293",18,5],["Cs","Caesium","132.9054",1,6],["Ba","Barium","132.9054",2,6],["La","Lanthanum","138.90547",4,9],["Ce","Cerium","140.116",5,9],["Pr","Praseodymium","140.90765",6,9],["Nd","Neodymium","144.242",7,9],["Pm","Promethium","(145)",8,9],["Sm","Samarium","150.36",9,9],["Eu","Europium","151.964",10,9],["Gd","Gadolinium","157.25",11,9],["Tb","Terbium","158.92535",12,9],["Dy","Dysprosium","162.5",13,9],["Ho","Holmium","164.93032",14,9],["Er","Erbium","167.259",15,9],["Tm","Thulium","168.93421",16,9],["Yb","Ytterbium","173.054",17,9],["Lu","Lutetium","174.9668",18,9],["Hf","Hafnium","178.49",4,6],["Ta","Tantalum","180.94788",5,6],["W","Tungsten","183.84",6,6],["Re","Rhenium","186.207",7,6],["Os","Osmium","190.23",8,6],["Ir","Iridium","192.217",9,6],["Pt","Platinum","195.084",10,6],["Au","Gold","196.966569",11,6],["Hg","Mercury","200.59",12,6],["Tl","Thallium","204.3833",13,6],["Pb","Lead","207.2",14,6],["Bi","Bismuth","208.9804",15,6],["Po","Polonium","(209)",16,6],["At","Astatine","(210)",17,6],["Rn","Radon","(222)",18,6],["Fr","Francium","(223)",1,7],["Ra","Radium","(226)",2,7],["Ac","Actinium","(227)",4,10],["Th","Thorium","232.03806",5,10],["Pa","Protactinium","231.0588",6,10],["U","Uranium","238.02891",7,10],["Np","Neptunium","(237)",8,10],["Pu","Plutonium","(244)",9,10],["Am","Americium","(243)",10,10],["Cm","Curium","(247)",11,10],["Bk","Berkelium","(247)",12,10],["Cf","Californium","(251)",13,10],["Es","Einstenium","(252)",14,10],["Fm","Fermium","(257)",15,10],["Md","Mendelevium","(258)",16,10],["No","Nobelium","(259)",17,10],["Lr","Lawrencium","(262)",18,10],["Rf","Rutherfordium","(267)",4,7],["Db","Dubnium","(268)",5,7],["Sg","Seaborgium","(271)",6,7],["Bh","Bohrium","(272)",7,7],["Hs","Hassium","(270)",8,7],["Mt","Meitnerium","(276)",9,7],["Ds","Darmstadium","(281)",10,7],["Rg","Roentgenium","(280)",11,7],["Cn","Copernicium","(285)",12,7],["Nh","Nihonium","(286)",13,7],["Fl","Flerovium","(289)",14,7],["Mc","Moscovium","(290)",15,7],["Lv","Livermorium","(293)",16,7],["Ts","Tennessine","(294)",17,7],["Og","Oganesson","(294)",18,7]],this.poses=[],this.createRandomPoses()}createRandomPoses(){this.poses=[];for(let e=0;e<this.table.length;e++){const n=new Nt;n.position.set(4e3*Math.random()-2e3,4e3*Math.random()-2e3,4e3*Math.random()-2e3),this.poses.push(n)}}createTablePoses(){this.poses=this.table.map(e=>{const n=new Nt;return n.position.x=140*e[3]-1330,n.position.y=-180*e[4]+990,n})}createSpherePoses(){const e=new C,n=this.table.length;this.poses=this.table.map((r,s)=>{const o=Math.acos(2*s/n-1),a=Math.sqrt(n*Math.PI)*o,l=new Nt;return l.position.setFromSphericalCoords(800,o,a),e.copy(l.position).multiplyScalar(2),l.lookAt(e),l})}createHelixPoses(){const e=new C;this.poses=this.table.map((n,r)=>{const s=.175*r+Math.PI,o=-8*r+450,a=new Nt;return a.position.setFromCylindricalCoords(900,s,o),e.x=2*a.position.x,e.y=a.position.y,e.z=2*a.position.z,a.lookAt(e),a})}createGridPoses(){this.poses=this.table.map((e,n)=>{const r=new Nt;return r.position.x=n%5*400-800,r.position.y=-Math.floor(n/5)%5*400+800,r.position.z=1e3*Math.floor(n/25)-2e3,r})}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-css3d-multi-renderer-example"]],features:[Ee([Rz()])],decls:16,vars:15,consts:[["id","menu"],["id","table",3,"click"],["id","sphere",3,"click"],["id","helix",3,"click"],["id","grid",3,"click"],[1,"canvas-background",3,"renderOnDemand"],[3,"thStats"],[3,"intensity"],[3,"position",4,"ngFor","ngForOf"],[3,"position","intensity"],[3,"args","position","lookAt"],[3,"minDistance","maxDistance"],[3,"position"],[1,"element"],[1,"number"],[1,"symbol"],[1,"details"]],template:function(n,r){1&n&&(K(0,"div",0)(1,"button",1),Ke("click",function(){return r.createTablePoses()}),Jt(2,"TABLE"),de(),K(3,"button",2),Ke("click",function(){return r.createSpherePoses()}),Jt(4,"SPHERE"),de(),K(5,"button",3),Ke("click",function(){return r.createHelixPoses()}),Jt(6,"HELIX"),de(),K(7,"button",4),Ke("click",function(){return r.createGridPoses()}),Jt(8,"GRID"),de()(),K(9,"th-canvas",5)(10,"th-scene",6),ve(11,"th-ambientLight",7),si(12,QTe,10,7,"th-cSS3DObject",8),ve(13,"th-pointLight",9),K(14,"th-perspectiveCamera",10),ve(15,"th-trackballControls",11),de()()()),2&n&&(B(9),O("renderOnDemand",!0),B(),O("thStats",!0),B(),O("intensity",3),B(),O("ngForOf",r.table),B(),O("position",ae(11,qTe))("intensity",3),B(),O("args",ae(12,YTe))("position",ae(13,ZTe))("lookAt",ae(14,KTe)),B(),O("minDistance",500)("maxDistance",6e3))},dependencies:[_l,rG,Dn,Sr,Ga,an,mG,Xi,h0,Mo],styles:[".canvas-background[_ngcontent-%COMP%]{background-color:#000}a[_ngcontent-%COMP%]{color:#8ff}#menu[_ngcontent-%COMP%]{position:absolute;bottom:20px;width:100%;text-align:center;z-index:10}.element[_ngcontent-%COMP%]{width:120px;height:160px;box-shadow:0 0 12px #00ffff80;border:1px solid rgba(127,255,255,.25);font-family:Helvetica,sans-serif;text-align:center;line-height:normal;cursor:default}.element[_ngcontent-%COMP%]:hover{box-shadow:0 0 12px #00ffffbf;border:1px solid rgba(127,255,255,.75)}.element[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;font-size:12px;color:#7fffffbf}.element[_ngcontent-%COMP%]   .symbol[_ngcontent-%COMP%]{position:absolute;top:40px;left:0;right:0;font-size:60px;font-weight:700;color:#ffffffbf;text-shadow:0 0 10px rgba(0,255,255,.95)}.element[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:0;right:0;font-size:12px;color:#7fffffbf}button[_ngcontent-%COMP%]{color:#7fffffbf;background:transparent;outline:1px solid rgba(127,255,255,.75);border:0px;padding:5px 10px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#00ffff80}button[_ngcontent-%COMP%]:active{color:#000;background-color:#00ffffbf}"],changeDetection:0})}return i})(),codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/css3d-renderer-example/css3d-renderer-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/css3d-renderer-example/css3d-renderer-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/css3d-renderer-example/css3d-renderer-example.component.scss"]}},{path:"html-with-css3d-example",data:{title:"Html with CSS3D Example",exampleComponent:(()=>{class i{constructor(e){this.THREE=Hd,this.Math=Math,this.sprite=!1,this.glbPath=`${ss}mac-draco.glb`,this.clock=new md(!0),this.rotation=[0,0,0],this.position=[0,0,0],this.webGlRenderer=ee(wd),e.setDecoderPath("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/jsm/libs/draco/gltf/"),e.setCrossOrigin("no-cors"),this.webGlRenderer.domElement.style.pointerEvents="none",this.webGlRenderer.domElement.style.zIndex="1",this.calcPose()}onBeforeRender(){this.calcPose()}calcPose(){const e=this.clock.getElapsedTime();this.rotation=[st.lerp(this.rotation[0],Math.cos(e/2)/20+.25,.1),st.lerp(this.rotation[1],Math.sin(e/4)/20,.1),st.lerp(this.rotation[2],Math.sin(e/8)/20,.1)],this.position=[0,st.lerp(this.position[1],(-2+Math.sin(e/2))/2,.1),0]}static#e=this.\u0275fac=function(n){return new(n||i)(P(u0))};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-html-with-css3d-example"]],features:[Ee([d0(),Rz()])],decls:23,vars:59,consts:[["holder",""],["light",""],[3,"onRender","thStats","shadow"],[3,"intensity"],[3,"rotation","position"],["loadGLTF","",3,"castShadow","url","position","rotation"],[3,"refById"],[3,"rotation","position","scale"],[3,"args"],[3,"opacity","blending","side","color"],["src",_T`./multi-view-postprocessing-example`,2,"width","1960px","height","1280px"],[3,"castShadow","position","lookAt","color","intensity"],[3,"receiveShadow","rotation","position"],[3,"color"],[3,"args","position","lookAt"]],template:function(n,r){if(1&n){const s=Bi();K(0,"th-canvas",2),Ke("onRender",function(){return Pt(s),kt(r.onBeforeRender())}),K(1,"th-scene"),ve(2,"th-ambientLight",3),K(3,"th-group",4)(4,"th-object3D",5)(5,"th-mesh",6)(6,"th-group",7,0)(8,"th-mesh"),ve(9,"th-planeGeometry",8)(10,"th-meshBasicMaterial",9),un(11,"color"),de(),K(12,"th-cSS3DObject"),ve(13,"iframe",10),de()()()()(),ve(14,"th-directionalLight",11,1),un(16,"color"),K(17,"th-mesh",12),ve(18,"th-planeGeometry",8)(19,"th-meshBasicMaterial",13),un(20,"color"),de(),K(21,"th-perspectiveCamera",14),ve(22,"th-orbitControls"),de()()()}2&n&&(O("thStats",!0)("shadow",!0),B(2),O("intensity",3),B(),O("rotation",Ft(37,FD,r.Math.PI))("position",ae(39,eMe)),B(),O("castShadow",!0)("url",r.glbPath)("position",r.position)("rotation",r.rotation),B(),O("refById","Cube008_2"),B(),O("rotation",Ft(40,D5,-1*r.Math.PI/2))("position",Ft(42,tMe,-.02))("scale",ae(44,iMe)),B(3),O("args",ae(45,nMe)),B(),O("opacity",0)("blending",r.THREE.NoBlending)("side",r.THREE.DoubleSide)("color",Tn(11,31,"black")),B(4),O("castShadow",!0)("position",ae(46,rMe))("lookAt",Ft(47,FD,-3))("color",Tn(16,33,"#ffffff"))("intensity",2.2),B(3),O("receiveShadow",!0)("rotation",Ft(49,D5,3*r.Math.PI/2))("position",Ft(51,FD,-3)),B(),O("args",ae(53,sMe)),B(),O("color",Tn(20,35,"#efefef")),B(2),O("args",ae(54,oMe))("position",uo(55,aMe,-5,-15))("lookAt",ae(58,lMe)))},dependencies:[So,Dn,ht,Sr,za,V0,Mr,an,mG,Zp,Yh,Xi,na,Mo,JA,Sg],encapsulation:2,changeDetection:0})}return i})(),codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-with-css3d-example/html-with-css3d-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-with-css3d-example/html-with-css3d-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-with-css3d-example/html-with-css3d-example.component.scss"]}}];px.forEach(i=>i.component=Kbe);const cMe=[];px.forEach(i=>{cMe.push(i.component)});let dMe=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({imports:[EB.forRoot(px),EB]})}return i})(),uMe=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({imports:[Qi,Qi]})}return i})();const P5=["*"],F5=["unscopedContent"],fMe=["text"],mMe=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],pMe=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"],L5=new le("ListOption");let O5=(()=>{class i{constructor(e){this._elementRef=e}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"],standalone:!0})}return i})(),N5=(()=>{class i{constructor(e){this._elementRef=e}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt))};static#t=this.\u0275dir=Pe({type:i,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"],standalone:!0})}return i})(),kMe=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275dir=Pe({type:i,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"],standalone:!0})}return i})(),j5=(()=>{class i{constructor(e){this._listOption=e}_isAlignedAtStart(){return!this._listOption||"after"===this._listOption?._getTogglePosition()}static#e=this.\u0275fac=function(n){return new(n||i)(P(L5,8))};static#t=this.\u0275dir=Pe({type:i,hostVars:4,hostBindings:function(n,r){2&n&&di("mdc-list-item__start",r._isAlignedAtStart())("mdc-list-item__end",!r._isAlignedAtStart())},standalone:!0})}return i})(),FMe=(()=>{class i extends j5{static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275dir=Pe({type:i,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],standalone:!0,features:[ge]})}return i})(),LMe=(()=>{class i extends j5{static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275dir=Pe({type:i,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],standalone:!0,features:[ge]})}return i})();const OMe=new le("MAT_LIST_CONFIG");let mf=(()=>{class i{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=ee(OMe,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Hr(e)}get disabled(){return this._disabled}set disabled(e){this._disabled=Hr(e)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275dir=Pe({type:i,hostVars:1,hostBindings:function(n,r){2&n&&Wi("aria-disabled",r.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},standalone:!0})}return i})(),LD=(()=>{class i{set lines(e){this._explicitLines=x0(e,null),this._updateItemLines(!1)}get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(e){this._disableRipple=Hr(e)}get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(e){this._disabled=Hr(e)}get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(e,n,r,s,o,a){this._elementRef=e,this._ngZone=n,this._listBase=r,this._platform=s,this._explicitLines=null,this._disableRipple=!1,this._disabled=!1,this._subscriptions=new Oi,this._rippleRenderer=null,this._hasUnscopedTextContent=!1,this.rippleConfig=o||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement="button"===this._hostElement.nodeName.toLowerCase(),this._noopAnimations="NoopAnimations"===a,r&&!r._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),null!==this._rippleRenderer&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!(!this._avatars.length&&!this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new rg(this,this._ngZone,this._hostElement,this._platform),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(af(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(e){if(!this._lines||!this._titles||!this._unscopedContent)return;e&&this._checkDomForUnscopedTextContent();const n=this._explicitLines??this._inferLinesFromContent(),r=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",n<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",n<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",2===n),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",3===n),this._hasUnscopedTextContent){const s=0===this._titles.length&&1===n;r.classList.toggle("mdc-list-item__primary-text",s),r.classList.toggle("mdc-list-item__secondary-text",!s)}else r.classList.remove("mdc-list-item__primary-text"),r.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let e=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(e+=1),e}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(e=>e.nodeType!==e.COMMENT_NODE).some(e=>!(!e.textContent||!e.textContent.trim()))}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt),P(it),P(mf,8),P(ln),P(sg,8),P(Yr,8))};static#t=this.\u0275dir=Pe({type:i,contentQueries:function(n,r,s){if(1&n&&(dn(s,FMe,4),dn(s,LMe,4)),2&n){let o;bt(o=vt())&&(r._avatars=o),bt(o=vt())&&(r._icons=o)}},hostVars:4,hostBindings:function(n,r){2&n&&(Wi("aria-disabled",r.disabled)("disabled",r._isButtonElement&&r.disabled||null),di("mdc-list-item--disabled",r.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"},standalone:!0})}return i})(),NMe=(()=>{class i extends LD{get activated(){return this._activated}set activated(e){this._activated=Hr(e)}constructor(e,n,r,s,o,a){super(e,n,r,s,o,a),this._activated=!1}_getAriaCurrent(){return"A"===this._hostElement.nodeName&&this._activated?"page":null}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt),P(it),P(mf,8),P(ln),P(sg,8),P(Yr,8))};static#t=this.\u0275cmp=pe({type:i,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(n,r,s){if(1&n&&(dn(s,N5,5),dn(s,O5,5),dn(s,kMe,5)),2&n){let o;bt(o=vt())&&(r._lines=o),bt(o=vt())&&(r._titles=o),bt(o=vt())&&(r._meta=o)}},viewQuery:function(n,r){if(1&n&&(Ei(F5,5),Ei(fMe,5)),2&n){let s;bt(s=vt())&&(r._unscopedContent=s.first),bt(s=vt())&&(r._itemText=s.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:11,hostBindings:function(n,r){2&n&&(Wi("aria-current",r._getAriaCurrent()),di("mdc-list-item--activated",r.activated)("mdc-list-item--with-leading-avatar",0!==r._avatars.length)("mdc-list-item--with-leading-icon",0!==r._icons.length)("mdc-list-item--with-trailing-meta",0!==r._meta.length)("_mat-animation-noopable",r._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],standalone:!0,features:[ge,rn],ngContentSelectors:pMe,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-mdc-focus-indicator"]],template:function(n,r){if(1&n){const s=Bi();ze(mMe),Ce(0),K(1,"span",1),Ce(2,1),Ce(3,2),K(4,"span",2,0),Ke("cdkObserveContent",function(){return Pt(s),kt(r._updateItemLines(!0))}),Ce(6,3),de()(),Ce(7,4),Ce(8,5),ve(9,"div",3)}},dependencies:[OA],encapsulation:2,changeDetection:0})}return i})(),BMe=(()=>{class i extends mf{constructor(){super(...arguments),this._isNonInteractive=!1}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-mdc-nav-list","mat-mdc-list-base","mdc-list"],exportAs:["matNavList"],standalone:!0,features:[Ee([{provide:mf,useExisting:i}]),ge,rn],ngContentSelectors:P5,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},styles:['@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-list-divider::after{content:"";display:block;border-bottom-width:1px;border-bottom-style:solid}}.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item__wrapper{display:block}.mdc-list-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer}.mdc-list-item:focus{outline:none}.mdc-list-item.mdc-list-item--with-one-line{height:48px}.mdc-list-item.mdc-list-item--with-two-lines{height:64px}.mdc-list-item.mdc-list-item--with-three-lines{height:88px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--disabled,.mdc-list-item.mdc-list-item--non-interactive{cursor:auto}.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px double rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected:focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected:focus::before{border-color:CanvasText}}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__content[for]{pointer-events:none}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item__overline-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start,.mdc-list-item--with-leading-avatar .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-avatar .mdc-list-item__start{border-radius:50%}.mdc-list-item--with-leading-icon.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start,.mdc-list-item--with-leading-icon .mdc-list-item__start[dir=rtl]{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-thumbnail.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-thumbnail.mdc-list-item,.mdc-list-item--with-leading-thumbnail.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-thumbnail .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-thumbnail .mdc-list-item__start,.mdc-list-item--with-leading-thumbnail .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-image.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-image.mdc-list-item,.mdc-list-item--with-leading-image.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-image .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-image .mdc-list-item__start,.mdc-list-item--with-leading-image .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-video.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-video.mdc-list-item,.mdc-list-item--with-leading-video.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-video .mdc-list-item__start{margin-left:0;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-video .mdc-list-item__start,.mdc-list-item--with-leading-video .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-checkbox.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-radio.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-radio.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-radio .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-radio .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-switch.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-switch.mdc-list-item,.mdc-list-item--with-leading-switch.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-switch .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-switch .mdc-list-item__start,.mdc-list-item--with-leading-switch .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item,.mdc-list-item--with-trailing-icon.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-icon .mdc-list-item__end,.mdc-list-item--with-trailing-icon .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item,.mdc-list-item--with-trailing-meta.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-trailing-meta .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mdc-typography-caption-font-family);font-size:var(--mdc-typography-caption-font-size);line-height:var(--mdc-typography-caption-line-height);font-weight:var(--mdc-typography-caption-font-weight);letter-spacing:var(--mdc-typography-caption-letter-spacing);text-decoration:var(--mdc-typography-caption-text-decoration);text-transform:var(--mdc-typography-caption-text-transform)}.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-radio.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-radio .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-radio .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-switch.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-switch.mdc-list-item,.mdc-list-item--with-trailing-switch.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-switch .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-switch .mdc-list-item__end,.mdc-list-item--with-trailing-switch .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-switch.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item{padding-left:16px;padding-right:16px}[dir=rtl] .mdc-list-item,.mdc-list-item[dir=rtl]{padding-left:16px;padding-right:16px}.mdc-list-group .mdc-deprecated-list{padding:0}.mdc-list-group__subheader{margin:calc((3rem - 1.5rem)/2) 16px}.mdc-list-divider{padding:0;background-clip:content-box}.mdc-list-divider.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset{padding-left:16px;padding-right:auto}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset,.mdc-list-divider.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:16px}.mdc-list-divider.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset{padding-left:auto;padding-right:16px}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset,.mdc-list-divider.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset[dir=rtl]{padding-left:16px;padding-right:auto}.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset{padding-left:0px;padding-right:auto}[dir=rtl] .mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:0px}[dir=rtl] .mdc-list-divider,.mdc-list-divider[dir=rtl]{padding:0}.mdc-list-item{background-color:var(--mdc-list-list-item-container-color)}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item--with-one-line{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-avatar,.mdc-list-item--with-one-line.mdc-list-item--with-leading-icon,.mdc-list-item--with-one-line.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-one-line.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-one-line.mdc-list-item--with-leading-radio,.mdc-list-item--with-one-line.mdc-list-item--with-leading-switch{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-image,.mdc-list-item--with-one-line.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines.mdc-list-item--with-leading-avatar,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-icon,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-radio,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-switch,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-image,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-three-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height)}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height)}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height)}.mdc-list-item__primary-text{color:var(--mdc-list-list-item-label-text-color)}.mdc-list-item__primary-text{font-family:var(--mdc-list-list-item-label-text-font);line-height:var(--mdc-list-list-item-label-text-line-height);font-size:var(--mdc-list-list-item-label-text-size);font-weight:var(--mdc-list-list-item-label-text-weight);letter-spacing:var(--mdc-list-list-item-label-text-tracking)}.mdc-list-item__secondary-text{color:var(--mdc-list-list-item-supporting-text-color)}.mdc-list-item__secondary-text{font-family:var(--mdc-list-list-item-supporting-text-font);line-height:var(--mdc-list-list-item-supporting-text-line-height);font-size:var(--mdc-list-list-item-supporting-text-size);font-weight:var(--mdc-list-list-item-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-supporting-text-tracking)}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color)}.mdc-list-item--with-leading-icon .mdc-list-item__start{width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start>i{font-size:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon{font-size:var(--mdc-list-list-item-leading-icon-size);width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon,.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon>.materialdesignWizIconSvgsSvgIcon{display:block}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size);height:var(--mdc-list-list-item-leading-avatar-size)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color)}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font);line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height);font-size:var(--mdc-list-list-item-trailing-supporting-text-size);font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end>i{font-size:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon{font-size:var(--mdc-list-list-item-trailing-icon-size);width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon,.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon>.materialdesignWizIconSvgsSvgIcon{display:block}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color)}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text,.mdc-list-item--disabled .mdc-list-item__overline-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity)}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color)}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color)}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color)}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color);opacity:var(--mdc-list-list-item-hover-state-layer-opacity)}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color);opacity:var(--mdc-list-list-item-disabled-state-layer-opacity)}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color);opacity:var(--mdc-list-list-item-focus-state-layer-opacity)}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape);background-color:var(--mdc-list-list-item-leading-avatar-color)}.mat-mdc-list-item-icon{font-size:var(--mdc-list-list-item-leading-icon-size)}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape);--mat-mdc-focus-indicator-border-radius:var(--mat-list-active-indicator-shape)}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color)}'],encapsulation:2,changeDetection:0})}return i})(),OD=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({imports:[C4,qu,Qi,S0,kH,uMe]})}return i})();const HMe=["*",[["mat-toolbar-row"]]],GMe=["*","mat-toolbar-row"];let WMe=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275dir=Pe({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}return i})(),$Me=(()=>{class i{constructor(e,n,r){this._elementRef=e,this._platform=n,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt),P(ln),P(Xt))};static#t=this.\u0275cmp=pe({type:i,selectors:[["mat-toolbar"]],contentQueries:function(n,r,s){if(1&n&&dn(s,WMe,5),2&n){let o;bt(o=vt())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(n,r){2&n&&(hl(r.color?"mat-"+r.color:""),di("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[rn],ngContentSelectors:GMe,decls:2,vars:0,template:function(n,r){1&n&&(ze(HMe),Ce(0),Ce(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color);--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color)}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}return i})(),ND=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({imports:[Qi,Qi]})}return i})();const gx=["*"],XMe=["content"],qMe=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],YMe=["mat-drawer","mat-drawer-content","*"];function ZMe(i,t){if(1&i){const e=Bi();K(0,"div",1),Ke("click",function(){return Pt(e),kt(Qt()._onBackdropClicked())}),de()}2&i&&di("mat-drawer-shown",Qt()._isShowingBackdrop())}function KMe(i,t){1&i&&(K(0,"mat-drawer-content"),Ce(1,2),de())}const QMe=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],JMe=["mat-sidenav","mat-sidenav-content","*"];function eSe(i,t){if(1&i){const e=Bi();K(0,"div",1),Ke("click",function(){return Pt(e),kt(Qt()._onBackdropClicked())}),de()}2&i&&di("mat-drawer-shown",Qt()._isShowingBackdrop())}function tSe(i,t){1&i&&(K(0,"mat-sidenav-content"),Ce(1,2),de())}const U5={transformDrawer:fg("transform",[Pd("open, open-instant",os({transform:"none",visibility:"visible"})),Pd("void",os({"box-shadow":"none",visibility:"hidden"})),Xa("void => open-instant",ql("0ms")),Xa("void <=> open, open-instant => void",ql("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},nSe=new le("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function rSe(){return!1}}),jD=new le("MAT_DRAWER_CONTAINER");let _x=(()=>{class i extends lf{constructor(e,n,r,s,o){super(r,s,o),this._changeDetectorRef=e,this._container=n}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(n){return new(n||i)(P(lr),P(Le(()=>z5)),P(xt),P(j0),P(it))};static#t=this.\u0275cmp=pe({type:i,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(n,r){2&n&&Ac("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},standalone:!0,features:[Ee([{provide:lf,useExisting:i}]),ge,rn],ngContentSelectors:gx,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})(),V5=(()=>{class i{get position(){return this._position}set position(e){(e="end"===e?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=Hr(e)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(e){("true"===e||"false"===e||null==e)&&(e=Hr(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle(Hr(e))}constructor(e,n,r,s,o,a,l,c){this._elementRef=e,this._focusTrapFactory=n,this._focusMonitor=r,this._platform=s,this._ngZone=o,this._interactivityChecker=a,this._doc=l,this._container=c,this._focusTrap=null,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Et,this._animationEnd=new Et,this._animationState="void",this.openedChange=new lt(!0),this._openedStream=this.openedChange.pipe(sn(d=>d),Ct(()=>{})),this.openedStart=this._animationStarted.pipe(sn(d=>d.fromState!==d.toState&&0===d.toState.indexOf("open")),QS(void 0)),this._closedStream=this.openedChange.pipe(sn(d=>!d),Ct(()=>{})),this.closedStart=this._animationStarted.pipe(sn(d=>d.fromState!==d.toState&&"void"===d.toState),QS(void 0)),this._destroyed=new Et,this.onPositionChanged=new lt,this._modeChanged=new Et,this.openedChange.subscribe(d=>{d?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Xl(this._elementRef.nativeElement,"keydown").pipe(sn(d=>27===d.keyCode&&!this.disableClose&&!b0(d)),Zi(this._destroyed)).subscribe(d=>this._ngZone.run(()=>{this.close(),d.stopPropagation(),d.preventDefault()}))}),this._animationEnd.pipe(_A((d,u)=>d.fromState===u.fromState&&d.toState===u.toState)).subscribe(d=>{const{fromState:u,toState:h}=d;(0===h.indexOf("open")&&"void"===u||"void"===h&&0===u.indexOf("open"))&&this.openedChange.emit(this._opened)})}_forceFocus(e,n){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(n)}_focusByCssSelector(e,n){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,n)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(n=>{!n&&"function"==typeof this._elementRef.nativeElement.focus&&e.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,"end"===this._position&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,n){e&&n&&(this._openedVia=n);const r=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),r}_setOpen(e,n,r){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",n&&this._restoreFocus(r)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe(vs(1)).subscribe(o=>s(o?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop)}_updatePositionInParent(e){if(!this._platform.isBrowser)return;const n=this._elementRef.nativeElement,r=n.parentNode;"end"===e?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,n)),r.appendChild(n)):this._anchor&&this._anchor.parentNode.insertBefore(n,this._anchor)}static#e=this.\u0275fac=function(n){return new(n||i)(P(xt),P(Vpe),P(bA),P(ln),P(it),P(_H),P(Xt,8),P(jD,8))};static#t=this.\u0275cmp=pe({type:i,selectors:[["mat-drawer"]],viewQuery:function(n,r){if(1&n&&Ei(XMe,5),2&n){let s;bt(s=vt())&&(r._content=s.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(n,r){1&n&&HM("@transform.start",function(o){return r._animationStarted.next(o)})("@transform.done",function(o){return r._animationEnd.next(o)}),2&n&&(UM("@transform",r._animationState),Wi("align",null),di("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],standalone:!0,features:[rn],ngContentSelectors:gx,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(n,r){1&n&&(ze(),K(0,"div",1,0),Ce(2),de())},dependencies:[lf],encapsulation:2,data:{animation:[U5.transformDrawer]},changeDetection:0})}return i})(),z5=(()=>{class i{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=Hr(e)}get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(e){this._backdropOverride=null==e?null:Hr(e)}get scrollable(){return this._userContent||this._content}constructor(e,n,r,s,o,a=!1,l){this._dir=e,this._element=n,this._ngZone=r,this._changeDetectorRef=s,this._animationMode=l,this._drawers=new yc,this.backdropClick=new lt,this._destroyed=new Et,this._doCheckSubject=new Et,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Et,e&&e.change.pipe(Zi(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),o.change().pipe(Zi(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=a}ngAfterContentInit(){this._allDrawers.changes.pipe(Lc(this._allDrawers),Zi(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(n=>!n._container||n._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Lc(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(y0(10),Zi(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,n=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const r=this._left._getWidth();e+=r,n-=r}if(this._right&&this._right.opened)if("side"==this._right.mode)n+=this._right._getWidth();else if("push"==this._right.mode){const r=this._right._getWidth();n+=r,e-=r}e=e||null,n=n||null,(e!==this._contentMargins.left||n!==this._contentMargins.right)&&(this._contentMargins={left:e,right:n},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(sn(n=>n.fromState!==n.toState),Zi(this._drawers.changes)).subscribe(n=>{"open-instant"!==n.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe(Zi(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){e&&e.onPositionChanged.pipe(Zi(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(vs(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(Zi(af(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const n=this._element.nativeElement.classList,r="mat-drawer-container-has-open";e?n.add(r):n.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._drawerHasBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(e){return null!=e&&e.opened}_drawerHasBackdrop(e){return null==this._backdropOverride?!!e&&"side"!==e.mode:this._backdropOverride}static#e=this.\u0275fac=function(n){return new(n||i)(P(rf,8),P(xt),P(it),P(lr),P(ug),P(nSe),P(Yr,8))};static#t=this.\u0275cmp=pe({type:i,selectors:[["mat-drawer-container"]],contentQueries:function(n,r,s){if(1&n&&(dn(s,_x,5),dn(s,V5,5)),2&n){let o;bt(o=vt())&&(r._content=o.first),bt(o=vt())&&(r._allDrawers=o)}},viewQuery:function(n,r){if(1&n&&Ei(_x,5),2&n){let s;bt(s=vt())&&(r._userContent=s.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(n,r){2&n&&di("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],standalone:!0,features:[Ee([{provide:jD,useExisting:i}]),rn],ngContentSelectors:YMe,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(n,r){1&n&&(ze(qMe),si(0,ZMe,1,2,"div",0),Ce(1),Ce(2,1),si(3,KMe,2,0,"mat-drawer-content")),2&n&&(co(0,r.hasBackdrop?0:-1),B(3),co(3,r._content?-1:3))},dependencies:[_x],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color);box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0})}return i})(),BD=(()=>{class i extends _x{constructor(e,n,r,s,o){super(e,n,r,s,o)}static#e=this.\u0275fac=function(n){return new(n||i)(P(lr),P(Le(()=>G5)),P(xt),P(j0),P(it))};static#t=this.\u0275cmp=pe({type:i,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(n,r){2&n&&Ac("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},standalone:!0,features:[Ee([{provide:lf,useExisting:i}]),ge,rn],ngContentSelectors:gx,decls:1,vars:0,template:function(n,r){1&n&&(ze(),Ce(0))},encapsulation:2,changeDetection:0})}return i})(),H5=(()=>{class i extends V5{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(e){this._fixedInViewport=Hr(e)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(e){this._fixedTopGap=x0(e)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(e){this._fixedBottomGap=x0(e)}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(n,r){2&n&&(Wi("align",null),Ac("top",r.fixedInViewport?r.fixedTopGap:null,"px")("bottom",r.fixedInViewport?r.fixedBottomGap:null,"px"),di("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened)("mat-sidenav-fixed",r.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],standalone:!0,features:[ge,rn],ngContentSelectors:gx,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(n,r){1&n&&(ze(),K(0,"div",1,0),Ce(2),de())},dependencies:[lf],encapsulation:2,data:{animation:[U5.transformDrawer]},changeDetection:0})}return i})(),G5=(()=>{class i extends z5{constructor(){super(...arguments),this._allDrawers=void 0,this._content=void 0}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})();static#t=this.\u0275cmp=pe({type:i,selectors:[["mat-sidenav-container"]],contentQueries:function(n,r,s){if(1&n&&(dn(s,BD,5),dn(s,H5,5)),2&n){let o;bt(o=vt())&&(r._content=o.first),bt(o=vt())&&(r._allDrawers=o)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(n,r){2&n&&di("mat-drawer-container-explicit-backdrop",r._backdropOverride)},exportAs:["matSidenavContainer"],standalone:!0,features:[Ee([{provide:jD,useExisting:i}]),ge,rn],ngContentSelectors:JMe,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(n,r){1&n&&(ze(QMe),si(0,eSe,1,2,"div",0),Ce(1),Ce(2,1),si(3,tSe,2,0,"mat-sidenav-content")),2&n&&(co(0,r.hasBackdrop?0:-1),B(3),co(3,r._content?-1:3))},dependencies:[BD],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color);box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0})}return i})(),sSe=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({imports:[Qi,hg,hg,Qi]})}return i})();function oSe(i,t){if(1&i&&(K(0,"a",10),Jt(1),de()),2&i){const e=t.$implicit;O("routerLink",e.path),B(),Rb(e.data.title)}}function aSe(i,t){if(1&i){const e=Bi();K(0,"button",11),Ke("click",function(){return Pt(e),Qt(),kt(Ot(2).toggle())}),K(1,"mat-icon",12),Jt(2,"menu"),de()()}}function lSe(i,t){if(1&i){const e=Bi();K(0,"button",13),Ke("click",function(r){return Pt(e),kt(Qt().editorService.toCodeSandbox(r))}),K(1,"mat-icon"),Jt(2,"crop_din"),de(),Jt(3," CodeSandbox "),de()}}function cSe(i,t){if(1&i){const e=Bi();K(0,"button",13),Ke("click",function(r){return Pt(e),kt(Qt().editorService.toStackblitz(r))}),K(1,"mat-icon"),Jt(2,"bolt"),de(),Jt(3," Stackblitz "),de()}}let dSe=(()=>{class i{constructor(e,n){this.breakpointObserver=e,this.editorService=n,this.routes=px,this.isHandset$=this.breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)").pipe(Ct(r=>r.matches),j4())}static#e=this.\u0275fac=function(n){return new(n||i)(P(hH),P(g0))};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-navigation-shell"]],decls:21,vars:15,consts:[["drawer",""],[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["mat-list-item","",3,"routerLink",4,"ngFor","ngForOf"],[1,"content"],["color","primary"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[1,"toolbar-spacer"],["mat-button","","href","#",3,"click",4,"ngIf"],[1,"main-route-content"],["mat-list-item","",3,"routerLink"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],["mat-button","","href","#",3,"click"]],template:function(n,r){1&n&&(K(0,"mat-sidenav-container",1)(1,"mat-sidenav",2,0),un(3,"async"),un(4,"async"),un(5,"async"),K(6,"mat-toolbar"),Jt(7,"ngx-three"),de(),K(8,"mat-nav-list"),si(9,oSe,2,2,"a",3),de()(),K(10,"mat-sidenav-content",4)(11,"mat-toolbar",5),si(12,aSe,3,0,"button",6),un(13,"async"),K(14,"span"),Jt(15,"ngx-three-demo"),de(),ve(16,"span",7),si(17,lSe,4,0,"button",8)(18,cSe,4,0,"button",8),de(),K(19,"div",9),ve(20,"router-outlet"),de()()()),2&n&&(B(),O("mode",Tn(3,7,r.isHandset$)?"over":"side")("opened",!1===Tn(4,9,r.isHandset$)),Wi("role",Tn(5,11,r.isHandset$)?"dialog":"navigation"),B(8),O("ngForOf",r.routes),B(3),O("ngIf",Tn(13,13,r.isHandset$)),B(5),O("ngIf",r.editorService.urls.length),B(),O("ngIf",r.editorService.urls.length))},dependencies:[_l,ev,mR,Mv,BH,xge,BMe,NMe,p4,$Me,H5,G5,BD,IS],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.content[_ngcontent-%COMP%]{height:100vh}.main-route-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{display:block;height:100%}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"],changeDetection:0})}return i})(),uSe=(()=>{class i{constructor(){this.title="ngx-three-demo"}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=pe({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){1&n&&ve(0,"app-navigation-shell")},dependencies:[dSe]})}return i})();const W5=aH();class hSe{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Nn(-this._previousScrollPosition.left),t.style.top=Nn(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,n=t.style,r=this._document.body.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),W5&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),W5&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}}class fSe{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0).pipe(sn(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class $5{enable(){}disable(){}attach(){}}function UD(i,t){return t.some(e=>i.bottom<e.top||i.top>e.bottom||i.right<e.left||i.left>e.right)}function X5(i,t){return t.some(e=>i.top<e.top||i.bottom>e.bottom||i.left<e.left||i.right>e.right)}class mSe{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();UD(e,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let pSe=(()=>{class i{constructor(e,n,r,s){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new $5,this.close=o=>new fSe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new hSe(this._viewportRuler,this._document),this.reposition=o=>new mSe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static#e=this.\u0275fac=function(n){return new(n||i)(ue(j0),ue(ug),ue(it),ue(Xt))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class gSe{constructor(t){if(this.scrollStrategy=new $5,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class _Se{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let q5=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(n){return new(n||i)(ue(Xt))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),bSe=(()=>{class i extends q5{constructor(e,n){super(e),this._ngZone=n,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(n){return new(n||i)(ue(Xt),ue(it,8))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),vSe=(()=>{class i extends q5{constructor(e,n,r){super(e),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Gl(s)},this._clickListener=s=>{const o=Gl(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const d=l[c];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(o)||d.overlayElement.contains(a))break;const u=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>u.next(s)):u.next(s)}}}add(e){if(super.add(e),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(n){return new(n||i)(ue(Xt),ue(ln),ue(it,8))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Y5=(()=>{class i{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||hA()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const n=this._document.createElement("div");n.classList.add(e),hA()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}static#e=this.\u0275fac=function(n){return new(n||i)(ue(Xt),ue(ln))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class ySe{constructor(t,e,n,r,s,o,a,l,c,d=!1){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new Et,this._attachments=new Et,this._detachments=new Et,this._locationChanges=Oi.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new Et,this._outsidePointerEvents=new Et,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(vs(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Nn(this._config.width),t.height=Nn(this._config.height),t.minWidth=Nn(this._config.minWidth),t.minHeight=Nn(this._config.minHeight),t.maxWidth=Nn(this._config.maxWidth),t.maxHeight=Nn(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,n){const r=w0(e||[]).filter(s=>!!s);r.length&&(n?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Zi(af(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Z5="cdk-overlay-connected-position-bounding-box",xSe=/([A-Za-z%]+)$/;class wSe{get positions(){return this._preferredPositions}constructor(t,e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Et,this._resizeSubscription=Oi.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._validatePositions(),t.hostElement.classList.add(Z5),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,r,a),c=this._getOverlayPoint(l,e,a),d=this._getOverlayFit(c,e,n,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(d,c,n)?s.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<d.visibleArea)&&(o={overlayFit:d,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(s.length){let a=null,l=-1;for(const c of s){const d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>l&&(l=d,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Nd(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Z5),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,n){let r,s;if("center"==n.originX)r=t.left+t.width/2;else{const o=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r="start"==n.originX?o:a}return e.left<0&&(r-=e.left),s="center"==n.originY?t.top+t.height/2:"top"==n.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,n){let r,s;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,n,r){const s=Q5(e);let{x:o,y:a}=t,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+s.height-n.height,m=this._subtractOverflows(s.width,0-o,o+s.width-n.width),_=this._subtractOverflows(s.height,h,f),p=m*_;return{visibleArea:p,isCompletelyWithinViewport:s.width*s.height===p,fitsInViewportVertically:_===s.height,fitsInViewportHorizontally:m==s.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,s=n.right-e.x,o=K5(this._overlayRef.getConfig().minHeight),a=K5(this._overlayRef.getConfig().minWidth);return(t.fitsInViewportVertically||null!=o&&o<=r)&&(t.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=Q5(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),a=Math.max(t.y+r.height-s.height,0),l=Math.max(s.top-n.top-t.y,0),c=Math.max(s.left-n.left-t.x,0);let d=0,u=0;return d=r.width<=s.width?c||-o:t.x<this._viewportMargin?s.left-n.left-t.x:0,u=r.height<=s.height?l||-a:t.y<this._viewportMargin?s.top-n.top-t.y:0,this._previousPushAmount={x:d,y:u},{x:t.x+d,y:t.y+u}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){const n=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!function TSe(i,t){return i===t||i.isOriginClipped===t.isOriginClipped&&i.isOriginOutsideView===t.isOriginOutsideView&&i.isOverlayClipped===t.isOverlayClipped&&i.isOverlayOutsideView===t.isOverlayOutsideView}(this._lastScrollVisibility,n)){const r=new _Se(t,n);this._positionChanges.next(r)}this._lastScrollVisibility=n}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let s,o,a,d,u,h;if("top"===e.overlayY)o=t.y,s=n.height-o+this._viewportMargin;else if("bottom"===e.overlayY)a=n.height-t.y+2*this._viewportMargin,s=n.height-a+this._viewportMargin;else{const f=Math.min(n.bottom-t.y+n.top,t.y),m=this._lastBoundingBoxSize.height;s=2*f,o=t.y-f,s>m&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-m/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)h=n.width-t.x+2*this._viewportMargin,d=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)u=t.x,d=n.right-t.x;else{const f=Math.min(n.right-t.x+n.left,t.x),m=this._lastBoundingBoxSize.width;d=2*f,u=t.x-f,d>m&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.x-m/2)}return{top:o,left:u,bottom:a,right:h,width:d,height:s}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Nn(n.height),r.top=Nn(n.top),r.bottom=Nn(n.bottom),r.width=Nn(n.width),r.left=Nn(n.left),r.right=Nn(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Nn(s)),o&&(r.maxWidth=Nn(o))}this._lastBoundingBoxSize=n,Nd(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Nd(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Nd(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();Nd(n,this._getExactOverlayY(e,t,d)),Nd(n,this._getExactOverlayX(e,t,d))}else n.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),n.transform=a.trim(),o.maxHeight&&(r?n.maxHeight=Nn(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=Nn(o.maxWidth):s&&(n.maxWidth="")),Nd(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Nn(s.y),r}_getExactOverlayX(t,e,n){let o,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),o=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Nn(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:X5(t,n),isOriginOutsideView:UD(t,n),isOverlayClipped:X5(e,n),isOverlayOutsideView:UD(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,r)=>n-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&w0(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof xt)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function Nd(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function K5(i){if("number"!=typeof i&&null!=i){const[t,e]=i.split(xSe);return e&&"px"!==e?null:parseFloat(t)}return i||null}function Q5(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const J5="cdk-global-overlay-wrapper";class MSe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(J5),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=n,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,u=this._xOffset,h="rtl"===this._overlayRef.getConfig().direction;let f="",m="",_="";l?_="flex-start":"center"===d?(_="center",h?m=u:f=u):h?"left"===d||"end"===d?(_="flex-end",f=u):("right"===d||"start"===d)&&(_="flex-start",m=u):"left"===d||"start"===d?(_="flex-start",f=u):("right"===d||"end"===d)&&(_="flex-end",m=u),t.position=this._cssPosition,t.marginLeft=l?"0":f,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":m,e.justifyContent=_,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(J5),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let SSe=(()=>{class i{constructor(e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new MSe}flexibleConnectedTo(e){return new wSe(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(n){return new(n||i)(ue(ug),ue(Xt),ue(ln),ue(Y5))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),RSe=0,Pg=(()=>{class i{constructor(e,n,r,s,o,a,l,c,d,u,h,f){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=d,this._location=u,this._outsideClickDispatcher=h,this._animationsModuleType=f}create(e){const n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),o=new gSe(e);return o.direction=o.direction||this._directionality.value,new ySe(s,n,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const n=this._document.createElement("div");return n.id="cdk-overlay-"+RSe++,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(va)),new w_e(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(n){return new(n||i)(ue(pSe),ue(Y5),ue(Tc),ue(SSe),ue(bSe),ue(ar),ue(it),ue(Xt),ue(rf),ue($u),ue(vSe),ue(Yr,8))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const ASe={provide:new le("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{const i=ee(Pg);return()=>i.scrollStrategies.reposition()}}),deps:[Pg],useFactory:function ESe(i){return()=>i.scrollStrategies.reposition()}};let DSe=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({providers:[Pg,ASe],imports:[ig,M_e,S4,S4]})}return i})(),NSe=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({imports:[Qi,qu,C4,Qi]})}return i})();const zSe={provide:new le("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{const i=ee(Pg);return()=>i.scrollStrategies.reposition()}}),deps:[Pg],useFactory:function VSe(i){return()=>i.scrollStrategies.reposition()}};let eW=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({providers:[zSe],imports:[qu,DSe,FH,Qi,hg,NSe,FH,Qi]})}return i})(),nW=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({imports:[Qi,S0]})}return i})();const QSe=[TA,OD,IA,v4,ND,eW,O4,nW];let JSe=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({imports:[QSe,TA,OD,IA,v4,ND,eW,O4,nW]})}return i})();function rW(i){return new te(3e3,!1)}function sc(i){switch(i.length){case 0:return new mg;case 1:return i[0];default:return new E4(i)}}function sW(i,t,e=new Map,n=new Map){const r=[],s=[];let o=-1,a=null;if(t.forEach(l=>{const c=l.get("offset"),d=c==o,u=d&&a||new Map;l.forEach((h,f)=>{let m=f,_=h;if("offset"!==f)switch(m=i.normalizePropertyName(m,r),_){case"!":_=e.get(f);break;case $a:_=n.get(f);break;default:_=i.normalizeStyleValue(f,m,_,r)}u.set(m,_)}),d||s.push(u),a=u,o=c}),r.length)throw function wRe(i){return new te(3502,!1)}();return s}function VD(i,t,e,n){switch(t){case"start":i.onStart(()=>n(e&&zD(e,"start",i)));break;case"done":i.onDone(()=>n(e&&zD(e,"done",i)));break;case"destroy":i.onDestroy(()=>n(e&&zD(e,"destroy",i)))}}function zD(i,t,e){const s=HD(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,e.totalTime??i.totalTime,!!e.disabled),o=i._data;return null!=o&&(s._data=o),s}function HD(i,t,e,n,r="",s=0,o){return{element:i,triggerName:t,fromState:e,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function Ds(i,t,e){let n=i.get(t);return n||i.set(t,n=e),n}function oW(i){const t=i.indexOf(":");return[i.substring(1,t),i.slice(t+1)]}const FRe=typeof document>"u"?null:document.documentElement;function GD(i){const t=i.parentNode||i.host||null;return t===FRe?null:t}let jd=null,aW=!1;function lW(i,t){for(;t;){if(t===i)return!0;t=GD(t)}return!1}function cW(i,t,e){if(e)return Array.from(i.querySelectorAll(t));const n=i.querySelector(t);return n?[n]:[]}let WD=(()=>{class i{validateStyleProperty(e){return function ORe(i){jd||(jd=function NRe(){return typeof document<"u"?document.body:null}()||{},aW=!!jd.style&&"WebkitAppearance"in jd.style);let t=!0;return jd.style&&!function LRe(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in jd.style,!t&&aW&&(t="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in jd.style)),t}(e)}matchesElement(e,n){return!1}containsElement(e,n){return lW(e,n)}getParentElement(e){return GD(e)}query(e,n,r){return cW(e,n,r)}computeStyle(e,n,r){return r||""}animate(e,n,r,s,o,a=[],l){return new mg(r,s)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})();class $D{static#e=this.NOOP=new WD}class XD{}const BRe=1e3,qD="ng-enter",bx="ng-leave",vx="ng-trigger",yx=".ng-trigger",uW="ng-animating",YD=".ng-animating";function Ka(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:ZD(parseFloat(t[1]),t[2])}function ZD(i,t){return"s"===t?i*BRe:i}function xx(i,t,e){return i.hasOwnProperty("duration")?i:function VRe(i,t,e){let r,s=0,o="";if("string"==typeof i){const a=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(rW()),{duration:0,delay:0,easing:""};r=ZD(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=ZD(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=i;if(!e){let a=!1,l=t.length;r<0&&(t.push(function eRe(){return new te(3100,!1)}()),a=!0),s<0&&(t.push(function tRe(){return new te(3101,!1)}()),a=!0),a&&t.splice(l,0,rW())}return{duration:r,delay:s,easing:o}}(i,t,e)}function ca(i,t,e){t.forEach((n,r)=>{const s=QD(r);e&&!e.has(r)&&e.set(r,i.style[s]),i.style[s]=n})}function Bd(i,t){t.forEach((e,n)=>{const r=QD(n);i.style[r]=""})}function kg(i){return Array.isArray(i)?1==i.length?i[0]:function X_e(i,t=null){return{type:St.Sequence,steps:i,options:t}}(i):i}const KD=new RegExp("{{\\s*(.+?)\\s*}}","g");function fW(i){let t=[];if("string"==typeof i){let e;for(;e=KD.exec(i);)t.push(e[1]);KD.lastIndex=0}return t}function Fg(i,t,e){const n=`${i}`,r=n.replace(KD,(s,o)=>{let a=t[o];return null==a&&(e.push(function nRe(i){return new te(3003,!1)}()),a=""),a.toString()});return r==n?i:r}const GRe=/-+([a-z0-9])/g;function QD(i){return i.replace(GRe,(...t)=>t[1].toUpperCase())}function Is(i,t,e){switch(t.type){case St.Trigger:return i.visitTrigger(t,e);case St.State:return i.visitState(t,e);case St.Transition:return i.visitTransition(t,e);case St.Sequence:return i.visitSequence(t,e);case St.Group:return i.visitGroup(t,e);case St.Animate:return i.visitAnimate(t,e);case St.Keyframes:return i.visitKeyframes(t,e);case St.Style:return i.visitStyle(t,e);case St.Reference:return i.visitReference(t,e);case St.AnimateChild:return i.visitAnimateChild(t,e);case St.AnimateRef:return i.visitAnimateRef(t,e);case St.Query:return i.visitQuery(t,e);case St.Stagger:return i.visitStagger(t,e);default:throw function rRe(i){return new te(3004,!1)}()}}function JD(i,t){return window.getComputedStyle(i)[t]}const XRe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class mW extends XD{normalizePropertyName(t,e){return QD(t)}normalizeStyleValue(t,e,n,r){let s="";const o=n.toString().trim();if(XRe.has(e)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function sRe(i,t){return new te(3005,!1)}())}return o+s}}const wx="*";const Tx=new Set(["true","1"]),Mx=new Set(["false","0"]);function pW(i,t){const e=Tx.has(i)||Mx.has(i),n=Tx.has(t)||Mx.has(t);return(r,s)=>{let o=i==wx||i==r,a=t==wx||t==s;return!o&&e&&"boolean"==typeof r&&(o=r?Tx.has(i):Mx.has(i)),!a&&n&&"boolean"==typeof s&&(a=s?Tx.has(t):Mx.has(t)),o&&a}}const KRe=new RegExp("s*:selfs*,?","g");function e1(i,t,e,n){return new QRe(i).build(t,e,n)}class QRe{constructor(t){this._driver=t}build(t,e,n){const r=new tCe(e);return this._resetContextStyleTimingState(r),Is(this,kg(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push(function oRe(){return new te(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==St.State){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,s.push(this.visitState(l,e))}),l.name=c}else if(a.type==St.Transition){const l=this.visitTransition(a,e);n+=l.queryCount,r+=l.depCount,o.push(l)}else e.errors.push(function aRe(){return new te(3007,!1)}())}),{type:St.Trigger,name:t.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const s=new Set,o=r||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{fW(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&e.errors.push(function lRe(i,t){return new te(3008,!1)}(0,s.values()))}return{type:St.State,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Is(this,kg(t.animation),e),r=function qRe(i,t){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function YRe(i,t,e){if(":"==i[0]){const l=function ZRe(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(function bRe(i){return new te(3016,!1)}()),"* => *"}}(i,e);if("function"==typeof l)return void t.push(l);i=l}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return e.push(function _Re(i){return new te(3015,!1)}()),t;const r=n[1],s=n[2],o=n[3];t.push(pW(r,o)),"<"==s[0]&&(r!=wx||o!=wx)&&t.push(pW(o,r))}(n,e,t)):e.push(i),e}(t.expr,e.errors);return{type:St.Transition,matchers:r,animation:n,queryCount:e.queryCount,depCount:e.depCount,options:Ud(t.options)}}visitSequence(t,e){return{type:St.Sequence,steps:t.steps.map(n=>Is(this,n,e)),options:Ud(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const s=t.steps.map(o=>{e.currentTime=n;const a=Is(this,o,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:St.Group,steps:s,options:Ud(t.options)}}visitAnimate(t,e){const n=function nCe(i,t){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return t1(xx(i,t).duration,0,"");const e=i;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=t1(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=xx(e,t);return t1(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=n;let r,s=t.styles?t.styles:os({});if(s.type==St.Keyframes)r=this.visitKeyframes(s,e);else{let o=t.styles,a=!1;if(!o){a=!0;const c={};n.easing&&(c.easing=n.easing),o=os(c)}e.currentTime+=n.duration+n.delay;const l=this.visitStyle(o,e);l.isEmptyStep=a,r=l}return e.currentAnimateTimings=null,{type:St.Animate,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)"string"==typeof a?a===$a?n.push(a):e.errors.push(new te(3002,!1)):n.push(new Map(Object.entries(a)));let s=!1,o=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:St.Style,styles:n,easing:o,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;n&&s>0&&(s-=n.duration+n.delay),t.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=e.collectedStyles.get(e.currentQuerySelector),d=c.get(l);let u=!0;d&&(s!=r&&s>=d.startTime&&r<=d.endTime&&(e.errors.push(function dRe(i,t,e,n,r){return new te(3010,!1)}()),u=!1),s=d.startTime),u&&c.set(l,{startTime:s,endTime:r}),e.options&&function HRe(i,t,e){const n=t.params||{},r=fW(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||e.push(function iRe(i){return new te(3001,!1)}())})}(a,e.options,e.errors)})})}visitKeyframes(t,e){const n={type:St.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function uRe(){return new te(3011,!1)}()),n;let s=0;const o=[];let a=!1,l=!1,c=0;const d=t.steps.map(g=>{const b=this._makeStyleAst(g,e);let v=null!=b.offset?b.offset:function iCe(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const e=i;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(b.styles),y=0;return null!=v&&(s++,y=b.offset=v),l=l||y<0||y>1,a=a||y<c,c=y,o.push(y),b});l&&e.errors.push(function hRe(){return new te(3012,!1)}()),a&&e.errors.push(function fRe(){return new te(3200,!1)}());const u=t.steps.length;let h=0;s>0&&s<u?e.errors.push(function mRe(){return new te(3202,!1)}()):0==s&&(h=1/(u-1));const f=u-1,m=e.currentTime,_=e.currentAnimateTimings,p=_.duration;return d.forEach((g,b)=>{const v=h>0?b==f?1:h*b:o[b],y=v*p;e.currentTime=m+_.delay+y,_.duration=y,this._validateStyleAst(g,e),g.offset=v,n.styles.push(g)}),n}visitReference(t,e){return{type:St.Reference,animation:Is(this,kg(t.animation),e),options:Ud(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:St.AnimateChild,options:Ud(t.options)}}visitAnimateRef(t,e){return{type:St.AnimateRef,animation:this.visitReference(t.animation,e),options:Ud(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,o]=function JRe(i){const t=!!i.split(/\s*,\s*/).find(e=>":self"==e);return t&&(i=i.replace(KRe,"")),i=i.replace(/@\*/g,yx).replace(/@\w+/g,e=>yx+"-"+e.slice(1)).replace(/:animating/g,YD),[i,t]}(t.selector);e.currentQuerySelector=n.length?n+" "+s:s,Ds(e.collectedStyles,e.currentQuerySelector,new Map);const a=Is(this,kg(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:St.Query,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:Ud(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function pRe(){return new te(3013,!1)}());const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:xx(t.timings,e.errors,!0);return{type:St.Stagger,animation:Is(this,kg(t.animation),e),timings:n,options:null}}}class tCe{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ud(i){return i?(i={...i}).params&&(i.params=function eCe(i){return i?{...i}:null}(i.params)):i={},i}function t1(i,t,e){return{duration:i,delay:t,easing:e}}function n1(i,t,e,n,r,s,o=null,a=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class Sx{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const oCe=new RegExp(":enter","g"),lCe=new RegExp(":leave","g");function r1(i,t,e,n,r,s=new Map,o=new Map,a,l,c=[]){return(new cCe).buildKeyframes(i,t,e,n,r,s,o,a,l,c)}class cCe{buildKeyframes(t,e,n,r,s,o,a,l,c,d=[]){c=c||new Sx;const u=new s1(t,e,c,r,s,d,[]);u.options=l;const h=l.delay?Ka(l.delay):0;u.currentTimeline.delayNextStep(h),u.currentTimeline.setStyles([o],null,u.errors,l),Is(this,n,u);const f=u.timelines.filter(m=>m.containsAnimation());if(f.length&&a.size){let m;for(let _=f.length-1;_>=0;_--){const p=f[_];if(p.element===e){m=p;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([a],null,u.errors,l)}return f.length?f.map(m=>m.buildKeyframes()):[n1(e,[],[],[],0,h,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.get(e.element);if(n){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,n),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,n){for(const r of t){const s=r?.delay;if(s){const o="number"==typeof s?s:Ka(Fg(s,r?.params??{},e.errors));n.delayNextStep(o)}}}_visitSubInstructions(t,e,n){let s=e.currentTimeline.currentTime;const o=null!=n.duration?Ka(n.duration):null,a=null!=n.delay?Ka(n.delay):null;return 0!==o&&t.forEach(l=>{const c=e.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Is(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){r.previousNode.type==St.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Rx);const o=Ka(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>Is(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?Ka(t.options.delay):0;t.steps.forEach(o=>{const a=e.createSubContext(t.options);s&&a.delayNextStep(s),Is(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return xx(e.params?Fg(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const s=t.style;s.type==St.Keyframes?this.visitKeyframes(s,e):(e.incrementTime(n.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(s):n.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,s=n.duration,a=e.createSubContext().currentTimeline;a.easing=n.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?Ka(r.delay):0;s&&(e.previousNode.type===St.Style||0==n&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Rx);let o=n;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{e.currentQueryIndex=d;const u=e.createSubContext(t.options,c);s&&u.delayNextStep(s),c===e.element&&(l=u.currentTimeline),Is(this,t.animation,u),u.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,u.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),a=o*(e.currentQueryTotal-1);let l=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime}const d=e.currentTimeline;l&&d.delayNextStep(l);const u=d.currentTime;Is(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)}}const Rx={};class s1{constructor(t,e,n,r,s,o,a,l){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Rx,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Cx(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Ka(n.duration)),null!=n.delay&&(r.delay=Ka(n.delay));const s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=Fg(s[a],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(r=>{n[r]=e[r]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,s=new s1(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=Rx,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(n??0)+t.delay,easing:""},s=new dCe(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,s,o){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(oCe,"."+this._enterClassName)).replace(lCe,"."+this._leaveClassName);let c=this._driver.query(this.element,t,1!=n);0!==n&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),a.push(...c)}return!s&&0==a.length&&o.push(function gRe(i){return new te(3014,!1)}()),a}}class Cx{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Cx(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||$a),this._currentKeyframe.set(e,$a);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},o=function uCe(i,t){const e=new Map;let n;return i.forEach(r=>{if("*"===r){n??=t.keys();for(let s of n)e.set(s,$a)}else for(let[s,o]of r)e.set(s,o)}),e}(t,this._globalTimelineStyles);for(let[a,l]of o){const c=Fg(l,s,n);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??$a),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,n)=>{const r=this._styleSummary.get(n);(!r||e.time>r.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=new Map([...this._backFill,...a]);c.forEach((d,u)=>{"!"===d?t.add(u):d===$a&&e.add(u)}),n||c.set("offset",l/this.duration),r.push(c)});const s=[...t.values()],o=[...e.values()];if(n){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return n1(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class dCe extends Cx{constructor(t,e,n,r,s,o,a=!1){super(t,e,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=n+e,a=e/o,l=new Map(t[0]);l.set("offset",0),s.push(l);const c=new Map(t[0]);c.set("offset",bW(a)),s.push(c);const d=t.length-1;for(let u=1;u<=d;u++){let h=new Map(t[u]);const f=h.get("offset");h.set("offset",bW((e+f*n)/o)),s.push(h)}n=o,e=0,r="",t=s}return n1(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function bW(i,t=3){const e=Math.pow(10,t-1);return Math.round(i*e)/e}function vW(i,t,e,n,r,s,o,a,l,c,d,u,h){return{type:0,element:i,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:n,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:u,errors:h}}const o1={};class yW{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function hCe(i,t,e,n,r){return i.some(s=>s(t,e,n,r))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,n):new Map}build(t,e,n,r,s,o,a,l,c,d){const u=[],h=this.ast.options&&this.ast.options.params||o1,m=this.buildStyles(n,a&&a.params||o1,u),_=l&&l.params||o1,p=this.buildStyles(r,_,u),g=new Set,b=new Map,v=new Map,y="void"===r,T={params:xW(_,h),delay:this.ast.options?.delay},w=d?[]:r1(t,e,this.ast.animation,s,o,m,p,T,c,u);let M=0;return w.forEach(D=>{M=Math.max(D.duration+D.delay,M)}),u.length?vW(e,this._triggerName,n,r,y,m,p,[],[],b,v,M,u):(w.forEach(D=>{const S=D.element,x=Ds(b,S,new Set);D.preStyleProps.forEach(U=>x.add(U));const k=Ds(v,S,new Set);D.postStyleProps.forEach(U=>k.add(U)),S!==e&&g.add(S)}),vW(e,this._triggerName,n,r,y,m,p,w,[...g.values()],b,v,M))}}function xW(i,t){const e={...t};return Object.entries(i).forEach(([n,r])=>{null!=r&&(e[n]=r)}),e}class fCe{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n=new Map,r=xW(t,this.defaultParams);return this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Fg(o,r,e));const l=this.normalizer.normalizePropertyName(a,e);o=this.normalizer.normalizeStyleValue(a,l,o,e),n.set(a,o)})}),n}}class pCe{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new fCe(r.style,r.options&&r.options.params||{},n))}),wW(this.states,"true","1"),wW(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new yW(t,r,this.states))}),this.fallbackTransition=function gCe(i,t,e){return new yW(i,{type:St.Transition,animation:{type:St.Sequence,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(o=>o.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function wW(i,t,e){i.has(t)?i.has(e)||i.set(e,i.get(t)):i.has(e)&&i.set(t,i.get(e))}const _Ce=new Sx;class bCe{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const n=[],s=e1(this._driver,e,n,[]);if(n.length)throw function TRe(i){return new te(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,n){const r=t.element,s=sW(this._normalizer,t.keyframes,e,n);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],s=this._animations.get(t);let o;const a=new Map;if(s?(o=r1(this._driver,e,s,qD,bx,new Map,new Map,n,_Ce,r),o.forEach(d=>{const u=Ds(a,d.element,new Map);d.postStyleProps.forEach(h=>u.set(h,null))})):(r.push(function MRe(){return new te(3300,!1)}()),o=[]),r.length)throw function SRe(i){return new te(3504,!1)}();a.forEach((d,u)=>{d.forEach((h,f)=>{d.set(f,this._driver.computeStyle(u,f,$a))})});const c=sc(o.map(d=>{const u=a.get(d.element);return this._buildPlayer(d,new Map,u)}));return this._playersById.set(t,c),c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function RRe(i){return new te(3301,!1)}();return e}listen(t,e,n,r){const s=HD(e,"","","");return VD(this._getPlayer(t),n,s,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const TW="ng-animate-queued",a1="ng-animate-disabled",TCe=[],MW={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},MCe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Eo="__ng_removed";class l1{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function ECe(i){return i??null}(n?t.value:t),n){const{value:s,...o}=t;this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const n=this.options.params;Object.keys(e).forEach(r=>{null==n[r]&&(n[r]=e[r])})}}}const Lg="void",c1=new l1(Lg);class SCe{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Ks(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.has(e))throw function CRe(i,t){return new te(3302,!1)}();if(null==n||0==n.length)throw function ERe(i){return new te(3303,!1)}();if(!function ACe(i){return"start"==i||"done"==i}(n))throw function ARe(i,t){return new te(3400,!1)}();const s=Ds(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=Ds(this._engine.statesByElement,t,new Map);return a.has(e)||(Ks(t,vx),Ks(t,vx+"-"+e),a.set(e,c1)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function DRe(i){return new te(3401,!1)}();return e}trigger(t,e,n,r=!0){const s=this._getTrigger(e),o=new d1(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(Ks(t,vx),Ks(t,vx+"-"+e),this._engine.statesByElement.set(t,a=new Map));let l=a.get(e);const c=new l1(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=c1),c.value!==Lg&&l.value===c.value){if(!function PCe(i,t){const e=Object.keys(i),n=Object.keys(t);if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||i[s]!==t[s])return!1}return!0}(l.params,c.params)){const _=[],p=s.matchStyles(l.value,l.params,_),g=s.matchStyles(c.value,c.params,_);_.length?this._engine.reportError(_):this._engine.afterFlush(()=>{Bd(t,p),ca(t,g)})}return}const h=Ds(this._engine.playersByElement,t,[]);h.forEach(_=>{_.namespaceId==this.id&&_.triggerName==e&&_.queued&&_.destroy()});let f=s.matchTransition(l.value,c.value,t,c.params),m=!1;if(!f){if(!r)return;f=s.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:m}),m||(Ks(t,TW),o.onStart(()=>{gf(t,TW)})),o.onDone(()=>{let _=this.players.indexOf(o);_>=0&&this.players.splice(_,1);const p=this._engine.playersByElement.get(t);if(p){let g=p.indexOf(o);g>=0&&p.splice(g,1)}}),this.players.push(o),h.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,yx,!0);n.forEach(r=>{if(r[Eo])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,n,r){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const d=this.trigger(t,c,Lg,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),n&&sc(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=n.get(o)||c1,d=new l1(Lg),u=new d1(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:l,fromState:c,toState:d,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Eo];(!s||s===MW)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Ks(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==n.triggerName){const l=HD(s,n.triggerName,n.fromState.value,n.toState.value);l._data=t,VD(n.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((n,r)=>{const s=n.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}}class RCe{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,n,r){this.bodyNode=t,this.driver=e,this._normalizer=n,this.scheduler=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,o)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){const n=new SCe(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,a=this.driver.getParentElement(e);for(;a;){const l=r.get(a);if(l){const c=n.indexOf(l);n.splice(c+1,0,t),o=!0;break}a=this.driver.getParentElement(a)}o||n.unshift(t)}else n.push(t);return r.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const n=this._fetchNamespace(t);this.namespacesByHostElement.delete(n.hostElement);const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1),n.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,n,r){if(Ex(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!Ex(e))return;const s=e[Eo];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Ks(t,a1)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),gf(t,a1))}removeNode(t,e,n){if(Ex(e)){this.scheduler?.notify();const r=t?this._fetchNamespace(t):null;r?r.removeNode(e,n):this.markElementAsRemoved(t,e,!1,n);const s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,n)}else this._onRemovalComplete(e,n)}markElementAsRemoved(t,e,n,r,s){this.collectedLeaveElements.push(e),e[Eo]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,n,r,s){return Ex(e)?this._fetchNamespace(t).listen(e,n,r,s):()=>{}}_buildInstruction(t,e,n,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,yx,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,YD,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return sc(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Eo];if(e&&e.setForRemoval){if(t[Eo]=MW,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(a1)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Ks(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],e.length?sc(e).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(t){throw function IRe(i){return new te(3402,!1)}()}_flushAnimations(t,e){const n=new Sx,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(V=>{d.add(V);const q=this.driver.query(V,".ng-animate-queued",!0);for(let z=0;z<q.length;z++)d.add(q[z])});const u=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=CW(h,this.collectedEnterElements),m=new Map;let _=0;f.forEach((V,q)=>{const z=qD+_++;m.set(q,z),V.forEach(X=>Ks(X,z))});const p=[],g=new Set,b=new Set;for(let V=0;V<this.collectedLeaveElements.length;V++){const q=this.collectedLeaveElements[V],z=q[Eo];z&&z.setForRemoval&&(p.push(q),g.add(q),z.hasAnimation?this.driver.query(q,".ng-star-inserted",!0).forEach(X=>g.add(X)):b.add(q))}const v=new Map,y=CW(h,Array.from(g));y.forEach((V,q)=>{const z=bx+_++;v.set(q,z),V.forEach(X=>Ks(X,z))}),t.push(()=>{f.forEach((V,q)=>{const z=m.get(q);V.forEach(X=>gf(X,z))}),y.forEach((V,q)=>{const z=v.get(q);V.forEach(X=>gf(X,z))}),p.forEach(V=>{this.processLeaveNode(V)})});const T=[],w=[];for(let V=this._namespaceList.length-1;V>=0;V--)this._namespaceList[V].drainQueuedTransitions(e).forEach(z=>{const X=z.player,se=z.element;if(T.push(X),this.collectedEnterElements.length){const N=se[Eo];if(N&&N.setForMove){if(N.previousTriggersValues&&N.previousTriggersValues.has(z.triggerName)){const me=N.previousTriggersValues.get(z.triggerName),Ae=this.statesByElement.get(z.element);if(Ae&&Ae.has(z.triggerName)){const j=Ae.get(z.triggerName);j.value=me,Ae.set(z.triggerName,j)}}return void X.destroy()}}const Me=!u||!this.driver.containsElement(u,se),Ve=v.get(se),Qe=m.get(se),W=this._buildInstruction(z,n,Qe,Ve,Me);if(W.errors&&W.errors.length)return void w.push(W);if(Me)return X.onStart(()=>Bd(se,W.fromStyles)),X.onDestroy(()=>ca(se,W.toStyles)),void r.push(X);if(z.isFallbackTransition)return X.onStart(()=>Bd(se,W.fromStyles)),X.onDestroy(()=>ca(se,W.toStyles)),void r.push(X);const be=[];W.timelines.forEach(N=>{N.stretchStartingKeyframe=!0,this.disabledNodes.has(N.element)||be.push(N)}),W.timelines=be,n.append(se,W.timelines),o.push({instruction:W,player:X,element:se}),W.queriedElements.forEach(N=>Ds(a,N,[]).push(X)),W.preStyleProps.forEach((N,me)=>{if(N.size){let Ae=l.get(me);Ae||l.set(me,Ae=new Set),N.forEach((j,tt)=>Ae.add(tt))}}),W.postStyleProps.forEach((N,me)=>{let Ae=c.get(me);Ae||c.set(me,Ae=new Set),N.forEach((j,tt)=>Ae.add(tt))})});if(w.length){const V=[];w.forEach(q=>{V.push(function PRe(i,t){return new te(3505,!1)}())}),T.forEach(q=>q.destroy()),this.reportError(V)}const M=new Map,D=new Map;o.forEach(V=>{const q=V.element;n.has(q)&&(D.set(q,q),this._beforeAnimationBuild(V.player.namespaceId,V.instruction,M))}),r.forEach(V=>{const q=V.element;this._getPreviousPlayers(q,!1,V.namespaceId,V.triggerName,null).forEach(X=>{Ds(M,q,[]).push(X),X.destroy()})});const S=p.filter(V=>AW(V,l,c)),x=new Map;RW(x,this.driver,b,c,$a).forEach(V=>{AW(V,l,c)&&S.push(V)});const U=new Map;f.forEach((V,q)=>{RW(U,this.driver,new Set(V),l,"!")}),S.forEach(V=>{const q=x.get(V),z=U.get(V);x.set(V,new Map([...q?.entries()??[],...z?.entries()??[]]))});const L=[],H=[],Y={};o.forEach(V=>{const{element:q,player:z,instruction:X}=V;if(n.has(q)){if(d.has(q))return z.onDestroy(()=>ca(q,X.toStyles)),z.disabled=!0,z.overrideTotalTime(X.totalTime),void r.push(z);let se=Y;if(D.size>1){let Ve=q;const Qe=[];for(;Ve=Ve.parentNode;){const W=D.get(Ve);if(W){se=W;break}Qe.push(Ve)}Qe.forEach(W=>D.set(W,se))}const Me=this._buildAnimation(z.namespaceId,X,M,s,U,x);if(z.setRealPlayer(Me),se===Y)L.push(z);else{const Ve=this.playersByElement.get(se);Ve&&Ve.length&&(z.parentPlayer=sc(Ve)),r.push(z)}}else Bd(q,X.fromStyles),z.onDestroy(()=>ca(q,X.toStyles)),H.push(z),d.has(q)&&r.push(z)}),H.forEach(V=>{const q=s.get(V.element);if(q&&q.length){const z=sc(q);V.setRealPlayer(z)}}),r.forEach(V=>{V.parentPlayer?V.syncPlayerEvents(V.parentPlayer):V.destroy()});for(let V=0;V<p.length;V++){const q=p[V],z=q[Eo];if(gf(q,bx),z&&z.hasAnimation)continue;let X=[];if(a.size){let Me=a.get(q);Me&&Me.length&&X.push(...Me);let Ve=this.driver.query(q,YD,!0);for(let Qe=0;Qe<Ve.length;Qe++){let W=a.get(Ve[Qe]);W&&W.length&&X.push(...W)}}const se=X.filter(Me=>!Me.destroyed);se.length?DCe(this,q,se):this.processLeaveNode(q)}return p.length=0,L.forEach(V=>{this.players.push(V),V.onDone(()=>{V.destroy();const q=this.players.indexOf(V);this.players.splice(q,1)}),V.play()}),L}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,s){let o=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(o=a)}else{const a=this.playersByElement.get(t);if(a){const l=!s||s==Lg;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(n||r)&&(o=o.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(t,e,n){const s=e.element,o=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const c=l.element,d=c!==s,u=Ds(n,c,[]);this._getPreviousPlayers(c,d,o,a,e.toState).forEach(f=>{const m=f.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),f.destroy(),u.push(f)})}Bd(s,e.fromStyles)}_buildAnimation(t,e,n,r,s,o){const a=e.triggerName,l=e.element,c=[],d=new Set,u=new Set,h=e.timelines.map(m=>{const _=m.element;d.add(_);const p=_[Eo];if(p&&p.removedBeforeQueried)return new mg(m.duration,m.delay);const g=_!==l,b=function ICe(i){const t=[];return EW(i,t),t}((n.get(_)||TCe).map(M=>M.getRealPlayer())).filter(M=>!!M.element&&M.element===_),v=s.get(_),y=o.get(_),T=sW(this._normalizer,m.keyframes,v,y),w=this._buildPlayer(m,T,b);if(m.subTimeline&&r&&u.add(_),g){const M=new d1(t,a,_);M.setRealPlayer(w),c.push(M)}return w});c.forEach(m=>{Ds(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>function CCe(i,t,e){let n=i.get(t);if(n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&i.delete(t)}return n}(this.playersByQueriedElement,m.element,m))}),d.forEach(m=>Ks(m,uW));const f=sc(h);return f.onDestroy(()=>{d.forEach(m=>gf(m,uW)),ca(l,e.toStyles)}),u.forEach(m=>{Ds(r,m,[]).push(f)}),f}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new mg(t.duration,t.delay)}}class d1{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new mg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,n)=>{e.forEach(r=>VD(t,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Ds(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Ex(i){return i&&1===i.nodeType}function SW(i,t){const e=i.style.display;return i.style.display=t??"none",e}function RW(i,t,e,n,r){const s=[];e.forEach(l=>s.push(SW(l)));const o=[];n.forEach((l,c)=>{const d=new Map;l.forEach(u=>{const h=t.computeStyle(c,u,r);d.set(u,h),(!h||0==h.length)&&(c[Eo]=MCe,o.push(c))}),i.set(c,d)});let a=0;return e.forEach(l=>SW(l,s[a++])),o}function CW(i,t){const e=new Map;if(i.forEach(a=>e.set(a,[])),0==t.length)return e;const r=new Set(t),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=e.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return t.forEach(a=>{const l=o(a);1!==l&&e.get(l).push(a)}),e}function Ks(i,t){i.classList?.add(t)}function gf(i,t){i.classList?.remove(t)}function DCe(i,t,e){sc(e).onDone(()=>i.processLeaveNode(t))}function EW(i,t){for(let e=0;e<i.length;e++){const n=i[e];n instanceof E4?EW(n.players,t):t.push(n)}}function AW(i,t,e){const n=e.get(i);if(!n)return!1;let r=t.get(i);return r?n.forEach(s=>r.add(s)):t.set(i,n),e.delete(i),!0}class Og{constructor(t,e,n,r){this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(s,o)=>{},this._transitionEngine=new RCe(t.body,e,n,r),this._timelineEngine=new bCe(t.body,e,n),this._transitionEngine.onRemovalComplete=(s,o)=>this.onRemovalComplete(s,o)}registerTrigger(t,e,n,r,s){const o=t+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],d=e1(this._driver,s,l,[]);if(l.length)throw function xRe(i,t){return new te(3404,!1)}();a=function mCe(i,t,e){return new pCe(i,t,e)}(r,d,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n){this._transitionEngine.removeNode(t,e,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[s,o]=oW(n);this._timelineEngine.command(s,e,o,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,s){if("@"==n.charAt(0)){const[o,a]=oW(n);return this._timelineEngine.listen(o,e,a,s)}return this._transitionEngine.listen(t,e,n,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}}class Ng{static#e=this.initialStylesByElement=new WeakMap;constructor(t,e,n){this._element=t,this._startStyles=e,this._endStyles=n,this._state=0;let r=Ng.initialStylesByElement.get(t);r||Ng.initialStylesByElement.set(t,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&ca(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ca(this._element,this._initialStyles),this._endStyles&&(ca(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Ng.initialStylesByElement.delete(this._element),this._startStyles&&(Bd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Bd(this._element,this._endStyles),this._endStyles=null),ca(this._element,this._initialStyles),this._state=3)}}function u1(i){let t=null;return i.forEach((e,n)=>{(function FCe(i){return"display"===i||"position"===i})(n)&&(t=t||new Map,t.set(n,e))}),t}class DW{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;const e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(t,e,n){return t.animate(this._convertKeyframesToObject(e),n)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&t.set(r,this._finished?n:JD(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class IW{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return lW(t,e)}getParentElement(t){return GD(t)}query(t,e,n){return cW(t,e,n)}computeStyle(t,e,n){return JD(t,e)}animate(t,e,n,r,s,o=[]){const l={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,d=o.filter(f=>f instanceof DW);(function WRe(i,t){return 0===i||0===t})(n,r)&&d.forEach(f=>{f.currentSnapshot.forEach((m,_)=>c.set(_,m))});let u=function zRe(i){return i.length?i[0]instanceof Map?i:i.map(t=>new Map(Object.entries(t))):[]}(e).map(f=>new Map(f));u=function $Re(i,t,e){if(e.size&&t.length){let n=t[0],r=[];if(e.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<t.length;s++){let o=t[s];r.forEach(a=>o.set(a,JD(i,a)))}}return t}(t,u,c);const h=function kCe(i,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=u1(t[0]),t.length>1&&(n=u1(t[t.length-1]))):t instanceof Map&&(e=u1(t)),e||n?new Ng(i,e,n):null}(t,u);return new DW(t,u,l,h)}}const PW="@.disabled";class kW{constructor(t,e,n,r){this.namespaceId=t,this.delegate=e,this.engine=n,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&e==PW?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class LCe extends kW{constructor(t,e,n,r,s){super(e,n,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==PW?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.slice(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function OCe(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let s=e.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function NCe(i){const t=i.indexOf(".");return[i.substring(0,t),i.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,n,a)})}return this.delegate.listen(t,e,n)}}class jCe{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=(r,s)=>{const o=s?.parentNode(r);o&&s.removeChild(o,r)}}createRenderer(t,e){const r=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){const c=this._rendererCache;let d=c.get(r);return d||(d=new kW("",r,this.engine,()=>c.delete(r)),c.set(r,d)),d}const s=e.id,o=e.id+"-"+this._currentId;this._currentId++,this.engine.register(o,t);const a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(s,o,t,c.name,c)};return e.data.animation.forEach(a),new LCe(this,o,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){if(t>=0&&t<this._microtaskId)return void this._zone.run(()=>e(n));const r=this._animationCallbacksBuffer;0==r.length&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),r.push([e,n])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const FW=[{provide:XD,useFactory:function UCe(){return new mW}},{provide:Og,useClass:(()=>{class i extends Og{constructor(e,n,r){super(e,n,r,ee(rb,{optional:!0}))}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(n){return new(n||i)(ue(Xt),ue($D),ue(XD))};static#t=this.\u0275prov=Re({token:i,factory:i.\u0275fac})}return i})()},{provide:YT,useFactory:function VCe(i,t,e){return new jCe(i,t,e)},deps:[US,Og,it]}],h1=[{provide:$D,useFactory:()=>new IW},{provide:Yr,useValue:"BrowserAnimations"},...FW],LW=[{provide:$D,useClass:WD},{provide:Yr,useValue:"NoopAnimations"},...FW];let zCe=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?LW:h1}}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i});static#i=this.\u0275inj=Yt({providers:h1,imports:[tj]})}return i})(),HCe=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=Kt({type:i,bootstrap:[uSe]});static#i=this.\u0275inj=Yt({providers:[Obe({fullLibraryLoader:()=>zd.e(275).then(zd.bind(zd,9275))}),g0],imports:[tj,dMe,Qbe,JSe,cwe,zbe,Xbe,zCe,Tpe,ND,TA,sSe,IA,OD,Yge]})}return i})();Ute().bootstrapModule(HCe).catch(i=>console.error(i))}},Ix=>{Ix(Ix.s=6421)}]);