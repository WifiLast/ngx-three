"use strict";(self.webpackChunkngx_three_demo=self.webpackChunkngx_three_demo||[]).push([[179],{508:(eM,B2,uh)=>{var Eg={};function Si(i){return"function"==typeof i}function tM(i){const t=i(n=>{Error.call(n),n.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}uh.r(Eg),uh.d(Eg,{ACESFilmicToneMapping:()=>xj,AddEquation:()=>vs,AddOperation:()=>bj,AdditiveAnimationBlendMode:()=>hT,AdditiveBlending:()=>uf,AlphaFormat:()=>Rj,AlwaysDepth:()=>uj,AlwaysStencilFunc:()=>Uj,AmbientLight:()=>yx,AmbientLightProbe:()=>P4,AnimationAction:()=>z4,AnimationClip:()=>cu,AnimationLoader:()=>Jae,AnimationMixer:()=>G4,AnimationObjectGroup:()=>ble,AnimationUtils:()=>Xae,ArcCurve:()=>n4,ArrayCamera:()=>GT,ArrowHelper:()=>h5,Audio:()=>IR,AudioAnalyser:()=>lle,AudioContext:()=>RR,AudioListener:()=>N4,AudioLoader:()=>sle,AxesHelper:()=>f5,BackSide:()=>zr,BasicDepthPacking:()=>Nj,BasicShadowMap:()=>sie,Bone:()=>Kd,BooleanKeyframeTrack:()=>su,Box2:()=>Mle,Box3:()=>Ks,Box3Helper:()=>c5,BoxBufferGeometry:()=>Tle,BoxGeometry:()=>Ji,BoxHelper:()=>l5,BufferAttribute:()=>Ci,BufferGeometry:()=>Mt,BufferGeometryLoader:()=>S4,ByteType:()=>Cj,Cache:()=>du,Camera:()=>zy,CameraHelper:()=>a5,CanvasTexture:()=>cx,CapsuleBufferGeometry:()=>Rle,CapsuleGeometry:()=>ip,CatmullRomCurve3:()=>r4,CineonToneMapping:()=>yj,CircleBufferGeometry:()=>Ile,CircleGeometry:()=>np,ClampToEdgeWrapping:()=>mr,Clock:()=>_p,Color:()=>Be,ColorKeyframeTrack:()=>yR,ColorManagement:()=>As,CompressedArrayTexture:()=>KT,CompressedTexture:()=>gb,CompressedTextureLoader:()=>vx,ConeBufferGeometry:()=>Dle,ConeGeometry:()=>rp,CubeCamera:()=>BT,CubeReflectionMapping:()=>sc,CubeRefractionMapping:()=>oc,CubeTexture:()=>Wd,CubeTextureLoader:()=>x4,CubeUVReflectionMapping:()=>gf,CubicBezierCurve:()=>iR,CubicBezierCurve3:()=>o4,CubicInterpolant:()=>b4,CullFaceBack:()=>GS,CullFaceFront:()=>tj,CullFaceFrontBack:()=>rie,CullFaceNone:()=>ej,Curve:()=>Eo,CurvePath:()=>l4,CustomBlending:()=>hf,CustomToneMapping:()=>wj,CylinderBufferGeometry:()=>Ple,CylinderGeometry:()=>zn,Cylindrical:()=>Cle,Data3DTexture:()=>eb,DataArrayTexture:()=>J_,DataTexture:()=>Ba,DataTextureLoader:()=>mp,DataUtils:()=>ss,DecrementStencilOp:()=>mie,DecrementWrapStencilOp:()=>_ie,DefaultLoadingManager:()=>y4,DepthFormat:()=>cc,DepthStencilFormat:()=>dc,DepthTexture:()=>qf,DirectionalLight:()=>Eb,DirectionalLightHelper:()=>o5,DiscreteInterpolant:()=>v4,DisplayP3ColorSpace:()=>pT,DodecahedronBufferGeometry:()=>kle,DodecahedronGeometry:()=>sp,DoubleSide:()=>bs,DstAlphaFactor:()=>sy,DstColorFactor:()=>oy,DynamicCopyUsage:()=>Die,DynamicDrawUsage:()=>Ay,DynamicReadUsage:()=>Tie,EdgesGeometry:()=>lR,EllipseCurve:()=>bc,EqualDepth:()=>fj,EqualStencilFunc:()=>yie,EquirectangularReflectionMapping:()=>mf,EquirectangularRefractionMapping:()=>V_,Euler:()=>Js,EventDispatcher:()=>ns,ExtrudeBufferGeometry:()=>Lle,ExtrudeGeometry:()=>iu,FileLoader:()=>vr,Float16BufferAttribute:()=>bne,Float32BufferAttribute:()=>Ze,Float64BufferAttribute:()=>vne,FloatType:()=>Nn,Fog:()=>lb,FogExp2:()=>Zy,FramebufferTexture:()=>t4,FrontSide:()=>Ia,Frustum:()=>Hy,GLBufferAttribute:()=>wle,GLSL1:()=>kie,GLSL3:()=>mT,GreaterDepth:()=>mj,GreaterEqualDepth:()=>pj,GreaterEqualStencilFunc:()=>Mie,GreaterStencilFunc:()=>wie,GridHelper:()=>FR,Group:()=>xs,HalfFloatType:()=>pn,HemisphereLight:()=>wR,HemisphereLightHelper:()=>t5,HemisphereLightProbe:()=>D4,IcosahedronBufferGeometry:()=>Ble,IcosahedronGeometry:()=>ap,ImageBitmapLoader:()=>I4,ImageLoader:()=>wb,ImageUtils:()=>AT,IncrementStencilOp:()=>pie,IncrementWrapStencilOp:()=>gie,InstancedBufferAttribute:()=>ep,InstancedBufferGeometry:()=>TR,InstancedInterleavedBuffer:()=>xle,InstancedMesh:()=>rx,Int16BufferAttribute:()=>gne,Int32BufferAttribute:()=>_ne,Int8BufferAttribute:()=>fne,IntType:()=>Ej,InterleavedBuffer:()=>cb,InterleavedBufferAttribute:()=>_c,Interpolant:()=>pp,InterpolateDiscrete:()=>Cf,InterpolateLinear:()=>Nd,InterpolateSmooth:()=>gy,InvertStencilOp:()=>bie,KeepStencilOp:()=>vy,KeyframeTrack:()=>oa,LOD:()=>YT,LatheBufferGeometry:()=>Fle,LatheGeometry:()=>Jd,Layers:()=>Sy,LessDepth:()=>hj,LessEqualDepth:()=>ay,LessEqualStencilFunc:()=>xie,LessStencilFunc:()=>Aie,Light:()=>Ac,LightProbe:()=>Sb,Line:()=>Vn,Line3:()=>q4,LineBasicMaterial:()=>mn,LineCurve:()=>ux,LineCurve3:()=>a4,LineDashedMaterial:()=>gR,LineLoop:()=>ox,LineSegments:()=>ws,LinearEncoding:()=>qs,LinearFilter:()=>Ni,LinearInterpolant:()=>AR,LinearMipMapLinearFilter:()=>die,LinearMipMapNearestFilter:()=>cie,LinearMipmapLinearFilter:()=>Ws,LinearMipmapNearestFilter:()=>cy,LinearSRGBColorSpace:()=>Vd,LinearToneMapping:()=>vj,Loader:()=>br,LoaderUtils:()=>uu,LoadingManager:()=>xR,LoopOnce:()=>uT,LoopPingPong:()=>Fj,LoopRepeat:()=>Bj,LuminanceAlphaFormat:()=>Ij,LuminanceFormat:()=>dy,MOUSE:()=>Qs,Material:()=>Un,MaterialLoader:()=>xx,MathUtils:()=>vt,Matrix3:()=>bi,Matrix4:()=>We,MaxEquation:()=>YS,Mesh:()=>nt,MeshBasicMaterial:()=>Xn,MeshDepthMaterial:()=>Zd,MeshDistanceMaterial:()=>Xy,MeshLambertMaterial:()=>bx,MeshMatcapMaterial:()=>mR,MeshNormalMaterial:()=>fp,MeshPhongMaterial:()=>nu,MeshPhysicalMaterial:()=>ja,MeshStandardMaterial:()=>Na,MeshToonMaterial:()=>pR,MinEquation:()=>qS,MirroredRepeatWrapping:()=>_f,MixOperation:()=>_j,MultiplyBlending:()=>WS,MultiplyOperation:()=>U_,NearestFilter:()=>Zt,NearestMipMapLinearFilter:()=>lie,NearestMipMapNearestFilter:()=>aie,NearestMipmapLinearFilter:()=>bf,NearestMipmapNearestFilter:()=>z_,NeverDepth:()=>dj,NeverStencilFunc:()=>vie,NoBlending:()=>Xt,NoColorSpace:()=>uie,NoToneMapping:()=>Pa,NormalAnimationBlendMode:()=>_y,NormalBlending:()=>Da,NotEqualDepth:()=>gj,NotEqualStencilFunc:()=>Cie,NumberKeyframeTrack:()=>ou,Object3D:()=>pi,ObjectLoader:()=>nle,ObjectSpaceNormalMap:()=>jj,OctahedronBufferGeometry:()=>Ole,OctahedronGeometry:()=>ra,OneFactor:()=>N_,OneMinusDstAlphaFactor:()=>aj,OneMinusDstColorFactor:()=>lj,OneMinusSrcAlphaFactor:()=>j_,OneMinusSrcColorFactor:()=>oj,OrthographicCamera:()=>La,PCFShadowMap:()=>HS,PCFSoftShadowMap:()=>ij,PMREMGenerator:()=>jT,Path:()=>vb,PerspectiveCamera:()=>In,Plane:()=>to,PlaneBufferGeometry:()=>Nle,PlaneGeometry:()=>gc,PlaneHelper:()=>d5,PointLight:()=>gp,PointLightHelper:()=>$4,Points:()=>$d,PointsMaterial:()=>Tl,PolarGridHelper:()=>n5,PolyhedronBufferGeometry:()=>jle,PolyhedronGeometry:()=>Fa,PositionalAudio:()=>U4,PropertyBinding:()=>ji,PropertyMixer:()=>V4,QuadraticBezierCurve:()=>nR,QuadraticBezierCurve3:()=>rR,Quaternion:()=>wi,QuaternionKeyframeTrack:()=>Rl,QuaternionLinearInterpolant:()=>A4,RED_GREEN_RGTC2_Format:()=>cT,RED_RGTC1_Format:()=>Lj,REVISION:()=>ry,RGBADepthPacking:()=>X_,RGBAFormat:()=>Rn,RGBAIntegerFormat:()=>kj,RGBA_ASTC_10x10_Format:()=>sT,RGBA_ASTC_10x5_Format:()=>iT,RGBA_ASTC_10x6_Format:()=>nT,RGBA_ASTC_10x8_Format:()=>rT,RGBA_ASTC_12x10_Format:()=>oT,RGBA_ASTC_12x12_Format:()=>aT,RGBA_ASTC_4x4_Format:()=>my,RGBA_ASTC_5x4_Format:()=>XS,RGBA_ASTC_5x5_Format:()=>ZS,RGBA_ASTC_6x5_Format:()=>KS,RGBA_ASTC_6x6_Format:()=>$S,RGBA_ASTC_8x5_Format:()=>JS,RGBA_ASTC_8x6_Format:()=>eT,RGBA_ASTC_8x8_Format:()=>tT,RGBA_BPTC_Format:()=>q_,RGBA_ETC2_EAC_Format:()=>py,RGBA_PVRTC_2BPPV1_Format:()=>W_,RGBA_PVRTC_4BPPV1_Format:()=>wf,RGBA_S3TC_DXT1_Format:()=>uy,RGBA_S3TC_DXT3_Format:()=>H_,RGBA_S3TC_DXT5_Format:()=>yf,RGB_ETC1_Format:()=>hy,RGB_ETC2_Format:()=>fy,RGB_PVRTC_2BPPV1_Format:()=>Q_,RGB_PVRTC_4BPPV1_Format:()=>xf,RGB_S3TC_DXT1_Format:()=>Af,RGFormat:()=>vf,RGIntegerFormat:()=>Pj,RawShaderMaterial:()=>fR,Ray:()=>nb,Raycaster:()=>_u,RectAreaLight:()=>SR,RedFormat:()=>Al,RedIntegerFormat:()=>Dj,ReinhardToneMapping:()=>Aj,RepeatWrapping:()=>xo,ReplaceStencilOp:()=>fie,ReverseSubtractEquation:()=>rj,RingBufferGeometry:()=>Ule,RingGeometry:()=>lp,SIGNED_RED_GREEN_RGTC2_Format:()=>dT,SIGNED_RED_RGTC1_Format:()=>lT,SRGBColorSpace:()=>Ys,Scene:()=>Ky,ShaderChunk:()=>ui,ShaderLib:()=>Mo,ShaderMaterial:()=>Dt,ShadowMaterial:()=>hR,Shape:()=>eu,ShapeBufferGeometry:()=>Vle,ShapeGeometry:()=>cp,ShapePath:()=>Sle,ShapeUtils:()=>Oa,ShortType:()=>Mj,Skeleton:()=>Jf,SkeletonHelper:()=>Z4,SkinnedMesh:()=>fb,Source:()=>Gd,Sphere:()=>wo,SphereBufferGeometry:()=>zle,SphereGeometry:()=>vc,Spherical:()=>Cx,SphericalHarmonics3:()=>E4,SplineCurve:()=>sR,SpotLight:()=>Cb,SpotLightHelper:()=>X4,Sprite:()=>qT,SpriteMaterial:()=>$y,SrcAlphaFactor:()=>pf,SrcAlphaSaturateFactor:()=>cj,SrcColorFactor:()=>sj,StaticCopyUsage:()=>Iie,StaticDrawUsage:()=>Z_,StaticReadUsage:()=>Sie,StereoCamera:()=>B4,StreamCopyUsage:()=>Pie,StreamDrawUsage:()=>Eie,StreamReadUsage:()=>Rie,StringKeyframeTrack:()=>au,SubtractEquation:()=>nj,SubtractiveBlending:()=>QS,TOUCH:()=>vl,TangentSpaceNormalMap:()=>uc,TetrahedronBufferGeometry:()=>Gle,TetrahedronGeometry:()=>dp,Texture:()=>An,TextureLoader:()=>Ax,TorusBufferGeometry:()=>Hle,TorusGeometry:()=>sa,TorusKnotBufferGeometry:()=>Qle,TorusKnotGeometry:()=>up,Triangle:()=>rs,TriangleFanDrawMode:()=>by,TriangleStripDrawMode:()=>fT,TrianglesDrawMode:()=>Oj,TubeBufferGeometry:()=>Wle,TubeGeometry:()=>hp,TwoPassDoubleSide:()=>oie,UVMapping:()=>ly,Uint16BufferAttribute:()=>Py,Uint32BufferAttribute:()=>ky,Uint8BufferAttribute:()=>pne,Uint8ClampedBufferAttribute:()=>mne,Uniform:()=>kR,UniformsGroup:()=>yle,UniformsLib:()=>ot,UniformsUtils:()=>mi,UnsignedByteType:()=>Gr,UnsignedInt248Type:()=>lc,UnsignedIntType:()=>ac,UnsignedShort4444Type:()=>Sj,UnsignedShort5551Type:()=>Tj,UnsignedShortType:()=>G_,VSMShadowMap:()=>df,Vector2:()=>pe,Vector3:()=>R,Vector4:()=>ei,VectorKeyframeTrack:()=>lu,VideoTexture:()=>e4,WebGL1Renderer:()=>BU,WebGL3DRenderTarget:()=>ine,WebGLArrayRenderTarget:()=>tne,WebGLCubeRenderTarget:()=>aU,WebGLMultipleRenderTargets:()=>nne,WebGLRenderTarget:()=>Gt,WebGLRenderer:()=>QT,WebGLUtils:()=>LU,WireframeGeometry:()=>uR,WrapAroundEnding:()=>Y_,ZeroCurvatureEnding:()=>jd,ZeroFactor:()=>ff,ZeroSlopeEnding:()=>Ud,ZeroStencilOp:()=>hie,_SRGBAFormat:()=>yy,sRGBEncoding:()=>ci});const iM=tM(i=>function(t){i(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function K0(i,e){if(i){const t=i.indexOf(e);0<=t&&i.splice(t,1)}}class dn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:n}=this;if(Si(n))try{n()}catch(s){e=s instanceof iM?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{N2(s)}catch(o){e=e??[],o instanceof iM?e=[...e,...o.errors]:e.push(o)}}if(e)throw new iM(e)}}add(e){var t;if(e&&e!==this)if(this.closed)N2(e);else{if(e instanceof dn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&K0(t,e)}remove(e){const{_finalizers:t}=this;t&&K0(t,e),e instanceof dn&&e._removeParent(this)}}dn.EMPTY=(()=>{const i=new dn;return i.closed=!0,i})();const F2=dn.EMPTY;function O2(i){return i instanceof dn||i&&"closed"in i&&Si(i.remove)&&Si(i.add)&&Si(i.unsubscribe)}function N2(i){Si(i)?i():i.unsubscribe()}const cd={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},$0={setTimeout(i,e,...t){const{delegate:n}=$0;return n?.setTimeout?n.setTimeout(i,e,...t):setTimeout(i,e,...t)},clearTimeout(i){const{delegate:e}=$0;return(e?.clearTimeout||clearTimeout)(i)},delegate:void 0};function j2(i){$0.setTimeout(()=>{const{onUnhandledError:e}=cd;if(!e)throw i;e(i)})}function nM(){}const pQ=rM("C",void 0,void 0);function rM(i,e,t){return{kind:i,value:e,error:t}}let dd=null;function J0(i){if(cd.useDeprecatedSynchronousErrorHandling){const e=!dd;if(e&&(dd={errorThrown:!1,error:null}),i(),e){const{errorThrown:t,error:n}=dd;if(dd=null,t)throw n}}else i()}class sM extends dn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,O2(e)&&e.add(this)):this.destination=yQ}static create(e,t,n){return new ev(e,t,n)}next(e){this.isStopped?aM(function gQ(i){return rM("N",i,void 0)}(e),this):this._next(e)}error(e){this.isStopped?aM(function mQ(i){return rM("E",void 0,i)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?aM(pQ,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const bQ=Function.prototype.bind;function oM(i,e){return bQ.call(i,e)}class vQ{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(n){tv(n)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(n){tv(n)}else tv(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){tv(t)}}}class ev extends sM{constructor(e,t,n){let r;if(super(),Si(e)||!e)r={next:e??void 0,error:t??void 0,complete:n??void 0};else{let s;this&&cd.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&oM(e.next,s),error:e.error&&oM(e.error,s),complete:e.complete&&oM(e.complete,s)}):r=e}this.destination=new vQ(r)}}function tv(i){cd.useDeprecatedSynchronousErrorHandling?function _Q(i){cd.useDeprecatedSynchronousErrorHandling&&dd&&(dd.errorThrown=!0,dd.error=i)}(i):j2(i)}function aM(i,e){const{onStoppedNotification:t}=cd;t&&$0.setTimeout(()=>t(i,e))}const yQ={closed:!0,next:nM,error:function AQ(i){throw i},complete:nM},lM="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ql(i){return i}function U2(i){return 0===i.length?Ql:1===i.length?i[0]:function(t){return i.reduce((n,r)=>r(n),t)}}let Fi=(()=>{class i{constructor(t){t&&(this._subscribe=t)}lift(t){const n=new i;return n.source=this,n.operator=t,n}subscribe(t,n,r){const s=function CQ(i){return i&&i instanceof sM||function wQ(i){return i&&Si(i.next)&&Si(i.error)&&Si(i.complete)}(i)&&O2(i)}(t)?t:new ev(t,n,r);return J0(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(n){t.error(n)}}forEach(t,n){return new(n=V2(n))((r,s)=>{const o=new ev({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(t)}[lM](){return this}pipe(...t){return U2(t)(this)}toPromise(t){return new(t=V2(t))((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=e=>new i(e),i})();function V2(i){var e;return null!==(e=i??cd.Promise)&&void 0!==e?e:Promise}const MQ=tM(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ht=(()=>{class i extends Fi{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const n=new z2(this,this);return n.operator=t,n}_throwIfClosed(){if(this.closed)throw new MQ}next(t){J0(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(t)}})}error(t){J0(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:n}=this;for(;n.length;)n.shift().error(t)}})}complete(){J0(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:n,isStopped:r,observers:s}=this;return n||r?F2:(this.currentObservers=null,s.push(t),new dn(()=>{this.currentObservers=null,K0(s,t)}))}_checkFinalizedStatuses(t){const{hasError:n,thrownError:r,isStopped:s}=this;n?t.error(r):s&&t.complete()}asObservable(){const t=new Fi;return t.source=this,t}}return i.create=(e,t)=>new z2(e,t),i})();class z2 extends Ht{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)}error(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:F2}}function G2(i){return Si(i?.lift)}function Mn(i){return e=>{if(G2(e))return e.lift(function(t){try{return i(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function un(i,e,t,n,r){return new EQ(i,e,t,n,r)}class EQ extends sM{constructor(e,t,n,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function wt(i,e){return Mn((t,n)=>{let r=0;t.subscribe(un(n,s=>{n.next(i.call(e,s,r++))}))})}function ud(i){return this instanceof ud?(this.v=i,this):new ud(i)}function RQ(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=t.apply(i,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){n[h]&&(r[h]=function(f){return new Promise(function(m,g){s.push([h,f,m,g])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof ud?Promise.resolve(h.value.v).then(c,d):u(s[0][2],h)}(n[h](f))}catch(m){u(s[0][3],m)}}function c(h){a("next",h)}function d(h){a("throw",h)}function u(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function IQ(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=i[Symbol.asyncIterator];return e?e.call(i):(i=function W2(i){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=i[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=i[s](o)).done,o.value)})}}}const dM=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function q2(i){return Si(i?.then)}function Y2(i){return Si(i[lM])}function X2(i){return Symbol.asyncIterator&&Si(i?.[Symbol.asyncIterator])}function Z2(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const K2=function PQ(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function $2(i){return Si(i?.[K2])}function J2(i){return RQ(this,arguments,function*(){const t=i.getReader();try{for(;;){const{value:n,done:r}=yield ud(t.read());if(r)return yield ud(void 0);yield yield ud(n)}}finally{t.releaseLock()}})}function eP(i){return Si(i?.getReader)}function us(i){if(i instanceof Fi)return i;if(null!=i){if(Y2(i))return function kQ(i){return new Fi(e=>{const t=i[lM]();if(Si(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(dM(i))return function LQ(i){return new Fi(e=>{for(let t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()})}(i);if(q2(i))return function BQ(i){return new Fi(e=>{i.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,j2)})}(i);if(X2(i))return tP(i);if($2(i))return function FQ(i){return new Fi(e=>{for(const t of i)if(e.next(t),e.closed)return;e.complete()})}(i);if(eP(i))return function OQ(i){return tP(J2(i))}(i)}throw Z2(i)}function tP(i){return new Fi(e=>{(function NQ(i,e){var t,n,r,s;return function SQ(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=IQ(i);!(n=yield t.next()).done;)if(e.next(n.value),e.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(i,e).catch(t=>e.error(t))})}function nl(i,e,t,n=0,r=!1){const s=e.schedule(function(){t(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function xr(i,e,t=1/0){return Si(e)?xr((n,r)=>wt((s,o)=>e(n,s,r,o))(us(i(n,r))),t):("number"==typeof e&&(t=e),Mn((n,r)=>function jQ(i,e,t,n,r,s,o,a){const l=[];let c=0,d=0,u=!1;const h=()=>{u&&!l.length&&!c&&e.complete()},f=g=>c<n?m(g):l.push(g),m=g=>{s&&e.next(g),c++;let _=!1;us(t(g,d++)).subscribe(un(e,p=>{r?.(p),s?f(p):e.next(p)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;l.length&&c<n;){const p=l.shift();o?nl(e,o,()=>m(p)):m(p)}h()}catch(p){e.error(p)}}))};return i.subscribe(un(e,f,()=>{u=!0,h()})),()=>{a?.()}}(n,r,i,t)))}function hh(i=1/0){return xr(Ql,i)}const Br=new Fi(i=>i.complete());function iP(i){return i&&Si(i.schedule)}function uM(i){return i[i.length-1]}function hM(i){return Si(uM(i))?i.pop():void 0}function Sg(i){return iP(uM(i))?i.pop():void 0}function nP(i,e=0){return Mn((t,n)=>{t.subscribe(un(n,r=>nl(n,i,()=>n.next(r),e),()=>nl(n,i,()=>n.complete(),e),r=>nl(n,i,()=>n.error(r),e)))})}function rP(i,e=0){return Mn((t,n)=>{n.add(i.schedule(()=>t.subscribe(n),e))})}function sP(i,e){if(!i)throw new Error("Iterable cannot be null");return new Fi(t=>{nl(t,e,()=>{const n=i[Symbol.asyncIterator]();nl(t,e,()=>{n.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function En(i,e){return e?function qQ(i,e){if(null!=i){if(Y2(i))return function zQ(i,e){return us(i).pipe(rP(e),nP(e))}(i,e);if(dM(i))return function HQ(i,e){return new Fi(t=>{let n=0;return e.schedule(function(){n===i.length?t.complete():(t.next(i[n++]),t.closed||this.schedule())})})}(i,e);if(q2(i))return function GQ(i,e){return us(i).pipe(rP(e),nP(e))}(i,e);if(X2(i))return sP(i,e);if($2(i))return function QQ(i,e){return new Fi(t=>{let n;return nl(t,e,()=>{n=i[K2](),nl(t,e,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>Si(n?.return)&&n.return()})}(i,e);if(eP(i))return function WQ(i,e){return sP(J2(i),e)}(i,e)}throw Z2(i)}(i,e):us(i)}function hd(...i){const e=Sg(i),t=function VQ(i,e){return"number"==typeof uM(i)?i.pop():e}(i,1/0),n=i;return n.length?1===n.length?us(n[0]):hh(t)(En(n,e)):Br}function hs(i){return i<=0?()=>Br:Mn((e,t)=>{let n=0;e.subscribe(un(t,r=>{++n<=i&&(t.next(r),i<=n&&t.complete())}))})}function fM(i={}){const{connector:e=(()=>new Ht),resetOnError:t=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let o=null,a=null,l=null,c=0,d=!1,u=!1;const h=()=>{a?.unsubscribe(),a=null},f=()=>{h(),o=l=null,d=u=!1},m=()=>{const g=o;f(),g?.unsubscribe()};return Mn((g,_)=>{c++,!u&&!d&&h();const p=l=l??e();_.add(()=>{c--,0===c&&!u&&!d&&(a=pM(m,r))}),p.subscribe(_),o||(o=new ev({next:v=>p.next(v),error:v=>{u=!0,h(),a=pM(f,t,v),p.error(v)},complete:()=>{d=!0,h(),a=pM(f,n),p.complete()}}),En(g).subscribe(o))})(s)}}function pM(i,e,...t){return!0===e?(i(),null):!1===e?null:e(...t).pipe(hs(1)).subscribe(()=>i())}function $i(i){for(let e in i)if(i[e]===$i)return e;throw Error("Could not find renamed property on target object.")}function mM(i,e){for(const t in e)e.hasOwnProperty(t)&&!i.hasOwnProperty(t)&&(i[t]=e[t])}function nn(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(nn).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const e=i.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function gM(i,e){return null==i||""===i?null===e?"":e:null==e||""===e?i:i+" "+e}const YQ=$i({__forward_ref__:$i});function le(i){return i.__forward_ref__=le,i.toString=function(){return nn(this())},i}function Nt(i){return _M(i)?i():i}function _M(i){return"function"==typeof i&&i.hasOwnProperty(YQ)&&i.__forward_ref__===le}function bM(i){return i&&!!i.\u0275providers}const iv="https://g.co/ng/security#xss";class Ie extends Error{constructor(e,t){super(function nv(i,e){return`NG0${Math.abs(i)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function Wt(i){return"string"==typeof i?i:null==i?"":String(i)}function rv(i,e){throw new Ie(-201,!1)}function fo(i,e){null==i&&function Vi(i,e,t,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${t} ${n} ${e} <=Actual]`))}(e,i,null,"!=")}function Ge(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function ni(i){return{providers:i.providers||[],imports:i.imports||[]}}function sv(i){return oP(i,ov)||oP(i,lP)}function oP(i,e){return i.hasOwnProperty(e)?i[e]:null}function aP(i){return i&&(i.hasOwnProperty(vM)||i.hasOwnProperty(n6))?i[vM]:null}const ov=$i({\u0275prov:$i}),vM=$i({\u0275inj:$i}),lP=$i({ngInjectableDef:$i}),n6=$i({ngInjectorDef:$i});var jt=(()=>((jt=jt||{})[jt.Default=0]="Default",jt[jt.Host=1]="Host",jt[jt.Self=2]="Self",jt[jt.SkipSelf=4]="SkipSelf",jt[jt.Optional=8]="Optional",jt))();let AM;function po(i){const e=AM;return AM=i,e}function cP(i,e,t){const n=sv(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:t&jt.Optional?null:void 0!==e?e:void rv(nn(i))}const rn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Tg={},yM="__NG_DI_FLAG__",av="ngTempTokenPath",o6=/\n/gm,dP="__source";let Rg;function fh(i){const e=Rg;return Rg=i,e}function l6(i,e=jt.Default){if(void 0===Rg)throw new Ie(-203,!1);return null===Rg?cP(i,void 0,e):Rg.get(i,e&jt.Optional?null:void 0,e)}function xe(i,e=jt.Default){return(function r6(){return AM}()||l6)(Nt(i),e)}function Ut(i,e=jt.Default){return xe(i,lv(e))}function lv(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function xM(i){const e=[];for(let t=0;t<i.length;t++){const n=Nt(i[t]);if(Array.isArray(n)){if(0===n.length)throw new Ie(900,!1);let r,s=jt.Default;for(let o=0;o<n.length;o++){const a=n[o],l=c6(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(xe(r,s))}else e.push(xe(n))}return e}function Ig(i,e){return i[yM]=e,i.prototype[yM]=e,i}function c6(i){return i[yM]}function ql(i){return{toString:i}.toString()}var zo=(()=>((zo=zo||{})[zo.OnPush=0]="OnPush",zo[zo.Default=1]="Default",zo))(),Go=(()=>{return(i=Go||(Go={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Go;var i})();const rl={},Oi=[],cv=$i({\u0275cmp:$i}),wM=$i({\u0275dir:$i}),CM=$i({\u0275pipe:$i}),hP=$i({\u0275mod:$i}),sl=$i({\u0275fac:$i}),Dg=$i({__NG_ELEMENT_ID__:$i});let h6=0;function K(i){return ql(()=>{const t=!0===i.standalone,n={},r={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===zo.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Oi,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Go.Emulated,id:"c"+h6++,styles:i.styles||Oi,_:null,setInput:null,schemas:i.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},s=i.dependencies,o=i.features;return r.inputs=mP(i.inputs,n),r.outputs=mP(i.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(fP).filter(pP):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Xr).filter(pP):null,r})}function fP(i){return zi(i)||Fr(i)}function pP(i){return null!==i}function oi(i){return ql(()=>({type:i.type,bootstrap:i.bootstrap||Oi,declarations:i.declarations||Oi,imports:i.imports||Oi,exports:i.exports||Oi,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function mP(i,e){if(null==i)return rl;const t={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=n,e&&(e[r]=s)}return t}const Oe=K;function gi(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function zi(i){return i[cv]||null}function Fr(i){return i[wM]||null}function Xr(i){return i[CM]||null}function Ls(i,e){const t=i[hP]||null;if(!t&&!0===e)throw new Error(`Type ${nn(i)} does not have '\u0275mod' property.`);return t}function Bs(i){return Array.isArray(i)&&"object"==typeof i[1]}function Qo(i){return Array.isArray(i)&&!0===i[1]}function SM(i){return 0!=(4&i.flags)}function Bg(i){return i.componentOffset>-1}function pv(i){return 1==(1&i.flags)}function Wo(i){return null!==i.template}function m6(i){return 0!=(256&i[2])}function pd(i,e){return i.hasOwnProperty(sl)?i[sl]:null}class b6{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function Sr(){return yP}function yP(i){return i.type.prototype.ngOnChanges&&(i.setInput=A6),v6}function v6(){const i=wP(this),e=i?.current;if(e){const t=i.previous;if(t===rl)i.previous=e;else for(let n in e)t[n]=e[n];i.current=null,this.ngOnChanges(e)}}function A6(i,e,t,n){const r=this.declaredInputs[t],s=wP(i)||function y6(i,e){return i[xP]=e}(i,{previous:rl,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new b6(l&&l.currentValue,e,a===rl),i[n]=e}Sr.ngInherit=!0;const xP="__ngSimpleChanges__";function wP(i){return i[xP]||null}function Tr(i){for(;Array.isArray(i);)i=i[0];return i}function mv(i,e){return Tr(e[i])}function Fs(i,e){return Tr(e[i.index])}function EP(i,e){return i.data[e]}function vh(i,e){return i[e]}function Os(i,e){const t=e[i];return Bs(t)?t:t[0]}function gv(i){return 64==(64&i[2])}function Yl(i,e){return null==e?null:i[e]}function SP(i){i[18]=0}function RM(i,e){i[5]+=e;let t=i,n=i[3];for(;null!==n&&(1===e&&1===t[5]||-1===e&&0===t[5]);)n[5]+=e,t=n,n=n[3]}const qt={lFrame:OP(null),bindingsEnabled:!0};function RP(){return qt.bindingsEnabled}function Ve(){return qt.lFrame.lView}function Ti(){return qt.lFrame.tView}function lr(i){return qt.lFrame.contextLView=i,i[8]}function cr(i){return qt.lFrame.contextLView=null,i}function Rr(){let i=IP();for(;null!==i&&64===i.type;)i=i.parent;return i}function IP(){return qt.lFrame.currentTNode}function _a(i,e){const t=qt.lFrame;t.currentTNode=i,t.isParent=e}function IM(){return qt.lFrame.isParent}function DM(){qt.lFrame.isParent=!1}function Kr(){const i=qt.lFrame;let e=i.bindingRootIndex;return-1===e&&(e=i.bindingRootIndex=i.tView.bindingStartIndex),e}function Ah(){return qt.lFrame.bindingIndex++}function ll(i){const e=qt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+i,t}function L6(i,e){const t=qt.lFrame;t.bindingIndex=t.bindingRootIndex=i,PM(e)}function PM(i){qt.lFrame.currentDirectiveIndex=i}function kM(i){const e=qt.lFrame.currentDirectiveIndex;return-1===e?null:i[e]}function LP(){return qt.lFrame.currentQueryIndex}function LM(i){qt.lFrame.currentQueryIndex=i}function F6(i){const e=i[1];return 2===e.type?e.declTNode:1===e.type?i[6]:null}function BP(i,e,t){if(t&jt.SkipSelf){let r=e,s=i;for(;!(r=r.parent,null!==r||t&jt.Host||(r=F6(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,i=s}const n=qt.lFrame=FP();return n.currentTNode=e,n.lView=i,!0}function BM(i){const e=FP(),t=i[1];qt.lFrame=e,e.currentTNode=t.firstChild,e.lView=i,e.tView=t,e.contextLView=i,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function FP(){const i=qt.lFrame,e=null===i?null:i.child;return null===e?OP(i):e}function OP(i){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=e),e}function NP(){const i=qt.lFrame;return qt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const jP=NP;function FM(){const i=NP();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function $r(){return qt.lFrame.selectedIndex}function md(i){qt.lFrame.selectedIndex=i}function Sn(){const i=qt.lFrame;return EP(i.tView,i.selectedIndex)}function _v(i,e){for(let t=e.directiveStart,n=e.directiveEnd;t<n;t++){const s=i.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=s;o&&(i.contentHooks||(i.contentHooks=[])).push(-t,o),a&&((i.contentHooks||(i.contentHooks=[])).push(t,a),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(t,a)),l&&(i.viewHooks||(i.viewHooks=[])).push(-t,l),c&&((i.viewHooks||(i.viewHooks=[])).push(t,c),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(t,c)),null!=d&&(i.destroyHooks||(i.destroyHooks=[])).push(t,d)}}function bv(i,e,t){zP(i,e,3,t)}function vv(i,e,t,n){(3&i[2])===t&&zP(i,e,t,n)}function OM(i,e){let t=i[2];(3&t)===e&&(t&=2047,t+=1,i[2]=t)}function zP(i,e,t,n){const s=n??-1,o=e.length-1;let a=0;for(let l=void 0!==n?65535&i[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=n&&a>=n)break}else e[l]<0&&(i[18]+=65536),(a<s||-1==s)&&(G6(i,t,e,l),i[18]=(4294901760&i[18])+l+2),l++}function G6(i,e,t,n){const r=t[n]<0,s=t[n+1],a=i[r?-t[n]:t[n]];if(r){if(i[2]>>11<i[18]>>16&&(3&i[2])===e){i[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Og{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function jM(i,e,t){let n=0;for(;n<t.length;){const r=t[n];if("number"==typeof r){if(0!==r)break;n++;const s=t[n++],o=t[n++],a=t[n++];i.setAttribute(e,o,a,s)}else{const s=r,o=t[++n];HP(s)?i.setProperty(e,s,o):i.setAttribute(e,s,o),n++}}return n}function GP(i){return 3===i||4===i||6===i}function HP(i){return 64===i.charCodeAt(0)}function Ng(i,e){if(null!==e&&0!==e.length)if(null===i||0===i.length)i=e.slice();else{let t=-1;for(let n=0;n<e.length;n++){const r=e[n];"number"==typeof r?t=r:0===t||QP(i,t,r,null,-1===t||2===t?e[++n]:null)}}return i}function QP(i,e,t,n,r){let s=0,o=i.length;if(-1===e)o=-1;else for(;s<i.length;){const a=i[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<i.length;){const a=i[s];if("number"==typeof a)break;if(a===t){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==o&&(i.splice(o,0,e),s=o+1),i.splice(s++,0,t),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function WP(i){return-1!==i}function Av(i){return 32767&i}function yv(i,e){let t=function q6(i){return i>>16}(i),n=e;for(;t>0;)n=n[15],t--;return n}let UM=!0;function xv(i){const e=UM;return UM=i,e}let Y6=0;const ba={};function wv(i,e){const t=XP(i,e);if(-1!==t)return t;const n=e[1];n.firstCreatePass&&(i.injectorIndex=e.length,VM(n.data,i),VM(e,null),VM(n.blueprint,null));const r=zM(i,e),s=i.injectorIndex;if(WP(r)){const o=Av(r),a=yv(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function VM(i,e){i.push(0,0,0,0,0,0,0,0,e)}function XP(i,e){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===e[i.injectorIndex+8]?-1:i.injectorIndex}function zM(i,e){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let t=0,n=null,r=e;for(;null!==r;){if(n=ik(r),null===n)return-1;if(t++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|t<<16}return-1}function GM(i,e,t){!function X6(i,e,t){let n;"string"==typeof t?n=t.charCodeAt(0)||0:t.hasOwnProperty(Dg)&&(n=t[Dg]),null==n&&(n=t[Dg]=Y6++);const r=255&n;e.data[i+(r>>5)]|=1<<r}(i,e,t)}function ZP(i,e,t){if(t&jt.Optional||void 0!==i)return i;rv()}function KP(i,e,t,n){if(t&jt.Optional&&void 0===n&&(n=null),!(t&(jt.Self|jt.Host))){const r=i[9],s=po(void 0);try{return r?r.get(e,n,t&jt.Optional):cP(e,n,t&jt.Optional)}finally{po(s)}}return ZP(n,0,t)}function $P(i,e,t,n=jt.Default,r){if(null!==i){if(1024&e[2]){const o=function eW(i,e,t,n,r){let s=i,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=JP(s,o,t,n|jt.Self,ba);if(a!==ba)return a;let l=s.parent;if(!l){const c=o[21];if(c){const d=c.get(t,ba,n);if(d!==ba)return d}l=ik(o),o=o[15]}s=l}return r}(i,e,t,n,ba);if(o!==ba)return o}const s=JP(i,e,t,n,ba);if(s!==ba)return s}return KP(e,t,n,r)}function JP(i,e,t,n,r){const s=function $6(i){if("string"==typeof i)return i.charCodeAt(0)||0;const e=i.hasOwnProperty(Dg)?i[Dg]:void 0;return"number"==typeof e?e>=0?255&e:J6:e}(t);if("function"==typeof s){if(!BP(e,i,n))return n&jt.Host?ZP(r,0,n):KP(e,t,n,r);try{const o=s(n);if(null!=o||n&jt.Optional)return o;rv()}finally{jP()}}else if("number"==typeof s){let o=null,a=XP(i,e),l=-1,c=n&jt.Host?e[16][6]:null;for((-1===a||n&jt.SkipSelf)&&(l=-1===a?zM(i,e):e[a+8],-1!==l&&tk(n,!1)?(o=e[1],a=Av(l),e=yv(l,e)):a=-1);-1!==a;){const d=e[1];if(ek(s,a,d.data)){const u=K6(a,e,t,o,n,c);if(u!==ba)return u}l=e[a+8],-1!==l&&tk(n,e[1].data[a+8]===c)&&ek(s,a,e)?(o=d,a=Av(l),e=yv(l,e)):a=-1}}return r}function K6(i,e,t,n,r,s){const o=e[1],a=o.data[i+8],d=Cv(a,o,t,null==n?Bg(a)&&UM:n!=o&&0!=(3&a.type),r&jt.Host&&s===a);return null!==d?gd(e,o,d,a):ba}function Cv(i,e,t,n,r){const s=i.providerIndexes,o=e.data,a=1048575&s,l=i.directiveStart,d=s>>20,h=r?a+d:i.directiveEnd;for(let f=n?a:a+d;f<h;f++){const m=o[f];if(f<l&&t===m||f>=l&&m.type===t)return f}if(r){const f=o[l];if(f&&Wo(f)&&f.type===t)return l}return null}function gd(i,e,t,n){let r=i[t];const s=e.data;if(function H6(i){return i instanceof Og}(r)){const o=r;o.resolving&&function XQ(i,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${i}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${i}${t}`)}(function Ui(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Wt(i)}(s[t]));const a=xv(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?po(o.injectImpl):null;BP(i,n,jt.Default);try{r=i[t]=o.factory(void 0,s,i,n),e.firstCreatePass&&t>=n.directiveStart&&function z6(i,e,t){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(n){const o=yP(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(i,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-i,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(i,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i,s))}(t,s[t],e)}finally{null!==l&&po(l),xv(a),o.resolving=!1,jP()}}return r}function ek(i,e,t){return!!(t[e+(i>>5)]&1<<i)}function tk(i,e){return!(i&jt.Self||i&jt.Host&&e)}class xh{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,n){return $P(this._tNode,this._lView,e,lv(n),t)}}function J6(){return new xh(Rr(),Ve())}function ce(i){return ql(()=>{const e=i.prototype.constructor,t=e[sl]||HM(e),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[sl]||HM(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function HM(i){return _M(i)?()=>{const e=HM(Nt(i));return e&&e()}:pd(i)}function ik(i){const e=i[1],t=e.type;return 2===t?e.declTNode:1===t?i[6]:null}function jg(i){return function Z6(i,e){if("class"===e)return i.classes;if("style"===e)return i.styles;const t=i.attrs;if(t){const n=t.length;let r=0;for(;r<n;){const s=t[r];if(GP(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(Rr(),i)}const Ch="__parameters__";function Eh(i,e,t){return ql(()=>{const n=function QM(i){return function(...t){if(i){const n=i(...t);for(const r in n)this[r]=n[r]}}}(e);function r(...s){if(this instanceof r)return n.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,d){const u=l.hasOwnProperty(Ch)?l[Ch]:Object.defineProperty(l,Ch,{value:[]})[Ch];for(;u.length<=d;)u.push(null);return(u[d]=u[d]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class je{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ge({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function _d(i,e){i.forEach(t=>Array.isArray(t)?_d(t,e):e(t))}function rk(i,e,t){e>=i.length?i.push(t):i.splice(e,0,t)}function Mv(i,e){return e>=i.length-1?i.pop():i.splice(e,1)[0]}function zg(i,e){const t=[];for(let n=0;n<i;n++)t.push(e);return t}function Ns(i,e,t){let n=Sh(i,e);return n>=0?i[1|n]=t:(n=~n,function rW(i,e,t,n){let r=i.length;if(r==e)i.push(t,n);else if(1===r)i.push(n,i[0]),i[0]=t;else{for(r--,i.push(i[r-1],i[r]);r>e;)i[r]=i[r-2],r--;i[e]=t,i[e+1]=n}}(i,n,e,t)),n}function qM(i,e){const t=Sh(i,e);if(t>=0)return i[1|t]}function Sh(i,e){return function sk(i,e,t){let n=0,r=i.length>>t;for(;r!==n;){const s=n+(r-n>>1),o=i[s<<t];if(e===o)return s<<t;o>e?r=s:n=s+1}return~(r<<t)}(i,e,1)}const Sv=Ig(Eh("Inject",i=>({token:i})),-1),cl=Ig(Eh("Optional"),8),Th=Ig(Eh("SkipSelf"),4);var fs=(()=>((fs=fs||{})[fs.Important=1]="Important",fs[fs.DashCase=2]="DashCase",fs))();const $M=new Map;let EW=0;const e1="__ngContext__";function jr(i,e){Bs(e)?(i[e1]=e[20],function TW(i){$M.set(i[20],i)}(e)):i[e1]=e}function n1(i,e){return undefined(i,e)}function Wg(i){const e=i[3];return Qo(e)?e[3]:e}function r1(i){return Mk(i[13])}function s1(i){return Mk(i[4])}function Mk(i){for(;null!==i&&!Qo(i);)i=i[4];return i}function Ih(i,e,t,n,r){if(null!=n){let s,o=!1;Qo(n)?s=n:Bs(n)&&(o=!0,n=n[0]);const a=Tr(n);0===i&&null!==t?null==r?Dk(e,t,a):bd(e,t,a,r||null,!0):1===i&&null!==t?bd(e,t,a,r||null,!0):2===i?function h1(i,e,t){const n=Iv(i,e);n&&function YW(i,e,t,n){i.removeChild(e,t,n)}(i,n,e,t)}(e,a,o):3===i&&e.destroyNode(a),null!=s&&function KW(i,e,t,n,r){const s=t[7];s!==Tr(t)&&Ih(e,i,n,s,r);for(let a=10;a<t.length;a++){const l=t[a];qg(l[1],l,i,e,n,s)}}(e,i,s,t,r)}}function a1(i,e,t){return i.createElement(e,t)}function Sk(i,e){const t=i[9],n=t.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,RM(r,-1)),t.splice(n,1)}function l1(i,e){if(i.length<=10)return;const t=10+e,n=i[t];if(n){const r=n[17];null!==r&&r!==i&&Sk(r,n),e>0&&(i[t-1][4]=n[4]);const s=Mv(i,10+e);!function UW(i,e){qg(i,e,e[11],2,null,null),e[0]=null,e[6]=null}(n[1],n);const o=s[19];null!==o&&o.detachView(s[1]),n[3]=null,n[4]=null,n[2]&=-65}return n}function Tk(i,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&qg(i,e,t,3,null,null),function GW(i){let e=i[13];if(!e)return c1(i[1],i);for(;e;){let t=null;if(Bs(e))t=e[13];else{const n=e[10];n&&(t=n)}if(!t){for(;e&&!e[4]&&e!==i;)Bs(e)&&c1(e[1],e),e=e[3];null===e&&(e=i),Bs(e)&&c1(e[1],e),t=e&&e[4]}e=t}}(e)}}function c1(i,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function qW(i,e){let t;if(null!=i&&null!=(t=i.destroyHooks))for(let n=0;n<t.length;n+=2){const r=e[t[n]];if(!(r instanceof Og)){const s=t[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(i,e),function WW(i,e){const t=i.cleanup,n=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?n[r=o]():n[r=-o].unsubscribe(),s+=2}else{const o=n[r=t[s+1]];t[s].call(o)}if(null!==n){for(let s=r+1;s<n.length;s++)(0,n[s])();e[7]=null}}(i,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Qo(e[3])){t!==e[3]&&Sk(t,e);const n=e[19];null!==n&&n.detachView(i)}!function RW(i){$M.delete(i[20])}(e)}}function Rk(i,e,t){return function Ik(i,e,t){let n=e;for(;null!==n&&40&n.type;)n=(e=n).parent;if(null===n)return t[0];{const{componentOffset:r}=n;if(r>-1){const{encapsulation:s}=i.data[n.directiveStart+r];if(s===Go.None||s===Go.Emulated)return null}return Fs(n,t)}}(i,e.parent,t)}function bd(i,e,t,n,r){i.insertBefore(e,t,n,r)}function Dk(i,e,t){i.appendChild(e,t)}function Pk(i,e,t,n,r){null!==n?bd(i,e,t,n,r):Dk(i,e,t)}function Iv(i,e){return i.parentNode(e)}function kk(i,e,t){return Bk(i,e,t)}let kv,m1,Lv,Bk=function Lk(i,e,t){return 40&i.type?Fs(i,t):null};function Dv(i,e,t,n){const r=Rk(i,n,e),s=e[11],a=kk(n.parent||e[6],n,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)Pk(s,r,t[l],a,!1);else Pk(s,r,t,a,!1)}function Pv(i,e){if(null!==e){const t=e.type;if(3&t)return Fs(e,i);if(4&t)return u1(-1,i[e.index]);if(8&t){const n=e.child;if(null!==n)return Pv(i,n);{const r=i[e.index];return Qo(r)?u1(-1,r):Tr(r)}}if(32&t)return n1(e,i)()||Tr(i[e.index]);{const n=Ok(i,e);return null!==n?Array.isArray(n)?n[0]:Pv(Wg(i[16]),n):Pv(i,e.next)}}return null}function Ok(i,e){return null!==e?i[16][6].projection[e.projection]:null}function u1(i,e){const t=10+i+1;if(t<e.length){const n=e[t],r=n[1].firstChild;if(null!==r)return Pv(n,r)}return e[7]}function f1(i,e,t,n,r,s,o){for(;null!=t;){const a=n[t.index],l=t.type;if(o&&0===e&&(a&&jr(Tr(a),n),t.flags|=2),32!=(32&t.flags))if(8&l)f1(i,e,t.child,n,r,s,!1),Ih(e,i,r,a,s);else if(32&l){const c=n1(t,n);let d;for(;d=c();)Ih(e,i,r,d,s);Ih(e,i,r,a,s)}else 16&l?Nk(i,e,n,t,r,s):Ih(e,i,r,a,s);t=o?t.projectionNext:t.next}}function qg(i,e,t,n,r,s){f1(t,n,i.firstChild,e,r,s,!1)}function Nk(i,e,t,n,r,s){const o=t[16],l=o[6].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Ih(e,i,r,l[c],s);else f1(i,e,l,o[3],r,s,!0)}function jk(i,e,t){""===t?i.removeAttribute(e,"class"):i.setAttribute(e,"class",t)}function Uk(i,e,t){const{mergedAttrs:n,classes:r,styles:s}=t;null!==n&&jM(i,e,n),null!==r&&jk(i,e,r),null!==s&&function JW(i,e,t){i.setAttribute(e,"style",t)}(i,e,s)}function vd(i){return function p1(){if(void 0===kv&&(kv=null,rn.trustedTypes))try{kv=rn.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return kv}()?.createHTML(i)||i}function Hk(i){return function g1(){if(void 0===Lv&&(Lv=null,rn.trustedTypes))try{Lv=rn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Lv}()?.createScriptURL(i)||i}class Ad{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${iv})`}}class s7 extends Ad{getTypeName(){return"HTML"}}class o7 extends Ad{getTypeName(){return"Style"}}class a7 extends Ad{getTypeName(){return"Script"}}class l7 extends Ad{getTypeName(){return"URL"}}class c7 extends Ad{getTypeName(){return"ResourceURL"}}function js(i){return i instanceof Ad?i.changingThisBreaksApplicationSecurity:i}function va(i,e){const t=function d7(i){return i instanceof Ad&&i.getTypeName()||null}(i);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${iv})`)}return t===e}class g7{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(vd(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class _7{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const n=this.inertDocument.createElement("body");t.appendChild(n)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=vd(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=vd(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const v7=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Bv(i){return(i=String(i)).match(v7)?i:"unsafe:"+i}function dl(i){const e={};for(const t of i.split(","))e[t]=!0;return e}function Yg(...i){const e={};for(const t of i)for(const n in t)t.hasOwnProperty(n)&&(e[n]=!0);return e}const Wk=dl("area,br,col,hr,img,wbr"),qk=dl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Yk=dl("rp,rt"),_1=Yg(Wk,Yg(qk,dl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Yg(Yk,dl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Yg(Yk,qk)),b1=dl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Xk=Yg(b1,dl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),dl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),A7=dl("script,style,template");class y7{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!_1.hasOwnProperty(t))return this.sanitizedSomething=!0,!A7.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let r=0;r<n.length;r++){const s=n.item(r),o=s.name,a=o.toLowerCase();if(!Xk.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;b1[a]&&(l=Bv(l)),this.buf.push(" ",o,'="',Zk(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();_1.hasOwnProperty(t)&&!Wk.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Zk(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const x7=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,w7=/([^\#-~ |!])/g;function Zk(i){return i.replace(/&/g,"&amp;").replace(x7,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(w7,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Fv;function Kk(i,e){let t=null;try{Fv=Fv||function Qk(i){const e=new _7(i);return function b7(){try{return!!(new window.DOMParser).parseFromString(vd(""),"text/html")}catch{return!1}}()?new g7(e):e}(i);let n=e?String(e):"";t=Fv.getInertBodyElement(n);let r=5,s=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=s,s=t.innerHTML,t=Fv.getInertBodyElement(n)}while(n!==s);return vd((new y7).sanitizeChildren(v1(t)||t))}finally{if(t){const n=v1(t)||t;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function v1(i){return"content"in i&&function C7(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Pi=(()=>((Pi=Pi||{})[Pi.NONE=0]="NONE",Pi[Pi.HTML=1]="HTML",Pi[Pi.STYLE=2]="STYLE",Pi[Pi.SCRIPT=3]="SCRIPT",Pi[Pi.URL=4]="URL",Pi[Pi.RESOURCE_URL=5]="RESOURCE_URL",Pi))();function $k(i){const e=Xg();return e?e.sanitize(Pi.URL,i)||"":va(i,"URL")?js(i):Bv(Wt(i))}function Jk(i){const e=Xg();if(e)return Hk(e.sanitize(Pi.RESOURCE_URL,i)||"");if(va(i,"ResourceURL"))return Hk(js(i));throw new Ie(904,!1)}function Xg(){const i=Ve();return i&&i[12]}const Ov=new je("ENVIRONMENT_INITIALIZER"),tL=new je("INJECTOR",-1),iL=new je("INJECTOR_DEF_TYPES");class nL{get(e,t=Tg){if(t===Tg){const n=new Error(`NullInjectorError: No provider for ${nn(e)}!`);throw n.name="NullInjectorError",n}return t}}function P7(...i){return{\u0275providers:rL(0,i),\u0275fromNgModule:!0}}function rL(i,...e){const t=[],n=new Set;let r;return _d(e,s=>{const o=s;A1(o,t,[],n)&&(r||(r=[]),r.push(o))}),void 0!==r&&sL(r,t),t}function sL(i,e){for(let t=0;t<i.length;t++){const{providers:r}=i[t];y1(r,s=>{e.push(s)})}}function A1(i,e,t,n){if(!(i=Nt(i)))return!1;let r=null,s=aP(i);const o=!s&&zi(i);if(s||o){if(o&&!o.standalone)return!1;r=i}else{const l=i.ngModule;if(s=aP(l),!s)return!1;r=l}const a=n.has(r);if(o){if(a)return!1;if(n.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)A1(c,e,t,n)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;n.add(r);try{_d(s.imports,d=>{A1(d,e,t,n)&&(c||(c=[]),c.push(d))})}finally{}void 0!==c&&sL(c,e)}if(!a){const c=pd(r)||(()=>new r);e.push({provide:r,useFactory:c,deps:Oi},{provide:iL,useValue:r,multi:!0},{provide:Ov,useValue:()=>xe(r),multi:!0})}const l=s.providers;null==l||a||y1(l,d=>{e.push(d)})}}return r!==i&&void 0!==i.providers}function y1(i,e){for(let t of i)bM(t)&&(t=t.\u0275providers),Array.isArray(t)?y1(t,e):e(t)}const k7=$i({provide:String,useValue:$i});function x1(i){return null!==i&&"object"==typeof i&&k7 in i}function yd(i){return"function"==typeof i}const w1=new je("Set Injector scope."),Nv={},B7={};let C1;function jv(){return void 0===C1&&(C1=new nL),C1}class Aa{}class lL extends Aa{get destroyed(){return this._destroyed}constructor(e,t,n,r){super(),this.parent=t,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,E1(e,o=>this.processProvider(o)),this.records.set(tL,Dh(void 0,this)),r.has("environment")&&this.records.set(Aa,Dh(void 0,this));const s=this.records.get(w1);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(iL.multi,Oi,jt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=fh(this),n=po(void 0);try{return e()}finally{fh(t),po(n)}}get(e,t=Tg,n=jt.Default){this.assertNotDestroyed(),n=lv(n);const r=fh(this),s=po(void 0);try{if(!(n&jt.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function U7(i){return"function"==typeof i||"object"==typeof i&&i instanceof je}(e)&&sv(e);a=l&&this.injectableDefInScope(l)?Dh(M1(e),Nv):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(n&jt.Self?jv():this.parent).get(e,t=n&jt.Optional&&t===Tg?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[av]=o[av]||[]).unshift(nn(e)),r)throw o;return function d6(i,e,t,n){const r=i[av];throw e[dP]&&r.unshift(e[dP]),i.message=function u6(i,e,t,n=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let r=nn(e);if(Array.isArray(e))r=e.map(nn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):nn(a)))}r=`{${s.join(", ")}}`}return`${t}${n?"("+n+")":""}[${r}]: ${i.replace(o6,"\n  ")}`}("\n"+i.message,r,t,n),i.ngTokenPath=r,i[av]=null,i}(o,e,"R3InjectorError",this.source)}throw o}finally{po(s),fh(r)}}resolveInjectorInitializers(){const e=fh(this),t=po(void 0);try{const n=this.get(Ov.multi,Oi,jt.Self);for(const r of n)r()}finally{fh(e),po(t)}}toString(){const e=[],t=this.records;for(const n of t.keys())e.push(nn(n));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(e){let t=yd(e=Nt(e))?e:Nt(e&&e.provide);const n=function O7(i){return x1(i)?Dh(void 0,i.useValue):Dh(cL(i),Nv)}(e);if(yd(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Dh(void 0,Nv,!0),r.factory=()=>xM(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,n)}hydrate(e,t){return t.value===Nv&&(t.value=B7,t.value=t.factory()),"object"==typeof t.value&&t.value&&function j7(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Nt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function M1(i){const e=sv(i),t=null!==e?e.factory:pd(i);if(null!==t)return t;if(i instanceof je)throw new Ie(204,!1);if(i instanceof Function)return function F7(i){const e=i.length;if(e>0)throw zg(e,"?"),new Ie(204,!1);const t=function t6(i){const e=i&&(i[ov]||i[lP]);if(e){const t=function i6(i){if(i.hasOwnProperty("name"))return i.name;const e=(""+i).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(i);return null!==t?()=>t.factory(i):()=>new i}(i);throw new Ie(204,!1)}function cL(i,e,t){let n;if(yd(i)){const r=Nt(i);return pd(r)||M1(r)}if(x1(i))n=()=>Nt(i.useValue);else if(function aL(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...xM(i.deps||[]));else if(function oL(i){return!(!i||!i.useExisting)}(i))n=()=>xe(Nt(i.useExisting));else{const r=Nt(i&&(i.useClass||i.provide));if(!function N7(i){return!!i.deps}(i))return pd(r)||M1(r);n=()=>new r(...xM(i.deps))}return n}function Dh(i,e,t=!1){return{factory:i,value:e,multi:t?[]:void 0}}function E1(i,e){for(const t of i)Array.isArray(t)?E1(t,e):t&&bM(t)?E1(t.\u0275providers,e):e(t)}class V7{}class dL{}class G7{resolveComponentFactory(e){throw function z7(i){const e=Error(`No component factory found for ${nn(i)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=i,e}(e)}}let Xl=(()=>{class i{}return i.NULL=new G7,i})();function H7(){return Ph(Rr(),Ve())}function Ph(i,e){return new zt(Fs(i,e))}let zt=(()=>{class i{constructor(t){this.nativeElement=t}}return i.__NG_ELEMENT_ID__=H7,i})();function Q7(i){return i instanceof zt?i.nativeElement:i}class Zg{}let ul=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function W7(){const i=Ve(),t=Os(Rr().index,i);return(Bs(t)?t:i)[11]}(),i})(),q7=(()=>{class i{}return i.\u0275prov=Ge({token:i,providedIn:"root",factory:()=>null}),i})();class xd{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Y7=new xd("15.1.1"),S1={};function R1(i){return i.ngOriginalError}class hl{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&R1(e);for(;t&&R1(t);)t=R1(t);return t||null}}function I1(i){return i.ownerDocument.defaultView}function Uv(i){return i.ownerDocument}function fl(i){return i instanceof Function?i():i}function fL(i,e,t){let n=i.length;for(;;){const r=i.indexOf(e,t);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=e.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}t=r+1}}const pL="ng-template";function n9(i,e,t){let n=0;for(;n<i.length;){let r=i[n++];if(t&&"class"===r){if(r=i[n],-1!==fL(r.toLowerCase(),e,0))return!0}else if(1===r){for(;n<i.length&&"string"==typeof(r=i[n++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function mL(i){return 4===i.type&&i.value!==pL}function r9(i,e,t){return e===(4!==i.type||t?i.value:pL)}function s9(i,e,t){let n=4;const r=i.attrs||[],s=function l9(i){for(let e=0;e<i.length;e++)if(GP(i[e]))return e;return i.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&n){if(n=2|1&n,""!==l&&!r9(i,l,t)||""===l&&1===e.length){if(qo(n))return!1;o=!0}}else{const c=8&n?l:e[++a];if(8&n&&null!==i.attrs){if(!n9(i.attrs,c,t)){if(qo(n))return!1;o=!0}continue}const u=o9(8&n?"class":l,r,mL(i),t);if(-1===u){if(qo(n))return!1;o=!0;continue}if(""!==c){let h;h=u>s?"":r[u+1].toLowerCase();const f=8&n?h:null;if(f&&-1!==fL(f,c,0)||2&n&&c!==h){if(qo(n))return!1;o=!0}}}}else{if(!o&&!qo(n)&&!qo(l))return!1;if(o&&qo(l))continue;o=!1,n=l|1&n}}return qo(n)||o}function qo(i){return 0==(1&i)}function o9(i,e,t,n){if(null===e)return-1;let r=0;if(n||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===i)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function c9(i,e){let t=i.indexOf(4);if(t>-1)for(t++;t<i.length;){const n=i[t];if("number"==typeof n)return-1;if(n===e)return t;t++}return-1}(e,i)}function gL(i,e,t=!1){for(let n=0;n<e.length;n++)if(s9(i,e[n],t))return!0;return!1}function d9(i,e){e:for(let t=0;t<e.length;t++){const n=e[t];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function _L(i,e){return i?":not("+e.trim()+")":e}function u9(i){let e=i[0],t=1,n=2,r="",s=!1;for(;t<i.length;){let o=i[t];if("string"==typeof o)if(2&n){const a=i[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!qo(o)&&(e+=_L(s,r),r=""),n=o,s=s||!qo(n);t++}return""!==r&&(e+=_L(s,r)),e}const Yt={};function se(i){bL(Ti(),Ve(),$r()+i,!1)}function bL(i,e,t,n){if(!n)if(3==(3&e[2])){const s=i.preOrderCheckHooks;null!==s&&bv(e,s,t)}else{const s=i.preOrderHooks;null!==s&&vv(e,s,0,t)}md(t)}function xL(i,e=null,t=null,n){const r=wL(i,e,t,n);return r.resolveInjectorInitializers(),r}function wL(i,e=null,t=null,n,r=new Set){const s=[t||Oi,P7(i)];return n=n||("object"==typeof i?void 0:nn(i)),new lL(s,e||jv(),n||null,r)}let ms=(()=>{class i{static create(t,n){if(Array.isArray(t))return xL({name:""},n,t,"");{const r=t.name??"";return xL({name:r},t.parent,t.providers,r)}}}return i.THROW_IF_NOT_FOUND=Tg,i.NULL=new nL,i.\u0275prov=Ge({token:i,providedIn:"any",factory:()=>xe(tL)}),i.__NG_ELEMENT_ID__=-1,i})();function P(i,e=jt.Default){const t=Ve();return null===t?xe(i,e):$P(Rr(),t,Nt(i),e)}function Kg(){throw new Error("invalid")}function IL(i,e){const t=i.contentQueries;if(null!==t)for(let n=0;n<t.length;n+=2){const s=t[n+1];if(-1!==s){const o=i.data[s];LM(t[n]),o.contentQueries(2,e[s],s)}}}function zv(i,e,t,n,r,s,o,a,l,c,d){const u=e.blueprint.slice();return u[0]=r,u[2]=76|n,(null!==d||i&&1024&i[2])&&(u[2]|=1024),SP(u),u[3]=u[15]=i,u[8]=t,u[10]=o||i&&i[10],u[11]=a||i&&i[11],u[12]=l||i&&i[12]||null,u[9]=c||i&&i[9]||null,u[6]=s,u[20]=function SW(){return EW++}(),u[21]=d,u[16]=2==e.type?i[16]:u,u}function Bh(i,e,t,n,r){let s=i.data[e];if(null===s)s=function B1(i,e,t,n,r){const s=IP(),o=IM(),l=i.data[e]=function O9(i,e,t,n,r,s){return{type:t,index:n,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,n,r);return null===i.firstChild&&(i.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(i,e,t,n,r),function k6(){return qt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=n,s.attrs=r;const o=function Fg(){const i=qt.lFrame,e=i.currentTNode;return i.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return _a(s,!0),s}function $g(i,e,t,n){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(n),i.blueprint.push(n),i.data.push(null);return r}function F1(i,e,t){BM(e);try{const n=i.viewQuery;null!==n&&W1(1,n,t);const r=i.template;null!==r&&DL(i,e,r,1,t),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&IL(i,e),i.staticViewQueries&&W1(2,i.viewQuery,t);const s=i.components;null!==s&&function L9(i,e){for(let t=0;t<e.length;t++)iq(i,e[t])}(e,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{e[2]&=-5,FM()}}function Gv(i,e,t,n){const r=e[2];if(128!=(128&r)){BM(e);try{SP(e),function PP(i){return qt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==t&&DL(i,e,t,2,n);const o=3==(3&r);if(o){const c=i.preOrderCheckHooks;null!==c&&bv(e,c,null)}else{const c=i.preOrderHooks;null!==c&&vv(e,c,0,null),OM(e,0)}if(function eq(i){for(let e=r1(i);null!==e;e=s1(e)){if(!e[2])continue;const t=e[9];for(let n=0;n<t.length;n++){const r=t[n];512&r[2]||RM(r[3],1),r[2]|=512}}}(e),function J9(i){for(let e=r1(i);null!==e;e=s1(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];gv(n)&&Gv(r,n,r.template,n[8])}}(e),null!==i.contentQueries&&IL(i,e),o){const c=i.contentCheckHooks;null!==c&&bv(e,c)}else{const c=i.contentHooks;null!==c&&vv(e,c,1),OM(e,1)}!function P9(i,e){const t=i.hostBindingOpCodes;if(null!==t)try{for(let n=0;n<t.length;n++){const r=t[n];if(r<0)md(~r);else{const s=r,o=t[++n],a=t[++n];L6(o,s),a(2,e[s])}}}finally{md(-1)}}(i,e);const a=i.components;null!==a&&function k9(i,e){for(let t=0;t<e.length;t++)tq(i,e[t])}(e,a);const l=i.viewQuery;if(null!==l&&W1(2,l,n),o){const c=i.viewCheckHooks;null!==c&&bv(e,c)}else{const c=i.viewHooks;null!==c&&vv(e,c,2),OM(e,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,RM(e[3],-1))}finally{FM()}}}function DL(i,e,t,n,r){const s=$r(),o=2&n;try{md(-1),o&&e.length>22&&bL(i,e,22,!1),t(n,r)}finally{md(s)}}function O1(i,e,t){if(SM(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=i.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function N1(i,e,t){RP()&&(function G9(i,e,t,n){const r=t.directiveStart,s=t.directiveEnd;Bg(t)&&function Z9(i,e,t){const n=Fs(e,i),r=PL(t),s=i[10],o=Hv(i,zv(i,r,null,t.onPush?32:16,n,e,s,s.createRenderer(n,t),null,null,null));i[e.index]=o}(e,t,i.data[r+t.componentOffset]),i.firstCreatePass||wv(t,e),jr(n,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=i.data[a],c=gd(e,i,a,t);jr(c,e),null!==o&&K9(0,a-r,c,l,0,o),Wo(l)&&(Os(t.index,e)[8]=gd(e,i,a,t))}}(i,e,t,Fs(t,e)),64==(64&t.flags)&&NL(i,e,t))}function j1(i,e,t=Fs){const n=e.localNames;if(null!==n){let r=e.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],a=-1===o?t(e,i):i[o];i[r++]=a}}}function PL(i){const e=i.tView;return null===e||e.incompleteFirstPass?i.tView=U1(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):e}function U1(i,e,t,n,r,s,o,a,l,c){const d=22+n,u=d+r,h=function B9(i,e){const t=[];for(let n=0;n<e;n++)t.push(n<i?null:Yt);return t}(d,u),f="function"==typeof c?c():c;return h[1]={type:i,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:u,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function kL(i,e,t,n){const r=UL(e);null===t?r.push(n):(r.push(t),i.firstCreatePass&&VL(i).push(n,r.length-1))}function LL(i,e,t,n){for(let r in i)if(i.hasOwnProperty(r)){t=null===t?{}:t;const s=i[r];null===n?BL(t,e,r,s):n.hasOwnProperty(r)&&BL(t,e,n[r],s)}return t}function BL(i,e,t,n){i.hasOwnProperty(t)?i[t].push(e,n):i[t]=[e,n]}function Us(i,e,t,n,r,s,o,a){const l=Fs(e,t);let d,c=e.inputs;!a&&null!=c&&(d=c[n])?(q1(i,t,d,n,r),Bg(e)&&FL(t,e.index)):3&e.type&&(n=function j9(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=o?o(r,e.value||"",n):r,s.setProperty(l,n,r))}function FL(i,e){const t=Os(e,i);16&t[2]||(t[2]|=32)}function V1(i,e,t,n){let r=!1;if(RP()){const s=null===n?null:{"":-1},o=function Q9(i,e){const t=i.directiveRegistry;let n=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(gL(e,o.selectors,!1))if(n||(n=[]),Wo(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),n.unshift(...a,o),z1(i,e,a.length)}else n.unshift(o),z1(i,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,n,r),n.push(o)}return null===n?null:[n,r]}(i,t);let a,l;null===o?a=l=null:[a,l]=o,null!==a&&(r=!0,OL(i,e,t,a,s,l)),s&&function W9(i,e,t){if(e){const n=i.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new Ie(-301,!1);n.push(e[r],s)}}}(t,n,s)}return t.mergedAttrs=Ng(t.mergedAttrs,t.attrs),r}function OL(i,e,t,n,r,s){for(let c=0;c<n.length;c++)GM(wv(t,e),i,n[c].type);!function Y9(i,e,t){i.flags|=1,i.directiveStart=e,i.directiveEnd=e+t,i.providerIndexes=e}(t,i.data.length,n.length);for(let c=0;c<n.length;c++){const d=n[c];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,l=$g(i,e,n.length,null);for(let c=0;c<n.length;c++){const d=n[c];t.mergedAttrs=Ng(t.mergedAttrs,d.hostAttrs),X9(i,t,e,l,d),q9(l,d,r),null!==d.contentQueries&&(t.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=64);const u=d.type.prototype;!o&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(t.index),o=!0),!a&&(u.ngOnChanges||u.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t.index),a=!0),l++}!function N9(i,e,t){const r=e.directiveEnd,s=i.data,o=e.attrs,a=[];let l=null,c=null;for(let d=e.directiveStart;d<r;d++){const u=s[d],h=t?t.get(u):null,m=h?h.outputs:null;l=LL(u.inputs,d,l,h?h.inputs:null),c=LL(u.outputs,d,c,m);const g=null===l||null===o||mL(e)?null:$9(l,d,o);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(i,t,s)}function NL(i,e,t){const n=t.directiveStart,r=t.directiveEnd,s=t.index,o=function B6(){return qt.lFrame.currentDirectiveIndex}();try{md(s);for(let a=n;a<r;a++){const l=i.data[a],c=e[a];PM(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&H9(l,c)}}finally{md(-1),PM(o)}}function H9(i,e){null!==i.hostBindings&&i.hostBindings(1,e)}function z1(i,e,t){e.componentOffset=t,(i.components||(i.components=[])).push(e.index)}function q9(i,e,t){if(t){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)t[e.exportAs[n]]=i;Wo(e)&&(t[""]=i)}}function X9(i,e,t,n,r){i.data[n]=r;const s=r.factory||(r.factory=pd(r.type)),o=new Og(s,Wo(r),P);i.blueprint[n]=o,t[n]=o,function V9(i,e,t,n,r){const s=r.hostBindings;if(s){let o=i.hostBindingOpCodes;null===o&&(o=i.hostBindingOpCodes=[]);const a=~e.index;(function z9(i){let e=i.length;for(;e>0;){const t=i[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,n,s)}}(i,e,n,$g(i,t,r.hostVars,Yt),r)}function ya(i,e,t,n,r,s){const o=Fs(i,e);!function G1(i,e,t,n,r,s,o){if(null==s)i.removeAttribute(e,r,t);else{const a=null==o?Wt(s):o(s,n||"",r);i.setAttribute(e,r,a,t)}}(e[11],o,s,i.value,t,n,r)}function K9(i,e,t,n,r,s){const o=s[e];if(null!==o){const a=n.setInput;for(let l=0;l<o.length;){const c=o[l++],d=o[l++],u=o[l++];null!==a?n.setInput(t,u,c,d):t[d]=u}}}function $9(i,e,t){let n=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(i.hasOwnProperty(s)){null===n&&(n=[]);const o=i[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){n.push(s,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return n}function jL(i,e,t,n){return[i,!0,!1,e,null,0,n,t,null,null]}function tq(i,e){const t=Os(e,i);if(gv(t)){const n=t[1];48&t[2]?Gv(n,t,n.template,t[8]):t[5]>0&&H1(t)}}function H1(i){for(let n=r1(i);null!==n;n=s1(n))for(let r=10;r<n.length;r++){const s=n[r];if(gv(s))if(512&s[2]){const o=s[1];Gv(o,s,o.template,s[8])}else s[5]>0&&H1(s)}const t=i[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Os(t[n],i);gv(r)&&r[5]>0&&H1(r)}}function iq(i,e){const t=Os(e,i),n=t[1];(function nq(i,e){for(let t=e.length;t<i.blueprint.length;t++)e.push(i.blueprint[t])})(n,t),F1(n,t,t[8])}function Hv(i,e){return i[13]?i[14][4]=e:i[13]=e,i[14]=e,e}function Q1(i){for(;i;){i[2]|=32;const e=Wg(i);if(m6(i)&&!e)return i;i=e}return null}function Qv(i,e,t,n=!0){const r=e[10];r.begin&&r.begin();try{Gv(i,e,i.template,t)}catch(o){throw n&&GL(e,o),o}finally{r.end&&r.end()}}function W1(i,e,t){LM(0),e(i,t)}function UL(i){return i[7]||(i[7]=[])}function VL(i){return i.cleanup||(i.cleanup=[])}function zL(i,e,t){return(null===i||Wo(i))&&(t=function w6(i){for(;Array.isArray(i);){if("object"==typeof i[1])return i;i=i[0]}return null}(t[e.index])),t[11]}function GL(i,e){const t=i[9],n=t?t.get(hl,null):null;n&&n.handleError(e)}function q1(i,e,t,n,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=i.data[o];null!==c.setInput?c.setInput(l,r,n,a):l[a]=r}}function Wv(i,e,t){let n=t?i.styles:null,r=t?i.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=gM(r,a):2==s&&(n=gM(n,a+": "+e[++o]+";"))}t?i.styles=n:i.stylesWithoutHost=n,t?i.classes=r:i.classesWithoutHost=r}function qv(i,e,t,n,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&n.push(Tr(s)),Qo(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&qv(l[1],l,c,n)}const o=t.type;if(8&o)qv(i,e,t.child,n);else if(32&o){const a=n1(t,e);let l;for(;l=a();)n.push(l)}else if(16&o){const a=Ok(e,t);if(Array.isArray(a))n.push(...a);else{const l=Wg(e[16]);qv(l[1],l,a,n,!0)}}t=r?t.projectionNext:t.next}return n}class Jg{get rootNodes(){const e=this._lView,t=e[1];return qv(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Qo(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(l1(e,n),Mv(t,n))}this._attachedToViewContainer=!1}Tk(this._lView[1],this._lView)}onDestroy(e){kL(this._lView[1],this._lView,null,e)}markForCheck(){Q1(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Qv(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zW(i,e){qg(i,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=e}}class rq extends Jg{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Qv(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class HL extends Xl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=zi(e);return new e_(t,this.ngModule)}}function QL(i){const e=[];for(let t in i)i.hasOwnProperty(t)&&e.push({propName:i[t],templateName:t});return e}class oq{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,n){n=lv(n);const r=this.injector.get(e,S1,n);return r!==S1||t===S1?r:this.parentInjector.get(e,t,n)}}class e_ extends dL{get inputs(){return QL(this.componentDef.inputs)}get outputs(){return QL(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function h9(i){return i.map(u9).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,n,r){let s=(r=r||this.ngModule)instanceof Aa?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new oq(e,s):e,a=o.get(Zg,null);if(null===a)throw new Ie(407,!1);const l=o.get(q7,null),c=a.createRenderer(null,this.componentDef),d=this.componentDef.selectors[0][0]||"div",u=n?function F9(i,e,t){return i.selectRootElement(e,t===Go.ShadowDom)}(c,n,this.componentDef.encapsulation):a1(c,d,function sq(i){const e=i.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(d)),h=this.componentDef.onPush?288:272,f=U1(0,null,null,1,0,null,null,null,null,null),m=zv(null,f,null,h,null,null,a,c,l,o,null);let g,_;BM(m);try{const p=this.componentDef;let v,b=null;p.findHostDirectiveDefs?(v=[],b=new Map,p.findHostDirectiveDefs(p,v,b),v.push(p)):v=[p];const y=function lq(i,e){const t=i[1];return i[22]=e,Bh(t,22,2,"#host",null)}(m,u),x=function cq(i,e,t,n,r,s,o,a){const l=r[1];!function dq(i,e,t,n){for(const r of i)e.mergedAttrs=Ng(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Wv(e,e.mergedAttrs,!0),null!==t&&Uk(n,t,e))}(n,i,e,o);const c=s.createRenderer(e,t),d=zv(r,PL(t),null,t.onPush?32:16,r[i.index],i,s,c,a||null,null,null);return l.firstCreatePass&&z1(l,i,n.length-1),Hv(r,d),r[i.index]=d}(y,u,p,v,m,a,c);_=EP(f,22),u&&function hq(i,e,t,n){if(n)jM(i,t,["ng-version",Y7.full]);else{const{attrs:r,classes:s}=function f9(i){const e=[],t=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&e.push(s,i[++n]):8===r&&t.push(s);else{if(!qo(r))break;r=s}n++}return{attrs:e,classes:t}}(e.selectors[0]);r&&jM(i,t,r),s&&s.length>0&&jk(i,t,s.join(" "))}}(c,p,u,n),void 0!==t&&function fq(i,e,t){const n=i.projection=[];for(let r=0;r<e.length;r++){const s=t[r];n.push(null!=s?Array.from(s):null)}}(_,this.ngContentSelectors,t),g=function uq(i,e,t,n,r,s){const o=Rr(),a=r[1],l=Fs(o,r);OL(a,r,o,t,null,n);for(let d=0;d<t.length;d++)jr(gd(r,a,o.directiveStart+d,o),r);NL(a,r,o),l&&jr(l,r);const c=gd(r,a,o.directiveStart+o.componentOffset,o);if(i[8]=r[8]=c,null!==s)for(const d of s)d(c,e);return O1(a,o,i),c}(x,p,v,b,m,[pq]),F1(f,m,null)}finally{FM()}return new aq(this.componentType,g,Ph(_,m),m,_)}}class aq extends V7{constructor(e,t,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new rq(r),this.componentType=e}setInput(e,t){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[e])){const s=this._rootLView;q1(s[1],s,r,e,t),FL(s,this._tNode.index)}}get injector(){return new xh(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function pq(){const i=Rr();_v(Ve()[1],i)}function W(i){let e=function WL(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),t=!0;const n=[i];for(;e;){let r;if(Wo(i))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ie(903,!1);r=e.\u0275dir}if(r){if(t){n.push(r);const o=i;o.inputs=Y1(i.inputs),o.declaredInputs=Y1(i.declaredInputs),o.outputs=Y1(i.outputs);const a=r.hostBindings;a&&bq(i,a);const l=r.viewQuery,c=r.contentQueries;if(l&&gq(i,l),c&&_q(i,c),mM(i.inputs,r.inputs),mM(i.declaredInputs,r.declaredInputs),mM(i.outputs,r.outputs),Wo(r)&&r.data.animation){const d=i.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(i),a===W&&(t=!1)}}e=Object.getPrototypeOf(e)}!function mq(i){let e=0,t=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=e+=r.hostVars,r.hostAttrs=Ng(r.hostAttrs,t=Ng(t,r.hostAttrs))}}(n)}function Y1(i){return i===rl?{}:i===Oi?[]:i}function gq(i,e){const t=i.viewQuery;i.viewQuery=t?(n,r)=>{e(n,r),t(n,r)}:e}function _q(i,e){const t=i.contentQueries;i.contentQueries=t?(n,r,s)=>{e(n,r,s),t(n,r,s)}:e}function bq(i,e){const t=i.hostBindings;i.hostBindings=t?(n,r)=>{e(n,r),t(n,r)}:e}let Yv=null;function wd(){if(!Yv){const i=rn.Symbol;if(i&&i.iterator)Yv=i.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Yv=n)}}}return Yv}function Xv(i){return!!X1(i)&&(Array.isArray(i)||!(i instanceof Map)&&wd()in i)}function X1(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function xa(i,e,t){return i[e]=t}function Ur(i,e,t){return!Object.is(i[e],t)&&(i[e]=t,!0)}function Cd(i,e,t,n){const r=Ur(i,e,t);return Ur(i,e+1,n)||r}function fn(i,e,t,n){const r=Ve();return Ur(r,Ah(),e)&&(Ti(),ya(Sn(),r,i,e,t,n)),fn}function Ft(i,e,t,n,r,s,o,a){const l=Ve(),c=Ti(),d=i+22,u=c.firstCreatePass?function Tq(i,e,t,n,r,s,o,a,l){const c=e.consts,d=Bh(e,i,4,o||null,Yl(c,a));V1(e,t,d,Yl(c,l)),_v(e,d);const u=d.tViews=U1(2,d,n,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,d),u.queries=e.queries.embeddedTView(d)),d}(d,c,l,e,t,n,r,s,o):c.data[d];_a(u,!1);const h=l[11].createComment("");Dv(c,l,h,u),jr(h,l),Hv(l,l[d]=jL(h,l,h,u)),pv(u)&&N1(c,l,u),null!=o&&j1(l,u,a)}function Qt(i){return vh(function P6(){return qt.lFrame.contextLView}(),22+i)}function Z(i,e,t){const n=Ve();return Ur(n,Ah(),e)&&Us(Ti(),Sn(),n,i,e,n[11],t,!1),Z}function Z1(i,e,t,n,r){const o=r?"class":"style";q1(i,t,e.inputs[o],o,n)}function ye(i,e,t,n){const r=Ve(),s=Ti(),o=22+i,a=r[11],l=r[o]=a1(a,e,function V6(){return qt.lFrame.currentNamespace}()),c=s.firstCreatePass?function Iq(i,e,t,n,r,s,o){const a=e.consts,c=Bh(e,i,2,r,Yl(a,s));return V1(e,t,c,Yl(a,o)),null!==c.attrs&&Wv(c,c.attrs,!1),null!==c.mergedAttrs&&Wv(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,n):s.data[o];return _a(c,!0),Uk(a,l,c),32!=(32&c.flags)&&Dv(s,r,l,c),0===function S6(){return qt.lFrame.elementDepthCount}()&&jr(l,r),function T6(){qt.lFrame.elementDepthCount++}(),pv(c)&&(N1(s,r,c),O1(s,c,r)),null!==n&&j1(r,c),ye}function ke(){let i=Rr();IM()?DM():(i=i.parent,_a(i,!1));const e=i;!function R6(){qt.lFrame.elementDepthCount--}();const t=Ti();return t.firstCreatePass&&(_v(t,i),SM(i)&&t.queries.elementEnd(i)),null!=e.classesWithoutHost&&function Q6(i){return 0!=(8&i.flags)}(e)&&Z1(t,e,Ve(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function W6(i){return 0!=(16&i.flags)}(e)&&Z1(t,e,Ve(),e.stylesWithoutHost,!1),ke}function Ye(i,e,t,n){return ye(i,e,t,n),ke(),Ye}function K1(i,e,t){const n=Ve(),r=Ti(),s=i+22,o=r.firstCreatePass?function Dq(i,e,t,n,r){const s=e.consts,o=Yl(s,n),a=Bh(e,i,8,"ng-container",o);return null!==o&&Wv(a,o,!0),V1(e,t,a,Yl(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,n,e,t):r.data[s];_a(o,!0);const a=n[s]=n[11].createComment("");return Dv(r,n,a,o),jr(a,n),pv(o)&&(N1(r,n,o),O1(r,o,n)),null!=t&&j1(n,o),K1}function $1(){let i=Rr();const e=Ti();return IM()?DM():(i=i.parent,_a(i,!1)),e.firstCreatePass&&(_v(e,i),SM(i)&&e.queries.elementEnd(i)),$1}function i_(i,e,t){return K1(i,e,t),$1(),i_}function Vs(){return Ve()}function n_(i){return!!i&&"function"==typeof i.then}function sB(i){return!!i&&"function"==typeof i.subscribe}const J1=sB;function xt(i,e,t,n){const r=Ve(),s=Ti(),o=Rr();return oB(s,r,r[11],o,i,e,n),xt}function eE(i,e){const t=Rr(),n=Ve(),r=Ti();return oB(r,n,zL(kM(r.data),t,n),t,i,e),eE}function oB(i,e,t,n,r,s,o){const a=pv(n),c=i.firstCreatePass&&VL(i),d=e[8],u=UL(e);let h=!0;if(3&n.type||o){const g=Fs(n,e),_=o?o(g):g,p=u.length,v=o?y=>o(Tr(y[n.index])):n.index;let b=null;if(!o&&a&&(b=function Pq(i,e,t,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===n){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(i,e,r,n.index)),null!==b)(b.__ngLastListenerFn__||b).__ngNextListenerFn__=s,b.__ngLastListenerFn__=s,h=!1;else{s=lB(n,e,d,s,!1);const y=t.listen(_,r,s);u.push(s,y),c&&c.push(r,v,p,p+1)}}else s=lB(n,e,d,s,!1);const f=n.outputs;let m;if(h&&null!==f&&(m=f[r])){const g=m.length;if(g)for(let _=0;_<g;_+=2){const x=e[m[_]][m[_+1]].subscribe(s),w=u.length;u.push(s,x),c&&c.push(r,n.index,w,-(w+1))}}}function aB(i,e,t,n){try{return!1!==t(n)}catch(r){return GL(i,r),!1}}function lB(i,e,t,n,r){return function s(o){if(o===Function)return n;Q1(i.componentOffset>-1?Os(i.index,e):e);let l=aB(e,0,n,o),c=s.__ngNextListenerFn__;for(;c;)l=aB(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function vi(i=1){return function O6(i){return(qt.lFrame.contextLView=function N6(i,e){for(;i>0;)e=e[15],i--;return e}(i,qt.lFrame.contextLView))[8]}(i)}function kq(i,e){let t=null;const n=function a9(i){const e=i.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(i);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===n?gL(i,s,!0):d9(n,s))return r}else t=r}return t}function fe(i){const e=Ve()[16][6];if(!e.projection){const n=e.projection=zg(i?i.length:1,null),r=n.slice();let s=e.child;for(;null!==s;){const o=i?kq(s,i):0;null!==o&&(r[o]?r[o].projectionNext=s:n[o]=s,r[o]=s),s=s.next}}}function ne(i,e=0,t){const n=Ve(),r=Ti(),s=Bh(r,22+i,16,null,t||null);null===s.projection&&(s.projection=e),DM(),32!=(32&s.flags)&&function ZW(i,e,t){Nk(e[11],0,e,t,Rk(i,t,e),kk(t.parent||e[6],t,e))}(r,n,s)}function Kv(i,e){return i<<17|e<<2}function Zl(i){return i>>17&32767}function iE(i){return 2|i}function Md(i){return(131068&i)>>2}function nE(i,e){return-131069&i|e<<2}function rE(i){return 1|i}function bB(i,e,t,n,r){const s=i[t+1],o=null===e;let a=n?Zl(s):Md(s),l=!1;for(;0!==a&&(!1===l||o);){const d=i[a+1];jq(i[a],e)&&(l=!0,i[a+1]=n?rE(d):iE(d)),a=n?Zl(d):Md(d)}l&&(i[t+1]=n?iE(s):rE(s))}function jq(i,e){return null===i||null==e||(Array.isArray(i)?i[1]:i)===e||!(!Array.isArray(i)||"string"!=typeof e)&&Sh(i,e)>=0}const ur={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function vB(i){return i.substring(ur.key,ur.keyEnd)}function Uq(i){return i.substring(ur.value,ur.valueEnd)}function yB(i,e){const t=ur.textEnd;let n=ur.key=Qh(i,e,t);return t===n?-1:(n=ur.keyEnd=function Hq(i,e,t){let n;for(;e<t&&(45===(n=i.charCodeAt(e))||95===n||(-33&n)>=65&&(-33&n)<=90||n>=48&&n<=57);)e++;return e}(i,n,t),n=wB(i,n,t),n=ur.value=Qh(i,n,t),n=ur.valueEnd=function Qq(i,e,t){let n=-1,r=-1,s=-1,o=e,a=o;for(;o<t;){const l=i.charCodeAt(o++);if(59===l)return a;34===l||39===l?a=o=CB(i,l,o,t):e===o-4&&85===s&&82===r&&76===n&&40===l?a=o=CB(i,41,o,t):l>32&&(a=o),s=r,r=n,n=-33&l}return a}(i,n,t),wB(i,n,t))}function Qh(i,e,t){for(;e<t&&i.charCodeAt(e)<=32;)e++;return e}function wB(i,e,t,n){return(e=Qh(i,e,t))<t&&e++,e}function CB(i,e,t,n){let r=-1,s=t;for(;s<n;){const o=i.charCodeAt(s++);if(o==e&&92!==r)return s;r=92==o&&92===r?0:o}throw new Error}function Wh(i,e,t){return Yo(i,e,t,!1),Wh}function Mi(i,e){return Yo(i,e,null,!0),Mi}function bo(i){!function Xo(i,e,t,n){const r=Ti(),s=ll(2);r.firstUpdatePass&&EB(r,null,s,n);const o=Ve();if(t!==Yt&&Ur(o,s,t)){const a=r.data[$r()];if(IB(a,n)&&!MB(r,s)){let l=n?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=gM(l,t||"")),Z1(r,a,o,t,n)}else!function Jq(i,e,t,n,r,s,o,a){r===Yt&&(r=Oi);let l=0,c=0,d=0<r.length?r[0]:null,u=0<s.length?s[0]:null;for(;null!==d||null!==u;){const h=l<r.length?r[l+1]:void 0,f=c<s.length?s[c+1]:void 0;let g,m=null;d===u?(l+=2,c+=2,h!==f&&(m=u,g=f)):null===u||null!==d&&d<u?(l+=2,m=d):(c+=2,m=u,g=f),null!==m&&TB(i,e,t,n,m,g,o,a),d=l<r.length?r[l]:null,u=c<s.length?s[c]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function $q(i,e,t){if(null==t||""===t)return Oi;const n=[],r=js(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)i(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&i(n,s,r[s]);else"string"==typeof r&&e(n,r);return n}(i,e,t),n,s)}}(SB,Wq,i,!1)}function Wq(i,e){for(let t=function zq(i){return function xB(i){ur.key=0,ur.keyEnd=0,ur.value=0,ur.valueEnd=0,ur.textEnd=i.length}(i),yB(i,Qh(i,0,ur.textEnd))}(e);t>=0;t=yB(e,t))SB(i,vB(e),Uq(e))}function Yo(i,e,t,n){const r=Ve(),s=Ti(),o=ll(2);s.firstUpdatePass&&EB(s,i,o,n),e!==Yt&&Ur(r,o,e)&&TB(s,s.data[$r()],r,r[11],i,r[o+1]=function eY(i,e){return null==i||("string"==typeof e?i+=e:"object"==typeof i&&(i=nn(js(i)))),i}(e,t),n,o)}function MB(i,e){return e>=i.expandoStartIndex}function EB(i,e,t,n){const r=i.data;if(null===r[t+1]){const s=r[$r()],o=MB(i,t);IB(s,n)&&null===e&&!o&&(e=!1),e=function Yq(i,e,t,n){const r=kM(i);let s=n?e.residualClasses:e.residualStyles;if(null===r)0===(n?e.classBindings:e.styleBindings)&&(t=r_(t=sE(null,i,e,t,n),e.attrs,n),s=null);else{const o=e.directiveStylingLast;if(-1===o||i[o]!==r)if(t=sE(r,i,e,t,n),null===s){let l=function Xq(i,e,t){const n=t?e.classBindings:e.styleBindings;if(0!==Md(n))return i[Zl(n)]}(i,e,n);void 0!==l&&Array.isArray(l)&&(l=sE(null,i,e,l[1],n),l=r_(l,e.attrs,n),function Zq(i,e,t,n){i[Zl(t?e.classBindings:e.styleBindings)]=n}(i,e,n,l))}else s=function Kq(i,e,t){let n;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)n=r_(n,i[s].hostAttrs,t);return r_(n,e.attrs,t)}(i,e,n)}return void 0!==s&&(n?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,n),function Oq(i,e,t,n,r,s){let o=s?e.classBindings:e.styleBindings,a=Zl(o),l=Md(o);i[n]=t;let d,c=!1;if(Array.isArray(t)?(d=t[1],(null===d||Sh(t,d)>0)&&(c=!0)):d=t,r)if(0!==l){const h=Zl(i[a+1]);i[n+1]=Kv(h,a),0!==h&&(i[h+1]=nE(i[h+1],n)),i[a+1]=function Bq(i,e){return 131071&i|e<<17}(i[a+1],n)}else i[n+1]=Kv(a,0),0!==a&&(i[a+1]=nE(i[a+1],n)),a=n;else i[n+1]=Kv(l,0),0===a?a=n:i[l+1]=nE(i[l+1],n),l=n;c&&(i[n+1]=iE(i[n+1])),bB(i,d,n,!0),bB(i,d,n,!1),function Nq(i,e,t,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof e&&Sh(s,e)>=0&&(t[n+1]=rE(t[n+1]))}(e,d,i,n,s),o=Kv(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,n)}}function sE(i,e,t,n,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],n=r_(n,s.hostAttrs,r),s!==i);)a++;return null!==i&&(t.directiveStylingLast=a),n}function r_(i,e,t){const n=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Ns(i,o,!!t||e[++s]))}return void 0===i?null:i}function SB(i,e,t){Ns(i,e,js(t))}function TB(i,e,t,n,r,s,o,a){if(!(3&e.type))return;const l=i.data,c=l[a+1],d=function Fq(i){return 1==(1&i)}(c)?RB(l,e,t,r,Md(c),o):void 0;$v(d)||($v(s)||function Lq(i){return 2==(2&i)}(c)&&(s=RB(l,null,t,r,a,o)),function $W(i,e,t,n,r){if(e)r?i.addClass(t,n):i.removeClass(t,n);else{let s=-1===n.indexOf("-")?void 0:fs.DashCase;null==r?i.removeStyle(t,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=fs.Important),i.setStyle(t,n,r,s))}}(n,o,mv($r(),t),r,s))}function RB(i,e,t,n,r,s){const o=null===e;let a;for(;r>0;){const l=i[r],c=Array.isArray(l),d=c?l[1]:l,u=null===d;let h=t[r+1];h===Yt&&(h=u?Oi:void 0);let f=u?qM(h,n):d===n?h:void 0;if(c&&!$v(f)&&(f=qM(l,n)),$v(f)&&(a=f,o))return a;const m=i[r+1];r=o?Zl(m):Md(m)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=qM(l,n))}return a}function $v(i){return void 0!==i}function IB(i,e){return 0!=(i.flags&(e?8:16))}function Xi(i,e=""){const t=Ve(),n=Ti(),r=i+22,s=n.firstCreatePass?Bh(n,r,1,e,null):n.data[r],o=t[r]=function o1(i,e){return i.createText(e)}(t[11],e);Dv(n,t,o,s),_a(s,!1)}function Jv(i){return eA("",i,""),Jv}function eA(i,e,t){const n=Ve(),r=function Oh(i,e,t,n){return Ur(i,Ah(),t)?e+Wt(t)+n:Yt}(n,i,e,t);return r!==Yt&&function pl(i,e,t){const n=mv(e,i);!function Ek(i,e,t){i.setValue(e,t)}(i[11],n,t)}(n,$r(),r),eA}function oE(i,e,t){const n=Ve();if(Ur(n,Ah(),e)){const s=Ti(),o=Sn();Us(s,o,n,i,e,zL(kM(s.data),o,n),t,!0)}return oE}const Yh="en-US";let KB=Yh;function cE(i,e,t,n,r){if(i=Nt(i),Array.isArray(i))for(let s=0;s<i.length;s++)cE(i[s],e,t,n,r);else{const s=Ti(),o=Ve();let a=yd(i)?i:Nt(i.provide),l=cL(i);const c=Rr(),d=1048575&c.providerIndexes,u=c.directiveStart,h=c.providerIndexes>>20;if(yd(i)||!i.multi){const f=new Og(l,r,P),m=uE(a,e,r?d:d+h,u);-1===m?(GM(wv(c,o),s,a),dE(s,i,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(f),o.push(f)):(t[m]=f,o[m]=f)}else{const f=uE(a,e,d+h,u),m=uE(a,e,d,d+h),_=m>=0&&t[m];if(r&&!_||!r&&!(f>=0&&t[f])){GM(wv(c,o),s,a);const p=function bX(i,e,t,n,r){const s=new Og(i,t,P);return s.multi=[],s.index=e,s.componentProviders=0,xF(s,r,n&&!t),s}(r?_X:gX,t.length,r,n,l);!r&&_&&(t[m].providerFactory=p),dE(s,i,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(p),o.push(p)}else dE(s,i,f>-1?f:m,xF(t[r?m:f],l,!r&&n));!r&&n&&_&&t[m].componentProviders++}}}function dE(i,e,t,n){const r=yd(e),s=function L7(i){return!!i.useClass}(e);if(r||s){const l=(s?Nt(e.useClass):e).prototype.ngOnDestroy;if(l){const c=i.destroyHooks||(i.destroyHooks=[]);if(!r&&e.multi){const d=c.indexOf(t);-1===d?c.push(t,[n,l]):c[d+1].push(n,l)}else c.push(t,l)}}}function xF(i,e,t){return t&&i.componentProviders++,i.multi.push(e)-1}function uE(i,e,t,n){for(let r=t;r<n;r++)if(e[r]===i)return r;return-1}function gX(i,e,t,n){return hE(this.multi,[])}function _X(i,e,t,n){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=gd(t,t[1],this.providerFactory.index,n);s=a.slice(0,o),hE(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],hE(r,s);return s}function hE(i,e){for(let t=0;t<i.length;t++)e.push((0,i[t])());return e}function oe(i,e=[]){return t=>{t.providersResolver=(n,r)=>function mX(i,e,t){const n=Ti();if(n.firstCreatePass){const r=Wo(i);cE(t,n.data,n.blueprint,r,!0),cE(e,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,e)}}class Xh{}class wF{}class CF extends Xh{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new HL(this);const n=Ls(e);this._bootstrapComponents=fl(n.bootstrap),this._r3Injector=wL(e,t,[{provide:Xh,useValue:this},{provide:Xl,useValue:this.componentFactoryResolver}],nn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class fE extends wF{constructor(e){super(),this.moduleType=e}create(e){return new CF(this.moduleType,e)}}class AX extends Xh{constructor(e,t,n){super(),this.componentFactoryResolver=new HL(this),this.instance=null;const r=new lL([...e,{provide:Xh,useValue:this},{provide:Xl,useValue:this.componentFactoryResolver}],t||jv(),n,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function sA(i,e,t=null){return new AX(i,e,t).injector}let yX=(()=>{class i{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const n=rL(0,t.type),r=n.length>0?sA([n],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Ge({token:i,providedIn:"environment",factory:()=>new i(xe(Aa))}),i})();function pE(i){i.getStandaloneInjector=e=>e.get(yX).getOrCreateStandaloneInjector(i)}function Le(i,e,t){const n=Kr()+i,r=Ve();return r[n]===Yt?xa(r,n,t?e.call(t):e()):function t_(i,e){return i[e]}(r,n)}function li(i,e,t,n){return DF(Ve(),Kr(),i,e,t,n)}function Ca(i,e,t,n,r){return PF(Ve(),Kr(),i,e,t,n,r)}function Sd(i,e,t,n,r,s){return function kF(i,e,t,n,r,s,o,a){const l=e+t;return function Zv(i,e,t,n,r){const s=Cd(i,e,t,n);return Ur(i,e+2,r)||s}(i,l,r,s,o)?xa(i,l+3,a?n.call(a,r,s,o):n(r,s,o)):u_(i,l+3)}(Ve(),Kr(),i,e,t,n,r,s)}function d_(i,e,t,n,r,s,o){return function LF(i,e,t,n,r,s,o,a,l){const c=e+t;return function _o(i,e,t,n,r,s){const o=Cd(i,e,t,n);return Cd(i,e+2,r,s)||o}(i,c,r,s,o,a)?xa(i,c+4,l?n.call(l,r,s,o,a):n(r,s,o,a)):u_(i,c+4)}(Ve(),Kr(),i,e,t,n,r,s,o)}function u_(i,e){const t=i[e];return t===Yt?void 0:t}function DF(i,e,t,n,r,s){const o=e+t;return Ur(i,o,r)?xa(i,o+1,s?n.call(s,r):n(r)):u_(i,o+1)}function PF(i,e,t,n,r,s,o){const a=e+t;return Cd(i,a,r,s)?xa(i,a+2,o?n.call(o,r,s):n(r,s)):u_(i,a+2)}function hr(i,e){const t=Ti();let n;const r=i+22;t.firstCreatePass?(n=function BX(i,e){if(e)for(let t=e.length-1;t>=0;t--){const n=e[t];if(i===n.name)return n}}(e,t.pipeRegistry),t.data[r]=n,n.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,n.onDestroy)):n=t.data[r];const s=n.factory||(n.factory=pd(n.type)),o=po(P);try{const a=xv(!1),l=s();return xv(a),function Rq(i,e,t,n){t>=i.data.length&&(i.data[t]=null,i.blueprint[t]=null),e[t]=n}(t,Ve(),r,l),l}finally{po(o)}}function wr(i,e,t){const n=i+22,r=Ve(),s=vh(r,n);return h_(r,n)?DF(r,Kr(),e,s.transform,t,s):s.transform(t)}function h_(i,e){return i[1].data[e].pure}function gE(i){return e=>{setTimeout(i,void 0,e)}}const St=class jX extends Ht{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let r=e,s=t||(()=>null),o=n;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=gE(s),r&&(r=gE(r)),o&&(o=gE(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof dn&&e.add(a),a}};function UX(){return this._results[wd()]()}class Td{get changes(){return this._changes||(this._changes=new St)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=wd(),n=Td.prototype;n[t]||(n[t]=UX)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=function go(i){return i.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function iW(i,e,t){if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=e[n];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let gs=(()=>{class i{}return i.__NG_ELEMENT_ID__=GX,i})();const VX=gs,zX=class extends VX{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e,t){const n=this._declarationTContainer.tViews,r=zv(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null,t||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),F1(n,r,e),new Jg(r)}};function GX(){return oA(Rr(),Ve())}function oA(i,e){return 4&i.type?new zX(e,i,Ph(i,e)):null}let Vr=(()=>{class i{}return i.__NG_ELEMENT_ID__=HX,i})();function HX(){return jF(Rr(),Ve())}const QX=Vr,OF=class extends QX{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return Ph(this._hostTNode,this._hostLView)}get injector(){return new xh(this._hostTNode,this._hostLView)}get parentInjector(){const e=zM(this._hostTNode,this._hostLView);if(WP(e)){const t=yv(e,this._hostLView),n=Av(e);return new xh(t[1].data[n+8],t)}return new xh(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=NF(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,n,r,s){const o=e&&!function Vg(i){return"function"==typeof i}(e);let a;if(o)a=t;else{const u=t||{};a=u.index,n=u.injector,r=u.projectableNodes,s=u.environmentInjector||u.ngModuleRef}const l=o?e:new e_(zi(e)),c=n||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?c:this.parentInjector).get(Aa,null);h&&(s=h)}const d=l.create(c,r,void 0,s);return this.insert(d.hostView,a),d}insert(e,t){const n=e._lView,r=n[1];if(function E6(i){return Qo(i[3])}(n)){const d=this.indexOf(e);if(-1!==d)this.detach(d);else{const u=n[3],h=new OF(u,u[6],u[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function HW(i,e,t,n){const r=10+n,s=t.length;n>0&&(t[r-1][4]=e),n<s-10?(e[4]=t[r],rk(t,10+n,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function QW(i,e){const t=i[9];e[16]!==e[3][3][16]&&(i[2]=!0),null===t?i[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(i),e[2]|=64}(r,n,o,s);const a=u1(s,o),l=n[11],c=Iv(l,o[7]);return null!==c&&function VW(i,e,t,n,r,s){n[0]=r,n[6]=e,qg(i,n,t,1,r,s)}(r,o[6],l,n,c,a),e.attachToViewContainerRef(),rk(_E(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=NF(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=l1(this._lContainer,t);n&&(Mv(_E(this._lContainer),t),Tk(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=l1(this._lContainer,t);return n&&null!=Mv(_E(this._lContainer),t)?new Jg(n):null}_adjustIndex(e,t=0){return e??this.length+t}};function NF(i){return i[8]}function _E(i){return i[8]||(i[8]=[])}function jF(i,e){let t;const n=e[i.index];if(Qo(n))t=n;else{let r;if(8&i.type)r=Tr(n);else{const s=e[11];r=s.createComment("");const o=Fs(i,e);bd(s,Iv(s,o),r,function XW(i,e){return i.nextSibling(e)}(s,o),!1)}e[i.index]=t=jL(n,e,r,i),Hv(e,t)}return new OF(t,i,e)}class bE{constructor(e){this.queryList=e,this.matches=null}clone(){return new bE(this.queryList)}setDirty(){this.queryList.setDirty()}}class vE{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<n;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new vE(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==HF(e,t).matches&&this.queries[t].setDirty()}}class UF{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class AE{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,s=this.getByIndex(n).embeddedTView(e,r);s&&(s.indexInDeclarationView=n,null!==t?t.push(s):t=[s])}return null!==t?new AE(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class yE{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new yE(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(e,t,WX(t,s)),this.matchTNodeWithReadOption(e,t,Cv(t,e,s,!1,!1))}else n===gs?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Cv(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===zt||r===Vr||r===gs&&4&t.type)this.addMatch(t.index,-2);else{const s=Cv(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function WX(i,e){const t=i.localNames;if(null!==t)for(let n=0;n<t.length;n+=2)if(t[n]===e)return t[n+1];return null}function YX(i,e,t,n){return-1===t?function qX(i,e){return 11&i.type?Ph(i,e):4&i.type?oA(i,e):null}(e,i):-2===t?function XX(i,e,t){return t===zt?Ph(e,i):t===gs?oA(e,i):t===Vr?jF(e,i):void 0}(i,e,n):gd(i,i[1],t,e)}function VF(i,e,t,n){const r=e[19].queries[n];if(null===r.matches){const s=i.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:YX(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function xE(i,e,t,n){const r=i.queries.getByIndex(t),s=r.matches;if(null!==s){const o=VF(i,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)n.push(o[a/2]);else{const c=s[a+1],d=e[-l];for(let u=10;u<d.length;u++){const h=d[u];h[17]===h[3]&&xE(h[1],h,c,n)}if(null!==d[9]){const u=d[9];for(let h=0;h<u.length;h++){const f=u[h];xE(f[1],f,c,n)}}}}}return n}function kt(i){const e=Ve(),t=Ti(),n=LP();LM(n+1);const r=HF(t,n);if(i.dirty&&function M6(i){return 4==(4&i[2])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?xE(t,e,n,[]):VF(t,e,r,n);i.reset(s,Q7),i.notifyOnChanges()}return!0}return!1}function ki(i,e,t){const n=Ti();n.firstCreatePass&&(GF(n,new UF(i,e,t),-1),2==(2&e)&&(n.staticViewQueries=!0)),zF(n,Ve(),e)}function Fn(i,e,t,n){const r=Ti();if(r.firstCreatePass){const s=Rr();GF(r,new UF(e,t,n),s.index),function KX(i,e){const t=i.contentQueries||(i.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(i.queries.length-1,e)}(r,i),2==(2&t)&&(r.staticContentQueries=!0)}zF(r,Ve(),t)}function Lt(){return function ZX(i,e){return i[19].queries[e].queryList}(Ve(),LP())}function zF(i,e,t){const n=new Td(4==(4&t));kL(i,e,n,n.destroy),null===e[19]&&(e[19]=new vE),e[19].queries.push(new bE(n))}function GF(i,e,t){null===i.queries&&(i.queries=new AE),i.queries.track(new yE(e,t))}function HF(i,e){return i.queries.getByIndex(e)}function Rd(i,e){return oA(i,e)}function lA(...i){}const cA=new je("Application Initializer");let dA=(()=>{class i{constructor(t){this.appInits=t,this.resolve=lA,this.reject=lA,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(n_(s))t.push(s);else if(J1(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{n()}).catch(r=>{this.reject(r)}),0===t.length&&n(),this.initialized=!0}}return i.\u0275fac=function(t){return new(t||i)(xe(cA,8))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const p_=new je("AppId",{providedIn:"root",factory:function cO(){return`${SE()}${SE()}${SE()}`}});function SE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const dO=new je("Platform Initializer"),m_=new je("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),uO=new je("appBootstrapListener"),ts=new je("AnimationModuleType");let _Z=(()=>{class i{log(t){console.log(t)}warn(t){console.warn(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Ma=new je("LocaleId",{providedIn:"root",factory:()=>Ut(Ma,jt.Optional|jt.SkipSelf)||function bZ(){return typeof $localize<"u"&&$localize.locale||Yh}()});class AZ{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let hO=(()=>{class i{compileModuleSync(t){return new fE(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const n=this.compileModuleSync(t),s=fl(Ls(t).declarations).reduce((o,a)=>{const l=zi(a);return l&&o.push(new e_(l)),o},[]);return new AZ(n,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const wZ=(()=>Promise.resolve(0))();function TE(i){typeof Zone>"u"?wZ.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class pt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new St(!1),this.onMicrotaskEmpty=new St(!1),this.onStable=new St(!1),this.onError=new St(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function CZ(){let i=rn.requestAnimationFrame,e=rn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&e){const t=i[Zone.__symbol__("OriginalDelegate")];t&&(i=t);const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function SZ(i){const e=()=>{!function EZ(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(rn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,IE(i),i.isCheckStableRunning=!0,RE(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),IE(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,r,s,o,a)=>{try{return mO(i),t.invokeTask(r,s,o,a)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&e(),gO(i)}},onInvoke:(t,n,r,s,o,a,l)=>{try{return mO(i),t.invoke(r,s,o,a,l)}finally{i.shouldCoalesceRunChangeDetection&&e(),gO(i)}},onHasTask:(t,n,r,s)=>{t.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,IE(i),RE(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,n,r,s)=>(t.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pt.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(pt.isInAngularZone())throw new Ie(909,!1)}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,MZ,lA,lA);try{return s.runTask(o,t,n)}finally{s.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const MZ={};function RE(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function IE(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function mO(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function gO(i){i._nesting--,RE(i)}class TZ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new St,this.onMicrotaskEmpty=new St,this.onStable=new St,this.onError=new St}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}const _O=new je(""),uA=new je("");let kE,DE=(()=>{class i{constructor(t,n,r){this._ngZone=t,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,kE||(function RZ(i){kE=i}(r),r.addToWindow(n)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pt.assertNotInAngularZone(),TE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())TE(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(t)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,n,r){return[]}}return i.\u0275fac=function(t){return new(t||i)(xe(pt),xe(PE),xe(uA))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac}),i})(),PE=(()=>{class i{constructor(){this._applications=new Map}registerApplication(t,n){this._applications.set(t,n)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,n=!0){return kE?.findTestabilityInTree(this,t,n)??null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Kl=null;const bO=new je("AllowMultipleToken"),LE=new je("PlatformDestroyListeners");class vO{constructor(e,t){this.name=e,this.token=t}}function yO(i,e,t=[]){const n=`Platform: ${e}`,r=new je(n);return(s=[])=>{let o=BE();if(!o||o.injector.get(bO,!1)){const a=[...t,...s,{provide:r,useValue:!0}];i?i(a):function PZ(i){if(Kl&&!Kl.get(bO,!1))throw new Ie(400,!1);Kl=i;const e=i.get(wO);(function AO(i){const e=i.get(dO,null);e&&e.forEach(t=>t())})(i)}(function xO(i=[],e){return ms.create({name:e,providers:[{provide:w1,useValue:"platform"},{provide:LE,useValue:new Set([()=>Kl=null])},...i]})}(a,n))}return function LZ(i){const e=BE();if(!e)throw new Ie(401,!1);return e}()}}function BE(){return Kl?.get(wO)??null}let wO=(()=>{class i{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,n){const r=function MO(i,e){let t;return t="noop"===i?new TZ:("zone.js"===i?void 0:i)||new pt(e),t}(n?.ngZone,function CO(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(n)),s=[{provide:pt,useValue:r}];return r.run(()=>{const o=ms.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),l=a.injector.get(hl,null);if(!l)throw new Ie(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:d=>{l.handleError(d)}});a.onDestroy(()=>{hA(this._modules,a),c.unsubscribe()})}),function EO(i,e,t){try{const n=t();return n_(n)?n.catch(r=>{throw e.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw e.runOutsideAngular(()=>i.handleError(n)),n}}(l,r,()=>{const c=a.injector.get(dA);return c.runInitializers(),c.donePromise.then(()=>(function $B(i){fo(i,"Expected localeId to be defined"),"string"==typeof i&&(KB=i.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Ma,Yh)||Yh),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,n=[]){const r=SO({},n);return function IZ(i,e,t){const n=new fE(t);return Promise.resolve(n)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const n=t.injector.get($h);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Ie(-403,!1);t.instance.ngDoBootstrap(n)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const t=this._injector.get(LE,null);t&&(t.forEach(n=>n()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(t){return new(t||i)(xe(ms))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function SO(i,e){return Array.isArray(e)?e.reduce(SO,i):{...i,...e}}let $h=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,n,r){this._zone=t,this._injector=n,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Fi(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new Fi(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{pt.assertNotInAngularZone(),TE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{pt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=hd(s,o.pipe(fM()))}bootstrap(t,n){const r=t instanceof dL;if(!this._injector.get(dA).done)throw!r&&function ph(i){const e=zi(i)||Fr(i)||Xr(i);return null!==e&&e.standalone}(t),new Ie(405,false);let o;o=r?t:this._injector.get(Xl).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function DZ(i){return i.isBoundToModule}(o)?void 0:this._injector.get(Xh),c=o.create(ms.NULL,[],n||o.selector,a),d=c.location.nativeElement,u=c.injector.get(_O,null);return u?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),hA(this.components,c),u?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const n=t;this._views.push(n),n.attachToAppRef(this)}detachView(t){const n=t;hA(this._views,n),n.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const n=this._injector.get(uO,[]);n.push(...this._bootstrapListeners),n.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>hA(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Ie(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(t){return new(t||i)(xe(pt),xe(Aa),xe(hl))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function hA(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}function FZ(){return!1}let er=(()=>{class i{}return i.__NG_ELEMENT_ID__=OZ,i})();function OZ(i){return function NZ(i,e,t){if(Bg(i)&&!t){const n=Os(i.index,e);return new Jg(n,n)}return 47&i.type?new Jg(e[16],e):null}(Rr(),Ve(),16==(16&i))}class PO{constructor(){}supports(e){return Xv(e)}create(e){return new HZ(e)}}const GZ=(i,e)=>e;class HZ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||GZ}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,s=null;for(;t||n;){const o=!n||t&&t.currentIndex<LO(n,r,s)?t:n,a=LO(o,r,s),l=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,d=l-r;if(c!=d){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,m=f+h;d<=m&&m<c&&(s[h]=f+1)}s[o.previousIndex]=d-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Xv(e))throw new Ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,n=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(n&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),n=!0),t=t._next}else r=0,function Mq(i,e){if(Array.isArray(i))for(let t=0;t<i.length;t++)e(i[t]);else{const t=i[wd()]();let n;for(;!(n=t.next()).done;)e(n.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(n&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),n=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new QZ(t,n),s,r),e}_verifyReinsertion(e,t,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new kO),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kO),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class QZ{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class WZ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class kO{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new WZ,this.map.set(t,n)),n.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function LO(i,e,t){const n=i.previousIndex;if(null===n)return n;let r=0;return t&&n<t.length&&(r=t[n]),n+e+r}class BO{constructor(){}supports(e){return e instanceof Map||X1(e)}create(){return new qZ}}class qZ{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||X1(e)))throw new Ie(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(n,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,n),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,n);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let n=t;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const n=new YZ(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class YZ{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function FO(){return new mA([new PO])}let mA=(()=>{class i{constructor(t){this.factories=t}static create(t,n){if(null!=n){const r=n.factories.slice();t=t.concat(r)}return new i(t)}static extend(t){return{provide:i,useFactory:n=>i.create(t,n||FO()),deps:[[i,new Th,new cl]]}}find(t){const n=this.factories.find(r=>r.supports(t));if(null!=n)return n;throw new Ie(901,!1)}}return i.\u0275prov=Ge({token:i,providedIn:"root",factory:FO}),i})();function OO(){return new g_([new BO])}let g_=(()=>{class i{constructor(t){this.factories=t}static create(t,n){if(n){const r=n.factories.slice();t=t.concat(r)}return new i(t)}static extend(t){return{provide:i,useFactory:n=>i.create(t,n||OO()),deps:[[i,new Th,new cl]]}}find(t){const n=this.factories.find(r=>r.supports(t));if(n)return n;throw new Ie(901,!1)}}return i.\u0275prov=Ge({token:i,providedIn:"root",factory:OO}),i})();const KZ=yO(null,"core",[]);let $Z=(()=>{class i{constructor(t){}}return i.\u0275fac=function(t){return new(t||i)(xe($h))},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({}),i})();function Jh(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}let UE=null;function Ea(){return UE}class tK{}const Jt=new je("DocumentToken");let VE=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:function(){return function iK(){return xe(NO)}()},providedIn:"platform"}),i})();const nK=new je("Location Initialized");let NO=(()=>{class i extends VE{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ea().getBaseHref(this._doc)}onPopState(t){const n=Ea().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",t,!1),()=>n.removeEventListener("popstate",t)}onHashChange(t){const n=Ea().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",t,!1),()=>n.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,n,r){jO()?this._history.pushState(t,n,r):this._location.hash=r}replaceState(t,n,r){jO()?this._history.replaceState(t,n,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return i.\u0275fac=function(t){return new(t||i)(xe(Jt))},i.\u0275prov=Ge({token:i,factory:function(){return function rK(){return new NO(xe(Jt))}()},providedIn:"platform"}),i})();function jO(){return!!window.history.pushState}function zE(i,e){if(0==i.length)return e;if(0==e.length)return i;let t=0;return i.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?i+e.substring(1):1==t?i+e:i+"/"+e}function UO(i){const e=i.match(/#|\?|$/),t=e&&e.index||i.length;return i.slice(0,t-("/"===i[t-1]?1:0))+i.slice(t)}function gl(i){return i&&"?"!==i[0]?"?"+i:i}let Dd=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:function(){return Ut(zO)},providedIn:"root"}),i})();const VO=new je("appBaseHref");let zO=(()=>{class i extends Dd{constructor(t,n){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??Ut(Jt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return zE(this._baseHref,t)}path(t=!1){const n=this._platformLocation.pathname+gl(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${n}${r}`:n}pushState(t,n,r,s){const o=this.prepareExternalUrl(r+gl(s));this._platformLocation.pushState(t,n,o)}replaceState(t,n,r,s){const o=this.prepareExternalUrl(r+gl(s));this._platformLocation.replaceState(t,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return i.\u0275fac=function(t){return new(t||i)(xe(VE),xe(VO,8))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),sK=(()=>{class i extends Dd{constructor(t,n){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(t){const n=zE(this._baseHref,t);return n.length>0?"#"+n:n}pushState(t,n,r,s){let o=this.prepareExternalUrl(r+gl(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,n,o)}replaceState(t,n,r,s){let o=this.prepareExternalUrl(r+gl(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return i.\u0275fac=function(t){return new(t||i)(xe(VE),xe(VO,8))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac}),i})(),gA=(()=>{class i{constructor(t){this._subject=new St,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const n=this._locationStrategy.getBaseHref();this._basePath=function lK(i){if(new RegExp("^(https?:)?//").test(i)){const[,t]=i.split(/\/\/[^\/]+/);return t}return i}(UO(GO(n))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,n=""){return this.path()==this.normalize(t+gl(n))}normalize(t){return i.stripTrailingSlash(function aK(i,e){return i&&new RegExp(`^${i}([/;?#]|$)`).test(e)?e.substring(i.length):e}(this._basePath,GO(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,n="",r=null){this._locationStrategy.pushState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gl(n)),r)}replaceState(t,n="",r=null){this._locationStrategy.replaceState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gl(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",n){this._urlChangeListeners.forEach(r=>r(t,n))}subscribe(t,n,r){return this._subject.subscribe({next:t,error:n,complete:r})}}return i.normalizeQueryParams=gl,i.joinWithSlash=zE,i.stripTrailingSlash=UO,i.\u0275fac=function(t){return new(t||i)(xe(Dd))},i.\u0275prov=Ge({token:i,factory:function(){return function oK(){return new gA(xe(Dd))}()},providedIn:"root"}),i})();function GO(i){return i.replace(/\/index.html$/,"")}function $O(i,e){e=encodeURIComponent(e);for(const t of i.split(";")){const n=t.indexOf("="),[r,s]=-1==n?[t,""]:[t.slice(0,n),t.slice(n+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}const $E=/\s+/,JO=[];let e3=(()=>{class i{constructor(t,n,r,s){this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=s,this.initialClasses=JO,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split($E):JO}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split($E):t}ngDoCheck(){for(const n of this.initialClasses)this._updateState(n,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const n of t)this._updateState(n,!0);else if(null!=t)for(const n of Object.keys(t))this._updateState(n,Boolean(t[n]));this._applyStateDiff()}_updateState(t,n){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==n&&(r.changed=!0,r.enabled=n),r.touched=!0):this.stateMap.set(t,{enabled:n,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const n=t[0],r=t[1];r.changed?(this._toggleClass(n,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(n,!1),this.stateMap.delete(n)),r.touched=!1}}_toggleClass(t,n){(t=t.trim()).length>0&&t.split($E).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return i.\u0275fac=function(t){return new(t||i)(P(mA),P(g_),P(zt),P(ul))},i.\u0275dir=Oe({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})(),t3=(()=>{class i{constructor(t){this._viewContainerRef=t,this.ngComponentOutlet=null}ngOnChanges(t){const{_viewContainerRef:n,ngComponentOutletNgModule:r,ngComponentOutletNgModuleFactory:s}=this;if(n.clear(),this._componentRef=void 0,this.ngComponentOutlet){const o=this.ngComponentOutletInjector||n.parentInjector;(t.ngComponentOutletNgModule||t.ngComponentOutletNgModuleFactory)&&(this._moduleRef&&this._moduleRef.destroy(),this._moduleRef=r?function vX(i,e){return new CF(i,e??null)}(r,n3(o)):s?s.create(n3(o)):void 0),this._componentRef=n.createComponent(this.ngComponentOutlet,{index:n.length,injector:o,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent})}}ngOnDestroy(){this._moduleRef&&this._moduleRef.destroy()}}return i.\u0275fac=function(t){return new(t||i)(P(Vr))},i.\u0275dir=Oe({type:i,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},standalone:!0,features:[Sr]}),i})();function n3(i){return i.get(Xh).injector}class QK{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $l=(()=>{class i{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,n,r){this._viewContainer=t,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const n=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new QK(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===s?void 0:s);else if(null!==s){const a=n.get(s);n.move(a,o),s3(a,r)}});for(let r=0,s=n.length;r<s;r++){const a=n.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{s3(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,n){return!0}}return i.\u0275fac=function(t){return new(t||i)(P(Vr),P(gs),P(mA))},i.\u0275dir=Oe({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function s3(i,e){i.context.$implicit=e.item}let Jl=(()=>{class i{constructor(t,n){this._viewContainer=t,this._context=new qK,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){o3("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){o3("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,n){return!0}}return i.\u0275fac=function(t){return new(t||i)(P(Vr),P(gs))},i.\u0275dir=Oe({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class qK{constructor(){this.$implicit=null,this.ngIf=null}}function o3(i,e){if(e&&!e.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${nn(e)}'.`)}class JE{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let EA=(()=>{class i{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const n=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const n of this._defaultViews)n.enforceState(t)}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),i})(),a3=(()=>{class i{constructor(t,n,r){this.ngSwitch=r,r._addCase(),this._view=new JE(t,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(t){return new(t||i)(P(Vr),P(gs),P(EA,9))},i.\u0275dir=Oe({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),i})(),c3=(()=>{class i{constructor(t,n,r){this._ngEl=t,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,n){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:fs.DashCase;null!=n?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${n}${s}`:n,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(n=>this._setStyle(n.key,null)),t.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),t.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(g_),P(ul))},i.\u0275dir=Oe({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),i})(),eS=(()=>{class i{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=n.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(t){return new(t||i)(P(Vr))},i.\u0275dir=Oe({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Sr]}),i})();class ZK{createSubscription(e,t){return e.subscribe({next:t,error:n=>{throw n}})}dispose(e){e.unsubscribe()}}class KK{createSubscription(e,t){return e.then(t,n=>{throw n})}dispose(e){}}const $K=new KK,JK=new ZK;let tS=(()=>{class i{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,n=>this._updateLatestValue(t,n))}_selectStrategy(t){if(n_(t))return $K;if(sB(t))return JK;throw function $o(i,e){return new Ie(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,n){t===this._obj&&(this._latestValue=n,this._ref.markForCheck())}}return i.\u0275fac=function(t){return new(t||i)(P(er,16))},i.\u0275pipe=gi({name:"async",type:i,pure:!1,standalone:!0}),i})(),Sa=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({}),i})();const u3="browser";function h3(i){return i===u3}let A$=(()=>{class i{}return i.\u0275prov=Ge({token:i,providedIn:"root",factory:()=>new y$(xe(Jt),window)}),i})();class y${constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function x$(i,e){const t=i.getElementById(e)||i.getElementsByName(e)[0];if(t)return t;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=f3(this.window.history)||f3(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function f3(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class p3{}class X$ extends tK{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class oS extends X${static makeCurrent(){!function eK(i){UE||(UE=i)}(new oS)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Z$(){return A_=A_||document.querySelector("base"),A_?A_.getAttribute("href"):null}();return null==t?null:function K$(i){TA=TA||document.createElement("a"),TA.setAttribute("href",i);const e=TA.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){A_=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return $O(document.cookie,e)}}let TA,A_=null;const A3=new je("TRANSITION_ID"),J$=[{provide:cA,useFactory:function $$(i,e,t){return()=>{t.get(dA).donePromise.then(()=>{const n=Ea(),r=e.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[A3,Jt,ms],multi:!0}];let tJ=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:i.\u0275fac}),i})();const RA=new je("EventManagerPlugins");let IA=(()=>{class i{constructor(t,n){this._zone=n,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,n,r){return this._findPluginFor(n).addEventListener(t,n,r)}addGlobalEventListener(t,n,r){return this._findPluginFor(n).addGlobalEventListener(t,n,r)}getZone(){return this._zone}_findPluginFor(t){const n=this._eventNameToPlugin.get(t);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return i.\u0275fac=function(t){return new(t||i)(xe(RA),xe(pt))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac}),i})();class y3{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=Ea().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let x3=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(t){const n=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:i.\u0275fac}),i})(),y_=(()=>{class i extends x3{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,n,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(n.appendChild(o))})}addHost(t){const n=[];this._addStylesToHost(this._stylesSet,t,n),this._hostNodes.set(t,n)}removeHost(t){const n=this._hostNodes.get(t);n&&n.forEach(w3),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(t,r,n)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(w3))}}return i.\u0275fac=function(t){return new(t||i)(xe(Jt))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac}),i})();function w3(i){Ea().remove(i)}const aS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},lS=/%COMP%/g;function cS(i,e){return e.flat(100).map(t=>t.replace(lS,i))}function E3(i){return e=>{if("__ngUnwrap__"===e)return i;!1===i(e)&&(e.preventDefault(),e.returnValue=!1)}}let DA=(()=>{class i{constructor(t,n,r){this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new dS(t)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;switch(n.encapsulation){case Go.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new aJ(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(t),r}case Go.ShadowDom:return new lJ(this.eventManager,this.sharedStylesHost,t,n);default:if(!this.rendererByCompId.has(n.id)){const r=cS(n.id,n.styles);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(t){return new(t||i)(xe(IA),xe(y_),xe(p_))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac}),i})();class dS{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(aS[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(T3(e)?e.content:e).appendChild(t)}insertBefore(e,t,n){e&&(T3(e)?e.content:e).insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const s=aS[r];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=aS[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(fs.DashCase|fs.Important)?e.style.setProperty(t,n,r&fs.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&fs.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,E3(n)):this.eventManager.addEventListener(e,t,E3(n))}}function T3(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class aJ extends dS{constructor(e,t,n,r){super(e),this.component=n;const s=cS(r+"-"+n.id,n.styles);t.addStyles(s),this.contentAttr=function rJ(i){return"_ngcontent-%COMP%".replace(lS,i)}(r+"-"+n.id),this.hostAttr=function sJ(i){return"_nghost-%COMP%".replace(lS,i)}(r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class lJ extends dS{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=cS(r.id,r.styles);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let cJ=(()=>{class i extends y3{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,r){return t.addEventListener(n,r,!1),()=>this.removeEventListener(t,n,r)}removeEventListener(t,n,r){return t.removeEventListener(n,r)}}return i.\u0275fac=function(t){return new(t||i)(xe(Jt))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac}),i})();const R3=["alt","control","meta","shift"],dJ={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},uJ={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let hJ=(()=>{class i extends y3{constructor(t){super(t)}supports(t){return null!=i.parseEventName(t)}addEventListener(t,n,r){const s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ea().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let o="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),o="code."),R3.forEach(c=>{const d=n.indexOf(c);d>-1&&(n.splice(d,1),o+=c+".")}),o+=s,0!=n.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,n){let r=dJ[t.key]||t.key,s="";return n.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),R3.forEach(o=>{o!==r&&(0,uJ[o])(t)&&(s+=o+".")}),s+=r,s===n)}static eventCallback(t,n,r){return s=>{i.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>n(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return i.\u0275fac=function(t){return new(t||i)(xe(Jt))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac}),i})();const D3=[{provide:m_,useValue:u3},{provide:dO,useValue:function fJ(){oS.makeCurrent()},multi:!0},{provide:Jt,useFactory:function mJ(){return function r7(i){m1=i}(document),document},deps:[]}],gJ=yO(KZ,"browser",D3),P3=new je(""),k3=[{provide:uA,useClass:class eJ{addToWindow(e){rn.getAngularTestability=(n,r=!0)=>{const s=e.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},rn.getAllAngularTestabilities=()=>e.getAllTestabilities(),rn.getAllAngularRootElements=()=>e.getAllRootElements(),rn.frameworkStabilizers||(rn.frameworkStabilizers=[]),rn.frameworkStabilizers.push(n=>{const r=rn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&n(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,n){return null==t?null:e.getTestability(t)??(n?Ea().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:_O,useClass:DE,deps:[pt,PE,uA]},{provide:DE,useClass:DE,deps:[pt,PE,uA]}],L3=[{provide:w1,useValue:"root"},{provide:hl,useFactory:function pJ(){return new hl},deps:[]},{provide:RA,useClass:cJ,multi:!0,deps:[Jt,pt,m_]},{provide:RA,useClass:hJ,multi:!0,deps:[Jt]},{provide:DA,useClass:DA,deps:[IA,y_,p_]},{provide:Zg,useExisting:DA},{provide:x3,useExisting:y_},{provide:y_,useClass:y_,deps:[Jt]},{provide:IA,useClass:IA,deps:[RA,pt]},{provide:p3,useClass:tJ,deps:[]},[]];let B3=(()=>{class i{constructor(t){}static withServerTransition(t){return{ngModule:i,providers:[{provide:p_,useValue:t.appId},{provide:A3,useExisting:p_},J$]}}}return i.\u0275fac=function(t){return new(t||i)(xe(P3,12))},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({providers:[...L3,...k3],imports:[Sa,$Z]}),i})(),F3=(()=>{class i{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return i.\u0275fac=function(t){return new(t||i)(xe(Jt))},i.\u0275prov=Ge({token:i,factory:function(t){let n=null;return n=t?new t:function bJ(){return new F3(xe(Jt))}(),n},providedIn:"root"}),i})();typeof window<"u"&&window;let PA=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:function(t){let n=null;return n=t?new(t||i):xe(j3),n},providedIn:"root"}),i})(),j3=(()=>{class i extends PA{constructor(t){super(),this._doc=t}sanitize(t,n){if(null==n)return null;switch(t){case Pi.NONE:return n;case Pi.HTML:return va(n,"HTML")?js(n):Kk(this._doc,String(n)).toString();case Pi.STYLE:return va(n,"Style")?js(n):n;case Pi.SCRIPT:if(va(n,"Script"))return js(n);throw new Error("unsafe value used in a script context");case Pi.URL:return va(n,"URL")?js(n):Bv(String(n));case Pi.RESOURCE_URL:if(va(n,"ResourceURL"))return js(n);throw new Error(`unsafe value used in a resource URL context (see ${iv})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${iv})`)}}bypassSecurityTrustHtml(t){return function u7(i){return new s7(i)}(t)}bypassSecurityTrustStyle(t){return function h7(i){return new o7(i)}(t)}bypassSecurityTrustScript(t){return function f7(i){return new a7(i)}(t)}bypassSecurityTrustUrl(t){return function p7(i){return new l7(i)}(t)}bypassSecurityTrustResourceUrl(t){return function m7(i){return new c7(i)}(t)}}return i.\u0275fac=function(t){return new(t||i)(xe(Jt))},i.\u0275prov=Ge({token:i,factory:function(t){let n=null;return n=t?new t:function MJ(i){return new j3(i.get(Jt))}(xe(ms)),n},providedIn:"root"}),i})();function Et(...i){return En(i,Sg(i))}class zs extends Ht{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:n}=this;if(e)throw t;return this._throwIfClosed(),n}next(e){super.next(this._value=e)}}const kA=tM(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:EJ}=Array,{getPrototypeOf:SJ,prototype:TJ,keys:RJ}=Object;function U3(i){if(1===i.length){const e=i[0];if(EJ(e))return{args:e,keys:null};if(function IJ(i){return i&&"object"==typeof i&&SJ(i)===TJ}(e)){const t=RJ(e);return{args:t.map(n=>e[n]),keys:t}}}return{args:i,keys:null}}const{isArray:DJ}=Array;function fS(i){return wt(e=>function PJ(i,e){return DJ(e)?i(...e):i(e)}(i,e))}function V3(i,e){return i.reduce((t,n,r)=>(t[n]=e[r],t),{})}function pS(...i){const e=Sg(i),t=hM(i),{args:n,keys:r}=U3(i);if(0===n.length)return En([],e);const s=new Fi(function kJ(i,e,t=Ql){return n=>{z3(e,()=>{const{length:r}=i,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)z3(e,()=>{const c=En(i[l],e);let d=!1;c.subscribe(un(n,u=>{s[l]=u,d||(d=!0,a--),a||n.next(t(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,e,r?o=>V3(r,o):Ql));return t?s.pipe(fS(t)):s}function z3(i,e,t){i?nl(t,i,e):e()}function LA(...i){return function LJ(){return hh(1)}()(En(i,Sg(i)))}function G3(i){return new Fi(e=>{us(i()).subscribe(e)})}function Jo(i,e){const t=Si(i)?i:()=>i,n=r=>r.error(t());return new Fi(e?r=>e.schedule(n,0,r):n)}function BA(){return Mn((i,e)=>{let t=null;i._refCount++;const n=un(e,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(t=null);const r=i._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});i.subscribe(n),n.closed||(t=i.connect())})}class mS extends Fi{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,G2(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new dn;const t=this.getSubject();e.add(this.source.subscribe(un(t,void 0,()=>{this._teardown(),t.complete()},n=>{this._teardown(),t.error(n)},()=>this._teardown()))),e.closed&&(this._connection=null,e=dn.EMPTY)}return e}refCount(){return BA()(this)}}function Gs(i,e){return Mn((t,n)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&n.complete();t.subscribe(un(n,l=>{r?.unsubscribe();let c=0;const d=s++;us(i(l,d)).subscribe(r=un(n,u=>n.next(e?e(l,u,d,c++):u),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function tc(...i){const e=Sg(i);return Mn((t,n)=>{(e?LA(i,t,e):LA(i,t)).subscribe(n)})}function On(i,e){return Mn((t,n)=>{let r=0;t.subscribe(un(n,s=>i.call(e,s,r++)&&n.next(s)))})}function FA(i){return Mn((e,t)=>{let n=!1;e.subscribe(un(t,r=>{n=!0,t.next(r)},()=>{n||t.next(i),t.complete()}))})}function H3(i=BJ){return Mn((e,t)=>{let n=!1;e.subscribe(un(t,r=>{n=!0,t.next(r)},()=>n?t.complete():t.error(i())))})}function BJ(){return new kA}function ic(i,e){const t=arguments.length>=2;return n=>n.pipe(i?On((r,s)=>i(r,s,n)):Ql,hs(1),t?FA(e):H3(()=>new kA))}function nc(i,e){return Si(e)?xr(i,e,1):xr(i,1)}function on(i,e,t){const n=Si(i)||e||t?{next:i,error:e,complete:t}:i;return n?Mn((r,s)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let a=!0;r.subscribe(un(s,l=>{var c;null===(c=n.next)||void 0===c||c.call(n,l),s.next(l)},()=>{var l;a=!1,null===(l=n.complete)||void 0===l||l.call(n),s.complete()},l=>{var c;a=!1,null===(c=n.error)||void 0===c||c.call(n,l),s.error(l)},()=>{var l,c;a&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(c=n.finalize)||void 0===c||c.call(n)}))}):Ql}function ea(i){return Mn((e,t)=>{let s,n=null,r=!1;n=e.subscribe(un(t,void 0,void 0,o=>{s=us(i(o,ea(i)(e))),n?(n.unsubscribe(),n=null,s.subscribe(t)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(t))})}function FJ(i,e,t,n,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(un(o,d=>{const u=c++;l=a?i(l,d,u):(a=!0,d),n&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function Q3(i,e){return Mn(FJ(i,e,arguments.length>=2,!0))}function gS(i){return i<=0?()=>Br:Mn((e,t)=>{let n=[];e.subscribe(un(t,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)t.next(r);t.complete()},void 0,()=>{n=null}))})}function W3(i,e){const t=arguments.length>=2;return n=>n.pipe(i?On((r,s)=>i(r,s,n)):Ql,gS(1),t?FA(e):H3(()=>new kA))}function _S(i){return wt(()=>i)}function OA(i){return Mn((e,t)=>{try{e.subscribe(t)}finally{t.add(i)}})}const fi="primary",x_=Symbol("RouteTitle");class NJ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ef(i){return new NJ(i)}function jJ(i,e,t){const n=t.path.split("/");if(n.length>i.length||"full"===t.pathMatch&&(e.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const o=n[s],a=i[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function Ta(i,e){const t=i?Object.keys(i):void 0,n=e?Object.keys(e):void 0;if(!t||!n||t.length!=n.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!q3(i[r],e[r]))return!1;return!0}function q3(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;const t=[...i].sort(),n=[...e].sort();return t.every((r,s)=>n[s]===r)}return i===e}function Y3(i){return Array.prototype.concat.apply([],i)}function X3(i){return i.length>0?i[i.length-1]:null}function Ir(i,e){for(const t in i)i.hasOwnProperty(t)&&e(i[t],t)}function rc(i){return J1(i)?i:n_(i)?En(Promise.resolve(i)):Et(i)}const NA=!1,VJ={exact:function $3(i,e,t){if(!kd(i.segments,e.segments)||!jA(i.segments,e.segments,t)||i.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children)if(!i.children[n]||!$3(i.children[n],e.children[n],t))return!1;return!0},subset:J3},Z3={exact:function zJ(i,e){return Ta(i,e)},subset:function GJ(i,e){return Object.keys(e).length<=Object.keys(i).length&&Object.keys(e).every(t=>q3(i[t],e[t]))},ignored:()=>!0};function K3(i,e,t){return VJ[t.paths](i.root,e.root,t.matrixParams)&&Z3[t.queryParams](i.queryParams,e.queryParams)&&!("exact"===t.fragment&&i.fragment!==e.fragment)}function J3(i,e,t){return eN(i,e,e.segments,t)}function eN(i,e,t,n){if(i.segments.length>t.length){const r=i.segments.slice(0,t.length);return!(!kd(r,t)||e.hasChildren()||!jA(r,t,n))}if(i.segments.length===t.length){if(!kd(i.segments,t)||!jA(i.segments,t,n))return!1;for(const r in e.children)if(!i.children[r]||!J3(i.children[r],e.children[r],n))return!1;return!0}{const r=t.slice(0,i.segments.length),s=t.slice(i.segments.length);return!!(kd(i.segments,r)&&jA(i.segments,r,n)&&i.children[fi])&&eN(i.children[fi],e,s,n)}}function jA(i,e,t){return e.every((n,r)=>Z3[t](i[r].parameters,n.parameters))}class Pd{constructor(e=new _i([],{}),t={},n=null){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ef(this.queryParams)),this._queryParamMap}toString(){return WJ.serialize(this)}}class _i{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ir(t,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return UA(this)}}class w_{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ef(this.parameters)),this._parameterMap}toString(){return nN(this)}}function kd(i,e){return i.length===e.length&&i.every((t,n)=>t.path===e[n].path)}let C_=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:function(){return new bS},providedIn:"root"}),i})();class bS{parse(e){const t=new tee(e);return new Pd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${M_(e.root,!0)}`,n=function XJ(i){const e=Object.keys(i).map(t=>{const n=i[t];return Array.isArray(n)?n.map(r=>`${VA(t)}=${VA(r)}`).join("&"):`${VA(t)}=${VA(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${n}${"string"==typeof e.fragment?`#${function qJ(i){return encodeURI(i)}(e.fragment)}`:""}`}}const WJ=new bS;function UA(i){return i.segments.map(e=>nN(e)).join("/")}function M_(i,e){if(!i.hasChildren())return UA(i);if(e){const t=i.children[fi]?M_(i.children[fi],!1):"",n=[];return Ir(i.children,(r,s)=>{s!==fi&&n.push(`${s}:${M_(r,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function QJ(i,e){let t=[];return Ir(i.children,(n,r)=>{r===fi&&(t=t.concat(e(n,r)))}),Ir(i.children,(n,r)=>{r!==fi&&(t=t.concat(e(n,r)))}),t}(i,(n,r)=>r===fi?[M_(i.children[fi],!1)]:[`${r}:${M_(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[fi]?`${UA(i)}/${t[0]}`:`${UA(i)}/(${t.join("//")})`}}function tN(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function VA(i){return tN(i).replace(/%3B/gi,";")}function vS(i){return tN(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zA(i){return decodeURIComponent(i)}function iN(i){return zA(i.replace(/\+/g,"%20"))}function nN(i){return`${vS(i.path)}${function YJ(i){return Object.keys(i).map(e=>`;${vS(e)}=${vS(i[e])}`).join("")}(i.parameters)}`}const ZJ=/^[^\/()?;=#]+/;function GA(i){const e=i.match(ZJ);return e?e[0]:""}const KJ=/^[^=?&#]+/,JJ=/^[^&#]+/;class tee{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _i([],{}):new _i([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[fi]=new _i(e,t)),n}parseSegment(){const e=GA(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Ie(4009,NA);return this.capture(e),new w_(zA(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=GA(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const r=GA(this.remaining);r&&(n=r,this.capture(n))}e[zA(t)]=zA(n)}parseQueryParam(e){const t=function $J(i){const e=i.match(KJ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const o=function eee(i){const e=i.match(JJ);return e?e[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=iN(t),s=iN(n);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=GA(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Ie(4010,NA);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=fi);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[fi]:new _i([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Ie(4011,NA)}}function AS(i){return i.segments.length>0?new _i([],{[fi]:i}):i}function HA(i){const e={};for(const n of Object.keys(i.children)){const s=HA(i.children[n]);(s.segments.length>0||s.hasChildren())&&(e[n]=s)}return function iee(i){if(1===i.numberOfChildren&&i.children[fi]){const e=i.children[fi];return new _i(i.segments.concat(e.segments),e.children)}return i}(new _i(i.segments,e))}function Ld(i){return i instanceof Pd}function see(i,e,t,n,r){if(0===t.length)return tf(e.root,e.root,e.root,n,r);const s=function oN(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new sN(!0,0,i);let e=0,t=!1;const n=i.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Ir(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new sN(t,e,n)}(t);return s.toRoot()?tf(e.root,e.root,new _i([],{}),n,r):function o(l){const c=function aee(i,e,t,n){if(i.isAbsolute)return new nf(e.root,!0,0);if(-1===n)return new nf(t,t===e.root,0);return function aN(i,e,t){let n=i,r=e,s=t;for(;s>r;){if(s-=r,n=n.parent,!n)throw new Ie(4005,!1);r=n.segments.length}return new nf(n,!1,r-s)}(t,n+(E_(i.commands[0])?0:1),i.numberOfDoubleDots)}(s,e,i.snapshot?._urlSegment,l),d=c.processChildren?T_(c.segmentGroup,c.index,s.commands):xS(c.segmentGroup,c.index,s.commands);return tf(e.root,c.segmentGroup,d,n,r)}(i.snapshot?._lastPathIndex)}function E_(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function S_(i){return"object"==typeof i&&null!=i&&i.outlets}function tf(i,e,t,n,r){let o,s={};n&&Ir(n,(l,c)=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`}),o=i===e?t:rN(i,e,t);const a=AS(HA(o));return new Pd(a,s,r)}function rN(i,e,t){const n={};return Ir(i.children,(r,s)=>{n[s]=r===e?t:rN(r,e,t)}),new _i(i.segments,n)}class sN{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&E_(n[0]))throw new Ie(4003,!1);const r=n.find(S_);if(r&&r!==X3(n))throw new Ie(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class nf{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function xS(i,e,t){if(i||(i=new _i([],{})),0===i.segments.length&&i.hasChildren())return T_(i,e,t);const n=function cee(i,e,t){let n=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=t.length)return s;const o=i.segments[r],a=t[n];if(S_(a))break;const l=`${a}`,c=n<t.length-1?t[n+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!cN(l,c,o))return s;n+=2}else{if(!cN(l,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,e,t),r=t.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new _i(i.segments.slice(0,n.pathIndex),{});return s.children[fi]=new _i(i.segments.slice(n.pathIndex),i.children),T_(s,0,r)}return n.match&&0===r.length?new _i(i.segments,{}):n.match&&!i.hasChildren()?wS(i,e,t):n.match?T_(i,0,r):wS(i,e,t)}function T_(i,e,t){if(0===t.length)return new _i(i.segments,{});{const n=function lee(i){return S_(i[0])?i[0].outlets:{[fi]:i}}(t),r={};return Ir(n,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=xS(i.children[o],e,s))}),Ir(i.children,(s,o)=>{void 0===n[o]&&(r[o]=s)}),new _i(i.segments,r)}}function wS(i,e,t){const n=i.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(S_(s)){const l=dee(s.outlets);return new _i(n,l)}if(0===r&&E_(t[0])){n.push(new w_(i.segments[e].path,lN(t[0]))),r++;continue}const o=S_(s)?s.outlets[fi]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&E_(a)?(n.push(new w_(o,lN(a))),r+=2):(n.push(new w_(o,{})),r++)}return new _i(n,{})}function dee(i){const e={};return Ir(i,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=wS(new _i([],{}),0,t))}),e}function lN(i){const e={};return Ir(i,(t,n)=>e[n]=`${t}`),e}function cN(i,e,t){return i==t.path&&Ta(e,t.parameters)}const R_="imperative";class Ra{constructor(e,t){this.id=e,this.url=t}}class CS extends Ra{constructor(e,t,n="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bd extends Ra{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class QA extends Ra{constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class dN extends Ra{constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r,this.type=16}}class uN extends Ra{constructor(e,t,n,r){super(e,t),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class uee extends Ra{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hee extends Ra{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fee extends Ra{constructor(e,t,n,r,s){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class pee extends Ra{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mee extends Ra{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gee{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _ee{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class bee{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vee{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Aee{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yee{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hN{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let wee=(()=>{class i{createUrlTree(t,n,r,s,o,a){return see(t||n.root,r,s,o,a)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:i.\u0275fac}),i})(),Cee=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:function(e){return wee.\u0275fac(e)},providedIn:"root"}),i})();class fN{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=MS(e,this._root);return t?t.children.map(n=>n.value):[]}firstChild(e){const t=MS(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ES(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return ES(e,this._root).map(t=>t.value)}}function MS(i,e){if(i===e.value)return e;for(const t of e.children){const n=MS(i,t);if(n)return n}return null}function ES(i,e){if(i===e.value)return[e];for(const t of e.children){const n=ES(i,t);if(n.length)return n.unshift(e),n}return[]}class bl{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function rf(i){const e={};return i&&i.children.forEach(t=>e[t.value.outlet]=t),e}class pN extends fN{constructor(e,t){super(e),this.snapshot=t,SS(this,e)}toString(){return this.snapshot.toString()}}function mN(i,e){const t=function Mee(i,e){const o=new WA([],{},{},"",{},fi,e,null,i.root,-1,{});return new _N("",new bl(o,[]))}(i,e),n=new zs([new w_("",{})]),r=new zs({}),s=new zs({}),o=new zs({}),a=new zs(""),l=new Fd(n,r,o,a,s,fi,e,t.root);return l.snapshot=t.root,new pN(new bl(l,[]),t)}class Fd{constructor(e,t,n,r,s,o,a,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(wt(c=>c[x_]))??Et(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(wt(e=>ef(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(wt(e=>ef(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function gN(i,e="emptyOnly"){const t=i.pathFromRoot;let n=0;if("always"!==e)for(n=t.length-1;n>=1;){const r=t[n],s=t[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function Eee(i){return i.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(n))}class WA{get title(){return this.data?.[x_]}constructor(e,t,n,r,s,o,a,l,c,d,u){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=d,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ef(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ef(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _N extends fN{constructor(e,t){super(t),this.url=e,SS(this,t)}toString(){return bN(this._root)}}function SS(i,e){e.value._routerState=i,e.children.forEach(t=>SS(i,t))}function bN(i){const e=i.children.length>0?` { ${i.children.map(bN).join(", ")} } `:"";return`${i.value}${e}`}function TS(i){if(i.snapshot){const e=i.snapshot,t=i._futureSnapshot;i.snapshot=t,Ta(e.queryParams,t.queryParams)||i.queryParams.next(t.queryParams),e.fragment!==t.fragment&&i.fragment.next(t.fragment),Ta(e.params,t.params)||i.params.next(t.params),function UJ(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!Ta(i[t],e[t]))return!1;return!0}(e.url,t.url)||i.url.next(t.url),Ta(e.data,t.data)||i.data.next(t.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function RS(i,e){const t=Ta(i.params,e.params)&&function HJ(i,e){return kd(i,e)&&i.every((t,n)=>Ta(t.parameters,e[n].parameters))}(i.url,e.url);return t&&!(!i.parent!=!e.parent)&&(!i.parent||RS(i.parent,e.parent))}function I_(i,e,t){if(t&&i.shouldReuseRoute(e.value,t.value.snapshot)){const n=t.value;n._futureSnapshot=e.value;const r=function Tee(i,e,t){return e.children.map(n=>{for(const r of t.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return I_(i,n,r);return I_(i,n)})}(i,e,t);return new bl(n,r)}{if(i.shouldAttach(e.value)){const s=i.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>I_(i,a)),o}}const n=function Ree(i){return new Fd(new zs(i.url),new zs(i.params),new zs(i.queryParams),new zs(i.fragment),new zs(i.data),i.outlet,i.component,i)}(e.value),r=e.children.map(s=>I_(i,s));return new bl(n,r)}}const IS="ngNavigationCancelingError";function vN(i,e){const{redirectTo:t,navigationBehaviorOptions:n}=Ld(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=AN(!1,0,e);return r.url=t,r.navigationBehaviorOptions=n,r}function AN(i,e,t){const n=new Error("NavigationCancelingError: "+(i||""));return n[IS]=!0,n.cancellationCode=e,t&&(n.url=t),n}function yN(i){return xN(i)&&Ld(i.url)}function xN(i){return i&&i[IS]}class Iee{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new D_,this.attachRef=null}}let D_=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const r=this.getOrCreateContext(t);r.outlet=n,this.contexts.set(t,r)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new Iee,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const qA=!1;let DS=(()=>{class i{constructor(){this.activated=null,this._activatedRoute=null,this.name=fi,this.activateEvents=new St,this.deactivateEvents=new St,this.attachEvents=new St,this.detachEvents=new St,this.parentContexts=Ut(D_),this.location=Ut(Vr),this.changeDetector=Ut(er),this.environmentInjector=Ut(Aa)}ngOnChanges(t){if(t.name){const{firstChange:n,previousValue:r}=t.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ie(4012,qA);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ie(4012,qA);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ie(4012,qA);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new Ie(4013,qA);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Dee(t,a,r.injector);if(n&&function Pee(i){return!!i.resolveComponentFactory}(n)){const c=n.resolveComponentFactory(o);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Sr]}),i})();class Dee{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Fd?this.route:e===D_?this.childContexts:this.parent.get(e,t)}}let PS=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=K({type:i,selectors:[["ng-component"]],standalone:!0,features:[pE],decls:1,vars:0,template:function(t,n){1&t&&Ye(0,"router-outlet")},dependencies:[DS],encapsulation:2}),i})();function wN(i,e){return i.providers&&!i._injector&&(i._injector=sA(i.providers,e,`Route: ${i.path}`)),i._injector??e}function LS(i){const e=i.children&&i.children.map(LS),t=e?{...i,children:e}:{...i};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fi&&(t.component=PS),t}function yo(i){return i.outlet||fi}function CN(i,e){const t=i.filter(n=>yo(n)===e);return t.push(...i.filter(n=>yo(n)!==e)),t}function P_(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let e=i.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Oee{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),TS(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=rf(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),Ir(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,n);else s&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=rf(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(n&&n.outlet){const o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=rf(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=rf(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new yee(s.value.snapshot))}),e.children.length&&this.forwardEvent(new vee(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if(TS(r),r===s)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),TS(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=P_(r.snapshot),l=a?.get(Xl)??null;o.attachRef=null,o.route=r,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}class MN{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class YA{constructor(e,t){this.component=e,this.route=t}}function Nee(i,e,t){const n=i._root;return k_(n,e?e._root:null,t,[n.value])}function sf(i,e){const t=Symbol(),n=e.get(i,t);return n===t?"function"!=typeof i||function e6(i){return null!==sv(i)}(i)?e.get(i):i:n}function k_(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=rf(e);return i.children.forEach(o=>{(function Uee(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,o=e?e.value:null,a=t?t.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Vee(i,e,t){if("function"==typeof t)return t(i,e);switch(t){case"pathParamsChange":return!kd(i.url,e.url);case"pathParamsOrQueryParamsChange":return!kd(i.url,e.url)||!Ta(i.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!RS(i,e)||!Ta(i.queryParams,e.queryParams);default:return!RS(i,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new MN(n)):(s.data=o.data,s._resolvedData=o._resolvedData),k_(i,e,s.component?a?a.children:null:t,n,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new YA(a.outlet.component,o))}else o&&L_(e,a,r),r.canActivateChecks.push(new MN(n)),k_(i,null,s.component?a?a.children:null:t,n,r)})(o,s[o.value.outlet],t,n.concat([o.value]),r),delete s[o.value.outlet]}),Ir(s,(o,a)=>L_(o,t.getContext(a),r)),r}function L_(i,e,t){const n=rf(i),r=i.value;Ir(n,(s,o)=>{L_(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new YA(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function B_(i){return"function"==typeof i}function BS(i){return i instanceof kA||"EmptyError"===i?.name}const XA=Symbol("INITIAL_VALUE");function af(){return Gs(i=>pS(i.map(e=>e.pipe(hs(1),tc(XA)))).pipe(wt(e=>{for(const t of e)if(!0!==t){if(t===XA)return XA;if(!1===t||t instanceof Pd)return t}return!0}),On(e=>e!==XA),hs(1)))}function EN(i){return function xQ(...i){return U2(i)}(on(e=>{if(Ld(e))throw vN(0,e)}),wt(e=>!0===e))}const FS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function SN(i,e,t,n,r){const s=OS(i,e,t);return s.matched?function rte(i,e,t,n){const r=e.canMatch;return r&&0!==r.length?Et(r.map(o=>{const a=sf(o,i);return rc(function qee(i){return i&&B_(i.canMatch)}(a)?a.canMatch(e,t):i.runInContext(()=>a(e,t)))})).pipe(af(),EN()):Et(!0)}(n=wN(e,n),e,t).pipe(wt(o=>!0===o?s:{...FS})):Et(s)}function OS(i,e,t){if(""===e.path)return"full"===e.pathMatch&&(i.hasChildren()||t.length>0)?{...FS}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||jJ)(t,i,e);if(!r)return{...FS};const s={};Ir(r.posParams,(a,l)=>{s[l]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function ZA(i,e,t,n){if(t.length>0&&function ate(i,e,t){return t.some(n=>KA(i,e,n)&&yo(n)!==fi)}(i,t,n)){const s=new _i(e,function ote(i,e,t,n){const r={};r[fi]=n,n._sourceSegment=i,n._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&yo(s)!==fi){const o=new _i([],{});o._sourceSegment=i,o._segmentIndexShift=e.length,r[yo(s)]=o}return r}(i,e,n,new _i(t,i.children)));return s._sourceSegment=i,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function lte(i,e,t){return t.some(n=>KA(i,e,n))}(i,t,n)){const s=new _i(i.segments,function ste(i,e,t,n,r){const s={};for(const o of n)if(KA(i,t,o)&&!r[yo(o)]){const a=new _i([],{});a._sourceSegment=i,a._segmentIndexShift=e.length,s[yo(o)]=a}return{...r,...s}}(i,e,t,n,i.children));return s._sourceSegment=i,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const r=new _i(i.segments,i.children);return r._sourceSegment=i,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function KA(i,e,t){return(!(i.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function TN(i,e,t,n){return!!(yo(i)===n||n!==fi&&KA(e,t,i))&&("**"===i.path||OS(e,i,t).matched)}function RN(i,e,t){return 0===e.length&&!i.children[t]}const $A=!1;class JA{constructor(e){this.segmentGroup=e||null}}class IN{constructor(e){this.urlTree=e}}function F_(i){return Jo(new JA(i))}function DN(i){return Jo(new IN(i))}class hte{constructor(e,t,n,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=ZA(this.urlTree.root,[],[],this.config).segmentGroup,t=new _i(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,fi).pipe(wt(s=>this.createUrlTree(HA(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ea(s=>{if(s instanceof IN)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof JA?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,fi).pipe(wt(r=>this.createUrlTree(HA(r),e.queryParams,e.fragment))).pipe(ea(r=>{throw r instanceof JA?this.noMatchError(r):r}))}noMatchError(e){return new Ie(4002,$A)}createUrlTree(e,t,n){const r=AS(e);return new Pd(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(wt(s=>new _i([],s))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return En(r).pipe(nc(s=>{const o=n.children[s],a=CN(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(wt(l=>({segment:l,outlet:s})))}),Q3((s,o)=>(s[o.outlet]=o.segment,s),{}),W3())}expandSegment(e,t,n,r,s,o){return En(n).pipe(nc(a=>this.expandSegmentAgainstRoute(e,t,n,a,r,s,o).pipe(ea(c=>{if(c instanceof JA)return Et(null);throw c}))),ic(a=>!!a),ea((a,l)=>{if(BS(a))return RN(t,r,s)?Et(new _i([],{})):F_(t);throw a}))}expandSegmentAgainstRoute(e,t,n,r,s,o,a){return TN(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o):F_(t):F_(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?DN(s):this.lineralizeSegments(n,s).pipe(xr(o=>{const a=new _i(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:d}=OS(t,r,s);if(!a)return F_(t);const u=this.applyRedirectCommands(l,r.redirectTo,d);return r.redirectTo.startsWith("/")?DN(u):this.lineralizeSegments(r,u).pipe(xr(h=>this.expandSegment(e,t,n,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,n,r,s){return"**"===n.path?(e=wN(n,e),n.loadChildren?(n._loadedRoutes?Et({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(e,n)).pipe(wt(a=>(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,new _i(r,{})))):Et(new _i(r,{}))):SN(t,n,r,e).pipe(Gs(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(e=n._injector??e,n,r).pipe(xr(d=>{const u=d.injector??e,h=d.routes,{segmentGroup:f,slicedSegments:m}=ZA(t,a,l,h),g=new _i(f.segments,f.children);if(0===m.length&&g.hasChildren())return this.expandChildren(u,h,g).pipe(wt(b=>new _i(a,b)));if(0===h.length&&0===m.length)return Et(new _i(a,{}));const _=yo(n)===s;return this.expandSegment(u,g,h,m,_?fi:s,!0).pipe(wt(v=>new _i(a.concat(v.segments),v.children)))})):F_(t)))}getChildConfig(e,t,n){return t.children?Et({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Et({routes:t._loadedRoutes,injector:t._loadedInjector}):function nte(i,e,t,n){const r=e.canLoad;return void 0===r||0===r.length?Et(!0):Et(r.map(o=>{const a=sf(o,i);return rc(function Gee(i){return i&&B_(i.canLoad)}(a)?a.canLoad(e,t):i.runInContext(()=>a(e,t)))})).pipe(af(),EN())}(e,t,n).pipe(xr(r=>r?this.configLoader.loadChildren(e,t).pipe(on(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function dte(i){return Jo(AN($A,3))}())):Et({routes:[],injector:e})}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Et(n);if(r.numberOfChildren>1||!r.children[fi])return Jo(new Ie(4e3,$A));r=r.children[fi]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreateUrlTree(e,t,n,r){const s=this.createSegmentGroup(e,t.root,n,r);return new Pd(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return Ir(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);n[s]=t[a]}else n[s]=r}),n}createSegmentGroup(e,t,n,r){const s=this.createSegments(e,t.segments,n,r);let o={};return Ir(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,n,r)}),new _i(s,o)}createSegments(e,t,n,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Ie(4001,$A);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}class pte{}class _te{constructor(e,t,n,r,s,o,a){this.injector=e,this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const e=ZA(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,fi).pipe(wt(t=>{if(null===t)return null;const n=new WA([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},fi,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new bl(n,t),s=new _N(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,n=gN(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,t,n):this.processSegment(e,t,n,n.segments,r)}processChildren(e,t,n){return En(Object.keys(n.children)).pipe(nc(r=>{const s=n.children[r],o=CN(t,r);return this.processSegmentGroup(e,o,s,r)}),Q3((r,s)=>r&&s?(r.push(...s),r):null),function OJ(i,e=!1){return Mn((t,n)=>{let r=0;t.subscribe(un(n,s=>{const o=i(s,r++);(o||e)&&n.next(s),!o&&n.complete()}))})}(r=>null!==r),FA(null),W3(),wt(r=>{if(null===r)return null;const s=kN(r);return function bte(i){i.sort((e,t)=>e.value.outlet===fi?-1:t.value.outlet===fi?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,n,r,s){return En(t).pipe(nc(o=>this.processSegmentAgainstRoute(o._injector??e,o,n,r,s)),ic(o=>!!o),ea(o=>{if(BS(o))return RN(n,r,s)?Et([]):Et(null);throw o}))}processSegmentAgainstRoute(e,t,n,r,s){if(t.redirectTo||!TN(t,n,r,s))return Et(null);let o;if("**"===t.path){const a=r.length>0?X3(r).parameters:{},l=BN(n)+r.length;o=Et({snapshot:new WA(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,FN(t),yo(t),t.component??t._loadedComponent??null,t,LN(n),l,ON(t)),consumedSegments:[],remainingSegments:[]})}else o=SN(n,t,r,e).pipe(wt(({matched:a,consumedSegments:l,remainingSegments:c,parameters:d})=>{if(!a)return null;const u=BN(n)+l.length;return{snapshot:new WA(l,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,FN(t),yo(t),t.component??t._loadedComponent??null,t,LN(n),u,ON(t)),consumedSegments:l,remainingSegments:c}}));return o.pipe(Gs(a=>{if(null===a)return Et(null);const{snapshot:l,consumedSegments:c,remainingSegments:d}=a;e=t._injector??e;const u=t._loadedInjector??e,h=function vte(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:m}=ZA(n,c,d,h.filter(_=>void 0===_.redirectTo));if(0===m.length&&f.hasChildren())return this.processChildren(u,h,f).pipe(wt(_=>null===_?null:[new bl(l,_)]));if(0===h.length&&0===m.length)return Et([new bl(l,[])]);const g=yo(t)===s;return this.processSegment(u,h,f,m,g?fi:s).pipe(wt(_=>null===_?null:[new bl(l,_)]))}))}}function Ate(i){const e=i.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function kN(i){const e=[],t=new Set;for(const n of i){if(!Ate(n)){e.push(n);continue}const r=e.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),t.add(r)):e.push(n)}for(const n of t){const r=kN(n.children);e.push(new bl(n.value,r))}return e.filter(n=>!t.has(n))}function LN(i){let e=i;for(;e._sourceSegment;)e=e._sourceSegment;return e}function BN(i){let e=i,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function FN(i){return i.data||{}}function ON(i){return i.resolve||{}}function NN(i){return"string"==typeof i.title||null===i.title}function NS(i){return Gs(e=>{const t=i(e);return t?En(t).pipe(wt(()=>e)):Et(e)})}const lf=new je("ROUTES");let jS=(()=>{class i{constructor(t,n){this.injector=t,this.compiler=n,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Et(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const n=rc(t.loadComponent()).pipe(wt(UN),on(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),OA(()=>{this.componentLoaders.delete(t)})),r=new mS(n,()=>new Ht).pipe(BA());return this.componentLoaders.set(t,r),r}loadChildren(t,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return Et({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const s=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(wt(a=>{this.onLoadEndListener&&this.onLoadEndListener(n);let l,c,d=!1;Array.isArray(a)?c=a:(l=a.create(t).injector,c=Y3(l.get(lf,[],jt.Self|jt.Optional)));return{routes:c.map(LS),injector:l}}),OA(()=>{this.childrenLoaders.delete(n)})),o=new mS(s,()=>new Ht).pipe(BA());return this.childrenLoaders.set(n,o),o}loadModuleFactoryOrRoutes(t){return rc(t()).pipe(wt(UN),xr(r=>r instanceof wF||Array.isArray(r)?Et(r):En(this.compiler.compileModuleAsync(r))))}}return i.\u0275fac=function(t){return new(t||i)(xe(ms),xe(hO))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function UN(i){return function Rte(i){return i&&"object"==typeof i&&"default"in i}(i)?i.default:i}let ty=(()=>{class i{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ht,this.configLoader=Ut(jS),this.environmentInjector=Ut(Aa),this.urlSerializer=Ut(C_),this.rootContexts=Ut(D_),this.navigationId=0,this.afterPreactivation=()=>Et(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new _ee(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new gee(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const n=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:n})}setupNavigations(t){return this.transitions=new zs({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:R_,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(On(n=>0!==n.id),wt(n=>({...n,extractedUrl:t.urlHandlingStrategy.extract(n.rawUrl)})),Gs(n=>{let r=!1,s=!1;return Et(n).pipe(on(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Gs(o=>{const a=t.browserUrlTree.toString(),l=!t.navigated||o.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(!l&&"reload"!==(o.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const d="";return this.events.next(new dN(o.id,t.serializeUrl(n.rawUrl),d,0)),t.rawUrlTree=o.rawUrl,o.resolve(null),Br}if(t.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return VN(o.source)&&(t.browserUrlTree=o.extractedUrl),Et(o).pipe(Gs(d=>{const u=this.transitions?.getValue();return this.events.next(new CS(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),u!==this.transitions?.getValue()?Br:Promise.resolve(d)}),function fte(i,e,t,n){return Gs(r=>function ute(i,e,t,n,r){return new hte(i,e,t,n,r).apply()}(i,e,t,r.extractedUrl,n).pipe(wt(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),on(d=>{this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects},n.urlAfterRedirects=d.urlAfterRedirects}),function xte(i,e,t,n,r){return xr(s=>function gte(i,e,t,n,r,s,o="emptyOnly"){return new _te(i,e,t,n,r,o,s).recognize().pipe(Gs(a=>null===a?function mte(i){return new Fi(e=>e.error(i))}(new pte):Et(a)))}(i,e,t,s.urlAfterRedirects,n.serialize(s.urlAfterRedirects),n,r).pipe(wt(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),on(d=>{if(n.targetSnapshot=d.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!d.extras.skipLocationChange){const h=t.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);t.setBrowserUrl(h,d)}t.browserUrlTree=d.urlAfterRedirects}const u=new uee(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}));if(l&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:d,extractedUrl:u,source:h,restoredState:f,extras:m}=o,g=new CS(d,this.urlSerializer.serialize(u),h,f);this.events.next(g);const _=mN(u,this.rootComponentType).snapshot;return Et(n={...o,targetSnapshot:_,urlAfterRedirects:u,extras:{...m,skipLocationChange:!1,replaceUrl:!1}})}{const d="";return this.events.next(new dN(o.id,t.serializeUrl(n.extractedUrl),d,1)),t.rawUrlTree=o.rawUrl,o.resolve(null),Br}}),on(o=>{const a=new hee(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),wt(o=>n={...o,guards:Nee(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function Xee(i,e){return xr(t=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Et({...t,guardsResult:!0}):function Zee(i,e,t,n){return En(i).pipe(xr(r=>function ite(i,e,t,n,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Et(s.map(a=>{const l=P_(e)??r,c=sf(a,l);return rc(function Wee(i){return i&&B_(i.canDeactivate)}(c)?c.canDeactivate(i,e,t,n):l.runInContext(()=>c(i,e,t,n))).pipe(ic())})).pipe(af()):Et(!0)}(r.component,r.route,t,e,n)),ic(r=>!0!==r,!0))}(o,n,r,i).pipe(xr(a=>a&&function zee(i){return"boolean"==typeof i}(a)?function Kee(i,e,t,n){return En(e).pipe(nc(r=>LA(function Jee(i,e){return null!==i&&e&&e(new bee(i)),Et(!0)}(r.route.parent,n),function $ee(i,e){return null!==i&&e&&e(new Aee(i)),Et(!0)}(r.route,n),function tte(i,e,t){const n=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function jee(i){const e=i.routeConfig?i.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:i,guards:e}:null}(o)).filter(o=>null!==o).map(o=>G3(()=>Et(o.guards.map(l=>{const c=P_(o.node)??t,d=sf(l,c);return rc(function Qee(i){return i&&B_(i.canActivateChild)}(d)?d.canActivateChild(n,i):c.runInContext(()=>d(n,i))).pipe(ic())})).pipe(af())));return Et(s).pipe(af())}(i,r.path,t),function ete(i,e,t){const n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||0===n.length)return Et(!0);const r=n.map(s=>G3(()=>{const o=P_(e)??t,a=sf(s,o);return rc(function Hee(i){return i&&B_(i.canActivate)}(a)?a.canActivate(e,i):o.runInContext(()=>a(e,i))).pipe(ic())}));return Et(r).pipe(af())}(i,r.route,t))),ic(r=>!0!==r,!0))}(n,s,i,e):Et(a)),wt(a=>({...t,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),on(o=>{if(n.guardsResult=o.guardsResult,Ld(o.guardsResult))throw vN(0,o.guardsResult);const a=new fee(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),On(o=>!!o.guardsResult||(t.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),NS(o=>{if(o.guards.canActivateChecks.length)return Et(o).pipe(on(a=>{const l=new pee(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Gs(a=>{let l=!1;return Et(a).pipe(function wte(i,e){return xr(t=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=t;if(!r.length)return Et(t);let s=0;return En(r).pipe(nc(o=>function Cte(i,e,t,n){const r=i.routeConfig,s=i._resolve;return void 0!==r?.title&&!NN(r)&&(s[x_]=r.title),function Mte(i,e,t,n){const r=function Ete(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===r.length)return Et({});const s={};return En(r).pipe(xr(o=>function Ste(i,e,t,n){const r=P_(e)??n,s=sf(i,r);return rc(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(i[o],e,t,n).pipe(ic(),on(a=>{s[o]=a}))),gS(1),_S(s),ea(o=>BS(o)?Br:Jo(o)))}(s,i,e,n).pipe(wt(o=>(i._resolvedData=o,i.data=gN(i,t).resolve,r&&NN(r)&&(i.data[x_]=r.title),null)))}(o.route,n,i,e)),on(()=>s++),gS(1),xr(o=>s===r.length?Et(t):Br))})}(t.paramsInheritanceStrategy,this.environmentInjector),on({next:()=>l=!0,complete:()=>{l||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),on(a=>{const l=new mee(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),NS(o=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(on(d=>{l.component=d}),wt(()=>{})));for(const d of l.children)c.push(...a(d));return c};return pS(a(o.targetSnapshot.root)).pipe(FA(),hs(1))}),NS(()=>this.afterPreactivation()),wt(o=>{const a=function See(i,e,t){const n=I_(i,e._root,t?t._root:void 0);return new pN(n,e)}(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return n={...o,targetRouterState:a}}),on(o=>{t.currentUrlTree=o.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),t.routerState=o.targetRouterState,"deferred"===t.urlUpdateStrategy&&(o.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,o),t.browserUrlTree=o.urlAfterRedirects)}),((i,e,t)=>wt(n=>(new Oee(e,n.targetRouterState,n.currentRouterState,t).activate(i),n)))(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o)),on({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Bd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),OA(()=>{r||s||this.cancelNavigationTransition(n,"",1),this.currentNavigation?.id===n.id&&(this.currentNavigation=null)}),ea(o=>{if(s=!0,xN(o)){yN(o)||(t.navigated=!0,t.restoreHistory(n,!0));const a=new QA(n.id,this.urlSerializer.serialize(n.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),yN(o)){const l=t.urlHandlingStrategy.merge(o.url,t.rawUrlTree),c={skipLocationChange:n.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||VN(n.source)};t.scheduleNavigation(l,R_,null,c,{resolve:n.resolve,reject:n.reject,promise:n.promise})}else n.resolve(!1)}else{t.restoreHistory(n,!0);const a=new uN(n.id,this.urlSerializer.serialize(n.extractedUrl),o,n.targetSnapshot??void 0);this.events.next(a);try{n.resolve(t.errorHandler(o))}catch(l){n.reject(l)}}return Br}))}))}cancelNavigationTransition(t,n,r){const s=new QA(t.id,this.urlSerializer.serialize(t.extractedUrl),n,r);this.events.next(s),t.resolve(!1)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function VN(i){return i!==R_}let zN=(()=>{class i{buildTitle(t){let n,r=t.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===fi);return n}getResolvedTitleForRoute(t){return t.data[x_]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:function(){return Ut(Ite)},providedIn:"root"}),i})(),Ite=(()=>{class i extends zN{constructor(t){super(),this.title=t}updateTitle(t){const n=this.buildTitle(t);void 0!==n&&this.title.setTitle(n)}}return i.\u0275fac=function(t){return new(t||i)(xe(F3))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Dte=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:function(){return Ut(kte)},providedIn:"root"}),i})();class Pte{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let kte=(()=>{class i extends Pte{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=ce(i)))(n||i)}}(),i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const iy=new je("",{providedIn:"root",factory:()=>({})});let Bte=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:function(){return Ut(Fte)},providedIn:"root"}),i})(),Fte=(()=>{class i{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Ote(i){throw i}function Nte(i,e,t){return e.parse("/")}const jte={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ute={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Hs=(()=>{class i{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ut(_Z),this.isNgZoneEnabled=!1,this.options=Ut(iy,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Ote,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Nte,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ut(Bte),this.routeReuseStrategy=Ut(Dte),this.urlCreationStrategy=Ut(Cee),this.titleStrategy=Ut(zN),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Y3(Ut(lf,{optional:!0})??[]),this.navigationTransitions=Ut(ty),this.urlSerializer=Ut(C_),this.location=Ut(gA),this.isNgZoneEnabled=Ut(pt)instanceof pt&&pt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Pd,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=mN(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),R_,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const n="popstate"===t.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,n,t.state)},0)}))}navigateToSyncWithBrowser(t,n,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,n,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(LS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,n={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=n,c=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...s};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,t,d,c??null)}navigateByUrl(t,n={skipLocationChange:!1}){const r=Ld(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,R_,null,n)}navigate(t,n={skipLocationChange:!1}){return function Vte(i){for(let e=0;e<i.length;e++){if(null==i[e])throw new Ie(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let n;try{n=this.urlSerializer.parse(t)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return n}isActive(t,n){let r;if(r=!0===n?{...jte}:!1===n?{...Ute}:n,Ld(t))return K3(this.currentUrlTree,t,r);const s=this.parseUrl(t);return K3(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((n,r)=>{const s=t[r];return null!=s&&(n[r]=s),n},{})}scheduleNavigation(t,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c,d;return o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((u,h)=>{a=u,l=h}),d="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:d,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(u=>Promise.reject(u))}setBrowserUrl(t,n){const r=this.urlSerializer.serialize(t),s={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,n=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,n){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ny=(()=>{class i{constructor(t,n,r,s,o,a){this.router=t,this.route=n,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Ht;const l=o.nativeElement.tagName;this.isAnchorElement="A"===l||"AREA"===l,this.isAnchorElement?this.subscription=t.events.subscribe(c=>{c instanceof Bd&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=Jh(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=Jh(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=Jh(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,n,r,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||n||r||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function eL(i,e,t){return function I7(i,e){return"src"===e&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===e&&("base"===i||"link"===i)?Jk:$k}(e,t)(i)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,n){const r=this.renderer,s=this.el.nativeElement;null!==n?r.setAttribute(s,t,n):r.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return i.\u0275fac=function(t){return new(t||i)(P(Hs),P(Fd),jg("tabindex"),P(ul),P(zt),P(Dd))},i.\u0275dir=Oe({type:i,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,n){1&t&&xt("click",function(s){return n.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&fn("target",n.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Sr]}),i})();class HN{}let Hte=(()=>{class i{constructor(t,n,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(On(t=>t instanceof Bd),nc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,n){const r=[];for(const s of n){s.providers&&!s._injector&&(s._injector=sA(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return En(r).pipe(hh())}preloadConfig(t,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(t,n):Et(null);const s=r.pipe(xr(o=>null===o?Et(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return n.loadComponent&&!n._loadedComponent?En([s,this.loader.loadComponent(n)]).pipe(hh()):s})}}return i.\u0275fac=function(t){return new(t||i)(xe(Hs),xe(hO),xe(Aa),xe(HN),xe(jS))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const US=new je("");let QN=(()=>{class i{constructor(t,n,r,s,o={}){this.urlSerializer=t,this.transitions=n,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof CS?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Bd&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof hN&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,n){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new hN(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return i.\u0275fac=function(t){Kg()},i.\u0275prov=Ge({token:i,factory:i.\u0275fac}),i})();function Od(i,e){return{\u0275kind:i,\u0275providers:e}}function qN(){const i=Ut(ms);return e=>{const t=i.get($h);if(e!==t.components[0])return;const n=i.get(Hs),r=i.get(YN);1===i.get(zS)&&n.initialNavigation(),i.get(XN,null,jt.Optional)?.setUpPreloading(),i.get(US,null,jt.Optional)?.init(),n.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const YN=new je("",{factory:()=>new Ht}),zS=new je("",{providedIn:"root",factory:()=>1});const XN=new je("");function Xte(i){return Od(0,[{provide:XN,useExisting:Hte},{provide:HN,useExisting:i}])}const ZN=new je("ROUTER_FORROOT_GUARD"),Zte=[gA,{provide:C_,useClass:bS},Hs,D_,{provide:Fd,useFactory:function WN(i){return i.routerState.root},deps:[Hs]},jS,[]];function Kte(){return new vO("Router",Hs)}let KN=(()=>{class i{constructor(t){}static forRoot(t,n){return{ngModule:i,providers:[Zte,[],{provide:lf,multi:!0,useValue:t},{provide:ZN,useFactory:tie,deps:[[Hs,new cl,new Th]]},{provide:iy,useValue:n||{}},n?.useHash?{provide:Dd,useClass:sK}:{provide:Dd,useClass:zO},{provide:US,useFactory:()=>{const i=Ut(A$),e=Ut(pt),t=Ut(iy),n=Ut(ty),r=Ut(C_);return t.scrollOffset&&i.setOffset(t.scrollOffset),new QN(r,n,i,e,t)}},n?.preloadingStrategy?Xte(n.preloadingStrategy).\u0275providers:[],{provide:vO,multi:!0,useFactory:Kte},n?.initialNavigation?iie(n):[],[{provide:$N,useFactory:qN},{provide:uO,multi:!0,useExisting:$N}]]}}static forChild(t){return{ngModule:i,providers:[{provide:lf,multi:!0,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)(xe(ZN,8))},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[PS]}),i})();function tie(i){return"guarded"}function iie(i){return["disabled"===i.initialNavigation?Od(3,[{provide:cA,multi:!0,useFactory:()=>{const e=Ut(Hs);return()=>{e.setUpLocationChangeListener()}}},{provide:zS,useValue:2}]).\u0275providers:[],"enabledBlocking"===i.initialNavigation?Od(2,[{provide:zS,useValue:0},{provide:cA,multi:!0,deps:[ms],useFactory:e=>{const t=e.get(nK,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(Hs),o=e.get(YN);(function n(r){e.get(Hs).events.pipe(On(o=>o instanceof Bd||o instanceof QA||o instanceof uN),wt(o=>o instanceof Bd||o instanceof QA&&(0===o.code||1===o.code)&&null),On(o=>null!==o),hs(1)).subscribe(()=>{r()})})(()=>{r(!0)}),e.get(ty).afterPreactivation=()=>(r(!0),o.closed?Et(void 0):o),s.initialNavigation()}))}}]).\u0275providers:[]]}const $N=new je("");function JN(i,e,t,n,r,s,o){try{var a=i[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(n,r)}function is(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var s=i.apply(e,t);function o(l){JN(s,n,r,o,a,"next",l)}function a(l){JN(s,n,r,o,a,"throw",l)}o(void 0)})}}const ry="151",Qs={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},vl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},ej=0,GS=1,tj=2,rie=3,sie=0,HS=1,ij=2,df=3,Ia=0,zr=1,bs=2,oie=2,Xt=0,Da=1,uf=2,QS=3,WS=4,hf=5,vs=100,nj=101,rj=102,qS=103,YS=104,ff=200,N_=201,sj=202,oj=203,pf=204,j_=205,sy=206,aj=207,oy=208,lj=209,cj=210,dj=0,uj=1,hj=2,ay=3,fj=4,pj=5,mj=6,gj=7,U_=0,_j=1,bj=2,Pa=0,vj=1,Aj=2,yj=3,xj=4,wj=5,ly=300,sc=301,oc=302,mf=303,V_=304,gf=306,xo=1e3,mr=1001,_f=1002,Zt=1003,z_=1004,aie=1004,bf=1005,lie=1005,Ni=1006,cy=1007,cie=1007,Ws=1008,die=1008,Gr=1009,Cj=1010,Mj=1011,G_=1012,Ej=1013,ac=1014,Nn=1015,pn=1016,Sj=1017,Tj=1018,lc=1020,Rj=1021,Rn=1023,dy=1024,Ij=1025,cc=1026,dc=1027,Al=1028,Dj=1029,vf=1030,Pj=1031,kj=1033,Af=33776,uy=33777,H_=33778,yf=33779,xf=35840,Q_=35841,wf=35842,W_=35843,hy=36196,fy=37492,py=37496,my=37808,XS=37809,ZS=37810,KS=37811,$S=37812,JS=37813,eT=37814,tT=37815,iT=37816,nT=37817,rT=37818,sT=37819,oT=37820,aT=37821,q_=36492,Lj=36283,lT=36284,cT=36285,dT=36286,uT=2200,Bj=2201,Fj=2202,Cf=2300,Nd=2301,gy=2302,jd=2400,Ud=2401,Y_=2402,_y=2500,hT=2501,Oj=0,fT=1,by=2,qs=3e3,ci=3001,Nj=3200,X_=3201,uc=0,jj=1,uie="",Ys="srgb",Vd="srgb-linear",pT="display-p3",hie=0,vy=7680,fie=7681,pie=7682,mie=7683,gie=34055,_ie=34056,bie=5386,vie=512,Aie=513,yie=514,xie=515,wie=516,Cie=517,Mie=518,Uj=519,Z_=35044,Ay=35048,Eie=35040,Sie=35045,Tie=35049,Rie=35041,Iie=35046,Die=35050,Pie=35042,kie="100",mT="300 es",yy=1035;class ns{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const n=this._listeners[e.type];if(void 0!==n){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Hr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Vj=1234567;const zd=Math.PI/180,Mf=180/Math.PI;function Xs(){const i=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Hr[255&i]+Hr[i>>8&255]+Hr[i>>16&255]+Hr[i>>24&255]+"-"+Hr[255&e]+Hr[e>>8&255]+"-"+Hr[e>>16&15|64]+Hr[e>>24&255]+"-"+Hr[63&t|128]+Hr[t>>8&255]+"-"+Hr[t>>16&255]+Hr[t>>24&255]+Hr[255&n]+Hr[n>>8&255]+Hr[n>>16&255]+Hr[n>>24&255]).toLowerCase()}function jn(i,e,t){return Math.max(e,Math.min(t,i))}function gT(i,e){return(i%e+e)%e}function K_(i,e,t){return(1-t)*i+t*e}function _T(i){return 0==(i&i-1)&&0!==i}function zj(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function Gj(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function Zs(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function di(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}}const vt={DEG2RAD:zd,RAD2DEG:Mf,generateUUID:Xs,clamp:jn,euclideanModulo:gT,mapLinear:function Lie(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)},inverseLerp:function Bie(i,e,t){return i!==e?(t-i)/(e-i):0},lerp:K_,damp:function Fie(i,e,t,n){return K_(i,e,1-Math.exp(-t*n))},pingpong:function Oie(i,e=1){return e-Math.abs(gT(i,2*e)-e)},smoothstep:function Nie(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e))*i*(3-2*i)},smootherstep:function jie(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e))*i*i*(i*(6*i-15)+10)},randInt:function Uie(i,e){return i+Math.floor(Math.random()*(e-i+1))},randFloat:function Vie(i,e){return i+Math.random()*(e-i)},randFloatSpread:function zie(i){return i*(.5-Math.random())},seededRandom:function Gie(i){void 0!==i&&(Vj=i);let e=Vj+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function Hie(i){return i*zd},radToDeg:function Qie(i){return i*Mf},isPowerOfTwo:_T,ceilPowerOfTwo:zj,floorPowerOfTwo:Gj,setQuaternionFromProperEuler:function Wie(i,e,t,n,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+n)/2),d=o((e+n)/2),u=s((e-n)/2),h=o((e-n)/2),f=s((n-e)/2),m=o((n-e)/2);switch(r){case"XYX":i.set(a*d,l*u,l*h,a*c);break;case"YZY":i.set(l*h,a*d,l*u,a*c);break;case"ZXZ":i.set(l*u,l*h,a*d,a*c);break;case"XZX":i.set(a*d,l*m,l*f,a*c);break;case"YXY":i.set(l*f,a*d,l*m,a*c);break;case"ZYZ":i.set(l*m,l*f,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:di,denormalize:Zs};class pe{constructor(e=0,t=0){pe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(jn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class bi{constructor(){bi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,s,o,a,l,c){const d=this.elements;return d[0]=e,d[1]=r,d[2]=a,d[3]=t,d[4]=s,d[5]=l,d[6]=n,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],d=n[4],u=n[7],h=n[2],f=n[5],m=n[8],g=r[0],_=r[3],p=r[6],v=r[1],b=r[4],y=r[7],x=r[2],w=r[5],E=r[8];return s[0]=o*g+a*v+l*x,s[3]=o*_+a*b+l*w,s[6]=o*p+a*y+l*E,s[1]=c*g+d*v+u*x,s[4]=c*_+d*b+u*w,s[7]=c*p+d*y+u*E,s[2]=h*g+f*v+m*x,s[5]=h*_+f*b+m*w,s[8]=h*p+f*y+m*E,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return t*o*d-t*a*c-n*s*d+n*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],u=d*o-a*c,h=a*l-d*s,f=c*s-o*l,m=t*u+n*h+r*f;if(0===m)return this.set(0,0,0,0,0,0,0,0,0);const g=1/m;return e[0]=u*g,e[1]=(r*c-d*n)*g,e[2]=(a*n-r*o)*g,e[3]=h*g,e[4]=(d*t-r*l)*g,e[5]=(r*s-a*t)*g,e[6]=f*g,e[7]=(n*l-c*t)*g,e[8]=(o*t-n*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(bT.makeScale(e,t)),this}rotate(e){return this.premultiply(bT.makeRotation(-e)),this}translate(e,t){return this.premultiply(bT.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const bT=new bi;function Hj(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const qie={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ef(i,e){return new qie[i](e)}function $_(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function Sf(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function vT(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}const Yie=(new bi).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Xie=(new bi).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),$ie={[Vd]:i=>i,[Ys]:i=>i.convertSRGBToLinear(),[pT]:function Zie(i){return i.convertSRGBToLinear().applyMatrix3(Xie)}},Jie={[Vd]:i=>i,[Ys]:i=>i.convertLinearToSRGB(),[pT]:function Kie(i){return i.applyMatrix3(Yie).convertLinearToSRGB()}},As={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(i){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!i},get workingColorSpace(){return Vd},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,e,t){if(!1===this.enabled||e===t||!e||!t)return i;const n=$ie[e],r=Jie[t];if(void 0===n||void 0===r)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(n(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this.workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this.workingColorSpace)}};let Tf;class AT{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Tf&&(Tf=$_("canvas")),Tf.width=e.width,Tf.height=e.height;const n=Tf.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Tf}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=$_("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*Sf(s[o]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t[n]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Sf(t[n]/255)):Sf(t[n]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Gd{constructor(e=null){this.isSource=!0,this.uuid=Xs(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(yT(r[o].isDataTexture?r[o].image:r[o]))}else s=yT(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function yT(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?AT.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ene=0,An=(()=>{class i extends ns{constructor(t=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=mr,s=mr,o=Ni,a=Ws,l=Rn,c=Gr,d=i.DEFAULT_ANISOTROPY,u=qs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ene++}),this.uuid=Xs(),this.name="",this.source=new Gd(t),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=c,this.offset=new pe(0,0),this.repeat=new pe(1,1),this.center=new pe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new bi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const n=void 0===t||"string"==typeof t;if(!n&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==ly)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case xo:t.x=t.x-Math.floor(t.x);break;case mr:t.x=t.x<0?0:1;break;case _f:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case xo:t.y=t.y-Math.floor(t.y);break;case mr:t.y=t.y<0?0:1;break;case _f:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=ly,i.DEFAULT_ANISOTROPY=1,i})();class ei{constructor(e=0,t=0,n=0,r=1){ei.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,c=l[0],d=l[4],u=l[8],h=l[1],f=l[5],m=l[9],g=l[2],_=l[6],p=l[10];if(Math.abs(d-h)<.01&&Math.abs(u-g)<.01&&Math.abs(m-_)<.01){if(Math.abs(d+h)<.1&&Math.abs(u+g)<.1&&Math.abs(m+_)<.1&&Math.abs(c+f+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const b=(c+1)/2,y=(f+1)/2,x=(p+1)/2,w=(d+h)/4,E=(u+g)/4,S=(m+_)/4;return b>y&&b>x?b<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(b),r=w/n,s=E/n):y>x?y<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(y),n=w/r,s=S/r):x<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(x),n=E/s,r=S/s),this.set(n,r,s,t),this}let v=Math.sqrt((_-m)*(_-m)+(u-g)*(u-g)+(h-d)*(h-d));return Math.abs(v)<.001&&(v=1),this.x=(_-m)/v,this.y=(u-g)/v,this.z=(h-d)/v,this.w=Math.acos((c+f+p-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Gt extends ns{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ei(0,0,e,t),this.scissorTest=!1,this.viewport=new ei(0,0,e,t),this.texture=new An({width:e,height:t,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Ni,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Gd(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class J_ extends An{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Zt,this.minFilter=Zt,this.wrapR=mr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class tne extends Gt{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new J_(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class eb extends An{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Zt,this.minFilter=Zt,this.wrapR=mr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ine extends Gt{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new eb(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class nne extends Gt{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<n;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class wi{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,a){let l=n[r+0],c=n[r+1],d=n[r+2],u=n[r+3];const h=s[o+0],f=s[o+1],m=s[o+2],g=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=d,void(e[t+3]=u);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=m,void(e[t+3]=g);if(u!==g||l!==h||c!==f||d!==m){let _=1-a;const p=l*h+c*f+d*m+u*g,v=p>=0?1:-1,b=1-p*p;if(b>Number.EPSILON){const x=Math.sqrt(b),w=Math.atan2(x,p*v);_=Math.sin(_*w)/x,a=Math.sin(a*w)/x}const y=a*v;if(l=l*_+h*y,c=c*_+f*y,d=d*_+m*y,u=u*_+g*y,_===1-a){const x=1/Math.sqrt(l*l+c*c+d*d+u*u);l*=x,c*=x,d*=x,u*=x}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,s,o){const a=n[r],l=n[r+1],c=n[r+2],d=n[r+3],u=s[o],h=s[o+1],f=s[o+2],m=s[o+3];return e[t]=a*m+d*u+l*f-c*h,e[t+1]=l*m+d*h+c*u-a*f,e[t+2]=c*m+d*f+a*h-l*u,e[t+3]=d*m-a*u-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(n/2),d=a(r/2),u=a(s/2),h=l(n/2),f=l(r/2),m=l(s/2);switch(o){case"XYZ":this._x=h*d*u+c*f*m,this._y=c*f*u-h*d*m,this._z=c*d*m+h*f*u,this._w=c*d*u-h*f*m;break;case"YXZ":this._x=h*d*u+c*f*m,this._y=c*f*u-h*d*m,this._z=c*d*m-h*f*u,this._w=c*d*u+h*f*m;break;case"ZXY":this._x=h*d*u-c*f*m,this._y=c*f*u+h*d*m,this._z=c*d*m+h*f*u,this._w=c*d*u-h*f*m;break;case"ZYX":this._x=h*d*u-c*f*m,this._y=c*f*u+h*d*m,this._z=c*d*m-h*f*u,this._w=c*d*u+h*f*m;break;case"YZX":this._x=h*d*u+c*f*m,this._y=c*f*u+h*d*m,this._z=c*d*m-h*f*u,this._w=c*d*u-h*f*m;break;case"XZY":this._x=h*d*u-c*f*m,this._y=c*f*u-h*d*m,this._z=c*d*m+h*f*u,this._w=c*d*u+h*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],d=t[6],u=t[10],h=n+a+u;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(d-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(n>a&&n>u){const f=2*Math.sqrt(1+n-a-u);this._w=(d-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>u){const f=2*Math.sqrt(1+a-n-u);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+d)/f}else{const f=2*Math.sqrt(1+u-n-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+d)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(jn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,d=t._w;return this._x=n*d+o*a+r*c-s*l,this._y=r*d+o*l+s*a-n*c,this._z=s*d+o*c+n*l-r*a,this._w=o*d-n*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*n+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),u=Math.sin((1-t)*d)/c,h=Math.sin(t*d)/c;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=s*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(s),n*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class R{constructor(e=0,t=0,n=0){R.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Qj.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Qj.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*n,d=l*n+a*t-s*r,u=l*r+s*n-o*t,h=-s*t-o*n-a*r;return this.x=c*l+h*-s+d*-a-u*-o,this.y=d*l+h*-o+u*-s-c*-a,this.z=u*l+h*-a+c*-o-d*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return xT.copy(this).projectOnVector(e),this.sub(xT)}reflect(e){return this.sub(xT.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(jn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const xT=new R,Qj=new wi;class Ks{constructor(e=new R(1/0,1/0,1/0),t=new R(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(xl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(xl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=xl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),Rf.copy(e.boundingBox),Rf.applyMatrix4(e.matrixWorld),this.union(Rf);else{const r=e.geometry;if(void 0!==r)if(t&&void 0!==r.attributes&&void 0!==r.attributes.position){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)xl.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(xl)}else null===r.boundingBox&&r.computeBoundingBox(),Rf.copy(r.boundingBox),Rf.applyMatrix4(e.matrixWorld),this.union(Rf)}const n=e.children;for(let r=0,s=n.length;r<s;r++)this.expandByObject(n[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,xl),xl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(tb),xy.subVectors(this.max,tb),If.subVectors(e.a,tb),Df.subVectors(e.b,tb),Pf.subVectors(e.c,tb),hc.subVectors(Df,If),fc.subVectors(Pf,Df),Hd.subVectors(If,Pf);let t=[0,-hc.z,hc.y,0,-fc.z,fc.y,0,-Hd.z,Hd.y,hc.z,0,-hc.x,fc.z,0,-fc.x,Hd.z,0,-Hd.x,-hc.y,hc.x,0,-fc.y,fc.x,0,-Hd.y,Hd.x,0];return!(!wT(t,If,Df,Pf,xy)||(t=[1,0,0,0,1,0,0,0,1],!wT(t,If,Df,Pf,xy)))&&(wy.crossVectors(hc,fc),t=[wy.x,wy.y,wy.z],wT(t,If,Df,Pf,xy))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,xl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(xl).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(yl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),yl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),yl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),yl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),yl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),yl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),yl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),yl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(yl)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const yl=[new R,new R,new R,new R,new R,new R,new R,new R],xl=new R,Rf=new Ks,If=new R,Df=new R,Pf=new R,hc=new R,fc=new R,Hd=new R,tb=new R,xy=new R,wy=new R,Qd=new R;function wT(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){Qd.fromArray(i,s);const a=r.x*Math.abs(Qd.x)+r.y*Math.abs(Qd.y)+r.z*Math.abs(Qd.z),l=e.dot(Qd),c=t.dot(Qd),d=n.dot(Qd);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const rne=new Ks,ib=new R,CT=new R;class wo{constructor(e=new R,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):rne.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ib.subVectors(e,this.center);const t=ib.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=.5*(n-this.radius);this.center.addScaledVector(ib,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(CT.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ib.copy(e.center).add(CT)),this.expandByPoint(ib.copy(e.center).sub(CT))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const wl=new R,MT=new R,Cy=new R,pc=new R,ET=new R,My=new R,ST=new R;class nb{constructor(e=new R,t=new R(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,wl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=wl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(wl.copy(this.origin).addScaledVector(this.direction,t),wl.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){MT.copy(e).add(t).multiplyScalar(.5),Cy.copy(t).sub(e).normalize(),pc.copy(this.origin).sub(MT);const s=.5*e.distanceTo(t),o=-this.direction.dot(Cy),a=pc.dot(this.direction),l=-pc.dot(Cy),c=pc.lengthSq(),d=Math.abs(1-o*o);let u,h,f,m;if(d>0)if(u=o*l-a,h=o*a-l,m=s*d,u>=0)if(h>=-m)if(h<=m){const g=1/d;u*=g,h*=g,f=u*(u+o*h+2*a)+h*(o*u+h+2*l)+c}else h=s,u=Math.max(0,-(o*h+a)),f=-u*u+h*(h+2*l)+c;else h=-s,u=Math.max(0,-(o*h+a)),f=-u*u+h*(h+2*l)+c;else h<=-m?(u=Math.max(0,-(-o*s+a)),h=u>0?-s:Math.min(Math.max(-s,-l),s),f=-u*u+h*(h+2*l)+c):h<=m?(u=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(u=Math.max(0,-(o*s+a)),h=u>0?s:Math.min(Math.max(-s,-l),s),f=-u*u+h*(h+2*l)+c);else h=o>0?-s:s,u=Math.max(0,-(o*h+a)),f=-u*u+h*(h+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(MT).addScaledVector(Cy,h),f}intersectSphere(e,t){wl.subVectors(e.center,this.origin);const n=wl.dot(this.direction),r=wl.dot(wl)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,a,l;const c=1/this.direction.x,d=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),d>=0?(s=(e.min.y-h.y)*d,o=(e.max.y-h.y)*d):(s=(e.max.y-h.y)*d,o=(e.min.y-h.y)*d),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),u>=0?(a=(e.min.z-h.z)*u,l=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,l=(e.min.z-h.z)*u),n>l||a>r)||((a>n||n!=n)&&(n=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return null!==this.intersectBox(e,wl)}intersectTriangle(e,t,n,r,s){ET.subVectors(t,e),My.subVectors(n,e),ST.crossVectors(ET,My);let a,o=this.direction.dot(ST);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}pc.subVectors(this.origin,e);const l=a*this.direction.dot(My.crossVectors(pc,My));if(l<0)return null;const c=a*this.direction.dot(ET.cross(pc));if(c<0||l+c>o)return null;const d=-a*pc.dot(ST);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class We{constructor(){We.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,s,o,a,l,c,d,u,h,f,m,g,_){const p=this.elements;return p[0]=e,p[4]=t,p[8]=n,p[12]=r,p[1]=s,p[5]=o,p[9]=a,p[13]=l,p[2]=c,p[6]=d,p[10]=u,p[14]=h,p[3]=f,p[7]=m,p[11]=g,p[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new We).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/kf.setFromMatrixColumn(e,0).length(),s=1/kf.setFromMatrixColumn(e,1).length(),o=1/kf.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),c=Math.sin(r),d=Math.cos(s),u=Math.sin(s);if("XYZ"===e.order){const h=o*d,f=o*u,m=a*d,g=a*u;t[0]=l*d,t[4]=-l*u,t[8]=c,t[1]=f+m*c,t[5]=h-g*c,t[9]=-a*l,t[2]=g-h*c,t[6]=m+f*c,t[10]=o*l}else if("YXZ"===e.order){const h=l*d,f=l*u,m=c*d,g=c*u;t[0]=h+g*a,t[4]=m*a-f,t[8]=o*c,t[1]=o*u,t[5]=o*d,t[9]=-a,t[2]=f*a-m,t[6]=g+h*a,t[10]=o*l}else if("ZXY"===e.order){const h=l*d,f=l*u,m=c*d,g=c*u;t[0]=h-g*a,t[4]=-o*u,t[8]=m+f*a,t[1]=f+m*a,t[5]=o*d,t[9]=g-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const h=o*d,f=o*u,m=a*d,g=a*u;t[0]=l*d,t[4]=m*c-f,t[8]=h*c+g,t[1]=l*u,t[5]=g*c+h,t[9]=f*c-m,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const h=o*l,f=o*c,m=a*l,g=a*c;t[0]=l*d,t[4]=g-h*u,t[8]=m*u+f,t[1]=u,t[5]=o*d,t[9]=-a*d,t[2]=-c*d,t[6]=f*u+m,t[10]=h-g*u}else if("XZY"===e.order){const h=o*l,f=o*c,m=a*l,g=a*c;t[0]=l*d,t[4]=-u,t[8]=c*d,t[1]=h*u+g,t[5]=o*d,t[9]=f*u-m,t[2]=m*u-f,t[6]=a*d,t[10]=g*u+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(sne,e,one)}lookAt(e,t,n){const r=this.elements;return $s.subVectors(e,t),0===$s.lengthSq()&&($s.z=1),$s.normalize(),mc.crossVectors(n,$s),0===mc.lengthSq()&&(1===Math.abs(n.z)?$s.x+=1e-4:$s.z+=1e-4,$s.normalize(),mc.crossVectors(n,$s)),mc.normalize(),Ey.crossVectors($s,mc),r[0]=mc.x,r[4]=Ey.x,r[8]=$s.x,r[1]=mc.y,r[5]=Ey.y,r[9]=$s.y,r[2]=mc.z,r[6]=Ey.z,r[10]=$s.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],d=n[1],u=n[5],h=n[9],f=n[13],m=n[2],g=n[6],_=n[10],p=n[14],v=n[3],b=n[7],y=n[11],x=n[15],w=r[0],E=r[4],S=r[8],C=r[12],T=r[1],k=r[5],U=r[9],B=r[13],j=r[2],H=r[6],L=r[10],V=r[14],O=r[3],Q=r[7],re=r[11],_e=r[15];return s[0]=o*w+a*T+l*j+c*O,s[4]=o*E+a*k+l*H+c*Q,s[8]=o*S+a*U+l*L+c*re,s[12]=o*C+a*B+l*V+c*_e,s[1]=d*w+u*T+h*j+f*O,s[5]=d*E+u*k+h*H+f*Q,s[9]=d*S+u*U+h*L+f*re,s[13]=d*C+u*B+h*V+f*_e,s[2]=m*w+g*T+_*j+p*O,s[6]=m*E+g*k+_*H+p*Q,s[10]=m*S+g*U+_*L+p*re,s[14]=m*C+g*B+_*V+p*_e,s[3]=v*w+b*T+y*j+x*O,s[7]=v*E+b*k+y*H+x*Q,s[11]=v*S+b*U+y*L+x*re,s[15]=v*C+b*B+y*V+x*_e,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],d=e[2],u=e[6],h=e[10],f=e[14];return e[3]*(+s*l*u-r*c*u-s*a*h+n*c*h+r*a*f-n*l*f)+e[7]*(+t*l*f-t*c*h+s*o*h-r*o*f+r*c*d-s*l*d)+e[11]*(+t*c*u-t*a*f-s*o*u+n*o*f+s*a*d-n*c*d)+e[15]*(-r*a*d-t*l*u+t*a*h+r*o*u-n*o*h+n*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],u=e[9],h=e[10],f=e[11],m=e[12],g=e[13],_=e[14],p=e[15],v=u*_*c-g*h*c+g*l*f-a*_*f-u*l*p+a*h*p,b=m*h*c-d*_*c-m*l*f+o*_*f+d*l*p-o*h*p,y=d*g*c-m*u*c+m*a*f-o*g*f-d*a*p+o*u*p,x=m*u*l-d*g*l-m*a*h+o*g*h+d*a*_-o*u*_,w=t*v+n*b+r*y+s*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/w;return e[0]=v*E,e[1]=(g*h*s-u*_*s-g*r*f+n*_*f+u*r*p-n*h*p)*E,e[2]=(a*_*s-g*l*s+g*r*c-n*_*c-a*r*p+n*l*p)*E,e[3]=(u*l*s-a*h*s-u*r*c+n*h*c+a*r*f-n*l*f)*E,e[4]=b*E,e[5]=(d*_*s-m*h*s+m*r*f-t*_*f-d*r*p+t*h*p)*E,e[6]=(m*l*s-o*_*s-m*r*c+t*_*c+o*r*p-t*l*p)*E,e[7]=(o*h*s-d*l*s+d*r*c-t*h*c-o*r*f+t*l*f)*E,e[8]=y*E,e[9]=(m*u*s-d*g*s-m*n*f+t*g*f+d*n*p-t*u*p)*E,e[10]=(o*g*s-m*a*s+m*n*c-t*g*c-o*n*p+t*a*p)*E,e[11]=(d*a*s-o*u*s-d*n*c+t*u*c+o*n*f-t*a*f)*E,e[12]=x*E,e[13]=(d*g*r-m*u*r+m*n*h-t*g*h-d*n*_+t*u*_)*E,e[14]=(m*a*r-o*g*r-m*n*l+t*g*l+o*n*_-t*a*_)*E,e[15]=(o*u*r-d*a*r+d*n*l-t*u*l-o*n*h+t*a*h)*E,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,a=e.y,l=e.z,c=s*o,d=s*a;return this.set(c*o+n,c*a-r*l,c*l+r*a,0,c*a+r*l,d*a+n,d*l-r*o,0,c*l-r*a,d*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,d=o+o,u=a+a,h=s*c,f=s*d,m=s*u,g=o*d,_=o*u,p=a*u,v=l*c,b=l*d,y=l*u,x=n.x,w=n.y,E=n.z;return r[0]=(1-(g+p))*x,r[1]=(f+y)*x,r[2]=(m-b)*x,r[3]=0,r[4]=(f-y)*w,r[5]=(1-(h+p))*w,r[6]=(_+v)*w,r[7]=0,r[8]=(m+b)*E,r[9]=(_-v)*E,r[10]=(1-(h+g))*E,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=kf.set(r[0],r[1],r[2]).length();const o=kf.set(r[4],r[5],r[6]).length(),a=kf.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ta.copy(this);const c=1/s,d=1/o,u=1/a;return ta.elements[0]*=c,ta.elements[1]*=c,ta.elements[2]*=c,ta.elements[4]*=d,ta.elements[5]*=d,ta.elements[6]*=d,ta.elements[8]*=u,ta.elements[9]*=u,ta.elements[10]*=u,t.setFromRotationMatrix(ta),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,r,s,o){const a=this.elements,c=2*s/(n-r),d=(t+e)/(t-e),u=(n+r)/(n-r),h=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=d,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,s,o){const a=this.elements,l=1/(t-e),c=1/(n-r),d=1/(o-s),u=(t+e)*l,h=(n+r)*c,f=(o+s)*d;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*d,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const kf=new R,ta=new We,sne=new R(0,0,0),one=new R(1,1,1),mc=new R,Ey=new R,$s=new R,Wj=new We,qj=new wi;let Js=(()=>{class i{constructor(t=0,n=0,r=0,s=i.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,r,s=this._order){return this._x=t,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],d=s[5],u=s[9],h=s[2],f=s[6],m=s[10];switch(n){case"XYZ":this._y=Math.asin(jn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,d),this._z=0);break;case"YXZ":this._x=Math.asin(-jn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(l,m),this._z=Math.atan2(c,d)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(jn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-jn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,m),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin(jn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,d),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(l,m));break;case"XZY":this._z=Math.asin(-jn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,d),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,n,r){return Wj.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Wj,n,r)}setFromVector3(t,n=this._order){return this.set(t.x,t.y,t.z,n)}reorder(t){return qj.setFromEuler(this),this.setFromQuaternion(qj,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return i.DEFAULT_ORDER="XYZ",i})();class Sy{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let ane=0;const Yj=new R,Lf=new wi,Cl=new We,Ty=new R,rb=new R,lne=new R,cne=new wi,Xj=new R(1,0,0),Zj=new R(0,1,0),Kj=new R(0,0,1),dne={type:"added"},$j={type:"removed"};let pi=(()=>{class i extends ns{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ane++}),this.uuid=Xs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DEFAULT_UP.clone();const t=new R,n=new Js,r=new wi,s=new R(1,1,1);n._onChange(function o(){r.setFromEuler(n,!1)}),r._onChange(function a(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new We},normalMatrix:{value:new bi}}),this.matrix=new We,this.matrixWorld=new We,this.matrixAutoUpdate=i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Sy,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,n){this.quaternion.setFromAxisAngle(t,n)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,n){return Lf.setFromAxisAngle(t,n),this.quaternion.multiply(Lf),this}rotateOnWorldAxis(t,n){return Lf.setFromAxisAngle(t,n),this.quaternion.premultiply(Lf),this}rotateX(t){return this.rotateOnAxis(Xj,t)}rotateY(t){return this.rotateOnAxis(Zj,t)}rotateZ(t){return this.rotateOnAxis(Kj,t)}translateOnAxis(t,n){return Yj.copy(t).applyQuaternion(this.quaternion),this.position.add(Yj.multiplyScalar(n)),this}translateX(t){return this.translateOnAxis(Xj,t)}translateY(t){return this.translateOnAxis(Zj,t)}translateZ(t){return this.translateOnAxis(Kj,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Cl.copy(this.matrixWorld).invert())}lookAt(t,n,r){t.isVector3?Ty.copy(t):Ty.set(t,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),rb.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Cl.lookAt(rb,Ty,this.up):Cl.lookAt(Ty,rb,this.up),this.quaternion.setFromRotationMatrix(Cl),s&&(Cl.extractRotation(s.matrixWorld),Lf.setFromRotationMatrix(Cl),this.quaternion.premultiply(Lf.invert()))}add(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(dne)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent($j)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const n=this.children[t];n.parent=null,n.dispatchEvent($j)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Cl.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Cl.multiply(t.parent.matrixWorld)),t.applyMatrix4(Cl),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,n){if(this[t]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,n);if(void 0!==a)return a}}getObjectsByProperty(t,n){let r=[];this[t]===n&&r.push(this);for(let s=0,o=this.children.length;s<o;s++){const a=this.children[s].getObjectsByProperty(t,n);a.length>0&&(r=r.concat(a))}return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rb,t,lne),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rb,cne,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(t){t(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(t)}traverseAncestors(t){const n=this.parent;null!==n&&(t(n),n.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++){const o=n[r];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,n){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===n){const s=this.children;for(let o=0,a=s.length;o<a;o++){const l=s[o];!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!1,!0)}}}toJSON(t){const n=void 0===t||"string"==typeof t,r={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let d=0,u=c.length;d<u;d++)o(t.shapes,c[d]);else o(t.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,d=this.material.length;c<d;c++)l.push(o(t.materials,this.material[c]));s.material=l}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(t.animations,this.animations[l]))}if(n){const l=a(t.geometries),c=a(t.materials),d=a(t.textures),u=a(t.images),h=a(t.shapes),f=a(t.skeletons),m=a(t.animations),g=a(t.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),d.length>0&&(r.textures=d),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),m.length>0&&(r.animations=m),g.length>0&&(r.nodes=g)}return r.object=s,r;function a(l){const c=[];for(const d in l){const u=l[d];delete u.metadata,c.push(u)}return c}}clone(t){return(new this.constructor).copy(this,t)}copy(t,n=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===n)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return i.DEFAULT_UP=new R(0,1,0),i.DEFAULT_MATRIX_AUTO_UPDATE=!0,i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,i})();const ia=new R,Ml=new R,TT=new R,El=new R,Bf=new R,Ff=new R,Jj=new R,RT=new R,IT=new R,DT=new R;let Ry=!1;class rs{constructor(e=new R,t=new R,n=new R){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),ia.subVectors(e,t),r.cross(ia);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){ia.subVectors(r,t),Ml.subVectors(n,t),TT.subVectors(e,t);const o=ia.dot(ia),a=ia.dot(Ml),l=ia.dot(TT),c=Ml.dot(Ml),d=Ml.dot(TT),u=o*c-a*a;if(0===u)return s.set(-2,-1,-1);const h=1/u,f=(c*l-a*d)*h,m=(o*d-a*l)*h;return s.set(1-f-m,m,f)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,El),El.x>=0&&El.y>=0&&El.x+El.y<=1}static getUV(e,t,n,r,s,o,a,l){return!1===Ry&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Ry=!0),this.getInterpolation(e,t,n,r,s,o,a,l)}static getInterpolation(e,t,n,r,s,o,a,l){return this.getBarycoord(e,t,n,r,El),l.setScalar(0),l.addScaledVector(s,El.x),l.addScaledVector(o,El.y),l.addScaledVector(a,El.z),l}static isFrontFacing(e,t,n,r){return ia.subVectors(n,t),Ml.subVectors(e,t),ia.cross(Ml).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ia.subVectors(this.c,this.b),Ml.subVectors(this.a,this.b),.5*ia.cross(Ml).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return rs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return rs.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,s){return!1===Ry&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Ry=!0),rs.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}getInterpolation(e,t,n,r,s){return rs.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return rs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return rs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,a;Bf.subVectors(r,n),Ff.subVectors(s,n),RT.subVectors(e,n);const l=Bf.dot(RT),c=Ff.dot(RT);if(l<=0&&c<=0)return t.copy(n);IT.subVectors(e,r);const d=Bf.dot(IT),u=Ff.dot(IT);if(d>=0&&u<=d)return t.copy(r);const h=l*u-d*c;if(h<=0&&l>=0&&d<=0)return o=l/(l-d),t.copy(n).addScaledVector(Bf,o);DT.subVectors(e,s);const f=Bf.dot(DT),m=Ff.dot(DT);if(m>=0&&f<=m)return t.copy(s);const g=f*c-l*m;if(g<=0&&c>=0&&m<=0)return a=c/(c-m),t.copy(n).addScaledVector(Ff,a);const _=d*m-f*u;if(_<=0&&u-d>=0&&f-m>=0)return Jj.subVectors(s,r),a=(u-d)/(u-d+(f-m)),t.copy(r).addScaledVector(Jj,a);const p=1/(_+g+h);return o=g*p,a=h*p,t.copy(n).addScaledVector(Bf,o).addScaledVector(Ff,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let une=0;class Un extends ns{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:une++}),this.uuid=Xs(),this.name="",this.type="Material",this.blending=Da,this.side=Ia,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=pf,this.blendDst=j_,this.blendEquation=vs,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ay,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Uj,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=vy,this.stencilZFail=vy,this.stencilZPass=vy,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Da&&(n.blending=this.blending),this.side!==Ia&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const eU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},na={h:0,s:0,l:0},Iy={h:0,s:0,l:0};function PT(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+6*(e-i)*t:t<.5?e:t<2/3?i+6*(e-i)*(2/3-t):i}class Be{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ys){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,As.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=As.workingColorSpace){return this.r=e,this.g=t,this.b=n,As.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=As.workingColorSpace){if(e=gT(e,1),t=jn(t,0,1),n=jn(n,0,1),0===t)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=PT(o,s,e+1/3),this.g=PT(o,s,e),this.b=PT(o,s,e-1/3)}return As.toWorkingColorSpace(this,r),this}setStyle(e,t=Ys){function n(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,As.toWorkingColorSpace(this,t),n(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,As.toWorkingColorSpace(this,t),n(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseFloat(s[2])/100,d=parseFloat(s[3])/100;return n(s[4]),this.setHSL(l,c,d,t)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(6===o)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ys){const n=eU[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Sf(e.r),this.g=Sf(e.g),this.b=Sf(e.b),this}copyLinearToSRGB(e){return this.r=vT(e.r),this.g=vT(e.g),this.b=vT(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ys){return As.fromWorkingColorSpace(Qr.copy(this),e),jn(255*Qr.r,0,255)<<16^jn(255*Qr.g,0,255)<<8^jn(255*Qr.b,0,255)<<0}getHexString(e=Ys){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=As.workingColorSpace){As.fromWorkingColorSpace(Qr.copy(this),t);const n=Qr.r,r=Qr.g,s=Qr.b,o=Math.max(n,r,s),a=Math.min(n,r,s);let l,c;const d=(a+o)/2;if(a===o)l=0,c=0;else{const u=o-a;switch(c=d<=.5?u/(o+a):u/(2-o-a),o){case n:l=(r-s)/u+(r<s?6:0);break;case r:l=(s-n)/u+2;break;case s:l=(n-r)/u+4}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,t=As.workingColorSpace){return As.fromWorkingColorSpace(Qr.copy(this),t),e.r=Qr.r,e.g=Qr.g,e.b=Qr.b,e}getStyle(e=Ys){As.fromWorkingColorSpace(Qr.copy(this),e);const t=Qr.r,n=Qr.g,r=Qr.b;return e!==Ys?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${255*t|0},${255*n|0},${255*r|0})`}offsetHSL(e,t,n){return this.getHSL(na),na.h+=e,na.s+=t,na.l+=n,this.setHSL(na.h,na.s,na.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(na),e.getHSL(Iy);const n=K_(na.h,Iy.h,t),r=K_(na.s,Iy.s,t),s=K_(na.l,Iy.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Qr=new Be;Be.NAMES=eU;class Xn extends Un{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Be(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=U_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Sl=hne();function hne(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(n[l]=0,n[256|l]=32768,r[l]=24,r[256|l]=24):c<-14?(n[l]=1024>>-c-14,n[256|l]=1024>>-c-14|32768,r[l]=-c-1,r[256|l]=-c-1):c<=15?(n[l]=c+15<<10,n[256|l]=c+15<<10|32768,r[l]=13,r[256|l]=13):c<128?(n[l]=31744,n[256|l]=64512,r[l]=24,r[256|l]=24):(n[l]=31744,n[256|l]=64512,r[l]=13,r[256|l]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,d=0;for(;!(8388608&c);)c<<=1,d-=8388608;c&=-8388609,d+=947912704,s[l]=c|d}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function ys(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=jn(i,-65504,65504),Sl.floatView[0]=i;const e=Sl.uint32View[0],t=e>>23&511;return Sl.baseTable[t]+((8388607&e)>>Sl.shiftTable[t])}function sb(i){const e=i>>10;return Sl.uint32View[0]=Sl.mantissaTable[Sl.offsetTable[e]+(1023&i)]+Sl.exponentTable[e],Sl.floatView[0]}const ss={toHalfFloat:ys,fromHalfFloat:sb},nr=new R,Dy=new pe;class Ci{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=Z_,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Dy.fromBufferAttribute(this,t),Dy.applyMatrix3(e),this.setXY(t,Dy.x,Dy.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)nr.fromBufferAttribute(this,t),nr.applyMatrix3(e),this.setXYZ(t,nr.x,nr.y,nr.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)nr.fromBufferAttribute(this,t),nr.applyMatrix4(e),this.setXYZ(t,nr.x,nr.y,nr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)nr.fromBufferAttribute(this,t),nr.applyNormalMatrix(e),this.setXYZ(t,nr.x,nr.y,nr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)nr.fromBufferAttribute(this,t),nr.transformDirection(e),this.setXYZ(t,nr.x,nr.y,nr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Zs(t,this.array)),t}setX(e,t){return this.normalized&&(t=di(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Zs(t,this.array)),t}setY(e,t){return this.normalized&&(t=di(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Zs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=di(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Zs(t,this.array)),t}setW(e,t){return this.normalized&&(t=di(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=di(t,this.array),n=di(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=di(t,this.array),n=di(n,this.array),r=di(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=di(t,this.array),n=di(n,this.array),r=di(r,this.array),s=di(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Z_&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class fne extends Ci{constructor(e,t,n){super(new Int8Array(e),t,n)}}class pne extends Ci{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class mne extends Ci{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class gne extends Ci{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Py extends Ci{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class _ne extends Ci{constructor(e,t,n){super(new Int32Array(e),t,n)}}class ky extends Ci{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class bne extends Ci{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=sb(this.array[e*this.itemSize]);return this.normalized&&(t=Zs(t,this.array)),t}setX(e,t){return this.normalized&&(t=di(t,this.array)),this.array[e*this.itemSize]=ys(t),this}getY(e){let t=sb(this.array[e*this.itemSize+1]);return this.normalized&&(t=Zs(t,this.array)),t}setY(e,t){return this.normalized&&(t=di(t,this.array)),this.array[e*this.itemSize+1]=ys(t),this}getZ(e){let t=sb(this.array[e*this.itemSize+2]);return this.normalized&&(t=Zs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=di(t,this.array)),this.array[e*this.itemSize+2]=ys(t),this}getW(e){let t=sb(this.array[e*this.itemSize+3]);return this.normalized&&(t=Zs(t,this.array)),t}setW(e,t){return this.normalized&&(t=di(t,this.array)),this.array[e*this.itemSize+3]=ys(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=di(t,this.array),n=di(n,this.array)),this.array[e+0]=ys(t),this.array[e+1]=ys(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=di(t,this.array),n=di(n,this.array),r=di(r,this.array)),this.array[e+0]=ys(t),this.array[e+1]=ys(n),this.array[e+2]=ys(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=di(t,this.array),n=di(n,this.array),r=di(r,this.array),s=di(s,this.array)),this.array[e+0]=ys(t),this.array[e+1]=ys(n),this.array[e+2]=ys(r),this.array[e+3]=ys(s),this}}class Ze extends Ci{constructor(e,t,n){super(new Float32Array(e),t,n)}}class vne extends Ci{constructor(e,t,n){super(new Float64Array(e),t,n)}}let Ane=0;const Co=new We,kT=new pi,Of=new R,eo=new Ks,ob=new Ks,Cr=new R;class Mt extends ns{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ane++}),this.uuid=Xs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(Hj(e)?ky:Py)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new bi).getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Co.makeRotationFromQuaternion(e),this.applyMatrix4(Co),this}rotateX(e){return Co.makeRotationX(e),this.applyMatrix4(Co),this}rotateY(e){return Co.makeRotationY(e),this.applyMatrix4(Co),this}rotateZ(e){return Co.makeRotationZ(e),this.applyMatrix4(Co),this}translate(e,t,n){return Co.makeTranslation(e,t,n),this.applyMatrix4(Co),this}scale(e,t,n){return Co.makeScale(e,t,n),this.applyMatrix4(Co),this}lookAt(e){return kT.lookAt(e),kT.updateMatrix(),this.applyMatrix4(kT.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Of).negate(),this.translate(Of.x,Of.y,Of.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ze(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ks);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new R(-1/0,-1/0,-1/0),new R(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++)eo.setFromBufferAttribute(t[n]),this.morphTargetsRelative?(Cr.addVectors(this.boundingBox.min,eo.min),this.boundingBox.expandByPoint(Cr),Cr.addVectors(this.boundingBox.max,eo.max),this.boundingBox.expandByPoint(Cr)):(this.boundingBox.expandByPoint(eo.min),this.boundingBox.expandByPoint(eo.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new wo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new R,1/0);if(e){const n=this.boundingSphere.center;if(eo.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)ob.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Cr.addVectors(eo.min,ob.min),eo.expandByPoint(Cr),Cr.addVectors(eo.max,ob.max),eo.expandByPoint(Cr)):(eo.expandByPoint(ob.min),eo.expandByPoint(ob.max));eo.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)Cr.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(Cr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)Cr.fromBufferAttribute(a,c),l&&(Of.fromBufferAttribute(e,c),Cr.add(Of)),r=Math.max(r,n.distanceToSquared(Cr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ci(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],d=[];for(let T=0;T<a;T++)c[T]=new R,d[T]=new R;const u=new R,h=new R,f=new R,m=new pe,g=new pe,_=new pe,p=new R,v=new R;function b(T,k,U){u.fromArray(r,3*T),h.fromArray(r,3*k),f.fromArray(r,3*U),m.fromArray(o,2*T),g.fromArray(o,2*k),_.fromArray(o,2*U),h.sub(u),f.sub(u),g.sub(m),_.sub(m);const B=1/(g.x*_.y-_.x*g.y);isFinite(B)&&(p.copy(h).multiplyScalar(_.y).addScaledVector(f,-g.y).multiplyScalar(B),v.copy(f).multiplyScalar(g.x).addScaledVector(h,-_.x).multiplyScalar(B),c[T].add(p),c[k].add(p),c[U].add(p),d[T].add(v),d[k].add(v),d[U].add(v))}let y=this.groups;0===y.length&&(y=[{start:0,count:n.length}]);for(let T=0,k=y.length;T<k;++T){const U=y[T],B=U.start;for(let H=B,L=B+U.count;H<L;H+=3)b(n[H+0],n[H+1],n[H+2])}const x=new R,w=new R,E=new R,S=new R;function C(T){E.fromArray(s,3*T),S.copy(E);const k=c[T];x.copy(k),x.sub(E.multiplyScalar(E.dot(k))).normalize(),w.crossVectors(S,k);const B=w.dot(d[T])<0?-1:1;l[4*T]=x.x,l[4*T+1]=x.y,l[4*T+2]=x.z,l[4*T+3]=B}for(let T=0,k=y.length;T<k;++T){const U=y[T],B=U.start;for(let H=B,L=B+U.count;H<L;H+=3)C(n[H+0]),C(n[H+1]),C(n[H+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Ci(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let h=0,f=n.count;h<f;h++)n.setXYZ(h,0,0,0);const r=new R,s=new R,o=new R,a=new R,l=new R,c=new R,d=new R,u=new R;if(e)for(let h=0,f=e.count;h<f;h+=3){const m=e.getX(h+0),g=e.getX(h+1),_=e.getX(h+2);r.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),o.fromBufferAttribute(t,_),d.subVectors(o,s),u.subVectors(r,s),d.cross(u),a.fromBufferAttribute(n,m),l.fromBufferAttribute(n,g),c.fromBufferAttribute(n,_),a.add(d),l.add(d),c.add(d),n.setXYZ(m,a.x,a.y,a.z),n.setXYZ(g,l.x,l.y,l.z),n.setXYZ(_,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),d.subVectors(o,s),u.subVectors(r,s),d.cross(u),n.setXYZ(h+0,d.x,d.y,d.z),n.setXYZ(h+1,d.x,d.y,d.z),n.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Cr.fromBufferAttribute(e,t),Cr.normalize(),e.setXYZ(t,Cr.x,Cr.y,Cr.z)}toNonIndexed(){function e(a,l){const c=a.array,d=a.itemSize,u=a.normalized,h=new c.constructor(l.length*d);let f=0,m=0;for(let g=0,_=l.length;g<_;g++){f=a.isInterleavedBufferAttribute?l[g]*a.data.stride+a.offset:l[g]*d;for(let p=0;p<d;p++)h[m++]=c[f++]}return new Ci(h,d,u)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Mt,n=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],n);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let d=0,u=c.length;d<u;d++){const f=e(c[d],n);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n)e.data.attributes[l]=n[l].toJSON(e.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let u=0,h=c.length;u<h;u++)d.push(c[u].toJSON(e.data));d.length>0&&(r[l]=d,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const s=e.morphAttributes;for(const c in s){const d=[],u=s[c];for(let h=0,f=u.length;h<f;h++)d.push(u[h].clone(t));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,d=o.length;c<d;c++){const u=o[c];this.addGroup(u.start,u.count,u.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const tU=new We,ka=new nb,Ly=new wo,iU=new R,Nf=new R,jf=new R,Uf=new R,LT=new R,By=new R,Fy=new pe,Oy=new pe,Ny=new pe,nU=new R,rU=new R,sU=new R,jy=new R,Uy=new R;class nt extends pi{constructor(e=new Mt,t=new Xn){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const n=this.geometry,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(n.attributes.position,e);const a=this.morphTargetInfluences;if(s&&a){By.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const d=a[l];0!==d&&(LT.fromBufferAttribute(s[l],e),By.addScaledVector(o?LT:LT.sub(t),d))}t.add(By)}return this.isSkinnedMesh&&this.applyBoneTransform(e,t),t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===n.boundingSphere&&n.computeBoundingSphere(),Ly.copy(n.boundingSphere),Ly.applyMatrix4(s),ka.copy(e.ray).recast(e.near),!1===Ly.containsPoint(ka.origin)&&(null===ka.intersectSphere(Ly,iU)||ka.origin.distanceToSquared(iU)>(e.far-e.near)**2))||(tU.copy(s).invert(),ka.copy(e.ray).applyMatrix4(tU),null!==n.boundingBox&&!1===ka.intersectsBox(n.boundingBox)))return;let o;const a=n.index,l=n.attributes.position,c=n.attributes.uv,d=n.attributes.uv2,u=n.attributes.normal,h=n.groups,f=n.drawRange;if(null!==a)if(Array.isArray(r))for(let m=0,g=h.length;m<g;m++){const _=h[m],p=r[_.materialIndex];for(let y=Math.max(_.start,f.start),x=Math.min(a.count,Math.min(_.start+_.count,f.start+f.count));y<x;y+=3){const w=a.getX(y),E=a.getX(y+1),S=a.getX(y+2);o=Vy(this,p,e,ka,c,d,u,w,E,S),o&&(o.faceIndex=Math.floor(y/3),o.face.materialIndex=_.materialIndex,t.push(o))}}else for(let _=Math.max(0,f.start),p=Math.min(a.count,f.start+f.count);_<p;_+=3){const v=a.getX(_),b=a.getX(_+1),y=a.getX(_+2);o=Vy(this,r,e,ka,c,d,u,v,b,y),o&&(o.faceIndex=Math.floor(_/3),t.push(o))}else if(void 0!==l)if(Array.isArray(r))for(let m=0,g=h.length;m<g;m++){const _=h[m],p=r[_.materialIndex];for(let y=Math.max(_.start,f.start),x=Math.min(l.count,Math.min(_.start+_.count,f.start+f.count));y<x;y+=3)o=Vy(this,p,e,ka,c,d,u,y,y+1,y+2),o&&(o.faceIndex=Math.floor(y/3),o.face.materialIndex=_.materialIndex,t.push(o))}else for(let _=Math.max(0,f.start),p=Math.min(l.count,f.start+f.count);_<p;_+=3)o=Vy(this,r,e,ka,c,d,u,_,_+1,_+2),o&&(o.faceIndex=Math.floor(_/3),t.push(o))}}function Vy(i,e,t,n,r,s,o,a,l,c){i.getVertexPosition(a,Nf),i.getVertexPosition(l,jf),i.getVertexPosition(c,Uf);const d=function yne(i,e,t,n,r,s,o,a){let l;if(l=e.side===zr?n.intersectTriangle(o,s,r,!0,a):n.intersectTriangle(r,s,o,e.side===Ia,a),null===l)return null;Uy.copy(a),Uy.applyMatrix4(i.matrixWorld);const c=t.ray.origin.distanceTo(Uy);return c<t.near||c>t.far?null:{distance:c,point:Uy.clone(),object:i}}(i,e,t,n,Nf,jf,Uf,jy);if(d){r&&(Fy.fromBufferAttribute(r,a),Oy.fromBufferAttribute(r,l),Ny.fromBufferAttribute(r,c),d.uv=rs.getInterpolation(jy,Nf,jf,Uf,Fy,Oy,Ny,new pe)),s&&(Fy.fromBufferAttribute(s,a),Oy.fromBufferAttribute(s,l),Ny.fromBufferAttribute(s,c),d.uv2=rs.getInterpolation(jy,Nf,jf,Uf,Fy,Oy,Ny,new pe)),o&&(nU.fromBufferAttribute(o,a),rU.fromBufferAttribute(o,l),sU.fromBufferAttribute(o,c),d.normal=rs.getInterpolation(jy,Nf,jf,Uf,nU,rU,sU,new R),d.normal.dot(n.direction)>0&&d.normal.multiplyScalar(-1));const u={a,b:l,c,normal:new R,materialIndex:0};rs.getNormal(Nf,jf,Uf,u.normal),d.face=u}return d}class Ji extends Mt{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],d=[],u=[];let h=0,f=0;function m(g,_,p,v,b,y,x,w,E,S,C){const T=y/E,k=x/S,U=y/2,B=x/2,j=w/2,H=E+1,L=S+1;let V=0,O=0;const Q=new R;for(let re=0;re<L;re++){const _e=re*k-B;for(let de=0;de<H;de++)Q[g]=(de*T-U)*v,Q[_]=_e*b,Q[p]=j,c.push(Q.x,Q.y,Q.z),Q[g]=0,Q[_]=0,Q[p]=w>0?1:-1,d.push(Q.x,Q.y,Q.z),u.push(de/E),u.push(1-re/S),V+=1}for(let re=0;re<S;re++)for(let _e=0;_e<E;_e++){const Y=h+_e+H*(re+1),q=h+(_e+1)+H*(re+1),te=h+(_e+1)+H*re;l.push(h+_e+H*re,Y,te),l.push(Y,q,te),O+=6}a.addGroup(f,O,C),f+=O,h+=V}m("z","y","x",-1,-1,n,t,e,o,s,0),m("z","y","x",1,-1,n,t,-e,o,s,1),m("x","z","y",1,1,e,n,t,r,o,2),m("x","z","y",1,-1,e,n,-t,r,o,3),m("x","y","z",1,-1,e,t,n,r,s,4),m("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new Ze(c,3)),this.setAttribute("normal",new Ze(d,3)),this.setAttribute("uv",new Ze(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ji(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Vf(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():e[t][n]=Array.isArray(r)?r.slice():r}}return e}function os(i){const e={};for(let t=0;t<i.length;t++){const n=Vf(i[t]);for(const r in n)e[r]=n[r]}return e}function oU(i){return null===i.getRenderTarget()&&i.outputEncoding===ci?Ys:Vd}const mi={clone:Vf,merge:os};class Dt extends Un{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Vf(e.uniforms),this.uniformsGroups=function xne(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class zy extends pi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new We,this.projectionMatrix=new We,this.projectionMatrixInverse=new We}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class In extends zy{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Mf*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*zd*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Mf*Math.atan(Math.tan(.5*zd*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*zd*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*n/c,r*=o.width/l,n*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class BT extends pi{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new In(-90,1,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new In(-90,1,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new In(-90,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new In(-90,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new In(-90,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const c=new In(-90,1,e,t);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,s,o,a,l,c]=this.children,d=e.getRenderTarget(),u=e.toneMapping,h=e.xr.enabled;e.toneMapping=Pa,e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(d),e.toneMapping=u,e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class Wd extends An{constructor(e,t,n,r,s,o,a,l,c,d){super(e=void 0!==e?e:[],t=void 0!==t?t:sc,n,r,s,o,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class aU extends Gt{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1};this.texture=new Wd([n,n,n,n,n,n],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Ni}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Ji(5,5,5),s=new Dt({name:"CubemapFromEquirect",uniforms:Vf(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:zr,blending:Xt});s.uniforms.tEquirect.value=t;const o=new nt(r,s),a=t.minFilter;return t.minFilter===Ws&&(t.minFilter=Ni),new BT(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}const FT=new R,Mne=new R,Ene=new bi;class to{constructor(e=new R(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=FT.subVectors(n,t).cross(Mne.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(FT),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Ene.getNormalMatrix(e),r=this.coplanarPoint(FT).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const qd=new wo,Gy=new R;class Hy{constructor(e=new to,t=new to,n=new to,r=new to,s=new to,o=new to){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5],d=n[6],u=n[7],h=n[8],f=n[9],m=n[10],g=n[11],_=n[12],p=n[13],v=n[14],b=n[15];return t[0].setComponents(a-r,u-l,g-h,b-_).normalize(),t[1].setComponents(a+r,u+l,g+h,b+_).normalize(),t[2].setComponents(a+s,u+c,g+f,b+p).normalize(),t[3].setComponents(a-s,u-c,g-f,b-p).normalize(),t[4].setComponents(a-o,u-d,g-m,b-v).normalize(),t[5].setComponents(a+o,u+d,g+m,b+v).normalize(),this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),qd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),qd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(qd)}intersectsSprite(e){return qd.center.set(0,0,0),qd.radius=.7071067811865476,qd.applyMatrix4(e.matrixWorld),this.intersectsSphere(qd)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Gy.x=r.normal.x>0?e.max.x:e.min.x,Gy.y=r.normal.y>0?e.max.y:e.min.y,Gy.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Gy)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function lU(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function Sne(i,e){const t=e.isWebGL2,n=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),n.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=n.get(c);d&&(i.deleteBuffer(d.buffer),n.delete(c))},update:function l(c,d){if(c.isGLBufferAttribute){const h=n.get(c);return void((!h||h.version<c.version)&&n.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const u=n.get(c);void 0===u?n.set(c,function r(c,d){const u=c.array,h=c.usage,f=i.createBuffer();let m;if(i.bindBuffer(d,f),i.bufferData(d,u,h),c.onUploadCallback(),u instanceof Float32Array)m=5126;else if(u instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");m=5131}else m=5123;else if(u instanceof Int16Array)m=5122;else if(u instanceof Uint32Array)m=5125;else if(u instanceof Int32Array)m=5124;else if(u instanceof Int8Array)m=5120;else if(u instanceof Uint8Array)m=5121;else{if(!(u instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);m=5121}return{buffer:f,type:m,bytesPerElement:u.BYTES_PER_ELEMENT,version:c.version}}(c,d)):u.version<c.version&&(function s(c,d,u){const h=d.array,f=d.updateRange;i.bindBuffer(u,c),-1===f.count?i.bufferSubData(u,0,h):(t?i.bufferSubData(u,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):i.bufferSubData(u,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1),d.onUploadCallback()}(u.buffer,c,d),u.version=c.version)}}}class gc extends Mt{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(n),l=Math.floor(r),c=a+1,d=l+1,u=e/a,h=t/l,f=[],m=[],g=[],_=[];for(let p=0;p<d;p++){const v=p*h-o;for(let b=0;b<c;b++)m.push(b*u-s,-v,0),g.push(0,0,1),_.push(b/a),_.push(1-p/l)}for(let p=0;p<l;p++)for(let v=0;v<a;v++){const y=v+c*(p+1),x=v+1+c*(p+1),w=v+1+c*p;f.push(v+c*p,y,w),f.push(y,x,w)}this.setIndex(f),this.setAttribute("position",new Ze(m,3)),this.setAttribute("normal",new Ze(g,3)),this.setAttribute("uv",new Ze(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gc(e.width,e.height,e.widthSegments,e.heightSegments)}}const ui={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_NORMALMAP_TANGENTSPACE\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge = pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec2 fullSize = vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_UV2\n\tattribute vec2 uv2;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},ot={common:{diffuse:{value:new Be(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new bi},alphaMap:{value:null},alphaMapTransform:{value:new bi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new bi}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new bi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new bi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new bi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new bi},normalScale:{value:new pe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new bi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new bi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new bi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new bi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Be(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Be(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new bi}},sprite:{diffuse:{value:new Be(16777215)},opacity:{value:1},center:{value:new pe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new bi},alphaMap:{value:null},alphaTest:{value:0}}},Mo={basic:{uniforms:os([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.fog]),vertexShader:ui.meshbasic_vert,fragmentShader:ui.meshbasic_frag},lambert:{uniforms:os([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new Be(0)}}]),vertexShader:ui.meshlambert_vert,fragmentShader:ui.meshlambert_frag},phong:{uniforms:os([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new Be(0)},specular:{value:new Be(1118481)},shininess:{value:30}}]),vertexShader:ui.meshphong_vert,fragmentShader:ui.meshphong_frag},standard:{uniforms:os([ot.common,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.roughnessmap,ot.metalnessmap,ot.fog,ot.lights,{emissive:{value:new Be(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ui.meshphysical_vert,fragmentShader:ui.meshphysical_frag},toon:{uniforms:os([ot.common,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.gradientmap,ot.fog,ot.lights,{emissive:{value:new Be(0)}}]),vertexShader:ui.meshtoon_vert,fragmentShader:ui.meshtoon_frag},matcap:{uniforms:os([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,{matcap:{value:null}}]),vertexShader:ui.meshmatcap_vert,fragmentShader:ui.meshmatcap_frag},points:{uniforms:os([ot.points,ot.fog]),vertexShader:ui.points_vert,fragmentShader:ui.points_frag},dashed:{uniforms:os([ot.common,ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ui.linedashed_vert,fragmentShader:ui.linedashed_frag},depth:{uniforms:os([ot.common,ot.displacementmap]),vertexShader:ui.depth_vert,fragmentShader:ui.depth_frag},normal:{uniforms:os([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,{opacity:{value:1}}]),vertexShader:ui.meshnormal_vert,fragmentShader:ui.meshnormal_frag},sprite:{uniforms:os([ot.sprite,ot.fog]),vertexShader:ui.sprite_vert,fragmentShader:ui.sprite_frag},background:{uniforms:{uvTransform:{value:new bi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ui.background_vert,fragmentShader:ui.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ui.backgroundCube_vert,fragmentShader:ui.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ui.cube_vert,fragmentShader:ui.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ui.equirect_vert,fragmentShader:ui.equirect_frag},distanceRGBA:{uniforms:os([ot.common,ot.displacementmap,{referencePosition:{value:new R},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ui.distanceRGBA_vert,fragmentShader:ui.distanceRGBA_frag},shadow:{uniforms:os([ot.lights,ot.fog,{color:{value:new Be(0)},opacity:{value:1}}]),vertexShader:ui.shadow_vert,fragmentShader:ui.shadow_frag}};Mo.physical={uniforms:os([Mo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new bi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new bi},clearcoatNormalScale:{value:new pe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new bi},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new bi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new bi},sheen:{value:0},sheenColor:{value:new Be(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new bi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new bi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new bi},transmissionSamplerSize:{value:new pe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new bi},attenuationDistance:{value:0},attenuationColor:{value:new Be(0)},specularColor:{value:new Be(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new bi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new bi}}]),vertexShader:ui.meshphysical_vert,fragmentShader:ui.meshphysical_frag};const Qy={r:0,b:0,g:0};function wse(i,e,t,n,r,s,o){const a=new Be(0);let c,d,l=!0===s?0:1,u=null,h=0,f=null;function g(_,p){_.getRGB(Qy,oU(i)),n.buffers.color.setClear(Qy.r,Qy.g,Qy.b,p,o)}return{getClearColor:function(){return a},setClearColor:function(_,p=1){a.set(_),l=p,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,g(a,l)},render:function m(_,p){let v=!1,b=!0===p.isScene?p.background:null;b&&b.isTexture&&(b=(p.backgroundBlurriness>0?t:e).get(b));const y=i.xr,x=y.getSession&&y.getSession();x&&"additive"===x.environmentBlendMode&&(b=null),null===b?g(a,l):b&&b.isColor&&(g(b,1),v=!0),(i.autoClear||v)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),b&&(b.isCubeTexture||b.mapping===gf)?(void 0===d&&(d=new nt(new Ji(1,1,1),new Dt({name:"BackgroundCubeMaterial",uniforms:Vf(Mo.backgroundCube.uniforms),vertexShader:Mo.backgroundCube.vertexShader,fragmentShader:Mo.backgroundCube.fragmentShader,side:zr,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(w,E,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),d.material.uniforms.envMap.value=b,d.material.uniforms.flipEnvMap.value=b.isCubeTexture&&!1===b.isRenderTargetTexture?-1:1,d.material.uniforms.backgroundBlurriness.value=p.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,d.material.toneMapped=b.encoding!==ci,(u!==b||h!==b.version||f!==i.toneMapping)&&(d.material.needsUpdate=!0,u=b,h=b.version,f=i.toneMapping),d.layers.enableAll(),_.unshift(d,d.geometry,d.material,0,0,null)):b&&b.isTexture&&(void 0===c&&(c=new nt(new gc(2,2),new Dt({name:"BackgroundMaterial",uniforms:Vf(Mo.background.uniforms),vertexShader:Mo.background.vertexShader,fragmentShader:Mo.background.fragmentShader,side:Ia,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=b,c.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,c.material.toneMapped=b.encoding!==ci,!0===b.matrixAutoUpdate&&b.updateMatrix(),c.material.uniforms.uvTransform.value.copy(b.matrix),(u!==b||h!==b.version||f!==i.toneMapping)&&(c.material.needsUpdate=!0,u=b,h=b.version,f=i.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}}}function Cse(i,e,t,n){const r=i.getParameter(34921),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||null!==s,a={},l=_(null);let c=l,d=!1;function f(j){return n.isWebGL2?i.bindVertexArray(j):s.bindVertexArrayOES(j)}function m(j){return n.isWebGL2?i.deleteVertexArray(j):s.deleteVertexArrayOES(j)}function _(j){const H=[],L=[],V=[];for(let O=0;O<r;O++)H[O]=0,L[O]=0,V[O]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:L,attributeDivisors:V,object:j,attributes:{},index:null}}function b(){const j=c.newAttributes;for(let H=0,L=j.length;H<L;H++)j[H]=0}function y(j){x(j,0)}function x(j,H){const V=c.enabledAttributes,O=c.attributeDivisors;c.newAttributes[j]=1,0===V[j]&&(i.enableVertexAttribArray(j),V[j]=1),O[j]!==H&&((n.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](j,H),O[j]=H)}function w(){const j=c.newAttributes,H=c.enabledAttributes;for(let L=0,V=H.length;L<V;L++)H[L]!==j[L]&&(i.disableVertexAttribArray(L),H[L]=0)}function E(j,H,L,V,O,Q){!0!==n.isWebGL2||5124!==L&&5125!==L?i.vertexAttribPointer(j,H,L,V,O,Q):i.vertexAttribIPointer(j,H,L,O,Q)}function U(){B(),d=!0,c!==l&&(c=l,f(c.object))}function B(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function u(j,H,L,V,O){let Q=!1;if(o){const re=function g(j,H,L){const V=!0===L.wireframe;let O=a[j.id];void 0===O&&(O={},a[j.id]=O);let Q=O[H.id];void 0===Q&&(Q={},O[H.id]=Q);let re=Q[V];return void 0===re&&(re=_(function h(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}()),Q[V]=re),re}(V,L,H);c!==re&&(c=re,f(c.object)),Q=function p(j,H,L,V){const O=c.attributes,Q=H.attributes;let re=0;const _e=L.getAttributes();for(const de in _e)if(_e[de].location>=0){const q=O[de];let te=Q[de];if(void 0===te&&("instanceMatrix"===de&&j.instanceMatrix&&(te=j.instanceMatrix),"instanceColor"===de&&j.instanceColor&&(te=j.instanceColor)),void 0===q||q.attribute!==te||te&&q.data!==te.data)return!0;re++}return c.attributesNum!==re||c.index!==V}(j,V,L,O),Q&&function v(j,H,L,V){const O={},Q=H.attributes;let re=0;const _e=L.getAttributes();for(const de in _e)if(_e[de].location>=0){let q=Q[de];void 0===q&&("instanceMatrix"===de&&j.instanceMatrix&&(q=j.instanceMatrix),"instanceColor"===de&&j.instanceColor&&(q=j.instanceColor));const te={};te.attribute=q,q&&q.data&&(te.data=q.data),O[de]=te,re++}c.attributes=O,c.attributesNum=re,c.index=V}(j,V,L,O)}else{const re=!0===H.wireframe;(c.geometry!==V.id||c.program!==L.id||c.wireframe!==re)&&(c.geometry=V.id,c.program=L.id,c.wireframe=re,Q=!0)}null!==O&&t.update(O,34963),(Q||d)&&(d=!1,function S(j,H,L,V){if(!1===n.isWebGL2&&(j.isInstancedMesh||V.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;b();const O=V.attributes,Q=L.getAttributes(),re=H.defaultAttributeValues;for(const _e in Q){const de=Q[_e];if(de.location>=0){let Y=O[_e];if(void 0===Y&&("instanceMatrix"===_e&&j.instanceMatrix&&(Y=j.instanceMatrix),"instanceColor"===_e&&j.instanceColor&&(Y=j.instanceColor)),void 0!==Y){const q=Y.normalized,te=Y.itemSize,$=t.get(Y);if(void 0===$)continue;const I=$.buffer,ue=$.type,Me=$.bytesPerElement;if(Y.isInterleavedBufferAttribute){const me=Y.data,He=me.stride,Ce=Y.offset;if(me.isInstancedInterleavedBuffer){for(let we=0;we<de.locationSize;we++)x(de.location+we,me.meshPerAttribute);!0!==j.isInstancedMesh&&void 0===V._maxInstanceCount&&(V._maxInstanceCount=me.meshPerAttribute*me.count)}else for(let we=0;we<de.locationSize;we++)y(de.location+we);i.bindBuffer(34962,I);for(let we=0;we<de.locationSize;we++)E(de.location+we,te/de.locationSize,ue,q,He*Me,(Ce+te/de.locationSize*we)*Me)}else{if(Y.isInstancedBufferAttribute){for(let me=0;me<de.locationSize;me++)x(de.location+me,Y.meshPerAttribute);!0!==j.isInstancedMesh&&void 0===V._maxInstanceCount&&(V._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let me=0;me<de.locationSize;me++)y(de.location+me);i.bindBuffer(34962,I);for(let me=0;me<de.locationSize;me++)E(de.location+me,te/de.locationSize,ue,q,te*Me,te/de.locationSize*me*Me)}}else if(void 0!==re){const q=re[_e];if(void 0!==q)switch(q.length){case 2:i.vertexAttrib2fv(de.location,q);break;case 3:i.vertexAttrib3fv(de.location,q);break;case 4:i.vertexAttrib4fv(de.location,q);break;default:i.vertexAttrib1fv(de.location,q)}}}}w()}(j,H,L,V),null!==O&&i.bindBuffer(34963,t.get(O).buffer))},reset:U,resetDefaultState:B,dispose:function C(){U();for(const j in a){const H=a[j];for(const L in H){const V=H[L];for(const O in V)m(V[O].object),delete V[O];delete H[L]}delete a[j]}},releaseStatesOfGeometry:function T(j){if(void 0===a[j.id])return;const H=a[j.id];for(const L in H){const V=H[L];for(const O in V)m(V[O].object),delete V[O];delete H[L]}delete a[j.id]},releaseStatesOfProgram:function k(j){for(const H in a){const L=a[H];if(void 0===L[j.id])continue;const V=L[j.id];for(const O in V)m(V[O].object),delete V[O];delete L[j.id]}},initAttributes:b,enableAttribute:y,disableUnusedAttributes:w}}function Mse(i,e,t,n){const r=n.isWebGL2;let s;this.setMode=function o(c){s=c},this.render=function a(c,d){i.drawArrays(s,c,d),t.update(d,s,1)},this.renderInstances=function l(c,d,u){if(0===u)return;let h,f;if(r)h=i,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](s,c,d,u),t.update(d,s,u)}}function Ese(i,e,t){let n;function s(E){if("highp"===E){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";E="mediump"}return"mediump"===E&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&"WebGL2RenderingContext"===i.constructor.name;let a=void 0!==t.precision?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),d=!0===t.logarithmicDepthBuffer,u=i.getParameter(34930),h=i.getParameter(35660),f=i.getParameter(3379),m=i.getParameter(34076),g=i.getParameter(34921),_=i.getParameter(36347),p=i.getParameter(36348),v=i.getParameter(36349),b=h>0,y=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==n)return n;if(!0===e.has("EXT_texture_filter_anisotropic")){const E=e.get("EXT_texture_filter_anisotropic");n=i.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:u,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:m,maxAttributes:g,maxVertexUniforms:_,maxVaryings:p,maxFragmentUniforms:v,vertexTextures:b,floatFragmentTextures:y,floatVertexTextures:b&&y,maxSamples:o?i.getParameter(36183):0}}function Sse(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new to,a=new bi,l={value:null,needsUpdate:!1};function d(u,h,f,m){const g=null!==u?u.length:0;let _=null;if(0!==g){if(_=l.value,!0!==m||null===_){const p=f+4*g,v=h.matrixWorldInverse;a.getNormalMatrix(v),(null===_||_.length<p)&&(_=new Float32Array(p));for(let b=0,y=f;b!==g;++b,y+=4)o.copy(u[b]).applyMatrix4(v,a),o.normal.toArray(_,y),_[y+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,_}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,h){const f=0!==u.length||h||0!==n||r;return r=h,n=u.length,f},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(u,h){t=d(u,h,0)},this.setState=function(u,h,f){const m=u.clippingPlanes,g=u.clipIntersection,_=u.clipShadows,p=i.get(u);if(!r||null===m||0===m.length||s&&!_)s?d(null):function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}();else{const v=s?0:n,b=4*v;let y=p.clippingState||null;l.value=y,y=d(m,h,b,f);for(let x=0;x!==b;++x)y[x]=t[x];p.clippingState=y,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=v}}}function Tse(i){let e=new WeakMap;function t(o,a){return a===mf?o.mapping=sc:a===V_&&(o.mapping=oc),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function n(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(a===mf||a===V_){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new aU(l.height/2);return c.fromEquirectangularTexture(i,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}class La extends zy{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const cU=[.125,.215,.35,.446,.526,.582],OT=new La,dU=new Be;let NT=null;const Xd=(1+Math.sqrt(5))/2,Qf=1/Xd,uU=[new R(1,1,1),new R(-1,1,1),new R(1,1,-1),new R(-1,1,-1),new R(0,Xd,Qf),new R(0,Xd,-Qf),new R(Qf,0,Xd),new R(-Qf,0,Xd),new R(Xd,Qf,0),new R(-Xd,Qf,0)];class jT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){NT=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=pU(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=fU(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(NT),e.scissorTest=!1,Wy(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===sc||e.mapping===oc?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),NT=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Ni,minFilter:Ni,generateMipmaps:!1,type:pn,format:Rn,encoding:qs,depthBuffer:!1},r=hU(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=hU(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Rse(i){const e=[],t=[],n=[];let r=i;const s=i-4+1+cU.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>i-4?l=cU[o-i+4-1]:0===o&&(l=0),n.push(l);const c=1/(a-2),d=-c,u=1+c,h=[d,d,u,d,u,u,d,d,u,u,d,u],f=6,m=6,g=3,_=2,p=1,v=new Float32Array(g*m*f),b=new Float32Array(_*m*f),y=new Float32Array(p*m*f);for(let w=0;w<f;w++){const E=w%3*2/3-1,S=w>2?0:-1;v.set([E,S,0,E+2/3,S,0,E+2/3,S+1,0,E,S,0,E+2/3,S+1,0,E,S+1,0],g*m*w),b.set(h,_*m*w),y.set([w,w,w,w,w,w],p*m*w)}const x=new Mt;x.setAttribute("position",new Ci(v,g)),x.setAttribute("uv",new Ci(b,_)),x.setAttribute("faceIndex",new Ci(y,p)),e.push(x),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}(s)),this._blurMaterial=function Ise(i,e,t){const n=new Float32Array(20),r=new R(0,1,0);return new Dt({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Xt,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new nt(this._lodPlanes[0],e);this._renderer.compile(t,OT)}_sceneToCubeUV(e,t,n,r){const a=new In(90,1,t,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,u=d.autoClear,h=d.toneMapping;d.getClearColor(dU),d.toneMapping=Pa,d.autoClear=!1;const f=new Xn({name:"PMREM.Background",side:zr,depthWrite:!1,depthTest:!1}),m=new nt(new Ji,f);let g=!1;const _=e.background;_?_.isColor&&(f.color.copy(_),e.background=null,g=!0):(f.color.copy(dU),g=!0);for(let p=0;p<6;p++){const v=p%3;0===v?(a.up.set(0,l[p],0),a.lookAt(c[p],0,0)):1===v?(a.up.set(0,0,l[p]),a.lookAt(0,c[p],0)):(a.up.set(0,l[p],0),a.lookAt(0,0,c[p]));const b=this._cubeSize;Wy(r,v*b,p>2?b:0,b,b),d.setRenderTarget(r),g&&d.render(m,a),d.render(e,a)}m.geometry.dispose(),m.material.dispose(),d.toneMapping=h,d.autoClear=u,e.background=_}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===sc||e.mapping===oc;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=pU()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=fU());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new nt(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const l=this._cubeSize;Wy(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(o,OT)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,uU[(r-1)%uU.length])}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new nt(this._lodPlanes[r],c),h=c.uniforms,f=this._sizeLods[n]-1,m=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,g=s/m,_=isFinite(s)?1+Math.floor(3*g):20;_>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to 20`);const p=[];let v=0;for(let E=0;E<20;++E){const S=E/g,C=Math.exp(-S*S/2);p.push(C),0===E?v+=C:E<_&&(v+=2*C)}for(let E=0;E<p.length;E++)p[E]=p[E]/v;h.envMap.value=e.texture,h.samples.value=_,h.weights.value=p,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:b}=this;h.dTheta.value=m,h.mipInt.value=b-n;const y=this._sizeLods[r];Wy(t,3*y*(r>b-4?r-b+4:0),4*(this._cubeSize-y),3*y,2*y),l.setRenderTarget(t),l.render(u,OT)}}function hU(i,e,t){const n=new Gt(i,e,t);return n.texture.mapping=gf,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Wy(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function fU(){return new Dt({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Xt,depthTest:!1,depthWrite:!1})}function pU(){return new Dt({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Xt,depthTest:!1,depthWrite:!1})}function Dse(i){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function n(a){if(a&&a.isTexture){const l=a.mapping,c=l===mf||l===V_,d=l===sc||l===oc;if(c||d){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let u=e.get(a);return null===t&&(t=new jT(i)),u=c?t.fromEquirectangular(a,u):t.fromCubemap(a,u),e.set(a,u),u.texture}if(e.has(a))return e.get(a).texture;{const u=a.image;if(c&&u&&u.height>0||d&&u&&function r(a){let l=0;for(let d=0;d<6;d++)void 0!==a[d]&&l++;return 6===l}(u)){null===t&&(t=new jT(i));const h=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function Pse(i){const e={};function t(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return null!==t(n)},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const r=t(n);return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function kse(i,e,t,n){const r={},s=new WeakMap;function o(u){const h=u.target;null!==h.index&&e.remove(h.index);for(const m in h.attributes)e.remove(h.attributes[m]);h.removeEventListener("dispose",o),delete r[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),n.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function c(u){const h=[],f=u.index,m=u.attributes.position;let g=0;if(null!==f){const v=f.array;g=f.version;for(let b=0,y=v.length;b<y;b+=3){const x=v[b+0],w=v[b+1],E=v[b+2];h.push(x,w,w,E,E,x)}}else{g=m.version;for(let b=0,y=m.array.length/3-1;b<y;b+=3){const x=b+0,w=b+1,E=b+2;h.push(x,w,w,E,E,x)}}const _=new(Hj(h)?ky:Py)(h,1);_.version=g;const p=s.get(u);p&&e.remove(p),s.set(u,_)}return{get:function a(u,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h},update:function l(u){const h=u.attributes;for(const m in h)e.update(h[m],34962);const f=u.morphAttributes;for(const m in f){const g=f[m];for(let _=0,p=g.length;_<p;_++)e.update(g[_],34962)}},getWireframeAttribute:function d(u){const h=s.get(u);if(h){const f=u.index;null!==f&&h.version<f.version&&c(u)}else c(u);return s.get(u)}}}function Lse(i,e,t,n){const r=n.isWebGL2;let s,a,l;this.setMode=function o(h){s=h},this.setIndex=function c(h){a=h.type,l=h.bytesPerElement},this.render=function d(h,f){i.drawElements(s,f,a,h*l),t.update(f,s,1)},this.renderInstances=function u(h,f,m){if(0===m)return;let g,_;if(r)g=i,_="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",null===g)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");g[_](s,f,a,h*l,m),t.update(f,s,m)}}function Bse(i){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function n(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function Fse(i,e){return i[0]-e[0]}function Ose(i,e){return Math.abs(e[1])-Math.abs(i[1])}function Nse(i,e,t){const n={},r=new Float32Array(8),s=new WeakMap,o=new ei,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,d,u){const h=c.morphTargetInfluences;if(!0===e.isWebGL2){const f=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,m=void 0!==f?f.length:0;let g=s.get(d);if(void 0===g||g.count!==m){let j=function(){U.dispose(),s.delete(d),d.removeEventListener("dispose",j)};void 0!==g&&g.texture.dispose();const v=void 0!==d.morphAttributes.position,b=void 0!==d.morphAttributes.normal,y=void 0!==d.morphAttributes.color,x=d.morphAttributes.position||[],w=d.morphAttributes.normal||[],E=d.morphAttributes.color||[];let S=0;!0===v&&(S=1),!0===b&&(S=2),!0===y&&(S=3);let C=d.attributes.position.count*S,T=1;C>e.maxTextureSize&&(T=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const k=new Float32Array(C*T*4*m),U=new J_(k,C,T,m);U.type=Nn,U.needsUpdate=!0;const B=4*S;for(let H=0;H<m;H++){const L=x[H],V=w[H],O=E[H],Q=C*T*4*H;for(let re=0;re<L.count;re++){const _e=re*B;!0===v&&(o.fromBufferAttribute(L,re),k[Q+_e+0]=o.x,k[Q+_e+1]=o.y,k[Q+_e+2]=o.z,k[Q+_e+3]=0),!0===b&&(o.fromBufferAttribute(V,re),k[Q+_e+4]=o.x,k[Q+_e+5]=o.y,k[Q+_e+6]=o.z,k[Q+_e+7]=0),!0===y&&(o.fromBufferAttribute(O,re),k[Q+_e+8]=o.x,k[Q+_e+9]=o.y,k[Q+_e+10]=o.z,k[Q+_e+11]=4===O.itemSize?o.w:1)}}g={count:m,texture:U,size:new pe(C,T)},s.set(d,g),d.addEventListener("dispose",j)}let _=0;for(let v=0;v<h.length;v++)_+=h[v];const p=d.morphTargetsRelative?1:1-_;u.getUniforms().setValue(i,"morphTargetBaseInfluence",p),u.getUniforms().setValue(i,"morphTargetInfluences",h),u.getUniforms().setValue(i,"morphTargetsTexture",g.texture,t),u.getUniforms().setValue(i,"morphTargetsTextureSize",g.size)}else{const f=void 0===h?0:h.length;let m=n[d.id];if(void 0===m||m.length!==f){m=[];for(let b=0;b<f;b++)m[b]=[b,0];n[d.id]=m}for(let b=0;b<f;b++){const y=m[b];y[0]=b,y[1]=h[b]}m.sort(Ose);for(let b=0;b<8;b++)b<f&&m[b][1]?(a[b][0]=m[b][0],a[b][1]=m[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(Fse);const g=d.morphAttributes.position,_=d.morphAttributes.normal;let p=0;for(let b=0;b<8;b++){const y=a[b],x=y[0],w=y[1];x!==Number.MAX_SAFE_INTEGER&&w?(g&&d.getAttribute("morphTarget"+b)!==g[x]&&d.setAttribute("morphTarget"+b,g[x]),_&&d.getAttribute("morphNormal"+b)!==_[x]&&d.setAttribute("morphNormal"+b,_[x]),r[b]=w,p+=w):(g&&!0===d.hasAttribute("morphTarget"+b)&&d.deleteAttribute("morphTarget"+b),_&&!0===d.hasAttribute("morphNormal"+b)&&d.deleteAttribute("morphNormal"+b),r[b]=0)}const v=d.morphTargetsRelative?1:1-p;u.getUniforms().setValue(i,"morphTargetBaseInfluence",v),u.getUniforms().setValue(i,"morphTargetInfluences",r)}}}}function jse(i,e,t,n){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function s(l){const c=n.render.frame,u=e.get(l,l.geometry);return r.get(u)!==c&&(e.update(u),r.set(u,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),null!==l.instanceColor&&t.update(l.instanceColor,34962)),u},dispose:function o(){r=new WeakMap}}}const mU=new An,gU=new J_,_U=new eb,bU=new Wd,vU=[],AU=[],yU=new Float32Array(16),xU=new Float32Array(9),wU=new Float32Array(4);function Wf(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=vU[r];if(void 0===s&&(s=new Float32Array(r),vU[r]=s),0!==e){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,i[o].toArray(s,a)}return s}function gr(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function _r(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function qy(i,e){let t=AU[e];void 0===t&&(t=new Int32Array(e),AU[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function Use(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function Vse(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gr(t,e))return;i.uniform2fv(this.addr,e),_r(t,e)}}function zse(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(gr(t,e))return;i.uniform3fv(this.addr,e),_r(t,e)}}function Gse(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gr(t,e))return;i.uniform4fv(this.addr,e),_r(t,e)}}function Hse(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(gr(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),_r(t,e)}else{if(gr(t,n))return;wU.set(n),i.uniformMatrix2fv(this.addr,!1,wU),_r(t,n)}}function Qse(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(gr(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),_r(t,e)}else{if(gr(t,n))return;xU.set(n),i.uniformMatrix3fv(this.addr,!1,xU),_r(t,n)}}function Wse(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(gr(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),_r(t,e)}else{if(gr(t,n))return;yU.set(n),i.uniformMatrix4fv(this.addr,!1,yU),_r(t,n)}}function qse(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function Yse(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gr(t,e))return;i.uniform2iv(this.addr,e),_r(t,e)}}function Xse(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(gr(t,e))return;i.uniform3iv(this.addr,e),_r(t,e)}}function Zse(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gr(t,e))return;i.uniform4iv(this.addr,e),_r(t,e)}}function Kse(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function $se(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gr(t,e))return;i.uniform2uiv(this.addr,e),_r(t,e)}}function Jse(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(gr(t,e))return;i.uniform3uiv(this.addr,e),_r(t,e)}}function eoe(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gr(t,e))return;i.uniform4uiv(this.addr,e),_r(t,e)}}function toe(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2D(e||mU,r)}function ioe(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||_U,r)}function noe(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||bU,r)}function roe(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||gU,r)}function ooe(i,e){i.uniform1fv(this.addr,e)}function aoe(i,e){const t=Wf(e,this.size,2);i.uniform2fv(this.addr,t)}function loe(i,e){const t=Wf(e,this.size,3);i.uniform3fv(this.addr,t)}function coe(i,e){const t=Wf(e,this.size,4);i.uniform4fv(this.addr,t)}function doe(i,e){const t=Wf(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function uoe(i,e){const t=Wf(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function hoe(i,e){const t=Wf(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function foe(i,e){i.uniform1iv(this.addr,e)}function poe(i,e){i.uniform2iv(this.addr,e)}function moe(i,e){i.uniform3iv(this.addr,e)}function goe(i,e){i.uniform4iv(this.addr,e)}function _oe(i,e){i.uniform1uiv(this.addr,e)}function boe(i,e){i.uniform2uiv(this.addr,e)}function voe(i,e){i.uniform3uiv(this.addr,e)}function Aoe(i,e){i.uniform4uiv(this.addr,e)}function yoe(i,e,t){const n=this.cache,r=e.length,s=qy(t,r);gr(n,s)||(i.uniform1iv(this.addr,s),_r(n,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||mU,s[o])}function xoe(i,e,t){const n=this.cache,r=e.length,s=qy(t,r);gr(n,s)||(i.uniform1iv(this.addr,s),_r(n,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||_U,s[o])}function woe(i,e,t){const n=this.cache,r=e.length,s=qy(t,r);gr(n,s)||(i.uniform1iv(this.addr,s),_r(n,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||bU,s[o])}function Coe(i,e,t){const n=this.cache,r=e.length,s=qy(t,r);gr(n,s)||(i.uniform1iv(this.addr,s),_r(n,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||gU,s[o])}class Eoe{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function soe(i){switch(i){case 5126:return Use;case 35664:return Vse;case 35665:return zse;case 35666:return Gse;case 35674:return Hse;case 35675:return Qse;case 35676:return Wse;case 5124:case 35670:return qse;case 35667:case 35671:return Yse;case 35668:case 35672:return Xse;case 35669:case 35673:return Zse;case 5125:return Kse;case 36294:return $se;case 36295:return Jse;case 36296:return eoe;case 35678:case 36198:case 36298:case 36306:case 35682:return toe;case 35679:case 36299:case 36307:return ioe;case 35680:case 36300:case 36308:case 36293:return noe;case 36289:case 36303:case 36311:case 36292:return roe}}(t.type)}}class Soe{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function Moe(i){switch(i){case 5126:return ooe;case 35664:return aoe;case 35665:return loe;case 35666:return coe;case 35674:return doe;case 35675:return uoe;case 35676:return hoe;case 5124:case 35670:return foe;case 35667:case 35671:return poe;case 35668:case 35672:return moe;case 35669:case 35673:return goe;case 5125:return _oe;case 36294:return boe;case 36295:return voe;case 36296:return Aoe;case 35678:case 36198:case 36298:case 36306:case 35682:return yoe;case 35679:case 36299:case 36307:return xoe;case 35680:case 36300:case 36308:case 36293:return woe;case 36289:case 36303:case 36311:case 36292:return Coe}}(t.type)}}class Toe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],n)}}}const VT=/(\w+)(\])?(\[|\.)?/g;function CU(i,e){i.seq.push(e),i.map[e.id]=e}function Roe(i,e,t){const n=i.name,r=n.length;for(VT.lastIndex=0;;){const s=VT.exec(n);let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&VT.lastIndex+2===r){CU(t,void 0===c?new Eoe(a,i,e):new Soe(a,i,e));break}{let u=t.map[a];void 0===u&&(u=new Toe(a),CU(t,u)),t=u}}}class Yy{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r);Roe(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,n,r){const s=this.map[t];void 0!==s&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=n[a.id];!1!==l.needsUpdate&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&n.push(o)}return n}}function MU(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}let Ioe=0;function EU(i,e,t){const n=i.getShaderParameter(e,35713),r=i.getShaderInfoLog(e).trim();if(n&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function Doe(i,e){const t=i.split("\n"),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join("\n")}(i.getShaderSource(e),o)}return r}function koe(i,e){const t=function Poe(i){switch(i){case qs:return["Linear","( value )"];case ci:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Loe(i,e){let t;switch(e){case vj:t="Linear";break;case Aj:t="Reinhard";break;case yj:t="OptimizedCineon";break;case xj:t="ACESFilmic";break;case wj:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function ab(i){return""!==i}function SU(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function TU(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Noe=/^[ \t]*#include +<([\w\d./]+)>/gm;function zT(i){return i.replace(Noe,joe)}function joe(i,e){const t=ui[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return zT(t)}const Uoe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function RU(i){return i.replace(Uoe,Voe)}function Voe(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function IU(i){let e="precision "+i.precision+" float;\nprecision "+i.precision+" int;";return"highp"===i.precision?e+="\n#define HIGH_PRECISION":"mediump"===i.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(e+="\n#define LOW_PRECISION"),e}function qoe(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function zoe(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===HS?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===ij?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===df&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function Goe(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case sc:case oc:e="ENVMAP_TYPE_CUBE";break;case gf:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),d=function Hoe(i){let e="ENVMAP_MODE_REFLECTION";return i.envMap&&i.envMapMode===oc&&(e="ENVMAP_MODE_REFRACTION"),e}(t),u=function Qoe(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case U_:e="ENVMAP_BLENDING_MULTIPLY";break;case _j:e="ENVMAP_BLENDING_MIX";break;case bj:e="ENVMAP_BLENDING_ADD"}return e}(t),h=function Woe(i){const e=i.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}(t),f=t.isWebGL2?"":function Boe(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.normalMapTangentSpace||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ab).join("\n")}(t),m=function Foe(i){const e=[];for(const t in i){const n=i[t];!1!==n&&e.push("#define "+t+" "+n)}return e.join("\n")}(s),g=r.createProgram();let _,p,v=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(_=[m].filter(ab).join("\n"),_.length>0&&(_+="\n"),p=[f,m].filter(ab).join("\n"),p.length>0&&(p+="\n")):(_=[IU(t),"#define SHADER_NAME "+t.shaderName,m,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs2?"#define USE_UV2":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ab).join("\n"),p=[f,IU(t),"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs2?"#define USE_UV2":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Pa?"#define TONE_MAPPING":"",t.toneMapping!==Pa?ui.tonemapping_pars_fragment:"",t.toneMapping!==Pa?Loe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ui.encodings_pars_fragment,koe("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(ab).join("\n")),o=zT(o),o=SU(o,t),o=TU(o,t),a=zT(a),a=SU(a,t),a=TU(a,t),o=RU(o),a=RU(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(v="#version 300 es\n",_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+_,p=["#define varying in",t.glslVersion===mT?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===mT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+p);const y=v+p+a,x=MU(r,35633,v+_+o),w=MU(r,35632,y);if(r.attachShader(g,x),r.attachShader(g,w),void 0!==t.index0AttributeName?r.bindAttribLocation(g,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g),i.debug.checkShaderErrors){const C=r.getProgramInfoLog(g).trim(),T=r.getShaderInfoLog(x).trim(),k=r.getShaderInfoLog(w).trim();let U=!0,B=!0;if(!1===r.getProgramParameter(g,35714))if(U=!1,"function"==typeof i.debug.onShaderError)i.debug.onShaderError(r,g,x,w);else{const j=EU(r,x,"vertex"),H=EU(r,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(g,35715)+"\n\nProgram Info Log: "+C+"\n"+j+"\n"+H)}else""!==C?console.warn("THREE.WebGLProgram: Program Info Log:",C):(""===T||""===k)&&(B=!1);B&&(this.diagnostics={runnable:U,programLog:C,vertexShader:{log:T,prefix:_},fragmentShader:{log:k,prefix:p}})}let E,S;return r.deleteShader(x),r.deleteShader(w),this.getUniforms=function(){return void 0===E&&(E=new Yy(r,g)),E},this.getAttributes=function(){return void 0===S&&(S=function Ooe(i,e){const t={},n=i.getProgramParameter(e,35721);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:a}}return t}(r,g)),S},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.name=t.shaderName,this.id=Ioe++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=x,this.fragmentShader=w,this}let Yoe=0;class Xoe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Zoe(e),t.set(e,n)),n}}class Zoe{constructor(e){this.id=Yoe++,this.code=e,this.usedTimes=0}}function Koe(i,e,t,n,r,s,o){const a=new Sy,l=new Xoe,c=[],d=r.isWebGL2,u=r.logarithmicDepthBuffer,h=r.vertexTextures;let f=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(C){return 1===C?"uv2":"uv"}return{getParameters:function _(C,T,k,U,B){const j=U.fog,H=B.geometry,V=(C.isMeshStandardMaterial?t:e).get(C.envMap||(C.isMeshStandardMaterial?U.environment:null)),O=V&&V.mapping===gf?V.image.height:null,Q=m[C.type];null!==C.precision&&(f=r.getMaxPrecision(C.precision),f!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",f,"instead."));const re=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,_e=void 0!==re?re.length:0;let Y,q,te,$,de=0;if(void 0!==H.morphAttributes.position&&(de=1),void 0!==H.morphAttributes.normal&&(de=2),void 0!==H.morphAttributes.color&&(de=3),Q){const ft=Mo[Q];Y=ft.vertexShader,q=ft.fragmentShader}else Y=C.vertexShader,q=C.fragmentShader,l.update(C),te=l.getVertexShaderID(C),$=l.getFragmentShaderID(C);const I=i.getRenderTarget(),ue=!0===B.isInstancedMesh,Me=!!C.map,He=!!V,Ce=!!C.aoMap,we=!!C.lightMap,Ee=!!C.bumpMap,it=!!C.normalMap,qe=!!C.displacementMap,bt=!!C.emissiveMap,At=!!C.metalnessMap,lt=!!C.roughnessMap,ut=C.clearcoat>0,yt=C.iridescence>0,N=C.sheen>0,F=C.transmission>0,ve=ut&&!!C.clearcoatMap,De=ut&&!!C.clearcoatNormalMap,Ne=ut&&!!C.clearcoatRoughnessMap,et=yt&&!!C.iridescenceMap,X=yt&&!!C.iridescenceThicknessMap,Te=N&&!!C.sheenColorMap,Ae=N&&!!C.sheenRoughnessMap,Je=!!C.specularMap,ct=!!C.specularColorMap,ht=!!C.specularIntensityMap,$e=F&&!!C.transmissionMap,tt=F&&!!C.thicknessMap,Rt=!!C.alphaMap,ie=!!C.extensions,ee=!!H.attributes.uv2;return{isWebGL2:d,shaderID:Q,shaderName:C.type,vertexShader:Y,fragmentShader:q,defines:C.defines,customVertexShaderID:te,customFragmentShaderID:$,isRawShaderMaterial:!0===C.isRawShaderMaterial,glslVersion:C.glslVersion,precision:f,instancing:ue,instancingColor:ue&&null!==B.instanceColor,supportsVertexTextures:h,outputEncoding:null===I?i.outputEncoding:!0===I.isXRRenderTarget?I.texture.encoding:qs,map:Me,matcap:!!C.matcap,envMap:He,envMapMode:He&&V.mapping,envMapCubeUVHeight:O,aoMap:Ce,lightMap:we,bumpMap:Ee,normalMap:it,displacementMap:h&&qe,emissiveMap:bt,normalMapObjectSpace:it&&C.normalMapType===jj,normalMapTangentSpace:it&&C.normalMapType===uc,decodeVideoTexture:Me&&!0===C.map.isVideoTexture&&C.map.encoding===ci,metalnessMap:At,roughnessMap:lt,clearcoat:ut,clearcoatMap:ve,clearcoatNormalMap:De,clearcoatRoughnessMap:Ne,iridescence:yt,iridescenceMap:et,iridescenceThicknessMap:X,sheen:N,sheenColorMap:Te,sheenRoughnessMap:Ae,specularMap:Je,specularColorMap:ct,specularIntensityMap:ht,transmission:F,transmissionMap:$e,thicknessMap:tt,gradientMap:!!C.gradientMap,opaque:!1===C.transparent&&C.blending===Da,alphaMap:Rt,alphaTest:C.alphaTest>0,combine:C.combine,mapUv:Me&&g(C.map.channel),aoMapUv:Ce&&g(C.aoMap.channel),lightMapUv:we&&g(C.lightMap.channel),bumpMapUv:Ee&&g(C.bumpMap.channel),normalMapUv:it&&g(C.normalMap.channel),displacementMapUv:qe&&g(C.displacementMap.channel),emissiveMapUv:bt&&g(C.emissiveMap.channel),metalnessMapUv:At&&g(C.metalnessMap.channel),roughnessMapUv:lt&&g(C.roughnessMap.channel),clearcoatMapUv:ve&&g(C.clearcoatMap.channel),clearcoatNormalMapUv:De&&g(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ne&&g(C.clearcoatRoughnessMap.channel),iridescenceMapUv:et&&g(C.iridescenceMap.channel),iridescenceThicknessMapUv:X&&g(C.iridescenceThicknessMap.channel),sheenColorMapUv:Te&&g(C.sheenColorMap.channel),sheenRoughnessMapUv:Ae&&g(C.sheenRoughnessMap.channel),specularMapUv:Je&&g(C.specularMap.channel),specularColorMapUv:ct&&g(C.specularColorMap.channel),specularIntensityMapUv:ht&&g(C.specularIntensityMap.channel),transmissionMapUv:$e&&g(C.transmissionMap.channel),thicknessMapUv:tt&&g(C.thicknessMap.channel),alphaMapUv:Rt&&g(C.alphaMap.channel),vertexTangents:it&&!!H.attributes.tangent,vertexColors:C.vertexColors,vertexAlphas:!0===C.vertexColors&&!!H.attributes.color&&4===H.attributes.color.itemSize,vertexUvs2:ee,pointsUvs:!0===B.isPoints&&!!H.attributes.uv&&(Me||Rt),fog:!!j,useFog:!0===C.fog,fogExp2:j&&j.isFogExp2,flatShading:!0===C.flatShading,sizeAttenuation:!0===C.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===B.isSkinnedMesh,morphTargets:void 0!==H.morphAttributes.position,morphNormals:void 0!==H.morphAttributes.normal,morphColors:void 0!==H.morphAttributes.color,morphTargetsCount:_e,morphTextureStride:de,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:i.shadowMap.enabled&&k.length>0,shadowMapType:i.shadowMap.type,toneMapping:C.toneMapped?i.toneMapping:Pa,useLegacyLights:i.useLegacyLights,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===bs,flipSided:C.side===zr,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:ie&&!0===C.extensions.derivatives,extensionFragDepth:ie&&!0===C.extensions.fragDepth,extensionDrawBuffers:ie&&!0===C.extensions.drawBuffers,extensionShaderTextureLOD:ie&&!0===C.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||n.has("EXT_shader_texture_lod"),customProgramCacheKey:C.customProgramCacheKey()}},getProgramCacheKey:function p(C){const T=[];if(C.shaderID?T.push(C.shaderID):(T.push(C.customVertexShaderID),T.push(C.customFragmentShaderID)),void 0!==C.defines)for(const k in C.defines)T.push(k),T.push(C.defines[k]);return!1===C.isRawShaderMaterial&&(function v(C,T){C.push(T.precision),C.push(T.outputEncoding),C.push(T.envMapMode),C.push(T.envMapCubeUVHeight),C.push(T.mapUv),C.push(T.alphaMapUv),C.push(T.lightMapUv),C.push(T.aoMapUv),C.push(T.bumpMapUv),C.push(T.normalMapUv),C.push(T.displacementMapUv),C.push(T.emissiveMapUv),C.push(T.metalnessMapUv),C.push(T.roughnessMapUv),C.push(T.clearcoatMapUv),C.push(T.clearcoatNormalMapUv),C.push(T.clearcoatRoughnessMapUv),C.push(T.iridescenceMapUv),C.push(T.iridescenceThicknessMapUv),C.push(T.sheenColorMapUv),C.push(T.sheenRoughnessMapUv),C.push(T.specularMapUv),C.push(T.specularColorMapUv),C.push(T.specularIntensityMapUv),C.push(T.transmissionMapUv),C.push(T.thicknessMapUv),C.push(T.combine),C.push(T.fogExp2),C.push(T.sizeAttenuation),C.push(T.morphTargetsCount),C.push(T.morphAttributeCount),C.push(T.numDirLights),C.push(T.numPointLights),C.push(T.numSpotLights),C.push(T.numSpotLightMaps),C.push(T.numHemiLights),C.push(T.numRectAreaLights),C.push(T.numDirLightShadows),C.push(T.numPointLightShadows),C.push(T.numSpotLightShadows),C.push(T.numSpotLightShadowsWithMaps),C.push(T.shadowMapType),C.push(T.toneMapping),C.push(T.numClippingPlanes),C.push(T.numClipIntersection),C.push(T.depthPacking)}(T,C),function b(C,T){a.disableAll(),T.isWebGL2&&a.enable(0),T.supportsVertexTextures&&a.enable(1),T.instancing&&a.enable(2),T.instancingColor&&a.enable(3),T.matcap&&a.enable(4),T.envMap&&a.enable(5),T.normalMapObjectSpace&&a.enable(6),T.normalMapTangentSpace&&a.enable(7),T.clearcoat&&a.enable(8),T.iridescence&&a.enable(9),T.alphaTest&&a.enable(10),T.vertexColors&&a.enable(11),T.vertexAlphas&&a.enable(12),T.vertexUvs2&&a.enable(13),T.vertexTangents&&a.enable(14),C.push(a.mask),a.disableAll(),T.fog&&a.enable(0),T.useFog&&a.enable(1),T.flatShading&&a.enable(2),T.logarithmicDepthBuffer&&a.enable(3),T.skinning&&a.enable(4),T.morphTargets&&a.enable(5),T.morphNormals&&a.enable(6),T.morphColors&&a.enable(7),T.premultipliedAlpha&&a.enable(8),T.shadowMapEnabled&&a.enable(9),T.useLegacyLights&&a.enable(10),T.doubleSided&&a.enable(11),T.flipSided&&a.enable(12),T.useDepthPacking&&a.enable(13),T.dithering&&a.enable(14),T.transmission&&a.enable(15),T.sheen&&a.enable(16),T.decodeVideoTexture&&a.enable(17),T.opaque&&a.enable(18),T.pointsUvs&&a.enable(19),C.push(a.mask)}(T,C),T.push(i.outputEncoding)),T.push(C.customProgramCacheKey),T.join()},getUniforms:function y(C){const T=m[C.type];let k;return k=T?mi.clone(Mo[T].uniforms):C.uniforms,k},acquireProgram:function x(C,T){let k;for(let U=0,B=c.length;U<B;U++){const j=c[U];if(j.cacheKey===T){k=j,++k.usedTimes;break}}return void 0===k&&(k=new qoe(i,T,C,s),c.push(k)),k},releaseProgram:function w(C){if(0==--C.usedTimes){const T=c.indexOf(C);c[T]=c[c.length-1],c.pop(),C.destroy()}},releaseShaderCache:function E(C){l.remove(C)},programs:c,dispose:function S(){l.dispose()}}}function $oe(){let i=new WeakMap;return{get:function e(s){let o=i.get(s);return void 0===o&&(o={},i.set(s,o)),o},remove:function t(s){i.delete(s)},update:function n(s,o,a){i.get(s)[o]=a},dispose:function r(){i=new WeakMap}}}function Joe(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function DU(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function PU(){const i=[];let e=0;const t=[],n=[],r=[];function o(u,h,f,m,g,_){let p=i[e];return void 0===p?(p={id:u.id,object:u,geometry:h,material:f,groupOrder:m,renderOrder:u.renderOrder,z:g,group:_},i[e]=p):(p.id=u.id,p.object=u,p.geometry=h,p.material=f,p.groupOrder=m,p.renderOrder=u.renderOrder,p.z=g,p.group=_),e++,p}return{opaque:t,transmissive:n,transparent:r,init:function s(){e=0,t.length=0,n.length=0,r.length=0},push:function a(u,h,f,m,g,_){const p=o(u,h,f,m,g,_);f.transmission>0?n.push(p):!0===f.transparent?r.push(p):t.push(p)},unshift:function l(u,h,f,m,g,_){const p=o(u,h,f,m,g,_);f.transmission>0?n.unshift(p):!0===f.transparent?r.unshift(p):t.unshift(p)},finish:function d(){for(let u=e,h=i.length;u<h;u++){const f=i[u];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(u,h){t.length>1&&t.sort(u||Joe),n.length>1&&n.sort(h||DU),r.length>1&&r.sort(h||DU)}}}function eae(){let i=new WeakMap;return{get:function e(n,r){const s=i.get(n);let o;return void 0===s?(o=new PU,i.set(n,[o])):r>=s.length?(o=new PU,s.push(o)):o=s[r],o},dispose:function t(){i=new WeakMap}}}function tae(){const i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new R,color:new Be};break;case"SpotLight":t={position:new R,direction:new R,color:new Be,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new R,color:new Be,distance:0,decay:0};break;case"HemisphereLight":t={direction:new R,skyColor:new Be,groundColor:new Be};break;case"RectAreaLight":t={color:new Be,position:new R,halfWidth:new R,halfHeight:new R}}return i[e.id]=t,t}}}let nae=0;function rae(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function sae(i,e){const t=new tae,n=function iae(){const i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe,shadowCameraNear:1,shadowCameraFar:1e3}}return i[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)r.probe.push(new R);const s=new R,o=new We,a=new We;return{setup:function l(d,u){let h=0,f=0,m=0;for(let k=0;k<9;k++)r.probe[k].set(0,0,0);let g=0,_=0,p=0,v=0,b=0,y=0,x=0,w=0,E=0,S=0;d.sort(rae);const C=!0===u?Math.PI:1;for(let k=0,U=d.length;k<U;k++){const B=d[k],j=B.color,H=B.intensity,L=B.distance,V=B.shadow&&B.shadow.map?B.shadow.map.texture:null;if(B.isAmbientLight)h+=j.r*H*C,f+=j.g*H*C,m+=j.b*H*C;else if(B.isLightProbe)for(let O=0;O<9;O++)r.probe[O].addScaledVector(B.sh.coefficients[O],H);else if(B.isDirectionalLight){const O=t.get(B);if(O.color.copy(B.color).multiplyScalar(B.intensity*C),B.castShadow){const Q=B.shadow,re=n.get(B);re.shadowBias=Q.bias,re.shadowNormalBias=Q.normalBias,re.shadowRadius=Q.radius,re.shadowMapSize=Q.mapSize,r.directionalShadow[g]=re,r.directionalShadowMap[g]=V,r.directionalShadowMatrix[g]=B.shadow.matrix,y++}r.directional[g]=O,g++}else if(B.isSpotLight){const O=t.get(B);O.position.setFromMatrixPosition(B.matrixWorld),O.color.copy(j).multiplyScalar(H*C),O.distance=L,O.coneCos=Math.cos(B.angle),O.penumbraCos=Math.cos(B.angle*(1-B.penumbra)),O.decay=B.decay,r.spot[p]=O;const Q=B.shadow;if(B.map&&(r.spotLightMap[E]=B.map,E++,Q.updateMatrices(B),B.castShadow&&S++),r.spotLightMatrix[p]=Q.matrix,B.castShadow){const re=n.get(B);re.shadowBias=Q.bias,re.shadowNormalBias=Q.normalBias,re.shadowRadius=Q.radius,re.shadowMapSize=Q.mapSize,r.spotShadow[p]=re,r.spotShadowMap[p]=V,w++}p++}else if(B.isRectAreaLight){const O=t.get(B);O.color.copy(j).multiplyScalar(H),O.halfWidth.set(.5*B.width,0,0),O.halfHeight.set(0,.5*B.height,0),r.rectArea[v]=O,v++}else if(B.isPointLight){const O=t.get(B);if(O.color.copy(B.color).multiplyScalar(B.intensity*C),O.distance=B.distance,O.decay=B.decay,B.castShadow){const Q=B.shadow,re=n.get(B);re.shadowBias=Q.bias,re.shadowNormalBias=Q.normalBias,re.shadowRadius=Q.radius,re.shadowMapSize=Q.mapSize,re.shadowCameraNear=Q.camera.near,re.shadowCameraFar=Q.camera.far,r.pointShadow[_]=re,r.pointShadowMap[_]=V,r.pointShadowMatrix[_]=B.shadow.matrix,x++}r.point[_]=O,_++}else if(B.isHemisphereLight){const O=t.get(B);O.skyColor.copy(B.color).multiplyScalar(H*C),O.groundColor.copy(B.groundColor).multiplyScalar(H*C),r.hemi[b]=O,b++}}v>0&&(e.isWebGL2||!0===i.has("OES_texture_float_linear")?(r.rectAreaLTC1=ot.LTC_FLOAT_1,r.rectAreaLTC2=ot.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=ot.LTC_HALF_1,r.rectAreaLTC2=ot.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=m;const T=r.hash;(T.directionalLength!==g||T.pointLength!==_||T.spotLength!==p||T.rectAreaLength!==v||T.hemiLength!==b||T.numDirectionalShadows!==y||T.numPointShadows!==x||T.numSpotShadows!==w||T.numSpotMaps!==E)&&(r.directional.length=g,r.spot.length=p,r.rectArea.length=v,r.point.length=_,r.hemi.length=b,r.directionalShadow.length=y,r.directionalShadowMap.length=y,r.pointShadow.length=x,r.pointShadowMap.length=x,r.spotShadow.length=w,r.spotShadowMap.length=w,r.directionalShadowMatrix.length=y,r.pointShadowMatrix.length=x,r.spotLightMatrix.length=w+E-S,r.spotLightMap.length=E,r.numSpotLightShadowsWithMaps=S,T.directionalLength=g,T.pointLength=_,T.spotLength=p,T.rectAreaLength=v,T.hemiLength=b,T.numDirectionalShadows=y,T.numPointShadows=x,T.numSpotShadows=w,T.numSpotMaps=E,r.version=nae++)},setupView:function c(d,u){let h=0,f=0,m=0,g=0,_=0;const p=u.matrixWorldInverse;for(let v=0,b=d.length;v<b;v++){const y=d[v];if(y.isDirectionalLight){const x=r.directional[h];x.direction.setFromMatrixPosition(y.matrixWorld),s.setFromMatrixPosition(y.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(p),h++}else if(y.isSpotLight){const x=r.spot[m];x.position.setFromMatrixPosition(y.matrixWorld),x.position.applyMatrix4(p),x.direction.setFromMatrixPosition(y.matrixWorld),s.setFromMatrixPosition(y.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(p),m++}else if(y.isRectAreaLight){const x=r.rectArea[g];x.position.setFromMatrixPosition(y.matrixWorld),x.position.applyMatrix4(p),a.identity(),o.copy(y.matrixWorld),o.premultiply(p),a.extractRotation(o),x.halfWidth.set(.5*y.width,0,0),x.halfHeight.set(0,.5*y.height,0),x.halfWidth.applyMatrix4(a),x.halfHeight.applyMatrix4(a),g++}else if(y.isPointLight){const x=r.point[f];x.position.setFromMatrixPosition(y.matrixWorld),x.position.applyMatrix4(p),f++}else if(y.isHemisphereLight){const x=r.hemi[_];x.direction.setFromMatrixPosition(y.matrixWorld),x.direction.transformDirection(p),_++}}},state:r}}function kU(i,e){const t=new sae(i,e),n=[],r=[];return{init:function s(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:function l(u){t.setup(n,u)},setupLightsView:function c(u){t.setupView(n,u)},pushLight:function o(u){n.push(u)},pushShadow:function a(u){r.push(u)}}}function oae(i,e){let t=new WeakMap;return{get:function n(s,o=0){const a=t.get(s);let l;return void 0===a?(l=new kU(i,e),t.set(s,[l])):o>=a.length?(l=new kU(i,e),a.push(l)):l=a[o],l},dispose:function r(){t=new WeakMap}}}class Zd extends Un{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Nj,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Xy extends Un{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function cae(i,e,t){let n=new Hy;const r=new pe,s=new pe,o=new ei,a=new Zd({depthPacking:X_}),l=new Xy,c={},d=t.maxTextureSize,u={[Ia]:zr,[zr]:Ia,[bs]:bs},h=new Dt({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new pe},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const m=new Mt;m.setAttribute("position",new Ci(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new nt(m,h),_=this;function p(y,x){const w=e.update(g);h.defines.VSM_SAMPLES!==y.blurSamples&&(h.defines.VSM_SAMPLES=y.blurSamples,f.defines.VSM_SAMPLES=y.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),null===y.mapPass&&(y.mapPass=new Gt(r.x,r.y)),h.uniforms.shadow_pass.value=y.map.texture,h.uniforms.resolution.value=y.mapSize,h.uniforms.radius.value=y.radius,i.setRenderTarget(y.mapPass),i.clear(),i.renderBufferDirect(x,null,w,h,g,null),f.uniforms.shadow_pass.value=y.mapPass.texture,f.uniforms.resolution.value=y.mapSize,f.uniforms.radius.value=y.radius,i.setRenderTarget(y.map),i.clear(),i.renderBufferDirect(x,null,w,f,g,null)}function v(y,x,w,E){let S=null;const C=!0===w.isPointLight?y.customDistanceMaterial:y.customDepthMaterial;if(void 0!==C)S=C;else if(S=!0===w.isPointLight?l:a,i.localClippingEnabled&&!0===x.clipShadows&&Array.isArray(x.clippingPlanes)&&0!==x.clippingPlanes.length||x.displacementMap&&0!==x.displacementScale||x.alphaMap&&x.alphaTest>0||x.map&&x.alphaTest>0){const T=S.uuid,k=x.uuid;let U=c[T];void 0===U&&(U={},c[T]=U);let B=U[k];void 0===B&&(B=S.clone(),U[k]=B),S=B}return S.visible=x.visible,S.wireframe=x.wireframe,S.side=E===df?null!==x.shadowSide?x.shadowSide:x.side:null!==x.shadowSide?x.shadowSide:u[x.side],S.alphaMap=x.alphaMap,S.alphaTest=x.alphaTest,S.map=x.map,S.clipShadows=x.clipShadows,S.clippingPlanes=x.clippingPlanes,S.clipIntersection=x.clipIntersection,S.displacementMap=x.displacementMap,S.displacementScale=x.displacementScale,S.displacementBias=x.displacementBias,S.wireframeLinewidth=x.wireframeLinewidth,S.linewidth=x.linewidth,!0===w.isPointLight&&!0===S.isMeshDistanceMaterial&&(i.properties.get(S).light=w),S}function b(y,x,w,E,S){if(!1===y.visible)return;if(y.layers.test(x.layers)&&(y.isMesh||y.isLine||y.isPoints)&&(y.castShadow||y.receiveShadow&&S===df)&&(!y.frustumCulled||n.intersectsObject(y))){y.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,y.matrixWorld);const k=e.update(y),U=y.material;if(Array.isArray(U)){const B=k.groups;for(let j=0,H=B.length;j<H;j++){const L=B[j],V=U[L.materialIndex];if(V&&V.visible){const O=v(y,V,E,S);i.renderBufferDirect(w,null,k,O,y,L)}}}else if(U.visible){const B=v(y,U,E,S);i.renderBufferDirect(w,null,k,B,y,null)}}const T=y.children;for(let k=0,U=T.length;k<U;k++)b(T[k],x,w,E,S)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=HS,this.render=function(y,x,w){if(!1===_.enabled||!1===_.autoUpdate&&!1===_.needsUpdate||0===y.length)return;const E=i.getRenderTarget(),S=i.getActiveCubeFace(),C=i.getActiveMipmapLevel(),T=i.state;T.setBlending(Xt),T.buffers.color.setClear(1,1,1,1),T.buffers.depth.setTest(!0),T.setScissorTest(!1);for(let k=0,U=y.length;k<U;k++){const B=y[k],j=B.shadow;if(void 0===j){console.warn("THREE.WebGLShadowMap:",B,"has no shadow.");continue}if(!1===j.autoUpdate&&!1===j.needsUpdate)continue;r.copy(j.mapSize);const H=j.getFrameExtents();r.multiply(H),s.copy(j.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/H.x),r.x=s.x*H.x,j.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/H.y),r.y=s.y*H.y,j.mapSize.y=s.y)),null===j.map&&(j.map=new Gt(r.x,r.y,this.type!==df?{minFilter:Zt,magFilter:Zt}:{}),j.map.texture.name=B.name+".shadowMap",j.camera.updateProjectionMatrix()),i.setRenderTarget(j.map),i.clear();const L=j.getViewportCount();for(let V=0;V<L;V++){const O=j.getViewport(V);o.set(s.x*O.x,s.y*O.y,s.x*O.z,s.y*O.w),T.viewport(o),j.updateMatrices(B,V),n=j.getFrustum(),b(x,w,j.camera,B,this.type)}!0!==j.isPointLightShadow&&this.type===df&&p(j,w),j.needsUpdate=!1}_.needsUpdate=!1,i.setRenderTarget(E,S,C)}}function dae(i,e,t){const n=t.isWebGL2,a=new function r(){let ie=!1;const ee=new ei;let ze=null;const ft=new ei(0,0,0,0);return{setMask:function(It){ze!==It&&!ie&&(i.colorMask(It,It,It,It),ze=It)},setLocked:function(It){ie=It},setClear:function(It,tn,bn,Er,tl){!0===tl&&(It*=Er,tn*=Er,bn*=Er),ee.set(It,tn,bn,Er),!1===ft.equals(ee)&&(i.clearColor(It,tn,bn,Er),ft.copy(ee))},reset:function(){ie=!1,ze=null,ft.set(-1,0,0,0)}}},l=new function s(){let ie=!1,ee=null,ze=null,ft=null;return{setTest:function(It){It?I(2929):ue(2929)},setMask:function(It){ee!==It&&!ie&&(i.depthMask(It),ee=It)},setFunc:function(It){if(ze!==It){switch(It){case dj:i.depthFunc(512);break;case uj:i.depthFunc(519);break;case hj:i.depthFunc(513);break;case ay:i.depthFunc(515);break;case fj:i.depthFunc(514);break;case pj:i.depthFunc(518);break;case mj:i.depthFunc(516);break;case gj:i.depthFunc(517);break;default:i.depthFunc(515)}ze=It}},setLocked:function(It){ie=It},setClear:function(It){ft!==It&&(i.clearDepth(It),ft=It)},reset:function(){ie=!1,ee=null,ze=null,ft=null}}},c=new function o(){let ie=!1,ee=null,ze=null,ft=null,It=null,tn=null,bn=null,Er=null,tl=null;return{setTest:function(kn){ie||(kn?I(2960):ue(2960))},setMask:function(kn){ee!==kn&&!ie&&(i.stencilMask(kn),ee=kn)},setFunc:function(kn,Ps,Vo){(ze!==kn||ft!==Ps||It!==Vo)&&(i.stencilFunc(kn,Ps,Vo),ze=kn,ft=Ps,It=Vo)},setOp:function(kn,Ps,Vo){(tn!==kn||bn!==Ps||Er!==Vo)&&(i.stencilOp(kn,Ps,Vo),tn=kn,bn=Ps,Er=Vo)},setLocked:function(kn){ie=kn},setClear:function(kn){tl!==kn&&(i.clearStencil(kn),tl=kn)},reset:function(){ie=!1,ee=null,ze=null,ft=null,It=null,tn=null,bn=null,Er=null,tl=null}}},d=new WeakMap,u=new WeakMap;let h={},f={},m=new WeakMap,g=[],_=null,p=!1,v=null,b=null,y=null,x=null,w=null,E=null,S=null,C=!1,T=null,k=null,U=null,B=null,j=null;const H=i.getParameter(35661);let L=!1,V=0;const O=i.getParameter(7938);-1!==O.indexOf("WebGL")?(V=parseFloat(/^WebGL (\d)/.exec(O)[1]),L=V>=1):-1!==O.indexOf("OpenGL ES")&&(V=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),L=V>=2);let Q=null,re={};const _e=i.getParameter(3088),de=i.getParameter(2978),Y=(new ei).fromArray(_e),q=(new ei).fromArray(de);function te(ie,ee,ze){const ft=new Uint8Array(4),It=i.createTexture();i.bindTexture(ie,It),i.texParameteri(ie,10241,9728),i.texParameteri(ie,10240,9728);for(let tn=0;tn<ze;tn++)i.texImage2D(ee+tn,0,6408,1,1,0,6408,5121,ft);return It}const $={};function I(ie){!0!==h[ie]&&(i.enable(ie),h[ie]=!0)}function ue(ie){!1!==h[ie]&&(i.disable(ie),h[ie]=!1)}$[3553]=te(3553,3553,1),$[34067]=te(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),I(2929),l.setFunc(ay),qe(!1),bt(GS),I(2884),Ee(Xt);const Ce={[vs]:32774,[nj]:32778,[rj]:32779};if(n)Ce[qS]=32775,Ce[YS]=32776;else{const ie=e.get("EXT_blend_minmax");null!==ie&&(Ce[qS]=ie.MIN_EXT,Ce[YS]=ie.MAX_EXT)}const we={[ff]:0,[N_]:1,[sj]:768,[pf]:770,[cj]:776,[oy]:774,[sy]:772,[oj]:769,[j_]:771,[lj]:775,[aj]:773};function Ee(ie,ee,ze,ft,It,tn,bn,Er){if(ie!==Xt){if(!1===p&&(I(3042),p=!0),ie===hf)It=It||ee,tn=tn||ze,bn=bn||ft,(ee!==b||It!==w)&&(i.blendEquationSeparate(Ce[ee],Ce[It]),b=ee,w=It),(ze!==y||ft!==x||tn!==E||bn!==S)&&(i.blendFuncSeparate(we[ze],we[ft],we[tn],we[bn]),y=ze,x=ft,E=tn,S=bn),v=ie,C=!1;else if(ie!==v||Er!==C){if((b!==vs||w!==vs)&&(i.blendEquation(32774),b=vs,w=vs),Er)switch(ie){case Da:i.blendFuncSeparate(1,771,1,771);break;case uf:i.blendFunc(1,1);break;case QS:i.blendFuncSeparate(0,769,0,1);break;case WS:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie)}else switch(ie){case Da:i.blendFuncSeparate(770,771,1,771);break;case uf:i.blendFunc(770,1);break;case QS:i.blendFuncSeparate(0,769,0,1);break;case WS:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie)}y=null,x=null,E=null,S=null,v=ie,C=Er}}else!0===p&&(ue(3042),p=!1)}function qe(ie){T!==ie&&(i.frontFace(ie?2304:2305),T=ie)}function bt(ie){ie!==ej?(I(2884),ie!==k&&i.cullFace(ie===GS?1029:ie===tj?1028:1032)):ue(2884),k=ie}function lt(ie,ee,ze){ie?(I(32823),(B!==ee||j!==ze)&&(i.polygonOffset(ee,ze),B=ee,j=ze)):ue(32823)}return{buffers:{color:a,depth:l,stencil:c},enable:I,disable:ue,bindFramebuffer:function Me(ie,ee){return f[ie]!==ee&&(i.bindFramebuffer(ie,ee),f[ie]=ee,n&&(36009===ie&&(f[36160]=ee),36160===ie&&(f[36009]=ee)),!0)},drawBuffers:function me(ie,ee){let ze=g,ft=!1;if(ie)if(ze=m.get(ee),void 0===ze&&(ze=[],m.set(ee,ze)),ie.isWebGLMultipleRenderTargets){const It=ie.texture;if(ze.length!==It.length||36064!==ze[0]){for(let tn=0,bn=It.length;tn<bn;tn++)ze[tn]=36064+tn;ze.length=It.length,ft=!0}}else 36064!==ze[0]&&(ze[0]=36064,ft=!0);else 1029!==ze[0]&&(ze[0]=1029,ft=!0);ft&&(t.isWebGL2?i.drawBuffers(ze):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ze))},useProgram:function He(ie){return _!==ie&&(i.useProgram(ie),_=ie,!0)},setBlending:Ee,setMaterial:function it(ie,ee){ie.side===bs?ue(2884):I(2884);let ze=ie.side===zr;ee&&(ze=!ze),qe(ze),ie.blending===Da&&!1===ie.transparent?Ee(Xt):Ee(ie.blending,ie.blendEquation,ie.blendSrc,ie.blendDst,ie.blendEquationAlpha,ie.blendSrcAlpha,ie.blendDstAlpha,ie.premultipliedAlpha),l.setFunc(ie.depthFunc),l.setTest(ie.depthTest),l.setMask(ie.depthWrite),a.setMask(ie.colorWrite);const ft=ie.stencilWrite;c.setTest(ft),ft&&(c.setMask(ie.stencilWriteMask),c.setFunc(ie.stencilFunc,ie.stencilRef,ie.stencilFuncMask),c.setOp(ie.stencilFail,ie.stencilZFail,ie.stencilZPass)),lt(ie.polygonOffset,ie.polygonOffsetFactor,ie.polygonOffsetUnits),!0===ie.alphaToCoverage?I(32926):ue(32926)},setFlipSided:qe,setCullFace:bt,setLineWidth:function At(ie){ie!==U&&(L&&i.lineWidth(ie),U=ie)},setPolygonOffset:lt,setScissorTest:function ut(ie){ie?I(3089):ue(3089)},activeTexture:function yt(ie){void 0===ie&&(ie=33984+H-1),Q!==ie&&(i.activeTexture(ie),Q=ie)},bindTexture:function N(ie,ee,ze){void 0===ze&&(ze=null===Q?33984+H-1:Q);let ft=re[ze];void 0===ft&&(ft={type:void 0,texture:void 0},re[ze]=ft),(ft.type!==ie||ft.texture!==ee)&&(Q!==ze&&(i.activeTexture(ze),Q=ze),i.bindTexture(ie,ee||$[ie]),ft.type=ie,ft.texture=ee)},unbindTexture:function F(){const ie=re[Q];void 0!==ie&&void 0!==ie.type&&(i.bindTexture(ie.type,null),ie.type=void 0,ie.texture=void 0)},compressedTexImage2D:function ve(){try{i.compressedTexImage2D.apply(i,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},compressedTexImage3D:function De(){try{i.compressedTexImage3D.apply(i,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},texImage2D:function ct(){try{i.texImage2D.apply(i,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},texImage3D:function ht(){try{i.texImage3D.apply(i,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},updateUBOMapping:function Bt(ie,ee){let ze=u.get(ee);void 0===ze&&(ze=new WeakMap,u.set(ee,ze));let ft=ze.get(ie);void 0===ft&&(ft=i.getUniformBlockIndex(ee,ie.name),ze.set(ie,ft))},uniformBlockBinding:function Rt(ie,ee){const ft=u.get(ee).get(ie);d.get(ee)!==ft&&(i.uniformBlockBinding(ee,ft,ie.__bindingPointIndex),d.set(ee,ft))},texStorage2D:function Ae(){try{i.texStorage2D.apply(i,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},texStorage3D:function Je(){try{i.texStorage3D.apply(i,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},texSubImage2D:function Ne(){try{i.texSubImage2D.apply(i,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},texSubImage3D:function et(){try{i.texSubImage3D.apply(i,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},compressedTexSubImage2D:function X(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},compressedTexSubImage3D:function Te(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},scissor:function $e(ie){!1===Y.equals(ie)&&(i.scissor(ie.x,ie.y,ie.z,ie.w),Y.copy(ie))},viewport:function tt(ie){!1===q.equals(ie)&&(i.viewport(ie.x,ie.y,ie.z,ie.w),q.copy(ie))},reset:function Kt(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),!0===n&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),h={},Q=null,re={},f={},m=new WeakMap,g=[],_=null,p=!1,v=null,b=null,y=null,x=null,w=null,E=null,S=null,C=!1,T=null,k=null,U=null,B=null,j=null,Y.set(0,0,i.canvas.width,i.canvas.height),q.set(0,0,i.canvas.width,i.canvas.height),a.reset(),l.reset(),c.reset()}}}function uae(i,e,t,n,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,d=r.maxTextureSize,u=r.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap;let g;const _=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function v(N,F){return p?new OffscreenCanvas(N,F):$_("canvas")}function b(N,F,ve,De){let Ne=1;if((N.width>De||N.height>De)&&(Ne=De/Math.max(N.width,N.height)),Ne<1||!0===F){if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap){const et=F?Gj:Math.floor,X=et(Ne*N.width),Te=et(Ne*N.height);void 0===g&&(g=v(X,Te));const Ae=ve?v(X,Te):g;return Ae.width=X,Ae.height=Te,Ae.getContext("2d").drawImage(N,0,0,X,Te),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+N.width+"x"+N.height+") to ("+X+"x"+Te+")."),Ae}return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+N.width+"x"+N.height+")."),N}return N}function y(N){return _T(N.width)&&_T(N.height)}function w(N,F){return N.generateMipmaps&&F&&N.minFilter!==Zt&&N.minFilter!==Ni}function E(N){i.generateMipmap(N)}function S(N,F,ve,De,Ne=!1){if(!1===a)return F;if(null!==N){if(void 0!==i[N])return i[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let et=F;return 6403===F&&(5126===ve&&(et=33326),5131===ve&&(et=33325),5121===ve&&(et=33321)),33319===F&&(5126===ve&&(et=33328),5131===ve&&(et=33327),5121===ve&&(et=33323)),6408===F&&(5126===ve&&(et=34836),5131===ve&&(et=34842),5121===ve&&(et=De===ci&&!1===Ne?35907:32856),32819===ve&&(et=32854),32820===ve&&(et=32855)),(33325===et||33326===et||33327===et||33328===et||34842===et||34836===et)&&e.get("EXT_color_buffer_float"),et}function C(N,F,ve){return!0===w(N,ve)||N.isFramebufferTexture&&N.minFilter!==Zt&&N.minFilter!==Ni?Math.log2(Math.max(F.width,F.height))+1:void 0!==N.mipmaps&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?F.mipmaps.length:1}function T(N){return N===Zt||N===z_||N===bf?9728:9729}function k(N){const F=N.target;F.removeEventListener("dispose",k),function B(N){const F=n.get(N);if(void 0===F.__webglInit)return;const ve=N.source,De=_.get(ve);if(De){const Ne=De[F.__cacheKey];Ne.usedTimes--,0===Ne.usedTimes&&j(N),0===Object.keys(De).length&&_.delete(ve)}n.remove(N)}(F),F.isVideoTexture&&m.delete(F)}function U(N){const F=N.target;F.removeEventListener("dispose",U),function H(N){const F=N.texture,ve=n.get(N),De=n.get(F);if(void 0!==De.__webglTexture&&(i.deleteTexture(De.__webglTexture),o.memory.textures--),N.depthTexture&&N.depthTexture.dispose(),N.isWebGLCubeRenderTarget)for(let Ne=0;Ne<6;Ne++)i.deleteFramebuffer(ve.__webglFramebuffer[Ne]),ve.__webglDepthbuffer&&i.deleteRenderbuffer(ve.__webglDepthbuffer[Ne]);else{if(i.deleteFramebuffer(ve.__webglFramebuffer),ve.__webglDepthbuffer&&i.deleteRenderbuffer(ve.__webglDepthbuffer),ve.__webglMultisampledFramebuffer&&i.deleteFramebuffer(ve.__webglMultisampledFramebuffer),ve.__webglColorRenderbuffer)for(let Ne=0;Ne<ve.__webglColorRenderbuffer.length;Ne++)ve.__webglColorRenderbuffer[Ne]&&i.deleteRenderbuffer(ve.__webglColorRenderbuffer[Ne]);ve.__webglDepthRenderbuffer&&i.deleteRenderbuffer(ve.__webglDepthRenderbuffer)}if(N.isWebGLMultipleRenderTargets)for(let Ne=0,et=F.length;Ne<et;Ne++){const X=n.get(F[Ne]);X.__webglTexture&&(i.deleteTexture(X.__webglTexture),o.memory.textures--),n.remove(F[Ne])}n.remove(F),n.remove(N)}(F)}function j(N){const F=n.get(N);i.deleteTexture(F.__webglTexture),delete _.get(N.source)[F.__cacheKey],o.memory.textures--}let L=0;function re(N,F){const ve=n.get(N);if(N.isVideoTexture&&function ut(N){const F=o.render.frame;m.get(N)!==F&&(m.set(N,F),N.update())}(N),!1===N.isRenderTargetTexture&&N.version>0&&ve.__version!==N.version){const De=N.image;if(null===De)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==De.complete)return void ue(ve,N,F);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(3553,ve.__webglTexture,33984+F)}const q={[xo]:10497,[mr]:33071,[_f]:33648},te={[Zt]:9728,[z_]:9984,[bf]:9986,[Ni]:9729,[cy]:9985,[Ws]:9987};function $(N,F,ve){if(ve?(i.texParameteri(N,10242,q[F.wrapS]),i.texParameteri(N,10243,q[F.wrapT]),(32879===N||35866===N)&&i.texParameteri(N,32882,q[F.wrapR]),i.texParameteri(N,10240,te[F.magFilter]),i.texParameteri(N,10241,te[F.minFilter])):(i.texParameteri(N,10242,33071),i.texParameteri(N,10243,33071),(32879===N||35866===N)&&i.texParameteri(N,32882,33071),(F.wrapS!==mr||F.wrapT!==mr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(N,10240,T(F.magFilter)),i.texParameteri(N,10241,T(F.minFilter)),F.minFilter!==Zt&&F.minFilter!==Ni&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const De=e.get("EXT_texture_filter_anisotropic");if(F.magFilter===Zt||F.minFilter!==bf&&F.minFilter!==Ws||F.type===Nn&&!1===e.has("OES_texture_float_linear")||!1===a&&F.type===pn&&!1===e.has("OES_texture_half_float_linear"))return;(F.anisotropy>1||n.get(F).__currentAnisotropy)&&(i.texParameterf(N,De.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,r.getMaxAnisotropy())),n.get(F).__currentAnisotropy=F.anisotropy)}}function I(N,F){let ve=!1;void 0===N.__webglInit&&(N.__webglInit=!0,F.addEventListener("dispose",k));const De=F.source;let Ne=_.get(De);void 0===Ne&&(Ne={},_.set(De,Ne));const et=function Q(N){const F=[];return F.push(N.wrapS),F.push(N.wrapT),F.push(N.wrapR||0),F.push(N.magFilter),F.push(N.minFilter),F.push(N.anisotropy),F.push(N.internalFormat),F.push(N.format),F.push(N.type),F.push(N.generateMipmaps),F.push(N.premultiplyAlpha),F.push(N.flipY),F.push(N.unpackAlignment),F.push(N.encoding),F.join()}(F);if(et!==N.__cacheKey){void 0===Ne[et]&&(Ne[et]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,ve=!0),Ne[et].usedTimes++;const X=Ne[N.__cacheKey];void 0!==X&&(Ne[N.__cacheKey].usedTimes--,0===X.usedTimes&&j(F)),N.__cacheKey=et,N.__webglTexture=Ne[et].texture}return ve}function ue(N,F,ve){let De=3553;(F.isDataArrayTexture||F.isCompressedArrayTexture)&&(De=35866),F.isData3DTexture&&(De=32879);const Ne=I(N,F),et=F.source;t.bindTexture(De,N.__webglTexture,33984+ve);const X=n.get(et);if(et.version!==X.__version||!0===Ne){t.activeTexture(33984+ve),i.pixelStorei(37440,F.flipY),i.pixelStorei(37441,F.premultiplyAlpha),i.pixelStorei(3317,F.unpackAlignment),i.pixelStorei(37443,0);const Te=function x(N){return!a&&(N.wrapS!==mr||N.wrapT!==mr||N.minFilter!==Zt&&N.minFilter!==Ni)}(F)&&!1===y(F.image);let Ae=b(F.image,Te,!1,d);Ae=yt(F,Ae);const Je=y(Ae)||a,ct=s.convert(F.format,F.encoding);let tt,ht=s.convert(F.type),$e=S(F.internalFormat,ct,ht,F.encoding,F.isVideoTexture);$(De,F,Je);const Bt=F.mipmaps,Rt=a&&!0!==F.isVideoTexture,Kt=void 0===X.__version||!0===Ne,ie=C(F,Ae,Je);if(F.isDepthTexture)$e=6402,a?$e=F.type===Nn?36012:F.type===ac?33190:F.type===lc?35056:33189:F.type===Nn&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),F.format===cc&&6402===$e&&F.type!==G_&&F.type!==ac&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),F.type=ac,ht=s.convert(F.type)),F.format===dc&&6402===$e&&($e=34041,F.type!==lc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),F.type=lc,ht=s.convert(F.type))),Kt&&(Rt?t.texStorage2D(3553,1,$e,Ae.width,Ae.height):t.texImage2D(3553,0,$e,Ae.width,Ae.height,0,ct,ht,null));else if(F.isDataTexture)if(Bt.length>0&&Je){Rt&&Kt&&t.texStorage2D(3553,ie,$e,Bt[0].width,Bt[0].height);for(let ee=0,ze=Bt.length;ee<ze;ee++)tt=Bt[ee],Rt?t.texSubImage2D(3553,ee,0,0,tt.width,tt.height,ct,ht,tt.data):t.texImage2D(3553,ee,$e,tt.width,tt.height,0,ct,ht,tt.data);F.generateMipmaps=!1}else Rt?(Kt&&t.texStorage2D(3553,ie,$e,Ae.width,Ae.height),t.texSubImage2D(3553,0,0,0,Ae.width,Ae.height,ct,ht,Ae.data)):t.texImage2D(3553,0,$e,Ae.width,Ae.height,0,ct,ht,Ae.data);else if(F.isCompressedTexture)if(F.isCompressedArrayTexture){Rt&&Kt&&t.texStorage3D(35866,ie,$e,Bt[0].width,Bt[0].height,Ae.depth);for(let ee=0,ze=Bt.length;ee<ze;ee++)tt=Bt[ee],F.format!==Rn?null!==ct?Rt?t.compressedTexSubImage3D(35866,ee,0,0,0,tt.width,tt.height,Ae.depth,ct,tt.data,0,0):t.compressedTexImage3D(35866,ee,$e,tt.width,tt.height,Ae.depth,0,tt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Rt?t.texSubImage3D(35866,ee,0,0,0,tt.width,tt.height,Ae.depth,ct,ht,tt.data):t.texImage3D(35866,ee,$e,tt.width,tt.height,Ae.depth,0,ct,ht,tt.data)}else{Rt&&Kt&&t.texStorage2D(3553,ie,$e,Bt[0].width,Bt[0].height);for(let ee=0,ze=Bt.length;ee<ze;ee++)tt=Bt[ee],F.format!==Rn?null!==ct?Rt?t.compressedTexSubImage2D(3553,ee,0,0,tt.width,tt.height,ct,tt.data):t.compressedTexImage2D(3553,ee,$e,tt.width,tt.height,0,tt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Rt?t.texSubImage2D(3553,ee,0,0,tt.width,tt.height,ct,ht,tt.data):t.texImage2D(3553,ee,$e,tt.width,tt.height,0,ct,ht,tt.data)}else if(F.isDataArrayTexture)Rt?(Kt&&t.texStorage3D(35866,ie,$e,Ae.width,Ae.height,Ae.depth),t.texSubImage3D(35866,0,0,0,0,Ae.width,Ae.height,Ae.depth,ct,ht,Ae.data)):t.texImage3D(35866,0,$e,Ae.width,Ae.height,Ae.depth,0,ct,ht,Ae.data);else if(F.isData3DTexture)Rt?(Kt&&t.texStorage3D(32879,ie,$e,Ae.width,Ae.height,Ae.depth),t.texSubImage3D(32879,0,0,0,0,Ae.width,Ae.height,Ae.depth,ct,ht,Ae.data)):t.texImage3D(32879,0,$e,Ae.width,Ae.height,Ae.depth,0,ct,ht,Ae.data);else if(F.isFramebufferTexture){if(Kt)if(Rt)t.texStorage2D(3553,ie,$e,Ae.width,Ae.height);else{let ee=Ae.width,ze=Ae.height;for(let ft=0;ft<ie;ft++)t.texImage2D(3553,ft,$e,ee,ze,0,ct,ht,null),ee>>=1,ze>>=1}}else if(Bt.length>0&&Je){Rt&&Kt&&t.texStorage2D(3553,ie,$e,Bt[0].width,Bt[0].height);for(let ee=0,ze=Bt.length;ee<ze;ee++)tt=Bt[ee],Rt?t.texSubImage2D(3553,ee,0,0,ct,ht,tt):t.texImage2D(3553,ee,$e,ct,ht,tt);F.generateMipmaps=!1}else Rt?(Kt&&t.texStorage2D(3553,ie,$e,Ae.width,Ae.height),t.texSubImage2D(3553,0,0,0,ct,ht,Ae)):t.texImage2D(3553,0,$e,ct,ht,Ae);w(F,Je)&&E(De),X.__version=et.version,F.onUpdate&&F.onUpdate(F)}N.__version=F.version}function me(N,F,ve,De,Ne){const et=s.convert(ve.format,ve.encoding),X=s.convert(ve.type),Te=S(ve.internalFormat,et,X,ve.encoding);n.get(F).__hasExternalTextures||(32879===Ne||35866===Ne?t.texImage3D(Ne,0,Te,F.width,F.height,F.depth,0,et,X,null):t.texImage2D(Ne,0,Te,F.width,F.height,0,et,X,null)),t.bindFramebuffer(36160,N),lt(F)?h.framebufferTexture2DMultisampleEXT(36160,De,Ne,n.get(ve).__webglTexture,0,At(F)):(3553===Ne||Ne>=34069&&Ne<=34074)&&i.framebufferTexture2D(36160,De,Ne,n.get(ve).__webglTexture,0),t.bindFramebuffer(36160,null)}function He(N,F,ve){if(i.bindRenderbuffer(36161,N),F.depthBuffer&&!F.stencilBuffer){let De=33189;if(ve||lt(F)){const Ne=F.depthTexture;Ne&&Ne.isDepthTexture&&(Ne.type===Nn?De=36012:Ne.type===ac&&(De=33190));const et=At(F);lt(F)?h.renderbufferStorageMultisampleEXT(36161,et,De,F.width,F.height):i.renderbufferStorageMultisample(36161,et,De,F.width,F.height)}else i.renderbufferStorage(36161,De,F.width,F.height);i.framebufferRenderbuffer(36160,36096,36161,N)}else if(F.depthBuffer&&F.stencilBuffer){const De=At(F);ve&&!1===lt(F)?i.renderbufferStorageMultisample(36161,De,35056,F.width,F.height):lt(F)?h.renderbufferStorageMultisampleEXT(36161,De,35056,F.width,F.height):i.renderbufferStorage(36161,34041,F.width,F.height),i.framebufferRenderbuffer(36160,33306,36161,N)}else{const De=!0===F.isWebGLMultipleRenderTargets?F.texture:[F.texture];for(let Ne=0;Ne<De.length;Ne++){const et=De[Ne],X=s.convert(et.format,et.encoding),Te=s.convert(et.type),Ae=S(et.internalFormat,X,Te,et.encoding),Je=At(F);ve&&!1===lt(F)?i.renderbufferStorageMultisample(36161,Je,Ae,F.width,F.height):lt(F)?h.renderbufferStorageMultisampleEXT(36161,Je,Ae,F.width,F.height):i.renderbufferStorage(36161,Ae,F.width,F.height)}}i.bindRenderbuffer(36161,null)}function we(N){const F=n.get(N),ve=!0===N.isWebGLCubeRenderTarget;if(N.depthTexture&&!F.__autoAllocateDepthBuffer){if(ve)throw new Error("target.depthTexture not supported in Cube render targets");!function Ce(N,F){if(F&&F.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,N),!F.depthTexture||!F.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(F.depthTexture).__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),re(F.depthTexture,0);const De=n.get(F.depthTexture).__webglTexture,Ne=At(F);if(F.depthTexture.format===cc)lt(F)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,De,0,Ne):i.framebufferTexture2D(36160,36096,3553,De,0);else{if(F.depthTexture.format!==dc)throw new Error("Unknown depthTexture format");lt(F)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,De,0,Ne):i.framebufferTexture2D(36160,33306,3553,De,0)}}(F.__webglFramebuffer,N)}else if(ve){F.__webglDepthbuffer=[];for(let De=0;De<6;De++)t.bindFramebuffer(36160,F.__webglFramebuffer[De]),F.__webglDepthbuffer[De]=i.createRenderbuffer(),He(F.__webglDepthbuffer[De],N,!1)}else t.bindFramebuffer(36160,F.__webglFramebuffer),F.__webglDepthbuffer=i.createRenderbuffer(),He(F.__webglDepthbuffer,N,!1);t.bindFramebuffer(36160,null)}function At(N){return Math.min(u,N.samples)}function lt(N){const F=n.get(N);return a&&N.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==F.__useRenderToTexture}function yt(N,F){const ve=N.encoding,De=N.format,Ne=N.type;return!0===N.isCompressedTexture||!0===N.isVideoTexture||N.format===yy||ve!==qs&&(ve===ci?!1===a?!0===e.has("EXT_sRGB")&&De===Rn?(N.format=yy,N.minFilter=Ni,N.generateMipmaps=!1):F=AT.sRGBToLinear(F):(De!==Rn||Ne!==Gr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ve)),F}this.allocateTextureUnit=function O(){const N=L;return N>=l&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+l),L+=1,N},this.resetTextureUnits=function V(){L=0},this.setTexture2D=re,this.setTexture2DArray=function _e(N,F){const ve=n.get(N);N.version>0&&ve.__version!==N.version?ue(ve,N,F):t.bindTexture(35866,ve.__webglTexture,33984+F)},this.setTexture3D=function de(N,F){const ve=n.get(N);N.version>0&&ve.__version!==N.version?ue(ve,N,F):t.bindTexture(32879,ve.__webglTexture,33984+F)},this.setTextureCube=function Y(N,F){const ve=n.get(N);N.version>0&&ve.__version!==N.version?function Me(N,F,ve){if(6!==F.image.length)return;const De=I(N,F),Ne=F.source;t.bindTexture(34067,N.__webglTexture,33984+ve);const et=n.get(Ne);if(Ne.version!==et.__version||!0===De){t.activeTexture(33984+ve),i.pixelStorei(37440,F.flipY),i.pixelStorei(37441,F.premultiplyAlpha),i.pixelStorei(3317,F.unpackAlignment),i.pixelStorei(37443,0);const X=F.isCompressedTexture||F.image[0].isCompressedTexture,Te=F.image[0]&&F.image[0].isDataTexture,Ae=[];for(let ee=0;ee<6;ee++)Ae[ee]=X||Te?Te?F.image[ee].image:F.image[ee]:b(F.image[ee],!1,!0,c),Ae[ee]=yt(F,Ae[ee]);const Je=Ae[0],ct=y(Je)||a,ht=s.convert(F.format,F.encoding),$e=s.convert(F.type),tt=S(F.internalFormat,ht,$e,F.encoding),Bt=a&&!0!==F.isVideoTexture,Rt=void 0===et.__version||!0===De;let ie,Kt=C(F,Je,ct);if($(34067,F,ct),X){Bt&&Rt&&t.texStorage2D(34067,Kt,tt,Je.width,Je.height);for(let ee=0;ee<6;ee++){ie=Ae[ee].mipmaps;for(let ze=0;ze<ie.length;ze++){const ft=ie[ze];F.format!==Rn?null!==ht?Bt?t.compressedTexSubImage2D(34069+ee,ze,0,0,ft.width,ft.height,ht,ft.data):t.compressedTexImage2D(34069+ee,ze,tt,ft.width,ft.height,0,ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Bt?t.texSubImage2D(34069+ee,ze,0,0,ft.width,ft.height,ht,$e,ft.data):t.texImage2D(34069+ee,ze,tt,ft.width,ft.height,0,ht,$e,ft.data)}}}else{ie=F.mipmaps,Bt&&Rt&&(ie.length>0&&Kt++,t.texStorage2D(34067,Kt,tt,Ae[0].width,Ae[0].height));for(let ee=0;ee<6;ee++)if(Te){Bt?t.texSubImage2D(34069+ee,0,0,0,Ae[ee].width,Ae[ee].height,ht,$e,Ae[ee].data):t.texImage2D(34069+ee,0,tt,Ae[ee].width,Ae[ee].height,0,ht,$e,Ae[ee].data);for(let ze=0;ze<ie.length;ze++){const It=ie[ze].image[ee].image;Bt?t.texSubImage2D(34069+ee,ze+1,0,0,It.width,It.height,ht,$e,It.data):t.texImage2D(34069+ee,ze+1,tt,It.width,It.height,0,ht,$e,It.data)}}else{Bt?t.texSubImage2D(34069+ee,0,0,0,ht,$e,Ae[ee]):t.texImage2D(34069+ee,0,tt,ht,$e,Ae[ee]);for(let ze=0;ze<ie.length;ze++){const ft=ie[ze];Bt?t.texSubImage2D(34069+ee,ze+1,0,0,ht,$e,ft.image[ee]):t.texImage2D(34069+ee,ze+1,tt,ht,$e,ft.image[ee])}}}w(F,ct)&&E(34067),et.__version=Ne.version,F.onUpdate&&F.onUpdate(F)}N.__version=F.version}(ve,N,F):t.bindTexture(34067,ve.__webglTexture,33984+F)},this.rebindTextures=function Ee(N,F,ve){const De=n.get(N);void 0!==F&&me(De.__webglFramebuffer,N,N.texture,36064,3553),void 0!==ve&&we(N)},this.setupRenderTarget=function it(N){const F=N.texture,ve=n.get(N),De=n.get(F);N.addEventListener("dispose",U),!0!==N.isWebGLMultipleRenderTargets&&(void 0===De.__webglTexture&&(De.__webglTexture=i.createTexture()),De.__version=F.version,o.memory.textures++);const Ne=!0===N.isWebGLCubeRenderTarget,et=!0===N.isWebGLMultipleRenderTargets,X=y(N)||a;if(Ne){ve.__webglFramebuffer=[];for(let Te=0;Te<6;Te++)ve.__webglFramebuffer[Te]=i.createFramebuffer()}else{if(ve.__webglFramebuffer=i.createFramebuffer(),et)if(r.drawBuffers){const Te=N.texture;for(let Ae=0,Je=Te.length;Ae<Je;Ae++){const ct=n.get(Te[Ae]);void 0===ct.__webglTexture&&(ct.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&N.samples>0&&!1===lt(N)){const Te=et?F:[F];ve.__webglMultisampledFramebuffer=i.createFramebuffer(),ve.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ve.__webglMultisampledFramebuffer);for(let Ae=0;Ae<Te.length;Ae++){const Je=Te[Ae];ve.__webglColorRenderbuffer[Ae]=i.createRenderbuffer(),i.bindRenderbuffer(36161,ve.__webglColorRenderbuffer[Ae]);const ct=s.convert(Je.format,Je.encoding),ht=s.convert(Je.type),$e=S(Je.internalFormat,ct,ht,Je.encoding,!0===N.isXRRenderTarget),tt=At(N);i.renderbufferStorageMultisample(36161,tt,$e,N.width,N.height),i.framebufferRenderbuffer(36160,36064+Ae,36161,ve.__webglColorRenderbuffer[Ae])}i.bindRenderbuffer(36161,null),N.depthBuffer&&(ve.__webglDepthRenderbuffer=i.createRenderbuffer(),He(ve.__webglDepthRenderbuffer,N,!0)),t.bindFramebuffer(36160,null)}}if(Ne){t.bindTexture(34067,De.__webglTexture),$(34067,F,X);for(let Te=0;Te<6;Te++)me(ve.__webglFramebuffer[Te],N,F,36064,34069+Te);w(F,X)&&E(34067),t.unbindTexture()}else if(et){const Te=N.texture;for(let Ae=0,Je=Te.length;Ae<Je;Ae++){const ct=Te[Ae],ht=n.get(ct);t.bindTexture(3553,ht.__webglTexture),$(3553,ct,X),me(ve.__webglFramebuffer,N,ct,36064+Ae,3553),w(ct,X)&&E(3553)}t.unbindTexture()}else{let Te=3553;(N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(a?Te=N.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Te,De.__webglTexture),$(Te,F,X),me(ve.__webglFramebuffer,N,F,36064,Te),w(F,X)&&E(Te),t.unbindTexture()}N.depthBuffer&&we(N)},this.updateRenderTargetMipmap=function qe(N){const F=y(N)||a,ve=!0===N.isWebGLMultipleRenderTargets?N.texture:[N.texture];for(let De=0,Ne=ve.length;De<Ne;De++){const et=ve[De];if(w(et,F)){const X=N.isWebGLCubeRenderTarget?34067:3553,Te=n.get(et).__webglTexture;t.bindTexture(X,Te),E(X),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function bt(N){if(a&&N.samples>0&&!1===lt(N)){const F=N.isWebGLMultipleRenderTargets?N.texture:[N.texture],ve=N.width,De=N.height;let Ne=16384;const et=[],X=N.stencilBuffer?33306:36096,Te=n.get(N),Ae=!0===N.isWebGLMultipleRenderTargets;if(Ae)for(let Je=0;Je<F.length;Je++)t.bindFramebuffer(36160,Te.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Je,36161,null),t.bindFramebuffer(36160,Te.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Je,3553,null,0);t.bindFramebuffer(36008,Te.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Te.__webglFramebuffer);for(let Je=0;Je<F.length;Je++){et.push(36064+Je),N.depthBuffer&&et.push(X);const ct=void 0!==Te.__ignoreDepthValues&&Te.__ignoreDepthValues;if(!1===ct&&(N.depthBuffer&&(Ne|=256),N.stencilBuffer&&(Ne|=1024)),Ae&&i.framebufferRenderbuffer(36008,36064,36161,Te.__webglColorRenderbuffer[Je]),!0===ct&&(i.invalidateFramebuffer(36008,[X]),i.invalidateFramebuffer(36009,[X])),Ae){const ht=n.get(F[Je]).__webglTexture;i.framebufferTexture2D(36009,36064,3553,ht,0)}i.blitFramebuffer(0,0,ve,De,0,0,ve,De,Ne,9728),f&&i.invalidateFramebuffer(36008,et)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Ae)for(let Je=0;Je<F.length;Je++){t.bindFramebuffer(36160,Te.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Je,36161,Te.__webglColorRenderbuffer[Je]);const ct=n.get(F[Je]).__webglTexture;t.bindFramebuffer(36160,Te.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Je,3553,ct,0)}t.bindFramebuffer(36009,Te.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=we,this.setupFrameBufferTexture=me,this.useMultisampledRTT=lt}function LU(i,e,t){const n=t.isWebGL2;return{convert:function r(s,o=null){let a;if(s===Gr)return 5121;if(s===Sj)return 32819;if(s===Tj)return 32820;if(s===Cj)return 5120;if(s===Mj)return 5122;if(s===G_)return 5123;if(s===Ej)return 5124;if(s===ac)return 5125;if(s===Nn)return 5126;if(s===pn)return n?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(s===Rj)return 6406;if(s===Rn)return 6408;if(s===dy)return 6409;if(s===Ij)return 6410;if(s===cc)return 6402;if(s===dc)return 34041;if(s===yy)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(s===Al)return 6403;if(s===Dj)return 36244;if(s===vf)return 33319;if(s===Pj)return 33320;if(s===kj)return 36249;if(s===Af||s===uy||s===H_||s===yf)if(o===ci){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(s===Af)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===uy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===H_)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===yf)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(s===Af)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===uy)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===H_)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===yf)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(s===xf||s===Q_||s===wf||s===W_){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(s===xf)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Q_)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===wf)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===W_)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(s===hy)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===fy||s===py){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(s===fy)return o===ci?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===py)return o===ci?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(s===my||s===XS||s===ZS||s===KS||s===$S||s===JS||s===eT||s===tT||s===iT||s===nT||s===rT||s===sT||s===oT||s===aT){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(s===my)return o===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===XS)return o===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===ZS)return o===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===KS)return o===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===$S)return o===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===JS)return o===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===eT)return o===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===tT)return o===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===iT)return o===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===nT)return o===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===rT)return o===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===sT)return o===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===oT)return o===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===aT)return o===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(s===q_){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(s===q_)return o===ci?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(s===Lj||s===lT||s===cT||s===dT){if(a=e.get("EXT_texture_compression_rgtc"),null===a)return null;if(s===q_)return a.COMPRESSED_RED_RGTC1_EXT;if(s===lT)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===cT)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===dT)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return s===lc?n?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==i[s]?i[s]:null}}}class GT extends In{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class xs extends pi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const hae={type:"move"};class HT{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new xs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new xs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new R,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new R),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new xs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new R,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new R),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){o=!0;for(const g of e.hand.values()){const _=t.getJointPose(g,n),p=this._getHandJoint(c,g);null!==_&&(p.matrix.fromArray(_.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.jointRadius=_.radius),p.visible=null!==_}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,m=.005;c.inputState.pinching&&h>f+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(hae)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new xs;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class qf extends An{constructor(e,t,n,r,s,o,a,l,c,d){if((d=void 0!==d?d:cc)!==cc&&d!==dc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&d===cc&&(n=ac),void 0===n&&d===dc&&(n=lc),super(null,r,s,o,a,l,d,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:Zt,this.minFilter=void 0!==l?l:Zt,this.flipY=!1,this.generateMipmaps=!1}}class fae extends ns{constructor(e,t){super();const n=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,d=null,u=null,h=null,f=null,m=null;const g=t.getContextAttributes();let _=null,p=null;const v=[],b=[],y=new Set,x=new Map,w=new In;w.layers.enable(1),w.viewport=new ei;const E=new In;E.layers.enable(2),E.viewport=new ei;const S=[w,E],C=new GT;C.layers.enable(1),C.layers.enable(2);let T=null,k=null;function U(Y){const q=b.indexOf(Y.inputSource);if(-1===q)return;const te=v[q];void 0!==te&&te.dispatchEvent({type:Y.type,data:Y.inputSource})}function B(){r.removeEventListener("select",U),r.removeEventListener("selectstart",U),r.removeEventListener("selectend",U),r.removeEventListener("squeeze",U),r.removeEventListener("squeezestart",U),r.removeEventListener("squeezeend",U),r.removeEventListener("end",B),r.removeEventListener("inputsourceschange",j);for(let Y=0;Y<v.length;Y++){const q=b[Y];null!==q&&(b[Y]=null,v[Y].disconnect(q))}T=null,k=null,e.setRenderTarget(_),f=null,h=null,u=null,r=null,p=null,de.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function j(Y){for(let q=0;q<Y.removed.length;q++){const te=Y.removed[q],$=b.indexOf(te);$>=0&&(b[$]=null,v[$].disconnect(te))}for(let q=0;q<Y.added.length;q++){const te=Y.added[q];let $=b.indexOf(te);if(-1===$){for(let ue=0;ue<v.length;ue++){if(ue>=b.length){b.push(te),$=ue;break}if(null===b[ue]){b[ue]=te,$=ue;break}}if(-1===$)break}const I=v[$];I&&I.connect(te)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Y){let q=v[Y];return void 0===q&&(q=new HT,v[Y]=q),q.getTargetRaySpace()},this.getControllerGrip=function(Y){let q=v[Y];return void 0===q&&(q=new HT,v[Y]=q),q.getGripSpace()},this.getHand=function(Y){let q=v[Y];return void 0===q&&(q=new HT,v[Y]=q),q.getHandSpace()},this.setFramebufferScaleFactor=function(Y){s=Y,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Y){a=Y,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(Y){c=Y},this.getBaseLayer=function(){return null!==h?h:f},this.getBinding=function(){return u},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=function(){var Y=is(function*(q){if(r=q,null!==r){if(_=e.getRenderTarget(),r.addEventListener("select",U),r.addEventListener("selectstart",U),r.addEventListener("selectend",U),r.addEventListener("squeeze",U),r.addEventListener("squeezestart",U),r.addEventListener("squeezeend",U),r.addEventListener("end",B),r.addEventListener("inputsourceschange",j),!0!==g.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)f=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||g.antialias,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:f}),p=new Gt(f.framebufferWidth,f.framebufferHeight,{format:Rn,type:Gr,encoding:e.outputEncoding,stencilBuffer:g.stencil});else{let te=null,$=null,I=null;g.depth&&(I=g.stencil?35056:33190,te=g.stencil?dc:cc,$=g.stencil?lc:ac);const ue={colorFormat:32856,depthFormat:I,scaleFactor:s};u=new XRWebGLBinding(r,t),h=u.createProjectionLayer(ue),r.updateRenderState({layers:[h]}),p=new Gt(h.textureWidth,h.textureHeight,{format:Rn,type:Gr,depthTexture:new qf(h.textureWidth,h.textureHeight,$,void 0,void 0,void 0,void 0,void 0,void 0,te),stencilBuffer:g.stencil,encoding:e.outputEncoding,samples:g.antialias?4:0}),e.properties.get(p).__ignoreDepthValues=h.ignoreDepthValues}p.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=yield r.requestReferenceSpace(a),de.setContext(r),de.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(q){return Y.apply(this,arguments)}}();const H=new R,L=new R;function O(Y,q){null===q?Y.matrixWorld.copy(Y.matrix):Y.matrixWorld.multiplyMatrices(q.matrixWorld,Y.matrix),Y.matrixWorldInverse.copy(Y.matrixWorld).invert()}this.updateCamera=function(Y){if(null===r)return;C.near=E.near=w.near=Y.near,C.far=E.far=w.far=Y.far,(T!==C.near||k!==C.far)&&(r.updateRenderState({depthNear:C.near,depthFar:C.far}),T=C.near,k=C.far);const q=Y.parent,te=C.cameras;O(C,q);for(let $=0;$<te.length;$++)O(te[$],q);2===te.length?function V(Y,q,te){H.setFromMatrixPosition(q.matrixWorld),L.setFromMatrixPosition(te.matrixWorld);const $=H.distanceTo(L),I=q.projectionMatrix.elements,ue=te.projectionMatrix.elements,Me=I[14]/(I[10]-1),me=I[14]/(I[10]+1),He=(I[9]+1)/I[5],Ce=(I[9]-1)/I[5],we=(I[8]-1)/I[0],Ee=(ue[8]+1)/ue[0],it=Me*we,qe=Me*Ee,bt=$/(-we+Ee),At=bt*-we;q.matrixWorld.decompose(Y.position,Y.quaternion,Y.scale),Y.translateX(At),Y.translateZ(bt),Y.matrixWorld.compose(Y.position,Y.quaternion,Y.scale),Y.matrixWorldInverse.copy(Y.matrixWorld).invert();const lt=Me+bt,ut=me+bt;Y.projectionMatrix.makePerspective(it-At,qe+($-At),He*me/ut*lt,Ce*me/ut*lt,lt,ut),Y.projectionMatrixInverse.copy(Y.projectionMatrix).invert()}(C,w,E):C.projectionMatrix.copy(w.projectionMatrix),function Q(Y,q,te){null===te?Y.matrix.copy(q.matrixWorld):(Y.matrix.copy(te.matrixWorld),Y.matrix.invert(),Y.matrix.multiply(q.matrixWorld)),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale),Y.updateMatrixWorld(!0);const $=Y.children;for(let I=0,ue=$.length;I<ue;I++)$[I].updateMatrixWorld(!0);Y.projectionMatrix.copy(q.projectionMatrix),Y.projectionMatrixInverse.copy(q.projectionMatrixInverse),Y.isPerspectiveCamera&&(Y.fov=2*Mf*Math.atan(1/Y.projectionMatrix.elements[5]),Y.zoom=1)}(Y,C,q)},this.getCamera=function(){return C},this.getFoveation=function(){if(null!==h||null!==f)return l},this.setFoveation=function(Y){l=Y,null!==h&&(h.fixedFoveation=Y),null!==f&&void 0!==f.fixedFoveation&&(f.fixedFoveation=Y)},this.getPlanes=function(){return y};let re=null;const de=new lU;de.setAnimationLoop(function _e(Y,q){if(d=q.getViewerPose(c||o),m=q,null!==d){const te=d.views;null!==f&&(e.setRenderTargetFramebuffer(p,f.framebuffer),e.setRenderTarget(p));let $=!1;te.length!==C.cameras.length&&(C.cameras.length=0,$=!0);for(let I=0;I<te.length;I++){const ue=te[I];let Me=null;if(null!==f)Me=f.getViewport(ue);else{const He=u.getViewSubImage(h,ue);Me=He.viewport,0===I&&(e.setRenderTargetTextures(p,He.colorTexture,h.ignoreDepthValues?void 0:He.depthStencilTexture),e.setRenderTarget(p))}let me=S[I];void 0===me&&(me=new In,me.layers.enable(I),me.viewport=new ei,S[I]=me),me.matrix.fromArray(ue.transform.matrix),me.matrix.decompose(me.position,me.quaternion,me.scale),me.projectionMatrix.fromArray(ue.projectionMatrix),me.projectionMatrixInverse.copy(me.projectionMatrix).invert(),me.viewport.set(Me.x,Me.y,Me.width,Me.height),0===I&&(C.matrix.copy(me.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),!0===$&&C.cameras.push(me)}}for(let te=0;te<v.length;te++){const $=b[te],I=v[te];null!==$&&void 0!==I&&I.update($,q,c||o)}if(re&&re(Y,q),q.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:q.detectedPlanes});let te=null;for(const $ of y)q.detectedPlanes.has($)||(null===te&&(te=[]),te.push($));if(null!==te)for(const $ of te)y.delete($),x.delete($),n.dispatchEvent({type:"planeremoved",data:$});for(const $ of q.detectedPlanes)if(y.has($)){const I=x.get($);$.lastChangedTime>I&&(x.set($,$.lastChangedTime),n.dispatchEvent({type:"planechanged",data:$}))}else y.add($),x.set($,q.lastChangedTime),n.dispatchEvent({type:"planeadded",data:$})}m=null}),this.setAnimationLoop=function(Y){re=Y},this.dispose=function(){}}}function pae(i,e){function t(_,p){!0===_.matrixAutoUpdate&&_.updateMatrix(),p.value.copy(_.matrix)}function s(_,p){_.opacity.value=p.opacity,p.color&&_.diffuse.value.copy(p.color),p.emissive&&_.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(_.map.value=p.map,t(p.map,_.mapTransform)),p.alphaMap&&(_.alphaMap.value=p.alphaMap,t(p.alphaMap,_.alphaMapTransform)),p.bumpMap&&(_.bumpMap.value=p.bumpMap,t(p.bumpMap,_.bumpMapTransform),_.bumpScale.value=p.bumpScale,p.side===zr&&(_.bumpScale.value*=-1)),p.normalMap&&(_.normalMap.value=p.normalMap,t(p.normalMap,_.normalMapTransform),_.normalScale.value.copy(p.normalScale),p.side===zr&&_.normalScale.value.negate()),p.displacementMap&&(_.displacementMap.value=p.displacementMap,t(p.displacementMap,_.displacementMapTransform),_.displacementScale.value=p.displacementScale,_.displacementBias.value=p.displacementBias),p.emissiveMap&&(_.emissiveMap.value=p.emissiveMap,t(p.emissiveMap,_.emissiveMapTransform)),p.specularMap&&(_.specularMap.value=p.specularMap,t(p.specularMap,_.specularMapTransform)),p.alphaTest>0&&(_.alphaTest.value=p.alphaTest);const v=e.get(p).envMap;if(v&&(_.envMap.value=v,_.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,_.reflectivity.value=p.reflectivity,_.ior.value=p.ior,_.refractionRatio.value=p.refractionRatio),p.lightMap){_.lightMap.value=p.lightMap;const b=!0===i.useLegacyLights?Math.PI:1;_.lightMapIntensity.value=p.lightMapIntensity*b,t(p.lightMap,_.lightMapTransform)}p.aoMap&&(_.aoMap.value=p.aoMap,_.aoMapIntensity.value=p.aoMapIntensity,t(p.aoMap,_.aoMapTransform))}return{refreshFogUniforms:function n(_,p){p.color.getRGB(_.fogColor.value,oU(i)),p.isFog?(_.fogNear.value=p.near,_.fogFar.value=p.far):p.isFogExp2&&(_.fogDensity.value=p.density)},refreshMaterialUniforms:function r(_,p,v,b,y){p.isMeshBasicMaterial||p.isMeshLambertMaterial?s(_,p):p.isMeshToonMaterial?(s(_,p),function u(_,p){p.gradientMap&&(_.gradientMap.value=p.gradientMap)}(_,p)):p.isMeshPhongMaterial?(s(_,p),function d(_,p){_.specular.value.copy(p.specular),_.shininess.value=Math.max(p.shininess,1e-4)}(_,p)):p.isMeshStandardMaterial?(s(_,p),function h(_,p){_.metalness.value=p.metalness,p.metalnessMap&&(_.metalnessMap.value=p.metalnessMap,t(p.metalnessMap,_.metalnessMapTransform)),_.roughness.value=p.roughness,p.roughnessMap&&(_.roughnessMap.value=p.roughnessMap,t(p.roughnessMap,_.roughnessMapTransform)),e.get(p).envMap&&(_.envMapIntensity.value=p.envMapIntensity)}(_,p),p.isMeshPhysicalMaterial&&function f(_,p,v){_.ior.value=p.ior,p.sheen>0&&(_.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),_.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(_.sheenColorMap.value=p.sheenColorMap,t(p.sheenColorMap,_.sheenColorMapTransform)),p.sheenRoughnessMap&&(_.sheenRoughnessMap.value=p.sheenRoughnessMap,t(p.sheenRoughnessMap,_.sheenRoughnessMapTransform))),p.clearcoat>0&&(_.clearcoat.value=p.clearcoat,_.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(_.clearcoatMap.value=p.clearcoatMap,t(p.clearcoatMap,_.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,t(p.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(_.clearcoatNormalMap.value=p.clearcoatNormalMap,t(p.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===zr&&_.clearcoatNormalScale.value.negate())),p.iridescence>0&&(_.iridescence.value=p.iridescence,_.iridescenceIOR.value=p.iridescenceIOR,_.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(_.iridescenceMap.value=p.iridescenceMap,t(p.iridescenceMap,_.iridescenceMapTransform)),p.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=p.iridescenceThicknessMap,t(p.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),p.transmission>0&&(_.transmission.value=p.transmission,_.transmissionSamplerMap.value=v.texture,_.transmissionSamplerSize.value.set(v.width,v.height),p.transmissionMap&&(_.transmissionMap.value=p.transmissionMap,t(p.transmissionMap,_.transmissionMapTransform)),_.thickness.value=p.thickness,p.thicknessMap&&(_.thicknessMap.value=p.thicknessMap,t(p.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=p.attenuationDistance,_.attenuationColor.value.copy(p.attenuationColor)),_.specularIntensity.value=p.specularIntensity,_.specularColor.value.copy(p.specularColor),p.specularColorMap&&(_.specularColorMap.value=p.specularColorMap,t(p.specularColorMap,_.specularColorMapTransform)),p.specularIntensityMap&&(_.specularIntensityMap.value=p.specularIntensityMap,t(p.specularIntensityMap,_.specularIntensityMapTransform))}(_,p,y)):p.isMeshMatcapMaterial?(s(_,p),function m(_,p){p.matcap&&(_.matcap.value=p.matcap)}(_,p)):p.isMeshDepthMaterial?s(_,p):p.isMeshDistanceMaterial?(s(_,p),function g(_,p){const v=e.get(p).light;_.referencePosition.value.setFromMatrixPosition(v.matrixWorld),_.nearDistance.value=v.shadow.camera.near,_.farDistance.value=v.shadow.camera.far}(_,p)):p.isMeshNormalMaterial?s(_,p):p.isLineBasicMaterial?(function o(_,p){_.diffuse.value.copy(p.color),_.opacity.value=p.opacity,p.map&&(_.map.value=p.map,t(p.map,_.mapTransform))}(_,p),p.isLineDashedMaterial&&function a(_,p){_.dashSize.value=p.dashSize,_.totalSize.value=p.dashSize+p.gapSize,_.scale.value=p.scale}(_,p)):p.isPointsMaterial?function l(_,p,v,b){_.diffuse.value.copy(p.color),_.opacity.value=p.opacity,_.size.value=p.size*v,_.scale.value=.5*b,p.map&&(_.map.value=p.map,t(p.map,_.uvTransform)),p.alphaMap&&(_.alphaMap.value=p.alphaMap),p.alphaTest>0&&(_.alphaTest.value=p.alphaTest)}(_,p,v,b):p.isSpriteMaterial?function c(_,p){_.diffuse.value.copy(p.color),_.opacity.value=p.opacity,_.rotation.value=p.rotation,p.map&&(_.map.value=p.map,t(p.map,_.mapTransform)),p.alphaMap&&(_.alphaMap.value=p.alphaMap),p.alphaTest>0&&(_.alphaTest.value=p.alphaTest)}(_,p):p.isShadowMaterial?(_.color.value.copy(p.color),_.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}}}function mae(i,e,t,n){let r={},s={},o=[];const a=t.isWebGL2?i.getParameter(35375):0;function f(v,b,y){const x=v.value;if(void 0===y[b]){if("number"==typeof x)y[b]=x;else{const w=Array.isArray(x)?x:[x],E=[];for(let S=0;S<w.length;S++)E.push(w[S].clone());y[b]=E}return!0}if("number"==typeof x){if(y[b]!==x)return y[b]=x,!0}else{const w=Array.isArray(y[b])?y[b]:[y[b]],E=Array.isArray(x)?x:[x];for(let S=0;S<w.length;S++){const C=w[S];if(!1===C.equals(E[S]))return C.copy(E[S]),!0}}return!1}function g(v){const b={boundary:0,storage:0};return"number"==typeof v?(b.boundary=4,b.storage=4):v.isVector2?(b.boundary=8,b.storage=8):v.isVector3||v.isColor?(b.boundary=16,b.storage=12):v.isVector4?(b.boundary=16,b.storage=16):v.isMatrix3?(b.boundary=48,b.storage=48):v.isMatrix4?(b.boundary=64,b.storage=64):v.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",v),b}function _(v){const b=v.target;b.removeEventListener("dispose",_);const y=o.indexOf(b.__bindingPointIndex);o.splice(y,1),i.deleteBuffer(r[b.id]),delete r[b.id],delete s[b.id]}return{bind:function l(v,b){n.uniformBlockBinding(v,b.program)},update:function c(v,b){let y=r[v.id];void 0===y&&(function m(v){const b=v.uniforms;let y=0;let w=0;for(let E=0,S=b.length;E<S;E++){const C=b[E],T={boundary:0,storage:0},k=Array.isArray(C.value)?C.value:[C.value];for(let U=0,B=k.length;U<B;U++){const H=g(k[U]);T.boundary+=H.boundary,T.storage+=H.storage}C.__data=new Float32Array(T.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=y,E>0&&(w=y%16,0!==w&&16-w-T.boundary<0&&(y+=16-w,C.__offset=y)),y+=T.storage}w=y%16,w>0&&(y+=16-w),v.__size=y,v.__cache={}}(v),y=function d(v){const b=function u(){for(let v=0;v<a;v++)if(-1===o.indexOf(v))return o.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();v.__bindingPointIndex=b;const y=i.createBuffer(),x=v.__size,w=v.usage;return i.bindBuffer(35345,y),i.bufferData(35345,x,w),i.bindBuffer(35345,null),i.bindBufferBase(35345,b,y),y}(v),r[v.id]=y,v.addEventListener("dispose",_)),n.updateUBOMapping(v,b.program);const w=e.render.frame;s[v.id]!==w&&(function h(v){const y=v.uniforms,x=v.__cache;i.bindBuffer(35345,r[v.id]);for(let w=0,E=y.length;w<E;w++){const S=y[w];if(!0===f(S,w,x)){const C=S.__offset,T=Array.isArray(S.value)?S.value:[S.value];let k=0;for(let U=0;U<T.length;U++){const B=T[U],j=g(B);"number"==typeof B?(S.__data[0]=B,i.bufferSubData(35345,C+k,S.__data)):B.isMatrix3?(S.__data[0]=B.elements[0],S.__data[1]=B.elements[1],S.__data[2]=B.elements[2],S.__data[3]=B.elements[0],S.__data[4]=B.elements[3],S.__data[5]=B.elements[4],S.__data[6]=B.elements[5],S.__data[7]=B.elements[0],S.__data[8]=B.elements[6],S.__data[9]=B.elements[7],S.__data[10]=B.elements[8],S.__data[11]=B.elements[0]):(B.toArray(S.__data,k),k+=j.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(35345,C,S.__data)}}i.bindBuffer(35345,null)}(v),s[v.id]=w)},dispose:function p(){for(const v in r)i.deleteBuffer(r[v]);o=[],r={},s={}}}}function gae(){const i=$_("canvas");return i.style.display="block",i}class QT{constructor(e={}){const{canvas:t=gae(),context:n=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:u=!1}=e;let h;this.isWebGLRenderer=!0,h=null!==n?n.getContextAttributes().alpha:o;let f=null,m=null;const g=[],_=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=qs,this.useLegacyLights=!0,this.toneMapping=Pa,this.toneMappingExposure=1;const p=this;let v=!1,b=0,y=0,x=null,w=-1,E=null;const S=new ei,C=new ei;let T=null,k=t.width,U=t.height,B=1,j=null,H=null;const L=new ei(0,0,k,U),V=new ei(0,0,k,U);let O=!1;const Q=new Hy;let re=!1,_e=!1,de=null;const Y=new We,q=new R,te={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function $(){return null===x?B:1}let Me,me,He,Ce,we,Ee,it,qe,bt,At,lt,ut,yt,N,F,ve,De,Ne,et,X,Te,Ae,Je,ct,I=n;function ue(z,ae){for(let Re=0;Re<z.length;Re++){const M=t.getContext(z[Re],ae);if(null!==M)return M}return null}try{const z={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${ry}`),t.addEventListener("webglcontextlost",tt,!1),t.addEventListener("webglcontextrestored",Bt,!1),t.addEventListener("webglcontextcreationerror",Rt,!1),null===I){const ae=["webgl2","webgl","experimental-webgl"];if(!0===p.isWebGL1Renderer&&ae.shift(),I=ue(ae,z),null===I)throw ue(ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===I.getShaderPrecisionFormat&&(I.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(z){throw console.error("THREE.WebGLRenderer: "+z.message),z}function ht(){Me=new Pse(I),me=new Ese(I,Me,e),Me.init(me),Ae=new LU(I,Me,me),He=new dae(I,Me,me),Ce=new Bse,we=new $oe,Ee=new uae(I,Me,He,we,me,Ae,Ce),it=new Tse(p),qe=new Dse(p),bt=new Sne(I,me),Je=new Cse(I,Me,bt,me),At=new kse(I,bt,Ce,Je),lt=new jse(I,At,bt,Ce),et=new Nse(I,me,Ee),ve=new Sse(we),ut=new Koe(p,it,qe,Me,me,Je,ve),yt=new pae(p,we),N=new eae,F=new oae(Me,me),Ne=new wse(p,it,qe,He,lt,h,l),De=new cae(p,lt,me),ct=new mae(I,Ce,me,He),X=new Mse(I,Me,Ce,me),Te=new Lse(I,Me,Ce,me),Ce.programs=ut.programs,p.capabilities=me,p.extensions=Me,p.properties=we,p.renderLists=N,p.shadowMap=De,p.state=He,p.info=Ce}ht();const $e=new fae(p,I);function tt(z){z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function Bt(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;const z=Ce.autoReset,ae=De.enabled,Re=De.autoUpdate,ge=De.needsUpdate,M=De.type;ht(),Ce.autoReset=z,De.enabled=ae,De.autoUpdate=Re,De.needsUpdate=ge,De.type=M}function Rt(z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",z.statusMessage)}function Kt(z){const ae=z.target;ae.removeEventListener("dispose",Kt),function ie(z){(function ee(z){const ae=we.get(z).programs;void 0!==ae&&(ae.forEach(function(Re){ut.releaseProgram(Re)}),z.isShaderMaterial&&ut.releaseShaderCache(z))})(z),we.remove(z)}(ae)}this.xr=$e,this.getContext=function(){return I},this.getContextAttributes=function(){return I.getContextAttributes()},this.forceContextLoss=function(){const z=Me.get("WEBGL_lose_context");z&&z.loseContext()},this.forceContextRestore=function(){const z=Me.get("WEBGL_lose_context");z&&z.restoreContext()},this.getPixelRatio=function(){return B},this.setPixelRatio=function(z){void 0!==z&&(B=z,this.setSize(k,U,!1))},this.getSize=function(z){return z.set(k,U)},this.setSize=function(z,ae,Re=!0){$e.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(k=z,U=ae,t.width=Math.floor(z*B),t.height=Math.floor(ae*B),!0===Re&&(t.style.width=z+"px",t.style.height=ae+"px"),this.setViewport(0,0,z,ae))},this.getDrawingBufferSize=function(z){return z.set(k*B,U*B).floor()},this.setDrawingBufferSize=function(z,ae,Re){k=z,U=ae,B=Re,t.width=Math.floor(z*Re),t.height=Math.floor(ae*Re),this.setViewport(0,0,z,ae)},this.getCurrentViewport=function(z){return z.copy(S)},this.getViewport=function(z){return z.copy(L)},this.setViewport=function(z,ae,Re,ge){z.isVector4?L.set(z.x,z.y,z.z,z.w):L.set(z,ae,Re,ge),He.viewport(S.copy(L).multiplyScalar(B).floor())},this.getScissor=function(z){return z.copy(V)},this.setScissor=function(z,ae,Re,ge){z.isVector4?V.set(z.x,z.y,z.z,z.w):V.set(z,ae,Re,ge),He.scissor(C.copy(V).multiplyScalar(B).floor())},this.getScissorTest=function(){return O},this.setScissorTest=function(z){He.setScissorTest(O=z)},this.setOpaqueSort=function(z){j=z},this.setTransparentSort=function(z){H=z},this.getClearColor=function(z){return z.copy(Ne.getClearColor())},this.setClearColor=function(){Ne.setClearColor.apply(Ne,arguments)},this.getClearAlpha=function(){return Ne.getClearAlpha()},this.setClearAlpha=function(){Ne.setClearAlpha.apply(Ne,arguments)},this.clear=function(z=!0,ae=!0,Re=!0){let ge=0;z&&(ge|=16384),ae&&(ge|=256),Re&&(ge|=1024),I.clear(ge)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",tt,!1),t.removeEventListener("webglcontextrestored",Bt,!1),t.removeEventListener("webglcontextcreationerror",Rt,!1),N.dispose(),F.dispose(),we.dispose(),it.dispose(),qe.dispose(),lt.dispose(),Je.dispose(),ct.dispose(),ut.dispose(),$e.dispose(),$e.removeEventListener("sessionstart",It),$e.removeEventListener("sessionend",tn),de&&(de.dispose(),de=null),bn.stop()},this.renderBufferDirect=function(z,ae,Re,ge,M,D){null===ae&&(ae=te);const G=M.isMesh&&M.matrixWorld.determinant()<0,J=function Mg(z,ae,Re,ge,M){!0!==ae.isScene&&(ae=te),Ee.resetTextureUnits();const D=ae.fog,J=null===x?p.outputEncoding:!0===x.isXRRenderTarget?x.texture.encoding:qs,be=(ge.isMeshStandardMaterial?qe:it).get(ge.envMap||(ge.isMeshStandardMaterial?ae.environment:null)),he=!0===ge.vertexColors&&!!Re.attributes.color&&4===Re.attributes.color.itemSize,Se=!!ge.normalMap&&!!Re.attributes.tangent,Pe=!!Re.morphAttributes.position,Ue=!!Re.morphAttributes.normal,Fe=!!Re.morphAttributes.color,Xe=ge.toneMapped?p.toneMapping:Pa,gt=Re.morphAttributes.position||Re.morphAttributes.normal||Re.morphAttributes.color,rt=void 0!==gt?gt.length:0,st=we.get(ge),$t=m.state.lights;!0!==re||!0!==_e&&z===E||ve.setState(ge,z,z===E&&ge.id===w);let at=!1;ge.version===st.__version?(st.needsLights&&st.lightsStateVersion!==$t.state.version||st.outputEncoding!==J||M.isInstancedMesh&&!1===st.instancing||!M.isInstancedMesh&&!0===st.instancing||M.isSkinnedMesh&&!1===st.skinning||!M.isSkinnedMesh&&!0===st.skinning||st.envMap!==be||!0===ge.fog&&st.fog!==D||void 0!==st.numClippingPlanes&&(st.numClippingPlanes!==ve.numPlanes||st.numIntersection!==ve.numIntersection)||st.vertexAlphas!==he||st.vertexTangents!==Se||st.morphTargets!==Pe||st.morphNormals!==Ue||st.morphColors!==Fe||st.toneMapping!==Xe||!0===me.isWebGL2&&st.morphTargetsCount!==rt)&&(at=!0):(at=!0,st.__version=ge.version);let Ct=st.currentProgram;!0===at&&(Ct=Cg(ge,ae,M));let hi=!1,Ki=!1,vn=!1;const Yi=Ct.getUniforms(),Ii=st.uniforms;if(He.useProgram(Ct.program)&&(hi=!0,Ki=!0,vn=!0),ge.id!==w&&(w=ge.id,Ki=!0),hi||E!==z){if(Yi.setValue(I,"projectionMatrix",z.projectionMatrix),me.logarithmicDepthBuffer&&Yi.setValue(I,"logDepthBufFC",2/(Math.log(z.far+1)/Math.LN2)),E!==z&&(E=z,Ki=!0,vn=!0),ge.isShaderMaterial||ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshStandardMaterial||ge.envMap){const Di=Yi.map.cameraPosition;void 0!==Di&&Di.setValue(I,q.setFromMatrixPosition(z.matrixWorld))}(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial)&&Yi.setValue(I,"isOrthographic",!0===z.isOrthographicCamera),(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial||ge.isShadowMaterial||M.isSkinnedMesh)&&Yi.setValue(I,"viewMatrix",z.matrixWorldInverse)}if(M.isSkinnedMesh){Yi.setOptional(I,M,"bindMatrix"),Yi.setOptional(I,M,"bindMatrixInverse");const Di=M.skeleton;Di&&(me.floatVertexTextures?(null===Di.boneTexture&&Di.computeBoneTexture(),Yi.setValue(I,"boneTexture",Di.boneTexture,Ee),Yi.setValue(I,"boneTextureSize",Di.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const xi=Re.morphAttributes;if((void 0!==xi.position||void 0!==xi.normal||void 0!==xi.color&&!0===me.isWebGL2)&&et.update(M,Re,Ct),(Ki||st.receiveShadow!==M.receiveShadow)&&(st.receiveShadow=M.receiveShadow,Yi.setValue(I,"receiveShadow",M.receiveShadow)),ge.isMeshGouraudMaterial&&null!==ge.envMap&&(Ii.envMap.value=be,Ii.flipEnvMap.value=be.isCubeTexture&&!1===be.isRenderTargetTexture?-1:1),Ki&&(Yi.setValue(I,"toneMappingExposure",p.toneMappingExposure),st.needsLights&&function L2(z,ae){z.ambientLightColor.needsUpdate=ae,z.lightProbe.needsUpdate=ae,z.directionalLights.needsUpdate=ae,z.directionalLightShadows.needsUpdate=ae,z.pointLights.needsUpdate=ae,z.pointLightShadows.needsUpdate=ae,z.spotLights.needsUpdate=ae,z.spotLightShadows.needsUpdate=ae,z.rectAreaLights.needsUpdate=ae,z.hemisphereLights.needsUpdate=ae}(Ii,vn),D&&!0===ge.fog&&yt.refreshFogUniforms(Ii,D),yt.refreshMaterialUniforms(Ii,ge,B,U,de),Yy.upload(I,st.uniformsList,Ii,Ee)),ge.isShaderMaterial&&!0===ge.uniformsNeedUpdate&&(Yy.upload(I,st.uniformsList,Ii,Ee),ge.uniformsNeedUpdate=!1),ge.isSpriteMaterial&&Yi.setValue(I,"center",M.center),Yi.setValue(I,"modelViewMatrix",M.modelViewMatrix),Yi.setValue(I,"normalMatrix",M.normalMatrix),Yi.setValue(I,"modelMatrix",M.matrixWorld),ge.isShaderMaterial||ge.isRawShaderMaterial){const Di=ge.uniformsGroups;for(let Yr=0,ar=Di.length;Yr<ar;Yr++)if(me.isWebGL2){const Bi=Di[Yr];ct.update(Bi,Ct),ct.bind(Bi,Ct)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ct}(z,ae,Re,ge,M);He.setMaterial(ge,G);let be=Re.index,he=1;!0===ge.wireframe&&(be=At.getWireframeAttribute(Re),he=2);const Se=Re.drawRange,Pe=Re.attributes.position;let Ue=Se.start*he,Fe=(Se.start+Se.count)*he;null!==D&&(Ue=Math.max(Ue,D.start*he),Fe=Math.min(Fe,(D.start+D.count)*he)),null!==be?(Ue=Math.max(Ue,0),Fe=Math.min(Fe,be.count)):null!=Pe&&(Ue=Math.max(Ue,0),Fe=Math.min(Fe,Pe.count));const Xe=Fe-Ue;if(Xe<0||Xe===1/0)return;Je.setup(M,ge,J,Re,be);let gt,rt=X;if(null!==be&&(gt=bt.get(be),rt=Te,rt.setIndex(gt)),M.isMesh)!0===ge.wireframe?(He.setLineWidth(ge.wireframeLinewidth*$()),rt.setMode(1)):rt.setMode(4);else if(M.isLine){let st=ge.linewidth;void 0===st&&(st=1),He.setLineWidth(st*$()),rt.setMode(M.isLineSegments?1:M.isLineLoop?2:3)}else M.isPoints?rt.setMode(0):M.isSprite&&rt.setMode(4);if(M.isInstancedMesh)rt.renderInstances(Ue,Xe,M.count);else if(Re.isInstancedBufferGeometry){const $t=Math.min(Re.instanceCount,void 0!==Re._maxInstanceCount?Re._maxInstanceCount:1/0);rt.renderInstances(Ue,Xe,$t)}else rt.render(Ue,Xe)},this.compile=function(z,ae){function Re(ge,M,D){!0===ge.transparent&&ge.side===bs&&!1===ge.forceSinglePass?(ge.side=zr,ge.needsUpdate=!0,Cg(ge,M,D),ge.side=Ia,ge.needsUpdate=!0,Cg(ge,M,D),ge.side=bs):Cg(ge,M,D)}m=F.get(z),m.init(),_.push(m),z.traverseVisible(function(ge){ge.isLight&&ge.layers.test(ae.layers)&&(m.pushLight(ge),ge.castShadow&&m.pushShadow(ge))}),m.setupLights(p.useLegacyLights),z.traverse(function(ge){const M=ge.material;if(M)if(Array.isArray(M))for(let D=0;D<M.length;D++)Re(M[D],z,ge);else Re(M,z,ge)}),_.pop(),m=null};let ze=null;function It(){bn.stop()}function tn(){bn.start()}const bn=new lU;function Er(z,ae,Re,ge){if(!1===z.visible)return;if(z.layers.test(ae.layers))if(z.isGroup)Re=z.renderOrder;else if(z.isLOD)!0===z.autoUpdate&&z.update(ae);else if(z.isLight)m.pushLight(z),z.castShadow&&m.pushShadow(z);else if(z.isSprite){if(!z.frustumCulled||Q.intersectsSprite(z)){ge&&q.setFromMatrixPosition(z.matrixWorld).applyMatrix4(Y);const G=lt.update(z),J=z.material;J.visible&&f.push(z,G,J,Re,q.z,null)}}else if((z.isMesh||z.isLine||z.isPoints)&&(z.isSkinnedMesh&&z.skeleton.frame!==Ce.render.frame&&(z.skeleton.update(),z.skeleton.frame=Ce.render.frame),!z.frustumCulled||Q.intersectsObject(z))){ge&&q.setFromMatrixPosition(z.matrixWorld).applyMatrix4(Y);const G=lt.update(z),J=z.material;if(Array.isArray(J)){const be=G.groups;for(let he=0,Se=be.length;he<Se;he++){const Pe=be[he],Ue=J[Pe.materialIndex];Ue&&Ue.visible&&f.push(z,G,Ue,Re,q.z,Pe)}}else J.visible&&f.push(z,G,J,Re,q.z,null)}const D=z.children;for(let G=0,J=D.length;G<J;G++)Er(D[G],ae,Re,ge)}function tl(z,ae,Re,ge){const M=z.opaque,D=z.transmissive,G=z.transparent;m.setupLightsView(Re),!0===re&&ve.setGlobalState(p.clippingPlanes,Re),D.length>0&&function kn(z,ae,Re,ge){if(null===de){const J=me.isWebGL2;de=new Gt(1024,1024,{generateMipmaps:!0,type:Me.has("EXT_color_buffer_half_float")?pn:Gr,minFilter:Ws,samples:J&&!0===a?4:0})}const M=p.getRenderTarget();p.setRenderTarget(de),p.clear();const D=p.toneMapping;p.toneMapping=Pa,Ps(z,Re,ge),Ee.updateMultisampleRenderTarget(de),Ee.updateRenderTargetMipmap(de);let G=!1;for(let J=0,be=ae.length;J<be;J++){const he=ae[J],Se=he.object,Pe=he.geometry,Ue=he.material,Fe=he.group;if(Ue.side===bs&&Se.layers.test(ge.layers)){const Xe=Ue.side;Ue.side=zr,Ue.needsUpdate=!0,Vo(Se,Re,ge,Pe,Ue,Fe),Ue.side=Xe,Ue.needsUpdate=!0,G=!0}}!0===G&&(Ee.updateMultisampleRenderTarget(de),Ee.updateRenderTargetMipmap(de)),p.setRenderTarget(M),p.toneMapping=D}(M,D,ae,Re),ge&&He.viewport(S.copy(ge)),M.length>0&&Ps(M,ae,Re),D.length>0&&Ps(D,ae,Re),G.length>0&&Ps(G,ae,Re),He.buffers.depth.setTest(!0),He.buffers.depth.setMask(!0),He.buffers.color.setMask(!0),He.setPolygonOffset(!1)}function Ps(z,ae,Re){const ge=!0===ae.isScene?ae.overrideMaterial:null;for(let M=0,D=z.length;M<D;M++){const G=z[M],J=G.object,be=G.geometry,he=null===ge?G.material:ge,Se=G.group;J.layers.test(Re.layers)&&Vo(J,ae,Re,be,he,Se)}}function Vo(z,ae,Re,ge,M,D){z.onBeforeRender(p,ae,Re,ge,M,D),z.modelViewMatrix.multiplyMatrices(Re.matrixWorldInverse,z.matrixWorld),z.normalMatrix.getNormalMatrix(z.modelViewMatrix),M.onBeforeRender(p,ae,Re,ge,z,D),!0===M.transparent&&M.side===bs&&!1===M.forceSinglePass?(M.side=zr,M.needsUpdate=!0,p.renderBufferDirect(Re,ae,ge,M,z,D),M.side=Ia,M.needsUpdate=!0,p.renderBufferDirect(Re,ae,ge,M,z,D),M.side=bs):p.renderBufferDirect(Re,ae,ge,M,z,D),z.onAfterRender(p,ae,Re,ge,M,D)}function Cg(z,ae,Re){!0!==ae.isScene&&(ae=te);const ge=we.get(z),M=m.state.lights,G=M.state.version,J=ut.getParameters(z,M.state,m.state.shadowsArray,ae,Re),be=ut.getProgramCacheKey(J);let he=ge.programs;ge.environment=z.isMeshStandardMaterial?ae.environment:null,ge.fog=ae.fog,ge.envMap=(z.isMeshStandardMaterial?qe:it).get(z.envMap||ge.environment),void 0===he&&(z.addEventListener("dispose",Kt),he=new Map,ge.programs=he);let Se=he.get(be);if(void 0!==Se){if(ge.currentProgram===Se&&ge.lightsStateVersion===G)return $C(z,J),Se}else J.uniforms=ut.getUniforms(z),z.onBuild(Re,J,p),z.onBeforeCompile(J,p),Se=ut.acquireProgram(J,be),he.set(be,Se),ge.uniforms=J.uniforms;const Pe=ge.uniforms;(!z.isShaderMaterial&&!z.isRawShaderMaterial||!0===z.clipping)&&(Pe.clippingPlanes=ve.uniform),$C(z,J),ge.needsLights=function dh(z){return z.isMeshLambertMaterial||z.isMeshToonMaterial||z.isMeshPhongMaterial||z.isMeshStandardMaterial||z.isShadowMaterial||z.isShaderMaterial&&!0===z.lights}(z),ge.lightsStateVersion=G,ge.needsLights&&(Pe.ambientLightColor.value=M.state.ambient,Pe.lightProbe.value=M.state.probe,Pe.directionalLights.value=M.state.directional,Pe.directionalLightShadows.value=M.state.directionalShadow,Pe.spotLights.value=M.state.spot,Pe.spotLightShadows.value=M.state.spotShadow,Pe.rectAreaLights.value=M.state.rectArea,Pe.ltc_1.value=M.state.rectAreaLTC1,Pe.ltc_2.value=M.state.rectAreaLTC2,Pe.pointLights.value=M.state.point,Pe.pointLightShadows.value=M.state.pointShadow,Pe.hemisphereLights.value=M.state.hemi,Pe.directionalShadowMap.value=M.state.directionalShadowMap,Pe.directionalShadowMatrix.value=M.state.directionalShadowMatrix,Pe.spotShadowMap.value=M.state.spotShadowMap,Pe.spotLightMatrix.value=M.state.spotLightMatrix,Pe.spotLightMap.value=M.state.spotLightMap,Pe.pointShadowMap.value=M.state.pointShadowMap,Pe.pointShadowMatrix.value=M.state.pointShadowMatrix);const Ue=Se.getUniforms(),Fe=Yy.seqWithValue(Ue.seq,Pe);return ge.currentProgram=Se,ge.uniformsList=Fe,Se}function $C(z,ae){const Re=we.get(z);Re.outputEncoding=ae.outputEncoding,Re.instancing=ae.instancing,Re.skinning=ae.skinning,Re.morphTargets=ae.morphTargets,Re.morphNormals=ae.morphNormals,Re.morphColors=ae.morphColors,Re.morphTargetsCount=ae.morphTargetsCount,Re.numClippingPlanes=ae.numClippingPlanes,Re.numIntersection=ae.numClipIntersection,Re.vertexAlphas=ae.vertexAlphas,Re.vertexTangents=ae.vertexTangents,Re.toneMapping=ae.toneMapping}bn.setAnimationLoop(function ft(z){ze&&ze(z)}),typeof self<"u"&&bn.setContext(self),this.setAnimationLoop=function(z){ze=z,$e.setAnimationLoop(z),null===z?bn.stop():bn.start()},$e.addEventListener("sessionstart",It),$e.addEventListener("sessionend",tn),this.render=function(z,ae){if(void 0===ae||!0===ae.isCamera){if(!0!==v){if(!0===z.matrixWorldAutoUpdate&&z.updateMatrixWorld(),null===ae.parent&&!0===ae.matrixWorldAutoUpdate&&ae.updateMatrixWorld(),!0===$e.enabled&&!0===$e.isPresenting&&(!0===$e.cameraAutoUpdate&&$e.updateCamera(ae),ae=$e.getCamera()),!0===z.isScene&&z.onBeforeRender(p,z,ae,x),m=F.get(z,_.length),m.init(),_.push(m),Y.multiplyMatrices(ae.projectionMatrix,ae.matrixWorldInverse),Q.setFromProjectionMatrix(Y),_e=this.localClippingEnabled,re=ve.init(this.clippingPlanes,_e),f=N.get(z,g.length),f.init(),g.push(f),Er(z,ae,0,p.sortObjects),f.finish(),!0===p.sortObjects&&f.sort(j,H),!0===re&&ve.beginShadows(),De.render(m.state.shadowsArray,z,ae),!0===re&&ve.endShadows(),!0===this.info.autoReset&&this.info.reset(),Ne.render(f,z),m.setupLights(p.useLegacyLights),ae.isArrayCamera){const ge=ae.cameras;for(let M=0,D=ge.length;M<D;M++){const G=ge[M];tl(f,z,G,G.viewport)}}else tl(f,z,ae);null!==x&&(Ee.updateMultisampleRenderTarget(x),Ee.updateRenderTargetMipmap(x)),!0===z.isScene&&z.onAfterRender(p,z,ae),Je.resetDefaultState(),w=-1,E=null,_.pop(),m=_.length>0?_[_.length-1]:null,g.pop(),f=g.length>0?g[g.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(z,ae,Re){we.get(z.texture).__webglTexture=ae,we.get(z.depthTexture).__webglTexture=Re;const ge=we.get(z);ge.__hasExternalTextures=!0,ge.__hasExternalTextures&&(ge.__autoAllocateDepthBuffer=void 0===Re,ge.__autoAllocateDepthBuffer||!0===Me.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ge.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(z,ae){const Re=we.get(z);Re.__webglFramebuffer=ae,Re.__useDefaultFramebuffer=void 0===ae},this.setRenderTarget=function(z,ae=0,Re=0){x=z,b=ae,y=Re;let ge=!0,M=null,D=!1,G=!1;if(z){const be=we.get(z);void 0!==be.__useDefaultFramebuffer?(He.bindFramebuffer(36160,null),ge=!1):void 0===be.__webglFramebuffer?Ee.setupRenderTarget(z):be.__hasExternalTextures&&Ee.rebindTextures(z,we.get(z.texture).__webglTexture,we.get(z.depthTexture).__webglTexture);const he=z.texture;(he.isData3DTexture||he.isDataArrayTexture||he.isCompressedArrayTexture)&&(G=!0);const Se=we.get(z).__webglFramebuffer;z.isWebGLCubeRenderTarget?(M=Se[ae],D=!0):M=me.isWebGL2&&z.samples>0&&!1===Ee.useMultisampledRTT(z)?we.get(z).__webglMultisampledFramebuffer:Se,S.copy(z.viewport),C.copy(z.scissor),T=z.scissorTest}else S.copy(L).multiplyScalar(B).floor(),C.copy(V).multiplyScalar(B).floor(),T=O;if(He.bindFramebuffer(36160,M)&&me.drawBuffers&&ge&&He.drawBuffers(z,M),He.viewport(S),He.scissor(C),He.setScissorTest(T),D){const be=we.get(z.texture);I.framebufferTexture2D(36160,36064,34069+ae,be.__webglTexture,Re)}else if(G){const be=we.get(z.texture);I.framebufferTextureLayer(36160,36064,be.__webglTexture,Re||0,ae||0)}w=-1},this.readRenderTargetPixels=function(z,ae,Re,ge,M,D,G){if(!z||!z.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let J=we.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&void 0!==G&&(J=J[G]),J){He.bindFramebuffer(36160,J);try{const be=z.texture,he=be.format,Se=be.type;if(he!==Rn&&Ae.convert(he)!==I.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Pe=Se===pn&&(Me.has("EXT_color_buffer_half_float")||me.isWebGL2&&Me.has("EXT_color_buffer_float"));if(!(Se===Gr||Ae.convert(Se)===I.getParameter(35738)||Se===Nn&&(me.isWebGL2||Me.has("OES_texture_float")||Me.has("WEBGL_color_buffer_float"))||Pe))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");ae>=0&&ae<=z.width-ge&&Re>=0&&Re<=z.height-M&&I.readPixels(ae,Re,ge,M,Ae.convert(he),Ae.convert(Se),D)}finally{const be=null!==x?we.get(x).__webglFramebuffer:null;He.bindFramebuffer(36160,be)}}},this.copyFramebufferToTexture=function(z,ae,Re=0){const ge=Math.pow(2,-Re),M=Math.floor(ae.image.width*ge),D=Math.floor(ae.image.height*ge);Ee.setTexture2D(ae,0),I.copyTexSubImage2D(3553,Re,0,0,z.x,z.y,M,D),He.unbindTexture()},this.copyTextureToTexture=function(z,ae,Re,ge=0){const M=ae.image.width,D=ae.image.height,G=Ae.convert(Re.format),J=Ae.convert(Re.type);Ee.setTexture2D(Re,0),I.pixelStorei(37440,Re.flipY),I.pixelStorei(37441,Re.premultiplyAlpha),I.pixelStorei(3317,Re.unpackAlignment),ae.isDataTexture?I.texSubImage2D(3553,ge,z.x,z.y,M,D,G,J,ae.image.data):ae.isCompressedTexture?I.compressedTexSubImage2D(3553,ge,z.x,z.y,ae.mipmaps[0].width,ae.mipmaps[0].height,G,ae.mipmaps[0].data):I.texSubImage2D(3553,ge,z.x,z.y,G,J,ae.image),0===ge&&Re.generateMipmaps&&I.generateMipmap(3553),He.unbindTexture()},this.copyTextureToTexture3D=function(z,ae,Re,ge,M=0){if(p.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const D=z.max.x-z.min.x+1,G=z.max.y-z.min.y+1,J=z.max.z-z.min.z+1,be=Ae.convert(ge.format),he=Ae.convert(ge.type);let Se;if(ge.isData3DTexture)Ee.setTexture3D(ge,0),Se=32879;else{if(!ge.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Ee.setTexture2DArray(ge,0),Se=35866}I.pixelStorei(37440,ge.flipY),I.pixelStorei(37441,ge.premultiplyAlpha),I.pixelStorei(3317,ge.unpackAlignment);const Pe=I.getParameter(3314),Ue=I.getParameter(32878),Fe=I.getParameter(3316),Xe=I.getParameter(3315),gt=I.getParameter(32877),rt=Re.isCompressedTexture?Re.mipmaps[0]:Re.image;I.pixelStorei(3314,rt.width),I.pixelStorei(32878,rt.height),I.pixelStorei(3316,z.min.x),I.pixelStorei(3315,z.min.y),I.pixelStorei(32877,z.min.z),Re.isDataTexture||Re.isData3DTexture?I.texSubImage3D(Se,M,ae.x,ae.y,ae.z,D,G,J,be,he,rt.data):Re.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),I.compressedTexSubImage3D(Se,M,ae.x,ae.y,ae.z,D,G,J,be,rt.data)):I.texSubImage3D(Se,M,ae.x,ae.y,ae.z,D,G,J,be,he,rt),I.pixelStorei(3314,Pe),I.pixelStorei(32878,Ue),I.pixelStorei(3316,Fe),I.pixelStorei(3315,Xe),I.pixelStorei(32877,gt),0===M&&ge.generateMipmaps&&I.generateMipmap(Se),He.unbindTexture()},this.initTexture=function(z){z.isCubeTexture?Ee.setTextureCube(z,0):z.isData3DTexture?Ee.setTexture3D(z,0):z.isDataArrayTexture||z.isCompressedArrayTexture?Ee.setTexture2DArray(z,0):Ee.setTexture2D(z,0),He.unbindTexture()},this.resetState=function(){b=0,y=0,x=null,He.reset(),Je.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}}class BU extends QT{}BU.prototype.isWebGL1Renderer=!0;class Zy{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Be(e),this.density=t}clone(){return new Zy(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class lb{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Be(e),this.near=t,this.far=n}clone(){return new lb(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Ky extends pi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class cb{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Z_,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Xs()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Xs()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Xs()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const as=new R;class _c{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)as.fromBufferAttribute(this,t),as.applyMatrix4(e),this.setXYZ(t,as.x,as.y,as.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)as.fromBufferAttribute(this,t),as.applyNormalMatrix(e),this.setXYZ(t,as.x,as.y,as.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)as.fromBufferAttribute(this,t),as.transformDirection(e),this.setXYZ(t,as.x,as.y,as.z);return this}setX(e,t){return this.normalized&&(t=di(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=di(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=di(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=di(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Zs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Zs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Zs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Zs(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=di(t,this.array),n=di(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=di(t,this.array),n=di(n,this.array),r=di(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=di(t,this.array),n=di(n,this.array),r=di(r,this.array),s=di(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Ci(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new _c(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class $y extends Un{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Be(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Yf;const db=new R,Xf=new R,Zf=new R,Kf=new pe,ub=new pe,FU=new We,Jy=new R,hb=new R,ex=new R,OU=new pe,WT=new pe,NU=new pe;class qT extends pi{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",void 0===Yf){Yf=new Mt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new cb(t,5);Yf.setIndex([0,1,2,0,2,3]),Yf.setAttribute("position",new _c(n,3,0,!1)),Yf.setAttribute("uv",new _c(n,2,3,!1))}this.geometry=Yf,this.material=void 0!==e?e:new $y,this.center=new pe(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Xf.setFromMatrixScale(this.matrixWorld),FU.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Zf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Xf.multiplyScalar(-Zf.z);const n=this.material.rotation;let r,s;0!==n&&(s=Math.cos(n),r=Math.sin(n));const o=this.center;tx(Jy.set(-.5,-.5,0),Zf,o,Xf,r,s),tx(hb.set(.5,-.5,0),Zf,o,Xf,r,s),tx(ex.set(.5,.5,0),Zf,o,Xf,r,s),OU.set(0,0),WT.set(1,0),NU.set(1,1);let a=e.ray.intersectTriangle(Jy,hb,ex,!1,db);if(null===a&&(tx(hb.set(-.5,.5,0),Zf,o,Xf,r,s),WT.set(0,1),a=e.ray.intersectTriangle(Jy,ex,hb,!1,db),null===a))return;const l=e.ray.origin.distanceTo(db);l<e.near||l>e.far||t.push({distance:l,point:db.clone(),uv:rs.getInterpolation(db,Jy,hb,ex,OU,WT,NU,new pe),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function tx(i,e,t,n,r,s){Kf.subVectors(i,t).addScalar(.5).multiply(n),void 0!==r?(ub.x=s*Kf.x-r*Kf.y,ub.y=r*Kf.x+s*Kf.y):ub.copy(Kf),i.copy(e),i.x+=ub.x,i.y+=ub.y,i.applyMatrix4(FU)}const ix=new R,jU=new R;class YT extends pi{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){ix.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(ix);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){ix.setFromMatrixPosition(e.matrixWorld),jU.setFromMatrixPosition(this.matrixWorld);const n=ix.distanceTo(jU)/e.zoom;let r,s;for(t[0].object.visible=!0,r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),!(n>=o))break;t[r-1].object.visible=!1,t[r].object.visible=!0}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,s=n.length;r<s;r++){const o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const UU=new R,VU=new ei,zU=new ei,_ae=new R,GU=new We,$f=new R;class fb extends nt{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new We,this.bindMatrixInverse=new We,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Ks),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)$f.fromBufferAttribute(t,n),this.applyBoneTransform(n,$f),this.boundingBox.expandByPoint($f)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new wo),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)$f.fromBufferAttribute(t,n),this.applyBoneTransform(n,$f),this.boundingSphere.expandByPoint($f)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ei,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;VU.fromBufferAttribute(r.attributes.skinIndex,e),zU.fromBufferAttribute(r.attributes.skinWeight,e),UU.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=zU.getComponent(s);if(0!==o){const a=VU.getComponent(s);GU.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(_ae.copy(UU).applyMatrix4(GU),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Kd extends pi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ba extends An{constructor(e=null,t=1,n=1,r,s,o,a,l,c=Zt,d=Zt,u,h){super(null,o,a,l,c,d,r,s,u,h),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const HU=new We,bae=new We;class Jf{constructor(e=[],t=[]){this.uuid=Xs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new We)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new We;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)HU.multiplyMatrices(e[s]?e[s].matrixWorld:bae,t[s]),HU.toArray(n,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new Jf(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=zj(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Ba(t,e,e,Rn,Nn);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Kd),this.bones.push(o),this.boneInverses.push((new We).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(n[r].toArray());return e}}class ep extends Ci{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const tp=new We,QU=new We,nx=[],WU=new Ks,vae=new We,pb=new nt,mb=new wo;class rx extends nt{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ep(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,vae)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Ks),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,tp),WU.copy(e.boundingBox).applyMatrix4(tp),this.boundingBox.union(WU)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new wo),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,tp),mb.copy(e.boundingSphere).applyMatrix4(tp),this.boundingSphere.union(mb)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(pb.geometry=this.geometry,pb.material=this.material,void 0!==pb.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),mb.copy(this.boundingSphere),mb.applyMatrix4(n),!1!==e.ray.intersectsSphere(mb)))for(let s=0;s<r;s++){this.getMatrixAt(s,tp),QU.multiplyMatrices(n,tp),pb.matrixWorld=QU,pb.raycast(e,nx);for(let o=0,a=nx.length;o<a;o++){const l=nx[o];l.instanceId=s,l.object=this,t.push(l)}nx.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new ep(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class mn extends Un{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Be(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const qU=new R,YU=new R,XU=new We,XT=new nb,sx=new wo;class Vn extends pi{constructor(e=new Mt,t=new mn){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)qU.fromBufferAttribute(t,r-1),YU.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=qU.distanceTo(YU);e.setAttribute("lineDistance",new Ze(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),sx.copy(n.boundingSphere),sx.applyMatrix4(r),sx.radius+=s,!1===e.ray.intersectsSphere(sx))return;XU.copy(r).invert(),XT.copy(e.ray).applyMatrix4(XU);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new R,d=new R,u=new R,h=new R,f=this.isLineSegments?2:1,m=n.index,_=n.attributes.position;if(null!==m)for(let b=Math.max(0,o.start),y=Math.min(m.count,o.start+o.count)-1;b<y;b+=f){const x=m.getX(b),w=m.getX(b+1);if(c.fromBufferAttribute(_,x),d.fromBufferAttribute(_,w),XT.distanceSqToSegment(c,d,h,u)>l)continue;h.applyMatrix4(this.matrixWorld);const S=e.ray.origin.distanceTo(h);S<e.near||S>e.far||t.push({distance:S,point:u.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}else for(let b=Math.max(0,o.start),y=Math.min(_.count,o.start+o.count)-1;b<y;b+=f){if(c.fromBufferAttribute(_,b),d.fromBufferAttribute(_,b+1),XT.distanceSqToSegment(c,d,h,u)>l)continue;h.applyMatrix4(this.matrixWorld);const w=e.ray.origin.distanceTo(h);w<e.near||w>e.far||t.push({distance:w,point:u.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const ZU=new R,KU=new R;class ws extends Vn{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)ZU.fromBufferAttribute(t,r),KU.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+ZU.distanceTo(KU);e.setAttribute("lineDistance",new Ze(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ox extends Vn{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Tl extends Un{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Be(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const $U=new We,ZT=new nb,ax=new wo,lx=new R;class $d extends pi{constructor(e=new Mt,t=new Tl){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ax.copy(n.boundingSphere),ax.applyMatrix4(r),ax.radius+=s,!1===e.ray.intersectsSphere(ax))return;$U.copy(r).invert(),ZT.copy(e.ray).applyMatrix4($U);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=n.index,u=n.attributes.position;if(null!==c)for(let m=Math.max(0,o.start),g=Math.min(c.count,o.start+o.count);m<g;m++){const _=c.getX(m);lx.fromBufferAttribute(u,_),JU(lx,_,l,r,e,t,this)}else for(let m=Math.max(0,o.start),g=Math.min(u.count,o.start+o.count);m<g;m++)lx.fromBufferAttribute(u,m),JU(lx,m,l,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function JU(i,e,t,n,r,s,o){const a=ZT.distanceSqToPoint(i);if(a<t){const l=new R;ZT.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class e4 extends An{constructor(e,t,n,r,s,o,a,l,c){super(e,t,n,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=void 0!==o?o:Ni,this.magFilter=void 0!==s?s:Ni,this.generateMipmaps=!1;const d=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function u(){d.needsUpdate=!0,e.requestVideoFrameCallback(u)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e==0&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class t4 extends An{constructor(e,t,n){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=n,this.magFilter=Zt,this.minFilter=Zt,this.generateMipmaps=!1,this.needsUpdate=!0}}class gb extends An{constructor(e,t,n,r,s,o,a,l,c,d,u,h){super(null,o,a,l,c,d,r,s,u,h),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class KT extends gb{constructor(e,t,n,r,s,o){super(e,t,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=mr}}class cx extends An{constructor(e,t,n,r,s,o,a,l,c){super(e,t,n,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Eo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const s=n.length;let o;o=t||e*n[s-1];let c,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=n[r]-o,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(s-1);const d=n[r];return(r+(o-d)/(n[r+1]-d))/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new pe:new R);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new R,r=[],s=[],o=[],a=new R,l=new We;for(let f=0;f<=e;f++)r[f]=this.getTangentAt(f/e,new R);s[0]=new R,o[0]=new R;let c=Number.MAX_VALUE;const d=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);d<=c&&(c=d,n.set(1,0,0)),u<=c&&(c=u,n.set(0,1,0)),h<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();const m=Math.acos(jn(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,m))}o[f].crossVectors(r[f],s[f])}if(!0===t){let f=Math.acos(jn(s[0].dot(s[e]),-1,1));f/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let m=1;m<=e;m++)s[m].applyMatrix4(l.makeRotationAxis(r[m],f*m)),o[m].crossVectors(r[m],s[m])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class bc extends Eo{constructor(e=0,t=0,n=1,r=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const n=t||new pe,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const d=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*d-f*u+this.aX,c=h*u+f*d+this.aY}return n.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class n4 extends bc{constructor(e,t,n,r,s,o){super(e,t,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function $T(){let i=0,e=0,t=0,n=0;function r(s,o,a,l){i=s,e=a,t=-3*s+3*o-2*a-l,n=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,d,u){let h=(o-s)/c-(a-s)/(c+d)+(a-o)/d,f=(a-o)/d-(l-o)/(d+u)+(l-a)/u;h*=d,f*=d,r(o,a,h,f)},calc:function(s){const o=s*s;return i+e*s+t*o+n*(o*s)}}}const dx=new R,JT=new $T,eR=new $T,tR=new $T;class r4 extends Eo{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new R){const n=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let c,d,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=r[(a-1)%s]:(dx.subVectors(r[0],r[1]).add(r[0]),c=dx);const u=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?d=r[(a+2)%s]:(dx.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=dx),"centripetal"===this.curveType||"chordal"===this.curveType){const f="chordal"===this.curveType?.5:.25;let m=Math.pow(c.distanceToSquared(u),f),g=Math.pow(u.distanceToSquared(h),f),_=Math.pow(h.distanceToSquared(d),f);g<1e-4&&(g=1),m<1e-4&&(m=g),_<1e-4&&(_=g),JT.initNonuniformCatmullRom(c.x,u.x,h.x,d.x,m,g,_),eR.initNonuniformCatmullRom(c.y,u.y,h.y,d.y,m,g,_),tR.initNonuniformCatmullRom(c.z,u.z,h.z,d.z,m,g,_)}else"catmullrom"===this.curveType&&(JT.initCatmullRom(c.x,u.x,h.x,d.x,this.tension),eR.initCatmullRom(c.y,u.y,h.y,d.y,this.tension),tR.initCatmullRom(c.z,u.z,h.z,d.z,this.tension));return n.set(JT.calc(l),eR.calc(l),tR.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push((new R).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function s4(i,e,t,n,r){const s=.5*(n-e),o=.5*(r-t),a=i*i;return(2*t-2*n+s+o)*(i*a)+(-3*t+3*n-2*s-o)*a+s*i+t}function _b(i,e,t,n){return function Aae(i,e){const t=1-i;return t*t*e}(i,e)+function yae(i,e){return 2*(1-i)*i*e}(i,t)+function xae(i,e){return i*i*e}(i,n)}function bb(i,e,t,n,r){return function wae(i,e){const t=1-i;return t*t*t*e}(i,e)+function Cae(i,e){const t=1-i;return 3*t*t*i*e}(i,t)+function Mae(i,e){return 3*(1-i)*i*i*e}(i,n)+function Eae(i,e){return i*i*i*e}(i,r)}class iR extends Eo{constructor(e=new pe,t=new pe,n=new pe,r=new pe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new pe){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(bb(e,r.x,s.x,o.x,a.x),bb(e,r.y,s.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class o4 extends Eo{constructor(e=new R,t=new R,n=new R,r=new R){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new R){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(bb(e,r.x,s.x,o.x,a.x),bb(e,r.y,s.y,o.y,a.y),bb(e,r.z,s.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ux extends Eo{constructor(e=new pe,t=new pe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new pe){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new pe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class a4 extends Eo{constructor(e=new R,t=new R){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new R){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new R){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class nR extends Eo{constructor(e=new pe,t=new pe,n=new pe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new pe){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(_b(e,r.x,s.x,o.x),_b(e,r.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rR extends Eo{constructor(e=new R,t=new R,n=new R){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new R){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(_b(e,r.x,s.x,o.x),_b(e,r.y,s.y,o.y),_b(e,r.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sR extends Eo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new pe){const n=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[0===o?o:o-1],c=r[o],d=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(s4(a,l.x,c.x,d.x,u.x),s4(a,l.y,c.y,d.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push((new pe).fromArray(r))}return this}}var oR=Object.freeze({__proto__:null,ArcCurve:n4,CatmullRomCurve3:r4,CubicBezierCurve:iR,CubicBezierCurve3:o4,EllipseCurve:bc,LineCurve:ux,LineCurve3:a4,QuadraticBezierCurve:nR,QuadraticBezierCurve3:rR,SplineCurve:sR});class l4 extends Eo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ux(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.getPoints(o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e);for(let c=0;c<l.length;c++){const d=l[c];n&&n.equals(d)||(t.push(d),n=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push((new oR[r.type]).fromJSON(r))}return this}}class vb extends l4{constructor(e){super(),this.type="Path",this.currentPoint=new pe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new ux(this.currentPoint.clone(),new pe(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new nR(this.currentPoint.clone(),new pe(e,t),new pe(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,o){const a=new iR(this.currentPoint.clone(),new pe(e,t),new pe(n,r),new pe(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new sR(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,n,r,s,o),this}absarc(e,t,n,r,s,o){return this.absellipse(e,t,n,n,r,s,o),this}ellipse(e,t,n,r,s,o,a,l){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,n,r,s,o,a,l),this}absellipse(e,t,n,r,s,o,a,l){const c=new bc(e,t,n,r,s,o,a,l);if(this.curves.length>0){const u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Jd extends Mt{constructor(e=[new pe(0,-.5),new pe(.5,0),new pe(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=jn(r,0,2*Math.PI);const s=[],o=[],a=[],l=[],c=[],d=1/t,u=new R,h=new pe,f=new R,m=new R,g=new R;let _=0,p=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:_=e[v+1].x-e[v].x,p=e[v+1].y-e[v].y,f.x=1*p,f.y=-_,f.z=0*p,g.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case e.length-1:l.push(g.x,g.y,g.z);break;default:_=e[v+1].x-e[v].x,p=e[v+1].y-e[v].y,f.x=1*p,f.y=-_,f.z=0*p,m.copy(f),f.x+=g.x,f.y+=g.y,f.z+=g.z,f.normalize(),l.push(f.x,f.y,f.z),g.copy(m)}for(let v=0;v<=t;v++){const b=n+v*d*r,y=Math.sin(b),x=Math.cos(b);for(let w=0;w<=e.length-1;w++)u.x=e[w].x*y,u.y=e[w].y,u.z=e[w].x*x,o.push(u.x,u.y,u.z),h.x=v/t,h.y=w/(e.length-1),a.push(h.x,h.y),c.push(l[3*w+0]*y,l[3*w+1],l[3*w+0]*x)}for(let v=0;v<t;v++)for(let b=0;b<e.length-1;b++){const y=b+v*e.length,w=y+e.length,E=y+e.length+1,S=y+1;s.push(y,w,S),s.push(E,S,w)}this.setIndex(s),this.setAttribute("position",new Ze(o,3)),this.setAttribute("uv",new Ze(a,2)),this.setAttribute("normal",new Ze(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jd(e.points,e.segments,e.phiStart,e.phiLength)}}class ip extends Jd{constructor(e=1,t=1,n=4,r=8){const s=new vb;s.absarc(0,-t/2,e,1.5*Math.PI,0),s.absarc(0,t/2,e,0,.5*Math.PI),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new ip(e.radius,e.length,e.capSegments,e.radialSegments)}}class np extends Mt{constructor(e=1,t=32,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new R,d=new pe;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let u=0,h=3;u<=t;u++,h+=3){const f=n+u/t*r;c.x=e*Math.cos(f),c.y=e*Math.sin(f),o.push(c.x,c.y,c.z),a.push(0,0,1),d.x=(o[h]/e+1)/2,d.y=(o[h+1]/e+1)/2,l.push(d.x,d.y)}for(let u=1;u<=t;u++)s.push(u,u+1,0);this.setIndex(s),this.setAttribute("position",new Ze(o,3)),this.setAttribute("normal",new Ze(a,3)),this.setAttribute("uv",new Ze(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new np(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class zn extends Mt{constructor(e=1,t=1,n=1,r=32,s=1,o=!1,a=0,l=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const d=[],u=[],h=[],f=[];let m=0;const g=[],_=n/2;let p=0;function b(y){const x=m,w=new pe,E=new R;let S=0;const C=!0===y?e:t,T=!0===y?1:-1;for(let U=1;U<=r;U++)u.push(0,_*T,0),h.push(0,T,0),f.push(.5,.5),m++;const k=m;for(let U=0;U<=r;U++){const j=U/r*l+a,H=Math.cos(j),L=Math.sin(j);E.x=C*L,E.y=_*T,E.z=C*H,u.push(E.x,E.y,E.z),h.push(0,T,0),w.x=.5*H+.5,w.y=.5*L*T+.5,f.push(w.x,w.y),m++}for(let U=0;U<r;U++){const B=x+U,j=k+U;!0===y?d.push(j,j+1,B):d.push(j+1,j,B),S+=3}c.addGroup(p,S,!0===y?1:2),p+=S}(function v(){const y=new R,x=new R;let w=0;const E=(t-e)/n;for(let S=0;S<=s;S++){const C=[],T=S/s,k=T*(t-e)+e;for(let U=0;U<=r;U++){const B=U/r,j=B*l+a,H=Math.sin(j),L=Math.cos(j);x.x=k*H,x.y=-T*n+_,x.z=k*L,u.push(x.x,x.y,x.z),y.set(H,E,L).normalize(),h.push(y.x,y.y,y.z),f.push(B,1-T),C.push(m++)}g.push(C)}for(let S=0;S<r;S++)for(let C=0;C<s;C++){const k=g[C+1][S],U=g[C+1][S+1],B=g[C][S+1];d.push(g[C][S],k,B),d.push(k,U,B),w+=6}c.addGroup(p,w,0),p+=w})(),!1===o&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(d),this.setAttribute("position",new Ze(u,3)),this.setAttribute("normal",new Ze(h,3)),this.setAttribute("uv",new Ze(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zn(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class rp extends zn{constructor(e=1,t=1,n=32,r=1,s=!1,o=0,a=2*Math.PI){super(0,e,t,n,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new rp(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Fa extends Mt{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const s=[],o=[];function l(v,b,y,x){const w=x+1,E=[];for(let S=0;S<=w;S++){E[S]=[];const C=v.clone().lerp(y,S/w),T=b.clone().lerp(y,S/w),k=w-S;for(let U=0;U<=k;U++)E[S][U]=0===U&&S===w?C:C.clone().lerp(T,U/k)}for(let S=0;S<w;S++)for(let C=0;C<2*(w-S)-1;C++){const T=Math.floor(C/2);C%2==0?(h(E[S][T+1]),h(E[S+1][T]),h(E[S][T])):(h(E[S][T+1]),h(E[S+1][T+1]),h(E[S+1][T]))}}function h(v){s.push(v.x,v.y,v.z)}function f(v,b){const y=3*v;b.x=e[y+0],b.y=e[y+1],b.z=e[y+2]}function g(v,b,y,x){x<0&&1===v.x&&(o[b]=v.x-1),0===y.x&&0===y.z&&(o[b]=x/2/Math.PI+.5)}function _(v){return Math.atan2(v.z,-v.x)}function p(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}(function a(v){const b=new R,y=new R,x=new R;for(let w=0;w<t.length;w+=3)f(t[w+0],b),f(t[w+1],y),f(t[w+2],x),l(b,y,x,v)})(r),function c(v){const b=new R;for(let y=0;y<s.length;y+=3)b.x=s[y+0],b.y=s[y+1],b.z=s[y+2],b.normalize().multiplyScalar(v),s[y+0]=b.x,s[y+1]=b.y,s[y+2]=b.z}(n),function d(){const v=new R;for(let b=0;b<s.length;b+=3){v.x=s[b+0],v.y=s[b+1],v.z=s[b+2];const y=_(v)/2/Math.PI+.5,x=p(v)/Math.PI+.5;o.push(y,1-x)}(function m(){const v=new R,b=new R,y=new R,x=new R,w=new pe,E=new pe,S=new pe;for(let C=0,T=0;C<s.length;C+=9,T+=6){v.set(s[C+0],s[C+1],s[C+2]),b.set(s[C+3],s[C+4],s[C+5]),y.set(s[C+6],s[C+7],s[C+8]),w.set(o[T+0],o[T+1]),E.set(o[T+2],o[T+3]),S.set(o[T+4],o[T+5]),x.copy(v).add(b).add(y).divideScalar(3);const k=_(x);g(w,T+0,v,k),g(E,T+2,b,k),g(S,T+4,y,k)}})(),function u(){for(let v=0;v<o.length;v+=6){const b=o[v+0],y=o[v+2],x=o[v+4],w=Math.max(b,y,x),E=Math.min(b,y,x);w>.9&&E<.1&&(b<.2&&(o[v+0]+=1),y<.2&&(o[v+2]+=1),x<.2&&(o[v+4]+=1))}}()}(),this.setAttribute("position",new Ze(s,3)),this.setAttribute("normal",new Ze(s.slice(),3)),this.setAttribute("uv",new Ze(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fa(e.vertices,e.indices,e.radius,e.details)}}class sp extends Fa{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sp(e.radius,e.detail)}}const hx=new R,fx=new R,aR=new R,px=new rs;class lR extends Mt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const r=Math.pow(10,4),s=Math.cos(zd*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],d=["a","b","c"],u=new Array(3),h={},f=[];for(let m=0;m<l;m+=3){o?(c[0]=o.getX(m),c[1]=o.getX(m+1),c[2]=o.getX(m+2)):(c[0]=m,c[1]=m+1,c[2]=m+2);const{a:g,b:_,c:p}=px;if(g.fromBufferAttribute(a,c[0]),_.fromBufferAttribute(a,c[1]),p.fromBufferAttribute(a,c[2]),px.getNormal(aR),u[0]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,u[1]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,u[2]=`${Math.round(p.x*r)},${Math.round(p.y*r)},${Math.round(p.z*r)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let v=0;v<3;v++){const b=(v+1)%3,y=u[v],x=u[b],w=px[d[v]],E=px[d[b]],S=`${y}_${x}`,C=`${x}_${y}`;C in h&&h[C]?(aR.dot(h[C].normal)<=s&&(f.push(w.x,w.y,w.z),f.push(E.x,E.y,E.z)),h[C]=null):S in h||(h[S]={index0:c[v],index1:c[b],normal:aR.clone()})}}for(const m in h)if(h[m]){const{index0:g,index1:_}=h[m];hx.fromBufferAttribute(a,g),fx.fromBufferAttribute(a,_),f.push(hx.x,hx.y,hx.z),f.push(fx.x,fx.y,fx.z)}this.setAttribute("position",new Ze(f,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class eu extends vb{constructor(e){super(e),this.uuid=Xs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push((new vb).fromJSON(r))}return this}}function c4(i,e,t,n,r){let s,o;if(r===function Gae(i,e,t,n){let r=0;for(let s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}(i,e,t,n)>0)for(s=e;s<t;s+=n)o=h4(s,i[s],i[s+1],o);else for(s=t-n;s>=e;s-=n)o=h4(s,i[s],i[s+1],o);return o&&mx(o,o.next)&&(xb(o),o=o.next),o}function tu(i,e){if(!i)return i;e||(e=i);let n,t=i;do{if(n=!1,t.steiner||!mx(t,t.next)&&0!==Dn(t.prev,t,t.next))t=t.next;else{if(xb(t),t=e=t.prev,t===t.next)break;n=!0}}while(n||t!==e);return e}function Ab(i,e,t,n,r,s,o){if(!i)return;!o&&s&&function Oae(i,e,t,n){let r=i;do{0===r.z&&(r.z=cR(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,function Nae(i){let e,t,n,r,s,o,a,l,c=1;do{for(t=i,i=null,s=null,o=0;t;){for(o++,n=t,a=0,e=0;e<c&&(a++,n=n.nextZ,n);e++);for(l=c;a>0||l>0&&n;)0!==a&&(0===l||!n||t.z<=n.z)?(r=t,t=t.nextZ,a--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;t=n}s.nextZ=null,c*=2}while(o>1)}(r)}(i,n,r,s);let l,c,a=i;for(;i.prev!==i.next;)if(l=i.prev,c=i.next,s?Rae(i,n,r,s):Tae(i))e.push(l.i/t|0),e.push(i.i/t|0),e.push(c.i/t|0),xb(i),i=c.next,a=c.next;else if((i=c)===a){o?1===o?Ab(i=Iae(tu(i),e,t),e,t,n,r,s,2):2===o&&Dae(i,e,t,n,r,s):Ab(tu(i),e,t,n,r,s,1);break}}function Tae(i){const e=i.prev,t=i,n=i.next;if(Dn(e,t,n)>=0)return!1;const r=e.x,s=t.x,o=n.x,a=e.y,l=t.y,c=n.y,d=r<s?r<o?r:o:s<o?s:o,u=a<l?a<c?a:c:l<c?l:c,h=r>s?r>o?r:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c;let m=n.next;for(;m!==e;){if(m.x>=d&&m.x<=h&&m.y>=u&&m.y<=f&&op(r,a,s,l,o,c,m.x,m.y)&&Dn(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Rae(i,e,t,n){const r=i.prev,s=i,o=i.next;if(Dn(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,d=r.y,u=s.y,h=o.y,f=a<l?a<c?a:c:l<c?l:c,m=d<u?d<h?d:h:u<h?u:h,g=a>l?a>c?a:c:l>c?l:c,_=d>u?d>h?d:h:u>h?u:h,p=cR(f,m,e,t,n),v=cR(g,_,e,t,n);let b=i.prevZ,y=i.nextZ;for(;b&&b.z>=p&&y&&y.z<=v;){if(b.x>=f&&b.x<=g&&b.y>=m&&b.y<=_&&b!==r&&b!==o&&op(a,d,l,u,c,h,b.x,b.y)&&Dn(b.prev,b,b.next)>=0||(b=b.prevZ,y.x>=f&&y.x<=g&&y.y>=m&&y.y<=_&&y!==r&&y!==o&&op(a,d,l,u,c,h,y.x,y.y)&&Dn(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;b&&b.z>=p;){if(b.x>=f&&b.x<=g&&b.y>=m&&b.y<=_&&b!==r&&b!==o&&op(a,d,l,u,c,h,b.x,b.y)&&Dn(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;y&&y.z<=v;){if(y.x>=f&&y.x<=g&&y.y>=m&&y.y<=_&&y!==r&&y!==o&&op(a,d,l,u,c,h,y.x,y.y)&&Dn(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function Iae(i,e,t){let n=i;do{const r=n.prev,s=n.next.next;!mx(r,s)&&d4(r,n,n.next,s)&&yb(r,s)&&yb(s,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),xb(n),xb(n.next),n=i=s),n=n.next}while(n!==i);return tu(n)}function Dae(i,e,t,n,r,s){let o=i;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Uae(o,a)){let l=u4(o,a);return o=tu(o,o.next),l=tu(l,l.next),Ab(o,e,t,n,r,s,0),void Ab(l,e,t,n,r,s,0)}a=a.next}o=o.next}while(o!==i)}function kae(i,e){return i.x-e.x}function Lae(i,e){const t=function Bae(i,e){let r,t=e,n=-1/0;const s=i.x,o=i.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const h=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=s&&h>n&&(n=h,r=t.x<t.next.x?t:t.next,h===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let u,d=1/0;t=r;do{s>=t.x&&t.x>=l&&s!==t.x&&op(o<c?s:n,o,l,c,o<c?n:s,o,t.x,t.y)&&(u=Math.abs(o-t.y)/(s-t.x),yb(t,i)&&(u<d||u===d&&(t.x>r.x||t.x===r.x&&Fae(r,t)))&&(r=t,d=u)),t=t.next}while(t!==a);return r}(i,e);if(!t)return e;const n=u4(t,i);return tu(n,n.next),tu(t,t.next)}function Fae(i,e){return Dn(i.prev,i,e.prev)<0&&Dn(e.next,i,i.next)<0}function cR(i,e,t,n,r){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-t)*r|0)|i<<8))|i<<4))|i<<2))|i<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function jae(i){let e=i,t=i;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==i);return t}function op(i,e,t,n,r,s,o,a){return(r-o)*(e-a)>=(i-o)*(s-a)&&(i-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(n-a)}function Uae(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!function Vae(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&d4(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}(i,e)&&(yb(i,e)&&yb(e,i)&&function zae(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do{t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next}while(t!==i);return n}(i,e)&&(Dn(i.prev,i,e.prev)||Dn(i,e.prev,e))||mx(i,e)&&Dn(i.prev,i,i.next)>0&&Dn(e.prev,e,e.next)>0)}function Dn(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function mx(i,e){return i.x===e.x&&i.y===e.y}function d4(i,e,t,n){const r=_x(Dn(i,e,t)),s=_x(Dn(i,e,n)),o=_x(Dn(t,n,i)),a=_x(Dn(t,n,e));return!!(r!==s&&o!==a||0===r&&gx(i,t,e)||0===s&&gx(i,n,e)||0===o&&gx(t,i,n)||0===a&&gx(t,e,n))}function gx(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function _x(i){return i>0?1:i<0?-1:0}function yb(i,e){return Dn(i.prev,i,i.next)<0?Dn(i,e,i.next)>=0&&Dn(i,i.prev,e)>=0:Dn(i,e,i.prev)<0||Dn(i,i.next,e)<0}function u4(i,e){const t=new dR(i.i,i.x,i.y),n=new dR(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function h4(i,e,t,n){const r=new dR(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function xb(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function dR(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Oa{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return.5*n}static isClockWise(e){return Oa.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];f4(e),p4(n,e);let o=e.length;t.forEach(f4);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,p4(n,t[l]);const a=function(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=c4(i,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,d,u,h,f;if(n&&(s=function Pae(i,e,t,n){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*n,l=s<o-1?e[s+1]*n:i.length,c=c4(i,a,l,n,!1),c===c.next&&(c.steiner=!0),r.push(jae(c));for(r.sort(kae),s=0;s<r.length;s++)t=Lae(r[s],t);return t}(i,e,s,t)),i.length>80*t){a=c=i[0],l=d=i[1];for(let m=t;m<r;m+=t)u=i[m],h=i[m+1],u<a&&(a=u),h<l&&(l=h),u>c&&(c=u),h>d&&(d=h);f=Math.max(c-a,d-l),f=0!==f?32767/f:0}return Ab(s,o,t,a,l,f,0),o}(n,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function f4(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function p4(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class iu extends Mt{constructor(e=new eu([new pe(.5,.5),new pe(-.5,.5),new pe(-.5,-.5),new pe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++)o(e[a]);function o(a){const l=[],c=void 0!==t.curveSegments?t.curveSegments:12,d=void 0!==t.steps?t.steps:1,u=void 0!==t.depth?t.depth:1;let h=void 0===t.bevelEnabled||t.bevelEnabled,f=void 0!==t.bevelThickness?t.bevelThickness:.2,m=void 0!==t.bevelSize?t.bevelSize:f-.1,g=void 0!==t.bevelOffset?t.bevelOffset:0,_=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,v=void 0!==t.UVGenerator?t.UVGenerator:Hae;let b,x,w,E,S,y=!1;p&&(b=p.getSpacedPoints(d),y=!0,h=!1,x=p.computeFrenetFrames(d,!1),w=new R,E=new R,S=new R),h||(_=0,f=0,m=0,g=0);const C=a.extractPoints(c);let T=C.shape;const k=C.holes;if(!Oa.isClockWise(T)){T=T.reverse();for(let Ce=0,we=k.length;Ce<we;Ce++){const Ee=k[Ce];Oa.isClockWise(Ee)&&(k[Ce]=Ee.reverse())}}const B=Oa.triangulateShape(T,k),j=T;for(let Ce=0,we=k.length;Ce<we;Ce++)T=T.concat(k[Ce]);function H(Ce,we,Ee){return we||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ce.clone().addScaledVector(we,Ee)}const L=T.length,V=B.length;function O(Ce,we,Ee){let it,qe,bt;const At=Ce.x-we.x,lt=Ce.y-we.y,ut=Ee.x-Ce.x,yt=Ee.y-Ce.y,N=At*At+lt*lt;if(Math.abs(At*yt-lt*ut)>Number.EPSILON){const ve=Math.sqrt(N),De=Math.sqrt(ut*ut+yt*yt),Ne=we.x-lt/ve,et=we.y+At/ve,Ae=((Ee.x-yt/De-Ne)*yt-(Ee.y+ut/De-et)*ut)/(At*yt-lt*ut);it=Ne+At*Ae-Ce.x,qe=et+lt*Ae-Ce.y;const Je=it*it+qe*qe;if(Je<=2)return new pe(it,qe);bt=Math.sqrt(Je/2)}else{let ve=!1;At>Number.EPSILON?ut>Number.EPSILON&&(ve=!0):At<-Number.EPSILON?ut<-Number.EPSILON&&(ve=!0):Math.sign(lt)===Math.sign(yt)&&(ve=!0),ve?(it=-lt,qe=At,bt=Math.sqrt(N)):(it=At,qe=lt,bt=Math.sqrt(N/2))}return new pe(it/bt,qe/bt)}const Q=[];for(let Ce=0,we=j.length,Ee=we-1,it=Ce+1;Ce<we;Ce++,Ee++,it++)Ee===we&&(Ee=0),it===we&&(it=0),Q[Ce]=O(j[Ce],j[Ee],j[it]);const re=[];let _e,de=Q.concat();for(let Ce=0,we=k.length;Ce<we;Ce++){const Ee=k[Ce];_e=[];for(let it=0,qe=Ee.length,bt=qe-1,At=it+1;it<qe;it++,bt++,At++)bt===qe&&(bt=0),At===qe&&(At=0),_e[it]=O(Ee[it],Ee[bt],Ee[At]);re.push(_e),de=de.concat(_e)}for(let Ce=0;Ce<_;Ce++){const we=Ce/_,Ee=f*Math.cos(we*Math.PI/2),it=m*Math.sin(we*Math.PI/2)+g;for(let qe=0,bt=j.length;qe<bt;qe++){const At=H(j[qe],Q[qe],it);I(At.x,At.y,-Ee)}for(let qe=0,bt=k.length;qe<bt;qe++){const At=k[qe];_e=re[qe];for(let lt=0,ut=At.length;lt<ut;lt++){const yt=H(At[lt],_e[lt],it);I(yt.x,yt.y,-Ee)}}}const Y=m+g;for(let Ce=0;Ce<L;Ce++){const we=h?H(T[Ce],de[Ce],Y):T[Ce];y?(E.copy(x.normals[0]).multiplyScalar(we.x),w.copy(x.binormals[0]).multiplyScalar(we.y),S.copy(b[0]).add(E).add(w),I(S.x,S.y,S.z)):I(we.x,we.y,0)}for(let Ce=1;Ce<=d;Ce++)for(let we=0;we<L;we++){const Ee=h?H(T[we],de[we],Y):T[we];y?(E.copy(x.normals[Ce]).multiplyScalar(Ee.x),w.copy(x.binormals[Ce]).multiplyScalar(Ee.y),S.copy(b[Ce]).add(E).add(w),I(S.x,S.y,S.z)):I(Ee.x,Ee.y,u/d*Ce)}for(let Ce=_-1;Ce>=0;Ce--){const we=Ce/_,Ee=f*Math.cos(we*Math.PI/2),it=m*Math.sin(we*Math.PI/2)+g;for(let qe=0,bt=j.length;qe<bt;qe++){const At=H(j[qe],Q[qe],it);I(At.x,At.y,u+Ee)}for(let qe=0,bt=k.length;qe<bt;qe++){const At=k[qe];_e=re[qe];for(let lt=0,ut=At.length;lt<ut;lt++){const yt=H(At[lt],_e[lt],it);y?I(yt.x,yt.y+b[d-1].y,b[d-1].x+Ee):I(yt.x,yt.y,u+Ee)}}}function $(Ce,we){let Ee=Ce.length;for(;--Ee>=0;){const it=Ee;let qe=Ee-1;qe<0&&(qe=Ce.length-1);for(let bt=0,At=d+2*_;bt<At;bt++){const lt=L*bt,ut=L*(bt+1);Me(we+it+lt,we+qe+lt,we+qe+ut,we+it+ut)}}}function I(Ce,we,Ee){l.push(Ce),l.push(we),l.push(Ee)}function ue(Ce,we,Ee){me(Ce),me(we),me(Ee);const it=r.length/3,qe=v.generateTopUV(n,r,it-3,it-2,it-1);He(qe[0]),He(qe[1]),He(qe[2])}function Me(Ce,we,Ee,it){me(Ce),me(we),me(it),me(we),me(Ee),me(it);const qe=r.length/3,bt=v.generateSideWallUV(n,r,qe-6,qe-3,qe-2,qe-1);He(bt[0]),He(bt[1]),He(bt[3]),He(bt[1]),He(bt[2]),He(bt[3])}function me(Ce){r.push(l[3*Ce+0]),r.push(l[3*Ce+1]),r.push(l[3*Ce+2])}function He(Ce){s.push(Ce.x),s.push(Ce.y)}(function q(){const Ce=r.length/3;if(h){let we=0,Ee=L*we;for(let it=0;it<V;it++){const qe=B[it];ue(qe[2]+Ee,qe[1]+Ee,qe[0]+Ee)}we=d+2*_,Ee=L*we;for(let it=0;it<V;it++){const qe=B[it];ue(qe[0]+Ee,qe[1]+Ee,qe[2]+Ee)}}else{for(let we=0;we<V;we++){const Ee=B[we];ue(Ee[2],Ee[1],Ee[0])}for(let we=0;we<V;we++){const Ee=B[we];ue(Ee[0]+L*d,Ee[1]+L*d,Ee[2]+L*d)}}n.addGroup(Ce,r.length/3-Ce,0)})(),function te(){const Ce=r.length/3;let we=0;$(j,we),we+=j.length;for(let Ee=0,it=k.length;Ee<it;Ee++){const qe=k[Ee];$(qe,we),we+=qe.length}n.addGroup(Ce,r.length/3-Ce,1)}()}this.setAttribute("position",new Ze(r,3)),this.setAttribute("uv",new Ze(s,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function Qae(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++)t.shapes.push(i[n].uuid);else t.shapes.push(i.uuid);return t.options=Object.assign({},e),void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++)n.push(t[e.shapes[s]]);const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new oR[r.type]).fromJSON(r)),new iu(n,e.options)}}const Hae={generateTopUV:function(i,e,t,n,r){const a=e[3*n],l=e[3*n+1],c=e[3*r],d=e[3*r+1];return[new pe(e[3*t],e[3*t+1]),new pe(a,l),new pe(c,d)]},generateSideWallUV:function(i,e,t,n,r,s){const o=e[3*t],a=e[3*t+1],l=e[3*t+2],c=e[3*n],d=e[3*n+1],u=e[3*n+2],h=e[3*r],f=e[3*r+1],m=e[3*r+2],g=e[3*s],_=e[3*s+1],p=e[3*s+2];return Math.abs(a-d)<Math.abs(o-c)?[new pe(o,1-l),new pe(c,1-u),new pe(h,1-m),new pe(g,1-p)]:[new pe(a,1-l),new pe(d,1-u),new pe(f,1-m),new pe(_,1-p)]}};class ap extends Fa{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ap(e.radius,e.detail)}}class ra extends Fa{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ra(e.radius,e.detail)}}class lp extends Mt{constructor(e=.5,t=1,n=32,r=1,s=0,o=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:o},n=Math.max(3,n);const a=[],l=[],c=[],d=[];let u=e;const h=(t-e)/(r=Math.max(1,r)),f=new R,m=new pe;for(let g=0;g<=r;g++){for(let _=0;_<=n;_++){const p=s+_/n*o;f.x=u*Math.cos(p),f.y=u*Math.sin(p),l.push(f.x,f.y,f.z),c.push(0,0,1),m.x=(f.x/t+1)/2,m.y=(f.y/t+1)/2,d.push(m.x,m.y)}u+=h}for(let g=0;g<r;g++){const _=g*(n+1);for(let p=0;p<n;p++){const v=p+_,y=v+n+1,x=v+n+2,w=v+1;a.push(v,y,w),a.push(y,x,w)}}this.setIndex(a),this.setAttribute("position",new Ze(l,3)),this.setAttribute("normal",new Ze(c,3)),this.setAttribute("uv",new Ze(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lp(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class cp extends Mt{constructor(e=new eu([new pe(0,.5),new pe(-.5,-.5),new pe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],o=[];let a=0,l=0;if(!1===Array.isArray(e))c(e);else for(let d=0;d<e.length;d++)c(e[d]),this.addGroup(a,l,d),a+=l,l=0;function c(d){const u=r.length/3,h=d.extractPoints(t);let f=h.shape;const m=h.holes;!1===Oa.isClockWise(f)&&(f=f.reverse());for(let _=0,p=m.length;_<p;_++){const v=m[_];!0===Oa.isClockWise(v)&&(m[_]=v.reverse())}const g=Oa.triangulateShape(f,m);for(let _=0,p=m.length;_<p;_++)f=f.concat(m[_]);for(let _=0,p=f.length;_<p;_++){const v=f[_];r.push(v.x,v.y,0),s.push(0,0,1),o.push(v.x,v.y)}for(let _=0,p=g.length;_<p;_++){const v=g[_];n.push(v[0]+u,v[1]+u,v[2]+u),l+=3}}this.setIndex(n),this.setAttribute("position",new Ze(r,3)),this.setAttribute("normal",new Ze(s,3)),this.setAttribute("uv",new Ze(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function Wae(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++)e.shapes.push(i[t].uuid);else e.shapes.push(i.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++)n.push(t[e.shapes[r]]);return new cp(n,e.curveSegments)}}class vc extends Mt{constructor(e=1,t=32,n=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let c=0;const d=[],u=new R,h=new R,f=[],m=[],g=[],_=[];for(let p=0;p<=n;p++){const v=[],b=p/n;let y=0;0===p&&0===o?y=.5/t:p===n&&l===Math.PI&&(y=-.5/t);for(let x=0;x<=t;x++){const w=x/t;u.x=-e*Math.cos(r+w*s)*Math.sin(o+b*a),u.y=e*Math.cos(o+b*a),u.z=e*Math.sin(r+w*s)*Math.sin(o+b*a),m.push(u.x,u.y,u.z),h.copy(u).normalize(),g.push(h.x,h.y,h.z),_.push(w+y,1-b),v.push(c++)}d.push(v)}for(let p=0;p<n;p++)for(let v=0;v<t;v++){const y=d[p][v],x=d[p+1][v],w=d[p+1][v+1];(0!==p||o>0)&&f.push(d[p][v+1],y,w),(p!==n-1||l<Math.PI)&&f.push(y,x,w)}this.setIndex(f),this.setAttribute("position",new Ze(m,3)),this.setAttribute("normal",new Ze(g,3)),this.setAttribute("uv",new Ze(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vc(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class dp extends Fa{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new dp(e.radius,e.detail)}}class sa extends Mt{constructor(e=1,t=.4,n=12,r=48,s=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],l=[],c=[],d=new R,u=new R,h=new R;for(let f=0;f<=n;f++)for(let m=0;m<=r;m++){const g=m/r*s,_=f/n*Math.PI*2;u.x=(e+t*Math.cos(_))*Math.cos(g),u.y=(e+t*Math.cos(_))*Math.sin(g),u.z=t*Math.sin(_),a.push(u.x,u.y,u.z),d.x=e*Math.cos(g),d.y=e*Math.sin(g),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(m/r),c.push(f/n)}for(let f=1;f<=n;f++)for(let m=1;m<=r;m++){const _=(r+1)*(f-1)+m-1,p=(r+1)*(f-1)+m,v=(r+1)*f+m;o.push((r+1)*f+m-1,_,v),o.push(_,p,v)}this.setIndex(o),this.setAttribute("position",new Ze(a,3)),this.setAttribute("normal",new Ze(l,3)),this.setAttribute("uv",new Ze(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sa(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class up extends Mt{constructor(e=1,t=.4,n=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],l=[],c=[],d=[],u=new R,h=new R,f=new R,m=new R,g=new R,_=new R,p=new R;for(let b=0;b<=n;++b){const y=b/n*s*Math.PI*2;v(y,s,o,e,f),v(y+.01,s,o,e,m),_.subVectors(m,f),p.addVectors(m,f),g.crossVectors(_,p),p.crossVectors(g,_),g.normalize(),p.normalize();for(let x=0;x<=r;++x){const w=x/r*Math.PI*2,E=-t*Math.cos(w),S=t*Math.sin(w);u.x=f.x+(E*p.x+S*g.x),u.y=f.y+(E*p.y+S*g.y),u.z=f.z+(E*p.z+S*g.z),l.push(u.x,u.y,u.z),h.subVectors(u,f).normalize(),c.push(h.x,h.y,h.z),d.push(b/n),d.push(x/r)}}for(let b=1;b<=n;b++)for(let y=1;y<=r;y++){const w=(r+1)*b+(y-1),E=(r+1)*b+y,S=(r+1)*(b-1)+y;a.push((r+1)*(b-1)+(y-1),w,S),a.push(w,E,S)}function v(b,y,x,w,E){const S=Math.cos(b),C=Math.sin(b),T=x/y*b,k=Math.cos(T);E.x=w*(2+k)*.5*S,E.y=w*(2+k)*C*.5,E.z=w*Math.sin(T)*.5}this.setIndex(a),this.setAttribute("position",new Ze(l,3)),this.setAttribute("normal",new Ze(c,3)),this.setAttribute("uv",new Ze(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new up(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class hp extends Mt{constructor(e=new rR(new R(-1,-1,0),new R(-1,1,0),new R(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new R,l=new R,c=new pe;let d=new R;const u=[],h=[],f=[],m=[];function _(b){d=e.getPointAt(b/t,d);const y=o.normals[b],x=o.binormals[b];for(let w=0;w<=r;w++){const E=w/r*Math.PI*2,S=Math.sin(E),C=-Math.cos(E);l.x=C*y.x+S*x.x,l.y=C*y.y+S*x.y,l.z=C*y.z+S*x.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=d.x+n*l.x,a.y=d.y+n*l.y,a.z=d.z+n*l.z,u.push(a.x,a.y,a.z)}}(function g(){for(let b=0;b<t;b++)_(b);_(!1===s?t:0),function v(){for(let b=0;b<=t;b++)for(let y=0;y<=r;y++)c.x=b/t,c.y=y/r,f.push(c.x,c.y)}(),function p(){for(let b=1;b<=t;b++)for(let y=1;y<=r;y++){const w=(r+1)*b+(y-1),E=(r+1)*b+y,S=(r+1)*(b-1)+y;m.push((r+1)*(b-1)+(y-1),w,S),m.push(w,E,S)}}()})(),this.setIndex(m),this.setAttribute("position",new Ze(u,3)),this.setAttribute("normal",new Ze(h,3)),this.setAttribute("uv",new Ze(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new hp((new oR[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class uR extends Mt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new R,s=new R;if(null!==e.index){const o=e.attributes.position,a=e.index;let l=e.groups;0===l.length&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,d=l.length;c<d;++c){const u=l[c],h=u.start;for(let m=h,g=h+u.count;m<g;m+=3)for(let _=0;_<3;_++){const p=a.getX(m+_),v=a.getX(m+(_+1)%3);r.fromBufferAttribute(o,p),s.fromBufferAttribute(o,v),!0===m4(r,s,n)&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+(c+1)%3;r.fromBufferAttribute(o,3*a+c),s.fromBufferAttribute(o,u),!0===m4(r,s,n)&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ze(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function m4(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return!0!==t.has(n)&&!0!==t.has(r)&&(t.add(n),t.add(r),!0)}var g4=Object.freeze({__proto__:null,BoxGeometry:Ji,CapsuleGeometry:ip,CircleGeometry:np,ConeGeometry:rp,CylinderGeometry:zn,DodecahedronGeometry:sp,EdgesGeometry:lR,ExtrudeGeometry:iu,IcosahedronGeometry:ap,LatheGeometry:Jd,OctahedronGeometry:ra,PlaneGeometry:gc,PolyhedronGeometry:Fa,RingGeometry:lp,ShapeGeometry:cp,SphereGeometry:vc,TetrahedronGeometry:dp,TorusGeometry:sa,TorusKnotGeometry:up,TubeGeometry:hp,WireframeGeometry:uR});class hR extends Un{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Be(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class fR extends Dt{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Na extends Un{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Be(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uc,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ja extends Na{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new pe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return jn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Be(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Be(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Be(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class nu extends Un{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Be(16777215),this.specular=new Be(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uc,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=U_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class pR extends Un{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Be(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uc,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class fp extends Un{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uc,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class bx extends Un{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Be(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uc,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=U_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mR extends Un{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Be(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uc,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class gR extends mn{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function So(i,e,t){return _R(i)?new i.constructor(i.subarray(e,void 0!==t?t:i.length)):i.slice(e,t)}function ru(i,e,t){return!i||!t&&i.constructor===e?i:"number"==typeof e.BYTES_PER_ELEMENT?new e(i):Array.prototype.slice.call(i)}function _R(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function _4(i){const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(function e(r,s){return i[r]-i[s]}),n}function bR(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=i[a+l]}return r}function vR(i,e,t,n){let r=1,s=i[0];for(;void 0!==s&&void 0===s[n];)s=i[r++];if(void 0===s)return;let o=s[n];if(void 0!==o)if(Array.isArray(o))do{o=s[n],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=i[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[n],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=i[r++]}while(void 0!==s);else do{o=s[n],void 0!==o&&(e.push(s.time),t.push(o)),s=i[r++]}while(void 0!==s)}const Xae={arraySlice:So,convertArray:ru,isTypedArray:_R,getKeyframeOrder:_4,sortedArray:bR,flattenJSON:vR,subclip:function qae(i,e,t,n,r=30){const s=i.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],d=c.getValueSize(),u=[],h=[];for(let f=0;f<c.times.length;++f){const m=c.times[f]*r;if(!(m<t||m>=n)){u.push(c.times[f]);for(let g=0;g<d;++g)h.push(c.values[f*d+g])}}0!==u.length&&(c.times=ru(u,c.times.constructor),c.values=ru(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function Yae(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,s=e/n;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if("bool"===l||"string"===l)continue;const c=i.tracks.find(function(p){return p.name===a.name&&p.ValueTypeName===l});if(void 0===c)continue;let d=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=u/3);let h=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const m=a.times.length-1;let g;if(s<=a.times[0])g=So(a.values,d,u-d);else if(s>=a.times[m]){const p=m*u+d;g=So(a.values,p,p+u-d)}else{const p=a.createInterpolant(),v=d,b=u-d;p.evaluate(s),g=So(p.resultBuffer,v,b)}"quaternion"===l&&(new wi).fromArray(g).normalize().conjugate().toArray(g);const _=c.times.length;for(let p=0;p<_;++p){const v=p*f+h;if("quaternion"===l)wi.multiplyQuaternionsFlat(c.values,v,g,0,c.values,v);else{const b=f-2*h;for(let y=0;y<b;++y)c.values[v+y]-=g[y]}}}return i.blendMode=hT,i}};class pp{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;i:{n:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<s)break n;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break i}if(e>=s)break e;{const a=t[1];e<a&&(n=2,s=a);for(let l=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0}}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(r=t[n],s=t[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class b4 extends pp{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:jd,endingEnd:jd}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Ud:s=e,a=2*t-n;break;case Y_:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=n}if(void 0===l)switch(this.getSettings_().endingEnd){case Ud:o=e,l=2*n-t;break;case Y_:o=1,l=n+r[1]-r[0];break;default:o=e-1,l=t}const c=.5*(n-t),d=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-n),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,f=this._weightNext,m=(n-t)/(r-t),g=m*m,_=g*m,p=-h*_+2*h*g-h*m,v=(1+h)*_+(-1.5-2*h)*g+(-.5+h)*m+1,b=(-1-f)*_+(1.5+f)*g+.5*m,y=f*_-f*g;for(let x=0;x!==a;++x)s[x]=p*o[d+x]+v*o[c+x]+b*o[l+x]+y*o[u+x];return s}}class AR extends pp{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=(n-t)/(r-t),u=1-d;for(let h=0;h!==a;++h)s[h]=o[c+h]*u+o[l+h]*d;return s}}class v4 extends pp{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class oa{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ru(t,this.TimeBufferType),this.values=ru(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:ru(e.times,Array),values:ru(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new v4(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new AR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new b4(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Cf:t=this.InterpolantFactoryMethodDiscrete;break;case Nd:t=this.InterpolantFactoryMethodLinear;break;case gy:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Cf;case this.InterpolantFactoryMethodLinear:return Nd;case this.InterpolantFactoryMethodSmooth:return gy}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=So(n,s,o),this.values=So(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==r&&_R(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=So(this.times),t=So(this.values),n=this.getValueSize(),r=this.getInterpolation()===gy,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const u=a*n,h=u-n,f=u+n;for(let m=0;m!==n;++m){const g=t[u+m];if(g!==t[h+m]||g!==t[f+m]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const u=a*n,h=o*n;for(let f=0;f!==n;++f)t[h+f]=t[u+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*n,l=o*n,c=0;c!==n;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=So(e,0,o),this.values=So(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=So(this.times,0),t=So(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}oa.prototype.TimeBufferType=Float32Array,oa.prototype.ValueBufferType=Float32Array,oa.prototype.DefaultInterpolation=Nd;class su extends oa{}su.prototype.ValueTypeName="bool",su.prototype.ValueBufferType=Array,su.prototype.DefaultInterpolation=Cf,su.prototype.InterpolantFactoryMethodLinear=void 0,su.prototype.InterpolantFactoryMethodSmooth=void 0;class yR extends oa{}yR.prototype.ValueTypeName="color";class ou extends oa{}ou.prototype.ValueTypeName="number";class A4 extends pp{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-t)/(r-t);let c=e*a;for(let d=c+a;c!==d;c+=4)wi.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Rl extends oa{InterpolantFactoryMethodLinear(e){return new A4(this.times,this.values,this.getValueSize(),e)}}Rl.prototype.ValueTypeName="quaternion",Rl.prototype.DefaultInterpolation=Nd,Rl.prototype.InterpolantFactoryMethodSmooth=void 0;class au extends oa{}au.prototype.ValueTypeName="string",au.prototype.ValueBufferType=Array,au.prototype.DefaultInterpolation=Cf,au.prototype.InterpolantFactoryMethodLinear=void 0,au.prototype.InterpolantFactoryMethodSmooth=void 0;class lu extends oa{}lu.prototype.ValueTypeName="vector";class cu{constructor(e,t=-1,n,r=_y){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Xs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(Kae(n[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(oa.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const d=_4(l);l=bR(l,1,d),c=bR(c,1,d),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new ou(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;Array.isArray(e)||(n=e.geometry&&e.geometry.animations||e.animations);for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.name.match(s);if(d&&d.length>1){const u=d[1];let h=r[u];h||(r[u]=h=[]),h.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(u,h,f,m,g){if(0!==f.length){const _=[],p=[];vR(f,_,p,m),0!==_.length&&g.push(new u(h,_,p))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let u=0;u<c.length;u++){const h=c[u].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let m;for(m=0;m<h.length;m++)if(h[m].morphTargets)for(let g=0;g<h[m].morphTargets.length;g++)f[h[m].morphTargets[g]]=-1;for(const g in f){const _=[],p=[];for(let v=0;v!==h[m].morphTargets.length;++v){const b=h[m];_.push(b.time),p.push(b.morphTarget===g?1:0)}r.push(new ou(".morphTargetInfluence["+g+"]",_,p))}l=f.length*o}else{const f=".bones["+t[u].name+"]";n(lu,f+".position",h,"pos",r),n(Rl,f+".quaternion",h,"rot",r),n(lu,f+".scale",h,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let t=0;for(let n=0,r=this.tracks.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Kae(i){if(void 0===i.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function Zae(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ou;case"vector":case"vector2":case"vector3":case"vector4":return lu;case"color":return yR;case"quaternion":return Rl;case"bool":case"boolean":return su;case"string":return au}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}(i.type);if(void 0===i.times){const t=[],n=[];vR(i.keys,t,n,"value"),i.times=t,i.values=n}return void 0!==e.parse?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const du={enabled:!1,files:{},add:function(i,e){!1!==this.enabled&&(this.files[i]=e)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class xR{constructor(e,t,n){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(d){a++,!1===s&&void 0!==r.onStart&&r.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,void 0!==r.onProgress&&r.onProgress(d,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(d){void 0!==r.onError&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,u){return c.push(d,u),this},this.removeHandler=function(d){const u=c.indexOf(d);return-1!==u&&c.splice(u,2),this},this.getHandler=function(d){for(let u=0,h=c.length;u<h;u+=2){const f=c[u],m=c[u+1];if(f.global&&(f.lastIndex=0),f.test(d))return m}return null}}}const y4=new xR;class br{constructor(e){this.manager=void 0!==e?e:y4,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Il={};class $ae extends Error{constructor(e,t){super(e),this.response=t}}class vr extends br{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=du.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==Il[e])return void Il[e].push({onLoad:t,onProgress:n,onError:r});Il[e]=[],Il[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===c.body||void 0===c.body.getReader)return c;const d=Il[e],u=c.body.getReader(),h=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),f=h?parseInt(h):0,m=0!==f;let g=0;const _=new ReadableStream({start(p){!function v(){u.read().then(({done:b,value:y})=>{if(b)p.close();else{g+=y.byteLength;const x=new ProgressEvent("progress",{lengthComputable:m,loaded:g,total:f});for(let w=0,E=d.length;w<E;w++){const S=d[w];S.onProgress&&S.onProgress(x)}p.enqueue(y),v()}})}()}});return new Response(_)}throw new $ae(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>(new DOMParser).parseFromString(d,a));case"json":return c.json();default:if(void 0===a)return c.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),h=u&&u[1]?u[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(m=>f.decode(m))}}}).then(c=>{du.add(e,c);const d=Il[e];delete Il[e];for(let u=0,h=d.length;u<h;u++){const f=d[u];f.onLoad&&f.onLoad(c)}}).catch(c=>{const d=Il[e];if(void 0===d)throw this.manager.itemError(e),c;delete Il[e];for(let u=0,h=d.length;u<h;u++){const f=d[u];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Jae extends br{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new vr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=cu.parse(e[n]);t.push(r)}return t}}class vx extends br{constructor(e){super(e)}load(e,t,n,r){const s=this,o=[],a=new gb,l=new vr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function d(u){l.load(e[u],function(h){const f=s.parse(h,!0);o[u]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},c+=1,6===c&&(1===f.mipmapCount&&(a.minFilter=Ni),a.image=o,a.format=f.format,a.needsUpdate=!0,t&&t(a))},n,r)}if(Array.isArray(e))for(let u=0,h=e.length;u<h;++u)d(u);else l.load(e,function(u){const h=s.parse(u,!0);if(h.isCubemap){const f=h.mipmaps.length/h.mipmapCount;for(let m=0;m<f;m++){o[m]={mipmaps:[]};for(let g=0;g<h.mipmapCount;g++)o[m].mipmaps.push(h.mipmaps[m*h.mipmapCount+g]),o[m].format=h.format,o[m].width=h.width,o[m].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;1===h.mipmapCount&&(a.minFilter=Ni),a.format=h.format,a.needsUpdate=!0,t&&t(a)},n,r);return a}}class wb extends br{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=du.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=$_("img");function l(){d(),du.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(u){d(),r&&r(u),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class x4 extends br{constructor(e){super(e)}load(e,t,n,r){const s=new Wd,o=new wb(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(d){s.images[c]=d,a++,6===a&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class mp extends br{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Ba,a=new vr(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);c&&(void 0!==c.image?o.image=c.image:void 0!==c.data&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=void 0!==c.wrapS?c.wrapS:mr,o.wrapT=void 0!==c.wrapT?c.wrapT:mr,o.magFilter=void 0!==c.magFilter?c.magFilter:Ni,o.minFilter=void 0!==c.minFilter?c.minFilter:Ni,o.anisotropy=void 0!==c.anisotropy?c.anisotropy:1,void 0!==c.encoding&&(o.encoding=c.encoding),void 0!==c.flipY&&(o.flipY=c.flipY),void 0!==c.format&&(o.format=c.format),void 0!==c.type&&(o.type=c.type),void 0!==c.mipmaps&&(o.mipmaps=c.mipmaps,o.minFilter=Ws),1===c.mipmapCount&&(o.minFilter=Ni),void 0!==c.generateMipmaps&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c))},n,r),o}}class Ax extends br{constructor(e){super(e)}load(e,t,n,r){const s=new An,o=new wb(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},n,r),s}}class Ac extends pi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Be(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class wR extends Ac{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(pi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Be(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const CR=new We,w4=new R,C4=new R;class MR{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new pe(512,512),this.map=null,this.mapPass=null,this.matrix=new We,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Hy,this._frameExtents=new pe(1,1),this._viewportCount=1,this._viewports=[new ei(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;w4.setFromMatrixPosition(e.matrixWorld),t.position.copy(w4),C4.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(C4),t.updateMatrixWorld(),CR.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(CR),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(CR)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ele extends MR{constructor(){super(new In(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*Mf*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Cb extends Ac{constructor(e,t,n=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(pi.DEFAULT_UP),this.updateMatrix(),this.target=new pi,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new ele}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const M4=new We,Mb=new R,ER=new R;class tle extends MR{constructor(){super(new In(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new pe(4,2),this._viewportCount=6,this._viewports=[new ei(2,1,1,1),new ei(0,1,1,1),new ei(3,1,1,1),new ei(1,1,1,1),new ei(3,0,1,1),new ei(1,0,1,1)],this._cubeDirections=[new R(1,0,0),new R(-1,0,0),new R(0,0,1),new R(0,0,-1),new R(0,1,0),new R(0,-1,0)],this._cubeUps=[new R(0,1,0),new R(0,1,0),new R(0,1,0),new R(0,1,0),new R(0,0,1),new R(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Mb.setFromMatrixPosition(e.matrixWorld),n.position.copy(Mb),ER.copy(n.position),ER.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(ER),n.updateMatrixWorld(),r.makeTranslation(-Mb.x,-Mb.y,-Mb.z),M4.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(M4)}}class gp extends Ac{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new tle}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class ile extends MR{constructor(){super(new La(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Eb extends Ac{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(pi.DEFAULT_UP),this.updateMatrix(),this.target=new pi,this.shadow=new ile}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class yx extends Ac{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class SR extends Ac{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class E4{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new R)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*r*1.092548),t.addScaledVector(o[5],r*s*1.092548),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],n*s*1.092548),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*s),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*r),t.addScaledVector(o[5],.858086*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],.858086*n*s),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class Sb extends Ac{constructor(e=new E4,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class xx extends br{constructor(e){super(e),this.textures={}}load(e,t,n,r){const s=this,o=new vr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(s){return void 0===t[s]&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=xx.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new Be).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&(r.vertexColors="number"==typeof e.vertexColors?e.vertexColors>0:e.vertexColors),void 0!==e.uniforms)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=n(o.value);break;case"c":r.uniforms[s].value=(new Be).setHex(o.value);break;case"v2":r.uniforms[s].value=(new pe).fromArray(o.value);break;case"v3":r.uniforms[s].value=(new R).fromArray(o.value);break;case"v4":r.uniforms[s].value=(new ei).fromArray(o.value);break;case"m3":r.uniforms[s].value=(new bi).fromArray(o.value);break;case"m4":r.uniforms[s].value=(new We).fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new pe).fromArray(s)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new pe).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:hR,SpriteMaterial:$y,RawShaderMaterial:fR,ShaderMaterial:Dt,PointsMaterial:Tl,MeshPhysicalMaterial:ja,MeshStandardMaterial:Na,MeshPhongMaterial:nu,MeshToonMaterial:pR,MeshNormalMaterial:fp,MeshLambertMaterial:bx,MeshDepthMaterial:Zd,MeshDistanceMaterial:Xy,MeshBasicMaterial:Xn,MeshMatcapMaterial:mR,LineDashedMaterial:gR,LineBasicMaterial:mn,Material:Un}[e]}}class uu{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class TR extends Mt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class S4 extends br{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new vr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(f,m){if(void 0!==t[m])return t[m];const _=f.interleavedBuffers[m],p=function s(f,m){if(void 0!==n[m])return n[m];const p=new Uint32Array(f.arrayBuffers[m]).buffer;return n[m]=p,p}(f,_.buffer),v=Ef(_.type,p),b=new cb(v,_.stride);return b.uuid=_.uuid,t[m]=b,b}const o=e.isInstancedBufferGeometry?new TR:new Mt,a=e.data.index;if(void 0!==a){const f=Ef(a.type,a.array);o.setIndex(new Ci(f,1))}const l=e.data.attributes;for(const f in l){const m=l[f];let g;if(m.isInterleavedBufferAttribute){const _=r(e.data,m.data);g=new _c(_,m.itemSize,m.offset,m.normalized)}else{const _=Ef(m.type,m.array);g=new(m.isInstancedBufferAttribute?ep:Ci)(_,m.itemSize,m.normalized)}void 0!==m.name&&(g.name=m.name),void 0!==m.usage&&g.setUsage(m.usage),void 0!==m.updateRange&&(g.updateRange.offset=m.updateRange.offset,g.updateRange.count=m.updateRange.count),o.setAttribute(f,g)}const c=e.data.morphAttributes;if(c)for(const f in c){const m=c[f],g=[];for(let _=0,p=m.length;_<p;_++){const v=m[_];let b;if(v.isInterleavedBufferAttribute){const y=r(e.data,v.data);b=new _c(y,v.itemSize,v.offset,v.normalized)}else{const y=Ef(v.type,v.array);b=new Ci(y,v.itemSize,v.normalized)}void 0!==v.name&&(b.name=v.name),g.push(b)}o.morphAttributes[f]=g}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const u=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==u)for(let f=0,m=u.length;f!==m;++f){const g=u[f];o.addGroup(g.start,g.count,g.materialIndex)}const h=e.data.boundingSphere;if(void 0!==h){const f=new R;void 0!==h.center&&f.fromArray(h.center),o.boundingSphere=new wo(f,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class nle extends br{constructor(e){super(e)}load(e,t,n,r){const s=this,o=""===this.path?uu.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new vr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(u){return void 0!==r&&r(u),void console.error("THREE:ObjectLoader: Can't parse "+e+".",u.message)}const d=c.metadata;if(void 0===d||void 0===d.type||"geometry"===d.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);s.parse(c,t)},n,r)}loadAsync(e,t){var n=this;return is(function*(){const r=n,s=""===n.path?uu.extractUrlBase(e):n.path;n.resourcePath=n.resourcePath||s;const o=new vr(n.manager);o.setPath(n.path),o.setRequestHeader(n.requestHeader),o.setWithCredentials(n.withCredentials);const a=yield o.loadAsync(e,t),l=JSON.parse(a),c=l.metadata;if(void 0===c||void 0===c.type||"geometry"===c.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return yield r.parseAsync(l)})()}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){void 0!==t&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,n),d=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,d),void 0!==t){let u=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){u=!0;break}!1===u&&t(c)}return c}parseAsync(e){var t=this;return is(function*(){const n=t.parseAnimations(e.animations),r=t.parseShapes(e.shapes),s=t.parseGeometries(e.geometries,r),o=yield t.parseImagesAsync(e.images),a=t.parseTextures(e.textures,o),l=t.parseMaterials(e.materials,a),c=t.parseObject(e.object,s,l,a,n),d=t.parseSkeletons(e.skeletons,c);return t.bindSkeletons(c,d),c})()}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const s=(new eu).fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),void 0!==e)for(let s=0,o=e.length;s<o;s++){const a=(new Jf).fromJSON(e[s],r);n[a.uuid]=a}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new S4;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in g4?a=g4[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,void 0!==l.name&&(a.name=l.name),void 0!==l.userData&&(a.userData=l.userData),n[l.uuid]=a}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const s=new xx;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];void 0===n[l.uuid]&&(n[l.uuid]=s.parse(l)),r[l.uuid]=n[l.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const s=cu.parse(e[n]);t[s.uuid]=s}return t}parseImages(e,t){const n=this,r={};let s;function a(l){if("string"==typeof l){const c=l;return function o(l){return n.manager.itemStart(l),s.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:n.resourcePath+c)}return l.data?{data:Ef(l.type,l.data),width:l.width,height:l.height}:null}if(void 0!==e&&e.length>0){const l=new xR(t);s=new wb(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,d=e.length;c<d;c++){const u=e[c],h=u.url;if(Array.isArray(h)){const f=[];for(let m=0,g=h.length;m<g;m++){const p=a(h[m]);null!==p&&(p instanceof HTMLImageElement?f.push(p):f.push(new Ba(p.data,p.width,p.height)))}r[u.uuid]=new Gd(f)}else{const f=a(u.url);r[u.uuid]=new Gd(f)}}}return r}parseImagesAsync(e){var t=this;return is(function*(){const n=t,r={};let s;function o(l){return a.apply(this,arguments)}function a(){return(a=is(function*(l){if("string"==typeof l){const c=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:n.resourcePath+c;return yield s.loadAsync(d)}return l.data?{data:Ef(l.type,l.data),width:l.width,height:l.height}:null})).apply(this,arguments)}if(void 0!==e&&e.length>0){s=new wb(t.manager),s.setCrossOrigin(t.crossOrigin);for(let l=0,c=e.length;l<c;l++){const d=e[l],u=d.url;if(Array.isArray(u)){const h=[];for(let f=0,m=u.length;f<m;f++){const g=u[f],_=yield o(g);null!==_&&(_ instanceof HTMLImageElement?h.push(_):h.push(new Ba(_.data,_.width,_.height)))}r[d.uuid]=new Gd(h)}else{const h=yield o(d.url);r[d.uuid]=new Gd(h)}}}return r})()}parseTextures(e,t){function n(s,o){return"number"==typeof s?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(void 0!==e)for(let s=0,o=e.length;s<o;s++){const a=e[s];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let d;Array.isArray(c)?(d=new Wd,6===c.length&&(d.needsUpdate=!0)):(d=c&&c.data?new Ba:new An,c&&(d.needsUpdate=!0)),d.source=l,d.uuid=a.uuid,void 0!==a.name&&(d.name=a.name),void 0!==a.mapping&&(d.mapping=n(a.mapping,rle)),void 0!==a.channel&&(d.channel=a.channel),void 0!==a.offset&&d.offset.fromArray(a.offset),void 0!==a.repeat&&d.repeat.fromArray(a.repeat),void 0!==a.center&&d.center.fromArray(a.center),void 0!==a.rotation&&(d.rotation=a.rotation),void 0!==a.wrap&&(d.wrapS=n(a.wrap[0],T4),d.wrapT=n(a.wrap[1],T4)),void 0!==a.format&&(d.format=a.format),void 0!==a.internalFormat&&(d.internalFormat=a.internalFormat),void 0!==a.type&&(d.type=a.type),void 0!==a.encoding&&(d.encoding=a.encoding),void 0!==a.minFilter&&(d.minFilter=n(a.minFilter,R4)),void 0!==a.magFilter&&(d.magFilter=n(a.magFilter,R4)),void 0!==a.anisotropy&&(d.anisotropy=a.anisotropy),void 0!==a.flipY&&(d.flipY=a.flipY),void 0!==a.generateMipmaps&&(d.generateMipmaps=a.generateMipmaps),void 0!==a.premultiplyAlpha&&(d.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(d.unpackAlignment=a.unpackAlignment),void 0!==a.userData&&(d.userData=a.userData),r[a.uuid]=d}return r}parseObject(e,t,n,r,s){let o,d,u;function a(h){return void 0===t[h]&&console.warn("THREE.ObjectLoader: Undefined geometry",h),t[h]}function l(h){if(void 0!==h){if(Array.isArray(h)){const f=[];for(let m=0,g=h.length;m<g;m++){const _=h[m];void 0===n[_]&&console.warn("THREE.ObjectLoader: Undefined material",_),f.push(n[_])}return f}return void 0===n[h]&&console.warn("THREE.ObjectLoader: Undefined material",h),n[h]}}function c(h){return void 0===r[h]&&console.warn("THREE.ObjectLoader: Undefined texture",h),r[h]}switch(e.type){case"Scene":o=new Ky,void 0!==e.background&&(o.background=Number.isInteger(e.background)?new Be(e.background):c(e.background)),void 0!==e.environment&&(o.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new lb(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new Zy(e.fog.color,e.fog.density))),void 0!==e.backgroundBlurriness&&(o.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new In(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new La(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new yx(e.color,e.intensity);break;case"DirectionalLight":o=new Eb(e.color,e.intensity);break;case"PointLight":o=new gp(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new SR(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Cb(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new wR(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=(new Sb).fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),u=l(e.material),o=new fb(d,u),void 0!==e.bindMode&&(o.bindMode=e.bindMode),void 0!==e.bindMatrix&&o.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(o.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),u=l(e.material),o=new nt(d,u);break;case"InstancedMesh":d=a(e.geometry),u=l(e.material);const f=e.instanceMatrix,m=e.instanceColor;o=new rx(d,u,e.count),o.instanceMatrix=new ep(new Float32Array(f.array),16),void 0!==m&&(o.instanceColor=new ep(new Float32Array(m.array),m.itemSize));break;case"LOD":o=new YT;break;case"Line":o=new Vn(a(e.geometry),l(e.material));break;case"LineLoop":o=new ox(a(e.geometry),l(e.material));break;case"LineSegments":o=new ws(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new $d(a(e.geometry),l(e.material));break;case"Sprite":o=new qT(l(e.material));break;case"Group":o=new xs;break;case"Bone":o=new Kd;break;default:o=new pi}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.up&&o.up.fromArray(e.up),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(o.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.layers&&(o.layers.mask=e.layers),void 0!==e.children){const h=e.children;for(let f=0;f<h.length;f++)o.add(this.parseObject(h[f],t,n,r,s))}if(void 0!==e.animations){const h=e.animations;for(let f=0;f<h.length;f++)o.animations.push(s[h[f]])}if("LOD"===e.type){void 0!==e.autoUpdate&&(o.autoUpdate=e.autoUpdate);const h=e.levels;for(let f=0;f<h.length;f++){const m=h[f],g=o.getObjectByProperty("uuid",m.object);void 0!==g&&o.addLevel(g,m.distance,m.hysteresis)}}return o}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse(function(n){if(!0===n.isSkinnedMesh&&void 0!==n.skeleton){const r=t[n.skeleton];void 0===r?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}}const rle={UVMapping:ly,CubeReflectionMapping:sc,CubeRefractionMapping:oc,EquirectangularReflectionMapping:mf,EquirectangularRefractionMapping:V_,CubeUVReflectionMapping:gf},T4={RepeatWrapping:xo,ClampToEdgeWrapping:mr,MirroredRepeatWrapping:_f},R4={NearestFilter:Zt,NearestMipmapNearestFilter:z_,NearestMipmapLinearFilter:bf,LinearFilter:Ni,LinearMipmapNearestFilter:cy,LinearMipmapLinearFilter:Ws};class I4 extends br{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=du.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){du.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let wx;class RR{static getContext(){return void 0===wx&&(wx=new(window.AudioContext||window.webkitAudioContext)),wx}static setContext(e){wx=e}}class sle extends br{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new vr(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);RR.getContext().decodeAudioData(l,function(d){t(d)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}}class D4 extends Sb{constructor(e,t,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;const r=(new Be).set(e),s=(new Be).set(t),o=new R(r.r,r.g,r.b),a=new R(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class P4 extends Sb{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const n=(new Be).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const k4=new We,L4=new We,hu=new We;class B4{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new In,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new In,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,hu.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(zd*t.fov*.5)/t.zoom;let a,l;L4.elements[12]=-r,k4.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,hu.elements[0]=2*t.near/(l-a),hu.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(hu),a=-o*t.aspect-s,l=o*t.aspect-s,hu.elements[0]=2*t.near/(l-a),hu.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(hu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(L4),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(k4)}}class _p{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=F4(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=F4();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function F4(){return(typeof performance>"u"?Date:performance).now()}const fu=new R,O4=new wi,ole=new R,pu=new R;class N4 extends pi{constructor(){super(),this.type="AudioListener",this.context=RR.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new _p}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(fu,O4,ole),pu.set(0,0,-1).applyQuaternion(O4),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(fu.x,r),t.positionY.linearRampToValueAtTime(fu.y,r),t.positionZ.linearRampToValueAtTime(fu.z,r),t.forwardX.linearRampToValueAtTime(pu.x,r),t.forwardY.linearRampToValueAtTime(pu.y,r),t.forwardZ.linearRampToValueAtTime(pu.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(fu.x,fu.y,fu.z),t.setOrientation(pu.x,pu.y,pu.z,n.x,n.y,n.z)}}class IR extends pi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const mu=new R,j4=new wi,ale=new R,gu=new R;class U4 extends IR{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(mu,j4,ale),gu.set(0,0,1).applyQuaternion(j4);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(mu.x,n),t.positionY.linearRampToValueAtTime(mu.y,n),t.positionZ.linearRampToValueAtTime(mu.z,n),t.orientationX.linearRampToValueAtTime(gu.x,n),t.orientationY.linearRampToValueAtTime(gu.y,n),t.orientationZ.linearRampToValueAtTime(gu.z,n)}else t.setPosition(mu.x,mu.y,mu.z),t.setOrientation(gu.x,gu.y,gu.z)}}class lle{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class V4{constructor(e,t,n){let r,s,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let a=0;a!==r;++a)n[s+a]=n[a];o=t}else o+=t,this._mixBufferRegion(n,s,0,t/o,r);this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1&&this._mixBufferRegion(n,r,t*this._origIndex,1-s,t),o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(n[l]!==n[l+t]){a.setValue(n,r);break}}saveOriginalState(){const t=this.buffer,n=this.valueSize,r=n*this._origIndex;this.binding.getValue(t,r);for(let s=n,o=r;s!==o;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){wi.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const o=this._workIndex*s;wi.multiplyQuaternionsFlat(e,o,e,t,e,n),wi.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[n+o]*r}}}const DR="\\[\\]\\.:\\/",cle=new RegExp("["+DR+"]","g"),PR="[^"+DR+"]",dle="[^"+DR.replace("\\.","")+"]",mle=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",PR)+/(WCOD+)?/.source.replace("WCOD",dle)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",PR)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",PR)+"$"),gle=["material","materials","bones","map"];class _le{constructor(e,t,n){const r=n||ji.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}let ji=(()=>{class i{constructor(t,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,r){return t&&t.isAnimationObjectGroup?new i.Composite(t,n,r):new i(t,n,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(cle,"")}static parseTrackName(t){const n=mle.exec(t);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==gle.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,n){if(void 0===n||""===n||"."===n||-1===n||n===t.name||n===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(n);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===n||l.uuid===n)return l;const c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,n){t[n]=this.targetObject[this.propertyName]}_getValue_array(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[n++]=r[s]}_getValue_arrayElement(t,n){t[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,n){this.resolvedProperty.toArray(t,n)}_setValue_direct(t,n){this.targetObject[this.propertyName]=t[n]}_setValue_direct_setNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++]}_setValue_array_setNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,n){this.resolvedProperty[this.propertyIndex]=t[n]}_setValue_arrayElement_setNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,n){this.resolvedProperty.fromArray(t,n)}_setValue_fromArray_setNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,n){this.bind(),this.getValue(t,n)}_setValue_unbound(t,n){this.bind(),this.setValue(t,n)}bind(){let t=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(t||(t=i.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let d=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let u=0;u<t.length;u++)if(t[u].name===d){d=u;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==d){if(void 0===t[d])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[d]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=_le,i})();ji.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ji.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ji.prototype.GetterByBindingType=[ji.prototype._getValue_direct,ji.prototype._getValue_array,ji.prototype._getValue_arrayElement,ji.prototype._getValue_toArray],ji.prototype.SetterByBindingTypeAndVersioning=[[ji.prototype._setValue_direct,ji.prototype._setValue_direct_setNeedsUpdate,ji.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ji.prototype._setValue_array,ji.prototype._setValue_array_setNeedsUpdate,ji.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ji.prototype._setValue_arrayElement,ji.prototype._setValue_arrayElement_setNeedsUpdate,ji.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ji.prototype._setValue_fromArray,ji.prototype._setValue_fromArray_setNeedsUpdate,ji.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class ble{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Xs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let d=0,u=arguments.length;d!==u;++d){const h=arguments[d],f=h.uuid;let m=t[f];if(void 0===m){m=l++,t[f]=m,e.push(h);for(let g=0,_=o;g!==_;++g)s[g].push(new ji(h,n[g],r[g]))}else if(m<c){a=e[m];const g=--c,_=e[g];t[_.uuid]=m,e[m]=_,t[f]=g,e[g]=h;for(let p=0,v=o;p!==v;++p){const b=s[p];let x=b[m];b[m]=b[g],void 0===x&&(x=new ji(h,n[p],r[p])),b[g]=x}}else e[m]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,d=t[c];if(void 0!==d&&d>=s){const u=s++,h=e[u];t[h.uuid]=d,e[d]=h,t[c]=u,e[u]=l;for(let f=0,m=r;f!==m;++f){const g=n[f],p=g[d];g[d]=g[u],g[u]=p}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const d=arguments[a].uuid,u=t[d];if(void 0!==u)if(delete t[d],u<s){const h=--s,f=e[h],m=--o,g=e[m];t[f.uuid]=u,e[u]=f,t[g.uuid]=h,e[h]=g,e.pop();for(let _=0,p=r;_!==p;++_){const v=n[_],y=v[m];v[u]=v[h],v[h]=y,v.pop()}}else{const h=--o,f=e[h];h>0&&(t[f.uuid]=u),e[u]=f,e.pop();for(let m=0,g=r;m!==g;++m){const _=n[m];_[u]=_[h],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const s=this._bindings;if(void 0!==r)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,d=this.nCachedObjects_,u=new Array(l.length);r=s.length,n[e]=r,o.push(e),a.push(t),s.push(u);for(let h=d,f=l.length;h!==f;++h)u[h]=new ji(l[h],e,t);return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a];t[e[a]]=n,o[n]=l,o.pop(),s[n]=s[a],s.pop(),r[n]=r[a],r.pop()}}}class z4{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:jd,endingEnd:jd};for(let c=0;c!==o;++c){const d=s[c].createInterpolant(null);a[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Bj,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const r=this._clip.duration,s=e._clip.duration,a=r/s;e.warp(1,s/r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+n,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const s=this._startTime;if(null!==s){const l=(e-s)*n;l<0||0===n?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;if(this.blendMode===hT)for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(o),c[d].accumulateAdditive(a);else for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(o),c[d].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const o=n===Fj;if(0===e)return-1===s?r:o&&1==(1&s)?t-r:r;if(n===uT){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===l){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1==(1&s))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Ud,r.endingEnd=Ud):(r.endingStart=e?this.zeroSlopeAtStart?Ud:jd:Y_,r.endingEnd=t?this.zeroSlopeAtEnd?Ud:jd:Y_)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=n,this}}const vle=new Float32Array(1);class G4 extends ns{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=n.uuid,c=this._bindingsByRootAndName;let d=c[l];void 0===d&&(d={},c[l]=d);for(let u=0;u!==s;++u){const h=r[u],f=h.name;let m=d[f];if(void 0!==m)++m.referenceCount,o[u]=m;else{if(m=o[u],void 0!==m){null===m._cacheIndex&&(++m.referenceCount,this._addInactiveBinding(m,l,f));continue}m=new V4(ji.create(n,f,t&&t._propertyBindings[u].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,f),o[u]=m}a[u].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let o=s[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],d=e._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===l.length&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new AR(new Float32Array(2),new Float32Array(2),1,vle),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let o="string"==typeof e?cu.findByName(r,e):e;const a=null!==o?o.uuid:e,l=this._actionsByClip[a];let c=null;if(void 0===n&&(n=null!==o?o.blendMode:_y),void 0!==l){const u=l.actionByRoot[s];if(void 0!==u&&u.blendMode===n)return u;c=l.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const d=new z4(this,o,t,n);return this._bindAction(d,c),this._addInactiveAction(d,a,s),d}existingAction(e,t){const n=t||this._root,r=n.uuid,s="string"==typeof e?cu.findByName(n,e):e,a=this._actionsByClip[s?s.uuid:e];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let n=this._nActiveActions-1;n>=0;--n)e[n].stop();return this}update(e){const t=this._actions,n=this._nActiveActions,r=this.time+=e*=this.timeScale,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==n;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(void 0!==s){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const d=c._cacheIndex,u=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=d,t[d]=u,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const l=n[o].actionByRoot[t];void 0!==l&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName[t];if(void 0!==s)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class kR{constructor(e){this.value=e}clone(){return new kR(void 0===this.value.clone?this.value:this.value.clone())}}let Ale=0;class yle extends ns{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Ale++}),this.name="",this.usage=Z_,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++)this.uniforms.push(t[n].clone());return this}clone(){return(new this.constructor).copy(this)}}class xle extends cb{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class wle{constructor(e,t,n,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class _u{constructor(e,t,n=0,r=1/0){this.ray=new nb(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new Sy,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return LR(e,this,n,t),n.sort(H4),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)LR(e[r],this,n,t);return n.sort(H4),n}}function H4(i,e){return i.distance-e.distance}function LR(i,e,t,n){if(i.layers.test(e.layers)&&i.raycast(e,t),!0===n){const r=i.children;for(let s=0,o=r.length;s<o;s++)LR(r[s],e,t,!0)}}class Cx{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(jn(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Cle{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const Q4=new pe;class Mle{constructor(e=new pe(1/0,1/0),t=new pe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Q4.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Q4).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const W4=new R,Mx=new R;class q4{constructor(e=new R,t=new R){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){W4.subVectors(e,this.start),Mx.subVectors(this.end,this.start);const n=Mx.dot(Mx);let s=Mx.dot(W4)/n;return t&&(s=jn(s,0,1)),s}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const Y4=new R;class X4 extends pi{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Mt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,d=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(d),Math.sin(d),1)}n.setAttribute("position",new Ze(r,3));const s=new mn({fog:!1,toneMapped:!1});this.cone=new ws(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Y4.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Y4),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const yc=new R,Ex=new We,BR=new We;class Z4 extends ws{constructor(e){const t=K4(e),n=new Mt,r=[],s=[],o=new Be(0,0,1),a=new Be(0,1,0);for(let c=0;c<t.length;c++){const d=t[c];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}n.setAttribute("position",new Ze(r,3)),n.setAttribute("color",new Ze(s,3)),super(n,new mn({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");BR.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Ex.multiplyMatrices(BR,a.matrixWorld),yc.setFromMatrixPosition(Ex),r.setXYZ(o,yc.x,yc.y,yc.z),Ex.multiplyMatrices(BR,a.parent.matrixWorld),yc.setFromMatrixPosition(Ex),r.setXYZ(o+1,yc.x,yc.y,yc.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function K4(i){const e=[];!0===i.isBone&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,K4(i.children[t]));return e}class $4 extends nt{constructor(e,t,n){super(new vc(t,4,2),new Xn({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Ele=new R,J4=new Be,e5=new Be;class t5 extends pi{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new ra(t);r.rotateY(.5*Math.PI),this.material=new Xn({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(3*s.count);r.setAttribute("color",new Ci(o,3)),this.add(new nt(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");J4.copy(this.light.color),e5.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const s=n<r/2?J4:e5;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Ele.setFromMatrixPosition(this.light.matrixWorld).negate())}}class FR extends ws{constructor(e=10,t=10,n=4473924,r=8947848){n=new Be(n),r=new Be(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let h=0,f=0,m=-a;h<=t;h++,m+=o){l.push(-a,0,m,a,0,m),l.push(m,0,-a,m,0,a);const g=h===s?n:r;g.toArray(c,f),f+=3,g.toArray(c,f),f+=3,g.toArray(c,f),f+=3,g.toArray(c,f),f+=3}const d=new Mt;d.setAttribute("position",new Ze(l,3)),d.setAttribute("color",new Ze(c,3)),super(d,new mn({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class n5 extends ws{constructor(e=10,t=16,n=8,r=64,s=4473924,o=8947848){s=new Be(s),o=new Be(o);const a=[],l=[];if(t>1)for(let u=0;u<t;u++){const h=u/t*(2*Math.PI),f=Math.sin(h)*e,m=Math.cos(h)*e;a.push(0,0,0),a.push(f,0,m);const g=1&u?s:o;l.push(g.r,g.g,g.b),l.push(g.r,g.g,g.b)}for(let u=0;u<n;u++){const h=1&u?s:o,f=e-e/n*u;for(let m=0;m<r;m++){let g=m/r*(2*Math.PI),_=Math.sin(g)*f,p=Math.cos(g)*f;a.push(_,0,p),l.push(h.r,h.g,h.b),g=(m+1)/r*(2*Math.PI),_=Math.sin(g)*f,p=Math.cos(g)*f,a.push(_,0,p),l.push(h.r,h.g,h.b)}}const c=new Mt;c.setAttribute("position",new Ze(a,3)),c.setAttribute("color",new Ze(l,3)),super(c,new mn({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const r5=new R,Sx=new R,s5=new R;class o5 extends pi{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let r=new Mt;r.setAttribute("position",new Ze([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new mn({fog:!1,toneMapped:!1});this.lightPlane=new Vn(r,s),this.add(this.lightPlane),r=new Mt,r.setAttribute("position",new Ze([0,0,0,0,0,1],3)),this.targetLine=new Vn(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),r5.setFromMatrixPosition(this.light.matrixWorld),Sx.setFromMatrixPosition(this.light.target.matrixWorld),s5.subVectors(Sx,r5),this.lightPlane.lookAt(Sx),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Sx),this.targetLine.scale.z=s5.length()}}const Tx=new R,Gn=new zy;class a5 extends ws{constructor(e){const t=new Mt,n=new mn({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};function a(m,g){l(m),l(g)}function l(m){r.push(0,0,0),s.push(0,0,0),void 0===o[m]&&(o[m]=[]),o[m].push(r.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),t.setAttribute("position",new Ze(r,3)),t.setAttribute("color",new Ze(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Be(16755200),d=new Be(16711680),u=new Be(43775),h=new Be(16777215),f=new Be(3355443);this.setColors(c,d,u,h,f)}setColors(e,t,n,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;Gn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Zn("c",t,e,Gn,0,0,-1),Zn("t",t,e,Gn,0,0,1),Zn("n1",t,e,Gn,-1,-1,-1),Zn("n2",t,e,Gn,1,-1,-1),Zn("n3",t,e,Gn,-1,1,-1),Zn("n4",t,e,Gn,1,1,-1),Zn("f1",t,e,Gn,-1,-1,1),Zn("f2",t,e,Gn,1,-1,1),Zn("f3",t,e,Gn,-1,1,1),Zn("f4",t,e,Gn,1,1,1),Zn("u1",t,e,Gn,.7,1.1,-1),Zn("u2",t,e,Gn,-.7,1.1,-1),Zn("u3",t,e,Gn,0,2,-1),Zn("cf1",t,e,Gn,-1,0,1),Zn("cf2",t,e,Gn,1,0,1),Zn("cf3",t,e,Gn,0,-1,1),Zn("cf4",t,e,Gn,0,1,1),Zn("cn1",t,e,Gn,-1,0,-1),Zn("cn2",t,e,Gn,1,0,-1),Zn("cn3",t,e,Gn,0,-1,-1),Zn("cn4",t,e,Gn,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Zn(i,e,t,n,r,s,o){Tx.set(r,s,o).unproject(n);const a=e[i];if(void 0!==a){const l=t.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],Tx.x,Tx.y,Tx.z)}}const Rx=new Ks;class l5 extends ws{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),s=new Mt;s.setIndex(new Ci(n,1)),s.setAttribute("position",new Ci(r,3)),super(s,new mn({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Rx.setFromObject(this.object),Rx.isEmpty())return;const t=Rx.min,n=Rx.max,r=this.geometry.attributes.position,s=r.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class c5 extends ws{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Mt;s.setIndex(new Ci(n,1)),s.setAttribute("position",new Ze([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(s,new mn({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class d5 extends Vn{constructor(e,t=1,n=16776960){const r=n,o=new Mt;o.setAttribute("position",new Ze([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),o.computeBoundingSphere(),super(o,new mn({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=new Mt;l.setAttribute("position",new Ze([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),l.computeBoundingSphere(),this.add(new nt(l,new Xn({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const u5=new R;let Ix,OR;class h5 extends pi{constructor(e=new R(0,0,1),t=new R(0,0,0),n=1,r=16776960,s=.2*n,o=.2*s){super(),this.type="ArrowHelper",void 0===Ix&&(Ix=new Mt,Ix.setAttribute("position",new Ze([0,0,0,0,1,0],3)),OR=new zn(0,.5,1,5,1),OR.translate(0,-.5,0)),this.position.copy(t),this.line=new Vn(Ix,new mn({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new nt(OR,new Xn({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{u5.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(u5,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class f5 extends ws{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=new Mt;r.setAttribute("position",new Ze(t,3)),r.setAttribute("color",new Ze([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(r,new mn({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new Be,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Sle{constructor(){this.type="ShapePath",this.color=new Be,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new vb,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,o){return this.currentPath.bezierCurveTo(e,t,n,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(p,v){const b=v.length;let y=!1;for(let x=b-1,w=0;w<b;x=w++){let E=v[x],S=v[w],C=S.x-E.x,T=S.y-E.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(E=v[w],C=-C,S=v[x],T=-T),p.y<E.y||p.y>S.y)continue;if(p.y===E.y){if(p.x===E.x)return!0}else{const k=T*(p.x-E.x)-C*(p.y-E.y);if(0===k)return!0;if(k<0)continue;y=!y}}else{if(p.y!==E.y)continue;if(S.x<=p.x&&p.x<=E.x||E.x<=p.x&&p.x<=S.x)return!0}}return y}const r=Oa.isClockWise,s=this.subPaths;if(0===s.length)return[];let o,a,l;const c=[];if(1===s.length)return a=s[0],l=new eu,l.curves=a.curves,c.push(l),c;let d=!r(s[0].getPoints());d=e?!d:d;const u=[],h=[];let g,_,f=[],m=0;h[m]=void 0,f[m]=[];for(let p=0,v=s.length;p<v;p++)a=s[p],g=a.getPoints(),o=r(g),o=e?!o:o,o?(!d&&h[m]&&m++,h[m]={s:new eu,p:g},h[m].s.curves=a.curves,d&&m++,f[m]=[]):f[m].push({h:a,p:g[0]});if(!h[0])return function t(p){const v=[];for(let b=0,y=p.length;b<y;b++){const x=p[b],w=new eu;w.curves=x.curves,v.push(w)}return v}(s);if(h.length>1){let p=!1,v=0;for(let b=0,y=h.length;b<y;b++)u[b]=[];for(let b=0,y=h.length;b<y;b++){const x=f[b];for(let w=0;w<x.length;w++){const E=x[w];let S=!0;for(let C=0;C<h.length;C++)n(E.p,h[C].p)&&(b!==C&&v++,S?(S=!1,u[C].push(E)):p=!0);S&&u[b].push(E)}}v>0&&!1===p&&(f=u)}for(let p=0,v=h.length;p<v;p++){l=h[p].s,c.push(l),_=f[p];for(let b=0,y=_.length;b<y;b++)l.holes.push(_[b].h)}return c}}class Tle extends Ji{constructor(e,t,n,r,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,n,r,s,o)}}class Rle extends ip{constructor(e,t,n,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,n,r)}}class Ile extends np{constructor(e,t,n,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,n,r)}}class Dle extends rp{constructor(e,t,n,r,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,n,r,s,o,a)}}class Ple extends zn{constructor(e,t,n,r,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,n,r,s,o,a,l)}}class kle extends sp{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class Lle extends iu{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class Ble extends ap{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class Fle extends Jd{constructor(e,t,n,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,n,r)}}class Ole extends ra{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class Nle extends gc{constructor(e,t,n,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,n,r)}}class jle extends Fa{constructor(e,t,n,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,n,r)}}class Ule extends lp{constructor(e,t,n,r,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,n,r,s,o)}}class Vle extends cp{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class zle extends vc{constructor(e,t,n,r,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,n,r,s,o,a)}}class Gle extends dp{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class Hle extends sa{constructor(e,t,n,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,n,r,s)}}class Qle extends up{constructor(e,t,n,r,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,n,r,s,o)}}class Wle extends hp{constructor(e,t,n,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,n,r,s)}}function p5(i){return!(!i||!i.set)}function Qe(i,e){return p5(i)?void 0===e?i:Array.isArray(e)?(i.set(...e),i):i.copy&&e?(i.copy(e),i):void 0!==e?(i.set(e),i):i:e}function Tb(i){return void 0!==i&&(i.observed||i.observers?.length>0)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ry}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ry);const NR={now:()=>(NR.delegate||Date).now(),delegate:void 0};class jR extends Ht{constructor(e=1/0,t=1/0,n=NR){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:n,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;t||(n.push(e),!r&&n.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:n,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=n?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:n,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<n.length&&n.splice(0,n.length-s),!r){const o=t.now();let a=0;for(let l=1;l<n.length&&n[l]<=o;l+=2)a=l;a&&n.splice(0,a+1)}}}class Yle{constructor(e){this.memberMap=new Map,this.children=[],this.eventListener={},this.loaded=!1,this.add=(...t)=>(this.objRef&&this.objRef.add(...t),this.children.push(...t),this),this.remove=(...t)=>{this.objRef&&this.objRef.remove(...t);for(const n of t){const r=this.children.indexOf(n);r>=0&&(this.children=this.children.splice(r,1))}return this},this.applyToObject3D=t=>{if(this.memberMap.forEach((n,r)=>{const s=t[r];p5(s)?Qe(s,n):t[r]=n}),this.children.forEach(n=>t.add(n)),this.objRef?.parent){const n=this.objRef?.parent;n.remove(this.objRef),n.add(t)}},this.addEventListener=(t,n)=>{let r=this.eventListener[t];r||(r=[],this.eventListener[t]=r),r.push(n),this.objRef&&this.objRef.addEventListener(t,n)},this.removeEventListener=(t,n)=>{const r=this.eventListener[t];if(!r)return;const s=r.indexOf(n);s>=0&&r.splice(s,1)},this.objRef=e}get(e,t,n){switch(t){case"__isProxy":return!0;case"applyToObject3D":return this.applyToObject3D;case"objRef":return this.loaded?this.objRef:void 0;case"add":return this.add;case"remove":return this.remove;case"children":return this.objRef?this.objRef.children:this.children;default:{const s=this.objRef[t];return void 0!==s&&this.memberMap.set(t,s),s}}}set(e,t,n,r){return"objRef"===t?(n&&this.applyToObject3D(n),this.loaded=!0,this.objRef=n):(this.memberMap.set(t,n),this.objRef&&(this.objRef[t]=n)),!0}}function m5(i=new pi){const e=new Yle(i);return new Proxy(e,e)}function UR(i){return!0===i.__isProxy&&void 0===i.objRef}class To{set objRef(e){this.applyObjRef(e)}get objRef(){return this._objRef}constructor(){this.autoAddToParent=!0,this.autoDispose=!0}addToParent(){}removeFromParent(){}set threeEvents(e){this.removeEvents(),this.eventListeners=e,this.applyEvents()}get threeEvents(){return this.eventListeners}get onUpdate(){return this.updateEmitter||(this.updateEmitter=new St),this.updateEmitter}get objRef$(){return this._objRef$||(this._objRef$=new jR(1)),this._objRef$}ngOnInit(){this.objRef||(this.objRef=this.createThreeInstance(this.args))}getType(){throw new Error("derive me")}createThreeInstance(e){return Array.isArray(e)?new(this.getType())(...e):new(this.getType())(e)}ngOnChanges(e){if(!this.objRef||UR(this.objRef)){this.objRef||(this.objRef=this.createThreeInstance(e.args?.currentValue));for(const t in e)this[t]=e[t].currentValue;this.emitPropertyChanges(e)}else this.emitPropertyChanges(e)}disposeObjRef(){(function qle(i){return!(!i||"function"!=typeof i.dispose)})(this.objRef)&&this.objRef.dispose()}ngOnDestroy(){this.removeEvents(),this.removeFromParent(),this.autoDispose&&this.disposeObjRef()}applyObjRef(e){this._objRef!==e&&(this.removeFromParent(),this._objRef=e,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}emitObjRefChange(){this._objRef&&!UR(this._objRef)&&(this._objRef.dispatchEvent?.({type:"loaded",object:this._objRef}),this._objRef$&&this._objRef$.next(this._objRef))}emitPropertyChanges(e){this._objRef&&this._objRef.dispatchEvent?.({type:"changes",changes:e}),this.updateEmitter&&this.updateEmitter.next(e)}removeEvents(){if(this.eventListeners&&this._objRef){for(const e of Object.entries(this.eventListeners))this._objRef.removeEventListener(e[0],e[1]);this.eventListeners=void 0}}applyEvents(){if(this.eventListeners&&this._objRef)for(const e of Object.entries(this.eventListeners))this._objRef.addEventListener(e[0],e[1])}}To.\u0275fac=function(e){return new(e||To)},To.\u0275cmp=K({type:To,selectors:[["th-abs-wrapper"]],inputs:{autoAddToParent:"autoAddToParent",autoDispose:"autoDispose",objRef:"objRef",args:"args",threeEvents:"threeEvents"},outputs:{onUpdate:"onUpdate",objRef$:"objRef$"},features:[Sr],decls:0,vars:0,template:function(e,t){},encapsulation:2});class bp extends To{constructor(e){super(),this.parent=e}addToParent(){this._objRef&&this.parent.objRef&&(!this._objRef.parent||this._objRef.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(this._objRef)}removeFromParent(){this._objRef?.parent?.remove(this._objRef)}applyObjRef(e){(this._objRef!==e||this._objRef?.parent?.uuid!==this.parent.objRef.uuid)&&(this.removeFromParent(),this._objRef=e,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}attachToParent(e,t){!this.parent.objRef||e===t&&t?.parent?.uuid===this.parent.objRef.uuid||(t&&t.parent&&t.parent.remove(t),e&&(!e.parent||e.parent&&e.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(e))}set lookAt(e){Promise.resolve().then(()=>{this.objRef&&(Array.isArray(e)?this.objRef.lookAt(...e):this.objRef.lookAt(e))})}}bp.\u0275fac=function(e){return new(e||bp)(P(bp))},bp.\u0275cmp=K({type:bp,selectors:[["th-abs-object"]],inputs:{lookAt:"lookAt"},features:[W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2});class Ke extends bp{getType(){return pi}get isObject3D(){return this._objRef?.isObject3D}get id(){return this._objRef?.id}set uuid(e){this._objRef&&(this._objRef.uuid=e)}get uuid(){return this._objRef?.uuid}set name(e){this._objRef&&(this._objRef.name=e)}get name(){return this._objRef?.name}get type(){return this._objRef?.type}set children(e){this._objRef&&(this._objRef.children=e)}get children(){return this._objRef?.children}set up(e){this._objRef&&(this._objRef.up=Qe(this._objRef.up,e))}get up(){return this._objRef?.up}set position(e){this._objRef&&Qe(this._objRef.position,e)}get position(){return this._objRef?.position}set rotation(e){this._objRef&&Qe(this._objRef.rotation,e)}get rotation(){return this._objRef?.rotation}set quaternion(e){this._objRef&&Qe(this._objRef.quaternion,e)}get quaternion(){return this._objRef?.quaternion}set scale(e){this._objRef&&Qe(this._objRef.scale,e)}get scale(){return this._objRef?.scale}set modelViewMatrix(e){this._objRef&&Qe(this._objRef.modelViewMatrix,e)}get modelViewMatrix(){return this._objRef?.modelViewMatrix}set normalMatrix(e){this._objRef&&Qe(this._objRef.normalMatrix,e)}get normalMatrix(){return this._objRef?.normalMatrix}set matrix(e){this._objRef&&(this._objRef.matrix=Qe(this._objRef.matrix,e))}get matrix(){return this._objRef?.matrix}set matrixWorld(e){this._objRef&&(this._objRef.matrixWorld=Qe(this._objRef.matrixWorld,e))}get matrixWorld(){return this._objRef?.matrixWorld}set matrixAutoUpdate(e){this._objRef&&(this._objRef.matrixAutoUpdate=e)}get matrixAutoUpdate(){return this._objRef?.matrixAutoUpdate}set matrixWorldAutoUpdate(e){this._objRef&&(this._objRef.matrixWorldAutoUpdate=e)}get matrixWorldAutoUpdate(){return this._objRef?.matrixWorldAutoUpdate}set matrixWorldNeedsUpdate(e){this._objRef&&(this._objRef.matrixWorldNeedsUpdate=e)}get matrixWorldNeedsUpdate(){return this._objRef?.matrixWorldNeedsUpdate}set layers(e){this._objRef&&(this._objRef.layers=Qe(this._objRef.layers,e))}get layers(){return this._objRef?.layers}set visible(e){this._objRef&&(this._objRef.visible=e)}get visible(){return this._objRef?.visible}set castShadow(e){this._objRef&&(this._objRef.castShadow=e)}get castShadow(){return this._objRef?.castShadow}set receiveShadow(e){this._objRef&&(this._objRef.receiveShadow=e)}get receiveShadow(){return this._objRef?.receiveShadow}set frustumCulled(e){this._objRef&&(this._objRef.frustumCulled=e)}get frustumCulled(){return this._objRef?.frustumCulled}set renderOrder(e){this._objRef&&(this._objRef.renderOrder=e)}get renderOrder(){return this._objRef?.renderOrder}set animations(e){this._objRef&&(this._objRef.animations=e)}get animations(){return this._objRef?.animations}set userData(e){this._objRef&&(this._objRef.userData=e)}get userData(){return this._objRef?.userData}set customDepthMaterial(e){this._objRef&&(this._objRef.customDepthMaterial=e)}get customDepthMaterial(){return this._objRef?.customDepthMaterial}set customDistanceMaterial(e){this._objRef&&(this._objRef.customDistanceMaterial=e)}get customDistanceMaterial(){return this._objRef?.customDistanceMaterial}set onBeforeRender(e){this._objRef&&(this._objRef.onBeforeRender=e)}get onBeforeRender(){return this._objRef?.onBeforeRender}set onAfterRender(e){this._objRef&&(this._objRef.onAfterRender=e)}get onAfterRender(){return this._objRef?.onAfterRender}constructor(e){super(e)}}Ke.DEFAULT_UP=pi.DEFAULT_UP,Ke.DEFAULT_MATRIX_AUTO_UPDATE=pi.DEFAULT_MATRIX_AUTO_UPDATE,Ke.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=pi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,Ke.\u0275fac=function(e){return new(e||Ke)(P(Ke,4))},Ke.\u0275cmp=K({type:Ke,selectors:[["th-object3D"]],inputs:{uuid:"uuid",name:"name",children:"children",up:"up",position:"position",rotation:"rotation",quaternion:"quaternion",scale:"scale",modelViewMatrix:"modelViewMatrix",normalMatrix:"normalMatrix",matrix:"matrix",matrixWorld:"matrixWorld",matrixAutoUpdate:"matrixAutoUpdate",matrixWorldAutoUpdate:"matrixWorldAutoUpdate",matrixWorldNeedsUpdate:"matrixWorldNeedsUpdate",layers:"layers",visible:"visible",castShadow:"castShadow",receiveShadow:"receiveShadow",frustumCulled:"frustumCulled",renderOrder:"renderOrder",animations:"animations",userData:"userData",customDepthMaterial:"customDepthMaterial",customDistanceMaterial:"customDistanceMaterial",onBeforeRender:"onBeforeRender",onAfterRender:"onAfterRender"},features:[oe([]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Cs extends Ke{get isCamera(){return this._objRef?.isCamera}get type(){return this._objRef?.type}set layers(e){this._objRef&&(this._objRef.layers=Qe(this._objRef.layers,e))}get layers(){return this._objRef?.layers}set matrixWorldInverse(e){this._objRef&&(this._objRef.matrixWorldInverse=Qe(this._objRef.matrixWorldInverse,e))}get matrixWorldInverse(){return this._objRef?.matrixWorldInverse}set projectionMatrix(e){this._objRef&&(this._objRef.projectionMatrix=Qe(this._objRef.projectionMatrix,e))}get projectionMatrix(){return this._objRef?.projectionMatrix}set projectionMatrixInverse(e){this._objRef&&(this._objRef.projectionMatrixInverse=Qe(this._objRef.projectionMatrixInverse,e))}get projectionMatrixInverse(){return this._objRef?.projectionMatrixInverse}}Cs.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Cs)))(t||Cs)}}(),Cs.\u0275cmp=K({type:Cs,selectors:[["th-camera"]],inputs:{layers:"layers",matrixWorldInverse:"matrixWorldInverse",projectionMatrix:"projectionMatrix",projectionMatrixInverse:"projectionMatrixInverse"},features:[oe([{provide:Ke,useExisting:le(()=>Cs)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class an extends Cs{getType(){return In}get isPerspectiveCamera(){return this._objRef?.isPerspectiveCamera}get type(){return this._objRef?.type}set zoom(e){this._objRef&&(this._objRef.zoom=e)}get zoom(){return this._objRef?.zoom}set fov(e){this._objRef&&(this._objRef.fov=e)}get fov(){return this._objRef?.fov}set aspect(e){this._objRef&&(this._objRef.aspect=e)}get aspect(){return this._objRef?.aspect}set near(e){this._objRef&&(this._objRef.near=e)}get near(){return this._objRef?.near}set far(e){this._objRef&&(this._objRef.far=e)}get far(){return this._objRef?.far}set focus(e){this._objRef&&(this._objRef.focus=e)}get focus(){return this._objRef?.focus}set view(e){this._objRef&&(this._objRef.view=e)}get view(){return this._objRef?.view}set filmGauge(e){this._objRef&&(this._objRef.filmGauge=e)}get filmGauge(){return this._objRef?.filmGauge}set filmOffset(e){this._objRef&&(this._objRef.filmOffset=e)}get filmOffset(){return this._objRef?.filmOffset}}an.\u0275fac=function(){let i;return function(t){return(i||(i=ce(an)))(t||an)}}(),an.\u0275cmp=K({type:an,selectors:[["th-perspectiveCamera"]],inputs:{zoom:"zoom",fov:"fov",aspect:"aspect",near:"near",far:"far",focus:"focus",view:"view",filmGauge:"filmGauge",filmOffset:"filmOffset"},features:[oe([{provide:Ke,useExisting:le(()=>an)},{provide:Cs,useExisting:le(()=>an)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class xc extends Ke{getType(){return Vn}get isLine(){return this._objRef?.isLine}get type(){return this._objRef?.type}set geometry(e){this._objRef&&(this._objRef.geometry=e)}get geometry(){return this._objRef?.geometry}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set morphTargetInfluences(e){this._objRef&&(this._objRef.morphTargetInfluences=e)}get morphTargetInfluences(){return this._objRef?.morphTargetInfluences}set morphTargetDictionary(e){this._objRef&&(this._objRef.morphTargetDictionary=e)}get morphTargetDictionary(){return this._objRef?.morphTargetDictionary}}xc.\u0275fac=function(){let i;return function(t){return(i||(i=ce(xc)))(t||xc)}}(),xc.\u0275cmp=K({type:xc,selectors:[["th-line"]],inputs:{geometry:"geometry",material:"material",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary"},features:[oe([{provide:Ke,useExisting:le(()=>xc)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Ms extends xc{getType(){return ws}get isLineSegments(){return this._objRef?.isLineSegments}get type(){return this._objRef?.type}}Ms.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Ms)))(t||Ms)}}(),Ms.\u0275cmp=K({type:Ms,selectors:[["th-lineSegments"]],features:[oe([{provide:Ke,useExisting:le(()=>Ms)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class io extends Ms{getType(){return FR}get type(){return this._objRef?.type}}io.\u0275fac=function(){let i;return function(t){return(i||(i=ce(io)))(t||io)}}(),io.\u0275cmp=K({type:io,selectors:[["th-gridHelper"]],features:[oe([{provide:Ke,useExisting:le(()=>io)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class no extends Ke{get isLight(){return this._objRef?.isLight}get type(){return this._objRef?.type}set color(e){this._objRef&&(this._objRef.color=Qe(this._objRef.color,e))}get color(){return this._objRef?.color}set intensity(e){this._objRef&&(this._objRef.intensity=e)}get intensity(){return this._objRef?.intensity}set shadow(e){this._objRef&&(this._objRef.shadow=e)}get shadow(){return this._objRef?.shadow}}no.\u0275fac=function(){let i;return function(t){return(i||(i=ce(no)))(t||no)}}(),no.\u0275cmp=K({type:no,selectors:[["th-light"]],inputs:{color:"color",intensity:"intensity",shadow:"shadow"},features:[oe([{provide:Ke,useExisting:le(()=>no)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Dl extends no{getType(){return wR}get isHemisphereLight(){return this._objRef?.isHemisphereLight}get type(){return this._objRef?.type}set position(e){this._objRef&&Qe(this._objRef.position,e)}get position(){return this._objRef?.position}set color(e){this._objRef&&(this._objRef.color=Qe(this._objRef.color,e))}get color(){return this._objRef?.color}set groundColor(e){this._objRef&&(this._objRef.groundColor=Qe(this._objRef.groundColor,e))}get groundColor(){return this._objRef?.groundColor}}Dl.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Dl)))(t||Dl)}}(),Dl.\u0275cmp=K({type:Dl,selectors:[["th-hemisphereLight"]],inputs:{position:"position",color:"color",groundColor:"groundColor"},features:[oe([{provide:Ke,useExisting:le(()=>Dl)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Es extends no{getType(){return Eb}get isDirectionalLight(){return this._objRef?.isDirectionalLight}get type(){return this._objRef?.type}set castShadow(e){this._objRef&&(this._objRef.castShadow=e)}get castShadow(){return this._objRef?.castShadow}set position(e){this._objRef&&Qe(this._objRef.position,e)}get position(){return this._objRef?.position}set shadow(e){this._objRef&&(this._objRef.shadow=e)}get shadow(){return this._objRef?.shadow}set target(e){this._objRef&&(this._objRef.target=e)}get target(){return this._objRef?.target}}Es.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Es)))(t||Es)}}(),Es.\u0275cmp=K({type:Es,selectors:[["th-directionalLight"]],inputs:{castShadow:"castShadow",position:"position",shadow:"shadow",target:"target"},features:[oe([{provide:Ke,useExisting:le(()=>Es)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Hn extends Ke{getType(){return nt}get isMesh(){return this._objRef?.isMesh}get type(){return this._objRef?.type}set geometry(e){this._objRef&&(this._objRef.geometry=e)}get geometry(){return this._objRef?.geometry}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set morphTargetInfluences(e){this._objRef&&(this._objRef.morphTargetInfluences=e)}get morphTargetInfluences(){return this._objRef?.morphTargetInfluences}set morphTargetDictionary(e){this._objRef&&(this._objRef.morphTargetDictionary=e)}get morphTargetDictionary(){return this._objRef?.morphTargetDictionary}}Hn.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Hn)))(t||Hn)}}(),Hn.\u0275cmp=K({type:Hn,selectors:[["th-mesh"]],inputs:{geometry:"geometry",material:"material",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary"},features:[oe([{provide:Ke,useExisting:le(()=>Hn)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class gn extends Ke{getType(){return Ky}get isScene(){return this._objRef?.isScene}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}set backgroundBlurriness(e){this._objRef&&(this._objRef.backgroundBlurriness=e)}get backgroundBlurriness(){return this._objRef?.backgroundBlurriness}set backgroundIntensity(e){this._objRef&&(this._objRef.backgroundIntensity=e)}get backgroundIntensity(){return this._objRef?.backgroundIntensity}set overrideMaterial(e){this._objRef&&(this._objRef.overrideMaterial=e)}get overrideMaterial(){return this._objRef?.overrideMaterial}set background(e){this._objRef&&(this._objRef.background=Qe(this._objRef.background,e))}get background(){return this._objRef?.background}set environment(e){this._objRef&&(this._objRef.environment=e)}get environment(){return this._objRef?.environment}}gn.\u0275fac=function(){let i;return function(t){return(i||(i=ce(gn)))(t||gn)}}(),gn.\u0275cmp=K({type:gn,selectors:[["th-scene"]],inputs:{type:"type",fog:"fog",backgroundBlurriness:"backgroundBlurriness",backgroundIntensity:"backgroundIntensity",overrideMaterial:"overrideMaterial",background:"background",environment:"environment"},features:[oe([{provide:Ke,useExisting:le(()=>gn)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Rb extends To{constructor(e){super(),this.parent=e}addToParent(){if(!this.parent.objRef)throw new Error("parent object doesn't hold a three js object instance");this.parent.objRef.material=this.objRef}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.material=void 0)}}Rb.\u0275fac=function(e){return new(e||Rb)(P(Ke))},Rb.\u0275cmp=K({type:Rb,selectors:[["th-abs-material"]],features:[W],decls:0,vars:0,template:function(e,t){},encapsulation:2});class Ei extends Rb{getType(){return Un}set alphaTest(e){this._objRef&&(this._objRef.alphaTest=e)}get alphaTest(){return this._objRef?.alphaTest}set alphaToCoverage(e){this._objRef&&(this._objRef.alphaToCoverage=e)}get alphaToCoverage(){return this._objRef?.alphaToCoverage}set blendDst(e){this._objRef&&(this._objRef.blendDst=e)}get blendDst(){return this._objRef?.blendDst}set blendDstAlpha(e){this._objRef&&(this._objRef.blendDstAlpha=e)}get blendDstAlpha(){return this._objRef?.blendDstAlpha}set blendEquation(e){this._objRef&&(this._objRef.blendEquation=e)}get blendEquation(){return this._objRef?.blendEquation}set blendEquationAlpha(e){this._objRef&&(this._objRef.blendEquationAlpha=e)}get blendEquationAlpha(){return this._objRef?.blendEquationAlpha}set blending(e){this._objRef&&(this._objRef.blending=e)}get blending(){return this._objRef?.blending}set blendSrc(e){this._objRef&&(this._objRef.blendSrc=e)}get blendSrc(){return this._objRef?.blendSrc}set blendSrcAlpha(e){this._objRef&&(this._objRef.blendSrcAlpha=e)}get blendSrcAlpha(){return this._objRef?.blendSrcAlpha}set clipIntersection(e){this._objRef&&(this._objRef.clipIntersection=e)}get clipIntersection(){return this._objRef?.clipIntersection}set clippingPlanes(e){this._objRef&&(this._objRef.clippingPlanes=e)}get clippingPlanes(){return this._objRef?.clippingPlanes}set clipShadows(e){this._objRef&&(this._objRef.clipShadows=e)}get clipShadows(){return this._objRef?.clipShadows}set colorWrite(e){this._objRef&&(this._objRef.colorWrite=e)}get colorWrite(){return this._objRef?.colorWrite}set defines(e){this._objRef&&(this._objRef.defines=e)}get defines(){return this._objRef?.defines}set depthFunc(e){this._objRef&&(this._objRef.depthFunc=e)}get depthFunc(){return this._objRef?.depthFunc}set depthTest(e){this._objRef&&(this._objRef.depthTest=e)}get depthTest(){return this._objRef?.depthTest}set depthWrite(e){this._objRef&&(this._objRef.depthWrite=e)}get depthWrite(){return this._objRef?.depthWrite}set id(e){this._objRef&&(this._objRef.id=e)}get id(){return this._objRef?.id}set stencilWrite(e){this._objRef&&(this._objRef.stencilWrite=e)}get stencilWrite(){return this._objRef?.stencilWrite}set stencilFunc(e){this._objRef&&(this._objRef.stencilFunc=e)}get stencilFunc(){return this._objRef?.stencilFunc}set stencilRef(e){this._objRef&&(this._objRef.stencilRef=e)}get stencilRef(){return this._objRef?.stencilRef}set stencilWriteMask(e){this._objRef&&(this._objRef.stencilWriteMask=e)}get stencilWriteMask(){return this._objRef?.stencilWriteMask}set stencilFuncMask(e){this._objRef&&(this._objRef.stencilFuncMask=e)}get stencilFuncMask(){return this._objRef?.stencilFuncMask}set stencilFail(e){this._objRef&&(this._objRef.stencilFail=e)}get stencilFail(){return this._objRef?.stencilFail}set stencilZFail(e){this._objRef&&(this._objRef.stencilZFail=e)}get stencilZFail(){return this._objRef?.stencilZFail}set stencilZPass(e){this._objRef&&(this._objRef.stencilZPass=e)}get stencilZPass(){return this._objRef?.stencilZPass}get isMaterial(){return this._objRef?.isMaterial}set name(e){this._objRef&&(this._objRef.name=e)}get name(){return this._objRef?.name}set needsUpdate(e){this._objRef&&(this._objRef.needsUpdate=e)}get needsUpdate(){return this._objRef?.needsUpdate}set opacity(e){this._objRef&&(this._objRef.opacity=e)}get opacity(){return this._objRef?.opacity}set polygonOffset(e){this._objRef&&(this._objRef.polygonOffset=e)}get polygonOffset(){return this._objRef?.polygonOffset}set polygonOffsetFactor(e){this._objRef&&(this._objRef.polygonOffsetFactor=e)}get polygonOffsetFactor(){return this._objRef?.polygonOffsetFactor}set polygonOffsetUnits(e){this._objRef&&(this._objRef.polygonOffsetUnits=e)}get polygonOffsetUnits(){return this._objRef?.polygonOffsetUnits}set precision(e){this._objRef&&(this._objRef.precision=e)}get precision(){return this._objRef?.precision}set premultipliedAlpha(e){this._objRef&&(this._objRef.premultipliedAlpha=e)}get premultipliedAlpha(){return this._objRef?.premultipliedAlpha}set forceSinglePass(e){this._objRef&&(this._objRef.forceSinglePass=e)}get forceSinglePass(){return this._objRef?.forceSinglePass}set dithering(e){this._objRef&&(this._objRef.dithering=e)}get dithering(){return this._objRef?.dithering}set side(e){this._objRef&&(this._objRef.side=e)}get side(){return this._objRef?.side}set shadowSide(e){this._objRef&&(this._objRef.shadowSide=e)}get shadowSide(){return this._objRef?.shadowSide}set toneMapped(e){this._objRef&&(this._objRef.toneMapped=e)}get toneMapped(){return this._objRef?.toneMapped}set transparent(e){this._objRef&&(this._objRef.transparent=e)}get transparent(){return this._objRef?.transparent}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set uuid(e){this._objRef&&(this._objRef.uuid=e)}get uuid(){return this._objRef?.uuid}set vertexColors(e){this._objRef&&(this._objRef.vertexColors=e)}get vertexColors(){return this._objRef?.vertexColors}set visible(e){this._objRef&&(this._objRef.visible=e)}get visible(){return this._objRef?.visible}set userData(e){this._objRef&&(this._objRef.userData=e)}get userData(){return this._objRef?.userData}set version(e){this._objRef&&(this._objRef.version=e)}get version(){return this._objRef?.version}constructor(e){super(e)}}Ei.\u0275fac=function(e){return new(e||Ei)(P(Ke,4))},Ei.\u0275cmp=K({type:Ei,selectors:[["th-material"]],inputs:{alphaTest:"alphaTest",alphaToCoverage:"alphaToCoverage",blendDst:"blendDst",blendDstAlpha:"blendDstAlpha",blendEquation:"blendEquation",blendEquationAlpha:"blendEquationAlpha",blending:"blending",blendSrc:"blendSrc",blendSrcAlpha:"blendSrcAlpha",clipIntersection:"clipIntersection",clippingPlanes:"clippingPlanes",clipShadows:"clipShadows",colorWrite:"colorWrite",defines:"defines",depthFunc:"depthFunc",depthTest:"depthTest",depthWrite:"depthWrite",id:"id",stencilWrite:"stencilWrite",stencilFunc:"stencilFunc",stencilRef:"stencilRef",stencilWriteMask:"stencilWriteMask",stencilFuncMask:"stencilFuncMask",stencilFail:"stencilFail",stencilZFail:"stencilZFail",stencilZPass:"stencilZPass",name:"name",needsUpdate:"needsUpdate",opacity:"opacity",polygonOffset:"polygonOffset",polygonOffsetFactor:"polygonOffsetFactor",polygonOffsetUnits:"polygonOffsetUnits",precision:"precision",premultipliedAlpha:"premultipliedAlpha",forceSinglePass:"forceSinglePass",dithering:"dithering",side:"side",shadowSide:"shadowSide",toneMapped:"toneMapped",transparent:"transparent",type:"type",uuid:"uuid",vertexColors:"vertexColors",visible:"visible",userData:"userData",version:"version"},features:[oe([]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class ro extends Ei{getType(){return nu}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set color(e){this._objRef&&(this._objRef.color=Qe(this._objRef.color,e))}get color(){return this._objRef?.color}set specular(e){this._objRef&&(this._objRef.specular=Qe(this._objRef.specular,e))}get specular(){return this._objRef?.specular}set shininess(e){this._objRef&&(this._objRef.shininess=e)}get shininess(){return this._objRef?.shininess}set map(e){this._objRef&&(this._objRef.map=e)}get map(){return this._objRef?.map}set lightMap(e){this._objRef&&(this._objRef.lightMap=e)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(e){this._objRef&&(this._objRef.lightMapIntensity=e)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set aoMap(e){this._objRef&&(this._objRef.aoMap=e)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(e){this._objRef&&(this._objRef.aoMapIntensity=e)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set emissive(e){this._objRef&&(this._objRef.emissive=Qe(this._objRef.emissive,e))}get emissive(){return this._objRef?.emissive}set emissiveIntensity(e){this._objRef&&(this._objRef.emissiveIntensity=e)}get emissiveIntensity(){return this._objRef?.emissiveIntensity}set emissiveMap(e){this._objRef&&(this._objRef.emissiveMap=e)}get emissiveMap(){return this._objRef?.emissiveMap}set bumpMap(e){this._objRef&&(this._objRef.bumpMap=e)}get bumpMap(){return this._objRef?.bumpMap}set bumpScale(e){this._objRef&&(this._objRef.bumpScale=e)}get bumpScale(){return this._objRef?.bumpScale}set normalMap(e){this._objRef&&(this._objRef.normalMap=e)}get normalMap(){return this._objRef?.normalMap}set normalMapType(e){this._objRef&&(this._objRef.normalMapType=e)}get normalMapType(){return this._objRef?.normalMapType}set normalScale(e){this._objRef&&(this._objRef.normalScale=Qe(this._objRef.normalScale,e))}get normalScale(){return this._objRef?.normalScale}set displacementMap(e){this._objRef&&(this._objRef.displacementMap=e)}get displacementMap(){return this._objRef?.displacementMap}set displacementScale(e){this._objRef&&(this._objRef.displacementScale=e)}get displacementScale(){return this._objRef?.displacementScale}set displacementBias(e){this._objRef&&(this._objRef.displacementBias=e)}get displacementBias(){return this._objRef?.displacementBias}set specularMap(e){this._objRef&&(this._objRef.specularMap=e)}get specularMap(){return this._objRef?.specularMap}set alphaMap(e){this._objRef&&(this._objRef.alphaMap=e)}get alphaMap(){return this._objRef?.alphaMap}set envMap(e){this._objRef&&(this._objRef.envMap=e)}get envMap(){return this._objRef?.envMap}set combine(e){this._objRef&&(this._objRef.combine=e)}get combine(){return this._objRef?.combine}set reflectivity(e){this._objRef&&(this._objRef.reflectivity=e)}get reflectivity(){return this._objRef?.reflectivity}set refractionRatio(e){this._objRef&&(this._objRef.refractionRatio=e)}get refractionRatio(){return this._objRef?.refractionRatio}set wireframe(e){this._objRef&&(this._objRef.wireframe=e)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(e){this._objRef&&(this._objRef.wireframeLinewidth=e)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(e){this._objRef&&(this._objRef.wireframeLinecap=e)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(e){this._objRef&&(this._objRef.wireframeLinejoin=e)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set flatShading(e){this._objRef&&(this._objRef.flatShading=e)}get flatShading(){return this._objRef?.flatShading}set metal(e){this._objRef&&(this._objRef.metal=e)}get metal(){return this._objRef?.metal}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}}ro.\u0275fac=function(){let i;return function(t){return(i||(i=ce(ro)))(t||ro)}}(),ro.\u0275cmp=K({type:ro,selectors:[["th-meshPhongMaterial"]],inputs:{type:"type",color:"color",specular:"specular",shininess:"shininess",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",emissive:"emissive",emissiveIntensity:"emissiveIntensity",emissiveMap:"emissiveMap",bumpMap:"bumpMap",bumpScale:"bumpScale",normalMap:"normalMap",normalMapType:"normalMapType",normalScale:"normalScale",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",specularMap:"specularMap",alphaMap:"alphaMap",envMap:"envMap",combine:"combine",reflectivity:"reflectivity",refractionRatio:"refractionRatio",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",flatShading:"flatShading",metal:"metal",fog:"fog"},features:[oe([{provide:Ei,useExisting:le(()=>ro)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Ib extends To{constructor(e){super(),this.parent=e}addToParent(){this.parent.objRef&&(this.parent.objRef.geometry=this.objRef,this.parent.objRef.updateMorphTargets&&this.parent.objRef.updateMorphTargets())}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.geometry=void 0)}}Ib.\u0275fac=function(e){return new(e||Ib)(P(Ke))},Ib.\u0275cmp=K({type:Ib,selectors:[["th-abs-geometry"]],features:[W],decls:0,vars:0,template:function(e,t){},encapsulation:2});class Tt extends Ib{getType(){return Mt}set id(e){this._objRef&&(this._objRef.id=e)}get id(){return this._objRef?.id}set uuid(e){this._objRef&&(this._objRef.uuid=e)}get uuid(){return this._objRef?.uuid}set name(e){this._objRef&&(this._objRef.name=e)}get name(){return this._objRef?.name}get type(){return this._objRef?.type}set index(e){this._objRef&&(this._objRef.index=Qe(this._objRef.index,e))}get index(){return this._objRef?.index}set attributes(e){this._objRef&&(this._objRef.attributes=e)}get attributes(){return this._objRef?.attributes}set morphAttributes(e){this._objRef&&(this._objRef.morphAttributes=e)}get morphAttributes(){return this._objRef?.morphAttributes}set morphTargetsRelative(e){this._objRef&&(this._objRef.morphTargetsRelative=e)}get morphTargetsRelative(){return this._objRef?.morphTargetsRelative}set groups(e){this._objRef&&(this._objRef.groups=e)}get groups(){return this._objRef?.groups}set boundingBox(e){this._objRef&&(this._objRef.boundingBox=Qe(this._objRef.boundingBox,e))}get boundingBox(){return this._objRef?.boundingBox}set boundingSphere(e){this._objRef&&(this._objRef.boundingSphere=Qe(this._objRef.boundingSphere,e))}get boundingSphere(){return this._objRef?.boundingSphere}set drawRange(e){this._objRef&&(this._objRef.drawRange=e)}get drawRange(){return this._objRef?.drawRange}set userData(e){this._objRef&&(this._objRef.userData=e)}get userData(){return this._objRef?.userData}get isBufferGeometry(){return this._objRef?.isBufferGeometry}constructor(e){super(e)}}Tt.\u0275fac=function(e){return new(e||Tt)(P(Ke,4))},Tt.\u0275cmp=K({type:Tt,selectors:[["th-bufferGeometry"]],inputs:{id:"id",uuid:"uuid",name:"name",index:"index",attributes:"attributes",morphAttributes:"morphAttributes",morphTargetsRelative:"morphTargetsRelative",groups:"groups",boundingBox:"boundingBox",boundingSphere:"boundingSphere",drawRange:"drawRange",userData:"userData"},features:[oe([]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class aa extends Tt{getType(){return gc}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}}aa.\u0275fac=function(){let i;return function(t){return(i||(i=ce(aa)))(t||aa)}}(),aa.\u0275cmp=K({type:aa,selectors:[["th-planeGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>aa)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});var so=(()=>{return(i=so||(so={})).mouseEnter="mouseEnter",i.mouseExit="mouseExit",i.click="click",i.pointerDown="pointerDown",i.pointerUp="pointerUp",so;var i})();const Dx=new je("A reference to the raycaster object",{factory:()=>new _u});class oo{constructor(){this.raycaster=Ut(Dx),this.selected=null,this.enabled=!0,this.groups=[],this.paused=!1,this.maxClickDistance=23,this.nid=oo.instanceCnt++,this.onPointerMove=this.onPointerMove.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerUp=this.onPointerUp.bind(this)}ngOnDestroy(){this.disable(),this.unsubscribe()}subscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.addEventListener("pointermove",this.onPointerMove),this.canvas.addEventListener("pointerdown",this.onPointerDown),this.canvas.addEventListener("pointerup",this.onPointerUp)}unsubscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.removeEventListener("pointermove",this.onPointerMove),this.canvas.removeEventListener("pointerdown",this.onPointerDown),this.canvas.removeEventListener("pointerup",this.onPointerUp)}enable(){this.enabled=!0}disable(){this.enabled=!1}pause(){this.paused=!0}resume(){this.paused=!1}get isEnabled(){return this.enabled}init(e,t){this.camera=e,this.canvas=t,this.subscribe()}addEventTarget(e){this.groups.push(e)}removeEventTarget(e){const t=this.groups.indexOf(e);t>=0&&this.groups.splice(t,1)}onPointerMove(e){if(!this.isReady())return;const t=this.getFirstIntersectedGroup(e.layerX,e.layerY,so.mouseEnter);if((!this.selected||this.selected!==t?.target)&&(this.selected&&(this.selected.host.objRef?.dispatchEvent({type:so.mouseExit,component:this.selected.host}),this.selected.emitOnMouseExit(),this.selected=null),t&&t.target)){this.selected=t.target;const n={type:so.mouseEnter,component:t.target.host,...t};this.selected.host.objRef?.dispatchEvent(n),this.selected.emitOnMouseEnter(n)}}onPointerDown(e){if(this.maxClickDistance=e.width,this.pointerDownEvent=e,!this.isReady())return;const t=this.getFirstIntersectedGroup(e.layerX,e.layerY,so.pointerDown);if(t&&t.target&&t.target.host.objRef){const n={type:so.pointerDown,component:t.target.host,...t};t.target.host.objRef.dispatchEvent(n),t.target.emitOnPointerDown(n)}}onPointerUp(e){const t=this.pointerDownEvent;if(this.pointerDownEvent=void 0,!this.isReady())return;let n=this.getFirstIntersectedGroup(e.layerX,e.layerY,so.pointerUp);if(n&&n.target&&n.target.host.objRef){const r={type:so.pointerUp,component:n.target.host,...n};n.target.host.objRef.dispatchEvent(r),n.target.emitOnPointerUp(r)}if(!(this.calcPointerDownUpDinstance(e,t)>this.maxClickDistance)&&(n=this.getFirstIntersectedGroup(e.layerX,e.layerY,so.click),n&&n.target&&n.target.host.objRef)){const r={type:so.click,component:n.target.host,...n};n.target.host.objRef.dispatchEvent(r),n.target.emitOnClick(r)}}isReady(e){return!!(this.enabled&&(e||!this.paused)&&this.camera&&this.camera.objRef&&this.groups&&this.groups.length>0)}calcPointerDownUpDinstance(e,t){if(!t)return Number.MAX_VALUE;const n=e.layerX-t.layerX,r=e.layerY-t.layerY;return Math.sqrt(n*n+r*r)}getFirstIntersectedGroup(e,t,n){if(!this.camera||!this.canvas||!this.camera.objRef)return;const r=new pe(e=e/this.canvas.clientWidth*2-1,t=-t/this.canvas.clientHeight*2+1);let s,o;this.raycaster.setFromCamera(r,this.camera.objRef);for(const a of this.groups){const l=a.host.objRef;if(!a[n]||!l)continue;const c=this.raycaster.intersectObject(l,!0);c.length>0&&(!s||s.distance>c[0].distance)&&(s=c[0],o=a)}return o&&s?{target:o,...s}:void 0}}function yn(i){return Mn((e,t)=>{us(i).subscribe(un(t,()=>t.complete(),nM)),!t.closed&&e.subscribe(t)})}oo.instanceCnt=0,oo.\u0275fac=function(e){return new(e||oo)},oo.\u0275prov=Ge({token:oo,factory:oo.\u0275fac});const g5={alpha:!0,antialias:!0,preserveDrawingBuffer:!0};class Ro{get canvas(){return this.rendererParameters?.domElement}constructor(e){this.ngZone=e,this.clock=new _p,this.destroyed$=new Ht,this.resizeEmitter=new St,this.beforeRenderEmitter=new St,this.views=[],this.beforeRender$=this.beforeRenderEmitter.pipe(yn(this.destroyed$)),this.resize$=this.resizeEmitter.pipe(yn(this.destroyed$))}get renderer(){return this._renderer}ngOnDestroy(){this.resizeObserver&&this.canvas&&this.resizeObserver.unobserve(this.canvas)}initResizeObserver(){this.ngZone.runOutsideAngular(()=>{if(!this.canvas)throw new Error("missing canvas element");this.resize(),this.resizeObserver||(this.resizeObserver=new ResizeObserver(()=>{this.resize()})),this.resizeObserver.observe(this.canvas)})}initRenderer(){this._renderer||(this._renderer=new QT({canvas:this.rendererParameters?.domElement,...g5}),Object.assign(this._renderer,{...g5,...this.rendererParameters}),this.resize())}setRenderer(e){this.rendererParameters=e,this.initRenderer(),this.initResizeObserver()}addView(e){this.views.push(e);const t=this.calcRendererSize();t&&this.adjustViewDimensions(e,t.width,t.height)}render(){this.beforeRenderEmitter.emit({engine:this,delta:this.clock.getDelta()});for(const e of this.views)this.renderView(e)}renderView(e){if(!this._renderer)return;const t=e.camera,n=e.scene;if(!(t&&n&&t.objRef&&n.objRef))return;const r=this._renderer;Tb(e.onRender)&&this.ngZone.run(()=>e.onRender.emit({renderer:r,scene:n,camera:t})),this.applyRendererParametersFromView(e),e.effectComposer?e.effectComposer.render():this._renderer.render(n.objRef,t.objRef)}applyRendererParametersFromView(e){this._renderer&&(e.viewPort&&(e.viewPort instanceof ei?this._renderer.setViewport(e.viewPort):this._renderer.setViewport(e.viewPort.x,e.viewPort.y,e.viewPort.width,e.viewPort.height)),e.scissor&&(e.scissor instanceof ei?this._renderer.setScissor(e.scissor):this._renderer.setScissor(e.scissor.x,e.scissor.y,e.scissor.width,e.scissor.height)),void 0!==e.scissorTest&&this._renderer.setScissorTest(e.scissorTest),e.clearColor&&this._renderer.setClearColor(e.clearColor),void 0!==e.clearAlpha&&this._renderer.setClearAlpha(e.clearAlpha),void 0!==e.shadow&&(this._renderer.shadowMap.enabled=!0))}resize(){if(!this._renderer||!this.canvas)return!1;const{width:e,height:t}=this.calcRendererSize();this._renderer.setSize(e,t,!1);for(const n of this.views)this.adjustViewDimensions(n,e,t);return this.resizeEmitter.emit({width:e,height:t}),!0}calcRendererSize(){if(!this._renderer||!this.canvas)return;const e=window.devicePixelRatio;return{width:(this.canvas.clientWidth??0)*e,height:(this.canvas.clientHeight??0)*e}}adjustViewDimensions(e,t,n){e.viewPort||(e.camera&&e.camera.objRef.aspect&&(e.camera.objRef.aspect=t/n,e.camera.objRef.updateProjectionMatrix()),e.effectComposer?.setSize(t,n))}}Ro.\u0275fac=function(e){return new(e||Ro)(xe(pt))},Ro.\u0275prov=Ge({token:Ro,factory:Ro.\u0275fac});class la{constructor(e,t){this.engineService=e,this.ngZone=t,this.active=!0,this.destroyed$=new Ht,this.beforeRender$=this.engineService.beforeRender$,this.engineService.resize$.pipe(yn(this.destroyed$)).subscribe(()=>this.requestAnimationFrame())}ngOnDestroy(){this.stop(),this.destroyed$.next(),this.destroyed$.complete()}start(){this.active||(this.active=!0,this.requestAnimationFrame())}stop(){this.active=!1,void 0!==this.frameId&&(cancelAnimationFrame(this.frameId),this.frameId=void 0)}isActive(){return this.active}requestAnimationFrame(){void 0===this.frameId&&this.ngZone.runOutsideAngular(()=>this.frameId=requestAnimationFrame(()=>{this.frameId=void 0,this.engineService.render(),this.active&&this.requestAnimationFrame()}))}}la.\u0275fac=function(e){return new(e||la)(xe(Ro),xe(pt))},la.\u0275prov=Ge({token:la,factory:la.\u0275fac});class Ss{constructor(e,t){this.engServ=e,this.raycaster=t,this.onRender=new St}set contentScene(e){e&&(this.scene=e)}set effectComposer(e){this._effectComposer=e,this.configureEffectComposerRenderTarget()}get effectComposer(){return this._effectComposer}set camera(e){this._camera=e,this.initRaycaster()}get camera(){return this._camera}set contentCamera(e){e&&(this.camera=e)}set viewPort(e){this._viewPort=e,this.configureEffectComposerRenderTarget()}get viewPort(){return this._viewPort}ngOnInit(){this.initRaycaster()}initRaycaster(){this.camera&&this.engServ.canvas&&this.raycaster.init(this.camera,this.engServ.canvas)}add(e){}remove(e){}configureEffectComposerRenderTarget(){if(this.viewPort&&this.effectComposer){let e,t;this.viewPort instanceof ei?(e=this.viewPort.z,t=this.viewPort?.width):(e=this.viewPort.width,t=this.viewPort.height),this.effectComposer.setSize(e,t)}}}Ss.\u0275fac=function(e){return new(e||Ss)(P(Ro),P(oo))},Ss.\u0275cmp=K({type:Ss,selectors:[["th-view"]],contentQueries:function(e,t,n){if(1&e&&(Fn(n,gn,5),Fn(n,Cs,5)),2&e){let r;kt(r=Lt())&&(t.contentScene=r.first),kt(r=Lt())&&(t.contentCamera=r.first)}},inputs:{scene:"scene",effectComposer:"effectComposer",camera:"camera",shadow:"shadow",viewPort:"viewPort",scissor:"scissor",scissorTest:"scissorTest",clearColor:"clearColor",clearAlpha:"clearAlpha"},outputs:{onRender:"onRender"},features:[oe([{provide:Ke,useExisting:le(()=>Ss)},{provide:Dx,useValue:new _u},oo])],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2});const hce=["rendererCanvas"];function fce(i,e){1&i&&ne(0,0,["*ngIf","isDevMode()"])}class Gi extends Ss{get obj(){return this}set views(e){e.forEach(t=>this.engServ.addView(t))}set rendererCanvas(e){e&&(this._rendererCanvas=e,e.nativeElement.id+=this.nid)}get rendererCanvas(){return this._rendererCanvas}constructor(e,t,n){super(e,n),this.engServ=e,this.animationLoop=t,this.raycaster=n,this.isDevMode=FZ,this.nid=Gi.instanceCnt++,this.disableDefaultView=!1}ngAfterContentChecked(){this.animationLoop.requestAnimationFrame()}ngAfterViewInit(){this.animationLoop.requestAnimationFrame()}ngOnInit(){this.applyRendererParameters(),super.ngOnInit(),this.disableDefaultView||this.engServ.addView(this)}applyRendererParameters(){if(!this.rendererCanvas)throw new Error("Missing Canvas");this.engServ.setRenderer({...this.rendererParameters,domElement:this.rendererCanvas.nativeElement})}}Gi.instanceCnt=0,Gi.\u0275fac=function(e){return new(e||Gi)(P(Ro),P(la),P(le(()=>oo)))},Gi.\u0275cmp=K({type:Gi,selectors:[["th-canvas"]],contentQueries:function(e,t,n){if(1&e&&Fn(n,Ss,4),2&e){let r;kt(r=Lt())&&(t.views=r)}},viewQuery:function(e,t){if(1&e&&ki(hce,7),2&e){let n;kt(n=Lt())&&(t.rendererCanvas=n.first)}},inputs:{rendererParameters:"rendererParameters",disableDefaultView:"disableDefaultView"},features:[oe([{provide:Ke,useExisting:le(()=>Gi)},Ro,la,{provide:Dx,useValue:new _u},le(()=>oo),{provide:Ss,useExisting:le(()=>Gi)}]),W],ngContentSelectors:["*"],decls:3,vars:1,consts:[["id","rendererCanvas"],["rendererCanvas",""],[4,"ngIf"]],template:function(e,t){1&e&&(fe(),ye(0,"canvas",0,1),Ft(2,fce,1,0,"ng-content",2),ke()),2&e&&(se(2),Z("ngIf",t.isDevMode()))},dependencies:[Jl],styles:["[_nghost-%COMP%]{display:flex;flex:auto;line-height:0;height:100%}canvas[_ngcontent-%COMP%]{flex:auto;outline:none;width:100%;height:100%}"],changeDetection:0});var Db=function(){var i=0,e=document.createElement("div");function t(d){return e.appendChild(d.dom),d}function n(d){for(var u=0;u<e.children.length;u++)e.children[u].style.display=u===d?"block":"none";i=d}e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(d){d.preventDefault(),n(++i%e.children.length)},!1);var r=(performance||Date).now(),s=r,o=0,a=t(new Db.Panel("FPS","#0ff","#002")),l=t(new Db.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new Db.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:e,addPanel:t,showPanel:n,begin:function(){r=(performance||Date).now()},end:function(){o++;var d=(performance||Date).now();if(l.update(d-r,200),d>=s+1e3&&(a.update(1e3*o/(d-s),100),s=d,o=0,c)){var u=performance.memory;c.update(u.usedJSHeapSize/1048576,u.jsHeapSizeLimit/1048576)}return d},update:function(){r=this.end()},domElement:e,setMode:n}};Db.Panel=function(i,e,t){var n=1/0,r=0,s=Math.round,o=s(window.devicePixelRatio||1),a=80*o,l=48*o,c=3*o,d=2*o,u=3*o,h=15*o,f=74*o,m=30*o,g=document.createElement("canvas");g.width=a,g.height=l,g.style.cssText="width:80px;height:48px";var _=g.getContext("2d");return _.font="bold "+9*o+"px Helvetica,Arial,sans-serif",_.textBaseline="top",_.fillStyle=t,_.fillRect(0,0,a,l),_.fillStyle=e,_.fillText(i,c,d),_.fillRect(u,h,f,m),_.fillStyle=t,_.globalAlpha=.9,_.fillRect(u,h,f,m),{dom:g,update:function(p,v){n=Math.min(n,p),r=Math.max(r,p),_.fillStyle=t,_.globalAlpha=1,_.fillRect(0,0,a,h),_.fillStyle=e,_.fillText(s(p)+" "+i+" ("+s(n)+"-"+s(r)+")",c,d),_.drawImage(g,u+o,h,f-o,m,u,h,f-o,m),_.fillRect(u+f-o,h,o,m),_.fillStyle=t,_.globalAlpha=.9,_.fillRect(u+f-o,h,o,s((1-p/v)*m))}}};const mce=Db;class Io{constructor(e){this.engineService=e,this.stats=new mce}ngOnDestroy(){this.renderSubscription&&this.renderSubscription.unsubscribe()}ngOnInit(){if(!this.engineService.canvas)throw new Error("No canvas present");const e=this.engineService.canvas.parentElement;e&&(e.style.position="relative",this.stats.dom.style.position="absolute",this.stats.showPanel(0),this.engineService.canvas.parentElement?.appendChild(this.stats.dom),this.renderSubscription=this.engineService.beforeRender$.subscribe(()=>{this.stats.update()}))}set thStats(e){this.stats.dom.style.visibility=e?"visible":"hidden"}}Io.\u0275fac=function(e){return new(e||Io)(P(Ro))},Io.\u0275dir=Oe({type:Io,selectors:[["","thStats",""]],inputs:{thStats:"thStats"}});const _5="https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/assets/",ca="assets/";function b5(i,e){if(e===Oj)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===by||e===fT){let t=i.getIndex();if(null===t){const o=[],a=i.getAttribute("position");if(void 0===a)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i;for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),t=i.getIndex()}const n=t.count-2,r=[];if(e===by)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}class _ce extends br{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new xce(t)}),this.register(function(t){return new Rce(t)}),this.register(function(t){return new Ice(t)}),this.register(function(t){return new Dce(t)}),this.register(function(t){return new Cce(t)}),this.register(function(t){return new Mce(t)}),this.register(function(t){return new Ece(t)}),this.register(function(t){return new Sce(t)}),this.register(function(t){return new yce(t)}),this.register(function(t){return new Tce(t)}),this.register(function(t){return new wce(t)}),this.register(function(t){return new vce(t)}),this.register(function(t){return new Pce(t)}),this.register(function(t){return new kce(t)})}load(e,t,n,r){const s=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:uu.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new vr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(d){t(d),s.manager.itemEnd(e)},a)}catch(d){a(d)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const o={},a={},l=new TextDecoder;if("string"==typeof e)s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===v5){try{o[Ri.KHR_BINARY_GLTF]=new Lce(e)}catch(u){return void(r&&r(u))}s=JSON.parse(o[Ri.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new qce(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const u=this.pluginCallbacks[d](c);a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let d=0;d<s.extensionsUsed.length;++d){const u=s.extensionsUsed[d],h=s.extensionsRequired||[];switch(u){case Ri.KHR_MATERIALS_UNLIT:o[u]=new Ace;break;case Ri.KHR_DRACO_MESH_COMPRESSION:o[u]=new Bce(s,this.dracoLoader);break;case Ri.KHR_TEXTURE_TRANSFORM:o[u]=new Fce;break;case Ri.KHR_MESH_QUANTIZATION:o[u]=new Oce;break;default:h.indexOf(u)>=0&&void 0===a[u]&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function bce(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const Ri={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class vce{constructor(e){this.parser=e,this.name=Ri.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const d=new Be(16777215);void 0!==l.color&&d.fromArray(l.color);const u=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new Eb(d),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new gp(d),c.distance=u;break;case"spot":c=new Cb(d),c.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Cc(c,l),void 0!==l.intensity&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(n,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return n._getNodeRef(t.cache,a,l)})}}class Ace{constructor(){this.name=Ri.KHR_MATERIALS_UNLIT}getMaterialType(){return Xn}extendParams(e,t,n){const r=[];e.color=new Be(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(n.assignTexture(e,"map",s.baseColorTexture,ci))}return Promise.all(r)}}class yce{constructor(e){this.parser=e,this.name=Ri.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class xce{constructor(e){this.parser=e,this.name=Ri.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?ja:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new pe(a,a)}return Promise.all(s)}}class wce{constructor(e){this.parser=e,this.name=Ri.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?ja:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Cce{constructor(e){this.parser=e,this.name=Ri.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?ja:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Be(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,ci)),void 0!==o.sheenRoughnessTexture&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Mce{constructor(e){this.parser=e,this.name=Ri.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?ja:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Ece{constructor(e){this.parser=e,this.name=Ri.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?ja:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Be(a[0],a[1],a[2]),Promise.all(s)}}class Sce{constructor(e){this.parser=e,this.name=Ri.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?ja:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class Tce{constructor(e){this.parser=e,this.name=Ri.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?ja:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Be(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,ci)),Promise.all(s)}}class Rce{constructor(e){this.parser=e,this.name=Ri.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Ice{constructor(e){this.parser=e,this.name=Ri.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Dce{constructor(e){this.parser=e,this.name=Ri.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Pce{constructor(e){this.name=Ri.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const d=r.count,u=r.byteStride,h=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(d,u,h,r.mode,r.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(d*u);return o.decodeGltfBuffer(new Uint8Array(f),d,u,h,r.mode,r.filter),f})})}return null}}class kce{constructor(e){this.name=Ri.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=t.meshes[n.mesh];for(const c of r.primitives)if(c.mode!==Do.TRIANGLES&&c.mode!==Do.TRIANGLE_STRIP&&c.mode!==Do.TRIANGLE_FAN&&void 0!==c.mode)return null;const o=n.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(d=>(l[c]=d,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const d=c.pop(),u=d.isGroup?d.children:[d],h=c[0].count,f=[];for(const m of u){const g=new We,_=new R,p=new wi,v=new R(1,1,1),b=new rx(m.geometry,m.material,h);for(let y=0;y<h;y++)l.TRANSLATION&&_.fromBufferAttribute(l.TRANSLATION,y),l.ROTATION&&p.fromBufferAttribute(l.ROTATION,y),l.SCALE&&v.fromBufferAttribute(l.SCALE,y),b.setMatrixAt(y,g.compose(_,p,v));for(const y in l)"TRANSLATION"!==y&&"ROTATION"!==y&&"SCALE"!==y&&m.geometry.setAttribute(y,l[y]);pi.prototype.copy.call(b,m),this.parser.assignFinalMaterial(b),f.push(b)}return d.isGroup?(d.clear(),d.add(...f),d):f[0]}))}}const v5="glTF";class Lce{constructor(e){this.name=Ri.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==v5)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,s=new DataView(e,12);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,1313821514===l){const c=new Uint8Array(e,12+o,a);this.content=n.decode(c)}else if(5130562===l){const c=12+o;this.body=e.slice(c,c+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Bce{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ri.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const d in o){const u=HR[d]||d.toLowerCase();a[u]=o[d]}for(const d in e.attributes){const u=HR[d]||d.toLowerCase();if(void 0!==o[d]){const h=n.accessors[e.attributes[d]];c[u]=vp[h.componentType].name,l[u]=!0===h.normalized}}return t.getDependency("bufferView",s).then(function(d){return new Promise(function(u){r.decodeDracoFile(d,function(h){for(const f in h.attributes){const g=l[f];void 0!==g&&(h.attributes[f].normalized=g)}u(h)},a,c)})})}}class Fce{constructor(){this.name=Ri.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Oce{constructor(){this.name=Ri.KHR_MESH_QUANTIZATION}}class y5 extends pp{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[s+o];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=2*a,c=3*a,d=r-t,u=(n-t)/d,h=u*u,f=h*u,m=e*c,g=m-c,_=-2*f+3*h,p=f-h,v=1-_,b=p-h+u;for(let y=0;y!==a;y++)s[y]=v*o[g+y+a]+b*(o[g+y+l]*d)+_*o[m+y+a]+p*(o[m+y]*d);return s}}const Nce=new wi;class jce extends y5{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return Nce.fromArray(s).normalize().toArray(s),s}}const Do={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},vp={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},x5={9728:Zt,9729:Ni,9984:z_,9985:cy,9986:bf,9987:Ws},w5={33071:mr,33648:_f,10497:xo},GR={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},HR={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},wc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Uce={CUBICSPLINE:void 0,LINEAR:Nd,STEP:Cf};function kb(i,e,t){for(const n in t.extensions)void 0===i[n]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function Cc(i,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Gce(i,e){if(i.updateMorphTargets(),void 0!==e.weights)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Hce(i){const e=i.extensions&&i.extensions[Ri.KHR_DRACO_MESH_COMPRESSION];let t;return t=e?"draco:"+e.bufferView+":"+e.indices+":"+C5(e.attributes):i.indices+":"+C5(i.attributes)+":"+i.mode,t}function C5(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function WR(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Wce=new We;class qce{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new bce,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,s=-1;typeof navigator<"u"&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),this.textureLoader=typeof createImageBitmap>"u"||n||r&&s<98?new Ax(this.options.manager):new I4(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new vr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};kb(s,a,r),Cc(a,r),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(n[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(o,a)=>{const l=this.associations.get(o);null!=l&&this.associations.set(a,l);for(const[c,d]of o.children.entries())s(d,a.children[c])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Ri.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(uu.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const s=t.byteOffset||0;return n.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const o=GR[r.type],l=!0===r.normalized,c=new(0,vp[r.componentType])(r.count*o);return Promise.resolve(new Ci(c,o,l))}const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=GR[r.type],c=vp[r.componentType],d=c.BYTES_PER_ELEMENT,h=r.byteOffset||0,f=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,m=!0===r.normalized;let g,_;if(f&&f!==d*l){const p=Math.floor(h/f),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+p+":"+r.count;let b=t.cache.get(v);b||(g=new c(a,p*f,r.count*f/d),b=new cb(g,f/d),t.cache.add(v,b)),_=new _c(b,l,h%f/d,m)}else g=null===a?new c(r.count*l):new c(a,h,r.count*l),_=new Ci(g,l,m);if(void 0!==r.sparse){const y=r.sparse.values.byteOffset||0,x=new(0,vp[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*GR.SCALAR),w=new c(o[2],y,r.sparse.count*l);null!==a&&(_=new Ci(_.array.slice(),_.itemSize,_.normalized));for(let E=0,S=x.length;E<S;E++){const C=x[E];if(_.setX(C,w[E*l]),l>=2&&_.setY(C,w[E*l+1]),l>=3&&_.setZ(C,w[E*l+2]),l>=4&&_.setW(C,w[E*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return _})}loadTexture(e){const t=this.json,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=this.options.manager.getHandler(o.uri);null!==l&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,n){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,n).then(function(d){d.flipY=!1,d.name=o.name||a.name||"",""===d.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(d.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return d.magFilter=x5[h.magFilter]||Ni,d.minFilter=x5[h.minFilter]||Ws,d.wrapS=w5[h.wrapS]||xo,d.wrapT=w5[h.wrapT]||xo,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(u=>u.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=this.getDependency("bufferView",o.bufferView).then(function(u){c=!0;const h=new Blob([u],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(u){return new Promise(function(h,f){let m=h;!0===t.isImageBitmapLoader&&(m=function(g){const _=new An(g);_.needsUpdate=!0,h(_)}),t.load(uu.resolveURL(u,s.path),m,void 0,f)})}).then(function(u){return!0===c&&a.revokeObjectURL(l),u.userData.mimeType=o.mimeType||function Qce(i){return i.search(/\.jpe?g($|\?)/i)>0||0===i.search(/^data\:image\/jpeg/)?"image/jpeg":i.search(/\.webp($|\?)/i)>0||0===i.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),u});return this.sourceCache[e]=d,d}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((o=o.clone()).channel=n.texCoord),s.extensions[Ri.KHR_TEXTURE_TRANSFORM]){const a=void 0!==n.extensions?n.extensions[Ri.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Ri.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return void 0!==r&&(o.encoding=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new Tl,Un.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(a,l)),n=l}else if(e.isLine){const a="LineBasicMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new mn,Un.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(a,l)),n=l}if(r||s||o){let a="ClonedMaterial:"+n.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=n.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(n))),n=l}e.material=n}getMaterialType(){return Na}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},c=[];if((s.extensions||{})[Ri.KHR_MATERIALS_UNLIT]){const u=r[Ri.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),c.push(u.extendParams(a,s,t))}else{const u=s.pbrMetallicRoughness||{};if(a.color=new Be(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const h=u.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}void 0!==u.baseColorTexture&&c.push(t.assignTexture(a,"map",u.baseColorTexture,ci)),a.metalness=void 0!==u.metallicFactor?u.metallicFactor:1,a.roughness=void 0!==u.roughnessFactor?u.roughnessFactor:1,void 0!==u.metallicRoughnessTexture&&(c.push(t.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=bs);const d=s.alphaMode||"OPAQUE";if("BLEND"===d?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===d&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==Xn&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new pe(1,1),void 0!==s.normalTexture.scale)){const u=s.normalTexture.scale;a.normalScale.set(u,u)}return void 0!==s.occlusionTexture&&o!==Xn&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==Xn&&(a.emissive=(new Be).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&o!==Xn&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,ci)),Promise.all(c).then(function(){const u=new o(a);return s.name&&(u.name=s.name),Cc(u,s),t.associations.set(u,{materials:e}),s.extensions&&kb(r,u,s),u})}createUniqueName(e){const t=ji.sanitizeNodeName(e||"");let n=t;for(let r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(a){return n[Ri.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return M5(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],d=Hce(c),u=r[d];if(u)o.push(u.promise);else{let h;h=c.extensions&&c.extensions[Ri.KHR_DRACO_MESH_COMPRESSION]?s(c):M5(new Mt,c,t),r[d]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const d=void 0===o[l].material?(void 0===(i=this.cache).DefaultMaterial&&(i.DefaultMaterial=new Na({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ia})),i.DefaultMaterial):this.getDependency("material",o[l].material);a.push(d)}var i;return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),d=l[l.length-1],u=[];for(let f=0,m=d.length;f<m;f++){const g=d[f],_=o[f];let p;const v=c[f];if(_.mode===Do.TRIANGLES||_.mode===Do.TRIANGLE_STRIP||_.mode===Do.TRIANGLE_FAN||void 0===_.mode)p=!0===s.isSkinnedMesh?new fb(g,v):new nt(g,v),!0===p.isSkinnedMesh&&p.normalizeSkinWeights(),_.mode===Do.TRIANGLE_STRIP?p.geometry=b5(p.geometry,fT):_.mode===Do.TRIANGLE_FAN&&(p.geometry=b5(p.geometry,by));else if(_.mode===Do.LINES)p=new ws(g,v);else if(_.mode===Do.LINE_STRIP)p=new Vn(g,v);else if(_.mode===Do.LINE_LOOP)p=new ox(g,v);else{if(_.mode!==Do.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);p=new $d(g,v)}Object.keys(p.geometry.morphAttributes).length>0&&Gce(p,s),p.name=t.createUniqueName(s.name||"mesh_"+e),Cc(p,s),_.extensions&&kb(r,p,_),t.assignFinalMaterial(p),u.push(p)}for(let f=0,m=u.length;f<m;f++)t.associations.set(u[f],{meshes:e,primitives:f});if(1===u.length)return u[0];const h=new xs;t.associations.set(h,{meshes:e});for(let f=0,m=u.length;f<m;f++)h.add(u[f]);return h})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new In(vt.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new La(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Cc(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,s=t.joints.length;r<s;r++)n.push(this._loadNodeShallow(t.joints[r]));return n.push(void 0!==t.inverseBindMatrices?this.getDependency("accessor",t.inverseBindMatrices):null),Promise.all(n).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,d=o.length;c<d;c++){const u=o[c];if(u){a.push(u);const h=new We;null!==s&&h.fromArray(s.array,16*c),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Jf(a,l)})}loadAnimation(e){const n=this.json.animations[e],r=n.name?n.name:"animation_"+e,s=[],o=[],a=[],l=[],c=[];for(let d=0,u=n.channels.length;d<u;d++){const h=n.channels[d],f=n.samplers[h.sampler],m=h.target,_=void 0!==n.parameters?n.parameters[f.input]:f.input,p=void 0!==n.parameters?n.parameters[f.output]:f.output;void 0!==m.node&&(s.push(this.getDependency("node",m.node)),o.push(this.getDependency("accessor",_)),a.push(this.getDependency("accessor",p)),l.push(f),c.push(m))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(d){const u=d[0],h=d[1],f=d[2],m=d[3],g=d[4],_=[];for(let p=0,v=u.length;p<v;p++){const b=u[p],y=h[p],x=f[p],w=m[p],E=g[p];if(void 0===b)continue;let S;switch(b.updateMatrix(),wc[E.path]){case wc.weights:S=ou;break;case wc.rotation:S=Rl;break;default:S=lu}const C=b.name?b.name:b.uuid,T=void 0!==w.interpolation?Uce[w.interpolation]:Nd,k=[];wc[E.path]===wc.weights?b.traverse(function(B){B.morphTargetInfluences&&k.push(B.name?B.name:B.uuid)}):k.push(C);let U=x.array;if(x.normalized){const B=WR(U.constructor),j=new Float32Array(U.length);for(let H=0,L=U.length;H<L;H++)j[H]=U[H]*B;U=j}for(let B=0,j=k.length;B<j;B++){const H=new S(k[B]+"."+wc[E.path],y.array,U,T);"CUBICSPLINE"===w.interpolation&&(H.createInterpolant=function(V){return new(this instanceof Rl?jce:y5)(this.times,this.values,this.getValueSize()/3,V)},H.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),_.push(H)}}return new cu(r,void 0,_)})}createNodeMesh(e){const n=this,r=this.json.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const n=this,r=this.json.nodes[e],s=n._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,d=a.length;c<d;c++)o.push(n.getDependency("node",a[c]));const l=void 0===r.skin?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const d=c[0],u=c[1],h=c[2];null!==h&&d.traverse(function(f){f.isSkinnedMesh&&f.bind(h,Wce)});for(let f=0,m=u.length;f<m;f++)d.add(u[f]);return d})}_loadNodeShallow(e){const n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let d;if(d=!0===s.isBone?new Kd:c.length>1?new xs:1===c.length?c[0]:new pi,d!==c[0])for(let u=0,h=c.length;u<h;u++)d.add(c[u]);if(s.name&&(d.userData.name=s.name,d.name=o),Cc(d,s),s.extensions&&kb(n,d,s),void 0!==s.matrix){const u=new We;u.fromArray(s.matrix),d.applyMatrix4(u)}else void 0!==s.translation&&d.position.fromArray(s.translation),void 0!==s.rotation&&d.quaternion.fromArray(s.rotation),void 0!==s.scale&&d.scale.fromArray(s.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,s=new xs;n.name&&(s.name=r.createUniqueName(n.name)),Cc(s,n),n.extensions&&kb(t,s,n);const o=n.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let d=0,u=l.length;d<u;d++)s.add(l[d]);return r.associations=(d=>{const u=new Map;for(const[h,f]of r.associations)(h instanceof Un||h instanceof An)&&u.set(h,f);return d.traverse(h=>{const f=r.associations.get(h);null!=f&&u.set(h,f)}),u})(s),s})}}function M5(i,e,t){const n=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in n){const a=HR[o]||o.toLowerCase();a in i.attributes||r.push(s(n[o],a))}if(void 0!==e.indices&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(a){i.setIndex(a)});r.push(o)}return Cc(i,e),function Yce(i,e,t){const n=e.attributes,r=new Ks;if(void 0===n.POSITION)return;{const a=t.json.accessors[n.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new R(l[0],l[1],l[2]),new R(c[0],c[1],c[2])),a.normalized){const d=WR(vp[a.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}const s=e.targets;if(void 0!==s){const a=new R,l=new R;for(let c=0,d=s.length;c<d;c++){const u=s[c];if(void 0!==u.POSITION){const h=t.json.accessors[u.POSITION],f=h.min,m=h.max;if(void 0!==f&&void 0!==m){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(m[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(m[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(m[2]))),h.normalized){const g=WR(vp[h.componentType]);l.multiplyScalar(g)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}i.boundingBox=r;const o=new wo;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}(i,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function zce(i,e,t){let n=!1,r=!1,s=!1;for(let c=0,d=e.length;c<d;c++){const u=e[c];if(void 0!==u.POSITION&&(n=!0),void 0!==u.NORMAL&&(r=!0),void 0!==u.COLOR_0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],a=[],l=[];for(let c=0,d=e.length;c<d;c++){const u=e[c];if(n){const h=void 0!==u.POSITION?t.getDependency("accessor",u.POSITION):i.attributes.position;o.push(h)}if(r){const h=void 0!==u.NORMAL?t.getDependency("accessor",u.NORMAL):i.attributes.normal;a.push(h)}if(s){const h=void 0!==u.COLOR_0?t.getDependency("accessor",u.COLOR_0):i.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[1],h=c[2];return n&&(i.morphAttributes.position=c[0]),r&&(i.morphAttributes.normal=u),s&&(i.morphAttributes.color=h),i.morphTargetsRelative=!0,i})}(i,e.targets,t):i})}class E5{setCrossOrigin(e){this.crossOrigin=e}setWithCredentials(e){this.withCredentials=e}createLoaderInstance(){const e=new this.clazz;return this.crossOrigin&&e.setCrossOrigin(this.crossOrigin),void 0!==this.withCredentials&&e.setWithCredentials(this.withCredentials),e}}class Ua extends E5{load(...e){return this.createLoaderInstance().loadAsync(...e)}}Ua.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Ua)))(t||Ua)}}(),Ua.\u0275prov=Ge({token:Ua,factory:Ua.\u0275fac});class Px{constructor(){this.animationLoop=Ut(la)}transform(...e){return this.service.load(...e).then(t=>(this.animationLoop.requestAnimationFrame(),t))}}class bu{set url(e){this._url=e,this.load()}get url(){return this._url}get onLoaded(){return this.onLoaded$||(this.onLoaded$=new St),this.onLoaded$}get onProgress(){return this.onProgress$||(this.onProgress$=new St),this.onProgress$}constructor(e,t){this.host=e,this.zone=t,this.initialized=!1,this.animationLoop=Ut(la),this.proxy=m5(),e.objRef=this.proxy}ngOnInit(){this.initialized=!0,this.load()}load(){var e=this;return is(function*(){if(!e.initialized)return;if(void 0===e._url)throw new Error("missing url");if(!e.proxy)return;const t=e._url,n=Tb(e.onProgress$)?s=>{e.zone.run(()=>{e.onProgress$?.next(s)})}:void 0,r=yield e.zone.runOutsideAngular(()=>e.service.load(t,n));e.animationLoop.requestAnimationFrame(),e.proxy.objRef=e.getRefFromResponse(r),e.host.objRef=e.proxy,e.onLoaded$&&void 0!==r&&e.zone.run(()=>e.onLoaded$?.next(r))})()}}bu.\u0275fac=function(e){Kg()},bu.\u0275dir=Oe({type:bu,inputs:{url:"url"},outputs:{onLoaded:"onLoaded",onProgress:"onProgress"}});const qR=new WeakMap;class Xce extends br{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const s=new vr(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{this.parse(o,t,r)},n,r)}parse(e,t,n){this.decodeDracoFile(e,t,null,null,Ys).catch(n)}decodeDracoFile(e,t,n,r,s=Vd){return this.decodeGeometry(e,{attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:s}).then(t)}decodeGeometry(e,t){const n=JSON.stringify(t);if(qR.has(e)){const l=qR.get(e);if(l.key===n)return l.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,a=this._getWorker(s,e.byteLength).then(l=>(r=l,new Promise((c,d)=>{r._callbacks[s]={resolve:c,reject:d},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),qR.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new Mt;e.index&&t.setIndex(new Ci(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],s=r.name,l=new Ci(r.array,r.itemSize);"color"===s&&this._assignVertexColorSpace(l,r.vertexColorSpace),t.setAttribute(s,l)}return t}_assignVertexColorSpace(e,t){if(t!==Ys)return;const n=new Be;for(let r=0,s=e.count;r<s;r++)n.fromBufferAttribute(e,r).convertSRGBToLinear(),e.setXYZ(r,n.r,n.g,n.b)}_loadLibrary(e,t){const n=new vr(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((r,s)=>{n.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const r=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const s=Zce.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}function Zce(){let i,e;function r(o,a,l,c,d,u){const h=u.num_components(),m=l.num_points()*h,g=m*d.BYTES_PER_ELEMENT,_=function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}(o,d),p=o._malloc(g);a.GetAttributeDataArrayForAllPoints(l,u,_,g,p);const v=new d(o.HEAPF32.buffer,p,m).slice();return o._free(p),{name:c,array:v,itemSize:h}}onmessage=function(o){const a=o.data;switch(a.type){case"init":i=a.decoderConfig,e=new Promise(function(d){i.onModuleLoaded=function(u){d({draco:u})},DracoDecoderModule(i)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(d=>{const u=d.draco,h=new u.Decoder;try{const f=function t(o,a,l,c){const d=c.attributeIDs,u=c.attributeTypes;let h,f;const m=a.GetEncodedGeometryType(l);if(m===o.TRIANGULAR_MESH)h=new o.Mesh,f=a.DecodeArrayToMesh(l,l.byteLength,h);else{if(m!==o.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");h=new o.PointCloud,f=a.DecodeArrayToPointCloud(l,l.byteLength,h)}if(!f.ok()||0===h.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());const g={index:null,attributes:[]};for(const _ in d){const p=self[u[_]];let v,b;if(c.useUniqueIDs)b=d[_],v=a.GetAttributeByUniqueId(h,b);else{if(b=a.GetAttributeId(h,o[d[_]]),-1===b)continue;v=a.GetAttribute(h,b)}const y=r(o,a,h,_,p,v);"color"===_&&(y.vertexColorSpace=c.vertexColorSpace),g.attributes.push(y)}return m===o.TRIANGULAR_MESH&&(g.index=function n(o,a,l){const d=3*l.num_faces(),u=4*d,h=o._malloc(u);a.GetTrianglesUInt32Array(l,u,h);const f=new Uint32Array(o.HEAPF32.buffer,h,d).slice();return o._free(h),{array:f,itemSize:1}}(o,a,h)),o.destroy(h),g}(u,h,new Int8Array(l),c),m=f.attributes.map(g=>g.array.buffer);f.index&&m.push(f.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:f},m)}catch(f){console.error(f),self.postMessage({type:"error",id:a.id,error:f.message})}finally{u.destroy(h)}})}}}class Po extends E5{load(...e){return this.createLoaderInstance().load(...e)}}class da{transform(...e){return this.service.load(...e)}}class Ts{set url(e){this._url=e,this.load()}get url(){return this._url}get onLoaded(){return this.onLoaded$||(this.onLoaded$=new St),this.onLoaded$}get onProgress(){return this.onProgress$||(this.onProgress$=new St),this.onProgress$}constructor(e,t){this.host=e,this.zone=t,this.initialized=!1}ngOnInit(){this.initialized=!0,this.load()}load(){var e=this;return is(function*(){if(!e.initialized)return;if(void 0===e._url)throw new Error("missing url");const t=e._url,n=Tb(e.onProgress$)?s=>{e.onProgress$?.next(s)}:void 0,r=Tb(e.onLoaded$)?(...s)=>{e.onLoaded$?.next(s[0])}:void 0;e.host.objRef=e.zone.runOutsideAngular(()=>e.service.load(t,n,r))})()}}Ts.\u0275fac=function(e){Kg()},Ts.\u0275dir=Oe({type:Ts,inputs:{url:"url"},outputs:{onLoaded:"onLoaded",onProgress:"onProgress"}});class Pl extends Po{constructor(){super(...arguments),this.clazz=Xce,this.decoderPath="",this.reuseInstance=!0}setDecoderPath(e){this.decoderPath=e}setDecoderConfig(e){this.decoderConfig=e}setWorkerLimit(e){this.workerLimit=e}setReuseInstance(e){this.reuseInstance=e}createLoaderInstance(){if(this.reuseInstance&&this.instance)return this.instance;const e=super.createLoaderInstance();return e.setDecoderPath(this.decoderPath),this.decoderConfig&&e.setDecoderConfig(this.decoderConfig),this.workerLimit&&e.setWorkerLimit(this.workerLimit),this.reuseInstance&&(this.instance=e),e}}Pl.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Pl)))(t||Pl)}}(),Pl.\u0275prov=Ge({token:Pl,factory:Pl.\u0275fac,providedIn:"root"});class vu extends Ua{constructor(e){super(),this.dracoLoaderService=e,this.clazz=_ce}createLoaderInstance(){const e=super.createLoaderInstance();return e.setDRACOLoader(this.dracoLoaderService.createLoaderInstance()),e}}vu.\u0275fac=function(e){return new(e||vu)(xe(Pl))},vu.\u0275prov=Ge({token:vu,factory:vu.\u0275fac,providedIn:"root"});class kx extends Px{constructor(e){super(),this.service=e}}kx.\u0275fac=function(e){return new(e||kx)(P(vu,16))},kx.\u0275pipe=gi({name:"loadGLTF",type:kx,pure:!0});class ko extends bu{constructor(e,t,n){super(e,t),this.host=e,this.zone=t,this.service=n}getRefFromResponse(e){return e.scene}}ko.\u0275fac=function(e){return new(e||ko)(P(Ke,1),P(pt),P(vu))},ko.\u0275dir=Oe({type:ko,selectors:[["","loadGLTF",""]],features:[W]});class Au{constructor(e,t){this.engineService=e,this.animationLoopService=t}get beforeRender(){return this.engineService.beforeRender$}get onResize(){return this.engineService.resize$}set renderOnDemand(e){e?this.animationLoopService.stop():this.animationLoopService.start()}get renderOnDemand(){return!this.animationLoopService.isActive()}}Au.\u0275fac=function(e){return new(e||Au)(P(Ro),P(la))},Au.\u0275dir=Oe({type:Au,selectors:[["","beforeRender",""],["","onResize",""],["","renderOnDemand",""]],inputs:{renderOnDemand:"renderOnDemand"},outputs:{beforeRender:"beforeRender",onResize:"onResize"}});class Lb{constructor(){this.assetPath=ca+"RobotExpressive.glb",this.states=["Idle","Walking","Running","Dance","Death","Sitting","Standing"],this.emotes=["Jump","Yes","No","Wave","Punch","ThumbsUp"],this.actions={}}onInit(e){this.animationMixer=new G4(e.scene),e.scene.traverse(t=>{t.isMesh&&(t.castShadow=!0,t.receiveShadow=!0)});for(const t of e.animations){const n=this.animationMixer.clipAction(t);this.actions[t.name]=n,(this.emotes.indexOf(t.name)>=0||this.states.indexOf(t.name)>=4)&&(n.clampWhenFinished=!0,n.loop=uT)}this.activeAction=this.actions.Walking,this.activeAction.play()}beforeRender(e){this.animationMixer&&this.animationMixer.update(e.delta)}fadeToAction(e,t){this.previousAction=this.activeAction,this.activeAction=this.actions[e],this.previousAction&&this.previousAction!==this.activeAction&&this.previousAction.fadeOut(t),this.activeAction.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(t).play()}}Lb.\u0275fac=function(e){return new(e||Lb)},Lb.\u0275cmp=K({type:Lb,selectors:[["app-robot"]],decls:1,vars:2,consts:[["loadGLTF","",3,"url","castShadow","onLoaded","beforeRender"]],template:function(e,t){1&e&&(ye(0,"th-mesh",0),xt("onLoaded",function(r){return t.onInit(r)})("beforeRender",function(r){return t.beforeRender(r)}),ke()),2&e&&Z("url",t.assetPath)("castShadow",!0)},dependencies:[Hn,ko,Au],encapsulation:2,changeDetection:0});class Ap{transform(e){return new lb(...e)}}Ap.\u0275fac=function(e){return new(e||Ap)},Ap.\u0275pipe=gi({name:"fog",type:Ap,pure:!0});const Kce=["gridHelper"],$ce=function(i){return{outputEncoding:i}},Jce=function(){return["#e0e0e0"]},ede=function(){return["#e0e0e0",20,100]},tde=function(){return[45,2,.25,100]},ide=function(i){return[i,5,10]},nde=function(){return[0,2,0]},rde=function(){return["#ffffff","#444444"]},sde=function(){return[0,20,0]},ode=function(){return["#ffffff"]},ade=function(){return[0,20,10]},lde=function(i){return[i,0,0]},cde=function(){return[2e3,2e3]},dde=function(){return{color:"#999999",depthWrite:!1}},ude=function(){return[200,40,"#000000","#000000"]};class Bb{constructor(){this.Math=Math,this.outputEncoding=ci}ngAfterViewInit(){const e=this.gridHelper?.objRef?.material;e&&(e.opacity=.2,e.transparent=!0)}onBeforeRender(){}}Bb.\u0275fac=function(e){return new(e||Bb)},Bb.\u0275cmp=K({type:Bb,selectors:[["app-animation-example"]],viewQuery:function(e,t){if(1&e&&ki(Kce,7),2&e){let n;kt(n=Lt())&&(t.gridHelper=n.first)}},decls:12,vars:38,consts:[[3,"rendererParameters","thStats","shadow","onRender"],[3,"background","fog"],[3,"args","position","lookAt"],[3,"args","position"],[3,"args","position","castShadow"],[3,"rotation","receiveShadow"],[3,"args"],[3,"args","receiveShadow"],["gridHelper",""]],template:function(e,t){1&e&&(ye(0,"th-canvas",0),xt("onRender",function(){return t.onBeforeRender()}),ye(1,"th-scene",1),hr(2,"fog"),Ye(3,"th-perspectiveCamera",2)(4,"th-hemisphereLight",3)(5,"th-directionalLight",4),ye(6,"th-mesh",5),Ye(7,"th-planeGeometry",6)(8,"th-meshPhongMaterial",6),ke(),Ye(9,"th-gridHelper",7,8)(11,"app-robot"),ke()()),2&e&&(Z("rendererParameters",li(21,$ce,t.outputEncoding))("thStats",!0)("shadow",!0),se(1),Z("background",Le(23,Jce))("fog",wr(2,19,Le(24,ede))),se(2),Z("args",Le(25,tde))("position",li(26,ide,-5))("lookAt",Le(28,nde)),se(1),Z("args",Le(29,rde))("position",Le(30,sde)),se(1),Z("args",Le(31,ode))("position",Le(32,ade))("castShadow",!0),se(1),Z("rotation",li(33,lde,-.5*t.Math.PI))("receiveShadow",!0),se(1),Z("args",Le(35,cde)),se(1),Z("args",Le(36,dde)),se(1),Z("args",Le(37,ude))("receiveShadow",!0))},dependencies:[an,io,Dl,Es,Hn,gn,ro,aa,Gi,Io,Lb,Ap],encapsulation:2,changeDetection:0});class Ar extends no{getType(){return yx}get isAmbientLight(){return this._objRef?.isAmbientLight}get type(){return this._objRef?.type}}Ar.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Ar)))(t||Ar)}}(),Ar.\u0275cmp=K({type:Ar,selectors:[["th-ambientLight"]],features:[oe([{provide:Ke,useExisting:le(()=>Ar)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Va extends Ei{getType(){return Xn}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set color(e){this._objRef&&(this._objRef.color=Qe(this._objRef.color,e))}get color(){return this._objRef?.color}set map(e){this._objRef&&(this._objRef.map=e)}get map(){return this._objRef?.map}set lightMap(e){this._objRef&&(this._objRef.lightMap=e)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(e){this._objRef&&(this._objRef.lightMapIntensity=e)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set aoMap(e){this._objRef&&(this._objRef.aoMap=e)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(e){this._objRef&&(this._objRef.aoMapIntensity=e)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set specularMap(e){this._objRef&&(this._objRef.specularMap=e)}get specularMap(){return this._objRef?.specularMap}set alphaMap(e){this._objRef&&(this._objRef.alphaMap=e)}get alphaMap(){return this._objRef?.alphaMap}set envMap(e){this._objRef&&(this._objRef.envMap=e)}get envMap(){return this._objRef?.envMap}set combine(e){this._objRef&&(this._objRef.combine=e)}get combine(){return this._objRef?.combine}set reflectivity(e){this._objRef&&(this._objRef.reflectivity=e)}get reflectivity(){return this._objRef?.reflectivity}set refractionRatio(e){this._objRef&&(this._objRef.refractionRatio=e)}get refractionRatio(){return this._objRef?.refractionRatio}set wireframe(e){this._objRef&&(this._objRef.wireframe=e)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(e){this._objRef&&(this._objRef.wireframeLinewidth=e)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(e){this._objRef&&(this._objRef.wireframeLinecap=e)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(e){this._objRef&&(this._objRef.wireframeLinejoin=e)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}}Va.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Va)))(t||Va)}}(),Va.\u0275cmp=K({type:Va,selectors:[["th-meshBasicMaterial"]],inputs:{type:"type",color:"color",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",specularMap:"specularMap",alphaMap:"alphaMap",envMap:"envMap",combine:"combine",reflectivity:"reflectivity",refractionRatio:"refractionRatio",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",fog:"fog"},features:[oe([{provide:Ei,useExisting:le(()=>Va)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class za extends Tt{getType(){return Ji}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}}za.\u0275fac=function(){let i;return function(t){return(i||(i=ce(za)))(t||za)}}(),za.\u0275cmp=K({type:za,selectors:[["th-boxGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>za)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const mde=function(){return{color:"purple"}},gde=function(){return[75,2,.1,1e3]},_de=function(){return[1,1,5]};class Fb{}Fb.\u0275fac=function(e){return new(e||Fb)},Fb.\u0275cmp=K({type:Fb,selectors:[["app-basic-example"]],decls:7,vars:6,consts:[[3,"args"],[3,"args","position"]],template:function(e,t){1&e&&(ye(0,"th-canvas")(1,"th-scene")(2,"th-mesh"),Ye(3,"th-boxGeometry")(4,"th-meshBasicMaterial",0),ke(),Ye(5,"th-ambientLight")(6,"th-perspectiveCamera",1),ke()()),2&e&&(se(4),Z("args",Le(3,mde)),se(2),Z("args",Le(4,gde))("position",Le(5,_de)))},dependencies:[an,Ar,Hn,gn,Va,za,Gi],encapsulation:2,changeDetection:0});const S5={type:"change"},YR={type:"start"},T5={type:"end"};class R5 extends ns{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new R,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Qs.ROTATE,MIDDLE:Qs.DOLLY,RIGHT:Qs.PAN},this.touches={ONE:vl.ROTATE,TWO:vl.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(X){X.addEventListener("keydown",ut),this._domElementKeyEvents=X},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ut),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(S5),n.update(),s=r.NONE},this.update=function(){const X=new R,Te=(new wi).setFromUnitVectors(e.up,new R(0,1,0)),Ae=Te.clone().invert(),Je=new R,ct=new wi,ht=2*Math.PI;return function(){const tt=n.object.position;X.copy(tt).sub(n.target),X.applyQuaternion(Te),a.setFromVector3(X),n.autoRotate&&s===r.NONE&&C(function E(){return 2*Math.PI/60/60*n.autoRotateSpeed}()),n.enableDamping?(a.theta+=l.theta*n.dampingFactor,a.phi+=l.phi*n.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let Bt=n.minAzimuthAngle,Rt=n.maxAzimuthAngle;return isFinite(Bt)&&isFinite(Rt)&&(Bt<-Math.PI?Bt+=ht:Bt>Math.PI&&(Bt-=ht),Rt<-Math.PI?Rt+=ht:Rt>Math.PI&&(Rt-=ht),a.theta=Bt<=Rt?Math.max(Bt,Math.min(Rt,a.theta)):a.theta>(Bt+Rt)/2?Math.max(Bt,a.theta):Math.min(Rt,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=c,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),!0===n.enableDamping?n.target.addScaledVector(d,n.dampingFactor):n.target.add(d),X.setFromSpherical(a),X.applyQuaternion(Ae),tt.copy(n.target).add(X),n.object.lookAt(n.target),!0===n.enableDamping?(l.theta*=1-n.dampingFactor,l.phi*=1-n.dampingFactor,d.multiplyScalar(1-n.dampingFactor)):(l.set(0,0,0),d.set(0,0,0)),c=1,!!(u||Je.distanceToSquared(n.object.position)>o||8*(1-ct.dot(n.object.quaternion))>o)&&(n.dispatchEvent(S5),Je.copy(n.object.position),ct.copy(n.object.quaternion),u=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",F),n.domElement.removeEventListener("pointerdown",Ee),n.domElement.removeEventListener("pointercancel",qe),n.domElement.removeEventListener("wheel",lt),n.domElement.removeEventListener("pointermove",it),n.domElement.removeEventListener("pointerup",qe),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",ut),n._domElementKeyEvents=null)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const o=1e-6,a=new Cx,l=new Cx;let c=1;const d=new R;let u=!1;const h=new pe,f=new pe,m=new pe,g=new pe,_=new pe,p=new pe,v=new pe,b=new pe,y=new pe,x=[],w={};function S(){return Math.pow(.95,n.zoomSpeed)}function C(X){l.theta-=X}function T(X){l.phi-=X}const k=function(){const X=new R;return function(Ae,Je){X.setFromMatrixColumn(Je,0),X.multiplyScalar(-Ae),d.add(X)}}(),U=function(){const X=new R;return function(Ae,Je){!0===n.screenSpacePanning?X.setFromMatrixColumn(Je,1):(X.setFromMatrixColumn(Je,0),X.crossVectors(n.object.up,X)),X.multiplyScalar(Ae),d.add(X)}}(),B=function(){const X=new R;return function(Ae,Je){const ct=n.domElement;if(n.object.isPerspectiveCamera){X.copy(n.object.position).sub(n.target);let $e=X.length();$e*=Math.tan(n.object.fov/2*Math.PI/180),k(2*Ae*$e/ct.clientHeight,n.object.matrix),U(2*Je*$e/ct.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(k(Ae*(n.object.right-n.object.left)/n.object.zoom/ct.clientWidth,n.object.matrix),U(Je*(n.object.top-n.object.bottom)/n.object.zoom/ct.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function j(X){n.object.isPerspectiveCamera?c/=X:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*X)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function H(X){n.object.isPerspectiveCamera?c*=X:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/X)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function L(X){h.set(X.clientX,X.clientY)}function O(X){g.set(X.clientX,X.clientY)}function q(){1===x.length?h.set(x[0].pageX,x[0].pageY):h.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function te(){1===x.length?g.set(x[0].pageX,x[0].pageY):g.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function $(){const X=x[0].pageX-x[1].pageX,Te=x[0].pageY-x[1].pageY,Ae=Math.sqrt(X*X+Te*Te);v.set(0,Ae)}function Me(X){if(1==x.length)f.set(X.pageX,X.pageY);else{const Ae=et(X);f.set(.5*(X.pageX+Ae.x),.5*(X.pageY+Ae.y))}m.subVectors(f,h).multiplyScalar(n.rotateSpeed);const Te=n.domElement;C(2*Math.PI*m.x/Te.clientHeight),T(2*Math.PI*m.y/Te.clientHeight),h.copy(f)}function me(X){if(1===x.length)_.set(X.pageX,X.pageY);else{const Te=et(X);_.set(.5*(X.pageX+Te.x),.5*(X.pageY+Te.y))}p.subVectors(_,g).multiplyScalar(n.panSpeed),B(p.x,p.y),g.copy(_)}function He(X){const Te=et(X),Ae=X.pageX-Te.x,Je=X.pageY-Te.y,ct=Math.sqrt(Ae*Ae+Je*Je);b.set(0,ct),y.set(0,Math.pow(b.y/v.y,n.zoomSpeed)),j(y.y),v.copy(b)}function Ee(X){!1!==n.enabled&&(0===x.length&&(n.domElement.setPointerCapture(X.pointerId),n.domElement.addEventListener("pointermove",it),n.domElement.addEventListener("pointerup",qe)),function ve(X){x.push(X)}(X),"touch"===X.pointerType?function yt(X){switch(Ne(X),x.length){case 1:switch(n.touches.ONE){case vl.ROTATE:if(!1===n.enableRotate)return;q(),s=r.TOUCH_ROTATE;break;case vl.PAN:if(!1===n.enablePan)return;te(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(n.touches.TWO){case vl.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;(function I(){n.enableZoom&&$(),n.enablePan&&te()})(),s=r.TOUCH_DOLLY_PAN;break;case vl.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;(function ue(){n.enableZoom&&$(),n.enableRotate&&q()})(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(YR)}(X):function bt(X){let Te;switch(X.button){case 0:Te=n.mouseButtons.LEFT;break;case 1:Te=n.mouseButtons.MIDDLE;break;case 2:Te=n.mouseButtons.RIGHT;break;default:Te=-1}switch(Te){case Qs.DOLLY:if(!1===n.enableZoom)return;(function V(X){v.set(X.clientX,X.clientY)})(X),s=r.DOLLY;break;case Qs.ROTATE:if(X.ctrlKey||X.metaKey||X.shiftKey){if(!1===n.enablePan)return;O(X),s=r.PAN}else{if(!1===n.enableRotate)return;L(X),s=r.ROTATE}break;case Qs.PAN:if(X.ctrlKey||X.metaKey||X.shiftKey){if(!1===n.enableRotate)return;L(X),s=r.ROTATE}else{if(!1===n.enablePan)return;O(X),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(YR)}(X))}function it(X){!1!==n.enabled&&("touch"===X.pointerType?function N(X){switch(Ne(X),s){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;Me(X),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;me(X),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;(function Ce(X){n.enableZoom&&He(X),n.enablePan&&me(X)})(X),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;(function we(X){n.enableZoom&&He(X),n.enableRotate&&Me(X)})(X),n.update();break;default:s=r.NONE}}(X):function At(X){switch(s){case r.ROTATE:if(!1===n.enableRotate)return;!function Q(X){f.set(X.clientX,X.clientY),m.subVectors(f,h).multiplyScalar(n.rotateSpeed);const Te=n.domElement;C(2*Math.PI*m.x/Te.clientHeight),T(2*Math.PI*m.y/Te.clientHeight),h.copy(f),n.update()}(X);break;case r.DOLLY:if(!1===n.enableZoom)return;!function re(X){b.set(X.clientX,X.clientY),y.subVectors(b,v),y.y>0?j(S()):y.y<0&&H(S()),v.copy(b),n.update()}(X);break;case r.PAN:if(!1===n.enablePan)return;!function _e(X){_.set(X.clientX,X.clientY),p.subVectors(_,g).multiplyScalar(n.panSpeed),B(p.x,p.y),g.copy(_),n.update()}(X)}}(X))}function qe(X){(function De(X){delete w[X.pointerId];for(let Te=0;Te<x.length;Te++)if(x[Te].pointerId==X.pointerId)return void x.splice(Te,1)})(X),0===x.length&&(n.domElement.releasePointerCapture(X.pointerId),n.domElement.removeEventListener("pointermove",it),n.domElement.removeEventListener("pointerup",qe)),n.dispatchEvent(T5),s=r.NONE}function lt(X){!1===n.enabled||!1===n.enableZoom||s!==r.NONE||(X.preventDefault(),n.dispatchEvent(YR),function de(X){X.deltaY<0?H(S()):X.deltaY>0&&j(S()),n.update()}(X),n.dispatchEvent(T5))}function ut(X){!1===n.enabled||!1===n.enablePan||function Y(X){let Te=!1;switch(X.code){case n.keys.UP:X.ctrlKey||X.metaKey||X.shiftKey?T(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):B(0,n.keyPanSpeed),Te=!0;break;case n.keys.BOTTOM:X.ctrlKey||X.metaKey||X.shiftKey?T(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):B(0,-n.keyPanSpeed),Te=!0;break;case n.keys.LEFT:X.ctrlKey||X.metaKey||X.shiftKey?C(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):B(n.keyPanSpeed,0),Te=!0;break;case n.keys.RIGHT:X.ctrlKey||X.metaKey||X.shiftKey?C(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):B(-n.keyPanSpeed,0),Te=!0}Te&&(X.preventDefault(),n.update())}(X)}function F(X){!1!==n.enabled&&X.preventDefault()}function Ne(X){let Te=w[X.pointerId];void 0===Te&&(Te=new pe,w[X.pointerId]=Te),Te.set(X.pageX,X.pageY)}function et(X){return w[(X.pointerId===x[0].pointerId?x[1]:x[0]).pointerId]}n.domElement.addEventListener("contextmenu",F),n.domElement.addEventListener("pointerdown",Ee),n.domElement.addEventListener("pointercancel",qe),n.domElement.addEventListener("wheel",lt,{passive:!1}),this.update()}}class Qn extends To{constructor(e,t){super(),this._camera=e,this.canvas=t,this.renderLoop=Ut(la)}createThreeInstance(e){e||(e=[this._camera.objRef,this.canvas?.rendererCanvas?.nativeElement]);const t=super.createThreeInstance(e);return this.patchDispatchEvent(t),this.subscribeControlUpdater(t),t}patchDispatchEvent(e){if(e.dispatchEvent){const t=this.origDispatchEventMethod=e.dispatchEvent;e.dispatchEvent=n=>{t.call(e,n),this.renderLoop.requestAnimationFrame()}}}ngOnDestroy(){super.ngOnDestroy(),this.unpatchDispatchEvent(),this.unsubscribeControlUpdater()}unpatchDispatchEvent(){this.origDispatchEventMethod&&this._objRef&&(this._objRef.dispatchEvent=this.origDispatchEventMethod)}subscribeControlUpdater(e){void 0!==e.update&&(this.beforeRenderSubscription=this.renderLoop.beforeRender$.subscribe(t=>{e.update(t.delta)}))}unsubscribeControlUpdater(){this.beforeRenderSubscription&&this.beforeRenderSubscription.unsubscribe()}}Qn.\u0275fac=function(e){return new(e||Qn)(P(Ke),P(Gi))},Qn.\u0275cmp=K({type:Qn,selectors:[["th-abs-control"]],features:[W],decls:0,vars:0,template:function(e,t){},encapsulation:2});class ls extends Qn{getType(){return R5}set object(e){this._objRef&&(this._objRef.object=e)}get object(){return this._objRef?.object}set domElement(e){this._objRef&&(this._objRef.domElement=e)}get domElement(){return this._objRef?.domElement}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set target(e){this._objRef&&(this._objRef.target=Qe(this._objRef.target,e))}get target(){return this._objRef?.target}set center(e){this._objRef&&(this._objRef.center=Qe(this._objRef.center,e))}get center(){return this._objRef?.center}set minDistance(e){this._objRef&&(this._objRef.minDistance=e)}get minDistance(){return this._objRef?.minDistance}set maxDistance(e){this._objRef&&(this._objRef.maxDistance=e)}get maxDistance(){return this._objRef?.maxDistance}set minZoom(e){this._objRef&&(this._objRef.minZoom=e)}get minZoom(){return this._objRef?.minZoom}set maxZoom(e){this._objRef&&(this._objRef.maxZoom=e)}get maxZoom(){return this._objRef?.maxZoom}set minPolarAngle(e){this._objRef&&(this._objRef.minPolarAngle=e)}get minPolarAngle(){return this._objRef?.minPolarAngle}set maxPolarAngle(e){this._objRef&&(this._objRef.maxPolarAngle=e)}get maxPolarAngle(){return this._objRef?.maxPolarAngle}set minAzimuthAngle(e){this._objRef&&(this._objRef.minAzimuthAngle=e)}get minAzimuthAngle(){return this._objRef?.minAzimuthAngle}set maxAzimuthAngle(e){this._objRef&&(this._objRef.maxAzimuthAngle=e)}get maxAzimuthAngle(){return this._objRef?.maxAzimuthAngle}set enableDamping(e){this._objRef&&(this._objRef.enableDamping=e)}get enableDamping(){return this._objRef?.enableDamping}set dampingFactor(e){this._objRef&&(this._objRef.dampingFactor=e)}get dampingFactor(){return this._objRef?.dampingFactor}set enableZoom(e){this._objRef&&(this._objRef.enableZoom=e)}get enableZoom(){return this._objRef?.enableZoom}set zoomSpeed(e){this._objRef&&(this._objRef.zoomSpeed=e)}get zoomSpeed(){return this._objRef?.zoomSpeed}set enableRotate(e){this._objRef&&(this._objRef.enableRotate=e)}get enableRotate(){return this._objRef?.enableRotate}set rotateSpeed(e){this._objRef&&(this._objRef.rotateSpeed=e)}get rotateSpeed(){return this._objRef?.rotateSpeed}set enablePan(e){this._objRef&&(this._objRef.enablePan=e)}get enablePan(){return this._objRef?.enablePan}set panSpeed(e){this._objRef&&(this._objRef.panSpeed=e)}get panSpeed(){return this._objRef?.panSpeed}set screenSpacePanning(e){this._objRef&&(this._objRef.screenSpacePanning=e)}get screenSpacePanning(){return this._objRef?.screenSpacePanning}set keyPanSpeed(e){this._objRef&&(this._objRef.keyPanSpeed=e)}get keyPanSpeed(){return this._objRef?.keyPanSpeed}set autoRotate(e){this._objRef&&(this._objRef.autoRotate=e)}get autoRotate(){return this._objRef?.autoRotate}set autoRotateSpeed(e){this._objRef&&(this._objRef.autoRotateSpeed=e)}get autoRotateSpeed(){return this._objRef?.autoRotateSpeed}set keys(e){this._objRef&&(this._objRef.keys=e)}get keys(){return this._objRef?.keys}set mouseButtons(e){this._objRef&&(this._objRef.mouseButtons=e)}get mouseButtons(){return this._objRef?.mouseButtons}set touches(e){this._objRef&&(this._objRef.touches=e)}get touches(){return this._objRef?.touches}set target0(e){this._objRef&&(this._objRef.target0=Qe(this._objRef.target0,e))}get target0(){return this._objRef?.target0}set position0(e){this._objRef&&(this._objRef.position0=Qe(this._objRef.position0,e))}get position0(){return this._objRef?.position0}set zoom0(e){this._objRef&&(this._objRef.zoom0=e)}get zoom0(){return this._objRef?.zoom0}}ls.\u0275fac=function(){let i;return function(t){return(i||(i=ce(ls)))(t||ls)}}(),ls.\u0275cmp=K({type:ls,selectors:[["th-orbitControls"]],inputs:{object:"object",domElement:"domElement",enabled:"enabled",target:"target",center:"center",minDistance:"minDistance",maxDistance:"maxDistance",minZoom:"minZoom",maxZoom:"maxZoom",minPolarAngle:"minPolarAngle",maxPolarAngle:"maxPolarAngle",minAzimuthAngle:"minAzimuthAngle",maxAzimuthAngle:"maxAzimuthAngle",enableDamping:"enableDamping",dampingFactor:"dampingFactor",enableZoom:"enableZoom",zoomSpeed:"zoomSpeed",enableRotate:"enableRotate",rotateSpeed:"rotateSpeed",enablePan:"enablePan",panSpeed:"panSpeed",screenSpacePanning:"screenSpacePanning",keyPanSpeed:"keyPanSpeed",autoRotate:"autoRotate",autoRotateSpeed:"autoRotateSpeed",keys:"keys",mouseButtons:"mouseButtons",touches:"touches",target0:"target0",position0:"position0",zoom0:"zoom0"},features:[oe([{provide:Qn,useExisting:le(()=>ls)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class ao extends no{getType(){return gp}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set intensity(e){this._objRef&&(this._objRef.intensity=e)}get intensity(){return this._objRef?.intensity}set distance(e){this._objRef&&(this._objRef.distance=e)}get distance(){return this._objRef?.distance}set castShadow(e){this._objRef&&(this._objRef.castShadow=e)}get castShadow(){return this._objRef?.castShadow}set decay(e){this._objRef&&(this._objRef.decay=e)}get decay(){return this._objRef?.decay}set shadow(e){this._objRef&&(this._objRef.shadow=e)}get shadow(){return this._objRef?.shadow}set power(e){this._objRef&&(this._objRef.power=e)}get power(){return this._objRef?.power}}ao.\u0275fac=function(){let i;return function(t){return(i||(i=ce(ao)))(t||ao)}}(),ao.\u0275cmp=K({type:ao,selectors:[["th-pointLight"]],inputs:{type:"type",intensity:"intensity",distance:"distance",castShadow:"castShadow",decay:"decay",shadow:"shadow",power:"power"},features:[oe([{provide:Ke,useExisting:le(()=>ao)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Ga{get onMouseEnter(){return this.mouseEnter||(this.mouseEnter=new St),this.mouseEnter}get onMouseExit(){return this.mouseExit||(this.mouseExit=new St),this.mouseExit}get onClick(){return this.click||(this.click=new St),this.click}get onPointerDown(){return this.pointerDown||(this.pointerDown=new St),this.pointerDown}get onPointerUp(){return this.pointerUp||(this.pointerUp=new St),this.pointerUp}constructor(e,t){this.host=e,this.raycasterService=t,this.emitOnMouseEnter=this.emitOnMouseEnter.bind(this),this.emitOnMouseExit=this.emitOnMouseExit.bind(this),this.emitOnClick=this.emitOnClick.bind(this)}ngAfterViewInit(){this.subscribeEvents()}subscribeEvents(){this.raycasterService.addEventTarget(this)}unSubscribeEvents(){this.raycasterService.removeEventTarget(this)}emitOnMouseExit(){this.mouseExit?.emit({component:this.host,type:so.mouseExit})}emitOnMouseEnter(e){this.mouseEnter?.emit(e)}emitOnClick(e){this.click?.emit(e)}emitOnPointerDown(e){this.pointerDown?.emit(e)}emitOnPointerUp(e){this.pointerUp?.emit(e)}ngOnDestroy(){this.unSubscribeEvents()}}Ga.\u0275fac=function(e){return new(e||Ga)(P(Ke,1),P(oo))},Ga.\u0275dir=Oe({type:Ga,selectors:[["","onClick",""],["","onMouseEnter",""],["","onMouseExit",""],["","onPointerDown",""],["","onPointerUp",""]],outputs:{onMouseEnter:"onMouseEnter",onMouseExit:"onMouseExit",onClick:"onClick",onPointerDown:"onPointerDown",onPointerUp:"onPointerUp"}});const Ade=function(){return[2,2,2]},yde=function(){return[1,1,1]},xde=function(){return[10,10]},I5=function(){return[10,10,10]},wde=function(){return[45,2,.1,100]},Cde=function(){return[0,0,0]};class Ob{constructor(){this.selected=!1,this.glbPath=`${ca}DamagedHelmet.glb`}}Ob.\u0275fac=function(e){return new(e||Ob)},Ob.\u0275cmp=K({type:Ob,selectors:[["app-controls-example"]],decls:8,vars:15,consts:[[3,"thStats"],["loadGLTF","",3,"url","scale","onClick"],[3,"args"],[3,"position"],[3,"args","position","lookAt"]],template:function(e,t){1&e&&(ye(0,"th-canvas",0)(1,"th-scene"),Ye(2,"th-ambientLight"),ye(3,"th-object3D",1),xt("onClick",function(){return t.selected=!t.selected}),ke(),Ye(4,"th-gridHelper",2)(5,"th-pointLight",3),ye(6,"th-perspectiveCamera",4),Ye(7,"th-orbitControls"),ke()()()),2&e&&(Z("thStats",!0),se(3),Z("url",t.glbPath)("scale",t.selected?Le(8,Ade):Le(9,yde)),se(1),Z("args",Le(10,xde)),se(1),Z("position",Le(11,I5)),se(1),Z("args",Le(12,wde))("position",Le(13,I5))("lookAt",Le(14,Cde)))},dependencies:[ls,an,Ke,io,ao,Ar,gn,Gi,ko,Ga,Io],encapsulation:2,changeDetection:0});const Mde=function(){return[0,1,0]},Ede=function(){return[10,10]},D5=function(){return[10,10,10]},Sde=function(){return[45,2,.1,100]},Tde=function(){return[0,0,0]};class Nb{constructor(e){this.cdref=e,this.modelScale=[1,1,1],this.rotation=[0,0,0],this.modelUrl1=`${ca}DamagedHelmet.glb`,this.modelUrl2=`${ca}BoomBox.glb`,this.modelUrl=this.toggleModel(),this.intervalHandle=window.setInterval(()=>this.toggleModel(),3e3)}toggleModel(){return this.modelUrl=this.modelUrl!==this.modelUrl1?this.modelUrl1:this.modelUrl2,this.cdref.markForCheck(),this.modelUrl}onLoaded(){this.modelScale=this.modelUrl!==this.modelUrl1?[100,100,100]:[1,1,1]}onRefChange(e){}onBeforeRender(){this.rotation=[0,this.rotation[1]+.01,0]}ngOnDestroy(){window.clearInterval(this.intervalHandle)}}Nb.\u0275fac=function(e){return new(e||Nb)(P(er))},Nb.\u0275cmp=K({type:Nb,selectors:[["app-dynamic-loader-example"]],decls:7,vars:15,consts:[[3,"onRender"],["loadGLTF","",3,"url","scale","rotation","position","onLoaded","objRef$"],[3,"args"],[3,"position"],[3,"args","position","lookAt"]],template:function(e,t){1&e&&(ye(0,"th-canvas",0),xt("onRender",function(){return t.onBeforeRender()}),ye(1,"th-scene"),Ye(2,"th-ambientLight"),ye(3,"th-object3D",1),xt("onLoaded",function(){return t.onLoaded()})("objRef$",function(r){return t.onRefChange(r)}),ke(),Ye(4,"th-gridHelper",2)(5,"th-pointLight",3)(6,"th-perspectiveCamera",4),ke()()),2&e&&(se(3),Z("url",t.modelUrl)("scale",t.modelScale)("rotation",t.rotation)("position",Le(9,Mde)),se(1),Z("args",Le(10,Ede)),se(1),Z("position",Le(11,D5)),se(1),Z("args",Le(12,Sde))("position",Le(13,D5))("lookAt",Le(14,Tde)))},dependencies:[an,Ke,io,ao,Ar,gn,Gi,ko],encapsulation:2});class jb{transform(e,t){return e.bind(t)}}function Rde(i,e){if(1&i&&(ye(0,"li"),Xi(1),ke()),2&i){const t=e.$implicit;se(1),eA(" ",t," ")}}jb.\u0275fac=function(e){return new(e||jb)},jb.\u0275pipe=gi({name:"bind",type:jb,pure:!0});const Ide=function(){return[10,10]},P5=function(){return[10,10,10]},Dde=function(){return[45,2,.1,100]},Pde=function(){return[0,0,0]},kde=function(i,e){return{change:i,end:e}};class Ub{constructor(e){this.cdref=e,this.id="CID",this.changes=[],this.rotation=[0,0,0],this.position=[0,1,0],this.assetPath=`${ca}DamagedHelmet.glb`,this.onOrbitControlEnd=()=>{this.pushToChangesArray(`${this.id}: orbit control end`)},window.setInterval(()=>{this.rotation=[0,this.rotation[1]+.05,0],this.cdref.markForCheck()},1500),window.setInterval(()=>{this.position=[0,(this.position[1]+1)%5,0],this.cdref.markForCheck()},3e3)}logUpdates(e){this.pushToChangesArray(Object.keys(e).toString())}onLoaded(){this.changes.push("Model loaded")}onOrbitControlChange(){this.pushToChangesArray(`${this.id}: orbit control change`)}pushToChangesArray(e){this.changes.length>=20&&this.changes.shift(),this.changes.push(e)}}Ub.\u0275fac=function(e){return new(e||Ub)(P(er))},Ub.\u0275cmp=K({type:Ub,selectors:[["app-events-example"]],decls:14,vars:21,consts:[["loadGLTF","",3,"url","rotation","position","onUpdate","onLoaded"],[3,"args"],[3,"position"],[3,"args","position","lookAt"],[3,"threeEvents"],[1,"change-list"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(ye(0,"th-canvas")(1,"th-scene"),Ye(2,"th-ambientLight"),ye(3,"th-object3D",0),xt("onUpdate",function(r){return t.logUpdates(r)})("onLoaded",function(){return t.onLoaded()}),ke(),Ye(4,"th-gridHelper",1)(5,"th-pointLight",2),ye(6,"th-perspectiveCamera",3),Ye(7,"th-orbitControls",4),hr(8,"bind"),ke()()(),ye(9,"div",5)(10,"h1"),Xi(11,"Updates"),ke(),ye(12,"ol"),Ft(13,Rde,2,1,"li",6),ke()()),2&e&&(se(3),Z("url",t.assetPath)("rotation",t.rotation)("position",t.position),se(1),Z("args",Le(13,Ide)),se(1),Z("position",Le(14,P5)),se(1),Z("args",Le(15,Dde))("position",Le(16,P5))("lookAt",Le(17,Pde)),se(1),Z("threeEvents",Ca(18,kde,function FF(i,e,t,n){const r=i+22,s=Ve(),o=vh(s,r);return h_(s,r)?PF(s,Kr(),e,o.transform,t,n,o):o.transform(t,n)}(8,10,t.onOrbitControlChange,t),t.onOrbitControlEnd)),se(6),Z("ngForOf",t.changes))},dependencies:[$l,ls,an,Ke,io,ao,Ar,gn,Gi,ko,jb],styles:[".change-list[_ngcontent-%COMP%]{padding:1em;box-shadow:0 4px 8px #0003;transition:.3s}[_nghost-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr)}"],changeDetection:0});const yp=JSON.parse('{"name":"ngx-three","version":"0.27.0","scripts":{"ng":"ng","start":"ng serve","build":"ng build ngx-three","build:prod":"ng build ngx-three --configuration production","build:demo":"ng build ngx-three-demo --configuration production --base-href /ngx-three/","test":"ng test","test-headless":"ng test --watch=false --browsers=ChromeHeadless","lint":"ng lint","e2e":"ng e2e","copy:docs":"(cp README.md dist/ngx-three/ || copy README.md dist\\\\ngx-three)","package":"ng build --configuration production ngx-three && npm run copy:docs","format":"prettier-eslint --write \\"{,!(node_modules|dist)/**/}*.{ts,tsx}\\""},"private":true,"dependencies":{"@angular/animations":"^15.1.1","@angular/cdk":"^15.1.1","@angular/common":"^15.1.1","@angular/compiler":"^15.1.1","@angular/core":"^15.1.1","@angular/forms":"^15.1.1","@angular/material":"^15.1.1","@angular/platform-browser":"^15.1.1","@angular/platform-browser-dynamic":"^15.1.1","@angular/router":"^15.1.1","@stackblitz/sdk":"^1.5.3","lil-gui":"^0.17.0","ngx-highlightjs":"^7.0.0","normalize.css":"^8.0.1","rxjs":"~7.5.5","simplex-noise":"^4.0.1","three":"~0.151.0","tslib":"^2.3.1","zone.js":"~0.11.4"},"devDependencies":{"@angular-devkit/build-angular":"^15.1.2","@angular-eslint/builder":"~15.2.0","@angular-eslint/eslint-plugin":"~15.2.0","@angular-eslint/eslint-plugin-template":"~15.2.0","@angular-eslint/schematics":"^15.2.0","@angular-eslint/template-parser":"~15.2.0","@angular/cli":"^15.1.2","@angular/compiler-cli":"^15.1.1","@types/jasmine":"~3.6.0","@types/node":"^18.0.0","@types/prettier":"^2.6.3","@types/three":"~0.151.0","@typescript-eslint/eslint-plugin":"^5.43.0","@typescript-eslint/parser":"^5.43.0","acorn":">=8","eslint":"^8.28.0","eslint-plugin-import":"^2.26.0","eslint-plugin-jsdoc":"^39.3.3","eslint-plugin-prefer-arrow":"^1.2.3","jasmine-core":"~3.6.0","jasmine-spec-reporter":"~5.0.0","karma":"~6.3.9","karma-chrome-launcher":"~3.1.0","karma-coverage":"~2.0.3","karma-jasmine":"~4.0.0","karma-jasmine-html-reporter":"^1.5.0","ng-packagr":"^15.1.1","prettier":"^2.7.1","prettier-eslint":"^15.0.1","prettier-eslint-cli":"^7.1.0","ts-node":"^10.8.1","typescript":"~4.9.4","utility-types":"^3.10.0"}}'),k5='\nimport "zone.js";';function XR(){return(XR=is(function*(i,e){const n=Vb(O5(i)),r=F5(n),s={"package.json":Fde(),"src/index.html":{content:B5(r)},"src/main.ts":{content:L5(n,e)},"src/polyfills.ts":{content:k5},"src/assets.ts":{content:`export const ASSET_PATH = '${_5}';`}};yield Bde(i,s),fetch("https://codesandbox.io/api/v1/sandboxes/define?json=1",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({files:s})}).then(o=>o.json()).then(o=>window.open(`https://codesandbox.io/s/${o.sandbox_id}`,"_blank"))})).apply(this,arguments)}function Bde(i,e){return Promise.all(i.map(t=>fetch(t).then(function(){var n=is(function*(r){e[`src/app/${Vb(t)}`]={content:yield r.text()}});return function(r){return n.apply(this,arguments)}}())))}function Fde(){return{content:{main:"src/main.ts",dependencies:{"ngx-three":"latest","@types/three":yp.devDependencies["@types/three"],...yp.dependencies},devDependencies:{...yp.devDependencies}}}}function Vb(i){return i.replace(/^.*[\\\/]/,"")}function L5(i,e){const t=function jde(i){if(i&&i.length>0)return i[0]}(e)??function Ode(i){return i.replace(".ts","").replace(/(?:^\w|[A-Z]|\b\w)/g,(e,t)=>e.toUpperCase()).replace(/[-.]/g,"")}(i),n=function Ude(i,e){return i&&i.length>0?i.join(","):e}(e,t);return`\n            import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n            import { NgModule } from '@angular/core';\n            import { BrowserModule } from '@angular/platform-browser';\n            import { NgxThreeModule } from 'ngx-three';\n            import { FormsModule } from '@angular/forms';\n            import { ${n} } from './app/${i.replace(".ts","")}';\n\n            @NgModule({\n                imports: [\n                    BrowserModule,\n                    NgxThreeModule,\n                    FormsModule\n                ],\n                providers: [],\n                declarations: [${n}],\n                bootstrap: [${t}]\n            })\n            export class AppModule {}\n\n            platformBrowserDynamic().bootstrapModule(AppModule)\n            .catch(err => console.log(err));\n            `}function B5(i){return`\n    <!DOCTYPE html>\n    <html lang="en">\n    <head>\n        <meta charset="utf-8" />\n        <title>NgxThreeDemo</title>\n        <base href="/" />\n        <meta name="viewport" content="width=device-width, initial-scale=1" />\n        <link rel="icon" type="image/x-icon" href="favicon.ico" />\n    </head>\n    <body>\n        <${i}></${i}>\n    </body>\n    </html>\n    `}function F5(i){return"app-"+i.replace(".component.ts","")}function O5(i){for(const e of i)if(e.endsWith(".ts"))return e;return""}function Nde(i){for(const e of i)if(e.endsWith(".html"))return e}function xp(i){return i&&i.origin?i.origin:"https://stackblitz.com"}function N5(){return Math.random().toString(36).substring(7)}function wp(i){var e=[];return i&&(i.forceEmbedLayout&&e.push("embed=1"),i.clickToLoad&&e.push("ctl=1"),"string"==typeof i.openFile&&e.push("file="+i.openFile),"preview"!==i.view&&"editor"!==i.view||e.push("view="+i.view),"light"!==i.theme&&"dark"!==i.theme||e.push("theme="+i.theme),i.hideExplorer&&e.push("hideExplorer=1"),i.hideNavigation&&e.push("hideNavigation=1"),i.hideDevTools&&e.push("hidedevtools=1"),"number"==typeof i.devToolsHeight&&i.devToolsHeight>=0&&i.devToolsHeight<=100&&e.push("devtoolsheight="+Math.round(i.devToolsHeight))),e.length?"?"+e.join("&"):""}function ZR(i,e,t){if(null===i.parentNode)throw new Error("Invalid Element");e.id=i.id,function zde(i,e){e&&(e.hasOwnProperty("height")&&(i.height=""+e.height),e.hasOwnProperty("width")&&(i.width=""+e.width)),i.height||(i.height="300"),i.width||i.setAttribute("style","width:100%;")}(e,t),i.parentNode.replaceChild(e,i)}function KR(i){if("string"==typeof i){var e=document.getElementById(i);if(null!==e)return e}else if(i instanceof HTMLElement)return i;throw new Error("Invalid Element")}function $R(i){return i&&!1===i.newWindow?"_self":"_blank"}var j5=function(i){var e=this;this.pending={},this.port=i,this.port.onmessage=function(t){if(t.data.payload.__reqid){var n=t.data.payload.__reqid,r=t.data.payload.__success;if(e.pending[n]){if(delete t.data.payload.__reqid,delete t.data.payload.__success,r){var s=0===Object.keys(t.data.payload).length&&t.data.payload.constructor===Object?null:t.data.payload;e.pending[n].resolve(s)}else e.pending[n].reject(t.data.payload.error?t.data.type+": "+t.data.payload.error:t.data.type);delete e.pending[n]}}}};j5.prototype.request=function(i){var e=this,t=N5();return new Promise(function(n,r){e.pending[t]={resolve:n,reject:r},i.payload.__reqid=t,e.port.postMessage(i)})};var Lx=function(i,e){var t=this;this.rdc=new j5(i),this.preview={},Object.defineProperty(this.preview,"origin",{value:e.previewOrigin,writable:!1}),this.editor={openFile:function(n){return t.rdc.request({type:"SDK_OPEN_FILE",payload:{path:n}})}}};Lx.prototype.applyFsDiff=function(i){return this.rdc.request({type:"SDK_APPLY_FS_DIFF",payload:i})},Lx.prototype.getFsSnapshot=function(){return this.rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})},Lx.prototype.getDependencies=function(){return this.rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})};var Bx=[],Gde=function(i){var e=this;this.id=N5(),this.element=i,this.pending=new Promise(function(t,n){var r=function(c){c.data.action&&"SDK_INIT_SUCCESS"===c.data.action&&c.data.id===e.id&&(e.vm=new Lx(c.ports[0],c.data.payload),t(e.vm),o())},s=function(){e.element.contentWindow&&e.element.contentWindow.postMessage({action:"SDK_INIT",id:e.id},"*")};function o(){window.clearInterval(l),window.removeEventListener("message",r)}window.addEventListener("message",r),s();var a=0,l=window.setInterval(function(){if(e.vm)o();else{if(a>=20)return o(),n("Timeout: Unable to establish a connection with the StackBlitz VM"),void Bx.forEach(function(c,d){c.id===e.id&&Bx.splice(d,1)});a++,s()}},500)}),Bx.push(this)},U5=["typescript","create-react-app","angular-cli","javascript","polymer","vue"];function yu(i,e){var t=document.createElement("input");return t.type="hidden",t.name=i,t.value=e,t}function V5(i){-1===U5.indexOf(i.template)&&console.warn("Unsupported project template, must be one of: "+U5.join(", "));var e=document.createElement("form");return e.method="POST",e.setAttribute("style","display:none;"),e.appendChild(yu("project[title]",i.title)),e.appendChild(yu("project[description]",i.description)),e.appendChild(yu("project[template]",i.template)),i.tags&&i.tags.forEach(function(t){e.appendChild(yu("project[tags][]",t))}),i.dependencies&&e.appendChild(yu("project[dependencies]",JSON.stringify(i.dependencies))),i.settings&&e.appendChild(yu("project[settings]",JSON.stringify(i.settings))),Object.keys(i.files).forEach(function(t){e.appendChild(yu("project[files]["+t+"]",i.files[t]))}),e}var Fx={connect:function(i){if(!i||!i.contentWindow)return Promise.reject("Provided element is not an iframe.");var e=function(i){var e=i instanceof Element?"element":"id";return Bx.find(function(n){return n[e]===i})||null}(i);return e?e.pending:new Gde(i).pending},openGithubProject:function(i,e){window.open(xp(e)+"/github/"+i+wp(e),$R(e))},openProject:function(i,e){!function Wde(i,e){var t=V5(i);t.action=xp(e)+"/run"+wp(e),t.target=$R(e),document.body.appendChild(t),t.submit(),document.body.removeChild(t)}(i,e)},openProjectId:function(i,e){window.open(xp(e)+"/edit/"+i+wp(e),$R(e))},embedGithubProject:function(i,e,t){var n=KR(i),r=document.createElement("iframe");return r.src=xp(t)+"/github/"+e+wp(t),ZR(n,r,t),Fx.connect(r)},embedProject:function(i,e,t){var n=KR(i),r=function Qde(i,e){var t=V5(i);return t.action=xp(e)+"/run"+wp(e),t.id="sb","<html><head><title></title></head><body>"+t.outerHTML+"<script>document.getElementById('sb').submit();<\/script></body></html>"}(e,t),s=document.createElement("iframe");return ZR(n,s,t),s.contentDocument&&s.contentDocument.write(r),Fx.connect(s)},embedProjectId:function(i,e,t){var n=KR(i),r=document.createElement("iframe");return r.src=xp(t)+"/edit/"+e+wp(t),ZR(n,r,t),Fx.connect(r)}};const qde=Fx;function JR(){return(JR=is(function*(i,e){const t=O5(i),n=Nde(i),r=Vb(t),s=F5(r),o={template:"angular-cli",title:s,description:"ngx-three example "+s,files:{"src/index.html":B5(s),"src/main.ts":L5(r,e),"src/polyfills.ts":k5,"src/assets.ts":`export const ASSET_PATH = '${_5}';`},dependencies:{"ngx-three":"latest","@types/three":yp.devDependencies["@types/three"],...yp.dependencies},devDependencies:{...yp.devDependencies}};yield Xde(i,o.files);const a=n?{openFile:`src/app/${Vb(n)}`}:void 0;qde.openProject(o,a)})).apply(this,arguments)}function Xde(i,e){return Promise.all(i.map(t=>fetch(t).then(function(){var n=is(function*(r){const s=yield r.text();e[`src/app/${Vb(t)}`]=s});return function(r){return n.apply(this,arguments)}}())))}class Ox{constructor(){this.urls=[],this.fileNames=[]}setUrls(e){this.urls=e,this.fileNames=this.extractFileNames()}extractFileNames(){return this.urls.map(e=>e.split("/").pop()??"")}toStackblitz(e){e?.preventDefault(),function Yde(i,e){JR.apply(this,arguments)}(this.urls,this.declarations)}toCodeSandbox(e){e?.preventDefault(),function Lde(i,e){XR.apply(this,arguments)}(this.urls,this.declarations)}}let eI;try{eI=typeof Intl<"u"&&Intl.v8BreakIterator}catch{eI=!1}let zb,Nx,xu,tI,Wn=(()=>{class i{constructor(t){this._platformId=t,this.isBrowser=this._platformId?h3(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!eI)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(t){return new(t||i)(xe(m_))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Gb(i){return function Zde(){if(null==zb&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>zb=!0}))}finally{zb=zb||!1}return zb}()?i:!!i.capture}function G5(){if(null==xu){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return xu=!1,xu;if("scrollBehavior"in document.documentElement.style)xu=!0;else{const i=Element.prototype.scrollTo;xu=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return xu}function Hb(){if("object"!=typeof document||!document)return 0;if(null==Nx){const i=document.createElement("div"),e=i.style;i.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),n=t.style;n.width="2px",n.height="1px",i.appendChild(t),document.body.appendChild(i),Nx=0,0===i.scrollLeft&&(i.scrollLeft=1,Nx=0===i.scrollLeft?1:2),i.remove()}return Nx}function Mc(i){return i.composedPath?i.composedPath()[0]:i.target}function iI(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function jx(i,...e){return e.length?e.some(t=>i[t]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}class bue extends dn{constructor(e,t){super()}schedule(e,t=0){return this}}const Ux={setInterval(i,e,...t){const{delegate:n}=Ux;return n?.setInterval?n.setInterval(i,e,...t):setInterval(i,e,...t)},clearInterval(i){const{delegate:e}=Ux;return(e?.clearInterval||clearInterval)(i)},delegate:void 0};class nI extends bue{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return Ux.setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return t;Ux.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,n=!1;try{this.work(e)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:n}=t;this.work=this.state=this.scheduler=null,this.pending=!1,K0(n,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}class Qb{constructor(e,t=Qb.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,n){return new this.schedulerActionCtor(this,e).schedule(n,t)}}Qb.now=NR.now;class rI extends Qb{constructor(e,t=Qb.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}const sI=new rI(nI),vue=sI;function Vx(i,e=sI){return Mn((t,n)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,n.next(c)}};function l(){const c=o+i,d=e.now();if(d<c)return r=this.schedule(void 0,c-d),void n.add(r);a()}t.subscribe(un(n,c=>{s=c,o=e.now(),r||(r=e.schedule(l,i),n.add(r))},()=>{a(),n.complete()},void 0,()=>{s=r=null}))})}function oI(i){return On((e,t)=>i<=t)}function aI(i,e=Ql){return i=i??Aue,Mn((t,n)=>{let r,s=!0;t.subscribe(un(n,o=>{const a=e(o);(s||!i(r,a))&&(s=!1,r=a,n.next(o))}))})}function Aue(i,e){return i===e}function Hi(i){return null!=i&&"false"!=`${i}`}function cs(i,e=0){return function yue(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):e}function zx(i){return Array.isArray(i)?i:[i]}function rr(i){return null==i?"":"string"==typeof i?i:`${i}px`}function wu(i){return i instanceof zt?i.nativeElement:i}let q5=(()=>{class i{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),xue=(()=>{class i{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,n)=>this._cleanupObserver(n))}observe(t){const n=wu(t);return new Fi(r=>{const o=this._observeElement(n).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(n)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const n=new Ht,r=this._mutationObserverFactory.create(s=>n.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:n,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:n,stream:r}=this._observedElements.get(t);n&&n.disconnect(),r.complete(),this._observedElements.delete(t)}}}return i.\u0275fac=function(t){return new(t||i)(xe(q5))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),lI=(()=>{class i{get disabled(){return this._disabled}set disabled(t){this._disabled=Hi(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=cs(t),this._subscribe()}constructor(t,n,r){this._contentObserver=t,this._elementRef=n,this._ngZone=r,this.event=new St,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(Vx(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(P(xue),P(zt),P(pt))},i.\u0275dir=Oe({type:i,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),i})(),Gx=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({providers:[q5]}),i})(),wue=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({}),i})();const Y5=new Set;let Mp,Cue=(()=>{class i{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Eue}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Mue(i){if(!Y5.has(i))try{Mp||(Mp=document.createElement("style"),Mp.setAttribute("type","text/css"),document.head.appendChild(Mp)),Mp.sheet&&(Mp.sheet.insertRule(`@media ${i} {body{ }}`,0),Y5.add(i))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return i.\u0275fac=function(t){return new(t||i)(xe(Wn))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Eue(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let X5=(()=>{class i{constructor(t,n){this._mediaMatcher=t,this._zone=n,this._queries=new Map,this._destroySubject=new Ht}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Z5(zx(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=pS(Z5(zx(t)).map(o=>this._registerQuery(o).observable));return s=LA(s.pipe(hs(1)),s.pipe(oI(1),Vx(0))),s.pipe(wt(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const n=this._mediaMatcher.matchMedia(t),s={observable:new Fi(o=>{const a=l=>this._zone.run(()=>o.next(l));return n.addListener(a),()=>{n.removeListener(a)}}).pipe(tc(n),wt(({matches:o})=>({query:t,matches:o})),yn(this._destroySubject)),mql:n};return this._queries.set(t,s),s}}return i.\u0275fac=function(t){return new(t||i)(xe(Cue),xe(pt))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Z5(i){return i.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}class Iue{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Ht,this._typeaheadSubscription=dn.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Ht,this.change=new Ht,e instanceof Td&&(this._itemChangesSubscription=e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(on(t=>this._pressedLetters.push(t)),Vx(e),On(()=>this._pressedLetters.length>0),wt(()=>this._pressedLetters.join(""))).subscribe(t=>{const n=this._getItemsArray();for(let r=1;r<n.length+1;r++){const s=(this._activeItemIndex+r)%n.length,o=n[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}return;default:return void((r||jx(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),n="number"==typeof e?e:t.indexOf(e);this._activeItem=t[n]??null,this._activeItemIndex=n}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let n=1;n<=t.length;n++){const r=(this._activeItemIndex+e*n+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(!n[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof Td?this._items.toArray():this._items}}class J5 extends Iue{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let eV=(()=>{class i{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Pue(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const n=function Due(i){try{return i.frameElement}catch{return null}}(function Uue(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(t));if(n&&(-1===iV(n)||!this.isVisible(n)))return!1;let r=t.nodeName.toLowerCase(),s=iV(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function Nue(i){let e=i.nodeName.toLowerCase(),t="input"===e&&i.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,n){return function jue(i){return!function Lue(i){return function Fue(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function kue(i){let e=i.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(i)||function Bue(i){return function Oue(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||tV(i))}(t)&&!this.isDisabled(t)&&(n?.ignoreVisibility||this.isVisible(t))}}return i.\u0275fac=function(t){return new(t||i)(xe(Wn))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function tV(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let e=i.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function iV(i){if(!tV(i))return null;const e=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Vue{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,n,r,s=!1){this._element=e,this._checker=t,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const n=this._getFirstTabbableElement(t);return n?.focus(e),!!n}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let n=0;n<t.length;n++){const r=t[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[n]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let n=t.length-1;n>=0;n--){const r=t[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[n]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(hs(1)).subscribe(e)}}let zue=(()=>{class i{constructor(t,n,r){this._checker=t,this._ngZone=n,this._document=r}create(t,n=!1){return new Vue(t,this._checker,this._ngZone,this._document,n)}}return i.\u0275fac=function(t){return new(t||i)(xe(eV),xe(pt),xe(Jt))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function nV(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}function rV(i){const e=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Gue=new je("cdk-input-modality-detector-options"),Hue={ignoreKeys:[18,17,224,91,16]},Ep=Gb({passive:!0,capture:!0});let Que=(()=>{class i{get mostRecentModality(){return this._modality.value}constructor(t,n,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new zs(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Mc(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(nV(o)?"keyboard":"mouse"),this._mostRecentTarget=Mc(o))},this._onTouchstart=o=>{rV(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Mc(o))},this._options={...Hue,...s},this.modalityDetected=this._modality.pipe(oI(1)),this.modalityChanged=this.modalityDetected.pipe(aI()),t.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Ep),r.addEventListener("mousedown",this._onMousedown,Ep),r.addEventListener("touchstart",this._onTouchstart,Ep)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ep),document.removeEventListener("mousedown",this._onMousedown,Ep),document.removeEventListener("touchstart",this._onTouchstart,Ep))}}return i.\u0275fac=function(t){return new(t||i)(xe(Wn),xe(pt),xe(Jt),xe(Gue,8))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const que=new je("cdk-focus-monitor-default-options"),Hx=Gb({passive:!0,capture:!0});let cI=(()=>{class i{constructor(t,n,r,s,o){this._ngZone=t,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ht,this._rootNodeFocusAndBlurListener=a=>{for(let c=Mc(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,n=!1){const r=wu(t);if(!this._platform.isBrowser||1!==r.nodeType)return Et(null);const s=function $de(i){if(function Kde(){if(null==tI){const i=typeof document<"u"?document.head:null;tI=!(!i||!i.createShadowRoot&&!i.attachShadow)}return tI}()){const e=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return n&&(o.checkChildren=!0),o.subject;const a={checkChildren:n,subject:new Ht,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const n=wu(t),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(t,n,r){const s=wu(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,n,l)):(this._setOrigin(n),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,n){t.classList.toggle("cdk-focused",!!n),t.classList.toggle("cdk-touch-focused","touch"===n),t.classList.toggle("cdk-keyboard-focused","keyboard"===n),t.classList.toggle("cdk-mouse-focused","mouse"===n),t.classList.toggle("cdk-program-focused","program"===n)}_setOrigin(t,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&n,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,n){const r=this._elementInfo.get(n),s=Mc(t);!r||!r.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),r)}_onBlur(t,n){const r=this._elementInfo.get(n);!r||r.checkChildren&&t.relatedTarget instanceof Node&&n.contains(t.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(t,n){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(n))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const n=t.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,Hx),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,Hx)}),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(yn(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const n=t.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Hx),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Hx),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,n,r){this._setClasses(t,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(t){const n=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&n.push([s,r])}),n}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!n||n===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(n))return!0;return!1}}return i.\u0275fac=function(t){return new(t||i)(xe(pt),xe(Wn),xe(Que),xe(Jt,8),xe(que,8))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Yue=(()=>{class i{constructor(t,n){this._elementRef=t,this._focusMonitor=n,this._focusOrigin=null,this.cdkFocusChange=new St}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){const t=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(t,1===t.nodeType&&t.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(n=>{this._focusOrigin=n,this.cdkFocusChange.emit(n)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(cI))},i.\u0275dir=Oe({type:i,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"]}),i})();const oV="cdk-high-contrast-black-on-white",aV="cdk-high-contrast-white-on-black",dI="cdk-high-contrast-active";let lV=(()=>{class i{constructor(t,n){this._platform=t,this._document=n,this._breakpointSubscription=Ut(X5).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(dI,oV,aV),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?t.add(dI,oV):2===n&&t.add(dI,aV)}}}return i.\u0275fac=function(t){return new(t||i)(xe(Wn),xe(Jt))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Xue=(()=>{class i{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(t){return new(t||i)(xe(lV))},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[Gx]}),i})();const Zue=new je("cdk-dir-doc",{providedIn:"root",factory:function Kue(){return Ut(Jt)}}),$ue=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ha=(()=>{class i{constructor(t){this.value="ltr",this.change=new St,t&&(this.value=function Jue(i){const e=i?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?$ue.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(t){return new(t||i)(xe(Zue,8))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Wb=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({}),i})();const the=new je("mat-sanity-checks",{providedIn:"root",factory:function ehe(){return!0}});let xn=(()=>{class i{constructor(t,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!iI()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return i.\u0275fac=function(t){return new(t||i)(xe(lV),xe(the,8),xe(Jt))},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[Wb,Wb]}),i})();function uI(i){return class extends i{get disabled(){return this._disabled}set disabled(e){this._disabled=Hi(e)}constructor(...e){super(...e),this._disabled=!1}}}function Qx(i,e){return class extends i{get color(){return this._color}set color(t){const n=t||this.defaultColor;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function uV(i){return class extends i{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Hi(e)}constructor(...e){super(...e),this._disableRipple=!1}}}class nhe{constructor(e,t,n,r=!1){this._renderer=e,this.element=t,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const hV=Gb({passive:!0,capture:!0});class rhe{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Mc(e);t&&this._events.get(e.type)?.forEach((n,r)=>{(r===t||r.contains(t))&&n.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,n,r){const s=this._events.get(t);if(s){const o=s.get(n);o?o.add(r):s.set(n,new Set([r]))}else this._events.set(t,new Map([[n,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,hV)})}removeHandler(e,t,n){const r=this._events.get(e);if(!r)return;const s=r.get(t);s&&(s.delete(n),0===s.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,hV)))}}const fV={enterDuration:225,exitDuration:150},pV=Gb({passive:!0,capture:!0}),mV=["mousedown","touchstart"],gV=["mouseup","mouseleave","touchend","touchcancel"];class Sp{constructor(e,t,n,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=wu(n))}fadeInRipple(e,t,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...fV,...n.animation};n.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=n.radius||function ohe(i,e,t){const n=Math.max(Math.abs(i-t.left),Math.abs(i-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(n*n+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-o+"px",d.style.top=l-o+"px",d.style.height=2*o+"px",d.style.width=2*o+"px",null!=n.color&&(d.style.backgroundColor=n.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d);const u=window.getComputedStyle(d),f=u.transitionDuration,m="none"===u.transitionProperty||"0s"===f||"0s, 0s"===f||0===r.width&&0===r.height,g=new nhe(this,d,n,m);d.style.transform="scale3d(1, 1, 1)",g.state=0,n.persistent||(this._mostRecentTransientRipple=g);let _=null;return!m&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const p=()=>this._finishRippleTransition(g),v=()=>this._destroyRipple(g);d.addEventListener("transitionend",p),d.addEventListener("transitioncancel",v),_={onTransitionEnd:p,onTransitionCancel:v}}),this._activeRipples.set(g,_),(m||!c)&&this._finishRippleTransition(g),g}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,n={...fV,...e.config.animation};t.style.transitionDuration=`${n.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=wu(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,mV.forEach(n=>{Sp._eventManager.addHandler(this._ngZone,n,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{gV.forEach(t=>{this._triggerElement.addEventListener(t,this,pV)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:n}=e.config;e.state=1,!n&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=nV(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!n&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!rV(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let n=0;n<t.length;n++)this.fadeInRipple(t[n].clientX,t[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(mV.forEach(t=>Sp._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&gV.forEach(t=>e.removeEventListener(t,this,pV)))}}Sp._eventManager=new rhe;const Wx=new je("mat-ripple-global-options");let Yb=(()=>{class i{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,n,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Sp(this,n,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,n=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,n,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(pt),P(Wn),P(Wx,8),P(ts,8))},i.\u0275dir=Oe({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,n){2&t&&Mi("mat-ripple-unbounded",n.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),i})(),Xb=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[xn,xn]}),i})(),_V=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[xn]}),i})(),bV=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[Xb,Sa,xn,_V]}),i})();const ahe=["mat-button",""],lhe=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],che=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],uhe=["mat-icon-button",""],hhe=["*"],fhe=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],phe=Qx(uI(uV(class{constructor(i){this._elementRef=i}})));let vV=(()=>{class i extends phe{constructor(t,n,r,s){super(t),this._platform=n,this._ngZone=r,this._animationMode=s,this._focusMonitor=Ut(cI),this._isFab=!1;const o=t.nativeElement.classList;for(const a of fhe)this._hasHostAttributes(a.selector)&&a.mdcClasses.forEach(l=>{o.add(l)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",n){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,n):this._elementRef.nativeElement.focus(n)}_hasHostAttributes(...t){return t.some(n=>this._elementRef.nativeElement.hasAttribute(n))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return i.\u0275fac=function(t){Kg()},i.\u0275dir=Oe({type:i,viewQuery:function(t,n){if(1&t&&ki(Yb,5),2&t){let r;kt(r=Lt())&&(n.ripple=r.first)}},features:[W]}),i})(),AV=(()=>{class i extends vV{constructor(t,n,r,s){super(t,n,r,s)}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(Wn),P(pt),P(ts,8))},i.\u0275cmp=K({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(t,n){2&t&&(fn("disabled",n.disabled||null),Mi("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-unthemed",!n.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[W],attrs:ahe,ngContentSelectors:che,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(t,n){1&t&&(fe(lhe),Ye(0,"span",0),ne(1),ye(2,"span",1),ne(3,1),ke(),ne(4,2),Ye(5,"span",2)(6,"span",3)(7,"span",4)),2&t&&(Mi("mdc-button__ripple",!n._isFab)("mdc-fab__ripple",n._isFab),se(6),Z("matRippleDisabled",n._isRippleDisabled())("matRippleTrigger",n._elementRef.nativeElement))},dependencies:[Yb],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),i})(),_he=(()=>{class i extends vV{constructor(t,n,r,s){super(t,n,r,s)}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(Wn),P(pt),P(ts,8))},i.\u0275cmp=K({type:i,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(t,n){2&t&&(fn("disabled",n.disabled||null),Mi("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-unthemed",!n.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[W],attrs:uhe,ngContentSelectors:hhe,decls:5,vars:3,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(t,n){1&t&&(fe(),Ye(0,"span",0),ne(1),Ye(2,"span",1)(3,"span",2)(4,"span",3)),2&t&&(se(3),Z("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",!0)("matRippleTrigger",n._elementRef.nativeElement))},dependencies:[Yb],styles:['.mdc-icon-button{font-size:24px;width:48px;height:48px;padding:12px}.mdc-icon-button .mdc-icon-button__focus-ring{max-height:48px;max-width:48px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:40px;height:40px;margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__focus-ring{max-height:40px;max-width:40px}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-icon-button svg,.mdc-icon-button img{width:24px;height:24px}.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size, 48px);width:var(--mdc-icon-button-state-layer-size, 48px);color:var(--mdc-icon-button-icon-color, inherit);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity, 0.38)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color, #000)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),i})(),hI=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[xn,Xb,xn]}),i})();function yV(...i){const e=hM(i),{args:t,keys:n}=U3(i),r=new Fi(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let d=0;d<o;d++){let u=!1;us(t[d]).subscribe(un(s,h=>{u||(u=!0,c--),a[d]=h},()=>l--,void 0,()=>{(!l||!u)&&(c||s.next(n?V3(n,a):a),s.complete())}))}});return e?r.pipe(fS(e)):r}class qx{}class fI{}class kl{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const n=t.indexOf(":");if(n>0){const r=t.slice(0,n),s=r.toLowerCase(),o=t.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const r=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof kl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new kl;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof kl?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class bhe{encodeKey(e){return xV(e)}encodeValue(e){return xV(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Ahe=/%(\d[a-f0-9])/gi,yhe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function xV(i){return encodeURIComponent(i).replace(Ahe,(e,t)=>yhe[t]??e)}function Yx(i){return`${i}`}class Ll{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new bhe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function vhe(i,e){const t=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t],r=Array.isArray(n)?n.map(Yx):[Yx(n)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const r=e[n];Array.isArray(r)?r.forEach(s=>{t.push({param:n,value:s,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(n=>t+"="+this.encoder.encodeValue(n)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ll({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Yx(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let n=this.map.get(e.param)||[];const r=n.indexOf(Yx(e.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(e.param,n):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class xhe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function wV(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function CV(i){return typeof Blob<"u"&&i instanceof Blob}function MV(i){return typeof FormData<"u"&&i instanceof FormData}class Zb{constructor(e,t,n,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function whe(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new kl),this.context||(this.context=new xhe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Ll,this.urlWithParams=t}serializeBody(){return null===this.body?null:wV(this.body)||CV(this.body)||MV(this.body)||function Che(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ll?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||MV(this.body)?null:CV(this.body)?this.body.type||null:wV(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ll?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((u,h)=>u.set(h,e.setHeaders[h]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((u,h)=>u.set(h,e.setParams[h]),c)),new Zb(t,n,s,{params:c,headers:l,context:d,reportProgress:a,responseType:r,withCredentials:o})}}var sr=(()=>((sr=sr||{})[sr.Sent=0]="Sent",sr[sr.UploadProgress=1]="UploadProgress",sr[sr.ResponseHeader=2]="ResponseHeader",sr[sr.DownloadProgress=3]="DownloadProgress",sr[sr.Response=4]="Response",sr[sr.User=5]="User",sr))();class pI{constructor(e,t=200,n="OK"){this.headers=e.headers||new kl,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class mI extends pI{constructor(e={}){super(e),this.type=sr.ResponseHeader}clone(e={}){return new mI({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Xx extends pI{constructor(e={}){super(e),this.type=sr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Xx({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class EV extends pI{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function gI(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let Zx=(()=>{class i{constructor(t){this.handler=t}request(t,n,r={}){let s;if(t instanceof Zb)s=t;else{let l,c;l=r.headers instanceof kl?r.headers:new kl(r.headers),r.params&&(c=r.params instanceof Ll?r.params:new Ll({fromObject:r.params})),s=new Zb(t,n,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=Et(s).pipe(nc(l=>this.handler.handle(l)));if(t instanceof Zb||"events"===r.observe)return o;const a=o.pipe(On(l=>l instanceof Xx));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(wt(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(wt(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(wt(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(wt(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,n={}){return this.request("DELETE",t,n)}get(t,n={}){return this.request("GET",t,n)}head(t,n={}){return this.request("HEAD",t,n)}jsonp(t,n){return this.request("JSONP",t,{params:(new Ll).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,n={}){return this.request("OPTIONS",t,n)}patch(t,n,r={}){return this.request("PATCH",t,gI(r,n))}post(t,n,r={}){return this.request("POST",t,gI(r,n))}put(t,n,r={}){return this.request("PUT",t,gI(r,n))}}return i.\u0275fac=function(t){return new(t||i)(xe(qx))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac}),i})();function SV(i,e){return e(i)}function Mhe(i,e){return(t,n)=>e.intercept(t,{handle:r=>i(r,n)})}const She=new je("HTTP_INTERCEPTORS"),Kb=new je("HTTP_INTERCEPTOR_FNS");function The(){let i=null;return(e,t)=>(null===i&&(i=(Ut(She,{optional:!0})??[]).reduceRight(Mhe,SV)),i(e,t))}let TV=(()=>{class i extends qx{constructor(t,n){super(),this.backend=t,this.injector=n,this.chain=null}handle(t){if(null===this.chain){const n=Array.from(new Set(this.injector.get(Kb)));this.chain=n.reduceRight((r,s)=>function Ehe(i,e,t){return(n,r)=>t.runInContext(()=>e(n,s=>i(s,r)))}(r,s,this.injector),SV)}return this.chain(t,n=>this.backend.handle(n))}}return i.\u0275fac=function(t){return new(t||i)(xe(fI),xe(Aa))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac}),i})();const Phe=/^\)\]\}',?\n/;let IV=(()=>{class i{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Fi(n=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((f,m)=>r.setRequestHeader(f,m.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const f=t.detectContentTypeHeader();null!==f&&r.setRequestHeader("Content-Type",f)}if(t.responseType){const f=t.responseType.toLowerCase();r.responseType="json"!==f?f:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const f=r.statusText||"OK",m=new kl(r.getAllResponseHeaders()),g=function khe(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(r)||t.url;return o=new mI({headers:m,status:r.status,statusText:f,url:g}),o},l=()=>{let{headers:f,status:m,statusText:g,url:_}=a(),p=null;204!==m&&(p=typeof r.response>"u"?r.responseText:r.response),0===m&&(m=p?200:0);let v=m>=200&&m<300;if("json"===t.responseType&&"string"==typeof p){const b=p;p=p.replace(Phe,"");try{p=""!==p?JSON.parse(p):null}catch(y){p=b,v&&(v=!1,p={error:y,text:p})}}v?(n.next(new Xx({body:p,headers:f,status:m,statusText:g,url:_||void 0})),n.complete()):n.error(new EV({error:p,headers:f,status:m,statusText:g,url:_||void 0}))},c=f=>{const{url:m}=a(),g=new EV({error:f,status:r.status||0,statusText:r.statusText||"Unknown Error",url:m||void 0});n.error(g)};let d=!1;const u=f=>{d||(n.next(a()),d=!0);let m={type:sr.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(m.total=f.total),"text"===t.responseType&&r.responseText&&(m.partialText=r.responseText),n.next(m)},h=f=>{let m={type:sr.UploadProgress,loaded:f.loaded};f.lengthComputable&&(m.total=f.total),n.next(m)};return r.addEventListener("load",l),r.addEventListener("error",c),r.addEventListener("timeout",c),r.addEventListener("abort",c),t.reportProgress&&(r.addEventListener("progress",u),null!==s&&r.upload&&r.upload.addEventListener("progress",h)),r.send(s),n.next({type:sr.Sent}),()=>{r.removeEventListener("error",c),r.removeEventListener("abort",c),r.removeEventListener("load",l),r.removeEventListener("timeout",c),t.reportProgress&&(r.removeEventListener("progress",u),null!==s&&r.upload&&r.upload.removeEventListener("progress",h)),r.readyState!==r.DONE&&r.abort()}})}}return i.\u0275fac=function(t){return new(t||i)(xe(p3))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac}),i})();const _I=new je("XSRF_ENABLED"),DV="XSRF-TOKEN",PV=new je("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>DV}),kV="X-XSRF-TOKEN",LV=new je("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>kV});class BV{}let Lhe=(()=>{class i{constructor(t,n,r){this.doc=t,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=$O(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return i.\u0275fac=function(t){return new(t||i)(xe(Jt),xe(m_),xe(PV))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac}),i})();function Bhe(i,e){const t=i.url.toLowerCase();if(!Ut(_I)||"GET"===i.method||"HEAD"===i.method||t.startsWith("http://")||t.startsWith("https://"))return e(i);const n=Ut(BV).getToken(),r=Ut(LV);return null!=n&&!i.headers.has(r)&&(i=i.clone({headers:i.headers.set(r,n)})),e(i)}var Kn=(()=>((Kn=Kn||{})[Kn.Interceptors=0]="Interceptors",Kn[Kn.LegacyInterceptors=1]="LegacyInterceptors",Kn[Kn.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Kn[Kn.NoXsrfProtection=3]="NoXsrfProtection",Kn[Kn.JsonpSupport=4]="JsonpSupport",Kn[Kn.RequestsMadeViaParent=5]="RequestsMadeViaParent",Kn))();function Tp(i,e){return{\u0275kind:i,\u0275providers:e}}function Fhe(...i){const e=[Zx,IV,TV,{provide:qx,useExisting:TV},{provide:fI,useExisting:IV},{provide:Kb,useValue:Bhe,multi:!0},{provide:_I,useValue:!0},{provide:BV,useClass:Lhe}];for(const t of i)e.push(...t.\u0275providers);return function D7(i){return{\u0275providers:i}}(e)}const FV=new je("LEGACY_INTERCEPTOR_FN");function Nhe({cookieName:i,headerName:e}){const t=[];return void 0!==i&&t.push({provide:PV,useValue:i}),void 0!==e&&t.push({provide:LV,useValue:e}),Tp(Kn.CustomXsrfConfiguration,t)}let jhe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({providers:[Fhe(Tp(Kn.LegacyInterceptors,[{provide:FV,useFactory:The},{provide:Kb,useExisting:FV,multi:!0}]),Nhe({cookieName:DV,headerName:kV}))]}),i})();const Uhe=["*"];let Kx;function $b(i){return function Vhe(){if(void 0===Kx&&(Kx=null,typeof window<"u")){const i=window;void 0!==i.trustedTypes&&(Kx=i.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Kx}()?.createHTML(i)||i}function OV(i){return Error(`Unable to find icon with the name "${i}"`)}function NV(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function jV(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class Cu{constructor(e,t,n){this.url=e,this.svgText=t,this.options=n}}let $x=(()=>{class i{constructor(t,n,r,s){this._httpClient=t,this._sanitizer=n,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,n,r){return this.addSvgIconInNamespace("",t,n,r)}addSvgIconLiteral(t,n,r){return this.addSvgIconLiteralInNamespace("",t,n,r)}addSvgIconInNamespace(t,n,r,s){return this._addSvgIconConfig(t,n,new Cu(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,n,r,s){const o=this._sanitizer.sanitize(Pi.HTML,r);if(!o)throw jV(r);const a=$b(o);return this._addSvgIconConfig(t,n,new Cu("",a,s))}addSvgIconSet(t,n){return this.addSvgIconSetInNamespace("",t,n)}addSvgIconSetLiteral(t,n){return this.addSvgIconSetLiteralInNamespace("",t,n)}addSvgIconSetInNamespace(t,n,r){return this._addSvgIconSetConfig(t,new Cu(n,null,r))}addSvgIconSetLiteralInNamespace(t,n,r){const s=this._sanitizer.sanitize(Pi.HTML,n);if(!s)throw jV(n);const o=$b(s);return this._addSvgIconSetConfig(t,new Cu("",o,r))}registerFontClassAlias(t,n=t){return this._fontCssClassesByAlias.set(t,n),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const n=this._sanitizer.sanitize(Pi.RESOURCE_URL,t);if(!n)throw NV(t);const r=this._cachedIconsByUrl.get(n);return r?Et(Jx(r)):this._loadSvgIconFromConfig(new Cu(t,null)).pipe(on(s=>this._cachedIconsByUrl.set(n,s)),wt(s=>Jx(s)))}getNamedSvgIcon(t,n=""){const r=UV(n,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(n,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(n);return o?this._getSvgFromIconSetConfigs(t,o):Jo(OV(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Et(Jx(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(wt(n=>Jx(n)))}_getSvgFromIconSetConfigs(t,n){const r=this._extractIconWithNameFromAnySet(t,n);return r?Et(r):yV(n.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(ea(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(Pi.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),Et(null)})))).pipe(wt(()=>{const o=this._extractIconWithNameFromAnySet(t,n);if(!o)throw OV(t);return o}))}_extractIconWithNameFromAnySet(t,n){for(let r=n.length-1;r>=0;r--){const s=n[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(on(n=>t.svgText=n),wt(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Et(null):this._fetchIcon(t).pipe(on(n=>t.svgText=n))}_extractSvgIconFromSet(t,n,r){const s=t.querySelector(`[id="${n}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString($b("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const n=this._document.createElement("DIV");n.innerHTML=t;const r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const n=this._svgElementFromString($b("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&n.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&n.appendChild(t.childNodes[s].cloneNode(!0));return n}_setSvgAttributes(t,n){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),n&&n.viewBox&&t.setAttribute("viewBox",n.viewBox),t}_fetchIcon(t){const{url:n,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function zhe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const o=this._sanitizer.sanitize(Pi.RESOURCE_URL,n);if(!o)throw NV(n);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(wt(c=>$b(c)),OA(()=>this._inProgressUrlFetches.delete(o)),fM());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(t,n,r){return this._svgIconConfigs.set(UV(t,n),r),this}_addSvgIconSetConfig(t,n){const r=this._iconSetConfigs.get(t);return r?r.push(n):this._iconSetConfigs.set(t,[n]),this}_svgElementFromConfig(t){if(!t.svgElement){const n=this._svgElementFromString(t.svgText);this._setSvgAttributes(n,t.options),t.svgElement=n}return t.svgElement}_getIconConfigFromResolvers(t,n){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](n,t);if(s)return Hhe(s)?new Cu(s.url,null,s.options):new Cu(s,null)}}}return i.\u0275fac=function(t){return new(t||i)(xe(Zx,8),xe(PA),xe(Jt,8),xe(hl))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Jx(i){return i.cloneNode(!0)}function UV(i,e){return i+":"+e}function Hhe(i){return!(!i.url||!i.options)}const Qhe=Qx(class{constructor(i){this._elementRef=i}}),Whe=new je("MAT_ICON_DEFAULT_OPTIONS"),qhe=new je("mat-icon-location",{providedIn:"root",factory:function Yhe(){const i=Ut(Jt),e=i?i.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),VV=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Xhe=VV.map(i=>`[${i}]`).join(", "),Zhe=/^url\(['"]?#(.*?)['"]?\)$/;let zV=(()=>{class i extends Qhe{get inline(){return this._inline}set inline(t){this._inline=Hi(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const n=this._cleanupFontValue(t);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const n=this._cleanupFontValue(t);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}constructor(t,n,r,s,o,a){super(t),this._iconRegistry=n,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=dn.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const n=t.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let n=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const r=t.childNodes[n];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),n.forEach(r=>t.classList.add(r)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const n=this._elementsWithExternalReferences;n&&n.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const n=t.querySelectorAll(Xhe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<n.length;s++)VV.forEach(o=>{const a=n[s],l=a.getAttribute(o),c=l?l.match(Zhe):null;if(c){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[n,r]=this._splitIconName(t);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(hs(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${r}! ${s.message}`))})}}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P($x),jg("aria-hidden"),P(qhe),P(hl),P(Whe,8))},i.\u0275cmp=K({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(t,n){2&t&&(fn("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet)("fontIcon",n._usingFontIcon()?n.fontIcon:null),Mi("mat-icon-inline",n.inline)("mat-icon-no-color","primary"!==n.color&&"accent"!==n.color&&"warn"!==n.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[W],ngContentSelectors:Uhe,decls:1,vars:0,template:function(t,n){1&t&&(fe(),ne(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),i})(),bI=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[xn,xn]}),i})();const Khe=["*"],ife=new je("MAT_CARD_CONFIG");let GV=(()=>{class i{constructor(t){this.appearance=t?.appearance||"raised"}}return i.\u0275fac=function(t){return new(t||i)(P(ife,8))},i.\u0275cmp=K({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(t,n){2&t&&Mi("mat-mdc-card-outlined","outlined"===n.appearance)("mdc-card--outlined","outlined"===n.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:Khe,decls:1,vars:0,template:function(t,n){1&t&&(fe(),ne(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mat-mdc-card{position:relative;border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px));background-color:var(--mdc-elevated-card-container-color, transparent);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color, transparent)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width, 1px);border-style:solid;border-color:var(--mdc-outlined-card-outline-color, transparent)}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),i})(),HV=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]}),i})(),QV=(()=>{class i{constructor(){this.align="start"}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(t,n){2&t&&Mi("mat-mdc-card-actions-align-end","end"===n.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),i})(),WV=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[xn,Sa,xn]}),i})();class vI{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class pfe extends vI{constructor(e,t,n,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=n,this.componentFactoryResolver=r,this.projectableNodes=s}}class AI extends vI{constructor(e,t,n,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class mfe extends vI{constructor(e){super(),this.element=e instanceof zt?e.nativeElement:e}}class qV{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof pfe?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof AI?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof mfe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class gfe extends qV{constructor(e,t,n,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const n=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(n,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=n.create(e.injector||this._defaultInjector||ms.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,n=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(n);-1!==r&&t.remove(r)}),this._attachedPortal=e,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let _fe=(()=>{class i extends AI{constructor(t,n){super(t,n)}}return i.\u0275fac=function(t){return new(t||i)(P(gs),P(Vr))},i.\u0275dir=Oe({type:i,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[W]}),i})(),yI=(()=>{class i extends qV{constructor(t,n,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new St,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const n=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=n.createComponent(s,n.length,t.injector||n.injector,t.projectableNodes||void 0);return n!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return i.\u0275fac=function(t){return new(t||i)(P(Xl),P(Vr),P(Jt))},i.\u0275dir=Oe({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[W]}),i})(),YV=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({}),i})();const bfe=["addListener","removeListener"],vfe=["addEventListener","removeEventListener"],Afe=["on","off"];function Ec(i,e,t,n){if(Si(t)&&(n=t,t=void 0),n)return Ec(i,e,t).pipe(fS(n));const[r,s]=function wfe(i){return Si(i.addEventListener)&&Si(i.removeEventListener)}(i)?vfe.map(o=>a=>i[o](e,a,t)):function yfe(i){return Si(i.addListener)&&Si(i.removeListener)}(i)?bfe.map(XV(i,e)):function xfe(i){return Si(i.on)&&Si(i.off)}(i)?Afe.map(XV(i,e)):[];if(!r&&dM(i))return xr(o=>Ec(o,e,t))(us(i));if(!r)throw new TypeError("Invalid event target");return new Fi(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function XV(i,e){return t=>n=>i[t](e,n)}function ZV(i=0,e,t=vue){let n=-1;return null!=e&&(iP(e)?t=e:n=e),new Fi(r=>{let s=function Cfe(i){return i instanceof Date&&!isNaN(i)}(i)?+i-t.now():i;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},s)})}class KV{}class Mfe{}const Bl="*";function Jb(i,e){return{type:7,name:i,definitions:e,options:{}}}function Sc(i,e=null){return{type:4,styles:e,timings:i}}function $V(i,e=null){return{type:2,steps:i,options:e}}function Rs(i){return{type:6,styles:i,offset:null}}function Mu(i,e,t){return{type:0,name:i,styles:e,options:t}}function Fl(i,e,t=null){return{type:1,expr:i,animation:e,options:t}}function JV(i){Promise.resolve().then(i)}class e0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){JV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class ez{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0;const s=this.players.length;0==s?JV(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,t/n.totalTime):1;n.setPosition(r)})}getPosition(){const e=this.players.reduce((t,n)=>null===t||n.totalTime>t.totalTime?n:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}const t0={schedule(i){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:n}=t0;n&&(e=n.requestAnimationFrame,t=n.cancelAnimationFrame);const r=e(s=>{t=void 0,i(s)});return new dn(()=>t?.(r))},requestAnimationFrame(...i){const{delegate:e}=t0;return(e?.requestAnimationFrame||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:e}=t0;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...i)},delegate:void 0},ew=new class Rfe extends rI{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}}}(class Tfe extends nI{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e._scheduled||(e._scheduled=t0.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,n=0){if(null!=n&&n>0||null==n&&this.delay>0)return super.recycleAsyncId(e,t,n);e.actions.some(r=>r.id===t)||(t0.cancelAnimationFrame(t),e._scheduled=void 0)}});let wI,Ife=1;const tw={};function tz(i){return i in tw&&(delete tw[i],!0)}const Dfe={setImmediate(i){const e=Ife++;return tw[e]=!0,wI||(wI=Promise.resolve()),wI.then(()=>tz(e)&&i()),e},clearImmediate(i){tz(i)}},{setImmediate:Pfe,clearImmediate:kfe}=Dfe,iw={setImmediate(...i){const{delegate:e}=iw;return(e?.setImmediate||Pfe)(...i)},clearImmediate(i){const{delegate:e}=iw;return(e?.clearImmediate||kfe)(i)},delegate:void 0},Ffe=new class Bfe extends rI{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}}}(class Lfe extends nI{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e._scheduled||(e._scheduled=iw.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,n=0){if(null!=n&&n>0||null==n&&this.delay>0)return super.recycleAsyncId(e,t,n);e.actions.some(r=>r.id===t)||(iw.clearImmediate(t),e._scheduled=void 0)}});function CI(i,e=sI){return function Ofe(i){return Mn((e,t)=>{let n=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,n){n=!1;const c=r;r=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(un(t,c=>{n=!0,r=c,s||us(i(c)).subscribe(s=un(t,a,l))},()=>{o=!0,(!n||!s||s.closed)&&t.complete()}))})}(()=>ZV(i,e))}const Nfe=["contentWrapper"],jfe=["*"],Ufe=new je("VIRTUAL_SCROLL_STRATEGY");let Rp=(()=>{class i{constructor(t,n,r){this._ngZone=t,this._platform=n,this._scrolled=new Ht,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const n=this.scrollContainers.get(t);n&&(n.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Fi(n=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(CI(t)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Et()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(t,n){const r=this.getAncestorScrollContainers(t);return this.scrolled(n).pipe(On(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,n){let r=wu(n),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Ec(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(t){return new(t||i)(xe(pt),xe(Wn),xe(Jt,8))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Eu=(()=>{class i{constructor(t,n,r,s){this.elementRef=t,this.scrollDispatcher=n,this.ngZone=r,this.dir=s,this._destroyed=new Ht,this._elementScrolled=new Fi(o=>this.ngZone.runOutsideAngular(()=>Ec(this.elementRef.nativeElement,"scroll").pipe(yn(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const n=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=r?t.end:t.start),null==t.right&&(t.right=r?t.start:t.end),null!=t.bottom&&(t.top=n.scrollHeight-n.clientHeight-t.bottom),r&&0!=Hb()?(null!=t.left&&(t.right=n.scrollWidth-n.clientWidth-t.left),2==Hb()?t.left=t.right:1==Hb()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=n.scrollWidth-n.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const n=this.elementRef.nativeElement;G5()?n.scrollTo(t):(null!=t.top&&(n.scrollTop=t.top),null!=t.left&&(n.scrollLeft=t.left))}measureScrollOffset(t){const n="left",r="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?r:n:"end"==t&&(t=o?n:r),o&&2==Hb()?t==n?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==Hb()?t==n?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==n?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(Rp),P(pt),P(Ha,8))},i.\u0275dir=Oe({type:i,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),i})(),Su=(()=>{class i{constructor(t,n,r){this._platform=t,this._change=new Ht,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,n=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||n.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||n.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(CI(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(t){return new(t||i)(xe(Wn),xe(pt),xe(Jt,8))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const iz=new je("VIRTUAL_SCROLLABLE");let Gfe=(()=>{class i extends Eu{constructor(t,n,r,s){super(t,n,r,s)}measureViewportSize(t){const n=this.elementRef.nativeElement;return"horizontal"===t?n.clientWidth:n.clientHeight}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(Rp),P(pt),P(Ha,8))},i.\u0275dir=Oe({type:i,features:[W]}),i})();const Qfe=typeof requestAnimationFrame<"u"?ew:Ffe;let Wfe=(()=>{class i extends Gfe{get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(t){this._appendOnly=Hi(t)}constructor(t,n,r,s,o,a,l,c){super(t,a,r,o),this.elementRef=t,this._changeDetectorRef=n,this._scrollStrategy=s,this.scrollable=c,this._platform=Ut(Wn),this._detachedSubject=new Ht,this._renderedRangeSubject=new Ht,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new Fi(d=>this._scrollStrategy.scrolledIndexChange.subscribe(u=>Promise.resolve().then(()=>this.ngZone.run(()=>d.next(u))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=dn.EMPTY,this._viewportChanges=l.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(tc(null),CI(0,Qfe)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(t){this.ngZone.runOutsideAngular(()=>{this._forOf=t,this._forOf.dataStream.pipe(yn(this._detachedSubject)).subscribe(n=>{const r=n.length;r!==this._dataLength&&(this._dataLength=r,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(t){return this.getElementRef().nativeElement.getBoundingClientRect()[t]}setTotalContentSize(t){this._totalContentSize!==t&&(this._totalContentSize=t,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(t){(function Hfe(i,e){return i.start==e.start&&i.end==e.end})(this._renderedRange,t)||(this.appendOnly&&(t={start:0,end:Math.max(this._renderedRange.end,t.end)}),this._renderedRangeSubject.next(this._renderedRange=t),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(t,n="to-start"){t=this.appendOnly&&"to-start"===n?0:t;const s="horizontal"==this.orientation,o=s?"X":"Y";let l=`translate${o}(${Number((s&&this.dir&&"rtl"==this.dir.value?-1:1)*t)}px)`;this._renderedContentOffset=t,"to-end"===n&&(l+=` translate${o}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=l&&(this._renderedContentTransform=l,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(t,n="auto"){const r={behavior:n};"horizontal"===this.orientation?r.start=t:r.top=t,this.scrollable.scrollTo(r)}scrollToIndex(t,n="auto"){this._scrollStrategy.scrollToIndex(t,n)}measureScrollOffset(t){let n;return n=this.scrollable==this?r=>super.measureScrollOffset(r):r=>this.scrollable.measureScrollOffset(r),Math.max(0,n(t??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(t){let n;const r="left",s="right",o="rtl"==this.dir?.value;n="start"==t?o?s:r:"end"==t?o?r:s:t||("horizontal"===this.orientation?"left":"top");const a=this.scrollable.measureBoundingClientRectWithScrollOffset(n);return this.elementRef.nativeElement.getBoundingClientRect()[n]-a}measureRenderedContentSize(){const t=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?t.offsetWidth:t.offsetHeight}measureRangeSize(t){return this._forOf?this._forOf.measureRangeSize(t,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(t){t&&this._runAfterChangeDetection.push(t),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const n of t)n()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(er),P(pt),P(Ufe,8),P(Ha,8),P(Rp),P(Su),P(iz,8))},i.\u0275cmp=K({type:i,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(t,n){if(1&t&&ki(Nfe,7),2&t){let r;kt(r=Lt())&&(n._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(t,n){2&t&&Mi("cdk-virtual-scroll-orientation-horizontal","horizontal"===n.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==n.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[oe([{provide:Eu,useFactory:(e,t)=>e||t,deps:[[new cl,new Sv(iz)],i]}]),W,pE],ngContentSelectors:jfe,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(t,n){1&t&&(fe(),ye(0,"div",0,1),ne(2),ke(),Ye(3,"div",2)),2&t&&(se(3),Wh("width",n._totalContentWidth)("height",n._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),i})(),n0=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({}),i})(),nz=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[Wb,n0,Wfe,Wb,n0]}),i})();function qfe(i,e){}const Yfe=function(i){return{animationDuration:i}},Xfe=function(i,e){return{value:i,params:e}};function Zfe(i,e){1&i&&ne(0)}const rz=["*"],Kfe=["tabListContainer"],$fe=["tabList"],Jfe=["tabListInner"],epe=["nextPaginator"],tpe=["previousPaginator"],ipe=["tabBodyWrapper"],npe=["tabHeader"];function rpe(i,e){}function spe(i,e){1&i&&Ft(0,rpe,0,0,"ng-template",14),2&i&&Z("cdkPortalOutlet",vi().$implicit.templateLabel)}function ope(i,e){1&i&&Xi(0),2&i&&Jv(vi().$implicit.textLabel)}function ape(i,e){if(1&i){const t=Vs();ye(0,"div",6,7),xt("click",function(){const r=lr(t),s=r.$implicit,o=r.index,a=vi(),l=Qt(1);return cr(a._handleClick(s,l,o))})("cdkFocusChange",function(r){const o=lr(t).index;return cr(vi()._tabFocusChanged(r,o))}),Ye(2,"span",8)(3,"div",9),ye(4,"span",10)(5,"span",11),Ft(6,spe,1,1,"ng-template",12),Ft(7,ope,1,1,"ng-template",null,13,Rd),ke()()()}if(2&i){const t=e.$implicit,n=e.index,r=Qt(1),s=Qt(8),o=vi();Mi("mdc-tab--active",o.selectedIndex===n),Z("id",o._getTabLabelId(n))("ngClass",t.labelClass)("disabled",t.disabled)("fitInkBarToContent",o.fitInkBarToContent),fn("tabIndex",o._getTabIndex(n))("aria-posinset",n+1)("aria-setsize",o._tabs.length)("aria-controls",o._getTabContentId(n))("aria-selected",o.selectedIndex===n)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),se(3),Z("matRippleTrigger",r)("matRippleDisabled",t.disabled||o.disableRipple),se(3),Z("ngIf",t.templateLabel)("ngIfElse",s)}}function lpe(i,e){if(1&i){const t=Vs();ye(0,"mat-tab-body",15),xt("_onCentered",function(){return lr(t),cr(vi()._removeTabBodyWrapperHeight())})("_onCentering",function(r){return lr(t),cr(vi()._setTabBodyWrapperHeight(r))}),ke()}if(2&i){const t=e.$implicit,n=e.index,r=vi();Mi("mat-mdc-tab-body-active",r.selectedIndex===n),Z("id",r._getTabContentId(n))("ngClass",t.bodyClass)("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",r.animationDuration)("preserveContent",r.preserveContent),fn("tabindex",null!=r.contentTabIndex&&r.selectedIndex===n?r.contentTabIndex:null)("aria-labelledby",r._getTabLabelId(n))}}const cpe={translateTab:Jb("translateTab",[Mu("center, void, left-origin-center, right-origin-center",Rs({transform:"none"})),Mu("left",Rs({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),Mu("right",Rs({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),Fl("* => left, * => right, left => center, right => center",Sc("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),Fl("void => left-origin-center",[Rs({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),Sc("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),Fl("void => right-origin-center",[Rs({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),Sc("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let dpe=(()=>{class i extends yI{constructor(t,n,r,s){super(t,n,s),this._host=r,this._centeringSub=dn.EMPTY,this._leavingSub=dn.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(tc(this._host._isCenterPosition(this._host._position))).subscribe(t=>{t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(P(Xl),P(Vr),P(le(()=>sz)),P(Jt))},i.\u0275dir=Oe({type:i,selectors:[["","matTabBodyHost",""]],features:[W]}),i})(),upe=(()=>{class i{set position(t){this._positionIndex=t,this._computePositionAnimationState()}constructor(t,n,r){this._elementRef=t,this._dir=n,this._dirChangeSubscription=dn.EMPTY,this._translateTabComplete=new Ht,this._onCentering=new St,this._beforeCentering=new St,this._afterLeavingCenter=new St,this._onCentered=new St(!0),this.animationDuration="500ms",this.preserveContent=!1,n&&(this._dirChangeSubscription=n.change.subscribe(s=>{this._computePositionAnimationState(s),r.markForCheck()})),this._translateTabComplete.pipe(aI((s,o)=>s.fromState===o.fromState&&s.toState===o.toState)).subscribe(s=>{this._isCenterPosition(s.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(s.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){const n=this._isCenterPosition(t.toState);this._beforeCentering.emit(n),n&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(t){return"center"==t||"left-origin-center"==t||"right-origin-center"==t}_computePositionAnimationState(t=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==t?"left":"right":this._positionIndex>0?"ltr"==t?"right":"left":"center"}_computePositionFromOrigin(t){const n=this._getLayoutDirection();return"ltr"==n&&t<=0||"rtl"==n&&t>0?"left-origin-center":"right-origin-center"}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(Ha,8),P(er))},i.\u0275dir=Oe({type:i,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),i})(),sz=(()=>{class i extends upe{constructor(t,n,r){super(t,n,r)}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(Ha,8),P(er))},i.\u0275cmp=K({type:i,selectors:[["mat-tab-body"]],viewQuery:function(t,n){if(1&t&&ki(yI,5),2&t){let r;kt(r=Lt())&&(n._portalHost=r.first)}},hostAttrs:[1,"mat-mdc-tab-body"],features:[W],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-mdc-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(t,n){1&t&&(ye(0,"div",0,1),xt("@translateTab.start",function(s){return n._onTranslateTabStarted(s)})("@translateTab.done",function(s){return n._translateTabComplete.next(s)}),Ft(2,qfe,0,0,"ng-template",2),ke()),2&t&&Z("@translateTab",Ca(3,Xfe,n._position,li(1,Yfe,n.animationDuration)))},dependencies:[dpe],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[cpe.translateTab]}}),i})();const hpe=new je("MatTabContent");let fpe=(()=>{class i{constructor(t){this.template=t}}return i.\u0275fac=function(t){return new(t||i)(P(gs))},i.\u0275dir=Oe({type:i,selectors:[["","matTabContent",""]],features:[oe([{provide:hpe,useExisting:i}])]}),i})();const ppe=new je("MatTabLabel"),oz=new je("MAT_TAB");let mpe=(()=>{class i extends _fe{constructor(t,n,r){super(t,n),this._closestTab=r}}return i.\u0275fac=function(t){return new(t||i)(P(gs),P(Vr),P(oz,8))},i.\u0275dir=Oe({type:i,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[oe([{provide:ppe,useExisting:i}]),W]}),i})();const MI="mdc-tab-indicator--active",az="mdc-tab-indicator--no-transition";class gpe{constructor(e){this._items=e}hide(){this._items.forEach(e=>e.deactivateInkBar())}alignToElement(e){const t=this._items.find(r=>r.elementRef.nativeElement===e),n=this._currentItem;if(n?.deactivateInkBar(),t){const r=n?.elementRef.nativeElement.getBoundingClientRect?.();t.activateInkBar(r),this._currentItem=t}}}function _pe(i){return class extends i{constructor(...e){super(...e),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(e){const t=Hi(e);this._fitToContent!==t&&(this._fitToContent=t,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(e){const t=this.elementRef.nativeElement;if(!e||!t.getBoundingClientRect||!this._inkBarContentElement)return void t.classList.add(MI);const n=t.getBoundingClientRect(),r=e.width/n.width,s=e.left-n.left;t.classList.add(az),this._inkBarContentElement.style.setProperty("transform",`translateX(${s}px) scaleX(${r})`),t.getBoundingClientRect(),t.classList.remove(az),t.classList.add(MI),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this.elementRef.nativeElement.classList.remove(MI)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){const e=this.elementRef.nativeElement.ownerDocument||document;this._inkBarElement=e.createElement("span"),this._inkBarContentElement=e.createElement("span"),this._inkBarElement.className="mdc-tab-indicator",this._inkBarContentElement.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",this._inkBarElement.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){(this._fitToContent?this.elementRef.nativeElement.querySelector(".mdc-tab__content"):this.elementRef.nativeElement).appendChild(this._inkBarElement)}}}const vpe=uI(class{}),Ape=_pe((()=>{class i extends vpe{constructor(t){super(),this.elementRef=t}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return i.\u0275fac=function(t){return new(t||i)(P(zt))},i.\u0275dir=Oe({type:i,features:[W]}),i})());let lz=(()=>{class i extends Ape{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=ce(i)))(n||i)}}(),i.\u0275dir=Oe({type:i,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(t,n){2&t&&(fn("aria-disabled",!!n.disabled),Mi("mat-mdc-tab-disabled",n.disabled))},inputs:{disabled:"disabled",fitInkBarToContent:"fitInkBarToContent"},features:[W]}),i})();const ype=uI(class{}),cz=new je("MAT_TAB_GROUP");let xpe=(()=>{class i extends ype{get content(){return this._contentPortal}constructor(t,n){super(),this._viewContainerRef=t,this._closestTabGroup=n,this.textLabel="",this._contentPortal=null,this._stateChanges=new Ht,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new AI(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&t._closestTab===this&&(this._templateLabel=t)}}return i.\u0275fac=function(t){return new(t||i)(P(Vr),P(cz,8))},i.\u0275dir=Oe({type:i,viewQuery:function(t,n){if(1&t&&ki(gs,7),2&t){let r;kt(r=Lt())&&(n._implicitContent=r.first)}},inputs:{textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},features:[W,Sr]}),i})(),dz=(()=>{class i extends xpe{get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=ce(i)))(n||i)}}(),i.\u0275cmp=K({type:i,selectors:[["mat-tab"]],contentQueries:function(t,n,r){if(1&t&&(Fn(r,fpe,7,gs),Fn(r,mpe,5)),2&t){let s;kt(s=Lt())&&(n._explicitContent=s.first),kt(s=Lt())&&(n.templateLabel=s.first)}},inputs:{disabled:"disabled"},exportAs:["matTab"],features:[oe([{provide:oz,useExisting:i}]),W],ngContentSelectors:rz,decls:1,vars:0,template:function(t,n){1&t&&(fe(),Ft(0,Zfe,1,0,"ng-template"))},encapsulation:2}),i})();const uz=Gb({passive:!0});let Mpe=(()=>{class i{get disablePagination(){return this._disablePagination}set disablePagination(t){this._disablePagination=Hi(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=cs(t),this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}constructor(t,n,r,s,o,a,l){this._elementRef=t,this._changeDetectorRef=n,this._viewportRuler=r,this._dir=s,this._ngZone=o,this._platform=a,this._animationMode=l,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new Ht,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new Ht,this._disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new St,this.indexFocused=new St,o.runOutsideAngular(()=>{Ec(t.nativeElement,"mouseleave").pipe(yn(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){Ec(this._previousPaginator.nativeElement,"touchstart",uz).pipe(yn(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Ec(this._nextPaginator.nativeElement,"touchstart",uz).pipe(yn(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:Et("ltr"),n=this._viewportRuler.change(150),r=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new J5(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe(hs(1)).subscribe(r),hd(t,n,this._items.changes,this._itemsResized()).pipe(yn(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),r()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(s=>{this.indexFocused.emit(s),this._setTabFocus(s)})}_itemsResized(){return"function"!=typeof ResizeObserver?Br:this._items.changes.pipe(tc(this._items),Gs(t=>new Fi(n=>this._ngZone.runOutsideAngular(()=>{const r=new ResizeObserver(s=>n.next(s));return t.forEach(s=>r.observe(s.elementRef.nativeElement)),()=>{r.disconnect()}}))),oI(1),On(t=>t.some(n=>n.contentRect.width>0&&n.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!jx(t))switch(t.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){const n=this._items.get(this.focusIndex);n&&!n.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t))}break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){!this._isValidIndex(t)||this.focusIndex===t||!this._keyManager||this._keyManager.setActiveItem(t)}_isValidIndex(t){return!this._items||!!this._items.toArray()[t]}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const n=this._tabListContainer.nativeElement;n.scrollLeft="ltr"==this._getLayoutDirection()?0:n.scrollWidth-n.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,n="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(n)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const n=this._items?this._items.toArray()[t]:null;if(!n)return;const r=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:s,offsetWidth:o}=n.elementRef.nativeElement;let a,l;"ltr"==this._getLayoutDirection()?(a=s,l=a+o):(l=this._tabListInner.nativeElement.offsetWidth-s,a=l-o);const c=this.scrollDistance,d=this.scrollDistance+r;a<c?this.scrollDistance-=c-a+60:l>d&&(this.scrollDistance+=l-d+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,n=t?t.elementRef.nativeElement:null;n?this._inkBar.alignToElement(n):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,n){n&&null!=n.button&&0!==n.button||(this._stopInterval(),ZV(650,100).pipe(yn(hd(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:r,distance:s}=this._scrollHeader(t);(0===s||s>=r)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const n=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(n,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:n,distance:this._scrollDistance}}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(er),P(Su),P(Ha,8),P(pt),P(Wn),P(ts,8))},i.\u0275dir=Oe({type:i,inputs:{disablePagination:"disablePagination"}}),i})(),Epe=(()=>{class i extends Mpe{get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Hi(t)}constructor(t,n,r,s,o,a,l){super(t,n,r,s,o,a,l),this._disableRipple=!1}_itemSelected(t){t.preventDefault()}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(er),P(Su),P(Ha,8),P(pt),P(Wn),P(ts,8))},i.\u0275dir=Oe({type:i,inputs:{disableRipple:"disableRipple"},features:[W]}),i})(),Spe=(()=>{class i extends Epe{constructor(t,n,r,s,o,a,l){super(t,n,r,s,o,a,l)}ngAfterContentInit(){this._inkBar=new gpe(this._items),super.ngAfterContentInit()}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(er),P(Su),P(Ha,8),P(pt),P(Wn),P(ts,8))},i.\u0275cmp=K({type:i,selectors:[["mat-tab-header"]],contentQueries:function(t,n,r){if(1&t&&Fn(r,lz,4),2&t){let s;kt(s=Lt())&&(n._items=s)}},viewQuery:function(t,n){if(1&t&&(ki(Kfe,7),ki($fe,7),ki(Jfe,7),ki(epe,5),ki(tpe,5)),2&t){let r;kt(r=Lt())&&(n._tabListContainer=r.first),kt(r=Lt())&&(n._tabList=r.first),kt(r=Lt())&&(n._tabListInner=r.first),kt(r=Lt())&&(n._nextPaginator=r.first),kt(r=Lt())&&(n._previousPaginator=r.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(t,n){2&t&&Mi("mat-mdc-tab-header-pagination-controls-enabled",n._showPaginationControls)("mat-mdc-tab-header-rtl","rtl"==n._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[W],ngContentSelectors:rz,decls:13,vars:10,consts:[["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"matRippleDisabled","disabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-mdc-tab-labels"],["tabListInner",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"matRippleDisabled","disabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(t,n){1&t&&(fe(),ye(0,"button",0,1),xt("click",function(){return n._handlePaginatorClick("before")})("mousedown",function(s){return n._handlePaginatorPress("before",s)})("touchend",function(){return n._stopInterval()}),Ye(2,"div",2),ke(),ye(3,"div",3,4),xt("keydown",function(s){return n._handleKeydown(s)}),ye(5,"div",5,6),xt("cdkObserveContent",function(){return n._onContentChanges()}),ye(7,"div",7,8),ne(9),ke()()(),ye(10,"button",9,10),xt("mousedown",function(s){return n._handlePaginatorPress("after",s)})("click",function(){return n._handlePaginatorClick("after")})("touchend",function(){return n._stopInterval()}),Ye(12,"div",2),ke()),2&t&&(Mi("mat-mdc-tab-header-pagination-disabled",n._disableScrollBefore),Z("matRippleDisabled",n._disableScrollBefore||n.disableRipple)("disabled",n._disableScrollBefore||null),se(3),Mi("_mat-animation-noopable","NoopAnimations"===n._animationMode),se(7),Mi("mat-mdc-tab-header-pagination-disabled",n._disableScrollAfter),Z("matRippleDisabled",n._disableScrollAfter||n.disableRipple)("disabled",n._disableScrollAfter||null))},dependencies:[Yb,lI],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}._mat-animation-noopable span.mdc-tab-indicator__content,._mat-animation-noopable span.mdc-tab__text-label{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2}),i})();const fz=new je("MAT_TABS_CONFIG");let Tpe=0;const Rpe=Qx(uV(class{constructor(i){this._elementRef=i}}),"primary");let Ipe=(()=>{class i extends Rpe{get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(t){this._dynamicHeight=Hi(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=cs(t,null)}get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t+"")?t+"ms":t}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(t){this._contentTabIndex=cs(t,null)}get disablePagination(){return this._disablePagination}set disablePagination(t){this._disablePagination=Hi(t)}get preserveContent(){return this._preserveContent}set preserveContent(t){this._preserveContent=Hi(t)}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const n=this._elementRef.nativeElement.classList;n.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),t&&n.add("mat-tabs-with-background",`mat-background-${t}`),this._backgroundColor=t}constructor(t,n,r,s){super(t),this._changeDetectorRef=n,this._animationMode=s,this._tabs=new Td,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=dn.EMPTY,this._tabLabelSubscription=dn.EMPTY,this._dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this._disablePagination=!1,this._preserveContent=!1,this.selectedIndexChange=new St,this.focusChange=new St,this.animationDone=new St,this.selectedTabChange=new St(!0),this._groupId=Tpe++,this.animationDuration=r&&r.animationDuration?r.animationDuration:"500ms",this.disablePagination=!(!r||null==r.disablePagination)&&r.disablePagination,this.dynamicHeight=!(!r||null==r.dynamicHeight)&&r.dynamicHeight,this.contentTabIndex=r?.contentTabIndex??null,this.preserveContent=!!r?.preserveContent}ngAfterContentChecked(){const t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){const n=null==this._selectedIndex;if(!n){this.selectedTabChange.emit(this._createChangeEvent(t));const r=this._tabBodyWrapper.nativeElement;r.style.minHeight=r.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((r,s)=>r.isActive=s===t),n||(this.selectedIndexChange.emit(t),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((n,r)=>{n.position=r-t,null!=this._selectedIndex&&0==n.position&&!n.origin&&(n.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{const t=this._clampTabIndex(this._indexToSelect);if(t===this._selectedIndex){const n=this._tabs.toArray();let r;for(let s=0;s<n.length;s++)if(n[s].isActive){this._indexToSelect=this._selectedIndex=s,this._lastFocusedTabIndex=null,r=n[s];break}!r&&n[t]&&Promise.resolve().then(()=>{n[t].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(t))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(tc(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(n=>n._closestTabGroup===this||!n._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(t){const n=this._tabHeader;n&&(n.focusIndex=t)}_focusChanged(t){this._lastFocusedTabIndex=t,this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){const n=new Ppe;return n.index=t,this._tabs&&this._tabs.length&&(n.tab=this._tabs.toArray()[t]),n}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=hd(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const n=this._tabBodyWrapper.nativeElement;n.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(n.style.height=t+"px")}_removeTabBodyWrapperHeight(){const t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,n,r){n.focusIndex=r,t.disabled||(this.selectedIndex=r)}_getTabIndex(t){return t===(this._lastFocusedTabIndex??this.selectedIndex)?0:-1}_tabFocusChanged(t,n){t&&"mouse"!==t&&"touch"!==t&&(this._tabHeader.focusIndex=n)}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(er),P(fz,8),P(ts,8))},i.\u0275dir=Oe({type:i,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",preserveContent:"preserveContent",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[W]}),i})(),Dpe=(()=>{class i extends Ipe{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(t){this._fitInkBarToContent=Hi(t),this._changeDetectorRef.markForCheck()}get stretchTabs(){return this._stretchTabs}set stretchTabs(t){this._stretchTabs=Hi(t)}constructor(t,n,r,s){super(t,n,r,s),this._fitInkBarToContent=!1,this._stretchTabs=!0,this.fitInkBarToContent=!(!r||null==r.fitInkBarToContent)&&r.fitInkBarToContent}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(er),P(fz,8),P(ts,8))},i.\u0275cmp=K({type:i,selectors:[["mat-tab-group"]],contentQueries:function(t,n,r){if(1&t&&Fn(r,dz,5),2&t){let s;kt(s=Lt())&&(n._allTabs=s)}},viewQuery:function(t,n){if(1&t&&(ki(ipe,5),ki(npe,5)),2&t){let r;kt(r=Lt())&&(n._tabBodyWrapper=r.first),kt(r=Lt())&&(n._tabHeader=r.first)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:6,hostBindings:function(t,n){2&t&&Mi("mat-mdc-tab-group-dynamic-height",n.dynamicHeight)("mat-mdc-tab-group-inverted-header","below"===n.headerPosition)("mat-mdc-tab-group-stretch-tabs",n.stretchTabs)},inputs:{color:"color",disableRipple:"disableRipple",fitInkBarToContent:"fitInkBarToContent",stretchTabs:["mat-stretch-tabs","stretchTabs"]},exportAs:["matTabGroup"],features:[oe([{provide:cz,useExisting:i}]),W],decls:6,vars:6,consts:[[3,"selectedIndex","disableRipple","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mdc-tab mat-mdc-tab mat-mdc-focus-indicator","role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",3,"id","mdc-tab--active","ngClass","disabled","fitInkBarToContent","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-mdc-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-mdc-tab-body-active","ngClass","content","position","origin","animationDuration","preserveContent","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","ngClass","disabled","fitInkBarToContent","click","cdkFocusChange"],["tabNode",""],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"ngIf","ngIfElse"],["tabTextLabel",""],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","ngClass","content","position","origin","animationDuration","preserveContent","_onCentered","_onCentering"]],template:function(t,n){1&t&&(ye(0,"mat-tab-header",0,1),xt("indexFocused",function(s){return n._focusChanged(s)})("selectFocusedIndex",function(s){return n.selectedIndex=s}),Ft(2,ape,9,17,"div",2),ke(),ye(3,"div",3,4),Ft(5,lpe,1,11,"mat-tab-body",5),ke()),2&t&&(Z("selectedIndex",n.selectedIndex||0)("disableRipple",n.disableRipple),se(2),Z("ngForOf",n._tabs),se(1),Mi("_mat-animation-noopable","NoopAnimations"===n._animationMode),se(2),Z("ngForOf",n._tabs))},dependencies:[e3,$l,Jl,yI,Yb,Yue,sz,lz,Spe],styles:['.mdc-tab{min-width:90px;padding-right:24px;padding-left:24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;margin:0;padding-top:0;padding-bottom:0;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;-webkit-appearance:none;z-index:1}.mdc-tab::-moz-focus-inner{padding:0;border:0}.mdc-tab[hidden]{display:none}.mdc-tab--min-width{flex:0 1 auto}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab__icon{transition:150ms color linear;z-index:2}.mdc-tab--stacked .mdc-tab__content{flex-direction:column;align-items:center;justify-content:center}.mdc-tab--stacked .mdc-tab__text-label{padding-top:6px;padding-bottom:4px}.mdc-tab--active .mdc-tab__text-label,.mdc-tab--active .mdc-tab__icon{transition-delay:100ms}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label,.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl]{padding-left:0;padding-right:8px}.mdc-tab-indicator .mdc-tab-indicator__content--underline{border-top-width:2px}.mdc-tab-indicator .mdc-tab-indicator__content--icon{height:34px;font-size:34px}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator__content--icon{align-self:center;margin:0 auto}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}.mdc-tab-indicator .mdc-tab-indicator__content{transition:250ms transform cubic-bezier(0.4, 0, 0.2, 1)}.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition:150ms opacity linear}.mdc-tab-indicator--active.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition-delay:100ms}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-tab.mdc-tab{height:48px;flex-grow:0}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none}.mat-mdc-tab .mdc-tab__text-label{display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-disabled{opacity:.4}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-mdc-tab-header-with-background-background-color, transparent)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-link .mdc-tab__text-label{color:var(--mat-mdc-tab-header-with-background-foreground-color, inherit)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab-indicator__content--underline,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before{border-color:var(--mat-mdc-tab-header-with-background-foreground-color, inherit)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-mdc-tab-header-with-background-foreground-color, inherit)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{border-color:var(--mat-mdc-tab-header-with-background-foreground-color, inherit)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2}),i})();class Ppe{}let pz=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[Sa,xn,YV,Xb,Gx,Xue,xn]}),i})();const{isArray:kpe}=Array;const nw=new je("HIGHLIGHT_OPTIONS");let Fpe=(()=>{class i{constructor(t,n,r){this.doc=t,this._options=r,this._ready=new zs(null),this.ready=this._ready.asObservable().pipe(On(s=>!!s),wt(s=>s),hs(1)),h3(n)&&(t.defaultView.hljs?this._ready.next(t.defaultView.hljs):this._loadLibrary().pipe(Gs(s=>this._options&&this._options.lineNumbersLoader?(t.defaultView.hljs=s,this.loadLineNumbers().pipe(on(()=>this._ready.next(s)))):(this._ready.next(s),Br)),ea(s=>(console.error("[HLJS] ",s),Br))).subscribe(),this._options?.themePath&&this.loadTheme(this._options.themePath))}_loadLibrary(){if(this._options){if(this._options.fullLibraryLoader&&this._options.coreLibraryLoader)return Jo(()=>"The full library and the core library were imported, only one of them should be imported!");if(this._options.fullLibraryLoader&&this._options.languages)return Jo(()=>"The highlighting languages were imported they are not needed!");if(this._options.coreLibraryLoader&&!this._options.languages)return Jo(()=>"The highlighting languages were not imported!");if(!this._options.coreLibraryLoader&&this._options.languages)return Jo(()=>"The core library was not imported!");if(this._options.fullLibraryLoader)return this.loadFullLibrary();if(this._options.coreLibraryLoader&&this._options.languages&&Object.keys(this._options.languages).length)return this.loadCoreLibrary().pipe(Gs(t=>this._loadLanguages(t)))}return Jo(()=>"Highlight.js library was not imported!")}_loadLanguages(t){return function Bpe(...i){const e=hM(i),t=function Lpe(i){return 1===i.length&&kpe(i[0])?i[0]:i}(i);return t.length?new Fi(n=>{let r=t.map(()=>[]),s=t.map(()=>!1);n.add(()=>{r=s=null});for(let o=0;!n.closed&&o<t.length;o++)us(t[o]).subscribe(un(n,a=>{if(r[o].push(a),r.every(l=>l.length)){const l=r.map(c=>c.shift());n.next(e?e(...l):l),r.some((c,d)=>!c.length&&s[d])&&n.complete()}},()=>{s[o]=!0,!r[o].length&&n.complete()}));return()=>{r=s=null}}):Br}(...Object.entries(this._options.languages).map(([r,s])=>rw(s()).pipe(on(o=>t.registerLanguage(r,o))))).pipe(wt(()=>t))}loadCoreLibrary(){return rw(this._options.coreLibraryLoader())}loadFullLibrary(){return rw(this._options.fullLibraryLoader())}loadLineNumbers(){return rw(this._options.lineNumbersLoader())}setTheme(t){this._themeLinkElement.href=t}loadTheme(t){this._themeLinkElement=this.doc.createElement("link"),this._themeLinkElement.href=t,this._themeLinkElement.type="text/css",this._themeLinkElement.rel="stylesheet",this._themeLinkElement.media="screen,print",this.doc.head.appendChild(this._themeLinkElement)}}return i.\u0275fac=function(t){return new(t||i)(xe(Jt),xe(m_),xe(nw,8))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const rw=i=>En(i).pipe(On(e=>!!e&&!!e.default),wt(e=>e.default));let Ope=(()=>{class i{constructor(t,n){this._loader=t,this._hljs=null,t.ready.subscribe(r=>{this._hljs=r,n&&n.config&&(r.configure(n.config),r.listLanguages().length<1&&console.error("[HighlightJS]: No languages were registered!"))})}get hljs(){return this._hljs}highlight(t,{language:n,ignoreIllegals:r}){return this._loader.ready.pipe(wt(s=>s.highlight(t,{language:n,ignoreIllegals:r})))}highlightAuto(t,n){return this._loader.ready.pipe(wt(r=>r.highlightAuto(t,n)))}highlightElement(t){return this._loader.ready.pipe(wt(n=>n.highlightElement(t)))}highlightAll(){return this._loader.ready.pipe(wt(t=>t.highlightAll()))}configure(t){return this._loader.ready.pipe(wt(n=>n.configure(t)))}registerLanguage(t,n){return this._loader.ready.pipe(on(r=>r.registerLanguage(t,n)))}unregisterLanguage(t){return this._loader.ready.pipe(on(n=>n.unregisterLanguage(t)))}registerAliases(t,{languageName:n}){return this._loader.ready.pipe(on(r=>r.registerAliases(t,{languageName:n})))}listLanguages(){return this._loader.ready.pipe(wt(t=>t.listLanguages()))}getLanguage(t){return this._loader.ready.pipe(wt(n=>n.getLanguage(t)))}safeMode(){return this._loader.ready.pipe(wt(t=>t.safeMode()))}debugMode(){return this._loader.ready.pipe(wt(t=>t.debugMode()))}lineNumbersBlock(t){return this._loader.ready.pipe(On(n=>!!n.lineNumbersBlock),on(n=>n.lineNumbersBlock(t)))}}return i.\u0275fac=function(t){return new(t||i)(xe(Fpe),xe(nw,8))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Npe=(()=>{class i{constructor(t,n,r,s){this._hljs=n,this._sanitizer=r,this._options=s,this.highlighted=new St,this._nativeElement=t.nativeElement}ngOnChanges(t){null!==t?.code?.currentValue&&t.code.currentValue!==t.code.previousValue&&(this.code?this.highlightElement(this.code,this.languages):this.setTextContent(""))}highlightElement(t,n){this.setTextContent(t),this._hljs.highlightAuto(t,n).subscribe(r=>{this.setInnerHTML(r?.value),this.lineNumbers&&this._options&&this._options.lineNumbersLoader&&this.addLineNumbers(),this.highlighted.emit(r)})}addLineNumbers(){this.destroyLineNumbersObserver(),ew.schedule(()=>{this._hljs.lineNumbersBlock(this._nativeElement).subscribe(),this._lineNumbersObs=new MutationObserver(()=>{this._nativeElement.firstElementChild&&"TABLE"===this._nativeElement.firstElementChild.tagName.toUpperCase()&&this._nativeElement.classList.add("hljs-line-numbers"),this.destroyLineNumbersObserver()}),this._lineNumbersObs.observe(this._nativeElement,{childList:!0})})}destroyLineNumbersObserver(){this._lineNumbersObs&&(this._lineNumbersObs.disconnect(),this._lineNumbersObs=null)}setTextContent(t){ew.schedule(()=>this._nativeElement.textContent=t)}setInnerHTML(t){ew.schedule(()=>this._nativeElement.innerHTML=this._sanitizer.sanitize(Pi.HTML,t)||"")}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(Ope),P(PA),P(nw,8))},i.\u0275dir=Oe({type:i,selectors:[["","highlight",""]],hostVars:2,hostBindings:function(t,n){2&t&&Mi("hljs",!0)},inputs:{code:["highlight","code"],languages:"languages",lineNumbers:"lineNumbers"},outputs:{highlighted:"highlighted"},features:[Sr]}),i})(),mz=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({}),i})();const Upe={connector:()=>new Ht};function Gpe(i,e,t,n){t&&!Si(t)&&(n=t);const r=Si(t)?t:void 0;return s=>function zpe(i,e){const t=Si(i)?i:()=>i;return Si(e)?function Vpe(i,e=Upe){const{connector:t}=e;return Mn((n,r)=>{const s=t();En(i(function jpe(i){return new Fi(e=>i.subscribe(e))}(s))).subscribe(r),r.add(n.subscribe(s))})}(e,{connector:t}):n=>new mS(n,t)}(new jR(i,e,n),r)(s)}const Hpe=new je("GIST_OPTIONS");let Qpe=(()=>{class i{constructor(t,n){this._http=t,this._options=n}getCodeFromGist(t){let n;return this.isOAuthProvided()&&(n=(new Ll).set("client_id",this._options.clientId).set("client_secret",this._options.clientSecret)),this.fetchFile(`https://api.github.com/gists/${t}`,{params:n,responseType:"json"})}getCodeFromUrl(t){return this.fetchFile(t,{responseType:"text"})}isOAuthProvided(){return!!this._options&&!!this._options.clientId&&!!this._options.clientSecret}fetchFile(t,n){return function Wpe(i){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(i)}(t)?this._http.get(t,n).pipe(Gpe(1),BA(),ea(r=>(console.error("[NgxHighlight]: Unable to fetch the URL!",r.message),Br))):Br}}return i.\u0275fac=function(t){return new(t||i)(xe(Zx),xe(Hpe,8))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),qpe=(()=>{class i{constructor(t){this._loader=t}transform(t){return this._loader.getCodeFromUrl(t)}}return i.\u0275fac=function(t){return new(t||i)(P(Qpe,16))},i.\u0275pipe=gi({name:"codeFromUrl",type:i,pure:!0}),i})(),Ype=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[mz,jhe,mz]}),i})();function Xpe(i,e){if(1&i&&(ye(0,"mat-tab",5)(1,"pre"),Xi(2,"            "),Ye(3,"code",6),hr(4,"async"),hr(5,"codeFromUrl"),Xi(6,"\n        "),ke()()),2&i){const t=e.$implicit,n=e.index,r=vi();Z("label",r.fileNames[n]),se(3),Z("highlight",wr(4,3,wr(5,5,t)))("lineNumbers",r.lineNumbers)}}class r0{constructor(e){this.editorService=e,this.fileNames=[],this.lineNumbers=!1}set codeUrls(e){this.editorService.setUrls(e),this.fileNames=this.editorService.fileNames}get codeUrls(){return this.editorService.urls}}function Zpe(i,e){1&i&&i_(0)}r0.\u0275fac=function(e){return new(e||r0)(P(Ox))},r0.\u0275cmp=K({type:r0,selectors:[["app-code"]],inputs:{codeUrls:"codeUrls",lineNumbers:"lineNumbers"},decls:14,vars:1,consts:[[1,"code-wrapper","hljs"],["dynamicHeight","","color","primary","backgroundColor","primary"],[3,"label",4,"ngFor","ngForOf"],["align","end"],["mat-button","","href","#",1,"gist-url",3,"click"],[3,"label"],[3,"highlight","lineNumbers"]],template:function(e,t){1&e&&(ye(0,"mat-card")(1,"mat-card-content")(2,"div",0)(3,"mat-tab-group",1),Ft(4,Xpe,7,7,"mat-tab",2),ke()()(),ye(5,"mat-card-actions",3)(6,"button",4),xt("click",function(r){return t.editorService.toCodeSandbox(r)}),ye(7,"mat-icon"),Xi(8,"crop_din"),ke(),Xi(9," CodeSandbox "),ke(),ye(10,"button",4),xt("click",function(r){return t.editorService.toStackblitz(r)}),ye(11,"mat-icon"),Xi(12,"bolt"),ke(),Xi(13," Stackblitz "),ke()()()),2&e&&(se(4),Z("ngForOf",t.codeUrls))},dependencies:[$l,AV,zV,GV,QV,HV,dz,Dpe,Npe,tS,qpe],styles:["pre[_ngcontent-%COMP%]{display:flex;margin-top:0;margin-bottom:0;word-wrap:break-word}pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{flex:1;line-height:1.8em;font-size:14px;min-height:100%;padding:1em 1.2em}pre[_ngcontent-%COMP%]   code.hljs-line-numbers[_ngcontent-%COMP%]{padding:0}.mat-mdc-card[_ngcontent-%COMP%]{padding:0;margin-bottom:3em}.mat-card-header[_ngcontent-%COMP%]{margin:0!important;padding:0!important;display:flex;align-items:center;height:40px}.mat-card-content[_ngcontent-%COMP%]{position:relative;overflow:hidden;padding:1px;margin-bottom:0}.mat-card-footer[_ngcontent-%COMP%]{padding:10px!important;margin:0!important;display:flex;flex-direction:row-reverse}.mat-card-footer[_ngcontent-%COMP%]   .gist-url[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:300;font-size:13px;text-decoration:unset}.mat-card-footer[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.mat-icon[_ngcontent-%COMP%]{margin:0 3px}.code-wrapper[_ngcontent-%COMP%]{border-radius:3px 3px 0 0}  .hljs{padding:0;border:none;transition:border ease 1s}  .hljs-ln{padding:10px 0}  .hljs-ln tr:first-child td{padding-top:10px!important}  .hljs-ln tr:last-child td{padding-bottom:10px!important}  td.hljs-ln-numbers{-webkit-user-select:none;user-select:none;text-align:center;color:#cccccc6b;border-right:1px solid rgba(204,204,204,.1098039216);vertical-align:top;padding-right:10px!important;padding-left:10px!important}  td.hljs-ln-code{padding-left:10px!important}"],changeDetection:0});class s0{constructor(e,t){this.editorService=e,this.route=t,this.exampleComponent=null,this.codeUrls=this.route.snapshot.data.codeUrls??[],this.editorService.declarations=this.route.snapshot.data.declarations,this.exampleComponent=this.route.snapshot.data.exampleComponent}ngOnInit(){}}s0.\u0275fac=function(e){return new(e||s0)(P(Ox),P(Fd))},s0.\u0275cmp=K({type:s0,selectors:[["app-example-page"]],decls:3,vars:3,consts:[[1,"example-container"],[4,"ngComponentOutlet"],[3,"lineNumbers","codeUrls"]],template:function(e,t){1&e&&(ye(0,"div",0),Ft(1,Zpe,1,0,"ng-container",1),ke(),Ye(2,"app-code",2)),2&e&&(se(1),Z("ngComponentOutlet",t.exampleComponent),se(1),Z("lineNumbers",!0)("codeUrls",t.codeUrls))},dependencies:[t3,r0]});class Tu{}Tu.\u0275fac=function(e){return new(e||Tu)},Tu.\u0275mod=oi({type:Tu}),Tu.\u0275inj=ni({});class Ip{}Ip.\u0275fac=function(e){return new(e||Ip)},Ip.\u0275mod=oi({type:Ip}),Ip.\u0275inj=ni({imports:[Tu,Sa,Tu]});const Kpe=/^[og]\s*(.+)?/,$pe=/^mtllib /,Jpe=/^usemtl /,eme=/^usemap /,gz=/\s+/,_z=new R,EI=new R,bz=new R,vz=new R,Lo=new R,sw=new Be;function tme(){const i={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const a={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:void 0!==o?o.smooth:this.smooth,groupStart:void 0!==o?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const c={index:"number"==typeof l?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&-1===s.groupEnd&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return r&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),s}},n&&n.name&&"function"==typeof n.clone){const r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){const n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(e,t,n){const r=this.vertices,s=this.object.geometry.normals;_z.fromArray(r,e),EI.fromArray(r,t),bz.fromArray(r,n),Lo.subVectors(bz,EI),vz.subVectors(_z,EI),Lo.cross(vz),Lo.normalize(),s.push(Lo.x,Lo.y,Lo.z),s.push(Lo.x,Lo.y,Lo.z),s.push(Lo.x,Lo.y,Lo.z)},addColor:function(e,t,n){const r=this.colors,s=this.object.geometry.colors;void 0!==r[e]&&s.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&s.push(r[t+0],r[t+1],r[t+2]),void 0!==r[n]&&s.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[n+0],r[n+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,s,o,a,l,c){const d=this.vertices.length;let u=this.parseVertexIndex(e,d),h=this.parseVertexIndex(t,d),f=this.parseVertexIndex(n,d);if(this.addVertex(u,h,f),this.addColor(u,h,f),void 0!==a&&""!==a){const m=this.normals.length;u=this.parseNormalIndex(a,m),h=this.parseNormalIndex(l,m),f=this.parseNormalIndex(c,m),this.addNormal(u,h,f)}else this.addFaceNormal(u,h,f);if(void 0!==r&&""!==r){const m=this.uvs.length;u=this.parseUVIndex(r,m),h=this.parseUVIndex(s,m),f=this.parseUVIndex(o,m),this.addUV(u,h,f),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let n=0,r=e.length;n<r;n++){const s=this.parseVertexIndex(e[n],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(let s=0,o=e.length;s<o;s++)this.addVertexLine(this.parseVertexIndex(e[s],n));for(let s=0,o=t.length;s<o;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return i.startObject("",!1),i}class ime extends br{constructor(e){super(e),this.materials=null}load(e,t,n,r){const s=this,o=new vr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(a))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new tme;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const n=e.split("\n");let r=[];for(let a=0,l=n.length;a<l;a++){const c=n[a].trimStart();if(0===c.length)continue;const d=c.charAt(0);if("#"!==d)if("v"===d){const u=c.split(gz);switch(u[0]){case"v":t.vertices.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])),u.length>=7?(sw.setRGB(parseFloat(u[4]),parseFloat(u[5]),parseFloat(u[6])).convertSRGBToLinear(),t.colors.push(sw.r,sw.g,sw.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3]));break;case"vt":t.uvs.push(parseFloat(u[1]),parseFloat(u[2]))}}else if("f"===d){const h=c.slice(1).trim().split(gz),f=[];for(let g=0,_=h.length;g<_;g++){const p=h[g];if(p.length>0){const v=p.split("/");f.push(v)}}const m=f[0];for(let g=1,_=f.length-1;g<_;g++){const p=f[g],v=f[g+1];t.addFace(m[0],p[0],v[0],m[1],p[1],v[1],m[2],p[2],v[2])}}else if("l"===d){const u=c.substring(1).trim().split(" ");let h=[];const f=[];if(-1===c.indexOf("/"))h=u;else for(let m=0,g=u.length;m<g;m++){const _=u[m].split("/");""!==_[0]&&h.push(_[0]),""!==_[1]&&f.push(_[1])}t.addLineGeometry(h,f)}else if("p"===d){const h=c.slice(1).trim().split(" ");t.addPointGeometry(h)}else if(null!==(r=Kpe.exec(c))){const u=(" "+r[0].slice(1).trim()).slice(1);t.startObject(u)}else if(Jpe.test(c))t.object.startMaterial(c.substring(7).trim(),t.materialLibraries);else if($pe.test(c))t.materialLibraries.push(c.substring(7).trim());else if(eme.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===d){if(r=c.split(" "),r.length>1){const h=r[1].trim().toLowerCase();t.object.smooth="0"!==h&&"off"!==h}else t.object.smooth=!0;const u=t.object.currentMaterial();u&&(u.smooth=t.object.smooth)}else{if("\0"===c)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}t.finalize();const s=new xs;if(s.materialLibraries=[].concat(t.materialLibraries),1==!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let a=0,l=t.objects.length;a<l;a++){const c=t.objects[a],d=c.geometry,u=c.materials,h="Line"===d.type,f="Points"===d.type;let m=!1;if(0===d.vertices.length)continue;const g=new Mt;g.setAttribute("position",new Ze(d.vertices,3)),d.normals.length>0&&g.setAttribute("normal",new Ze(d.normals,3)),d.colors.length>0&&(m=!0,g.setAttribute("color",new Ze(d.colors,3))),!0===d.hasUVIndices&&g.setAttribute("uv",new Ze(d.uvs,2));const _=[];for(let v=0,b=u.length;v<b;v++){const y=u[v],x=y.name+"_"+y.smooth+"_"+m;let w=t.materials[x];if(null!==this.materials)if(w=this.materials.create(y.name),!h||!w||w instanceof mn){if(f&&w&&!(w instanceof Tl)){const E=new Tl({size:10,sizeAttenuation:!1});Un.prototype.copy.call(E,w),E.color.copy(w.color),E.map=w.map,w=E}}else{const E=new mn;Un.prototype.copy.call(E,w),E.color.copy(w.color),w=E}void 0===w&&(w=h?new mn:f?new Tl({size:1,sizeAttenuation:!1}):new nu,w.name=y.name,w.flatShading=!y.smooth,w.vertexColors=m,t.materials[x]=w),_.push(w)}let p;if(_.length>1){for(let v=0,b=u.length;v<b;v++){const y=u[v];g.addGroup(y.groupStart,y.groupCount,v)}p=h?new ws(g,_):f?new $d(g,_):new nt(g,_)}else p=h?new ws(g,_[0]):f?new $d(g,_[0]):new nt(g,_[0]);p.name=c.name,s.add(p)}else if(t.vertices.length>0){const a=new Tl({size:1,sizeAttenuation:!1}),l=new Mt;l.setAttribute("position",new Ze(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(l.setAttribute("color",new Ze(t.colors,3)),a.vertexColors=!0);const c=new $d(l,a);s.add(c)}return s}}class Tc extends Ua{constructor(){super(...arguments),this.clazz=ime}}Tc.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Tc)))(t||Tc)}}(),Tc.\u0275prov=Ge({token:Tc,factory:Tc.\u0275fac,providedIn:"root"});class ow extends Px{constructor(e){super(),this.service=e}}ow.\u0275fac=function(e){return new(e||ow)(P(Tc,16))},ow.\u0275pipe=gi({name:"loadObj",type:ow,pure:!0});class aw extends bu{constructor(e,t,n){super(e,t),this.host=e,this.zone=t,this.service=n}getRefFromResponse(e){return e}}aw.\u0275fac=function(e){return new(e||aw)(P(Ke,1),P(pt),P(Tc))},aw.\u0275dir=Oe({type:aw,selectors:[["","loadObj",""]],features:[W]});var SI=function(i){return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))};try{URL.revokeObjectURL(SI(""))}catch{SI=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)}}var Zi=Uint8Array,Mr=Uint16Array,Rc=Uint32Array,Dp=new Zi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Pp=new Zi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o0=new Zi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xz=function(i,e){for(var t=new Mr(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];var r=new Rc(t[30]);for(n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)r[s]=s-t[n]<<5|n;return[t,r]},wz=xz(Dp,2),TI=wz[0],lw=wz[1];TI[28]=258,lw[258]=28;for(var Mz=xz(Pp,0)[0],a0=new Mr(32768),_n=0;_n<32768;++_n){var Ic=(43690&_n)>>>1|(21845&_n)<<1;a0[_n]=((65280&(Ic=(61680&(Ic=(52428&Ic)>>>2|(13107&Ic)<<2))>>>4|(3855&Ic)<<4))>>>8|(255&Ic)<<8)>>>1}var Qa=function(i,e,t){for(var n=i.length,r=0,s=new Mr(e);r<n;++r)++s[i[r]-1];var a,o=new Mr(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;if(t){a=new Mr(1<<e);var l=15-e;for(r=0;r<n;++r)if(i[r])for(var c=r<<4|i[r],d=e-i[r],u=o[i[r]-1]++<<d,h=u|(1<<d)-1;u<=h;++u)a[a0[u]>>>l]=c}else for(a=new Mr(n),r=0;r<n;++r)i[r]&&(a[r]=a0[o[i[r]-1]++]>>>15-i[r]);return a},Dc=new Zi(288);for(_n=0;_n<144;++_n)Dc[_n]=8;for(_n=144;_n<256;++_n)Dc[_n]=9;for(_n=256;_n<280;++_n)Dc[_n]=7;for(_n=280;_n<288;++_n)Dc[_n]=8;var l0=new Zi(32);for(_n=0;_n<32;++_n)l0[_n]=5;var Sz=Qa(Dc,9,1),Rz=Qa(l0,5,1),cw=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},Bo=function(i,e,t){var n=e/8|0;return(i[n]|i[n+1]<<8)>>(7&e)&t},dw=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(7&e)},c0=function(i){return(i/8|0)+(7&i&&1)},uw=function(i,e,t){var n=i.length;if(!n||t&&!t.l&&n<5)return e||new Zi(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new Zi(3*n));var o=function($){var I=e.length;if($>I){var ue=new Zi(Math.max(2*I,$));ue.set(e),e=ue}},a=t.f||0,l=t.p||0,c=t.b||0,d=t.l,u=t.d,h=t.m,f=t.n,m=8*n;do{if(!d){t.f=a=Bo(i,l,1);var g=Bo(i,l+1,3);if(l+=3,!g){var p=i[(_=c0(l)+4)-4]|i[_-3]<<8,v=_+p;if(v>n){if(s)throw"unexpected EOF";break}r&&o(c+p),e.set(i.subarray(_,v),c),t.b=c+=p,t.p=l=8*v;continue}if(1==g)d=Sz,u=Rz,h=9,f=5;else{if(2!=g)throw"invalid block type";var b=Bo(i,l,31)+257,y=Bo(i,l+10,15)+4,x=b+Bo(i,l+5,31)+1;l+=14;for(var w=new Zi(x),E=new Zi(19),S=0;S<y;++S)E[o0[S]]=Bo(i,l+3*S,7);l+=3*y;var C=cw(E),T=(1<<C)-1,k=Qa(E,C,1);for(S=0;S<x;){var _,U=k[Bo(i,l,T)];if(l+=15&U,(_=U>>>4)<16)w[S++]=_;else{var B=0,j=0;for(16==_?(j=3+Bo(i,l,3),l+=2,B=w[S-1]):17==_?(j=3+Bo(i,l,7),l+=3):18==_&&(j=11+Bo(i,l,127),l+=7);j--;)w[S++]=B}}var H=w.subarray(0,b),L=w.subarray(b);h=cw(H),f=cw(L),d=Qa(H,h,1),u=Qa(L,f,1)}if(l>m){if(s)throw"unexpected EOF";break}}r&&o(c+131072);for(var V=(1<<h)-1,O=(1<<f)-1,Q=l;;Q=l){var re=(B=d[dw(i,l)&V])>>>4;if((l+=15&B)>m){if(s)throw"unexpected EOF";break}if(!B)throw"invalid length/literal";if(re<256)e[c++]=re;else{if(256==re){Q=l,d=null;break}var _e=re-254;re>264&&(_e=Bo(i,l,(1<<(de=Dp[S=re-257]))-1)+TI[S],l+=de);var Y=u[dw(i,l)&O],q=Y>>>4;if(!Y)throw"invalid distance";if(l+=15&Y,L=Mz[q],q>3){var de=Pp[q];L+=dw(i,l)&(1<<de)-1,l+=de}if(l>m){if(s)throw"unexpected EOF";break}r&&o(c+131072);for(var te=c+_e;c<te;c+=4)e[c]=e[c-L],e[c+1]=e[c+1-L],e[c+2]=e[c+2-L],e[c+3]=e[c+3-L];c=te}}t.l=d,t.p=Q,t.b=c,d&&(a=1,t.m=h,t.d=u,t.n=f)}while(!a);return c==e.length?e:function(i,e,t){(null==e||e<0)&&(e=0),(null==t||t>i.length)&&(t=i.length);var n=new(i instanceof Mr?Mr:i instanceof Rc?Rc:Zi)(t-e);return n.set(i.subarray(e,t)),n}(e,0,c)},pw=new Zi(0);function Lc(i,e){return uw((function(i){if(8!=(15&i[0])||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(32&i[1])throw"invalid zlib data: preset dictionaries not supported"}(i),i.subarray(2,-4)),e)}var NI=typeof TextDecoder<"u"&&new TextDecoder;try{NI.decode(pw,{stream:!0})}catch{}function xw(i,e,t){const n=t.length-i-1;if(e>=t[n])return n-1;if(e<=t[i])return i;let r=i,s=n,o=Math.floor((r+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:r=o,o=Math.floor((r+s)/2);return o}function vme(i,e){let t=1;for(let r=2;r<=i;++r)t*=r;let n=1;for(let r=2;r<=e;++r)n*=r;for(let r=2;r<=i-e;++r)n*=r;return t/n}class xme extends Eo{constructor(e,t,n,r,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<n.length;++o){const a=n[o];this.controlPoints[o]=new ei(a.x,a.y,a.z,a.w)}}getPoint(e,t=new R){const n=t,s=function gme(i,e,t,n){const r=xw(i,n,e),s=function jI(i,e,t,n){const r=[],s=[],o=[];r[0]=1;for(let a=1;a<=t;++a){s[a]=e-n[i+1-a],o[a]=n[i+a]-e;let l=0;for(let c=0;c<a;++c){const d=o[c+1],u=s[a-c],h=r[c]/(d+u);r[c]=l+d*h,l=u*h}r[a]=l}return r}(r,n,i,e),o=new ei(0,0,0,0);for(let a=0;a<=i;++a){const l=t[r-i+a],c=s[a],d=l.w*c;o.x+=l.x*d,o.y+=l.y*d,o.z+=l.z*d,o.w+=l.w*c}return o}(this.degree,this.knots,this.controlPoints,this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]));return 1!==s.w&&s.divideScalar(s.w),n.set(s.x,s.y,s.z)}getTangent(e,t=new R){const n=t,s=function yme(i,e,t,n,r){const s=function bme(i,e,t,n,r){const s=r<i?r:i,o=[],a=xw(i,n,e),l=function _me(i,e,t,n,r){const s=[];for(let u=0;u<=t;++u)s[u]=0;const o=[];for(let u=0;u<=n;++u)o[u]=s.slice(0);const a=[];for(let u=0;u<=t;++u)a[u]=s.slice(0);a[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let u=1;u<=t;++u){l[u]=e-r[i+1-u],c[u]=r[i+u]-e;let h=0;for(let f=0;f<u;++f){const m=c[f+1],g=l[u-f];a[u][f]=m+g;const _=a[f][u-1]/a[u][f];a[f][u]=h+m*_,h=g*_}a[u][u]=h}for(let u=0;u<=t;++u)o[0][u]=a[u][t];for(let u=0;u<=t;++u){let h=0,f=1;const m=[];for(let g=0;g<=t;++g)m[g]=s.slice(0);m[0][0]=1;for(let g=1;g<=n;++g){let _=0;const p=u-g,v=t-g;u>=g&&(m[f][0]=m[h][0]/a[v+1][p],_=m[f][0]*a[p][v]);const y=u-1<=v?g-1:t-u;for(let w=p>=-1?1:-p;w<=y;++w)m[f][w]=(m[h][w]-m[h][w-1])/a[v+1][p+w],_+=m[f][w]*a[p+w][v];u<=v&&(m[f][g]=-m[h][g-1]/a[v+1][u],_+=m[f][g]*a[u][v]),o[g][u]=_;const x=h;h=f,f=x}}let d=t;for(let u=1;u<=n;++u){for(let h=0;h<=t;++h)o[u][h]*=d;d*=t-u}return o}(a,n,i,s,e),c=[];for(let d=0;d<t.length;++d){const u=t[d].clone(),h=u.w;u.x*=h,u.y*=h,u.z*=h,c[d]=u}for(let d=0;d<=s;++d){const u=c[a-i].clone().multiplyScalar(l[d][0]);for(let h=1;h<=i;++h)u.add(c[a-i+h].clone().multiplyScalar(l[d][h]));o[d]=u}for(let d=s+1;d<=r+1;++d)o[d]=new ei(0,0,0);return o}(i,e,t,n,r);return function Ame(i){const e=i.length,t=[],n=[];for(let s=0;s<e;++s){const o=i[s];t[s]=new R(o.x,o.y,o.z),n[s]=o.w}const r=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(r[s-a].clone().multiplyScalar(vme(s,a)*n[a]));r[s]=o.divideScalar(n[0])}return r}(s)}(this.degree,this.knots,this.controlPoints,this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),1);return n.copy(s[1]).normalize(),n}}let yi,$n,Is;class wme extends br{constructor(e){super(e)}load(e,t,n,r){const s=this,o=""===s.path?uu.extractUrlBase(e):s.path,a=new vr(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},n,r)}parse(e,t){if(function Rme(i){const e="Kaydara FBX Binary  \0";return i.byteLength>=e.length&&e===eG(i,0,e.length)}(e))yi=(new Tme).parse(e);else{const r=eG(e);if(!function Ime(i){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function n(r){const s=i[r-1];return i=i.slice(t+r),t++,s}for(let r=0;r<e.length;++r)if(n(1)===e[r])return!1;return!0}(r))throw new Error("THREE.FBXLoader: Unknown format.");if(Kz(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Kz(r));yi=(new Sme).parse(r)}const n=new Ax(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new Cme(n,this.manager).parse(yi)}}class Cme{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){$n=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),r=this.parseDeformers(),s=(new Mme).parse(r);return this.parseScene(r,s,n),Is}parseConnections(){const e=new Map;return"Connections"in yi&&yi.Connections.connections.forEach(function(n){const r=n[0],s=n[1],o=n[2];e.has(r)||e.set(r,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(r).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:r,relationship:o};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in yi.Objects){const n=yi.Objects.Video;for(const r in n){const s=n[r];if(e[parseInt(r)]=s.RelativeFilename||s.Filename,"Content"in s&&(s.Content instanceof ArrayBuffer&&s.Content.byteLength>0||"string"==typeof s.Content&&""!==s.Content)){const c=this.parseImage(n[r]);t[s.RelativeFilename||s.Filename]=c}}}for(const n in e){const r=e[n];e[n]=void 0!==t[r]?t[r]:e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,r=n.slice(n.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",n),s="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+r+'" is not supported.')}if("string"==typeof t)return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in yi.Objects){const n=yi.Objects.Texture;for(const r in n){const s=this.parseTexture(n[r],e);t.set(parseInt(r),s)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,a=void 0!==s?s.value:0;if(n.wrapS=0===(void 0!==r?r.value:0)?xo:mr,n.wrapT=0===a?xo:mr,"Scaling"in e){const l=e.Scaling.value;n.repeat.x=l[0],n.repeat.y=l[1]}if("Translation"in e){const l=e.Translation.value;n.offset.x=l[0],n.offset.y=l[1]}return n}loadTexture(e,t){let n;const r=this.textureLoader.path,s=$n.get(e.id).children;let o;void 0!==s&&s.length>0&&void 0!==t[s[0].ID]&&(n=t[s[0].ID],(0===n.indexOf("blob:")||0===n.indexOf("data:"))&&this.textureLoader.setPath(void 0));const a=e.FileName.slice(-3).toLowerCase();if("tga"===a){const l=this.manager.getHandler(".tga");null===l?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new An):(l.setPath(this.textureLoader.path),o=l.load(n))}else"psd"===a?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new An):o=this.textureLoader.load(n);return this.textureLoader.setPath(r),o}parseMaterials(e){const t=new Map;if("Material"in yi.Objects){const n=yi.Objects.Material;for(const r in n){const s=this.parseMaterial(n[r],e);null!==s&&t.set(parseInt(r),s)}}return t}parseMaterial(e,t){const n=e.id,r=e.attrName;let s=e.ShadingModel;if("object"==typeof s&&(s=s.value),!$n.has(n))return null;const o=this.parseParameters(e,t,n);let a;switch(s.toLowerCase()){case"phong":a=new nu;break;case"lambert":a=new bx;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new nu}return a.setValues(o),a.name=r,a}parseParameters(e,t,n){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=(new Be).fromArray(e.Diffuse.value).convertSRGBToLinear():e.DiffuseColor&&("Color"===e.DiffuseColor.type||"ColorRGB"===e.DiffuseColor.type)&&(r.color=(new Be).fromArray(e.DiffuseColor.value).convertSRGBToLinear()),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=(new Be).fromArray(e.Emissive.value).convertSRGBToLinear():e.EmissiveColor&&("Color"===e.EmissiveColor.type||"ColorRGB"===e.EmissiveColor.type)&&(r.emissive=(new Be).fromArray(e.EmissiveColor.value).convertSRGBToLinear()),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=(new Be).fromArray(e.Specular.value).convertSRGBToLinear():e.SpecularColor&&"Color"===e.SpecularColor.type&&(r.specular=(new Be).fromArray(e.SpecularColor.value).convertSRGBToLinear());const s=this;return $n.get(n).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":r.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(t,o.ID),void 0!==r.map&&(r.map.encoding=ci);break;case"DisplacementColor":r.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(t,o.ID),void 0!==r.emissiveMap&&(r.emissiveMap.encoding=ci);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":r.envMap=s.getTexture(t,o.ID),void 0!==r.envMap&&(r.envMap.mapping=mf,r.envMap.encoding=ci);break;case"SpecularColor":r.specularMap=s.getTexture(t,o.ID),void 0!==r.specularMap&&(r.specularMap.encoding=ci);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(t,o.ID),r.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a)}}),r}getTexture(e,t){return"LayeredTexture"in yi.Objects&&t in yi.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=$n.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in yi.Objects){const n=yi.Objects.Deformer;for(const r in n){const s=n[r],o=$n.get(parseInt(r));if("Skin"===s.attrType){const a=this.parseSkeleton(o,n);a.ID=r,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[r]=a}else if("BlendShape"===s.attrType){const a={id:r};a.rawTargets=this.parseMorphTargets(o,n),a.id=r,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e.children.forEach(function(r){const s=t[r.ID];if("Cluster"!==s.attrType)return;const o={ID:r.ID,indices:[],weights:[],transformLink:(new We).fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),n.push(o)}),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if("BlendShapeChannel"!==o.attrType)return;a.geoID=$n.get(parseInt(s.ID)).children.filter(function(l){return void 0===l.relationship})[0].ID,n.push(a)}return n}parseScene(e,t,n){Is=new xs;const r=this.parseModels(e.skeletons,t,n),s=yi.Objects.Model,o=this;r.forEach(function(l){o.setLookAtProperties(l,s[l.ID]),$n.get(l.ID).parents.forEach(function(u){const h=r.get(u.ID);void 0!==h&&h.add(l)}),null===l.parent&&Is.add(l)}),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),Is.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=$z(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const a=(new Eme).parse();1===Is.children.length&&Is.children[0].isGroup&&(Is.children[0].animations=a,Is=Is.children[0]),Is.animations=a}parseModels(e,t,n){const r=new Map,s=yi.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],c=$n.get(a);let d=this.buildSkeleton(c,e,a,l.attrName);if(!d){switch(l.attrType){case"Camera":d=this.createCamera(c);break;case"Light":d=this.createLight(c);break;case"Mesh":d=this.createMesh(c,t,n);break;case"NurbsCurve":d=this.createCurve(c,t);break;case"LimbNode":case"Root":d=new Kd;break;default:d=new xs}d.name=l.attrName?ji.sanitizeNodeName(l.attrName):"",d.ID=a}this.getTransformData(d,l),r.set(a,d)}return r}buildSkeleton(e,t,n,r){let s=null;return e.parents.forEach(function(o){for(const a in t){const l=t[a];l.rawBones.forEach(function(c,d){if(c.ID===o.ID){const u=s;s=new Kd,s.matrixWorld.copy(c.transformLink),s.name=r?ji.sanitizeNodeName(r):"",s.ID=n,l.bones[d]=s,null!==u&&s.add(u)}})}}),s}createCamera(e){let t,n;if(e.children.forEach(function(r){const s=yi.Objects.NodeAttribute[r.ID];void 0!==s&&(n=s)}),void 0===n)t=new pi;else{let r=0;void 0!==n.CameraProjectionType&&1===n.CameraProjectionType.value&&(r=1);let s=1;void 0!==n.NearPlane&&(s=n.NearPlane.value/1e3);let o=1e3;void 0!==n.FarPlane&&(o=n.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;void 0!==n.AspectWidth&&void 0!==n.AspectHeight&&(a=n.AspectWidth.value,l=n.AspectHeight.value);const c=a/l;let d=45;void 0!==n.FieldOfView&&(d=n.FieldOfView.value);const u=n.FocalLength?n.FocalLength.value:null;switch(r){case 0:t=new In(d,c,s,o),null!==u&&t.setFocalLength(u);break;case 1:t=new La(-a/2,a/2,l/2,-l/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new pi}}return t}createLight(e){let t,n;if(e.children.forEach(function(r){const s=yi.Objects.NodeAttribute[r.ID];void 0!==s&&(n=s)}),void 0===n)t=new pi;else{let r;r=void 0===n.LightType?0:n.LightType.value;let s=16777215;void 0!==n.Color&&(s=(new Be).fromArray(n.Color.value).convertSRGBToLinear());let o=void 0===n.Intensity?1:n.Intensity.value/100;void 0!==n.CastLightOnObject&&0===n.CastLightOnObject.value&&(o=0);let a=0;void 0!==n.FarAttenuationEnd&&(a=void 0!==n.EnableFarAttenuation&&0===n.EnableFarAttenuation.value?0:n.FarAttenuationEnd.value);const l=1;switch(r){case 0:t=new gp(s,o,a,l);break;case 1:t=new Eb(s,o);break;case 2:let c=Math.PI/3;void 0!==n.InnerAngle&&(c=vt.degToRad(n.InnerAngle.value));let d=0;void 0!==n.OuterAngle&&(d=vt.degToRad(n.OuterAngle.value),d=Math.max(d,1)),t=new Cb(s,o,a,c,d,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new gp(s,o)}void 0!==n.CastShadows&&1===n.CastShadows.value&&(t.castShadow=!0)}return t}createMesh(e,t,n){let r,s=null,o=null;const a=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),n.has(l.ID)&&a.push(n.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new nu({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(r=new fb(s,o),r.normalizeSkinWeights()):r=new nt(s,o),r}createCurve(e,t){const n=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),r=new mn({color:3342591,linewidth:1});return new Vn(n,r)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),n.eulerOrder="RotationOrder"in t?Jz(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){"LookAtProperty"in t&&$n.get(e.ID).children.forEach(function(r){if("LookAtProperty"===r.relationship){const s=yi.Objects.Model[r.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(o),Is.add(e.target)):e.lookAt((new R).fromArray(o))}}})}bindSkeleton(e,t,n){const r=this.parsePoseNodes();for(const s in e){const o=e[s];$n.get(parseInt(o.ID)).parents.forEach(function(l){t.has(l.ID)&&$n.get(l.ID).parents.forEach(function(u){n.has(u.ID)&&n.get(u.ID).bind(new Jf(o.bones),r[u.ID])})})}}parsePoseNodes(){const e={};if("Pose"in yi.Objects){const t=yi.Objects.Pose;for(const n in t)if("BindPose"===t[n].attrType&&t[n].NbPoseNodes>0){const r=t[n].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=(new We).fromArray(s.Matrix.a)}):e[r.Node]=(new We).fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in yi&&"AmbientColor"in yi.GlobalSettings){const e=yi.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],r=e[2];if(0!==t||0!==n||0!==r){const s=new Be(t,n,r).convertSRGBToLinear();Is.add(new yx(s,1))}}}}class Mme{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in yi.Objects){const n=yi.Objects.Geometry;for(const r in n){const s=$n.get(parseInt(r)),o=this.parseGeometry(s,n[r],e);t.set(parseInt(r),o)}}return!0===this.negativeMaterialIndices&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const r=n.skeletons,s=[],o=e.parents.map(function(u){return yi.Objects.Model[u.ID]});if(0===o.length)return;const a=e.children.reduce(function(u,h){return void 0!==r[h.ID]&&(u=r[h.ID]),u},null);e.children.forEach(function(u){void 0!==n.morphTargets[u.ID]&&s.push(n.morphTargets[u.ID])});const l=o[0],c={};"RotationOrder"in l&&(c.eulerOrder=Jz(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const d=$z(c);return this.genGeometry(t,a,s,d)}genGeometry(e,t,n,r){const s=new Mt;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new Ze(a.vertex,3);if(l.applyMatrix4(r),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new Ze(a.colors,3)),t&&(s.setAttribute("skinIndex",new Py(a.weightsIndices,4)),s.setAttribute("skinWeight",new Ze(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const c=(new bi).getNormalMatrix(r),d=new Ze(a.normal,3);d.applyNormalMatrix(c),s.setAttribute("normal",d)}if(a.uvs.forEach(function(c,d){let u="uv"+(d+1).toString();0===d&&(u="uv"),s.setAttribute(u,new Ze(a.uvs[d],2))}),o.material&&"AllSame"!==o.material.mappingType){let c=a.materialIndex[0],d=0;if(a.materialIndex.forEach(function(u,h){u!==c&&(s.addGroup(d,h-d,c),c=u,d=h)}),s.groups.length>0){const u=s.groups[s.groups.length-1],h=u.start+u.count;h!==a.materialIndex.length&&s.addGroup(h,a.materialIndex.length-h,c)}0===s.groups.length&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,n,r),s}parseGeoNode(e,t){const n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach(function(r,s){r.indices.forEach(function(o,a){void 0===n.weightTable[o]&&(n.weightTable[o]=[]),n.weightTable[o].push({id:s,weight:r.weights[a]})})})),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,r=0,s=!1,o=[],a=[],l=[],c=[],d=[],u=[];const h=this;return e.vertexIndices.forEach(function(f,m){let g,_=!1;f<0&&(f^=-1,_=!0);let p=[],v=[];if(o.push(3*f,3*f+1,3*f+2),e.color){const b=ww(m,n,f,e.color);l.push(b[0],b[1],b[2])}if(e.skeleton){if(void 0!==e.weightTable[f]&&e.weightTable[f].forEach(function(b){v.push(b.weight),p.push(b.id)}),v.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const b=[0,0,0,0],y=[0,0,0,0];v.forEach(function(x,w){let E=x,S=p[w];y.forEach(function(C,T,k){if(E>C){k[T]=E,E=C;const U=b[T];b[T]=S,S=U}})}),p=b,v=y}for(;v.length<4;)v.push(0),p.push(0);for(let b=0;b<4;++b)d.push(v[b]),u.push(p[b])}if(e.normal){const b=ww(m,n,f,e.normal);a.push(b[0],b[1],b[2])}e.material&&"AllSame"!==e.material.mappingType&&(g=ww(m,n,f,e.material)[0],g<0&&(h.negativeMaterialIndices=!0,g=0)),e.uv&&e.uv.forEach(function(b,y){const x=ww(m,n,f,b);void 0===c[y]&&(c[y]=[]),c[y].push(x[0]),c[y].push(x[1])}),r++,_&&(r>4&&console.warn("THREE.FBXLoader: Polygons with more than four sides are not supported. Make sure to triangulate the geometry during export."),h.genFace(t,e,o,g,a,l,c,d,u,r),n++,r=0,o=[],a=[],l=[],c=[],d=[],u=[])}),t}genFace(e,t,n,r,s,o,a,l,c,d){for(let u=2;u<d;u++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[3*(u-1)]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+1]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+2]]),e.vertex.push(t.vertexPositions[n[3*u]]),e.vertex.push(t.vertexPositions[n[3*u+1]]),e.vertex.push(t.vertexPositions[n[3*u+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[4*(u-1)]),e.vertexWeights.push(l[4*(u-1)+1]),e.vertexWeights.push(l[4*(u-1)+2]),e.vertexWeights.push(l[4*(u-1)+3]),e.vertexWeights.push(l[4*u]),e.vertexWeights.push(l[4*u+1]),e.vertexWeights.push(l[4*u+2]),e.vertexWeights.push(l[4*u+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[4*(u-1)]),e.weightsIndices.push(c[4*(u-1)+1]),e.weightsIndices.push(c[4*(u-1)+2]),e.weightsIndices.push(c[4*(u-1)+3]),e.weightsIndices.push(c[4*u]),e.weightsIndices.push(c[4*u+1]),e.weightsIndices.push(c[4*u+2]),e.weightsIndices.push(c[4*u+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[3*(u-1)]),e.colors.push(o[3*(u-1)+1]),e.colors.push(o[3*(u-1)+2]),e.colors.push(o[3*u]),e.colors.push(o[3*u+1]),e.colors.push(o[3*u+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[3*(u-1)]),e.normal.push(s[3*(u-1)+1]),e.normal.push(s[3*(u-1)+2]),e.normal.push(s[3*u]),e.normal.push(s[3*u+1]),e.normal.push(s[3*u+2])),t.uv&&t.uv.forEach(function(h,f){void 0===e.uvs[f]&&(e.uvs[f]=[]),e.uvs[f].push(a[f][0]),e.uvs[f].push(a[f][1]),e.uvs[f].push(a[f][2*(u-1)]),e.uvs[f].push(a[f][2*(u-1)+1]),e.uvs[f].push(a[f][2*u]),e.uvs[f].push(a[f][2*u+1])})}addMorphTargets(e,t,n,r){if(0===n.length)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;n.forEach(function(o){o.rawTargets.forEach(function(a){const l=yi.Objects.Geometry[a.geoID];void 0!==l&&s.genMorphGeometry(e,t,l,r,a.name)})})}genMorphGeometry(e,t,n,r,s){const o=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],a=void 0!==n.Vertices?n.Vertices.a:[],l=void 0!==n.Indexes?n.Indexes.a:[],d=new Float32Array(3*e.attributes.position.count);for(let m=0;m<l.length;m++){const g=3*l[m];d[g]=a[3*m],d[g+1]=a[3*m+1],d[g+2]=a[3*m+2]}const h=this.genBuffers({vertexIndices:o,vertexPositions:d}),f=new Ze(h.vertex,3);f.name=s||n.attrName,f.applyMatrix4(r),e.morphAttributes.position.push(f)}parseNormals(e){const n=e.ReferenceInformationType;let s=[];return"IndexToDirect"===n&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:e.Normals.a,indices:s,mappingType:e.MappingInformationType,referenceType:n}}parseUVs(e){const n=e.ReferenceInformationType;let s=[];return"IndexToDirect"===n&&(s=e.UVIndex.a),{dataSize:2,buffer:e.UV.a,indices:s,mappingType:e.MappingInformationType,referenceType:n}}parseVertexColors(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Colors.a;let s=[];"IndexToDirect"===n&&(s=e.ColorIndex.a);for(let o=0,a=new Be;o<r.length;o+=4)a.fromArray(r,o).convertSRGBToLinear().toArray(r,o);return{dataSize:4,buffer:r,indices:s,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const r=e.Materials.a,s=[];for(let o=0;o<r.length;++o)s.push(o);return{dataSize:1,buffer:r,indices:s,mappingType:t,referenceType:n}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Mt;const n=t-1,r=e.KnotVector.a,s=[],o=e.Points.a;for(let u=0,h=o.length;u<h;u+=4)s.push((new ei).fromArray(o,u));let a,l;if("Closed"===e.Form)s.push(s[0]);else if("Periodic"===e.Form){a=n,l=r.length-1-a;for(let u=0;u<n;++u)s.push(s[u])}const d=new xme(n,r,s,a,l).getPoints(12*s.length);return(new Mt).setFromPoints(d)}}class Eme{parse(){const e=[],t=this.parseClips();if(void 0!==t)for(const n in t){const s=this.addClip(t[n]);e.push(s)}return e}parseClips(){if(void 0===yi.Objects.AnimationCurve)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=yi.Objects.AnimationCurveNode,t=new Map;for(const n in e){const r=e[n];if(null!==r.attrName.match(/S|R|T|DeformPercent/)){const s={id:r.id,attr:r.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=yi.Objects.AnimationCurve;for(const n in t){const r={id:t[n].id,times:t[n].KeyTime.a.map(Dme),values:t[n].KeyValueFloat.a},s=$n.get(r.id);if(void 0!==s){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=r:a.match(/Y/)?e.get(o).curves.y=r:a.match(/Z/)?e.get(o).curves.z=r:a.match(/DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=r)}}}parseAnimationLayers(e){const t=yi.Objects.AnimationLayer,n=new Map;for(const r in t){const s=[],o=$n.get(parseInt(r));void 0!==o&&(o.children.forEach(function(l,c){if(e.has(l.ID)){const d=e.get(l.ID);if(void 0!==d.curves.x||void 0!==d.curves.y||void 0!==d.curves.z){if(void 0===s[c]){const u=$n.get(l.ID).parents.filter(function(h){return void 0!==h.relationship})[0].ID;if(void 0!==u){const h=yi.Objects.Model[u.toString()];if(void 0===h)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",l);const f={modelName:h.attrName?ji.sanitizeNodeName(h.attrName):"",ID:h.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Is.traverse(function(m){m.ID===h.id&&(f.transform=m.matrix,m.userData.transformData&&(f.eulerOrder=m.userData.transformData.eulerOrder))}),f.transform||(f.transform=new We),"PreRotation"in h&&(f.preRotation=h.PreRotation.value),"PostRotation"in h&&(f.postRotation=h.PostRotation.value),s[c]=f}}s[c]&&(s[c][d.attr]=d)}else if(void 0!==d.curves.morph){if(void 0===s[c]){const u=$n.get(l.ID).parents.filter(function(p){return void 0!==p.relationship})[0].ID,h=$n.get(u).parents[0].ID,f=$n.get(h).parents[0].ID,m=$n.get(f).parents[0].ID,g=yi.Objects.Model[m],_={modelName:g.attrName?ji.sanitizeNodeName(g.attrName):"",morphName:yi.Objects.Deformer[u].attrName};s[c]=_}s[c][d.attr]=d}}}),n.set(parseInt(r),s))}return n}parseAnimStacks(e){const t=yi.Objects.AnimationStack,n={};for(const r in t){const s=$n.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);n[r]={name:t[r].attrName,layer:o}}return n}addClip(e){let t=[];const n=this;return e.layer.forEach(function(r){t=t.concat(n.generateTracks(r))}),new cu(e.name,-1,t)}generateTracks(e){const t=[];let n=new R,r=new wi,s=new R;if(e.transform&&e.transform.decompose(n,r,s),n=n.toArray(),r=(new Js).setFromQuaternion(r,e.eulerOrder).toArray(),s=s.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==o&&t.push(o)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);void 0!==o&&t.push(o)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");void 0!==o&&t.push(o)}if(void 0!==e.DeformPercent){const o=this.generateMorphTrack(e);void 0!==o&&t.push(o)}return t}generateVectorTrack(e,t,n,r){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,n);return new lu(e+"."+r,s,o)}generateRotationTrack(e,t,n,r,s,o){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(vt.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(vt.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(vt.degToRad));const a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,n);void 0!==r&&((r=r.map(vt.degToRad)).push(o),r=(new Js).fromArray(r),r=(new wi).setFromEuler(r)),void 0!==s&&((s=s.map(vt.degToRad)).push(o),s=(new Js).fromArray(s),s=(new wi).setFromEuler(s).invert());const c=new wi,d=new Js,u=[];for(let h=0;h<l.length;h+=3)d.set(l[h],l[h+1],l[h+2],o),c.setFromEuler(d),void 0!==r&&c.premultiply(r),void 0!==s&&c.multiply(s),c.toArray(u,h/3*4);return new Rl(e+".quaternion",a,u)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map(function(s){return s/100}),r=Is.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new ou(e.modelName+".morphTargetInfluences["+r+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort(function(n,r){return n-r}),t.length>1){let n=1,r=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==r&&(t[n]=o,r=o,n++)}t=t.slice(0,n)}return t}getKeyframeTrackValues(e,t,n){const r=n,s=[];let o=-1,a=-1,l=-1;return e.forEach(function(c){if(t.x&&(o=t.x.times.indexOf(c)),t.y&&(a=t.y.times.indexOf(c)),t.z&&(l=t.z.times.indexOf(c)),-1!==o){const d=t.x.values[o];s.push(d),r[0]=d}else s.push(r[0]);if(-1!==a){const d=t.y.values[a];s.push(d),r[1]=d}else s.push(r[1]);if(-1!==l){const d=t.z.values[l];s.push(d),r[2]=d}else s.push(r[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const n=e.values[t-1],r=e.values[t]-n,s=Math.abs(r);if(s>=180){const o=s/180,a=r/o;let l=n+a;const c=e.times[t-1],u=(e.times[t]-c)/o;let h=c+u;const f=[],m=[];for(;h<e.times[t];)f.push(h),h+=u,m.push(l),l+=a;e.times=tG(e.times,t,f),e.values=tG(e.values,t,m)}}}}class Sme{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new Zz,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,n=e.split(/[\r\n]+/);return n.forEach(function(r,s){const o=r.match(/^[\s\t]*;/),a=r.match(/^[\s\t]*$/);if(o||a)return;const l=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),c=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),d=r.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(r,l):c?t.parseNodeProperty(r,c,n[++s]):d?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:n},o=this.parseNodeAttr(r),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,s):n in a?("PoseNode"===n?a.PoseNode.push(s):void 0!==a[n].id&&(a[n]={},a[n][a[n].id]=a[n]),""!==o.id&&(a[n][o.id]=s)):"number"==typeof o.id?(a[n]={},a[n][o.id]=s):"Properties70"!==n&&(a[n]="PoseNode"===n?[s]:s),"number"==typeof o.id&&(s.id=o.id),""!==o.name&&(s.attrName=o.name),""!==o.type&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}}parseNodeProperty(e,t,n){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===s&&(s=n.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===r){const l=s.split(",").slice(1),c=parseInt(l[0]),d=parseInt(l[1]);let u=s.split(",").slice(3);u=u.map(function(h){return h.trim().replace(/^"/,"")}),r="connections",s=[c,d],function kme(i,e){for(let t=0,n=i.length,r=e.length;t<r;t++,n++)i[n]=e[t]}(s,u),void 0===o[r]&&(o[r]=[])}"Node"===r&&(o.id=s),r in o&&Array.isArray(o[r])?o[r].push(s):"a"!==r?o[r]=s:o.a=s,this.setCurrentProp(o,r),"a"===r&&","!==s.slice(-1)&&(o.a=VI(s))}else this.parseNodeSpecialProperty(e,r,s)}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=VI(t.a))}parseNodeSpecialProperty(e,t,n){const r=n.split('",').map(function(d){return d.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],o=r[1],a=r[2],l=r[3];let c=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=VI(c)}this.getPrevNode()[s]={type:o,type2:a,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class Tme{parse(e){const t=new Xz(e);t.skip(23);const n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const r=new Zz;for(;!this.endOfContent(t);){const s=this.parseNode(t,n);null!==s&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},r=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(0===r)return null;const l=[];for(let h=0;h<s;h++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",d=l.length>1?l[1]:"",u=l.length>2?l[2]:"";for(n.singleProperty=1===s&&e.getOffset()===r;r>e.getOffset();){const h=this.parseNode(e,t);null!==h&&this.parseSubNode(a,n,h)}return n.propertyList=l,"number"==typeof c&&(n.id=c),""!==d&&(n.attrName=d),""!==u&&(n.attrType=u),""!==a&&(n.name=a),n}parseSubNode(e,t,n){if(!0===n.singleProperty){const r=n.propertyList[0];Array.isArray(r)?(t[n.name]=n,n.a=r):t[n.name]=r}else if("Connections"===e&&"C"===n.name){const r=[];n.propertyList.forEach(function(s,o){0!==o&&r.push(s)}),void 0===t.connections&&(t.connections=[]),t.connections.push(r)}else if("Properties70"===n.name)Object.keys(n).forEach(function(s){t[s]=n[s]});else if("Properties70"===e&&"P"===n.name){let r=n.propertyList[0],s=n.propertyList[1];const o=n.propertyList[2],a=n.propertyList[3];let l;0===r.indexOf("Lcl ")&&(r=r.replace("Lcl ","Lcl_")),0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),l="Color"===s||"ColorRGB"===s||"Vector"===s||"Vector3D"===s||0===s.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[r]={type:s,type2:o,flag:a,value:l}}else void 0===t[n.name]?"number"==typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);let n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(0===s)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}const a=Lc(new Uint8Array(e.getArrayBuffer(o))),l=new Xz(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class Xz{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return 1==(1&this.getUint8())}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,e=4294967295&~e,4294967295===e&&(t=t+1&4294967295),e=e+1&4294967295,-(4294967296*t+e)):4294967296*t+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){const t=this.offset;let n=new Uint8Array(this.dv.buffer,t,e);this.skip(e);const r=n.indexOf(0);return r>=0&&(n=new Uint8Array(this.dv.buffer,t,r)),this._textDecoder.decode(n)}}class Zz{add(e,t){this[e]=t}}function Kz(i){const t=i.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Dme(i){return i/46186158e3}const Pme=[];function ww(i,e,t,n){let r;switch(n.mappingType){case"ByPolygonVertex":r=i;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}"IndexToDirect"===n.referenceType&&(r=n.indices[r]);const s=r*n.dataSize;return function Lme(i,e,t,n){for(let r=t,s=0;r<n;r++,s++)i[s]=e[r];return i}(Pme,n.buffer,s,s+n.dataSize)}const UI=new Js,Fp=new R;function $z(i){const e=new We,t=new We,n=new We,r=new We,s=new We,o=new We,a=new We,l=new We,c=new We,d=new We,u=new We,h=new We,f=i.inheritType?i.inheritType:0;if(i.translation&&e.setPosition(Fp.fromArray(i.translation)),i.preRotation){const T=i.preRotation.map(vt.degToRad);T.push(i.eulerOrder||Js.DEFAULT_ORDER),t.makeRotationFromEuler(UI.fromArray(T))}if(i.rotation){const T=i.rotation.map(vt.degToRad);T.push(i.eulerOrder||Js.DEFAULT_ORDER),n.makeRotationFromEuler(UI.fromArray(T))}if(i.postRotation){const T=i.postRotation.map(vt.degToRad);T.push(i.eulerOrder||Js.DEFAULT_ORDER),r.makeRotationFromEuler(UI.fromArray(T)),r.invert()}i.scale&&s.scale(Fp.fromArray(i.scale)),i.scalingOffset&&a.setPosition(Fp.fromArray(i.scalingOffset)),i.scalingPivot&&o.setPosition(Fp.fromArray(i.scalingPivot)),i.rotationOffset&&l.setPosition(Fp.fromArray(i.rotationOffset)),i.rotationPivot&&c.setPosition(Fp.fromArray(i.rotationPivot)),i.parentMatrixWorld&&(u.copy(i.parentMatrix),d.copy(i.parentMatrixWorld));const m=t.clone().multiply(n).multiply(r),g=new We;g.extractRotation(d);const _=new We;_.copyPosition(d);const p=_.clone().invert().multiply(d),v=g.clone().invert().multiply(p),b=s,y=new We;if(0===f)y.copy(g).multiply(m).multiply(v).multiply(b);else if(1===f)y.copy(g).multiply(v).multiply(m).multiply(b);else{const k=(new We).scale((new R).setFromMatrixScale(u)).clone().invert(),U=v.clone().multiply(k);y.copy(g).multiply(m).multiply(U).multiply(b)}const x=c.clone().invert(),w=o.clone().invert();let E=e.clone().multiply(l).multiply(c).multiply(t).multiply(n).multiply(r).multiply(x).multiply(a).multiply(o).multiply(s).multiply(w);const S=(new We).copyPosition(E),C=d.clone().multiply(S);return h.copyPosition(C),E=h.clone().multiply(y),E.premultiply(d.invert()),E}function Jz(i){const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(i=i||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[i]}function VI(i){return i.split(",").map(function(t){return parseFloat(t)})}function eG(i,e,t){return void 0===e&&(e=0),void 0===t&&(t=i.byteLength),(new TextDecoder).decode(new Uint8Array(i,e,t))}function tG(i,e,t){return i.slice(0,e).concat(t).concat(i.slice(e))}class Bc extends Ua{constructor(){super(...arguments),this.clazz=wme}}Bc.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Bc)))(t||Bc)}}(),Bc.\u0275prov=Ge({token:Bc,factory:Bc.\u0275fac,providedIn:"root"});class Cw extends Px{constructor(e){super(),this.service=e}}Cw.\u0275fac=function(e){return new(e||Cw)(P(Bc,16))},Cw.\u0275pipe=gi({name:"loadFBX",type:Cw,pure:!0});class Mw extends bu{constructor(e,t,n){super(e,t),this.host=e,this.zone=t,this.service=n}getRefFromResponse(e){return e}}Mw.\u0275fac=function(e){return new(e||Mw)(P(Ke,1),P(pt),P(Bc))},Mw.\u0275dir=Oe({type:Mw,selectors:[["","loadFBX",""]],features:[W]});const Wr={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class wn{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const Bme=new La(-1,1,1,-1,0,1),zI=new Mt;zI.setAttribute("position",new Ze([-1,3,0,-1,-1,0,3,-1,0],3)),zI.setAttribute("uv",new Ze([0,2,0,0,2,0],2));class yr{constructor(e){this._mesh=new nt(zI,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Bme)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class GI extends wn{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof Dt?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=mi.clone(e.uniforms),this.material=new Dt({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new yr(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class HI extends wn{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),s=e.state;let o,a;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0),this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class iG extends wn{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Fme{constructor(e,t){if(this.renderer=e,void 0===t){const n=e.getSize(new pe);this._pixelRatio=e.getPixelRatio(),this._width=n.width,this._height=n.height,(t=new Gt(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new GI(Wr),this.clock=new _p}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let r=0,s=this.passes.length;r<s;r++){const o=this.passes[r];if(!1!==o.enabled){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),o.needsSwap){if(n){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==HI&&(o instanceof HI?n=!0:o instanceof iG&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new pe);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Op extends To{getType(){return Fme}set renderer(e){this._objRef&&(this._objRef.renderer=e)}get renderer(){return this._objRef?.renderer}set renderTarget1(e){this._objRef&&(this._objRef.renderTarget1=e)}get renderTarget1(){return this._objRef?.renderTarget1}set renderTarget2(e){this._objRef&&(this._objRef.renderTarget2=e)}get renderTarget2(){return this._objRef?.renderTarget2}set writeBuffer(e){this._objRef&&(this._objRef.writeBuffer=e)}get writeBuffer(){return this._objRef?.writeBuffer}set readBuffer(e){this._objRef&&(this._objRef.readBuffer=e)}get readBuffer(){return this._objRef?.readBuffer}set passes(e){this._objRef&&(this._objRef.passes=e)}get passes(){return this._objRef?.passes}set copyPass(e){this._objRef&&(this._objRef.copyPass=e)}get copyPass(){return this._objRef?.copyPass}set clock(e){this._objRef&&(this._objRef.clock=e)}get clock(){return this._objRef?.clock}set renderToScreen(e){this._objRef&&(this._objRef.renderToScreen=e)}get renderToScreen(){return this._objRef?.renderToScreen}}Op.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Op)))(t||Op)}}(),Op.\u0275cmp=K({type:Op,selectors:[["th-effectComposerGen"]],inputs:{renderer:"renderer",renderTarget1:"renderTarget1",renderTarget2:"renderTarget2",writeBuffer:"writeBuffer",readBuffer:"readBuffer",passes:"passes",copyPass:"copyPass",clock:"clock",renderToScreen:"renderToScreen"},features:[oe([]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Ol extends Op{constructor(e,t){super(),this.view=e,this.engineService=t}createThreeInstance(e){return e||(e=new Array(5)),e[0]=e[0]??this.engineService.renderer,e[1]=e[1]??this.initRenderTarget(),super.createThreeInstance(e)}initRenderTarget(){if(this.view.viewPort){let e,t;return this.view.viewPort instanceof ei?(e=this.view.viewPort.z,t=this.view.viewPort?.width):(e=this.view.viewPort.width,t=this.view.viewPort.height),new Gt(e,t)}}addToParent(){this._objRef&&(this.view.effectComposer=this._objRef)}removeFromParent(){this.view.effectComposer=void 0}}Ol.\u0275fac=function(e){return new(e||Ol)(P(Ss),P(Ro))},Ol.\u0275cmp=K({type:Ol,selectors:[["th-effectComposer"]],features:[oe([]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Li extends To{constructor(e){super(),this.effectComposer=e}addToParent(){this._objRef&&this.effectComposer&&this.effectComposer.objRef&&this.effectComposer.objRef.addPass(this._objRef)}removeFromParent(){this._objRef&&this.effectComposer&&this.effectComposer.objRef&&this.effectComposer.objRef.removePass(this._objRef)}}Li.\u0275fac=function(e){return new(e||Li)(P(Ol,8))},Li.\u0275cmp=K({type:Li,selectors:[["th-abs-control"]],features:[W],decls:0,vars:0,template:function(e,t){},encapsulation:2});class jme extends wn{constructor(e,t,n,r,s){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==s?s:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Be}render(e,t,n){const r=e.autoClear;let s,o;e.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,s),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),e.autoClear=r}}class Wi extends Li{getType(){return wn}set isPass(e){this._objRef&&(this._objRef.isPass=e)}get isPass(){return this._objRef?.isPass}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set needsSwap(e){this._objRef&&(this._objRef.needsSwap=e)}get needsSwap(){return this._objRef?.needsSwap}set clear(e){this._objRef&&(this._objRef.clear=e)}get clear(){return this._objRef?.clear}set renderToScreen(e){this._objRef&&(this._objRef.renderToScreen=e)}get renderToScreen(){return this._objRef?.renderToScreen}}Wi.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Wi)))(t||Wi)}}(),Wi.\u0275cmp=K({type:Wi,selectors:[["th-pass"]],inputs:{isPass:"isPass",enabled:"enabled",needsSwap:"needsSwap",clear:"clear",renderToScreen:"renderToScreen"},features:[oe([{provide:Li,useExisting:le(()=>Wi)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Ru extends Wi{getType(){return jme}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set overrideMaterial(e){this._objRef&&(this._objRef.overrideMaterial=e)}get overrideMaterial(){return this._objRef?.overrideMaterial}set clearColor(e){this._objRef&&(this._objRef.clearColor=Qe(this._objRef.clearColor,e))}get clearColor(){return this._objRef?.clearColor}set clearAlpha(e){this._objRef&&(this._objRef.clearAlpha=e)}get clearAlpha(){return this._objRef?.clearAlpha}set clearDepth(e){this._objRef&&(this._objRef.clearDepth=e)}get clearDepth(){return this._objRef?.clearDepth}}Ru.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Ru)))(t||Ru)}}(),Ru.\u0275cmp=K({type:Ru,selectors:[["th-renderPassGen"]],inputs:{scene:"scene",camera:"camera",overrideMaterial:"overrideMaterial",clearColor:"clearColor",clearAlpha:"clearAlpha",clearDepth:"clearDepth"},features:[oe([{provide:Li,useExisting:le(()=>Ru)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Fc extends Ru{constructor(e,t){super(e),this.effectComposer=e,this.view=t}createThreeInstance(e){return e||(e=new Array(5)),e[0]=e[0]??this.view.scene,e[1]=e[1]??this.view.camera,e[2]=e[2]??this.overrideMaterial,e[3]=e[3]??this.clearColor,e[4]=e[4]??this.clearAlpha,super.createThreeInstance(e)}ngAfterContentChecked(){this._objRef&&(this.view.scene&&this.view.scene.objRef&&(this._objRef.scene=this.view.scene.objRef),this.view.camera&&this.view.camera.objRef&&(this._objRef.camera=this.view.camera.objRef))}}Fc.\u0275fac=function(e){return new(e||Fc)(P(Ol),P(Ss))},Fc.\u0275cmp=K({type:Fc,selectors:[["th-renderPass"]],features:[oe([{provide:Li,useExisting:le(()=>Fc)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const Iu=new _u,Ds=new R,Oc=new R,Cn=new wi,nG={X:new R(1,0,0),Y:new R(0,1,0),Z:new R(0,0,1)},QI={type:"change"},rG={type:"mouseDown"},sG={type:"mouseUp",mode:null},oG={type:"objectChange"};class aG extends pi{constructor(e,t){super(),void 0===t&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.isTransformControls=!0,this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const n=new Yme;this._gizmo=n,this.add(n);const r=new Xme;this._plane=r,this.add(r);const s=this;function o(v,b){let y=b;Object.defineProperty(s,v,{get:function(){return void 0!==y?y:b},set:function(x){y!==x&&(y=x,r[v]=x,n[v]=x,s.dispatchEvent({type:v+"-changed",value:x}),s.dispatchEvent(QI))}}),s[v]=b,r[v]=b,n[v]=b}o("camera",e),o("object",void 0),o("enabled",!0),o("axis",null),o("mode","translate"),o("translationSnap",null),o("rotationSnap",null),o("scaleSnap",null),o("space","world"),o("size",1),o("dragging",!1),o("showX",!0),o("showY",!0),o("showZ",!0);const a=new R,l=new R,c=new wi,d=new wi,u=new R,h=new wi,f=new R,m=new R,g=new R,p=new R;o("worldPosition",a),o("worldPositionStart",l),o("worldQuaternion",c),o("worldQuaternionStart",d),o("cameraPosition",u),o("cameraQuaternion",h),o("pointStart",f),o("pointEnd",m),o("rotationAxis",g),o("rotationAngle",0),o("eye",p),this._offset=new R,this._startNorm=new R,this._endNorm=new R,this._cameraScale=new R,this._parentPosition=new R,this._parentQuaternion=new wi,this._parentQuaternionInv=new wi,this._parentScale=new R,this._worldScaleStart=new R,this._worldQuaternionInv=new wi,this._worldScale=new R,this._positionStart=new R,this._quaternionStart=new wi,this._scaleStart=new R,this._getPointer=Gme.bind(this),this._onPointerDown=Qme.bind(this),this._onPointerHover=Hme.bind(this),this._onPointerMove=Wme.bind(this),this._onPointerUp=qme.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(void 0===this.object||!0===this.dragging)return;Iu.setFromCamera(e,this.camera);const t=WI(this._gizmo.picker[this.mode],Iu);this.axis=t?t.object.name:null}pointerDown(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){Iu.setFromCamera(e,this.camera);const t=WI(this._plane,Iu,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,rG.mode=this.mode,this.dispatchEvent(rG)}}pointerMove(e){const t=this.axis,n=this.mode,r=this.object;let s=this.space;if("scale"===n?s="local":("E"===t||"XYZE"===t||"XYZ"===t)&&(s="world"),void 0===r||null===t||!1===this.dragging||-1!==e.button)return;Iu.setFromCamera(e,this.camera);const o=WI(this._plane,Iu,!0);if(o){if(this.pointEnd.copy(o.point).sub(this.worldPositionStart),"translate"===n)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===s&&"XYZ"!==t&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===t.indexOf("X")&&(this._offset.x=0),-1===t.indexOf("Y")&&(this._offset.y=0),-1===t.indexOf("Z")&&(this._offset.z=0),"local"===s&&"XYZ"!==t?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),r.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===s&&(r.position.applyQuaternion(Cn.copy(this._quaternionStart).invert()),-1!==t.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.position.applyQuaternion(this._quaternionStart)),"world"===s&&(r.parent&&r.position.add(Ds.setFromMatrixPosition(r.parent.matrixWorld)),-1!==t.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.parent&&r.position.sub(Ds.setFromMatrixPosition(r.parent.matrixWorld))));else if("scale"===n){if(-1!==t.search("XYZ")){let a=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(a*=-1),Oc.set(a,a,a)}else Ds.copy(this.pointStart),Oc.copy(this.pointEnd),Ds.applyQuaternion(this._worldQuaternionInv),Oc.applyQuaternion(this._worldQuaternionInv),Oc.divide(Ds),-1===t.search("X")&&(Oc.x=1),-1===t.search("Y")&&(Oc.y=1),-1===t.search("Z")&&(Oc.z=1);r.scale.copy(this._scaleStart).multiply(Oc),this.scaleSnap&&(-1!==t.search("X")&&(r.scale.x=Math.round(r.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(r.scale.y=Math.round(r.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(r.scale.z=Math.round(r.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){this._offset.copy(this.pointEnd).sub(this.pointStart);const a=20/this.worldPosition.distanceTo(Ds.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===t?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(Ds.copy(this.rotationAxis).cross(this.eye))*a):("X"===t||"Y"===t||"Z"===t)&&(this.rotationAxis.copy(nG[t]),Ds.copy(nG[t]),"local"===s&&Ds.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(Ds.cross(this.eye).normalize())*a),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===s&&"E"!==t&&"XYZE"!==t?(r.quaternion.copy(this._quaternionStart),r.quaternion.multiply(Cn.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),r.quaternion.copy(Cn.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),r.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(QI),this.dispatchEvent(oG)}}pointerUp(e){0===e.button&&(this.dragging&&null!==this.axis&&(sG.mode=this.mode,this.dispatchEvent(sG)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(QI),this.dispatchEvent(oG),this.pointStart.copy(this.pointEnd))}getRaycaster(){return Iu}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}}function Gme(i){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:i.button};{const e=this.domElement.getBoundingClientRect();return{x:(i.clientX-e.left)/e.width*2-1,y:-(i.clientY-e.top)/e.height*2+1,button:i.button}}}function Hme(i){if(this.enabled)switch(i.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(i))}}function Qme(i){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(i.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(i)),this.pointerDown(this._getPointer(i)))}function Wme(i){this.enabled&&this.pointerMove(this._getPointer(i))}function qme(i){this.enabled&&(this.domElement.releasePointerCapture(i.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(i)))}function WI(i,e,t){const n=e.intersectObject(i,!0);for(let r=0;r<n.length;r++)if(n[r].object.visible||t)return n[r];return!1}const Ew=new Js,en=new R(0,1,0),lG=new R(0,0,0),cG=new We,Sw=new wi,Tw=new wi,qa=new R,dG=new We,f0=new R(1,0,0),Du=new R(0,1,0),p0=new R(0,0,1),Rw=new R,m0=new R,g0=new R;class Yme extends pi{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new Xn({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new mn({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),n=e.clone();n.opacity=.15;const r=t.clone();r.opacity=.5;const s=e.clone();s.color.setHex(16711680);const o=e.clone();o.color.setHex(65280);const a=e.clone();a.color.setHex(255);const l=e.clone();l.color.setHex(16711680),l.opacity=.5;const c=e.clone();c.color.setHex(65280),c.opacity=.5;const d=e.clone();d.color.setHex(255),d.opacity=.5;const u=e.clone();u.opacity=.25;const h=e.clone();h.color.setHex(16776960),h.opacity=.25,e.clone().color.setHex(16776960);const m=e.clone();m.color.setHex(7895160);const g=new zn(0,.04,.1,12);g.translate(0,.05,0);const _=new Ji(.08,.08,.08);_.translate(0,.04,0);const p=new Mt;p.setAttribute("position",new Ze([0,0,0,1,0,0],3));const v=new zn(.0075,.0075,.5,3);function b(H,L){const V=new sa(H,.0075,3,64,L*Math.PI*2);return V.rotateY(Math.PI/2),V.rotateX(Math.PI/2),V}v.translate(0,.25,0);const x={X:[[new nt(g,s),[.5,0,0],[0,0,-Math.PI/2]],[new nt(g,s),[-.5,0,0],[0,0,Math.PI/2]],[new nt(v,s),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new nt(g,o),[0,.5,0]],[new nt(g,o),[0,-.5,0],[Math.PI,0,0]],[new nt(v,o)]],Z:[[new nt(g,a),[0,0,.5],[Math.PI/2,0,0]],[new nt(g,a),[0,0,-.5],[-Math.PI/2,0,0]],[new nt(v,a),null,[Math.PI/2,0,0]]],XYZ:[[new nt(new ra(.1,0),u.clone()),[0,0,0]]],XY:[[new nt(new Ji(.15,.15,.01),d.clone()),[.15,.15,0]]],YZ:[[new nt(new Ji(.15,.15,.01),l.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new nt(new Ji(.15,.15,.01),c.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},w={X:[[new nt(new zn(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new nt(new zn(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new nt(new zn(.2,0,.6,4),n),[0,.3,0]],[new nt(new zn(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new nt(new zn(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new nt(new zn(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new nt(new ra(.2,0),n)]],XY:[[new nt(new Ji(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new nt(new Ji(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new nt(new Ji(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]]},E={START:[[new nt(new ra(.01,2),r),null,null,null,"helper"]],END:[[new nt(new ra(.01,2),r),null,null,null,"helper"]],DELTA:[[new Vn(function y(){const H=new Mt;return H.setAttribute("position",new Ze([0,0,0,1,1,1],3)),H}(),r),null,null,null,"helper"]],X:[[new Vn(p,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Vn(p,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Vn(p,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},S={XYZE:[[new nt(b(.5,1),m),null,[0,Math.PI/2,0]]],X:[[new nt(b(.5,.5),s)]],Y:[[new nt(b(.5,.5),o),null,[0,0,-Math.PI/2]]],Z:[[new nt(b(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new nt(b(.75,1),h),null,[0,Math.PI/2,0]]]},C={AXIS:[[new Vn(p,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},T={XYZE:[[new nt(new vc(.25,10,8),n)]],X:[[new nt(new sa(.5,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new nt(new sa(.5,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new nt(new sa(.5,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new nt(new sa(.75,.1,2,24),n)]]},k={X:[[new nt(_,s),[.5,0,0],[0,0,-Math.PI/2]],[new nt(v,s),[0,0,0],[0,0,-Math.PI/2]],[new nt(_,s),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new nt(_,o),[0,.5,0]],[new nt(v,o)],[new nt(_,o),[0,-.5,0],[0,0,Math.PI]]],Z:[[new nt(_,a),[0,0,.5],[Math.PI/2,0,0]],[new nt(v,a),[0,0,0],[Math.PI/2,0,0]],[new nt(_,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new nt(new Ji(.15,.15,.01),d),[.15,.15,0]]],YZ:[[new nt(new Ji(.15,.15,.01),l),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new nt(new Ji(.15,.15,.01),c),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new nt(new Ji(.1,.1,.1),u.clone())]]},U={X:[[new nt(new zn(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new nt(new zn(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new nt(new zn(.2,0,.6,4),n),[0,.3,0]],[new nt(new zn(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new nt(new zn(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new nt(new zn(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new nt(new Ji(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new nt(new Ji(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new nt(new Ji(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new nt(new Ji(.2,.2,.2),n),[0,0,0]]]},B={X:[[new Vn(p,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Vn(p,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Vn(p,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function j(H){const L=new pi;for(const V in H)for(let O=H[V].length;O--;){const Q=H[V][O][0].clone(),re=H[V][O][1],_e=H[V][O][2],de=H[V][O][3],Y=H[V][O][4];Q.name=V,Q.tag=Y,re&&Q.position.set(re[0],re[1],re[2]),_e&&Q.rotation.set(_e[0],_e[1],_e[2]),de&&Q.scale.set(de[0],de[1],de[2]),Q.updateMatrix();const q=Q.geometry.clone();q.applyMatrix4(Q.matrix),Q.geometry=q,Q.renderOrder=1/0,Q.position.set(0,0,0),Q.rotation.set(0,0,0),Q.scale.set(1,1,1),L.add(Q)}return L}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=j(x)),this.add(this.gizmo.rotate=j(S)),this.add(this.gizmo.scale=j(k)),this.add(this.picker.translate=j(w)),this.add(this.picker.rotate=j(T)),this.add(this.picker.scale=j(U)),this.add(this.helper.translate=j(E)),this.add(this.helper.rotate=j(C)),this.add(this.helper.scale=j(B)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const n="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:Tw;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let r=[];r=r.concat(this.picker[this.mode].children),r=r.concat(this.gizmo[this.mode].children),r=r.concat(this.helper[this.mode].children);for(let s=0;s<r.length;s++){const o=r[s];let a;o.visible=!0,o.rotation.set(0,0,0),o.position.copy(this.worldPosition),a=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),o.scale.set(1,1,1).multiplyScalar(a*this.size/4),"helper"!==o.tag?(o.quaternion.copy(n),"translate"===this.mode||"scale"===this.mode?("X"===o.name&&Math.abs(en.copy(f0).applyQuaternion(n).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"Y"===o.name&&Math.abs(en.copy(Du).applyQuaternion(n).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"Z"===o.name&&Math.abs(en.copy(p0).applyQuaternion(n).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"XY"===o.name&&Math.abs(en.copy(p0).applyQuaternion(n).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"YZ"===o.name&&Math.abs(en.copy(f0).applyQuaternion(n).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"XZ"===o.name&&Math.abs(en.copy(Du).applyQuaternion(n).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1)):"rotate"===this.mode&&(Sw.copy(n),en.copy(this.eye).applyQuaternion(Cn.copy(n).invert()),-1!==o.name.search("E")&&o.quaternion.setFromRotationMatrix(cG.lookAt(this.eye,lG,Du)),"X"===o.name&&(Cn.setFromAxisAngle(f0,Math.atan2(-en.y,en.z)),Cn.multiplyQuaternions(Sw,Cn),o.quaternion.copy(Cn)),"Y"===o.name&&(Cn.setFromAxisAngle(Du,Math.atan2(en.x,en.z)),Cn.multiplyQuaternions(Sw,Cn),o.quaternion.copy(Cn)),"Z"===o.name&&(Cn.setFromAxisAngle(p0,Math.atan2(en.y,en.x)),Cn.multiplyQuaternions(Sw,Cn),o.quaternion.copy(Cn))),o.visible=o.visible&&(-1===o.name.indexOf("X")||this.showX),o.visible=o.visible&&(-1===o.name.indexOf("Y")||this.showY),o.visible=o.visible&&(-1===o.name.indexOf("Z")||this.showZ),o.visible=o.visible&&(-1===o.name.indexOf("E")||this.showX&&this.showY&&this.showZ),o.material._color=o.material._color||o.material.color.clone(),o.material._opacity=o.material._opacity||o.material.opacity,o.material.color.copy(o.material._color),o.material.opacity=o.material._opacity,this.enabled&&this.axis&&(o.name===this.axis||this.axis.split("").some(function(l){return o.name===l}))&&(o.material.color.setHex(16776960),o.material.opacity=1)):(o.visible=!1,"AXIS"===o.name?(o.visible=!!this.axis,"X"===this.axis&&(Cn.setFromEuler(Ew.set(0,0,0)),o.quaternion.copy(n).multiply(Cn),Math.abs(en.copy(f0).applyQuaternion(n).dot(this.eye))>.9&&(o.visible=!1)),"Y"===this.axis&&(Cn.setFromEuler(Ew.set(0,0,Math.PI/2)),o.quaternion.copy(n).multiply(Cn),Math.abs(en.copy(Du).applyQuaternion(n).dot(this.eye))>.9&&(o.visible=!1)),"Z"===this.axis&&(Cn.setFromEuler(Ew.set(0,Math.PI/2,0)),o.quaternion.copy(n).multiply(Cn),Math.abs(en.copy(p0).applyQuaternion(n).dot(this.eye))>.9&&(o.visible=!1)),"XYZE"===this.axis&&(Cn.setFromEuler(Ew.set(0,Math.PI/2,0)),en.copy(this.rotationAxis),o.quaternion.setFromRotationMatrix(cG.lookAt(lG,en,Du)),o.quaternion.multiply(Cn),o.visible=this.dragging),"E"===this.axis&&(o.visible=!1)):"START"===o.name?(o.position.copy(this.worldPositionStart),o.visible=this.dragging):"END"===o.name?(o.position.copy(this.worldPosition),o.visible=this.dragging):"DELTA"===o.name?(o.position.copy(this.worldPositionStart),o.quaternion.copy(this.worldQuaternionStart),Ds.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),Ds.applyQuaternion(this.worldQuaternionStart.clone().invert()),o.scale.copy(Ds),o.visible=this.dragging):(o.quaternion.copy(n),o.position.copy(this.dragging?this.worldPositionStart:this.worldPosition),this.axis&&(o.visible=-1!==this.axis.search(o.name))))}super.updateMatrixWorld(e)}}class Xme extends nt{constructor(){super(new gc(1e5,1e5,2,2),new Xn({visible:!1,wireframe:!0,side:bs,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(t="local"),Rw.copy(f0).applyQuaternion("local"===t?this.worldQuaternion:Tw),m0.copy(Du).applyQuaternion("local"===t?this.worldQuaternion:Tw),g0.copy(p0).applyQuaternion("local"===t?this.worldQuaternion:Tw),en.copy(m0),this.mode){case"translate":case"scale":switch(this.axis){case"X":en.copy(this.eye).cross(Rw),qa.copy(Rw).cross(en);break;case"Y":en.copy(this.eye).cross(m0),qa.copy(m0).cross(en);break;case"Z":en.copy(this.eye).cross(g0),qa.copy(g0).cross(en);break;case"XY":qa.copy(g0);break;case"YZ":qa.copy(Rw);break;case"XZ":en.copy(g0),qa.copy(m0);break;case"XYZ":case"E":qa.set(0,0,0)}break;default:qa.set(0,0,0)}0===qa.length()?this.quaternion.copy(this.cameraQuaternion):(dG.lookAt(Ds.set(0,0,0),qa,en),this.quaternion.setFromRotationMatrix(dG)),super.updateMatrixWorld(e)}}class Pu extends Qn{getType(){return aG}set domElement(e){this._objRef&&(this._objRef.domElement=e)}get domElement(){return this._objRef?.domElement}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set object(e){this._objRef&&(this._objRef.object=e)}get object(){return this._objRef?.object}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set axis(e){this._objRef&&(this._objRef.axis=e)}get axis(){return this._objRef?.axis}set mode(e){this._objRef&&(this._objRef.mode=e)}get mode(){return this._objRef?.mode}set translationSnap(e){this._objRef&&(this._objRef.translationSnap=e)}get translationSnap(){return this._objRef?.translationSnap}set rotationSnap(e){this._objRef&&(this._objRef.rotationSnap=e)}get rotationSnap(){return this._objRef?.rotationSnap}set space(e){this._objRef&&(this._objRef.space=e)}get space(){return this._objRef?.space}set size(e){this._objRef&&(this._objRef.size=e)}get size(){return this._objRef?.size}set dragging(e){this._objRef&&(this._objRef.dragging=e)}get dragging(){return this._objRef?.dragging}set showX(e){this._objRef&&(this._objRef.showX=e)}get showX(){return this._objRef?.showX}set showY(e){this._objRef&&(this._objRef.showY=e)}get showY(){return this._objRef?.showY}set showZ(e){this._objRef&&(this._objRef.showZ=e)}get showZ(){return this._objRef?.showZ}get isTransformControls(){return this._objRef?.isTransformControls}set mouseButtons(e){this._objRef&&(this._objRef.mouseButtons=e)}get mouseButtons(){return this._objRef?.mouseButtons}}Pu.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Pu)))(t||Pu)}}(),Pu.\u0275cmp=K({type:Pu,selectors:[["th-transformControlsGen"]],inputs:{domElement:"domElement",camera:"camera",object:"object",enabled:"enabled",axis:"axis",mode:"mode",translationSnap:"translationSnap",rotationSnap:"rotationSnap",space:"space",size:"size",dragging:"dragging",showX:"showX",showY:"showY",showZ:"showZ",mouseButtons:"mouseButtons"},features:[oe([{provide:Qn,useExisting:le(()=>Pu)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class ku extends Pu{getType(){return aG}set object(e){this._objRef&&(this._objRef.object=e,e?this._objRef.attach(e):this._objRef.detach())}addToParent(){this._objRef&&this.canvas?.scene?.objRef?.add(this._objRef)}removeFromParent(){this._objRef&&this.canvas?.scene?.objRef?.remove(this._objRef)}}ku.\u0275fac=function(){let i;return function(t){return(i||(i=ce(ku)))(t||ku)}}(),ku.\u0275cmp=K({type:ku,selectors:[["th-transformControls"]],inputs:{object:"object"},features:[oe([{provide:Qn,useExisting:le(()=>ku)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const qI_uniforms={tDiffuse:{value:null}},qI_vertexShader="\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",qI_fragmentShader="\n\n\t\t#include <common>\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tfloat l = luminance( texel.rgb );\n\n\t\t\tgl_FragColor = vec4( l, l, l, texel.w );\n\n\t\t}",YI_uniforms={tDiffuse:{value:null},averageLuminance:{value:1},luminanceMap:{value:null},maxLuminance:{value:16},minLuminance:{value:.01},middleGrey:{value:.6}},YI_vertexShader="\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",YI_fragmentShader="\n\n\t\t#include <common>\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tuniform float middleGrey;\n\t\tuniform float minLuminance;\n\t\tuniform float maxLuminance;\n\t\t#ifdef ADAPTED_LUMINANCE\n\t\t\tuniform sampler2D luminanceMap;\n\t\t#else\n\t\t\tuniform float averageLuminance;\n\t\t#endif\n\n\t\tvec3 ToneMap( vec3 vColor ) {\n\t\t\t#ifdef ADAPTED_LUMINANCE\n\t\t\t\t// Get the calculated average luminance\n\t\t\t\tfloat fLumAvg = texture2D(luminanceMap, vec2(0.5, 0.5)).r;\n\t\t\t#else\n\t\t\t\tfloat fLumAvg = averageLuminance;\n\t\t\t#endif\n\n\t\t\t// Calculate the luminance of the current pixel\n\t\t\tfloat fLumPixel = luminance( vColor );\n\n\t\t\t// Apply the modified operator (Eq. 4)\n\t\t\tfloat fLumScaled = (fLumPixel * middleGrey) / max( minLuminance, fLumAvg );\n\n\t\t\tfloat fLumCompressed = (fLumScaled * (1.0 + (fLumScaled / (maxLuminance * maxLuminance)))) / (1.0 + fLumScaled);\n\t\t\treturn fLumCompressed * vColor;\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tgl_FragColor = vec4( ToneMap( texel.xyz ), texel.w );\n\n\t\t}";class $me extends wn{constructor(e,t){super(),this.resolution=void 0!==t?t:256,this.needsInit=!0,this.adaptive=void 0===e||!!e,this.luminanceRT=null,this.previousLuminanceRT=null,this.currentLuminanceRT=null;const n=Wr;this.copyUniforms=mi.clone(n.uniforms),this.materialCopy=new Dt({uniforms:this.copyUniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,blending:Xt,depthTest:!1}),this.materialLuminance=new Dt({uniforms:mi.clone(qI_uniforms),vertexShader:qI_vertexShader,fragmentShader:qI_fragmentShader,blending:Xt}),this.adaptLuminanceShader={defines:{MIP_LEVEL_1X1:(Math.log(this.resolution)/Math.log(2)).toFixed(1)},uniforms:{lastLum:{value:null},currentLum:{value:null},minLuminance:{value:.01},delta:{value:.016},tau:{value:1}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D lastLum;\n\t\t\t\tuniform sampler2D currentLum;\n\t\t\t\tuniform float minLuminance;\n\t\t\t\tuniform float delta;\n\t\t\t\tuniform float tau;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec4 lastLum = texture2D( lastLum, vUv, MIP_LEVEL_1X1 );\n\t\t\t\t\tvec4 currentLum = texture2D( currentLum, vUv, MIP_LEVEL_1X1 );\n\n\t\t\t\t\tfloat fLastLum = max( minLuminance, lastLum.r );\n\t\t\t\t\tfloat fCurrentLum = max( minLuminance, currentLum.r );\n\n\t\t\t\t\t//The adaption seems to work better in extreme lighting differences\n\t\t\t\t\t//if the input luminance is squared.\n\t\t\t\t\tfCurrentLum *= fCurrentLum;\n\n\t\t\t\t\t// Adapt the luminance using Pattanaik's technique\n\t\t\t\t\tfloat fAdaptedLum = fLastLum + (fCurrentLum - fLastLum) * (1.0 - exp(-delta * tau));\n\t\t\t\t\t// \"fAdaptedLum = sqrt(fAdaptedLum);\n\t\t\t\t\tgl_FragColor.r = fAdaptedLum;\n\t\t\t\t}"},this.materialAdaptiveLum=new Dt({uniforms:mi.clone(this.adaptLuminanceShader.uniforms),vertexShader:this.adaptLuminanceShader.vertexShader,fragmentShader:this.adaptLuminanceShader.fragmentShader,defines:Object.assign({},this.adaptLuminanceShader.defines),blending:Xt}),this.materialToneMap=new Dt({uniforms:mi.clone(YI_uniforms),vertexShader:YI_vertexShader,fragmentShader:YI_fragmentShader,blending:Xt}),this.fsQuad=new yr(null)}render(e,t,n,r){this.needsInit&&(this.reset(e),this.luminanceRT.texture.type=n.texture.type,this.previousLuminanceRT.texture.type=n.texture.type,this.currentLuminanceRT.texture.type=n.texture.type,this.needsInit=!1),this.adaptive&&(this.fsQuad.material=this.materialLuminance,this.materialLuminance.uniforms.tDiffuse.value=n.texture,e.setRenderTarget(this.currentLuminanceRT),this.fsQuad.render(e),this.fsQuad.material=this.materialAdaptiveLum,this.materialAdaptiveLum.uniforms.delta.value=r,this.materialAdaptiveLum.uniforms.lastLum.value=this.previousLuminanceRT.texture,this.materialAdaptiveLum.uniforms.currentLum.value=this.currentLuminanceRT.texture,e.setRenderTarget(this.luminanceRT),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.luminanceRT.texture,e.setRenderTarget(this.previousLuminanceRT),this.fsQuad.render(e)),this.fsQuad.material=this.materialToneMap,this.materialToneMap.uniforms.tDiffuse.value=n.texture,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}reset(){this.luminanceRT&&this.luminanceRT.dispose(),this.currentLuminanceRT&&this.currentLuminanceRT.dispose(),this.previousLuminanceRT&&this.previousLuminanceRT.dispose(),this.luminanceRT=new Gt(this.resolution,this.resolution),this.luminanceRT.texture.name="AdaptiveToneMappingPass.l",this.luminanceRT.texture.generateMipmaps=!1,this.previousLuminanceRT=new Gt(this.resolution,this.resolution),this.previousLuminanceRT.texture.name="AdaptiveToneMappingPass.pl",this.previousLuminanceRT.texture.generateMipmaps=!1,this.currentLuminanceRT=new Gt(this.resolution,this.resolution,{minFilter:Ws,generateMipmaps:!0}),this.currentLuminanceRT.texture.name="AdaptiveToneMappingPass.cl",this.adaptive&&(this.materialToneMap.defines.ADAPTED_LUMINANCE="",this.materialToneMap.uniforms.luminanceMap.value=this.luminanceRT.texture),this.fsQuad.material=new Xn({color:7829367}),this.materialLuminance.needsUpdate=!0,this.materialAdaptiveLum.needsUpdate=!0,this.materialToneMap.needsUpdate=!0}setAdaptive(e){e?(this.adaptive=!0,this.materialToneMap.defines.ADAPTED_LUMINANCE="",this.materialToneMap.uniforms.luminanceMap.value=this.luminanceRT.texture):(this.adaptive=!1,delete this.materialToneMap.defines.ADAPTED_LUMINANCE,this.materialToneMap.uniforms.luminanceMap.value=null),this.materialToneMap.needsUpdate=!0}setAdaptionRate(e){e&&(this.materialAdaptiveLum.uniforms.tau.value=Math.abs(e))}setMinLuminance(e){e&&(this.materialToneMap.uniforms.minLuminance.value=e,this.materialAdaptiveLum.uniforms.minLuminance.value=e)}setMaxLuminance(e){e&&(this.materialToneMap.uniforms.maxLuminance.value=e)}setAverageLuminance(e){e&&(this.materialToneMap.uniforms.averageLuminance.value=e)}setMiddleGrey(e){e&&(this.materialToneMap.uniforms.middleGrey.value=e)}dispose(){this.luminanceRT&&this.luminanceRT.dispose(),this.previousLuminanceRT&&this.previousLuminanceRT.dispose(),this.currentLuminanceRT&&this.currentLuminanceRT.dispose(),this.materialLuminance&&this.materialLuminance.dispose(),this.materialAdaptiveLum&&this.materialAdaptiveLum.dispose(),this.materialCopy&&this.materialCopy.dispose(),this.materialToneMap&&this.materialToneMap.dispose()}}class Np extends Wi{getType(){return $me}set adaptive(e){this._objRef&&(this._objRef.adaptive=e)}get adaptive(){return this._objRef?.adaptive}set resolution(e){this._objRef&&(this._objRef.resolution=e)}get resolution(){return this._objRef?.resolution}set needsInit(e){this._objRef&&(this._objRef.needsInit=e)}get needsInit(){return this._objRef?.needsInit}set luminanceRT(e){this._objRef&&(this._objRef.luminanceRT=e)}get luminanceRT(){return this._objRef?.luminanceRT}set previousLuminanceRT(e){this._objRef&&(this._objRef.previousLuminanceRT=e)}get previousLuminanceRT(){return this._objRef?.previousLuminanceRT}set currentLuminanceRT(e){this._objRef&&(this._objRef.currentLuminanceRT=e)}get currentLuminanceRT(){return this._objRef?.currentLuminanceRT}set copyUniforms(e){this._objRef&&(this._objRef.copyUniforms=e)}get copyUniforms(){return this._objRef?.copyUniforms}set materialCopy(e){this._objRef&&(this._objRef.materialCopy=e)}get materialCopy(){return this._objRef?.materialCopy}set materialLuminance(e){this._objRef&&(this._objRef.materialLuminance=e)}get materialLuminance(){return this._objRef?.materialLuminance}set adaptLuminanceShader(e){this._objRef&&(this._objRef.adaptLuminanceShader=e)}get adaptLuminanceShader(){return this._objRef?.adaptLuminanceShader}set materialAdaptiveLum(e){this._objRef&&(this._objRef.materialAdaptiveLum=e)}get materialAdaptiveLum(){return this._objRef?.materialAdaptiveLum}set materialToneMap(e){this._objRef&&(this._objRef.materialToneMap=e)}get materialToneMap(){return this._objRef?.materialToneMap}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}}Np.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Np)))(t||Np)}}(),Np.\u0275cmp=K({type:Np,selectors:[["th-adaptiveToneMappingPass"]],inputs:{adaptive:"adaptive",resolution:"resolution",needsInit:"needsInit",luminanceRT:"luminanceRT",previousLuminanceRT:"previousLuminanceRT",currentLuminanceRT:"currentLuminanceRT",copyUniforms:"copyUniforms",materialCopy:"materialCopy",materialLuminance:"materialLuminance",adaptLuminanceShader:"adaptLuminanceShader",materialAdaptiveLum:"materialAdaptiveLum",materialToneMap:"materialToneMap",fsQuad:"fsQuad"},features:[oe([{provide:Li,useExisting:le(()=>Np)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const ege={uniforms:{damp:{value:.96},tOld:{value:null},tNew:{value:null}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float damp;\n\n\t\tuniform sampler2D tOld;\n\t\tuniform sampler2D tNew;\n\n\t\tvarying vec2 vUv;\n\n\t\tvec4 when_gt( vec4 x, float y ) {\n\n\t\t\treturn max( sign( x - y ), 0.0 );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 texelOld = texture2D( tOld, vUv );\n\t\t\tvec4 texelNew = texture2D( tNew, vUv );\n\n\t\t\ttexelOld *= damp * when_gt( texelOld, 0.1 );\n\n\t\t\tgl_FragColor = max(texelNew, texelOld);\n\n\t\t}"};class tge extends wn{constructor(e=.96){super(),this.shader=ege,this.uniforms=mi.clone(this.shader.uniforms),this.uniforms.damp.value=e,this.textureComp=new Gt(window.innerWidth,window.innerHeight,{magFilter:Zt}),this.textureOld=new Gt(window.innerWidth,window.innerHeight,{magFilter:Zt}),this.compFsMaterial=new Dt({uniforms:this.uniforms,vertexShader:this.shader.vertexShader,fragmentShader:this.shader.fragmentShader}),this.compFsQuad=new yr(this.compFsMaterial),this.copyFsMaterial=new Xn,this.copyFsQuad=new yr(this.copyFsMaterial)}render(e,t,n){this.uniforms.tOld.value=this.textureOld.texture,this.uniforms.tNew.value=n.texture,e.setRenderTarget(this.textureComp),this.compFsQuad.render(e),this.copyFsQuad.material.map=this.textureComp.texture,this.renderToScreen?(e.setRenderTarget(null),this.copyFsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.copyFsQuad.render(e));const r=this.textureOld;this.textureOld=this.textureComp,this.textureComp=r}setSize(e,t){this.textureComp.setSize(e,t),this.textureOld.setSize(e,t)}dispose(){this.textureComp.dispose(),this.textureOld.dispose(),this.compFsMaterial.dispose(),this.copyFsMaterial.dispose(),this.compFsQuad.dispose(),this.copyFsQuad.dispose()}}class jp extends Wi{getType(){return tge}set shader(e){this._objRef&&(this._objRef.shader=e)}get shader(){return this._objRef?.shader}set uniforms(e){this._objRef&&Object.assign(this._objRef.uniforms,e)}get uniforms(){return this._objRef?.uniforms}set textureComp(e){this._objRef&&(this._objRef.textureComp=e)}get textureComp(){return this._objRef?.textureComp}set textureOld(e){this._objRef&&(this._objRef.textureOld=e)}get textureOld(){return this._objRef?.textureOld}set shaderMaterial(e){this._objRef&&(this._objRef.shaderMaterial=e)}get shaderMaterial(){return this._objRef?.shaderMaterial}set compFsQuad(e){this._objRef&&(this._objRef.compFsQuad=e)}get compFsQuad(){return this._objRef?.compFsQuad}set copyFsQuad(e){this._objRef&&(this._objRef.copyFsQuad=e)}get copyFsQuad(){return this._objRef?.copyFsQuad}}jp.\u0275fac=function(){let i;return function(t){return(i||(i=ce(jp)))(t||jp)}}(),jp.\u0275cmp=K({type:jp,selectors:[["th-afterimagePass"]],inputs:{shader:"shader",uniforms:"uniforms",textureComp:"textureComp",textureOld:"textureOld",shaderMaterial:"shaderMaterial",compFsQuad:"compFsQuad",copyFsQuad:"copyFsQuad"},features:[oe([{provide:Li,useExisting:le(()=>jp)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Nc extends no{getType(){return Sb}get isLightProbe(){return this._objRef?.isLightProbe}set sh(e){this._objRef&&(this._objRef.sh=Qe(this._objRef.sh,e))}get sh(){return this._objRef?.sh}}Nc.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Nc)))(t||Nc)}}(),Nc.\u0275cmp=K({type:Nc,selectors:[["th-lightProbe"]],inputs:{sh:"sh"},features:[oe([{provide:Ke,useExisting:le(()=>Nc)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Up extends Nc{getType(){return P4}get isAmbientLightProbe(){return this._objRef?.isAmbientLightProbe}}Up.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Up)))(t||Up)}}(),Up.\u0275cmp=K({type:Up,selectors:[["th-ambientLightProbe"]],features:[oe([{provide:Ke,useExisting:le(()=>Up)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const Pt={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},qi={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},ti={x:0,y:0},lo={camera:new We,gizmos:new We},ln={type:"change"},ha={type:"start"},Fo={type:"end"},sge=new _u,or=new R,uG=new We,hG=new We,fa=new R;class oge extends ns{constructor(e,t,n=null){super(),this.camera=null,this.domElement=t,this.scene=n,this.target=new R,this._currentTarget=new R,this.radiusFactor=.67,this.mouseActions=[],this._mouseOp=null,this._v2_1=new pe,this._v3_1=new R,this._v3_2=new R,this._m4_1=new We,this._m4_2=new We,this._quat=new wi,this._translationMatrix=new We,this._rotationMatrix=new We,this._scaleMatrix=new We,this._rotationAxis=new R,this._cameraMatrixState=new We,this._cameraProjectionState=new We,this._fovState=1,this._upState=new R,this._zoomState=1,this._nearPos=0,this._farPos=0,this._gizmoMatrixState=new We,this._up0=new R,this._zoom0=1,this._fov0=0,this._initialNear=0,this._nearPos0=0,this._initialFar=0,this._farPos0=0,this._cameraMatrixState0=new We,this._gizmoMatrixState0=new We,this._button=-1,this._touchStart=[],this._touchCurrent=[],this._input=qi.NONE,this._switchSensibility=32,this._startFingerDistance=0,this._currentFingerDistance=0,this._startFingerRotation=0,this._currentFingerRotation=0,this._devPxRatio=0,this._downValid=!0,this._nclicks=0,this._downEvents=[],this._downStart=0,this._clickStart=0,this._maxDownTime=250,this._maxInterval=300,this._posThreshold=24,this._movementThreshold=24,this._currentCursorPosition=new R,this._startCursorPosition=new R,this._grid=null,this._gridPosition=new R,this._gizmos=new xs,this._curvePts=128,this._timeStart=-1,this._animationId=-1,this.focusAnimationTime=500,this._timePrev=0,this._timeCurrent=0,this._anglePrev=0,this._angleCurrent=0,this._cursorPosPrev=new R,this._cursorPosCurr=new R,this._wPrev=0,this._wCurr=0,this.adjustNearFar=!1,this.scaleFactor=1.1,this.dampingFactor=25,this.wMax=20,this.enableAnimations=!0,this.enableGrid=!1,this.cursorZoom=!1,this.minFov=5,this.maxFov=90,this.enabled=!0,this.enablePan=!0,this.enableRotate=!0,this.enableZoom=!0,this.enableGizmos=!0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this._tbRadius=1,this._state=Pt.IDLE,this.setCamera(e),null!=this.scene&&this.scene.add(this._gizmos),this.domElement.style.touchAction="none",this._devPxRatio=window.devicePixelRatio,this.initializeMouseActions(),this._onContextMenu=lge.bind(this),this._onWheel=fge.bind(this),this._onPointerUp=hge.bind(this),this._onPointerMove=uge.bind(this),this._onPointerDown=dge.bind(this),this._onPointerCancel=cge.bind(this),this._onWindowResize=age.bind(this),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onWheel),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),window.addEventListener("resize",this._onWindowResize)}onSinglePanStart(e,t){if(this.enabled)switch(this.dispatchEvent(ha),this.setCenter(e.clientX,e.clientY),t){case"PAN":if(!this.enablePan)return;-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(ln)),this.updateTbState(Pt.PAN,!0),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.camera,ti.x,ti.y,this.domElement)),this.enableGrid&&(this.drawGrid(),this.dispatchEvent(ln));break;case"ROTATE":if(!this.enableRotate)return;-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1),this.updateTbState(Pt.ROTATE,!0),this._startCursorPosition.copy(this.unprojectOnTbSurface(this.camera,ti.x,ti.y,this.domElement,this._tbRadius)),this.activateGizmos(!0),this.enableAnimations&&(this._timePrev=this._timeCurrent=performance.now(),this._angleCurrent=this._anglePrev=0,this._cursorPosPrev.copy(this._startCursorPosition),this._cursorPosCurr.copy(this._cursorPosPrev),this._wCurr=0,this._wPrev=this._wCurr),this.dispatchEvent(ln);break;case"FOV":if(!this.camera.isPerspectiveCamera||!this.enableZoom)return;-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(ln)),this.updateTbState(Pt.FOV,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(ti.x,ti.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition);break;case"ZOOM":if(!this.enableZoom)return;-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(ln)),this.updateTbState(Pt.SCALE,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(ti.x,ti.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition)}}onSinglePanMove(e,t){if(this.enabled){const n=t!=this._state;switch(this.setCenter(e.clientX,e.clientY),t){case Pt.PAN:this.enablePan&&(n?(this.dispatchEvent(Fo),this.dispatchEvent(ha),this.updateTbState(t,!0),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.camera,ti.x,ti.y,this.domElement)),this.enableGrid&&this.drawGrid(),this.activateGizmos(!1)):(this._currentCursorPosition.copy(this.unprojectOnTbPlane(this.camera,ti.x,ti.y,this.domElement)),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition))));break;case Pt.ROTATE:if(this.enableRotate)if(n)this.dispatchEvent(Fo),this.dispatchEvent(ha),this.updateTbState(t,!0),this._startCursorPosition.copy(this.unprojectOnTbSurface(this.camera,ti.x,ti.y,this.domElement,this._tbRadius)),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!0);else{this._currentCursorPosition.copy(this.unprojectOnTbSurface(this.camera,ti.x,ti.y,this.domElement,this._tbRadius));const r=this._startCursorPosition.distanceTo(this._currentCursorPosition),s=this._startCursorPosition.angleTo(this._currentCursorPosition),o=Math.max(r/this._tbRadius,s);this.applyTransformMatrix(this.rotate(this.calculateRotationAxis(this._startCursorPosition,this._currentCursorPosition),o)),this.enableAnimations&&(this._timePrev=this._timeCurrent,this._timeCurrent=performance.now(),this._anglePrev=this._angleCurrent,this._angleCurrent=o,this._cursorPosPrev.copy(this._cursorPosCurr),this._cursorPosCurr.copy(this._currentCursorPosition),this._wPrev=this._wCurr,this._wCurr=this.calculateAngularSpeed(this._anglePrev,this._angleCurrent,this._timePrev,this._timeCurrent))}break;case Pt.SCALE:if(this.enableZoom)if(n)this.dispatchEvent(Fo),this.dispatchEvent(ha),this.updateTbState(t,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(ti.x,ti.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(.5*this.getCursorNDC(ti.x,ti.y,this.domElement).y);const s=this._currentCursorPosition.y-this._startCursorPosition.y;let o=1;s<0?o=1/Math.pow(this.scaleFactor,8*-s):s>0&&(o=Math.pow(this.scaleFactor,8*s)),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this.applyTransformMatrix(this.scale(o,this._v3_1))}break;case Pt.FOV:if(this.enableZoom&&this.camera.isPerspectiveCamera)if(n)this.dispatchEvent(Fo),this.dispatchEvent(ha),this.updateTbState(t,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(ti.x,ti.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(.5*this.getCursorNDC(ti.x,ti.y,this.domElement).y);const s=this._currentCursorPosition.y-this._startCursorPosition.y;let o=1;s<0?o=1/Math.pow(this.scaleFactor,8*-s):s>0&&(o=Math.pow(this.scaleFactor,8*s)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const a=this._v3_1.distanceTo(this._gizmos.position);let l=a/o;l=vt.clamp(l,this.minDistance,this.maxDistance);const c=a*Math.tan(vt.DEG2RAD*this._fovState*.5);let d=vt.RAD2DEG*(2*Math.atan(c/l));d=vt.clamp(d,this.minFov,this.maxFov);const u=c/Math.tan(vt.DEG2RAD*(d/2));o=a/u,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.scale(o,this._v3_2,!1)),or.copy(this._gizmos.position).sub(this.camera.position).normalize().multiplyScalar(u/a),this._m4_1.makeTranslation(or.x,or.y,or.z)}}this.dispatchEvent(ln)}}onSinglePanEnd(){if(this._state==Pt.ROTATE){if(!this.enableRotate)return;if(this.enableAnimations)if(performance.now()-this._timeCurrent<120){const t=Math.abs((this._wPrev+this._wCurr)/2),n=this;this._animationId=window.requestAnimationFrame(function(r){n.updateTbState(Pt.ANIMATION_ROTATE,!0);const s=n.calculateRotationAxis(n._cursorPosPrev,n._cursorPosCurr);n.onRotationAnim(r,s,Math.min(t,n.wMax))})}else this.updateTbState(Pt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(ln);else this.updateTbState(Pt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(ln)}else(this._state==Pt.PAN||this._state==Pt.IDLE)&&(this.updateTbState(Pt.IDLE,!1),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1),this.dispatchEvent(ln));this.dispatchEvent(Fo)}onDoubleTap(e){if(this.enabled&&this.enablePan&&null!=this.scene){this.dispatchEvent(ha),this.setCenter(e.clientX,e.clientY);const t=this.unprojectOnObj(this.getCursorNDC(ti.x,ti.y,this.domElement),this.camera);if(null!=t&&this.enableAnimations){const n=this;-1!=this._animationId&&window.cancelAnimationFrame(this._animationId),this._timeStart=-1,this._animationId=window.requestAnimationFrame(function(r){n.updateTbState(Pt.ANIMATION_FOCUS,!0),n.onFocusAnim(r,t,n._cameraMatrixState,n._gizmoMatrixState)})}else null!=t&&!this.enableAnimations&&(this.updateTbState(Pt.FOCUS,!0),this.focus(t,this.scaleFactor),this.updateTbState(Pt.IDLE,!1),this.dispatchEvent(ln))}this.dispatchEvent(Fo)}onDoublePanStart(){this.enabled&&this.enablePan&&(this.dispatchEvent(ha),this.updateTbState(Pt.PAN,!0),this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.camera,ti.x,ti.y,this.domElement,!0)),this._currentCursorPosition.copy(this._startCursorPosition),this.activateGizmos(!1))}onDoublePanMove(){this.enabled&&this.enablePan&&(this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=Pt.PAN&&(this.updateTbState(Pt.PAN,!0),this._startCursorPosition.copy(this._currentCursorPosition)),this._currentCursorPosition.copy(this.unprojectOnTbPlane(this.camera,ti.x,ti.y,this.domElement,!0)),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition,!0)),this.dispatchEvent(ln))}onDoublePanEnd(){this.updateTbState(Pt.IDLE,!1),this.dispatchEvent(Fo)}onRotateStart(){this.enabled&&this.enableRotate&&(this.dispatchEvent(ha),this.updateTbState(Pt.ZROTATE,!0),this._startFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this._currentFingerRotation=this._startFingerRotation,this.camera.getWorldDirection(this._rotationAxis),!this.enablePan&&!this.enableZoom&&this.activateGizmos(!0))}onRotateMove(){if(this.enabled&&this.enableRotate){let e;this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=Pt.ZROTATE&&(this.updateTbState(Pt.ZROTATE,!0),this._startFingerRotation=this._currentFingerRotation),this._currentFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this.enablePan?(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),e=this.unprojectOnTbPlane(this.camera,ti.x,ti.y,this.domElement).applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._v3_2)):e=(new R).setFromMatrixPosition(this._gizmoMatrixState),this.applyTransformMatrix(this.zRotate(e,vt.DEG2RAD*(this._startFingerRotation-this._currentFingerRotation))),this.dispatchEvent(ln)}}onRotateEnd(){this.updateTbState(Pt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Fo)}onPinchStart(){this.enabled&&this.enableZoom&&(this.dispatchEvent(ha),this.updateTbState(Pt.SCALE,!0),this._startFingerDistance=this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),this._currentFingerDistance=this._startFingerDistance,this.activateGizmos(!1))}onPinchMove(){if(this.enabled&&this.enableZoom){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const e=12;this._state!=Pt.SCALE&&(this._startFingerDistance=this._currentFingerDistance,this.updateTbState(Pt.SCALE,!0)),this._currentFingerDistance=Math.max(this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),e*this._devPxRatio);const t=this._currentFingerDistance/this._startFingerDistance;let n;this.enablePan?this.camera.isOrthographicCamera?n=this.unprojectOnTbPlane(this.camera,ti.x,ti.y,this.domElement).applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera.isPerspectiveCamera&&(n=this.unprojectOnTbPlane(this.camera,ti.x,ti.y,this.domElement).applyQuaternion(this.camera.quaternion).add(this._gizmos.position)):n=this._gizmos.position,this.applyTransformMatrix(this.scale(t,n)),this.dispatchEvent(ln)}}onPinchEnd(){this.updateTbState(Pt.IDLE,!1),this.dispatchEvent(Fo)}onTriplePanStart(){if(this.enabled&&this.enableZoom){this.dispatchEvent(ha),this.updateTbState(Pt.SCALE,!0);let e=0,t=0;const n=this._touchCurrent.length;for(let r=0;r<n;r++)e+=this._touchCurrent[r].clientX,t+=this._touchCurrent[r].clientY;this.setCenter(e/n,t/n),this._startCursorPosition.setY(.5*this.getCursorNDC(ti.x,ti.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition)}}onTriplePanMove(){if(this.enabled&&this.enableZoom){let e=0,t=0;const n=this._touchCurrent.length;for(let h=0;h<n;h++)e+=this._touchCurrent[h].clientX,t+=this._touchCurrent[h].clientY;this.setCenter(e/n,t/n);const r=8;this._currentCursorPosition.setY(.5*this.getCursorNDC(ti.x,ti.y,this.domElement).y);const s=this._currentCursorPosition.y-this._startCursorPosition.y;let o=1;s<0?o=1/Math.pow(this.scaleFactor,-s*r):s>0&&(o=Math.pow(this.scaleFactor,s*r)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const a=this._v3_1.distanceTo(this._gizmos.position);let l=a/o;l=vt.clamp(l,this.minDistance,this.maxDistance);const c=a*Math.tan(vt.DEG2RAD*this._fovState*.5);let d=vt.RAD2DEG*(2*Math.atan(c/l));d=vt.clamp(d,this.minFov,this.maxFov);const u=c/Math.tan(vt.DEG2RAD*(d/2));o=a/u,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.scale(o,this._v3_2,!1)),or.copy(this._gizmos.position).sub(this.camera.position).normalize().multiplyScalar(u/a),this._m4_1.makeTranslation(or.x,or.y,or.z),this.dispatchEvent(ln)}}onTriplePanEnd(){this.updateTbState(Pt.IDLE,!1),this.dispatchEvent(Fo)}setCenter(e,t){ti.x=e,ti.y=t}initializeMouseActions(){this.setMouseAction("PAN",0,"CTRL"),this.setMouseAction("PAN",2),this.setMouseAction("ROTATE",0),this.setMouseAction("ZOOM","WHEEL"),this.setMouseAction("ZOOM",1),this.setMouseAction("FOV","WHEEL","SHIFT"),this.setMouseAction("FOV",1,"SHIFT")}compareMouseAction(e,t){return e.operation==t.operation&&e.mouse==t.mouse&&e.key==t.key}setMouseAction(e,t,n=null){let a;if(!["PAN","ROTATE","ZOOM","FOV"].includes(e)||![0,1,2,"WHEEL"].includes(t)||!["CTRL","SHIFT",null].includes(n)||"WHEEL"==t&&"ZOOM"!=e&&"FOV"!=e)return!1;switch(e){case"PAN":a=Pt.PAN;break;case"ROTATE":a=Pt.ROTATE;break;case"ZOOM":a=Pt.SCALE;break;case"FOV":a=Pt.FOV}const l={operation:e,mouse:t,key:n,state:a};for(let c=0;c<this.mouseActions.length;c++)if(this.mouseActions[c].mouse==l.mouse&&this.mouseActions[c].key==l.key)return this.mouseActions.splice(c,1,l),!0;return this.mouseActions.push(l),!0}unsetMouseAction(e,t=null){for(let n=0;n<this.mouseActions.length;n++)if(this.mouseActions[n].mouse==e&&this.mouseActions[n].key==t)return this.mouseActions.splice(n,1),!0;return!1}getOpFromAction(e,t){let n;for(let r=0;r<this.mouseActions.length;r++)if(n=this.mouseActions[r],n.mouse==e&&n.key==t)return n.operation;if(null!=t)for(let r=0;r<this.mouseActions.length;r++)if(n=this.mouseActions[r],n.mouse==e&&null==n.key)return n.operation;return null}getOpStateFromAction(e,t){let n;for(let r=0;r<this.mouseActions.length;r++)if(n=this.mouseActions[r],n.mouse==e&&n.key==t)return n.state;if(null!=t)for(let r=0;r<this.mouseActions.length;r++)if(n=this.mouseActions[r],n.mouse==e&&null==n.key)return n.state;return null}getAngle(e,t){return 180*Math.atan2(t.clientY-e.clientY,t.clientX-e.clientX)/Math.PI}updateTouchEvent(e){for(let t=0;t<this._touchCurrent.length;t++)if(this._touchCurrent[t].pointerId==e.pointerId){this._touchCurrent.splice(t,1,e);break}}applyTransformMatrix(e){if(null!=e.camera&&(this._m4_1.copy(this._cameraMatrixState).premultiply(e.camera),this._m4_1.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.updateMatrix(),(this._state==Pt.ROTATE||this._state==Pt.ZROTATE||this._state==Pt.ANIMATION_ROTATE)&&this.camera.up.copy(this._upState).applyQuaternion(this.camera.quaternion)),null!=e.gizmos&&(this._m4_1.copy(this._gizmoMatrixState).premultiply(e.gizmos),this._m4_1.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix()),this._state==Pt.SCALE||this._state==Pt.FOCUS||this._state==Pt.ANIMATION_FOCUS)if(this._tbRadius=this.calculateTbRadius(this.camera),this.adjustNearFar){const t=this.camera.position.distanceTo(this._gizmos.position),n=new Ks;n.setFromObject(this._gizmos);const r=new wo;n.getBoundingSphere(r);const s=Math.max(this._nearPos0,r.radius+r.center.length()),a=Math.min(s,t-this._initialNear);this.camera.near=t-a;const l=Math.min(this._farPos0,-r.radius+r.center.length()),d=Math.min(l,t-this._initialFar);this.camera.far=t-d,this.camera.updateProjectionMatrix()}else{let t=!1;this.camera.near!=this._initialNear&&(this.camera.near=this._initialNear,t=!0),this.camera.far!=this._initialFar&&(this.camera.far=this._initialFar,t=!0),t&&this.camera.updateProjectionMatrix()}}calculateAngularSpeed(e,t,n,r){const o=(r-n)/1e3;return 0==o?0:(t-e)/o}calculatePointersDistance(e,t){return Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2))}calculateRotationAxis(e,t){return this._rotationMatrix.extractRotation(this._cameraMatrixState),this._quat.setFromRotationMatrix(this._rotationMatrix),this._rotationAxis.crossVectors(e,t).applyQuaternion(this._quat),this._rotationAxis.normalize().clone()}calculateTbRadius(e){const t=e.position.distanceTo(this._gizmos.position);if("PerspectiveCamera"==e.type){const n=vt.DEG2RAD*e.fov*.5,r=Math.atan(e.aspect*Math.tan(n));return Math.tan(Math.min(n,r))*t*this.radiusFactor}if("OrthographicCamera"==e.type)return Math.min(e.top,e.right)*this.radiusFactor}focus(e,t,n=1){or.copy(e).sub(this._gizmos.position).multiplyScalar(n),this._translationMatrix.makeTranslation(or.x,or.y,or.z),uG.copy(this._gizmoMatrixState),this._gizmoMatrixState.premultiply(this._translationMatrix),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),hG.copy(this._cameraMatrixState),this._cameraMatrixState.premultiply(this._translationMatrix),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.enableZoom&&this.applyTransformMatrix(this.scale(t,this._gizmos.position)),this._gizmoMatrixState.copy(uG),this._cameraMatrixState.copy(hG)}drawGrid(){if(null!=this.scene){let n,r,s,o;if(this.camera.isOrthographicCamera)s=Math.max(this.camera.right-this.camera.left,this.camera.bottom-this.camera.top),o=s/20,n=s/this.camera.zoom*3,r=n/o*this.camera.zoom;else if(this.camera.isPerspectiveCamera){const a=this.camera.position.distanceTo(this._gizmos.position),l=vt.DEG2RAD*this.camera.fov*.5,c=Math.atan(this.camera.aspect*Math.tan(l));s=Math.tan(Math.max(l,c))*a*2,o=s/20,n=3*s,r=n/o}null==this._grid&&(this._grid=new FR(n,r,8947848,8947848),this._grid.position.copy(this._gizmos.position),this._gridPosition.copy(this._grid.position),this._grid.quaternion.copy(this.camera.quaternion),this._grid.rotateX(.5*Math.PI),this.scene.add(this._grid))}}dispose(){-1!=this._animationId&&window.cancelAnimationFrame(this._animationId),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),window.removeEventListener("resize",this._onWindowResize),null!==this.scene&&this.scene.remove(this._gizmos),this.disposeGrid()}disposeGrid(){null!=this._grid&&null!=this.scene&&(this.scene.remove(this._grid),this._grid=null)}easeOutCubic(e){return 1-Math.pow(1-e,3)}activateGizmos(e){const t=this._gizmos.children[0],n=this._gizmos.children[1],r=this._gizmos.children[2];e?(t.material.setValues({opacity:1}),n.material.setValues({opacity:1}),r.material.setValues({opacity:1})):(t.material.setValues({opacity:.6}),n.material.setValues({opacity:.6}),r.material.setValues({opacity:.6}))}getCursorNDC(e,t,n){const r=n.getBoundingClientRect();return this._v2_1.setX((e-r.left)/r.width*2-1),this._v2_1.setY((r.bottom-t)/r.height*2-1),this._v2_1.clone()}getCursorPosition(e,t,n){return this._v2_1.copy(this.getCursorNDC(e,t,n)),this._v2_1.x*=.5*(this.camera.right-this.camera.left),this._v2_1.y*=.5*(this.camera.top-this.camera.bottom),this._v2_1.clone()}setCamera(e){e.lookAt(this.target),e.updateMatrix(),"PerspectiveCamera"==e.type&&(this._fov0=e.fov,this._fovState=e.fov),this._cameraMatrixState0.copy(e.matrix),this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraProjectionState.copy(e.projectionMatrix),this._zoom0=e.zoom,this._zoomState=this._zoom0,this._initialNear=e.near,this._nearPos0=e.position.distanceTo(this.target)-e.near,this._nearPos=this._initialNear,this._initialFar=e.far,this._farPos0=e.position.distanceTo(this.target)-e.far,this._farPos=this._initialFar,this._up0.copy(e.up),this._upState.copy(e.up),this.camera=e,this.camera.updateProjectionMatrix(),this._tbRadius=this.calculateTbRadius(e),this.makeGizmos(this.target,this._tbRadius)}setGizmosVisible(e){this._gizmos.visible=e,this.dispatchEvent(ln)}setTbRadius(e){this.radiusFactor=e,this._tbRadius=this.calculateTbRadius(this.camera);const n=new bc(0,0,this._tbRadius,this._tbRadius).getPoints(this._curvePts),r=(new Mt).setFromPoints(n);for(const s in this._gizmos.children)this._gizmos.children[s].geometry=r;this.dispatchEvent(ln)}makeGizmos(e,t){const r=new bc(0,0,t,t).getPoints(this._curvePts),s=(new Mt).setFromPoints(r),o=new mn({color:16744576,fog:!1,transparent:!0,opacity:.6}),a=new mn({color:8454016,fog:!1,transparent:!0,opacity:.6}),l=new mn({color:8421631,fog:!1,transparent:!0,opacity:.6}),c=new Vn(s,o),d=new Vn(s,a),u=new Vn(s,l),h=.5*Math.PI;if(c.rotation.x=h,d.rotation.y=h,this._gizmoMatrixState0.identity().setPosition(e),this._gizmoMatrixState.copy(this._gizmoMatrixState0),1!==this.camera.zoom){const f=1/this.camera.zoom;this._scaleMatrix.makeScale(f,f,f),this._translationMatrix.makeTranslation(-e.x,-e.y,-e.z),this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix),this._translationMatrix.makeTranslation(e.x,e.y,e.z),this._gizmoMatrixState.premultiply(this._translationMatrix)}this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.traverse(function(f){f.isLine&&(f.geometry.dispose(),f.material.dispose())}),this._gizmos.clear(),this._gizmos.add(c),this._gizmos.add(d),this._gizmos.add(u)}onFocusAnim(e,t,n,r){if(-1==this._timeStart&&(this._timeStart=e),this._state==Pt.ANIMATION_FOCUS){const o=(e-this._timeStart)/this.focusAnimationTime;if(this._gizmoMatrixState.copy(r),o>=1)this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(t,this.scaleFactor),this._timeStart=-1,this.updateTbState(Pt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(ln);else{const a=this.easeOutCubic(o),l=1-a+this.scaleFactor*a;this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(t,l,a),this.dispatchEvent(ln);const c=this;this._animationId=window.requestAnimationFrame(function(d){c.onFocusAnim(d,t,n,r.clone())})}}else this._animationId=-1,this._timeStart=-1}onRotationAnim(e,t,n){if(-1==this._timeStart&&(this._anglePrev=0,this._angleCurrent=0,this._timeStart=e),this._state==Pt.ANIMATION_ROTATE){const r=(e-this._timeStart)/1e3;if(n+-this.dampingFactor*r>0){this._angleCurrent=.5*-this.dampingFactor*Math.pow(r,2)+n*r+0,this.applyTransformMatrix(this.rotate(t,this._angleCurrent)),this.dispatchEvent(ln);const o=this;this._animationId=window.requestAnimationFrame(function(a){o.onRotationAnim(a,t,n)})}else this._animationId=-1,this._timeStart=-1,this.updateTbState(Pt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(ln)}else this._animationId=-1,this._timeStart=-1,this._state!=Pt.ROTATE&&(this.activateGizmos(!1),this.dispatchEvent(ln))}pan(e,t,n=!1){const r=e.clone().sub(t);if(this.camera.isOrthographicCamera)r.multiplyScalar(1/this.camera.zoom);else if(this.camera.isPerspectiveCamera&&n){this._v3_1.setFromMatrixPosition(this._cameraMatrixState0),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0);const s=this._v3_1.distanceTo(this._v3_2)/this.camera.position.distanceTo(this._gizmos.position);r.multiplyScalar(1/s)}return this._v3_1.set(r.x,r.y,0).applyQuaternion(this.camera.quaternion),this._m4_1.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z),this.setTransformationMatrices(this._m4_1,this._m4_1),lo}reset(){this.camera.zoom=this._zoom0,this.camera.isPerspectiveCamera&&(this.camera.fov=this._fov0),this.camera.near=this._nearPos,this.camera.far=this._farPos,this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(this._up0),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this._gizmoMatrixState0.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix(),this._tbRadius=this.calculateTbRadius(this.camera),this.makeGizmos(this._gizmos.position,this._tbRadius),this.camera.lookAt(this._gizmos.position),this.updateTbState(Pt.IDLE,!1),this.dispatchEvent(ln)}rotate(e,t){const n=this._gizmos.position;return this._translationMatrix.makeTranslation(-n.x,-n.y,-n.z),this._rotationMatrix.makeRotationAxis(e,-t),this._m4_1.makeTranslation(n.x,n.y,n.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1),lo}copyState(){let e;this.camera.isOrthographicCamera?e=JSON.stringify({arcballState:{cameraFar:this.camera.far,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}}):this.camera.isPerspectiveCamera&&(e=JSON.stringify({arcballState:{cameraFar:this.camera.far,cameraFov:this.camera.fov,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}})),navigator.clipboard.writeText(e)}pasteState(){const e=this;navigator.clipboard.readText().then(function(n){e.setStateFromJSON(n)})}saveState(){this._cameraMatrixState0.copy(this.camera.matrix),this._gizmoMatrixState0.copy(this._gizmos.matrix),this._nearPos=this.camera.near,this._farPos=this.camera.far,this._zoom0=this.camera.zoom,this._up0.copy(this.camera.up),this.camera.isPerspectiveCamera&&(this._fov0=this.camera.fov)}scale(e,t,n=!0){fa.copy(t);let r=1/e;if(this.camera.isOrthographicCamera){this.camera.zoom=this._zoomState,this.camera.zoom*=e,this.camera.zoom>this.maxZoom?(this.camera.zoom=this.maxZoom,r=this._zoomState/this.maxZoom):this.camera.zoom<this.minZoom&&(this.camera.zoom=this.minZoom,r=this._zoomState/this.minZoom),this.camera.updateProjectionMatrix(),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this._scaleMatrix.makeScale(r,r,r),this._translationMatrix.makeTranslation(-this._v3_1.x,-this._v3_1.y,-this._v3_1.z),this._m4_2.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z).multiply(this._scaleMatrix),this._m4_2.multiply(this._translationMatrix),fa.sub(this._v3_1);const s=fa.clone().multiplyScalar(r);return fa.sub(s),this._m4_1.makeTranslation(fa.x,fa.y,fa.z),this._m4_2.premultiply(this._m4_1),this.setTransformationMatrices(this._m4_1,this._m4_2),lo}if(this.camera.isPerspectiveCamera){this._v3_1.setFromMatrixPosition(this._cameraMatrixState),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);let s=this._v3_1.distanceTo(fa),o=s-s*r;const a=s-o;if(a<this.minDistance?(r=this.minDistance/s,o=s-s*r):a>this.maxDistance&&(r=this.maxDistance/s,o=s-s*r),or.copy(fa).sub(this._v3_1).normalize().multiplyScalar(o),this._m4_1.makeTranslation(or.x,or.y,or.z),n){const l=this._v3_2;s=l.distanceTo(fa),o=s-s*r,or.copy(fa).sub(this._v3_2).normalize().multiplyScalar(o),this._translationMatrix.makeTranslation(l.x,l.y,l.z),this._scaleMatrix.makeScale(r,r,r),this._m4_2.makeTranslation(or.x,or.y,or.z).multiply(this._translationMatrix),this._m4_2.multiply(this._scaleMatrix),this._translationMatrix.makeTranslation(-l.x,-l.y,-l.z),this._m4_2.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1,this._m4_2)}else this.setTransformationMatrices(this._m4_1);return lo}}setFov(e){this.camera.isPerspectiveCamera&&(this.camera.fov=vt.clamp(e,this.minFov,this.maxFov),this.camera.updateProjectionMatrix())}setTransformationMatrices(e=null,t=null){null!=e?null!=lo.camera?lo.camera.copy(e):lo.camera=e.clone():lo.camera=null,null!=t?null!=lo.gizmos?lo.gizmos.copy(t):lo.gizmos=t.clone():lo.gizmos=null}zRotate(e,t){return this._rotationMatrix.makeRotationAxis(this._rotationAxis,t),this._translationMatrix.makeTranslation(-e.x,-e.y,-e.z),this._m4_1.makeTranslation(e.x,e.y,e.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(e),this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis,t),this._v3_2.sub(this._v3_1),this._m4_2.makeTranslation(this._v3_2.x,this._v3_2.y,this._v3_2.z),this.setTransformationMatrices(this._m4_1,this._m4_2),lo}getRaycaster(){return sge}unprojectOnObj(e,t){const n=this.getRaycaster();n.near=t.near,n.far=t.far,n.setFromCamera(e,t);const r=n.intersectObjects(this.scene.children,!0);for(let s=0;s<r.length;s++)if(r[s].object.uuid!=this._gizmos.uuid&&null!=r[s].face)return r[s].point.clone();return null}unprojectOnTbSurface(e,t,n,r,s){if("OrthographicCamera"==e.type){this._v2_1.copy(this.getCursorPosition(t,n,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0);const o=Math.pow(this._v2_1.x,2),a=Math.pow(this._v2_1.y,2),l=Math.pow(this._tbRadius,2);return this._v3_1.setZ(o+a<=.5*l?Math.sqrt(l-(o+a)):.5*l/Math.sqrt(o+a)),this._v3_1}if("PerspectiveCamera"==e.type){this._v2_1.copy(this.getCursorNDC(t,n,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(e.projectionMatrixInverse);const o=this._v3_1.clone().normalize(),a=e.position.distanceTo(this._gizmos.position),l=Math.pow(s,2),c=this._v3_1.z,d=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));if(0==d)return o.set(this._v3_1.x,this._v3_1.y,s),o;const u=c/d,h=a;let f=Math.pow(u,2)+1,m=2*u*h,g=Math.pow(h,2)-l,_=Math.pow(m,2)-4*f*g;if(_>=0&&(this._v2_1.setX((-m-Math.sqrt(_))/(2*f)),this._v2_1.setY(u*this._v2_1.x+h),vt.RAD2DEG*this._v2_1.angle()>=45)){const b=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(a-this._v2_1.y,2));return o.multiplyScalar(b),o.z+=a,o}f=u,m=h,g=.5*-l,_=Math.pow(m,2)-4*f*g,this._v2_1.setX((-m-Math.sqrt(_))/(2*f)),this._v2_1.setY(u*this._v2_1.x+h);const p=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(a-this._v2_1.y,2));return o.multiplyScalar(p),o.z+=a,o}}unprojectOnTbPlane(e,t,n,r,s=!1){if("OrthographicCamera"==e.type)return this._v2_1.copy(this.getCursorPosition(t,n,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0),this._v3_1.clone();if("PerspectiveCamera"==e.type){this._v2_1.copy(this.getCursorNDC(t,n,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(e.projectionMatrixInverse);const o=this._v3_1.clone().normalize(),a=this._v3_1.z,l=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));let c;if(c=s?this._v3_1.setFromMatrixPosition(this._cameraMatrixState0).distanceTo(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0)):e.position.distanceTo(this._gizmos.position),0==l)return o.set(0,0,0),o;const h=-c/(a/l),f=Math.sqrt(Math.pow(c,2)+Math.pow(h,2));return o.multiplyScalar(f),o.z=0,o}}updateMatrixState(){this._cameraMatrixState.copy(this.camera.matrix),this._gizmoMatrixState.copy(this._gizmos.matrix),this.camera.isOrthographicCamera?(this._cameraProjectionState.copy(this.camera.projectionMatrix),this.camera.updateProjectionMatrix(),this._zoomState=this.camera.zoom):this.camera.isPerspectiveCamera&&(this._fovState=this.camera.fov)}updateTbState(e,t){this._state=e,t&&this.updateMatrixState()}update(){if(!1===this.target.equals(this._currentTarget)&&(this._gizmos.position.copy(this.target),this._tbRadius=this.calculateTbRadius(this.camera),this.makeGizmos(this.target,this._tbRadius),this._currentTarget.copy(this.target)),this.camera.isOrthographicCamera){if(this.camera.zoom>this.maxZoom||this.camera.zoom<this.minZoom){const t=vt.clamp(this.camera.zoom,this.minZoom,this.maxZoom);this.applyTransformMatrix(this.scale(t/this.camera.zoom,this._gizmos.position,!0))}}else if(this.camera.isPerspectiveCamera){const t=this.camera.position.distanceTo(this._gizmos.position);if(t>this.maxDistance+1e-6||t<this.minDistance-1e-6){const r=vt.clamp(t,this.minDistance,this.maxDistance);this.applyTransformMatrix(this.scale(r/t,this._gizmos.position)),this.updateMatrixState()}(this.camera.fov<this.minFov||this.camera.fov>this.maxFov)&&(this.camera.fov=vt.clamp(this.camera.fov,this.minFov,this.maxFov),this.camera.updateProjectionMatrix());const n=this._tbRadius;if(this._tbRadius=this.calculateTbRadius(this.camera),n<this._tbRadius-1e-6||n>this._tbRadius+1e-6){const s=this._tbRadius/((this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3),a=new bc(0,0,s,s).getPoints(this._curvePts),l=(new Mt).setFromPoints(a);for(const c in this._gizmos.children)this._gizmos.children[c].geometry=l}}this.camera.lookAt(this._gizmos.position)}setStateFromJSON(e){const t=JSON.parse(e);if(null!=t.arcballState){this._cameraMatrixState.fromArray(t.arcballState.cameraMatrix.elements),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(t.arcballState.cameraUp),this.camera.near=t.arcballState.cameraNear,this.camera.far=t.arcballState.cameraFar,this.camera.zoom=t.arcballState.cameraZoom,this.camera.isPerspectiveCamera&&(this.camera.fov=t.arcballState.cameraFov),this._gizmoMatrixState.fromArray(t.arcballState.gizmoMatrix.elements),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmos.updateMatrix(),this._tbRadius=this.calculateTbRadius(this.camera);const n=(new We).copy(this._gizmoMatrixState0);this.makeGizmos(this._gizmos.position,this._tbRadius),this._gizmoMatrixState0.copy(n),this.camera.lookAt(this._gizmos.position),this.updateTbState(Pt.IDLE,!1),this.dispatchEvent(ln)}}}function age(){const i=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3;this._tbRadius=this.calculateTbRadius(this.camera);const e=this._tbRadius/i,n=new bc(0,0,e,e).getPoints(this._curvePts),r=(new Mt).setFromPoints(n);for(const s in this._gizmos.children)this._gizmos.children[s].geometry=r;this.dispatchEvent(ln)}function lge(i){if(this.enabled)for(let e=0;e<this.mouseActions.length;e++)if(2==this.mouseActions[e].mouse){i.preventDefault();break}}function cge(){this._touchStart.splice(0,this._touchStart.length),this._touchCurrent.splice(0,this._touchCurrent.length),this._input=qi.NONE}function dge(i){if(0==i.button&&i.isPrimary?(this._downValid=!0,this._downEvents.push(i),this._downStart=performance.now()):this._downValid=!1,"touch"==i.pointerType&&this._input!=qi.CURSOR)switch(this._touchStart.push(i),this._touchCurrent.push(i),this._input){case qi.NONE:this._input=qi.ONE_FINGER,this.onSinglePanStart(i,"ROTATE"),window.addEventListener("pointermove",this._onPointerMove),window.addEventListener("pointerup",this._onPointerUp);break;case qi.ONE_FINGER:case qi.ONE_FINGER_SWITCHED:this._input=qi.TWO_FINGER,this.onRotateStart(),this.onPinchStart(),this.onDoublePanStart();break;case qi.TWO_FINGER:this._input=qi.MULT_FINGER,this.onTriplePanStart(i)}else if("touch"!=i.pointerType&&this._input==qi.NONE){let e=null;i.ctrlKey||i.metaKey?e="CTRL":i.shiftKey&&(e="SHIFT"),this._mouseOp=this.getOpFromAction(i.button,e),null!=this._mouseOp&&(window.addEventListener("pointermove",this._onPointerMove),window.addEventListener("pointerup",this._onPointerUp),this._input=qi.CURSOR,this._button=i.button,this.onSinglePanStart(i,this._mouseOp))}}function uge(i){if("touch"==i.pointerType&&this._input!=qi.CURSOR)switch(this._input){case qi.ONE_FINGER:this.updateTouchEvent(i),this.onSinglePanMove(i,Pt.ROTATE);break;case qi.ONE_FINGER_SWITCHED:if(this.calculatePointersDistance(this._touchCurrent[0],i)*this._devPxRatio>=this._switchSensibility){this._input=qi.ONE_FINGER,this.updateTouchEvent(i),this.onSinglePanStart(i,"ROTATE");break}break;case qi.TWO_FINGER:this.updateTouchEvent(i),this.onRotateMove(),this.onPinchMove(),this.onDoublePanMove();break;case qi.MULT_FINGER:this.updateTouchEvent(i),this.onTriplePanMove(i)}else if("touch"!=i.pointerType&&this._input==qi.CURSOR){let e=null;i.ctrlKey||i.metaKey?e="CTRL":i.shiftKey&&(e="SHIFT");const t=this.getOpStateFromAction(this._button,e);null!=t&&this.onSinglePanMove(i,t)}this._downValid&&this.calculatePointersDistance(this._downEvents[this._downEvents.length-1],i)*this._devPxRatio>this._movementThreshold&&(this._downValid=!1)}function hge(i){if("touch"==i.pointerType&&this._input!=qi.CURSOR){const e=this._touchCurrent.length;for(let t=0;t<e;t++)if(this._touchCurrent[t].pointerId==i.pointerId){this._touchCurrent.splice(t,1),this._touchStart.splice(t,1);break}switch(this._input){case qi.ONE_FINGER:case qi.ONE_FINGER_SWITCHED:window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=qi.NONE,this.onSinglePanEnd();break;case qi.TWO_FINGER:this.onDoublePanEnd(i),this.onPinchEnd(i),this.onRotateEnd(i),this._input=qi.ONE_FINGER_SWITCHED;break;case qi.MULT_FINGER:0==this._touchCurrent.length&&(window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=qi.NONE,this.onTriplePanEnd())}}else"touch"!=i.pointerType&&this._input==qi.CURSOR&&(window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=qi.NONE,this.onSinglePanEnd(),this._button=-1);if(i.isPrimary)if(this._downValid)if(i.timeStamp-this._downEvents[this._downEvents.length-1].timeStamp<=this._maxDownTime)if(0==this._nclicks)this._nclicks=1,this._clickStart=performance.now();else{const t=i.timeStamp-this._clickStart,n=this.calculatePointersDistance(this._downEvents[1],this._downEvents[0])*this._devPxRatio;t<=this._maxInterval&&n<=this._posThreshold?(this._nclicks=0,this._downEvents.splice(0,this._downEvents.length),this.onDoubleTap(i)):(this._nclicks=1,this._downEvents.shift(),this._clickStart=performance.now())}else this._downValid=!1,this._nclicks=0,this._downEvents.splice(0,this._downEvents.length);else this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)}function fge(i){if(this.enabled&&this.enableZoom){let e=null;i.ctrlKey||i.metaKey?e="CTRL":i.shiftKey&&(e="SHIFT");const t=this.getOpFromAction("WHEEL",e);if(null!=t){i.preventDefault(),this.dispatchEvent(ha);const n=125;let r=i.deltaY/n,s=1;switch(r>0?s=1/this.scaleFactor:r<0&&(s=this.scaleFactor),t){case"ZOOM":if(this.updateTbState(Pt.SCALE,!0),r>0?s=1/Math.pow(this.scaleFactor,r):r<0&&(s=Math.pow(this.scaleFactor,-r)),this.cursorZoom&&this.enablePan){let o;this.camera.isOrthographicCamera?o=this.unprojectOnTbPlane(this.camera,i.clientX,i.clientY,this.domElement).applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera.isPerspectiveCamera&&(o=this.unprojectOnTbPlane(this.camera,i.clientX,i.clientY,this.domElement).applyQuaternion(this.camera.quaternion).add(this._gizmos.position)),this.applyTransformMatrix(this.scale(s,o))}else this.applyTransformMatrix(this.scale(s,this._gizmos.position));null!=this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(Pt.IDLE,!1),this.dispatchEvent(ln),this.dispatchEvent(Fo);break;case"FOV":if(this.camera.isPerspectiveCamera){this.updateTbState(Pt.FOV,!0),0!=i.deltaX&&(r=i.deltaX/n,s=1,r>0?s=1/Math.pow(this.scaleFactor,r):r<0&&(s=Math.pow(this.scaleFactor,-r))),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const o=this._v3_1.distanceTo(this._gizmos.position);let a=o/s;a=vt.clamp(a,this.minDistance,this.maxDistance);const l=o*Math.tan(vt.DEG2RAD*this.camera.fov*.5);let c=vt.RAD2DEG*(2*Math.atan(l/a));c>this.maxFov?c=this.maxFov:c<this.minFov&&(c=this.minFov),s=o/(l/Math.tan(vt.DEG2RAD*(c/2))),this.setFov(c),this.applyTransformMatrix(this.scale(s,this._gizmos.position,!1))}null!=this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(Pt.IDLE,!1),this.dispatchEvent(ln),this.dispatchEvent(Fo)}}}}class Lu extends Qn{getType(){return oge}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set domElement(e){this._objRef&&(this._objRef.domElement=e)}get domElement(){return this._objRef?.domElement}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set focusAnimationTime(e){this._objRef&&(this._objRef.focusAnimationTime=e)}get focusAnimationTime(){return this._objRef?.focusAnimationTime}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set enablePan(e){this._objRef&&(this._objRef.enablePan=e)}get enablePan(){return this._objRef?.enablePan}set enableRotate(e){this._objRef&&(this._objRef.enableRotate=e)}get enableRotate(){return this._objRef?.enableRotate}set enableZoom(e){this._objRef&&(this._objRef.enableZoom=e)}get enableZoom(){return this._objRef?.enableZoom}set enableGizmos(e){this._objRef&&(this._objRef.enableGizmos=e)}get enableGizmos(){return this._objRef?.enableGizmos}set adjustNearFar(e){this._objRef&&(this._objRef.adjustNearFar=e)}get adjustNearFar(){return this._objRef?.adjustNearFar}set scaleFactor(e){this._objRef&&(this._objRef.scaleFactor=e)}get scaleFactor(){return this._objRef?.scaleFactor}set dampingFactor(e){this._objRef&&(this._objRef.dampingFactor=e)}get dampingFactor(){return this._objRef?.dampingFactor}set wMax(e){this._objRef&&(this._objRef.wMax=e)}get wMax(){return this._objRef?.wMax}set enableAnimations(e){this._objRef&&(this._objRef.enableAnimations=e)}get enableAnimations(){return this._objRef?.enableAnimations}set enableGrid(e){this._objRef&&(this._objRef.enableGrid=e)}get enableGrid(){return this._objRef?.enableGrid}set cursorZoom(e){this._objRef&&(this._objRef.cursorZoom=e)}get cursorZoom(){return this._objRef?.cursorZoom}set minFov(e){this._objRef&&(this._objRef.minFov=e)}get minFov(){return this._objRef?.minFov}set maxFov(e){this._objRef&&(this._objRef.maxFov=e)}get maxFov(){return this._objRef?.maxFov}set minDistance(e){this._objRef&&(this._objRef.minDistance=e)}get minDistance(){return this._objRef?.minDistance}set maxDistance(e){this._objRef&&(this._objRef.maxDistance=e)}get maxDistance(){return this._objRef?.maxDistance}set minZoom(e){this._objRef&&(this._objRef.minZoom=e)}get minZoom(){return this._objRef?.minZoom}set maxZoom(e){this._objRef&&(this._objRef.maxZoom=e)}get maxZoom(){return this._objRef?.maxZoom}set target(e){this._objRef&&(this._objRef.target=Qe(this._objRef.target,e))}get target(){return this._objRef?.target}set radiusFactor(e){this._objRef&&(this._objRef.radiusFactor=e)}get radiusFactor(){return this._objRef?.radiusFactor}}Lu.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Lu)))(t||Lu)}}(),Lu.\u0275cmp=K({type:Lu,selectors:[["th-arcballControls"]],inputs:{camera:"camera",domElement:"domElement",scene:"scene",focusAnimationTime:"focusAnimationTime",enabled:"enabled",enablePan:"enablePan",enableRotate:"enableRotate",enableZoom:"enableZoom",enableGizmos:"enableGizmos",adjustNearFar:"adjustNearFar",scaleFactor:"scaleFactor",dampingFactor:"dampingFactor",wMax:"wMax",enableAnimations:"enableAnimations",enableGrid:"enableGrid",cursorZoom:"cursorZoom",minFov:"minFov",maxFov:"maxFov",minDistance:"minDistance",maxDistance:"maxDistance",minZoom:"minZoom",maxZoom:"maxZoom",target:"target",radiusFactor:"radiusFactor"},features:[oe([{provide:Qn,useExisting:le(()=>Lu)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Bu extends an{getType(){return GT}get isArrayCamera(){return this._objRef?.isArrayCamera}set cameras(e){this._objRef&&(this._objRef.cameras=e)}get cameras(){return this._objRef?.cameras}}Bu.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Bu)))(t||Bu)}}(),Bu.\u0275cmp=K({type:Bu,selectors:[["th-arrayCamera"]],inputs:{cameras:"cameras"},features:[oe([{provide:Ke,useExisting:le(()=>Bu)},{provide:Cs,useExisting:le(()=>Bu)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Vp extends Ke{getType(){return h5}get type(){return this._objRef?.type}set line(e){this._objRef&&(this._objRef.line=e)}get line(){return this._objRef?.line}set cone(e){this._objRef&&(this._objRef.cone=e)}get cone(){return this._objRef?.cone}}Vp.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Vp)))(t||Vp)}}(),Vp.\u0275cmp=K({type:Vp,selectors:[["th-arrowHelper"]],inputs:{line:"line",cone:"cone"},features:[oe([{provide:Ke,useExisting:le(()=>Vp)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Fu extends Ke{getType(){return IR}get type(){return this._objRef?.type}set listener(e){this._objRef&&(this._objRef.listener=e)}get listener(){return this._objRef?.listener}set context(e){this._objRef&&(this._objRef.context=e)}get context(){return this._objRef?.context}set gain(e){this._objRef&&(this._objRef.gain=e)}get gain(){return this._objRef?.gain}set autoplay(e){this._objRef&&(this._objRef.autoplay=e)}get autoplay(){return this._objRef?.autoplay}set buffer(e){this._objRef&&(this._objRef.buffer=e)}get buffer(){return this._objRef?.buffer}set detune(e){this._objRef&&(this._objRef.detune=e)}get detune(){return this._objRef?.detune}set loop(e){this._objRef&&(this._objRef.loop=e)}get loop(){return this._objRef?.loop}set loopStart(e){this._objRef&&(this._objRef.loopStart=e)}get loopStart(){return this._objRef?.loopStart}set loopEnd(e){this._objRef&&(this._objRef.loopEnd=e)}get loopEnd(){return this._objRef?.loopEnd}set offset(e){this._objRef&&(this._objRef.offset=e)}get offset(){return this._objRef?.offset}set duration(e){this._objRef&&(this._objRef.duration=e)}get duration(){return this._objRef?.duration}set playbackRate(e){this._objRef&&(this._objRef.playbackRate=e)}get playbackRate(){return this._objRef?.playbackRate}set isPlaying(e){this._objRef&&(this._objRef.isPlaying=e)}get isPlaying(){return this._objRef?.isPlaying}set hasPlaybackControl(e){this._objRef&&(this._objRef.hasPlaybackControl=e)}get hasPlaybackControl(){return this._objRef?.hasPlaybackControl}set sourceType(e){this._objRef&&(this._objRef.sourceType=e)}get sourceType(){return this._objRef?.sourceType}set source(e){this._objRef&&(this._objRef.source=e)}get source(){return this._objRef?.source}set filters(e){this._objRef&&(this._objRef.filters=e)}get filters(){return this._objRef?.filters}}Fu.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Fu)))(t||Fu)}}(),Fu.\u0275cmp=K({type:Fu,selectors:[["th-audio"]],inputs:{listener:"listener",context:"context",gain:"gain",autoplay:"autoplay",buffer:"buffer",detune:"detune",loop:"loop",loopStart:"loopStart",loopEnd:"loopEnd",offset:"offset",duration:"duration",playbackRate:"playbackRate",isPlaying:"isPlaying",hasPlaybackControl:"hasPlaybackControl",sourceType:"sourceType",source:"source",filters:"filters"},features:[oe([{provide:Ke,useExisting:le(()=>Fu)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class zp extends Ke{getType(){return N4}get type(){return this._objRef?.type}set context(e){this._objRef&&(this._objRef.context=e)}get context(){return this._objRef?.context}set gain(e){this._objRef&&(this._objRef.gain=e)}get gain(){return this._objRef?.gain}set filter(e){this._objRef&&(this._objRef.filter=e)}get filter(){return this._objRef?.filter}set timeDelta(e){this._objRef&&(this._objRef.timeDelta=e)}get timeDelta(){return this._objRef?.timeDelta}}zp.\u0275fac=function(){let i;return function(t){return(i||(i=ce(zp)))(t||zp)}}(),zp.\u0275cmp=K({type:zp,selectors:[["th-audioListener"]],inputs:{context:"context",gain:"gain",filter:"filter",timeDelta:"timeDelta"},features:[oe([{provide:Ke,useExisting:le(()=>zp)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Gp extends Ms{getType(){return f5}get type(){return this._objRef?.type}}Gp.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Gp)))(t||Gp)}}(),Gp.\u0275cmp=K({type:Gp,selectors:[["th-axesHelper"]],features:[oe([{provide:Ke,useExisting:le(()=>Gp)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const fG={defines:{KERNEL_SIZE_FLOAT:"25.0",KERNEL_SIZE_INT:"25"},uniforms:{tDiffuse:{value:null},uImageIncrement:{value:new pe(.001953125,0)},cKernel:{value:[]}},vertexShader:"\n\n\t\tuniform vec2 uImageIncrement;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv - ( ( KERNEL_SIZE_FLOAT - 1.0 ) / 2.0 ) * uImageIncrement;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float cKernel[ KERNEL_SIZE_INT ];\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec2 uImageIncrement;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec2 imageCoord = vUv;\n\t\t\tvec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );\n\n\t\t\tfor( int i = 0; i < KERNEL_SIZE_INT; i ++ ) {\n\n\t\t\t\tsum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];\n\t\t\t\timageCoord += uImageIncrement;\n\n\t\t\t}\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}",buildKernel:function(i){let t=2*Math.ceil(3*i)+1;t>25&&(t=25);const n=.5*(t-1),r=new Array(t);let s=0;for(let o=0;o<t;++o)r[o]=Age(o-n,i),s+=r[o];for(let o=0;o<t;++o)r[o]/=s;return r}};function Age(i,e){return Math.exp(-i*i/(2*e*e))}class Ou extends wn{constructor(e=1,t=25,n=4){super(),this.renderTargetX=new Gt,this.renderTargetX.texture.name="BloomPass.x",this.renderTargetY=new Gt,this.renderTargetY.texture.name="BloomPass.y",this.combineUniforms=mi.clone(XI.uniforms),this.combineUniforms.strength.value=e,this.materialCombine=new Dt({uniforms:this.combineUniforms,vertexShader:XI.vertexShader,fragmentShader:XI.fragmentShader,blending:uf,transparent:!0});const r=fG;this.convolutionUniforms=mi.clone(r.uniforms),this.convolutionUniforms.uImageIncrement.value=Ou.blurX,this.convolutionUniforms.cKernel.value=fG.buildKernel(n),this.materialConvolution=new Dt({uniforms:this.convolutionUniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,defines:{KERNEL_SIZE_FLOAT:t.toFixed(1),KERNEL_SIZE_INT:t.toFixed(0)}}),this.needsSwap=!1,this.fsQuad=new yr(null)}render(e,t,n,r,s){s&&e.state.buffers.stencil.setTest(!1),this.fsQuad.material=this.materialConvolution,this.convolutionUniforms.tDiffuse.value=n.texture,this.convolutionUniforms.uImageIncrement.value=Ou.blurX,e.setRenderTarget(this.renderTargetX),e.clear(),this.fsQuad.render(e),this.convolutionUniforms.tDiffuse.value=this.renderTargetX.texture,this.convolutionUniforms.uImageIncrement.value=Ou.blurY,e.setRenderTarget(this.renderTargetY),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCombine,this.combineUniforms.tDiffuse.value=this.renderTargetY.texture,s&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(n),this.clear&&e.clear(),this.fsQuad.render(e)}setSize(e,t){this.renderTargetX.setSize(e,t),this.renderTargetY.setSize(e,t)}dispose(){this.renderTargetX.dispose(),this.renderTargetY.dispose(),this.materialCombine.dispose(),this.materialConvolution.dispose(),this.fsQuad.dispose()}}const XI={uniforms:{tDiffuse:{value:null},strength:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float strength;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = strength * texel;\n\n\t\t}"};Ou.blurX=new pe(.001953125,0),Ou.blurY=new pe(0,.001953125);class Hp extends Wi{getType(){return Ou}set renderTargetX(e){this._objRef&&(this._objRef.renderTargetX=e)}get renderTargetX(){return this._objRef?.renderTargetX}set renderTargetY(e){this._objRef&&(this._objRef.renderTargetY=e)}get renderTargetY(){return this._objRef?.renderTargetY}set copyUniforms(e){this._objRef&&(this._objRef.copyUniforms=e)}get copyUniforms(){return this._objRef?.copyUniforms}set materialCopy(e){this._objRef&&(this._objRef.materialCopy=e)}get materialCopy(){return this._objRef?.materialCopy}set convolutionUniforms(e){this._objRef&&(this._objRef.convolutionUniforms=e)}get convolutionUniforms(){return this._objRef?.convolutionUniforms}set materialConvolution(e){this._objRef&&(this._objRef.materialConvolution=e)}get materialConvolution(){return this._objRef?.materialConvolution}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}}Hp.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Hp)))(t||Hp)}}(),Hp.\u0275cmp=K({type:Hp,selectors:[["th-bloomPass"]],inputs:{renderTargetX:"renderTargetX",renderTargetY:"renderTargetY",copyUniforms:"copyUniforms",materialCopy:"materialCopy",convolutionUniforms:"convolutionUniforms",materialConvolution:"materialConvolution",fsQuad:"fsQuad"},features:[oe([{provide:Li,useExisting:le(()=>Hp)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const xge={defines:{DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tColor:{value:null},tDepth:{value:null},focus:{value:1},aspect:{value:1},aperture:{value:.025},maxblur:{value:.01},nearClip:{value:1},farClip:{value:1e3}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\n\t\tvarying vec2 vUv;\n\n\t\tuniform sampler2D tColor;\n\t\tuniform sampler2D tDepth;\n\n\t\tuniform float maxblur; // max blur amount\n\t\tuniform float aperture; // aperture - bigger values for shallower depth of field\n\n\t\tuniform float nearClip;\n\t\tuniform float farClip;\n\n\t\tuniform float focus;\n\t\tuniform float aspect;\n\n\t\t#include <packing>\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\t\t\t#if DEPTH_PACKING == 1\n\t\t\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\n\t\t\t#else\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\t\t\treturn perspectiveDepthToViewZ( depth, nearClip, farClip );\n\t\t\t#else\n\t\t\treturn orthographicDepthToViewZ( depth, nearClip, farClip );\n\t\t\t#endif\n\t\t}\n\n\n\t\tvoid main() {\n\n\t\t\tvec2 aspectcorrect = vec2( 1.0, aspect );\n\n\t\t\tfloat viewZ = getViewZ( getDepth( vUv ) );\n\n\t\t\tfloat factor = ( focus + viewZ ); // viewZ is <= 0, so this is a difference equation\n\n\t\t\tvec2 dofblur = vec2 ( clamp( factor * aperture, -maxblur, maxblur ) );\n\n\t\t\tvec2 dofblur9 = dofblur * 0.9;\n\t\t\tvec2 dofblur7 = dofblur * 0.7;\n\t\t\tvec2 dofblur4 = dofblur * 0.4;\n\n\t\t\tvec4 col = vec4( 0.0 );\n\n\t\t\tcol += texture2D( tColor, vUv.xy );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur );\n\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur9 );\n\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur7 );\n\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.4,   0.0  ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur4 );\n\n\t\t\tgl_FragColor = col / 41.0;\n\t\t\tgl_FragColor.a = 1.0;\n\n\t\t}"};class wge extends wn{constructor(e,t,n){super(),this.scene=e,this.camera=t;const r=void 0!==n.focus?n.focus:1,s=void 0!==n.aspect?n.aspect:t.aspect,o=void 0!==n.aperture?n.aperture:.025,a=void 0!==n.maxblur?n.maxblur:1;this.renderTargetDepth=new Gt(1,1,{minFilter:Zt,magFilter:Zt}),this.renderTargetDepth.texture.name="BokehPass.depth",this.materialDepth=new Zd,this.materialDepth.depthPacking=X_,this.materialDepth.blending=Xt;const l=xge,c=mi.clone(l.uniforms);c.tDepth.value=this.renderTargetDepth.texture,c.focus.value=r,c.aspect.value=s,c.aperture.value=o,c.maxblur.value=a,c.nearClip.value=t.near,c.farClip.value=t.far,this.materialBokeh=new Dt({defines:Object.assign({},l.defines),uniforms:c,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}),this.uniforms=c,this.needsSwap=!1,this.fsQuad=new yr(this.materialBokeh),this._oldClearColor=new Be}render(e,t,n){this.scene.overrideMaterial=this.materialDepth,e.getClearColor(this._oldClearColor);const r=e.getClearAlpha(),s=e.autoClear;e.autoClear=!1,e.setClearColor(16777215),e.setClearAlpha(1),e.setRenderTarget(this.renderTargetDepth),e.clear(),e.render(this.scene,this.camera),this.uniforms.tColor.value=n.texture,this.uniforms.nearClip.value=this.camera.near,this.uniforms.farClip.value=this.camera.far,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),e.clear(),this.fsQuad.render(e)),this.scene.overrideMaterial=null,e.setClearColor(this._oldClearColor),e.setClearAlpha(r),e.autoClear=s}setSize(e,t){this.renderTargetDepth.setSize(e,t)}dispose(){this.renderTargetDepth.dispose(),this.materialDepth.dispose(),this.materialBokeh.dispose(),this.fsQuad.dispose()}}class Qp extends Wi{getType(){return wge}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set renderTargetColor(e){this._objRef&&(this._objRef.renderTargetColor=e)}get renderTargetColor(){return this._objRef?.renderTargetColor}set renderTargetDepth(e){this._objRef&&(this._objRef.renderTargetDepth=e)}get renderTargetDepth(){return this._objRef?.renderTargetDepth}set materialDepth(e){this._objRef&&(this._objRef.materialDepth=e)}get materialDepth(){return this._objRef?.materialDepth}set materialBokeh(e){this._objRef&&(this._objRef.materialBokeh=e)}get materialBokeh(){return this._objRef?.materialBokeh}set uniforms(e){this._objRef&&Object.assign(this._objRef.uniforms,e)}get uniforms(){return this._objRef?.uniforms}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set oldClearColor(e){this._objRef&&(this._objRef.oldClearColor=Qe(this._objRef.oldClearColor,e))}get oldClearColor(){return this._objRef?.oldClearColor}}Qp.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Qp)))(t||Qp)}}(),Qp.\u0275cmp=K({type:Qp,selectors:[["th-bokehPass"]],inputs:{scene:"scene",camera:"camera",renderTargetColor:"renderTargetColor",renderTargetDepth:"renderTargetDepth",materialDepth:"materialDepth",materialBokeh:"materialBokeh",uniforms:"uniforms",fsQuad:"fsQuad",oldClearColor:"oldClearColor"},features:[oe([{provide:Li,useExisting:le(()=>Qp)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Wp extends Ke{getType(){return Kd}get isBone(){return this._objRef?.isBone}get type(){return this._objRef?.type}}Wp.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Wp)))(t||Wp)}}(),Wp.\u0275cmp=K({type:Wp,selectors:[["th-bone"]],features:[oe([{provide:Ke,useExisting:le(()=>Wp)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Nu extends Ms{getType(){return c5}get type(){return this._objRef?.type}set box(e){this._objRef&&(this._objRef.box=Qe(this._objRef.box,e))}get box(){return this._objRef?.box}}Nu.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Nu)))(t||Nu)}}(),Nu.\u0275cmp=K({type:Nu,selectors:[["th-box3Helper"]],inputs:{box:"box"},features:[oe([{provide:Ke,useExisting:le(()=>Nu)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class qp extends Ms{getType(){return l5}get type(){return this._objRef?.type}}qp.\u0275fac=function(){let i;return function(t){return(i||(i=ce(qp)))(t||qp)}}(),qp.\u0275cmp=K({type:qp,selectors:[["th-boxHelper"]],features:[oe([{provide:Ke,useExisting:le(()=>qp)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Tge extends Mt{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super();const a=e/2,l=t/2,c=n/2,d=e/(r=Math.floor(r)),u=t/(s=Math.floor(s)),h=n/(o=Math.floor(o)),f=[];let m=-a,g=-l,_=-c;for(let p=0;p<=r;p++)f.push(m,-l,-c,m,l,-c),f.push(m,l,-c,m,l,c),f.push(m,l,c,m,-l,c),f.push(m,-l,c,m,-l,-c),m+=d;for(let p=0;p<=s;p++)f.push(-a,g,-c,a,g,-c),f.push(a,g,-c,a,g,c),f.push(a,g,c,-a,g,c),f.push(-a,g,c,-a,g,-c),g+=u;for(let p=0;p<=o;p++)f.push(-a,-l,_,-a,l,_),f.push(-a,l,_,a,l,_),f.push(a,l,_,a,-l,_),f.push(a,-l,_,-a,-l,_),_+=h;this.setAttribute("position",new Ze(f,3))}}class Yp extends Tt{getType(){return Tge}}Yp.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Yp)))(t||Yp)}}(),Yp.\u0275cmp=K({type:Yp,selectors:[["th-boxLineGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>Yp)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Xp extends Ms{getType(){return a5}get type(){return this._objRef?.type}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set pointMap(e){this._objRef&&(this._objRef.pointMap=e)}get pointMap(){return this._objRef?.pointMap}set matrix(e){this._objRef&&(this._objRef.matrix=Qe(this._objRef.matrix,e))}get matrix(){return this._objRef?.matrix}set matrixAutoUpdate(e){this._objRef&&(this._objRef.matrixAutoUpdate=e)}get matrixAutoUpdate(){return this._objRef?.matrixAutoUpdate}}Xp.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Xp)))(t||Xp)}}(),Xp.\u0275cmp=K({type:Xp,selectors:[["th-cameraHelper"]],inputs:{camera:"camera",pointMap:"pointMap",matrix:"matrix",matrixAutoUpdate:"matrixAutoUpdate"},features:[oe([{provide:Ke,useExisting:le(()=>Xp)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Pr extends To{}Pr.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Pr)))(t||Pr)}}(),Pr.\u0275cmp=K({type:Pr,selectors:[["th-abs-texture"]],features:[W],decls:0,vars:0,template:function(e,t){},encapsulation:2});class Jn extends Pr{getType(){return An}get isTexture(){return this._objRef?.isTexture}get id(){return this._objRef?.id}set uuid(e){this._objRef&&(this._objRef.uuid=e)}get uuid(){return this._objRef?.uuid}set name(e){this._objRef&&(this._objRef.name=e)}get name(){return this._objRef?.name}set source(e){this._objRef&&(this._objRef.source=e)}get source(){return this._objRef?.source}set mipmaps(e){this._objRef&&(this._objRef.mipmaps=e)}get mipmaps(){return this._objRef?.mipmaps}set mapping(e){this._objRef&&(this._objRef.mapping=e)}get mapping(){return this._objRef?.mapping}set channel(e){this._objRef&&(this._objRef.channel=e)}get channel(){return this._objRef?.channel}set wrapS(e){this._objRef&&(this._objRef.wrapS=e)}get wrapS(){return this._objRef?.wrapS}set wrapT(e){this._objRef&&(this._objRef.wrapT=e)}get wrapT(){return this._objRef?.wrapT}set magFilter(e){this._objRef&&(this._objRef.magFilter=e)}get magFilter(){return this._objRef?.magFilter}set minFilter(e){this._objRef&&(this._objRef.minFilter=e)}get minFilter(){return this._objRef?.minFilter}set anisotropy(e){this._objRef&&(this._objRef.anisotropy=e)}get anisotropy(){return this._objRef?.anisotropy}set format(e){this._objRef&&(this._objRef.format=e)}get format(){return this._objRef?.format}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set internalFormat(e){this._objRef&&(this._objRef.internalFormat=e)}get internalFormat(){return this._objRef?.internalFormat}set matrix(e){this._objRef&&(this._objRef.matrix=Qe(this._objRef.matrix,e))}get matrix(){return this._objRef?.matrix}set matrixAutoUpdate(e){this._objRef&&(this._objRef.matrixAutoUpdate=e)}get matrixAutoUpdate(){return this._objRef?.matrixAutoUpdate}set offset(e){this._objRef&&(this._objRef.offset=Qe(this._objRef.offset,e))}get offset(){return this._objRef?.offset}set repeat(e){this._objRef&&(this._objRef.repeat=Qe(this._objRef.repeat,e))}get repeat(){return this._objRef?.repeat}set center(e){this._objRef&&(this._objRef.center=Qe(this._objRef.center,e))}get center(){return this._objRef?.center}set rotation(e){this._objRef&&(this._objRef.rotation=e)}get rotation(){return this._objRef?.rotation}set generateMipmaps(e){this._objRef&&(this._objRef.generateMipmaps=e)}get generateMipmaps(){return this._objRef?.generateMipmaps}set premultiplyAlpha(e){this._objRef&&(this._objRef.premultiplyAlpha=e)}get premultiplyAlpha(){return this._objRef?.premultiplyAlpha}set flipY(e){this._objRef&&(this._objRef.flipY=e)}get flipY(){return this._objRef?.flipY}set unpackAlignment(e){this._objRef&&(this._objRef.unpackAlignment=e)}get unpackAlignment(){return this._objRef?.unpackAlignment}set encoding(e){this._objRef&&(this._objRef.encoding=e)}get encoding(){return this._objRef?.encoding}set isRenderTargetTexture(e){this._objRef&&(this._objRef.isRenderTargetTexture=e)}get isRenderTargetTexture(){return this._objRef?.isRenderTargetTexture}set needsPMREMUpdate(e){this._objRef&&(this._objRef.needsPMREMUpdate=e)}get needsPMREMUpdate(){return this._objRef?.needsPMREMUpdate}set userData(e){this._objRef&&(this._objRef.userData=e)}get userData(){return this._objRef?.userData}set version(e){this._objRef&&(this._objRef.version=e)}get version(){return this._objRef?.version}}Jn.DEFAULT_ANISOTROPY=An.DEFAULT_ANISOTROPY,Jn.DEFAULT_IMAGE=An.DEFAULT_IMAGE,Jn.DEFAULT_MAPPING=An.DEFAULT_MAPPING,Jn.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Jn)))(t||Jn)}}(),Jn.\u0275cmp=K({type:Jn,selectors:[["th-texture"]],inputs:{uuid:"uuid",name:"name",source:"source",mipmaps:"mipmaps",mapping:"mapping",channel:"channel",wrapS:"wrapS",wrapT:"wrapT",magFilter:"magFilter",minFilter:"minFilter",anisotropy:"anisotropy",format:"format",type:"type",internalFormat:"internalFormat",matrix:"matrix",matrixAutoUpdate:"matrixAutoUpdate",offset:"offset",repeat:"repeat",center:"center",rotation:"rotation",generateMipmaps:"generateMipmaps",premultiplyAlpha:"premultiplyAlpha",flipY:"flipY",unpackAlignment:"unpackAlignment",encoding:"encoding",isRenderTargetTexture:"isRenderTargetTexture",needsPMREMUpdate:"needsPMREMUpdate",userData:"userData",version:"version"},features:[oe([{provide:Pr,useExisting:le(()=>Jn)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Zp extends Jn{getType(){return cx}get isCanvasTexture(){return this._objRef?.isCanvasTexture}}Zp.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Zp)))(t||Zp)}}(),Zp.\u0275cmp=K({type:Zp,selectors:[["th-canvasTexture"]],features:[oe([{provide:Pr,useExisting:le(()=>Zp)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Kp extends Tt{getType(){return ip}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}}Kp.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Kp)))(t||Kp)}}(),Kp.\u0275cmp=K({type:Kp,selectors:[["th-capsuleGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>Kp)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class $p extends Tt{getType(){return np}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}}$p.\u0275fac=function(){let i;return function(t){return(i||(i=ce($p)))(t||$p)}}(),$p.\u0275cmp=K({type:$p,selectors:[["th-circleGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>$p)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Jp extends Wi{getType(){return iG}}Jp.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Jp)))(t||Jp)}}(),Jp.\u0275cmp=K({type:Jp,selectors:[["th-clearMaskPass"]],features:[oe([{provide:Li,useExisting:le(()=>Jp)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Fge extends wn{constructor(e,t){super(),this.needsSwap=!1,this.clearColor=void 0!==e?e:0,this.clearAlpha=void 0!==t?t:0,this._oldClearColor=new Be}render(e,t,n){let r;this.clearColor&&(e.getClearColor(this._oldClearColor),r=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),e.setRenderTarget(this.renderToScreen?null:n),e.clear(),this.clearColor&&e.setClearColor(this._oldClearColor,r)}}class em extends Wi{getType(){return Fge}set clearColor(e){this._objRef&&(this._objRef.clearColor=e)}get clearColor(){return this._objRef?.clearColor}set clearAlpha(e){this._objRef&&(this._objRef.clearAlpha=e)}get clearAlpha(){return this._objRef?.clearAlpha}}em.\u0275fac=function(){let i;return function(t){return(i||(i=ce(em)))(t||em)}}(),em.\u0275cmp=K({type:em,selectors:[["th-clearPass"]],inputs:{clearColor:"clearColor",clearAlpha:"clearAlpha"},features:[oe([{provide:Li,useExisting:le(()=>em)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Ya extends Jn{getType(){return gb}get isCompressedTexture(){return this._objRef?.isCompressedTexture}set mipmaps(e){this._objRef&&(this._objRef.mipmaps=e)}get mipmaps(){return this._objRef?.mipmaps}set format(e){this._objRef&&(this._objRef.format=e)}get format(){return this._objRef?.format}set flipY(e){this._objRef&&(this._objRef.flipY=e)}get flipY(){return this._objRef?.flipY}set generateMipmaps(e){this._objRef&&(this._objRef.generateMipmaps=e)}get generateMipmaps(){return this._objRef?.generateMipmaps}}Ya.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Ya)))(t||Ya)}}(),Ya.\u0275cmp=K({type:Ya,selectors:[["th-compressedTexture"]],inputs:{mipmaps:"mipmaps",format:"format",flipY:"flipY",generateMipmaps:"generateMipmaps"},features:[oe([{provide:Pr,useExisting:le(()=>Ya)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class tm extends Ya{getType(){return KT}get isCompressedArrayTexture(){return this._objRef?.isCompressedArrayTexture}set wrapR(e){this._objRef&&(this._objRef.wrapR=e)}get wrapR(){return this._objRef?.wrapR}}tm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(tm)))(t||tm)}}(),tm.\u0275cmp=K({type:tm,selectors:[["th-compressedArrayTexture"]],inputs:{wrapR:"wrapR"},features:[oe([{provide:Pr,useExisting:le(()=>tm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class ju extends Tt{getType(){return zn}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}}ju.\u0275fac=function(){let i;return function(t){return(i||(i=ce(ju)))(t||ju)}}(),ju.\u0275cmp=K({type:ju,selectors:[["th-cylinderGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>ju)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class im extends ju{getType(){return rp}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}}im.\u0275fac=function(){let i;return function(t){return(i||(i=ce(im)))(t||im)}}(),im.\u0275cmp=K({type:im,selectors:[["th-coneGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>im)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const Gge=new R,pG=new q4,ZI=new to,mG=new R,Dw=new rs;class Hge{constructor(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new gG,this.unassigned=new gG,this.vertices=[]}setFromPoints(e){if(e.length>=4){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.vertices.push(new Qge(e[t]));this.compute()}return this}setFromObject(e){const t=[];return e.updateMatrixWorld(!0),e.traverse(function(n){const r=n.geometry;if(void 0!==r){const s=r.attributes.position;if(void 0!==s)for(let o=0,a=s.count;o<a;o++){const l=new R;l.fromBufferAttribute(s,o).applyMatrix4(n.matrixWorld),t.push(l)}}}),this.setFromPoints(t)}containsPoint(e){const t=this.faces;for(let n=0,r=t.length;n<r;n++)if(t[n].distanceToPoint(e)>this.tolerance)return!1;return!0}intersectRay(e,t){const n=this.faces;let r=-1/0,s=1/0;for(let o=0,a=n.length;o<a;o++){const l=n[o],c=l.distanceToPoint(e.origin),d=l.normal.dot(e.direction);if(c>0&&d>=0)return null;const u=0!==d?-c/d:0;if(!(u<=0)&&(d>0?s=Math.min(u,s):r=Math.max(u,r),r>s))return null}return e.at(r!==-1/0?r:s,t),t}intersectsRay(e){return null!==this.intersectRay(e,Gge)}makeEmpty(){return this.faces=[],this.vertices=[],this}addVertexToFace(e,t){return e.face=t,null===t.outside?this.assigned.append(e):this.assigned.insertBefore(t.outside,e),t.outside=e,this}removeVertexFromFace(e,t){return e===t.outside&&(t.outside=null!==e.next&&e.next.face===t?e.next:null),this.assigned.remove(e),this}removeAllVerticesFromFace(e){if(null!==e.outside){const t=e.outside;let n=e.outside;for(;null!==n.next&&n.next.face===e;)n=n.next;return this.assigned.removeSubList(t,n),t.prev=n.next=null,e.outside=null,t}}deleteFaceVertices(e,t){const n=this.removeAllVerticesFromFace(e);if(void 0!==n)if(void 0===t)this.unassigned.appendChain(n);else{let r=n;do{const s=r.next;t.distanceToPoint(r.point)>this.tolerance?this.addVertexToFace(r,t):this.unassigned.append(r),r=s}while(null!==r)}return this}resolveUnassignedPoints(e){if(!1===this.unassigned.isEmpty()){let t=this.unassigned.first();do{const n=t.next;let r=this.tolerance,s=null;for(let o=0;o<e.length;o++){const a=e[o];if(0===a.mark){const l=a.distanceToPoint(t.point);if(l>r&&(r=l,s=a),r>1e3*this.tolerance)break}}null!==s&&this.addVertexToFace(t,s),t=n}while(null!==t)}return this}computeExtremes(){const e=new R,t=new R,n=[],r=[];for(let s=0;s<3;s++)n[s]=r[s]=this.vertices[0];e.copy(this.vertices[0].point),t.copy(this.vertices[0].point);for(let s=0,o=this.vertices.length;s<o;s++){const a=this.vertices[s],l=a.point;for(let c=0;c<3;c++)l.getComponent(c)<e.getComponent(c)&&(e.setComponent(c,l.getComponent(c)),n[c]=a);for(let c=0;c<3;c++)l.getComponent(c)>t.getComponent(c)&&(t.setComponent(c,l.getComponent(c)),r[c]=a)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(e.x),Math.abs(t.x))+Math.max(Math.abs(e.y),Math.abs(t.y))+Math.max(Math.abs(e.z),Math.abs(t.z))),{min:n,max:r}}computeInitialHull(){const e=this.vertices,t=this.computeExtremes(),n=t.min,r=t.max;let s=0,o=0;for(let h=0;h<3;h++){const f=r[h].point.getComponent(h)-n[h].point.getComponent(h);f>s&&(s=f,o=h)}const a=n[o],l=r[o];let c,d;s=0,pG.set(a.point,l.point);for(let h=0,f=this.vertices.length;h<f;h++){const m=e[h];if(m!==a&&m!==l){pG.closestPointToPoint(m.point,!0,mG);const g=mG.distanceToSquared(m.point);g>s&&(s=g,c=m)}}s=-1,ZI.setFromCoplanarPoints(a.point,l.point,c.point);for(let h=0,f=this.vertices.length;h<f;h++){const m=e[h];if(m!==a&&m!==l&&m!==c){const g=Math.abs(ZI.distanceToPoint(m.point));g>s&&(s=g,d=m)}}const u=[];if(ZI.distanceToPoint(d.point)<0){u.push(pa.create(a,l,c),pa.create(d,l,a),pa.create(d,c,l),pa.create(d,a,c));for(let h=0;h<3;h++){const f=(h+1)%3;u[h+1].getEdge(2).setTwin(u[0].getEdge(f)),u[h+1].getEdge(1).setTwin(u[f+1].getEdge(0))}}else{u.push(pa.create(a,c,l),pa.create(d,a,l),pa.create(d,l,c),pa.create(d,c,a));for(let h=0;h<3;h++){const f=(h+1)%3;u[h+1].getEdge(2).setTwin(u[0].getEdge((3-h)%3)),u[h+1].getEdge(0).setTwin(u[f+1].getEdge(1))}}for(let h=0;h<4;h++)this.faces.push(u[h]);for(let h=0,f=e.length;h<f;h++){const m=e[h];if(m!==a&&m!==l&&m!==c&&m!==d){s=this.tolerance;let g=null;for(let _=0;_<4;_++){const p=this.faces[_].distanceToPoint(m.point);p>s&&(s=p,g=this.faces[_])}null!==g&&this.addVertexToFace(m,g)}}return this}reindexFaces(){const e=[];for(let t=0;t<this.faces.length;t++){const n=this.faces[t];0===n.mark&&e.push(n)}return this.faces=e,this}nextVertexToAdd(){if(!1===this.assigned.isEmpty()){let e,t=0;const n=this.assigned.first().face;let r=n.outside;do{const s=n.distanceToPoint(r.point);s>t&&(t=s,e=r),r=r.next}while(null!==r&&r.face===n);return e}}computeHorizon(e,t,n,r){let s;this.deleteFaceVertices(n),n.mark=1,s=null===t?t=n.getEdge(0):t.next;do{const o=s.twin,a=o.face;0===a.mark&&(a.distanceToPoint(e)>this.tolerance?this.computeHorizon(e,o,a,r):r.push(s)),s=s.next}while(s!==t);return this}addAdjoiningFace(e,t){const n=pa.create(e,t.tail(),t.head());return this.faces.push(n),n.getEdge(-1).setTwin(t.twin),n.getEdge(0)}addNewFaces(e,t){this.newFaces=[];let n=null,r=null;for(let s=0;s<t.length;s++){const a=this.addAdjoiningFace(e,t[s]);null===n?n=a:a.next.setTwin(r),this.newFaces.push(a.face),r=a}return n.next.setTwin(r),this}addVertexToHull(e){const t=[];return this.unassigned.clear(),this.removeVertexFromFace(e,e.face),this.computeHorizon(e.point,null,e.face,t),this.addNewFaces(e,t),this.resolveUnassignedPoints(this.newFaces),this}cleanup(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this}compute(){let e;for(this.computeInitialHull();void 0!==(e=this.nextVertexToAdd());)this.addVertexToHull(e);return this.reindexFaces(),this.cleanup(),this}}class pa{constructor(){this.normal=new R,this.midpoint=new R,this.area=0,this.constant=0,this.outside=null,this.mark=0,this.edge=null}static create(e,t,n){const r=new pa,s=new KI(e,r),o=new KI(t,r),a=new KI(n,r);return s.next=a.prev=o,o.next=s.prev=a,a.next=o.prev=s,r.edge=s,r.compute()}getEdge(e){let t=this.edge;for(;e>0;)t=t.next,e--;for(;e<0;)t=t.prev,e++;return t}compute(){const e=this.edge.tail(),t=this.edge.head(),n=this.edge.next.head();return Dw.set(e.point,t.point,n.point),Dw.getNormal(this.normal),Dw.getMidpoint(this.midpoint),this.area=Dw.getArea(),this.constant=this.normal.dot(this.midpoint),this}distanceToPoint(e){return this.normal.dot(e)-this.constant}}class KI{constructor(e,t){this.vertex=e,this.prev=null,this.next=null,this.twin=null,this.face=t}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){const e=this.head(),t=this.tail();return null!==t?t.point.distanceTo(e.point):-1}lengthSquared(){const e=this.head(),t=this.tail();return null!==t?t.point.distanceToSquared(e.point):-1}setTwin(e){return this.twin=e,e.twin=this,this}}class Qge{constructor(e){this.point=e,this.prev=null,this.next=null,this.face=null}}class gG{constructor(){this.head=null,this.tail=null}first(){return this.head}last(){return this.tail}clear(){return this.head=this.tail=null,this}insertBefore(e,t){return t.prev=e.prev,t.next=e,null===t.prev?this.head=t:t.prev.next=t,e.prev=t,this}insertAfter(e,t){return t.prev=e,t.next=e.next,null===t.next?this.tail=t:t.next.prev=t,e.next=t,this}append(e){return null===this.head?this.head=e:this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e,this}appendChain(e){for(null===this.head?this.head=e:this.tail.next=e,e.prev=this.tail;null!==e.next;)e=e.next;return this.tail=e,this}remove(e){return null===e.prev?this.head=e.next:e.prev.next=e.next,null===e.next?this.tail=e.prev:e.next.prev=e.prev,this}removeSubList(e,t){return null===e.prev?this.head=t.next:e.prev.next=t.next,null===t.next?this.tail=e.prev:t.next.prev=e.prev,this}isEmpty(){return null===this.head}}class Wge extends Mt{constructor(e=[]){super();const t=[],n=[],s=(new Hge).setFromPoints(e).faces;for(let o=0;o<s.length;o++){const a=s[o];let l=a.edge;do{const c=l.head().point;t.push(c.x,c.y,c.z),n.push(a.normal.x,a.normal.y,a.normal.z),l=l.next}while(l!==a.edge)}this.setAttribute("position",new Ze(t,3)),this.setAttribute("normal",new Ze(n,3))}}class nm extends Tt{getType(){return Wge}}nm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(nm)))(t||nm)}}(),nm.\u0275cmp=K({type:nm,selectors:[["th-convexGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>nm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class rm extends Ke{getType(){return BT}get type(){return this._objRef?.type}set renderTarget(e){this._objRef&&(this._objRef.renderTarget=e)}get renderTarget(){return this._objRef?.renderTarget}}rm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(rm)))(t||rm)}}(),rm.\u0275cmp=K({type:rm,selectors:[["th-cubeCamera"]],inputs:{renderTarget:"renderTarget"},features:[oe([{provide:Ke,useExisting:le(()=>rm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class sm extends Jn{getType(){return Wd}get isCubeTexture(){return this._objRef?.isCubeTexture}set mapping(e){this._objRef&&(this._objRef.mapping=e)}get mapping(){return this._objRef?.mapping}set flipY(e){this._objRef&&(this._objRef.flipY=e)}get flipY(){return this._objRef?.flipY}}sm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(sm)))(t||sm)}}(),sm.\u0275cmp=K({type:sm,selectors:[["th-cubeTexture"]],inputs:{mapping:"mapping",flipY:"flipY"},features:[oe([{provide:Pr,useExisting:le(()=>sm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Zge extends wn{constructor(e,t,n=1){super(),this.camera=e,this.needsSwap=!1,this.cubeShader=Mo.cube,this.cubeMesh=new nt(new Ji(10,10,10),new Dt({uniforms:mi.clone(this.cubeShader.uniforms),vertexShader:this.cubeShader.vertexShader,fragmentShader:this.cubeShader.fragmentShader,depthTest:!1,depthWrite:!1,side:zr})),Object.defineProperty(this.cubeMesh.material,"envMap",{get:function(){return this.uniforms.tCube.value}}),this.tCube=t,this.opacity=n,this.cubeScene=new Ky,this.cubeCamera=new In,this.cubeScene.add(this.cubeMesh)}render(e,t,n){const r=e.autoClear;e.autoClear=!1,this.cubeCamera.projectionMatrix.copy(this.camera.projectionMatrix),this.cubeCamera.quaternion.setFromRotationMatrix(this.camera.matrixWorld),this.cubeMesh.material.uniforms.tCube.value=this.tCube,this.cubeMesh.material.uniforms.tFlip.value=this.tCube.isCubeTexture&&!1===this.tCube.isRenderTargetTexture?-1:1,this.cubeMesh.material.uniforms.opacity.value=this.opacity,this.cubeMesh.material.transparent=this.opacity<1,e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(),e.render(this.cubeScene,this.cubeCamera),e.autoClear=r}dispose(){this.cubeMesh.geometry.dispose(),this.cubeMesh.material.dispose()}}class om extends Wi{getType(){return Zge}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set cubeShader(e){this._objRef&&(this._objRef.cubeShader=e)}get cubeShader(){return this._objRef?.cubeShader}set cubeMesh(e){this._objRef&&(this._objRef.cubeMesh=e)}get cubeMesh(){return this._objRef?.cubeMesh}set envMap(e){this._objRef&&(this._objRef.envMap=e)}get envMap(){return this._objRef?.envMap}set opacity(e){this._objRef&&(this._objRef.opacity=e)}get opacity(){return this._objRef?.opacity}set cubeScene(e){this._objRef&&(this._objRef.cubeScene=e)}get cubeScene(){return this._objRef?.cubeScene}set cubeCamera(e){this._objRef&&(this._objRef.cubeCamera=e)}get cubeCamera(){return this._objRef?.cubeCamera}}om.\u0275fac=function(){let i;return function(t){return(i||(i=ce(om)))(t||om)}}(),om.\u0275cmp=K({type:om,selectors:[["th-cubeTexturePass"]],inputs:{camera:"camera",cubeShader:"cubeShader",cubeMesh:"cubeMesh",envMap:"envMap",opacity:"opacity",cubeScene:"cubeScene",cubeCamera:"cubeCamera"},features:[oe([{provide:Li,useExisting:le(()=>om)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class am extends Jn{getType(){return eb}get isData3DTexture(){return this._objRef?.isData3DTexture}set magFilter(e){this._objRef&&(this._objRef.magFilter=e)}get magFilter(){return this._objRef?.magFilter}set minFilter(e){this._objRef&&(this._objRef.minFilter=e)}get minFilter(){return this._objRef?.minFilter}set wrapR(e){this._objRef&&(this._objRef.wrapR=e)}get wrapR(){return this._objRef?.wrapR}set flipY(e){this._objRef&&(this._objRef.flipY=e)}get flipY(){return this._objRef?.flipY}set generateMipmaps(e){this._objRef&&(this._objRef.generateMipmaps=e)}get generateMipmaps(){return this._objRef?.generateMipmaps}set unpackAlignment(e){this._objRef&&(this._objRef.unpackAlignment=e)}get unpackAlignment(){return this._objRef?.unpackAlignment}}am.\u0275fac=function(){let i;return function(t){return(i||(i=ce(am)))(t||am)}}(),am.\u0275cmp=K({type:am,selectors:[["th-data3DTexture"]],inputs:{magFilter:"magFilter",minFilter:"minFilter",wrapR:"wrapR",flipY:"flipY",generateMipmaps:"generateMipmaps",unpackAlignment:"unpackAlignment"},features:[oe([{provide:Pr,useExisting:le(()=>am)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class lm extends Jn{getType(){return J_}get isDataArrayTexture(){return this._objRef?.isDataArrayTexture}set magFilter(e){this._objRef&&(this._objRef.magFilter=e)}get magFilter(){return this._objRef?.magFilter}set minFilter(e){this._objRef&&(this._objRef.minFilter=e)}get minFilter(){return this._objRef?.minFilter}set wrapR(e){this._objRef&&(this._objRef.wrapR=e)}get wrapR(){return this._objRef?.wrapR}set flipY(e){this._objRef&&(this._objRef.flipY=e)}get flipY(){return this._objRef?.flipY}set generateMipmaps(e){this._objRef&&(this._objRef.generateMipmaps=e)}get generateMipmaps(){return this._objRef?.generateMipmaps}set unpackAlignment(e){this._objRef&&(this._objRef.unpackAlignment=e)}get unpackAlignment(){return this._objRef?.unpackAlignment}}lm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(lm)))(t||lm)}}(),lm.\u0275cmp=K({type:lm,selectors:[["th-dataArrayTexture"]],inputs:{magFilter:"magFilter",minFilter:"minFilter",wrapR:"wrapR",flipY:"flipY",generateMipmaps:"generateMipmaps",unpackAlignment:"unpackAlignment"},features:[oe([{provide:Pr,useExisting:le(()=>lm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class ma extends Jn{getType(){return Ba}get isDataTexture(){return this._objRef?.isDataTexture}set magFilter(e){this._objRef&&(this._objRef.magFilter=e)}get magFilter(){return this._objRef?.magFilter}set minFilter(e){this._objRef&&(this._objRef.minFilter=e)}get minFilter(){return this._objRef?.minFilter}set flipY(e){this._objRef&&(this._objRef.flipY=e)}get flipY(){return this._objRef?.flipY}set generateMipmaps(e){this._objRef&&(this._objRef.generateMipmaps=e)}get generateMipmaps(){return this._objRef?.generateMipmaps}set unpackAlignment(e){this._objRef&&(this._objRef.unpackAlignment=e)}get unpackAlignment(){return this._objRef?.unpackAlignment}}ma.\u0275fac=function(){let i;return function(t){return(i||(i=ce(ma)))(t||ma)}}(),ma.\u0275cmp=K({type:ma,selectors:[["th-dataTexture"]],inputs:{magFilter:"magFilter",minFilter:"minFilter",flipY:"flipY",generateMipmaps:"generateMipmaps",unpackAlignment:"unpackAlignment"},features:[oe([{provide:Pr,useExisting:le(()=>ma)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class t_e extends Mt{constructor(e,t,n,r){super();const s=[],o=[],a=[],l=new R,c=new We;c.makeRotationFromEuler(n),c.setPosition(t);const d=new We;function h(g,_,p){_.applyMatrix4(e.matrixWorld),_.applyMatrix4(d),p.transformDirection(e.matrixWorld),g.push(new _G(_.clone(),p.clone()))}function f(g,_){const p=[],v=.5*Math.abs(r.dot(_));for(let b=0;b<g.length;b+=3){let x,w,E,S,y=0;const U=g[b+0].position.dot(_)-v>0,B=g[b+1].position.dot(_)-v>0,j=g[b+2].position.dot(_)-v>0;switch(y=(U?1:0)+(B?1:0)+(j?1:0),y){case 0:p.push(g[b]),p.push(g[b+1]),p.push(g[b+2]);break;case 1:if(U&&(x=g[b+1],w=g[b+2],E=m(g[b],x,_,v),S=m(g[b],w,_,v)),B){x=g[b],w=g[b+2],E=m(g[b+1],x,_,v),S=m(g[b+1],w,_,v),p.push(E),p.push(w.clone()),p.push(x.clone()),p.push(w.clone()),p.push(E.clone()),p.push(S);break}j&&(x=g[b],w=g[b+1],E=m(g[b+2],x,_,v),S=m(g[b+2],w,_,v)),p.push(x.clone()),p.push(w.clone()),p.push(E),p.push(S),p.push(E.clone()),p.push(w.clone());break;case 2:U||(x=g[b].clone(),w=m(x,g[b+1],_,v),E=m(x,g[b+2],_,v),p.push(x),p.push(w),p.push(E)),B||(x=g[b+1].clone(),w=m(x,g[b+2],_,v),E=m(x,g[b],_,v),p.push(x),p.push(w),p.push(E)),j||(x=g[b+2].clone(),w=m(x,g[b],_,v),E=m(x,g[b+1],_,v),p.push(x),p.push(w),p.push(E))}}return p}function m(g,_,p,v){const b=g.position.dot(p)-v,x=b/(b-(_.position.dot(p)-v));return new _G(new R(g.position.x+x*(_.position.x-g.position.x),g.position.y+x*(_.position.y-g.position.y),g.position.z+x*(_.position.z-g.position.z)),new R(g.normal.x+x*(_.normal.x-g.normal.x),g.normal.y+x*(_.normal.y-g.normal.y),g.normal.z+x*(_.normal.z-g.normal.z)))}d.copy(c).invert(),function u(){let g=[];const _=new R,p=new R,v=e.geometry,b=v.attributes.position,y=v.attributes.normal;if(null!==v.index){const x=v.index;for(let w=0;w<x.count;w++)_.fromBufferAttribute(b,x.getX(w)),p.fromBufferAttribute(y,x.getX(w)),h(g,_,p)}else for(let x=0;x<b.count;x++)_.fromBufferAttribute(b,x),p.fromBufferAttribute(y,x),h(g,_,p);g=f(g,l.set(1,0,0)),g=f(g,l.set(-1,0,0)),g=f(g,l.set(0,1,0)),g=f(g,l.set(0,-1,0)),g=f(g,l.set(0,0,1)),g=f(g,l.set(0,0,-1));for(let x=0;x<g.length;x++){const w=g[x];a.push(.5+w.position.x/r.x,.5+w.position.y/r.y),w.position.applyMatrix4(c),s.push(w.position.x,w.position.y,w.position.z),o.push(w.normal.x,w.normal.y,w.normal.z)}}(),this.setAttribute("position",new Ze(s,3)),this.setAttribute("normal",new Ze(o,3)),this.setAttribute("uv",new Ze(a,2))}}class _G{constructor(e,t){this.position=e,this.normal=t}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}class cm extends Tt{getType(){return t_e}}cm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(cm)))(t||cm)}}(),cm.\u0275cmp=K({type:cm,selectors:[["th-decalGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>cm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class dm extends Jn{getType(){return qf}get isDepthTexture(){return this._objRef?.isDepthTexture}set flipY(e){this._objRef&&(this._objRef.flipY=e)}get flipY(){return this._objRef?.flipY}set magFilter(e){this._objRef&&(this._objRef.magFilter=e)}get magFilter(){return this._objRef?.magFilter}set minFilter(e){this._objRef&&(this._objRef.minFilter=e)}get minFilter(){return this._objRef?.minFilter}set generateMipmaps(e){this._objRef&&(this._objRef.generateMipmaps=e)}get generateMipmaps(){return this._objRef?.generateMipmaps}set format(e){this._objRef&&(this._objRef.format=e)}get format(){return this._objRef?.format}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}}dm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(dm)))(t||dm)}}(),dm.\u0275cmp=K({type:dm,selectors:[["th-depthTexture"]],inputs:{flipY:"flipY",magFilter:"magFilter",minFilter:"minFilter",generateMipmaps:"generateMipmaps",format:"format",type:"type"},features:[oe([{provide:Pr,useExisting:le(()=>dm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class um extends Ke{getType(){return o5}get type(){return this._objRef?.type}set lightPlane(e){this._objRef&&(this._objRef.lightPlane=e)}get lightPlane(){return this._objRef?.lightPlane}set light(e){this._objRef&&(this._objRef.light=e)}get light(){return this._objRef?.light}set matrix(e){this._objRef&&(this._objRef.matrix=Qe(this._objRef.matrix,e))}get matrix(){return this._objRef?.matrix}set matrixAutoUpdate(e){this._objRef&&(this._objRef.matrixAutoUpdate=e)}get matrixAutoUpdate(){return this._objRef?.matrixAutoUpdate}set color(e){this._objRef&&(this._objRef.color=e)}get color(){return this._objRef?.color}set targetLine(e){this._objRef&&(this._objRef.targetLine=e)}get targetLine(){return this._objRef?.targetLine}}um.\u0275fac=function(){let i;return function(t){return(i||(i=ce(um)))(t||um)}}(),um.\u0275cmp=K({type:um,selectors:[["th-directionalLightHelper"]],inputs:{lightPlane:"lightPlane",light:"light",matrix:"matrix",matrixAutoUpdate:"matrixAutoUpdate",color:"color",targetLine:"targetLine"},features:[oe([{provide:Ke,useExisting:le(()=>um)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Xa extends Tt{getType(){return Fa}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}}Xa.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Xa)))(t||Xa)}}(),Xa.\u0275cmp=K({type:Xa,selectors:[["th-polyhedronGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>Xa)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class hm extends Xa{getType(){return sp}get type(){return this._objRef?.type}}hm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(hm)))(t||hm)}}(),hm.\u0275cmp=K({type:hm,selectors:[["th-dodecahedronGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>hm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const $I={uniforms:{tDiffuse:{value:null},tSize:{value:new pe(256,256)},center:{value:new pe(.5,.5)},angle:{value:1.57},scale:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform vec2 center;\n\t\tuniform float angle;\n\t\tuniform float scale;\n\t\tuniform vec2 tSize;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tfloat pattern() {\n\n\t\t\tfloat s = sin( angle ), c = cos( angle );\n\n\t\t\tvec2 tex = vUv * tSize - center;\n\t\t\tvec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;\n\n\t\t\treturn ( sin( point.x ) * sin( point.y ) ) * 4.0;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 color = texture2D( tDiffuse, vUv );\n\n\t\t\tfloat average = ( color.r + color.g + color.b ) / 3.0;\n\n\t\t\tgl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );\n\n\t\t}"};class a_e extends wn{constructor(e,t,n){super();const r=$I;this.uniforms=mi.clone(r.uniforms),void 0!==e&&this.uniforms.center.value.copy(e),void 0!==t&&(this.uniforms.angle.value=t),void 0!==n&&(this.uniforms.scale.value=n),this.material=new Dt({uniforms:this.uniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader}),this.fsQuad=new yr(this.material)}render(e,t,n){this.uniforms.tDiffuse.value=n.texture,this.uniforms.tSize.value.set(n.width,n.height),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class fm extends Wi{getType(){return a_e}set uniforms(e){this._objRef&&Object.assign(this._objRef.uniforms,e)}get uniforms(){return this._objRef?.uniforms}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}}fm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(fm)))(t||fm)}}(),fm.\u0275cmp=K({type:fm,selectors:[["th-dotScreenPass"]],inputs:{uniforms:"uniforms",material:"material",fsQuad:"fsQuad"},features:[oe([{provide:Li,useExisting:le(()=>fm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const pm=new to,jc=new _u,_0=new pe,bG=new R,Pw=new R,JI=new R,vG=new We;class c_e extends ns{constructor(e,t,n){super(),n.style.touchAction="none";let r=null,s=null;const o=[],a=this;function l(){n.addEventListener("pointermove",f),n.addEventListener("pointerdown",m),n.addEventListener("pointerup",g),n.addEventListener("pointerleave",g)}function c(){n.removeEventListener("pointermove",f),n.removeEventListener("pointerdown",m),n.removeEventListener("pointerup",g),n.removeEventListener("pointerleave",g),n.style.cursor=""}function f(p){if(!1!==a.enabled){if(_(p),jc.setFromCamera(_0,t),r)return jc.ray.intersectPlane(pm,Pw)&&r.position.copy(Pw.sub(bG).applyMatrix4(vG)),void a.dispatchEvent({type:"drag",object:r});if("mouse"===p.pointerType||"pen"===p.pointerType)if(o.length=0,jc.setFromCamera(_0,t),jc.intersectObjects(e,!0,o),o.length>0){const v=o[0].object;pm.setFromNormalAndCoplanarPoint(t.getWorldDirection(pm.normal),JI.setFromMatrixPosition(v.matrixWorld)),s!==v&&null!==s&&(a.dispatchEvent({type:"hoveroff",object:s}),n.style.cursor="auto",s=null),s!==v&&(a.dispatchEvent({type:"hoveron",object:v}),n.style.cursor="pointer",s=v)}else null!==s&&(a.dispatchEvent({type:"hoveroff",object:s}),n.style.cursor="auto",s=null)}}function m(p){!1!==a.enabled&&(_(p),o.length=0,jc.setFromCamera(_0,t),jc.intersectObjects(e,!0,o),o.length>0&&(r=!0===a.transformGroup?e[0]:o[0].object,pm.setFromNormalAndCoplanarPoint(t.getWorldDirection(pm.normal),JI.setFromMatrixPosition(r.matrixWorld)),jc.ray.intersectPlane(pm,Pw)&&(vG.copy(r.parent.matrixWorld).invert(),bG.copy(Pw).sub(JI.setFromMatrixPosition(r.matrixWorld))),n.style.cursor="move",a.dispatchEvent({type:"dragstart",object:r})))}function g(){!1!==a.enabled&&(r&&(a.dispatchEvent({type:"dragend",object:r}),r=null),n.style.cursor=s?"pointer":"auto")}function _(p){const v=n.getBoundingClientRect();_0.x=(p.clientX-v.left)/v.width*2-1,_0.y=-(p.clientY-v.top)/v.height*2+1}l(),this.enabled=!0,this.transformGroup=!1,this.activate=l,this.deactivate=c,this.dispose=function d(){c()},this.getObjects=function u(){return e},this.getRaycaster=function h(){return jc}}}class Uu extends Qn{getType(){return c_e}set object(e){this._objRef&&(this._objRef.object=e)}get object(){return this._objRef?.object}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set transformGroup(e){this._objRef&&(this._objRef.transformGroup=e)}get transformGroup(){return this._objRef?.transformGroup}}Uu.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Uu)))(t||Uu)}}(),Uu.\u0275cmp=K({type:Uu,selectors:[["th-dragControls"]],inputs:{object:"object",enabled:"enabled",transformGroup:"transformGroup"},features:[oe([{provide:Qn,useExisting:le(()=>Uu)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class mm extends Tt{getType(){return lR}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}}mm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(mm)))(t||mm)}}(),mm.\u0275cmp=K({type:mm,selectors:[["th-edgesGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>mm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Vu extends Tt{getType(){return iu}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}}Vu.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Vu)))(t||Vu)}}(),Vu.\u0275cmp=K({type:Vu,selectors:[["th-extrudeGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>Vu)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const f_e={uniforms:{tDiffuse:{value:null},time:{value:0},nIntensity:{value:.5},sIntensity:{value:.05},sCount:{value:4096},grayscale:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\n\t\t// control parameter\n\t\tuniform float time;\n\n\t\tuniform bool grayscale;\n\n\t\t// noise effect intensity value (0 = no effect, 1 = full effect)\n\t\tuniform float nIntensity;\n\n\t\t// scanlines effect intensity value (0 = no effect, 1 = full effect)\n\t\tuniform float sIntensity;\n\n\t\t// scanlines effect count value (0 = no effect, 4096 = full effect)\n\t\tuniform float sCount;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t// sample the source\n\t\t\tvec4 cTextureScreen = texture2D( tDiffuse, vUv );\n\n\t\t// make some noise\n\t\t\tfloat dx = rand( vUv + time );\n\n\t\t// add noise\n\t\t\tvec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx, 0.0, 1.0 );\n\n\t\t// get us a sine and cosine\n\t\t\tvec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );\n\n\t\t// add scanlines\n\t\t\tcResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;\n\n\t\t// interpolate between source and result by intensity\n\t\t\tcResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );\n\n\t\t// convert to grayscale if desired\n\t\t\tif( grayscale ) {\n\n\t\t\t\tcResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );\n\n\t\t\t}\n\n\t\t\tgl_FragColor =  vec4( cResult, cTextureScreen.a );\n\n\t\t}"};class p_e extends wn{constructor(e,t,n,r){super();const s=f_e;this.uniforms=mi.clone(s.uniforms),this.material=new Dt({uniforms:this.uniforms,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader}),void 0!==r&&(this.uniforms.grayscale.value=r),void 0!==e&&(this.uniforms.nIntensity.value=e),void 0!==t&&(this.uniforms.sIntensity.value=t),void 0!==n&&(this.uniforms.sCount.value=n),this.fsQuad=new yr(this.material)}render(e,t,n,r){this.uniforms.tDiffuse.value=n.texture,this.uniforms.time.value+=r,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class zu extends Wi{getType(){return p_e}set uniforms(e){this._objRef&&Object.assign(this._objRef.uniforms,e)}get uniforms(){return this._objRef?.uniforms}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}}zu.\u0275fac=function(){let i;return function(t){return(i||(i=ce(zu)))(t||zu)}}(),zu.\u0275cmp=K({type:zu,selectors:[["th-filmPass"]],inputs:{uniforms:"uniforms",material:"material",fsQuad:"fsQuad"},features:[oe([{provide:Li,useExisting:le(()=>zu)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const AG=new R,eD=new Cx,tD=new R;class g_e{constructor(e,t){this.object=e,this.domElement=t,this.enabled=!0,this.movementSpeed=1,this.lookSpeed=.005,this.lookVertical=!0,this.autoForward=!1,this.activeLook=!0,this.heightSpeed=!1,this.heightCoef=1,this.heightMin=0,this.heightMax=1,this.constrainVertical=!1,this.verticalMin=0,this.verticalMax=Math.PI,this.mouseDragOn=!1,this.autoSpeedFactor=0,this.pointerX=0,this.pointerY=0,this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.viewHalfX=0,this.viewHalfY=0;let n=0,r=0;this.handleResize=function(){this.domElement===document?(this.viewHalfX=window.innerWidth/2,this.viewHalfY=window.innerHeight/2):(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)},this.onPointerDown=function(u){if(this.domElement!==document&&this.domElement.focus(),this.activeLook)switch(u.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0}this.mouseDragOn=!0},this.onPointerUp=function(u){if(this.activeLook)switch(u.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1}this.mouseDragOn=!1},this.onPointerMove=function(u){this.domElement===document?(this.pointerX=u.pageX-this.viewHalfX,this.pointerY=u.pageY-this.viewHalfY):(this.pointerX=u.pageX-this.domElement.offsetLeft-this.viewHalfX,this.pointerY=u.pageY-this.domElement.offsetTop-this.viewHalfY)},this.onKeyDown=function(u){switch(u.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0}},this.onKeyUp=function(u){switch(u.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1}},this.lookAt=function(u,h,f){return u.isVector3?tD.copy(u):tD.set(u,h,f),this.object.lookAt(tD),d(this),this},this.update=function(){const u=new R;return function(f){if(!1===this.enabled)return;if(this.heightSpeed){const x=vt.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=f*(x*this.heightCoef)}else this.autoSpeedFactor=0;const m=f*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(m+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(m),this.moveLeft&&this.object.translateX(-m),this.moveRight&&this.object.translateX(m),this.moveUp&&this.object.translateY(m),this.moveDown&&this.object.translateY(-m);let g=f*this.lookSpeed;this.activeLook||(g=0);let _=1;this.constrainVertical&&(_=Math.PI/(this.verticalMax-this.verticalMin)),r-=this.pointerX*g,this.lookVertical&&(n-=this.pointerY*g*_),n=Math.max(-85,Math.min(85,n));let p=vt.degToRad(90-n);const v=vt.degToRad(r);this.constrainVertical&&(p=vt.mapLinear(p,0,Math.PI,this.verticalMin,this.verticalMax));const b=this.object.position;u.setFromSphericalCoords(1,p,v).add(b),this.object.lookAt(u)}}(),this.dispose=function(){this.domElement.removeEventListener("contextmenu",yG),this.domElement.removeEventListener("pointerdown",o),this.domElement.removeEventListener("pointermove",s),this.domElement.removeEventListener("pointerup",a),window.removeEventListener("keydown",l),window.removeEventListener("keyup",c)};const s=this.onPointerMove.bind(this),o=this.onPointerDown.bind(this),a=this.onPointerUp.bind(this),l=this.onKeyDown.bind(this),c=this.onKeyUp.bind(this);function d(u){const h=u.object.quaternion;AG.set(0,0,-1).applyQuaternion(h),eD.setFromVector3(AG),n=90-vt.radToDeg(eD.phi),r=vt.radToDeg(eD.theta)}this.domElement.addEventListener("contextmenu",yG),this.domElement.addEventListener("pointerdown",o),this.domElement.addEventListener("pointermove",s),this.domElement.addEventListener("pointerup",a),window.addEventListener("keydown",l),window.addEventListener("keyup",c),this.handleResize(),d(this)}}function yG(i){i.preventDefault()}class Gu extends Qn{getType(){return g_e}set object(e){this._objRef&&(this._objRef.object=e)}get object(){return this._objRef?.object}set domElement(e){this._objRef&&(this._objRef.domElement=e)}get domElement(){return this._objRef?.domElement}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set movementSpeed(e){this._objRef&&(this._objRef.movementSpeed=e)}get movementSpeed(){return this._objRef?.movementSpeed}set lookSpeed(e){this._objRef&&(this._objRef.lookSpeed=e)}get lookSpeed(){return this._objRef?.lookSpeed}set lookVertical(e){this._objRef&&(this._objRef.lookVertical=e)}get lookVertical(){return this._objRef?.lookVertical}set autoForward(e){this._objRef&&(this._objRef.autoForward=e)}get autoForward(){return this._objRef?.autoForward}set activeLook(e){this._objRef&&(this._objRef.activeLook=e)}get activeLook(){return this._objRef?.activeLook}set heightSpeed(e){this._objRef&&(this._objRef.heightSpeed=e)}get heightSpeed(){return this._objRef?.heightSpeed}set heightCoef(e){this._objRef&&(this._objRef.heightCoef=e)}get heightCoef(){return this._objRef?.heightCoef}set heightMin(e){this._objRef&&(this._objRef.heightMin=e)}get heightMin(){return this._objRef?.heightMin}set heightMax(e){this._objRef&&(this._objRef.heightMax=e)}get heightMax(){return this._objRef?.heightMax}set constrainVertical(e){this._objRef&&(this._objRef.constrainVertical=e)}get constrainVertical(){return this._objRef?.constrainVertical}set verticalMin(e){this._objRef&&(this._objRef.verticalMin=e)}get verticalMin(){return this._objRef?.verticalMin}set verticalMax(e){this._objRef&&(this._objRef.verticalMax=e)}get verticalMax(){return this._objRef?.verticalMax}set mouseDragOn(e){this._objRef&&(this._objRef.mouseDragOn=e)}get mouseDragOn(){return this._objRef?.mouseDragOn}}Gu.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Gu)))(t||Gu)}}(),Gu.\u0275cmp=K({type:Gu,selectors:[["th-firstPersonControls"]],inputs:{object:"object",domElement:"domElement",enabled:"enabled",movementSpeed:"movementSpeed",lookSpeed:"lookSpeed",lookVertical:"lookVertical",autoForward:"autoForward",activeLook:"activeLook",heightSpeed:"heightSpeed",heightCoef:"heightCoef",heightMin:"heightMin",heightMax:"heightMax",constrainVertical:"constrainVertical",verticalMin:"verticalMin",verticalMax:"verticalMax",mouseDragOn:"mouseDragOn"},features:[oe([{provide:Qn,useExisting:le(()=>Gu)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const b_e={type:"change"};class v_e extends ns{constructor(e,t){super(),this.object=e,this.domElement=t,this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;const n=this,r=1e-6,s=new wi,o=new R;this.tmpQuaternion=new wi,this.status=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new R(0,0,0),this.rotationVector=new R(0,0,0),this.keydown=function(h){if(!h.altKey){switch(h.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(h){switch(h.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()},this.pointerdown=function(h){if(this.dragToLook)this.status++;else{switch(h.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}},this.pointermove=function(h){if(!this.dragToLook||this.status>0){const f=this.getContainerDimensions(),m=f.size[0]/2,g=f.size[1]/2;this.moveState.yawLeft=-(h.pageX-f.offset[0]-m)/m,this.moveState.pitchDown=(h.pageY-f.offset[1]-g)/g,this.updateRotationVector()}},this.pointerup=function(h){if(this.dragToLook)this.status--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(h.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()},this.update=function(h){const f=h*n.movementSpeed,m=h*n.rollSpeed;n.object.translateX(n.moveVector.x*f),n.object.translateY(n.moveVector.y*f),n.object.translateZ(n.moveVector.z*f),n.tmpQuaternion.set(n.rotationVector.x*m,n.rotationVector.y*m,n.rotationVector.z*m,1).normalize(),n.object.quaternion.multiply(n.tmpQuaternion),(o.distanceToSquared(n.object.position)>r||8*(1-s.dot(n.object.quaternion))>r)&&(n.dispatchEvent(b_e),s.copy(n.object.quaternion),o.copy(n.object.position))},this.updateMovementVector=function(){const h=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-h+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",xG),this.domElement.removeEventListener("pointerdown",l),this.domElement.removeEventListener("pointermove",a),this.domElement.removeEventListener("pointerup",c),window.removeEventListener("keydown",d),window.removeEventListener("keyup",u)};const a=this.pointermove.bind(this),l=this.pointerdown.bind(this),c=this.pointerup.bind(this),d=this.keydown.bind(this),u=this.keyup.bind(this);this.domElement.addEventListener("contextmenu",xG),this.domElement.addEventListener("pointerdown",l),this.domElement.addEventListener("pointermove",a),this.domElement.addEventListener("pointerup",c),window.addEventListener("keydown",d),window.addEventListener("keyup",u),this.updateMovementVector(),this.updateRotationVector()}}function xG(i){i.preventDefault()}class Hu extends Qn{getType(){return v_e}set object(e){this._objRef&&(this._objRef.object=e)}get object(){return this._objRef?.object}set domElement(e){this._objRef&&(this._objRef.domElement=e)}get domElement(){return this._objRef?.domElement}set movementSpeed(e){this._objRef&&(this._objRef.movementSpeed=e)}get movementSpeed(){return this._objRef?.movementSpeed}set rollSpeed(e){this._objRef&&(this._objRef.rollSpeed=e)}get rollSpeed(){return this._objRef?.rollSpeed}set dragToLook(e){this._objRef&&(this._objRef.dragToLook=e)}get dragToLook(){return this._objRef?.dragToLook}set autoForward(e){this._objRef&&(this._objRef.autoForward=e)}get autoForward(){return this._objRef?.autoForward}}Hu.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Hu)))(t||Hu)}}(),Hu.\u0275cmp=K({type:Hu,selectors:[["th-flyControls"]],inputs:{object:"object",domElement:"domElement",movementSpeed:"movementSpeed",rollSpeed:"rollSpeed",dragToLook:"dragToLook",autoForward:"autoForward"},features:[oe([{provide:Qn,useExisting:le(()=>Hu)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class gm extends Jn{getType(){return t4}get isFramebufferTexture(){return this._objRef?.isFramebufferTexture}set magFilter(e){this._objRef&&(this._objRef.magFilter=e)}get magFilter(){return this._objRef?.magFilter}set minFilter(e){this._objRef&&(this._objRef.minFilter=e)}get minFilter(){return this._objRef?.minFilter}set generateMipmaps(e){this._objRef&&(this._objRef.generateMipmaps=e)}get generateMipmaps(){return this._objRef?.generateMipmaps}}gm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(gm)))(t||gm)}}(),gm.\u0275cmp=K({type:gm,selectors:[["th-framebufferTexture"]],inputs:{magFilter:"magFilter",minFilter:"minFilter",generateMipmaps:"generateMipmaps"},features:[oe([{provide:Pr,useExisting:le(()=>gm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const x_e={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\tuniform int byp; //should we apply the glitch ?\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tDisp;\n\n\t\tuniform float amount;\n\t\tuniform float angle;\n\t\tuniform float seed;\n\t\tuniform float seed_x;\n\t\tuniform float seed_y;\n\t\tuniform float distortion_x;\n\t\tuniform float distortion_y;\n\t\tuniform float col_s;\n\n\t\tvarying vec2 vUv;\n\n\n\t\tfloat rand(vec2 co){\n\t\t\treturn fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tif(byp<1) {\n\t\t\t\tvec2 p = vUv;\n\t\t\t\tfloat xs = floor(gl_FragCoord.x / 0.5);\n\t\t\t\tfloat ys = floor(gl_FragCoord.y / 0.5);\n\t\t\t\t//based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\n\t\t\t\tfloat disp = texture2D(tDisp, p*seed*seed).r;\n\t\t\t\tif(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {\n\t\t\t\t\tif(seed_x>0.){\n\t\t\t\t\t\tp.y = 1. - (p.y + distortion_y);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.y = distortion_y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {\n\t\t\t\t\tif(seed_y>0.){\n\t\t\t\t\t\tp.x=distortion_x;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.x = 1. - (p.x + distortion_x);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tp.x+=disp*seed_x*(seed/5.);\n\t\t\t\tp.y+=disp*seed_y*(seed/5.);\n\t\t\t\t//base from RGB shift shader\n\t\t\t\tvec2 offset = amount * vec2( cos(angle), sin(angle));\n\t\t\t\tvec4 cr = texture2D(tDiffuse, p + offset);\n\t\t\t\tvec4 cga = texture2D(tDiffuse, p);\n\t\t\t\tvec4 cb = texture2D(tDiffuse, p - offset);\n\t\t\t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n\t\t\t\t//add noise\n\t\t\t\tvec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);\n\t\t\t\tgl_FragColor = gl_FragColor+ snow;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor=texture2D (tDiffuse, vUv);\n\t\t\t}\n\t\t}"};class w_e extends wn{constructor(e=64){super();const t=x_e;this.uniforms=mi.clone(t.uniforms),this.heightMap=this.generateHeightmap(e),this.uniforms.tDisp.value=this.heightMap,this.material=new Dt({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.fsQuad=new yr(this.material),this.goWild=!1,this.curF=0,this.generateTrigger()}render(e,t,n){!1===e.capabilities.isWebGL2&&(this.uniforms.tDisp.value.format=dy),this.uniforms.tDiffuse.value=n.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||1==this.goWild?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=vt.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=vt.randFloat(-1,1),this.uniforms.seed_y.value=vt.randFloat(-1,1),this.uniforms.distortion_x.value=vt.randFloat(0,1),this.uniforms.distortion_y.value=vt.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=vt.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=vt.randFloat(0,1),this.uniforms.distortion_y.value=vt.randFloat(0,1),this.uniforms.seed_x.value=vt.randFloat(-.3,.3),this.uniforms.seed_y.value=vt.randFloat(-.3,.3)):0==this.goWild&&(this.uniforms.byp.value=1),this.curF++,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}generateTrigger(){this.randX=vt.randInt(120,240)}generateHeightmap(e){const t=new Float32Array(e*e),n=e*e;for(let s=0;s<n;s++){const o=vt.randFloat(0,1);t[s]=o}const r=new Ba(t,e,e,Al,Nn);return r.needsUpdate=!0,r}dispose(){this.material.dispose(),this.heightMap.dispose(),this.fsQuad.dispose()}}class Qu extends Wi{getType(){return w_e}set uniforms(e){this._objRef&&Object.assign(this._objRef.uniforms,e)}get uniforms(){return this._objRef?.uniforms}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set goWild(e){this._objRef&&(this._objRef.goWild=e)}get goWild(){return this._objRef?.goWild}set curF(e){this._objRef&&(this._objRef.curF=e)}get curF(){return this._objRef?.curF}set randX(e){this._objRef&&(this._objRef.randX=e)}get randX(){return this._objRef?.randX}}Qu.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Qu)))(t||Qu)}}(),Qu.\u0275cmp=K({type:Qu,selectors:[["th-glitchPass"]],inputs:{uniforms:"uniforms",material:"material",fsQuad:"fsQuad",goWild:"goWild",curF:"curF",randX:"randX"},features:[oe([{provide:Li,useExisting:le(()=>Qu)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Nl extends Ke{getType(){return xs}get isGroup(){return this._objRef?.isGroup}get type(){return this._objRef?.type}}Nl.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Nl)))(t||Nl)}}(),Nl.\u0275cmp=K({type:Nl,selectors:[["th-group"]],features:[oe([{provide:Ke,useExisting:le(()=>Nl)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const iD={uniforms:{tDiffuse:{value:null},shape:{value:1},radius:{value:4},rotateR:{value:Math.PI/12*1},rotateG:{value:Math.PI/12*2},rotateB:{value:Math.PI/12*3},scatter:{value:0},width:{value:1},height:{value:1},blending:{value:1},blendingMode:{value:1},greyscale:{value:!1},disable:{value:!1}},vertexShader:"\n\n\t\tvarying vec2 vUV;\n\n\t\tvoid main() {\n\n\t\t\tvUV = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n\t\t}",fragmentShader:"\n\n\t\t#define SQRT2_MINUS_ONE 0.41421356\n\t\t#define SQRT2_HALF_MINUS_ONE 0.20710678\n\t\t#define PI2 6.28318531\n\t\t#define SHAPE_DOT 1\n\t\t#define SHAPE_ELLIPSE 2\n\t\t#define SHAPE_LINE 3\n\t\t#define SHAPE_SQUARE 4\n\t\t#define BLENDING_LINEAR 1\n\t\t#define BLENDING_MULTIPLY 2\n\t\t#define BLENDING_ADD 3\n\t\t#define BLENDING_LIGHTER 4\n\t\t#define BLENDING_DARKER 5\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float radius;\n\t\tuniform float rotateR;\n\t\tuniform float rotateG;\n\t\tuniform float rotateB;\n\t\tuniform float scatter;\n\t\tuniform float width;\n\t\tuniform float height;\n\t\tuniform int shape;\n\t\tuniform bool disable;\n\t\tuniform float blending;\n\t\tuniform int blendingMode;\n\t\tvarying vec2 vUV;\n\t\tuniform bool greyscale;\n\t\tconst int samples = 8;\n\n\t\tfloat blend( float a, float b, float t ) {\n\n\t\t// linear blend\n\t\t\treturn a * ( 1.0 - t ) + b * t;\n\n\t\t}\n\n\t\tfloat hypot( float x, float y ) {\n\n\t\t// vector magnitude\n\t\t\treturn sqrt( x * x + y * y );\n\n\t\t}\n\n\t\tfloat rand( vec2 seed ){\n\n\t\t// get pseudo-random number\n\t\t\treturn fract( sin( dot( seed.xy, vec2( 12.9898, 78.233 ) ) ) * 43758.5453 );\n\n\t\t}\n\n\t\tfloat distanceToDotRadius( float channel, vec2 coord, vec2 normal, vec2 p, float angle, float rad_max ) {\n\n\t\t// apply shape-specific transforms\n\t\t\tfloat dist = hypot( coord.x - p.x, coord.y - p.y );\n\t\t\tfloat rad = channel;\n\n\t\t\tif ( shape == SHAPE_DOT ) {\n\n\t\t\t\trad = pow( abs( rad ), 1.125 ) * rad_max;\n\n\t\t\t} else if ( shape == SHAPE_ELLIPSE ) {\n\n\t\t\t\trad = pow( abs( rad ), 1.125 ) * rad_max;\n\n\t\t\t\tif ( dist != 0.0 ) {\n\t\t\t\t\tfloat dot_p = abs( ( p.x - coord.x ) / dist * normal.x + ( p.y - coord.y ) / dist * normal.y );\n\t\t\t\t\tdist = ( dist * ( 1.0 - SQRT2_HALF_MINUS_ONE ) ) + dot_p * dist * SQRT2_MINUS_ONE;\n\t\t\t\t}\n\n\t\t\t} else if ( shape == SHAPE_LINE ) {\n\n\t\t\t\trad = pow( abs( rad ), 1.5) * rad_max;\n\t\t\t\tfloat dot_p = ( p.x - coord.x ) * normal.x + ( p.y - coord.y ) * normal.y;\n\t\t\t\tdist = hypot( normal.x * dot_p, normal.y * dot_p );\n\n\t\t\t} else if ( shape == SHAPE_SQUARE ) {\n\n\t\t\t\tfloat theta = atan( p.y - coord.y, p.x - coord.x ) - angle;\n\t\t\t\tfloat sin_t = abs( sin( theta ) );\n\t\t\t\tfloat cos_t = abs( cos( theta ) );\n\t\t\t\trad = pow( abs( rad ), 1.4 );\n\t\t\t\trad = rad_max * ( rad + ( ( sin_t > cos_t ) ? rad - sin_t * rad : rad - cos_t * rad ) );\n\n\t\t\t}\n\n\t\t\treturn rad - dist;\n\n\t\t}\n\n\t\tstruct Cell {\n\n\t\t// grid sample positions\n\t\t\tvec2 normal;\n\t\t\tvec2 p1;\n\t\t\tvec2 p2;\n\t\t\tvec2 p3;\n\t\t\tvec2 p4;\n\t\t\tfloat samp2;\n\t\t\tfloat samp1;\n\t\t\tfloat samp3;\n\t\t\tfloat samp4;\n\n\t\t};\n\n\t\tvec4 getSample( vec2 point ) {\n\n\t\t// multi-sampled point\n\t\t\tvec4 tex = texture2D( tDiffuse, vec2( point.x / width, point.y / height ) );\n\t\t\tfloat base = rand( vec2( floor( point.x ), floor( point.y ) ) ) * PI2;\n\t\t\tfloat step = PI2 / float( samples );\n\t\t\tfloat dist = radius * 0.66;\n\n\t\t\tfor ( int i = 0; i < samples; ++i ) {\n\n\t\t\t\tfloat r = base + step * float( i );\n\t\t\t\tvec2 coord = point + vec2( cos( r ) * dist, sin( r ) * dist );\n\t\t\t\ttex += texture2D( tDiffuse, vec2( coord.x / width, coord.y / height ) );\n\n\t\t\t}\n\n\t\t\ttex /= float( samples ) + 1.0;\n\t\t\treturn tex;\n\n\t\t}\n\n\t\tfloat getDotColour( Cell c, vec2 p, int channel, float angle, float aa ) {\n\n\t\t// get colour for given point\n\t\t\tfloat dist_c_1, dist_c_2, dist_c_3, dist_c_4, res;\n\n\t\t\tif ( channel == 0 ) {\n\n\t\t\t\tc.samp1 = getSample( c.p1 ).r;\n\t\t\t\tc.samp2 = getSample( c.p2 ).r;\n\t\t\t\tc.samp3 = getSample( c.p3 ).r;\n\t\t\t\tc.samp4 = getSample( c.p4 ).r;\n\n\t\t\t} else if (channel == 1) {\n\n\t\t\t\tc.samp1 = getSample( c.p1 ).g;\n\t\t\t\tc.samp2 = getSample( c.p2 ).g;\n\t\t\t\tc.samp3 = getSample( c.p3 ).g;\n\t\t\t\tc.samp4 = getSample( c.p4 ).g;\n\n\t\t\t} else {\n\n\t\t\t\tc.samp1 = getSample( c.p1 ).b;\n\t\t\t\tc.samp3 = getSample( c.p3 ).b;\n\t\t\t\tc.samp2 = getSample( c.p2 ).b;\n\t\t\t\tc.samp4 = getSample( c.p4 ).b;\n\n\t\t\t}\n\n\t\t\tdist_c_1 = distanceToDotRadius( c.samp1, c.p1, c.normal, p, angle, radius );\n\t\t\tdist_c_2 = distanceToDotRadius( c.samp2, c.p2, c.normal, p, angle, radius );\n\t\t\tdist_c_3 = distanceToDotRadius( c.samp3, c.p3, c.normal, p, angle, radius );\n\t\t\tdist_c_4 = distanceToDotRadius( c.samp4, c.p4, c.normal, p, angle, radius );\n\t\t\tres = ( dist_c_1 > 0.0 ) ? clamp( dist_c_1 / aa, 0.0, 1.0 ) : 0.0;\n\t\t\tres += ( dist_c_2 > 0.0 ) ? clamp( dist_c_2 / aa, 0.0, 1.0 ) : 0.0;\n\t\t\tres += ( dist_c_3 > 0.0 ) ? clamp( dist_c_3 / aa, 0.0, 1.0 ) : 0.0;\n\t\t\tres += ( dist_c_4 > 0.0 ) ? clamp( dist_c_4 / aa, 0.0, 1.0 ) : 0.0;\n\t\t\tres = clamp( res, 0.0, 1.0 );\n\n\t\t\treturn res;\n\n\t\t}\n\n\t\tCell getReferenceCell( vec2 p, vec2 origin, float grid_angle, float step ) {\n\n\t\t// get containing cell\n\t\t\tCell c;\n\n\t\t// calc grid\n\t\t\tvec2 n = vec2( cos( grid_angle ), sin( grid_angle ) );\n\t\t\tfloat threshold = step * 0.5;\n\t\t\tfloat dot_normal = n.x * ( p.x - origin.x ) + n.y * ( p.y - origin.y );\n\t\t\tfloat dot_line = -n.y * ( p.x - origin.x ) + n.x * ( p.y - origin.y );\n\t\t\tvec2 offset = vec2( n.x * dot_normal, n.y * dot_normal );\n\t\t\tfloat offset_normal = mod( hypot( offset.x, offset.y ), step );\n\t\t\tfloat normal_dir = ( dot_normal < 0.0 ) ? 1.0 : -1.0;\n\t\t\tfloat normal_scale = ( ( offset_normal < threshold ) ? -offset_normal : step - offset_normal ) * normal_dir;\n\t\t\tfloat offset_line = mod( hypot( ( p.x - offset.x ) - origin.x, ( p.y - offset.y ) - origin.y ), step );\n\t\t\tfloat line_dir = ( dot_line < 0.0 ) ? 1.0 : -1.0;\n\t\t\tfloat line_scale = ( ( offset_line < threshold ) ? -offset_line : step - offset_line ) * line_dir;\n\n\t\t// get closest corner\n\t\t\tc.normal = n;\n\t\t\tc.p1.x = p.x - n.x * normal_scale + n.y * line_scale;\n\t\t\tc.p1.y = p.y - n.y * normal_scale - n.x * line_scale;\n\n\t\t// scatter\n\t\t\tif ( scatter != 0.0 ) {\n\n\t\t\t\tfloat off_mag = scatter * threshold * 0.5;\n\t\t\t\tfloat off_angle = rand( vec2( floor( c.p1.x ), floor( c.p1.y ) ) ) * PI2;\n\t\t\t\tc.p1.x += cos( off_angle ) * off_mag;\n\t\t\t\tc.p1.y += sin( off_angle ) * off_mag;\n\n\t\t\t}\n\n\t\t// find corners\n\t\t\tfloat normal_step = normal_dir * ( ( offset_normal < threshold ) ? step : -step );\n\t\t\tfloat line_step = line_dir * ( ( offset_line < threshold ) ? step : -step );\n\t\t\tc.p2.x = c.p1.x - n.x * normal_step;\n\t\t\tc.p2.y = c.p1.y - n.y * normal_step;\n\t\t\tc.p3.x = c.p1.x + n.y * line_step;\n\t\t\tc.p3.y = c.p1.y - n.x * line_step;\n\t\t\tc.p4.x = c.p1.x - n.x * normal_step + n.y * line_step;\n\t\t\tc.p4.y = c.p1.y - n.y * normal_step - n.x * line_step;\n\n\t\t\treturn c;\n\n\t\t}\n\n\t\tfloat blendColour( float a, float b, float t ) {\n\n\t\t// blend colours\n\t\t\tif ( blendingMode == BLENDING_LINEAR ) {\n\t\t\t\treturn blend( a, b, 1.0 - t );\n\t\t\t} else if ( blendingMode == BLENDING_ADD ) {\n\t\t\t\treturn blend( a, min( 1.0, a + b ), t );\n\t\t\t} else if ( blendingMode == BLENDING_MULTIPLY ) {\n\t\t\t\treturn blend( a, max( 0.0, a * b ), t );\n\t\t\t} else if ( blendingMode == BLENDING_LIGHTER ) {\n\t\t\t\treturn blend( a, max( a, b ), t );\n\t\t\t} else if ( blendingMode == BLENDING_DARKER ) {\n\t\t\t\treturn blend( a, min( a, b ), t );\n\t\t\t} else {\n\t\t\t\treturn blend( a, b, 1.0 - t );\n\t\t\t}\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tif ( ! disable ) {\n\n\t\t// setup\n\t\t\t\tvec2 p = vec2( vUV.x * width, vUV.y * height );\n\t\t\t\tvec2 origin = vec2( 0, 0 );\n\t\t\t\tfloat aa = ( radius < 2.5 ) ? radius * 0.5 : 1.25;\n\n\t\t// get channel samples\n\t\t\t\tCell cell_r = getReferenceCell( p, origin, rotateR, radius );\n\t\t\t\tCell cell_g = getReferenceCell( p, origin, rotateG, radius );\n\t\t\t\tCell cell_b = getReferenceCell( p, origin, rotateB, radius );\n\t\t\t\tfloat r = getDotColour( cell_r, p, 0, rotateR, aa );\n\t\t\t\tfloat g = getDotColour( cell_g, p, 1, rotateG, aa );\n\t\t\t\tfloat b = getDotColour( cell_b, p, 2, rotateB, aa );\n\n\t\t// blend with original\n\t\t\t\tvec4 colour = texture2D( tDiffuse, vUV );\n\t\t\t\tr = blendColour( r, colour.r, blending );\n\t\t\t\tg = blendColour( g, colour.g, blending );\n\t\t\t\tb = blendColour( b, colour.b, blending );\n\n\t\t\t\tif ( greyscale ) {\n\t\t\t\t\tr = g = b = (r + b + g) / 3.0;\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = vec4( r, g, b, 1.0 );\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = texture2D( tDiffuse, vUV );\n\n\t\t\t}\n\n\t\t}"};class E_e extends wn{constructor(e,t,n){super(),this.uniforms=mi.clone(iD.uniforms),this.material=new Dt({uniforms:this.uniforms,fragmentShader:iD.fragmentShader,vertexShader:iD.vertexShader}),this.uniforms.width.value=e,this.uniforms.height.value=t;for(const r in n)n.hasOwnProperty(r)&&this.uniforms.hasOwnProperty(r)&&(this.uniforms[r].value=n[r]);this.fsQuad=new yr(this.material)}render(e,t,n){this.material.uniforms.tDiffuse.value=n.texture,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}setSize(e,t){this.uniforms.width.value=e,this.uniforms.height.value=t}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class _m extends Wi{getType(){return E_e}set uniforms(e){this._objRef&&Object.assign(this._objRef.uniforms,e)}get uniforms(){return this._objRef?.uniforms}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}}_m.\u0275fac=function(){let i;return function(t){return(i||(i=ce(_m)))(t||_m)}}(),_m.\u0275cmp=K({type:_m,selectors:[["th-halftonePass"]],inputs:{uniforms:"uniforms",material:"material",fsQuad:"fsQuad"},features:[oe([{provide:Li,useExisting:le(()=>_m)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class bm extends Ke{getType(){return t5}get type(){return this._objRef?.type}set light(e){this._objRef&&(this._objRef.light=e)}get light(){return this._objRef?.light}set matrix(e){this._objRef&&(this._objRef.matrix=Qe(this._objRef.matrix,e))}get matrix(){return this._objRef?.matrix}set matrixAutoUpdate(e){this._objRef&&(this._objRef.matrixAutoUpdate=e)}get matrixAutoUpdate(){return this._objRef?.matrixAutoUpdate}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set color(e){this._objRef&&(this._objRef.color=e)}get color(){return this._objRef?.color}}bm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(bm)))(t||bm)}}(),bm.\u0275cmp=K({type:bm,selectors:[["th-hemisphereLightHelper"]],inputs:{light:"light",matrix:"matrix",matrixAutoUpdate:"matrixAutoUpdate",material:"material",color:"color"},features:[oe([{provide:Ke,useExisting:le(()=>bm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class vm extends Nc{getType(){return D4}get isHemisphereLightProbe(){return this._objRef?.isHemisphereLightProbe}}vm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(vm)))(t||vm)}}(),vm.\u0275cmp=K({type:vm,selectors:[["th-hemisphereLightProbe"]],features:[oe([{provide:Ke,useExisting:le(()=>vm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Wu extends Xa{getType(){return ap}get type(){return this._objRef?.type}}Wu.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Wu)))(t||Wu)}}(),Wu.\u0275cmp=K({type:Wu,selectors:[["th-icosahedronGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>Wu)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Am extends Tt{getType(){return TR}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}get isInstancedBufferGeometry(){return this._objRef?.isInstancedBufferGeometry}set instanceCount(e){this._objRef&&(this._objRef.instanceCount=e)}get instanceCount(){return this._objRef?.instanceCount}}Am.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Am)))(t||Am)}}(),Am.\u0275cmp=K({type:Am,selectors:[["th-instancedBufferGeometry"]],inputs:{type:"type",instanceCount:"instanceCount"},features:[oe([{provide:Tt,useExisting:le(()=>Am)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class qu extends Hn{getType(){return rx}get isInstancedMesh(){return this._objRef?.isInstancedMesh}set boundingBox(e){this._objRef&&(this._objRef.boundingBox=Qe(this._objRef.boundingBox,e))}get boundingBox(){return this._objRef?.boundingBox}set boundingSphere(e){this._objRef&&(this._objRef.boundingSphere=Qe(this._objRef.boundingSphere,e))}get boundingSphere(){return this._objRef?.boundingSphere}set count(e){this._objRef&&(this._objRef.count=e)}get count(){return this._objRef?.count}set instanceColor(e){this._objRef&&(this._objRef.instanceColor=Qe(this._objRef.instanceColor,e))}get instanceColor(){return this._objRef?.instanceColor}set instanceMatrix(e){this._objRef&&(this._objRef.instanceMatrix=Qe(this._objRef.instanceMatrix,e))}get instanceMatrix(){return this._objRef?.instanceMatrix}}qu.\u0275fac=function(){let i;return function(t){return(i||(i=ce(qu)))(t||qu)}}(),qu.\u0275cmp=K({type:qu,selectors:[["th-instancedMesh"]],inputs:{boundingBox:"boundingBox",boundingSphere:"boundingSphere",count:"count",instanceColor:"instanceColor",instanceMatrix:"instanceMatrix"},features:[oe([{provide:Ke,useExisting:le(()=>qu)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class ym extends Tt{getType(){return Jd}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}}ym.\u0275fac=function(){let i;return function(t){return(i||(i=ce(ym)))(t||ym)}}(),ym.\u0275cmp=K({type:ym,selectors:[["th-latheGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>ym)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class kw{constructor(e=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let t=0;t<256;t++)this.p[t]=Math.floor(256*e.random());this.perm=[];for(let t=0;t<512;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(e,t,n){return e[0]*t+e[1]*n}dot3(e,t,n,r){return e[0]*t+e[1]*n+e[2]*r}dot4(e,t,n,r,s){return e[0]*t+e[1]*n+e[2]*r+e[3]*s}noise(e,t){let n,r,s;const a=(e+t)*(.5*(Math.sqrt(3)-1)),l=Math.floor(e+a),c=Math.floor(t+a),d=(3-Math.sqrt(3))/6,u=(l+c)*d,m=e-(l-u),g=t-(c-u);let _,p;m>g?(_=1,p=0):(_=0,p=1);const v=m-_+d,b=g-p+d,y=m-1+2*d,x=g-1+2*d,w=255&l,E=255&c,C=this.perm[w+_+this.perm[E+p]]%12,T=this.perm[w+1+this.perm[E+1]]%12;let k=.5-m*m-g*g;k<0?n=0:(k*=k,n=k*k*this.dot(this.grad3[this.perm[w+this.perm[E]]%12],m,g));let U=.5-v*v-b*b;U<0?r=0:(U*=U,r=U*U*this.dot(this.grad3[C],v,b));let B=.5-y*y-x*x;return B<0?s=0:(B*=B,s=B*B*this.dot(this.grad3[T],y,x)),70*(n+r+s)}noise3d(e,t,n){let r,s,o,a;const c=.3333333333333333*(e+t+n),d=Math.floor(e+c),u=Math.floor(t+c),h=Math.floor(n+c),f=1/6,m=(d+u+h)*f,v=e-(d-m),b=t-(u-m),y=n-(h-m);let x,w,E,S,C,T;v>=b?b>=y?(x=1,w=0,E=0,S=1,C=1,T=0):v>=y?(x=1,w=0,E=0,S=1,C=0,T=1):(x=0,w=0,E=1,S=1,C=0,T=1):b<y?(x=0,w=0,E=1,S=0,C=1,T=1):v<y?(x=0,w=1,E=0,S=0,C=1,T=1):(x=0,w=1,E=0,S=1,C=1,T=0);const k=v-x+f,U=b-w+f,B=y-E+f,j=v-S+2*f,H=b-C+2*f,L=y-T+2*f,V=v-1+.5,O=b-1+.5,Q=y-1+.5,re=255&d,_e=255&u,de=255&h,q=this.perm[re+x+this.perm[_e+w+this.perm[de+E]]]%12,te=this.perm[re+S+this.perm[_e+C+this.perm[de+T]]]%12,$=this.perm[re+1+this.perm[_e+1+this.perm[de+1]]]%12;let I=.6-v*v-b*b-y*y;I<0?r=0:(I*=I,r=I*I*this.dot3(this.grad3[this.perm[re+this.perm[_e+this.perm[de]]]%12],v,b,y));let ue=.6-k*k-U*U-B*B;ue<0?s=0:(ue*=ue,s=ue*ue*this.dot3(this.grad3[q],k,U,B));let Me=.6-j*j-H*H-L*L;Me<0?o=0:(Me*=Me,o=Me*Me*this.dot3(this.grad3[te],j,H,L));let me=.6-V*V-O*O-Q*Q;return me<0?a=0:(me*=me,a=me*me*this.dot3(this.grad3[$],V,O,Q)),32*(r+s+o+a)}noise4d(e,t,n,r){const s=this.grad4,o=this.simplex,a=this.perm,l=(Math.sqrt(5)-1)/4,c=(5-Math.sqrt(5))/20;let d,u,h,f,m;const g=(e+t+n+r)*l,_=Math.floor(e+g),p=Math.floor(t+g),v=Math.floor(n+g),b=Math.floor(r+g),y=(_+p+v+b)*c,C=e-(_-y),T=t-(p-y),k=n-(v-y),U=r-(b-y),Q=(C>T?32:0)+(C>k?16:0)+(T>k?8:0)+(C>U?4:0)+(T>U?2:0)+(k>U?1:0),re=o[Q][0]>=3?1:0,_e=o[Q][1]>=3?1:0,de=o[Q][2]>=3?1:0,Y=o[Q][3]>=3?1:0,q=o[Q][0]>=2?1:0,te=o[Q][1]>=2?1:0,$=o[Q][2]>=2?1:0,I=o[Q][3]>=2?1:0,ue=o[Q][0]>=1?1:0,Me=o[Q][1]>=1?1:0,me=o[Q][2]>=1?1:0,He=o[Q][3]>=1?1:0,Ce=C-re+c,we=T-_e+c,Ee=k-de+c,it=U-Y+c,qe=C-q+2*c,bt=T-te+2*c,At=k-$+2*c,lt=U-I+2*c,ut=C-ue+3*c,yt=T-Me+3*c,N=k-me+3*c,F=U-He+3*c,ve=C-1+4*c,De=T-1+4*c,Ne=k-1+4*c,et=U-1+4*c,X=255&_,Te=255&p,Ae=255&v,Je=255&b,ht=a[X+re+a[Te+_e+a[Ae+de+a[Je+Y]]]]%32,$e=a[X+q+a[Te+te+a[Ae+$+a[Je+I]]]]%32,tt=a[X+ue+a[Te+Me+a[Ae+me+a[Je+He]]]]%32,Bt=a[X+1+a[Te+1+a[Ae+1+a[Je+1]]]]%32;let Rt=.6-C*C-T*T-k*k-U*U;Rt<0?d=0:(Rt*=Rt,d=Rt*Rt*this.dot4(s[a[X+a[Te+a[Ae+a[Je]]]]%32],C,T,k,U));let Kt=.6-Ce*Ce-we*we-Ee*Ee-it*it;Kt<0?u=0:(Kt*=Kt,u=Kt*Kt*this.dot4(s[ht],Ce,we,Ee,it));let ie=.6-qe*qe-bt*bt-At*At-lt*lt;ie<0?h=0:(ie*=ie,h=ie*ie*this.dot4(s[$e],qe,bt,At,lt));let ee=.6-ut*ut-yt*yt-N*N-F*F;ee<0?f=0:(ee*=ee,f=ee*ee*this.dot4(s[tt],ut,yt,N,F));let ze=.6-ve*ve-De*De-Ne*Ne-et*et;return ze<0?m=0:(ze*=ze,m=ze*ze*this.dot4(s[Bt],ve,De,Ne,et)),27*(d+u+h+f+m)}}class Qi extends Mt{constructor(e={}){super(),this.isLightningStrike=!0,this.type="LightningStrike",this.init(Qi.copyParameters(e,e)),this.createMesh()}static createRandomGenerator(){const t=[];for(let r=0;r<2053;r++)t.push(Math.random());const n={currentSeed:0,random:function(){const r=t[n.currentSeed];return n.currentSeed=(n.currentSeed+1)%2053,r},getSeed:function(){return n.currentSeed/2053},setSeed:function(r){n.currentSeed=Math.floor(2053*r)%2053}};return n}static copyParameters(e={},t={}){const n=function(r){return t===e?r:r.clone()};return e.sourceOffset=void 0!==t.sourceOffset?n(t.sourceOffset):new R(0,100,0),e.destOffset=void 0!==t.destOffset?n(t.destOffset):new R(0,0,0),e.timeScale=void 0!==t.timeScale?t.timeScale:1,e.roughness=void 0!==t.roughness?t.roughness:.9,e.straightness=void 0!==t.straightness?t.straightness:.7,e.up0=void 0!==t.up0?n(t.up0):new R(0,0,1),e.up1=void 0!==t.up1?n(t.up1):new R(0,0,1),e.radius0=void 0!==t.radius0?t.radius0:1,e.radius1=void 0!==t.radius1?t.radius1:1,e.radius0Factor=void 0!==t.radius0Factor?t.radius0Factor:.5,e.radius1Factor=void 0!==t.radius1Factor?t.radius1Factor:.2,e.minRadius=void 0!==t.minRadius?t.minRadius:.2,e.isEternal=void 0!==t.isEternal?t.isEternal:void 0===t.birthTime||void 0===t.deathTime,e.birthTime=t.birthTime,e.deathTime=t.deathTime,e.propagationTimeFactor=void 0!==t.propagationTimeFactor?t.propagationTimeFactor:.1,e.vanishingTimeFactor=void 0!==t.vanishingTimeFactor?t.vanishingTimeFactor:.9,e.subrayPeriod=void 0!==t.subrayPeriod?t.subrayPeriod:4,e.subrayDutyCycle=void 0!==t.subrayDutyCycle?t.subrayDutyCycle:.6,e.maxIterations=void 0!==t.maxIterations?t.maxIterations:9,e.isStatic=void 0!==t.isStatic&&t.isStatic,e.ramification=void 0!==t.ramification?t.ramification:5,e.maxSubrayRecursion=void 0!==t.maxSubrayRecursion?t.maxSubrayRecursion:3,e.recursionProbability=void 0!==t.recursionProbability?t.recursionProbability:.6,e.generateUVs=void 0!==t.generateUVs&&t.generateUVs,e.randomGenerator=t.randomGenerator,e.noiseSeed=t.noiseSeed,e.onDecideSubrayCreation=t.onDecideSubrayCreation,e.onSubrayCreation=t.onSubrayCreation,e}update(e){this.isStatic||(this.rayParameters.isEternal||this.rayParameters.birthTime<=e&&e<=this.rayParameters.deathTime?(this.updateMesh(e),this.state=e<this.subrays[0].endPropagationTime?Qi.RAY_PROPAGATING:e>this.subrays[0].beginVanishingTime?Qi.RAY_VANISHING:Qi.RAY_STEADY,this.visible=!0):(this.visible=!1,this.state=e<this.rayParameters.birthTime?Qi.RAY_UNBORN:Qi.RAY_EXTINGUISHED))}init(e){this.rayParameters=e,this.maxIterations=void 0!==e.maxIterations?Math.floor(e.maxIterations):9,e.maxIterations=this.maxIterations,this.isStatic=void 0!==e.isStatic&&e.isStatic,e.isStatic=this.isStatic,this.ramification=void 0!==e.ramification?Math.floor(e.ramification):5,e.ramification=this.ramification,this.maxSubrayRecursion=void 0!==e.maxSubrayRecursion?Math.floor(e.maxSubrayRecursion):3,e.maxSubrayRecursion=this.maxSubrayRecursion,this.recursionProbability=void 0!==e.recursionProbability?e.recursionProbability:.6,e.recursionProbability=this.recursionProbability,this.generateUVs=void 0!==e.generateUVs&&e.generateUVs,e.generateUVs=this.generateUVs,void 0!==e.randomGenerator?(this.randomGenerator=e.randomGenerator,this.seedGenerator=e.randomGenerator,void 0!==e.noiseSeed&&this.seedGenerator.setSeed(e.noiseSeed)):(this.randomGenerator=Qi.createRandomGenerator(),this.seedGenerator=Math),void 0!==e.onDecideSubrayCreation?this.onDecideSubrayCreation=e.onDecideSubrayCreation:(this.createDefaultSubrayCreationCallbacks(),void 0!==e.onSubrayCreation&&(this.onSubrayCreation=e.onSubrayCreation)),this.state=Qi.RAY_INITIALIZED,this.maxSubrays=Math.ceil(1+Math.pow(this.ramification,Math.max(0,this.maxSubrayRecursion-1))),e.maxSubrays=this.maxSubrays,this.maxRaySegments=2*(1<<this.maxIterations),this.subrays=[];for(let t=0;t<this.maxSubrays;t++)this.subrays.push(this.createSubray());this.raySegments=[];for(let t=0;t<this.maxRaySegments;t++)this.raySegments.push(this.createSegment());this.time=0,this.timeFraction=0,this.currentSegmentCallback=null,this.currentCreateTriangleVertices=this.generateUVs?this.createTriangleVerticesWithUVs:this.createTriangleVerticesWithoutUVs,this.numSubrays=0,this.currentSubray=null,this.currentSegmentIndex=0,this.isInitialSegment=!1,this.subrayProbability=0,this.currentVertex=0,this.currentIndex=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this.vertices=null,this.uvs=null,this.indices=null,this.positionAttribute=null,this.uvsAttribute=null,this.simplexX=new kw(this.seedGenerator),this.simplexY=new kw(this.seedGenerator),this.simplexZ=new kw(this.seedGenerator),this.forwards=new R,this.forwardsFill=new R,this.side=new R,this.down=new R,this.middlePos=new R,this.middleLinPos=new R,this.newPos=new R,this.vPos=new R,this.cross1=new R}createMesh(){const e=1<<this.maxIterations,t=3*(e+1)*this.maxSubrays,n=18*e*this.maxSubrays;this.vertices=new Float32Array(3*t),this.indices=new Uint32Array(n),this.generateUVs&&(this.uvs=new Float32Array(2*t)),this.fillMesh(0),this.setIndex(new ky(this.indices,1)),this.positionAttribute=new Ze(this.vertices,3),this.setAttribute("position",this.positionAttribute),this.generateUVs&&(this.uvsAttribute=new Ze(new Float32Array(this.uvs),2),this.setAttribute("uv",this.uvsAttribute)),this.isStatic||(this.index.usage=Ay,this.positionAttribute.usage=Ay,this.generateUVs&&(this.uvsAttribute.usage=Ay)),this.vertices=this.positionAttribute.array,this.indices=this.index.array,this.generateUVs&&(this.uvs=this.uvsAttribute.array)}updateMesh(e){this.fillMesh(e),this.drawRange.count=this.currentIndex,this.index.needsUpdate=!0,this.positionAttribute.needsUpdate=!0,this.generateUVs&&(this.uvsAttribute.needsUpdate=!0)}fillMesh(e){const t=this;this.currentVertex=0,this.currentIndex=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this.fractalRay(e,function(r){const s=t.currentSubray;e<s.birthTime||(this.rayParameters.isEternal&&0==t.currentSubray.recursion?(t.createPrism(r),t.onDecideSubrayCreation(r,t)):e<s.endPropagationTime?t.timeFraction>=r.fraction0*s.propagationTimeFactor&&(t.createPrism(r),t.onDecideSubrayCreation(r,t)):e<s.beginVanishingTime?(t.createPrism(r),t.onDecideSubrayCreation(r,t)):(t.timeFraction<=s.vanishingTimeFactor+r.fraction1*(1-s.vanishingTimeFactor)&&t.createPrism(r),t.onDecideSubrayCreation(r,t)))})}addNewSubray(){return this.subrays[this.numSubrays++]}initSubray(e,t){e.pos0.copy(t.sourceOffset),e.pos1.copy(t.destOffset),e.up0.copy(t.up0),e.up1.copy(t.up1),e.radius0=t.radius0,e.radius1=t.radius1,e.birthTime=t.birthTime,e.deathTime=t.deathTime,e.timeScale=t.timeScale,e.roughness=t.roughness,e.straightness=t.straightness,e.propagationTimeFactor=t.propagationTimeFactor,e.vanishingTimeFactor=t.vanishingTimeFactor,e.maxIterations=this.maxIterations,e.seed=void 0!==t.noiseSeed?t.noiseSeed:0,e.recursion=0}fractalRay(e,t){this.time=e,this.currentSegmentCallback=t,this.numSubrays=0,this.initSubray(this.addNewSubray(),this.rayParameters);for(let n=0;n<this.numSubrays;n++){const r=this.subrays[n];this.currentSubray=r,this.randomGenerator.setSeed(r.seed),r.endPropagationTime=vt.lerp(r.birthTime,r.deathTime,r.propagationTimeFactor),r.beginVanishingTime=vt.lerp(r.deathTime,r.birthTime,1-r.vanishingTimeFactor);const s=this.randomGenerator.random;r.linPos0.set(s(),s(),s()).multiplyScalar(1e3),r.linPos1.set(s(),s(),s()).multiplyScalar(1e3),this.timeFraction=(e-r.birthTime)/(r.deathTime-r.birthTime),this.currentSegmentIndex=0,this.isInitialSegment=!0;const o=this.getNewSegment();o.iteration=0,o.pos0.copy(r.pos0),o.pos1.copy(r.pos1),o.linPos0.copy(r.linPos0),o.linPos1.copy(r.linPos1),o.up0.copy(r.up0),o.up1.copy(r.up1),o.radius0=r.radius0,o.radius1=r.radius1,o.fraction0=0,o.fraction1=1,o.positionVariationFactor=1-r.straightness,this.subrayProbability=this.ramification*Math.pow(this.recursionProbability,r.recursion)/(1<<r.maxIterations),this.fractalRayRecursive(o)}this.currentSegmentCallback=null,this.currentSubray=null}fractalRayRecursive(e){if(e.iteration>=this.currentSubray.maxIterations)return void this.currentSegmentCallback(e);this.forwards.subVectors(e.pos1,e.pos0);let t=this.forwards.length();t<1e-6&&(this.forwards.set(0,0,.01),t=this.forwards.length());const n=.5*(e.radius0+e.radius1),r=.5*(e.fraction0+e.fraction1),s=this.time*this.currentSubray.timeScale*Math.pow(2,e.iteration);this.middlePos.lerpVectors(e.pos0,e.pos1,.5),this.middleLinPos.lerpVectors(e.linPos0,e.linPos1,.5);const o=this.middleLinPos;this.newPos.set(this.simplexX.noise4d(o.x,o.y,o.z,s),this.simplexY.noise4d(o.x,o.y,o.z,s),this.simplexZ.noise4d(o.x,o.y,o.z,s)),this.newPos.multiplyScalar(e.positionVariationFactor*t),this.newPos.add(this.middlePos);const a=this.getNewSegment();a.pos0.copy(e.pos0),a.pos1.copy(this.newPos),a.linPos0.copy(e.linPos0),a.linPos1.copy(this.middleLinPos),a.up0.copy(e.up0),a.up1.copy(e.up1),a.radius0=e.radius0,a.radius1=n,a.fraction0=e.fraction0,a.fraction1=r,a.positionVariationFactor=e.positionVariationFactor*this.currentSubray.roughness,a.iteration=e.iteration+1;const l=this.getNewSegment();l.pos0.copy(this.newPos),l.pos1.copy(e.pos1),l.linPos0.copy(this.middleLinPos),l.linPos1.copy(e.linPos1),this.cross1.crossVectors(e.up0,this.forwards.normalize()),l.up0.crossVectors(this.forwards,this.cross1).normalize(),l.up1.copy(e.up1),l.radius0=n,l.radius1=e.radius1,l.fraction0=r,l.fraction1=e.fraction1,l.positionVariationFactor=e.positionVariationFactor*this.currentSubray.roughness,l.iteration=e.iteration+1,this.fractalRayRecursive(a),this.fractalRayRecursive(l)}createPrism(e){this.forwardsFill.subVectors(e.pos1,e.pos0).normalize(),this.isInitialSegment&&(this.currentCreateTriangleVertices(e.pos0,e.up0,this.forwardsFill,e.radius0,0),this.isInitialSegment=!1),this.currentCreateTriangleVertices(e.pos1,e.up0,this.forwardsFill,e.radius1,e.fraction1),this.createPrismFaces()}createTriangleVerticesWithoutUVs(e,t,n,r){this.side.crossVectors(t,n).multiplyScalar(r*Qi.COS30DEG),this.down.copy(t).multiplyScalar(-r*Qi.SIN30DEG);const s=this.vPos,o=this.vertices;s.copy(e).sub(this.side).add(this.down),o[this.currentCoordinate++]=s.x,o[this.currentCoordinate++]=s.y,o[this.currentCoordinate++]=s.z,s.copy(e).add(this.side).add(this.down),o[this.currentCoordinate++]=s.x,o[this.currentCoordinate++]=s.y,o[this.currentCoordinate++]=s.z,s.copy(t).multiplyScalar(r).add(e),o[this.currentCoordinate++]=s.x,o[this.currentCoordinate++]=s.y,o[this.currentCoordinate++]=s.z,this.currentVertex+=3}createTriangleVerticesWithUVs(e,t,n,r,s){this.side.crossVectors(t,n).multiplyScalar(r*Qi.COS30DEG),this.down.copy(t).multiplyScalar(-r*Qi.SIN30DEG);const o=this.vPos,a=this.vertices,l=this.uvs;o.copy(e).sub(this.side).add(this.down),a[this.currentCoordinate++]=o.x,a[this.currentCoordinate++]=o.y,a[this.currentCoordinate++]=o.z,l[this.currentUVCoordinate++]=s,l[this.currentUVCoordinate++]=0,o.copy(e).add(this.side).add(this.down),a[this.currentCoordinate++]=o.x,a[this.currentCoordinate++]=o.y,a[this.currentCoordinate++]=o.z,l[this.currentUVCoordinate++]=s,l[this.currentUVCoordinate++]=.5,o.copy(t).multiplyScalar(r).add(e),a[this.currentCoordinate++]=o.x,a[this.currentCoordinate++]=o.y,a[this.currentCoordinate++]=o.z,l[this.currentUVCoordinate++]=s,l[this.currentUVCoordinate++]=1,this.currentVertex+=3}createPrismFaces(e){const t=this.indices;e=this.currentVertex-6,t[this.currentIndex++]=e+1,t[this.currentIndex++]=e+2,t[this.currentIndex++]=e+5,t[this.currentIndex++]=e+1,t[this.currentIndex++]=e+5,t[this.currentIndex++]=e+4,t[this.currentIndex++]=e+0,t[this.currentIndex++]=e+1,t[this.currentIndex++]=e+4,t[this.currentIndex++]=e+0,t[this.currentIndex++]=e+4,t[this.currentIndex++]=e+3,t[this.currentIndex++]=e+2,t[this.currentIndex++]=e+0,t[this.currentIndex++]=e+3,t[this.currentIndex++]=e+2,t[this.currentIndex++]=e+3,t[this.currentIndex++]=e+5}createDefaultSubrayCreationCallbacks(){const e=this.randomGenerator.random;this.onDecideSubrayCreation=function(o,a){const l=a.currentSubray,c=a.rayParameters.subrayPeriod,d=a.rayParameters.subrayDutyCycle,u=a.rayParameters.isEternal&&0==l.recursion?-e()*c:vt.lerp(l.birthTime,l.endPropagationTime,o.fraction0)-e()*c,h=a.time-u,f=Math.floor(h/c),m=e()*(f+1);let _=0;if(h%c<=d*c&&(_=a.subrayProbability),l.recursion<a.maxSubrayRecursion&&a.numSubrays<a.maxSubrays&&e()<_){const p=a.addNewSubray(),v=a.randomGenerator.getSeed();p.seed=m,a.randomGenerator.setSeed(m),p.recursion=l.recursion+1,p.maxIterations=Math.max(1,l.maxIterations-1),p.linPos0.set(e(),e(),e()).multiplyScalar(1e3),p.linPos1.set(e(),e(),e()).multiplyScalar(1e3),p.up0.copy(l.up0),p.up1.copy(l.up1),p.radius0=o.radius0*a.rayParameters.radius0Factor,p.radius1=Math.min(a.rayParameters.minRadius,o.radius1*a.rayParameters.radius1Factor),p.birthTime=u+f*c,p.deathTime=p.birthTime+c*d,!a.rayParameters.isEternal&&0==l.recursion&&(p.birthTime=Math.max(p.birthTime,l.birthTime),p.deathTime=Math.min(p.deathTime,l.deathTime)),p.timeScale=2*l.timeScale,p.roughness=l.roughness,p.straightness=l.straightness,p.propagationTimeFactor=l.propagationTimeFactor,p.vanishingTimeFactor=l.vanishingTimeFactor,a.onSubrayCreation(o,l,p,a),a.randomGenerator.setSeed(v)}};const t=new R,n=new R,r=new R,s=new R;this.onSubrayCreation=function(o,a,l,c){c.subrayCylinderPosition(o,a,l,.5,.6,.2)},this.subrayConePosition=function(o,a,l,c,d,u){l.pos0.copy(o.pos0),t.subVectors(a.pos1,a.pos0),n.copy(t).normalize(),t.multiplyScalar(o.fraction0+(1-o.fraction0)*(e()*c));const h=t.length();r.crossVectors(a.up0,n);const f=2*Math.PI*e();r.multiplyScalar(Math.cos(f)),s.copy(a.up0).multiplyScalar(Math.sin(f)),l.pos1.copy(r).add(s).multiplyScalar(h*d*(u+e()*(1-u))).add(t).add(a.pos0)},this.subrayCylinderPosition=function(o,a,l,c,d,u){l.pos0.copy(o.pos0),t.subVectors(a.pos1,a.pos0),n.copy(t).normalize(),t.multiplyScalar(o.fraction0+(1-o.fraction0)*((2*e()-1)*c));const h=t.length();r.crossVectors(a.up0,n);const f=2*Math.PI*e();r.multiplyScalar(Math.cos(f)),s.copy(a.up0).multiplyScalar(Math.sin(f)),l.pos1.copy(r).add(s).multiplyScalar(h*d*(u+e()*(1-u))).add(t).add(a.pos0)}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new R,pos1:new R,linPos0:new R,linPos1:new R,up0:new R,up1:new R,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new R,pos1:new R,linPos0:new R,linPos1:new R,up0:new R,up1:new R,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){return this.raySegments[this.currentSegmentIndex++]}copy(e){return super.copy(e),this.init(Qi.copyParameters({},e.rayParameters)),this}clone(){return new this.constructor(Qi.copyParameters({},this.rayParameters))}}Qi.RAY_INITIALIZED=0,Qi.RAY_UNBORN=1,Qi.RAY_PROPAGATING=2,Qi.RAY_STEADY=3,Qi.RAY_VANISHING=4,Qi.RAY_EXTINGUISHED=5,Qi.COS30DEG=Math.cos(30*Math.PI/180),Qi.SIN30DEG=Math.sin(30*Math.PI/180);class Oo extends Tt{getType(){return Qi}set state(e){this._objRef&&(this._objRef.state=e)}get state(){return this._objRef?.state}}Oo.RAY_INITIALIZED=Qi.RAY_INITIALIZED,Oo.RAY_UNBORN=Qi.RAY_UNBORN,Oo.RAY_PROPAGATING=Qi.RAY_PROPAGATING,Oo.RAY_STEADY=Qi.RAY_STEADY,Oo.RAY_VANISHING=Qi.RAY_VANISHING,Oo.RAY_EXTINGUISHED=Qi.RAY_EXTINGUISHED,Oo.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Oo)))(t||Oo)}}(),Oo.\u0275cmp=K({type:Oo,selectors:[["th-lightningStrike"]],inputs:{state:"state"},features:[oe([{provide:Tt,useExisting:le(()=>Oo)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Yu extends Ei{getType(){return mn}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set color(e){this._objRef&&(this._objRef.color=Qe(this._objRef.color,e))}get color(){return this._objRef?.color}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}set linewidth(e){this._objRef&&(this._objRef.linewidth=e)}get linewidth(){return this._objRef?.linewidth}set linecap(e){this._objRef&&(this._objRef.linecap=e)}get linecap(){return this._objRef?.linecap}set linejoin(e){this._objRef&&(this._objRef.linejoin=e)}get linejoin(){return this._objRef?.linejoin}set map(e){this._objRef&&(this._objRef.map=e)}get map(){return this._objRef?.map}}Yu.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Yu)))(t||Yu)}}(),Yu.\u0275cmp=K({type:Yu,selectors:[["th-lineBasicMaterial"]],inputs:{type:"type",color:"color",fog:"fog",linewidth:"linewidth",linecap:"linecap",linejoin:"linejoin",map:"map"},features:[oe([{provide:Ei,useExisting:le(()=>Yu)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class xm extends Yu{getType(){return gR}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set scale(e){this._objRef&&(this._objRef.scale=e)}get scale(){return this._objRef?.scale}set dashSize(e){this._objRef&&(this._objRef.dashSize=e)}get dashSize(){return this._objRef?.dashSize}set gapSize(e){this._objRef&&(this._objRef.gapSize=e)}get gapSize(){return this._objRef?.gapSize}get isLineDashedMaterial(){return this._objRef?.isLineDashedMaterial}}xm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(xm)))(t||xm)}}(),xm.\u0275cmp=K({type:xm,selectors:[["th-lineDashedMaterial"]],inputs:{type:"type",scale:"scale",dashSize:"dashSize",gapSize:"gapSize"},features:[oe([{provide:Ei,useExisting:le(()=>xm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class wm extends xc{getType(){return ox}get isLineLoop(){return this._objRef?.isLineLoop}get type(){return this._objRef?.type}}wm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(wm)))(t||wm)}}(),wm.\u0275cmp=K({type:wm,selectors:[["th-lineLoop"]],features:[oe([{provide:Ke,useExisting:le(()=>wm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Cm extends Ke{getType(){return YT}get isLOD(){return this._objRef?.isLOD}get type(){return this._objRef?.type}set levels(e){this._objRef&&(this._objRef.levels=e)}get levels(){return this._objRef?.levels}set autoUpdate(e){this._objRef&&(this._objRef.autoUpdate=e)}get autoUpdate(){return this._objRef?.autoUpdate}}Cm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Cm)))(t||Cm)}}(),Cm.\u0275cmp=K({type:Cm,selectors:[["th-lOD"]],inputs:{levels:"levels",autoUpdate:"autoUpdate"},features:[oe([{provide:Ke,useExisting:le(()=>Cm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const j_e={defines:{USE_3DTEXTURE:1},uniforms:{lut3d:{value:null},lut:{value:null},lutSize:{value:0},tDiffuse:{value:null},intensity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}\n\n\t",fragmentShader:"\n\n\t\tuniform float lutSize;\n\t\t#if USE_3DTEXTURE\n\t\tprecision highp sampler3D;\n\t\tuniform sampler3D lut3d;\n\t\t#else\n\t\tuniform sampler2D lut;\n\n\t\tvec3 lutLookup( sampler2D tex, float size, vec3 rgb ) {\n\n\t\t\tfloat sliceHeight = 1.0 / size;\n\t\t\tfloat yPixelHeight = 1.0 / ( size * size );\n\n\t\t\t// Get the slices on either side of the sample\n\t\t\tfloat slice = rgb.b * size;\n\t\t\tfloat interp = fract( slice );\n\t\t\tfloat slice0 = slice - interp;\n\t\t\tfloat centeredInterp = interp - 0.5;\n\n\t\t\tfloat slice1 = slice0 + sign( centeredInterp );\n\n\t\t\t// Pull y sample in by half a pixel in each direction to avoid color\n\t\t\t// bleeding from adjacent slices.\n\t\t\tfloat greenOffset = clamp( rgb.g * sliceHeight, yPixelHeight * 0.5, sliceHeight - yPixelHeight * 0.5 );\n\n\t\t\tvec2 uv0 = vec2(\n\t\t\t\trgb.r,\n\t\t\t\tslice0 * sliceHeight + greenOffset\n\t\t\t);\n\t\t\tvec2 uv1 = vec2(\n\t\t\t\trgb.r,\n\t\t\t\tslice1 * sliceHeight + greenOffset\n\t\t\t);\n\n\t\t\tvec3 sample0 = texture2D( tex, uv0 ).rgb;\n\t\t\tvec3 sample1 = texture2D( tex, uv1 ).rgb;\n\n\t\t\treturn mix( sample0, sample1, abs( centeredInterp ) );\n\n\t\t}\n\t\t#endif\n\n\t\tvarying vec2 vUv;\n\t\tuniform float intensity;\n\t\tuniform sampler2D tDiffuse;\n\t\tvoid main() {\n\n\t\t\tvec4 val = texture2D( tDiffuse, vUv );\n\t\t\tvec4 lutVal;\n\n\t\t\t// pull the sample in by half a pixel so the sample begins\n\t\t\t// at the center of the edge pixels.\n\t\t\tfloat pixelWidth = 1.0 / lutSize;\n\t\t\tfloat halfPixelWidth = 0.5 / lutSize;\n\t\t\tvec3 uvw = vec3( halfPixelWidth ) + val.rgb * ( 1.0 - pixelWidth );\n\n\t\t\t#if USE_3DTEXTURE\n\n\t\t\tlutVal = vec4( texture( lut3d, uvw ).rgb, val.a );\n\n\t\t\t#else\n\n\t\t\tlutVal = vec4( lutLookup( lut, lutSize, uvw ), val.a );\n\n\t\t\t#endif\n\n\t\t\tgl_FragColor = vec4( mix( val, lutVal, intensity ) );\n\n\t\t}\n\n\t"};class U_e extends GI{set lut(e){const t=this.material;if(e!==this.lut&&(t.uniforms.lut3d.value=null,t.uniforms.lut.value=null,e)){const n=e.isData3DTexture?1:0;n!==t.defines.USE_3DTEXTURE&&(t.defines.USE_3DTEXTURE=n,t.needsUpdate=!0),t.uniforms.lutSize.value=e.image.width,e.isData3DTexture?t.uniforms.lut3d.value=e:t.uniforms.lut.value=e}}get lut(){return this.material.uniforms.lut.value||this.material.uniforms.lut3d.value}set intensity(e){this.material.uniforms.intensity.value=e}get intensity(){return this.material.uniforms.intensity.value}constructor(e={}){super(j_e),this.lut=e.lut||null,this.intensity="intensity"in e?e.intensity:1}}class jl extends Wi{getType(){return GI}set textureID(e){this._objRef&&(this._objRef.textureID=e)}get textureID(){return this._objRef?.textureID}set uniforms(e){this._objRef&&Object.assign(this._objRef.uniforms,e)}get uniforms(){return this._objRef?.uniforms}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}}jl.\u0275fac=function(){let i;return function(t){return(i||(i=ce(jl)))(t||jl)}}(),jl.\u0275cmp=K({type:jl,selectors:[["th-shaderPass"]],inputs:{textureID:"textureID",uniforms:"uniforms",material:"material",fsQuad:"fsQuad"},features:[oe([{provide:Li,useExisting:le(()=>jl)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Mm extends jl{getType(){return U_e}set lut(e){this._objRef&&(this._objRef.lut=e)}get lut(){return this._objRef?.lut}set intensity(e){this._objRef&&(this._objRef.intensity=e)}get intensity(){return this._objRef?.intensity}}Mm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Mm)))(t||Mm)}}(),Mm.\u0275cmp=K({type:Mm,selectors:[["th-lUTPass"]],inputs:{lut:"lut",intensity:"intensity"},features:[oe([{provide:Li,useExisting:le(()=>Mm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class G_e extends R5{constructor(e,t){super(e,t),this.screenSpacePanning=!1,this.mouseButtons={LEFT:Qs.PAN,MIDDLE:Qs.DOLLY,RIGHT:Qs.ROTATE},this.touches={ONE:vl.PAN,TWO:vl.DOLLY_ROTATE}}}class Xu extends ls{getType(){return G_e}}Xu.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Xu)))(t||Xu)}}(),Xu.\u0275cmp=K({type:Xu,selectors:[["th-mapControls"]],features:[oe([{provide:Qn,useExisting:le(()=>Xu)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Em extends Wi{getType(){return HI}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set inverse(e){this._objRef&&(this._objRef.inverse=e)}get inverse(){return this._objRef?.inverse}}Em.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Em)))(t||Em)}}(),Em.\u0275cmp=K({type:Em,selectors:[["th-maskPass"]],inputs:{scene:"scene",camera:"camera",inverse:"inverse"},features:[oe([{provide:Li,useExisting:le(()=>Em)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Sm extends Ei{getType(){return Zd}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set map(e){this._objRef&&(this._objRef.map=e)}get map(){return this._objRef?.map}set alphaMap(e){this._objRef&&(this._objRef.alphaMap=e)}get alphaMap(){return this._objRef?.alphaMap}set depthPacking(e){this._objRef&&(this._objRef.depthPacking=e)}get depthPacking(){return this._objRef?.depthPacking}set displacementMap(e){this._objRef&&(this._objRef.displacementMap=e)}get displacementMap(){return this._objRef?.displacementMap}set displacementScale(e){this._objRef&&(this._objRef.displacementScale=e)}get displacementScale(){return this._objRef?.displacementScale}set displacementBias(e){this._objRef&&(this._objRef.displacementBias=e)}get displacementBias(){return this._objRef?.displacementBias}set wireframe(e){this._objRef&&(this._objRef.wireframe=e)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(e){this._objRef&&(this._objRef.wireframeLinewidth=e)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}}Sm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Sm)))(t||Sm)}}(),Sm.\u0275cmp=K({type:Sm,selectors:[["th-meshDepthMaterial"]],inputs:{type:"type",map:"map",alphaMap:"alphaMap",depthPacking:"depthPacking",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",fog:"fog"},features:[oe([{provide:Ei,useExisting:le(()=>Sm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Tm extends Ei{getType(){return Xy}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set map(e){this._objRef&&(this._objRef.map=e)}get map(){return this._objRef?.map}set alphaMap(e){this._objRef&&(this._objRef.alphaMap=e)}get alphaMap(){return this._objRef?.alphaMap}set displacementMap(e){this._objRef&&(this._objRef.displacementMap=e)}get displacementMap(){return this._objRef?.displacementMap}set displacementScale(e){this._objRef&&(this._objRef.displacementScale=e)}get displacementScale(){return this._objRef?.displacementScale}set displacementBias(e){this._objRef&&(this._objRef.displacementBias=e)}get displacementBias(){return this._objRef?.displacementBias}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}}Tm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Tm)))(t||Tm)}}(),Tm.\u0275cmp=K({type:Tm,selectors:[["th-meshDistanceMaterial"]],inputs:{type:"type",map:"map",alphaMap:"alphaMap",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",fog:"fog"},features:[oe([{provide:Ei,useExisting:le(()=>Tm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Rm extends Ei{getType(){return bx}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set color(e){this._objRef&&(this._objRef.color=Qe(this._objRef.color,e))}get color(){return this._objRef?.color}set bumpMap(e){this._objRef&&(this._objRef.bumpMap=e)}get bumpMap(){return this._objRef?.bumpMap}set bumpScale(e){this._objRef&&(this._objRef.bumpScale=e)}get bumpScale(){return this._objRef?.bumpScale}set displacementMap(e){this._objRef&&(this._objRef.displacementMap=e)}get displacementMap(){return this._objRef?.displacementMap}set displacementScale(e){this._objRef&&(this._objRef.displacementScale=e)}get displacementScale(){return this._objRef?.displacementScale}set displacementBias(e){this._objRef&&(this._objRef.displacementBias=e)}get displacementBias(){return this._objRef?.displacementBias}set emissive(e){this._objRef&&(this._objRef.emissive=Qe(this._objRef.emissive,e))}get emissive(){return this._objRef?.emissive}set emissiveIntensity(e){this._objRef&&(this._objRef.emissiveIntensity=e)}get emissiveIntensity(){return this._objRef?.emissiveIntensity}set emissiveMap(e){this._objRef&&(this._objRef.emissiveMap=e)}get emissiveMap(){return this._objRef?.emissiveMap}set flatShading(e){this._objRef&&(this._objRef.flatShading=e)}get flatShading(){return this._objRef?.flatShading}set map(e){this._objRef&&(this._objRef.map=e)}get map(){return this._objRef?.map}set lightMap(e){this._objRef&&(this._objRef.lightMap=e)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(e){this._objRef&&(this._objRef.lightMapIntensity=e)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set normalMap(e){this._objRef&&(this._objRef.normalMap=e)}get normalMap(){return this._objRef?.normalMap}set normalMapType(e){this._objRef&&(this._objRef.normalMapType=e)}get normalMapType(){return this._objRef?.normalMapType}set normalScale(e){this._objRef&&(this._objRef.normalScale=Qe(this._objRef.normalScale,e))}get normalScale(){return this._objRef?.normalScale}set aoMap(e){this._objRef&&(this._objRef.aoMap=e)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(e){this._objRef&&(this._objRef.aoMapIntensity=e)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set specularMap(e){this._objRef&&(this._objRef.specularMap=e)}get specularMap(){return this._objRef?.specularMap}set alphaMap(e){this._objRef&&(this._objRef.alphaMap=e)}get alphaMap(){return this._objRef?.alphaMap}set envMap(e){this._objRef&&(this._objRef.envMap=e)}get envMap(){return this._objRef?.envMap}set combine(e){this._objRef&&(this._objRef.combine=e)}get combine(){return this._objRef?.combine}set reflectivity(e){this._objRef&&(this._objRef.reflectivity=e)}get reflectivity(){return this._objRef?.reflectivity}set refractionRatio(e){this._objRef&&(this._objRef.refractionRatio=e)}get refractionRatio(){return this._objRef?.refractionRatio}set wireframe(e){this._objRef&&(this._objRef.wireframe=e)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(e){this._objRef&&(this._objRef.wireframeLinewidth=e)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(e){this._objRef&&(this._objRef.wireframeLinecap=e)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(e){this._objRef&&(this._objRef.wireframeLinejoin=e)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}}Rm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Rm)))(t||Rm)}}(),Rm.\u0275cmp=K({type:Rm,selectors:[["th-meshLambertMaterial"]],inputs:{type:"type",color:"color",bumpMap:"bumpMap",bumpScale:"bumpScale",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",emissive:"emissive",emissiveIntensity:"emissiveIntensity",emissiveMap:"emissiveMap",flatShading:"flatShading",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",normalMap:"normalMap",normalMapType:"normalMapType",normalScale:"normalScale",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",specularMap:"specularMap",alphaMap:"alphaMap",envMap:"envMap",combine:"combine",reflectivity:"reflectivity",refractionRatio:"refractionRatio",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",fog:"fog"},features:[oe([{provide:Ei,useExisting:le(()=>Rm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Im extends Ei{getType(){return mR}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set defines(e){this._objRef&&(this._objRef.defines=e)}get defines(){return this._objRef?.defines}set color(e){this._objRef&&(this._objRef.color=Qe(this._objRef.color,e))}get color(){return this._objRef?.color}set matcap(e){this._objRef&&(this._objRef.matcap=e)}get matcap(){return this._objRef?.matcap}set map(e){this._objRef&&(this._objRef.map=e)}get map(){return this._objRef?.map}set bumpMap(e){this._objRef&&(this._objRef.bumpMap=e)}get bumpMap(){return this._objRef?.bumpMap}set bumpScale(e){this._objRef&&(this._objRef.bumpScale=e)}get bumpScale(){return this._objRef?.bumpScale}set normalMap(e){this._objRef&&(this._objRef.normalMap=e)}get normalMap(){return this._objRef?.normalMap}set normalMapType(e){this._objRef&&(this._objRef.normalMapType=e)}get normalMapType(){return this._objRef?.normalMapType}set normalScale(e){this._objRef&&(this._objRef.normalScale=Qe(this._objRef.normalScale,e))}get normalScale(){return this._objRef?.normalScale}set displacementMap(e){this._objRef&&(this._objRef.displacementMap=e)}get displacementMap(){return this._objRef?.displacementMap}set displacementScale(e){this._objRef&&(this._objRef.displacementScale=e)}get displacementScale(){return this._objRef?.displacementScale}set displacementBias(e){this._objRef&&(this._objRef.displacementBias=e)}get displacementBias(){return this._objRef?.displacementBias}set alphaMap(e){this._objRef&&(this._objRef.alphaMap=e)}get alphaMap(){return this._objRef?.alphaMap}set flatShading(e){this._objRef&&(this._objRef.flatShading=e)}get flatShading(){return this._objRef?.flatShading}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}}Im.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Im)))(t||Im)}}(),Im.\u0275cmp=K({type:Im,selectors:[["th-meshMatcapMaterial"]],inputs:{type:"type",defines:"defines",color:"color",matcap:"matcap",map:"map",bumpMap:"bumpMap",bumpScale:"bumpScale",normalMap:"normalMap",normalMapType:"normalMapType",normalScale:"normalScale",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",alphaMap:"alphaMap",flatShading:"flatShading",fog:"fog"},features:[oe([{provide:Ei,useExisting:le(()=>Im)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Dm extends Ei{getType(){return fp}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set bumpMap(e){this._objRef&&(this._objRef.bumpMap=e)}get bumpMap(){return this._objRef?.bumpMap}set bumpScale(e){this._objRef&&(this._objRef.bumpScale=e)}get bumpScale(){return this._objRef?.bumpScale}set normalMap(e){this._objRef&&(this._objRef.normalMap=e)}get normalMap(){return this._objRef?.normalMap}set normalMapType(e){this._objRef&&(this._objRef.normalMapType=e)}get normalMapType(){return this._objRef?.normalMapType}set normalScale(e){this._objRef&&(this._objRef.normalScale=Qe(this._objRef.normalScale,e))}get normalScale(){return this._objRef?.normalScale}set displacementMap(e){this._objRef&&(this._objRef.displacementMap=e)}get displacementMap(){return this._objRef?.displacementMap}set displacementScale(e){this._objRef&&(this._objRef.displacementScale=e)}get displacementScale(){return this._objRef?.displacementScale}set displacementBias(e){this._objRef&&(this._objRef.displacementBias=e)}get displacementBias(){return this._objRef?.displacementBias}set wireframe(e){this._objRef&&(this._objRef.wireframe=e)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(e){this._objRef&&(this._objRef.wireframeLinewidth=e)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set flatShading(e){this._objRef&&(this._objRef.flatShading=e)}get flatShading(){return this._objRef?.flatShading}}Dm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Dm)))(t||Dm)}}(),Dm.\u0275cmp=K({type:Dm,selectors:[["th-meshNormalMaterial"]],inputs:{type:"type",bumpMap:"bumpMap",bumpScale:"bumpScale",normalMap:"normalMap",normalMapType:"normalMapType",normalScale:"normalScale",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",flatShading:"flatShading"},features:[oe([{provide:Ei,useExisting:le(()=>Dm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Ul extends Ei{getType(){return Na}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set defines(e){this._objRef&&(this._objRef.defines=e)}get defines(){return this._objRef?.defines}set color(e){this._objRef&&(this._objRef.color=Qe(this._objRef.color,e))}get color(){return this._objRef?.color}set roughness(e){this._objRef&&(this._objRef.roughness=e)}get roughness(){return this._objRef?.roughness}set metalness(e){this._objRef&&(this._objRef.metalness=e)}get metalness(){return this._objRef?.metalness}set map(e){this._objRef&&(this._objRef.map=e)}get map(){return this._objRef?.map}set lightMap(e){this._objRef&&(this._objRef.lightMap=e)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(e){this._objRef&&(this._objRef.lightMapIntensity=e)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set aoMap(e){this._objRef&&(this._objRef.aoMap=e)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(e){this._objRef&&(this._objRef.aoMapIntensity=e)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set emissive(e){this._objRef&&(this._objRef.emissive=Qe(this._objRef.emissive,e))}get emissive(){return this._objRef?.emissive}set emissiveIntensity(e){this._objRef&&(this._objRef.emissiveIntensity=e)}get emissiveIntensity(){return this._objRef?.emissiveIntensity}set emissiveMap(e){this._objRef&&(this._objRef.emissiveMap=e)}get emissiveMap(){return this._objRef?.emissiveMap}set bumpMap(e){this._objRef&&(this._objRef.bumpMap=e)}get bumpMap(){return this._objRef?.bumpMap}set bumpScale(e){this._objRef&&(this._objRef.bumpScale=e)}get bumpScale(){return this._objRef?.bumpScale}set normalMap(e){this._objRef&&(this._objRef.normalMap=e)}get normalMap(){return this._objRef?.normalMap}set normalMapType(e){this._objRef&&(this._objRef.normalMapType=e)}get normalMapType(){return this._objRef?.normalMapType}set normalScale(e){this._objRef&&(this._objRef.normalScale=Qe(this._objRef.normalScale,e))}get normalScale(){return this._objRef?.normalScale}set displacementMap(e){this._objRef&&(this._objRef.displacementMap=e)}get displacementMap(){return this._objRef?.displacementMap}set displacementScale(e){this._objRef&&(this._objRef.displacementScale=e)}get displacementScale(){return this._objRef?.displacementScale}set displacementBias(e){this._objRef&&(this._objRef.displacementBias=e)}get displacementBias(){return this._objRef?.displacementBias}set roughnessMap(e){this._objRef&&(this._objRef.roughnessMap=e)}get roughnessMap(){return this._objRef?.roughnessMap}set metalnessMap(e){this._objRef&&(this._objRef.metalnessMap=e)}get metalnessMap(){return this._objRef?.metalnessMap}set alphaMap(e){this._objRef&&(this._objRef.alphaMap=e)}get alphaMap(){return this._objRef?.alphaMap}set envMap(e){this._objRef&&(this._objRef.envMap=e)}get envMap(){return this._objRef?.envMap}set envMapIntensity(e){this._objRef&&(this._objRef.envMapIntensity=e)}get envMapIntensity(){return this._objRef?.envMapIntensity}set wireframe(e){this._objRef&&(this._objRef.wireframe=e)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(e){this._objRef&&(this._objRef.wireframeLinewidth=e)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(e){this._objRef&&(this._objRef.wireframeLinecap=e)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(e){this._objRef&&(this._objRef.wireframeLinejoin=e)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set flatShading(e){this._objRef&&(this._objRef.flatShading=e)}get flatShading(){return this._objRef?.flatShading}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}set isMeshStandardMaterial(e){this._objRef&&(this._objRef.isMeshStandardMaterial=e)}get isMeshStandardMaterial(){return this._objRef?.isMeshStandardMaterial}}Ul.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Ul)))(t||Ul)}}(),Ul.\u0275cmp=K({type:Ul,selectors:[["th-meshStandardMaterial"]],inputs:{type:"type",defines:"defines",color:"color",roughness:"roughness",metalness:"metalness",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",emissive:"emissive",emissiveIntensity:"emissiveIntensity",emissiveMap:"emissiveMap",bumpMap:"bumpMap",bumpScale:"bumpScale",normalMap:"normalMap",normalMapType:"normalMapType",normalScale:"normalScale",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",roughnessMap:"roughnessMap",metalnessMap:"metalnessMap",alphaMap:"alphaMap",envMap:"envMap",envMapIntensity:"envMapIntensity",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",flatShading:"flatShading",fog:"fog",isMeshStandardMaterial:"isMeshStandardMaterial"},features:[oe([{provide:Ei,useExisting:le(()=>Ul)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Pm extends Ul{getType(){return ja}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set defines(e){this._objRef&&(this._objRef.defines=e)}get defines(){return this._objRef?.defines}set clearcoat(e){this._objRef&&(this._objRef.clearcoat=e)}get clearcoat(){return this._objRef?.clearcoat}set clearcoatMap(e){this._objRef&&(this._objRef.clearcoatMap=e)}get clearcoatMap(){return this._objRef?.clearcoatMap}set clearcoatRoughness(e){this._objRef&&(this._objRef.clearcoatRoughness=e)}get clearcoatRoughness(){return this._objRef?.clearcoatRoughness}set clearcoatRoughnessMap(e){this._objRef&&(this._objRef.clearcoatRoughnessMap=e)}get clearcoatRoughnessMap(){return this._objRef?.clearcoatRoughnessMap}set clearcoatNormalScale(e){this._objRef&&(this._objRef.clearcoatNormalScale=Qe(this._objRef.clearcoatNormalScale,e))}get clearcoatNormalScale(){return this._objRef?.clearcoatNormalScale}set clearcoatNormalMap(e){this._objRef&&(this._objRef.clearcoatNormalMap=e)}get clearcoatNormalMap(){return this._objRef?.clearcoatNormalMap}set reflectivity(e){this._objRef&&(this._objRef.reflectivity=e)}get reflectivity(){return this._objRef?.reflectivity}set ior(e){this._objRef&&(this._objRef.ior=e)}get ior(){return this._objRef?.ior}set sheen(e){this._objRef&&(this._objRef.sheen=e)}get sheen(){return this._objRef?.sheen}set sheenColor(e){this._objRef&&(this._objRef.sheenColor=Qe(this._objRef.sheenColor,e))}get sheenColor(){return this._objRef?.sheenColor}set sheenColorMap(e){this._objRef&&(this._objRef.sheenColorMap=e)}get sheenColorMap(){return this._objRef?.sheenColorMap}set sheenRoughness(e){this._objRef&&(this._objRef.sheenRoughness=e)}get sheenRoughness(){return this._objRef?.sheenRoughness}set sheenRoughnessMap(e){this._objRef&&(this._objRef.sheenRoughnessMap=e)}get sheenRoughnessMap(){return this._objRef?.sheenRoughnessMap}set transmission(e){this._objRef&&(this._objRef.transmission=e)}get transmission(){return this._objRef?.transmission}set transmissionMap(e){this._objRef&&(this._objRef.transmissionMap=e)}get transmissionMap(){return this._objRef?.transmissionMap}set thickness(e){this._objRef&&(this._objRef.thickness=e)}get thickness(){return this._objRef?.thickness}set thicknessMap(e){this._objRef&&(this._objRef.thicknessMap=e)}get thicknessMap(){return this._objRef?.thicknessMap}set attenuationDistance(e){this._objRef&&(this._objRef.attenuationDistance=e)}get attenuationDistance(){return this._objRef?.attenuationDistance}set attenuationColor(e){this._objRef&&(this._objRef.attenuationColor=Qe(this._objRef.attenuationColor,e))}get attenuationColor(){return this._objRef?.attenuationColor}set specularIntensity(e){this._objRef&&(this._objRef.specularIntensity=e)}get specularIntensity(){return this._objRef?.specularIntensity}set specularColor(e){this._objRef&&(this._objRef.specularColor=Qe(this._objRef.specularColor,e))}get specularColor(){return this._objRef?.specularColor}set specularIntensityMap(e){this._objRef&&(this._objRef.specularIntensityMap=e)}get specularIntensityMap(){return this._objRef?.specularIntensityMap}set specularColorMap(e){this._objRef&&(this._objRef.specularColorMap=e)}get specularColorMap(){return this._objRef?.specularColorMap}set iridescenceMap(e){this._objRef&&(this._objRef.iridescenceMap=e)}get iridescenceMap(){return this._objRef?.iridescenceMap}set iridescenceIOR(e){this._objRef&&(this._objRef.iridescenceIOR=e)}get iridescenceIOR(){return this._objRef?.iridescenceIOR}set iridescence(e){this._objRef&&(this._objRef.iridescence=e)}get iridescence(){return this._objRef?.iridescence}set iridescenceThicknessRange(e){this._objRef&&(this._objRef.iridescenceThicknessRange=e)}get iridescenceThicknessRange(){return this._objRef?.iridescenceThicknessRange}set iridescenceThicknessMap(e){this._objRef&&(this._objRef.iridescenceThicknessMap=e)}get iridescenceThicknessMap(){return this._objRef?.iridescenceThicknessMap}}Pm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Pm)))(t||Pm)}}(),Pm.\u0275cmp=K({type:Pm,selectors:[["th-meshPhysicalMaterial"]],inputs:{type:"type",defines:"defines",clearcoat:"clearcoat",clearcoatMap:"clearcoatMap",clearcoatRoughness:"clearcoatRoughness",clearcoatRoughnessMap:"clearcoatRoughnessMap",clearcoatNormalScale:"clearcoatNormalScale",clearcoatNormalMap:"clearcoatNormalMap",reflectivity:"reflectivity",ior:"ior",sheen:"sheen",sheenColor:"sheenColor",sheenColorMap:"sheenColorMap",sheenRoughness:"sheenRoughness",sheenRoughnessMap:"sheenRoughnessMap",transmission:"transmission",transmissionMap:"transmissionMap",thickness:"thickness",thicknessMap:"thicknessMap",attenuationDistance:"attenuationDistance",attenuationColor:"attenuationColor",specularIntensity:"specularIntensity",specularColor:"specularColor",specularIntensityMap:"specularIntensityMap",specularColorMap:"specularColorMap",iridescenceMap:"iridescenceMap",iridescenceIOR:"iridescenceIOR",iridescence:"iridescence",iridescenceThicknessRange:"iridescenceThicknessRange",iridescenceThicknessMap:"iridescenceThicknessMap"},features:[oe([{provide:Ei,useExisting:le(()=>Pm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class km extends Ei{getType(){return pR}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set defines(e){this._objRef&&(this._objRef.defines=e)}get defines(){return this._objRef?.defines}set color(e){this._objRef&&(this._objRef.color=Qe(this._objRef.color,e))}get color(){return this._objRef?.color}set gradientMap(e){this._objRef&&(this._objRef.gradientMap=e)}get gradientMap(){return this._objRef?.gradientMap}set map(e){this._objRef&&(this._objRef.map=e)}get map(){return this._objRef?.map}set lightMap(e){this._objRef&&(this._objRef.lightMap=e)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(e){this._objRef&&(this._objRef.lightMapIntensity=e)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set aoMap(e){this._objRef&&(this._objRef.aoMap=e)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(e){this._objRef&&(this._objRef.aoMapIntensity=e)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set emissive(e){this._objRef&&(this._objRef.emissive=Qe(this._objRef.emissive,e))}get emissive(){return this._objRef?.emissive}set emissiveIntensity(e){this._objRef&&(this._objRef.emissiveIntensity=e)}get emissiveIntensity(){return this._objRef?.emissiveIntensity}set emissiveMap(e){this._objRef&&(this._objRef.emissiveMap=e)}get emissiveMap(){return this._objRef?.emissiveMap}set bumpMap(e){this._objRef&&(this._objRef.bumpMap=e)}get bumpMap(){return this._objRef?.bumpMap}set bumpScale(e){this._objRef&&(this._objRef.bumpScale=e)}get bumpScale(){return this._objRef?.bumpScale}set normalMap(e){this._objRef&&(this._objRef.normalMap=e)}get normalMap(){return this._objRef?.normalMap}set normalMapType(e){this._objRef&&(this._objRef.normalMapType=e)}get normalMapType(){return this._objRef?.normalMapType}set normalScale(e){this._objRef&&(this._objRef.normalScale=Qe(this._objRef.normalScale,e))}get normalScale(){return this._objRef?.normalScale}set displacementMap(e){this._objRef&&(this._objRef.displacementMap=e)}get displacementMap(){return this._objRef?.displacementMap}set displacementScale(e){this._objRef&&(this._objRef.displacementScale=e)}get displacementScale(){return this._objRef?.displacementScale}set displacementBias(e){this._objRef&&(this._objRef.displacementBias=e)}get displacementBias(){return this._objRef?.displacementBias}set alphaMap(e){this._objRef&&(this._objRef.alphaMap=e)}get alphaMap(){return this._objRef?.alphaMap}set wireframe(e){this._objRef&&(this._objRef.wireframe=e)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(e){this._objRef&&(this._objRef.wireframeLinewidth=e)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(e){this._objRef&&(this._objRef.wireframeLinecap=e)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(e){this._objRef&&(this._objRef.wireframeLinejoin=e)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}}km.\u0275fac=function(){let i;return function(t){return(i||(i=ce(km)))(t||km)}}(),km.\u0275cmp=K({type:km,selectors:[["th-meshToonMaterial"]],inputs:{type:"type",defines:"defines",color:"color",gradientMap:"gradientMap",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",emissive:"emissive",emissiveIntensity:"emissiveIntensity",emissiveMap:"emissiveMap",bumpMap:"bumpMap",bumpScale:"bumpScale",normalMap:"normalMap",normalMapType:"normalMapType",normalScale:"normalScale",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",alphaMap:"alphaMap",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",fog:"fog"},features:[oe([{provide:Ei,useExisting:le(()=>km)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Lm extends Xa{getType(){return ra}get type(){return this._objRef?.type}}Lm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Lm)))(t||Lm)}}(),Lm.\u0275cmp=K({type:Lm,selectors:[["th-octahedronGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>Lm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Zu extends Cs{getType(){return La}get isOrthographicCamera(){return this._objRef?.isOrthographicCamera}get type(){return this._objRef?.type}set zoom(e){this._objRef&&(this._objRef.zoom=e)}get zoom(){return this._objRef?.zoom}set view(e){this._objRef&&(this._objRef.view=e)}get view(){return this._objRef?.view}set left(e){this._objRef&&(this._objRef.left=e)}get left(){return this._objRef?.left}set right(e){this._objRef&&(this._objRef.right=e)}get right(){return this._objRef?.right}set top(e){this._objRef&&(this._objRef.top=e)}get top(){return this._objRef?.top}set bottom(e){this._objRef&&(this._objRef.bottom=e)}get bottom(){return this._objRef?.bottom}set near(e){this._objRef&&(this._objRef.near=e)}get near(){return this._objRef?.near}set far(e){this._objRef&&(this._objRef.far=e)}get far(){return this._objRef?.far}}Zu.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Zu)))(t||Zu)}}(),Zu.\u0275cmp=K({type:Zu,selectors:[["th-orthographicCamera"]],inputs:{zoom:"zoom",view:"view",left:"left",right:"right",top:"top",bottom:"bottom",near:"near",far:"far"},features:[oe([{provide:Ke,useExisting:le(()=>Zu)},{provide:Cs,useExisting:le(()=>Zu)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Uc extends wn{constructor(e,t,n,r){super(),this.renderScene=t,this.renderCamera=n,this.selectedObjects=void 0!==r?r:[],this.visibleEdgeColor=new Be(1,1,1),this.hiddenEdgeColor=new Be(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=void 0!==e?new pe(e.x,e.y):new pe(256,256);const s=Math.round(this.resolution.x/this.downSampleRatio),o=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new Gt(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new Zd,this.depthMaterial.side=bs,this.depthMaterial.depthPacking=X_,this.depthMaterial.blending=Xt,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=bs,this.prepareMaskMaterial.fragmentShader=function d(u,h){return u.replace(/DEPTH_TO_VIEW_Z/g,(h.isPerspectiveCamera?"perspective":"orthographic")+"DepthToViewZ")}(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new Gt(this.resolution.x,this.resolution.y),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new Gt(s,o),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new Gt(s,o),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new Gt(Math.round(s/2),Math.round(o/2)),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new Gt(s,o),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new Gt(Math.round(s/2),Math.round(o/2)),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1,this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value.set(s,o),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(s/2),Math.round(o/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial();const c=Wr;this.copyUniforms=mi.clone(c.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new Dt({uniforms:this.copyUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,blending:Xt,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Be,this.oldClearAlpha=1,this.fsQuad=new yr(null),this.tempPulseColor1=new Be,this.tempPulseColor2=new Be,this.textureMatrix=new We}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}setSize(e,t){this.renderTargetMaskBuffer.setSize(e,t),this.renderTargetDepthBuffer.setSize(e,t);let n=Math.round(e/this.downSampleRatio),r=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(n,r),this.renderTargetBlurBuffer1.setSize(n,r),this.renderTargetEdgeBuffer1.setSize(n,r),this.separableBlurMaterial1.uniforms.texSize.value.set(n,r),n=Math.round(n/2),r=Math.round(r/2),this.renderTargetBlurBuffer2.setSize(n,r),this.renderTargetEdgeBuffer2.setSize(n,r),this.separableBlurMaterial2.uniforms.texSize.value.set(n,r)}changeVisibilityOfSelectedObjects(e){const t=this._visibilityCache;function n(r){r.isMesh&&(!0===e?r.visible=t.get(r):(t.set(r,r.visible),r.visible=e))}for(let r=0;r<this.selectedObjects.length;r++)this.selectedObjects[r].traverse(n)}changeVisibilityOfNonSelectedObjects(e){const t=this._visibilityCache,n=[];function r(o){o.isMesh&&n.push(o)}for(let o=0;o<this.selectedObjects.length;o++)this.selectedObjects[o].traverse(r);this.renderScene.traverse(function s(o){if(o.isMesh||o.isSprite){let a=!1;for(let l=0;l<n.length;l++)if(n[l].id===o.id){a=!0;break}if(!1===a){const l=o.visible;(!1===e||!0===t.get(o))&&(o.visible=e),t.set(o,l)}}else(o.isPoints||o.isLine)&&(!0===e?o.visible=t.get(o):(t.set(o,o.visible),o.visible=e))})}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(e,t,n,r,s){if(this.selectedObjects.length>0){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const o=e.autoClear;e.autoClear=!1,s&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const a=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=a,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const l=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(l),this.tempPulseColor2.multiplyScalar(l)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Uc.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Uc.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=Uc.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=Uc.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,s&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(n),this.fsQuad.render(e),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=o}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=n.texture,e.setRenderTarget(null),this.fsQuad.render(e))}getPrepareMaskMaterial(){return new Dt({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new pe(.5,.5)},textureMatrix:{value:null}},vertexShader:"#include <morphtarget_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tuniform mat4 textureMatrix;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <morphtarget_vertex>\n\t\t\t\t\t#include <skinning_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t\tvPosition = mvPosition;\n\n\t\t\t\t\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t\t\t\t\t#ifdef USE_INSTANCING\n\n\t\t\t\t\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t\t\t\t\t#endif\n\t\t\t\t\t\n\t\t\t\t\tworldPosition = modelMatrix * worldPosition;\n\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n\n\t\t\t\t}",fragmentShader:"#include <packing>\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 cameraNearFar;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n\t\t\t\t\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\n\n\t\t\t\t}"})}getEdgeDetectionMaterial(){return new Dt({uniforms:{maskTexture:{value:null},texSize:{value:new pe(.5,.5)},visibleEdgeColor:{value:new R(1,1,1)},hiddenEdgeColor:{value:new R(1,1,1)}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec3 visibleEdgeColor;\n\t\t\t\tuniform vec3 hiddenEdgeColor;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\n\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\n\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\n\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\n\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\n\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\n\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\n\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\n\t\t\t\t}"})}getSeperableBlurMaterial(e){return new Dt({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new pe(.5,.5)},direction:{value:new pe(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float kernelRadius;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat sigma = kernelRadius/2.0;\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, sigma);\n\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\n\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n\t\t\t\t\tvec2 uvOffset = delta;\n\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = kernelRadius * float(i) / float(MAX_RADIUS);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, sigma);\n\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\n\t\t\t\t\t\tweightSum += (2.0 * w);\n\t\t\t\t\t\tuvOffset += delta;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}"})}getOverlayMaterial(){return new Dt({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform sampler2D edgeTexture1;\n\t\t\t\tuniform sampler2D edgeTexture2;\n\t\t\t\tuniform sampler2D patternTexture;\n\t\t\t\tuniform float edgeStrength;\n\t\t\t\tuniform float edgeGlow;\n\t\t\t\tuniform bool usePatternTexture;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\n\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\n\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\n\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n\t\t\t\t\tif(usePatternTexture)\n\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\n\t\t\t\t\tgl_FragColor = finalColor;\n\t\t\t\t}",blending:uf,depthTest:!1,depthWrite:!1,transparent:!0})}}Uc.BlurDirectionX=new pe(1,0),Uc.BlurDirectionY=new pe(0,1);class Ku extends Wi{getType(){return Uc}set renderScene(e){this._objRef&&(this._objRef.renderScene=e)}get renderScene(){return this._objRef?.renderScene}set renderCamera(e){this._objRef&&(this._objRef.renderCamera=e)}get renderCamera(){return this._objRef?.renderCamera}set selectedObjects(e){this._objRef&&(this._objRef.selectedObjects=e)}get selectedObjects(){return this._objRef?.selectedObjects}set visibleEdgeColor(e){this._objRef&&(this._objRef.visibleEdgeColor=Qe(this._objRef.visibleEdgeColor,e))}get visibleEdgeColor(){return this._objRef?.visibleEdgeColor}set hiddenEdgeColor(e){this._objRef&&(this._objRef.hiddenEdgeColor=Qe(this._objRef.hiddenEdgeColor,e))}get hiddenEdgeColor(){return this._objRef?.hiddenEdgeColor}set edgeGlow(e){this._objRef&&(this._objRef.edgeGlow=e)}get edgeGlow(){return this._objRef?.edgeGlow}set usePatternTexture(e){this._objRef&&(this._objRef.usePatternTexture=e)}get usePatternTexture(){return this._objRef?.usePatternTexture}set edgeThickness(e){this._objRef&&(this._objRef.edgeThickness=e)}get edgeThickness(){return this._objRef?.edgeThickness}set edgeStrength(e){this._objRef&&(this._objRef.edgeStrength=e)}get edgeStrength(){return this._objRef?.edgeStrength}set downSampleRatio(e){this._objRef&&(this._objRef.downSampleRatio=e)}get downSampleRatio(){return this._objRef?.downSampleRatio}set pulsePeriod(e){this._objRef&&(this._objRef.pulsePeriod=e)}get pulsePeriod(){return this._objRef?.pulsePeriod}set resolution(e){this._objRef&&(this._objRef.resolution=Qe(this._objRef.resolution,e))}get resolution(){return this._objRef?.resolution}set patternTexture(e){this._objRef&&(this._objRef.patternTexture=e)}get patternTexture(){return this._objRef?.patternTexture}set maskBufferMaterial(e){this._objRef&&(this._objRef.maskBufferMaterial=e)}get maskBufferMaterial(){return this._objRef?.maskBufferMaterial}set renderTargetMaskBuffer(e){this._objRef&&(this._objRef.renderTargetMaskBuffer=e)}get renderTargetMaskBuffer(){return this._objRef?.renderTargetMaskBuffer}set depthMaterial(e){this._objRef&&(this._objRef.depthMaterial=e)}get depthMaterial(){return this._objRef?.depthMaterial}set prepareMaskMaterial(e){this._objRef&&(this._objRef.prepareMaskMaterial=e)}get prepareMaskMaterial(){return this._objRef?.prepareMaskMaterial}set renderTargetDepthBuffer(e){this._objRef&&(this._objRef.renderTargetDepthBuffer=e)}get renderTargetDepthBuffer(){return this._objRef?.renderTargetDepthBuffer}set renderTargetMaskDownSampleBuffer(e){this._objRef&&(this._objRef.renderTargetMaskDownSampleBuffer=e)}get renderTargetMaskDownSampleBuffer(){return this._objRef?.renderTargetMaskDownSampleBuffer}set renderTargetBlurBuffer1(e){this._objRef&&(this._objRef.renderTargetBlurBuffer1=e)}get renderTargetBlurBuffer1(){return this._objRef?.renderTargetBlurBuffer1}set renderTargetBlurBuffer2(e){this._objRef&&(this._objRef.renderTargetBlurBuffer2=e)}get renderTargetBlurBuffer2(){return this._objRef?.renderTargetBlurBuffer2}set edgeDetectionMaterial(e){this._objRef&&(this._objRef.edgeDetectionMaterial=e)}get edgeDetectionMaterial(){return this._objRef?.edgeDetectionMaterial}set renderTargetEdgeBuffer1(e){this._objRef&&(this._objRef.renderTargetEdgeBuffer1=e)}get renderTargetEdgeBuffer1(){return this._objRef?.renderTargetEdgeBuffer1}set renderTargetEdgeBuffer2(e){this._objRef&&(this._objRef.renderTargetEdgeBuffer2=e)}get renderTargetEdgeBuffer2(){return this._objRef?.renderTargetEdgeBuffer2}set separableBlurMaterial1(e){this._objRef&&(this._objRef.separableBlurMaterial1=e)}get separableBlurMaterial1(){return this._objRef?.separableBlurMaterial1}set separableBlurMaterial2(e){this._objRef&&(this._objRef.separableBlurMaterial2=e)}get separableBlurMaterial2(){return this._objRef?.separableBlurMaterial2}set overlayMaterial(e){this._objRef&&(this._objRef.overlayMaterial=e)}get overlayMaterial(){return this._objRef?.overlayMaterial}set copyUniforms(e){this._objRef&&(this._objRef.copyUniforms=e)}get copyUniforms(){return this._objRef?.copyUniforms}set materialCopy(e){this._objRef&&(this._objRef.materialCopy=e)}get materialCopy(){return this._objRef?.materialCopy}set oldClearColor(e){this._objRef&&(this._objRef.oldClearColor=Qe(this._objRef.oldClearColor,e))}get oldClearColor(){return this._objRef?.oldClearColor}set oldClearAlpha(e){this._objRef&&(this._objRef.oldClearAlpha=e)}get oldClearAlpha(){return this._objRef?.oldClearAlpha}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set tempPulseColor1(e){this._objRef&&(this._objRef.tempPulseColor1=Qe(this._objRef.tempPulseColor1,e))}get tempPulseColor1(){return this._objRef?.tempPulseColor1}set tempPulseColor2(e){this._objRef&&(this._objRef.tempPulseColor2=Qe(this._objRef.tempPulseColor2,e))}get tempPulseColor2(){return this._objRef?.tempPulseColor2}set textureMatrix(e){this._objRef&&(this._objRef.textureMatrix=Qe(this._objRef.textureMatrix,e))}get textureMatrix(){return this._objRef?.textureMatrix}}Ku.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Ku)))(t||Ku)}}(),Ku.\u0275cmp=K({type:Ku,selectors:[["th-outlinePass"]],inputs:{renderScene:"renderScene",renderCamera:"renderCamera",selectedObjects:"selectedObjects",visibleEdgeColor:"visibleEdgeColor",hiddenEdgeColor:"hiddenEdgeColor",edgeGlow:"edgeGlow",usePatternTexture:"usePatternTexture",edgeThickness:"edgeThickness",edgeStrength:"edgeStrength",downSampleRatio:"downSampleRatio",pulsePeriod:"pulsePeriod",resolution:"resolution",patternTexture:"patternTexture",maskBufferMaterial:"maskBufferMaterial",renderTargetMaskBuffer:"renderTargetMaskBuffer",depthMaterial:"depthMaterial",prepareMaskMaterial:"prepareMaskMaterial",renderTargetDepthBuffer:"renderTargetDepthBuffer",renderTargetMaskDownSampleBuffer:"renderTargetMaskDownSampleBuffer",renderTargetBlurBuffer1:"renderTargetBlurBuffer1",renderTargetBlurBuffer2:"renderTargetBlurBuffer2",edgeDetectionMaterial:"edgeDetectionMaterial",renderTargetEdgeBuffer1:"renderTargetEdgeBuffer1",renderTargetEdgeBuffer2:"renderTargetEdgeBuffer2",separableBlurMaterial1:"separableBlurMaterial1",separableBlurMaterial2:"separableBlurMaterial2",overlayMaterial:"overlayMaterial",copyUniforms:"copyUniforms",materialCopy:"materialCopy",oldClearColor:"oldClearColor",oldClearAlpha:"oldClearAlpha",fsQuad:"fsQuad",tempPulseColor1:"tempPulseColor1",tempPulseColor2:"tempPulseColor2",textureMatrix:"textureMatrix"},features:[oe([{provide:Li,useExisting:le(()=>Ku)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class nbe extends Mt{constructor(e=((r,s,o)=>o.set(r,s,Math.cos(r)*Math.sin(s))),t=8,n=8){super(),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n};const r=[],s=[],o=[],a=[],l=1e-5,c=new R,d=new R,u=new R,h=new R,f=new R,m=t+1;for(let g=0;g<=n;g++){const _=g/n;for(let p=0;p<=t;p++){const v=p/t;e(v,_,d),s.push(d.x,d.y,d.z),v-l>=0?(e(v-l,_,u),h.subVectors(d,u)):(e(v+l,_,u),h.subVectors(u,d)),_-l>=0?(e(v,_-l,u),f.subVectors(d,u)):(e(v,_+l,u),f.subVectors(u,d)),c.crossVectors(h,f).normalize(),o.push(c.x,c.y,c.z),a.push(v,_)}}for(let g=0;g<n;g++)for(let _=0;_<t;_++){const v=g*m+_+1,b=(g+1)*m+_+1,y=(g+1)*m+_;r.push(g*m+_,v,y),r.push(v,b,y)}this.setIndex(r),this.setAttribute("position",new Ze(s,3)),this.setAttribute("normal",new Ze(o,3)),this.setAttribute("uv",new Ze(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Bm extends Tt{getType(){return nbe}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set parameters(e){this._objRef&&(this._objRef.parameters=e)}get parameters(){return this._objRef?.parameters}}Bm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Bm)))(t||Bm)}}(),Bm.\u0275cmp=K({type:Bm,selectors:[["th-parametricGeometry"]],inputs:{type:"type",parameters:"parameters"},features:[oe([{provide:Tt,useExisting:le(()=>Bm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Fm extends Ms{getType(){return d5}get type(){return this._objRef?.type}set plane(e){this._objRef&&(this._objRef.plane=Qe(this._objRef.plane,e))}get plane(){return this._objRef?.plane}set size(e){this._objRef&&(this._objRef.size=e)}get size(){return this._objRef?.size}}Fm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Fm)))(t||Fm)}}(),Fm.\u0275cmp=K({type:Fm,selectors:[["th-planeHelper"]],inputs:{plane:"plane",size:"size"},features:[oe([{provide:Ke,useExisting:le(()=>Fm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const Om=new Js(0,0,0,"YXZ"),Nm=new R,obe={type:"change"},abe={type:"lock"},lbe={type:"unlock"},wG=Math.PI/2;class cbe extends ns{constructor(e,t){super(),this.camera=e,this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,this._onMouseMove=dbe.bind(this),this._onPointerlockChange=ube.bind(this),this._onPointerlockError=hbe.bind(this),this.connect()}connect(){this.domElement.ownerDocument.addEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this._onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this._onPointerlockError)}dispose(){this.disconnect()}getObject(){return this.camera}getDirection(e){return e.set(0,0,-1).applyQuaternion(this.camera.quaternion)}moveForward(e){const t=this.camera;Nm.setFromMatrixColumn(t.matrix,0),Nm.crossVectors(t.up,Nm),t.position.addScaledVector(Nm,e)}moveRight(e){const t=this.camera;Nm.setFromMatrixColumn(t.matrix,0),t.position.addScaledVector(Nm,e)}lock(){this.domElement.requestPointerLock()}unlock(){this.domElement.ownerDocument.exitPointerLock()}}function dbe(i){if(!1===this.isLocked)return;const e=i.movementX||i.mozMovementX||i.webkitMovementX||0,t=i.movementY||i.mozMovementY||i.webkitMovementY||0,n=this.camera;Om.setFromQuaternion(n.quaternion),Om.y-=.002*e*this.pointerSpeed,Om.x-=.002*t*this.pointerSpeed,Om.x=Math.max(wG-this.maxPolarAngle,Math.min(wG-this.minPolarAngle,Om.x)),n.quaternion.setFromEuler(Om),this.dispatchEvent(obe)}function ube(){this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(abe),this.isLocked=!0):(this.dispatchEvent(lbe),this.isLocked=!1)}function hbe(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}class jm extends Qn{getType(){return cbe}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set domElement(e){this._objRef&&(this._objRef.domElement=e)}get domElement(){return this._objRef?.domElement}set isLocked(e){this._objRef&&(this._objRef.isLocked=e)}get isLocked(){return this._objRef?.isLocked}set minPolarAngle(e){this._objRef&&(this._objRef.minPolarAngle=e)}get minPolarAngle(){return this._objRef?.minPolarAngle}set maxPolarAngle(e){this._objRef&&(this._objRef.maxPolarAngle=e)}get maxPolarAngle(){return this._objRef?.maxPolarAngle}set pointerSpeed(e){this._objRef&&(this._objRef.pointerSpeed=e)}get pointerSpeed(){return this._objRef?.pointerSpeed}}jm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(jm)))(t||jm)}}(),jm.\u0275cmp=K({type:jm,selectors:[["th-pointerLockControls"]],inputs:{camera:"camera",domElement:"domElement",isLocked:"isLocked",minPolarAngle:"minPolarAngle",maxPolarAngle:"maxPolarAngle",pointerSpeed:"pointerSpeed"},features:[oe([{provide:Qn,useExisting:le(()=>jm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Um extends Ke{getType(){return $4}get type(){return this._objRef?.type}set light(e){this._objRef&&(this._objRef.light=e)}get light(){return this._objRef?.light}set matrix(e){this._objRef&&(this._objRef.matrix=Qe(this._objRef.matrix,e))}get matrix(){return this._objRef?.matrix}set color(e){this._objRef&&(this._objRef.color=e)}get color(){return this._objRef?.color}set matrixAutoUpdate(e){this._objRef&&(this._objRef.matrixAutoUpdate=e)}get matrixAutoUpdate(){return this._objRef?.matrixAutoUpdate}}Um.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Um)))(t||Um)}}(),Um.\u0275cmp=K({type:Um,selectors:[["th-pointLightHelper"]],inputs:{light:"light",matrix:"matrix",color:"color",matrixAutoUpdate:"matrixAutoUpdate"},features:[oe([{provide:Ke,useExisting:le(()=>Um)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Vm extends Ke{getType(){return $d}get isPoints(){return this._objRef?.isPoints}get type(){return this._objRef?.type}set morphTargetInfluences(e){this._objRef&&(this._objRef.morphTargetInfluences=e)}get morphTargetInfluences(){return this._objRef?.morphTargetInfluences}set morphTargetDictionary(e){this._objRef&&(this._objRef.morphTargetDictionary=e)}get morphTargetDictionary(){return this._objRef?.morphTargetDictionary}set geometry(e){this._objRef&&(this._objRef.geometry=e)}get geometry(){return this._objRef?.geometry}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}}Vm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Vm)))(t||Vm)}}(),Vm.\u0275cmp=K({type:Vm,selectors:[["th-points"]],inputs:{morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary",geometry:"geometry",material:"material"},features:[oe([{provide:Ke,useExisting:le(()=>Vm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class zm extends Ei{getType(){return Tl}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set color(e){this._objRef&&(this._objRef.color=Qe(this._objRef.color,e))}get color(){return this._objRef?.color}set map(e){this._objRef&&(this._objRef.map=e)}get map(){return this._objRef?.map}set alphaMap(e){this._objRef&&(this._objRef.alphaMap=e)}get alphaMap(){return this._objRef?.alphaMap}set size(e){this._objRef&&(this._objRef.size=e)}get size(){return this._objRef?.size}set sizeAttenuation(e){this._objRef&&(this._objRef.sizeAttenuation=e)}get sizeAttenuation(){return this._objRef?.sizeAttenuation}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}}zm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(zm)))(t||zm)}}(),zm.\u0275cmp=K({type:zm,selectors:[["th-pointsMaterial"]],inputs:{type:"type",color:"color",map:"map",alphaMap:"alphaMap",size:"size",sizeAttenuation:"sizeAttenuation",fog:"fog"},features:[oe([{provide:Ei,useExisting:le(()=>zm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Gm extends Ms{getType(){return n5}get type(){return this._objRef?.type}}Gm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Gm)))(t||Gm)}}(),Gm.\u0275cmp=K({type:Gm,selectors:[["th-polarGridHelper"]],features:[oe([{provide:Ke,useExisting:le(()=>Gm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Hm extends Fu{getType(){return U4}set panner(e){this._objRef&&(this._objRef.panner=e)}get panner(){return this._objRef?.panner}}Hm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Hm)))(t||Hm)}}(),Hm.\u0275cmp=K({type:Hm,selectors:[["th-positionalAudio"]],inputs:{panner:"panner"},features:[oe([{provide:Ke,useExisting:le(()=>Hm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Vc extends Ei{getType(){return Dt}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set defines(e){this._objRef&&(this._objRef.defines=e)}get defines(){return this._objRef?.defines}set uniforms(e){this._objRef&&(this._objRef.uniforms=e)}get uniforms(){return this._objRef?.uniforms}set vertexShader(e){this._objRef&&(this._objRef.vertexShader=e)}get vertexShader(){return this._objRef?.vertexShader}set fragmentShader(e){this._objRef&&(this._objRef.fragmentShader=e)}get fragmentShader(){return this._objRef?.fragmentShader}set linewidth(e){this._objRef&&(this._objRef.linewidth=e)}get linewidth(){return this._objRef?.linewidth}set wireframe(e){this._objRef&&(this._objRef.wireframe=e)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(e){this._objRef&&(this._objRef.wireframeLinewidth=e)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}set lights(e){this._objRef&&(this._objRef.lights=e)}get lights(){return this._objRef?.lights}set clipping(e){this._objRef&&(this._objRef.clipping=e)}get clipping(){return this._objRef?.clipping}set derivatives(e){this._objRef&&(this._objRef.derivatives=e)}get derivatives(){return this._objRef?.derivatives}set extensions(e){this._objRef&&(this._objRef.extensions=e)}get extensions(){return this._objRef?.extensions}set defaultAttributeValues(e){this._objRef&&(this._objRef.defaultAttributeValues=e)}get defaultAttributeValues(){return this._objRef?.defaultAttributeValues}set index0AttributeName(e){this._objRef&&(this._objRef.index0AttributeName=e)}get index0AttributeName(){return this._objRef?.index0AttributeName}set uniformsNeedUpdate(e){this._objRef&&(this._objRef.uniformsNeedUpdate=e)}get uniformsNeedUpdate(){return this._objRef?.uniformsNeedUpdate}set glslVersion(e){this._objRef&&(this._objRef.glslVersion=e)}get glslVersion(){return this._objRef?.glslVersion}set isShaderMaterial(e){this._objRef&&(this._objRef.isShaderMaterial=e)}get isShaderMaterial(){return this._objRef?.isShaderMaterial}}Vc.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Vc)))(t||Vc)}}(),Vc.\u0275cmp=K({type:Vc,selectors:[["th-shaderMaterial"]],inputs:{type:"type",defines:"defines",uniforms:"uniforms",vertexShader:"vertexShader",fragmentShader:"fragmentShader",linewidth:"linewidth",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",fog:"fog",lights:"lights",clipping:"clipping",derivatives:"derivatives",extensions:"extensions",defaultAttributeValues:"defaultAttributeValues",index0AttributeName:"index0AttributeName",uniformsNeedUpdate:"uniformsNeedUpdate",glslVersion:"glslVersion",isShaderMaterial:"isShaderMaterial"},features:[oe([{provide:Ei,useExisting:le(()=>Vc)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Qm extends Vc{getType(){return fR}}Qm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Qm)))(t||Qm)}}(),Qm.\u0275cmp=K({type:Qm,selectors:[["th-rawShaderMaterial"]],features:[oe([{provide:Ei,useExisting:le(()=>Qm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Wm extends no{getType(){return SR}get isRectAreaLight(){return this._objRef?.isRectAreaLight}get type(){return this._objRef?.type}set width(e){this._objRef&&(this._objRef.width=e)}get width(){return this._objRef?.width}set height(e){this._objRef&&(this._objRef.height=e)}get height(){return this._objRef?.height}set intensity(e){this._objRef&&(this._objRef.intensity=e)}get intensity(){return this._objRef?.intensity}set power(e){this._objRef&&(this._objRef.power=e)}get power(){return this._objRef?.power}}Wm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Wm)))(t||Wm)}}(),Wm.\u0275cmp=K({type:Wm,selectors:[["th-rectAreaLight"]],inputs:{width:"width",height:"height",intensity:"intensity",power:"power"},features:[oe([{provide:Ke,useExisting:le(()=>Wm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class qm extends Tt{getType(){return lp}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}}qm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(qm)))(t||qm)}}(),qm.\u0275cmp=K({type:qm,selectors:[["th-ringGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>qm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const b0=new R;function No(i,e,t,n,r,s){const o=2*Math.PI*r/4,a=Math.max(s-2*r,0),l=Math.PI/4;b0.copy(e),b0[n]=0,b0.normalize();const c=.5*o/(o+a),d=1-b0.angleTo(i)/l;return 1===Math.sign(b0[t])?d*c:a/(o+a)+c+c*(1-d)}class wbe extends Ji{constructor(e=1,t=1,n=1,r=2,s=.1){if(r=2*r+1,s=Math.min(e/2,t/2,n/2,s),super(1,1,1,r,r,r),1===r)return;const o=this.toNonIndexed();this.index=null,this.attributes.position=o.attributes.position,this.attributes.normal=o.attributes.normal,this.attributes.uv=o.attributes.uv;const a=new R,l=new R,c=new R(e,t,n).divideScalar(2).subScalar(s),d=this.attributes.position.array,u=this.attributes.normal.array,h=this.attributes.uv.array,f=d.length/6,m=new R,g=.5/r;for(let _=0,p=0;_<d.length;_+=3,p+=2)switch(a.fromArray(d,_),l.copy(a),l.x-=Math.sign(l.x)*g,l.y-=Math.sign(l.y)*g,l.z-=Math.sign(l.z)*g,l.normalize(),d[_+0]=c.x*Math.sign(a.x)+l.x*s,d[_+1]=c.y*Math.sign(a.y)+l.y*s,d[_+2]=c.z*Math.sign(a.z)+l.z*s,u[_+0]=l.x,u[_+1]=l.y,u[_+2]=l.z,Math.floor(_/f)){case 0:m.set(1,0,0),h[p+0]=No(m,l,"z","y",s,n),h[p+1]=1-No(m,l,"y","z",s,t);break;case 1:m.set(-1,0,0),h[p+0]=1-No(m,l,"z","y",s,n),h[p+1]=1-No(m,l,"y","z",s,t);break;case 2:m.set(0,1,0),h[p+0]=1-No(m,l,"x","z",s,e),h[p+1]=No(m,l,"z","x",s,n);break;case 3:m.set(0,-1,0),h[p+0]=1-No(m,l,"x","z",s,e),h[p+1]=1-No(m,l,"z","x",s,n);break;case 4:m.set(0,0,1),h[p+0]=1-No(m,l,"x","y",s,e),h[p+1]=1-No(m,l,"y","x",s,t);break;case 5:m.set(0,0,-1),h[p+0]=No(m,l,"x","y",s,e),h[p+1]=1-No(m,l,"y","x",s,t)}}}class Ym extends za{getType(){return wbe}}Ym.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Ym)))(t||Ym)}}(),Ym.\u0275cmp=K({type:Ym,selectors:[["th-roundedBoxGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>Ym)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const Lw={defines:{NUM_SAMPLES:7,NUM_RINGS:4,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:0,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new pe(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new We},cameraInverseProjectionMatrix:{value:new We},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\n\t\tvarying vec2 vUv;\n\n\t\t#if DIFFUSE_TEXTURE == 1\n\t\tuniform sampler2D tDiffuse;\n\t\t#endif\n\n\t\tuniform sampler2D tDepth;\n\n\t\t#if NORMAL_TEXTURE == 1\n\t\tuniform sampler2D tNormal;\n\t\t#endif\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform mat4 cameraProjectionMatrix;\n\t\tuniform mat4 cameraInverseProjectionMatrix;\n\n\t\tuniform float scale;\n\t\tuniform float intensity;\n\t\tuniform float bias;\n\t\tuniform float kernelRadius;\n\t\tuniform float minResolution;\n\t\tuniform vec2 size;\n\t\tuniform float randomSeed;\n\n\t\t// RGBA depth\n\n\t\t#include <packing>\n\n\t\tvec4 getDefaultColor( const in vec2 screenPosition ) {\n\t\t\t#if DIFFUSE_TEXTURE == 1\n\t\t\treturn texture2D( tDiffuse, vUv );\n\t\t\t#else\n\t\t\treturn vec4( 1.0 );\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\t\t\t#if DEPTH_PACKING == 1\n\t\t\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\n\t\t\t#else\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#else\n\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#endif\n\t\t}\n\n\t\tvec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\n\t\t\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\n\t\t\tclipPosition *= clipW; // unprojection.\n\n\t\t\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\n\t\t}\n\n\t\tvec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {\n\t\t\t#if NORMAL_TEXTURE == 1\n\t\t\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\n\t\t\t#else\n\t\t\treturn normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );\n\t\t\t#endif\n\t\t}\n\n\t\tfloat scaleDividedByCameraFar;\n\t\tfloat minResolutionMultipliedByCameraFar;\n\n\t\tfloat getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {\n\t\t\tvec3 viewDelta = sampleViewPosition - centerViewPosition;\n\t\t\tfloat viewDistance = length( viewDelta );\n\t\t\tfloat scaledScreenDistance = scaleDividedByCameraFar * viewDistance;\n\n\t\t\treturn max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );\n\t\t}\n\n\t\t// moving costly divides into consts\n\t\tconst float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );\n\t\tconst float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );\n\n\t\tfloat getAmbientOcclusion( const in vec3 centerViewPosition ) {\n\t\t\t// precompute some variables require in getOcclusion.\n\t\t\tscaleDividedByCameraFar = scale / cameraFar;\n\t\t\tminResolutionMultipliedByCameraFar = minResolution * cameraFar;\n\t\t\tvec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );\n\n\t\t\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\n\t\t\tfloat angle = rand( vUv + randomSeed ) * PI2;\n\t\t\tvec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;\n\t\t\tvec2 radiusStep = radius;\n\n\t\t\tfloat occlusionSum = 0.0;\n\t\t\tfloat weightSum = 0.0;\n\n\t\t\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {\n\t\t\t\tvec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;\n\t\t\t\tradius += radiusStep;\n\t\t\t\tangle += ANGLE_STEP;\n\n\t\t\t\tfloat sampleDepth = getDepth( sampleUv );\n\t\t\t\tif( sampleDepth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfloat sampleViewZ = getViewZ( sampleDepth );\n\t\t\t\tvec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );\n\t\t\t\tocclusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );\n\t\t\t\tweightSum += 1.0;\n\t\t\t}\n\n\t\t\tif( weightSum == 0.0 ) discard;\n\n\t\t\treturn occlusionSum * ( intensity / weightSum );\n\t\t}\n\n\t\tvoid main() {\n\t\t\tfloat centerDepth = getDepth( vUv );\n\t\t\tif( centerDepth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\tdiscard;\n\t\t\t}\n\n\t\t\tfloat centerViewZ = getViewZ( centerDepth );\n\t\t\tvec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );\n\n\t\t\tfloat ambientOcclusion = getAmbientOcclusion( viewPosition );\n\n\t\t\tgl_FragColor = getDefaultColor( vUv );\n\t\t\tgl_FragColor.xyz *=  1.0 - ambientOcclusion;\n\t\t}"},zc={defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new pe(512,512)},sampleUvOffsets:{value:[new pe(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1e3},depthCutoff:{value:10}},vertexShader:"\n\n\t\t#include <common>\n\n\t\tuniform vec2 size;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec2 vInvSize;\n\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tvInvSize = 1.0 / size;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\t\t#include <packing>\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tDepth;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform float depthCutoff;\n\n\t\tuniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];\n\t\tuniform float sampleWeights[ KERNEL_RADIUS + 1 ];\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec2 vInvSize;\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\t\t\t#if DEPTH_PACKING == 1\n\t\t\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\n\t\t\t#else\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#else\n\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#endif\n\t\t}\n\n\t\tvoid main() {\n\t\t\tfloat depth = getDepth( vUv );\n\t\t\tif( depth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\tdiscard;\n\t\t\t}\n\n\t\t\tfloat centerViewZ = -getViewZ( depth );\n\t\t\tbool rBreak = false, lBreak = false;\n\n\t\t\tfloat weightSum = sampleWeights[0];\n\t\t\tvec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;\n\n\t\t\tfor( int i = 1; i <= KERNEL_RADIUS; i ++ ) {\n\n\t\t\t\tfloat sampleWeight = sampleWeights[i];\n\t\t\t\tvec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;\n\n\t\t\t\tvec2 sampleUv = vUv + sampleUvOffset;\n\t\t\t\tfloat viewZ = -getViewZ( getDepth( sampleUv ) );\n\n\t\t\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;\n\n\t\t\t\tif( ! rBreak ) {\n\t\t\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\n\t\t\t\t\tweightSum += sampleWeight;\n\t\t\t\t}\n\n\t\t\t\tsampleUv = vUv - sampleUvOffset;\n\t\t\t\tviewZ = -getViewZ( getDepth( sampleUv ) );\n\n\t\t\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;\n\n\t\t\t\tif( ! lBreak ) {\n\t\t\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\n\t\t\t\t\tweightSum += sampleWeight;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgl_FragColor = diffuseSum / weightSum;\n\t\t}"},Bw={createSampleWeights:function(i,e){const t=[];for(let n=0;n<=i;n++)t.push(Mbe(n,e));return t},createSampleOffsets:function(i,e){const t=[];for(let n=0;n<=i;n++)t.push(e.clone().multiplyScalar(n));return t},configure:function(i,e,t,n){i.defines.KERNEL_RADIUS=e,i.uniforms.sampleUvOffsets.value=Bw.createSampleOffsets(e,n),i.uniforms.sampleWeights.value=Bw.createSampleWeights(e,t),i.needsUpdate=!0}};function Mbe(i,e){return Math.exp(-i*i/(e*e*2))/(Math.sqrt(2*Math.PI)*e)}const nD_uniforms={tDiffuse:{value:null},opacity:{value:1}},nD_vertexShader="\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",nD_fragmentShader="\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );\n\t\t\tgl_FragColor = vec4( vec3( depth ), opacity );\n\n\t\t}";let CG=(()=>{class i extends wn{constructor(t,n,r=!1,s=!1,o=new pe(256,256)){let a;super(),this.scene=t,this.camera=n,this.clear=!0,this.needsSwap=!1,this.supportsDepthTextureExtension=r,this.supportsNormalTexture=s,this.originalClearColor=new Be,this._oldClearColor=new Be,this.oldClearAlpha=1,this.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},this.resolution=new pe(o.x,o.y),this.saoRenderTarget=new Gt(this.resolution.x,this.resolution.y),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone(),this.beautyRenderTarget=this.saoRenderTarget.clone(),this.normalRenderTarget=new Gt(this.resolution.x,this.resolution.y,{minFilter:Zt,magFilter:Zt}),this.depthRenderTarget=this.normalRenderTarget.clone(),this.supportsDepthTextureExtension&&(a=new qf,a.type=G_,this.beautyRenderTarget.depthTexture=a,this.beautyRenderTarget.depthBuffer=!0),this.depthMaterial=new Zd,this.depthMaterial.depthPacking=X_,this.depthMaterial.blending=Xt,this.normalMaterial=new fp,this.normalMaterial.blending=Xt,this.saoMaterial=new Dt({defines:Object.assign({},Lw.defines),fragmentShader:Lw.fragmentShader,vertexShader:Lw.vertexShader,uniforms:mi.clone(Lw.uniforms)}),this.saoMaterial.extensions.derivatives=!0,this.saoMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.saoMaterial.defines.NORMAL_TEXTURE=this.supportsNormalTexture?1:0,this.saoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?a:this.depthRenderTarget.texture,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.blending=Xt,this.vBlurMaterial=new Dt({uniforms:mi.clone(zc.uniforms),defines:Object.assign({},zc.defines),vertexShader:zc.vertexShader,fragmentShader:zc.fragmentShader}),this.vBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.vBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?a:this.depthRenderTarget.texture,this.vBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=Xt,this.hBlurMaterial=new Dt({uniforms:mi.clone(zc.uniforms),defines:Object.assign({},zc.defines),vertexShader:zc.vertexShader,fragmentShader:zc.fragmentShader}),this.hBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.hBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms.tDiffuse.value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?a:this.depthRenderTarget.texture,this.hBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=Xt,this.materialCopy=new Dt({uniforms:mi.clone(Wr.uniforms),vertexShader:Wr.vertexShader,fragmentShader:Wr.fragmentShader,blending:Xt}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=hf,this.materialCopy.blendSrc=oy,this.materialCopy.blendDst=ff,this.materialCopy.blendEquation=vs,this.materialCopy.blendSrcAlpha=sy,this.materialCopy.blendDstAlpha=ff,this.materialCopy.blendEquationAlpha=vs,this.depthCopy=new Dt({uniforms:mi.clone(nD_uniforms),vertexShader:nD_vertexShader,fragmentShader:nD_fragmentShader,blending:Xt}),this.fsQuad=new yr(null)}render(t,n,r){if(this.renderToScreen&&(this.materialCopy.blending=Xt,this.materialCopy.uniforms.tDiffuse.value=r.texture,this.materialCopy.needsUpdate=!0,this.renderPass(t,this.materialCopy,null)),1===this.params.output)return;t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();const s=t.autoClear;t.autoClear=!1,t.setRenderTarget(this.depthRenderTarget),t.clear(),this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;const o=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);this.vBlurMaterial.uniforms.depthCutoff.value=o,this.hBlurMaterial.uniforms.depthCutoff.value=o,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),(this.prevStdDev!==this.params.saoBlurStdDev||this.prevNumSamples!==this.params.saoBlurRadius)&&(Bw.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new pe(0,1)),Bw.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new pe(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),t.setClearColor(0),t.setRenderTarget(this.beautyRenderTarget),t.clear(),t.render(this.scene,this.camera),this.supportsDepthTextureExtension||this.renderOverride(t,this.depthMaterial,this.depthRenderTarget,0,1),this.supportsNormalTexture&&this.renderOverride(t,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(t,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(t,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(t,this.hBlurMaterial,this.saoRenderTarget,16777215,1));let a=this.materialCopy;3===this.params.output?this.supportsDepthTextureExtension?(this.materialCopy.uniforms.tDiffuse.value=this.beautyRenderTarget.depthTexture,this.materialCopy.needsUpdate=!0):(this.depthCopy.uniforms.tDiffuse.value=this.depthRenderTarget.texture,this.depthCopy.needsUpdate=!0,a=this.depthCopy):4===this.params.output?(this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),a.blending=0===this.params.output?hf:Xt,this.renderPass(t,a,this.renderToScreen?null:r),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=s}renderPass(t,n,r,s,o){t.getClearColor(this.originalClearColor);const a=t.getClearAlpha(),l=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,null!=s&&(t.setClearColor(s),t.setClearAlpha(o||0),t.clear()),this.fsQuad.material=n,this.fsQuad.render(t),t.autoClear=l,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}renderOverride(t,n,r,s,o){t.getClearColor(this.originalClearColor);const a=t.getClearAlpha(),l=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,o=n.clearAlpha||o,null!=(s=n.clearColor||s)&&(t.setClearColor(s),t.setClearAlpha(o||0),t.clear()),this.scene.overrideMaterial=n,t.render(this.scene,this.camera),this.scene.overrideMaterial=null,t.autoClear=l,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}setSize(t,n){this.beautyRenderTarget.setSize(t,n),this.saoRenderTarget.setSize(t,n),this.blurIntermediateRenderTarget.setSize(t,n),this.normalRenderTarget.setSize(t,n),this.depthRenderTarget.setSize(t,n),this.saoMaterial.uniforms.size.value.set(t,n),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(t,n),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(t,n),this.hBlurMaterial.needsUpdate=!0}dispose(){this.saoRenderTarget.dispose(),this.blurIntermediateRenderTarget.dispose(),this.beautyRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.depthRenderTarget.dispose(),this.depthMaterial.dispose(),this.normalMaterial.dispose(),this.saoMaterial.dispose(),this.vBlurMaterial.dispose(),this.hBlurMaterial.dispose(),this.materialCopy.dispose(),this.depthCopy.dispose(),this.fsQuad.dispose()}}return i.OUTPUT={Beauty:1,Default:0,SAO:2,Depth:3,Normal:4},i})();class $u extends Wi{getType(){return CG}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set supportsDepthTextureExtension(e){this._objRef&&(this._objRef.supportsDepthTextureExtension=e)}get supportsDepthTextureExtension(){return this._objRef?.supportsDepthTextureExtension}set supportsNormalTexture(e){this._objRef&&(this._objRef.supportsNormalTexture=e)}get supportsNormalTexture(){return this._objRef?.supportsNormalTexture}set originalClearColor(e){this._objRef&&(this._objRef.originalClearColor=Qe(this._objRef.originalClearColor,e))}get originalClearColor(){return this._objRef?.originalClearColor}set oldClearColor(e){this._objRef&&(this._objRef.oldClearColor=Qe(this._objRef.oldClearColor,e))}get oldClearColor(){return this._objRef?.oldClearColor}set oldClearAlpha(e){this._objRef&&(this._objRef.oldClearAlpha=e)}get oldClearAlpha(){return this._objRef?.oldClearAlpha}set resolution(e){this._objRef&&(this._objRef.resolution=Qe(this._objRef.resolution,e))}get resolution(){return this._objRef?.resolution}set saoRenderTarget(e){this._objRef&&(this._objRef.saoRenderTarget=e)}get saoRenderTarget(){return this._objRef?.saoRenderTarget}set blurIntermediateRenderTarget(e){this._objRef&&(this._objRef.blurIntermediateRenderTarget=e)}get blurIntermediateRenderTarget(){return this._objRef?.blurIntermediateRenderTarget}set beautyRenderTarget(e){this._objRef&&(this._objRef.beautyRenderTarget=e)}get beautyRenderTarget(){return this._objRef?.beautyRenderTarget}set normalRenderTarget(e){this._objRef&&(this._objRef.normalRenderTarget=e)}get normalRenderTarget(){return this._objRef?.normalRenderTarget}set depthRenderTarget(e){this._objRef&&(this._objRef.depthRenderTarget=e)}get depthRenderTarget(){return this._objRef?.depthRenderTarget}set depthMaterial(e){this._objRef&&(this._objRef.depthMaterial=e)}get depthMaterial(){return this._objRef?.depthMaterial}set normalMaterial(e){this._objRef&&(this._objRef.normalMaterial=e)}get normalMaterial(){return this._objRef?.normalMaterial}set saoMaterial(e){this._objRef&&(this._objRef.saoMaterial=e)}get saoMaterial(){return this._objRef?.saoMaterial}set vBlurMaterial(e){this._objRef&&(this._objRef.vBlurMaterial=e)}get vBlurMaterial(){return this._objRef?.vBlurMaterial}set hBlurMaterial(e){this._objRef&&(this._objRef.hBlurMaterial=e)}get hBlurMaterial(){return this._objRef?.hBlurMaterial}set materialCopy(e){this._objRef&&(this._objRef.materialCopy=e)}get materialCopy(){return this._objRef?.materialCopy}set depthCopy(e){this._objRef&&(this._objRef.depthCopy=e)}get depthCopy(){return this._objRef?.depthCopy}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set params(e){this._objRef&&(this._objRef.params=e)}get params(){return this._objRef?.params}}$u.OUTPUT=CG.OUTPUT,$u.\u0275fac=function(){let i;return function(t){return(i||(i=ce($u)))(t||$u)}}(),$u.\u0275cmp=K({type:$u,selectors:[["th-sAOPass"]],inputs:{scene:"scene",camera:"camera",supportsDepthTextureExtension:"supportsDepthTextureExtension",supportsNormalTexture:"supportsNormalTexture",originalClearColor:"originalClearColor",oldClearColor:"oldClearColor",oldClearAlpha:"oldClearAlpha",resolution:"resolution",saoRenderTarget:"saoRenderTarget",blurIntermediateRenderTarget:"blurIntermediateRenderTarget",beautyRenderTarget:"beautyRenderTarget",normalRenderTarget:"normalRenderTarget",depthRenderTarget:"depthRenderTarget",depthMaterial:"depthMaterial",normalMaterial:"normalMaterial",saoMaterial:"saoMaterial",vBlurMaterial:"vBlurMaterial",hBlurMaterial:"hBlurMaterial",materialCopy:"materialCopy",depthCopy:"depthCopy",fsQuad:"fsQuad",params:"params"},features:[oe([{provide:Li,useExisting:le(()=>$u)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Sbe extends wn{constructor(e){super();const t=Wr;this.textureID="tDiffuse",this.uniforms=mi.clone(t.uniforms),this.material=new Dt({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.renderTarget=e,void 0===this.renderTarget&&(this.renderTarget=new Gt,this.renderTarget.texture.name="SavePass.rt"),this.needsSwap=!1,this.fsQuad=new yr(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),e.setRenderTarget(this.renderTarget),this.clear&&e.clear(),this.fsQuad.render(e)}setSize(e,t){this.renderTarget.setSize(e,t)}dispose(){this.renderTarget.dispose(),this.material.dispose(),this.fsQuad.dispose()}}class Xm extends Wi{getType(){return Sbe}set textureID(e){this._objRef&&(this._objRef.textureID=e)}get textureID(){return this._objRef?.textureID}set renderTarget(e){this._objRef&&(this._objRef.renderTarget=e)}get renderTarget(){return this._objRef?.renderTarget}set uniforms(e){this._objRef&&Object.assign(this._objRef.uniforms,e)}get uniforms(){return this._objRef?.uniforms}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}}Xm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Xm)))(t||Xm)}}(),Xm.\u0275cmp=K({type:Xm,selectors:[["th-savePass"]],inputs:{textureID:"textureID",renderTarget:"renderTarget",uniforms:"uniforms",material:"material",fsQuad:"fsQuad"},features:[oe([{provide:Li,useExisting:le(()=>Xm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Zm extends Ei{getType(){return hR}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set color(e){this._objRef&&(this._objRef.color=Qe(this._objRef.color,e))}get color(){return this._objRef?.color}set transparent(e){this._objRef&&(this._objRef.transparent=e)}get transparent(){return this._objRef?.transparent}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}}Zm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Zm)))(t||Zm)}}(),Zm.\u0275cmp=K({type:Zm,selectors:[["th-shadowMaterial"]],inputs:{type:"type",color:"color",transparent:"transparent",fog:"fog"},features:[oe([{provide:Ei,useExisting:le(()=>Zm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Km extends Tt{getType(){return cp}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}}Km.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Km)))(t||Km)}}(),Km.\u0275cmp=K({type:Km,selectors:[["th-shapeGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>Km)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class $m extends Ms{getType(){return Z4}get type(){return this._objRef?.type}set bones(e){this._objRef&&(this._objRef.bones=e)}get bones(){return this._objRef?.bones}set root(e){this._objRef&&(this._objRef.root=e)}get root(){return this._objRef?.root}set matrix(e){this._objRef&&(this._objRef.matrix=Qe(this._objRef.matrix,e))}get matrix(){return this._objRef?.matrix}set matrixAutoUpdate(e){this._objRef&&(this._objRef.matrixAutoUpdate=e)}get matrixAutoUpdate(){return this._objRef?.matrixAutoUpdate}}$m.\u0275fac=function(){let i;return function(t){return(i||(i=ce($m)))(t||$m)}}(),$m.\u0275cmp=K({type:$m,selectors:[["th-skeletonHelper"]],inputs:{bones:"bones",root:"root",matrix:"matrix",matrixAutoUpdate:"matrixAutoUpdate"},features:[oe([{provide:Ke,useExisting:le(()=>$m)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Jm extends Hn{getType(){return fb}get isSkinnedMesh(){return this._objRef?.isSkinnedMesh}get type(){return this._objRef?.type}set bindMode(e){this._objRef&&(this._objRef.bindMode=e)}get bindMode(){return this._objRef?.bindMode}set bindMatrix(e){this._objRef&&(this._objRef.bindMatrix=Qe(this._objRef.bindMatrix,e))}get bindMatrix(){return this._objRef?.bindMatrix}set bindMatrixInverse(e){this._objRef&&(this._objRef.bindMatrixInverse=Qe(this._objRef.bindMatrixInverse,e))}get bindMatrixInverse(){return this._objRef?.bindMatrixInverse}set boundingBox(e){this._objRef&&(this._objRef.boundingBox=Qe(this._objRef.boundingBox,e))}get boundingBox(){return this._objRef?.boundingBox}set boundingSphere(e){this._objRef&&(this._objRef.boundingSphere=Qe(this._objRef.boundingSphere,e))}get boundingSphere(){return this._objRef?.boundingSphere}set skeleton(e){this._objRef&&(this._objRef.skeleton=e)}get skeleton(){return this._objRef?.skeleton}}Jm.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Jm)))(t||Jm)}}(),Jm.\u0275cmp=K({type:Jm,selectors:[["th-skinnedMesh"]],inputs:{bindMode:"bindMode",bindMatrix:"bindMatrix",bindMatrixInverse:"bindMatrixInverse",boundingBox:"boundingBox",boundingSphere:"boundingSphere",skeleton:"skeleton"},features:[oe([{provide:Ke,useExisting:le(()=>Jm)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const Fw={defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new pe(1/1024,1/512)}},vertexShader:"\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 3 ];\n\n\t\tvoid SMAAEdgeDetectionVS( vec2 texcoord ) {\n\t\t\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 ); // WebGL port note: Changed sign in W component\n\t\t\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component\n\t\t\tvOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 ); // WebGL port note: Changed sign in W component\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tSMAAEdgeDetectionVS( vUv );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 3 ];\n\n\t\tvec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {\n\t\t\tvec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );\n\n\t\t\t// Calculate color deltas:\n\t\t\tvec4 delta;\n\t\t\tvec3 C = texture2D( colorTex, texcoord ).rgb;\n\n\t\t\tvec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;\n\t\t\tvec3 t = abs( C - Cleft );\n\t\t\tdelta.x = max( max( t.r, t.g ), t.b );\n\n\t\t\tvec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;\n\t\t\tt = abs( C - Ctop );\n\t\t\tdelta.y = max( max( t.r, t.g ), t.b );\n\n\t\t\t// We do the usual threshold:\n\t\t\tvec2 edges = step( threshold, delta.xy );\n\n\t\t\t// Then discard if there is no edge:\n\t\t\tif ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )\n\t\t\t\tdiscard;\n\n\t\t\t// Calculate right and bottom deltas:\n\t\t\tvec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;\n\t\t\tt = abs( C - Cright );\n\t\t\tdelta.z = max( max( t.r, t.g ), t.b );\n\n\t\t\tvec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;\n\t\t\tt = abs( C - Cbottom );\n\t\t\tdelta.w = max( max( t.r, t.g ), t.b );\n\n\t\t\t// Calculate the maximum delta in the direct neighborhood:\n\t\t\tfloat maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );\n\n\t\t\t// Calculate left-left and top-top deltas:\n\t\t\tvec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;\n\t\t\tt = abs( C - Cleftleft );\n\t\t\tdelta.z = max( max( t.r, t.g ), t.b );\n\n\t\t\tvec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;\n\t\t\tt = abs( C - Ctoptop );\n\t\t\tdelta.w = max( max( t.r, t.g ), t.b );\n\n\t\t\t// Calculate the final maximum delta:\n\t\t\tmaxDelta = max( max( maxDelta, delta.z ), delta.w );\n\n\t\t\t// Local contrast adaptation in action:\n\t\t\tedges.xy *= step( 0.5 * maxDelta, delta.xy );\n\n\t\t\treturn vec4( edges, 0.0, 0.0 );\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );\n\n\t\t}"},Ow={defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},uniforms:{tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new pe(1/1024,1/512)}},vertexShader:"\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 3 ];\n\t\tvarying vec2 vPixcoord;\n\n\t\tvoid SMAABlendingWeightCalculationVS( vec2 texcoord ) {\n\t\t\tvPixcoord = texcoord / resolution;\n\n\t\t\t// We will use these offsets for the searches later on (see @PSEUDO_GATHER4):\n\t\t\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 ); // WebGL port note: Changed sign in Y and W components\n\t\t\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 ); // WebGL port note: Changed sign in Y and W components\n\n\t\t\t// And these for the searches, they indicate the ends of the loops:\n\t\t\tvOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tSMAABlendingWeightCalculationVS( vUv );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\t#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tArea;\n\t\tuniform sampler2D tSearch;\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[3];\n\t\tvarying vec2 vPixcoord;\n\n\t\t#if __VERSION__ == 100\n\t\tvec2 round( vec2 x ) {\n\t\t\treturn sign( x ) * floor( abs( x ) + 0.5 );\n\t\t}\n\t\t#endif\n\n\t\tfloat SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {\n\t\t\t// Not required if searchTex accesses are set to point:\n\t\t\t// float2 SEARCH_TEX_PIXEL_SIZE = 1.0 / float2(66.0, 33.0);\n\t\t\t// e = float2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE +\n\t\t\t//     e * float2(scale, 1.0) * float2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;\n\t\t\te.r = bias + e.r * scale;\n\t\t\treturn 255.0 * texture2D( searchTex, e, 0.0 ).r;\n\t\t}\n\n\t\tfloat SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\t/**\n\t\t\t\t* @PSEUDO_GATHER4\n\t\t\t\t* This texcoord has been offset by (-0.25, -0.125) in the vertex shader to\n\t\t\t\t* sample between edge, thus fetching four edges in a row.\n\t\t\t\t* Sampling with different offsets in each direction allows to disambiguate\n\t\t\t\t* which edges are active from the four fetched ones.\n\t\t\t\t*/\n\t\t\tvec2 e = vec2( 0.0, 1.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord -= vec2( 2.0, 0.0 ) * resolution;\n\t\t\t\tif ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\t// We correct the previous (-0.25, -0.125) offset we applied:\n\t\t\ttexcoord.x += 0.25 * resolution.x;\n\n\t\t\t// The searches are bias by 1, so adjust the coords accordingly:\n\t\t\ttexcoord.x += resolution.x;\n\n\t\t\t// Disambiguate the length added by the last step:\n\t\t\ttexcoord.x += 2.0 * resolution.x; // Undo last step\n\t\t\ttexcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);\n\n\t\t\treturn texcoord.x;\n\t\t}\n\n\t\tfloat SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\tvec2 e = vec2( 0.0, 1.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord += vec2( 2.0, 0.0 ) * resolution;\n\t\t\t\tif ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\ttexcoord.x -= 0.25 * resolution.x;\n\t\t\ttexcoord.x -= resolution.x;\n\t\t\ttexcoord.x -= 2.0 * resolution.x;\n\t\t\ttexcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );\n\n\t\t\treturn texcoord.x;\n\t\t}\n\n\t\tfloat SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\tvec2 e = vec2( 1.0, 0.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord += vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign\n\t\t\t\tif ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\ttexcoord.y -= 0.25 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y -= resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y -= 2.0 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 ); // WebGL port note: Changed sign\n\n\t\t\treturn texcoord.y;\n\t\t}\n\n\t\tfloat SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\tvec2 e = vec2( 1.0, 0.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord -= vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign\n\t\t\t\tif ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\ttexcoord.y += 0.25 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y += resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y += 2.0 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 ); // WebGL port note: Changed sign\n\n\t\t\treturn texcoord.y;\n\t\t}\n\n\t\tvec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {\n\t\t\t// Rounding prevents precision errors of bilinear filtering:\n\t\t\tvec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;\n\n\t\t\t// We do a scale and bias for mapping to texel space:\n\t\t\ttexcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );\n\n\t\t\t// Move to proper place, according to the subpixel offset:\n\t\t\ttexcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;\n\n\t\t\treturn texture2D( areaTex, texcoord, 0.0 ).rg;\n\t\t}\n\n\t\tvec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {\n\t\t\tvec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );\n\n\t\t\tvec2 e = texture2D( edgesTex, texcoord ).rg;\n\n\t\t\tif ( e.g > 0.0 ) { // Edge at north\n\t\t\t\tvec2 d;\n\n\t\t\t\t// Find the distance to the left:\n\t\t\t\tvec2 coords;\n\t\t\t\tcoords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );\n\t\t\t\tcoords.y = offset[ 1 ].y; // offset[1].y = texcoord.y - 0.25 * resolution.y (@CROSSING_OFFSET)\n\t\t\t\td.x = coords.x;\n\n\t\t\t\t// Now fetch the left crossing edges, two at a time using bilinear\n\t\t\t\t// filtering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to\n\t\t\t\t// discern what value each edge has:\n\t\t\t\tfloat e1 = texture2D( edgesTex, coords, 0.0 ).r;\n\n\t\t\t\t// Find the distance to the right:\n\t\t\t\tcoords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );\n\t\t\t\td.y = coords.x;\n\n\t\t\t\t// We want the distances to be in pixel units (doing this here allow to\n\t\t\t\t// better interleave arithmetic and memory accesses):\n\t\t\t\td = d / resolution.x - pixcoord.x;\n\n\t\t\t\t// SMAAArea below needs a sqrt, as the areas texture is compressed\n\t\t\t\t// quadratically:\n\t\t\t\tvec2 sqrt_d = sqrt( abs( d ) );\n\n\t\t\t\t// Fetch the right crossing edges:\n\t\t\t\tcoords.y -= 1.0 * resolution.y; // WebGL port note: Added\n\t\t\t\tfloat e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;\n\n\t\t\t\t// Ok, we know how this pattern looks like, now it is time for getting\n\t\t\t\t// the actual area:\n\t\t\t\tweights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );\n\t\t\t}\n\n\t\t\tif ( e.r > 0.0 ) { // Edge at west\n\t\t\t\tvec2 d;\n\n\t\t\t\t// Find the distance to the top:\n\t\t\t\tvec2 coords;\n\n\t\t\t\tcoords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );\n\t\t\t\tcoords.x = offset[ 0 ].x; // offset[1].x = texcoord.x - 0.25 * resolution.x;\n\t\t\t\td.x = coords.y;\n\n\t\t\t\t// Fetch the top crossing edges:\n\t\t\t\tfloat e1 = texture2D( edgesTex, coords, 0.0 ).g;\n\n\t\t\t\t// Find the distance to the bottom:\n\t\t\t\tcoords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );\n\t\t\t\td.y = coords.y;\n\n\t\t\t\t// We want the distances to be in pixel units:\n\t\t\t\td = d / resolution.y - pixcoord.y;\n\n\t\t\t\t// SMAAArea below needs a sqrt, as the areas texture is compressed\n\t\t\t\t// quadratically:\n\t\t\t\tvec2 sqrt_d = sqrt( abs( d ) );\n\n\t\t\t\t// Fetch the bottom crossing edges:\n\t\t\t\tcoords.y -= 1.0 * resolution.y; // WebGL port note: Added\n\t\t\t\tfloat e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;\n\n\t\t\t\t// Get the area for this direction:\n\t\t\t\tweights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );\n\t\t\t}\n\n\t\t\treturn weights;\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );\n\n\t\t}"},rD={uniforms:{tDiffuse:{value:null},tColor:{value:null},resolution:{value:new pe(1/1024,1/512)}},vertexShader:"\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 2 ];\n\n\t\tvoid SMAANeighborhoodBlendingVS( vec2 texcoord ) {\n\t\t\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 ); // WebGL port note: Changed sign in W component\n\t\t\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tSMAANeighborhoodBlendingVS( vUv );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tColor;\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 2 ];\n\n\t\tvec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {\n\t\t\t// Fetch the blending weights for current pixel:\n\t\t\tvec4 a;\n\t\t\ta.xz = texture2D( blendTex, texcoord ).xz;\n\t\t\ta.y = texture2D( blendTex, offset[ 1 ].zw ).g;\n\t\t\ta.w = texture2D( blendTex, offset[ 1 ].xy ).a;\n\n\t\t\t// Is there any blending weight with a value greater than 0.0?\n\t\t\tif ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {\n\t\t\t\treturn texture2D( colorTex, texcoord, 0.0 );\n\t\t\t} else {\n\t\t\t\t// Up to 4 lines can be crossing a pixel (one through each edge). We\n\t\t\t\t// favor blending by choosing the line with the maximum weight for each\n\t\t\t\t// direction:\n\t\t\t\tvec2 offset;\n\t\t\t\toffset.x = a.a > a.b ? a.a : -a.b; // left vs. right\n\t\t\t\toffset.y = a.g > a.r ? -a.g : a.r; // top vs. bottom // WebGL port note: Changed signs\n\n\t\t\t\t// Then we go in the direction that has the maximum weight:\n\t\t\t\tif ( abs( offset.x ) > abs( offset.y )) { // horizontal vs. vertical\n\t\t\t\t\toffset.y = 0.0;\n\t\t\t\t} else {\n\t\t\t\t\toffset.x = 0.0;\n\t\t\t\t}\n\n\t\t\t\t// Fetch the opposite color and lerp by hand:\n\t\t\t\tvec4 C = texture2D( colorTex, texcoord, 0.0 );\n\t\t\t\ttexcoord += sign( offset ) * resolution;\n\t\t\t\tvec4 Cop = texture2D( colorTex, texcoord, 0.0 );\n\t\t\t\tfloat s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );\n\n\t\t\t\t// WebGL port note: Added gamma correction\n\t\t\t\tC.xyz = pow(C.xyz, vec3(2.2));\n\t\t\t\tCop.xyz = pow(Cop.xyz, vec3(2.2));\n\t\t\t\tvec4 mixed = mix(C, Cop, s);\n\t\t\t\tmixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));\n\n\t\t\t\treturn mixed;\n\t\t\t}\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );\n\n\t\t}"};class kbe extends wn{constructor(e,t){super(),this.edgesRT=new Gt(e,t,{depthBuffer:!1}),this.edgesRT.texture.name="SMAAPass.edges",this.weightsRT=new Gt(e,t,{depthBuffer:!1}),this.weightsRT.texture.name="SMAAPass.weights";const n=this,r=new Image;r.src=this.getAreaTexture(),r.onload=function(){n.areaTexture.needsUpdate=!0},this.areaTexture=new An,this.areaTexture.name="SMAAPass.area",this.areaTexture.image=r,this.areaTexture.minFilter=Ni,this.areaTexture.generateMipmaps=!1,this.areaTexture.flipY=!1;const s=new Image;s.src=this.getSearchTexture(),s.onload=function(){n.searchTexture.needsUpdate=!0},this.searchTexture=new An,this.searchTexture.name="SMAAPass.search",this.searchTexture.image=s,this.searchTexture.magFilter=Zt,this.searchTexture.minFilter=Zt,this.searchTexture.generateMipmaps=!1,this.searchTexture.flipY=!1,this.uniformsEdges=mi.clone(Fw.uniforms),this.uniformsEdges.resolution.value.set(1/e,1/t),this.materialEdges=new Dt({defines:Object.assign({},Fw.defines),uniforms:this.uniformsEdges,vertexShader:Fw.vertexShader,fragmentShader:Fw.fragmentShader}),this.uniformsWeights=mi.clone(Ow.uniforms),this.uniformsWeights.resolution.value.set(1/e,1/t),this.uniformsWeights.tDiffuse.value=this.edgesRT.texture,this.uniformsWeights.tArea.value=this.areaTexture,this.uniformsWeights.tSearch.value=this.searchTexture,this.materialWeights=new Dt({defines:Object.assign({},Ow.defines),uniforms:this.uniformsWeights,vertexShader:Ow.vertexShader,fragmentShader:Ow.fragmentShader}),this.uniformsBlend=mi.clone(rD.uniforms),this.uniformsBlend.resolution.value.set(1/e,1/t),this.uniformsBlend.tDiffuse.value=this.weightsRT.texture,this.materialBlend=new Dt({uniforms:this.uniformsBlend,vertexShader:rD.vertexShader,fragmentShader:rD.fragmentShader}),this.needsSwap=!1,this.fsQuad=new yr(null)}render(e,t,n){this.uniformsEdges.tDiffuse.value=n.texture,this.fsQuad.material=this.materialEdges,e.setRenderTarget(this.edgesRT),this.clear&&e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialWeights,e.setRenderTarget(this.weightsRT),this.clear&&e.clear(),this.fsQuad.render(e),this.uniformsBlend.tColor.value=n.texture,this.fsQuad.material=this.materialBlend,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}setSize(e,t){this.edgesRT.setSize(e,t),this.weightsRT.setSize(e,t),this.materialEdges.uniforms.resolution.value.set(1/e,1/t),this.materialWeights.uniforms.resolution.value.set(1/e,1/t),this.materialBlend.uniforms.resolution.value.set(1/e,1/t)}getAreaTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAIAAACOVPcQAACBeklEQVR42u39W4xlWXrnh/3WWvuciIzMrKxrV8/0rWbY0+SQFKcb4owIkSIFCjY9AC1BT/LYBozRi+EX+cV+8IMsYAaCwRcBwjzMiw2jAWtgwC8WR5Q8mDFHZLNHTarZGrLJJllt1W2qKrsumZWZcTvn7L3W54e1vrXX3vuciLPPORFR1XE2EomorB0nVuz//r71re/y/1eMvb4Cb3N11xV/PP/2v4UBAwJG/7H8urx6/25/Gf8O5hypMQ0EEEQwAqLfoN/Z+97f/SW+/NvcgQk4sGBJK6H7N4PFVL+K+e0N11yNfkKvwUdwdlUAXPHHL38oa15f/i/46Ih6SuMSPmLAYAwyRKn7dfMGH97jaMFBYCJUgotIC2YAdu+LyW9vvubxAP8kAL8H/koAuOKP3+q6+xGnd5kdYCeECnGIJViwGJMAkQKfDvB3WZxjLKGh8VSCCzhwEWBpMc5/kBbjawT4HnwJfhr+pPBIu7uu+OOTo9vsmtQcniMBGkKFd4jDWMSCRUpLjJYNJkM+IRzQ+PQvIeAMTrBS2LEiaiR9b/5PuT6Ap/AcfAFO4Y3dA3DFH7/VS+M8k4baEAQfMI4QfbVDDGIRg7GKaIY52qAjTAgTvGBAPGIIghOCYAUrGFNgzA7Q3QhgCwfwAnwe5vDejgG44o/fbm1C5ZlYQvQDARPAIQGxCWBM+wWl37ZQESb4gImexGMDouhGLx1Cst0Saa4b4AqO4Hk4gxo+3DHAV/nx27p3JziPM2pVgoiia5MdEzCGULprIN7gEEeQ5IQxEBBBQnxhsDb5auGmAAYcHMA9eAAz8PBol8/xij9+C4Djlim4gJjWcwZBhCBgMIIYxGAVIkH3ZtcBuLdtRFMWsPGoY9rN+HoBji9VBYdwD2ZQg4cnO7OSq/z4rU5KKdwVbFAjNojCQzTlCLPFSxtamwh2jMUcEgg2Wm/6XgErIBhBckQtGN3CzbVacERgCnfgLswhnvqf7QyAq/z4rRZm1YglYE3affGITaZsdIe2FmMIpnOCap25I6jt2kCwCW0D1uAD9sZctNGXcQIHCkINDQgc78aCr+zjtw3BU/ijdpw3zhCwcaONwBvdeS2YZKkJNJsMPf2JKEvC28RXxxI0ASJyzQCjCEQrO4Q7sFArEzjZhaFc4cdv+/JFdKULM4px0DfUBI2hIsy06BqLhGTQEVdbfAIZXYMPesq6VoCHICzUyjwInO4Y411//LYLs6TDa9wvg2CC2rElgAnpTBziThxaL22MYhzfkghz6GAs2VHbbdM91VZu1MEEpupMMwKyVTb5ij9+u4VJG/5EgEMMmFF01cFai3isRbKbzb+YaU/MQbAm2XSMoUPAmvZzbuKYRIFApbtlrfFuUGd6vq2hXNnH78ZLh/iFhsQG3T4D1ib7k5CC6vY0DCbtrohgLEIClXiGtl10zc0CnEGIhhatLBva7NP58Tvw0qE8yWhARLQ8h4+AhQSP+I4F5xoU+VilGRJs6wnS7ruti/4KvAY/CfdgqjsMy4pf8fodQO8/gnuX3f/3xi3om1/h7THr+co3x93PP9+FBUfbNUjcjEmhcrkT+8K7ml7V10Jo05mpIEFy1NmCJWx9SIKKt+EjAL4Ez8EBVOB6havuT/rByPvHXK+9zUcfcbb254+9fydJknYnRr1oGfdaiAgpxu1Rx/Rek8KISftx3L+DfsLWAANn8Hvw0/AFeAGO9DFV3c6D+CcWbL8Dj9e7f+T1k8AZv/d7+PXWM/Z+VvdCrIvuAKO09RpEEQJM0Ci6+B4xhTWr4cZNOvhktabw0ta0rSJmqz3Yw5/AKXwenod7cAhTmBSPKf6JBdvH8IP17h95pXqw50/+BFnj88fev4NchyaK47OPhhtI8RFSvAfDSNh0Ck0p2gLxGkib5NJj/JWCr90EWQJvwBzO4AHcgztwAFN1evHPUVGwfXON+0debT1YeGON9Yy9/63X+OguiwmhIhQhD7l4sMqlG3D86Suc3qWZ4rWjI1X7u0Ytw6x3rIMeIOPDprfe2XzNgyj6PahhBjO4C3e6puDgXrdg+/5l948vF3bqwZetZ+z9Rx9zdIY5pInPK4Nk0t+l52xdK2B45Qd87nM8fsD5EfUhIcJcERw4RdqqH7Yde5V7m1vhNmtedkz6EDzUMF/2jJYWbC+4fzzA/Y+/8PPH3j9dcBAPIRP8JLXd5BpAu03aziOL3VVHZzz3CXWDPWd+SH2AnxIqQoTZpo9Ckc6HIrFbAbzNmlcg8Ag8NFDDAhbJvTBZXbC94P7t68EXfv6o+21gUtPETU7bbkLxvNKRFG2+KXzvtObonPP4rBvsgmaKj404DlshFole1Glfh02fE7bYR7dZ82oTewIBGn1Md6CG6YUF26X376oevOLzx95vhUmgblI6LBZwTCDY7vMq0op5WVXgsObOXJ+1x3qaBl9j1FeLxbhU9w1F+Wiba6s1X/TBz1LnUfuYDi4r2C69f1f14BWfP+p+W2GFKuC9phcELMYRRLur9DEZTUdEH+iEqWdaM7X4WOoPGI+ZYD2+wcQ+y+ioHUZ9dTDbArzxmi/bJI9BND0Ynd6lBdve/butBw8+f/T9D3ABa3AG8W3VPX4hBin+bj8dMMmSpp5pg7fJ6xrBFE2WQQEWnV8Qg3FbAWzYfM1rREEnmvkN2o1+acG2d/9u68GDzx91v3mAjb1zkpqT21OipPKO0b9TO5W0nTdOmAQm0TObts3aBKgwARtoPDiCT0gHgwnbArzxmtcLc08HgF1asN0C4Ms/fvD5I+7PhfqyXE/b7RbbrGyRQRT9ARZcwAUmgdoz0ehJ9Fn7QAhUjhDAQSw0bV3T3WbNa59jzmiP6GsWbGXDX2ytjy8+f9T97fiBPq9YeLdBmyuizZHaqXITnXiMUEEVcJ7K4j3BFPurtB4bixW8wTpweL8DC95szWMOqucFYGsWbGU7p3TxxxefP+r+oTVktxY0v5hbq3KiOKYnY8ddJVSBxuMMVffNbxwIOERShst73HZ78DZrHpmJmH3K6sGz0fe3UUj0eyRrSCGTTc+rjVNoGzNSv05srAxUBh8IhqChiQgVNIIBH3AVPnrsnXQZbLTm8ammv8eVXn/vWpaTem5IXRlt+U/LA21zhSb9cye6jcOfCnOwhIAYXAMVTUNV0QhVha9xjgA27ODJbLbmitt3tRN80lqG6N/khgot4ZVlOyO4WNg3OIMzhIZQpUEHieg2im6F91hB3I2tubql6BYNN9Hj5S7G0G2tahslBWKDnOiIvuAEDzakDQKDNFQT6gbn8E2y4BBubM230YIpBnDbMa+y3dx0n1S0BtuG62lCCXwcY0F72T1VRR3t2ONcsmDjbmzNt9RFs2LO2hQNyb022JisaI8rAWuw4HI3FuAIhZdOGIcdjLJvvObqlpqvWTJnnQbyi/1M9O8UxWhBs//H42I0q1Yb/XPGONzcmm+ri172mHKvZBpHkJaNJz6v9jxqiklDj3U4CA2ugpAaYMWqNXsdXbmJNd9egCnJEsphXNM+MnK3m0FCJ5S1kmJpa3DgPVbnQnPGWIDspW9ozbcO4K/9LkfaQO2KHuqlfFXSbdNzcEcwoqNEFE9zcIXu9/6n/ym/BC/C3aJLzEKPuYVlbFnfhZ8kcWxV3dbv4bKl28566wD+8C53aw49lTABp9PWbsB+knfc/Li3eVizf5vv/xmvnPKg5ihwKEwlrcHqucuVcVOxEv8aH37E3ZqpZypUulrHEtIWKUr+txHg+ojZDGlwnqmkGlzcVi1dLiNSJiHjfbRNOPwKpx9TVdTn3K05DBx4psIk4Ei8aCkJahRgffk4YnEXe07T4H2RR1u27E6wfQsBDofUgjFUFnwC2AiVtA+05J2zpiDK2Oa0c5fmAecN1iJzmpqFZxqYBCYhFTCsUNEmUnIcZ6aEA5rQVhEywG6w7HSW02XfOoBlQmjwulOFQAg66SvJblrTEX1YtJ3uG15T/BH1OfOQeuR8g/c0gdpT5fx2SKbs9EfHTKdM8A1GaJRHLVIwhcGyydZsbifAFVKl5EMKNU2Hryo+06BeTgqnxzYjThVySDikbtJPieco75lYfKAJOMEZBTjoITuWHXXZVhcUDIS2hpiXHV9Ku4u44bN5OYLDOkJo8w+xJSMbhBRHEdEs9JZUCkQrPMAvaHyLkxgkEHxiNkx/x2YB0mGsQ8EUWj/stW5YLhtS5SMu+/YBbNPDCkGTUybN8krRLBGPlZkVOA0j+a1+rkyQKWGaPHPLZOkJhioQYnVZ2hS3zVxMtgC46KuRwbJNd9nV2PHgb36F194ecf/Yeu2vAFe5nm/bRBFrnY4BauE8ERmZRFUn0k8hbftiVYSKMEme2dJCJSCGYAlNqh87bXOPdUkGy24P6d1ll21MBqqx48Fvv8ZHH8HZFY7j/uAq1xMJUFqCSUlJPmNbIiNsmwuMs/q9CMtsZsFO6SprzCS1Z7QL8xCQClEelpjTduDMsmWD8S1PT152BtvmIGvUeDA/yRn83u/x0/4qxoPHjx+PXY9pqX9bgMvh/Nz9kpP4pOe1/fYf3axUiMdHLlPpZCNjgtNFAhcHEDxTumNONhHrBduW+vOyY++70WWnPXj98eA4kOt/mj/5E05l9+O4o8ePx67HFqyC+qSSnyselqjZGaVK2TadbFLPWAQ4NBhHqDCCV7OTpo34AlSSylPtIdd2AJZlyzYQrDJ5lcWGNceD80CunPLGGzsfD+7wRb95NevJI5docQ3tgCyr5bGnyaPRlmwNsFELViOOx9loebGNq2moDOKpHLVP5al2cymWHbkfzGXL7kfRl44H9wZy33tvt+PB/Xnf93e+nh5ZlU18wCiRUa9m7kib9LYuOk+hudQNbxwm0AQqbfloimaB2lM5fChex+ylMwuTbfmXQtmWlenZljbdXTLuOxjI/fDDHY4Hjx8/Hrse0zXfPFxbUN1kKqSCCSk50m0Ajtx3ub9XHBKHXESb8iO6E+qGytF4nO0OG3SXzbJlhxBnKtKyl0NwybjvYCD30aMdjgePHz8eu56SVTBbgxJMliQ3Oauwg0QHxXE2Ez/EIReLdQj42Gzb4CLS0YJD9xUx7bsi0vJi5mUbW1QzL0h0PFk17rtiIPfJk52MB48fPx67npJJwyrBa2RCCQRTbGZSPCxTPOiND4G2pYyOQ4h4jINIJh5wFU1NFZt+IsZ59LSnDqBjZ2awbOku+yInunLcd8VA7rNnOxkPHj9+PGY9B0MWJJNozOJmlglvDMXDEozdhQWbgs/U6oBanGzLrdSNNnZFjOkmbi5bNt1lX7JLLhn3vXAg9/h4y/Hg8ePHI9dzQMEkWCgdRfYykYKnkP7D4rIujsujaKPBsB54vE2TS00ccvFY/Tth7JXeq1hz+qgVy04sAJawTsvOknHfCwdyT062HA8eP348Zj0vdoXF4pilKa2BROed+9fyw9rWRXeTFXESMOanvDZfJuJaSXouQdMdDJZtekZcLLvEeK04d8m474UDuaenW44Hjx8/Xns9YYqZpszGWB3AN/4VHw+k7WSFtJ3Qicuqb/NlVmgXWsxh570xg2UwxUw3WfO6B5nOuO8aA7lnZxuPB48fPx6znm1i4bsfcbaptF3zNT78eFPtwi1OaCNOqp1x3zUGcs/PN++AGD1+fMXrSVm2baTtPhPahbPhA71wIHd2bXzRa69nG+3CraTtPivahV/55tXWg8fyRY/9AdsY8VbSdp8V7cKrrgdfM//z6ILQFtJ2nxHtwmuoB4/kf74+gLeRtvvMaBdeSz34+vifx0YG20jbfTa0C6+tHrwe//NmOG0L8EbSdp8R7cLrrQe/996O+ai3ujQOskpTNULa7jOjXXj99eCd8lHvoFiwsbTdZ0a78PrrwTvlo966pLuRtB2fFe3Cm6oHP9kNH/W2FryxtN1nTLvwRurBO+Kj3pWXHidtx2dFu/Bm68Fb81HvykuPlrb7LGkX3mw9eGs+6h1Y8MbSdjegXcguQLjmevDpTQLMxtJ2N6NdyBZu9AbrwVvwUW+LbteULUpCdqm0HTelXbhNPe8G68Gb8lFvVfYfSNuxvrTdTWoXbozAzdaDZzfkorOj1oxVxlIMlpSIlpLrt8D4hrQL17z+c3h6hU/wv4Q/utps4+bm+6P/hIcf0JwQ5oQGPBL0eKPTYEXTW+eL/2DKn73J9BTXYANG57hz1cEMviVf/4tf5b/6C5pTQkMIWoAq7hTpOJjtAM4pxKu5vg5vXeUrtI09/Mo/5H+4z+Mp5xULh7cEm2QbRP2tFIKR7WM3fPf/jZ3SWCqLM2l4NxID5zB72HQXv3jj/8mLR5xXNA5v8EbFQEz7PpRfl1+MB/hlAN65qgDn3wTgH13hK7T59bmP+NIx1SHHU84nLOITt3iVz8mNO+lPrjGAnBFqmioNn1mTyk1ta47R6d4MrX7tjrnjYUpdUbv2rVr6YpVfsGG58AG8Ah9eyUN8CX4WfgV+G8LVWPDGb+Zd4cU584CtqSbMKxauxTg+dyn/LkVgA+IR8KHtejeFKRtTmLLpxN6mYVLjYxwXf5x2VofiZcp/lwKk4wGOpYDnoIZPdg/AAbwMfx0+ge9dgZvYjuqKe4HnGnykYo5TvJbG0Vj12JagRhwKa44H95ShkZa5RyLGGdfYvG7aw1TsF6iapPAS29mNS3NmsTQZCmgTzFwgL3upCTgtBTRwvGMAKrgLn4evwin8+afJRcff+8izUGUM63GOOuAs3tJkw7J4kyoNreqrpO6cYLQeFUd7TTpr5YOTLc9RUUogUOVJQ1GYJaFLAW0oTmKyYS46ZooP4S4EON3xQ5zC8/CX4CnM4c1PE8ApexpoYuzqlP3d4S3OJP8ZDK7cKWNaTlqmgDiiHwl1YsE41w1zT4iRTm3DBqxvOUsbMKKDa/EHxagtnta072ejc3DOIh5ojvh8l3tk1JF/AV6FU6jh3U8HwEazLgdCLYSQ+MYiAI2ltomkzttUb0gGHdSUUgsIYjTzLG3mObX4FBRaYtpDVNZrih9TgTeYOBxsEnN1gOCTM8Bsw/ieMc75w9kuAT6A+/AiHGvN/+Gn4KRkiuzpNNDYhDGFndWRpE6SVfm8U5bxnSgVV2jrg6JCKmneqey8VMFgq2+AM/i4L4RUbfSi27lNXZ7R7W9RTcq/q9fk4Xw3AMQd4I5ifAZz8FcVtm9SAom/dyN4lczJQW/kC42ZrHgcCoIf1oVMKkVItmMBi9cOeNHGLqOZk+QqQmrbc5YmYgxELUUN35z2iohstgfLIFmcMV7s4CFmI74L9+EFmGsi+tGnAOD4Yk9gIpo01Y4cA43BWGygMdr4YZekG3OBIUXXNukvJS8tqa06e+lSDCtnqqMFu6hWHXCF+WaYt64m9QBmNxi7Ioy7D+fa1yHw+FMAcPt7SysFLtoG4PXAk7JOA3aAxBRqUiAdU9Yp5lK3HLSRFtOim0sa8euEt08xvKjYjzeJ2GU7YawexrnKI9tmobInjFXCewpwriY9+RR4aaezFhMhGCppKwom0ChrgFlKzyPKkGlTW1YQrE9HJqu8hKGgMc6hVi5QRq0PZxNfrYNgE64utmRv6KKHRpxf6VDUaOvNP5jCEx5q185My/7RKz69UQu2im5k4/eownpxZxNLwiZ1AZTO2ZjWjkU9uaB2HFn6Q3u0JcsSx/qV9hTEApRzeBLDJQXxYmTnq7bdLa3+uqFrxLJ5w1TehnNHx5ECvCh2g2c3hHH5YsfdaSKddztfjQ6imKFGSyFwlLzxEGPp6r5IevVjk1AMx3wMqi1NxDVjLBiPs9tbsCkIY5we5/ML22zrCScFxnNtzsr9Wcc3CnD+pYO+4VXXiDE0oc/vQQ/fDK3oPESJMYXNmJa/DuloJZkcTpcYE8lIH8Dz8DJMiynNC86Mb2lNaaqP/+L7f2fcE/yP7/Lde8xfgSOdMxvOixZf/9p3+M4hT1+F+zApxg9XfUvYjc8qX2lfOOpK2gNRtB4flpFu9FTKCp2XJRgXnX6olp1zyYjTKJSkGmLE2NjUr1bxFM4AeAAHBUFIeSLqXR+NvH/M9fOnfHzOD2vCSyQJKzfgsCh+yi/Mmc35F2fUrw7miW33W9hBD1vpuUojFphIyvg7aTeoymDkIkeW3XLHmguMzbIAJejN6B5MDrhipE2y6SoFRO/AK/AcHHZHNIfiWrEe/C6cr3f/yOvrQKB+zMM55/GQdLDsR+ifr5Fiuu+/y+M78LzOE5dsNuXC3PYvYWd8NXvphLSkJIasrlD2/HOqQ+RjcRdjKTGWYhhVUm4yxlyiGPuMsZR7sMCHUBeTuNWA7if+ifXgc/hovftHXs/DV+Fvwe+f8shzMiMcweFgBly3//vwJfg5AN4450fn1Hd1Rm1aBLu22Dy3y3H2+OqMemkbGZ4jozcDjJf6596xOLpC0eMTHbKnxLxH27uZ/bMTGs2jOaMOY4m87CfQwF0dw53oa1k80JRuz/XgS+8fX3N9Af4qPIMfzKgCp4H5TDGe9GGeFPzSsZz80SlPTxXjgwJmC45njzgt2vbQ4b4OAdUK4/vWhO8d8v6EE8fMUsfakXbPpFJeLs2ubM/qdm/la3WP91uWhxXHjoWhyRUq2iJ/+5mA73zwIIo+LoZ/SgvIRjAd1IMvvn98PfgOvAJfhhm8scAKVWDuaRaK8aQ9f7vuPDH6Bj47ZXau7rqYJ66mTDwEDU6lLbCjCK0qTXyl5mnDoeNRxanj3FJbaksTk0faXxHxLrssgPkWB9LnA/MFleXcJozzjwsUvUG0X/QCve51qkMDXp9mtcyOy3rwBfdvVJK7D6/ACSzg3RoruIq5UDeESfEmVclDxnniU82vxMLtceD0hGZWzBNPMM/jSPne2OVatiTKUpY5vY7gc0LdUAWeWM5tH+O2I66AOWw9xT2BuyRVLGdoDHUsVRXOo/c+ZdRXvFfnxWyIV4upFLCl9eAL7h8Zv0QH8Ry8pA2cHzQpGesctVA37ZtklBTgHjyvdSeKY/RZw/kJMk0Y25cSNRWSigQtlULPTw+kzuJPeYEkXjQRpoGZobYsLF79pyd1dMRHInbgFTZqNLhDqiIsTNpoex2WLcy0/X6rHcdMMQvFSd5dWA++4P7xv89deACnmr36uGlL69bRCL6BSZsS6c0TU2TKK5gtWCzgAOOwQcurqk9j8whvziZSMLcq5hbuwBEsYjopUBkqw1yYBGpLA97SRElEmx5MCInBY5vgLk94iKqSWmhIGmkJ4Bi9m4L645J68LyY4wsFYBfUg5feP/6gWWm58IEmKQM89hq7KsZNaKtP5TxxrUZZVkNmMJtjbKrGxLNEbHPJxhqy7lAmbC32ZqeF6lTaknRWcYaFpfLUBh/rwaQycCCJmW15Kstv6jRHyJFry2C1ahkkIW0LO75s61+owxK1y3XqweX9m5YLM2DPFeOjn/iiqCKJ+yKXF8t5Yl/kNsqaSCryxPq5xWTFIaP8KSW0RYxqupaUf0RcTNSSdJZGcKYdYA6kdtrtmyBckfKXwqk0pHpUHlwWaffjNRBYFPUDWa8e3Lt/o0R0CdisKDM89cX0pvRHEfM8ca4t0s2Xx4kgo91MPQJ/0c9MQYq0co8MBh7bz1fio0UUHLR4aAIOvOmoYO6kwlEVODSSTliWtOtH6sPkrtctF9ZtJ9GIerBskvhdVS5cFNv9s1BU0AbdUgdK4FG+dRnjFmDTzniRMdZO1QhzMK355vigbdkpz9P6qjUGE5J2qAcXmwJ20cZUiAD0z+pGMx6xkzJkmEf40Hr4qZfVg2XzF9YOyoV5BjzVkUJngKf8lgNYwKECEHrCNDrWZzMlflS3yBhr/InyoUgBc/lKT4pxVrrC6g1YwcceK3BmNxZcAtz3j5EIpqguh9H6wc011YN75cKDLpFDxuwkrPQmUwW4KTbj9mZTwBwLq4aQMUZbHm1rylJ46dzR0dua2n3RYCWZsiHROeywyJGR7mXKlpryyCiouY56sFkBWEnkEB/raeh/Sw4162KeuAxMQpEkzy5alMY5wamMsWKKrtW2WpEWNnReZWONKWjrdsKZarpFjqCslq773PLmEhM448Pc3+FKr1+94vv/rfw4tEcu+lKTBe4kZSdijBrykwv9vbCMPcLQTygBjzVckSLPRVGslqdunwJ4oegtFOYb4SwxNgWLCmD7T9kVjTv5YDgpo0XBmN34Z/rEHp0sgyz7lngsrm4lvMm2Mr1zNOJYJ5cuxuQxwMGJq/TP5emlb8fsQBZviK4t8hFL+zbhtlpwaRSxQRWfeETjuauPsdGxsBVdO7nmP4xvzSoT29pRl7kGqz+k26B3Oy0YNV+SXbbQas1ctC/GarskRdFpKczVAF1ZXnLcpaMuzVe6lZ2g/1ndcvOVgRG3sdUAY1bKD6achijMPdMxV4muKVorSpiDHituH7rSTs7n/4y5DhRXo4FVBN4vO/zbAcxhENzGbHCzU/98Mcx5e7a31kWjw9FCe/zNeYyQjZsWb1uc7U33pN4Mji6hCLhivqfa9Ss6xLg031AgfesA/l99m9fgvnaF9JoE6bYKmkGNK3aPbHB96w3+DnxFm4hs0drLsk7U8kf/N/CvwQNtllna0rjq61sH8L80HAuvwH1tvBy2ChqWSCaYTaGN19sTvlfzFD6n+iKTbvtayfrfe9ueWh6GJFoxLdr7V72a5ZpvHcCPDzma0wTO4EgbLyedxstO81n57LYBOBzyfsOhUKsW1J1BB5vr/tz8RyqOFylQP9Tvst2JALsC5lsH8PyQ40DV4ANzYa4dedNiKNR1s+x2wwbR7q4/4cTxqEk4LWDebfisuo36JXLiWFjOtLrlNWh3K1rRS4xvHcDNlFnNmWBBAl5SWaL3oPOfnvbr5pdjVnEaeBJSYjuLEkyLLsWhKccadmOphZkOPgVdalj2QpSmfOsADhMWE2ZBu4+EEJI4wKTAuCoC4xwQbWXBltpxbjkXJtKxxabo9e7tyhlgb6gNlSbUpMh+l/FaqzVwewGu8BW1Zx7pTpQDJUjb8tsUTW6+GDXbMn3mLbXlXJiGdggxFAoUrtPS3wE4Nk02UZG2OOzlk7fRs7i95QCLo3E0jtrjnM7SR3uS1p4qtS2nJ5OwtQVHgOvArLBFijZUV9QtSl8dAY5d0E0hM0w3HS2DpIeB6m/A1+HfhJcGUq4sOxH+x3f5+VO+Ds9rYNI7zPXOYWPrtf8bYMx6fuOAX5jzNR0PdsuON+X1f7EERxMJJoU6GkTEWBvVolVlb5lh3tKCg6Wx1IbaMDdJ+9sUCc5KC46hKGCk3IVOS4TCqdBNfUs7Kd4iXf2RjnT/LLysJy3XDcHLh/vde3x8DoGvwgsa67vBk91G5Pe/HbOe7xwym0NXbtiuuDkGO2IJDh9oQvJ4cY4vdoqLDuoH9Zl2F/ofsekn8lkuhIlhQcffUtSjytFyp++p6NiE7Rqx/lodgKVoceEp/CP4FfjrquZaTtj2AvH5K/ywpn7M34K/SsoYDAdIN448I1/0/wveW289T1/lX5xBzc8N5IaHr0XMOQdHsIkDuJFifj20pBm5jzwUv9e2FhwRsvhAbalCIuIw3bhJihY3p6nTFFIZgiSYjfTf3aXuOjmeGn4bPoGvwl+CFzTRczBIuHBEeImHc37/lGfwZR0cXzVDOvaKfNHvwe+suZ771K/y/XcBlsoN996JpBhoE2toYxOznNEOS5TJc6Id5GEXLjrWo+LEWGNpPDU4WAwsIRROu+1vM+0oW37z/MBN9kqHnSArwPfgFJ7Cq/Ai3Ie7g7ncmI09v8sjzw9mzOAEXoIHxURueaAce5V80f/DOuuZwHM8vsMb5wBzOFWM7wymTXPAEvm4vcFpZ2ut0VZRjkiP2MlmLd6DIpbGSiHOjdnUHN90hRYmhTnmvhzp1iKDNj+b7t5hi79lWGwQ+HN9RsfFMy0FXbEwhfuczKgCbyxYwBmcFhhvo/7a44v+i3XWcwDP86PzpGQYdWh7csP5dBvZ1jNzdxC8pBGuxqSW5vw40nBpj5JhMwvOzN0RWqERHMr4Lv1kWX84xLR830G3j6yqZ1a8UstTlW+qJPOZ+sZ7xZPKTJLhiNOAFd6tk+jrTH31ncLOxid8+nzRb128HhUcru/y0Wn6iT254YPC6FtVSIMoW2sk727AhvTtrWKZTvgsmckfXYZWeNRXx/3YQ2OUxLDrbHtN11IwrgXT6c8dATDwLniYwxzO4RzuQqTKSC5gAofMZ1QBK3zQ4JWobFbcvJm87FK+6JXrKahLn54m3p+McXzzYtP8VF/QpJuh1OwieElEoI1pRxPS09FBrkq2tWCU59+HdhNtTIqKm8EBrw2RTOEDpG3IKo2Y7mFdLm3ZeVjYwVw11o/oznceMve4CgMfNym/utA/d/ILMR7gpXzRy9eDsgLcgbs8O2Va1L0zzIdwGGemTBuwROHeoMShkUc7P+ISY3KH5ZZeWqO8mFTxQYeXTNuzvvK5FGPdQfuu00DwYFY9dyhctEt+OJDdnucfpmyhzUJzfsJjr29l8S0bXBfwRS9ZT26tmMIdZucch5ZboMz3Nio3nIOsYHCGoDT4kUA9MiXEp9Xsui1S8th/kbWIrMBxDGLodWUQIWcvnXy+9M23xPiSMOiRPqM+YMXkUN3gXFrZJwXGzUaMpJfyRS9ZT0lPe8TpScuRlbMHeUmlaKDoNuy62iWNTWNFYjoxFzuJs8oR+RhRx7O4SVNSXpa0ZJQ0K1LAHDQ+D9IepkMXpcsq5EVCvClBUIzDhDoyKwDw1Lc59GbTeORivugw1IcuaEOaGWdNm+Ps5fQ7/tm0DjMegq3yM3vb5j12qUId5UZD2oxDSEWOZMSqFl/W+5oynWDa/aI04tJRQ2eTXusg86SQVu/nwSYwpW6wLjlqIzwLuxGIvoAvul0PS+ZNz0/akp/pniO/8JDnGyaCkzbhl6YcqmK/69prxPqtpx2+Km9al9sjL+rwMgHw4jE/C8/HQ3m1vBuL1fldbzd8mOueVJ92syqdEY4KJjSCde3mcRw2TA6szxedn+zwhZMps0XrqEsiUjnC1hw0TELC2Ek7uAAdzcheXv1BYLagspxpzSAoZZUsIzIq35MnFQ9DOrlNB30jq3L4pkhccKUAA8/ocvN1Rzx9QyOtERs4CVsJRK/DF71kPYrxYsGsm6RMh4cps5g1DOmM54Ly1ii0Hd3Y/BMk8VWFgBVmhqrkJCPBHAolwZaWzLR9Vb7bcWdX9NyUYE+uB2BKfuaeBUcjDljbYVY4DdtsVWvzRZdWnyUzDpjNl1Du3aloAjVJTNDpcIOVVhrHFF66lLfJL1zJr9PQ2nFJSBaKoDe+sAvLufZVHVzYh7W0h/c6AAZ+7Tvj6q9j68G/cTCS/3n1vLKHZwNi+P+pS0WkZNMBMUl+LDLuiE4omZy71r3UFMwNJV+VJ/GC5ixVUkBStsT4gGKh0Gm4Oy3qvq7Lbmq24nPdDuDR9deR11XzP4vFu3TYzfnIyiSVmgizUYGqkIXNdKTY9pgb9D2Ix5t0+NHkVzCdU03suWkkVZAoCONCn0T35gAeW38de43mf97sMOpSvj4aa1KYUm58USI7Wxxes03bAZdRzk6UtbzMaCQ6IxO0dy7X+XsjoD16hpsBeGz9dfzHj+R/Hp8nCxZRqkEDTaCKCSywjiaoMJ1TITE9eg7Jqnq8HL6gDwiZb0u0V0Rr/rmvqjxKuaLCX7ZWXTvAY+uvm3z8CP7nzVpngqrJpZKwWnCUjIviYVlirlGOzPLI3SMVyp/elvBUjjDkNhrtufFFErQ8pmdSlbK16toBHlt/HV8uHMX/vEGALkV3RJREiSlopxwdMXOZPLZ+ix+kAHpMKIk8UtE1ygtquttwxNhphrIZ1IBzjGF3IIGxGcBj6q8bHJBG8T9vdsoWrTFEuebEZuVxhhClH6P5Zo89OG9fwHNjtNQTpD0TG9PJLEYqvEY6Rlxy+ZZGfL0Aj62/bnQCXp//eeM4KzfQVJbgMQbUjlMFIm6TpcfWlZje7NBSV6IsEVmumWIbjiloUzQX9OzYdo8L1wjw2PrrpimONfmfNyzKklrgnEkSzT5QWYQW40YShyzqsRmMXbvVxKtGuYyMKaU1ugenLDm5Ily4iT14fP11Mx+xJv+zZ3MvnfdFqxU3a1W/FTB4m3Qfsyc1XUcdVhDeUDZXSFHHLQj/Y5jtC7ZqM0CXGwB4bP11i3LhOvzPGygYtiUBiwQV/4wFO0majijGsafHyRLu0yG6q35cL1rOpVxr2s5cM2jJYMCdc10Aj6q/blRpWJ//+dmm5psMl0KA2+AFRx9jMe2WbC4jQxnikd4DU8TwUjRVacgdlhmr3bpddzuJ9zXqr2xnxJfzP29RexdtjDVZqzkqa6PyvcojGrfkXiJ8SEtml/nYskicv0ivlxbqjemwUjMw5evdg8fUX9nOiC/lf94Q2i7MURk9nW1MSj5j8eAyV6y5CN2S6qbnw3vdA1Iwq+XOSCl663udN3IzLnrt+us25cI1+Z83SXQUldqQq0b5XOT17bGpLd6ssN1VMPf8c+jG8L3NeCnMdF+Ra3fRa9dft39/LuZ/3vwHoHrqGmQFafmiQw6eyzMxS05K4bL9uA+SKUQzCnSDkqOGokXyJvbgJ/BHI+qvY69//4rl20NsmK2ou2dTsyIALv/91/8n3P2Aao71WFGi8KKv1fRC5+J67Q/507/E/SOshqN5TsmYIjVt+kcjAx98iz/4SaojbIV1rexE7/C29HcYD/DX4a0rBOF5VTu7omsb11L/AWcVlcVZHSsqGuXLLp9ha8I//w3Mv+T4Ew7nTBsmgapoCrNFObIcN4pf/Ob/mrvHTGqqgAupL8qWjWPS9m/31jAe4DjA+4+uCoQoT/zOzlrNd3qd4SdphFxsUvYwGWbTWtISc3wNOWH+kHBMfc6kpmpwPgHWwqaSUG2ZWWheYOGQGaHB+eQ/kn6b3pOgLV+ODSn94wDvr8Bvb70/LLuiPPEr8OGVWfDmr45PZyccEmsVXZGe1pRNX9SU5+AVQkNTIVPCHF/jGmyDC9j4R9LfWcQvfiETmgMMUCMN1uNCakkweZsowdYobiMSlnKA93u7NzTXlSfe+SVbfnPQXmg9LpYAQxpwEtONyEyaueWM4FPjjyjG3uOaFmBTWDNgBXGEiQpsaWhnAqIijB07Dlsy3fUGeP989xbWkyf+FF2SNEtT1E0f4DYYVlxFlbaSMPIRMk/3iMU5pME2SIWJvjckciebkQuIRRyhUvkHg/iUljG5kzVog5hV7vIlCuBrmlhvgPfNHQM8lCf+FEGsYbMIBC0qC9a0uuy2wLXVbLBaP5kjHokCRxapkQyzI4QEcwgYHRZBp+XEFTqXFuNVzMtjXLJgX4gAid24Hjwc4N3dtVSe+NNiwTrzH4WVUOlDobUqr1FuAgYllc8pmzoVrELRHSIW8ViPxNy4xwjBpyR55I6J220qQTZYR4guvUICJiSpr9gFFle4RcF/OMB7BRiX8sSfhpNSO3lvEZCQfLUVTKT78Ek1LRLhWN+yLyTnp8qWUZ46b6vxdRGXfHVqx3eI75YaLa4iNNiK4NOW7wPW6lhbSOF9/M9qw8e/aoB3d156qTzxp8pXx5BKAsYSTOIIiPkp68GmTq7sZtvyzBQaRLNxIZ+paozHWoLFeExIhRBrWitHCAHrCF7/thhD8JhYz84wg93QRV88wLuLY8zF8sQ36qF1J455bOlgnELfshKVxYOXKVuKx0jaj22sczTQqPqtV/XDgpswmGTWWMSDw3ssyUunLLrVPGjYRsH5ggHeHSWiV8kT33ycFSfMgkoOK8apCye0J6VW6GOYvffgU9RWsukEi2kUV2nl4dOYUzRik9p7bcA4ggdJ53LxKcEe17B1R8eqAd7dOepV8sTXf5lhejoL85hUdhDdknPtKHFhljOT+bdq0hxbm35p2nc8+Ja1Iw+tJykgp0EWuAAZYwMVwac5KzYMslhvgHdHRrxKnvhTYcfKsxTxtTETkjHO7rr3zjoV25lAQHrqpV7bTiy2aXMmUhTBnKS91jhtR3GEoF0oLnWhWNnYgtcc4N0FxlcgT7yz3TgNIKkscx9jtV1ZKpWW+Ub1tc1eOv5ucdgpx+FJy9pgbLE7xDyXb/f+hLHVGeitHOi6A7ybo3sF8sS7w7cgdk0nJaOn3hLj3uyD0Zp5pazFIUXUpuTTU18d1EPkDoX8SkmWTnVIozEdbTcZjoqxhNHf1JrSS/AcvHjZ/SMHhL/7i5z+POsTUh/8BvNfYMTA8n+yU/MlTZxSJDRStqvEuLQKWwDctMTQogUDyQRoTQG5Kc6oQRE1yV1jCA7ri7jdZyK0sYTRjCR0Hnnd+y7nHxNgTULqw+8wj0mQKxpYvhjm9uSUxg+TTy7s2GtLUGcywhXSKZN275GsqlclX90J6bRI1aouxmgL7Q0Nen5ziM80SqMIo8cSOo+8XplT/5DHNWsSUr/6lLN/QQ3rDyzLruEW5enpf7KqZoShEduuSFOV7DLX7Ye+GmXb6/hnNNqKsVXuMDFpb9Y9eH3C6NGEzuOuI3gpMH/I6e+zDiH1fXi15t3vA1czsLws0TGEtmPEJdiiFPwlwKbgLHAFk4P6ZyPdymYYHGE0dutsChQBl2JcBFlrEkY/N5bQeXQ18gjunuMfMfsBlxJSx3niO485fwO4fGD5T/+3fPQqkneWVdwnw/3bMPkW9Wbqg+iC765Zk+xcT98ibKZc2EdgHcLoF8cSOo/Oc8fS+OyEULF4g4sJqXVcmfMfsc7A8v1/yfGXmL9I6Fn5pRwZhsPv0TxFNlAfZCvG+Oohi82UC5f/2IsJo0cTOm9YrDoKhFPEUr/LBYTUNht9zelHXDqwfPCIw4owp3mOcIQcLttWXFe3VZ/j5H3cIc0G6oPbCR+6Y2xF2EC5cGUm6wKC5tGEzhsWqw5hNidUiKX5gFWE1GXh4/Qplw4sVzOmx9QxU78g3EF6wnZlEN4FzJ1QPSLEZz1KfXC7vd8ssGdIbNUYpVx4UapyFUHzJoTOo1McSkeNn1M5MDQfs4qQuhhX5vQZFw8suwWTcyYTgioISk2YdmkhehG4PkE7w51inyAGGaU+uCXADabGzJR1fn3lwkty0asIo8cROm9Vy1g0yDxxtPvHDAmpu+PKnM8Ix1wwsGw91YJqhteaWgjYBmmQiebmSpwKKzE19hx7jkzSWOm66oPbzZ8Yj6kxVSpYjVAuvLzYMCRo3oTQecOOjjgi3NQ4l9K5/hOGhNTdcWVOTrlgYNkEXINbpCkBRyqhp+LdRB3g0OU6rMfW2HPCFFMV9nSp+uB2woepdbLBuJQyaw/ZFysXrlXwHxI0b0LovEkiOpXGA1Ijagf+KUNC6rKNa9bQnLFqYNkEnMc1uJrg2u64ELPBHpkgWbmwKpJoDhMwNbbGzAp7Yg31wS2T5rGtzit59PrKhesWG550CZpHEzpv2NGRaxlNjbMqpmEIzygJqQfjypycs2pg2cS2RY9r8HUqkqdEgKTWtWTKoRvOBPDYBltja2SO0RGjy9UHtxwRjA11ujbKF+ti5cIR9eCnxUg6owidtyoU5tK4NLji5Q3HCtiyF2IqLGYsHViOXTXOYxucDqG0HyttqYAKqYo3KTY1ekyDXRAm2AWh9JmsVh/ccg9WJ2E8YjG201sPq5ULxxX8n3XLXuMInbft2mk80rRGjCGctJ8/GFdmEQ9Ug4FlE1ll1Y7jtiraqm5Fe04VV8lvSVBL8hiPrfFVd8+7QH3Qbu2ipTVi8cvSGivc9cj8yvH11YMHdNSERtuOslM97feYFOPKzGcsI4zW0YGAbTAOaxCnxdfiYUmVWslxiIblCeAYr9VYR1gM7GmoPrilunSxxeT3DN/2eBQ9H11+nk1adn6VK71+5+Jfct4/el10/7KBZfNryUunWSCPxPECk1rdOv1WVSrQmpC+Tl46YD3ikQYcpunSQgzVB2VHFhxHVGKDgMEY5GLlQnP7FMDzw7IacAWnO6sBr12u+XanW2AO0wQ8pknnFhsL7KYIqhkEPmEXFkwaN5KQphbkUmG72wgw7WSm9RiL9QT925hkjiVIIhphFS9HKI6/8QAjlpXqg9W2C0apyaVDwKQwrwLY3j6ADR13ZyUNByQXHQu6RY09Hu6zMqXRaNZGS/KEJs0cJEe9VH1QdvBSJv9h09eiRmy0V2uJcqHcShcdvbSNg5fxkenkVprXM9rDVnX24/y9MVtncvbKY706anNl3ASll9a43UiacVquXGhvq4s2FP62NGKfQLIQYu9q1WmdMfmUrDGt8eDS0cXozH/fjmUH6Jruvm50hBDSaEU/2Ru2LEN/dl006TSc/g7tfJERxGMsgDUEr104pfWH9lQaN+M4KWQjwZbVc2rZVNHsyHal23wZtIs2JJqtIc/WLXXRFCpJkfE9jvWlfFbsNQ9pP5ZBS0zKh4R0aMFj1IjTcTnvi0Zz2rt7NdvQb2mgbju1plsH8MmbnEk7KbK0b+wC2iy3aX3szW8xeZvDwET6hWZYwqTXSSG+wMETKum0Dq/q+x62gt2ua2ppAo309TRk9TPazfV3qL9H8z7uhGqGqxNVg/FKx0HBl9OVUORn8Q8Jx9gFttGQUDr3tzcXX9xGgN0EpzN9mdZ3GATtPhL+CjxFDmkeEU6x56kqZRusLzALXVqkCN7zMEcqwjmywDQ6OhyUe0Xao1Qpyncrg6wKp9XfWDsaZplElvQ/b3sdweeghorwBDlHzgk1JmMc/wiERICVy2VJFdMjFuLQSp3S0W3+sngt2njwNgLssFGVQdJ0tu0KH4ky1LW4yrbkuaA6Iy9oz/qEMMXMMDWyIHhsAyFZc2peV9hc7kiKvfULxCl9iddfRK1f8kk9qvbdOoBtOg7ZkOZ5MsGrSHsokgLXUp9y88smniwWyuFSIRVmjplga3yD8Uij5QS1ZiM4U3Qw5QlSm2bXjFe6jzzBFtpg+/YBbLAWG7OPynNjlCw65fukGNdkJRf7yM1fOxVzbxOJVocFoYIaGwH22mIQkrvu1E2nGuebxIgW9U9TSiukPGU+Lt++c3DJPKhyhEEbXCQLUpae2exiKy6tMPe9mDRBFCEMTWrtwxN8qvuGnt6MoihKWS5NSyBhbH8StXoAz8PLOrRgLtOT/+4vcu+7vDLnqNvztOq7fmd8sMmY9Xzn1zj8Dq8+XVdu2Nv0IIySgEdQo3xVHps3Q5i3fLFsV4aiqzAiBhbgMDEd1uh8qZZ+lwhjkgokkOIv4xNJmyncdfUUzgB4oFMBtiu71Xumpz/P+cfUP+SlwFExwWW62r7b+LSPxqxn/gvMZ5z9C16t15UbNlq+jbGJtco7p8wbYlL4alSyfWdeuu0j7JA3JFNuVAwtst7F7FhWBbPFNKIUORndWtLraFLmMu7KFVDDOzqkeaiN33YAW/r76wR4XDN/yN1z7hejPau06EddkS/6XThfcz1fI/4K736fO48vlxt2PXJYFaeUkFS8U15XE3428xdtn2kc8GQlf1vkIaNRRnOMvLTWrZbElEHeLWi1o0dlKPAh1MVgbbVquPJ5+Cr8LU5/H/+I2QlHIU2ClXM9G8v7Rr7oc/hozfUUgsPnb3D+I+7WF8kNO92GY0SNvuxiE+2Bt8prVJTkzE64sfOstxuwfxUUoyk8VjcTlsqe2qITSFoSj6Epd4KsT6BZOWmtgE3hBfir8IzZDwgV4ZTZvD8VvPHERo8v+vL1DASHTz/i9OlKueHDjK5Rnx/JB1Vb1ioXdBra16dmt7dgik10yA/FwJSVY6XjA3oy4SqM2frqDPPSRMex9qs3XQtoWxMj7/Er8GWYsXgjaVz4OYumP2+9kbxvny/6kvWsEBw+fcb5bInc8APdhpOSs01tEqIkoiZjbAqKMruLbJYddHuHFRIyJcbdEdbl2sVLaySygunutBg96Y2/JjKRCdyHV+AEFtTvIpbKIXOamknYSiB6KV/0JetZITgcjjk5ZdaskBtWO86UF0ap6ozGXJk2WNiRUlCPFir66lzdm/SLSuK7EUdPz8f1z29Skq6F1fXg8+5UVR6bszncP4Tn4KUkkdJ8UFCY1zR1i8RmL/qQL3rlei4THG7OODlnKko4oI01kd3CaM08Ia18kC3GNoVaO9iDh+hWxSyTXFABXoau7Q6q9OxYg/OVEMw6jdbtSrJ9cBcewGmaZmg+bvkUnUUaGr+ZfnMH45Ivevl61hMcXsxYLFTu1hTm2zViCp7u0o5l+2PSUh9bDj6FgYypufBDhqK2+oXkiuHFHR3zfj+9PtA8oR0xnqX8qn+sx3bFODSbbF0X8EUvWQ8jBIcjo5bRmLOljDNtcqNtOe756h3l0VhKa9hDd2l1eqmsnh0MNMT/Cqnx6BInumhLT8luljzQ53RiJeA/0dxe5NK0o2fA1+GLXr6eNQWHNUOJssQaTRlGpLHKL9fD+IrQzTOMZS9fNQD4AnRNVxvTdjC+fJdcDDWQcyB00B0t9BDwTxXgaAfzDZ/DBXzRnfWMFRwuNqocOmX6OKNkY63h5n/fFcB28McVHqnXZVI27K0i4rDLNE9lDKV/rT+udVbD8dFFu2GGZ8mOt0kAXcoX3ZkIWVtw+MNf5NjR2FbivROHmhV1/pj2egv/fMGIOWTIWrV3Av8N9imV9IWml36H6cUjqEWNv9aNc+veb2sH46PRaHSuMBxvtW+twxctq0z+QsHhux8Q7rCY4Ct8lqsx7c6Sy0dl5T89rIeEuZKoVctIk1hNpfavER6yyH1Vvm3MbsUHy4ab4hWr/OZPcsRBphnaV65/ZcdYPNNwsjN/djlf9NqCw9U5ExCPcdhKxUgLSmfROpLp4WSUr8ojdwbncbvCf+a/YzRaEc6QOvXcGO256TXc5Lab9POvB+AWY7PigWYjzhifbovuunzRawsO24ZqQQAqguBtmpmPB7ysXJfyDDaV/aPGillgz1MdQg4u5MYaEtBNNHFjkRlSpd65lp4hd2AVPTfbV7FGpyIOfmNc/XVsPfg7vzaS/3nkvLL593ANLvMuRMGpQIhiF7kUEW9QDpAUbTWYBcbp4WpacHHY1aacqQyjGZS9HI3yCBT9kUZJhVOD+zUDvEH9ddR11fzPcTDQ5TlgB0KwqdXSavk9BC0pKp0WmcuowSw07VXmXC5guzSa4p0UvRw2lbDiYUx0ExJJRzWzi6Gm8cnEkfXXsdcG/M/jAJa0+bmCgdmQ9CYlNlSYZOKixmRsgiFxkrmW4l3KdFKv1DM8tk6WxPYJZhUUzcd8Kdtgrw/gkfXXDT7+avmfVak32qhtkg6NVdUS5wgkru1YzIkSduTW1FDwVWV3JQVJVuieTc0y4iDpFwc7/BvSalvKdQM8sv662cevz/+8sQVnjVAT0W2wLllw1JiMhJRxgDjCjLQsOzSFSgZqx7lAW1JW0e03yAD3asC+GD3NbQhbe+mN5GXH1F83KDOM4n/e5JIuH4NpdQARrFPBVptUNcjj4cVMcFSRTE2NpR1LEYbYMmfWpXgP9KejaPsLUhuvLCsVXznAG9dfx9SR1ud/3hZdCLHb1GMdPqRJgqDmm76mHbvOXDtiO2QPUcKo/TWkQ0i2JFXpBoo7vij1i1Lp3ADAo+qvG3V0rM//vFnnTE4hxd5Ka/Cor5YEdsLVJyKtDgVoHgtW11pWSjolPNMnrlrVj9Fv2Qn60twMwKPqr+N/wvr8z5tZcDsDrv06tkqyzESM85Ycv6XBWA2birlNCXrI6VbD2lx2L0vQO0QVTVVLH4SE67fgsfVXv8n7sz7/85Z7cMtbE6f088wSaR4kCkCm10s6pKbJhfqiUNGLq+0gLWC6eUAZFPnLjwqtKd8EwGvWX59t7iPW4X/eAN1svgRVSY990YZg06BD1ohLMtyFTI4pKTJsS9xREq9EOaPWiO2gpms7397x6nQJkbh+Fz2q/rqRROX6/M8bJrqlVW4l6JEptKeUFuMYUbtCQ7CIttpGc6MY93x1r1vgAnRXvY5cvwWPqb9uWQm+lP95QxdNMeWhOq1x0Db55C7GcUv2ZUuN6n8iKzsvOxibC//Yfs9Na8r2Rlz02vXXDT57FP/zJi66/EJSmsJKa8QxnoqW3VLQ+jZVUtJwJ8PNX1NQCwfNgdhhHD9on7PdRdrdGPF28rJr1F+3LBdeyv+8yYfLoMYet1vX4upNAjVvwOUWnlNXJXlkzk5Il6kqeoiL0C07qno+/CYBXq/+utlnsz7/Mzvy0tmI4zm4ag23PRN3t/CWryoUVJGm+5+K8RJ0V8Hc88/XHUX/HfiAq7t+BH+x6v8t438enWmdJwFA6ZINriLGKv/95f8lT9/FnyA1NMVEvQyaXuu+gz36f/DD73E4pwqpLcvm/o0Vle78n//+L/NPvoefp1pTJye6e4A/D082FERa5/opeH9zpvh13cNm19/4v/LDe5xMWTi8I0Ta0qKlK27AS/v3/r+/x/2GO9K2c7kVMonDpq7//jc5PKCxeNPpFVzaRr01wF8C4Pu76hXuX18H4LduTr79guuFD3n5BHfI+ZRFhY8w29TYhbbLi/bvBdqKE4fUgg1pBKnV3FEaCWOWyA+m3WpORZr/j+9TKJtW8yBTF2/ZEODI9/QavHkVdGFp/Pjn4Q+u5hXapsP5sOH+OXXA1LiKuqJxiMNbhTkbdJTCy4llEt6NnqRT4dhg1V3nbdrm6dYMecA1yTOL4PWTE9L5VzPFlLBCvlG58AhehnN4uHsAYinyJ+AZ/NkVvELbfOBUuOO5syBIEtiqHU1k9XeISX5bsimrkUUhnGDxourN8SgUsCZVtKyGbyGzHXdjOhsAvOAswSRyIBddRdEZWP6GZhNK/yjwew9ehBo+3jEADu7Ay2n8mDc+TS7awUHg0OMzR0LABhqLD4hJEh/BEGyBdGlSJoXYXtr+3HS4ijzVpgi0paWXtdruGTknXBz+11qT1Q2inxaTzQCO46P3lfLpyS4fou2PH/PupwZgCxNhGlj4IvUuWEsTkqMWm6i4xCSMc9N1RDQoCVcuGItJ/MRWefais+3synowi/dESgJjkilnWnBTGvRWmaw8oR15257t7CHmCf8HOn7cwI8+NQBXMBEmAa8PMRemrNCEhLGEhDQKcGZWS319BX9PFBEwGTbRBhLbDcaV3drFcDqk5kCTd2JF1Wp0HraqBx8U0wwBTnbpCadwBA/gTH/CDrcCs93LV8E0YlmmcyQRQnjBa8JESmGUfIjK/7fkaDJpmD2QptFNVJU1bbtIAjjWQizepOKptRjbzR9Kag6xZmMLLjHOtcLT3Tx9o/0EcTT1XN3E45u24AiwEypDJXihKjQxjLprEwcmRKclaDNZCVqr/V8mYWyFADbusiY5hvgFoU2vio49RgJLn5OsReRFN6tabeetiiy0V7KFHT3HyZLx491u95sn4K1QQSPKM9hNT0wMVvAWbzDSVdrKw4zRjZMyJIHkfq1VAVCDl/bUhNKlGq0zGr05+YAceXVPCttVk0oqjVwMPt+BBefx4yPtGVkUsqY3CHDPiCM5ngupUwCdbkpd8kbPrCWHhkmtIKLEetF2499eS1jZlIPGYnlcPXeM2KD9vLS0bW3ktYNqUllpKLn5ZrsxlIzxvDu5eHxzGLctkZLEY4PgSOg2IUVVcUONzUDBEpRaMoXNmUc0tFZrTZquiLyKxrSm3DvIW9Fil+AkhXu5PhEPx9mUNwqypDvZWdKlhIJQY7vn2OsnmBeOWnYZ0m1iwbbw1U60by5om47iHRV6fOgzjMf/DAZrlP40Z7syxpLK0lJ0gqaAK1c2KQKu7tabTXkLFz0sCftuwX++MyNeNn68k5Buq23YQhUh0SNTJa1ioQ0p4nUG2y0XilF1JqODqdImloPS4Bp111DEWT0jJjVv95uX9BBV7eB3bUWcu0acSVM23YZdd8R8UbQUxJ9wdu3oMuhdt929ME+mh6JXJ8di2RxbTi6TbrDquqV4aUKR2iwT6aZbyOwEXN3DUsWr8Hn4EhwNyHuXHh7/pdaUjtR7vnDh/d8c9xD/s5f501eQ1+CuDiCvGhk1AN/4Tf74RfxPwD3toLarR0zNtsnPzmS64KIRk861dMWCU8ArasG9T9H0ZBpsDGnjtAOM2+/LuIb2iIUGXNgl5ZmKD/Tw8TlaAuihaFP5yrw18v4x1898zIdP+DDAX1bM3GAMvPgRP/cJn3zCW013nrhHkrITyvYuwOUkcHuKlRSW5C6rzIdY4ppnF7J8aAJbQepgbJYBjCY9usGXDKQxq7RZfh9eg5d1UHMVATRaD/4BHK93/1iAgYZ/+jqPn8Dn4UExmWrpa3+ZOK6MvM3bjwfzxNWA2dhs8+51XHSPJiaAhGSpWevEs5xHLXcEGFXYiCONySH3fPWq93JIsBiSWvWyc3CAN+EcXoT7rCSANloPPoa31rt/5PUA/gp8Q/jDD3hyrjzlR8VkanfOvB1XPubt17vzxAfdSVbD1pzAnfgyF3ycadOTOTXhpEUoLC1HZyNGW3dtmjeXgr2r56JNmRwdNNWaQVBddd6rh4MhviEB9EFRD/7RGvePvCbwAL4Mx/D6M541hHO4D3e7g6PafdcZVw689z7NGTwo5om7A8sPhccT6qKcl9NJl9aM/9kX+e59Hh1yPqGuCCZxuITcsmNaJ5F7d0q6J3H48TO1/+M57085q2icdu2U+W36Ldllz9Agiv4YGljoEN908EzvDOrBF98/vtJwCC/BF2AG75xxEmjmMIcjxbjoaxqOK3/4hPOZzhMPBpYPG44CM0dTVm1LjLtUWWVz1Bcf8tEx0zs8O2A2YVHRxKYOiy/aOVoAaMu0i7ubu43njjmd4ibMHU1sIDHaQNKrZND/FZYdk54oCXetjq7E7IVl9eAL7t+oHnwXXtLx44czzoRFHBztYVwtH1d+NOMkupZ5MTM+gUmq90X+Bh9zjRlmaQ+m7YMqUL/veemcecAtOJ0yq1JnVlN27di2E0+Klp1tAJ4KRw1eMI7aJjsO3R8kPSI3fUFXnIOfdQe86sIIVtWDL7h//Ok6vj8vwDk08NEcI8zz7OhBy+WwalzZeZ4+0XniRfst9pAJqQHDGLzVQ2pheZnnv1OWhwO43/AgcvAEXEVVpa4db9sGvNK8wjaENHkfFQ4Ci5i7dqnQlPoLQrHXZDvO3BIXZbJOBrOaEbML6sFL798I4FhKihjHMsPjBUZYCMFr6nvaArxqXPn4lCa+cHfSa2cP27g3Z3ziYTRrcbQNGLQmGF3F3cBdzzzX7AILx0IB9rbwn9kx2G1FW3Inic+ZLIsVvKR8Zwfj0l1fkqo8LWY1M3IX14OX3r9RKTIO+d9XzAI8qRPGPn/4NC2n6o4rN8XJ82TOIvuVA8zLKUHRFgBCetlDZlqR1gLKjS39xoE7Bt8UvA6BxuEDjU3tFsEijgA+615tmZkXKqiEENrh41iLDDZNq4pKTWR3LZfnos81LOuNa15cD956vLMsJd1rqYp51gDUQqMYm2XsxnUhD2jg1DM7SeuJxxgrmpfISSXVIJIS5qJJSvJPEQ49DQTVIbYWJ9QWa/E2+c/oPK1drmC7WSfJRNKBO5Yjvcp7Gc3dmmI/Xh1kDTEuiSnWqQf37h+fTMhGnDf6dsS8SQfQWlqqwXXGlc/PEZ/SC5mtzIV0nAshlQdM/LvUtYutrEZ/Y+EAFtq1k28zQhOwLr1AIeANzhF8t9qzTdZf2qRKO6MWE9ohBYwibbOmrFtNmg3mcS+tB28xv2uKd/agYCvOP+GkSc+0lr7RXzyufL7QbkUpjLjEWFLqOIkAGu2B0tNlO9Eau2W1qcOUvVRgKzypKIQZ5KI3q0MLzqTNRYqiZOqmtqloIRlmkBHVpHmRYV6/HixbO6UC47KOFJnoMrVyr7wYz+SlW6GUaghYbY1I6kkxA2W1fSJokUdSh2LQ1GAimRGm0MT+uu57H5l7QgOWxERpO9moLRPgTtquWCfFlGlIjQaRly9odmzMOWY+IBO5tB4sW/0+VWGUh32qYk79EidWKrjWuiLpiVNGFWFRJVktyeXWmbgBBzVl8anPuXyNJlBJOlKLTgAbi/EYHVHxWiDaVR06GnHQNpJcWcK2jJtiCfG2sEHLzuI66sGrMK47nPIInPnu799935aOK2cvmvubrE38ZzZjrELCmXM2hM7UcpXD2oC3+ECVp7xtIuxptJ0jUr3sBmBS47TVxlvJ1Sqb/E0uLdvLj0lLr29ypdd/eMX3f6lrxGlKwKQxEGvw0qHbkbwrF3uHKwVENbIV2wZ13kNEF6zD+x24aLNMfDTCbDPnEikZFyTNttxWBXDaBuM8KtI2rmaMdUY7cXcUPstqTGvBGSrFWIpNMfbdea990bvAOC1YX0qbc6smDS1mPxSJoW4fwEXvjMmhlijDRq6qale6aJEuFGoppYDoBELQzLBuh/mZNx7jkinv0EtnUp50lO9hbNK57lZaMAWuWR5Yo9/kYwcYI0t4gWM47Umnl3YmpeBPqSyNp3K7s2DSAS/39KRuEN2bS4xvowV3dFRMx/VFcp2Yp8w2nTO9hCXtHG1kF1L4KlrJr2wKfyq77R7MKpFKzWlY9UkhYxyHWW6nBWPaudvEAl3CGcNpSXPZ6R9BbBtIl6cHL3gIBi+42CYXqCx1gfGWe7Ap0h3luyXdt1MKy4YUT9xSF01G16YEdWsouW9mgDHd3veyA97H+Ya47ZmEbqMY72oPztCGvK0onL44AvgC49saZKkWRz4veWljE1FHjbRJaWv6ZKKtl875h4CziFCZhG5rx7tefsl0aRT1bMHZjm8dwL/6u7wCRysaQblQoG5yAQN5zpatMNY/+yf8z+GLcH/Qn0iX2W2oEfXP4GvwQHuIL9AYGnaO3zqAX6946nkgqZNnUhx43DIdQtMFeOPrgy/y3Yd85HlJWwjLFkU3kFwq28xPnuPhMWeS+tDLV9Otllq7pQCf3uXJDN9wFDiUTgefHaiYbdfi3b3u8+iY6TnzhgehI1LTe8lcd7s1wJSzKbahCRxKKztTLXstGAiu3a6rPuQs5pk9TWAan5f0BZmGf7Ylxzzk/A7PAs4QPPPAHeFQ2hbFHszlgZuKZsJcUmbDC40sEU403cEjczstOEypa+YxevL4QBC8oRYqWdK6b7sK25tfE+oDZgtOQ2Jg8T41HGcBE6fTWHn4JtHcu9S7uYgU5KSCkl/mcnq+5/YBXOEr6lCUCwOTOM1taOI8mSxx1NsCXBEmLKbMAg5MkwbLmpBaFOPrNSlO2HnLiEqW3tHEwd8AeiQLmn+2gxjC3k6AxREqvKcJbTEzlpLiw4rNZK6oJdidbMMGX9FULKr0AkW+2qDEPBNNm5QAt2Ik2nftNWHetubosHLo2nG4vQA7GkcVCgVCgaDixHqo9UUn1A6OshapaNR/LPRYFV8siT1cCtJE0k/3WtaNSuUZYKPnsVIW0xXWnMUxq5+En4Kvw/MqQmVXnAXj9Z+9zM98zM/Agy7F/qqj2Nh67b8HjFnPP3iBn/tkpdzwEJX/whIcQUXOaikeliCRGUk7tiwF0rItwMEhjkZ309hikFoRAmLTpEXWuHS6y+am/KB/fM50aLEhGnSMwkpxzOov4H0AvgovwJ1iGzDLtJn/9BU+fAINfwUe6FHSLhu83viV/+/HrOePX+STT2B9uWGbrMHHLldRBlhS/CJQmcRxJFqZica01XixAZsYiH1uolZxLrR/SgxVIJjkpQP4PE9sE59LKLr7kltSBogS5tyszzH8Fvw8/AS8rNOg0xUS9fIaHwb+6et8Q/gyvKRjf5OusOzGx8evA/BP4IP11uN/grca5O0lcsPLJ5YjwI4QkJBOHa0WdMZYGxPbh2W2nR9v3WxEWqgp/G3+6VZbRLSAAZ3BhdhAaUL33VUSw9yjEsvbaQ9u4A/gGXwZXoEHOuU1GSj2chf+Mo+f8IcfcAxfIKVmyunRbYQVnoevwgfw3TXXcw++xNuP4fhyueEUNttEduRVaDttddoP0eSxLe2LENk6itYxlrxBNBYrNNKSQmeaLcm9c8UsaB5WyO6675yyQIAWSDpBVoA/gxmcwEvwoDv0m58UE7gHn+fJOa8/Ywan8EKRfjsopF83eCglX/Sfr7OeaRoQfvt1CGvIDccH5BCvw1sWIzRGC/66t0VTcLZQZtm6PlAasbOJ9iwWtUo7biktTSIPxnR24jxP1ZKaqq+2RcXM9OrBAm/AAs7hDJ5bNmGb+KIfwCs8a3jnjBrOFeMjHSCdbKr+2uOLfnOd9eiA8Hvvwwq54VbP2OqwkB48Ytc4YEOiH2vTXqodabfWEOzso4qxdbqD5L6tbtNPECqbhnA708DZH4QOJUXqScmUlks7Ot6FBuZw3n2mEbaUX7kDzxHOOQk8nKWMzAzu6ZZ8sOFw4RK+6PcuXo9tB4SbMz58ApfKDXf3szjNIIbGpD5TKTRxGkEMLjLl+K3wlWXBsCUxIDU+jbOiysESqAy1MGUJpXgwbTWzNOVEziIXZrJ+VIztl1PUBxTSo0dwn2bOmfDRPD3TRTGlfbCJvO9KvuhL1hMHhB9wPuPRLGHcdOWG2xc0U+5bQtAJT0nRTewXL1pgk2+rZAdeWmz3jxAqfNQQdzTlbF8uJ5ecEIWvTkevAHpwz7w78QujlD/Lr491bD8/1vhM2yrUQRrWXNQY4fGilfctMWYjL72UL/qS9eiA8EmN88nbNdour+PBbbAjOjIa4iBhfFg6rxeKdEGcL6p3EWR1Qq2Qkhs2DrnkRnmN9tG2EAqmgPw6hoL7Oza7B+3SCrR9tRftko+Lsf2F/mkTndN2LmzuMcKTuj/mX2+4Va3ki16+nnJY+S7MefpkidxwnV+4wkXH8TKnX0tsYzYp29DOOoSW1nf7nTh2akYiWmcJOuTidSaqESrTYpwjJJNVGQr+rLI7WsqerHW6Kp/oM2pKuV7T1QY9gjqlZp41/WfKpl56FV/0kvXQFRyeQ83xaTu5E8p5dNP3dUF34ihyI3GSpeCsywSh22ZJdWto9winhqifb7VRvgktxp13vyjrS0EjvrRfZ62uyqddSWaWYlwTPAtJZ2oZ3j/Sgi/mi+6vpzesfAcWNA0n8xVyw90GVFGuZjTXEQy+6GfLGLMLL523f5E0OmxVjDoOuRiH91RKU+vtoCtH7TgmvBLvtFXWLW15H9GTdVw8ow4IlRLeHECN9ym1e9K0I+Cbnhgv4Yu+aD2HaQJ80XDqOzSGAV4+4yCqBxrsJAX6ZTIoX36QnvzhhzzMfFW2dZVLOJfo0zbce5OvwXMFaZ81mOnlTVXpDZsQNuoYWveketKb5+6JOOsgX+NTm7H49fUTlx+WLuWL7qxnOFh4BxpmJx0p2gDzA/BUARuS6phR+pUsY7MMboAHx5xNsSVfVZcYSwqCKrqon7zM+8ecCkeS4nm3rINuaWvVNnMRI1IRpxTqx8PZUZ0Br/UEduo3B3hNvmgZfs9gQPj8vIOxd2kndir3awvJ6BLvoUuOfFWNYB0LR1OQJoUySKb9IlOBx74q1+ADC2G6rOdmFdJcD8BkfualA+BdjOOzP9uUhGUEX/TwhZsUduwRr8wNuXKurCixLBgpQI0mDbJr9dIqUuV+92ngkJZ7xduCk2yZKbfWrH1VBiTg9VdzsgRjW3CVXCvAwDd+c1z9dWw9+B+8MJL/eY15ZQ/HqvTwVdsZn5WQsgRRnMaWaecu3jFvMBEmgg+FJFZsnSl0zjB9OqPYaBD7qmoVyImFvzi41usesV0julaAR9dfR15Xzv9sEruRDyk1nb+QaLU67T885GTls6YgcY+UiMa25M/pwGrbCfzkvR3e0jjtuaFtnwuagHTSb5y7boBH119HXhvwP487jJLsLJ4XnUkHX5sLbS61dpiAXRoZSCrFJ+EjpeU3puVfitngYNo6PJrAigKktmwjyQdZpfq30mmtulaAx9Zfx15Xzv+cyeuiBFUs9zq8Kq+XB9a4PVvph3GV4E3y8HENJrN55H1X2p8VyqSKwVusJDKzXOZzplWdzBUFK9e+B4+uv468xvI/b5xtSAkBHQaPvtqWzllVvEOxPbuiE6+j2pvjcKsbvI7txnRErgfH7LdXqjq0IokKzga14GzQ23SSbCQvO6r+Or7SMIr/efOkkqSdMnj9mBx2DRsiY29Uj6+qK9ZrssCKaptR6HKURdwUYeUWA2kPzVKQO8ku2nU3Anhs/XWkBx3F/7wJtCTTTIKftthue1ty9xvNYLY/zo5KSbIuKbXpbEdSyeRyYdAIwKY2neyoc3+k1XUaufYga3T9daMUx/r8z1s10ITknIO0kuoMt+TB8jK0lpayqqjsJ2qtXAYwBU932zinimgmd6mTRDnQfr88q36NAI+tv24E8Pr8zxtasBqx0+xHH9HhlrwsxxNUfKOHQaZBITNf0uccj8GXiVmXAuPEAKSdN/4GLHhs/XWj92dN/uetNuBMnVR+XWDc25JLjo5Mg5IZIq226tmCsip2zZliL213YrTlL2hcFjpCduyim3M7/eB16q/blQsv5X/esDRbtJeabLIosWy3ycavwLhtxdWzbMmHiBTiVjJo6lCLjXZsi7p9PEPnsq6X6wd4bP11i0rD5fzPm/0A6brrIsllenZs0lCJlU4abakR59enZKrKe3BZihbTxlyZ2zl1+g0wvgmA166/bhwDrcn/7Ddz0eWZuJvfSESug6NzZsox3Z04FIxz0mUjMwVOOVTq1CQ0AhdbBGVdjG/CgsfUX7esJl3K/7ytWHRv683praW/8iDOCqWLLhpljDY1ZpzK75QiaZoOTpLKl60auHS/97oBXrv+umU9+FL+5+NtLFgjqVLCdbmj7pY5zPCPLOHNCwXGOcLquOhi8CmCWvbcuO73XmMUPab+ug3A6/A/78Bwe0bcS2+tgHn4J5pyS2WbOck0F51Vq3LcjhLvZ67p1ABbaL2H67bg78BfjKi/jr3+T/ABV3ilLmNXTI2SpvxWBtt6/Z//D0z/FXaGbSBgylzlsEGp+5//xrd4/ae4d8DUUjlslfIYS3t06HZpvfQtvv0N7AHWqtjP2pW08QD/FLy//da38vo8PNlKHf5y37Dxdfe/oj4kVIgFq3koLReSR76W/bx//n9k8jonZxzWTANVwEniDsg87sOSd/z7//PvMp3jQiptGVWFX2caezzAXwfgtzYUvbr0iozs32c3Uge7varH+CNE6cvEYmzbPZ9hMaYDdjK4V2iecf6EcEbdUDVUARda2KzO/JtCuDbNQB/iTeL0EG1JSO1jbXS+nLxtPMDPw1fh5+EPrgSEKE/8Gry5A73ui87AmxwdatyMEBCPNOCSKUeRZ2P6Myb5MRvgCHmA9ywsMifU+AYXcB6Xa5GibUC5TSyerxyh0j6QgLVpdyhfArRTTLqQjwe4HOD9s92D4Ap54odXAPBWLAwB02igG5Kkc+piN4lvODIFGAZgT+EO4Si1s7fjSR7vcQETUkRm9O+MXyo9OYhfe4xt9STQ2pcZRLayCV90b4D3jR0DYAfyxJ+eywg2IL7NTMXna7S/RpQ63JhWEM8U41ZyQGjwsVS0QBrEKLu8xwZsbi4wLcCT+OGidPIOCe1PiSc9Qt+go+vYqB7cG+B9d8cAD+WJPz0Am2gxXgU9IneOqDpAAXOsOltVuMzpdakJXrdPCzXiNVUpCeOos5cxnpQT39G+XVLhs1osQVvJKPZyNq8HDwd4d7pNDuWJPxVX7MSzqUDU6gfadKiNlUFTzLeFHHDlzO4kpa7aiKhBPGKwOqxsBAmYkOIpipyXcQSPlRTf+Tii0U3EJGaZsDER2qoB3h2hu0qe+NNwUooYU8y5mILbJe6OuX+2FTKy7bieTDAemaQyQ0CPthljSWO+xmFDIYiESjM5xKd6Ik5lvLq5GrQ3aCMLvmCA9wowLuWJb9xF59hVVP6O0CrBi3ZjZSNOvRy+I6klNVRJYRBaEzdN+imiUXQ8iVF8fsp+W4JXw7WISW7fDh7lptWkCwZ4d7QTXyBPfJMYK7SijjFppGnlIVJBJBYj7eUwtiP1IBXGI1XCsjNpbjENVpSAJ2hq2LTywEly3hUYazt31J8w2+aiLx3g3fohXixPfOMYm6zCGs9LVo9MoW3MCJE7R5u/WsOIjrqBoHUO0bJE9vxBpbhsd3+Nb4/vtPCZ4oZYCitNeYuC/8UDvDvy0qvkiW/cgqNqRyzqSZa/s0mqNGjtKOoTm14zZpUauiQgVfqtQiZjq7Q27JNaSK5ExRcrGCXO1FJYh6jR6CFqK7bZdQZ4t8g0rSlPfP1RdBtqaa9diqtzJkQ9duSryi2brQXbxDwbRUpFMBHjRj8+Nt7GDKgvph9okW7LX47gu0SpGnnFQ1S1lYldOsC7hYteR574ZuKs7Ei1lBsfdz7IZoxzzCVmmVqaSySzQbBVAWDek+N4jh9E/4VqZrJjPwiv9BC1XcvOWgO8275CVyBPvAtTVlDJfZkaZGU7NpqBogAj/xEHkeAuJihWYCxGN6e8+9JtSegFXF1TrhhLGP1fak3pebgPz192/8gB4d/6WT7+GdYnpH7hH/DJzzFiYPn/vjW0SgNpTNuPIZoAEZv8tlGw4+RLxy+ZjnKa5NdFoC7UaW0aduoYse6+bXg1DLg6UfRYwmhGEjqPvF75U558SANrElK/+MdpXvmqBpaXOa/MTZaa1DOcSiLaw9j0NNNst3c+63c7EKTpkvKHzu6bPbP0RkuHAVcbRY8ijP46MIbQeeT1mhA+5PV/inyDdQipf8LTvMXbwvoDy7IruDNVZKTfV4CTSRUYdybUCnGU7KUTDxLgCknqUm5aAW6/1p6eMsOYsphLzsHrE0Y/P5bQedx1F/4yPHnMB3/IOoTU9+BL8PhtjuFKBpZXnYNJxTuv+2XqolKR2UQgHhS5novuxVySJhBNRF3SoKK1XZbbXjVwWNyOjlqWJjrWJIy+P5bQedyldNScP+HZ61xKSK3jyrz+NiHG1hcOLL/+P+PDF2gOkekKGiNWKgJ+8Z/x8Iv4DdQHzcpZyF4v19I27w9/yPGDFQvmEpKtqv/TLiWMfn4sofMm9eAH8Ao0zzh7h4sJqYtxZd5/D7hkYPneDzl5idlzNHcIB0jVlQ+8ULzw/nc5/ojzl2juE0apD7LRnJxe04dMz2iOCFNtGFpTuXA5AhcTRo8mdN4kz30nVjEC4YTZQy4gpC7GlTlrePKhGsKKgeXpCYeO0MAd/GH7yKQUlXPLOasOH3FnSphjHuDvEu4gB8g66oNbtr6eMbFIA4fIBJkgayoXriw2XEDQPJrQeROAlY6aeYOcMf+IVYTU3XFlZufMHinGywaW3YLpObVBAsbjF4QJMsVUSayjk4voPsHJOQfPWDhCgDnmDl6XIRerD24HsGtw86RMHOLvVSHrKBdeVE26gKB5NKHzaIwLOmrqBWJYZDLhASG16c0Tn+CdRhWDgWXnqRZUTnPIHuMJTfLVpkoYy5CzylHVTGZMTwkGAo2HBlkQplrJX6U+uF1wZz2uwS1SQ12IqWaPuO4baZaEFBdukksJmkcTOm+YJSvoqPFzxFA/YUhIvWxcmSdPWTWwbAKVp6rxTtPFUZfKIwpzm4IoMfaYQLWgmlG5FME2gdBgm+J7J+rtS/XBbaVLsR7bpPQnpMFlo2doWaVceHk9+MkyguZNCJ1He+kuHTWyQAzNM5YSUg/GlTk9ZunAsg1qELVOhUSAK0LABIJHLKbqaEbHZLL1VA3VgqoiOKXYiS+HRyaEKgsfIqX64HYWbLRXy/qWoylIV9gudL1OWBNgBgTNmxA6b4txDT4gi3Ri7xFSLxtXpmmYnzAcWDZgY8d503LFogz5sbonDgkKcxGsWsE1OI+rcQtlgBBCSOKD1mtqYpIU8cTvBmAT0yZe+zUzeY92fYjTtGipXLhuR0ePoHk0ofNWBX+lo8Z7pAZDk8mEw5L7dVyZZoE/pTewbI6SNbiAL5xeygW4xPRuLCGbhcO4RIeTMFYHEJkYyEO9HmJfXMDEj/LaH781wHHZEtqSQ/69UnGpzH7LKIAZEDSPJnTesJTUa+rwTepI9dLJEawYV+ZkRn9g+QirD8vF8Mq0jFQ29js6kCS3E1+jZIhgPNanHdHFqFvPJLHqFwQqbIA4jhDxcNsOCCQLDomaL/dr5lyJaJU6FxPFjO3JOh3kVMcROo8u+C+jo05GjMF3P3/FuDLn5x2M04xXULPwaS6hBYki+MrMdZJSgPHlcB7nCR5bJ9Kr5ACUn9jk5kivdd8tk95SOGrtqu9lr2IhK65ZtEl7ZKrp7DrqwZfRUSN1el7+7NJxZbywOC8neNKTch5vsTEMNsoCCqHBCqIPRjIPkm0BjvFODGtto99rCl+d3wmHkW0FPdpZtC7MMcVtGFQjJLX5bdQ2+x9ypdc313uj8xlsrfuLgWXz1cRhZvJYX0iNVBRcVcmCXZs6aEf3RQF2WI/TcCbKmGU3IOoDJGDdDub0+hYckt6PlGu2BcxmhbTdj/klhccLGJMcqRjMJP1jW2ETqLSWJ/29MAoORluJ+6LPffBZbi5gqi5h6catQpmOT7/OFf5UorRpLzCqcMltBLhwd1are3kztrSzXO0LUbXRQcdLh/RdSZ+swRm819REDrtqzC4es6Gw4JCKlSnjYVpo0xeq33PrADbFLL3RuCmObVmPN+24kfa+AojDuM4umKe2QwCf6EN906HwjujaitDs5o0s1y+k3lgbT2W2i7FJdnwbLXhJUBq/9liTctSmFC/0OqUinb0QddTWamtjbHRFuWJJ6NpqZ8vO3fZJ37Db+2GkaPYLGHs7XTTdiFQJ68SkVJFVmY6McR5UycflNCsccHFaV9FNbR4NttLxw4pQ7wJd066Z0ohVbzihaxHVExd/ay04oxUKWt+AsdiQ9OUyZ2krzN19IZIwafSTFgIBnMV73ADj7V/K8u1MaY2sJp2HWm0f41tqwajEvdHWOJs510MaAqN4aoSiPCXtN2KSi46dUxHdaMquar82O1x5jqhDGvqmoE9LfxcY3zqA7/x3HA67r9ZG4O6Cuxu12/+TP+eLP+I+HErqDDCDVmBDO4larujNe7x8om2rMug0MX0rL1+IWwdwfR+p1TNTyNmVJ85ljWzbWuGv8/C7HD/izjkHNZNYlhZcUOKVzKFUxsxxN/kax+8zPWPSFKw80rJr9Tizyj3o1gEsdwgWGoxPezDdZ1TSENE1dLdNvuKL+I84nxKesZgxXVA1VA1OcL49dFlpFV5yJMhzyCmNQ+a4BqusPJ2bB+xo8V9u3x48VVIEPS/mc3DvAbXyoYr6VgDfh5do5hhHOCXMqBZUPhWYbWZECwVJljLgMUWOCB4MUuMaxGNUQDVI50TQ+S3kFgIcu2qKkNSHVoM0SHsgoZxP2d5HH8B9woOk4x5bPkKtAHucZsdykjxuIpbUrSILgrT8G7G5oCW+K0990o7E3T6AdW4TilH5kDjds+H64kS0mz24grtwlzDHBJqI8YJQExotPvoC4JBq0lEjjQkyBZ8oH2LnRsQ4Hu1QsgDTJbO8fQDnllitkxuVskoiKbRF9VwzMDvxHAdwB7mD9yCplhHFEyUWHx3WtwCbSMMTCUCcEmSGlg4gTXkHpZXWQ7kpznK3EmCHiXInqndkQjunG5kxTKEeGye7jWz9cyMR2mGiFQ15ENRBTbCp+Gh86vAyASdgmJq2MC6hoADQ3GosP0QHbnMHjyBQvQqfhy/BUbeHd5WY/G/9LK/8Ka8Jd7UFeNWEZvzPb458Dn8DGLOe3/wGL/4xP+HXlRt+M1PE2iLhR8t+lfgxsuh7AfO2AOf+owWhSZRYQbd622hbpKWKuU+XuvNzP0OseRDa+mObgDHJUSc/pKx31QdKffQ5OIJpt8GWjlgTwMc/w5MPCR/yl1XC2a2Yut54SvOtMev55Of45BOat9aWG27p2ZVORRvnEk1hqWMVUmqa7S2YtvlIpspuF1pt0syuZS2NV14mUidCSfzQzg+KqvIYCMljIx2YK2AO34fX4GWdu5xcIAb8MzTw+j/lyWM+Dw/gjs4GD6ehNgA48kX/AI7XXM/XAN4WHr+9ntywqoCakCqmKP0rmQrJJEErG2Upg1JObr01lKQy4jskWalKYfJ/EDLMpjNSHFEUAde2fltaDgmrNaWQ9+AAb8I5vKjz3L1n1LriB/BXkG/wwR9y/oRX4LlioHA4LzP2inzRx/DWmutRweFjeP3tNeSGlaE1Fde0OS11yOpmbIp2u/jF1n2RRZviJM0yBT3IZl2HWImKjQOxIyeU325b/qWyU9Moj1o07tS0G7qJDoGHg5m8yeCxMoEH8GU45tnrNM84D2l297DQ9t1YP7jki/7RmutRweEA77/HWXOh3HCxkRgldDQkAjNTMl2Iloc1qN5JfJeeTlyTRzxURTdn1Ixv2uKjs12AbdEWlBtmVdk2k7FFwj07PCZ9XAwW3dG+8xKzNFr4EnwBZpy9Qzhh3jDXebBpYcpuo4fQ44u+fD1dweEnHzI7v0xuuOALRUV8rXpFyfSTQYkhd7IHm07jpyhlkCmI0ALYqPTpUxXS+z4jgDj1Pflvmz5ecuItpIBxyTHpSTGWd9g1ApfD/bvwUhL4nT1EzqgX7cxfCcNmb3mPL/qi9SwTHJ49oj5ZLjccbTG3pRmlYi6JCG0mQrAt1+i2UXTZ2dv9IlQpN5naMYtviaXlTrFpoMsl3bOAFEa8sqPj2WCMrx3Yjx99qFwO59Aw/wgx+HlqNz8oZvA3exRDvuhL1jMQHPaOJ0+XyA3fp1OfM3qObEVdhxjvynxNMXQV4+GJyvOEFqeQBaIbbO7i63rpxCltdZShPFxkjM2FPVkn3TG+Rp9pO3l2RzFegGfxGDHIAh8SteR0C4HopXzRF61nheDw6TFN05Ebvq8M3VKKpGjjO6r7nhudTEGMtYM92HTDaR1FDMXJ1eThsbKfywyoWwrzRSXkc51flG3vIid62h29bIcFbTGhfV+faaB+ohj7dPN0C2e2lC96+XouFByen9AsunLDJZ9z7NExiUc0OuoYW6UZkIyx2YUR2z6/TiRjyKMx5GbbjLHvHuf7YmtKghf34LJfx63Yg8vrvN2zC7lY0x0tvKezo4HmGYDU+Gab6dFL+KI761lDcNifcjLrrr9LWZJctG1FfU1uwhoQE22ObjdfkSzY63CbU5hzs21WeTddH2BaL11Gi7lVdlxP1nkxqhnKhVY6knS3EPgVGg1JpN5cP/hivujOelhXcPj8HC/LyI6MkteVjlolBdMmF3a3DbsuAYhL44dxzthWSN065xxUd55Lmf0wRbOYOqH09/o9WbO2VtFdaMb4qBgtFJoT1SqoN8wPXMoXLb3p1PUEhxfnnLzGzBI0Ku7FxrKsNJj/8bn/H8fPIVOd3rfrklUB/DOeO+nkghgSPzrlPxluCMtOnDL4Yml6dK1r3vsgMxgtPOrMFUZbEUbTdIzii5beq72G4PD0DKnwjmBULUVFmy8t+k7fZ3pKc0Q4UC6jpVRqS9Umv8bxw35flZVOU1X7qkjnhZlsMbk24qQ6Hz7QcuL6sDC0iHHki96Uh2UdvmgZnjIvExy2TeJdMDZNSbdZyAHe/Yd1xsQhHiKzjh7GxQ4yqMPaywPkjMamvqrYpmO7Knad+ZQC5msCuAPWUoxrxVhrGv7a+KLXFhyONdTMrZ7ke23qiO40ZJUyzgYyX5XyL0mV7NiUzEs9mjtbMN0dERqwyAJpigad0B3/zRV7s4PIfXSu6YV/MK7+OrYe/JvfGMn/PHJe2fyUdtnFrKRNpXV0Y2559aWPt/G4BlvjTMtXlVIWCnNyA3YQBDmYIodFz41PvXPSa6rq9lWZawZ4dP115HXV/M/tnFkkrBOdzg6aP4pID+MZnTJ1SuuB6iZlyiox4HT2y3YBtkUKWooacBQUDTpjwaDt5poBHl1/HXltwP887lKKXxNUEyPqpGTyA699UqY/lt9yGdlUKra0fFWS+36iylVWrAyd7Uw0CZM0z7xKTOduznLIjG2Hx8cDPLb+OvK6Bv7n1DYci4CxUuRxrjBc0bb4vD3rN5Zz36ntLb83eVJIB8LiIzCmn6SMPjlX+yNlTjvIGjs+QzHPf60Aj62/jrzG8j9vYMFtm1VoRWCJdmw7z9N0t+c8cxZpPeK4aTRicS25QhrVtUp7U578chk4q04Wx4YoQSjFryUlpcQ1AbxZ/XVMknIU//OGl7Q6z9Zpxi0+3yFhSkjUDpnCIUhLWVX23KQ+L9vKvFKI0ZWFQgkDLvBoylrHNVmaw10zwCPrr5tlodfnf94EWnQ0lFRWy8pW9LbkLsyUVDc2NSTHGDtnD1uMtchjbCeb1mpxFP0YbcClhzdLu6lfO8Bj6q+bdT2sz/+8SZCV7VIxtt0DUn9L7r4cLYWDSXnseEpOGFuty0qbOVlS7NNzs5FOGJUqQpl2Q64/yBpZf90sxbE+//PGdZ02HSipCbmD6NItmQ4Lk5XUrGpDMkhbMm2ZVheNYV+VbUWTcv99+2NyX1VoafSuC+AN6q9bFIMv5X/eagNWXZxEa9JjlMwNWb00akGUkSoepp1/yRuuqHGbUn3UdBSTxBU6SEVklzWRUkPndVvw2PrrpjvxOvzPmwHc0hpmq82npi7GRro8dXp0KXnUQmhZbRL7NEVp1uuZmO45vuzKsHrktS3GLWXODVjw+vXXLYx4Hf7njRPd0i3aoAGX6W29GnaV5YdyDj9TFkakje7GHYzDoObfddHtOSpoi2SmzJHrB3hM/XUDDEbxP2/oosszcRlehWXUvzHv4TpBVktHqwenFo8uLVmy4DKLa5d3RtLrmrM3aMFr1183E4sewf+85VWeg1c5ag276NZrM9IJVNcmLEvDNaV62aq+14IAOGFsBt973Ra8Xv11YzXwNfmft7Jg2oS+XOyoC8/cwzi66Dhmgk38kUmP1CUiYWOX1bpD2zWXt2FCp7uq8703APAa9dfNdscR/M/bZLIyouVxqJfeWvG9Je+JVckHQ9+CI9NWxz+blX/KYYvO5n2tAP/vrlZ7+8/h9y+9qeB/Hnt967e5mevX10rALDWK//FaAT5MXdBXdP0C/BAes792c40H+AiAp1e1oH8HgH94g/Lttx1gp63op1eyoM/Bvw5/G/7xFbqJPcCXnmBiwDPb/YKO4FX4OjyCb289db2/Noqicw4i7N6TVtoz8tNwDH+8x/i6Ae7lmaQVENzJFb3Di/BFeAwz+Is9SjeQySpPqbLFlNmyz47z5a/AF+AYFvDmHqibSXTEzoT4Gc3OALaqAP4KPFUJ6n+1x+rGAM6Zd78bgJ0a8QN4GU614vxwD9e1Amy6CcskNrczLx1JIp6HE5UZD/DBHrFr2oNlgG4Odv226BodoryjGJ9q2T/AR3vQrsOCS0ctXZi3ruLlhpFDJYl4HmYtjQCP9rhdn4suySLKDt6wLcC52h8xPlcjju1fn+yhuw4LZsAGUuo2b4Fx2UwQu77uqRHXGtg92aN3tQCbFexc0uk93vhTXbct6y7MulLycoUljx8ngDMBg1tvJjAazpEmOtxlzclvj1vQf1Tx7QlPDpGpqgtdSKz/d9/hdy1vTfFHSmC9dGDZbLiezz7Ac801HirGZsWjydfZyPvHXL/Y8Mjzg8BxTZiuwKz4Eb8sBE9zznszmjvFwHKPIWUnwhqfVRcd4Ck0K6ate48m1oOfrX3/yOtvAsJ8zsPAM89sjnddmuLuDPjX9Bu/L7x7xpMzFk6nWtyQfPg278Gn4Aekz2ZgOmU9eJ37R14vwE/BL8G3aibCiWMWWDQ0ZtkPMnlcGeAu/Ag+8ZyecU5BPuy2ILD+sQqyZhAKmn7XZd+jIMTN9eBL7x95xVLSX4On8EcNlXDqmBlqS13jG4LpmGbkF/0CnOi3H8ETOIXzmnmtb0a16Tzxj1sUvQCBiXZGDtmB3KAefPH94xcUa/6vwRn80GOFyjEXFpba4A1e8KQfFF+259tx5XS4egYn8fQsLGrqGrHbztr+uByTahWuL1NUGbDpsnrwBfePPwHHIf9X4RnM4Z2ABWdxUBlqQ2PwhuDxoS0vvqB1JzS0P4h2nA/QgTrsJFn+Y3AOjs9JFC07CGWX1oNX3T/yHOzgDjwPn1PM3g9Jk9lZrMEpxnlPmBbjyo2+KFXRU52TJM/2ALcY57RUzjObbjqxVw++4P6RAOf58pcVsw9Daje3htriYrpDOonre3CudSe6bfkTEgHBHuDiyu5MCsc7BHhYDx7ePxLjqigXZsw+ijMHFhuwBmtoTPtOxOrTvYJDnC75dnUbhfwu/ZW9AgYd+peL68HD+0emKquiXHhWjJg/UrkJYzuiaL3E9aI/ytrCvAd4GcYZMCkSQxfUg3v3j8c4e90j5ZTPdvmJJGHnOCI2nHS8081X013pHuBlV1gB2MX1YNmWLHqqGN/TWmG0y6clJWthxNUl48q38Bi8vtMKyzzpFdSDhxZ5WBA5ZLt8Jv3895DduBlgbPYAj8C4B8hO68FDkoh5lydC4FiWvBOVqjYdqjiLv92t8yPDjrDaiHdUD15qkSURSGmXJwOMSxWAXYwr3zaAufJ66l+94vv3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/wHuD9tQd4f+0B3l97gPfXHuD9tQd4f+0B3l97gG8LwP8G/AL8O/A5OCq0Ys2KIdv/qOIXG/4mvFAMF16gZD+2Xvu/B8as5+8bfllWyg0zaNO5bfXj6vfhhwD86/Aq3NfRS9t9WPnhfnvCIw/CT8GLcFTMnpntdF/z9V+PWc/vWoIH+FL3Znv57PitcdGP4R/C34avw5fgRVUInCwbsn1yyA8C8zm/BH8NXoXnVE6wVPjdeCI38kX/3+Ct9dbz1pTmHFRu+Hm4O9Ch3clr99negxfwj+ER/DR8EV6B5+DuQOnTgUw5rnkY+FbNU3gNXh0o/JYTuWOvyBf9FvzX663HH/HejO8LwAl8Hl5YLTd8q7sqA3wbjuExfAFegQdwfyDoSkWY8swzEf6o4Qyewefg+cHNbqMQruSL/u/WWc+E5g7vnnEXgDmcDeSGb/F4cBcCgT+GGRzDU3hZYburAt9TEtHgbM6JoxJ+6NMzzTcf6c2bycv2+KK/f+l6LBzw5IwfqZJhA3M472pWT/ajKxnjv4AFnMEpnBTPND6s2J7qHbPAqcMK74T2mZ4VGB9uJA465It+/eL1WKhYOD7xHOkr1ajK7d0C4+ke4Hy9qXZwpgLr+Znm/uNFw8xQOSy8H9IzjUrd9+BIfenYaylf9FsXr8fBAadnPIEDna8IBcwlxnuA0/Wv6GAWPd7dDIKjMdSWueAsBj4M7TOd06qBbwDwKr7oleuxMOEcTuEZTHWvDYUO7aHqAe0Bbq+HEFRzOz7WVoTDQkVds7A4sIIxfCQdCefFRoIOF/NFL1mPab/nvOakSL/Q1aFtNpUb/nFOVX6gzyg/1nISyDfUhsokIzaBR9Kxm80s5mK+6P56il1jXic7nhQxsxSm3OwBHl4fFdLqi64nDQZvqE2at7cWAp/IVvrN6/BFL1mPhYrGMBfOi4PyjuSGf6wBBh7p/FZTghCNWGgMzlBbrNJoPJX2mW5mwZfyRffXo7OFi5pZcS4qZUrlViptrXtw+GQoyhDPS+ANjcGBNRiLCQDPZPMHuiZfdFpPSTcQwwKYdRNqpkjm7AFeeT0pJzALgo7g8YYGrMHS0iocy+YTm2vyRUvvpXCIpQ5pe666TJrcygnScUf/p0NDs/iAI/nqDHC8TmQT8x3NF91l76oDdQGwu61Z6E0ABv7uO1dbf/37Zlv+Zw/Pbh8f1s4Avur6657/+YYBvur6657/+YYBvur6657/+YYBvur6657/+aYBvuL6657/+VMA8FXWX/f8zzcN8BXXX/f8zzcNMFdbf93zP38KLPiK6697/uebtuArrr/u+Z9vGmCusP6653/+1FjwVdZf9/zPN7oHX339dc//fNMu+irrr3v+50+Bi+Zq6697/uebA/jz8Pudf9ht/fWv517J/XUzAP8C/BAeX9WCDrUpZ3/dEMBxgPcfbtTVvsYV5Yn32u03B3Ac4P3b8I+vxNBKeeL9dRMAlwO83959qGO78sT769oB7g3w/vGVYFzKE++v6wV4OMD7F7tckFkmT7y/rhHgpQO8b+4Y46XyxPvrugBeNcB7BRiX8sT767oAvmCA9woAHsoT76+rBJjLBnh3txOvkifeX1dswZcO8G6N7sXyxPvr6i340gHe3TnqVfLE++uKAb50gHcXLnrX8sR7gNdPRqwzwLu7Y/FO5Yn3AK9jXCMGeHdgxDuVJ75VAI8ljP7PAb3/RfjcZfePHBB+79dpfpH1CanN30d+mT1h9GqAxxJGM5LQeeQ1+Tb+EQJrElLb38VHQ94TRq900aMIo8cSOo+8Dp8QfsB8zpqE1NO3OI9Zrj1h9EV78PqE0WMJnUdeU6E+Jjyk/hbrEFIfeWbvId8H9oTRFwdZaxJGvziW0Hn0gqYB/wyZ0PwRlxJST+BOw9m77Amj14ii1yGM/txYQudN0qDzGe4EqfA/5GJCagsHcPaEPWH0esekSwmjRxM6b5JEcZ4ww50ilvAOFxBSx4yLW+A/YU8YvfY5+ALC6NGEzhtmyZoFZoarwBLeZxUhtY4rc3bKnjB6TKJjFUHzJoTOozF2YBpsjcyxDgzhQ1YRUse8+J4wenwmaylB82hC5w0zoRXUNXaRBmSMQUqiWSWkLsaVqc/ZE0aPTFUuJWgeTei8SfLZQeMxNaZSIzbII4aE1Nmr13P2hNHjc9E9guYNCZ032YlNwESMLcZiLQHkE4aE1BFg0yAR4z1h9AiAGRA0jyZ03tyIxWMajMPWBIsxYJCnlITU5ShiHYdZ94TR4wCmSxg9jtB5KyPGYzymAYexWEMwAPIsAdYdV6aObmNPGD0aYLoEzaMJnTc0Ygs+YDw0GAtqxBjkuP38bMRWCHn73xNGjz75P73WenCEJnhwyVe3AEe8TtKdJcYhBl97wuhNAObK66lvD/9J9NS75v17wuitAN5fe4D31x7g/bUHeH/tAd5fe4D3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/w/toDvAd4f/24ABzZ8o+KLsSLS+Pv/TqTb3P4hKlQrTGh+fbIBT0Axqznnb+L/V2mb3HkN5Mb/nEHeK7d4IcDld6lmDW/iH9E+AH1MdOw/Jlu2T1xNmY98sv4wHnD7D3uNHu54WUuOsBTbQuvBsPT/UfzNxGYzwkP8c+Yz3C+r/i6DcyRL/rZ+utRwWH5PmfvcvYEt9jLDS/bg0/B64DWKrQM8AL8FPwS9beQCe6EMKNZYJol37jBMy35otdaz0Bw2H/C2Smc7+WGB0HWDELBmOByA3r5QONo4V+DpzR/hFS4U8wMW1PXNB4TOqYz9urxRV++ntWCw/U59Ty9ebdWbrgfRS9AYKKN63ZokZVygr8GZ/gfIhZXIXPsAlNjPOLBby5c1eOLvmQ9lwkOy5x6QV1j5TYqpS05JtUgUHUp5toHGsVfn4NX4RnMCe+AxTpwmApTYxqMxwfCeJGjpXzRF61nbcHhUBPqWze9svwcHJ+S6NPscKrEjug78Dx8Lj3T8D4YxGIdxmJcwhi34fzZUr7olevZCw5vkOhoClq5zBPZAnygD/Tl9EzDh6kl3VhsHYcDEb+hCtJSvuiV69kLDm+WycrOTArHmB5/VYyP6jOVjwgGawk2zQOaTcc1L+aLXrKeveDwZqlKrw8U9Y1p66uK8dEzdYwBeUQAY7DbyYNezBfdWQ97weEtAKYQg2xJIkuveAT3dYeLGH+ShrWNwZgN0b2YL7qznr3g8JYAo5bQBziPjx7BPZ0d9RCQp4UZbnFdzBddor4XHN4KYMrB2qHFRIzzcLAHQZ5the5ovui94PCWAPefaYnxIdzRwdHCbuR4B+tbiy96Lzi8E4D7z7S0mEPd+eqO3cT53Z0Y8SV80XvB4Z0ADJi/f7X113f+7p7/+UYBvur6657/+YYBvur6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+VMA8FXWX/f8z58OgK+y/rrnf75RgLna+uue//lTA/CV1V/3/M837aKvvv6653++UQvmauuve/7nTwfAV1N/3fM/fzr24Cuuv+75nz8FFnxl9dc9//MOr/8/glixwRuUfM4AAAAASUVORK5CYII="}getSearchTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}dispose(){this.edgesRT.dispose(),this.weightsRT.dispose(),this.areaTexture.dispose(),this.searchTexture.dispose(),this.materialEdges.dispose(),this.materialWeights.dispose(),this.materialBlend.dispose(),this.fsQuad.dispose()}}class eg extends Wi{getType(){return kbe}set edgesRT(e){this._objRef&&(this._objRef.edgesRT=e)}get edgesRT(){return this._objRef?.edgesRT}set weightsRT(e){this._objRef&&(this._objRef.weightsRT=e)}get weightsRT(){return this._objRef?.weightsRT}set areaTexture(e){this._objRef&&(this._objRef.areaTexture=e)}get areaTexture(){return this._objRef?.areaTexture}set searchTexture(e){this._objRef&&(this._objRef.searchTexture=e)}get searchTexture(){return this._objRef?.searchTexture}set uniformsEdges(e){this._objRef&&(this._objRef.uniformsEdges=e)}get uniformsEdges(){return this._objRef?.uniformsEdges}set materialEdges(e){this._objRef&&(this._objRef.materialEdges=e)}get materialEdges(){return this._objRef?.materialEdges}set uniformsWeights(e){this._objRef&&(this._objRef.uniformsWeights=e)}get uniformsWeights(){return this._objRef?.uniformsWeights}set materialWeights(e){this._objRef&&(this._objRef.materialWeights=e)}get materialWeights(){return this._objRef?.materialWeights}set uniformsBlend(e){this._objRef&&(this._objRef.uniformsBlend=e)}get uniformsBlend(){return this._objRef?.uniformsBlend}set materialBlend(e){this._objRef&&(this._objRef.materialBlend=e)}get materialBlend(){return this._objRef?.materialBlend}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}}eg.\u0275fac=function(){let i;return function(t){return(i||(i=ce(eg)))(t||eg)}}(),eg.\u0275cmp=K({type:eg,selectors:[["th-sMAAPass"]],inputs:{edgesRT:"edgesRT",weightsRT:"weightsRT",areaTexture:"areaTexture",searchTexture:"searchTexture",uniformsEdges:"uniformsEdges",materialEdges:"materialEdges",uniformsWeights:"uniformsWeights",materialWeights:"materialWeights",uniformsBlend:"uniformsBlend",materialBlend:"materialBlend",fsQuad:"fsQuad"},features:[oe([{provide:Li,useExisting:le(()=>eg)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Za extends Tt{getType(){return vc}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}}Za.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Za)))(t||Za)}}(),Za.\u0275cmp=K({type:Za,selectors:[["th-sphereGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>Za)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class tg extends no{getType(){return Cb}get isSpotLight(){return this._objRef?.isSpotLight}get type(){return this._objRef?.type}set position(e){this._objRef&&(this._objRef.position=Qe(this._objRef.position,e))}get position(){return this._objRef?.position}set target(e){this._objRef&&(this._objRef.target=e)}get target(){return this._objRef?.target}set castShadow(e){this._objRef&&(this._objRef.castShadow=e)}get castShadow(){return this._objRef?.castShadow}set intensity(e){this._objRef&&(this._objRef.intensity=e)}get intensity(){return this._objRef?.intensity}set distance(e){this._objRef&&(this._objRef.distance=e)}get distance(){return this._objRef?.distance}set angle(e){this._objRef&&(this._objRef.angle=e)}get angle(){return this._objRef?.angle}set decay(e){this._objRef&&(this._objRef.decay=e)}get decay(){return this._objRef?.decay}set shadow(e){this._objRef&&(this._objRef.shadow=e)}get shadow(){return this._objRef?.shadow}set power(e){this._objRef&&(this._objRef.power=e)}get power(){return this._objRef?.power}set penumbra(e){this._objRef&&(this._objRef.penumbra=e)}get penumbra(){return this._objRef?.penumbra}set map(e){this._objRef&&(this._objRef.map=e)}get map(){return this._objRef?.map}}tg.\u0275fac=function(){let i;return function(t){return(i||(i=ce(tg)))(t||tg)}}(),tg.\u0275cmp=K({type:tg,selectors:[["th-spotLight"]],inputs:{position:"position",target:"target",castShadow:"castShadow",intensity:"intensity",distance:"distance",angle:"angle",decay:"decay",shadow:"shadow",power:"power",penumbra:"penumbra",map:"map"},features:[oe([{provide:Ke,useExisting:le(()=>tg)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class ig extends Ke{getType(){return X4}get type(){return this._objRef?.type}set cone(e){this._objRef&&(this._objRef.cone=e)}get cone(){return this._objRef?.cone}set light(e){this._objRef&&(this._objRef.light=e)}get light(){return this._objRef?.light}set matrix(e){this._objRef&&(this._objRef.matrix=Qe(this._objRef.matrix,e))}get matrix(){return this._objRef?.matrix}set color(e){this._objRef&&(this._objRef.color=e)}get color(){return this._objRef?.color}set matrixAutoUpdate(e){this._objRef&&(this._objRef.matrixAutoUpdate=e)}get matrixAutoUpdate(){return this._objRef?.matrixAutoUpdate}}ig.\u0275fac=function(){let i;return function(t){return(i||(i=ce(ig)))(t||ig)}}(),ig.\u0275cmp=K({type:ig,selectors:[["th-spotLightHelper"]],inputs:{cone:"cone",light:"light",matrix:"matrix",color:"color",matrixAutoUpdate:"matrixAutoUpdate"},features:[oe([{provide:Ke,useExisting:le(()=>ig)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class ng extends Ke{getType(){return qT}get isSprite(){return this._objRef?.isSprite}get type(){return this._objRef?.type}set castShadow(e){this._objRef&&(this._objRef.castShadow=e)}get castShadow(){return this._objRef?.castShadow}set geometry(e){this._objRef&&(this._objRef.geometry=e)}get geometry(){return this._objRef?.geometry}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set center(e){this._objRef&&(this._objRef.center=Qe(this._objRef.center,e))}get center(){return this._objRef?.center}}ng.\u0275fac=function(){let i;return function(t){return(i||(i=ce(ng)))(t||ng)}}(),ng.\u0275cmp=K({type:ng,selectors:[["th-sprite"]],inputs:{castShadow:"castShadow",geometry:"geometry",material:"material",center:"center"},features:[oe([{provide:Ke,useExisting:le(()=>ng)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class rg extends Ei{getType(){return $y}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set color(e){this._objRef&&(this._objRef.color=Qe(this._objRef.color,e))}get color(){return this._objRef?.color}set map(e){this._objRef&&(this._objRef.map=e)}get map(){return this._objRef?.map}set alphaMap(e){this._objRef&&(this._objRef.alphaMap=e)}get alphaMap(){return this._objRef?.alphaMap}set rotation(e){this._objRef&&(this._objRef.rotation=e)}get rotation(){return this._objRef?.rotation}set sizeAttenuation(e){this._objRef&&(this._objRef.sizeAttenuation=e)}get sizeAttenuation(){return this._objRef?.sizeAttenuation}set transparent(e){this._objRef&&(this._objRef.transparent=e)}get transparent(){return this._objRef?.transparent}set fog(e){this._objRef&&(this._objRef.fog=e)}get fog(){return this._objRef?.fog}get isSpriteMaterial(){return this._objRef?.isSpriteMaterial}}rg.\u0275fac=function(){let i;return function(t){return(i||(i=ce(rg)))(t||rg)}}(),rg.\u0275cmp=K({type:rg,selectors:[["th-spriteMaterial"]],inputs:{type:"type",color:"color",map:"map",alphaMap:"alphaMap",rotation:"rotation",sizeAttenuation:"sizeAttenuation",transparent:"transparent",fog:"fog"},features:[oe([{provide:Ei,useExisting:le(()=>rg)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class MG extends wn{constructor(e,t,n,r){super(),this.scene=e,this.camera=t,this.sampleLevel=4,this.unbiased=!0,this.clearColor=void 0!==n?n:0,this.clearAlpha=void 0!==r?r:0,this._oldClearColor=new Be;const s=Wr;this.copyUniforms=mi.clone(s.uniforms),this.copyMaterial=new Dt({uniforms:this.copyUniforms,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blending:hf,blendEquation:vs,blendDst:N_,blendDstAlpha:N_,blendSrc:pf,blendSrcAlpha:N_}),this.fsQuad=new yr(this.copyMaterial)}dispose(){this.sampleRenderTarget&&(this.sampleRenderTarget.dispose(),this.sampleRenderTarget=null),this.copyMaterial.dispose(),this.fsQuad.dispose()}setSize(e,t){this.sampleRenderTarget&&this.sampleRenderTarget.setSize(e,t)}render(e,t,n){this.sampleRenderTarget||(this.sampleRenderTarget=new Gt(n.width,n.height),this.sampleRenderTarget.texture.name="SSAARenderPass.sample");const r=Ube[Math.max(0,Math.min(this.sampleLevel,5))],s=e.autoClear;e.autoClear=!1,e.getClearColor(this._oldClearColor);const o=e.getClearAlpha(),a=1/r.length;this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture;const c={fullWidth:n.width,fullHeight:n.height,offsetX:0,offsetY:0,width:n.width,height:n.height},d=Object.assign({},this.camera.view);d.enabled&&Object.assign(c,d);for(let u=0;u<r.length;u++){const h=r[u];this.camera.setViewOffset&&this.camera.setViewOffset(c.fullWidth,c.fullHeight,c.offsetX+.0625*h[0],c.offsetY+.0625*h[1],c.width,c.height);let f=a;this.unbiased&&(f+=.03125*((u+.5)/r.length-.5)),this.copyUniforms.opacity.value=f,e.setClearColor(this.clearColor,this.clearAlpha),e.setRenderTarget(this.sampleRenderTarget),e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(this.renderToScreen?null:t),0===u&&(e.setClearColor(0,0),e.clear()),this.fsQuad.render(e)}this.camera.setViewOffset&&d.enabled?this.camera.setViewOffset(d.fullWidth,d.fullHeight,d.offsetX,d.offsetY,d.width,d.height):this.camera.clearViewOffset&&this.camera.clearViewOffset(),e.autoClear=s,e.setClearColor(this._oldClearColor,o)}}const Ube=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]];class Ju extends Wi{getType(){return MG}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set sampleLevel(e){this._objRef&&(this._objRef.sampleLevel=e)}get sampleLevel(){return this._objRef?.sampleLevel}set unbiased(e){this._objRef&&(this._objRef.unbiased=e)}get unbiased(){return this._objRef?.unbiased}set clearColor(e){this._objRef&&(this._objRef.clearColor=e)}get clearColor(){return this._objRef?.clearColor}set clearAlpha(e){this._objRef&&(this._objRef.clearAlpha=e)}get clearAlpha(){return this._objRef?.clearAlpha}set copyUniforms(e){this._objRef&&(this._objRef.copyUniforms=e)}get copyUniforms(){return this._objRef?.copyUniforms}set copyMaterial(e){this._objRef&&(this._objRef.copyMaterial=e)}get copyMaterial(){return this._objRef?.copyMaterial}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set sampleRenderTarget(e){this._objRef&&(this._objRef.sampleRenderTarget=e)}get sampleRenderTarget(){return this._objRef?.sampleRenderTarget}}Ju.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Ju)))(t||Ju)}}(),Ju.\u0275cmp=K({type:Ju,selectors:[["th-sSAARenderPass"]],inputs:{scene:"scene",camera:"camera",sampleLevel:"sampleLevel",unbiased:"unbiased",clearColor:"clearColor",clearAlpha:"clearAlpha",copyUniforms:"copyUniforms",copyMaterial:"copyMaterial",fsQuad:"fsQuad",sampleRenderTarget:"sampleRenderTarget"},features:[oe([{provide:Li,useExisting:le(()=>Ju)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const Nw={defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new pe},cameraProjectionMatrix:{value:new We},cameraInverseProjectionMatrix:{value:new We},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tNormal;\n\t\tuniform sampler2D tDepth;\n\t\tuniform sampler2D tNoise;\n\n\t\tuniform vec3 kernel[ KERNEL_SIZE ];\n\n\t\tuniform vec2 resolution;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform mat4 cameraProjectionMatrix;\n\t\tuniform mat4 cameraInverseProjectionMatrix;\n\n\t\tuniform float kernelRadius;\n\t\tuniform float minDistance; // avoid artifacts caused by neighbour fragments with minimal depth difference\n\t\tuniform float maxDistance; // avoid the influence of fragments which are too far away\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t}\n\n\t\tfloat getLinearDepth( const in vec2 screenPosition ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tvec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\n\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\n\n\t\t\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\n\n\t\t\tclipPosition *= clipW; // unprojection.\n\n\t\t\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\n\n\t\t}\n\n\t\tvec3 getViewNormal( const in vec2 screenPosition ) {\n\n\t\t\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = getDepth( vUv );\n\t\t\tfloat viewZ = getViewZ( depth );\n\n\t\t\tvec3 viewPosition = getViewPosition( vUv, depth, viewZ );\n\t\t\tvec3 viewNormal = getViewNormal( vUv );\n\n\t\t\tvec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );\n\t\t\tvec3 random = vec3( texture2D( tNoise, vUv * noiseScale ).r );\n\n\t\t\t// compute matrix used to reorient a kernel vector\n\n\t\t\tvec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );\n\t\t\tvec3 bitangent = cross( viewNormal, tangent );\n\t\t\tmat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );\n\n\t\t float occlusion = 0.0;\n\n\t\t for ( int i = 0; i < KERNEL_SIZE; i ++ ) {\n\n\t\t\t\tvec3 sampleVector = kernelMatrix * kernel[ i ]; // reorient sample vector in view space\n\t\t\t\tvec3 samplePoint = viewPosition + ( sampleVector * kernelRadius ); // calculate sample point\n\n\t\t\t\tvec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 ); // project point and calculate NDC\n\t\t\t\tsamplePointNDC /= samplePointNDC.w;\n\n\t\t\t\tvec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5; // compute uv coordinates\n\n\t\t\t\tfloat realDepth = getLinearDepth( samplePointUv ); // get linear depth from depth texture\n\t\t\t\tfloat sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar ); // compute linear depth of the sample view Z value\n\t\t\t\tfloat delta = sampleDepth - realDepth;\n\n\t\t\t\tif ( delta > minDistance && delta < maxDistance ) { // if fragment is before sample point, increase occlusion\n\n\t\t\t\t\tocclusion += 1.0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tocclusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );\n\n\t\t\tgl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );\n\n\t\t}"},jw_defines={PERSPECTIVE_CAMERA:1},jw_uniforms={tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},jw_vertexShader="varying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",jw_fragmentShader="uniform sampler2D tDepth;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tfloat getLinearDepth( const in vec2 screenPosition ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = getLinearDepth( vUv );\n\t\t\tgl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );\n\n\t\t}",Uw={uniforms:{tDiffuse:{value:null},resolution:{value:new pe}},vertexShader:"varying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"uniform sampler2D tDiffuse;\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec2 texelSize = ( 1.0 / resolution );\n\t\t\tfloat result = 0.0;\n\n\t\t\tfor ( int i = - 2; i <= 2; i ++ ) {\n\n\t\t\t\tfor ( int j = - 2; j <= 2; j ++ ) {\n\n\t\t\t\t\tvec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;\n\t\t\t\t\tresult += texture2D( tDiffuse, vUv + offset ).r;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );\n\n\t\t}"};let EG=(()=>{class i extends wn{constructor(t,n,r,s){super(),this.width=void 0!==r?r:512,this.height=void 0!==s?s:512,this.clear=!0,this.camera=n,this.scene=t,this.kernelRadius=8,this.kernelSize=32,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(),this.generateRandomKernelRotations();const o=new qf;o.format=dc,o.type=lc,this.beautyRenderTarget=new Gt(this.width,this.height),this.normalRenderTarget=new Gt(this.width,this.height,{minFilter:Zt,magFilter:Zt,depthTexture:o}),this.ssaoRenderTarget=new Gt(this.width,this.height),this.blurRenderTarget=this.ssaoRenderTarget.clone(),this.ssaoMaterial=new Dt({defines:Object.assign({},Nw.defines),uniforms:mi.clone(Nw.uniforms),vertexShader:Nw.vertexShader,fragmentShader:Nw.fragmentShader,blending:Xt}),this.ssaoMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new fp,this.normalMaterial.blending=Xt,this.blurMaterial=new Dt({defines:Object.assign({},Uw.defines),uniforms:mi.clone(Uw.uniforms),vertexShader:Uw.vertexShader,fragmentShader:Uw.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new Dt({defines:Object.assign({},jw_defines),uniforms:mi.clone(jw_uniforms),vertexShader:jw_vertexShader,fragmentShader:jw_fragmentShader,blending:Xt}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new Dt({uniforms:mi.clone(Wr.uniforms),vertexShader:Wr.vertexShader,fragmentShader:Wr.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:oy,blendDst:ff,blendEquation:vs,blendSrcAlpha:sy,blendDstAlpha:ff,blendEquationAlpha:vs}),this.fsQuad=new yr(null),this.originalClearColor=new Be}dispose(){this.beautyRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(t,n){switch(!1===t.capabilities.isWebGL2&&(this.noiseTexture.format=dy),t.setRenderTarget(this.beautyRenderTarget),t.clear(),t.render(this.scene,this.camera),this.overrideVisibility(),this.renderOverride(t,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(t,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(t,this.blurMaterial,this.blurRenderTarget),this.output){case i.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=Xt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:n);break;case i.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=Xt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:n);break;case i.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Xt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:n);break;case i.OUTPUT.Depth:this.renderPass(t,this.depthRenderMaterial,this.renderToScreen?null:n);break;case i.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=Xt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:n);break;case i.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Xt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:n),this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=hf,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:n);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}renderPass(t,n,r,s,o){t.getClearColor(this.originalClearColor);const a=t.getClearAlpha(),l=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,null!=s&&(t.setClearColor(s),t.setClearAlpha(o||0),t.clear()),this.fsQuad.material=n,this.fsQuad.render(t),t.autoClear=l,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}renderOverride(t,n,r,s,o){t.getClearColor(this.originalClearColor);const a=t.getClearAlpha(),l=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,o=n.clearAlpha||o,null!=(s=n.clearColor||s)&&(t.setClearColor(s),t.setClearAlpha(o||0),t.clear()),this.scene.overrideMaterial=n,t.render(this.scene,this.camera),this.scene.overrideMaterial=null,t.autoClear=l,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}setSize(t,n){this.width=t,this.height=n,this.beautyRenderTarget.setSize(t,n),this.ssaoRenderTarget.setSize(t,n),this.normalRenderTarget.setSize(t,n),this.blurRenderTarget.setSize(t,n),this.ssaoMaterial.uniforms.resolution.value.set(t,n),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(t,n)}generateSampleKernel(){const t=this.kernelSize,n=this.kernel;for(let r=0;r<t;r++){const s=new R;s.x=2*Math.random()-1,s.y=2*Math.random()-1,s.z=Math.random(),s.normalize();let o=r/t;o=vt.lerp(.1,1,o*o),s.multiplyScalar(o),n.push(s)}}generateRandomKernelRotations(){const r=new kw,o=new Float32Array(16);for(let a=0;a<16;a++){const l=2*Math.random()-1,c=2*Math.random()-1;o[a]=r.noise3d(l,c,0)}this.noiseTexture=new Ba(o,4,4,Al,Nn),this.noiseTexture.wrapS=xo,this.noiseTexture.wrapT=xo,this.noiseTexture.needsUpdate=!0}overrideVisibility(){const n=this._visibilityCache;this.scene.traverse(function(r){n.set(r,r.visible),(r.isPoints||r.isLine)&&(r.visible=!1)})}restoreVisibility(){const n=this._visibilityCache;this.scene.traverse(function(r){const s=n.get(r);r.visible=s}),n.clear()}}return i.OUTPUT={Default:0,SSAO:1,Blur:2,Beauty:3,Depth:4,Normal:5},i})();class eh extends Wi{getType(){return EG}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set width(e){this._objRef&&(this._objRef.width=e)}get width(){return this._objRef?.width}set height(e){this._objRef&&(this._objRef.height=e)}get height(){return this._objRef?.height}set clear(e){this._objRef&&(this._objRef.clear=e)}get clear(){return this._objRef?.clear}set kernelRadius(e){this._objRef&&(this._objRef.kernelRadius=e)}get kernelRadius(){return this._objRef?.kernelRadius}set kernelSize(e){this._objRef&&(this._objRef.kernelSize=e)}get kernelSize(){return this._objRef?.kernelSize}set kernel(e){this._objRef&&(this._objRef.kernel=e)}get kernel(){return this._objRef?.kernel}set noiseTexture(e){this._objRef&&(this._objRef.noiseTexture=e)}get noiseTexture(){return this._objRef?.noiseTexture}set output(e){this._objRef&&(this._objRef.output=e)}get output(){return this._objRef?.output}set minDistance(e){this._objRef&&(this._objRef.minDistance=e)}get minDistance(){return this._objRef?.minDistance}set maxDistance(e){this._objRef&&(this._objRef.maxDistance=e)}get maxDistance(){return this._objRef?.maxDistance}set beautyRenderTarget(e){this._objRef&&(this._objRef.beautyRenderTarget=e)}get beautyRenderTarget(){return this._objRef?.beautyRenderTarget}set normalRenderTarget(e){this._objRef&&(this._objRef.normalRenderTarget=e)}get normalRenderTarget(){return this._objRef?.normalRenderTarget}set ssaoRenderTarget(e){this._objRef&&(this._objRef.ssaoRenderTarget=e)}get ssaoRenderTarget(){return this._objRef?.ssaoRenderTarget}set blurRenderTarget(e){this._objRef&&(this._objRef.blurRenderTarget=e)}get blurRenderTarget(){return this._objRef?.blurRenderTarget}set ssaoMaterial(e){this._objRef&&(this._objRef.ssaoMaterial=e)}get ssaoMaterial(){return this._objRef?.ssaoMaterial}set normalMaterial(e){this._objRef&&(this._objRef.normalMaterial=e)}get normalMaterial(){return this._objRef?.normalMaterial}set blurMaterial(e){this._objRef&&(this._objRef.blurMaterial=e)}get blurMaterial(){return this._objRef?.blurMaterial}set depthRenderMaterial(e){this._objRef&&(this._objRef.depthRenderMaterial=e)}get depthRenderMaterial(){return this._objRef?.depthRenderMaterial}set copyMaterial(e){this._objRef&&(this._objRef.copyMaterial=e)}get copyMaterial(){return this._objRef?.copyMaterial}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set originalClearColor(e){this._objRef&&(this._objRef.originalClearColor=Qe(this._objRef.originalClearColor,e))}get originalClearColor(){return this._objRef?.originalClearColor}}eh.OUTPUT=EG.OUTPUT,eh.\u0275fac=function(){let i;return function(t){return(i||(i=ce(eh)))(t||eh)}}(),eh.\u0275cmp=K({type:eh,selectors:[["th-sSAOPass"]],inputs:{scene:"scene",camera:"camera",width:"width",height:"height",clear:"clear",kernelRadius:"kernelRadius",kernelSize:"kernelSize",kernel:"kernel",noiseTexture:"noiseTexture",output:"output",minDistance:"minDistance",maxDistance:"maxDistance",beautyRenderTarget:"beautyRenderTarget",normalRenderTarget:"normalRenderTarget",ssaoRenderTarget:"ssaoRenderTarget",blurRenderTarget:"blurRenderTarget",ssaoMaterial:"ssaoMaterial",normalMaterial:"normalMaterial",blurMaterial:"blurMaterial",depthRenderMaterial:"depthRenderMaterial",copyMaterial:"copyMaterial",fsQuad:"fsQuad",originalClearColor:"originalClearColor"},features:[oe([{provide:Li,useExisting:le(()=>eh)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const Ka={defines:{MAX_STEP:0,PERSPECTIVE_CAMERA:!0,DISTANCE_ATTENUATION:!0,FRESNEL:!0,INFINITE_THICK:!1,SELECTIVE:!1},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tMetalness:{value:null},tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new pe},cameraProjectionMatrix:{value:new We},cameraInverseProjectionMatrix:{value:new We},opacity:{value:.5},maxDistance:{value:180},cameraRange:{value:0},thickness:{value:.018}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}\n\n\t",fragmentShader:'\n\t\t// precision highp float;\n\t\tprecision highp sampler2D;\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D tDepth;\n\t\tuniform sampler2D tNormal;\n\t\tuniform sampler2D tMetalness;\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float cameraRange;\n\t\tuniform vec2 resolution;\n\t\tuniform float opacity;\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform float maxDistance;\n\t\tuniform float thickness;\n\t\tuniform mat4 cameraProjectionMatrix;\n\t\tuniform mat4 cameraInverseProjectionMatrix;\n\t\t#include <packing>\n\t\tfloat pointToLineDistance(vec3 x0, vec3 x1, vec3 x2) {\n\t\t\t//x0: point, x1: linePointA, x2: linePointB\n\t\t\t//https://mathworld.wolfram.com/Point-LineDistance3-Dimensional.html\n\t\t\treturn length(cross(x0-x1,x0-x2))/length(x2-x1);\n\t\t}\n\t\tfloat pointPlaneDistance(vec3 point,vec3 planePoint,vec3 planeNormal){\n\t\t\t// https://mathworld.wolfram.com/Point-PlaneDistance.html\n\t\t\t//// https://en.wikipedia.org/wiki/Plane_(geometry)\n\t\t\t//// http://paulbourke.net/geometry/pointlineplane/\n\t\t\tfloat a=planeNormal.x,b=planeNormal.y,c=planeNormal.z;\n\t\t\tfloat x0=point.x,y0=point.y,z0=point.z;\n\t\t\tfloat x=planePoint.x,y=planePoint.y,z=planePoint.z;\n\t\t\tfloat d=-(a*x+b*y+c*z);\n\t\t\tfloat distance=(a*x0+b*y0+c*z0+d)/sqrt(a*a+b*b+c*c);\n\t\t\treturn distance;\n\t\t}\n\t\tfloat getDepth( const in vec2 uv ) {\n\t\t\treturn texture2D( tDepth, uv ).x;\n\t\t}\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#ifdef PERSPECTIVE_CAMERA\n\t\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#else\n\t\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#endif\n\t\t}\n\t\tvec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {\n\t\t\tvec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc\n\t\t\tclipPosition *= clipW; //clip\n\t\t\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;//view\n\t\t}\n\t\tvec3 getViewNormal( const in vec2 uv ) {\n\t\t\treturn unpackRGBToNormal( texture2D( tNormal, uv ).xyz );\n\t\t}\n\t\tvec2 viewPositionToXY(vec3 viewPosition){\n\t\t\tvec2 xy;\n\t\t\tvec4 clip=cameraProjectionMatrix*vec4(viewPosition,1);\n\t\t\txy=clip.xy;//clip\n\t\t\tfloat clipW=clip.w;\n\t\t\txy/=clipW;//NDC\n\t\t\txy=(xy+1.)/2.;//uv\n\t\t\txy*=resolution;//screen\n\t\t\treturn xy;\n\t\t}\n\t\tvoid main(){\n\t\t\t#ifdef SELECTIVE\n\t\t\t\tfloat metalness=texture2D(tMetalness,vUv).r;\n\t\t\t\tif(metalness==0.) return;\n\t\t\t#endif\n\n\t\t\tfloat depth = getDepth( vUv );\n\t\t\tfloat viewZ = getViewZ( depth );\n\t\t\tif(-viewZ>=cameraFar) return;\n\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ+cameraProjectionMatrix[3][3];\n\t\t\tvec3 viewPosition=getViewPosition( vUv, depth, clipW );\n\n\t\t\tvec2 d0=gl_FragCoord.xy;\n\t\t\tvec2 d1;\n\n\t\t\tvec3 viewNormal=getViewNormal( vUv );\n\n\t\t\t#ifdef PERSPECTIVE_CAMERA\n\t\t\t\tvec3 viewIncidentDir=normalize(viewPosition);\n\t\t\t\tvec3 viewReflectDir=reflect(viewIncidentDir,viewNormal);\n\t\t\t#else\n\t\t\t\tvec3 viewIncidentDir=vec3(0,0,-1);\n\t\t\t\tvec3 viewReflectDir=reflect(viewIncidentDir,viewNormal);\n\t\t\t#endif\n\n\t\t\tfloat maxReflectRayLen=maxDistance/dot(-viewIncidentDir,viewNormal);\n\t\t\t// dot(a,b)==length(a)*length(b)*cos(theta) // https://www.mathsisfun.com/algebra/vectors-dot-product.html\n\t\t\t// if(a.isNormalized&&b.isNormalized) dot(a,b)==cos(theta)\n\t\t\t// maxDistance/maxReflectRayLen=cos(theta)\n\t\t\t// maxDistance/maxReflectRayLen==dot(a,b)\n\t\t\t// maxReflectRayLen==maxDistance/dot(a,b)\n\n\t\t\tvec3 d1viewPosition=viewPosition+viewReflectDir*maxReflectRayLen;\n\t\t\t#ifdef PERSPECTIVE_CAMERA\n\t\t\t\tif(d1viewPosition.z>-cameraNear){\n\t\t\t\t\t//https://tutorial.math.lamar.edu/Classes/CalcIII/EqnsOfLines.aspx\n\t\t\t\t\tfloat t=(-cameraNear-viewPosition.z)/viewReflectDir.z;\n\t\t\t\t\td1viewPosition=viewPosition+viewReflectDir*t;\n\t\t\t\t}\n\t\t\t#endif\n\t\t\td1=viewPositionToXY(d1viewPosition);\n\n\t\t\tfloat totalLen=length(d1-d0);\n\t\t\tfloat xLen=d1.x-d0.x;\n\t\t\tfloat yLen=d1.y-d0.y;\n\t\t\tfloat totalStep=max(abs(xLen),abs(yLen));\n\t\t\tfloat xSpan=xLen/totalStep;\n\t\t\tfloat ySpan=yLen/totalStep;\n\t\t\tfor(float i=0.;i<float(MAX_STEP);i++){\n\t\t\t\tif(i>=totalStep) break;\n\t\t\t\tvec2 xy=vec2(d0.x+i*xSpan,d0.y+i*ySpan);\n\t\t\t\tif(xy.x<0.||xy.x>resolution.x||xy.y<0.||xy.y>resolution.y) break;\n\t\t\t\tfloat s=length(xy-d0)/totalLen;\n\t\t\t\tvec2 uv=xy/resolution;\n\n\t\t\t\tfloat d = getDepth(uv);\n\t\t\t\tfloat vZ = getViewZ( d );\n\t\t\t\tif(-vZ>=cameraFar) continue;\n\t\t\t\tfloat cW = cameraProjectionMatrix[2][3] * vZ+cameraProjectionMatrix[3][3];\n\t\t\t\tvec3 vP=getViewPosition( uv, d, cW );\n\n\t\t\t\t#ifdef PERSPECTIVE_CAMERA\n\t\t\t\t\t// https://comp.nus.edu.sg/~lowkl/publications/lowk_persp_interp_techrep.pdf\n\t\t\t\t\tfloat recipVPZ=1./viewPosition.z;\n\t\t\t\t\tfloat viewReflectRayZ=1./(recipVPZ+s*(1./d1viewPosition.z-recipVPZ));\n\t\t\t\t#else\n\t\t\t\t\tfloat viewReflectRayZ=viewPosition.z+s*(d1viewPosition.z-viewPosition.z);\n\t\t\t\t#endif\n\n\t\t\t\t// if(viewReflectRayZ>vZ) continue; // will cause "npm run make-screenshot webgl_postprocessing_ssr" high probability hang.\n\t\t\t\t// https://github.com/mrdoob/three.js/pull/21539#issuecomment-821061164\n\t\t\t\tif(viewReflectRayZ<=vZ){\n\n\t\t\t\t\tbool hit;\n\t\t\t\t\t#ifdef INFINITE_THICK\n\t\t\t\t\t\thit=true;\n\t\t\t\t\t#else\n\t\t\t\t\t\tfloat away=pointToLineDistance(vP,viewPosition,d1viewPosition);\n\n\t\t\t\t\t\tfloat minThickness;\n\t\t\t\t\t\tvec2 xyNeighbor=xy;\n\t\t\t\t\t\txyNeighbor.x+=1.;\n\t\t\t\t\t\tvec2 uvNeighbor=xyNeighbor/resolution;\n\t\t\t\t\t\tvec3 vPNeighbor=getViewPosition(uvNeighbor,d,cW);\n\t\t\t\t\t\tminThickness=vPNeighbor.x-vP.x;\n\t\t\t\t\t\tminThickness*=3.;\n\t\t\t\t\t\tfloat tk=max(minThickness,thickness);\n\n\t\t\t\t\t\thit=away<=tk;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tif(hit){\n\t\t\t\t\t\tvec3 vN=getViewNormal( uv );\n\t\t\t\t\t\tif(dot(viewReflectDir,vN)>=0.) continue;\n\t\t\t\t\t\tfloat distance=pointPlaneDistance(vP,viewPosition,viewNormal);\n\t\t\t\t\t\tif(distance>maxDistance) break;\n\t\t\t\t\t\tfloat op=opacity;\n\t\t\t\t\t\t#ifdef DISTANCE_ATTENUATION\n\t\t\t\t\t\t\tfloat ratio=1.-(distance/maxDistance);\n\t\t\t\t\t\t\tfloat attenuation=ratio*ratio;\n\t\t\t\t\t\t\top=opacity*attenuation;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#ifdef FRESNEL\n\t\t\t\t\t\t\tfloat fresnelCoe=(dot(viewIncidentDir,viewReflectDir)+1.)/2.;\n\t\t\t\t\t\t\top*=fresnelCoe;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tvec4 reflectColor=texture2D(tDiffuse,uv);\n\t\t\t\t\t\tgl_FragColor.xyz=reflectColor.xyz;\n\t\t\t\t\t\tgl_FragColor.a=op;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t'},Vw_defines={PERSPECTIVE_CAMERA:1},Vw_uniforms={tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},Vw_vertexShader="\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}\n\n\t",Vw_fragmentShader="\n\n\t\tuniform sampler2D tDepth;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tfloat getLinearDepth( const in vec2 uv ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, uv ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, uv ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = getLinearDepth( vUv );\n\t\t\tfloat d = 1.0 - depth;\n\t\t\t// d=(d-.999)*1000.;\n\t\t\tgl_FragColor = vec4( vec3( d ), 1.0 );\n\n\t\t}\n\n\t",Gc={uniforms:{tDiffuse:{value:null},resolution:{value:new pe},opacity:{value:.5}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}\n\n\t",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec2 resolution;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\t//reverse engineering from PhotoShop blur filter, then change coefficient\n\n\t\t\tvec2 texelSize = ( 1.0 / resolution );\n\n\t\t\tvec4 c=texture2D(tDiffuse,vUv);\n\n\t\t\tvec2 offset;\n\n\t\t\toffset=(vec2(-1,0))*texelSize;\n\t\t\tvec4 cl=texture2D(tDiffuse,vUv+offset);\n\n\t\t\toffset=(vec2(1,0))*texelSize;\n\t\t\tvec4 cr=texture2D(tDiffuse,vUv+offset);\n\n\t\t\toffset=(vec2(0,-1))*texelSize;\n\t\t\tvec4 cb=texture2D(tDiffuse,vUv+offset);\n\n\t\t\toffset=(vec2(0,1))*texelSize;\n\t\t\tvec4 ct=texture2D(tDiffuse,vUv+offset);\n\n\t\t\t// float coeCenter=.5;\n\t\t\t// float coeSide=.125;\n\t\t\tfloat coeCenter=.2;\n\t\t\tfloat coeSide=.2;\n\t\t\tfloat a=c.a*coeCenter+cl.a*coeSide+cr.a*coeSide+cb.a*coeSide+ct.a*coeSide;\n\t\t\tvec3 rgb=(c.rgb*c.a*coeCenter+cl.rgb*cl.a*coeSide+cr.rgb*cr.a*coeSide+cb.rgb*cb.a*coeSide+ct.rgb*ct.a*coeSide)/a;\n\t\t\tgl_FragColor=vec4(rgb,a);\n\n\t\t}\n\t"};let SG=(()=>{class i extends wn{constructor({renderer:t,scene:n,camera:r,width:s,height:o,selects:a,bouncing:l=!1,groundReflector:c}){super(),this.width=void 0!==s?s:512,this.height=void 0!==o?o:512,this.clear=!0,this.renderer=t,this.scene=n,this.camera=r,this.groundReflector=c,this.opacity=Ka.uniforms.opacity.value,this.output=0,this.maxDistance=Ka.uniforms.maxDistance.value,this.thickness=Ka.uniforms.thickness.value,this.tempColor=new Be,this._selects=a,this.selective=Array.isArray(this._selects),Object.defineProperty(this,"selects",{get(){return this._selects},set(u){this._selects!==u&&(this._selects=u,Array.isArray(u)?(this.selective=!0,this.ssrMaterial.defines.SELECTIVE=!0,this.ssrMaterial.needsUpdate=!0):(this.selective=!1,this.ssrMaterial.defines.SELECTIVE=!1,this.ssrMaterial.needsUpdate=!0))}}),this._bouncing=l,Object.defineProperty(this,"bouncing",{get(){return this._bouncing},set(u){this._bouncing!==u&&(this._bouncing=u,this.ssrMaterial.uniforms.tDiffuse.value=u?this.prevRenderTarget.texture:this.beautyRenderTarget.texture)}}),this.blur=!0,this._distanceAttenuation=Ka.defines.DISTANCE_ATTENUATION,Object.defineProperty(this,"distanceAttenuation",{get(){return this._distanceAttenuation},set(u){this._distanceAttenuation!==u&&(this._distanceAttenuation=u,this.ssrMaterial.defines.DISTANCE_ATTENUATION=u,this.ssrMaterial.needsUpdate=!0)}}),this._fresnel=Ka.defines.FRESNEL,Object.defineProperty(this,"fresnel",{get(){return this._fresnel},set(u){this._fresnel!==u&&(this._fresnel=u,this.ssrMaterial.defines.FRESNEL=u,this.ssrMaterial.needsUpdate=!0)}}),this._infiniteThick=Ka.defines.INFINITE_THICK,Object.defineProperty(this,"infiniteThick",{get(){return this._infiniteThick},set(u){this._infiniteThick!==u&&(this._infiniteThick=u,this.ssrMaterial.defines.INFINITE_THICK=u,this.ssrMaterial.needsUpdate=!0)}});const d=new qf;d.type=G_,d.minFilter=Zt,d.magFilter=Zt,this.beautyRenderTarget=new Gt(this.width,this.height,{minFilter:Zt,magFilter:Zt,depthTexture:d,depthBuffer:!0}),this.prevRenderTarget=new Gt(this.width,this.height,{minFilter:Zt,magFilter:Zt}),this.normalRenderTarget=new Gt(this.width,this.height,{minFilter:Zt,magFilter:Zt,type:pn}),this.metalnessRenderTarget=new Gt(this.width,this.height,{minFilter:Zt,magFilter:Zt}),this.ssrRenderTarget=new Gt(this.width,this.height,{minFilter:Zt,magFilter:Zt}),this.blurRenderTarget=this.ssrRenderTarget.clone(),this.blurRenderTarget2=this.ssrRenderTarget.clone(),this.ssrMaterial=new Dt({defines:Object.assign({},Ka.defines,{MAX_STEP:Math.sqrt(this.width*this.width+this.height*this.height)}),uniforms:mi.clone(Ka.uniforms),vertexShader:Ka.vertexShader,fragmentShader:Ka.fragmentShader,blending:Xt}),this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssrMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssrMaterial.defines.SELECTIVE=this.selective,this.ssrMaterial.needsUpdate=!0,this.ssrMaterial.uniforms.tMetalness.value=this.metalnessRenderTarget.texture,this.ssrMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.ssrMaterial.uniforms.cameraNear.value=this.camera.near,this.ssrMaterial.uniforms.cameraFar.value=this.camera.far,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.ssrMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new fp,this.normalMaterial.blending=Xt,this.metalnessOnMaterial=new Xn({color:"white"}),this.metalnessOffMaterial=new Xn({color:"black"}),this.blurMaterial=new Dt({defines:Object.assign({},Gc.defines),uniforms:mi.clone(Gc.uniforms),vertexShader:Gc.vertexShader,fragmentShader:Gc.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.blurMaterial2=new Dt({defines:Object.assign({},Gc.defines),uniforms:mi.clone(Gc.uniforms),vertexShader:Gc.vertexShader,fragmentShader:Gc.fragmentShader}),this.blurMaterial2.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.blurMaterial2.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new Dt({defines:Object.assign({},Vw_defines),uniforms:mi.clone(Vw_uniforms),vertexShader:Vw_vertexShader,fragmentShader:Vw_fragmentShader,blending:Xt}),this.depthRenderMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new Dt({uniforms:mi.clone(Wr.uniforms),vertexShader:Wr.vertexShader,fragmentShader:Wr.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:pf,blendDst:j_,blendEquation:vs,blendSrcAlpha:pf,blendDstAlpha:j_,blendEquationAlpha:vs}),this.fsQuad=new yr(null),this.originalClearColor=new Be}dispose(){this.beautyRenderTarget.dispose(),this.prevRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.metalnessRenderTarget.dispose(),this.ssrRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.blurRenderTarget2.dispose(),this.normalMaterial.dispose(),this.metalnessOnMaterial.dispose(),this.metalnessOffMaterial.dispose(),this.blurMaterial.dispose(),this.blurMaterial2.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(t,n){switch(t.setRenderTarget(this.beautyRenderTarget),t.clear(),this.groundReflector&&(this.groundReflector.visible=!1,this.groundReflector.doRender(this.renderer,this.scene,this.camera),this.groundReflector.visible=!0),t.render(this.scene,this.camera),this.groundReflector&&(this.groundReflector.visible=!1),this.renderOverride(t,this.normalMaterial,this.normalRenderTarget,0,0),this.selective&&this.renderMetalness(t,this.metalnessOnMaterial,this.metalnessRenderTarget,0,0),this.ssrMaterial.uniforms.opacity.value=this.opacity,this.ssrMaterial.uniforms.maxDistance.value=this.maxDistance,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.renderPass(t,this.ssrMaterial,this.ssrRenderTarget),this.blur&&(this.renderPass(t,this.blurMaterial,this.blurRenderTarget),this.renderPass(t,this.blurMaterial2,this.blurRenderTarget2)),this.output){case i.OUTPUT.Default:this.bouncing?(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Xt,this.renderPass(t,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.blur?this.blurRenderTarget2.texture:this.ssrRenderTarget.texture,this.copyMaterial.blending=Da,this.renderPass(t,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture,this.copyMaterial.blending=Xt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:n)):(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Xt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:n),this.copyMaterial.uniforms.tDiffuse.value=this.blur?this.blurRenderTarget2.texture:this.ssrRenderTarget.texture,this.copyMaterial.blending=Da,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:n));break;case i.OUTPUT.SSR:this.copyMaterial.uniforms.tDiffuse.value=this.blur?this.blurRenderTarget2.texture:this.ssrRenderTarget.texture,this.copyMaterial.blending=Xt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:n),this.bouncing&&(this.copyMaterial.uniforms.tDiffuse.value=this.blur?this.blurRenderTarget2.texture:this.beautyRenderTarget.texture,this.copyMaterial.blending=Xt,this.renderPass(t,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=Da,this.renderPass(t,this.copyMaterial,this.prevRenderTarget));break;case i.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Xt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:n);break;case i.OUTPUT.Depth:this.renderPass(t,this.depthRenderMaterial,this.renderToScreen?null:n);break;case i.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=Xt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:n);break;case i.OUTPUT.Metalness:this.copyMaterial.uniforms.tDiffuse.value=this.metalnessRenderTarget.texture,this.copyMaterial.blending=Xt,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:n);break;default:console.warn("THREE.SSRPass: Unknown output type.")}}renderPass(t,n,r,s,o){this.originalClearColor.copy(t.getClearColor(this.tempColor));const a=t.getClearAlpha(this.tempColor),l=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,null!=s&&(t.setClearColor(s),t.setClearAlpha(o||0),t.clear()),this.fsQuad.material=n,this.fsQuad.render(t),t.autoClear=l,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}renderOverride(t,n,r,s,o){this.originalClearColor.copy(t.getClearColor(this.tempColor));const a=t.getClearAlpha(this.tempColor),l=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,o=n.clearAlpha||o,null!=(s=n.clearColor||s)&&(t.setClearColor(s),t.setClearAlpha(o||0),t.clear()),this.scene.overrideMaterial=n,t.render(this.scene,this.camera),this.scene.overrideMaterial=null,t.autoClear=l,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}renderMetalness(t,n,r,s,o){this.originalClearColor.copy(t.getClearColor(this.tempColor));const a=t.getClearAlpha(this.tempColor),l=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,o=n.clearAlpha||o,null!=(s=n.clearColor||s)&&(t.setClearColor(s),t.setClearAlpha(o||0),t.clear()),this.scene.traverseVisible(c=>{c._SSRPassBackupMaterial=c.material,c.material=this._selects.includes(c)?this.metalnessOnMaterial:this.metalnessOffMaterial}),t.render(this.scene,this.camera),this.scene.traverseVisible(c=>{c.material=c._SSRPassBackupMaterial}),t.autoClear=l,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}setSize(t,n){this.width=t,this.height=n,this.ssrMaterial.defines.MAX_STEP=Math.sqrt(t*t+n*n),this.ssrMaterial.needsUpdate=!0,this.beautyRenderTarget.setSize(t,n),this.prevRenderTarget.setSize(t,n),this.ssrRenderTarget.setSize(t,n),this.normalRenderTarget.setSize(t,n),this.metalnessRenderTarget.setSize(t,n),this.blurRenderTarget.setSize(t,n),this.blurRenderTarget2.setSize(t,n),this.ssrMaterial.uniforms.resolution.value.set(t,n),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(t,n),this.blurMaterial2.uniforms.resolution.value.set(t,n)}}return i.OUTPUT={Default:0,SSR:1,Beauty:3,Depth:4,Normal:5,Metalness:7},i})();class th extends Wi{getType(){return SG}set width(e){this._objRef&&(this._objRef.width=e)}get width(){return this._objRef?.width}set height(e){this._objRef&&(this._objRef.height=e)}get height(){return this._objRef?.height}set clear(e){this._objRef&&(this._objRef.clear=e)}get clear(){return this._objRef?.clear}set renderer(e){this._objRef&&(this._objRef.renderer=e)}get renderer(){return this._objRef?.renderer}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set groundReflector(e){this._objRef&&(this._objRef.groundReflector=e)}get groundReflector(){return this._objRef?.groundReflector}set opacity(e){this._objRef&&(this._objRef.opacity=e)}get opacity(){return this._objRef?.opacity}set output(e){this._objRef&&(this._objRef.output=e)}get output(){return this._objRef?.output}set maxDistance(e){this._objRef&&(this._objRef.maxDistance=e)}get maxDistance(){return this._objRef?.maxDistance}set thickness(e){this._objRef&&(this._objRef.thickness=e)}get thickness(){return this._objRef?.thickness}set tempColor(e){this._objRef&&(this._objRef.tempColor=Qe(this._objRef.tempColor,e))}get tempColor(){return this._objRef?.tempColor}set selective(e){this._objRef&&(this._objRef.selective=e)}get selective(){return this._objRef?.selective}set blur(e){this._objRef&&(this._objRef.blur=e)}get blur(){return this._objRef?.blur}set thickTolerance(e){this._objRef&&(this._objRef.thickTolerance=e)}get thickTolerance(){return this._objRef?.thickTolerance}set beautyRenderTarget(e){this._objRef&&(this._objRef.beautyRenderTarget=e)}get beautyRenderTarget(){return this._objRef?.beautyRenderTarget}set prevRenderTarget(e){this._objRef&&(this._objRef.prevRenderTarget=e)}get prevRenderTarget(){return this._objRef?.prevRenderTarget}set normalRenderTarget(e){this._objRef&&(this._objRef.normalRenderTarget=e)}get normalRenderTarget(){return this._objRef?.normalRenderTarget}set metalnessRenderTarget(e){this._objRef&&(this._objRef.metalnessRenderTarget=e)}get metalnessRenderTarget(){return this._objRef?.metalnessRenderTarget}set ssrRenderTarget(e){this._objRef&&(this._objRef.ssrRenderTarget=e)}get ssrRenderTarget(){return this._objRef?.ssrRenderTarget}set blurRenderTarget(e){this._objRef&&(this._objRef.blurRenderTarget=e)}get blurRenderTarget(){return this._objRef?.blurRenderTarget}set blurRenderTarget2(e){this._objRef&&(this._objRef.blurRenderTarget2=e)}get blurRenderTarget2(){return this._objRef?.blurRenderTarget2}set ssrMaterial(e){this._objRef&&(this._objRef.ssrMaterial=e)}get ssrMaterial(){return this._objRef?.ssrMaterial}set normalMaterial(e){this._objRef&&(this._objRef.normalMaterial=e)}get normalMaterial(){return this._objRef?.normalMaterial}set metalnessOnMaterial(e){this._objRef&&(this._objRef.metalnessOnMaterial=e)}get metalnessOnMaterial(){return this._objRef?.metalnessOnMaterial}set metalnessOffMaterial(e){this._objRef&&(this._objRef.metalnessOffMaterial=e)}get metalnessOffMaterial(){return this._objRef?.metalnessOffMaterial}set blurMaterial(e){this._objRef&&(this._objRef.blurMaterial=e)}get blurMaterial(){return this._objRef?.blurMaterial}set blurMaterial2(e){this._objRef&&(this._objRef.blurMaterial2=e)}get blurMaterial2(){return this._objRef?.blurMaterial2}set depthRenderMaterial(e){this._objRef&&(this._objRef.depthRenderMaterial=e)}get depthRenderMaterial(){return this._objRef?.depthRenderMaterial}set copyMaterial(e){this._objRef&&(this._objRef.copyMaterial=e)}get copyMaterial(){return this._objRef?.copyMaterial}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set originalClearColor(e){this._objRef&&(this._objRef.originalClearColor=Qe(this._objRef.originalClearColor,e))}get originalClearColor(){return this._objRef?.originalClearColor}set dispose(e){this._objRef&&(this._objRef.dispose=e)}get dispose(){return this._objRef?.dispose}set renderPass(e){this._objRef&&(this._objRef.renderPass=e)}get renderPass(){return this._objRef?.renderPass}set renderOverride(e){this._objRef&&(this._objRef.renderOverride=e)}get renderOverride(){return this._objRef?.renderOverride}set renderMetalness(e){this._objRef&&(this._objRef.renderMetalness=e)}get renderMetalness(){return this._objRef?.renderMetalness}}th.OUTPUT=SG.OUTPUT,th.\u0275fac=function(){let i;return function(t){return(i||(i=ce(th)))(t||th)}}(),th.\u0275cmp=K({type:th,selectors:[["th-sSRPass"]],inputs:{width:"width",height:"height",clear:"clear",renderer:"renderer",scene:"scene",camera:"camera",groundReflector:"groundReflector",opacity:"opacity",output:"output",maxDistance:"maxDistance",thickness:"thickness",tempColor:"tempColor",selective:"selective",blur:"blur",thickTolerance:"thickTolerance",beautyRenderTarget:"beautyRenderTarget",prevRenderTarget:"prevRenderTarget",normalRenderTarget:"normalRenderTarget",metalnessRenderTarget:"metalnessRenderTarget",ssrRenderTarget:"ssrRenderTarget",blurRenderTarget:"blurRenderTarget",blurRenderTarget2:"blurRenderTarget2",ssrMaterial:"ssrMaterial",normalMaterial:"normalMaterial",metalnessOnMaterial:"metalnessOnMaterial",metalnessOffMaterial:"metalnessOffMaterial",blurMaterial:"blurMaterial",blurMaterial2:"blurMaterial2",depthRenderMaterial:"depthRenderMaterial",copyMaterial:"copyMaterial",fsQuad:"fsQuad",originalClearColor:"originalClearColor",dispose:"dispose",renderPass:"renderPass",renderOverride:"renderOverride",renderMetalness:"renderMetalness"},features:[oe([{provide:Li,useExisting:le(()=>th)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class ih extends Cs{getType(){return B4}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set aspect(e){this._objRef&&(this._objRef.aspect=e)}get aspect(){return this._objRef?.aspect}set eyeSep(e){this._objRef&&(this._objRef.eyeSep=e)}get eyeSep(){return this._objRef?.eyeSep}set cameraL(e){this._objRef&&(this._objRef.cameraL=e)}get cameraL(){return this._objRef?.cameraL}set cameraR(e){this._objRef&&(this._objRef.cameraR=e)}get cameraR(){return this._objRef?.cameraR}}ih.\u0275fac=function(){let i;return function(t){return(i||(i=ce(ih)))(t||ih)}}(),ih.\u0275cmp=K({type:ih,selectors:[["th-stereoCamera"]],inputs:{type:"type",aspect:"aspect",eyeSep:"eyeSep",cameraL:"cameraL",cameraR:"cameraR"},features:[oe([{provide:Ke,useExisting:le(()=>ih)},{provide:Cs,useExisting:le(()=>ih)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Qbe extends MG{constructor(e,t,n,r){super(e,t,n,r),this.sampleLevel=0,this.accumulate=!1}render(e,t,n,r){if(!1===this.accumulate)return super.render(e,t,n,r),void(this.accumulateIndex=-1);const s=Wbe[5];void 0===this.sampleRenderTarget&&(this.sampleRenderTarget=new Gt(n.width,n.height,this.params),this.sampleRenderTarget.texture.name="TAARenderPass.sample"),void 0===this.holdRenderTarget&&(this.holdRenderTarget=new Gt(n.width,n.height,this.params),this.holdRenderTarget.texture.name="TAARenderPass.hold"),-1===this.accumulateIndex&&(super.render(e,this.holdRenderTarget,n,r),this.accumulateIndex=0);const o=e.autoClear;e.autoClear=!1;const a=1/s.length;if(this.accumulateIndex>=0&&this.accumulateIndex<s.length){this.copyUniforms.opacity.value=a,this.copyUniforms.tDiffuse.value=t.texture;const c=Math.pow(2,this.sampleLevel);for(let d=0;d<c;d++){const h=s[this.accumulateIndex];if(this.camera.setViewOffset&&this.camera.setViewOffset(n.width,n.height,.0625*h[0],.0625*h[1],n.width,n.height),e.setRenderTarget(t),e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(this.sampleRenderTarget),0===this.accumulateIndex&&e.clear(),this.fsQuad.render(e),this.accumulateIndex++,this.accumulateIndex>=s.length)break}this.camera.clearViewOffset&&this.camera.clearViewOffset()}const l=this.accumulateIndex*a;l>0&&(this.copyUniforms.opacity.value=1,this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture,e.setRenderTarget(t),e.clear(),this.fsQuad.render(e)),l<1&&(this.copyUniforms.opacity.value=1-l,this.copyUniforms.tDiffuse.value=this.holdRenderTarget.texture,e.setRenderTarget(t),0===l&&e.clear(),this.fsQuad.render(e)),e.autoClear=o}dispose(){super.dispose(),void 0!==this.sampleRenderTarget&&this.sampleRenderTarget.dispose(),void 0!==this.holdRenderTarget&&this.holdRenderTarget.dispose()}}const Wbe=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]];class sg extends Ju{getType(){return Qbe}set accumulate(e){this._objRef&&(this._objRef.accumulate=e)}get accumulate(){return this._objRef?.accumulate}}sg.\u0275fac=function(){let i;return function(t){return(i||(i=ce(sg)))(t||sg)}}(),sg.\u0275cmp=K({type:sg,selectors:[["th-tAARenderPass"]],inputs:{accumulate:"accumulate"},features:[oe([{provide:Li,useExisting:le(()=>sg)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Ybe extends Mt{constructor(e=50,t=10,n=!0,r=!0,s=!0,o=!0,a=!0){const l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,3,16,17,18,7,19,20,21,11,22,23,24,15,25,26,27,18,28,29,30,21,31,32,33,24,34,35,36,27,37,38,39,30,40,41,0,33,42,43,4,36,44,45,8,39,46,47,12,12,13,14,15,48,49,50,51,52,53,54,55,56,57,58,59,15,25,26,27,51,60,61,62,55,63,64,65,59,66,67,68,27,37,38,39,62,69,70,71,65,72,73,74,68,75,76,77,39,46,47,12,71,78,79,48,74,80,81,52,77,82,83,56,56,57,58,59,84,85,86,87,88,89,90,91,92,93,94,95,59,66,67,68,87,96,97,98,91,99,100,101,95,102,103,104,68,75,76,77,98,105,106,107,101,108,109,110,104,111,112,113,77,82,83,56,107,114,115,84,110,116,117,88,113,118,119,92,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,123,136,137,120,127,138,139,124,131,140,141,128,135,142,143,132,132,133,134,135,144,145,146,147,148,149,150,151,68,152,153,154,135,142,143,132,147,155,156,144,151,157,158,148,154,159,160,68,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,164,177,178,161,168,179,180,165,172,181,182,169,176,183,184,173,173,174,175,176,185,186,187,188,189,190,191,192,193,194,195,196,176,183,184,173,188,197,198,185,192,199,200,189,196,201,202,193,203,203,203,203,204,205,206,207,208,208,208,208,209,210,211,212,203,203,203,203,207,213,214,215,208,208,208,208,212,216,217,218,203,203,203,203,215,219,220,221,208,208,208,208,218,222,223,224,203,203,203,203,221,225,226,204,208,208,208,208,224,227,228,209,209,210,211,212,229,230,231,232,233,234,235,236,237,238,239,240,212,216,217,218,232,241,242,243,236,244,245,246,240,247,248,249,218,222,223,224,243,250,251,252,246,253,254,255,249,256,257,258,224,227,228,209,252,259,260,229,255,261,262,233,258,263,264,237,265,265,265,265,266,267,268,269,270,271,272,273,92,119,118,113,265,265,265,265,269,274,275,276,273,277,278,279,113,112,111,104,265,265,265,265,276,280,281,282,279,283,284,285,104,103,102,95,265,265,265,265,282,286,287,266,285,288,289,270,95,94,93,92],c=[1.4,0,2.4,1.4,-.784,2.4,.784,-1.4,2.4,0,-1.4,2.4,1.3375,0,2.53125,1.3375,-.749,2.53125,.749,-1.3375,2.53125,0,-1.3375,2.53125,1.4375,0,2.53125,1.4375,-.805,2.53125,.805,-1.4375,2.53125,0,-1.4375,2.53125,1.5,0,2.4,1.5,-.84,2.4,.84,-1.5,2.4,0,-1.5,2.4,-.784,-1.4,2.4,-1.4,-.784,2.4,-1.4,0,2.4,-.749,-1.3375,2.53125,-1.3375,-.749,2.53125,-1.3375,0,2.53125,-.805,-1.4375,2.53125,-1.4375,-.805,2.53125,-1.4375,0,2.53125,-.84,-1.5,2.4,-1.5,-.84,2.4,-1.5,0,2.4,-1.4,.784,2.4,-.784,1.4,2.4,0,1.4,2.4,-1.3375,.749,2.53125,-.749,1.3375,2.53125,0,1.3375,2.53125,-1.4375,.805,2.53125,-.805,1.4375,2.53125,0,1.4375,2.53125,-1.5,.84,2.4,-.84,1.5,2.4,0,1.5,2.4,.784,1.4,2.4,1.4,.784,2.4,.749,1.3375,2.53125,1.3375,.749,2.53125,.805,1.4375,2.53125,1.4375,.805,2.53125,.84,1.5,2.4,1.5,.84,2.4,1.75,0,1.875,1.75,-.98,1.875,.98,-1.75,1.875,0,-1.75,1.875,2,0,1.35,2,-1.12,1.35,1.12,-2,1.35,0,-2,1.35,2,0,.9,2,-1.12,.9,1.12,-2,.9,0,-2,.9,-.98,-1.75,1.875,-1.75,-.98,1.875,-1.75,0,1.875,-1.12,-2,1.35,-2,-1.12,1.35,-2,0,1.35,-1.12,-2,.9,-2,-1.12,.9,-2,0,.9,-1.75,.98,1.875,-.98,1.75,1.875,0,1.75,1.875,-2,1.12,1.35,-1.12,2,1.35,0,2,1.35,-2,1.12,.9,-1.12,2,.9,0,2,.9,.98,1.75,1.875,1.75,.98,1.875,1.12,2,1.35,2,1.12,1.35,1.12,2,.9,2,1.12,.9,2,0,.45,2,-1.12,.45,1.12,-2,.45,0,-2,.45,1.5,0,.225,1.5,-.84,.225,.84,-1.5,.225,0,-1.5,.225,1.5,0,.15,1.5,-.84,.15,.84,-1.5,.15,0,-1.5,.15,-1.12,-2,.45,-2,-1.12,.45,-2,0,.45,-.84,-1.5,.225,-1.5,-.84,.225,-1.5,0,.225,-.84,-1.5,.15,-1.5,-.84,.15,-1.5,0,.15,-2,1.12,.45,-1.12,2,.45,0,2,.45,-1.5,.84,.225,-.84,1.5,.225,0,1.5,.225,-1.5,.84,.15,-.84,1.5,.15,0,1.5,.15,1.12,2,.45,2,1.12,.45,.84,1.5,.225,1.5,.84,.225,.84,1.5,.15,1.5,.84,.15,-1.6,0,2.025,-1.6,-.3,2.025,-1.5,-.3,2.25,-1.5,0,2.25,-2.3,0,2.025,-2.3,-.3,2.025,-2.5,-.3,2.25,-2.5,0,2.25,-2.7,0,2.025,-2.7,-.3,2.025,-3,-.3,2.25,-3,0,2.25,-2.7,0,1.8,-2.7,-.3,1.8,-3,-.3,1.8,-3,0,1.8,-1.5,.3,2.25,-1.6,.3,2.025,-2.5,.3,2.25,-2.3,.3,2.025,-3,.3,2.25,-2.7,.3,2.025,-3,.3,1.8,-2.7,.3,1.8,-2.7,0,1.575,-2.7,-.3,1.575,-3,-.3,1.35,-3,0,1.35,-2.5,0,1.125,-2.5,-.3,1.125,-2.65,-.3,.9375,-2.65,0,.9375,-2,-.3,.9,-1.9,-.3,.6,-1.9,0,.6,-3,.3,1.35,-2.7,.3,1.575,-2.65,.3,.9375,-2.5,.3,1.125,-1.9,.3,.6,-2,.3,.9,1.7,0,1.425,1.7,-.66,1.425,1.7,-.66,.6,1.7,0,.6,2.6,0,1.425,2.6,-.66,1.425,3.1,-.66,.825,3.1,0,.825,2.3,0,2.1,2.3,-.25,2.1,2.4,-.25,2.025,2.4,0,2.025,2.7,0,2.4,2.7,-.25,2.4,3.3,-.25,2.4,3.3,0,2.4,1.7,.66,.6,1.7,.66,1.425,3.1,.66,.825,2.6,.66,1.425,2.4,.25,2.025,2.3,.25,2.1,3.3,.25,2.4,2.7,.25,2.4,2.8,0,2.475,2.8,-.25,2.475,3.525,-.25,2.49375,3.525,0,2.49375,2.9,0,2.475,2.9,-.15,2.475,3.45,-.15,2.5125,3.45,0,2.5125,2.8,0,2.4,2.8,-.15,2.4,3.2,-.15,2.4,3.2,0,2.4,3.525,.25,2.49375,2.8,.25,2.475,3.45,.15,2.5125,2.9,.15,2.475,3.2,.15,2.4,2.8,.15,2.4,0,0,3.15,.8,0,3.15,.8,-.45,3.15,.45,-.8,3.15,0,-.8,3.15,0,0,2.85,.2,0,2.7,.2,-.112,2.7,.112,-.2,2.7,0,-.2,2.7,-.45,-.8,3.15,-.8,-.45,3.15,-.8,0,3.15,-.112,-.2,2.7,-.2,-.112,2.7,-.2,0,2.7,-.8,.45,3.15,-.45,.8,3.15,0,.8,3.15,-.2,.112,2.7,-.112,.2,2.7,0,.2,2.7,.45,.8,3.15,.8,.45,3.15,.112,.2,2.7,.2,.112,2.7,.4,0,2.55,.4,-.224,2.55,.224,-.4,2.55,0,-.4,2.55,1.3,0,2.55,1.3,-.728,2.55,.728,-1.3,2.55,0,-1.3,2.55,1.3,0,2.4,1.3,-.728,2.4,.728,-1.3,2.4,0,-1.3,2.4,-.224,-.4,2.55,-.4,-.224,2.55,-.4,0,2.55,-.728,-1.3,2.55,-1.3,-.728,2.55,-1.3,0,2.55,-.728,-1.3,2.4,-1.3,-.728,2.4,-1.3,0,2.4,-.4,.224,2.55,-.224,.4,2.55,0,.4,2.55,-1.3,.728,2.55,-.728,1.3,2.55,0,1.3,2.55,-1.3,.728,2.4,-.728,1.3,2.4,0,1.3,2.4,.224,.4,2.55,.4,.224,2.55,.728,1.3,2.55,1.3,.728,2.55,.728,1.3,2.4,1.3,.728,2.4,0,0,0,1.425,0,0,1.425,.798,0,.798,1.425,0,0,1.425,0,1.5,0,.075,1.5,.84,.075,.84,1.5,.075,0,1.5,.075,-.798,1.425,0,-1.425,.798,0,-1.425,0,0,-.84,1.5,.075,-1.5,.84,.075,-1.5,0,.075,-1.425,-.798,0,-.798,-1.425,0,0,-1.425,0,-1.5,-.84,.075,-.84,-1.5,.075,0,-1.5,.075,.798,-1.425,0,1.425,-.798,0,.84,-1.5,.075,1.5,-.84,.075];super(),t=Math.max(2,Math.floor(t));const h=3.15*(a?1:1.3)/2,f=e/h;let m=n?(8*t-4)*t:0;m+=r?(16*t-4)*t:0,m+=s?40*t*t:0;const g=new Uint32Array(3*m);let _=n?4:0;_+=r?8:0,_+=s?20:0,_*=(t+1)*(t+1);const p=new Float32Array(3*_),v=new Float32Array(3*_),b=new Float32Array(2*_),y=new We;y.set(-1,3,-3,1,3,-6,3,0,-3,3,0,0,1,0,0,0);const x=[],w=[],E=[],S=[],C=[],T=[],k=[],U=[],B=[],j=new R;let H,L,V,O,Q=0,re=0;const _e=new R,de=new We,Y=new We,q=new ei,te=new ei,$=new ei,I=new ei,ue=new R,Me=new R,me=y.clone();me.transpose();const He=(ut,yt,N)=>!(p[3*ut]===p[3*yt]&&p[3*ut+1]===p[3*yt+1]&&p[3*ut+2]===p[3*yt+2]||p[3*ut]===p[3*N]&&p[3*ut+1]===p[3*N+1]&&p[3*ut+2]===p[3*N+2]||p[3*yt]===p[3*N]&&p[3*yt+1]===p[3*N+1]&&p[3*yt+2]===p[3*N+2]);for(let ut=0;ut<3;ut++)T[ut]=new We;const we=n?32:28,Ee=t+1;let it=0,qe=0,bt=0,At=0,lt=0;for(let ut=s?0:20;ut<we;ut++)if(r||ut<20||ut>=28){for(let yt=0;yt<3;yt++){for(let N=0;N<4;N++)for(let F=0;F<4;F++)x[4*F+N]=c[3*l[16*ut+4*N+F]+yt],o&&ut>=20&&ut<28&&2!==yt&&(x[4*F+N]*=1.077),!a&&2===yt&&(x[4*F+N]*=1.3);de.set(x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8],x[9],x[10],x[11],x[12],x[13],x[14],x[15]),Y.multiplyMatrices(de,y),T[yt].multiplyMatrices(me,Y)}for(let yt=0;yt<=t;yt++){const N=yt/t;for(let F=0;F<=t;F++){const ve=F/t;for(O=4,L=V=1;O--;)w[O]=L,E[O]=V,L*=N,V*=ve,3===O?(S[O]=C[O]=0,Q=re=1):(S[O]=Q*(3-O),C[O]=re*(3-O),Q*=N,re*=ve);q.fromArray(w),te.fromArray(E),$.fromArray(S),I.fromArray(C);for(let De=0;De<3;De++)H=q.clone(),H.applyMatrix4(T[De]),k[De]=H.dot(te),H=$.clone(),H.applyMatrix4(T[De]),U[De]=H.dot(te),H=q.clone(),H.applyMatrix4(T[De]),B[De]=H.dot(I);ue.fromArray(U),Me.fromArray(B),j.crossVectors(Me,ue),j.normalize(),0===k[0]&&0===k[1]?_e.set(0,k[2]>h?1:-1,0):_e.set(j.x,j.z,-j.y),p[qe++]=f*k[0],p[qe++]=f*(k[2]-h),p[qe++]=-f*k[1],v[bt++]=_e.x,v[bt++]=_e.y,v[bt++]=_e.z,b[At++]=1-ve,b[At++]=1-N}}for(let yt=0;yt<t;yt++)for(let N=0;N<t;N++){const F=it*Ee*Ee+yt*Ee+N,ve=F+1,De=ve+Ee,Ne=F+Ee;He(F,ve,De)&&(g[lt++]=F,g[lt++]=ve,g[lt++]=De),He(F,De,Ne)&&(g[lt++]=F,g[lt++]=De,g[lt++]=Ne)}it++}this.setIndex(new Ci(g,1)),this.setAttribute("position",new Ci(p,3)),this.setAttribute("normal",new Ci(v,3)),this.setAttribute("uv",new Ci(b,2)),this.computeBoundingSphere()}}class og extends Tt{getType(){return Ybe}}og.\u0275fac=function(){let i;return function(t){return(i||(i=ce(og)))(t||og)}}(),og.\u0275cmp=K({type:og,selectors:[["th-teapotGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>og)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class ag extends Xa{getType(){return dp}get type(){return this._objRef?.type}}ag.\u0275fac=function(){let i;return function(t){return(i||(i=ce(ag)))(t||ag)}}(),ag.\u0275cmp=K({type:ag,selectors:[["th-tetrahedronGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>ag)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Kbe extends iu{constructor(e,t={}){const n=t.font;if(void 0===n)super();else{const r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(r,t)}this.type="TextGeometry"}}class lg extends Vu{getType(){return Kbe}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}}lg.\u0275fac=function(){let i;return function(t){return(i||(i=ce(lg)))(t||lg)}}(),lg.\u0275cmp=K({type:lg,selectors:[["th-textGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>lg)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class Jbe extends wn{constructor(e,t){super();const n=Wr;this.map=e,this.opacity=void 0!==t?t:1,this.uniforms=mi.clone(n.uniforms),this.material=new Dt({uniforms:this.uniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,depthTest:!1,depthWrite:!1}),this.needsSwap=!1,this.fsQuad=new yr(null)}render(e,t,n){const r=e.autoClear;e.autoClear=!1,this.fsQuad.material=this.material,this.uniforms.opacity.value=this.opacity,this.uniforms.tDiffuse.value=this.map,this.material.transparent=this.opacity<1,e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(),this.fsQuad.render(e),e.autoClear=r}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class cg extends Wi{getType(){return Jbe}set map(e){this._objRef&&(this._objRef.map=e)}get map(){return this._objRef?.map}set opacity(e){this._objRef&&(this._objRef.opacity=e)}get opacity(){return this._objRef?.opacity}set uniforms(e){this._objRef&&Object.assign(this._objRef.uniforms,e)}get uniforms(){return this._objRef?.uniforms}set material(e){this._objRef&&(this._objRef.material=e)}get material(){return this._objRef?.material}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}}cg.\u0275fac=function(){let i;return function(t){return(i||(i=ce(cg)))(t||cg)}}(),cg.\u0275cmp=K({type:cg,selectors:[["th-texturePass"]],inputs:{map:"map",opacity:"opacity",uniforms:"uniforms",material:"material",fsQuad:"fsQuad"},features:[oe([{provide:Li,useExisting:le(()=>cg)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class dg extends Tt{getType(){return sa}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}}dg.\u0275fac=function(){let i;return function(t){return(i||(i=ce(dg)))(t||dg)}}(),dg.\u0275cmp=K({type:dg,selectors:[["th-torusGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>dg)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class ug extends Tt{getType(){return up}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}}ug.\u0275fac=function(){let i;return function(t){return(i||(i=ce(ug)))(t||ug)}}(),ug.\u0275cmp=K({type:ug,selectors:[["th-torusKnotGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>ug)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const sD={type:"change"},oD={type:"start"},aD={type:"end"};class n0e extends ns{constructor(e,t){super();const n=this;this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:Qs.ROTATE,MIDDLE:Qs.DOLLY,RIGHT:Qs.PAN},this.target=new R;const s=1e-6,o=new R;let a=1,l=-1,c=-1,d=0,u=0,h=0;const f=new R,m=new pe,g=new pe,_=new R,p=new pe,v=new pe,b=new pe,y=new pe,x=[],w={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){const I=n.domElement.getBoundingClientRect(),ue=n.domElement.ownerDocument.documentElement;n.screen.left=I.left+window.pageXOffset-ue.clientLeft,n.screen.top=I.top+window.pageYOffset-ue.clientTop,n.screen.width=I.width,n.screen.height=I.height};const E=function(){const I=new pe;return function(Me,me){return I.set((Me-n.screen.left)/n.screen.width,(me-n.screen.top)/n.screen.height),I}}(),S=function(){const I=new pe;return function(Me,me){return I.set((Me-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-me))/n.screen.width),I}}();function C(I){!1!==n.enabled&&(0===x.length&&(n.domElement.setPointerCapture(I.pointerId),n.domElement.addEventListener("pointermove",T),n.domElement.addEventListener("pointerup",k)),function Y(I){x.push(I)}(I),"touch"===I.pointerType?function Q(I){if(1===(te(I),x.length))l=3,g.copy(S(x[0].pageX,x[0].pageY)),m.copy(g);else{l=4;const ue=x[0].pageX-x[1].pageX,Me=x[0].pageY-x[1].pageY;u=d=Math.sqrt(ue*ue+Me*Me),b.copy(E((x[0].pageX+x[1].pageX)/2,(x[0].pageY+x[1].pageY)/2)),y.copy(b)}n.dispatchEvent(oD)}(I):function H(I){if(-1===l)switch(I.button){case n.mouseButtons.LEFT:l=0;break;case n.mouseButtons.MIDDLE:l=1;break;case n.mouseButtons.RIGHT:l=2}const ue=-1!==c?c:l;0!==ue||n.noRotate?1!==ue||n.noZoom?2===ue&&!n.noPan&&(b.copy(E(I.pageX,I.pageY)),y.copy(b)):(p.copy(E(I.pageX,I.pageY)),v.copy(p)):(g.copy(S(I.pageX,I.pageY)),m.copy(g)),n.dispatchEvent(oD)}(I))}function T(I){!1!==n.enabled&&("touch"===I.pointerType?function re(I){if(1===(te(I),x.length))m.copy(g),g.copy(S(I.pageX,I.pageY));else{const ue=function $(I){return w[(I.pointerId===x[0].pointerId?x[1]:x[0]).pointerId]}(I),Me=I.pageX-ue.x,me=I.pageY-ue.y;u=Math.sqrt(Me*Me+me*me),y.copy(E((I.pageX+ue.x)/2,(I.pageY+ue.y)/2))}}(I):function L(I){const ue=-1!==c?c:l;0!==ue||n.noRotate?1!==ue||n.noZoom?2===ue&&!n.noPan&&y.copy(E(I.pageX,I.pageY)):v.copy(E(I.pageX,I.pageY)):(m.copy(g),g.copy(S(I.pageX,I.pageY)))}(I))}function k(I){!1!==n.enabled&&("touch"===I.pointerType?function _e(I){switch(x.length){case 0:l=-1;break;case 1:l=3,g.copy(S(I.pageX,I.pageY)),m.copy(g);break;case 2:l=4;for(let ue=0;ue<x.length;ue++)if(x[ue].pointerId!==I.pointerId){const Me=w[x[ue].pointerId];g.copy(S(Me.x,Me.y)),m.copy(g);break}}n.dispatchEvent(aD)}(I):function V(){l=-1,n.dispatchEvent(aD)}(),q(I),0===x.length&&(n.domElement.releasePointerCapture(I.pointerId),n.domElement.removeEventListener("pointermove",T),n.domElement.removeEventListener("pointerup",k)))}function U(I){q(I)}function B(I){!1!==n.enabled&&(window.removeEventListener("keydown",B),-1===c&&(I.code!==n.keys[0]||n.noRotate?I.code!==n.keys[1]||n.noZoom?I.code===n.keys[2]&&!n.noPan&&(c=2):c=1:c=0))}function j(){!1!==n.enabled&&(c=-1,window.addEventListener("keydown",B))}function O(I){if(!1!==n.enabled&&!0!==n.noZoom){switch(I.preventDefault(),I.deltaMode){case 2:p.y-=.025*I.deltaY;break;case 1:p.y-=.01*I.deltaY;break;default:p.y-=25e-5*I.deltaY}n.dispatchEvent(oD),n.dispatchEvent(aD)}}function de(I){!1!==n.enabled&&I.preventDefault()}function q(I){delete w[I.pointerId];for(let ue=0;ue<x.length;ue++)if(x[ue].pointerId==I.pointerId)return void x.splice(ue,1)}function te(I){let ue=w[I.pointerId];void 0===ue&&(ue=new pe,w[I.pointerId]=ue),ue.set(I.pageX,I.pageY)}this.rotateCamera=function(){const I=new R,ue=new wi,Me=new R,me=new R,He=new R,Ce=new R;return function(){Ce.set(g.x-m.x,g.y-m.y,0);let Ee=Ce.length();Ee?(f.copy(n.object.position).sub(n.target),Me.copy(f).normalize(),me.copy(n.object.up).normalize(),He.crossVectors(me,Me).normalize(),me.setLength(g.y-m.y),He.setLength(g.x-m.x),Ce.copy(me.add(He)),I.crossVectors(Ce,f).normalize(),Ee*=n.rotateSpeed,ue.setFromAxisAngle(I,Ee),f.applyQuaternion(ue),n.object.up.applyQuaternion(ue),_.copy(I),h=Ee):!n.staticMoving&&h&&(h*=Math.sqrt(1-n.dynamicDampingFactor),f.copy(n.object.position).sub(n.target),ue.setFromAxisAngle(_,h),f.applyQuaternion(ue),n.object.up.applyQuaternion(ue)),m.copy(g)}}(),this.zoomCamera=function(){let I;4===l?(I=d/u,d=u,n.object.isPerspectiveCamera?f.multiplyScalar(I):n.object.isOrthographicCamera?(n.object.zoom=vt.clamp(n.object.zoom/I,n.minZoom,n.maxZoom),a!==n.object.zoom&&n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(I=1+(v.y-p.y)*n.zoomSpeed,1!==I&&I>0&&(n.object.isPerspectiveCamera?f.multiplyScalar(I):n.object.isOrthographicCamera?(n.object.zoom=vt.clamp(n.object.zoom/I,n.minZoom,n.maxZoom),a!==n.object.zoom&&n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),n.staticMoving?p.copy(v):p.y+=(v.y-p.y)*this.dynamicDampingFactor)},this.panCamera=function(){const I=new pe,ue=new R,Me=new R;return function(){if(I.copy(y).sub(b),I.lengthSq()){if(n.object.isOrthographicCamera){const Ce=(n.object.top-n.object.bottom)/n.object.zoom/n.domElement.clientWidth;I.x*=(n.object.right-n.object.left)/n.object.zoom/n.domElement.clientWidth,I.y*=Ce}I.multiplyScalar(f.length()*n.panSpeed),Me.copy(f).cross(n.object.up).setLength(I.x),Me.add(ue.copy(n.object.up).setLength(I.y)),n.object.position.add(Me),n.target.add(Me),n.staticMoving?b.copy(y):b.add(I.subVectors(y,b).multiplyScalar(n.dynamicDampingFactor))}}}(),this.checkDistances=function(){(!n.noZoom||!n.noPan)&&(f.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,f.setLength(n.maxDistance)),p.copy(v)),f.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,f.setLength(n.minDistance)),p.copy(v)))},this.update=function(){f.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,f),n.object.isPerspectiveCamera?(n.checkDistances(),n.object.lookAt(n.target),o.distanceToSquared(n.object.position)>s&&(n.dispatchEvent(sD),o.copy(n.object.position))):n.object.isOrthographicCamera?(n.object.lookAt(n.target),(o.distanceToSquared(n.object.position)>s||a!==n.object.zoom)&&(n.dispatchEvent(sD),o.copy(n.object.position),a=n.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){l=-1,c=-1,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),f.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(sD),o.copy(n.object.position),a=n.object.zoom},this.dispose=function(){n.domElement.removeEventListener("contextmenu",de),n.domElement.removeEventListener("pointerdown",C),n.domElement.removeEventListener("pointercancel",U),n.domElement.removeEventListener("wheel",O),n.domElement.removeEventListener("pointermove",T),n.domElement.removeEventListener("pointerup",k),window.removeEventListener("keydown",B),window.removeEventListener("keyup",j)},this.domElement.addEventListener("contextmenu",de),this.domElement.addEventListener("pointerdown",C),this.domElement.addEventListener("pointercancel",U),this.domElement.addEventListener("wheel",O,{passive:!1}),window.addEventListener("keydown",B),window.addEventListener("keyup",j),this.handleResize(),this.update()}}class nh extends Qn{getType(){return n0e}set object(e){this._objRef&&(this._objRef.object=e)}get object(){return this._objRef?.object}set domElement(e){this._objRef&&(this._objRef.domElement=e)}get domElement(){return this._objRef?.domElement}set enabled(e){this._objRef&&(this._objRef.enabled=e)}get enabled(){return this._objRef?.enabled}set screen(e){this._objRef&&(this._objRef.screen=e)}get screen(){return this._objRef?.screen}set rotateSpeed(e){this._objRef&&(this._objRef.rotateSpeed=e)}get rotateSpeed(){return this._objRef?.rotateSpeed}set zoomSpeed(e){this._objRef&&(this._objRef.zoomSpeed=e)}get zoomSpeed(){return this._objRef?.zoomSpeed}set panSpeed(e){this._objRef&&(this._objRef.panSpeed=e)}get panSpeed(){return this._objRef?.panSpeed}set noRotate(e){this._objRef&&(this._objRef.noRotate=e)}get noRotate(){return this._objRef?.noRotate}set noZoom(e){this._objRef&&(this._objRef.noZoom=e)}get noZoom(){return this._objRef?.noZoom}set noPan(e){this._objRef&&(this._objRef.noPan=e)}get noPan(){return this._objRef?.noPan}set noRoll(e){this._objRef&&(this._objRef.noRoll=e)}get noRoll(){return this._objRef?.noRoll}set staticMoving(e){this._objRef&&(this._objRef.staticMoving=e)}get staticMoving(){return this._objRef?.staticMoving}set dynamicDampingFactor(e){this._objRef&&(this._objRef.dynamicDampingFactor=e)}get dynamicDampingFactor(){return this._objRef?.dynamicDampingFactor}set minDistance(e){this._objRef&&(this._objRef.minDistance=e)}get minDistance(){return this._objRef?.minDistance}set maxDistance(e){this._objRef&&(this._objRef.maxDistance=e)}get maxDistance(){return this._objRef?.maxDistance}set minZoom(e){this._objRef&&(this._objRef.minZoom=e)}get minZoom(){return this._objRef?.minZoom}set maxZoom(e){this._objRef&&(this._objRef.maxZoom=e)}get maxZoom(){return this._objRef?.maxZoom}set keys(e){this._objRef&&(this._objRef.keys=e)}get keys(){return this._objRef?.keys}set mouseButtons(e){this._objRef&&(this._objRef.mouseButtons=e)}get mouseButtons(){return this._objRef?.mouseButtons}set target(e){this._objRef&&(this._objRef.target=Qe(this._objRef.target,e))}get target(){return this._objRef?.target}set position0(e){this._objRef&&(this._objRef.position0=Qe(this._objRef.position0,e))}get position0(){return this._objRef?.position0}set target0(e){this._objRef&&(this._objRef.target0=Qe(this._objRef.target0,e))}get target0(){return this._objRef?.target0}set up0(e){this._objRef&&(this._objRef.up0=Qe(this._objRef.up0,e))}get up0(){return this._objRef?.up0}}nh.\u0275fac=function(){let i;return function(t){return(i||(i=ce(nh)))(t||nh)}}(),nh.\u0275cmp=K({type:nh,selectors:[["th-trackballControls"]],inputs:{object:"object",domElement:"domElement",enabled:"enabled",screen:"screen",rotateSpeed:"rotateSpeed",zoomSpeed:"zoomSpeed",panSpeed:"panSpeed",noRotate:"noRotate",noZoom:"noZoom",noPan:"noPan",noRoll:"noRoll",staticMoving:"staticMoving",dynamicDampingFactor:"dynamicDampingFactor",minDistance:"minDistance",maxDistance:"maxDistance",minZoom:"minZoom",maxZoom:"maxZoom",keys:"keys",mouseButtons:"mouseButtons",target:"target",position0:"position0",target0:"target0",up0:"up0"},features:[oe([{provide:Qn,useExisting:le(()=>nh)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class hg extends Tt{getType(){return hp}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}set tangents(e){this._objRef&&(this._objRef.tangents=e)}get tangents(){return this._objRef?.tangents}set normals(e){this._objRef&&(this._objRef.normals=e)}get normals(){return this._objRef?.normals}set binormals(e){this._objRef&&(this._objRef.binormals=e)}get binormals(){return this._objRef?.binormals}}hg.\u0275fac=function(){let i;return function(t){return(i||(i=ce(hg)))(t||hg)}}(),hg.\u0275cmp=K({type:hg,selectors:[["th-tubeGeometry"]],inputs:{tangents:"tangents",normals:"normals",binormals:"binormals"},features:[oe([{provide:Tt,useExisting:le(()=>hg)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});const o0e={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Be(0)},defaultOpacity:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n\t\t\tfloat v = dot( texel.xyz, luma );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}"};class fg extends wn{constructor(e,t,n,r){super(),this.strength=void 0!==t?t:1,this.radius=n,this.threshold=r,this.resolution=void 0!==e?new pe(e.x,e.y):new pe(256,256),this.clearColor=new Be(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);this.renderTargetBright=new Gt(s,o),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let u=0;u<this.nMips;u++){const h=new Gt(s,o);h.texture.name="UnrealBloomPass.h"+u,h.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(h);const f=new Gt(s,o);f.texture.name="UnrealBloomPass.v"+u,f.texture.generateMipmaps=!1,this.renderTargetsVertical.push(f),s=Math.round(s/2),o=Math.round(o/2)}const a=o0e;this.highPassUniforms=mi.clone(a.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Dt({uniforms:this.highPassUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const l=[3,5,7,9,11];s=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);for(let u=0;u<this.nMips;u++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(l[u])),this.separableBlurMaterials[u].uniforms.texSize.value=new pe(s,o),s=Math.round(s/2),o=Math.round(o/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0,this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new R(1,1,1),new R(1,1,1),new R(1,1,1),new R(1,1,1),new R(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const d=Wr;this.copyUniforms=mi.clone(d.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new Dt({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:uf,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Be,this.oldClearAlpha=1,this.basic=new Xn,this.fsQuad=new yr(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.materialCopy.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,t){let n=Math.round(e/2),r=Math.round(t/2);this.renderTargetBright.setSize(n,r);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(n,r),this.renderTargetsVertical[s].setSize(n,r),this.separableBlurMaterials[s].uniforms.texSize.value=new pe(n,r),n=Math.round(n/2),r=Math.round(r/2)}render(e,t,n,r,s){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const o=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let a=this.renderTargetBright;for(let l=0;l<this.nMips;l++)this.fsQuad.material=this.separableBlurMaterials[l],this.separableBlurMaterials[l].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[l].uniforms.direction.value=fg.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[l]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[l].uniforms.colorTexture.value=this.renderTargetsHorizontal[l].texture,this.separableBlurMaterials[l].uniforms.direction.value=fg.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[l]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[l];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=o}getSeperableBlurMaterial(e){return new Dt({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new pe(.5,.5)},direction:{value:new pe(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat fSigma = float(SIGMA);\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n\t\t\t\t\t\tweightSum += 2.0 * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})}getCompositeMaterial(e){return new Dt({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}fg.BlurDirectionX=new pe(1,0),fg.BlurDirectionY=new pe(0,1);class Hc extends Wi{getType(){return fg}set resolution(e){this._objRef&&(this._objRef.resolution=Qe(this._objRef.resolution,e))}get resolution(){return this._objRef?.resolution}set strength(e){this._objRef&&(this._objRef.strength=e)}get strength(){return this._objRef?.strength}set radius(e){this._objRef&&(this._objRef.radius=e)}get radius(){return this._objRef?.radius}set threshold(e){this._objRef&&(this._objRef.threshold=e)}get threshold(){return this._objRef?.threshold}set clearColor(e){this._objRef&&(this._objRef.clearColor=Qe(this._objRef.clearColor,e))}get clearColor(){return this._objRef?.clearColor}set renderTargetsHorizontal(e){this._objRef&&(this._objRef.renderTargetsHorizontal=e)}get renderTargetsHorizontal(){return this._objRef?.renderTargetsHorizontal}set renderTargetsVertical(e){this._objRef&&(this._objRef.renderTargetsVertical=e)}get renderTargetsVertical(){return this._objRef?.renderTargetsVertical}set nMips(e){this._objRef&&(this._objRef.nMips=e)}get nMips(){return this._objRef?.nMips}set renderTargetBright(e){this._objRef&&(this._objRef.renderTargetBright=e)}get renderTargetBright(){return this._objRef?.renderTargetBright}set highPassUniforms(e){this._objRef&&(this._objRef.highPassUniforms=e)}get highPassUniforms(){return this._objRef?.highPassUniforms}set materialHighPassFilter(e){this._objRef&&(this._objRef.materialHighPassFilter=e)}get materialHighPassFilter(){return this._objRef?.materialHighPassFilter}set separableBlurMaterials(e){this._objRef&&(this._objRef.separableBlurMaterials=e)}get separableBlurMaterials(){return this._objRef?.separableBlurMaterials}set compositeMaterial(e){this._objRef&&(this._objRef.compositeMaterial=e)}get compositeMaterial(){return this._objRef?.compositeMaterial}set bloomTintColors(e){this._objRef&&(this._objRef.bloomTintColors=e)}get bloomTintColors(){return this._objRef?.bloomTintColors}set copyUniforms(e){this._objRef&&(this._objRef.copyUniforms=e)}get copyUniforms(){return this._objRef?.copyUniforms}set materialCopy(e){this._objRef&&(this._objRef.materialCopy=e)}get materialCopy(){return this._objRef?.materialCopy}set oldClearColor(e){this._objRef&&(this._objRef.oldClearColor=Qe(this._objRef.oldClearColor,e))}get oldClearColor(){return this._objRef?.oldClearColor}set oldClearAlpha(e){this._objRef&&(this._objRef.oldClearAlpha=e)}get oldClearAlpha(){return this._objRef?.oldClearAlpha}set basic(e){this._objRef&&(this._objRef.basic=e)}get basic(){return this._objRef?.basic}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}}Hc.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Hc)))(t||Hc)}}(),Hc.\u0275cmp=K({type:Hc,selectors:[["th-unrealBloomPass"]],inputs:{resolution:"resolution",strength:"strength",radius:"radius",threshold:"threshold",clearColor:"clearColor",renderTargetsHorizontal:"renderTargetsHorizontal",renderTargetsVertical:"renderTargetsVertical",nMips:"nMips",renderTargetBright:"renderTargetBright",highPassUniforms:"highPassUniforms",materialHighPassFilter:"materialHighPassFilter",separableBlurMaterials:"separableBlurMaterials",compositeMaterial:"compositeMaterial",bloomTintColors:"bloomTintColors",copyUniforms:"copyUniforms",materialCopy:"materialCopy",oldClearColor:"oldClearColor",oldClearAlpha:"oldClearAlpha",basic:"basic",fsQuad:"fsQuad"},features:[oe([{provide:Li,useExisting:le(()=>Hc)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class pg extends Jn{getType(){return e4}get isVideoTexture(){return this._objRef?.isVideoTexture}set magFilter(e){this._objRef&&(this._objRef.magFilter=e)}get magFilter(){return this._objRef?.magFilter}set minFilter(e){this._objRef&&(this._objRef.minFilter=e)}get minFilter(){return this._objRef?.minFilter}set generateMipmaps(e){this._objRef&&(this._objRef.generateMipmaps=e)}get generateMipmaps(){return this._objRef?.generateMipmaps}}pg.\u0275fac=function(){let i;return function(t){return(i||(i=ce(pg)))(t||pg)}}(),pg.\u0275cmp=K({type:pg,selectors:[["th-videoTexture"]],inputs:{magFilter:"magFilter",minFilter:"minFilter",generateMipmaps:"generateMipmaps"},features:[oe([{provide:Pr,useExisting:le(()=>pg)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class mg extends Tt{getType(){return uR}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}}mg.\u0275fac=function(){let i;return function(t){return(i||(i=ce(mg)))(t||mg)}}(),mg.\u0275cmp=K({type:mg,selectors:[["th-wireframeGeometry"]],features:[oe([{provide:Tt,useExisting:le(()=>mg)}]),W],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(fe(),ne(0))},encapsulation:2,changeDetection:0});class zw{transform(e){if(e)return e instanceof To?e.objRef?.clone():e.clone()}}zw.\u0275fac=function(e){return new(e||zw)},zw.\u0275pipe=gi({name:"clone",type:zw,pure:!0});class Qc{transform(e){return Array.isArray(e)?new Be(...e):new Be(e)}}Qc.\u0275fac=function(e){return new(e||Qc)},Qc.\u0275pipe=gi({name:"color",type:Qc,pure:!0});class Gw{transform(e){return new pe(...e)}}Gw.\u0275fac=function(e){return new(e||Gw)},Gw.\u0275pipe=gi({name:"vector2",type:Gw,pure:!0});class Hw{transform(e){return new R(...e)}}Hw.\u0275fac=function(e){return new(e||Hw)},Hw.\u0275pipe=gi({name:"vector3",type:Hw,pure:!0});class Qw{transform(e){return new ei(...e)}}Qw.\u0275fac=function(e){return new(e||Qw)},Qw.\u0275pipe=gi({name:"vector4",type:Qw,pure:!0});class Ww{transform(e,t){return new to(new R(...e),t)}}Ww.\u0275fac=function(e){return new(e||Ww)},Ww.\u0275pipe=gi({name:"plane",type:Ww,pure:!0});class Wc extends Po{constructor(){super(...arguments),this.clazz=Ax}}Wc.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Wc)))(t||Wc)}}(),Wc.\u0275prov=Ge({token:Wc,factory:Wc.\u0275fac,providedIn:"root"});class qw extends da{constructor(e){super(),this.service=e}}qw.\u0275fac=function(e){return new(e||qw)(P(Wc,16))},qw.\u0275pipe=gi({name:"loadTexture",type:qw,pure:!0});class Yw extends Ts{constructor(e,t,n){super(e,t),this.host=e,this.zone=t,this.service=n}}Yw.\u0275fac=function(e){return new(e||Yw)(P(Jn,1),P(pt),P(Wc))},Yw.\u0275dir=Oe({type:Yw,selectors:[["","loadTexture",""]],features:[W]});class u0e extends mp{constructor(e){super(e)}parse(e){e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");let S=0;const C=new Uint8Array(e),T={id_length:C[S++],colormap_type:C[S++],image_type:C[S++],colormap_index:C[S++]|C[S++]<<8,colormap_length:C[S++]|C[S++]<<8,colormap_size:C[S++],origin:[C[S++]|C[S++]<<8,C[S++]|C[S++]<<8],width:C[S++]|C[S++]<<8,height:C[S++]|C[S++]<<8,pixel_size:C[S++],flags:C[S++]};(function t(L){switch(L.image_type){case 1:case 9:(L.colormap_length>256||24!==L.colormap_size||1!==L.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case 2:case 3:case 10:case 11:L.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case 0:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',L.image_type)}(L.width<=0||L.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),8!==L.pixel_size&&16!==L.pixel_size&&24!==L.pixel_size&&32!==L.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',L.pixel_size)})(T),T.id_length+S>e.length&&console.error("THREE.TGALoader: No data."),S+=T.id_length;let k=!1,U=!1,B=!1;switch(T.image_type){case 9:k=!0,U=!0;break;case 1:U=!0;break;case 10:k=!0;break;case 2:break;case 11:k=!0,B=!0;break;case 3:B=!0}const j=new Uint8Array(T.width*T.height*4),H=function n(L,V,O,Q,re){let _e,de;const Y=O.pixel_size>>3,q=O.width*O.height*Y;if(V&&(de=re.subarray(Q,Q+=O.colormap_length*(O.colormap_size>>3))),L){_e=new Uint8Array(q);let te,$,I,ue=0;const Me=new Uint8Array(Y);for(;ue<q;)if(te=re[Q++],$=1+(127&te),128&te){for(I=0;I<Y;++I)Me[I]=re[Q++];for(I=0;I<$;++I)_e.set(Me,ue+I*Y);ue+=Y*$}else{for($*=Y,I=0;I<$;++I)_e[ue+I]=re[Q++];ue+=$}}else _e=re.subarray(Q,Q+=V?O.width*O.height:q);return{pixel_data:_e,palettes:de}}(k,U,T,S,C);return function d(L,V,O,Q,re){let _e,de,Y,q,te,$;switch((48&T.flags)>>4){default:case 2:_e=0,Y=1,te=V,de=0,q=1,$=O;break;case 0:_e=0,Y=1,te=V,de=O-1,q=-1,$=-1;break;case 3:_e=V-1,Y=-1,te=-1,de=0,q=1,$=O;break;case 1:_e=V-1,Y=-1,te=-1,de=O-1,q=-1,$=-1}if(B)switch(T.pixel_size){case 8:!function l(L,V,O,Q,re,_e,de,Y){let q,$,I,te=0;const ue=T.width;for(I=V;I!==Q;I+=O)for($=re;$!==de;$+=_e,te++)q=Y[te],L[4*($+ue*I)+0]=q,L[4*($+ue*I)+1]=q,L[4*($+ue*I)+2]=q,L[4*($+ue*I)+3]=255}(L,de,q,$,_e,Y,te,Q);break;case 16:!function c(L,V,O,Q,re,_e,de,Y){let te,$,q=0;const I=T.width;for($=V;$!==Q;$+=O)for(te=re;te!==de;te+=_e,q+=2)L[4*(te+I*$)+0]=Y[q+0],L[4*(te+I*$)+1]=Y[q+0],L[4*(te+I*$)+2]=Y[q+0],L[4*(te+I*$)+3]=Y[q+1]}(L,de,q,$,_e,Y,te,Q);break;default:console.error("THREE.TGALoader: Format not supported.")}else switch(T.pixel_size){case 8:!function r(L,V,O,Q,re,_e,de,Y,q){const te=q;let $,ue,Me,I=0;const me=T.width;for(Me=V;Me!==Q;Me+=O)for(ue=re;ue!==de;ue+=_e,I++)$=Y[I],L[4*(ue+me*Me)+3]=255,L[4*(ue+me*Me)+2]=te[3*$+0],L[4*(ue+me*Me)+1]=te[3*$+1],L[4*(ue+me*Me)+0]=te[3*$+2]}(L,de,q,$,_e,Y,te,Q,re);break;case 16:!function s(L,V,O,Q,re,_e,de,Y){let q,$,I,te=0;const ue=T.width;for(I=V;I!==Q;I+=O)for($=re;$!==de;$+=_e,te+=2)q=Y[te+0]+(Y[te+1]<<8),L[4*($+ue*I)+0]=(31744&q)>>7,L[4*($+ue*I)+1]=(992&q)>>2,L[4*($+ue*I)+2]=(31&q)<<3,L[4*($+ue*I)+3]=32768&q?0:255}(L,de,q,$,_e,Y,te,Q);break;case 24:!function o(L,V,O,Q,re,_e,de,Y){let te,$,q=0;const I=T.width;for($=V;$!==Q;$+=O)for(te=re;te!==de;te+=_e,q+=3)L[4*(te+I*$)+3]=255,L[4*(te+I*$)+2]=Y[q+0],L[4*(te+I*$)+1]=Y[q+1],L[4*(te+I*$)+0]=Y[q+2]}(L,de,q,$,_e,Y,te,Q);break;case 32:!function a(L,V,O,Q,re,_e,de,Y){let te,$,q=0;const I=T.width;for($=V;$!==Q;$+=O)for(te=re;te!==de;te+=_e,q+=4)L[4*(te+I*$)+2]=Y[q+0],L[4*(te+I*$)+1]=Y[q+1],L[4*(te+I*$)+0]=Y[q+2],L[4*(te+I*$)+3]=Y[q+3]}(L,de,q,$,_e,Y,te,Q);break;default:console.error("THREE.TGALoader: Format not supported.")}}(j,T.width,T.height,H.pixel_data,H.palettes),{data:j,width:T.width,height:T.height,flipY:!0,generateMipmaps:!0,minFilter:Ws}}}class qc extends Po{constructor(){super(...arguments),this.clazz=u0e}}qc.\u0275fac=function(){let i;return function(t){return(i||(i=ce(qc)))(t||qc)}}(),qc.\u0275prov=Ge({token:qc,factory:qc.\u0275fac,providedIn:"root"});class Xw extends da{constructor(e){super(),this.service=e}}Xw.\u0275fac=function(e){return new(e||Xw)(P(qc,16))},Xw.\u0275pipe=gi({name:"loadTGATexture",type:Xw,pure:!0});class Zw extends Ts{constructor(e,t,n){super(e,t),this.host=e,this.zone=t,this.service=n}}Zw.\u0275fac=function(e){return new(e||Zw)(P(ma,1),P(pt),P(qc))},Zw.\u0275dir=Oe({type:Zw,selectors:[["","loadTGATexture",""]],features:[W]});class Yc extends Po{constructor(){super(...arguments),this.clazz=x4}}Yc.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Yc)))(t||Yc)}}(),Yc.\u0275prov=Ge({token:Yc,factory:Yc.\u0275fac,providedIn:"root"});class Kw extends da{constructor(e){super(),this.service=e}}Kw.\u0275fac=function(e){return new(e||Kw)(P(Yc,16))},Kw.\u0275pipe=gi({name:"loadCubeTexture",type:Kw,pure:!0});class $w extends Ts{constructor(e,t,n){super(e,t),this.host=e,this.zone=t,this.service=n}}$w.\u0275fac=function(e){return new(e||$w)(P(Jn,1),P(pt),P(Yc))},$w.\u0275dir=Oe({type:$w,selectors:[["","loadCubeTexture",""]],features:[W]});class h0e extends vx{constructor(e){super(e)}parse(e,t){const n={mipmaps:[],width:0,height:0,format:null,mipmapCount:1};function f(te){return te.charCodeAt(0)+(te.charCodeAt(1)<<8)+(te.charCodeAt(2)<<16)+(te.charCodeAt(3)<<24)}function g(te,$,I,ue){const Me=I*ue*4,me=new Uint8Array(te,$,Me),He=new Uint8Array(Me);let Ce=0,we=0;for(let Ee=0;Ee<ue;Ee++)for(let it=0;it<I;it++){const qe=me[we];we++;const bt=me[we];we++;const At=me[we];we++;const lt=me[we];we++,He[Ce]=At,Ce++,He[Ce]=bt,Ce++,He[Ce]=qe,Ce++,He[Ce]=lt,Ce++}return He}const _=f("DXT1"),p=f("DXT3"),v=f("DXT5"),b=f("ETC1"),O=new Int32Array(e,0,31);if(542327876!==O[0])return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),n;let Q;const re=O[21];let _e=!1;switch(re){case _:Q=8,n.format=Af;break;case p:Q=16,n.format=H_;break;case v:Q=16,n.format=yf;break;case b:Q=8,n.format=hy;break;default:if(!(32===O[22]&&16711680&O[23]&&65280&O[24]&&255&O[25]&&4278190080&O[26]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",function m(te){return String.fromCharCode(255&te,te>>8&255,te>>16&255,te>>24&255)}(re)),n;_e=!0,Q=64,n.format=Rn}n.mipmapCount=1,131072&O[2]&&!1!==t&&(n.mipmapCount=Math.max(1,O[7]));const de=O[28];if(n.isCubemap=!!(512&de),n.isCubemap&&(!(1024&de)||!(2048&de)||!(4096&de)||!(8192&de)||!(16384&de)||!(32768&de)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),n;n.width=O[4],n.height=O[3];let Y=O[1]+4;const q=n.isCubemap?6:1;for(let te=0;te<q;te++){let $=n.width,I=n.height;for(let ue=0;ue<n.mipmapCount;ue++){let Me,me;_e?(Me=g(e,Y,$,I),me=Me.length):(me=Math.max(4,$)/4*Math.max(4,I)/4*Q,Me=new Uint8Array(e,Y,me)),n.mipmaps.push({data:Me,width:$,height:I}),Y+=me,$=Math.max($>>1,1),I=Math.max(I>>1,1)}}return n}}class Xc extends Po{constructor(){super(...arguments),this.clazz=h0e}}Xc.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Xc)))(t||Xc)}}(),Xc.\u0275prov=Ge({token:Xc,factory:Xc.\u0275fac,providedIn:"root"});class Jw extends da{constructor(e){super(),this.service=e}}Jw.\u0275fac=function(e){return new(e||Jw)(P(Xc,16))},Jw.\u0275pipe=gi({name:"loadDDSTexture",type:Jw,pure:!0});class eC extends Ts{constructor(e,t,n){super(e,t),this.host=e,this.zone=t,this.service=n}}eC.\u0275fac=function(e){return new(e||eC)(P(Ya,1),P(pt),P(Xc))},eC.\u0275dir=Oe({type:eC,selectors:[["","loadDDSTexture",""]],features:[W]});class f0e{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const n=this.workersResolve[e];if(n&&n(t),this.queue.length){const{resolve:r,msg:s,transfer:o}=this.queue.shift();this.workersResolve[e]=r,this.workers[e].postMessage(s,o)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise(n=>{const r=this._getIdleWorker();-1!==r?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=n,this.workers[r].postMessage(e,t)):this.queue.push({resolve:n,msg:e,transfer:t})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}class v0e{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class v0{constructor(e,t,n,r){this._dataView=new DataView(e.buffer,e.byteOffset+t,n),this._littleEndian=r,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_skip(e){return this._offset+=e,this}_scan(e,t=0){const n=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==t&&r<e;)r++,this._offset++;return r<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,r)}}new Uint8Array([0]);const kr=[171,75,84,88,32,50,48,187,13,10,26,10];function jG(i){return typeof TextDecoder<"u"?(new TextDecoder).decode(i):Buffer.from(i).toString("utf8")}let hD,Vl,fD;const pD={env:{emscripten_notify_memory_growth:function(i){fD=new Uint8Array(Vl.exports.memory.buffer)}}};class x0e{init(){return hD||(hD=typeof fetch<"u"?fetch("data:application/wasm;base64,"+UG).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,pD)).then(this._init):WebAssembly.instantiate(Buffer.from(UG,"base64"),pD).then(this._init),hD)}_init(e){Vl=e.instance,pD.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!Vl)throw new Error("ZSTDDecoder: Await .init() before decoding.");const n=e.byteLength,r=Vl.exports.malloc(n);fD.set(e,r),t=t||Number(Vl.exports.ZSTD_findDecompressedSize(r,n));const s=Vl.exports.malloc(t),o=Vl.exports.ZSTD_decompress(s,t,r,n),a=fD.slice(s,s+o);return Vl.exports.free(r),Vl.exports.free(s),a}}const UG="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",mD=new WeakMap;let _D,gD=0,w0e=(()=>{class i extends br{constructor(t){super(t),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new f0e,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(t){return this.transcoderPath=t,this}setWorkerLimit(t){return this.workerPool.setWorkerLimit(t),this}detectSupport(t){return this.workerConfig={astcSupported:t.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:t.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:t.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:t.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:t.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:t.extensions.has("WEBGL_compressed_texture_pvrtc")||t.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},t.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const t=new vr(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);const n=t.loadAsync("basis_transcoder.js"),r=new vr(this.manager);r.setPath(this.transcoderPath),r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials);const s=r.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([n,s]).then(([o,a])=>{const l=i.BasisWorker.toString(),c=["/* constants */","let _EngineFormat = "+JSON.stringify(i.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(i.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(i.BasisFormat),"/* basis_transcoder.js */",o,"/* worker */",l.substring(l.indexOf("{")+1,l.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([c])),this.transcoderBinary=a,this.workerPool.setWorkerCreator(()=>{const d=new Worker(this.workerSourceURL),u=this.transcoderBinary.slice(0);return d.postMessage({type:"init",config:this.workerConfig,transcoderBinary:u},[u]),d})}),gD>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),gD++}return this.transcoderPending}load(t,n,r,s){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const o=new vr(this.manager);o.setResponseType("arraybuffer"),o.setWithCredentials(this.withCredentials),o.load(t,a=>{if(mD.has(a))return mD.get(a).promise.then(n).catch(s);this._createTexture(a).then(l=>n?n(l):null).catch(s)},r,s)}_createTextureFrom(t,n){const{mipmaps:r,width:s,height:o,format:a,type:l,error:c,dfdTransferFn:d,dfdFlags:u}=t;if("error"===l)return Promise.reject(c);const h=n.layerCount>1?new KT(r,s,o,n.layerCount,a,Gr):new gb(r,s,o,a,Gr);return h.minFilter=1===r.length?Ni:Ws,h.magFilter=Ni,h.generateMipmaps=!1,h.needsUpdate=!0,h.encoding=2===d?ci:qs,h.premultiplyAlpha=!!(1&u),h}_createTexture(t,n={}){var r=this;return is(function*(){const s=function A0e(i){const e=new Uint8Array(i.buffer,i.byteOffset,kr.length);if(e[0]!==kr[0]||e[1]!==kr[1]||e[2]!==kr[2]||e[3]!==kr[3]||e[4]!==kr[4]||e[5]!==kr[5]||e[6]!==kr[6]||e[7]!==kr[7]||e[8]!==kr[8]||e[9]!==kr[9]||e[10]!==kr[10]||e[11]!==kr[11])throw new Error("Missing KTX 2.0 identifier.");const t=new v0e,n=17*Uint32Array.BYTES_PER_ELEMENT,r=new v0(i,kr.length,n,!0);t.vkFormat=r._nextUint32(),t.typeSize=r._nextUint32(),t.pixelWidth=r._nextUint32(),t.pixelHeight=r._nextUint32(),t.pixelDepth=r._nextUint32(),t.layerCount=r._nextUint32(),t.faceCount=r._nextUint32();const s=r._nextUint32();t.supercompressionScheme=r._nextUint32();const o=r._nextUint32(),a=r._nextUint32(),l=r._nextUint32(),c=r._nextUint32(),d=r._nextUint64(),u=r._nextUint64(),h=new v0(i,kr.length+n,3*s*8,!0);for(let V=0;V<s;V++)t.levels.push({levelData:new Uint8Array(i.buffer,i.byteOffset+h._nextUint64(),h._nextUint64()),uncompressedByteLength:h._nextUint64()});const f=new v0(i,o,a,!0),m={vendorId:f._skip(4)._nextUint16(),descriptorType:f._nextUint16(),versionNumber:f._nextUint16(),descriptorBlockSize:f._nextUint16(),colorModel:f._nextUint8(),colorPrimaries:f._nextUint8(),transferFunction:f._nextUint8(),flags:f._nextUint8(),texelBlockDimension:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],bytesPlane:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],samples:[]},g=(m.descriptorBlockSize/4-6)/4;for(let V=0;V<g;V++){const O={bitOffset:f._nextUint16(),bitLength:f._nextUint8(),channelType:f._nextUint8(),samplePosition:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&O.channelType?(O.sampleLower=f._nextInt32(),O.sampleUpper=f._nextInt32()):(O.sampleLower=f._nextUint32(),O.sampleUpper=f._nextUint32()),m.samples[V]=O}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(m);const _=new v0(i,l,c,!0);for(;_._offset<c;){const V=_._nextUint32(),O=_._scan(V),Q=jG(O),re=_._scan(V-O.byteLength);t.keyValue[Q]=Q.match(/^ktx/i)?jG(re):re,_._offset%4&&_._skip(4-_._offset%4)}if(u<=0)return t;const p=new v0(i,d,u,!0),v=p._nextUint16(),b=p._nextUint16(),y=p._nextUint32(),x=p._nextUint32(),w=p._nextUint32(),E=p._nextUint32(),S=[];for(let V=0;V<s;V++)S.push({imageFlags:p._nextUint32(),rgbSliceByteOffset:p._nextUint32(),rgbSliceByteLength:p._nextUint32(),alphaSliceByteOffset:p._nextUint32(),alphaSliceByteLength:p._nextUint32()});const C=d+p._offset,T=C+y,k=T+x,U=k+w,B=new Uint8Array(i.buffer,i.byteOffset+C,y),j=new Uint8Array(i.buffer,i.byteOffset+T,x),H=new Uint8Array(i.buffer,i.byteOffset+k,w),L=new Uint8Array(i.buffer,i.byteOffset+U,E);return t.globalData={endpointCount:v,selectorCount:b,imageDescs:S,endpointsData:B,selectorsData:j,tablesData:H,extendedData:L},t}(new Uint8Array(t));if(0!==s.vkFormat)return function M0e(i){return vD.apply(this,arguments)}(s);const o=n,a=r.init().then(()=>r.workerPool.postMessage({type:"transcode",buffer:t,taskConfig:o},[t])).then(l=>r._createTextureFrom(l.data,s));return mD.set(t,{promise:a}),a})()}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),gD--,this}}return i.BasisFormat={ETC1S:0,UASTC_4x4:1},i.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},i.EngineFormat={RGBAFormat:Rn,RGBA_ASTC_4x4_Format:my,RGBA_BPTC_Format:q_,RGBA_ETC2_EAC_Format:py,RGBA_PVRTC_4BPPV1_Format:wf,RGBA_S3TC_DXT5_Format:yf,RGB_ETC1_Format:hy,RGB_ETC2_Format:fy,RGB_PVRTC_4BPPV1_Format:xf,RGB_S3TC_DXT1_Format:Af},i.BasisWorker=function(){let e,t,n;const r=_EngineFormat,s=_TranscoderFormat,o=_BasisFormat;self.addEventListener("message",function(g){const _=g.data;switch(_.type){case"init":e=_.config,function a(g){t=new Promise(_=>{n={wasmBinary:g,onRuntimeInitialized:_},BASIS(n)}).then(()=>{n.initializeBasis(),void 0===n.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}(_.transcoderBinary);break;case"transcode":t.then(()=>{try{const{width:p,height:v,hasAlpha:b,mipmaps:y,format:x,dfdTransferFn:w,dfdFlags:E}=function l(g){const _=new n.KTX2File(new Uint8Array(g));function p(){_.close(),_.delete()}if(!_.isValid())throw p(),new Error("THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file");const v=_.isUASTC()?o.UASTC_4x4:o.ETC1S,b=_.getWidth(),y=_.getHeight(),x=_.getLayers()||1,w=_.getLevels(),E=_.getHasAlpha(),S=_.getDFDTransferFunc(),C=_.getDFDFlags(),{transcoderFormat:T,engineFormat:k}=function h(g,_,p,v){let b,y;const x=g===o.ETC1S?d:u;for(let w=0;w<x.length;w++){const E=x[w];if(e[E.if]&&E.basisFormat.includes(g)&&!(v&&E.transcoderFormat.length<2)&&(!E.needsPowerOfTwo||f(_)&&f(p)))return b=E.transcoderFormat[v?1:0],y=E.engineFormat[v?1:0],{transcoderFormat:b,engineFormat:y}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),b=s.RGBA32,y=r.RGBAFormat,{transcoderFormat:b,engineFormat:y}}(v,b,y,E);if(!b||!y||!w)throw p(),new Error("THREE.KTX2Loader:\tInvalid texture");if(!_.startTranscoding())throw p(),new Error("THREE.KTX2Loader: .startTranscoding failed");const U=[];for(let B=0;B<w;B++){const j=[];let H,L;for(let V=0;V<x;V++){const O=_.getImageLevelInfo(B,V,0);H=O.origWidth<4?O.origWidth:O.width,L=O.origHeight<4?O.origHeight:O.height;const Q=new Uint8Array(_.getImageTranscodedSizeInBytes(B,V,0,T));if(!_.transcodeImage(Q,B,V,0,T,0,-1,-1))throw p(),new Error("THREE.KTX2Loader: .transcodeImage failed.");j.push(Q)}U.push({data:m(j),width:H,height:L})}return p(),{width:b,height:y,hasAlpha:E,mipmaps:U,format:k,dfdTransferFn:S,dfdFlags:C}}(_.buffer),S=[];for(let C=0;C<y.length;++C)S.push(y[C].data.buffer);self.postMessage({type:"transcode",id:_.id,width:p,height:v,hasAlpha:b,mipmaps:y,format:x,dfdTransferFn:w,dfdFlags:E},S)}catch(p){console.error(p),self.postMessage({type:"error",id:_.id,error:p.message})}})}});const c=[{if:"astcSupported",basisFormat:[o.UASTC_4x4],transcoderFormat:[s.ASTC_4x4,s.ASTC_4x4],engineFormat:[r.RGBA_ASTC_4x4_Format,r.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[s.BC7_M5,s.BC7_M5],engineFormat:[r.RGBA_BPTC_Format,r.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[s.BC1,s.BC3],engineFormat:[r.RGB_S3TC_DXT1_Format,r.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[s.ETC1,s.ETC2],engineFormat:[r.RGB_ETC2_Format,r.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[s.ETC1],engineFormat:[r.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[s.PVRTC1_4_RGB,s.PVRTC1_4_RGBA],engineFormat:[r.RGB_PVRTC_4BPPV1_Format,r.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],d=c.sort(function(g,_){return g.priorityETC1S-_.priorityETC1S}),u=c.sort(function(g,_){return g.priorityUASTC-_.priorityUASTC});function f(g){return g<=2||0==(g&g-1)&&0!==g}function m(g){let _=0;for(const b of g)_+=b.byteLength;const p=new Uint8Array(_);let v=0;for(const b of g)p.set(b,v),v+=b.byteLength;return p}},i})();const VG={109:Rn,97:Rn,37:Rn,43:Rn,103:vf,83:vf,16:vf,22:vf,100:Al,76:Al,15:Al,9:Al},bD={109:Nn,97:pn,37:Gr,43:Gr,103:Nn,83:pn,16:Gr,22:Gr,100:Nn,76:pn,15:Gr,9:Gr},C0e={43:ci,22:ci,15:ci};function vD(){return vD=is(function*(i){const{vkFormat:e,pixelWidth:t,pixelHeight:n,pixelDepth:r}=i;if(void 0===VG[e])throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const s=i.levels[0];let o,a;if(0===i.supercompressionScheme)o=s.levelData;else{if(2!==i.supercompressionScheme)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");_D||(_D=new Promise(function(){var c=is(function*(d){const u=new x0e;yield u.init(),d(u)});return function(d){return c.apply(this,arguments)}}())),o=(yield _D).decode(s.levelData,s.uncompressedByteLength)}a=bD[e]===Nn?new Float32Array(o.buffer,o.byteOffset,o.byteLength/Float32Array.BYTES_PER_ELEMENT):bD[e]===pn?new Uint16Array(o.buffer,o.byteOffset,o.byteLength/Uint16Array.BYTES_PER_ELEMENT):o;const l=0===r?new Ba(a,t,n):new eb(a,t,n,r);return l.type=bD[e],l.format=VG[e],l.encoding=C0e[e]||qs,l.needsUpdate=!0,Promise.resolve(l)}),vD.apply(this,arguments)}class Zc extends Po{constructor(){super(...arguments),this.clazz=w0e,this.transcoderPath=""}setDecoderPath(e){this.transcoderPath=e}createLoaderInstance(){const e=super.createLoaderInstance();return e.setTranscoderPath(this.transcoderPath),e}}Zc.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Zc)))(t||Zc)}}(),Zc.\u0275prov=Ge({token:Zc,factory:Zc.\u0275fac,providedIn:"root"});class iC extends da{constructor(e){super(),this.service=e}}iC.\u0275fac=function(e){return new(e||iC)(P(Zc,16))},iC.\u0275pipe=gi({name:"loadKTX2Texture",type:iC,pure:!0});class nC extends Ts{constructor(e,t,n){super(e,t),this.host=e,this.zone=t,this.service=n}}nC.\u0275fac=function(e){return new(e||nC)(P(Jn,1),P(pt),P(Zc))},nC.\u0275dir=Oe({type:nC,selectors:[["","loadKTX2Texture",""]],features:[W]});class E0e extends vx{constructor(e){super(e)}parse(e,t){const n=new R0e(e,1);return{mipmaps:n.mipmaps(t),width:n.pixelWidth,height:n.pixelHeight,format:n.glInternalFormat,isCubemap:6===n.numberOfFaces,mipmapCount:n.numberOfMipmapLevels}}}class R0e{constructor(e,t){this.arrayBuffer=e;const n=new Uint8Array(this.arrayBuffer,0,12);if(171!==n[0]||75!==n[1]||84!==n[2]||88!==n[3]||32!==n[4]||49!==n[5]||49!==n[6]||187!==n[7]||13!==n[8]||10!==n[9]||26!==n[10]||10!==n[11])return void console.error("texture missing KTX identifier");const r=Uint32Array.BYTES_PER_ELEMENT,s=new DataView(this.arrayBuffer,12,13*r),a=67305985===s.getUint32(0,!0);this.glType=s.getUint32(1*r,a),this.glTypeSize=s.getUint32(2*r,a),this.glFormat=s.getUint32(3*r,a),this.glInternalFormat=s.getUint32(4*r,a),this.glBaseInternalFormat=s.getUint32(5*r,a),this.pixelWidth=s.getUint32(6*r,a),this.pixelHeight=s.getUint32(7*r,a),this.pixelDepth=s.getUint32(8*r,a),this.numberOfArrayElements=s.getUint32(9*r,a),this.numberOfFaces=s.getUint32(10*r,a),this.numberOfMipmapLevels=s.getUint32(11*r,a),this.bytesOfKeyValueData=s.getUint32(12*r,a),0===this.glType?(this.numberOfMipmapLevels=Math.max(1,this.numberOfMipmapLevels),0!==this.pixelHeight&&0===this.pixelDepth?0===this.numberOfArrayElements?this.numberOfFaces===t?this.loadType=0:console.warn("number of faces expected"+t+", but found "+this.numberOfFaces):console.warn("texture arrays not currently supported"):console.warn("only 2D textures currently supported")):console.warn("only compressed formats currently supported")}mipmaps(e){const t=[];let n=64+this.bytesOfKeyValueData,r=this.pixelWidth,s=this.pixelHeight;const o=e?this.numberOfMipmapLevels:1;for(let a=0;a<o;a++){const l=new Int32Array(this.arrayBuffer,n,1)[0];n+=4;for(let c=0;c<this.numberOfFaces;c++){const d=new Uint8Array(this.arrayBuffer,n,l);t.push({data:d,width:r,height:s}),n+=l,n+=3-(l+3)%4}r=Math.max(1,.5*r),s=Math.max(1,.5*s)}return t}}class Kc extends Po{constructor(){super(...arguments),this.clazz=E0e}}Kc.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Kc)))(t||Kc)}}(),Kc.\u0275prov=Ge({token:Kc,factory:Kc.\u0275fac,providedIn:"root"});class rC extends da{constructor(e){super(),this.service=e}}rC.\u0275fac=function(e){return new(e||rC)(P(Kc,16))},rC.\u0275pipe=gi({name:"loadKTXTexture",type:rC,pure:!0});class sC extends Ts{constructor(e,t,n){super(e,t),this.host=e,this.zone=t,this.service=n}}sC.\u0275fac=function(e){return new(e||sC)(P(Ya,1),P(pt),P(Kc))},sC.\u0275dir=Oe({type:sC,selectors:[["","loadKTXTexture",""]],features:[W]});class I0e extends vx{constructor(e){super(e)}parse(e,t){const r=new Uint32Array(e,0,13),s={buffer:e,header:r,loadMipmaps:t};return 55727696===r[0]?function D0e(i){const e=i.header;let t,n;const r=e[12],s=e[2],o=e[6],a=e[7],l=e[10],c=e[11];switch(s){case 0:t=2,n=Q_;break;case 1:t=2,n=W_;break;case 2:t=4,n=xf;break;case 3:t=4,n=wf;break;default:console.error("THREE.PVRLoader: Unsupported PVR format:",s)}return i.dataPtr=52+r,i.bpp=t,i.format=n,i.width=a,i.height=o,i.numSurfaces=l,i.numMipmaps=c,i.isCubemap=6===l,zG(i)}(s):559044176===r[11]?function P0e(i){const e=i.header,t=e[0],n=e[1],r=e[2],s=e[3],l=e[12],h=255&e[4];let f,m;const g=e[10]>0;return 25===h?(m=g?wf:xf,f=4):24===h?(m=g?W_:Q_,f=2):console.error("THREE.PVRLoader: Unknown PVR format:",h),i.dataPtr=t,i.bpp=f,i.format=m,i.width=r,i.height=n,i.numSurfaces=l,i.numMipmaps=s+1,i.isCubemap=6===l,zG(i)}(s):void console.error("THREE.PVRLoader: Unknown PVR format.")}}function zG(i){const e={mipmaps:[],width:i.width,height:i.height,format:i.format,mipmapCount:i.numMipmaps,isCubemap:i.isCubemap},t=i.buffer;let n=i.dataPtr,r=0,s=0,o=0,a=0,l=0,c=0;const d=i.bpp,u=i.numSurfaces;2===d?(o=8,a=4):(o=4,a=4),s=o*a*d/8,e.mipmaps.length=i.numMipmaps*u;let h=0;for(;h<i.numMipmaps;){const f=i.width>>h,m=i.height>>h;l=f/o,c=m/a,l<2&&(l=2),c<2&&(c=2),r=l*c*s;for(let g=0;g<u;g++){const p={data:new Uint8Array(t,n,r),width:f,height:m};e.mipmaps[g*i.numMipmaps+h]=p,n+=r}h++}return e}class $c extends Po{constructor(){super(...arguments),this.clazz=I0e}}$c.\u0275fac=function(){let i;return function(t){return(i||(i=ce($c)))(t||$c)}}(),$c.\u0275prov=Ge({token:$c,factory:$c.\u0275fac,providedIn:"root"});class oC extends da{constructor(e){super(),this.service=e}}oC.\u0275fac=function(e){return new(e||oC)(P($c,16))},oC.\u0275pipe=gi({name:"loadPVRTexture",type:oC,pure:!0});class aC extends Ts{constructor(e,t,n){super(e,t),this.host=e,this.zone=t,this.service=n}}aC.\u0275fac=function(e){return new(e||aC)(P(Ya,1),P(pt),P($c))},aC.\u0275dir=Oe({type:aC,selectors:[["","loadPVRTexture",""]],features:[W]});class k0e extends mp{constructor(e){super(e),this.type=pn}parse(e){const C=Math.pow(2.7182818,2.2),U={l:0,c:0,lc:0};function B(M,D,G,J,be){for(;G<M;)D=D<<8|tt(J,be),G+=8;U.l=D>>(G-=M)&(1<<M)-1,U.c=D,U.lc=G}const j=new Array(59);function V(M){return 63&M}function O(M){return M>>6}const re={c:0,lc:0};function _e(M,D,G,J){M=M<<8|tt(G,J),D+=8,re.c=M,re.lc=D}const de={c:0,lc:0};function Y(M,D,G,J,be,he,Se,Pe,Ue){if(M==D){J<8&&(_e(G,J,be,he),G=re.c,J=re.lc);let Fe=G>>(J-=8);if(Fe=new Uint8Array([Fe])[0],Pe.value+Fe>Ue)return!1;const Xe=Se[Pe.value-1];for(;Fe-- >0;)Se[Pe.value++]=Xe}else{if(!(Pe.value<Ue))return!1;Se[Pe.value++]=M}de.c=G,de.lc=J}function q(M){return 65535&M}function te(M){const D=q(M);return D>32767?D-65536:D}const $={a:0,b:0};function I(M,D){const G=te(M),be=te(D),he=G+(1&be)+(be>>1),Pe=he-be;$.a=he,$.b=Pe}function ue(M,D){const G=q(M),J=q(D),be=G-(J>>1)&65535;$.a=J+be-32768&65535,$.b=be}function Me(M,D,G,J,be,he,Se){const Pe=Se<16384,Ue=G>be?be:G;let Xe,gt,Fe=1;for(;Fe<=Ue;)Fe<<=1;for(Fe>>=1,Xe=Fe,Fe>>=1;Fe>=1;){gt=0;const rt=gt+he*(be-Xe),st=he*Fe,$t=he*Xe,at=J*Fe,Ct=J*Xe;let hi,Ki,vn,Yi;for(;gt<=rt;gt+=$t){let Ii=gt;const xi=gt+J*(G-Xe);for(;Ii<=xi;Ii+=Ct){const Di=Ii+at,Yr=Ii+st,ar=Yr+at;Pe?(I(M[Ii+D],M[Yr+D]),hi=$.a,vn=$.b,I(M[Di+D],M[ar+D]),Ki=$.a,Yi=$.b,I(hi,Ki),M[Ii+D]=$.a,M[Di+D]=$.b,I(vn,Yi),M[Yr+D]=$.a,M[ar+D]=$.b):(ue(M[Ii+D],M[Yr+D]),hi=$.a,vn=$.b,ue(M[Di+D],M[ar+D]),Ki=$.a,Yi=$.b,ue(hi,Ki),M[Ii+D]=$.a,M[Di+D]=$.b,ue(vn,Yi),M[Yr+D]=$.a,M[ar+D]=$.b)}if(G&Fe){const Di=Ii+st;Pe?I(M[Ii+D],M[Di+D]):ue(M[Ii+D],M[Di+D]),hi=$.a,M[Di+D]=$.b,M[Ii+D]=hi}}if(be&Fe){let Ii=gt;const xi=gt+J*(G-Xe);for(;Ii<=xi;Ii+=Ct){const Di=Ii+at;Pe?I(M[Ii+D],M[Di+D]):ue(M[Ii+D],M[Di+D]),hi=$.a,M[Di+D]=$.b,M[Ii+D]=hi}}Xe=Fe,Fe>>=1}return gt}function He(M,D,G,J,be,he){const Pe=G.value,Ue=$e(D,G),Fe=$e(D,G);G.value+=4;const Xe=$e(D,G);if(G.value+=4,Ue<0||Ue>=65537||Fe<0||Fe>=65537)throw new Error("Something wrong with HUF_ENCSIZE");const gt=new Array(65537),rt=new Array(16384);if(function k(M){for(let D=0;D<16384;D++)M[D]={},M[D].len=0,M[D].lit=0,M[D].p=null}(rt),function L(M,D,G,J,be,he){const Se=D;let Pe=0,Ue=0;for(;J<=be;J++){if(Se.value-D.value>G)return!1;B(6,Pe,Ue,M,Se);const Fe=U.l;if(Pe=U.c,Ue=U.lc,he[J]=Fe,63==Fe){if(Se.value-D.value>G)throw new Error("Something wrong with hufUnpackEncTable");B(8,Pe,Ue,M,Se);let Xe=U.l+6;if(Pe=U.c,Ue=U.lc,J+Xe>be+1)throw new Error("Something wrong with hufUnpackEncTable");for(;Xe--;)he[J++]=0;J--}else if(Fe>=59){let Xe=Fe-59+2;if(J+Xe>be+1)throw new Error("Something wrong with hufUnpackEncTable");for(;Xe--;)he[J++]=0;J--}}!function H(M){for(let G=0;G<=58;++G)j[G]=0;for(let G=0;G<65537;++G)j[M[G]]+=1;let D=0;for(let G=58;G>0;--G){const J=D+j[G]>>1;j[G]=D,D=J}for(let G=0;G<65537;++G){const J=M[G];J>0&&(M[G]=J|j[J]++<<6)}}(he)}(M,G,J-(G.value-Pe),Ue,Fe,gt),Xe>8*(J-(G.value-Pe)))throw new Error("Something wrong with hufUncompress");(function Q(M,D,G,J){for(;D<=G;D++){const be=O(M[D]),he=V(M[D]);if(be>>he)throw new Error("Invalid table entry");if(he>14){const Se=J[be>>he-14];if(Se.len)throw new Error("Invalid table entry");if(Se.lit++,Se.p){const Pe=Se.p;Se.p=new Array(Se.lit);for(let Ue=0;Ue<Se.lit-1;++Ue)Se.p[Ue]=Pe[Ue]}else Se.p=new Array(1);Se.p[Se.lit-1]=D}else if(he){let Se=0;for(let Pe=1<<14-he;Pe>0;Pe--){const Ue=J[(be<<14-he)+Se];if(Ue.len||Ue.p)throw new Error("Invalid table entry");Ue.len=he,Ue.lit=D,Se++}}}})(gt,Ue,Fe,rt),function me(M,D,G,J,be,he,Se,Pe,Ue){let Fe=0,Xe=0;const gt=Se,rt=Math.trunc(J.value+(be+7)/8);for(;J.value<rt;)for(_e(Fe,Xe,G,J),Fe=re.c,Xe=re.lc;Xe>=14;){const at=D[Fe>>Xe-14&16383];if(at.len)Xe-=at.len,Y(at.lit,he,Fe,Xe,G,J,Pe,Ue,gt),Fe=de.c,Xe=de.lc;else{if(!at.p)throw new Error("hufDecode issues");let Ct;for(Ct=0;Ct<at.lit;Ct++){const hi=V(M[at.p[Ct]]);for(;Xe<hi&&J.value<rt;)_e(Fe,Xe,G,J),Fe=re.c,Xe=re.lc;if(Xe>=hi&&O(M[at.p[Ct]])==(Fe>>Xe-hi&(1<<hi)-1)){Xe-=hi,Y(at.p[Ct],he,Fe,Xe,G,J,Pe,Ue,gt),Fe=de.c,Xe=de.lc;break}}if(Ct==at.lit)throw new Error("hufDecode issues")}}const st=8-be&7;for(Fe>>=st,Xe-=st;Xe>0;){const $t=D[Fe<<14-Xe&16383];if(!$t.len)throw new Error("hufDecode issues");Xe-=$t.len,Y($t.lit,he,Fe,Xe,G,J,Pe,Ue,gt),Fe=de.c,Xe=de.lc}}(gt,rt,M,G,Xe,Fe,he,be,{value:0})}function we(M){for(let D=1;D<M.length;D++)M[D]=M[D-1]+M[D]-128}function Ee(M,D){let G=0,J=Math.floor((M.length+1)/2),be=0;const he=M.length-1;for(;!(be>he||(D[be++]=M[G++],be>he));)D[be++]=M[J++]}function it(M){let D=M.byteLength;const G=new Array;let J=0;const be=new DataView(M);for(;D>0;){const he=be.getInt8(J++);if(he<0){const Se=-he;D-=Se+1;for(let Pe=0;Pe<Se;Pe++)G.push(be.getUint8(J++))}else{const Se=he;D-=2;const Pe=be.getUint8(J++);for(let Ue=0;Ue<Se+1;Ue++)G.push(Pe)}}return G}function bt(M,D,G){let J,be=1;for(;be<64;)J=D[M.value],65280==J?be=64:J>>8==255?be+=255&J:(G[be]=J,be++),M.value++}function At(M,D){D[0]=ee(M[0]),D[1]=ee(M[1]),D[2]=ee(M[5]),D[3]=ee(M[6]),D[4]=ee(M[14]),D[5]=ee(M[15]),D[6]=ee(M[27]),D[7]=ee(M[28]),D[8]=ee(M[2]),D[9]=ee(M[4]),D[10]=ee(M[7]),D[11]=ee(M[13]),D[12]=ee(M[16]),D[13]=ee(M[26]),D[14]=ee(M[29]),D[15]=ee(M[42]),D[16]=ee(M[3]),D[17]=ee(M[8]),D[18]=ee(M[12]),D[19]=ee(M[17]),D[20]=ee(M[25]),D[21]=ee(M[30]),D[22]=ee(M[41]),D[23]=ee(M[43]),D[24]=ee(M[9]),D[25]=ee(M[11]),D[26]=ee(M[18]),D[27]=ee(M[24]),D[28]=ee(M[31]),D[29]=ee(M[40]),D[30]=ee(M[44]),D[31]=ee(M[53]),D[32]=ee(M[10]),D[33]=ee(M[19]),D[34]=ee(M[23]),D[35]=ee(M[32]),D[36]=ee(M[39]),D[37]=ee(M[45]),D[38]=ee(M[52]),D[39]=ee(M[54]),D[40]=ee(M[20]),D[41]=ee(M[22]),D[42]=ee(M[33]),D[43]=ee(M[38]),D[44]=ee(M[46]),D[45]=ee(M[51]),D[46]=ee(M[55]),D[47]=ee(M[60]),D[48]=ee(M[21]),D[49]=ee(M[34]),D[50]=ee(M[37]),D[51]=ee(M[47]),D[52]=ee(M[50]),D[53]=ee(M[56]),D[54]=ee(M[59]),D[55]=ee(M[61]),D[56]=ee(M[35]),D[57]=ee(M[36]),D[58]=ee(M[48]),D[59]=ee(M[49]),D[60]=ee(M[57]),D[61]=ee(M[58]),D[62]=ee(M[62]),D[63]=ee(M[63])}function lt(M){const D=.5*Math.cos(.7853975),G=.5*Math.cos(3.14159/16),J=.5*Math.cos(3.14159/8),be=.5*Math.cos(3*3.14159/16),he=.5*Math.cos(.981746875),Se=.5*Math.cos(3*3.14159/8),Pe=.5*Math.cos(1.374445625),Ue=new Array(4),Fe=new Array(4),Xe=new Array(4),gt=new Array(4);for(let rt=0;rt<8;++rt){const st=8*rt;Ue[0]=J*M[st+2],Ue[1]=Se*M[st+2],Ue[2]=J*M[st+6],Ue[3]=Se*M[st+6],Fe[0]=G*M[st+1]+be*M[st+3]+he*M[st+5]+Pe*M[st+7],Fe[1]=be*M[st+1]-Pe*M[st+3]-G*M[st+5]-he*M[st+7],Fe[2]=he*M[st+1]-G*M[st+3]+Pe*M[st+5]+be*M[st+7],Fe[3]=Pe*M[st+1]-he*M[st+3]+be*M[st+5]-G*M[st+7],Xe[0]=D*(M[st+0]+M[st+4]),Xe[3]=D*(M[st+0]-M[st+4]),Xe[1]=Ue[0]+Ue[3],Xe[2]=Ue[1]-Ue[2],gt[0]=Xe[0]+Xe[1],gt[1]=Xe[3]+Xe[2],gt[2]=Xe[3]-Xe[2],gt[3]=Xe[0]-Xe[1],M[st+0]=gt[0]+Fe[0],M[st+1]=gt[1]+Fe[1],M[st+2]=gt[2]+Fe[2],M[st+3]=gt[3]+Fe[3],M[st+4]=gt[3]-Fe[3],M[st+5]=gt[2]-Fe[2],M[st+6]=gt[1]-Fe[1],M[st+7]=gt[0]-Fe[0]}for(let rt=0;rt<8;++rt)Ue[0]=J*M[16+rt],Ue[1]=Se*M[16+rt],Ue[2]=J*M[48+rt],Ue[3]=Se*M[48+rt],Fe[0]=G*M[8+rt]+be*M[24+rt]+he*M[40+rt]+Pe*M[56+rt],Fe[1]=be*M[8+rt]-Pe*M[24+rt]-G*M[40+rt]-he*M[56+rt],Fe[2]=he*M[8+rt]-G*M[24+rt]+Pe*M[40+rt]+be*M[56+rt],Fe[3]=Pe*M[8+rt]-he*M[24+rt]+be*M[40+rt]-G*M[56+rt],Xe[0]=D*(M[rt]+M[32+rt]),Xe[3]=D*(M[rt]-M[32+rt]),Xe[1]=Ue[0]+Ue[3],Xe[2]=Ue[1]-Ue[2],gt[0]=Xe[0]+Xe[1],gt[1]=Xe[3]+Xe[2],gt[2]=Xe[3]-Xe[2],gt[3]=Xe[0]-Xe[1],M[0+rt]=gt[0]+Fe[0],M[8+rt]=gt[1]+Fe[1],M[16+rt]=gt[2]+Fe[2],M[24+rt]=gt[3]+Fe[3],M[32+rt]=gt[3]-Fe[3],M[40+rt]=gt[2]-Fe[2],M[48+rt]=gt[1]-Fe[1],M[56+rt]=gt[0]-Fe[0]}function ut(M){for(let D=0;D<64;++D){const G=M[0][D],J=M[1][D],be=M[2][D];M[0][D]=G+1.5747*be,M[1][D]=G-.1873*J-.4682*be,M[2][D]=G+1.8556*J}}function yt(M,D,G){for(let J=0;J<64;++J)D[G+J]=ss.toHalfFloat(N(M[J]))}function N(M){return M<=1?Math.sign(M)*Math.pow(Math.abs(M),2.2):Math.sign(M)*Math.pow(C,Math.abs(M)-1)}function F(M){return new DataView(M.array.buffer,M.offset.value,M.size)}function ve(M){const D=M.viewer.buffer.slice(M.offset.value,M.offset.value+M.size),G=new Uint8Array(it(D)),J=new Uint8Array(G.length);return we(G),Ee(G,J),new DataView(J.buffer)}function De(M){const G=Lc(M.array.slice(M.offset.value,M.offset.value+M.size)),J=new Uint8Array(G.length);return we(G),Ee(G,J),new DataView(J.buffer)}function Ne(M){const D=M.viewer,G={value:M.offset.value},J=new Uint16Array(M.width*M.scanlineBlockSize*(M.channels*M.type)),be=new Uint8Array(8192);let he=0;const Se=new Array(M.channels);for(let $t=0;$t<M.channels;$t++)Se[$t]={},Se[$t].start=he,Se[$t].end=Se[$t].start,Se[$t].nx=M.width,Se[$t].ny=M.lines,Se[$t].size=M.type,he+=Se[$t].nx*Se[$t].ny*Se[$t].size;const Pe=ze(D,G),Ue=ze(D,G);if(Ue>=8192)throw new Error("Something is wrong with PIZ_COMPRESSION BITMAP_SIZE");if(Pe<=Ue)for(let $t=0;$t<Ue-Pe+1;$t++)be[$t+Pe]=Bt(D,G);const Fe=new Uint16Array(65536),Xe=function T(M,D){let G=0;for(let be=0;be<65536;++be)(0==be||M[be>>3]&1<<(7&be))&&(D[G++]=be);const J=G-1;for(;G<65536;)D[G++]=0;return J}(be,Fe),gt=$e(D,G);He(M.array,D,G,gt,J,he);for(let $t=0;$t<M.channels;++$t){const at=Se[$t];for(let Ct=0;Ct<Se[$t].size;++Ct)Me(J,at.start+Ct,at.nx,at.size,at.ny,at.nx*at.size,Xe)}!function Ce(M,D,G){for(let J=0;J<G;++J)D[J]=M[D[J]]}(Fe,J,he);let rt=0;const st=new Uint8Array(J.buffer.byteLength);for(let $t=0;$t<M.lines;$t++)for(let at=0;at<M.channels;at++){const Ct=Se[at],hi=Ct.nx*Ct.size,Ki=new Uint8Array(J.buffer,2*Ct.end,2*hi);st.set(Ki,rt),rt+=2*hi,Ct.end+=hi}return new DataView(st.buffer)}function et(M){const G=Lc(M.array.slice(M.offset.value,M.offset.value+M.size)),J=M.lines*M.channels*M.width,be=1==M.type?new Uint16Array(J):new Uint32Array(J);let he=0,Se=0;const Pe=new Array(4);for(let Ue=0;Ue<M.lines;Ue++)for(let Fe=0;Fe<M.channels;Fe++){let Xe=0;switch(M.type){case 1:Pe[0]=he,Pe[1]=Pe[0]+M.width,he=Pe[1]+M.width;for(let gt=0;gt<M.width;++gt)Xe+=G[Pe[0]++]<<8|G[Pe[1]++],be[Se]=Xe,Se++;break;case 2:Pe[0]=he,Pe[1]=Pe[0]+M.width,Pe[2]=Pe[1]+M.width,he=Pe[2]+M.width;for(let gt=0;gt<M.width;++gt)Xe+=G[Pe[0]++]<<24|G[Pe[1]++]<<16|G[Pe[2]++]<<8,be[Se]=Xe,Se++}}return new DataView(be.buffer)}function X(M){const D=M.viewer,G={value:M.offset.value},J=new Uint8Array(M.width*M.lines*(M.channels*M.type*2)),be={version:Rt(D,G),unknownUncompressedSize:Rt(D,G),unknownCompressedSize:Rt(D,G),acCompressedSize:Rt(D,G),dcCompressedSize:Rt(D,G),rleCompressedSize:Rt(D,G),rleUncompressedSize:Rt(D,G),rleRawSize:Rt(D,G),totalAcUncompressedCount:Rt(D,G),totalDcUncompressedCount:Rt(D,G),acCompression:Rt(D,G)};if(be.version<2)throw new Error("EXRLoader.parse: "+z.compression+" version "+be.version+" is unsupported");const he=new Array;let Se=ze(D,G)-2;for(;Se>0;){const at=Te(D.buffer,G),Ct=Bt(D,G),hi=Ct>>2&3,vn=new Int8Array([(Ct>>4)-1])[0],Yi=Bt(D,G);he.push({name:at,index:vn,type:Yi,compression:hi}),Se-=at.length+3}const Pe=z.channels,Ue=new Array(M.channels);for(let at=0;at<M.channels;++at){const Ct=Ue[at]={},hi=Pe[at];Ct.name=hi.name,Ct.compression=0,Ct.decoded=!1,Ct.type=hi.pixelType,Ct.pLinear=hi.pLinear,Ct.width=M.width,Ct.height=M.lines}const Fe={idx:new Array(3)};for(let at=0;at<M.channels;++at){const Ct=Ue[at];for(let hi=0;hi<he.length;++hi){const Ki=he[hi];Ct.name==Ki.name&&(Ct.compression=Ki.compression,Ki.index>=0&&(Fe.idx[Ki.index]=at),Ct.offset=at)}}let Xe,gt,rt;if(be.acCompressedSize>0)switch(be.acCompression){case 0:Xe=new Uint16Array(be.totalAcUncompressedCount),He(M.array,D,G,be.acCompressedSize,Xe,be.totalAcUncompressedCount);break;case 1:const Ct=Lc(M.array.slice(G.value,G.value+be.totalAcUncompressedCount));Xe=new Uint16Array(Ct.buffer),G.value+=be.totalAcUncompressedCount}be.dcCompressedSize>0&&(gt=new Uint16Array(De({array:M.array,offset:G,size:be.dcCompressedSize}).buffer),G.value+=be.dcCompressedSize),be.rleRawSize>0&&(rt=it(Lc(M.array.slice(G.value,G.value+be.rleCompressedSize)).buffer),G.value+=be.rleCompressedSize);let st=0;const $t=new Array(Ue.length);for(let at=0;at<$t.length;++at)$t[at]=new Array;for(let at=0;at<M.lines;++at)for(let Ct=0;Ct<Ue.length;++Ct)$t[Ct].push(st),st+=Ue[Ct].width*M.type*2;!function qe(M,D,G,J,be,he){let Se=new DataView(he.buffer);const Pe=G[M.idx[0]].width,Ue=G[M.idx[0]].height,Xe=Math.floor(Pe/8),gt=Math.ceil(Pe/8),rt=Math.ceil(Ue/8),st=Pe-8*(gt-1),$t=Ue-8*(rt-1),at={value:0},Ct=new Array(3),hi=new Array(3),Ki=new Array(3),vn=new Array(3),Yi=new Array(3);for(let xi=0;xi<3;++xi)Yi[xi]=D[M.idx[xi]],Ct[xi]=xi<1?0:Ct[xi-1]+gt*rt,hi[xi]=new Float32Array(64),Ki[xi]=new Uint16Array(64),vn[xi]=new Uint16Array(64*gt);for(let xi=0;xi<rt;++xi){let Di=8;xi==rt-1&&(Di=$t);let Yr=8;for(let Bi=0;Bi<gt;++Bi){Bi==gt-1&&(Yr=st);for(let cn=0;cn<3;++cn)Ki[cn].fill(0),Ki[cn][0]=be[Ct[cn]++],bt(at,J,Ki[cn]),At(Ki[cn],hi[cn]),lt(hi[cn]);ut(hi);for(let cn=0;cn<3;++cn)yt(hi[cn],vn[cn],64*Bi)}let ar=0;for(let Bi=0;Bi<3;++Bi){const cn=G[M.idx[Bi]].type;for(let Hl=8*xi;Hl<8*xi+Di;++Hl){ar=Yi[Bi][Hl];for(let Z0=0;Z0<Xe;++Z0){const il=64*Z0+8*(7&Hl);Se.setUint16(ar+0*cn,vn[Bi][il+0],!0),Se.setUint16(ar+2*cn,vn[Bi][il+1],!0),Se.setUint16(ar+4*cn,vn[Bi][il+2],!0),Se.setUint16(ar+6*cn,vn[Bi][il+3],!0),Se.setUint16(ar+8*cn,vn[Bi][il+4],!0),Se.setUint16(ar+10*cn,vn[Bi][il+5],!0),Se.setUint16(ar+12*cn,vn[Bi][il+6],!0),Se.setUint16(ar+14*cn,vn[Bi][il+7],!0),ar+=16*cn}}if(Xe!=gt)for(let Hl=8*xi;Hl<8*xi+Di;++Hl){const Z0=Yi[Bi][Hl]+8*Xe*2*cn,il=64*Xe+8*(7&Hl);for(let JC=0;JC<Yr;++JC)Se.setUint16(Z0+2*JC*cn,vn[Bi][il+JC],!0)}}}const Ii=new Uint16Array(Pe);Se=new DataView(he.buffer);for(let xi=0;xi<3;++xi){G[M.idx[xi]].decoded=!0;const Di=G[M.idx[xi]].type;if(2==G[xi].type)for(let Yr=0;Yr<Ue;++Yr){const ar=Yi[xi][Yr];for(let Bi=0;Bi<Pe;++Bi)Ii[Bi]=Se.getUint16(ar+2*Bi*Di,!0);for(let Bi=0;Bi<Pe;++Bi)Se.setFloat32(ar+2*Bi*Di,ee(Ii[Bi]),!0)}}}(Fe,$t,Ue,Xe,gt,J);for(let at=0;at<Ue.length;++at){const Ct=Ue[at];if(!Ct.decoded){if(2!==Ct.compression)throw new Error("EXRLoader.parse: unsupported channel compression");{let hi=0,Ki=0;for(let vn=0;vn<M.lines;++vn){let Yi=$t[at][hi];for(let Ii=0;Ii<Ct.width;++Ii){for(let xi=0;xi<2*Ct.type;++xi)J[Yi++]=rt[Ki+xi*Ct.width*Ct.height];Ki++}hi++}}}}return new DataView(J.buffer)}function Te(M,D){const G=new Uint8Array(M);let J=0;for(;0!=G[D.value+J];)J+=1;const be=(new TextDecoder).decode(G.slice(D.value,D.value+J));return D.value=D.value+J+1,be}function ht(M,D){const G=M.getInt32(D.value,!0);return D.value=D.value+4,G}function $e(M,D){const G=M.getUint32(D.value,!0);return D.value=D.value+4,G}function tt(M,D){const G=M[D.value];return D.value=D.value+1,G}function Bt(M,D){const G=M.getUint8(D.value);return D.value=D.value+1,G}const Rt=function(M,D){let G;return G="getBigInt64"in DataView.prototype?Number(M.getBigInt64(D.value,!0)):M.getUint32(D.value+4,!0)+Number(M.getUint32(D.value,!0)<<32),D.value+=8,G};function Kt(M,D){const G=M.getFloat32(D.value,!0);return D.value+=4,G}function ie(M,D){return ss.toHalfFloat(Kt(M,D))}function ee(M){const D=(31744&M)>>10,G=1023&M;return(M>>15?-1:1)*(D?31===D?G?NaN:1/0:Math.pow(2,D-15)*(1+G/1024):G/1024*6103515625e-14)}function ze(M,D){const G=M.getUint16(D.value,!0);return D.value+=2,G}function ft(M,D){return ee(ze(M,D))}function Vo(M,D,G,J,be){return"string"===J||"stringvector"===J||"iccProfile"===J?function Ae(M,D,G){const J=(new TextDecoder).decode(new Uint8Array(M).slice(D.value,D.value+G));return D.value=D.value+G,J}(D,G,be):"chlist"===J?function It(M,D,G,J){const be=G.value,he=[];for(;G.value<be+J-1;){const Se=Te(D,G),Pe=ht(M,G),Ue=Bt(M,G);G.value+=3;const Fe=ht(M,G),Xe=ht(M,G);he.push({name:Se,pixelType:Pe,pLinear:Ue,xSampling:Fe,ySampling:Xe})}return G.value+=1,he}(M,D,G,be):"chromaticities"===J?function tn(M,D){return{redX:Kt(M,D),redY:Kt(M,D),greenX:Kt(M,D),greenY:Kt(M,D),blueX:Kt(M,D),blueY:Kt(M,D),whiteX:Kt(M,D),whiteY:Kt(M,D)}}(M,G):"compression"===J?function bn(M,D){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][Bt(M,D)]}(M,G):"box2i"===J?function Er(M,D){return{xMin:$e(M,D),yMin:$e(M,D),xMax:$e(M,D),yMax:$e(M,D)}}(M,G):"lineOrder"===J?function tl(M,D){return["INCREASING_Y"][Bt(M,D)]}(M,G):"float"===J?Kt(M,G):"v2f"===J?function kn(M,D){return[Kt(M,D),Kt(M,D)]}(M,G):"v3f"===J?function Ps(M,D){return[Kt(M,D),Kt(M,D),Kt(M,D)]}(M,G):"int"===J?ht(M,G):"rational"===J?function Je(M,D){return[ht(M,D),$e(M,D)]}(M,G):"timecode"===J?function ct(M,D){return[$e(M,D),$e(M,D)]}(M,G):"preview"===J?(G.value+=be,"skipped"):void(G.value+=be)}const Mg=new DataView(e),L2=new Uint8Array(e),dh={value:0},z=function Cg(M,D,G){const J={};if(20000630!=M.getUint32(0,!0))throw new Error("THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.");J.version=M.getUint8(4);const be=M.getUint8(5);J.spec={singleTile:!!(2&be),longName:!!(4&be),deepFormat:!!(8&be),multiPart:!!(16&be)},G.value=8;let he=!0;for(;he;){const Se=Te(D,G);if(0==Se)he=!1;else{const Pe=Te(D,G),Fe=Vo(M,D,G,Pe,$e(M,G));void 0===Fe?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Pe}'.`):J[Se]=Fe}}if(-5&be)throw console.error("EXRHeader:",J),new Error("THREE.EXRLoader: provided file is currently unsupported.");return J}(Mg,e,dh),ae=function $C(M,D,G,J,be){const he={size:0,viewer:D,array:G,offset:J,width:M.dataWindow.xMax-M.dataWindow.xMin+1,height:M.dataWindow.yMax-M.dataWindow.yMin+1,channels:M.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:M.channels[0].pixelType,uncompress:null,getter:null,format:null,encoding:null};switch(M.compression){case"NO_COMPRESSION":he.lines=1,he.uncompress=F;break;case"RLE_COMPRESSION":he.lines=1,he.uncompress=ve;break;case"ZIPS_COMPRESSION":he.lines=1,he.uncompress=De;break;case"ZIP_COMPRESSION":he.lines=16,he.uncompress=De;break;case"PIZ_COMPRESSION":he.lines=32,he.uncompress=Ne;break;case"PXR24_COMPRESSION":he.lines=16,he.uncompress=et;break;case"DWAA_COMPRESSION":he.lines=32,he.uncompress=X;break;case"DWAB_COMPRESSION":he.lines=256,he.uncompress=X;break;default:throw new Error("EXRLoader.parse: "+M.compression+" is unsupported")}if(he.scanlineBlockSize=he.lines,1==he.type)switch(be){case Nn:he.getter=ft,he.inputSize=2;break;case pn:he.getter=ze,he.inputSize=2}else{if(2!=he.type)throw new Error("EXRLoader.parse: unsupported pixelType "+he.type+" for "+M.compression+".");switch(be){case Nn:he.getter=Kt,he.inputSize=4;break;case pn:he.getter=ie,he.inputSize=4}}he.blockCount=(M.dataWindow.yMax+1)/he.scanlineBlockSize;for(let Pe=0;Pe<he.blockCount;Pe++)Rt(D,J);he.outputChannels=3==he.channels?4:he.channels;const Se=he.width*he.height*he.outputChannels;switch(be){case Nn:he.byteArray=new Float32Array(Se),he.channels<he.outputChannels&&he.byteArray.fill(1,0,Se);break;case pn:he.byteArray=new Uint16Array(Se),he.channels<he.outputChannels&&he.byteArray.fill(15360,0,Se);break;default:console.error("THREE.EXRLoader: unsupported type: ",be)}return he.bytesPerLine=he.width*he.inputSize*he.channels,4==he.outputChannels?(he.format=Rn,he.encoding=qs):(he.format=Al,he.encoding=qs),he}(z,Mg,L2,dh,this.type),Re={value:0},ge={R:0,G:1,B:2,A:3,Y:0};for(let M=0;M<ae.height/ae.scanlineBlockSize;M++){const D=$e(Mg,dh);ae.size=$e(Mg,dh),ae.lines=D+ae.scanlineBlockSize>ae.height?ae.height-D:ae.scanlineBlockSize;const J=ae.size<ae.lines*ae.bytesPerLine?ae.uncompress(ae):F(ae);dh.value+=ae.size;for(let be=0;be<ae.scanlineBlockSize;be++){const he=be+M*ae.scanlineBlockSize;if(he>=ae.height)break;for(let Se=0;Se<ae.channels;Se++){const Pe=ge[z.channels[Se].name];for(let Ue=0;Ue<ae.width;Ue++)Re.value=(be*(ae.channels*ae.width)+Se*ae.width+Ue)*ae.inputSize,ae.byteArray[ae.width*ae.outputChannels*(ae.height-1-he)+Ue*ae.outputChannels+Pe]=ae.getter(J,Re)}}}return{header:z,width:ae.width,height:ae.height,data:ae.byteArray,format:ae.format,encoding:ae.encoding,type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,function s(o,a){o.encoding=a.encoding,o.minFilter=Ni,o.magFilter=Ni,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)},n,r)}}class Jc extends Po{constructor(){super(...arguments),this.clazz=k0e}}Jc.\u0275fac=function(){let i;return function(t){return(i||(i=ce(Jc)))(t||Jc)}}(),Jc.\u0275prov=Ge({token:Jc,factory:Jc.\u0275fac,providedIn:"root"});class lC extends da{constructor(e){super(),this.service=e}}lC.\u0275fac=function(e){return new(e||lC)(P(Jc,16))},lC.\u0275pipe=gi({name:"loadEXRTexture",type:lC,pure:!0});class cC extends Ts{constructor(e,t,n){super(e,t),this.host=e,this.zone=t,this.service=n}}cC.\u0275fac=function(e){return new(e||cC)(P(ma,1),P(pt),P(Jc))},cC.\u0275dir=Oe({type:cC,selectors:[["","loadEXRTexture",""]],features:[W]});class L0e extends mp{constructor(e){super(e),this.type=pn}parse(e){const a=function(b,y){switch(b){case 1:console.error("THREE.RGBELoader Read Error: "+(y||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(y||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(y||""));break;default:console.error("THREE.RGBELoader: Error: "+(y||""))}return-1},h=function(b,y,x){y=y||1024;let E=b.pos,S=-1,C=0,T="",k=String.fromCharCode.apply(null,new Uint16Array(b.subarray(E,E+128)));for(;0>(S=k.indexOf("\n"))&&C<y&&E<b.byteLength;)T+=k,C+=k.length,E+=128,k+=String.fromCharCode.apply(null,new Uint16Array(b.subarray(E,E+128)));return-1<S&&(!1!==x&&(b.pos+=C+S+1),T+k.slice(0,S))},g=function(b,y,x,w){const S=Math.pow(2,b[y+3]-128)/255;x[w+0]=b[y+0]*S,x[w+1]=b[y+1]*S,x[w+2]=b[y+2]*S,x[w+3]=1},_=function(b,y,x,w){const S=Math.pow(2,b[y+3]-128)/255;x[w+0]=ss.toHalfFloat(Math.min(b[y+0]*S,65504)),x[w+1]=ss.toHalfFloat(Math.min(b[y+1]*S,65504)),x[w+2]=ss.toHalfFloat(Math.min(b[y+2]*S,65504)),x[w+3]=ss.toHalfFloat(1)},p=new Uint8Array(e);p.pos=0;const v=function(b){const x=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,w=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,E=/^\s*FORMAT=(\S+)\s*$/,S=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,C={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let T,k;if(b.pos>=b.byteLength||!(T=h(b)))return a(1,"no header found");if(!(k=T.match(/^#\?(\S+)/)))return a(3,"bad initial token");for(C.valid|=1,C.programtype=k[1],C.string+=T+"\n";T=h(b),!1!==T;)if(C.string+=T+"\n","#"!==T.charAt(0)){if((k=T.match(x))&&(C.gamma=parseFloat(k[1])),(k=T.match(w))&&(C.exposure=parseFloat(k[1])),(k=T.match(E))&&(C.valid|=2,C.format=k[1]),(k=T.match(S))&&(C.valid|=4,C.height=parseInt(k[1],10),C.width=parseInt(k[2],10)),2&C.valid&&4&C.valid)break}else C.comments+=T+"\n";return 2&C.valid?4&C.valid?C:a(3,"missing image size specifier"):a(3,"missing format specifier")}(p);if(-1!==v){const b=v.width,y=v.height,x=function(b,y,x){const w=y;if(w<8||w>32767||2!==b[0]||2!==b[1]||128&b[2])return new Uint8Array(b);if(w!==(b[2]<<8|b[3]))return a(3,"wrong scanline width");const E=new Uint8Array(4*y*x);if(!E.length)return a(4,"unable to allocate buffer space");let S=0,C=0;const T=4*w,k=new Uint8Array(4),U=new Uint8Array(T);let B=x;for(;B>0&&C<b.byteLength;){if(C+4>b.byteLength)return a(1);if(k[0]=b[C++],k[1]=b[C++],k[2]=b[C++],k[3]=b[C++],2!=k[0]||2!=k[1]||(k[2]<<8|k[3])!=w)return a(3,"bad rgbe scanline format");let H,j=0;for(;j<T&&C<b.byteLength;){H=b[C++];const V=H>128;if(V&&(H-=128),0===H||j+H>T)return a(3,"bad scanline data");if(V){const O=b[C++];for(let Q=0;Q<H;Q++)U[j++]=O}else U.set(b.subarray(C,C+H),j),j+=H,C+=H}const L=w;for(let V=0;V<L;V++){let O=0;E[S]=U[V+O],O+=w,E[S+1]=U[V+O],O+=w,E[S+2]=U[V+O],O+=w,E[S+3]=U[V+O],S+=4}B--}return E}(p.subarray(p.pos),b,y);if(-1!==x){let w,E,S;switch(this.type){case Nn:S=x.length/4;const C=new Float32Array(4*S);for(let k=0;k<S;k++)g(x,4*k,C,4*k);w=C,E=Nn;break;case pn:S=x.length/4;const T=new Uint16Array(4*S);for(let k=0;k<S;k++)_(x,4*k,T,4*k);w=T,E=pn;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:b,height:y,data:w,header:v.string,gamma:v.gamma,exposure:v.exposure,type:E}}}return null}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,function s(o,a){switch(o.type){case Nn:case pn:o.encoding=qs,o.minFilter=Ni,o.magFilter=Ni,o.generateMipmaps=!1,o.flipY=!0}t&&t(o,a)},n,r)}}class ed extends Po{constructor(){super(...arguments),this.clazz=L0e}}ed.\u0275fac=function(){let i;return function(t){return(i||(i=ce(ed)))(t||ed)}}(),ed.\u0275prov=Ge({token:ed,factory:ed.\u0275fac,providedIn:"root"});class dC extends da{constructor(e){super(),this.service=e}}dC.\u0275fac=function(e){return new(e||dC)(P(ed,16))},dC.\u0275pipe=gi({name:"loadRGBETexture",type:dC,pure:!0});class uC extends Ts{constructor(e,t,n){super(e,t),this.host=e,this.zone=t,this.service=n}}uC.\u0275fac=function(e){return new(e||uC)(P(ma,1),P(pt),P(ed))},uC.\u0275dir=Oe({type:uC,selectors:[["","loadRGBETexture",""]],features:[W]});class B0e extends mp{constructor(e){super(e),this.type=pn,this.maxRange=7}setDataType(e){return this.type=e,this}setMaxRange(e){return this.maxRange=e,this}loadCubemap(e,t,n,r){const s=new Wd;let o=0;const a=this;function l(c){a.load(e[c],function(d){s.images[c]=d,o++,6===o&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s.type=this.type,s.format=Rn,s.minFilter=Ni,s.generateMipmaps=!1,s}parse(e){const t=ii.decode(e),n=ii.toRGBA8(t)[0],r=new Uint8Array(n),s=t.width*t.height*4,o=this.type===pn?new Uint16Array(s):new Float32Array(s);for(let a=0;a<r.length;a+=4){const l=r[a+0]/255,c=r[a+1]/255,d=r[a+2]/255,u=r[a+3]/255;this.type===pn?(o[a+0]=ss.toHalfFloat(Math.min(l*u*this.maxRange,65504)),o[a+1]=ss.toHalfFloat(Math.min(c*u*this.maxRange,65504)),o[a+2]=ss.toHalfFloat(Math.min(d*u*this.maxRange,65504)),o[a+3]=ss.toHalfFloat(1)):(o[a+0]=l*u*this.maxRange,o[a+1]=c*u*this.maxRange,o[a+2]=d*u*this.maxRange,o[a+3]=1)}return{width:t.width,height:t.height,data:o,format:Rn,type:this.type,flipY:!0}}}var e,t,i,ii={toRGBA8:function(i){var e=i.width,t=i.height;if(null==i.tabs.acTL)return[ii.toRGBA8.decodeImage(i.data,e,t,i).buffer];var n=[];null==i.frames[0].data&&(i.frames[0].data=i.data);for(var r=e*t*4,s=new Uint8Array(r),o=new Uint8Array(r),a=new Uint8Array(r),l=0;l<i.frames.length;l++){var c=i.frames[l],d=c.rect.x,u=c.rect.y,h=c.rect.width,f=c.rect.height,m=ii.toRGBA8.decodeImage(c.data,h,f,i);if(0!=l)for(var g=0;g<r;g++)a[g]=s[g];if(0==c.blend?ii._copyTile(m,h,f,s,e,t,d,u,0):1==c.blend&&ii._copyTile(m,h,f,s,e,t,d,u,1),n.push(s.buffer.slice(0)),1==c.dispose)ii._copyTile(o,h,f,s,e,t,d,u,0);else if(2==c.dispose)for(g=0;g<r;g++)s[g]=a[g]}return n}};ii.toRGBA8.decodeImage=function(i,e,t,n){var r=e*t,s=ii.decode._getBPP(n),o=Math.ceil(e*s/8),a=new Uint8Array(4*r),l=new Uint32Array(a.buffer),c=n.ctype,d=n.depth,u=ii._bin.readUshort;if(6==c){var h=r<<2;if(8==d)for(var f=0;f<h;f+=4)a[f]=i[f],a[f+1]=i[f+1],a[f+2]=i[f+2],a[f+3]=i[f+3];if(16==d)for(f=0;f<h;f++)a[f]=i[f<<1]}else if(2==c){var m=n.tabs.tRNS;if(null==m){if(8==d)for(f=0;f<r;f++)l[f]=255<<24|i[2+(g=3*f)]<<16|i[g+1]<<8|i[g];if(16==d)for(f=0;f<r;f++)l[f]=255<<24|i[4+(g=6*f)]<<16|i[g+2]<<8|i[g]}else{var _=m[0],p=m[1],v=m[2];if(8==d)for(f=0;f<r;f++){var b=f<<2;l[f]=255<<24|i[2+(g=3*f)]<<16|i[g+1]<<8|i[g],i[g]==_&&i[g+1]==p&&i[g+2]==v&&(a[b+3]=0)}if(16==d)for(f=0;f<r;f++){var g;b=f<<2,l[f]=255<<24|i[4+(g=6*f)]<<16|i[g+2]<<8|i[g],u(i,g)==_&&u(i,g+2)==p&&u(i,g+4)==v&&(a[b+3]=0)}}}else if(3==c){var y=n.tabs.PLTE,x=n.tabs.tRNS,w=x?x.length:0;if(1==d)for(var E=0;E<t;E++){var S=E*o,C=E*e;for(f=0;f<e;f++)a[b=C+f<<2]=y[k=3*(T=i[S+(f>>3)]>>7-((7&f)<<0)&1)],a[b+1]=y[k+1],a[b+2]=y[k+2],a[b+3]=T<w?x[T]:255}if(2==d)for(E=0;E<t;E++)for(S=E*o,C=E*e,f=0;f<e;f++)a[b=C+f<<2]=y[k=3*(T=i[S+(f>>2)]>>6-((3&f)<<1)&3)],a[b+1]=y[k+1],a[b+2]=y[k+2],a[b+3]=T<w?x[T]:255;if(4==d)for(E=0;E<t;E++)for(S=E*o,C=E*e,f=0;f<e;f++)a[b=C+f<<2]=y[k=3*(T=i[S+(f>>1)]>>4-((1&f)<<2)&15)],a[b+1]=y[k+1],a[b+2]=y[k+2],a[b+3]=T<w?x[T]:255;if(8==d)for(f=0;f<r;f++){var T,k;a[b=f<<2]=y[k=3*(T=i[f])],a[b+1]=y[k+1],a[b+2]=y[k+2],a[b+3]=T<w?x[T]:255}}else if(4==c){if(8==d)for(f=0;f<r;f++)a[b=f<<2]=B=i[U=f<<1],a[b+1]=B,a[b+2]=B,a[b+3]=i[U+1];if(16==d)for(f=0;f<r;f++){var U;a[b=f<<2]=B=i[U=f<<2],a[b+1]=B,a[b+2]=B,a[b+3]=i[U+2]}}else if(0==c)for(_=n.tabs.tRNS?n.tabs.tRNS:-1,E=0;E<t;E++){var j=E*o,H=E*e;if(1==d)for(var L=0;L<e;L++)l[H+L]=(V=(B=255*(i[j+(L>>>3)]>>>7-(7&L)&1))==255*_?0:255)<<24|B<<16|B<<8|B;else if(2==d)for(L=0;L<e;L++)l[H+L]=(V=(B=85*(i[j+(L>>>2)]>>>6-((3&L)<<1)&3))==85*_?0:255)<<24|B<<16|B<<8|B;else if(4==d)for(L=0;L<e;L++)l[H+L]=(V=(B=17*(i[j+(L>>>1)]>>>4-((1&L)<<2)&15))==17*_?0:255)<<24|B<<16|B<<8|B;else if(8==d)for(L=0;L<e;L++)l[H+L]=(V=(B=i[j+L])==_?0:255)<<24|B<<16|B<<8|B;else if(16==d)for(L=0;L<e;L++){var B=i[j+(L<<1)],V=u(i,j+(L<<1))==_?0:255;l[H+L]=V<<24|B<<16|B<<8|B}}return a},ii.decode=function(i){for(var c,u,h,f,e=new Uint8Array(i),t=8,n=ii._bin,r=n.readUshort,s=n.readUint,o={tabs:{},frames:[]},a=new Uint8Array(e.length),l=0,d=0,m=[137,80,78,71,13,10,26,10],g=0;g<8;g++)if(e[g]!=m[g])throw new Error("The input is not a PNG file!");for(;t<e.length;){var _=n.readUint(e,t),p=n.readASCII(e,t+=4,4);if(t+=4,"IHDR"==p)ii.decode._IHDR(e,t,o);else if("CgBI"==p)o.tabs[p]=e.slice(t,t+4);else if("IDAT"==p){for(g=0;g<_;g++)a[l+g]=e[t+g];l+=_}else if("acTL"==p)o.tabs[p]={num_frames:s(e,t),num_plays:s(e,t+4)},c=new Uint8Array(e.length);else if("fcTL"==p){0!=d&&((v=o.frames[o.frames.length-1]).data=ii.decode._decompress(o,c.slice(0,d),v.rect.width,v.rect.height),d=0);var b={x:s(e,t+12),y:s(e,t+16),width:s(e,t+4),height:s(e,t+8)},y=r(e,t+22);y=r(e,t+20)/(0==y?100:y);var x={rect:b,delay:Math.round(1e3*y),dispose:e[t+24],blend:e[t+25]};o.frames.push(x)}else if("fdAT"==p){for(g=0;g<_-4;g++)c[d+g]=e[t+g+4];d+=_-4}else if("pHYs"==p)o.tabs[p]=[n.readUint(e,t),n.readUint(e,t+4),e[t+8]];else if("cHRM"==p)for(o.tabs[p]=[],g=0;g<8;g++)o.tabs[p].push(n.readUint(e,t+4*g));else if("tEXt"==p||"zTXt"==p){null==o.tabs[p]&&(o.tabs[p]={});var w=n.nextZero(e,t);h=n.readASCII(e,t,w-t);var E=t+_-w-1;"tEXt"==p?u=n.readASCII(e,w+1,E):(f=ii.decode._inflate(e.slice(w+2,w+2+E)),u=n.readUTF8(f,0,f.length)),o.tabs[p][h]=u}else if("iTXt"==p){null==o.tabs[p]&&(o.tabs[p]={}),w=0;var S=t;w=n.nextZero(e,S),h=n.readASCII(e,S,w-S);var C=e[S=w+1];w=n.nextZero(e,S+=2),n.readASCII(e,S,w-S),w=n.nextZero(e,S=w+1),n.readUTF8(e,S,w-S),E=_-((S=w+1)-t),0==C?u=n.readUTF8(e,S,E):(f=ii.decode._inflate(e.slice(S,S+E)),u=n.readUTF8(f,0,f.length)),o.tabs[p][h]=u}else if("PLTE"==p)o.tabs[p]=n.readBytes(e,t,_);else if("hIST"==p){var T=o.tabs.PLTE.length/3;for(o.tabs[p]=[],g=0;g<T;g++)o.tabs[p].push(r(e,t+2*g))}else if("tRNS"==p)3==o.ctype?o.tabs[p]=n.readBytes(e,t,_):0==o.ctype?o.tabs[p]=r(e,t):2==o.ctype&&(o.tabs[p]=[r(e,t),r(e,t+2),r(e,t+4)]);else if("gAMA"==p)o.tabs[p]=n.readUint(e,t)/1e5;else if("sRGB"==p)o.tabs[p]=e[t];else if("bKGD"==p)0==o.ctype||4==o.ctype?o.tabs[p]=[r(e,t)]:2==o.ctype||6==o.ctype?o.tabs[p]=[r(e,t),r(e,t+2),r(e,t+4)]:3==o.ctype&&(o.tabs[p]=e[t]);else if("IEND"==p)break;n.readUint(e,t+=_),t+=4}var v;return 0!=d&&((v=o.frames[o.frames.length-1]).data=ii.decode._decompress(o,c.slice(0,d),v.rect.width,v.rect.height)),o.data=ii.decode._decompress(o,a,o.width,o.height),delete o.compress,delete o.interlace,delete o.filter,o},ii.decode._decompress=function(i,e,t,n){var r=ii.decode._getBPP(i),s=Math.ceil(t*r/8),o=new Uint8Array((s+1+i.interlace)*n);return e=i.tabs.CgBI?ii.inflateRaw(e,o):ii.decode._inflate(e,o),0==i.interlace?e=ii.decode._filterZero(e,i,0,t,n):1==i.interlace&&(e=ii.decode._readInterlace(e,i)),e},ii.decode._inflate=function(i,e){return ii.inflateRaw(new Uint8Array(i.buffer,2,i.length-6),e)},ii.inflateRaw=((i={H:{}}).H.N=function(e,t){var f,m,n=Uint8Array,r=0,s=0,o=0,a=0,l=0,c=0,d=0,u=0,h=0;if(3==e[0]&&0==e[1])return t||new n(0);var g=i.H,_=g.b,p=g.e,v=g.R,b=g.n,y=g.A,x=g.Z,w=g.m,E=null==t;for(E&&(t=new n(e.length>>>2<<5));0==r;)if(r=_(e,h,1),s=_(e,h+1,2),h+=3,0!=s){if(E&&(t=i.H.W(t,u+(1<<17))),1==s&&(f=w.J,m=w.h,c=511,d=31),2==s){o=p(e,h,5)+257,a=p(e,h+5,5)+1,l=p(e,h+10,4)+4,h+=14;for(var T=1,k=0;k<38;k+=2)w.Q[k]=0,w.Q[k+1]=0;for(k=0;k<l;k++){var U=p(e,h+3*k,3);w.Q[1+(w.X[k]<<1)]=U,U>T&&(T=U)}h+=3*l,b(w.Q,T),y(w.Q,T,w.u),f=w.w,m=w.d,h=v(w.u,(1<<T)-1,o+a,e,h,w.v);var B=g.V(w.v,0,o,w.C);c=(1<<B)-1;var j=g.V(w.v,o,a,w.D);d=(1<<j)-1,b(w.C,B),y(w.C,B,f),b(w.D,j),y(w.D,j,m)}for(;;){var H=f[x(e,h)&c];h+=15&H;var L=H>>>4;if(L>>>8){if(256==L)break;var V=u+L-254;if(L>264){var O=w.q[L-257];V=u+(O>>>3)+p(e,h,7&O),h+=7&O}var Q=m[x(e,h)&d],_e=w.c[Q>>>4],de=(_e>>>4)+_(e,h+=15&Q,15&_e);for(h+=15&_e;u<V;)t[u]=t[u++-de],t[u]=t[u++-de],t[u]=t[u++-de],t[u]=t[u++-de];u=V}else t[u++]=L}}else{7&h&&(h+=8-(7&h));var S=4+(h>>>3),C=e[S-4]|e[S-3]<<8;E&&(t=i.H.W(t,u+C)),t.set(new n(e.buffer,e.byteOffset+S,C),u),h=S+C<<3,u+=C}return t.length==u?t:t.slice(0,u)},i.H.W=function(e,t){var n=e.length;if(t<=n)return e;var r=new Uint8Array(n<<1);return r.set(e,0),r},i.H.R=function(e,t,n,r,s,o){for(var a=i.H.e,l=i.H.Z,c=0;c<n;){var d=e[l(r,s)&t];s+=15&d;var u=d>>>4;if(u<=15)o[c]=u,c++;else{var h=0,f=0;16==u?(f=3+a(r,s,2),s+=2,h=o[c-1]):17==u?(f=3+a(r,s,3),s+=3):18==u&&(f=11+a(r,s,7),s+=7);for(var m=c+f;c<m;)o[c]=h,c++}}return s},i.H.V=function(e,t,n,r){for(var s=0,o=0,a=r.length>>>1;o<n;){var l=e[o+t];r[o<<1]=0,r[1+(o<<1)]=l,l>s&&(s=l),o++}for(;o<a;)r[o<<1]=0,r[1+(o<<1)]=0,o++;return s},i.H.n=function(e,t){for(var s,o,a,c,n=i.H.m,r=e.length,d=n.j,l=0;l<=t;l++)d[l]=0;for(l=1;l<r;l+=2)d[e[l]]++;var u=n.K;for(s=0,d[0]=0,o=1;o<=t;o++)u[o]=s=s+d[o-1]<<1;for(a=0;a<r;a+=2)0!=(c=e[a+1])&&(e[a]=u[c],u[c]++)},i.H.A=function(e,t,n){for(var r=e.length,o=i.H.m.r,a=0;a<r;a+=2)if(0!=e[a+1])for(var c=e[a+1],d=a>>1<<4|c,u=t-c,h=e[a]<<u,f=h+(1<<u);h!=f;)n[o[h]>>>15-t]=d,h++},i.H.l=function(e,t){for(var n=i.H.m.r,r=15-t,s=0;s<e.length;s+=2)e[s]=n[e[s]<<t-e[s+1]]>>>r},i.H.M=function(e,t,n){var r=t>>>3;e[r]|=n<<=7&t,e[r+1]|=n>>>8},i.H.I=function(e,t,n){var r=t>>>3;e[r]|=n<<=7&t,e[r+1]|=n>>>8,e[r+2]|=n>>>16},i.H.e=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<n)-1},i.H.b=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<n)-1},i.H.Z=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},i.H.i=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},i.H.m=(e=Uint16Array,t=Uint32Array,{K:new e(16),j:new e(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new e(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new t(32),J:new e(512),_:[],h:new e(32),$:[],w:new e(32768),C:[],v:[],d:new e(32768),D:[],u:new e(512),Q:[],r:new e(32768),s:new t(286),Y:new t(30),a:new t(19),t:new t(15e3),k:new e(65536),g:new e(32768)}),function(){for(var e=i.H.m,n=0;n<32768;n++){var r=n;e.r[n]=((r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8)>>>16|r<<16)>>>17}function s(o,a,l){for(;0!=a--;)o.push(0,l)}for(n=0;n<32;n++)e.q[n]=e.S[n]<<3|e.T[n],e.c[n]=e.p[n]<<4|e.z[n];s(e._,144,8),s(e._,112,9),s(e._,24,7),s(e._,8,8),i.H.n(e._,9),i.H.A(e._,9,e.J),i.H.l(e._,9),s(e.$,32,5),i.H.n(e.$,5),i.H.A(e.$,5,e.h),i.H.l(e.$,5),s(e.Q,19,0),s(e.C,286,0),s(e.D,30,0),s(e.v,320,0)}(),i.H.N),ii.decode._readInterlace=function(i,e){for(var t=e.width,n=e.height,r=ii.decode._getBPP(e),s=r>>3,o=Math.ceil(t*r/8),a=new Uint8Array(n*o),l=0,c=[0,0,4,0,2,0,1],d=[0,4,0,2,0,1,0],u=[8,8,8,4,4,2,2],h=[8,8,4,4,2,2,1],f=0;f<7;){for(var m=u[f],g=h[f],_=0,p=0,v=c[f];v<n;)v+=m,p++;for(var b=d[f];b<t;)b+=g,_++;var y=Math.ceil(_*r/8);ii.decode._filterZero(i,e,l,_,p);for(var x=0,w=c[f];w<n;){for(var S=d[f],C=l+x*y<<3;S<t;){if(1==r&&(a[w*o+(S>>3)]|=(i[C>>3]>>7-(7&C)&1)<<7-((7&S)<<0)),2==r&&(a[w*o+(S>>2)]|=(i[C>>3]>>6-(7&C)&3)<<6-((3&S)<<1)),4==r&&(a[w*o+(S>>1)]|=(i[C>>3]>>4-(7&C)&15)<<4-((1&S)<<2)),r>=8)for(var T=w*o+S*s,k=0;k<s;k++)a[T+k]=i[(C>>3)+k];C+=r,S+=g}x++,w+=m}_*p!=0&&(l+=p*(1+y)),f+=1}return a},ii.decode._getBPP=function(i){return[1,null,3,1,2,null,4][i.ctype]*i.depth},ii.decode._filterZero=function(i,e,t,n,r){var s=ii.decode._getBPP(e),o=Math.ceil(n*s/8),a=ii.decode._paeth;s=Math.ceil(s/8);var l,c,d=i[t],u=0;if(d>1&&(i[t]=[0,0,1][d-2]),3==d)for(u=s;u<o;u++)i[u+1]=i[u+1]+(i[u+1-s]>>>1)&255;for(var h=0;h<r;h++)if(u=0,0==(d=i[(c=(l=t+h*o)+h+1)-1]))for(;u<o;u++)i[l+u]=i[c+u];else if(1==d){for(;u<s;u++)i[l+u]=i[c+u];for(;u<o;u++)i[l+u]=i[c+u]+i[l+u-s]}else if(2==d)for(;u<o;u++)i[l+u]=i[c+u]+i[l+u-o];else if(3==d){for(;u<s;u++)i[l+u]=i[c+u]+(i[l+u-o]>>>1);for(;u<o;u++)i[l+u]=i[c+u]+(i[l+u-o]+i[l+u-s]>>>1)}else{for(;u<s;u++)i[l+u]=i[c+u]+a(0,i[l+u-o],0);for(;u<o;u++)i[l+u]=i[c+u]+a(i[l+u-s],i[l+u-o],i[l+u-s-o])}return i},ii.decode._paeth=function(i,e,t){var n=i+e-t,r=n-i,s=n-e,o=n-t;return r*r<=s*s&&r*r<=o*o?i:s*s<=o*o?e:t},ii.decode._IHDR=function(i,e,t){var n=ii._bin;t.width=n.readUint(i,e),t.height=n.readUint(i,e+=4),t.depth=i[e+=4],e++,t.ctype=i[e],e++,t.compress=i[e],e++,t.filter=i[e],e++,t.interlace=i[e],e++},ii._bin={nextZero:function(i,e){for(;0!=i[e];)e++;return e},readUshort:function(i,e){return i[e]<<8|i[e+1]},writeUshort:function(i,e,t){i[e]=t>>8&255,i[e+1]=255&t},readUint:function(i,e){return 16777216*i[e]+(i[e+1]<<16|i[e+2]<<8|i[e+3])},writeUint:function(i,e,t){i[e]=t>>24&255,i[e+1]=t>>16&255,i[e+2]=t>>8&255,i[e+3]=255&t},readASCII:function(i,e,t){for(var n="",r=0;r<t;r++)n+=String.fromCharCode(i[e+r]);return n},writeASCII:function(i,e,t){for(var n=0;n<t.length;n++)i[e+n]=t.charCodeAt(n)},readBytes:function(i,e,t){for(var n=[],r=0;r<t;r++)n.push(i[e+r]);return n},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,e,t){for(var r,n="",s=0;s<t;s++)n+="%"+ii._bin.pad(i[e+s].toString(16));try{r=decodeURIComponent(n)}catch{return ii._bin.readASCII(i,e,t)}return r}},ii._copyTile=function(i,e,t,n,r,s,o,a,l){for(var c=Math.min(e,r),d=Math.min(t,s),u=0,h=0,f=0;f<d;f++)for(var m=0;m<c;m++)if(o>=0&&a>=0?(u=f*e+m<<2,h=(a+f)*r+o+m<<2):(u=(-a+f)*e-o+m<<2,h=f*r+m<<2),0==l)n[h]=i[u],n[h+1]=i[u+1],n[h+2]=i[u+2],n[h+3]=i[u+3];else if(1==l){var _=i[u]*(g=.00392156862745098*i[u+3]),p=i[u+1]*g,v=i[u+2]*g,y=n[h]*(b=n[h+3]*(1/255)),x=n[h+1]*b,w=n[h+2]*b,E=1-g,S=g+b*E,C=0==S?0:1/S;n[h+3]=255*S,n[h+0]=(_+y*E)*C,n[h+1]=(p+x*E)*C,n[h+2]=(v+w*E)*C}else if(2==l)_=i[u],p=i[u+1],v=i[u+2],y=n[h],x=n[h+1],w=n[h+2],(g=i[u+3])==(b=n[h+3])&&_==y&&p==x&&v==w?(n[h]=0,n[h+1]=0,n[h+2]=0,n[h+3]=0):(n[h]=_,n[h+1]=p,n[h+2]=v,n[h+3]=g);else if(3==l){var g,b;if(_=i[u],p=i[u+1],v=i[u+2],y=n[h],x=n[h+1],w=n[h+2],(g=i[u+3])==(b=n[h+3])&&_==y&&p==x&&v==w)continue;if(g<220&&b>20)return!1}return!0};class td extends Po{constructor(){super(...arguments),this.clazz=B0e}}td.\u0275fac=function(){let i;return function(t){return(i||(i=ce(td)))(t||td)}}(),td.\u0275prov=Ge({token:td,factory:td.\u0275fac,providedIn:"root"});class hC extends da{constructor(e){super(),this.service=e}}hC.\u0275fac=function(e){return new(e||hC)(P(td,16))},hC.\u0275pipe=gi({name:"loadRGBMTexture",type:hC,pure:!0});class fC extends Ts{constructor(e,t,n){super(e,t),this.host=e,this.zone=t,this.service=n}}fC.\u0275fac=function(e){return new(e||fC)(P(ma,1),P(pt),P(td))},fC.\u0275dir=Oe({type:fC,selectors:[["","loadRGBMTexture",""]],features:[W]});class F0e extends mp{constructor(e){super(e),this.type=pn}parse(e){const t=_t.decode(e);_t.decodeImage(e,t[0]);const n=_t.toRGBA(t[0],this.type);return{width:t[0].width,height:t[0].height,data:n,format:Rn,type:this.type,flipY:!0}}setDataType(e){return this.type=e,this}}const _t={decode:function(i,e){null==e&&(e={parseMN:!0,debug:!1});var t=new Uint8Array(i),n=0,s="II"==_t._binBE.readASCII(t,n,2)?_t._binLE:_t._binBE;s.readUshort(t,n+=2);for(var o=s.readUint(t,n+=2),a=[];;){var l=s.readUshort(t,o),c=s.readUshort(t,o+4);if(0!=l&&(c<1||13<c)){console.log("error in TIFF");break}if(_t._readIFD(s,t,o,a,0,e),0==(o=s.readUint(t,o+2+12*l)))break}return a},decodeImage:function(i,e,t){if(!e.data){var n=new Uint8Array(i),r=_t._binBE.readASCII(n,0,2);if(null!=e.t256){e.isLE="II"==r,e.width=e.t256[0],e.height=e.t257[0];var a,s=e.t259?e.t259[0]:1,o=e.t266?e.t266[0]:1;e.t284&&2==e.t284[0]&&console.log("PlanarConfiguration 2 should not be used!"),7==s&&e.t258&&e.t258.length>3&&(e.t258=e.t258.slice(0,3)),a=e.t258?Math.min(32,e.t258[0])*e.t258.length:e.t277?e.t277[0]:1,1==s&&null!=e.t279&&e.t278&&32803==e.t262[0]&&(a=Math.round(8*e.t279[0]/(e.width*e.t278[0])));var l=8*Math.ceil(e.width*a/8),c=e.t273;null==c&&(c=e.t324);var d=e.t279;1==s&&1==c.length&&(d=[e.height*(l>>>3)]),null==d&&(d=e.t325);var u=new Uint8Array(e.height*(l>>>3)),h=0;if(null!=e.t322){for(var f=e.t322[0],m=e.t323[0],g=Math.floor((e.width+f-1)/f),_=Math.floor((e.height+m-1)/m),p=new Uint8Array(0|Math.ceil(f*m*a/8)),v=0;v<_;v++)for(var b=0;b<g;b++){for(var y=v*g+b,x=0;x<p.length;x++)p[x]=0;_t.decode._decompress(e,t,n,c[y],d[y],s,p,0,o),6==s?u=p:_t._copyTile(p,0|Math.ceil(f*a/8),m,u,0|Math.ceil(e.width*a/8),e.height,0|Math.ceil(b*f*a/8),v*m)}h=8*u.length}else{var w=e.t278?e.t278[0]:e.height;for(w=Math.min(w,e.height),y=0;y<c.length;y++)_t.decode._decompress(e,t,n,c[y],d[y],s,u,0|Math.ceil(h/8),o),h+=l*w;h=Math.min(h,8*u.length)}e.data=new Uint8Array(u.buffer,0,0|Math.ceil(h/8))}}}};_t.decode._decompress=function(i,e,t,n,r,s,o,a){34676==s?_t.decode._decodeLogLuv32(i,t,n,r,o,a):console.log("Unsupported compression",s);var l=i.t258?Math.min(32,i.t258[0]):1,c=i.t277?i.t277[0]:1,d=l*c>>>3,u=i.t278?i.t278[0]:i.height,h=Math.ceil(l*c*i.width/8);if(16==l&&!i.isLE&&null==i.t33422)for(var f=0;f<u;f++)for(var m=a+f*h,g=1;g<h;g+=2){var _=o[m+g];o[m+g]=o[m+g-1],o[m+g-1]=_}if(i.t317&&2==i.t317[0])for(f=0;f<u;f++){var p=a+f*h;if(16==l)for(var v=d;v<h;v+=2){var b=(o[p+v+1]<<8|o[p+v])+(o[p+v-d+1]<<8|o[p+v-d]);o[p+v]=255&b,o[p+v+1]=b>>>8&255}else if(3==c)for(v=3;v<h;v+=3)o[p+v]=o[p+v]+o[p+v-3]&255,o[p+v+1]=o[p+v+1]+o[p+v-2]&255,o[p+v+2]=o[p+v+2]+o[p+v-1]&255;else for(v=d;v<h;v++)o[p+v]=o[p+v]+o[p+v-d]&255}},_t.decode._decodeLogLuv32=function(i,e,t,n,r,s){for(var o=i.width,a=4*o,l=0,c=new Uint8Array(a);l<n;){for(var d=0;d<a;){var u=e[t+l];if(l++,u<128){for(var h=0;h<u;h++)c[d+h]=e[t+l+h];d+=u,l+=u}else{for(u-=126,h=0;h<u;h++)c[d+h]=e[t+l];d+=u,l++}}for(var f=0;f<o;f++)r[s+0]=c[f],r[s+1]=c[f+o],r[s+2]=c[f+2*o],r[s+4]=c[f+3*o],s+=6}},_t.tags={},_t._types=function(){var i=new Array(250);return i.fill(0),{basic:{main:i=i.concat([0,0,0,0,4,3,3,3,3,3,0,0,3,0,0,0,3,0,0,2,2,2,2,4,3,0,0,3,4,4,3,3,5,5,3,2,5,5,0,0,0,0,4,4,0,0,3,3,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,2,2,3,5,5,3,0,3,3,4,4,4,3,4,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),rest:{33432:2,33434:5,33437:5,34665:4,34850:3,34853:4,34855:3,34864:3,34866:4,36864:7,36867:2,36868:2,37121:7,37377:10,37378:5,37380:10,37381:5,37383:3,37384:3,37385:3,37386:5,37510:7,37520:2,37521:2,37522:2,40960:7,40961:3,40962:4,40963:4,40965:4,41486:5,41487:5,41488:3,41985:3,41986:3,41987:3,41988:5,41989:3,41990:3,41993:3,41994:3,41995:7,41996:3,42032:2,42033:2,42034:5,42036:2,42037:2,59932:7}},gps:{main:[1,2,5,2,5,1,5,5,0,9],rest:{18:2,29:2}}}}(),_t._readIFD=function(i,e,t,n,r,s){var o=i.readUshort(e,t);t+=2;var a={};s.debug&&console.log("   ".repeat(r),n.length-1,">>>----------------");for(var l=0;l<o;l++){var c=i.readUshort(e,t),d=i.readUshort(e,t+=2),u=i.readUint(e,t+=2),h=i.readUint(e,t+=4);t+=4;var f=[];if((1==d||7==d)&&(f=new Uint8Array(e.buffer,u<5?t-4:h,u)),2==d){var m=u<5?t-4:h,g=e[m],_=Math.max(0,Math.min(u-1,e.length-m));g<128||0==_?f.push(i.readASCII(e,m,_)):f=new Uint8Array(e.buffer,m,_)}if(3==d)for(var p=0;p<u;p++)f.push(i.readUshort(e,(u<3?t-4:h)+2*p));if(4==d||13==d)for(p=0;p<u;p++)f.push(i.readUint(e,(u<2?t-4:h)+4*p));if(5==d||10==d){var v=5==d?i.readUint:i.readInt;for(p=0;p<u;p++)f.push([v(e,h+8*p),v(e,h+8*p+4)])}if(8==d)for(p=0;p<u;p++)f.push(i.readShort(e,(u<3?t-4:h)+2*p));if(9==d)for(p=0;p<u;p++)f.push(i.readInt(e,(u<2?t-4:h)+4*p));if(11==d)for(p=0;p<u;p++)f.push(i.readFloat(e,h+4*p));if(12==d)for(p=0;p<u;p++)f.push(i.readDouble(e,h+8*p));if(0==u||0!=f.length){if(s.debug&&console.log("   ".repeat(r),c,d,_t.tags[c],f),a["t"+c]=f,330==c||34665==c||34853==c||50740==c&&i.readUshort(e,i.readUint(f,0))<300||61440==c){var b=50740==c?[i.readUint(f,0)]:f,y=[];for(p=0;p<b.length;p++)_t._readIFD(i,e,b[p],y,r+1,s);330==c&&(a.subIFD=y),34665==c&&(a.exifIFD=y[0]),34853==c&&(a.gpsiIFD=y[0]),50740==c&&(a.dngPrvt=y[0]),61440==c&&(a.fujiIFD=y[0])}if(37500==c&&s.parseMN){var x=f;if("Nikon"==i.readASCII(x,0,5))a.makerNote=_t.decode(x.slice(10).buffer)[0];else if(i.readUshort(e,h)<300&&i.readUshort(e,h+4)<=12){var w=[];_t._readIFD(i,e,h,w,r+1,s),a.makerNote=w[0]}}}else if(console.log(c,"unknown TIFF tag type: ",d,"num:",u),0==l)return}return n.push(a),s.debug&&console.log("   ".repeat(r),"<<<---------------"),t},_t.toRGBA=function(i,e){const t=i.width,n=i.height,r=t*n,s=i.data;let o;switch(e){case pn:o=new Uint16Array(4*r);break;case Nn:o=new Float32Array(4*r);break;default:console.error("THREE.LogLuvLoader: Unsupported texture data type:",e)}let a=i.t262?i.t262[0]:2;const l=i.t258?Math.min(32,i.t258[0]):1;if(null==i.t262&&1==l&&(a=0),32845==a)for(let c=0;c<n;c++)for(let d=0;d<t;d++){const u=6*(c*t+d),h=4*(c*t+d);let f=s[u+1]<<8|s[u];f=Math.pow(2,(f+.5)/256-64);const m=(s[u+3]+.5)/410,g=(s[u+5]+.5)/410,_=9*m/(6*m-16*g+12),p=4*g/(6*m-16*g+12),b=_*f/p,x=(1-_-p)*f/p,w=2.69*b-1.276*f-.414*x,E=-1.022*b+1.978*f+.044*x,S=.061*b-.224*f+1.163*x;e===pn?(o[h]=ss.toHalfFloat(Math.min(w,65504)),o[h+1]=ss.toHalfFloat(Math.min(E,65504)),o[h+2]=ss.toHalfFloat(Math.min(S,65504)),o[h+3]=ss.toHalfFloat(1)):(o[h]=w,o[h+1]=E,o[h+2]=S,o[h+3]=1)}else console.log("Unsupported Photometric interpretation: "+a);return o},_t._binBE={nextZero:function(i,e){for(;0!=i[e];)e++;return e},readUshort:function(i,e){return i[e]<<8|i[e+1]},readShort:function(i,e){var t=_t._binBE.ui8;return t[0]=i[e+1],t[1]=i[e+0],_t._binBE.i16[0]},readInt:function(i,e){var t=_t._binBE.ui8;return t[0]=i[e+3],t[1]=i[e+2],t[2]=i[e+1],t[3]=i[e+0],_t._binBE.i32[0]},readUint:function(i,e){var t=_t._binBE.ui8;return t[0]=i[e+3],t[1]=i[e+2],t[2]=i[e+1],t[3]=i[e+0],_t._binBE.ui32[0]},readASCII:function(i,e,t){for(var n="",r=0;r<t;r++)n+=String.fromCharCode(i[e+r]);return n},readFloat:function(i,e){for(var t=_t._binBE.ui8,n=0;n<4;n++)t[n]=i[e+3-n];return _t._binBE.fl32[0]},readDouble:function(i,e){for(var t=_t._binBE.ui8,n=0;n<8;n++)t[n]=i[e+7-n];return _t._binBE.fl64[0]},writeUshort:function(i,e,t){i[e]=t>>8&255,i[e+1]=255&t},writeInt:function(i,e,t){var n=_t._binBE.ui8;_t._binBE.i32[0]=t,i[e+3]=n[0],i[e+2]=n[1],i[e+1]=n[2],i[e+0]=n[3]},writeUint:function(i,e,t){i[e]=t>>24&255,i[e+1]=t>>16&255,i[e+2]=t>>8&255,i[e+3]=t>>0&255},writeASCII:function(i,e,t){for(var n=0;n<t.length;n++)i[e+n]=t.charCodeAt(n)},writeDouble:function(i,e,t){_t._binBE.fl64[0]=t;for(var n=0;n<8;n++)i[e+n]=_t._binBE.ui8[7-n]}},_t._binBE.ui8=new Uint8Array(8),_t._binBE.i16=new Int16Array(_t._binBE.ui8.buffer),_t._binBE.i32=new Int32Array(_t._binBE.ui8.buffer),_t._binBE.ui32=new Uint32Array(_t._binBE.ui8.buffer),_t._binBE.fl32=new Float32Array(_t._binBE.ui8.buffer),_t._binBE.fl64=new Float64Array(_t._binBE.ui8.buffer),_t._binLE={nextZero:_t._binBE.nextZero,readUshort:function(i,e){return i[e+1]<<8|i[e]},readShort:function(i,e){var t=_t._binBE.ui8;return t[0]=i[e+0],t[1]=i[e+1],_t._binBE.i16[0]},readInt:function(i,e){var t=_t._binBE.ui8;return t[0]=i[e+0],t[1]=i[e+1],t[2]=i[e+2],t[3]=i[e+3],_t._binBE.i32[0]},readUint:function(i,e){var t=_t._binBE.ui8;return t[0]=i[e+0],t[1]=i[e+1],t[2]=i[e+2],t[3]=i[e+3],_t._binBE.ui32[0]},readASCII:_t._binBE.readASCII,readFloat:function(i,e){for(var t=_t._binBE.ui8,n=0;n<4;n++)t[n]=i[e+n];return _t._binBE.fl32[0]},readDouble:function(i,e){for(var t=_t._binBE.ui8,n=0;n<8;n++)t[n]=i[e+n];return _t._binBE.fl64[0]},writeUshort:function(i,e,t){i[e]=255&t,i[e+1]=t>>8&255},writeInt:function(i,e,t){var n=_t._binBE.ui8;_t._binBE.i32[0]=t,i[e+0]=n[0],i[e+1]=n[1],i[e+2]=n[2],i[e+3]=n[3]},writeUint:function(i,e,t){i[e]=t>>>0&255,i[e+1]=t>>>8&255,i[e+2]=t>>>16&255,i[e+3]=t>>>24&255},writeASCII:_t._binBE.writeASCII},_t._copyTile=function(i,e,t,n,r,s,o,a){for(var l=Math.min(e,r-o),c=Math.min(t,s-a),d=0;d<c;d++)for(var u=(a+d)*r+o,h=d*e,f=0;f<l;f++)n[u+f]=i[h+f]};class id extends Po{constructor(){super(...arguments),this.clazz=F0e}}id.\u0275fac=function(){let i;return function(t){return(i||(i=ce(id)))(t||id)}}(),id.\u0275prov=Ge({token:id,factory:id.\u0275fac,providedIn:"root"});class pC extends da{constructor(e){super(),this.service=e}}pC.\u0275fac=function(e){return new(e||pC)(P(id,16))},pC.\u0275pipe=gi({name:"loadLogLuvTexture",type:pC,pure:!0});class mC extends Ts{constructor(e,t,n){super(e,t),this.host=e,this.zone=t,this.service=n}}mC.\u0275fac=function(e){return new(e||mC)(P(ma,1),P(pt),P(id))},mC.\u0275dir=Oe({type:mC,selectors:[["","loadLogLuvTexture",""]],features:[W]});const gC=new Be;class O0e extends br{constructor(e){super(e),this.propertyNameMapping={},this.customPropertyMapping={}}load(e,t,n,r){const s=this,o=new vr(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(a))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}setPropertyNameMapping(e){this.propertyNameMapping=e}setCustomPropertyNameMapping(e){this.customPropertyMapping=e}parse(e){function t(_){let v="",b=0;const y=/^ply([\s\S]*)end_header(\r\n|\r|\n)/.exec(_);null!==y&&(v=y[1],b=new Blob([y[0]]).size);const x={comments:[],elements:[],headerLength:b,objInfo:""},w=v.split(/\r\n|\r|\n/);let E;function S(C,T){const k={type:C[0]};return"list"===k.type?(k.name=C[3],k.countType=C[1],k.itemType=C[2]):k.name=C[1],k.name in T&&(k.name=T[k.name]),k}for(let C=0;C<w.length;C++){let T=w[C];if(T=T.trim(),""===T)continue;const k=T.split(/\s+/),U=k.shift();switch(T=k.join(" "),U){case"format":x.format=k[0],x.version=k[1];break;case"comment":x.comments.push(T);break;case"element":void 0!==E&&x.elements.push(E),E={},E.name=k[0],E.count=parseInt(k[1]),E.properties=[];break;case"property":E.properties.push(S(k,g.propertyNameMapping));break;case"obj_info":x.objInfo=T;break;default:console.log("unhandled",U,k)}}return void 0!==E&&x.elements.push(E),x}function n(_,p){switch(p){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(_);case"float":case"double":case"float32":case"float64":return parseFloat(_)}}function r(_,p){const v=p.split(/\s+/),b={};for(let y=0;y<_.length;y++)if("list"===_[y].type){const x=[],w=n(v.shift(),_[y].countType);for(let E=0;E<w;E++)x.push(n(v.shift(),_[y].itemType));b[_[y].name]=x}else b[_[y].name]=n(v.shift(),_[y].type);return b}function s(){const _={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]};for(const p of Object.keys(g.customPropertyMapping))_[p]=[];return _}function o(_){const p=_.map(b=>b.name);function v(b){for(let y=0,x=b.length;y<x;y++){const w=b[y];if(p.includes(w))return w}return null}return{attrX:v(["x","px","posx"])||"x",attrY:v(["y","py","posy"])||"y",attrZ:v(["z","pz","posz"])||"z",attrNX:v(["nx","normalx"]),attrNY:v(["ny","normaly"]),attrNZ:v(["nz","normalz"]),attrS:v(["s","u","texture_u","tx"]),attrT:v(["t","v","texture_v","ty"]),attrR:v(["red","diffuse_red","r","diffuse_r"]),attrG:v(["green","diffuse_green","g","diffuse_g"]),attrB:v(["blue","diffuse_blue","b","diffuse_b"])}}function a(_,p){const v=s();let b,x="";null!==(b=/end_header\s([\s\S]*)$/.exec(_))&&(x=b[1]);const w=x.split(/\r\n|\r|\n/);let E=0,S=0,C=p.elements[E],T=o(C.properties);for(let k=0;k<w.length;k++){let U=w[k];if(U=U.trim(),""===U)continue;S>=C.count&&(E++,S=0,C=p.elements[E],T=o(C.properties));const B=r(C.properties,U);c(v,C.name,B,T),S++}return l(v)}function l(_){let p=new Mt;_.indices.length>0&&p.setIndex(_.indices),p.setAttribute("position",new Ze(_.vertices,3)),_.normals.length>0&&p.setAttribute("normal",new Ze(_.normals,3)),_.uvs.length>0&&p.setAttribute("uv",new Ze(_.uvs,2)),_.colors.length>0&&p.setAttribute("color",new Ze(_.colors,3)),_.faceVertexUvs.length>0&&(p=p.toNonIndexed(),p.setAttribute("uv",new Ze(_.faceVertexUvs,2)));for(const v of Object.keys(g.customPropertyMapping))_[v].length>0&&p.setAttribute(v,new Ze(_[v],g.customPropertyMapping[v].length));return p.computeBoundingSphere(),p}function c(_,p,v,b){if("vertex"===p){_.vertices.push(v[b.attrX],v[b.attrY],v[b.attrZ]),null!==b.attrNX&&null!==b.attrNY&&null!==b.attrNZ&&_.normals.push(v[b.attrNX],v[b.attrNY],v[b.attrNZ]),null!==b.attrS&&null!==b.attrT&&_.uvs.push(v[b.attrS],v[b.attrT]),null!==b.attrR&&null!==b.attrG&&null!==b.attrB&&(gC.setRGB(v[b.attrR]/255,v[b.attrG]/255,v[b.attrB]/255).convertSRGBToLinear(),_.colors.push(gC.r,gC.g,gC.b));for(const y of Object.keys(g.customPropertyMapping))for(const x of g.customPropertyMapping[y])_[y].push(v[x])}else if("face"===p){const y=v.vertex_indices||v.vertex_index,x=v.texcoord;3===y.length?(_.indices.push(y[0],y[1],y[2]),x&&6===x.length&&(_.faceVertexUvs.push(x[0],x[1]),_.faceVertexUvs.push(x[2],x[3]),_.faceVertexUvs.push(x[4],x[5]))):4===y.length&&(_.indices.push(y[0],y[1],y[3]),_.indices.push(y[1],y[2],y[3]))}}function d(_,p){const v={};let b=0;for(let y=0;y<p.length;y++){const x=p[y],w=x.valueReader;if("list"===x.type){const E=[],S=x.countReader.read(_+b);b+=x.countReader.size;for(let C=0;C<S;C++)E.push(w.read(_+b)),b+=w.size;v[x.name]=E}else v[x.name]=w.read(_+b),b+=w.size}return[v,b]}function u(_,p,v){function b(y,x,w){switch(x){case"int8":case"char":return{read:E=>y.getInt8(E),size:1};case"uint8":case"uchar":return{read:E=>y.getUint8(E),size:1};case"int16":case"short":return{read:E=>y.getInt16(E,w),size:2};case"uint16":case"ushort":return{read:E=>y.getUint16(E,w),size:2};case"int32":case"int":return{read:E=>y.getInt32(E,w),size:4};case"uint32":case"uint":return{read:E=>y.getUint32(E,w),size:4};case"float32":case"float":return{read:E=>y.getFloat32(E,w),size:4};case"float64":case"double":return{read:E=>y.getFloat64(E,w),size:8}}}for(let y=0,x=_.length;y<x;y++){const w=_[y];"list"===w.type?(w.countReader=b(p,w.countType,v),w.valueReader=b(p,w.itemType,v)):w.valueReader=b(p,w.type,v)}}let m;const g=this;if(e instanceof ArrayBuffer){const _=new Uint8Array(e),p=function f(_){let p=0,v=!0,b="";const y=[];do{const x=String.fromCharCode(_[p++]);"\n"!==x&&"\r"!==x?b+=x:("end_header"===b&&(v=!1),""!==b&&(y.push(b),b=""))}while(v&&p<_.length);return y.join("\r")+"\r"}(_),v=t(p);m="ascii"===v.format?a((new TextDecoder).decode(_),v):function h(_,p){const v=s(),b="binary_little_endian"===p.format,y=new DataView(_,p.headerLength);let x,w=0;for(let E=0;E<p.elements.length;E++){const S=p.elements[E],C=S.properties,T=o(C);u(C,y,b);for(let k=0;k<S.count;k++)x=d(w,C),w+=x[1],c(v,S.name,x[0],T)}return l(v)}(e,v)}else m=a(e,t(e));return m}}class nd extends Ua{constructor(){super(...arguments),this.clazz=O0e}}nd.\u0275fac=function(){let i;return function(t){return(i||(i=ce(nd)))(t||nd)}}(),nd.\u0275prov=Ge({token:nd,factory:nd.\u0275fac,providedIn:"root"});class _C extends Px{constructor(e){super(),this.service=e}}_C.\u0275fac=function(e){return new(e||_C)(P(nd,16))},_C.\u0275pipe=gi({name:"loadPLY",type:_C,pure:!0});class A0 extends bu{constructor(e,t,n){super(e,t),this.host=e,this.zone=t,this.service=n}getRefFromResponse(e){return e.computeVertexNormals(),e}load(){var e=this;return is(function*(){if(!e.initialized)return;if(void 0===e._url)throw new Error("missing url");const t=e._url,n=Tb(e.onProgress$)?s=>{e.onProgress$?.next(s)}:void 0,r=yield e.zone.runOutsideAngular(()=>e.service.load(t,n));e.host.objRef=e.getRefFromResponse(r),e.onLoaded$&&void 0!==r&&e.onLoaded$?.next(r)})()}}A0.\u0275fac=function(e){return new(e||A0)(P(Tt,1),P(pt),P(nd))},A0.\u0275dir=Oe({type:A0,selectors:[["","loadPLY",""]],features:[W]});class gg{constructor(e,t){this.host=e,this.parent=t,this.host.autoAddToParent=!1,this.host.autoDispose=!1,this.host.objRef=m5()}set refById(e){this.id=e,this.subscription?.unsubscribe(),this.subscription=this.parent.objRef$.subscribe(t=>{this.parentObj=t,this.applyRef()})}applyRef(){if(!this.parentObj||void 0===this.id)return;const e=this.findById(this.parentObj,this.id);e&&this.setRef(this.host,e)}findById(e,t){if((e.name??e.uuid)===t)return e;for(const n of e.children){const r=this.findById(n,t);if(void 0!==r)return r}}setRef(e,t){const n=e.objRef;n&&UR(n)&&(n.objRef=t,e.objRef=n)}ngOnDestroy(){this.subscription?.unsubscribe()}}gg.\u0275fac=function(e){return new(e||gg)(P(Ke,2),P(Ke,4))},gg.\u0275dir=Oe({type:gg,selectors:[["","refById",""]],inputs:{refById:"refById"}});const N0e=["outerRef"],j0e=["innerRef"];function U0e(i,e){1&i&&i_(0)}function V0e(i,e){if(1&i){const t=Vs();ye(0,"div",3,4),xt("onResize",function(){return lr(t),cr(vi().onResize())}),ye(2,"div",5,6)(4,"div",7),Ft(5,U0e,1,0,"ng-container",8),ke()()()}if(2&i){const t=vi(),n=Qt(4);Z("ngStyle",t.styles),se(2),Z("ngStyle",t.transformInnerStyles),se(2),bo(t.style),Z("className",t.className),se(1),Z("ngTemplateOutlet",n)}}function z0e(i,e){1&i&&i_(0)}function G0e(i,e){if(1&i&&(ye(0,"div",9,4),Ft(2,z0e,1,0,"ng-container",8),ke()),2&i){const t=vi(),n=Qt(4);Z("ngStyle",t.styles)("className",t.className),se(2),Z("ngTemplateOutlet",n)}}function H0e(i,e){1&i&&ne(0)}const y0=new R,AD=new R,W0e=new R;function q0e(i,e,t){const n=y0.setFromMatrixPosition(i.matrixWorld);n.project(e);const r=t.width/2,s=t.height/2;return[n.x*r+r,-n.y*s+s]}const yD=i=>Math.abs(i)<1e-10?0:i;function GG(i,e,t=""){let n="matrix3d(";for(let r=0;16!==r;r++)n+=yD(e[r]*i.elements[r])+(15!==r?",":")");return t+n}const $0e=(i=>e=>GG(e,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]);class x0 extends Nl{constructor(e,t,n){super(n),this.view=e,this.canvas=t,this.prepend=!1,this.center=!1,this.fullscreen=!1,this.eps=.001,this.sprite=!1,this.transform=!1,this.zIndexRange=[16777271,0],this.onOcclude=new St,this.calculatePosition=q0e,this.as="div",this.pointerEvents="auto",this.transformInnerStyles=this.computeInnerStyles(),this.styles=null,this.oldZoom=0,this.oldPosition=[0,0],this.notOccluded=!0,this.raycaster=Ut(Dx)}ngOnInit(){super.ngOnInit(),this.styles=this.computeStyles()}ngAfterViewInit(){this.el=document.createElement(this.as),this.frameSubscription=this.view.onRender.subscribe(()=>this.onFrame()),this.transformOuterRef&&this.el.appendChild(this.transformOuterRef.nativeElement),this.el&&!this.target&&this.appendElement(this.el)}onResize(){this.styles=this.computeStyles()}ngOnChanges(e){super.ngOnChanges(e)}appendElement(e){if(this.el&&this.objRef&&this.canvas.rendererCanvas&&this.view.camera){if(this.target=this.portal??this.canvas.rendererCanvas?.nativeElement.parentElement,this.view.scene?.objRef?.updateMatrixWorld(),this.transform)e.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const t=this.calculatePosition(this.objRef,this.view.camera.objRef,this.getSize());e.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${t[0]}px,${t[1]}px,0);transform-origin:0 0;`}this.target&&(this.prepend?this.target.prepend(e):this.target.appendChild(e))}}onFrame(){const e=this.view.camera?.objRef,t=this.view.scene?.objRef,n=this._objRef,r=this.getSize();if(!(e&&n&&t&&this.el))return;e.updateMatrixWorld(),n.updateWorldMatrix(!0,!1);const s=this.transform?this.oldPosition:this.calculatePosition(n,e,r);if(this.transform||Math.abs(this.oldZoom-e.zoom)>this.eps||Math.abs(this.oldPosition[0]-s[0])>this.eps||Math.abs(this.oldPosition[1]-s[1])>this.eps){const o=function Y0e(i,e){const t=y0.setFromMatrixPosition(i.matrixWorld),n=AD.setFromMatrixPosition(e.matrixWorld),r=t.sub(n),s=e.getWorldDirection(W0e);return r.angleTo(s)>Math.PI/2}(n,e);let a=!1;"boolean"==typeof this.occlude?!0===this.occlude&&(a=[t]):Array.isArray(this.occlude)&&(a=this.occlude.map(c=>c.objRef??c));const l=this.notOccluded;if(this.notOccluded=a?!o&&function X0e(i,e,t,n){const r=y0.setFromMatrixPosition(i.matrixWorld),s=r.clone();s.project(e),t.setFromCamera(s,e);const o=t.intersectObjects(n,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}(n,e,this.raycaster,a):!o,l!==this.notOccluded&&(this.onOcclude.length>0?this.onOcclude.next(!this.notOccluded):this.el.style.display=this.notOccluded?"block":"none"),this.el.style.zIndex=`${function K0e(i,e,t){if(e instanceof In||e instanceof La){const n=y0.setFromMatrixPosition(i.matrixWorld),r=AD.setFromMatrixPosition(e.matrixWorld),s=n.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near);return Math.round(o*s+(t[1]-o*e.far))}}(n,e,this.zIndexRange)}`,this.transform){const[c,d]=[r.width/2,r.height/2],u=e.projectionMatrix.elements[5]*d,{isOrthographicCamera:h,top:f,left:m,bottom:g,right:_}=e,p=$0e(e.matrixWorldInverse),v=h?`scale(${u})translate(${yD(-(_+m)/2)}px,${yD((f+g)/2)}px)`:`translateZ(${u}px)`;let b=n.matrixWorld;this.sprite&&(b=e.matrixWorldInverse.clone().transpose().copyPosition(b).scale(n.scale),b.elements[3]=b.elements[7]=b.elements[11]=0,b.elements[15]=1),this.el.style.width=r.width+"px",this.el.style.height=r.height+"px",this.el.style.perspective=h?"":`${u}px`,this.transformOuterRef&&this.transformInnerRef&&(this.transformOuterRef.nativeElement.style.transform=`${v}${p}translate(${c}px,${d}px)`,this.transformInnerRef.nativeElement.style.transform=((e,t)=>GG(e,(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1])(t),"translate(-50%,-50%)"))(b,1/((this.distanceFactor||10)/400)))}else{const c=void 0===this.distanceFactor?1:function Z0e(i,e){if(e instanceof La)return e.zoom;if(e instanceof In){const t=y0.setFromMatrixPosition(i.matrixWorld),n=AD.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(n);return 1/(2*Math.tan(r/2)*s)}return 1}(n,e)*this.distanceFactor;this.el.style.transform=`translate3d(${s[0]}px,${s[1]}px,0) scale(${c})`}this.oldPosition=s,this.oldZoom=e.zoom}}ngOnDestroy(){this.el?.remove(),this.frameSubscription?.unsubscribe()}computeStyles(){const e=this.getSize();return this.transform?{position:"absolute",top:0,left:0,width:e.width+"px",height:e.height+"px",transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:this.center?"translate3d(-50%,-50%,0)":"none",...this.fullscreen&&{top:-e.height/2+"px",left:-e.width/2+"px",width:e.width+"px",height:e.height+"px"},...this.style}}computeInnerStyles(){return{position:"absolute",pointerEvents:this.pointerEvents}}getSize(){return this.view.viewPort??this.canvas.rendererCanvas?.nativeElement.getBoundingClientRect()??{width:0,height:0}}}x0.\u0275fac=function(e){return new(e||x0)(P(Ss),P(Gi),P(Ke,4))},x0.\u0275cmp=K({type:x0,selectors:[["th-html"]],viewQuery:function(e,t){if(1&e&&(ki(N0e,5),ki(j0e,5)),2&e){let n;kt(n=Lt())&&(t.transformOuterRef=n.first),kt(n=Lt())&&(t.transformInnerRef=n.first)}},inputs:{prepend:"prepend",center:"center",fullscreen:"fullscreen",portal:"portal",distanceFactor:"distanceFactor",sprite:"sprite",transform:"transform",zIndexRange:"zIndexRange",style:"style",className:"className",occlude:"occlude",calculatePosition:"calculatePosition",as:"as",wrapperClass:"wrapperClass",pointerEvents:"pointerEvents"},outputs:{onOcclude:"onOcclude"},features:[W,Sr],ngContentSelectors:["*"],decls:5,vars:2,consts:[[3,"ngStyle","onResize",4,"ngIf","ngIfElse"],["noTransform",""],["tempOutlet",""],[3,"ngStyle","onResize"],["outerRef",""],[3,"ngStyle"],["innerRef",""],[3,"className"],[4,"ngTemplateOutlet"],[3,"ngStyle","className"]],template:function(e,t){if(1&e&&(fe(),Ft(0,V0e,6,6,"div",0),Ft(1,G0e,3,3,"ng-template",null,1,Rd),Ft(3,H0e,1,0,"ng-template",null,2,Rd)),2&e){const n=Qt(2);Z("ngIf",t.transform)("ngIfElse",n)}},dependencies:[Jl,eS,c3,Au],encapsulation:2,changeDetection:0});const xD=function(i){return[0,i,0]},eve=function(){return[0,1,0]},tve=function(){return{background:"lightblue",borderRadius:"1em",padding:"1em",display:"flex",flexDirection:"column"}},HG=function(i){return[i,0,0]},ive=function(i){return[i,.05,0]},nve=function(){return[.17,.17,.17]},rve=function(){return[4,10,2]},sve=function(){return[100,100]},ove=function(){return[55,2,.1,100]},ave=function(i,e){return[i,0,e]},lve=function(){return[0,0,0]};class w0{constructor(e){this.Math=Math,this.sprite=!1,this.glbPath=`${ca}mac-draco.glb`,this.clock=new _p(!0),this.plane=new to(new R(0,1,0),3),this.rotation=[0,0,0],this.position=[0,0,0],e.setDecoderPath("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/jsm/libs/draco/gltf/"),e.setCrossOrigin("no-cors"),this.calcPose()}onBeforeRender(){this.calcPose()}calcPose(){const e=this.clock.getElapsedTime();this.rotation=[vt.lerp(this.rotation[0],Math.cos(e/2)/20+.25,.1),vt.lerp(this.rotation[1],Math.sin(e/4)/20,.1),vt.lerp(this.rotation[2],Math.sin(e/8)/20,.1)],this.position=[0,vt.lerp(this.position[1],(-2+Math.sin(e/2))/2,.1),0]}}w0.\u0275fac=function(e){return new(e||w0)(P(Pl))},w0.\u0275cmp=K({type:w0,selectors:[["app-html-example"]],decls:17,vars:56,consts:[[3,"thStats","shadow","onRender"],[3,"rotation","position"],["loadGLTF","",3,"castShadow","url","position","rotation"],[3,"refById"],[3,"rotation","position","scale","sprite","transform","occlude"],["src","./multi-view-postprocessing-example",2,"width","1960px","height","1280px"],[3,"castShadow","position","lookAt","color","intensity"],["light",""],[3,"receiveShadow","rotation","position"],[3,"args"],[3,"color"],[3,"args","position","lookAt"]],template:function(e,t){1&e&&(ye(0,"th-canvas",0),xt("onRender",function(){return t.onBeforeRender()}),ye(1,"th-scene"),Ye(2,"th-ambientLight"),ye(3,"th-group",1)(4,"th-object3D",2)(5,"th-mesh",3)(6,"th-html",4),Ye(7,"iframe",5),ke()()()(),Ye(8,"th-directionalLight",6,7),hr(10,"color"),ye(11,"th-mesh",8),Ye(12,"th-planeGeometry",9)(13,"th-meshBasicMaterial",10),hr(14,"color"),ke(),ye(15,"th-perspectiveCamera",11),Ye(16,"th-orbitControls"),ke()()()),2&e&&(Z("thStats",!0)("shadow",!0),se(3),Z("rotation",li(34,xD,t.Math.PI))("position",Le(36,eve)),se(1),Z("castShadow",!0)("url",t.glbPath)("position",t.position)("rotation",t.rotation),se(1),Z("refById","Cube008_2"),se(1),bo(Le(37,tve)),Z("rotation",li(38,HG,-1*t.Math.PI/2))("position",li(40,ive,-.04))("scale",Le(42,nve))("sprite",t.sprite)("transform",!0)("occlude",!0),se(2),Z("castShadow",!0)("position",Le(43,rve))("lookAt",li(44,xD,-3))("color",wr(10,30,"#ffffff"))("intensity",.75),se(3),Z("receiveShadow",!0)("rotation",li(46,HG,3*t.Math.PI/2))("position",li(48,xD,-3)),se(1),Z("args",Le(50,sve)),se(1),Z("color",wr(14,32,"#efefef")),se(2),Z("args",Le(51,ove))("position",Ca(52,ave,-5,-15))("lookAt",Le(55,lve)))},dependencies:[ls,an,Ke,Es,Ar,Hn,Nl,gn,Va,aa,Gi,ko,Io,gg,x0,Qc],encapsulation:2,changeDetection:0}),Math.sqrt(3),Math.sqrt(3);const $a=1/6,zl=(Math.sqrt(5),Math.sqrt(5),i=>0|Math.floor(i)),wD=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);const fve=["canvas"],pve=["light"],mve=["instancedMesh"],gve=function(){return[0,0,30]},_ve=function(){return[0,0,0]},bve=function(){return["#808080"]},vve=function(i){return[void 0,void 0,i]},Ave=function(i,e,t){return[i,e,t]},WG=function(){return["#9C1E15"]},yve=function(i){return[0,0,i]},xve=function(i,e){return[i,e]};class M0{constructor(){this.SIZE=1.5,this.NX=20,this.NY=20,this.PADDING=1,this.SIZEP=this.SIZE+this.PADDING,this.W=this.NX*this.SIZEP-this.PADDING,this.H=this.NY*this.SIZEP-this.PADDING,this.NUM_INSTANCES=this.NX*this.NY,this.dummy=new pi,this.simplexNoise=function hve(i=Math.random){const e=function CD(i){const t=new Uint8Array(512);for(let n=0;n<256;n++)t[n]=n;for(let n=0;n<255;n++){const r=n+~~(i()*(256-n)),s=t[n];t[n]=t[r],t[r]=s}for(let n=256;n<512;n++)t[n]=t[n-256];return t}(i),t=new Float64Array(e).map(s=>wD[s%12*3]),n=new Float64Array(e).map(s=>wD[s%12*3+1]),r=new Float64Array(e).map(s=>wD[s%12*3+2]);return function(o,a,l){let c,d,u,h;const f=.3333333333333333*(o+a+l),m=zl(o+f),g=zl(a+f),_=zl(l+f),p=(m+g+_)*$a,x=o-(m-p),w=a-(g-p),E=l-(_-p);let S,C,T,k,U,B;x>=w?w>=E?(S=1,C=0,T=0,k=1,U=1,B=0):x>=E?(S=1,C=0,T=0,k=1,U=0,B=1):(S=0,C=0,T=1,k=1,U=0,B=1):w<E?(S=0,C=0,T=1,k=0,U=1,B=1):x<E?(S=0,C=1,T=0,k=0,U=1,B=1):(S=0,C=1,T=0,k=1,U=1,B=0);const j=x-S+$a,H=w-C+$a,L=E-T+$a,V=x-k+2*$a,O=w-U+2*$a,Q=E-B+2*$a,re=x-1+.5,_e=w-1+.5,de=E-1+.5,Y=255&m,q=255&g,te=255&_;let $=.6-x*x-w*w-E*E;if($<0)c=0;else{const me=Y+e[q+e[te]];$*=$,c=$*$*(t[me]*x+n[me]*w+r[me]*E)}let I=.6-j*j-H*H-L*L;if(I<0)d=0;else{const me=Y+S+e[q+C+e[te+T]];I*=I,d=I*I*(t[me]*j+n[me]*H+r[me]*L)}let ue=.6-V*V-O*O-Q*Q;if(ue<0)u=0;else{const me=Y+k+e[q+U+e[te+B]];ue*=ue,u=ue*ue*(t[me]*V+n[me]*O+r[me]*Q)}let Me=.6-re*re-_e*_e-de*de;if(Me<0)h=0;else{const me=Y+1+e[q+1+e[te+1]];Me*=Me,h=Me*Me*(t[me]*re+n[me]*_e+r[me]*de)}return 32*(c+d+u+h)}}(),this.pointerPN={x:0,y:0}}ngOnInit(){this.light?.shadow&&(this.light.shadow.mapSize.width=1024,this.light.shadow.mapSize.height=1024)}onRender(){this.updateLightPosition(),this.updateInstanceMatrix()}updateLightPosition(){const e=this.light?.position;e&&(e.x=this.pointerPN.x*this.W,e.y=this.pointerPN.y*this.H)}updateInstanceMatrix(){if(!this.instancedMesh||!this.instancedMesh.objRef)return;const e=-this.W/2+this.PADDING,t=-this.H/2+this.PADDING,n=1e-4*Date.now(),r=.1*this.pointerPN.x,s=.1*this.pointerPN.y;let a,l,c,d,u,h;for(let f=0;f<this.NX;f++)for(let m=0;m<this.NY;m++)a=e+f*this.SIZEP,l=t+m*this.SIZEP,c=.005*a+r,d=.005*l+s,u=this.simplexNoise(c,d,n)*Math.PI,h=this.simplexNoise(d,c,n)*Math.PI,this.dummy.position.set(a,l,-10),this.dummy.rotation.set(u,h,0),this.dummy.updateMatrix(),this.instancedMesh?.objRef?.setMatrixAt(f*this.NY+m,this.dummy.matrix);this.instancedMesh.objRef.instanceMatrix.needsUpdate=!0}onMouseMove(e){if(!this.canvas||!this.canvas.rendererCanvas)return;const t=this.canvas.rendererCanvas.nativeElement;this.pointerPN.x=(e.clientX-t.offsetLeft+window.scrollX)/t.width*2-1,this.pointerPN.y=-(e.clientY-t.offsetTop+window.scrollY)/t.height*2+1}}M0.\u0275fac=function(e){return new(e||M0)},M0.\u0275cmp=K({type:M0,selectors:[["app-instanced-mesh-example"]],viewQuery:function(e,t){if(1&e&&(ki(fve,5),ki(pve,5),ki(mve,5)),2&e){let n;kt(n=Lt())&&(t.canvas=n.first),kt(n=Lt())&&(t.light=n.first),kt(n=Lt())&&(t.instancedMesh=n.first)}},hostBindings:function(e,t){1&e&&xt("mousemove",function(r){return t.onMouseMove(r)},0,Uv)},decls:15,vars:31,consts:[[3,"shadow","onRender"],["canvas",""],[3,"position","lookAt"],[3,"color"],[3,"castShadow"],["light",""],[3,"args","count","castShadow","receiveShadow"],["instancedMesh",""],[3,"args"],[3,"position","receiveShadow"]],template:function(e,t){1&e&&(ye(0,"th-canvas",0,1),xt("onRender",function(){return t.onRender()}),ye(2,"th-scene")(3,"th-perspectiveCamera",2),Ye(4,"th-orbitControls"),ke(),Ye(5,"th-ambientLight",3)(6,"th-pointLight",4,5),ye(8,"th-instancedMesh",6,7),Ye(10,"th-boxGeometry",8)(11,"th-meshPhongMaterial",3),ke(),ye(12,"th-mesh",9),Ye(13,"th-planeGeometry",8)(14,"th-meshPhongMaterial",3),ke()()()),2&e&&(Z("shadow",!0),se(3),Z("position",Le(15,gve))("lookAt",Le(16,_ve)),se(2),Z("color",Le(17,bve)),se(1),Z("castShadow",!0),se(2),Z("args",li(18,vve,t.NUM_INSTANCES))("count",t.NUM_INSTANCES)("castShadow",!0)("receiveShadow",!0),se(2),Z("args",Sd(20,Ave,t.SIZE,t.SIZE,t.SIZE)),se(1),Z("color",Le(24,WG)),se(1),Z("position",li(25,yve,-10-t.SIZE))("receiveShadow",!0),se(1),Z("args",Ca(27,xve,2*t.W,2*t.H)),se(1),Z("color",Le(30,WG)))},dependencies:[ls,an,ao,Ar,qu,Hn,gn,ro,za,aa,Gi],encapsulation:2,changeDetection:0});const wve=function(){return[2,2,2]},Cve=function(){return[1,1,1]},Mve=function(){return{color:"purple"}},Eve=function(i){return[i,0,0]},Sve=function(){return[2,0,0]},Tve=function(){return[75,2,.1,1e3]},Rve=function(){return[1,1,5]};class E0{constructor(){this.selected=!1,this.rotation=[0,0,0],this.position=[0,0,0]}}E0.\u0275fac=function(e){return new(e||E0)},E0.\u0275cmp=K({type:E0,selectors:[["app-box"]],inputs:{rotation:"rotation",position:"position"},decls:3,vars:7,consts:[[3,"rotation","position","scale","onClick"],[3,"args"]],template:function(e,t){1&e&&(ye(0,"th-mesh",0),xt("onClick",function(){return t.selected=!t.selected}),Ye(1,"th-boxGeometry")(2,"th-meshBasicMaterial",1),ke()),2&e&&(Z("rotation",t.rotation)("position",t.position)("scale",t.selected?Le(4,wve):Le(5,Cve)),se(2),Z("args",Le(6,Mve)))},dependencies:[Hn,Va,za,Ga],encapsulation:2,changeDetection:0});class S0{constructor(){this.rotation=[0,0,0]}onBeforeRender(){this.rotation=[0,this.rotation[2]+.01,this.rotation[2]+.01]}}S0.\u0275fac=function(e){return new(e||S0)},S0.\u0275cmp=K({type:S0,selectors:[["app-introductory-example"]],decls:6,vars:11,consts:[[3,"onRender"],[3,"position","rotation"],[3,"args","position"]],template:function(e,t){1&e&&(ye(0,"th-canvas",0),xt("onRender",function(){return t.onBeforeRender()}),ye(1,"th-scene"),Ye(2,"app-box",1)(3,"app-box",1)(4,"th-ambientLight")(5,"th-perspectiveCamera",2),ke()()),2&e&&(se(2),Z("position",li(6,Eve,-2))("rotation",t.rotation),se(1),Z("position",Le(8,Sve))("rotation",t.rotation),se(2),Z("args",Le(9,Tve))("position",Le(10,Rve)))},dependencies:[an,Ar,gn,Gi,E0],encapsulation:2,changeDetection:0});const Ive=function(){return[0,1,0]},Dve=function(){return[100,100,100]},Pve=function(i){return[0,0,i]},kve=function(){return[10,10]},qG=function(){return[10,10,10]},Lve=function(){return[45,2,.1,100]},Bve=function(){return[0,0,0]};class T0{constructor(){this.assetPath1=`${ca}DamagedHelmet.glb`,this.assetPath2=`${ca}BoomBox.glb`,this.rotation=[0,0,0]}onBeforeRender(){this.rotation=[0,this.rotation[1]+.01,0]}}T0.\u0275fac=function(e){return new(e||T0)},T0.\u0275cmp=K({type:T0,selectors:[["app-loader-example"]],decls:8,vars:22,consts:[[3,"onRender"],[3,"thStats"],["loadGLTF","",3,"url","rotation","position"],["loadGLTF","",3,"url","scale","rotation","position"],[3,"args"],[3,"position"],[3,"args","position","lookAt"]],template:function(e,t){1&e&&(ye(0,"th-canvas",0),xt("onRender",function(){return t.onBeforeRender()}),ye(1,"th-scene",1),Ye(2,"th-ambientLight"),ye(3,"th-object3D",2),Ye(4,"th-object3D",3),ke(),Ye(5,"th-gridHelper",4)(6,"th-pointLight",5)(7,"th-perspectiveCamera",6),ke()()),2&e&&(se(1),Z("thStats",!0),se(2),Z("url",t.assetPath1)("rotation",t.rotation)("position",Le(13,Ive)),se(1),Z("url",t.assetPath2)("scale",Le(14,Dve))("rotation",t.rotation)("position",li(15,Pve,-3)),se(1),Z("args",Le(17,kve)),se(1),Z("position",Le(18,qG)),se(1),Z("args",Le(19,Lve))("position",Le(20,qG))("lookAt",Le(21,Bve)))},dependencies:[an,Ke,io,ao,Ar,gn,Gi,ko,Io],encapsulation:2,changeDetection:0});const Fve=["slider"],Ove=function(){return[35,2,.1,100]},Nve=function(){return[0,0,6]},jve=function(i,e){return{x:0,y:0,width:i,height:e}},Uve=function(){return["#ffffff","#444444",1]},Vve=function(i){return[i,2,2]},zve=function(){return[1,3]},Gve=function(i,e,t){return{x:i,y:0,width:e,height:t}};class R0{constructor(){this.sliderPos=0,this.controlsEnabled=!0,this.colorLeft=new Be(12375183),this.colorRight=new Be(9419988)}ngOnInit(){!this.slider||!this.canvas||(this.slider.nativeElement.style.touchAction="none",this.sliderPos=(this.canvas.rendererCanvas?.nativeElement.clientWidth||0)/2)}onPointerMove(e){if(this.controlsEnabled||!this.canvas||!this.canvas.rendererCanvas||!this.slider||!1===e.isPrimary)return;const n=this.canvas.rendererCanvas.nativeElement.getBoundingClientRect();this.sliderPos=Math.max(n.left,Math.min(n.right,e.pageX))-n.left,this.slider.nativeElement.style.left=this.sliderPos-this.slider.nativeElement.offsetWidth/2+"px"}onPointerUp(){this.controlsEnabled=!0}onSliderPointerDown(e){!1!==e.isPrimary&&(this.controlsEnabled=!1)}}R0.\u0275fac=function(e){return new(e||R0)},R0.\u0275cmp=K({type:R0,selectors:[["app-multi-scene-example"]],viewQuery:function(e,t){if(1&e&&(ki(Fve,7),ki(Gi,7)),2&e){let n;kt(n=Lt())&&(t.slider=n.first),kt(n=Lt())&&(t.canvas=n.first)}},hostBindings:function(e,t){1&e&&xt("pointermove",function(r){return t.onPointerMove(r)},0,I1)("pointerup",function(){return t.onPointerUp()},!1,I1)},decls:20,vars:32,consts:[[1,"slider",3,"pointerdown"],["slider",""],[3,"disableDefaultView"],["thecanvas",""],[3,"args","position"],["cam",""],[3,"scissor","scissorTest","clearColor","camera"],[3,"background"],["light",""],[3,"args"],["geo",""],[3,"objRef"],[3,"geometry"],[3,"wireframe"]],template:function(e,t){if(1&e&&(ye(0,"div",0,1),xt("pointerdown",function(r){return t.onSliderPointerDown(r)}),ke(),ye(2,"th-canvas",2,3)(4,"th-perspectiveCamera",4,5),Ye(6,"th-orbitControls"),ke(),ye(7,"th-view",6)(8,"th-scene",7),Ye(9,"th-hemisphereLight",4,8),ye(11,"th-mesh"),Ye(12,"th-meshStandardMaterial")(13,"th-icosahedronGeometry",9,10),ke()()(),ye(15,"th-view",6)(16,"th-scene",7),Ye(17,"th-hemisphereLight",11),ye(18,"th-mesh",12),Ye(19,"th-meshStandardMaterial",13),ke()()()()),2&e){const n=Qt(3),r=Qt(5),s=Qt(10),o=Qt(14);se(2),Z("disableDefaultView",!0),se(2),Z("args",Le(19,Ove))("position",Le(20,Nve)),se(3),Z("scissor",Ca(21,jve,t.sliderPos,(null==n.rendererCanvas||null==n.rendererCanvas.nativeElement?null:n.rendererCanvas.nativeElement.height)||0))("scissorTest",!0)("clearColor",t.colorLeft)("camera",r),se(1),Z("background",t.colorLeft),se(1),Z("args",Le(24,Uve))("position",li(25,Vve,-2)),se(4),Z("args",Le(27,zve)),se(2),Z("scissor",Sd(28,Gve,t.sliderPos,(null==n.rendererCanvas||null==n.rendererCanvas.nativeElement?null:n.rendererCanvas.nativeElement.width)||0,(null==n.rendererCanvas||null==n.rendererCanvas.nativeElement?null:n.rendererCanvas.nativeElement.height)||0))("scissorTest",!0)("clearColor",t.colorRight)("camera",r),se(1),Z("background",t.colorRight),se(1),Z("objRef",null==s.objRef?null:s.objRef.clone()),se(1),Z("geometry",o.objRef),se(1),Z("wireframe",!0)}},dependencies:[ls,an,Dl,Hn,gn,Ul,Wu,Gi,Ss],styles:[".container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.slider[_ngcontent-%COMP%]{position:absolute;cursor:ew-resize;width:40px;height:40px;background-color:#f32196;opacity:.7;border-radius:50%;top:calc(50% - 20px);left:calc(50% - 20px)}"],changeDetection:0});const YG={uniforms:{tDiffuse:{value:null},amount:{value:.005},angle:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float amount;\n\t\tuniform float angle;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec2 offset = amount * vec2( cos(angle), sin(angle));\n\t\t\tvec4 cr = texture2D(tDiffuse, vUv + offset);\n\t\t\tvec4 cga = texture2D(tDiffuse, vUv);\n\t\t\tvec4 cb = texture2D(tDiffuse, vUv - offset);\n\t\t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n\n\t\t}"},Hve=["thecanvas"],Qve=function(i,e){return{x:0,y:0,width:i,height:e}},Wve=function(){return[0,0,1]},qve=function(){return["#ffffff"]},Yve=function(){return[0,0,0]},vC=function(i){return[i,0,0]},Xve=function(){return[200,32,16]},Zve=function(){return["#fac400"]},Kve=function(){return["#f83f0d"]},$ve=function(){return[400,0,0]},MD=function(i,e,t,n){return{x:i,y:e,width:t,height:n}},Jve=function(i){return[i]},eAe=function(){return{value:.055}},tAe=function(i){return{amount:i}},iAe=function(){return[.35,.5,2048,!0]};class I0{constructor(){this.Math=Math,this.RGBShiftShader=YG,this.DotScreenShader=$I,this.canvasWidth=128,this.canvasHeight=128,this.mouseX=0,this.mouseY=0,this.view1={left:0,bottom:0,width:.5,height:1,background:new Be(.5,.5,.7),eye:[0,300,1800],up:[0,1,0],fov:30,updateCamera:(e,t)=>{this.updateSize(),e.position.x+=.05*this.mouseX,e.position.x=Math.max(Math.min(e.position.x,2e3),-2e3),e.lookAt(t.position),e.updateProjectionMatrix()}},this.view2={left:.5,bottom:0,width:.5,height:.5,background:new Be(.7,.5,.5),eye:[0,1800,0],up:[0,0,1],fov:45,updateCamera:(e,t)=>{this.updateSize(),e.position.x-=.05*this.mouseX,e.position.x=Math.max(Math.min(e.position.x,2e3),-2e3),e.lookAt(e.position.clone().setY(0)),e.updateProjectionMatrix()}},this.view3={left:.5,bottom:.5,width:.5,height:.5,background:new Be(.5,.7,.7),eye:[1400,800,1400],up:[0,1,0],fov:60,updateCamera:(e,t)=>{this.updateSize(),e.position.y-=.05*this.mouseX,e.position.y=Math.max(Math.min(e.position.y,1600),-1600),e.lookAt(t.position),e.updateProjectionMatrix()}}}ngOnInit(){!this.canvas||!this.canvas.rendererCanvas||(this.shadowTexture=new cx(this.canvas.rendererCanvas.nativeElement))}updateSize(){!this.canvas||!this.canvas.rendererCanvas||(this.canvasWidth=this.canvas.rendererCanvas.nativeElement.width,this.canvasHeight=this.canvas.rendererCanvas.nativeElement.height)}onMouseMove(e){if(!this.canvas||!this.canvas.rendererCanvas)return;const t=this.canvas.rendererCanvas.nativeElement.getBoundingClientRect();this.mouseX=e.clientX-t.left-t.width/2,this.mouseY=e.clientY-t.right-t.height/2}}I0.\u0275fac=function(e){return new(e||I0)},I0.\u0275cmp=K({type:I0,selectors:[["app-multi-view-postprocessing-example"]],viewQuery:function(e,t){if(1&e&&ki(Hve,7),2&e){let n;kt(n=Lt())&&(t.canvas=n.first)}},hostBindings:function(e,t){1&e&&xt("mousemove",function(r){return t.onMouseMove(r)},0,Uv)},decls:32,vars:95,consts:[[3,"disableDefaultView","viewPort"],["thecanvas",""],["scene",""],[3,"position","args"],[3,"position","rotation"],[3,"args"],["geo",""],[3,"flatShading","shininess","specular","color"],["mat",""],[3,"position","rotation","geometry","material"],[3,"scene","viewPort","scissor","scissorTest","onRender"],["thview1",""],[3,"position","up","fov","aspect","near","far"],["camera1",""],[3,"clearColor"],[3,"strength"],[3,"args","uniforms"],[3,"scene","viewPort","scissor","scissorTest","clearColor","onRender"],["thview2",""],["camera2",""],["thview3",""],["camera3",""]],template:function(e,t){if(1&e){const n=Vs();ye(0,"th-canvas",0,1)(2,"th-scene",null,2),Ye(4,"th-directionalLight",3),ye(5,"th-mesh",4),Ye(6,"th-sphereGeometry",5,6)(8,"th-meshPhongMaterial",7,8),ke(),Ye(10,"th-mesh",9)(11,"th-mesh",9),ke(),ye(12,"th-view",10,11),xt("onRender",function(){lr(n);const s=Qt(15),o=Qt(3);return cr(t.view1.updateCamera(s.objRef,o.objRef))}),Ye(14,"th-perspectiveCamera",12,13),ye(16,"th-effectComposer"),Ye(17,"th-renderPass",14)(18,"th-unrealBloomPass",15)(19,"th-shaderPass",16)(20,"th-glitchPass"),ke()(),ye(21,"th-view",17,18),xt("onRender",function(){lr(n);const s=Qt(24),o=Qt(3);return cr(t.view2.updateCamera(s.objRef,o.objRef))}),Ye(23,"th-perspectiveCamera",12,19),ye(25,"th-effectComposer"),Ye(26,"th-renderPass")(27,"th-filmPass",5),ke()(),ye(28,"th-view",17,20),xt("onRender",function(){lr(n);const s=Qt(31),o=Qt(3);return cr(t.view3.updateCamera(s.objRef,o.objRef))}),Ye(30,"th-perspectiveCamera",12,21),ke()()}if(2&e){const n=Qt(3),r=Qt(7),s=Qt(9),o=Qt(13),a=Qt(22),l=Qt(29);Z("disableDefaultView",!0)("viewPort",Ca(56,Qve,.5*t.canvasWidth,t.canvasHeight)),se(4),Z("position",Le(59,Wve))("args",Le(60,qve)),se(1),Z("position",Le(61,Yve))("rotation",li(62,vC,-t.Math.PI/2)),se(1),Z("args",Le(64,Xve)),se(2),Z("flatShading",!1)("shininess",30)("specular",Le(65,Zve))("color",Le(66,Kve)),se(2),Z("position",li(67,vC,-400))("rotation",li(69,vC,-t.Math.PI/2))("geometry",r.objRef)("material",s.objRef),se(1),Z("position",Le(71,$ve))("rotation",li(72,vC,-t.Math.PI/2))("geometry",r.objRef)("material",s.objRef),se(1),Z("scene",n)("viewPort",d_(74,MD,t.view1.left*t.canvasWidth,t.view1.bottom*t.canvasHeight,t.view1.width*t.canvasWidth,t.view1.height*t.canvasHeight))("scissor",o.viewPort)("scissorTest",!0),se(2),Z("position",t.view1.eye)("up",t.view1.up)("fov",t.view1.fov)("aspect",t.view1.width*t.canvasWidth/(t.view1.height*t.canvasHeight))("near",1)("far",1e4),se(3),Z("clearColor",t.view1.background),se(1),Z("strength",.2),se(1),Z("args",li(79,Jve,t.RGBShiftShader))("uniforms",li(82,tAe,Le(81,eAe))),se(2),Z("scene",n)("viewPort",d_(84,MD,t.view2.left*t.canvasWidth,t.view2.bottom*t.canvasHeight,t.view2.width*t.canvasWidth,t.view2.height*t.canvasHeight))("scissor",a.viewPort)("scissorTest",!0)("clearColor",t.view2.background),se(2),Z("position",t.view2.eye)("up",t.view2.up)("fov",t.view2.fov)("aspect",t.view2.width*t.canvasWidth/(t.view2.height*t.canvasHeight))("near",1)("far",1e4),se(4),Z("args",Le(89,iAe)),se(1),Z("scene",n)("viewPort",d_(90,MD,t.view3.left*t.canvasWidth,t.view3.bottom*t.canvasHeight,t.view3.width*t.canvasWidth,t.view3.height*t.canvasHeight))("scissor",l.viewPort)("scissorTest",!0)("clearColor",t.view3.background),se(2),Z("position",t.view3.eye)("up",t.view3.up)("fov",t.view3.fov)("aspect",t.view3.width*t.canvasWidth/(t.view3.height*t.canvasHeight))("near",1)("far",1e4)}},dependencies:[an,Es,Hn,gn,ro,Za,Ol,zu,Qu,Fc,jl,Hc,Gi,Ss],encapsulation:2,changeDetection:0});let XG=(()=>{class i{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return i.\u0275fac=function(t){return new(t||i)(P(ul),P(zt))},i.\u0275dir=Oe({type:i}),i})(),rh=(()=>{class i extends XG{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=ce(i)))(n||i)}}(),i.\u0275dir=Oe({type:i,features:[W]}),i})();const co=new je("NgValueAccessor"),nAe={provide:co,useExisting:le(()=>ED),multi:!0};let ED=(()=>{class i extends rh{writeValue(t){this.setProperty("checked",t)}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=ce(i)))(n||i)}}(),i.\u0275dir=Oe({type:i,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,n){1&t&&xt("change",function(s){return n.onChange(s.target.checked)})("blur",function(){return n.onTouched()})},features:[oe([nAe]),W]}),i})();const rAe={provide:co,useExisting:le(()=>AC),multi:!0},oAe=new je("CompositionEventMode");let AC=(()=>{class i extends XG{constructor(t,n,r){super(t,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function sAe(){const i=Ea()?Ea().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return i.\u0275fac=function(t){return new(t||i)(P(ul),P(zt),P(oAe,8))},i.\u0275dir=Oe({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,n){1&t&&xt("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[oe([rAe]),W]}),i})();const qr=new je("NgValidators"),sd=new je("NgAsyncValidators");function sH(i){return null!=i}function oH(i){return n_(i)?En(i):i}function aH(i){let e={};return i.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function lH(i,e){return e.map(t=>t(i))}function cH(i){return i.map(e=>function cAe(i){return!i.validate}(e)?e:t=>e.validate(t))}function SD(i){return null!=i?function dH(i){if(!i)return null;const e=i.filter(sH);return 0==e.length?null:function(t){return aH(lH(t,e))}}(cH(i)):null}function TD(i){return null!=i?function uH(i){if(!i)return null;const e=i.filter(sH);return 0==e.length?null:function(t){return yV(lH(t,e).map(oH)).pipe(wt(aH))}}(cH(i)):null}function hH(i,e){return null===i?[e]:Array.isArray(i)?[...i,e]:[i,e]}function RD(i){return i?Array.isArray(i)?i:[i]:[]}function xC(i,e){return Array.isArray(i)?i.includes(e):i===e}function mH(i,e){const t=RD(e);return RD(i).forEach(r=>{xC(t,r)||t.push(r)}),t}function gH(i,e){return RD(e).filter(t=>!xC(i,t))}class _H{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=SD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=TD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ds extends _H{get formDirective(){return null}get path(){return null}}class od extends _H{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class bH{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ID=(()=>{class i extends bH{constructor(t){super(t)}}return i.\u0275fac=function(t){return new(t||i)(P(od,2))},i.\u0275dir=Oe({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,n){2&t&&Mi("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[W]}),i})();const D0="VALID",CC="INVALID",_g="PENDING",P0="DISABLED";function MC(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}class xH{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===D0}get invalid(){return this.status===CC}get pending(){return this.status==_g}get disabled(){return this.status===P0}get enabled(){return this.status!==P0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(mH(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(mH(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(gH(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(gH(e,this._rawAsyncValidators))}hasValidator(e){return xC(this._rawValidators,e)}hasAsyncValidator(e){return xC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=_g,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=P0,this.errors=null,this._forEachChild(n=>{n.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(n=>n(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=D0,this._forEachChild(n=>{n.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===D0||this.status===_g)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?P0:D0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=_g,this._hasOwnPendingAsyncValidator=!0;const t=oH(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((n,r)=>n&&n._find(r),this)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new St,this.statusChanges=new St}_calculateStatus(){return this._allControlsDisabled()?P0:this.errors?CC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_g)?_g:this._anyControlsHaveStatus(CC)?CC:D0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){MC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function _Ae(i){return Array.isArray(i)?SD(i):i||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function bAe(i){return Array.isArray(i)?TD(i):i||null}(this._rawAsyncValidators)}}const k0=new je("CallSetDisabledState",{providedIn:"root",factory:()=>OD}),OD="always";function L0(i,e,t=OD){(function ND(i,e){const t=function fH(i){return i._rawValidators}(i);null!==e.validator?i.setValidators(hH(t,e.validator)):"function"==typeof t&&i.setValidators([t]);const n=function pH(i){return i._rawAsyncValidators}(i);null!==e.asyncValidator?i.setAsyncValidators(hH(n,e.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();TC(e._rawValidators,r),TC(e._rawAsyncValidators,r)})(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(i.disabled),function yAe(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&wH(i,e)})}(i,e),function wAe(i,e){const t=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}(i,e),function xAe(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&wH(i,e),"submit"!==i.updateOn&&i.markAsTouched()})}(i,e),function AAe(i,e){if(e.valueAccessor.setDisabledState){const t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}(i,e)}function TC(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function wH(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function EH(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}function SH(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const TH=class extends xH{constructor(e=null,t,n){super(function LD(i){return(MC(i)?i.validators:i)||null}(t),function BD(i,e){return(MC(e)?e.asyncValidators:i)||null}(n,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),MC(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=SH(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){EH(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){EH(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){SH(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},DAe={provide:od,useExisting:le(()=>IC)},DH=(()=>Promise.resolve())();let IC=(()=>{class i extends od{constructor(t,n,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new TH,this._registered=!1,this.update=new St,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=function VD(i,e){if(!e)return null;let t,n,r;return Array.isArray(e),e.forEach(s=>{s.constructor===AC?t=s:function EAe(i){return Object.getPrototypeOf(i.constructor)===rh}(s)?n=s:r=s}),r||n||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function UD(i,e){if(!i.hasOwnProperty("model"))return!1;const t=i.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){L0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){DH.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const n=t.isDisabled.currentValue,r=0!==n&&Jh(n);DH.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function EC(i,e){return[...e.path,i]}(t,this._parent):[t]}}return i.\u0275fac=function(t){return new(t||i)(P(ds,9),P(qr,10),P(sd,10),P(co,10),P(er,8),P(k0,8))},i.\u0275dir=Oe({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[oe([DAe]),W,Sr]}),i})(),kH=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({}),i})();const FAe={provide:co,useExisting:le(()=>GD),multi:!0};let GD=(()=>{class i extends rh{writeValue(t){this.setProperty("value",parseFloat(t))}registerOnChange(t){this.onChange=n=>{t(""==n?null:parseFloat(n))}}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=ce(i)))(n||i)}}(),i.\u0275dir=Oe({type:i,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,n){1&t&&xt("change",function(s){return n.onChange(s.target.value)})("input",function(s){return n.onChange(s.target.value)})("blur",function(){return n.onTouched()})},features:[oe([FAe]),W]}),i})();const zAe={provide:co,useExisting:le(()=>DC),multi:!0};function jH(i,e){return null==i?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${i}: ${e}`.slice(0,50))}let DC=(()=>{class i extends rh{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=jH(this._getOptionId(t),t);this.setProperty("value",r)}registerOnChange(t){this.onChange=n=>{this.value=this._getOptionValue(n),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const n of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(n),t))return n;return null}_getOptionValue(t){const n=function GAe(i){return i.split(":")[0]}(t);return this._optionMap.has(n)?this._optionMap.get(n):t}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=ce(i)))(n||i)}}(),i.\u0275dir=Oe({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,n){1&t&&xt("change",function(s){return n.onChange(s.target.value)})("blur",function(){return n.onTouched()})},inputs:{compareWith:"compareWith"},features:[oe([zAe]),W]}),i})(),UH=(()=>{class i{constructor(t,n,r){this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(jH(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(ul),P(DC,9))},i.\u0275dir=Oe({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),i})();const HAe={provide:co,useExisting:le(()=>qD),multi:!0};function VH(i,e){return null==i?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${i}: ${e}`.slice(0,50))}let qD=(()=>{class i extends rh{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let n;if(this.value=t,Array.isArray(t)){const r=t.map(s=>this._getOptionId(s));n=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else n=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(t){this.onChange=n=>{const r=[],s=n.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const c=this._getOptionValue(o[a].value);r.push(c)}}else{const o=n.options;for(let a=0;a<o.length;a++){const l=o[a];if(l.selected){const c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,t(r)}}_registerOption(t){const n=(this._idCounter++).toString();return this._optionMap.set(n,t),n}_getOptionId(t){for(const n of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(n)._value,t))return n;return null}_getOptionValue(t){const n=function QAe(i){return i.split(":")[0]}(t);return this._optionMap.has(n)?this._optionMap.get(n)._value:t}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=ce(i)))(n||i)}}(),i.\u0275dir=Oe({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,n){1&t&&xt("change",function(s){return n.onChange(s.target)})("blur",function(){return n.onTouched()})},inputs:{compareWith:"compareWith"},features:[oe([HAe]),W]}),i})(),zH=(()=>{class i{constructor(t,n,r){this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(VH(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(VH(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(ul),P(qD,9))},i.\u0275dir=Oe({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),i})(),eye=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[kH]}),i})(),iye=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:k0,useValue:t.callSetDisabledState??OD}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[eye]}),i})();function nye(i,e){1&i&&Ye(0,"th-orbitControls")}function rye(i,e){1&i&&Ye(0,"th-mapControls")}function sye(i,e){1&i&&Ye(0,"th-arcballControls")}function oye(i,e){1&i&&Ye(0,"th-transformControls",17),2&i&&(vi(),Z("object",Qt(26).objRef))}const aye=function(i){return[i]},lye=function(i,e,t){return[i,e,t]};function cye(i,e){if(1&i&&Ye(0,"th-dragControls",10),2&i){vi();const t=Qt(26),n=Qt(30),r=Qt(22);Z("args",Sd(3,lye,li(1,aye,t.objRef),n.objRef,null==r.rendererCanvas?null:r.rendererCanvas.nativeElement))}}function dye(i,e){1&i&&Ye(0,"th-flyControls")}function uye(i,e){1&i&&Ye(0,"th-trackballControls")}function hye(i,e){1&i&&Ye(0,"th-firstPersonControls")}const fye=function(){return[2,2,2]},pye=function(){return[1,1,1]},mye=function(){return[10,10]},$H=function(){return[10,10,10]},gye=function(){return[45,2,.1,100]},_ye=function(){return[0,0,0]};class F0{constructor(){this.controlType="orbit",this.renderOnDemand=!0,this.selected=!1,this.glbPath=`${ca}DamagedHelmet.glb`}}F0.\u0275fac=function(e){return new(e||F0)},F0.\u0275cmp=K({type:F0,selectors:[["app-on-demand-example"]],decls:39,vars:27,consts:[[1,"control-panel"],["id","ondemand","type","checkbox",3,"ngModel","ngModelChange"],["for","ondemand"],[1,"form-control",3,"ngModel","ngModelChange"],[1,"works-on-demand"],[1,"needs-loop"],[3,"thStats","renderOnDemand"],["canvas",""],["loadGLTF","",3,"url","scale","onClick"],["model",""],[3,"args"],[3,"position"],[3,"ngSwitch","args","position","lookAt"],["camera",""],[4,"ngSwitchCase"],[3,"object",4,"ngSwitchCase"],[3,"args",4,"ngSwitchCase"],[3,"object"]],template:function(e,t){1&e&&(ye(0,"div",0)(1,"input",1),xt("ngModelChange",function(r){return t.renderOnDemand=r}),ke(),ye(2,"label",2),Xi(3,"Render On-Demand"),ke(),ye(4,"select",3),xt("ngModelChange",function(r){return t.controlType=r}),ye(5,"option",4),Xi(6,"orbit"),ke(),ye(7,"option",4),Xi(8,"map"),ke(),ye(9,"option",4),Xi(10,"arcball"),ke(),ye(11,"option",4),Xi(12,"transform"),ke(),ye(13,"option",4),Xi(14,"drag"),ke(),ye(15,"option",5),Xi(16,"fly"),ke(),ye(17,"option",5),Xi(18,"trackball"),ke(),ye(19,"option",5),Xi(20,"firstpersion"),ke()()(),ye(21,"th-canvas",6,7)(23,"th-scene"),Ye(24,"th-ambientLight"),ye(25,"th-object3D",8,9),xt("onClick",function(){return t.selected=!t.selected}),ke(),Ye(27,"th-gridHelper",10)(28,"th-pointLight",11),ye(29,"th-perspectiveCamera",12,13),Ft(31,nye,1,0,"th-orbitControls",14),Ft(32,rye,1,0,"th-mapControls",14),Ft(33,sye,1,0,"th-arcballControls",14),Ft(34,oye,1,1,"th-transformControls",15),Ft(35,cye,1,7,"th-dragControls",16),Ft(36,dye,1,0,"th-flyControls",14),Ft(37,uye,1,0,"th-trackballControls",14),Ft(38,hye,1,0,"th-firstPersonControls",14),ke()()()),2&e&&(se(1),Z("ngModel",t.renderOnDemand),se(3),Z("ngModel",t.controlType),se(17),Z("thStats",!0)("renderOnDemand",t.renderOnDemand),se(4),Z("url",t.glbPath)("scale",t.selected?Le(20,fye):Le(21,pye)),se(2),Z("args",Le(22,mye)),se(1),Z("position",Le(23,$H)),se(1),Z("ngSwitch",t.controlType)("args",Le(24,gye))("position",Le(25,$H))("lookAt",Le(26,_ye)),se(2),Z("ngSwitchCase","orbit"),se(1),Z("ngSwitchCase","map"),se(1),Z("ngSwitchCase","arcball"),se(1),Z("ngSwitchCase","transform"),se(1),Z("ngSwitchCase","drag"),se(1),Z("ngSwitchCase","fly"),se(1),Z("ngSwitchCase","trackball"),se(1),Z("ngSwitchCase","firstpersion"))},dependencies:[EA,a3,ku,Lu,Uu,Gu,Hu,ls,Xu,nh,an,Ke,io,ao,Ar,gn,Gi,ko,Ga,Au,Io,UH,zH,ED,DC,ID,IC],styles:[".needs-loop[_ngcontent-%COMP%]{color:red}.works-on-demand[_ngcontent-%COMP%]{color:green}.control-panel[_ngcontent-%COMP%]{display:flex;gap:1em;margin:1em}"],changeDetection:0});class Ja{constructor(e,t,n,r,s="div"){this.parent=e,this.object=t,this.property=n,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),Ja.nextNameID=Ja.nextNameID||0,this.$name.id="lil-gui-name-"+ ++Ja.nextNameID,this.$widget=document.createElement(s),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(n)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),void 0!==this._onChange&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),void 0!==this._onFinishChange&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled||(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e)),this}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){const t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,void 0!==this._listenCallbackID&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class bye extends Ja{constructor(e,t,n){super(e,t,n,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function XD(i){let e,t;return(e=i.match(/(#|0x)?([a-f0-9]{6})/i))?t=e[2]:(e=i.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?t=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=i.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(t=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),!!t&&"#"+t}const vye={isPrimitive:!0,match:i=>"string"==typeof i,fromHexString:XD,toHexString:XD},O0={isPrimitive:!0,match:i=>"number"==typeof i,fromHexString:i=>parseInt(i.substring(1),16),toHexString:i=>"#"+i.toString(16).padStart(6,0)},Aye={isPrimitive:!1,match:Array.isArray,fromHexString(i,e,t=1){const n=O0.fromHexString(i);e[0]=(n>>16&255)/255*t,e[1]=(n>>8&255)/255*t,e[2]=(255&n)/255*t},toHexString:([i,e,t],n=1)=>O0.toHexString(i*(n=255/n)<<16^e*n<<8^t*n<<0)},yye=[vye,O0,Aye,{isPrimitive:!1,match:i=>Object(i)===i,fromHexString(i,e,t=1){const n=O0.fromHexString(i);e.r=(n>>16&255)/255*t,e.g=(n>>8&255)/255*t,e.b=(255&n)/255*t},toHexString:({r:i,g:e,b:t},n=1)=>O0.toHexString(i*(n=255/n)<<16^e*n<<8^t*n<<0)}];class wye extends Ja{constructor(e,t,n,r){super(e,t,n,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=function xye(i){return yye.find(e=>e.match(i))}(this.initialValue),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const s=XD(this.$text.value);s&&this._setValueFromHexString(s)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class ZD extends Ja{constructor(e,t,n){super(e,t,n,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",r=>{r.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class Cye extends Ja{constructor(e,t,n,r,s,o){super(e,t,n,"number"),this._initInput(),this.min(r),this.max(s);const a=void 0!==o;this.step(a?o:this._getImplicitStep(),a),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=100*t+"%"}return this._inputFocused||(this.$input.value=void 0===this._decimals?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const t=p=>{const v=parseFloat(this.$input.value);isNaN(v)||(this._snapClampSetValue(v+p),this.$input.value=this.getValue())};let o,a,l,c,d,s=!1;const f=p=>{if(s){const v=p.clientX-o;Math.abs(p.clientY-a)>5?(p.preventDefault(),this.$input.blur(),s=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(v)>5&&m()}s||(d-=(p.clientY-l)*this._step*this._arrowKeyMultiplier(p),c+d>this._max?d=this._max-c:c+d<this._min&&(d=this._min-c),this._snapClampSetValue(c+d)),l=p.clientY},m=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",m)};this.$input.addEventListener("input",()=>{let p=parseFloat(this.$input.value);isNaN(p)||(this._stepExplicit&&(p=this._snap(p)),this.setValue(this._clamp(p)))}),this.$input.addEventListener("keydown",p=>{"Enter"===p.code&&this.$input.blur(),"ArrowUp"===p.code&&(p.preventDefault(),t(this._step*this._arrowKeyMultiplier(p))),"ArrowDown"===p.code&&(p.preventDefault(),t(this._step*this._arrowKeyMultiplier(p)*-1))}),this.$input.addEventListener("wheel",p=>{this._inputFocused&&(p.preventDefault(),t(this._step*this._normalizeMouseWheel(p)))},{passive:!1}),this.$input.addEventListener("mousedown",p=>{o=p.clientX,a=l=p.clientY,s=!0,c=this.getValue(),d=0,window.addEventListener("mousemove",f),window.addEventListener("mouseup",m)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const t=p=>{const v=this.$slider.getBoundingClientRect();let b=((p,v,b,y,x)=>(p-v)/(b-v)*(this._max-y)+y)(p,v.left,v.right,this._min);this._snapClampSetValue(b)},r=p=>{t(p.clientX)},s=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",s)};let a,l,o=!1;const c=p=>{p.preventDefault(),this._setDraggingStyle(!0),t(p.touches[0].clientX),o=!1},u=p=>{if(o){const b=p.touches[0].clientY-l;Math.abs(p.touches[0].clientX-a)>Math.abs(b)?c(p):(window.removeEventListener("touchmove",u),window.removeEventListener("touchend",h))}else p.preventDefault(),t(p.touches[0].clientX)},h=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",u),window.removeEventListener("touchend",h)},f=this._callOnFinishChange.bind(this);let g;this.$slider.addEventListener("mousedown",p=>{this._setDraggingStyle(!0),t(p.clientX),window.addEventListener("mousemove",r),window.addEventListener("mouseup",s)}),this.$slider.addEventListener("touchstart",p=>{p.touches.length>1||(this._hasScrollBar?(a=p.touches[0].clientX,l=p.touches[0].clientY,o=!0):c(p),window.addEventListener("touchmove",u,{passive:!1}),window.addEventListener("touchend",h))},{passive:!1}),this.$slider.addEventListener("wheel",p=>{if(Math.abs(p.deltaX)<Math.abs(p.deltaY)&&this._hasScrollBar)return;p.preventDefault();const b=this._normalizeMouseWheel(p)*this._step;this._snapClampSetValue(this.getValue()+b),this.$input.value=this.getValue(),clearTimeout(g),g=setTimeout(f,400)},{passive:!1})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle(`lil-gui-${t}`,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:n}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,n=-e.wheelDelta/120,n*=this._stepExplicit?1:10),t+-n}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){const t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return void 0!==this._min}get _hasMax(){return void 0!==this._max}}class Mye extends Ja{constructor(e,t,n,r){super(e,t,n,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach(s=>{const o=document.createElement("option");o.innerHTML=s,this.$select.appendChild(o)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=-1===t?e:this._names[t],this}}class Eye extends Ja{constructor(e,t,n){super(e,t,n,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",r=>{"Enter"===r.code&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let JH=!1;class KD{constructor({parent:e,autoPlace:t=void 0===e,container:n,width:r,title:s="Controls",injectStyles:o=!0,touchStyles:a=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",l=>{("Enter"===l.code||"Space"===l.code)&&(l.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(s),a&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!JH&&o&&(function Tye(i){const e=document.createElement("style");e.innerHTML=i;const t=document.querySelector("head link[rel=stylesheet], head style");t?document.head.insertBefore(e,t):document.head.appendChild(e)}('.lil-gui {\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  line-height: 1;\n  font-weight: normal;\n  font-style: normal;\n  text-align: left;\n  background-color: var(--background-color);\n  color: var(--text-color);\n  user-select: none;\n  -webkit-user-select: none;\n  touch-action: manipulation;\n  --background-color: #1f1f1f;\n  --text-color: #ebebeb;\n  --title-background-color: #111111;\n  --title-text-color: #ebebeb;\n  --widget-color: #424242;\n  --hover-color: #4f4f4f;\n  --focus-color: #595959;\n  --number-color: #2cc9ff;\n  --string-color: #a2db3c;\n  --font-size: 11px;\n  --input-font-size: 11px;\n  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;\n  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;\n  --padding: 4px;\n  --spacing: 4px;\n  --widget-height: 20px;\n  --name-width: 45%;\n  --slider-knob-width: 2px;\n  --slider-input-width: 27%;\n  --color-input-width: 27%;\n  --slider-input-min-width: 45px;\n  --color-input-min-width: 45px;\n  --folder-indent: 7px;\n  --widget-padding: 0 0 0 3px;\n  --widget-border-radius: 2px;\n  --checkbox-size: calc(0.75 * var(--widget-height));\n  --scrollbar-width: 5px;\n}\n.lil-gui, .lil-gui * {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n.lil-gui.root {\n  width: var(--width, 245px);\n  display: flex;\n  flex-direction: column;\n}\n.lil-gui.root > .title {\n  background: var(--title-background-color);\n  color: var(--title-text-color);\n}\n.lil-gui.root > .children {\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.lil-gui.root > .children::-webkit-scrollbar {\n  width: var(--scrollbar-width);\n  height: var(--scrollbar-width);\n  background: var(--background-color);\n}\n.lil-gui.root > .children::-webkit-scrollbar-thumb {\n  border-radius: var(--scrollbar-width);\n  background: var(--focus-color);\n}\n@media (pointer: coarse) {\n  .lil-gui.allow-touch-styles {\n    --widget-height: 28px;\n    --padding: 6px;\n    --spacing: 6px;\n    --font-size: 13px;\n    --input-font-size: 16px;\n    --folder-indent: 10px;\n    --scrollbar-width: 7px;\n    --slider-input-min-width: 50px;\n    --color-input-min-width: 65px;\n  }\n}\n.lil-gui.force-touch-styles {\n  --widget-height: 28px;\n  --padding: 6px;\n  --spacing: 6px;\n  --font-size: 13px;\n  --input-font-size: 16px;\n  --folder-indent: 10px;\n  --scrollbar-width: 7px;\n  --slider-input-min-width: 50px;\n  --color-input-min-width: 65px;\n}\n.lil-gui.autoPlace {\n  max-height: 100%;\n  position: fixed;\n  top: 0;\n  right: 15px;\n  z-index: 1001;\n}\n\n.lil-gui .controller {\n  display: flex;\n  align-items: center;\n  padding: 0 var(--padding);\n  margin: var(--spacing) 0;\n}\n.lil-gui .controller.disabled {\n  opacity: 0.5;\n}\n.lil-gui .controller.disabled, .lil-gui .controller.disabled * {\n  pointer-events: none !important;\n}\n.lil-gui .controller > .name {\n  min-width: var(--name-width);\n  flex-shrink: 0;\n  white-space: pre;\n  padding-right: var(--spacing);\n  line-height: var(--widget-height);\n}\n.lil-gui .controller .widget {\n  position: relative;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  min-height: var(--widget-height);\n}\n.lil-gui .controller.string input {\n  color: var(--string-color);\n}\n.lil-gui .controller.boolean .widget {\n  cursor: pointer;\n}\n.lil-gui .controller.color .display {\n  width: 100%;\n  height: var(--widget-height);\n  border-radius: var(--widget-border-radius);\n  position: relative;\n}\n@media (hover: hover) {\n  .lil-gui .controller.color .display:hover:before {\n    content: " ";\n    display: block;\n    position: absolute;\n    border-radius: var(--widget-border-radius);\n    border: 1px solid #fff9;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n}\n.lil-gui .controller.color input[type=color] {\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n}\n.lil-gui .controller.color input[type=text] {\n  margin-left: var(--spacing);\n  font-family: var(--font-family-mono);\n  min-width: var(--color-input-min-width);\n  width: var(--color-input-width);\n  flex-shrink: 0;\n}\n.lil-gui .controller.option select {\n  opacity: 0;\n  position: absolute;\n  width: 100%;\n  max-width: 100%;\n}\n.lil-gui .controller.option .display {\n  position: relative;\n  pointer-events: none;\n  border-radius: var(--widget-border-radius);\n  height: var(--widget-height);\n  line-height: var(--widget-height);\n  max-width: 100%;\n  overflow: hidden;\n  word-break: break-all;\n  padding-left: 0.55em;\n  padding-right: 1.75em;\n  background: var(--widget-color);\n}\n@media (hover: hover) {\n  .lil-gui .controller.option .display.focus {\n    background: var(--focus-color);\n  }\n}\n.lil-gui .controller.option .display.active {\n  background: var(--focus-color);\n}\n.lil-gui .controller.option .display:after {\n  font-family: "lil-gui";\n  content: "\u2195";\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  padding-right: 0.375em;\n}\n.lil-gui .controller.option .widget,\n.lil-gui .controller.option select {\n  cursor: pointer;\n}\n@media (hover: hover) {\n  .lil-gui .controller.option .widget:hover .display {\n    background: var(--hover-color);\n  }\n}\n.lil-gui .controller.number input {\n  color: var(--number-color);\n}\n.lil-gui .controller.number.hasSlider input {\n  margin-left: var(--spacing);\n  width: var(--slider-input-width);\n  min-width: var(--slider-input-min-width);\n  flex-shrink: 0;\n}\n.lil-gui .controller.number .slider {\n  width: 100%;\n  height: var(--widget-height);\n  background-color: var(--widget-color);\n  border-radius: var(--widget-border-radius);\n  padding-right: var(--slider-knob-width);\n  overflow: hidden;\n  cursor: ew-resize;\n  touch-action: pan-y;\n}\n@media (hover: hover) {\n  .lil-gui .controller.number .slider:hover {\n    background-color: var(--hover-color);\n  }\n}\n.lil-gui .controller.number .slider.active {\n  background-color: var(--focus-color);\n}\n.lil-gui .controller.number .slider.active .fill {\n  opacity: 0.95;\n}\n.lil-gui .controller.number .fill {\n  height: 100%;\n  border-right: var(--slider-knob-width) solid var(--number-color);\n  box-sizing: content-box;\n}\n\n.lil-gui-dragging .lil-gui {\n  --hover-color: var(--widget-color);\n}\n.lil-gui-dragging * {\n  cursor: ew-resize !important;\n}\n\n.lil-gui-dragging.lil-gui-vertical * {\n  cursor: ns-resize !important;\n}\n\n.lil-gui .title {\n  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);\n  height: var(--title-height);\n  line-height: calc(var(--title-height) - 4px);\n  font-weight: 600;\n  padding: 0 var(--padding);\n  -webkit-tap-highlight-color: transparent;\n  cursor: pointer;\n  outline: none;\n  text-decoration-skip: objects;\n}\n.lil-gui .title:before {\n  font-family: "lil-gui";\n  content: "\u25be";\n  padding-right: 2px;\n  display: inline-block;\n}\n.lil-gui .title:active {\n  background: var(--title-background-color);\n  opacity: 0.75;\n}\n@media (hover: hover) {\n  body:not(.lil-gui-dragging) .lil-gui .title:hover {\n    background: var(--title-background-color);\n    opacity: 0.85;\n  }\n  .lil-gui .title:focus {\n    text-decoration: underline var(--focus-color);\n  }\n}\n.lil-gui.root > .title:focus {\n  text-decoration: none !important;\n}\n.lil-gui.closed > .title:before {\n  content: "\u25b8";\n}\n.lil-gui.closed > .children {\n  transform: translateY(-7px);\n  opacity: 0;\n}\n.lil-gui.closed:not(.transition) > .children {\n  display: none;\n}\n.lil-gui.transition > .children {\n  transition-duration: 300ms;\n  transition-property: height, opacity, transform;\n  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);\n  overflow: hidden;\n  pointer-events: none;\n}\n.lil-gui .children:empty:before {\n  content: "Empty";\n  padding: 0 var(--padding);\n  margin: var(--spacing) 0;\n  display: block;\n  height: var(--widget-height);\n  font-style: italic;\n  line-height: var(--widget-height);\n  opacity: 0.5;\n}\n.lil-gui.root > .children > .lil-gui > .title {\n  border: 0 solid var(--widget-color);\n  border-width: 1px 0;\n  transition: border-color 300ms;\n}\n.lil-gui.root > .children > .lil-gui.closed > .title {\n  border-bottom-color: transparent;\n}\n.lil-gui + .controller {\n  border-top: 1px solid var(--widget-color);\n  margin-top: 0;\n  padding-top: var(--spacing);\n}\n.lil-gui .lil-gui .lil-gui > .title {\n  border: none;\n}\n.lil-gui .lil-gui .lil-gui > .children {\n  border: none;\n  margin-left: var(--folder-indent);\n  border-left: 2px solid var(--widget-color);\n}\n.lil-gui .lil-gui .controller {\n  border: none;\n}\n\n.lil-gui input {\n  -webkit-tap-highlight-color: transparent;\n  border: 0;\n  outline: none;\n  font-family: var(--font-family);\n  font-size: var(--input-font-size);\n  border-radius: var(--widget-border-radius);\n  height: var(--widget-height);\n  background: var(--widget-color);\n  color: var(--text-color);\n  width: 100%;\n}\n@media (hover: hover) {\n  .lil-gui input:hover {\n    background: var(--hover-color);\n  }\n  .lil-gui input:active {\n    background: var(--focus-color);\n  }\n}\n.lil-gui input:disabled {\n  opacity: 1;\n}\n.lil-gui input[type=text],\n.lil-gui input[type=number] {\n  padding: var(--widget-padding);\n}\n.lil-gui input[type=text]:focus,\n.lil-gui input[type=number]:focus {\n  background: var(--focus-color);\n}\n.lil-gui input::-webkit-outer-spin-button,\n.lil-gui input::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n.lil-gui input[type=number] {\n  -moz-appearance: textfield;\n}\n.lil-gui input[type=checkbox] {\n  appearance: none;\n  -webkit-appearance: none;\n  height: var(--checkbox-size);\n  width: var(--checkbox-size);\n  border-radius: var(--widget-border-radius);\n  text-align: center;\n  cursor: pointer;\n}\n.lil-gui input[type=checkbox]:checked:before {\n  font-family: "lil-gui";\n  content: "\u2713";\n  font-size: var(--checkbox-size);\n  line-height: var(--checkbox-size);\n}\n@media (hover: hover) {\n  .lil-gui input[type=checkbox]:focus {\n    box-shadow: inset 0 0 0 1px var(--focus-color);\n  }\n}\n.lil-gui button {\n  -webkit-tap-highlight-color: transparent;\n  outline: none;\n  cursor: pointer;\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  color: var(--text-color);\n  width: 100%;\n  height: var(--widget-height);\n  text-transform: none;\n  background: var(--widget-color);\n  border-radius: var(--widget-border-radius);\n  border: 1px solid var(--widget-color);\n  text-align: center;\n  line-height: calc(var(--widget-height) - 4px);\n}\n@media (hover: hover) {\n  .lil-gui button:hover {\n    background: var(--hover-color);\n    border-color: var(--hover-color);\n  }\n  .lil-gui button:focus {\n    border-color: var(--focus-color);\n  }\n}\n.lil-gui button:active {\n  background: var(--focus-color);\n}\n\n@font-face {\n  font-family: "lil-gui";\n  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");\n}'),JH=!0),n?n.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this.domElement.addEventListener("keydown",l=>l.stopPropagation()),this.domElement.addEventListener("keyup",l=>l.stopPropagation())}add(e,t,n,r,s){if(Object(n)===n)return new Mye(this,e,t,n);const o=e[t];switch(typeof o){case"number":return new Cye(this,e,t,n,r,s);case"boolean":return new bye(this,e,t);case"string":return new Eye(this,e,t);case"function":return new ZD(this,e,t)}console.error("gui.add failed\n\tproperty:",t,"\n\tobject:",e,"\n\tvalue:",o)}addColor(e,t,n=1){return new wye(this,e,t,n)}addFolder(e){return new KD({parent:this,title:e})}load(e,t=!0){return e.controllers&&this.controllers.forEach(n=>{n instanceof ZD||n._name in e.controllers&&n.load(e.controllers[n._name])}),t&&e.folders&&this.folders.forEach(n=>{n._title in e.folders&&n.load(e.folders[n._title])}),this}save(e=!0){const t={controllers:{},folders:{}};return this.controllers.forEach(n=>{if(!(n instanceof ZD)){if(n._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${n._name}"`);t.controllers[n._name]=n.save()}}),e&&this.folders.forEach(n=>{if(n._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${n._title}"`);t.folders[n._title]=n.save()}),t}open(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{this.$children.style.height=this.$children.clientHeight+"px",this.domElement.classList.add("transition");const n=s=>{s.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",n))};this.$children.addEventListener("transitionend",n);const r=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=r+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(n=>n.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),void 0!==this._onChange&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),void 0!==this._onFinishChange&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(t=>{e=e.concat(t.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(t=>{e=e.concat(t.foldersRecursive())}),e}}const Rye=KD,Iye=["outlinePass"],$D=function(i,e,t){return[i,e,t]};function Dye(i,e){if(1&i){const t=Vs();ye(0,"th-mesh",14),xt("onMouseEnter",function(r){return lr(t),cr(vi().onHover(r))})("onMouseExit",function(){return lr(t),cr(vi().onBlur())})("onPointerDown",function(r){return lr(t),cr(vi().onPointerDown(r))}),Ye(1,"th-meshPhongMaterial",15),ke()}if(2&i){const t=e.$implicit;vi(),Z("geometry",Qt(11).objRef)("position",Sd(7,$D,t.x,t.y,t.z))("scale",Sd(11,$D,t.scale,t.scale,t.scale))("receiveShadow",!0)("castShadow",!0),se(1),Z("flatShading",!0)("color",t.color)}}const Pye=function(){return["#ffffff"]},kye=function(){return[0,0,8]},Lye=function(){return["#aaaaaa"]},Bye=function(){return["#ddffdd"]},Fye=function(){return[3,48,24]};class N0{constructor(e){this.elem=e,this.outlinePassResolution=new pe(window.innerWidth,window.innerHeight),this.meshData=[],this.visibleEdgeColor="#ffffff",this.hiddenEdgeColor="#190a05",this.edgeStrength=3,this.edgeGlow=.5,this.edgeThickness=1,this.pulsePeriod=1,this.initGUI(),this.initMeshData()}initGUI(){const e=new Rye({title:"Settings",injectStyles:!0,container:this.elem.nativeElement,autoPlace:!0});e.add(this,"edgeStrength",.01,10),e.add(this,"edgeGlow",0,2),e.add(this,"edgeThickness",1,4),e.add(this,"pulsePeriod",0,5),e.addColor(this,"visibleEdgeColor"),e.addColor(this,"hiddenEdgeColor")}ngOnInit(){this.outlinePassResolution=new pe(window.innerWidth,window.innerHeight),this.outlinePass&&(this.outlinePass.resolution=this.outlinePassResolution)}initMeshData(){for(let e=0;e<20;e++)this.meshData.push({color:(new Be).setHSL(Math.random(),1,.3),x:4*Math.random()-2,y:4*Math.random()-2,z:4*Math.random()-2,scale:.3*Math.random()+.1})}onHover(e){e.component.objRef&&(this.outlinePass.selectedObjects=[e.component.objRef])}onBlur(){this.outlinePass.selectedObjects=[]}onPointerDown(e){e.component.material?.color.set("#ff0000")}}N0.\u0275fac=function(e){return new(e||N0)(P(zt))},N0.\u0275cmp=K({type:N0,selectors:[["app-outline-pass-events-example"]],viewQuery:function(e,t){if(1&e&&ki(Iye,7),2&e){let n;kt(n=Lt())&&(t.outlinePass=n.first)}},decls:19,vars:32,consts:[[3,"shadow","thStats"],["thecanvas",""],[3,"background"],["scene",""],[3,"position","fov","near","far"],["camera",""],[3,"color"],[3,"color","intensity"],["light",""],[3,"args"],["geometry",""],[3,"geometry","position","scale","receiveShadow","castShadow","onMouseEnter","onMouseExit","onPointerDown",4,"ngFor","ngForOf"],[3,"args","visibleEdgeColor","hiddenEdgeColor","edgeStrength","edgeGlow","edgeThickness","pulsePeriod"],["outlinePass",""],[3,"geometry","position","scale","receiveShadow","castShadow","onMouseEnter","onMouseExit","onPointerDown"],[3,"flatShading","color"]],template:function(e,t){if(1&e&&(ye(0,"th-canvas",0,1)(2,"th-scene",2,3)(4,"th-perspectiveCamera",4,5),Ye(6,"th-orbitControls"),ke(),Ye(7,"th-ambientLight",6)(8,"th-directionalLight",7,8)(10,"th-sphereGeometry",9,10),Ft(12,Dye,2,15,"th-mesh",11),ke(),ye(13,"th-effectComposer"),Ye(14,"th-renderPass")(15,"th-outlinePass",12,13),hr(17,"color"),hr(18,"color"),ke()()),2&e){const n=Qt(3),r=Qt(5);Z("shadow",!0)("thStats",!0),se(2),Z("background",Le(23,Pye)),se(2),Z("position",Le(24,kye))("fov",45)("near",.1)("far",100),se(3),Z("color",Le(25,Lye)),se(1),Z("color",Le(26,Bye))("intensity",.6),se(2),Z("args",Le(27,Fye)),se(2),Z("ngForOf",t.meshData),se(3),Z("args",Sd(28,$D,t.outlinePassResolution,n.objRef,r.objRef))("visibleEdgeColor",wr(17,19,t.visibleEdgeColor))("hiddenEdgeColor",wr(18,21,t.hiddenEdgeColor))("edgeStrength",t.edgeStrength)("edgeGlow",t.edgeGlow)("edgeThickness",t.edgeThickness)("pulsePeriod",t.pulsePeriod)}},dependencies:[$l,ls,an,Es,Ar,Hn,gn,ro,Za,Ol,Ku,Fc,Gi,Ga,Io,Qc],styles:["[_nghost-%COMP%]     .lil-gui{position:fixed;right:0;z-index:9999}"]});const Oye=["camera"],Nye=function(){return["#72645b",2,15]},jye=function(i){return[0,i,0]},e8=function(i){return[i,0,0]},Uye=function(){return[40,40]},Vye=function(){return{color:"#999999",specular:"#101010"}},zye=function(i){return[0,i,.3]},Gye=function(){return[.001,.001,.001]},Hye=function(){return{color:"#0055ff",flatShading:!0}},Qye=function(){return["#443333","#111122"]},Wye=function(){return[1,1,1]},qye=function(i){return[.5,1,i]},Yye=function(){return[35,2,1,15]};class j0{constructor(){this.Math=Math,this.cameraPosition=new R(3,.15,3),this.assetPath=`${ca}dolphins.ply`}onBeforeRender(){const e=5e-4*Date.now();this.camera&&(this.camera.position=new R(2.5*Math.sin(e),.15,2.5*Math.cos(e)),this.camera.lookAt=[0,.1,0])}}j0.\u0275fac=function(e){return new(e||j0)},j0.\u0275cmp=K({type:j0,selectors:[["app-plyloader-example"]],viewQuery:function(e,t){if(1&e&&ki(Oye,5),2&e){let n;kt(n=Lt())&&(t.camera=n.first)}},decls:17,vars:55,consts:[[3,"shadow","onRender"],[3,"background","fog"],[3,"position","rotation","receiveShadow"],[3,"args"],[3,"rotation","position","scale","castShadow","receiveShadow"],["loadPLY","",3,"url"],[3,"castShadow","position","color","intensity","receiveShadow"],["camera",""]],template:function(e,t){1&e&&(ye(0,"th-canvas",0),xt("onRender",function(){return t.onBeforeRender()}),ye(1,"th-scene",1),hr(2,"color"),hr(3,"fog"),ye(4,"th-mesh",2),Ye(5,"th-planeGeometry",3)(6,"th-meshPhongMaterial",3),ke(),ye(7,"th-mesh",4),Ye(8,"th-bufferGeometry",5)(9,"th-meshStandardMaterial",3),ke(),Ye(10,"th-hemisphereLight",3)(11,"th-directionalLight",6),hr(12,"color"),Ye(13,"th-directionalLight",6),hr(14,"color"),Ye(15,"th-perspectiveCamera",3,7),ke()()),2&e&&(Z("shadow",!0),se(1),Z("background",wr(2,29,"#72645b"))("fog",wr(3,31,Le(37,Nye))),se(3),Z("position",li(38,jye,-.5))("rotation",li(40,e8,-t.Math.PI/2))("receiveShadow",!0),se(1),Z("args",Le(42,Uye)),se(1),Z("args",Le(43,Vye)),se(1),Z("rotation",li(44,e8,-t.Math.PI/2))("position",li(46,zye,-.2))("scale",Le(48,Gye))("castShadow",!0)("receiveShadow",!0),se(1),Z("url",t.assetPath),se(1),Z("args",Le(49,Hye)),se(1),Z("args",Le(50,Qye)),se(1),Z("castShadow",!0)("position",Le(51,Wye))("color",wr(12,33,"#ffffff"))("intensity",1.35)("castShadow",!0)("receiveShadow",!0),se(2),Z("castShadow",!0)("position",li(52,qye,-1))("color",wr(14,35,"#ffaa00"))("intensity",1)("castShadow",!0)("receiveShadow",!0),se(2),Z("args",Le(54,Yye)))},dependencies:[an,Dl,Es,Hn,gn,Ul,ro,Tt,aa,Gi,A0,Qc,Ap],encapsulation:2,changeDetection:0});const Xye=["object"],Zye=["light"];function Kye(i,e){if(1&i&&(ye(0,"th-mesh",14),Ye(1,"th-meshPhongMaterial",15),ke()),2&i){const t=e.$implicit;vi(),Z("geometry",Qt(15).objRef)("position",t.pos)("rotation",t.rotation)("scale",t.scale),se(1),Z("flatShading",!0)("color",t.color)}}const $ye=function(i){return[i]},Jye=function(i){return{value:i}},exe=function(i){return{amount:i}},t8=function(){return["#ffffff"]},txe=function(i){return[0,0,i]},ixe=function(){return["#222222"]},nxe=function(){return[1,4,4]};class U0{constructor(){this.DotScreenShader=$I,this.RGBShiftShader=YG,this.shiftAmount=.0015,this.zDist=400,this.meshData=[],this.initMeshData()}ngOnInit(){this.light?.position?.set(1,1,1)}initMeshData(){for(let e=0;e<100;e++){const t=50*Math.random();this.meshData.push({pos:new R(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize().multiplyScalar(Math.random()*this.zDist),rotation:new Js(2*Math.random(),2*Math.random(),2*Math.random()),scale:new R(t,t,t),color:new Be(16777215*Math.random())})}}animate(){this.object?.objRef?.rotation&&(this.object.objRef.rotation.x+=.005,this.object.objRef.rotation.y+=.01)}}U0.\u0275fac=function(e){return new(e||U0)},U0.\u0275cmp=K({type:U0,selectors:[["app-post-processing-example"]],viewQuery:function(e,t){if(1&e&&(ki(Xye,7),ki(Zye,7)),2&e){let n;kt(n=Lt())&&(t.object=n.first),kt(n=Lt())&&(t.light=n.first)}},decls:19,vars:30,consts:[["for","shift"],["id","shift","type","range",3,"ngModel","min","max","step","ngModelChange"],[3,"shadow","thStats","onRender"],["thecanvas",""],[3,"strength"],[3,"args","uniforms"],[3,"background"],[3,"position","fov","near","far"],[3,"color"],["light",""],[3,"args"],["geometry",""],["object",""],[3,"geometry","position","rotation","scale",4,"ngFor","ngForOf"],[3,"geometry","position","rotation","scale"],[3,"flatShading","color"]],template:function(e,t){1&e&&(ye(0,"label",0),Xi(1,"Shift Amount"),ke(),ye(2,"input",1),xt("ngModelChange",function(r){return t.shiftAmount=r}),ke(),ye(3,"th-canvas",2,3),xt("onRender",function(){return t.animate()}),ye(5,"th-effectComposer"),Ye(6,"th-renderPass")(7,"th-unrealBloomPass",4)(8,"th-shaderPass",5),ke(),ye(9,"th-scene",6),Ye(10,"th-perspectiveCamera",7)(11,"th-ambientLight",8)(12,"th-directionalLight",8,9)(14,"th-sphereGeometry",10,11),ye(16,"th-object3D",null,12),Ft(18,Kye,2,6,"th-mesh",13),ke()()()),2&e&&(se(2),Z("ngModel",t.shiftAmount)("min",.0015)("max",.2)("step",.005),se(1),Z("shadow",!0)("thStats",!0),se(4),Z("strength",1),se(1),Z("args",li(18,$ye,t.RGBShiftShader))("uniforms",li(22,exe,li(20,Jye,t.shiftAmount))),se(1),Z("background",Le(24,t8)),se(1),Z("position",li(25,txe,t.zDist))("fov",70)("near",1)("far",1e3),se(1),Z("color",Le(27,ixe)),se(1),Z("color",Le(28,t8)),se(2),Z("args",Le(29,nxe)),se(4),Z("ngForOf",t.meshData))},dependencies:[$l,an,Ke,Es,Ar,Hn,gn,ro,Za,Ol,Fc,jl,Hc,Gi,Io,AC,GD,ID,IC],styles:["label[_ngcontent-%COMP%]{margin-right:.5em}"],changeDetection:0});const JD=function(i){return[0,i,0]},rxe=function(){return[0,1,0]},sxe=function(){return[4,10,2]},oxe=function(i){return[i,0,0]},axe=function(){return[100,100]},lxe=function(){return[55,2,.1,100]},cxe=function(i,e){return[i,0,e]},dxe=function(){return[0,0,0]};class V0{constructor(e){this.Math=Math,this.selected=!1,this.glbPath=`${ca}mac-draco.glb`,this.clock=new _p(!0),this.plane=new to(new R(0,1,0),3),this.rotation=[0,0,0],this.position=[0,0,0],this.uniforms={time:{value:1}},this.fragmentShader1="\nuniform float time;\nvarying vec2 vUv;\n\nvoid main( void ) {\n  vec2 position = - 1.0 + 2.0 * vUv;\n\n  float red = abs( sin( position.x * position.y + time / 5.0 ) );\n  float green = abs( sin( position.x * position.y + time / 4.0 ) );\n  float blue = abs( sin( position.x * position.y + time / 3.0 ) );\n  gl_FragColor = vec4( red, green, blue, 1.0 );\n\n}\n",this.fragmentShader2="\n  uniform float time;\n  varying vec2 vUv;\n\n  void main( void ) {\n    vec2 position = vUv;\n    float color = 0.0;\n    color += sin( position.x * cos( time / 15.0 ) * 80.0 ) + cos( position.y * cos( time / 15.0 ) * 10.0 );\n    color += sin( position.y * sin( time / 10.0 ) * 40.0 ) + cos( position.x * sin( time / 25.0 ) * 40.0 );\n    color += sin( position.x * sin( time / 5.0 ) * 10.0 ) + sin( position.y * sin( time / 35.0 ) * 80.0 );\n    color *= sin( time / 10.0 ) * 0.5;\n    gl_FragColor = vec4( vec3( color, color * 0.5, sin( color + time / 3.0 ) * 0.75 ), 1.0 );\n  }\n  ",this.vertexShader="varying vec2 vUv;\n  void main() {\n    vUv = uv;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix * mvPosition;\n  }\n  ",e.setDecoderPath("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/jsm/libs/draco/gltf/"),e.setCrossOrigin("no-cors"),this.calcPose()}onBeforeRender(){this.calcPose(),this.calcUniforms()}calcPose(){const e=this.clock.getElapsedTime();this.rotation=[vt.lerp(this.rotation[0],Math.cos(e/2)/20+.25,.1),vt.lerp(this.rotation[1],Math.sin(e/4)/20,.1),vt.lerp(this.rotation[2],Math.sin(e/8)/20,.1)],this.position=[0,vt.lerp(this.position[1],(-2+Math.sin(e/2))/2,.1),0]}calcUniforms(){this.uniforms.time.value=1+5*this.clock.getElapsedTime()}}V0.\u0275fac=function(e){return new(e||V0)(P(Pl))},V0.\u0275cmp=K({type:V0,selectors:[["app-ref-by-id-example"]],decls:17,vars:45,consts:[[3,"thStats","shadow","onRender"],[3,"rotation","position"],["loadGLTF","",3,"castShadow","url","position","rotation","onClick"],[3,"refById"],[3,"vertexShader","fragmentShader","uniforms"],["shader",""],[3,"castShadow","position","lookAt","color","intensity"],["light",""],[3,"receiveShadow","rotation","position"],[3,"args"],[3,"color"],[3,"args","position","lookAt"]],template:function(e,t){if(1&e){const n=Vs();ye(0,"th-canvas",0),xt("onRender",function(){return t.onBeforeRender()}),ye(1,"th-scene"),Ye(2,"th-ambientLight"),ye(3,"th-group",1)(4,"th-object3D",2),xt("onClick",function(){lr(n);const s=Qt(7);return t.selected=!t.selected,cr(s.needsUpdate=!0)}),ye(5,"th-mesh",3),Ye(6,"th-shaderMaterial",4,5),ke()()(),Ye(8,"th-directionalLight",6,7),hr(10,"color"),ye(11,"th-mesh",8),Ye(12,"th-planeGeometry",9)(13,"th-meshBasicMaterial",10),hr(14,"color"),ke(),ye(15,"th-perspectiveCamera",11),Ye(16,"th-orbitControls"),ke()()()}2&e&&(Z("thStats",!0)("shadow",!0),se(3),Z("rotation",li(29,JD,t.Math.PI))("position",Le(31,rxe)),se(1),Z("castShadow",!0)("url",t.glbPath)("position",t.position)("rotation",t.rotation),se(1),Z("refById","Cube008_2"),se(1),Z("vertexShader",t.vertexShader)("fragmentShader",t.selected?t.fragmentShader1:t.fragmentShader2)("uniforms",t.uniforms),se(2),Z("castShadow",!0)("position",Le(32,sxe))("lookAt",li(33,JD,-3))("color",wr(10,25,"#ffffff"))("intensity",.75),se(3),Z("receiveShadow",!0)("rotation",li(35,oxe,3*t.Math.PI/2))("position",li(37,JD,-3)),se(1),Z("args",Le(39,axe)),se(1),Z("color",wr(14,27,"#efefef")),se(2),Z("args",Le(40,lxe))("position",Ca(41,cxe,-5,-15))("lookAt",Le(44,dxe)))},dependencies:[ls,an,Ke,Es,Ar,Hn,Nl,gn,Vc,Va,aa,Gi,ko,Ga,Io,gg,Qc],encapsulation:2,changeDetection:0});const e2=function(){return[0,0,0]},uxe=function(){return[2,2,2]},hxe=function(){return[1,1,1]},fxe=function(i,e){return[i,e]},pxe=function(){return[10,10]},n8=function(){return[10,10,10]},mxe=function(){return[45,2,.1,100]};class bg extends Hn{constructor(e){super(e)}ngOnInit(){super.ngOnInit(),this.objRef&&(this.objRef.material=new Na({color:"green"}),this.objRef.geometry=new Ji(1,1,1))}}bg.\u0275fac=function(e){return new(e||bg)(P(Ke,4))},bg.\u0275cmp=K({type:bg,selectors:[["th-box"]],features:[oe(function d0e(i){return[{provide:Ke,useExisting:le(()=>i)}]}(bg)),W],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0});class z0{constructor(){this.THREE=Eg,this.box=new Ks(new R(0,0,0),new R(1.5,1.5,1.5)),this.color=new Be(1,0,0),this.rotation=[0,0,0],this.material=new Na,this.selected=!1,this.material.color.set("green"),setInterval(()=>{0!==this.material.color.r?(this.material=new Na,this.material.color.set("green")):(this.material=new Na,this.material.color.set("red"))},200)}onBeforeRender(){this.rotation=[0,this.rotation[2]+.01,this.rotation[2]+.01]}ngOnInit(){}}z0.\u0275fac=function(e){return new(e||z0)},z0.\u0275cmp=K({type:z0,selectors:[["app-simple-example"]],decls:8,vars:24,consts:[[3,"onRender"],[3,"position","material","rotation","scale","onClick"],[3,"args","material","position"],[3,"args"],[3,"position"],[3,"args","position","lookAt"]],template:function(e,t){1&e&&(ye(0,"th-canvas",0),xt("onRender",function(){return t.onBeforeRender()}),ye(1,"th-scene"),Ye(2,"th-ambientLight"),ye(3,"th-box",1),xt("onClick",function(){return t.selected=!t.selected}),ke(),Ye(4,"th-box3Helper",2)(5,"th-gridHelper",3)(6,"th-pointLight",4)(7,"th-perspectiveCamera",5),ke()()),2&e&&(se(3),Z("position",Le(12,e2))("material",t.material)("rotation",t.rotation)("scale",t.selected?Le(13,uxe):Le(14,hxe)),se(1),Z("args",Ca(15,fxe,t.box,t.color))("material",t.material)("position",Le(18,e2)),se(1),Z("args",Le(19,pxe)),se(1),Z("position",Le(20,n8)),se(1),Z("args",Le(21,mxe))("position",Le(22,n8))("lookAt",Le(23,e2)))},dependencies:[an,io,Nu,ao,Ar,gn,Gi,Ga,bg],encapsulation:2,changeDetection:0});const gxe=["thecanvas"],_xe=function(i,e,t,n){return{x:i,y:e,width:t,height:n}};function bxe(i,e){if(1&i){const t=Vs();ye(0,"th-view",11,12),xt("onRender",function(){const s=lr(t).$implicit,o=Qt(3);vi();const a=Qt(3);return cr(s.updateCamera(o.objRef,a.objRef))}),Ye(2,"th-perspectiveCamera",13,14),ke()}if(2&i){const t=e.$implicit,n=Qt(1),r=vi();Z("scene",Qt(3))("viewPort",d_(11,_xe,t.left*r.canvasWidth,t.bottom*r.canvasHeight,t.width*r.canvasWidth,t.height*r.canvasHeight))("scissor",n.viewPort)("scissorTest",!0)("clearColor",t.background),se(2),Z("position",t.eye)("up",t.up)("fov",t.fov)("aspect",t.width*r.canvasWidth/(t.height*r.canvasHeight))("near",1)("far",1e4)}}const vxe=function(i,e){return{x:0,y:0,width:i,height:e}},Axe=function(){return[0,0,1]},yxe=function(){return["#ffffff"]},xxe=function(){return[0,0,0]},PC=function(i){return[i,0,0]},wxe=function(){return[200,32,16]},Cxe=function(){return["#fac400"]},Mxe=function(){return["#f83f0d"]},Exe=function(){return[400,0,0]};class G0{constructor(){this.Math=Math,this.canvasWidth=128,this.canvasHeight=128,this.mouseX=0,this.mouseY=0,this.views=[{left:0,bottom:0,width:.5,height:1,background:new Be(.5,.5,.7),eye:[0,300,1800],up:[0,1,0],fov:30,updateCamera:(e,t)=>{this.updateSize(),e.position.x+=.05*this.mouseX,e.position.x=Math.max(Math.min(e.position.x,2e3),-2e3),e.lookAt(t.position),e.updateProjectionMatrix()}},{left:.5,bottom:0,width:.5,height:.5,background:new Be(.7,.5,.5),eye:[0,1800,0],up:[0,0,1],fov:45,updateCamera:(e,t)=>{this.updateSize(),e.position.x-=.05*this.mouseX,e.position.x=Math.max(Math.min(e.position.x,2e3),-2e3),e.lookAt(e.position.clone().setY(0)),e.updateProjectionMatrix()}},{left:.5,bottom:.5,width:.5,height:.5,background:new Be(.5,.7,.7),eye:[1400,800,1400],up:[0,1,0],fov:60,updateCamera:(e,t)=>{this.updateSize(),e.position.y-=.05*this.mouseX,e.position.y=Math.max(Math.min(e.position.y,1600),-1600),e.lookAt(t.position),e.updateProjectionMatrix()}}]}ngOnInit(){!this.canvas||!this.canvas.rendererCanvas||(this.shadowTexture=new cx(this.canvas.rendererCanvas.nativeElement))}animate(e){}updateSize(){!this.canvas||!this.canvas.rendererCanvas||(this.canvasWidth=this.canvas.rendererCanvas.nativeElement.width,this.canvasHeight=this.canvas.rendererCanvas.nativeElement.height)}onMouseMove(e){if(!this.canvas||!this.canvas.rendererCanvas)return;const t=this.canvas.rendererCanvas.nativeElement.getBoundingClientRect();this.mouseX=e.clientX-t.left-t.width/2,this.mouseY=e.clientY-t.right-t.height/2}}G0.\u0275fac=function(e){return new(e||G0)},G0.\u0275cmp=K({type:G0,selectors:[["app-views-example"]],viewQuery:function(e,t){if(1&e&&ki(gxe,7),2&e){let n;kt(n=Lt())&&(t.canvas=n.first)}},hostBindings:function(e,t){1&e&&xt("mousemove",function(r){return t.onMouseMove(r)},0,Uv)},decls:13,vars:38,consts:[[3,"disableDefaultView","viewPort"],["thecanvas",""],["scene",""],[3,"position","args"],[3,"position","rotation"],[3,"args"],["geo",""],[3,"flatShading","shininess","specular","color"],["mat",""],[3,"position","rotation","geometry","material"],[3,"scene","viewPort","scissor","scissorTest","clearColor","onRender",4,"ngFor","ngForOf"],[3,"scene","viewPort","scissor","scissorTest","clearColor","onRender"],["thview",""],[3,"position","up","fov","aspect","near","far"],["camera",""]],template:function(e,t){if(1&e&&(ye(0,"th-canvas",0,1)(2,"th-scene",null,2),Ye(4,"th-directionalLight",3),ye(5,"th-mesh",4),Ye(6,"th-sphereGeometry",5,6)(8,"th-meshPhongMaterial",7,8),ke(),Ye(10,"th-mesh",9)(11,"th-mesh",9),ke(),Ft(12,bxe,4,16,"th-view",10),ke()),2&e){const n=Qt(7),r=Qt(9);Z("disableDefaultView",!0)("viewPort",Ca(20,vxe,.5*t.canvasWidth,t.canvasHeight)),se(4),Z("position",Le(23,Axe))("args",Le(24,yxe)),se(1),Z("position",Le(25,xxe))("rotation",li(26,PC,-t.Math.PI/2)),se(1),Z("args",Le(28,wxe)),se(2),Z("flatShading",!1)("shininess",30)("specular",Le(29,Cxe))("color",Le(30,Mxe)),se(2),Z("position",li(31,PC,-400))("rotation",li(33,PC,-t.Math.PI/2))("geometry",n.objRef)("material",r.objRef),se(1),Z("position",Le(35,Exe))("rotation",li(36,PC,-t.Math.PI/2))("geometry",n.objRef)("material",r.objRef),se(1),Z("ngForOf",t.views)}},dependencies:[$l,an,Es,Hn,gn,ro,Za,Gi,Ss],changeDetection:0});const kC=[{path:"basic-example",data:{title:"Basic Example",exampleComponent:Fb,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/basic-example/basic-example.component.ts"]}},{path:"simple-example",data:{title:"Simple Example",exampleComponent:z0,declarations:["SimpleExampleComponent","Box"],codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/simple-example/simple-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/simple-example/simple-example.component.ts"]}},{path:"introductory-example",data:{title:"Introductory Example",exampleComponent:S0,declarations:["IntroductoryExampleComponent","Box"],codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/introductory-example/introductory-example.component.ts"]}},{path:"controls-example",data:{title:"Controls Example",exampleComponent:Ob,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/controls-example/controls-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/controls-example/controls-example.component.ts"]}},{path:"loader-example",data:{title:"Loader Example",exampleComponent:T0,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/loader-example/loader-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/loader-example/loader-example.component.ts"]}},{path:"dynamic loader-example",data:{title:"Dynamic Loader Example",exampleComponent:Nb,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/dynamic-loader-example/dynamic-loader-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/dynamic-loader-example/dynamic-loader-example.component.ts"]}},{path:"events-example",data:{title:"Events Example",exampleComponent:Ub,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/events-example/events-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/events-example/events-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/events-example/events-example.component.scss"]}},{path:"instanced-mesh-example",data:{title:"Instanced Mesh Example",exampleComponent:M0,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/instanced-mesh-example/instanced-mesh-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/instanced-mesh-example/instanced-mesh-example.component.ts"]}},{path:"post-processing-example",data:{title:"Post Processing Example",exampleComponent:U0,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/post-processing-example/post-processing-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/post-processing-example/post-processing-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/post-processing-example/post-processing-example.component.scss"]}},{path:"views-example",data:{title:"Multiple Views Example",exampleComponent:G0,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/views-example/views-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/views-example/views-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/views-example/views-example.component.scss"]}},{path:"multi-scene-example",data:{title:"Multiple Scenes Example",codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-scene-example/multi-scene-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-scene-example/multi-scene-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-scene-example/multi-scene-example.component.scss"],exampleComponent:R0}},{path:"multi-view-postprocessing-example",data:{title:"Multiple View Post Processing Example",exampleComponent:I0,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-view-postprocessing-example/multi-view-postprocessing-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-view-postprocessing-example/multi-view-postprocessing-example.component.ts"]}},{path:"animation-example",data:{title:"Animation Example",exampleComponent:Bb,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/animation-example/animation-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/animation-example/animation-example.component.ts"]}},{path:"plyloader-example",data:{title:"PLY Loader Example",exampleComponent:j0,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/plyloader-example/plyloader-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/plyloader-example/plyloader-example.component.ts"]}},{path:"on-demand-example",data:{title:"On-Demand Rendering Example",exampleComponent:F0,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/on-demand-example/on-demand-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/on-demand-example/on-demand-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/on-demand-example/on-demand-example.component.scss"]}},{path:"ref-by-id-example",data:{title:"Ref By Id Example",exampleComponent:V0,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/ref-by-id-example/ref-by-id-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/ref-by-id-example/ref-by-id-example.component.ts"]}},{path:"html-example",data:{title:"Html Content Example",exampleComponent:w0,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-example/html-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-example/html-example.component.ts"]}},{path:"outline-pass-events-example",data:{title:"Render Pass + Events Example",exampleComponent:N0,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/outline-pass-events-example/outline-pass-events-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/outline-pass-events-example/outline-pass-events-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/outline-pass-events-example/outline-pass-events-example.component.scss"]}}];kC.forEach(i=>i.component=s0);const Sxe=[];kC.forEach(i=>{Sxe.push(i.component)});class vg{}vg.\u0275fac=function(e){return new(e||vg)},vg.\u0275mod=oi({type:vg}),vg.\u0275inj=ni({imports:[KN.forRoot(kC),KN]});let Rxe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[xn,xn]}),i})();const s8=["*"],a8=["unscopedContent"],Ixe=["text"],Dxe=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],Pxe=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"],l8=new je("ListOption");let c8=(()=>{class i{constructor(t){this._elementRef=t}}return i.\u0275fac=function(t){return new(t||i)(P(zt))},i.\u0275dir=Oe({type:i,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]}),i})(),d8=(()=>{class i{constructor(t){this._elementRef=t}}return i.\u0275fac=function(t){return new(t||i)(P(zt))},i.\u0275dir=Oe({type:i,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]}),i})(),Zxe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]}),i})(),u8=(()=>{class i{constructor(t){this._listOption=t}_isAlignedAtStart(){return!this._listOption||"after"===this._listOption?._getTogglePosition()}}return i.\u0275fac=function(t){return new(t||i)(P(l8,8))},i.\u0275dir=Oe({type:i,hostVars:4,hostBindings:function(t,n){2&t&&Mi("mdc-list-item__start",n._isAlignedAtStart())("mdc-list-item__end",!n._isAlignedAtStart())}}),i})(),Kxe=(()=>{class i extends u8{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=ce(i)))(n||i)}}(),i.\u0275dir=Oe({type:i,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[W]}),i})(),$xe=(()=>{class i extends u8{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=ce(i)))(n||i)}}(),i.\u0275dir=Oe({type:i,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[W]}),i})();const Jxe=new je("MAT_LIST_CONFIG");let Ag=(()=>{class i{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=Ut(Jxe,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Hi(t)}get disabled(){return this._disabled}set disabled(t){this._disabled=Hi(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,hostVars:1,hostBindings:function(t,n){2&t&&fn("aria-disabled",n.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}}),i})(),t2=(()=>{class i{set lines(t){this._explicitLines=cs(t,null),this._updateItemLines(!1)}get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(t){this._disableRipple=Hi(t)}get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(t){this._disabled=Hi(t)}get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(t,n,r,s,o,a){this._elementRef=t,this._ngZone=n,this._listBase=r,this._platform=s,this._explicitLines=null,this._disableRipple=!1,this._disabled=!1,this._subscriptions=new dn,this._rippleRenderer=null,this._hasUnscopedTextContent=!1,this.rippleConfig=o||{},this._hostElement=this._elementRef.nativeElement,this._noopAnimations="NoopAnimations"===a,r&&!r._isNonInteractive&&this._initInteractiveListItem(),"button"===this._hostElement.nodeName.toLowerCase()&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),null!==this._rippleRenderer&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!(!this._avatars.length&&!this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new Sp(this,this._ngZone,this._hostElement,this._platform),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(hd(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(t){if(!this._lines||!this._titles||!this._unscopedContent)return;t&&this._checkDomForUnscopedTextContent();const n=this._explicitLines??this._inferLinesFromContent(),r=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",n<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",n<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",2===n),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",3===n),this._hasUnscopedTextContent){const s=0===this._titles.length&&1===n;r.classList.toggle("mdc-list-item__primary-text",s),r.classList.toggle("mdc-list-item__secondary-text",!s)}else r.classList.remove("mdc-list-item__primary-text"),r.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let t=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(t+=1),t}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(t=>t.nodeType!==t.COMMENT_NODE).some(t=>!(!t.textContent||!t.textContent.trim()))}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(pt),P(Ag,8),P(Wn),P(Wx,8),P(ts,8))},i.\u0275dir=Oe({type:i,contentQueries:function(t,n,r){if(1&t&&(Fn(r,Kxe,4),Fn(r,$xe,4)),2&t){let s;kt(s=Lt())&&(n._avatars=s),kt(s=Lt())&&(n._icons=s)}},hostVars:3,hostBindings:function(t,n){2&t&&(fn("aria-disabled",n.disabled),Mi("mdc-list-item--disabled",n.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}}),i})(),ewe=(()=>{class i extends t2{get activated(){return this._activated}set activated(t){this._activated=Hi(t)}constructor(t,n,r,s,o,a){super(t,n,r,s,o,a),this._activated=!1}_getAriaCurrent(){return"A"===this._hostElement.nodeName&&this._activated?"page":null}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(pt),P(Ag,8),P(Wn),P(Wx,8),P(ts,8))},i.\u0275cmp=K({type:i,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(t,n,r){if(1&t&&(Fn(r,d8,5),Fn(r,c8,5),Fn(r,Zxe,5)),2&t){let s;kt(s=Lt())&&(n._lines=s),kt(s=Lt())&&(n._titles=s),kt(s=Lt())&&(n._meta=s)}},viewQuery:function(t,n){if(1&t&&(ki(a8,5),ki(Ixe,5)),2&t){let r;kt(r=Lt())&&(n._unscopedContent=r.first),kt(r=Lt())&&(n._itemText=r.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:11,hostBindings:function(t,n){2&t&&(fn("aria-current",n._getAriaCurrent()),Mi("mdc-list-item--activated",n.activated)("mdc-list-item--with-leading-avatar",0!==n._avatars.length)("mdc-list-item--with-leading-icon",0!==n._icons.length)("mdc-list-item--with-trailing-meta",0!==n._meta.length)("_mat-animation-noopable",n._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[W],ngContentSelectors:Pxe,decls:10,vars:0,consts:[[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],["unscopedContent",""],[1,"mat-mdc-focus-indicator"]],template:function(t,n){1&t&&(fe(Dxe),ne(0),ye(1,"span",0),ne(2,1),ne(3,2),ye(4,"span",1,2),xt("cdkObserveContent",function(){return n._updateItemLines(!0)}),ne(6,3),ke()(),ne(7,4),ne(8,5),Ye(9,"div",3))},dependencies:[lI],encapsulation:2,changeDetection:0}),i})(),iwe=(()=>{class i extends Ag{constructor(){super(...arguments),this._isNonInteractive=!1}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=ce(i)))(n||i)}}(),i.\u0275cmp=K({type:i,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-mdc-nav-list","mat-mdc-list-base","mdc-list"],exportAs:["matNavList"],features:[oe([{provide:Ag,useExisting:i}]),W],ngContentSelectors:s8,decls:1,vars:0,template:function(t,n){1&t&&(fe(),ne(0))},styles:['.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:40px;height:40px}.mdc-list-item--with-leading-icon .mdc-list-item__start{width:24px;height:24px}.mdc-list-item--with-leading-thumbnail .mdc-list-item__start{width:40px;height:40px}.mdc-list-item--with-leading-image .mdc-list-item__start{width:56px;height:56px}.mdc-list-item--with-leading-video .mdc-list-item__start{width:100px;height:56px}.mdc-list-item--with-leading-checkbox .mdc-list-item__start{width:40px;height:40px}.mdc-list-item--with-leading-radio .mdc-list-item__start{width:40px;height:40px}.mdc-list-item--with-leading-switch .mdc-list-item__start{width:36px;height:20px}.mdc-list-item--with-trailing-icon .mdc-list-item__end{width:24px;height:24px}.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{width:40px;height:40px}.mdc-list-item--with-trailing-radio .mdc-list-item__end{width:40px;height:40px}.mdc-list-item--with-trailing-switch .mdc-list-item__end{width:36px;height:20px}.mdc-list-divider{height:1px}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-list-divider::after{content:"";display:block;border-bottom-width:1px;border-bottom-style:solid}}.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item__wrapper{display:block}.mdc-list-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer}.mdc-list-item:focus{outline:none}.mdc-list-item.mdc-list-item--with-one-line{height:48px}.mdc-list-item.mdc-list-item--with-two-lines{height:64px}.mdc-list-item.mdc-list-item--with-three-lines{height:88px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--disabled,.mdc-list-item.mdc-list-item--non-interactive{cursor:auto}.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px double rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected:focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected:focus::before{border-color:CanvasText}}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__content[for]{pointer-events:none}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item__overline-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start,.mdc-list-item--with-leading-avatar .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-avatar .mdc-list-item__start{border-radius:50%}.mdc-list-item--with-leading-icon.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start,.mdc-list-item--with-leading-icon .mdc-list-item__start[dir=rtl]{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-thumbnail.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-thumbnail.mdc-list-item,.mdc-list-item--with-leading-thumbnail.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-thumbnail .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-thumbnail .mdc-list-item__start,.mdc-list-item--with-leading-thumbnail .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-image.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-image.mdc-list-item,.mdc-list-item--with-leading-image.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-image .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-image .mdc-list-item__start,.mdc-list-item--with-leading-image .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-video.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-video.mdc-list-item,.mdc-list-item--with-leading-video.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-video .mdc-list-item__start{margin-left:0;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-video .mdc-list-item__start,.mdc-list-item--with-leading-video .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-checkbox.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-radio.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-radio.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-radio .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-radio .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-switch.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-switch.mdc-list-item,.mdc-list-item--with-leading-switch.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-switch .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-switch .mdc-list-item__start,.mdc-list-item--with-leading-switch .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item,.mdc-list-item--with-trailing-icon.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-icon .mdc-list-item__end,.mdc-list-item--with-trailing-icon .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item,.mdc-list-item--with-trailing-meta.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-trailing-meta .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-radio.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-radio .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-radio .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-switch.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-switch.mdc-list-item,.mdc-list-item--with-trailing-switch.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-switch .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-switch .mdc-list-item__end,.mdc-list-item--with-trailing-switch .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-switch.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item{padding-left:16px;padding-right:16px}[dir=rtl] .mdc-list-item,.mdc-list-item[dir=rtl]{padding-left:16px;padding-right:16px}.mdc-list-group .mdc-deprecated-list{padding:0}.mdc-list-group__subheader{margin:calc((3rem - 1.5rem)/2) 16px}.mdc-list-divider{padding:0;background-clip:content-box}.mdc-list-divider.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset{padding-left:16px;padding-right:auto}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset,.mdc-list-divider.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:16px}.mdc-list-divider.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset{padding-left:auto;padding-right:16px}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset,.mdc-list-divider.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset[dir=rtl]{padding-left:16px;padding-right:auto}.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset{padding-left:0px;padding-right:auto}[dir=rtl] .mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:0px}[dir=rtl] .mdc-list-divider,.mdc-list-divider[dir=rtl]{padding:0}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}'],encapsulation:2,changeDetection:0}),i})(),n2=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[Gx,Sa,xn,Xb,_V,Rxe]}),i})();const owe=["*",[["mat-toolbar-row"]]],awe=["*","mat-toolbar-row"],lwe=Qx(class{constructor(i){this._elementRef=i}});let cwe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),i})(),dwe=(()=>{class i extends lwe{constructor(t,n,r){super(t),this._platform=n,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(Wn),P(Jt))},i.\u0275cmp=K({type:i,selectors:[["mat-toolbar"]],contentQueries:function(t,n,r){if(1&t&&Fn(r,cwe,5),2&t){let s;kt(s=Lt())&&(n._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,n){2&t&&Mi("mat-toolbar-multiple-rows",n._toolbarRows.length>0)("mat-toolbar-single-row",0===n._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[W],ngContentSelectors:awe,decls:2,vars:0,template:function(t,n){1&t&&(fe(owe),ne(0),ne(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),i})(),r2=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[xn,xn]}),i})();const LC=["*"],uwe=["content"];function hwe(i,e){if(1&i){const t=Vs();ye(0,"div",2),xt("click",function(){return lr(t),cr(vi()._onBackdropClicked())}),ke()}2&i&&Mi("mat-drawer-shown",vi()._isShowingBackdrop())}function fwe(i,e){1&i&&(ye(0,"mat-drawer-content"),ne(1,2),ke())}const pwe=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],mwe=["mat-drawer","mat-drawer-content","*"];function gwe(i,e){if(1&i){const t=Vs();ye(0,"div",2),xt("click",function(){return lr(t),cr(vi()._onBackdropClicked())}),ke()}2&i&&Mi("mat-drawer-shown",vi()._isShowingBackdrop())}function _we(i,e){1&i&&(ye(0,"mat-sidenav-content"),ne(1,2),ke())}const bwe=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],vwe=["mat-sidenav","mat-sidenav-content","*"],f8={transformDrawer:Jb("transform",[Mu("open, open-instant",Rs({transform:"none",visibility:"visible"})),Mu("void",Rs({"box-shadow":"none",visibility:"hidden"})),Fl("void => open-instant",Sc("0ms")),Fl("void <=> open, open-instant => void",Sc("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},ywe=new je("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function xwe(){return!1}}),s2=new je("MAT_DRAWER_CONTAINER");let BC=(()=>{class i extends Eu{constructor(t,n,r,s,o){super(r,s,o),this._changeDetectorRef=t,this._container=n}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(t){return new(t||i)(P(er),P(le(()=>m8)),P(zt),P(Rp),P(pt))},i.\u0275cmp=K({type:i,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,n){2&t&&Wh("margin-left",n._container._contentMargins.left,"px")("margin-right",n._container._contentMargins.right,"px")},features:[oe([{provide:Eu,useExisting:i}]),W],ngContentSelectors:LC,decls:1,vars:0,template:function(t,n){1&t&&(fe(),ne(0))},encapsulation:2,changeDetection:0}),i})(),p8=(()=>{class i{get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=Hi(t)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=Hi(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(Hi(t))}constructor(t,n,r,s,o,a,l,c){this._elementRef=t,this._focusTrapFactory=n,this._focusMonitor=r,this._platform=s,this._ngZone=o,this._interactivityChecker=a,this._doc=l,this._container=c,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Ht,this._animationEnd=new Ht,this._animationState="void",this.openedChange=new St(!0),this._openedStream=this.openedChange.pipe(On(d=>d),wt(()=>{})),this.openedStart=this._animationStarted.pipe(On(d=>d.fromState!==d.toState&&0===d.toState.indexOf("open")),_S(void 0)),this._closedStream=this.openedChange.pipe(On(d=>!d),wt(()=>{})),this.closedStart=this._animationStarted.pipe(On(d=>d.fromState!==d.toState&&"void"===d.toState),_S(void 0)),this._destroyed=new Ht,this.onPositionChanged=new St,this._modeChanged=new Ht,this.openedChange.subscribe(d=>{d?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Ec(this._elementRef.nativeElement,"keydown").pipe(On(d=>27===d.keyCode&&!this.disableClose&&!jx(d)),yn(this._destroyed)).subscribe(d=>this._ngZone.run(()=>{this.close(),d.stopPropagation(),d.preventDefault()}))}),this._animationEnd.pipe(aI((d,u)=>d.fromState===u.fromState&&d.toState===u.toState)).subscribe(d=>{const{fromState:u,toState:h}=d;(0===h.indexOf("open")&&"void"===u||"void"===h&&0===u.indexOf("open"))&&this.openedChange.emit(this._opened)})}_forceFocus(t,n){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(n)}_focusByCssSelector(t,n){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,n)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(n=>{!n&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,n){t&&n&&(this._openedVia=n);const r=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),r}_setOpen(t,n,r){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",n&&this._restoreFocus(r)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe(hs(1)).subscribe(o=>s(o?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const n=this._elementRef.nativeElement,r=n.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,n)),r.appendChild(n)):this._anchor&&this._anchor.parentNode.insertBefore(n,this._anchor)}}return i.\u0275fac=function(t){return new(t||i)(P(zt),P(zue),P(cI),P(Wn),P(pt),P(eV),P(Jt,8),P(s2,8))},i.\u0275cmp=K({type:i,selectors:[["mat-drawer"]],viewQuery:function(t,n){if(1&t&&ki(uwe,5),2&t){let r;kt(r=Lt())&&(n._content=r.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,n){1&t&&eE("@transform.start",function(s){return n._animationStarted.next(s)})("@transform.done",function(s){return n._animationEnd.next(s)}),2&t&&(fn("align",null),oE("@transform",n._animationState),Mi("mat-drawer-end","end"===n.position)("mat-drawer-over","over"===n.mode)("mat-drawer-push","push"===n.mode)("mat-drawer-side","side"===n.mode)("mat-drawer-opened",n.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:LC,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,n){1&t&&(fe(),ye(0,"div",0,1),ne(2),ke())},dependencies:[Eu],encapsulation:2,data:{animation:[f8.transformDrawer]},changeDetection:0}),i})(),m8=(()=>{class i{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=Hi(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:Hi(t)}get scrollable(){return this._userContent||this._content}constructor(t,n,r,s,o,a=!1,l){this._dir=t,this._element=n,this._ngZone=r,this._changeDetectorRef=s,this._animationMode=l,this._drawers=new Td,this.backdropClick=new St,this._destroyed=new Ht,this._doCheckSubject=new Ht,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Ht,t&&t.change.pipe(yn(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),o.change().pipe(yn(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=a}ngAfterContentInit(){this._allDrawers.changes.pipe(tc(this._allDrawers),yn(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(n=>!n._container||n._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(tc(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(Vx(10),yn(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,n=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const r=this._left._getWidth();t+=r,n-=r}if(this._right&&this._right.opened)if("side"==this._right.mode)n+=this._right._getWidth();else if("push"==this._right.mode){const r=this._right._getWidth();n+=r,t-=r}t=t||null,n=n||null,(t!==this._contentMargins.left||n!==this._contentMargins.right)&&(this._contentMargins={left:t,right:n},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(On(n=>n.fromState!==n.toState),yn(this._drawers.changes)).subscribe(n=>{"open-instant"!==n.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(yn(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){t&&t.onPositionChanged.pipe(yn(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(hs(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(yn(hd(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const n=this._element.nativeElement.classList,r="mat-drawer-container-has-open";t?n.add(r):n.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return i.\u0275fac=function(t){return new(t||i)(P(Ha,8),P(zt),P(pt),P(er),P(Su),P(ywe),P(ts,8))},i.\u0275cmp=K({type:i,selectors:[["mat-drawer-container"]],contentQueries:function(t,n,r){if(1&t&&(Fn(r,BC,5),Fn(r,p8,5)),2&t){let s;kt(s=Lt())&&(n._content=s.first),kt(s=Lt())&&(n._allDrawers=s)}},viewQuery:function(t,n){if(1&t&&ki(BC,5),2&t){let r;kt(r=Lt())&&(n._userContent=r.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,n){2&t&&Mi("mat-drawer-container-explicit-backdrop",n._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[oe([{provide:s2,useExisting:i}])],ngContentSelectors:mwe,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,n){1&t&&(fe(pwe),Ft(0,hwe,1,2,"div",0),ne(1),ne(2,1),Ft(3,fwe,2,0,"mat-drawer-content",1)),2&t&&(Z("ngIf",n.hasBackdrop),se(3),Z("ngIf",!n._content))},dependencies:[Jl,BC],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),i})(),o2=(()=>{class i extends BC{constructor(t,n,r,s,o){super(t,n,r,s,o)}}return i.\u0275fac=function(t){return new(t||i)(P(er),P(le(()=>_8)),P(zt),P(Rp),P(pt))},i.\u0275cmp=K({type:i,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(t,n){2&t&&Wh("margin-left",n._container._contentMargins.left,"px")("margin-right",n._container._contentMargins.right,"px")},features:[oe([{provide:Eu,useExisting:i}]),W],ngContentSelectors:LC,decls:1,vars:0,template:function(t,n){1&t&&(fe(),ne(0))},encapsulation:2,changeDetection:0}),i})(),g8=(()=>{class i extends p8{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=Hi(t)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=cs(t)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=cs(t)}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=ce(i)))(n||i)}}(),i.\u0275cmp=K({type:i,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(t,n){2&t&&(fn("align",null),Wh("top",n.fixedInViewport?n.fixedTopGap:null,"px")("bottom",n.fixedInViewport?n.fixedBottomGap:null,"px"),Mi("mat-drawer-end","end"===n.position)("mat-drawer-over","over"===n.mode)("mat-drawer-push","push"===n.mode)("mat-drawer-side","side"===n.mode)("mat-drawer-opened",n.opened)("mat-sidenav-fixed",n.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[W],ngContentSelectors:LC,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,n){1&t&&(fe(),ye(0,"div",0,1),ne(2),ke())},dependencies:[Eu],encapsulation:2,data:{animation:[f8.transformDrawer]},changeDetection:0}),i})(),_8=(()=>{class i extends m8{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=ce(i)))(n||i)}}(),i.\u0275cmp=K({type:i,selectors:[["mat-sidenav-container"]],contentQueries:function(t,n,r){if(1&t&&(Fn(r,o2,5),Fn(r,g8,5)),2&t){let s;kt(s=Lt())&&(n._content=s.first),kt(s=Lt())&&(n._allDrawers=s)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(t,n){2&t&&Mi("mat-drawer-container-explicit-backdrop",n._backdropOverride)},exportAs:["matSidenavContainer"],features:[oe([{provide:s2,useExisting:i}]),W],ngContentSelectors:vwe,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,n){1&t&&(fe(bwe),Ft(0,gwe,1,2,"div",0),ne(1),ne(2,1),Ft(3,_we,2,0,"mat-sidenav-content",1)),2&t&&(Z("ngIf",n.hasBackdrop),se(3),Z("ngIf",!n._content))},dependencies:[Jl,o2],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),i})(),wwe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[Sa,xn,n0,n0,xn]}),i})();function Cwe(i,e){if(1&i&&(ye(0,"a",10),Xi(1),ke()),2&i){const t=e.$implicit;Z("routerLink",t.path),se(1),Jv(t.data.title)}}function Mwe(i,e){if(1&i){const t=Vs();ye(0,"button",11),xt("click",function(){return lr(t),vi(),cr(Qt(2).toggle())}),ye(1,"mat-icon",12),Xi(2,"menu"),ke()()}}function Ewe(i,e){if(1&i){const t=Vs();ye(0,"button",13),xt("click",function(r){return lr(t),cr(vi().editorService.toCodeSandbox(r))}),ye(1,"mat-icon"),Xi(2,"crop_din"),ke(),Xi(3," CodeSandbox "),ke()}}function Swe(i,e){if(1&i){const t=Vs();ye(0,"button",13),xt("click",function(r){return lr(t),cr(vi().editorService.toStackblitz(r))}),ye(1,"mat-icon"),Xi(2,"bolt"),ke(),Xi(3," Stackblitz "),ke()}}class H0{constructor(e,t){this.breakpointObserver=e,this.editorService=t,this.routes=kC,this.isHandset$=this.breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)").pipe(wt(n=>n.matches),function Txe(i,e,t){let n,r=!1;return i&&"object"==typeof i?({bufferSize:n=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=i):n=i??1/0,fM({connector:()=>new jR(n,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}())}}H0.\u0275fac=function(e){return new(e||H0)(P(X5),P(Ox))},H0.\u0275cmp=K({type:H0,selectors:[["app-navigation-shell"]],decls:21,vars:15,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","",3,"routerLink",4,"ngFor","ngForOf"],[1,"content"],["color","primary"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[1,"toolbar-spacer"],["mat-button","","href","#",3,"click",4,"ngIf"],[1,"main-route-content"],["mat-list-item","",3,"routerLink"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],["mat-button","","href","#",3,"click"]],template:function(e,t){1&e&&(ye(0,"mat-sidenav-container",0)(1,"mat-sidenav",1,2),hr(3,"async"),hr(4,"async"),hr(5,"async"),ye(6,"mat-toolbar"),Xi(7,"ngx-three"),ke(),ye(8,"mat-nav-list"),Ft(9,Cwe,2,2,"a",3),ke()(),ye(10,"mat-sidenav-content",4)(11,"mat-toolbar",5),Ft(12,Mwe,3,0,"button",6),hr(13,"async"),ye(14,"span"),Xi(15,"ngx-three-demo"),ke(),Ye(16,"span",7),Ft(17,Ewe,4,0,"button",8),Ft(18,Swe,4,0,"button",8),ke(),ye(19,"div",9),Ye(20,"router-outlet"),ke()()()),2&e&&(se(1),Z("mode",wr(4,9,t.isHandset$)?"over":"side")("opened",!1===wr(5,11,t.isHandset$)),fn("role",wr(3,7,t.isHandset$)?"dialog":"navigation"),se(8),Z("ngForOf",t.routes),se(3),Z("ngIf",wr(13,13,t.isHandset$)),se(5),Z("ngIf",t.editorService.urls.length),se(1),Z("ngIf",t.editorService.urls.length))},dependencies:[$l,Jl,DS,ny,AV,_he,iwe,ewe,zV,dwe,g8,_8,o2,tS],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.content[_ngcontent-%COMP%]{height:100vh}.main-route-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{display:block;height:100%}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"],changeDetection:0});class Q0{constructor(){this.title="ngx-three-demo"}}Q0.\u0275fac=function(e){return new(e||Q0)},Q0.\u0275cmp=K({type:Q0,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&Ye(0,"app-navigation-shell")},dependencies:[H0]});const b8=G5();class Twe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=rr(-this._previousScrollPosition.left),e.style.top=rr(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,n=e.style,r=this._document.body.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),b8&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),b8&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,n=this._viewportRuler.getViewportSize();return t.scrollHeight>n.height||t.scrollWidth>n.width}}class Rwe{constructor(e,t,n,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class v8{enable(){}disable(){}attach(){}}function a2(i,e){return e.some(t=>i.bottom<t.top||i.top>t.bottom||i.right<t.left||i.left>t.right)}function A8(i,e){return e.some(t=>i.top<t.top||i.bottom>t.bottom||i.left<t.left||i.right>t.right)}class Iwe{constructor(e,t,n,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();a2(t,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Dwe=(()=>{class i{constructor(t,n,r,s){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new v8,this.close=o=>new Rwe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Twe(this._viewportRuler,this._document),this.reposition=o=>new Iwe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return i.\u0275fac=function(t){return new(t||i)(xe(Rp),xe(Su),xe(pt),xe(Jt))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Pwe{constructor(e){if(this.scrollStrategy=new v8,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const n of t)void 0!==e[n]&&(this[n]=e[n])}}}class kwe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let y8=(()=>{class i{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const n=this._attachedOverlays.indexOf(t);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(t){return new(t||i)(xe(Jt))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Lwe=(()=>{class i extends y8{constructor(t,n){super(t),this._ngZone=n,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(t){return new(t||i)(xe(Jt),xe(pt,8))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Bwe=(()=>{class i extends y8{constructor(t,n,r){super(t),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Mc(s)},this._clickListener=s=>{const o=Mc(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const d=l[c];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(o)||d.overlayElement.contains(a))break;const u=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>u.next(s)):u.next(s)}}}add(t){if(super.add(t),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return i.\u0275fac=function(t){return new(t||i)(xe(Jt),xe(Wn),xe(pt,8))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),x8=(()=>{class i{constructor(t,n){this._platform=n,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||iI()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const n=this._document.createElement("div");n.classList.add(t),iI()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}return i.\u0275fac=function(t){return new(t||i)(xe(Jt),xe(Wn))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Fwe{constructor(e,t,n,r,s,o,a,l,c,d=!1){this._portalOutlet=e,this._host=t,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new Ht,this._attachments=new Ht,this._detachments=new Ht,this._locationChanges=dn.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new Ht,this._outsidePointerEvents=new Ht,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(hs(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=rr(this._config.width),e.height=rr(this._config.height),e.minWidth=rr(this._config.minWidth),e.minHeight=rr(this._config.minHeight),e.maxWidth=rr(this._config.maxWidth),e.maxHeight=rr(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,n){const r=zx(t||[]).filter(s=>!!s);r.length&&(n?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(yn(hd(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const w8="cdk-overlay-connected-position-bounding-box",Owe=/([A-Za-z%]+)$/;class Nwe{get positions(){return this._preferredPositions}constructor(e,t,n,r,s){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ht,this._resizeSubscription=dn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(w8),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),d=this._getOverlayFit(c,t,n,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(d,c,n)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<d.visibleArea)&&(o={overlayFit:d,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>l&&(l=d,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&oh(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(w8),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,n){let r,s;if("center"==n.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==n.originX?o:a}return t.left<0&&(r-=t.left),s="center"==n.originY?e.top+e.height/2:"top"==n.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,n){let r,s;return r="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,n,r){const s=M8(t);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+s.height-n.height,m=this._subtractOverflows(s.width,0-o,o+s.width-n.width),g=this._subtractOverflows(s.height,h,f),_=m*g;return{visibleArea:_,isCompletelyWithinViewport:s.width*s.height===_,fitsInViewportVertically:g===s.height,fitsInViewportHorizontally:m==s.width}}_canFitWithFlexibleDimensions(e,t,n){if(this._hasFlexibleDimensions){const r=n.bottom-t.y,s=n.right-t.x,o=C8(this._overlayRef.getConfig().minHeight),a=C8(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=M8(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-n.top-e.y,0),c=Math.max(s.left-n.left-e.x,0);let d=0,u=0;return d=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-n.left-e.x:0,u=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-n.top-e.y:0,this._previousPushAmount={x:d,y:u},{x:e.x+d,y:e.y+u}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const n=this._getScrollVisibility(),r=new kwe(e,n);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=e.overlayY;n="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(e,t){const n=this._viewportRect,r=this._isRtl();let s,o,a,d,u,h;if("top"===t.overlayY)o=e.y,s=n.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=n.height-e.y+2*this._viewportMargin,s=n.height-a+this._viewportMargin;else{const f=Math.min(n.bottom-e.y+n.top,e.y),m=this._lastBoundingBoxSize.height;s=2*f,o=e.y-f,s>m&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-m/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)h=n.width-e.x+this._viewportMargin,d=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)u=e.x,d=n.right-e.x;else{const f=Math.min(n.right-e.x+n.left,e.x),m=this._lastBoundingBoxSize.width;d=2*f,u=e.x-f,d>m&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.x-m/2)}return{top:o,left:u,bottom:a,right:h,width:d,height:s}}_setBoundingBoxStyles(e,t){const n=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=rr(n.height),r.top=rr(n.top),r.bottom=rr(n.bottom),r.width=rr(n.width),r.left=rr(n.left),r.right=rr(n.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=rr(s)),o&&(r.maxWidth=rr(o))}this._lastBoundingBoxSize=n,oh(this._boundingBox.style,r)}_resetBoundingBoxStyles(){oh(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){oh(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();oh(n,this._getExactOverlayY(t,e,d)),oh(n,this._getExactOverlayX(t,e,d))}else n.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),n.transform=a.trim(),o.maxHeight&&(r?n.maxHeight=rr(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=rr(o.maxWidth):s&&(n.maxWidth="")),oh(this._pane.style,n)}_getExactOverlayY(e,t,n){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=rr(s.y),r}_getExactOverlayX(e,t,n){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=rr(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:A8(e,n),isOriginOutsideView:a2(e,n),isOverlayClipped:A8(t,n),isOverlayOutsideView:a2(t,n)}}_subtractOverflows(e,...t){return t.reduce((n,r)=>n-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&zx(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof zt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}}function oh(i,e){for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function C8(i){if("number"!=typeof i&&null!=i){const[e,t]=i.split(Owe);return t&&"px"!==t?null:parseFloat(e)}return i||null}function M8(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const E8="cdk-global-overlay-wrapper";class jwe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(E8),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=n,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,u=this._xOffset,h="rtl"===this._overlayRef.getConfig().direction;let f="",m="",g="";l?g="flex-start":"center"===d?(g="center",h?m=u:f=u):h?"left"===d||"end"===d?(g="flex-end",f=u):("right"===d||"start"===d)&&(g="flex-start",m=u):"left"===d||"start"===d?(g="flex-start",f=u):("right"===d||"end"===d)&&(g="flex-end",m=u),e.position=this._cssPosition,e.marginLeft=l?"0":f,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":m,t.justifyContent=g,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove(E8),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Uwe=(()=>{class i{constructor(t,n,r,s){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new jwe}flexibleConnectedTo(t){return new Nwe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(t){return new(t||i)(xe(Su),xe(Jt),xe(Wn),xe(x8))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Vwe=0,l2=(()=>{class i{constructor(t,n,r,s,o,a,l,c,d,u,h,f){this.scrollStrategies=t,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=d,this._location=u,this._outsideClickDispatcher=h,this._animationsModuleType=f}create(t){const n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),o=new Pwe(t);return o.direction=o.direction||this._directionality.value,new Fwe(s,n,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const n=this._document.createElement("div");return n.id="cdk-overlay-"+Vwe++,n.classList.add("cdk-overlay-pane"),t.appendChild(n),n}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get($h)),new gfe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(t){return new(t||i)(xe(Dwe),xe(x8),xe(Xl),xe(Uwe),xe(Lwe),xe(ms),xe(pt),xe(Jt),xe(Ha),xe(gA),xe(Bwe),xe(ts,8))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Hwe={provide:new je("cdk-connected-overlay-scroll-strategy"),deps:[l2],useFactory:function Gwe(i){return()=>i.scrollStrategies.reposition()}};let Qwe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({providers:[l2,Hwe],imports:[Wb,YV,nz,nz]}),i})(),$we=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[xn,Sa,Gx,xn]}),i})();const nCe={provide:new je("mat-select-scroll-strategy"),deps:[l2],useFactory:function iCe(i){return()=>i.scrollStrategies.reposition()}};let S8=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({providers:[nCe],imports:[Sa,Qwe,bV,xn,n0,$we,bV,xn]}),i})(),I8=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({imports:[xn,Sa,Xb]}),i})();const hCe=[hI,n2,bI,WV,r2,S8,pz,I8];class yg{}function D8(i){return new Ie(3e3,!1)}function qCe(){return typeof window<"u"&&typeof window.document<"u"}function c2(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ad(i){switch(i.length){case 0:return new e0;case 1:return i[0];default:return new ez(i)}}function P8(i,e,t,n,r=new Map,s=new Map){const o=[],a=[];let l=-1,c=null;if(n.forEach(d=>{const u=d.get("offset"),h=u==l,f=h&&c||new Map;d.forEach((m,g)=>{let _=g,p=m;if("offset"!==g)switch(_=e.normalizePropertyName(_,o),p){case"!":p=r.get(g);break;case Bl:p=s.get(g);break;default:p=e.normalizeStyleValue(g,_,p,o)}f.set(_,p)}),h||a.push(f),c=f,l=u}),o.length)throw function BCe(i){return new Ie(3502,!1)}();return a}function d2(i,e,t,n){switch(e){case"start":i.onStart(()=>n(t&&u2(t,"start",i)));break;case"done":i.onDone(()=>n(t&&u2(t,"done",i)));break;case"destroy":i.onDestroy(()=>n(t&&u2(t,"destroy",i)))}}function u2(i,e,t){const s=h2(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,t.totalTime??i.totalTime,!!t.disabled),o=i._data;return null!=o&&(s._data=o),s}function h2(i,e,t,n,r="",s=0,o){return{element:i,triggerName:e,fromState:t,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function uo(i,e,t){let n=i.get(e);return n||i.set(e,n=t),n}function k8(i){const e=i.indexOf(":");return[i.substring(1,e),i.slice(e+1)]}yg.\u0275fac=function(e){return new(e||yg)},yg.\u0275mod=oi({type:yg}),yg.\u0275inj=ni({imports:[hCe,hI,n2,bI,WV,r2,S8,pz,I8]});let f2=(i,e)=>!1,L8=(i,e,t)=>[],B8=null;function p2(i){const e=i.parentNode||i.host;return e===B8?null:e}(c2()||typeof Element<"u")&&(qCe()?(B8=(()=>document.documentElement)(),f2=(i,e)=>{for(;e;){if(e===i)return!0;e=p2(e)}return!1}):f2=(i,e)=>i.contains(e),L8=(i,e,t)=>{if(t)return Array.from(i.querySelectorAll(e));const n=i.querySelector(e);return n?[n]:[]});let ah=null,F8=!1;const O8=f2,N8=L8;let j8=(()=>{class i{validateStyleProperty(t){return function XCe(i){ah||(ah=function ZCe(){return typeof document<"u"?document.body:null}()||{},F8=!!ah.style&&"WebkitAppearance"in ah.style);let e=!0;return ah.style&&!function YCe(i){return"ebkit"==i.substring(1,6)}(i)&&(e=i in ah.style,!e&&F8&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in ah.style)),e}(t)}matchesElement(t,n){return!1}containsElement(t,n){return O8(t,n)}getParentElement(t){return p2(t)}query(t,n,r){return N8(t,n,r)}computeStyle(t,n,r){return r||""}animate(t,n,r,s,o,a=[],l){return new e0(r,s)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ge({token:i,factory:i.\u0275fac}),i})(),m2=(()=>{class i{}return i.NOOP=new j8,i})();const g2="ng-enter",FC="ng-leave",OC="ng-trigger",NC=".ng-trigger",V8="ng-animating",_2=".ng-animating";function Gl(i){if("number"==typeof i)return i;const e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:b2(parseFloat(e[1]),e[2])}function b2(i,e){return"s"===e?1e3*i:i}function jC(i,e,t){return i.hasOwnProperty("duration")?i:function JCe(i,e,t){let r,s=0,o="";if("string"==typeof i){const a=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(D8()),{duration:0,delay:0,easing:""};r=b2(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=b2(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=i;if(!t){let a=!1,l=e.length;r<0&&(e.push(function fCe(){return new Ie(3100,!1)}()),a=!0),s<0&&(e.push(function pCe(){return new Ie(3101,!1)}()),a=!0),a&&e.splice(l,0,D8())}return{duration:r,delay:s,easing:o}}(i,e,t)}function W0(i,e={}){return Object.keys(i).forEach(t=>{e[t]=i[t]}),e}function z8(i){const e=new Map;return Object.keys(i).forEach(t=>{e.set(t,i[t])}),e}function ld(i,e=new Map,t){if(t)for(let[n,r]of t)e.set(n,r);for(let[n,r]of i)e.set(n,r);return e}function H8(i,e,t){return t?e+":"+t+";":""}function Q8(i){let e="";for(let t=0;t<i.style.length;t++){const n=i.style.item(t);e+=H8(0,n,i.style.getPropertyValue(n))}for(const t in i.style)i.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=H8(0,nMe(t),i.style[t]));i.setAttribute("style",e)}function el(i,e,t){i.style&&(e.forEach((n,r)=>{const s=A2(r);t&&!t.has(r)&&t.set(r,i.style[s]),i.style[s]=n}),c2()&&Q8(i))}function lh(i,e){i.style&&(e.forEach((t,n)=>{const r=A2(n);i.style[r]=""}),c2()&&Q8(i))}function q0(i){return Array.isArray(i)?1==i.length?i[0]:$V(i):i}const v2=new RegExp("{{\\s*(.+?)\\s*}}","g");function W8(i){let e=[];if("string"==typeof i){let t;for(;t=v2.exec(i);)e.push(t[1]);v2.lastIndex=0}return e}function Y0(i,e,t){const n=i.toString(),r=n.replace(v2,(s,o)=>{let a=e[o];return null==a&&(t.push(function gCe(i){return new Ie(3003,!1)}()),a=""),a.toString()});return r==n?i:r}function UC(i){const e=[];let t=i.next();for(;!t.done;)e.push(t.value),t=i.next();return e}const iMe=/-+([a-z0-9])/g;function A2(i){return i.replace(iMe,(...e)=>e[1].toUpperCase())}function nMe(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ho(i,e,t){switch(e.type){case 7:return i.visitTrigger(e,t);case 0:return i.visitState(e,t);case 1:return i.visitTransition(e,t);case 2:return i.visitSequence(e,t);case 3:return i.visitGroup(e,t);case 4:return i.visitAnimate(e,t);case 5:return i.visitKeyframes(e,t);case 6:return i.visitStyle(e,t);case 8:return i.visitReference(e,t);case 9:return i.visitAnimateChild(e,t);case 10:return i.visitAnimateRef(e,t);case 11:return i.visitQuery(e,t);case 12:return i.visitStagger(e,t);default:throw function _Ce(i){return new Ie(3004,!1)}()}}function q8(i,e){return window.getComputedStyle(i)[e]}function cMe(i,e){const t=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function dMe(i,e,t){if(":"==i[0]){const l=function uMe(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(function DCe(i){return new Ie(3016,!1)}()),"* => *"}}(i,t);if("function"==typeof l)return void e.push(l);i=l}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return t.push(function ICe(i){return new Ie(3015,!1)}()),e;const r=n[1],s=n[2],o=n[3];e.push(Y8(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(Y8(o,r))}(n,t,e)):t.push(i),t}const HC=new Set(["true","1"]),QC=new Set(["false","0"]);function Y8(i,e){const t=HC.has(i)||QC.has(i),n=HC.has(e)||QC.has(e);return(r,s)=>{let o="*"==i||i==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?HC.has(i):QC.has(i)),!a&&n&&"boolean"==typeof s&&(a=s?HC.has(e):QC.has(e)),o&&a}}const hMe=new RegExp("s*:selfs*,?","g");function y2(i,e,t,n){return new fMe(i).build(e,t,n)}class fMe{constructor(e){this._driver=e}build(e,t,n){const r=new gMe(t);return this._resetContextStyleTimingState(r),ho(this,q0(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function vCe(){return new Ie(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);n+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function ACe(){return new Ie(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){const s=new Set,o=r||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{W8(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(UC(s.values()),t.errors.push(function yCe(i,e){return new Ie(3008,!1)}()))}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=ho(this,q0(e.animation),t);return{type:1,matchers:cMe(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:ch(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(n=>ho(this,n,t)),options:ch(e.options)}}visitGroup(e,t){const n=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=n;const a=ho(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:ch(e.options)}}visitAnimate(e,t){const n=function bMe(i,e){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return x2(jC(i,e).duration,0,"");const t=i;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=x2(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=jC(t,e);return x2(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=n;let r,s=e.styles?e.styles:Rs({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};n.easing&&(c.easing=n.easing),o=Rs(c)}t.currentTime+=n.duration+n.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===Bl?n.push(a):t.errors.push(new Ie(3002,!1)):n.push(z8(a));let s=!1,o=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:n,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;n&&s>0&&(s-=n.duration+n.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),d=c.get(l);let u=!0;d&&(s!=r&&s>=d.startTime&&r<=d.endTime&&(t.errors.push(function wCe(i,e,t,n,r){return new Ie(3010,!1)}()),u=!1),s=d.startTime),u&&c.set(l,{startTime:s,endTime:r}),t.options&&function tMe(i,e,t){const n=e.params||{},r=W8(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||t.push(function mCe(i){return new Ie(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function CCe(){return new Ie(3011,!1)}()),n;let s=0;const o=[];let a=!1,l=!1,c=0;const d=e.steps.map(p=>{const v=this._makeStyleAst(p,t);let b=null!=v.offset?v.offset:function _Me(i){if("string"==typeof i)return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(t instanceof Map&&t.has("offset")){const n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const t=i;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(v.styles),y=0;return null!=b&&(s++,y=v.offset=b),l=l||y<0||y>1,a=a||y<c,c=y,o.push(y),v});l&&t.errors.push(function MCe(){return new Ie(3012,!1)}()),a&&t.errors.push(function ECe(){return new Ie(3200,!1)}());const u=e.steps.length;let h=0;s>0&&s<u?t.errors.push(function SCe(){return new Ie(3202,!1)}()):0==s&&(h=1/(u-1));const f=u-1,m=t.currentTime,g=t.currentAnimateTimings,_=g.duration;return d.forEach((p,v)=>{const b=h>0?v==f?1:h*v:o[v],y=b*_;t.currentTime=m+g.delay+y,g.duration=y,this._validateStyleAst(p,t),p.offset=b,n.styles.push(p)}),n}visitReference(e,t){return{type:8,animation:ho(this,q0(e.animation),t),options:ch(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:ch(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ch(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function pMe(i){const e=!!i.split(/\s*,\s*/).find(t=>":self"==t);return e&&(i=i.replace(hMe,"")),i=i.replace(/@\*/g,NC).replace(/@\w+/g,t=>NC+"-"+t.slice(1)).replace(/:animating/g,_2),[i,e]}(e.selector);t.currentQuerySelector=n.length?n+" "+s:s,uo(t.collectedStyles,t.currentQuerySelector,new Map);const a=ho(this,q0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:ch(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function TCe(){return new Ie(3013,!1)}());const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:jC(e.timings,t.errors,!0);return{type:12,animation:ho(this,q0(e.animation),t),timings:n,options:null}}}class gMe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ch(i){return i?(i=W0(i)).params&&(i.params=function mMe(i){return i?W0(i):null}(i.params)):i={},i}function x2(i,e,t){return{duration:i,delay:e,easing:t}}function w2(i,e,t,n,r,s,o=null,a=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class WC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const yMe=new RegExp(":enter","g"),wMe=new RegExp(":leave","g");function C2(i,e,t,n,r,s=new Map,o=new Map,a,l,c=[]){return(new CMe).buildKeyframes(i,e,t,n,r,s,o,a,l,c)}class CMe{buildKeyframes(e,t,n,r,s,o,a,l,c,d=[]){c=c||new WC;const u=new M2(e,t,c,r,s,d,[]);u.options=l;const h=l.delay?Gl(l.delay):0;u.currentTimeline.delayNextStep(h),u.currentTimeline.setStyles([o],null,u.errors,l),ho(this,n,u);const f=u.timelines.filter(m=>m.containsAnimation());if(f.length&&a.size){let m;for(let g=f.length-1;g>=0;g--){const _=f[g];if(_.element===t){m=_;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([a],null,u.errors,l)}return f.length?f.map(m=>m.buildKeyframes()):[w2(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.get(t.element);if(n){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,n){for(const r of e){const s=r?.delay;if(s){const o="number"==typeof s?s:Gl(Y0(s,r?.params??{},t.errors));n.delayNextStep(o)}}}_visitSubInstructions(e,t,n){let s=t.currentTimeline.currentTime;const o=null!=n.duration?Gl(n.duration):null,a=null!=n.delay?Gl(n.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ho(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=qC);const o=Gl(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>ho(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Gl(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),ho(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return jC(t.params?Y0(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(n.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(s):n.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,r=t.currentTimeline.duration,s=n.duration,a=t.createSubContext().currentTimeline;a.easing=n.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Gl(r.delay):0;s&&(6===t.previousNode.type||0==n&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=qC);let o=n;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{t.currentQueryIndex=d;const u=t.createSubContext(e.options,c);s&&u.delayNextStep(s),c===t.element&&(l=u.currentTimeline),ho(this,e.animation,u),u.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,u.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime}const d=t.currentTimeline;l&&d.delayNextStep(l);const u=d.currentTime;ho(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)}}const qC={};class M2{constructor(e,t,n,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=qC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new YC(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let r=this.options;null!=n.duration&&(r.duration=Gl(n.duration)),null!=n.delay&&(r.delay=Gl(n.delay));const s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Y0(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(r=>{n[r]=t[r]})}}return e}createSubContext(e=null,t,n){const r=t||this.element,s=new M2(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=qC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},s=new MMe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(yMe,"."+this._enterClassName)).replace(wMe,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=n);0!==n&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),a.push(...c)}return!s&&0==a.length&&o.push(function RCe(i){return new Ie(3014,!1)}()),a}}class YC{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new YC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||Bl),this._currentKeyframe.set(t,Bl);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function EMe(i,e){const t=new Map;let n;return i.forEach(r=>{if("*"===r){n=n||e.keys();for(let s of n)t.set(s,Bl)}else ld(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=Y0(l,s,n);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Bl),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{const r=this._styleSummary.get(n);(!r||t.time>r.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=ld(a,new Map,this._backFill);c.forEach((d,u)=>{"!"===d?e.add(u):d===Bl&&t.add(u)}),n||c.set("offset",l/this.duration),r.push(c)});const s=e.size?UC(e.values()):[],o=t.size?UC(t.values()):[];if(n){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return w2(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class MMe extends YC{constructor(e,t,n,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=n+t,a=t/o,l=ld(e[0]);l.set("offset",0),s.push(l);const c=ld(e[0]);c.set("offset",K8(a)),s.push(c);const d=e.length-1;for(let u=1;u<=d;u++){let h=ld(e[u]);const f=h.get("offset");h.set("offset",K8((t+f*n)/o)),s.push(h)}n=o,t=0,r="",e=s}return w2(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}}function K8(i,e=3){const t=Math.pow(10,e-1);return Math.round(i*t)/t}class E2{}const SMe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class TMe extends E2{normalizePropertyName(e,t){return A2(e)}normalizeStyleValue(e,t,n,r){let s="";const o=n.toString().trim();if(SMe.has(t)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function bCe(i,e){return new Ie(3005,!1)}())}return o+s}}function $8(i,e,t,n,r,s,o,a,l,c,d,u,h){return{type:0,element:i,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:n,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:u,errors:h}}const S2={};class J8{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return function RMe(i,e,t,n,r){return i.some(s=>s(e,t,n,r))}(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,n):new Map}build(e,t,n,r,s,o,a,l,c,d){const u=[],h=this.ast.options&&this.ast.options.params||S2,m=this.buildStyles(n,a&&a.params||S2,u),g=l&&l.params||S2,_=this.buildStyles(r,g,u),p=new Set,v=new Map,b=new Map,y="void"===r,x={params:IMe(g,h),delay:this.ast.options?.delay},w=d?[]:C2(e,t,this.ast.animation,s,o,m,_,x,c,u);let E=0;if(w.forEach(C=>{E=Math.max(C.duration+C.delay,E)}),u.length)return $8(t,this._triggerName,n,r,y,m,_,[],[],v,b,E,u);w.forEach(C=>{const T=C.element,k=uo(v,T,new Set);C.preStyleProps.forEach(B=>k.add(B));const U=uo(b,T,new Set);C.postStyleProps.forEach(B=>U.add(B)),T!==t&&p.add(T)});const S=UC(p.values());return $8(t,this._triggerName,n,r,y,m,_,w,S,v,b,E)}}function IMe(i,e){const t=W0(e);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(t[n]=i[n]);return t}class DMe{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){const n=new Map,r=W0(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Y0(o,r,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),n.set(a,o)})}),n}}class kMe{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new DMe(r.style,r.options&&r.options.params||{},n))}),eQ(this.states,"true","1"),eQ(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new J8(e,r,this.states))}),this.fallbackTransition=function LMe(i,e,t){return new J8(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(o=>o.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function eQ(i,e,t){i.has(e)?i.has(t)||i.set(t,i.get(e)):i.has(t)&&i.set(e,i.get(t))}const BMe=new WC;class FMe{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const n=[],s=y2(this._driver,t,n,[]);if(n.length)throw function FCe(i){return new Ie(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,n){const r=e.element,s=P8(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=C2(this._driver,t,s,g2,FC,new Map,new Map,n,BMe,r),o.forEach(d=>{const u=uo(a,d.element,new Map);d.postStyleProps.forEach(h=>u.set(h,null))})):(r.push(function OCe(){return new Ie(3300,!1)}()),o=[]),r.length)throw function NCe(i){return new Ie(3504,!1)}();a.forEach((d,u)=>{d.forEach((h,f)=>{d.set(f,this._driver.computeStyle(u,f,Bl))})});const c=ad(o.map(d=>{const u=a.get(d.element);return this._buildPlayer(d,new Map,u)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function jCe(i){return new Ie(3301,!1)}();return t}listen(e,t,n,r){const s=h2(t,"","","");return d2(this._getPlayer(e),n,s,r),()=>{}}command(e,t,n,r){if("register"==n)return void this.register(e,r[0]);if("create"==n)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const tQ="ng-animate-queued",T2="ng-animate-disabled",VMe=[],iQ={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},zMe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},jo="__ng_removed";class R2{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=function WMe(i){return i??null}(n?e.value:e),n){const s=W0(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const n=this.options.params;Object.keys(t).forEach(r=>{null==n[r]&&(n[r]=t[r])})}}}const X0="void",I2=new R2(X0);class GMe{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Uo(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.has(t))throw function UCe(i,e){return new Ie(3302,!1)}();if(null==n||0==n.length)throw function VCe(i){return new Ie(3303,!1)}();if(!function qMe(i){return"start"==i||"done"==i}(n))throw function zCe(i,e){return new Ie(3400,!1)}();const s=uo(this._elementListeners,e,[]),o={name:t,phase:n,callback:r};s.push(o);const a=uo(this._engine.statesByElement,e,new Map);return a.has(t)||(Uo(e,OC),Uo(e,OC+"-"+t),a.set(t,I2)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function GCe(i){return new Ie(3401,!1)}();return t}trigger(e,t,n,r=!0){const s=this._getTrigger(t),o=new D2(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Uo(e,OC),Uo(e,OC+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new R2(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=I2),c.value!==X0&&l.value===c.value){if(!function ZMe(i,e){const t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||i[s]!==e[s])return!1}return!0}(l.params,c.params)){const g=[],_=s.matchStyles(l.value,l.params,g),p=s.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{lh(e,_),el(e,p)})}return}const h=uo(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let f=s.matchTransition(l.value,c.value,e,c.params),m=!1;if(!f){if(!r)return;f=s.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:m}),m||(Uo(e,tQ),o.onStart(()=>{xg(e,tQ)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);const _=this._engine.playersByElement.get(e);if(_){let p=_.indexOf(o);p>=0&&_.splice(p,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,NC,!0);n.forEach(r=>{if(r[jo])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,n,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const d=this.trigger(e,c,X0,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),n&&ad(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=n.get(o)||I2,d=new R2(X0),u=new D2(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:d,player:u,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{const s=e[jo];(!s||s===iQ)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){Uo(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==n.triggerName){const l=h2(s,n.triggerName,n.fromState.value,n.toState.value);l._data=e,d2(n.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((n,r)=>{const s=n.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(n=>n.element===e)||t,t}}class HMe{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){const n=new GMe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=n.indexOf(l);n.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||n.unshift(e)}else n.push(e);return r.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,n,r){if(XC(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!XC(t))return;const s=t[jo];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Uo(e,T2)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),xg(e,T2))}removeNode(e,t,n,r){if(XC(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,n,r,s){this.collectedLeaveElements.push(t),t[jo]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,n,r,s){return XC(t)?this._fetchNamespace(e).listen(t,n,r,s):()=>{}}_buildInstruction(e,t,n,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,NC,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,_2,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ad(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[jo];if(t&&t.setForRemoval){if(e[jo]=iQ,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(T2)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Uo(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],t.length?ad(t).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(e){throw function HCe(i){return new Ie(3402,!1)}()}_flushAnimations(e,t){const n=new WC,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(L=>{d.add(L);const V=this.driver.query(L,".ng-animate-queued",!0);for(let O=0;O<V.length;O++)d.add(V[O])});const u=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=sQ(h,this.collectedEnterElements),m=new Map;let g=0;f.forEach((L,V)=>{const O=g2+g++;m.set(V,O),L.forEach(Q=>Uo(Q,O))});const _=[],p=new Set,v=new Set;for(let L=0;L<this.collectedLeaveElements.length;L++){const V=this.collectedLeaveElements[L],O=V[jo];O&&O.setForRemoval&&(_.push(V),p.add(V),O.hasAnimation?this.driver.query(V,".ng-star-inserted",!0).forEach(Q=>p.add(Q)):v.add(V))}const b=new Map,y=sQ(h,Array.from(p));y.forEach((L,V)=>{const O=FC+g++;b.set(V,O),L.forEach(Q=>Uo(Q,O))}),e.push(()=>{f.forEach((L,V)=>{const O=m.get(V);L.forEach(Q=>xg(Q,O))}),y.forEach((L,V)=>{const O=b.get(V);L.forEach(Q=>xg(Q,O))}),_.forEach(L=>{this.processLeaveNode(L)})});const x=[],w=[];for(let L=this._namespaceList.length-1;L>=0;L--)this._namespaceList[L].drainQueuedTransitions(t).forEach(O=>{const Q=O.player,re=O.element;if(x.push(Q),this.collectedEnterElements.length){const I=re[jo];if(I&&I.setForMove){if(I.previousTriggersValues&&I.previousTriggersValues.has(O.triggerName)){const ue=I.previousTriggersValues.get(O.triggerName),Me=this.statesByElement.get(O.element);if(Me&&Me.has(O.triggerName)){const me=Me.get(O.triggerName);me.value=ue,Me.set(O.triggerName,me)}}return void Q.destroy()}}const _e=!u||!this.driver.containsElement(u,re),de=b.get(re),Y=m.get(re),q=this._buildInstruction(O,n,Y,de,_e);if(q.errors&&q.errors.length)return void w.push(q);if(_e)return Q.onStart(()=>lh(re,q.fromStyles)),Q.onDestroy(()=>el(re,q.toStyles)),void r.push(Q);if(O.isFallbackTransition)return Q.onStart(()=>lh(re,q.fromStyles)),Q.onDestroy(()=>el(re,q.toStyles)),void r.push(Q);const te=[];q.timelines.forEach(I=>{I.stretchStartingKeyframe=!0,this.disabledNodes.has(I.element)||te.push(I)}),q.timelines=te,n.append(re,q.timelines),o.push({instruction:q,player:Q,element:re}),q.queriedElements.forEach(I=>uo(a,I,[]).push(Q)),q.preStyleProps.forEach((I,ue)=>{if(I.size){let Me=l.get(ue);Me||l.set(ue,Me=new Set),I.forEach((me,He)=>Me.add(He))}}),q.postStyleProps.forEach((I,ue)=>{let Me=c.get(ue);Me||c.set(ue,Me=new Set),I.forEach((me,He)=>Me.add(He))})});if(w.length){const L=[];w.forEach(V=>{L.push(function QCe(i,e){return new Ie(3505,!1)}())}),x.forEach(V=>V.destroy()),this.reportError(L)}const E=new Map,S=new Map;o.forEach(L=>{const V=L.element;n.has(V)&&(S.set(V,V),this._beforeAnimationBuild(L.player.namespaceId,L.instruction,E))}),r.forEach(L=>{const V=L.element;this._getPreviousPlayers(V,!1,L.namespaceId,L.triggerName,null).forEach(Q=>{uo(E,V,[]).push(Q),Q.destroy()})});const C=_.filter(L=>aQ(L,l,c)),T=new Map;rQ(T,this.driver,v,c,Bl).forEach(L=>{aQ(L,l,c)&&C.push(L)});const U=new Map;f.forEach((L,V)=>{rQ(U,this.driver,new Set(L),l,"!")}),C.forEach(L=>{const V=T.get(L),O=U.get(L);T.set(L,new Map([...Array.from(V?.entries()??[]),...Array.from(O?.entries()??[])]))});const B=[],j=[],H={};o.forEach(L=>{const{element:V,player:O,instruction:Q}=L;if(n.has(V)){if(d.has(V))return O.onDestroy(()=>el(V,Q.toStyles)),O.disabled=!0,O.overrideTotalTime(Q.totalTime),void r.push(O);let re=H;if(S.size>1){let de=V;const Y=[];for(;de=de.parentNode;){const q=S.get(de);if(q){re=q;break}Y.push(de)}Y.forEach(q=>S.set(q,re))}const _e=this._buildAnimation(O.namespaceId,Q,E,s,U,T);if(O.setRealPlayer(_e),re===H)B.push(O);else{const de=this.playersByElement.get(re);de&&de.length&&(O.parentPlayer=ad(de)),r.push(O)}}else lh(V,Q.fromStyles),O.onDestroy(()=>el(V,Q.toStyles)),j.push(O),d.has(V)&&r.push(O)}),j.forEach(L=>{const V=s.get(L.element);if(V&&V.length){const O=ad(V);L.setRealPlayer(O)}}),r.forEach(L=>{L.parentPlayer?L.syncPlayerEvents(L.parentPlayer):L.destroy()});for(let L=0;L<_.length;L++){const V=_[L],O=V[jo];if(xg(V,FC),O&&O.hasAnimation)continue;let Q=[];if(a.size){let _e=a.get(V);_e&&_e.length&&Q.push(..._e);let de=this.driver.query(V,_2,!0);for(let Y=0;Y<de.length;Y++){let q=a.get(de[Y]);q&&q.length&&Q.push(...q)}}const re=Q.filter(_e=>!_e.destroyed);re.length?YMe(this,V,re):this.processLeaveNode(V)}return _.length=0,B.forEach(L=>{this.players.push(L),L.onDone(()=>{L.destroy();const V=this.players.indexOf(L);this.players.splice(V,1)}),L.play()}),B}elementContainsData(e,t){let n=!1;const r=t[jo];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==X0;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(n||r)&&(o=o.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,n){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,d=c!==s,u=uo(n,c,[]);this._getPreviousPlayers(c,d,o,a,t.toState).forEach(f=>{const m=f.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),f.destroy(),u.push(f)})}lh(s,t.fromStyles)}_buildAnimation(e,t,n,r,s,o){const a=t.triggerName,l=t.element,c=[],d=new Set,u=new Set,h=t.timelines.map(m=>{const g=m.element;d.add(g);const _=g[jo];if(_&&_.removedBeforeQueried)return new e0(m.duration,m.delay);const p=g!==l,v=function XMe(i){const e=[];return oQ(i,e),e}((n.get(g)||VMe).map(E=>E.getRealPlayer())).filter(E=>!!E.element&&E.element===g),b=s.get(g),y=o.get(g),x=P8(0,this._normalizer,0,m.keyframes,b,y),w=this._buildPlayer(m,x,v);if(m.subTimeline&&r&&u.add(g),p){const E=new D2(e,a,g);E.setRealPlayer(w),c.push(E)}return w});c.forEach(m=>{uo(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>function QMe(i,e,t){let n=i.get(e);if(n){if(n.length){const r=n.indexOf(t);n.splice(r,1)}0==n.length&&i.delete(e)}return n}(this.playersByQueriedElement,m.element,m))}),d.forEach(m=>Uo(m,V8));const f=ad(h);return f.onDestroy(()=>{d.forEach(m=>xg(m,V8)),el(l,t.toStyles)}),u.forEach(m=>{uo(r,m,[]).push(f)}),f}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new e0(e.duration,e.delay)}}class D2{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new e0,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(r=>d2(e,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){uo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function XC(i){return i&&1===i.nodeType}function nQ(i,e){const t=i.style.display;return i.style.display=e??"none",t}function rQ(i,e,t,n,r){const s=[];t.forEach(l=>s.push(nQ(l)));const o=[];n.forEach((l,c)=>{const d=new Map;l.forEach(u=>{const h=e.computeStyle(c,u,r);d.set(u,h),(!h||0==h.length)&&(c[jo]=zMe,o.push(c))}),i.set(c,d)});let a=0;return t.forEach(l=>nQ(l,s[a++])),o}function sQ(i,e){const t=new Map;if(i.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function Uo(i,e){i.classList?.add(e)}function xg(i,e){i.classList?.remove(e)}function YMe(i,e,t){ad(t).onDone(()=>i.processLeaveNode(e))}function oQ(i,e){for(let t=0;t<i.length;t++){const n=i[t];n instanceof ez?oQ(n.players,e):e.push(n)}}function aQ(i,e,t){const n=t.get(i);if(!n)return!1;let r=e.get(i);return r?n.forEach(s=>r.add(s)):e.set(i,n),t.delete(i),!0}class ZC{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new HMe(e,t,n),this._timelineEngine=new FMe(e,t,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,n,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],d=y2(this._driver,s,l,[]);if(l.length)throw function LCe(i,e){return new Ie(3404,!1)}();a=function PMe(i,e,t){return new kMe(i,e,t)}(r,d,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if("@"==n.charAt(0)){const[s,o]=k8(n);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,s){if("@"==n.charAt(0)){const[o,a]=k8(n);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,n,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let $Me=(()=>{class i{constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(t);s||i.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&el(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(el(this._element,this._initialStyles),this._endStyles&&(el(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(lh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(lh(this._element,this._endStyles),this._endStyles=null),el(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function P2(i){let e=null;return i.forEach((t,n)=>{(function JMe(i){return"display"===i||"position"===i})(n)&&(e=e||new Map,e.set(n,t))}),e}class lQ{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&e.set(r,this._finished?n:q8(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class e1e{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return O8(e,t)}getParentElement(e){return p2(e)}query(e,t,n){return N8(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}animate(e,t,n,r,s,o=[]){const l={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,d=o.filter(f=>f instanceof lQ);(function rMe(i,e){return 0===i||0===e})(n,r)&&d.forEach(f=>{f.currentSnapshot.forEach((m,g)=>c.set(g,m))});let u=function eMe(i){return i.length?i[0]instanceof Map?i:i.map(e=>z8(e)):[]}(t).map(f=>ld(f));u=function sMe(i,e,t){if(t.size&&e.length){let n=e[0],r=[];if(t.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,q8(i,a)))}}return e}(e,u,c);const h=function KMe(i,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=P2(e[0]),e.length>1&&(n=P2(e[e.length-1]))):e instanceof Map&&(t=P2(e)),t||n?new $Me(i,t,n):null}(e,u);return new lQ(e,u,l,h)}}let t1e=(()=>{class i extends KV{constructor(t,n){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(n.body,{id:"0",encapsulation:Go.None,styles:[],data:{animation:[]}})}build(t){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?$V(t):t;return cQ(this._renderer,null,n,"register",[r]),new i1e(n,this._renderer)}}return i.\u0275fac=function(t){return new(t||i)(xe(Zg),xe(Jt))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac}),i})();class i1e extends Mfe{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new n1e(this._id,e,t||{},this._renderer)}}class n1e{constructor(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return cQ(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function cQ(i,e,t,n,r){return i.setProperty(e,`@@${t}:${n}`,r)}const dQ="@.disabled";let r1e=(()=>{class i{constructor(t,n,r){this.delegate=t,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,n){const s=this.delegate.createRenderer(t,n);if(!(t&&n&&n.data&&n.data.animation)){let d=this._rendererCache.get(s);return d||(d=new uQ("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,d)),d}const o=n.id,a=n.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=d=>{Array.isArray(d)?d.forEach(l):this.engine.registerTrigger(o,a,t,d.name,d)};return n.data.animation.forEach(l),new s1e(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,n,r){t>=0&&t<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(t){return new(t||i)(xe(Zg),xe(ZC),xe(pt))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac}),i})();class uQ{constructor(e,t,n,r){this.namespaceId=e,this.delegate=t,this.engine=n,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){"@"==t.charAt(0)&&t==dQ?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class s1e extends uQ{constructor(e,t,n,r,s){super(t,n,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&t==dQ?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if("@"==t.charAt(0)){const r=function o1e(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function a1e(i){const e=i.indexOf(".");return[i.substring(0,e),i.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,n,a)})}return this.delegate.listen(e,t,n)}}let l1e=(()=>{class i extends ZC{constructor(t,n,r,s){super(t.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(t){return new(t||i)(xe(Jt),xe(m2),xe(E2),xe($h))},i.\u0275prov=Ge({token:i,factory:i.\u0275fac}),i})();const hQ=[{provide:KV,useClass:t1e},{provide:E2,useFactory:function c1e(){return new TMe}},{provide:ZC,useClass:l1e},{provide:Zg,useFactory:function d1e(i,e,t){return new r1e(i,e,t)},deps:[DA,ZC,pt]}],k2=[{provide:m2,useFactory:()=>new e1e},{provide:ts,useValue:"BrowserAnimations"},...hQ],fQ=[{provide:m2,useClass:j8},{provide:ts,useValue:"NoopAnimations"},...hQ];let u1e=(()=>{class i{static withConfig(t){return{ngModule:i,providers:t.disableAnimations?fQ:k2}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=oi({type:i}),i.\u0275inj=ni({providers:k2,imports:[B3]}),i})();class wg{}wg.\u0275fac=function(e){return new(e||wg)},wg.\u0275mod=oi({type:wg,bootstrap:[Q0]}),wg.\u0275inj=ni({providers:[{provide:nw,useValue:{fullLibraryLoader:()=>uh.e(225).then(uh.bind(uh,7225))}},Ox],imports:[B3,vg,Ip,yg,iye,Ype,u1e,wue,r2,hI,wwe,bI,n2]}),gJ().bootstrapModule(wg).catch(i=>console.error(i))}},eM=>{eM(eM.s=508)}]);