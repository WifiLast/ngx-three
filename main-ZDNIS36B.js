import{a as ce,b as Ft,c as BS,e as P4,g as xi}from"./chunk-GAL4ENT6.js";function ZP(n,e){return Object.is(n,e)}var Qn=null,zp=!1,HS=1,ro=Symbol("SIGNAL");function _i(n){let e=Qn;return Qn=n,e}function QP(){return Qn}function F4(){return zp}var dd={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function nv(n){if(zp)throw new Error("");if(Qn===null)return;Qn.consumerOnSignalRead(n);let e=Qn.nextProducerIndex++;if(ov(Qn),e<Qn.producerNode.length&&Qn.producerNode[e]!==n&&Hp(Qn)){let t=Qn.producerNode[e];rv(t,Qn.producerIndexOfThis[e])}Qn.producerNode[e]!==n&&(Qn.producerNode[e]=n,Qn.producerIndexOfThis[e]=Hp(Qn)?iF(n,Qn,e):0),Qn.producerLastReadVersion[e]=n.version}function k4(){HS++}function KP(n){if(!(Hp(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===HS)){if(!n.producerMustRecompute(n)&&!Wp(n)){YP(n);return}n.producerRecomputeValue(n),YP(n)}}function JP(n){if(n.liveConsumerNode===void 0)return;let e=zp;zp=!0;try{for(let t of n.liveConsumerNode)t.dirty||tF(t)}finally{zp=e}}function eF(){return Qn?.consumerAllowSignalWrites!==!1}function tF(n){n.dirty=!0,JP(n),n.consumerMarkedDirty?.(n)}function YP(n){n.dirty=!1,n.lastCleanEpoch=HS}function Yu(n){return n&&(n.nextProducerIndex=0),_i(n)}function Gp(n,e){if(_i(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Hp(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)rv(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Wp(n){ov(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(KP(t),i!==t.version))return!0}return!1}function Zu(n){if(ov(n),Hp(n))for(let e=0;e<n.producerNode.length;e++)rv(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function iF(n,e,t){if(nF(n),n.liveConsumerNode.length===0&&rF(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=iF(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function rv(n,e){if(nF(n),n.liveConsumerNode.length===1&&rF(n))for(let i=0;i<n.producerNode.length;i++)rv(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];ov(r),r.producerIndexOfThis[i]=e}}function Hp(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ov(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function nF(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function rF(n){return n.producerNode!==void 0}function oF(n){let e=Object.create(O4);e.computation=n;let t=()=>{if(KP(e),nv(e),e.value===iv)throw e.error;return e.value};return t[ro]=e,t}var US=Symbol("UNSET"),VS=Symbol("COMPUTING"),iv=Symbol("ERRORED"),O4=Ft(ce({},dd),{value:US,dirty:!0,error:null,equal:ZP,kind:"computed",producerMustRecompute(n){return n.value===US||n.value===VS},producerRecomputeValue(n){if(n.value===VS)throw new Error("Detected cycle in computations.");let e=n.value;n.value=VS;let t=Yu(n),i,r=!1;try{i=n.computation(),_i(null),r=e!==US&&e!==iv&&i!==iv&&n.equal(e,i)}catch(o){i=iv,n.error=o}finally{Gp(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function j4(){throw new Error}var sF=j4;function aF(){sF()}function lF(n){sF=n}var N4=null;function cF(n){let e=Object.create(GS);e.value=n;let t=()=>(nv(e),e.value);return t[ro]=e,t}function sv(n,e){eF()||aF(),n.equal(n.value,e)||(n.value=e,L4(n))}function dF(n,e){eF()||aF(),sv(n,e(n.value))}var GS=Ft(ce({},dd),{equal:ZP,value:void 0,kind:"signal"});function L4(n){n.version++,k4(),JP(n),N4?.()}function uF(n,e,t){let i=Object.create(B4);t&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=e;let r=l=>{i.cleanupFn=l};function o(l){return l.fn===null&&l.schedule===null}function s(l){o(l)||(Zu(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=zS)}let a=()=>{if(i.fn===null)return;if(F4())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(i.dirty=!1,i.hasRun&&!Wp(i))return;i.hasRun=!0;let l=Yu(i);try{i.cleanupFn(),i.cleanupFn=zS,i.fn(r)}finally{Gp(i,l)}};return i.ref={notify:()=>tF(i),run:a,cleanup:()=>i.cleanupFn(),destroy:()=>s(i),[ro]:i},i.ref}var zS=()=>{},B4=Ft(ce({},dd),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:zS});function Ct(n){return typeof n=="function"}function Qu(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var av=Qu(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ud(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var bi=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(Ct(i))try{i()}catch(o){e=o instanceof av?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{hF(o)}catch(s){e=e??[],s instanceof av?e=[...e,...s.errors]:e.push(s)}}if(e)throw new av(e)}}add(e){var t;if(e&&e!==this)if(this.closed)hF(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ud(t,e)}remove(e){let{_finalizers:t}=this;t&&ud(t,e),e instanceof n&&e._removeParent(this)}};bi.EMPTY=(()=>{let n=new bi;return n.closed=!0,n})();var WS=bi.EMPTY;function lv(n){return n instanceof bi||n&&"closed"in n&&Ct(n.remove)&&Ct(n.add)&&Ct(n.unsubscribe)}function hF(n){Ct(n)?n():n.unsubscribe()}var Rs={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ku={setTimeout(n,e,...t){let{delegate:i}=Ku;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ku;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function cv(n){Ku.setTimeout(()=>{let{onUnhandledError:e}=Rs;if(e)e(n);else throw n})}function $p(){}var fF=$S("C",void 0,void 0);function pF(n){return $S("E",void 0,n)}function mF(n){return $S("N",n,void 0)}function $S(n,e,t){return{kind:n,value:e,error:t}}var hd=null;function Ju(n){if(Rs.useDeprecatedSynchronousErrorHandling){let e=!hd;if(e&&(hd={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=hd;if(hd=null,t)throw i}}else n()}function gF(n){Rs.useDeprecatedSynchronousErrorHandling&&hd&&(hd.errorThrown=!0,hd.error=n)}var fd=class extends bi{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,lv(e)&&e.add(this)):this.destination=z4}static create(e,t,i){return new Cs(e,t,i)}next(e){this.isStopped?XS(mF(e),this):this._next(e)}error(e){this.isStopped?XS(pF(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?XS(fF,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},U4=Function.prototype.bind;function qS(n,e){return U4.call(n,e)}var YS=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){dv(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){dv(i)}else dv(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){dv(t)}}},Cs=class extends fd{constructor(e,t,i){super();let r;if(Ct(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Rs.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&qS(e.next,o),error:e.error&&qS(e.error,o),complete:e.complete&&qS(e.complete,o)}):r=e}this.destination=new YS(r)}};function dv(n){Rs.useDeprecatedSynchronousErrorHandling?gF(n):cv(n)}function V4(n){throw n}function XS(n,e){let{onStoppedNotification:t}=Rs;t&&Ku.setTimeout(()=>t(n,e))}var z4={closed:!0,next:$p,error:V4,complete:$p};var eh=typeof Symbol=="function"&&Symbol.observable||"@@observable";function $r(n){return n}function ZS(...n){return QS(n)}function QS(n){return n.length===0?$r:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var Ot=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=G4(t)?t:new Cs(t,i,r);return Ju(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=_F(i),new i((r,o)=>{let s=new Cs({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[eh](){return this}pipe(...t){return QS(t)(this)}toPromise(t){return t=_F(t),new t((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function _F(n){var e;return(e=n??Rs.Promise)!==null&&e!==void 0?e:Promise}function H4(n){return n&&Ct(n.next)&&Ct(n.error)&&Ct(n.complete)}function G4(n){return n&&n instanceof fd||H4(n)&&lv(n)}function KS(n){return Ct(n?.lift)}function Kt(n){return e=>{if(KS(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function qt(n,e,t,i,r){return new JS(n,e,t,i,r)}var JS=class extends fd{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function th(){return Kt((n,e)=>{let t=null;n._refCount++;let i=qt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var ih=class extends Ot{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,KS(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new bi;let t=this.getSubject();e.add(this.source.subscribe(qt(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=bi.EMPTY)}return e}refCount(){return th()(this)}};var bF=Qu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var tt=(()=>{class n extends Ot{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new uv(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new bF}next(t){Ju(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Ju(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Ju(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?WS:(this.currentObservers=null,o.push(t),new bi(()=>{this.currentObservers=null,ud(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new Ot;return t.source=this,t}}return n.create=(e,t)=>new uv(e,t),n})(),uv=class extends tt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:WS}};var En=class extends tt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var qp={now(){return(qp.delegate||Date).now()},delegate:void 0};var pd=class extends tt{constructor(e=1/0,t=1/0,i=qp){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;t||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=t.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var hv=class extends bi{constructor(e,t){super()}schedule(e,t=0){return this}};var Xp={setInterval(n,e,...t){let{delegate:i}=Xp;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Xp;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var fv=class extends hv{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return Xp.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&Xp.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ud(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var nh=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};nh.now=qp.now;var pv=class extends nh{constructor(e,t=nh.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var Yp=new pv(fv),vF=Yp;var _n=new Ot(n=>n.complete());function mv(n){return n&&Ct(n.schedule)}function eT(n){return n[n.length-1]}function gv(n){return Ct(eT(n))?n.pop():void 0}function da(n){return mv(eT(n))?n.pop():void 0}function yF(n,e){return typeof eT(n)=="number"?n.pop():e}function wF(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}function xF(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function md(n){return this instanceof md?(this.v=n,this):new md(n)}function MF(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(f){return function(m){return Promise.resolve(m).then(f,u)}}function a(f,m){i[f]&&(r[f]=function(_){return new Promise(function(g,p){o.push([f,_,g,p])>1||l(f,_)})},m&&(r[f]=m(r[f])))}function l(f,m){try{c(i[f](m))}catch(_){h(o[0][3],_)}}function c(f){f.value instanceof md?Promise.resolve(f.value.v).then(d,u):h(o[0][2],f)}function d(f){l("next",f)}function u(f){l("throw",f)}function h(f,m){f(m),o.shift(),o.length&&l(o[0][0],o[0][1])}}function SF(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof xF=="function"?xF(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var rh=n=>n&&typeof n.length=="number"&&typeof n!="function";function _v(n){return Ct(n?.then)}function bv(n){return Ct(n[eh])}function vv(n){return Symbol.asyncIterator&&Ct(n?.[Symbol.asyncIterator])}function yv(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function W4(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xv=W4();function wv(n){return Ct(n?.[xv])}function Mv(n){return MF(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield md(t.read());if(r)return yield md(void 0);yield yield md(i)}}finally{t.releaseLock()}})}function Sv(n){return Ct(n?.getReader)}function Wi(n){if(n instanceof Ot)return n;if(n!=null){if(bv(n))return $4(n);if(rh(n))return q4(n);if(_v(n))return X4(n);if(vv(n))return TF(n);if(wv(n))return Y4(n);if(Sv(n))return Z4(n)}throw yv(n)}function $4(n){return new Ot(e=>{let t=n[eh]();if(Ct(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function q4(n){return new Ot(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function X4(n){return new Ot(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,cv)})}function Y4(n){return new Ot(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function TF(n){return new Ot(e=>{Q4(n,e).catch(t=>e.error(t))})}function Z4(n){return TF(Mv(n))}function Q4(n,e){var t,i,r,o;return wF(this,void 0,void 0,function*(){try{for(t=SF(n);i=yield t.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function oo(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function Tv(n,e=0){return Kt((t,i)=>{t.subscribe(qt(i,r=>oo(i,n,()=>i.next(r),e),()=>oo(i,n,()=>i.complete(),e),r=>oo(i,n,()=>i.error(r),e)))})}function Rv(n,e=0){return Kt((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function RF(n,e){return Wi(n).pipe(Rv(e),Tv(e))}function CF(n,e){return Wi(n).pipe(Rv(e),Tv(e))}function EF(n,e){return new Ot(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function DF(n,e){return new Ot(t=>{let i;return oo(t,e,()=>{i=n[xv](),oo(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){t.error(s);return}o?t.complete():t.next(r)},0,!0)}),()=>Ct(i?.return)&&i.return()})}function Cv(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ot(t=>{oo(t,e,()=>{let i=n[Symbol.asyncIterator]();oo(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function AF(n,e){return Cv(Mv(n),e)}function IF(n,e){if(n!=null){if(bv(n))return RF(n,e);if(rh(n))return EF(n,e);if(_v(n))return CF(n,e);if(vv(n))return Cv(n,e);if(wv(n))return DF(n,e);if(Sv(n))return AF(n,e)}throw yv(n)}function ji(n,e){return e?IF(n,e):Wi(n)}function gt(...n){let e=da(n);return ji(n,e)}function so(n,e){let t=Ct(n)?n:()=>n,i=r=>r.error(t());return new Ot(e?r=>e.schedule(i,0,r):i)}function Zp(n){return!!n&&(n instanceof Ot||Ct(n.lift)&&Ct(n.subscribe))}var Es=Qu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function tT(n,e){let t=typeof e=="object";return new Promise((i,r)=>{let o=new Cs({next:s=>{i(s),o.unsubscribe()},error:r,complete:()=>{t?i(e.defaultValue):r(new Es)}});n.subscribe(o)})}function PF(n){return n instanceof Date&&!isNaN(n)}function lt(n,e){return Kt((t,i)=>{let r=0;t.subscribe(qt(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:K4}=Array;function J4(n,e){return K4(e)?n(...e):n(e)}function oh(n){return lt(e=>J4(n,e))}var{isArray:eG}=Array,{getPrototypeOf:tG,prototype:iG,keys:nG}=Object;function Ev(n){if(n.length===1){let e=n[0];if(eG(e))return{args:e,keys:null};if(rG(e)){let t=nG(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function rG(n){return n&&typeof n=="object"&&tG(n)===iG}function Dv(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function gd(...n){let e=da(n),t=gv(n),{args:i,keys:r}=Ev(n);if(i.length===0)return ji([],e);let o=new Ot(oG(i,e,r?s=>Dv(r,s):$r));return t?o.pipe(oh(t)):o}function oG(n,e,t=$r){return i=>{FF(e,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)FF(e,()=>{let c=ji(n[l],e),d=!1;c.subscribe(qt(i,u=>{o[l]=u,d||(d=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function FF(n,e,t){n?oo(t,n,e):e()}function kF(n,e,t,i,r,o,s,a){let l=[],c=0,d=0,u=!1,h=()=>{u&&!l.length&&!c&&e.complete()},f=_=>c<i?m(_):l.push(_),m=_=>{o&&e.next(_),c++;let g=!1;Wi(t(_,d++)).subscribe(qt(e,p=>{r?.(p),o?f(p):e.next(p)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<i;){let p=l.shift();s?oo(e,s,()=>m(p)):m(p)}h()}catch(p){e.error(p)}}))};return n.subscribe(qt(e,f,()=>{u=!0,h()})),()=>{a?.()}}function Dn(n,e,t=1/0){return Ct(e)?Dn((i,r)=>lt((o,s)=>e(i,o,r,s))(Wi(n(i,r))),t):(typeof e=="number"&&(t=e),Kt((i,r)=>kF(i,r,n,t)))}function Kl(n=1/0){return Dn($r,n)}function OF(){return Kl(1)}function Jl(...n){return OF()(ji(n,da(n)))}function Av(n){return new Ot(e=>{Wi(n()).subscribe(e)})}function _d(...n){let e=gv(n),{args:t,keys:i}=Ev(n),r=new Ot(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let d=0;d<s;d++){let u=!1;Wi(t[d]).subscribe(qt(o,h=>{u||(u=!0,c--),a[d]=h},()=>l--,void 0,()=>{(!l||!u)&&(c||o.next(i?Dv(i,a):a),o.complete())}))}});return e?r.pipe(oh(e)):r}var sG=["addListener","removeListener"],aG=["addEventListener","removeEventListener"],lG=["on","off"];function Qp(n,e,t,i){if(Ct(t)&&(i=t,t=void 0),i)return Qp(n,e,t).pipe(oh(i));let[r,o]=uG(n)?aG.map(s=>a=>n[s](e,a,t)):cG(n)?sG.map(jF(n,e)):dG(n)?lG.map(jF(n,e)):[];if(!r&&rh(n))return Dn(s=>Qp(s,e,t))(Wi(n));if(!r)throw new TypeError("Invalid event target");return new Ot(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function jF(n,e){return t=>i=>n[t](e,i)}function cG(n){return Ct(n.addListener)&&Ct(n.removeListener)}function dG(n){return Ct(n.on)&&Ct(n.off)}function uG(n){return Ct(n.addEventListener)&&Ct(n.removeEventListener)}function Kp(n=0,e,t=vF){let i=-1;return e!=null&&(mv(e)?t=e:i=e),new Ot(r=>{let o=PF(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function Ds(...n){let e=da(n),t=yF(n,1/0),i=n;return i.length?i.length===1?Wi(i[0]):Kl(t)(ji(i,e)):_n}function vi(n,e){return Kt((t,i)=>{let r=0;t.subscribe(qt(i,o=>n.call(e,o,r++)&&i.next(o)))})}function NF(n){return Kt((e,t)=>{let i=!1,r=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let c=r;r=null,t.next(c)}s&&t.complete()},l=()=>{o=null,s&&t.complete()};e.subscribe(qt(t,c=>{i=!0,r=c,o||Wi(n(c)).subscribe(o=qt(t,a,l))},()=>{s=!0,(!i||!o||o.closed)&&t.complete()}))})}function Iv(n,e=Yp){return NF(()=>Kp(n,e))}function qr(n){return Kt((e,t)=>{let i=null,r=!1,o;i=e.subscribe(qt(t,void 0,void 0,s=>{o=Wi(n(s,qr(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function LF(n,e,t,i,r){return(o,s)=>{let a=t,l=e,c=0;o.subscribe(qt(s,d=>{let u=c++;l=a?n(l,d,u):(a=!0,d),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function tl(n,e){return Ct(e)?Dn(n,e,1):Dn(n,1)}function As(n,e=Yp){return Kt((t,i)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let c=o;o=null,i.next(c)}};function l(){let c=s+n,d=e.now();if(d<c){r=this.schedule(void 0,c-d),i.add(r);return}a()}t.subscribe(qt(i,c=>{o=c,s=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function ec(n){return Kt((e,t)=>{let i=!1;e.subscribe(qt(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Er(n){return n<=0?()=>_n:Kt((e,t)=>{let i=0;e.subscribe(qt(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Pv(n){return lt(()=>n)}function Fv(n,e=$r){return n=n??hG,Kt((t,i)=>{let r,o=!0;t.subscribe(qt(i,s=>{let a=e(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function hG(n,e){return n===e}function kv(n=fG){return Kt((e,t)=>{let i=!1;e.subscribe(qt(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function fG(){return new Es}function ua(n){return Kt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function il(n,e){let t=arguments.length>=2;return i=>i.pipe(n?vi((r,o)=>n(r,o,i)):$r,Er(1),t?ec(e):kv(()=>new Es))}function sh(n){return n<=0?()=>_n:Kt((e,t)=>{let i=[];e.subscribe(qt(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function iT(n,e){let t=arguments.length>=2;return i=>i.pipe(n?vi((r,o)=>n(r,o,i)):$r,sh(1),t?ec(e):kv(()=>new Es))}function nT(n,e){return Kt(LF(n,e,arguments.length>=2,!0))}function Jp(n={}){let{connector:e=()=>new tt,resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,l,c=0,d=!1,u=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,d=u=!1},m=()=>{let _=s;f(),_?.unsubscribe()};return Kt((_,g)=>{c++,!u&&!d&&h();let p=l=l??e();g.add(()=>{c--,c===0&&!u&&!d&&(a=rT(m,r))}),p.subscribe(g),!s&&c>0&&(s=new Cs({next:b=>p.next(b),error:b=>{u=!0,h(),a=rT(f,t,b),p.error(b)},complete:()=>{d=!0,h(),a=rT(f,i),p.complete()}}),Wi(_).subscribe(s))})(o)}}function rT(n,e,...t){if(e===!0){n();return}if(e===!1)return;let i=new Cs({next:()=>{i.unsubscribe(),n()}});return Wi(e(...t)).subscribe(i)}function nl(n,e,t){let i,r=!1;return n&&typeof n=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n:i=n??1/0,Jp({connector:()=>new pd(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function bd(n){return vi((e,t)=>n<=t)}function Io(...n){let e=da(n);return Kt((t,i)=>{(e?Jl(n,t,e):Jl(n,t)).subscribe(i)})}function Nn(n,e){return Kt((t,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();t.subscribe(qt(i,l=>{r?.unsubscribe();let c=0,d=o++;Wi(n(l,d)).subscribe(r=qt(i,u=>i.next(e?e(l,u,d,c++):u),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Ri(n){return Kt((e,t)=>{Wi(n).subscribe(qt(t,()=>t.complete(),$p)),!t.closed&&e.subscribe(t)})}function Xi(n,e,t){let i=Ct(n)||e||t?{next:n,error:e,complete:t}:n;return i?Kt((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(qt(o,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),o.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):$r}var Tk="https://g.co/ng/security#xss",Te=class extends Error{code;constructor(e,t){super(My(e,t)),this.code=e}};function My(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var Rk=Symbol("InputSignalNode#UNSET"),pG=Ft(ce({},GS),{transformFn:void 0,applyValueToInputSignal(n,e){sv(n,e)}});function Ck(n,e){let t=Object.create(pG);t.value=n,t.transformFn=e?.transform;function i(){if(nv(t),t.value===Rk)throw new Te(-950,!1);return t.value}return i[ro]=t,i}function mm(n){return{toString:n}.toString()}var Ov="__parameters__";function mG(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function Ek(n,e,t){return mm(()=>{let i=mG(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,c,d){let u=l.hasOwnProperty(Ov)?l[Ov]:Object.defineProperty(l,Ov,{value:[]})[Ov];for(;u.length<=d;)u.push(null);return(u[d]=u[d]||[]).push(s),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var Fo=globalThis;function tn(n){for(let e in n)if(n[e]===tn)return e;throw Error("Could not find renamed property on target object.")}function gG(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function co(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(co).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function bT(n,e){return n?e?`${n} ${e}`:n:e||""}var _G=tn({__forward_ref__:tn});function _e(n){return n.__forward_ref__=_e,n.toString=function(){return co(this())},n}function Xr(n){return Dk(n)?n():n}function Dk(n){return typeof n=="function"&&n.hasOwnProperty(_G)&&n.__forward_ref__===_e}function fe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Qe(n){return{providers:n.providers||[],imports:n.imports||[]}}function Sy(n){return BF(n,Ik)||BF(n,Pk)}function Ak(n){return Sy(n)!==null}function BF(n,e){return n.hasOwnProperty(e)?n[e]:null}function bG(n){let e=n&&(n[Ik]||n[Pk]);return e||null}function UF(n){return n&&(n.hasOwnProperty(VF)||n.hasOwnProperty(vG))?n[VF]:null}var Ik=tn({\u0275prov:tn}),VF=tn({\u0275inj:tn}),Pk=tn({ngInjectableDef:tn}),vG=tn({ngInjectorDef:tn}),ye=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=fe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Fk(n){return n&&!!n.\u0275providers}var yG=tn({\u0275cmp:tn}),xG=tn({\u0275dir:tn}),wG=tn({\u0275pipe:tn}),MG=tn({\u0275mod:tn}),qv=tn({\u0275fac:tn}),nm=tn({__NG_ELEMENT_ID__:tn}),zF=tn({__NG_ENV_ID__:tn});function Ty(n){return typeof n=="string"?n:n==null?"":String(n)}function SG(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ty(n)}function TG(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Te(-200,n)}function wR(n,e){throw new Te(-201,!1)}var fi=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(fi||{}),vT;function kk(){return vT}function ao(n){let e=vT;return vT=n,e}function Ok(n,e,t){let i=Sy(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&fi.Optional)return null;if(e!==void 0)return e;wR(n,"Injector")}var RG={},om=RG,yT="__NG_DI_FLAG__",Xv="ngTempTokenPath",CG="ngTokenPath",EG=/\n/gm,DG="\u0275",HF="__source",uh;function AG(){return uh}function tc(n){let e=uh;return uh=n,e}function IG(n,e=fi.Default){if(uh===void 0)throw new Te(-203,!1);return uh===null?Ok(n,void 0,e):uh.get(n,e&fi.Optional?null:void 0,e)}function He(n,e=fi.Default){return(kk()||IG)(Xr(n),e)}function E(n,e=fi.Default){return He(n,Ry(e))}function Ry(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function xT(n){let e=[];for(let t=0;t<n.length;t++){let i=Xr(n[t]);if(Array.isArray(i)){if(i.length===0)throw new Te(900,!1);let r,o=fi.Default;for(let s=0;s<i.length;s++){let a=i[s],l=PG(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}e.push(He(r,o))}else e.push(He(i))}return e}function jk(n,e){return n[yT]=e,n.prototype[yT]=e,n}function PG(n){return n[yT]}function FG(n,e,t,i){let r=n[Xv];throw e[HF]&&r.unshift(e[HF]),n.message=kG(`
`+n.message,r,t,i),n[CG]=r,n[Xv]=null,n}function kG(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==DG?n.slice(2):n;let r=co(e);if(Array.isArray(e))r=e.map(co).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):co(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(EG,`
  `)}`}var Cy=jk(Ek("Optional"),8);var Nk=jk(Ek("SkipSelf"),4);function yd(n,e){let t=n.hasOwnProperty(qv);return t?n[qv]:null}function OG(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function jG(n){return n.flat(Number.POSITIVE_INFINITY)}function MR(n,e){n.forEach(t=>Array.isArray(t)?MR(t,e):e(t))}function Lk(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Yv(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function NG(n,e){let t=[];for(let i=0;i<n;i++)t.push(e);return t}function LG(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function Ey(n,e,t){let i=gm(n,e);return i>=0?n[i|1]=t:(i=~i,LG(n,i,e,t)),i}function oT(n,e){let t=gm(n,e);if(t>=0)return n[t|1]}function gm(n,e){return BG(n,e,1)}function BG(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}var xd={},lo=[],fh=new ye(""),Bk=new ye("",-1),Uk=new ye(""),Zv=class{get(e,t=om){if(t===om){let i=new Error(`NullInjectorError: No provider for ${co(e)}!`);throw i.name="NullInjectorError",i}return t}};function Vk(n,e){let t=n[MG]||null;if(!t&&e===!0)throw new Error(`Type ${co(n)} does not have '\u0275mod' property.`);return t}function rl(n){return n[yG]||null}function zk(n){return n[xG]||null}function Hk(n){return n[wG]||null}function Gk(n){let e=rl(n)||zk(n)||Hk(n);return e!==null&&e.standalone}function Dy(n){return{\u0275providers:n}}function UG(...n){return{\u0275providers:Wk(!0,n),\u0275fromNgModule:!0}}function Wk(n,...e){let t=[],i=new Set,r,o=s=>{t.push(s)};return MR(e,s=>{let a=s;wT(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&$k(r,o),t}function $k(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];SR(r,o=>{e(o,i)})}}function wT(n,e,t,i){if(n=Xr(n),!n)return!1;let r=null,o=UF(n),s=!o&&rl(n);if(!o&&!s){let l=n.ngModule;if(o=UF(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)wT(c,e,t,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let c;try{MR(o.imports,d=>{wT(d,e,t,i)&&(c||=[],c.push(d))})}finally{}c!==void 0&&$k(c,e)}if(!a){let c=yd(r)||(()=>new r);e({provide:r,useFactory:c,deps:lo},r),e({provide:Uk,useValue:r,multi:!0},r),e({provide:fh,useValue:()=>He(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let c=n;SR(l,d=>{e(d,c)})}}else return!1;return r!==n&&n.providers!==void 0}function SR(n,e){for(let t of n)Fk(t)&&(t=t.\u0275providers),Array.isArray(t)?SR(t,e):e(t)}var VG=tn({provide:String,useValue:tn});function qk(n){return n!==null&&typeof n=="object"&&VG in n}function zG(n){return!!(n&&n.useExisting)}function HG(n){return!!(n&&n.useFactory)}function ph(n){return typeof n=="function"}function GG(n){return!!n.useClass}var Ay=new ye(""),Vv={},WG={},sT;function Iy(){return sT===void 0&&(sT=new Zv),sT}var Jn=class{},sm=class extends Jn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,ST(e,s=>this.processProvider(s)),this.records.set(Bk,ah(void 0,this)),r.has("environment")&&this.records.set(Jn,ah(void 0,this));let o=this.records.get(Ay);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Uk,lo,fi.Self))}destroy(){tm(this),this._destroyed=!0;let e=_i(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_i(e)}}onDestroy(e){return tm(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){tm(this);let t=tc(this),i=ao(void 0),r;try{return e()}finally{tc(t),ao(i)}}get(e,t=om,i=fi.Default){if(tm(this),e.hasOwnProperty(zF))return e[zF](this);i=Ry(i);let r,o=tc(this),s=ao(void 0);try{if(!(i&fi.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=ZG(e)&&Sy(e);c&&this.injectableDefInScope(c)?l=ah(MT(e),Vv):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=i&fi.Self?Iy():this.parent;return t=i&fi.Optional&&t===om?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Xv]=a[Xv]||[]).unshift(co(e)),o)throw a;return FG(a,e,"R3InjectorError",this.source)}else throw a}finally{ao(s),tc(o)}}resolveInjectorInitializers(){let e=_i(null),t=tc(this),i=ao(void 0),r;try{let o=this.get(fh,lo,fi.Self);for(let s of o)s()}finally{tc(t),ao(i),_i(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(co(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Xr(e);let t=ph(e)?e:Xr(e&&e.provide),i=qG(e);if(!ph(e)&&e.multi===!0){let r=this.records.get(t);r||(r=ah(void 0,Vv,!0),r.factory=()=>xT(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){let i=_i(null);try{return t.value===Vv&&(t.value=WG,t.value=t.factory()),typeof t.value=="object"&&t.value&&YG(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{_i(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Xr(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function MT(n){let e=Sy(n),t=e!==null?e.factory:yd(n);if(t!==null)return t;if(n instanceof ye)throw new Te(204,!1);if(n instanceof Function)return $G(n);throw new Te(204,!1)}function $G(n){if(n.length>0)throw new Te(204,!1);let t=bG(n);return t!==null?()=>t.factory(n):()=>new n}function qG(n){if(qk(n))return ah(void 0,n.useValue);{let e=Xk(n);return ah(e,Vv)}}function Xk(n,e,t){let i;if(ph(n)){let r=Xr(n);return yd(r)||MT(r)}else if(qk(n))i=()=>Xr(n.useValue);else if(HG(n))i=()=>n.useFactory(...xT(n.deps||[]));else if(zG(n))i=()=>He(Xr(n.useExisting));else{let r=Xr(n&&(n.useClass||n.provide));if(XG(n))i=()=>new r(...xT(n.deps));else return yd(r)||MT(r)}return i}function tm(n){if(n.destroyed)throw new Te(205,!1)}function ah(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function XG(n){return!!n.deps}function YG(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function ZG(n){return typeof n=="function"||typeof n=="object"&&n instanceof ye}function ST(n,e){for(let t of n)Array.isArray(t)?ST(t,e):t&&Fk(t)?ST(t.\u0275providers,e):e(t)}function po(n,e){n instanceof sm&&tm(n);let t,i=tc(n),r=ao(void 0);try{return e()}finally{tc(i),ao(r)}}function Yk(){return kk()!==void 0||AG()!=null}function Py(n){if(!Yk())throw new Te(-203,!1)}function QG(n){let e=Fo.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function KG(n){return typeof n=="function"}var cl=0,Jt=1,Nt=2,Ar=3,Ps=4,mo=5,mh=6,Qv=7,yr=8,am=9,ol=10,An=11,lm=12,GF=13,Sh=14,ko=15,wd=16,lh=17,sl=18,Fy=19,Zk=20,ic=21,zv=22,Md=23,Po=24,er=25,Qk=1;var Sd=7,Kv=8,gh=9,Dr=10;function nc(n){return Array.isArray(n)&&typeof n[Qk]=="object"}function dl(n){return Array.isArray(n)&&n[Qk]===!0}function TR(n){return(n.flags&4)!==0}function Pd(n){return n.componentOffset>-1}function ky(n){return(n.flags&1)===1}function al(n){return!!n.template}function Jv(n){return(n[Nt]&512)!==0}function _m(n){return(n[Nt]&256)===256}var TT=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function Kk(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var tr=(()=>{let n=()=>Jk;return n.ngInherit=!0,n})();function Jk(n){return n.type.prototype.ngOnChanges&&(n.setInput=e5),JG}function JG(){let n=tO(this),e=n?.current;if(e){let t=n.previous;if(t===xd)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function e5(n,e,t,i,r){let o=this.declaredInputs[i],s=tO(n)||t5(n,{previous:xd,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new TT(c&&c.currentValue,t,l===xd),Kk(n,e,r,t)}var eO="__ngSimpleChanges__";function tO(n){return n[eO]||null}function t5(n,e){return n[eO]=e}var WF=null;var Ko=function(n,e,t){WF?.(n,e,t)},i5="svg",n5="math";function fa(n){for(;Array.isArray(n);)n=n[cl];return n}function iO(n,e){return fa(e[n])}function Fs(n,e){return fa(e[n.index])}function RR(n,e){return n.data[e]}function CR(n,e){return n[e]}function pa(n,e){let t=e[n];return nc(t)?t:t[cl]}function r5(n){return(n[Nt]&4)===4}function ER(n){return(n[Nt]&128)===128}function o5(n){return dl(n[Ar])}function rc(n,e){return e==null?null:n[e]}function nO(n){n[lh]=0}function DR(n){n[Nt]&1024||(n[Nt]|=1024,ER(n)&&bm(n))}function s5(n,e){for(;n>0;)e=e[Sh],n--;return e}function Oy(n){return!!(n[Nt]&9216||n[Po]?.dirty)}function RT(n){n[ol].changeDetectionScheduler?.notify(9),n[Nt]&64&&(n[Nt]|=1024),Oy(n)&&bm(n)}function bm(n){n[ol].changeDetectionScheduler?.notify(0);let e=Td(n);for(;e!==null&&!(e[Nt]&8192||(e[Nt]|=8192,!ER(e)));)e=Td(e)}function rO(n,e){if(_m(n))throw new Te(911,!1);n[ic]===null&&(n[ic]=[]),n[ic].push(e)}function a5(n,e){if(n[ic]===null)return;let t=n[ic].indexOf(e);t!==-1&&n[ic].splice(t,1)}function Td(n){let e=n[Ar];return dl(e)?e[Ar]:e}function oO(n){return n[Qv]??=[]}function sO(n){return n.cleanup??=[]}function l5(n,e,t,i){let r=oO(e);r.push(t),n.firstCreatePass&&sO(n).push(i,r.length-1)}var pi={lFrame:pO(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var CT=!1;function c5(){return pi.lFrame.elementDepthCount}function d5(){pi.lFrame.elementDepthCount++}function u5(){pi.lFrame.elementDepthCount--}function jy(){return pi.bindingsEnabled}function aO(){return pi.skipHydrationRootTNode!==null}function h5(n){return pi.skipHydrationRootTNode===n}function f5(){pi.skipHydrationRootTNode=null}function Ut(){return pi.lFrame.lView}function In(){return pi.lFrame.tView}function ht(n){return pi.lFrame.contextLView=n,n[yr]}function ft(n){return pi.lFrame.contextLView=null,n}function Ir(){let n=lO();for(;n!==null&&n.type===64;)n=n.parent;return n}function lO(){return pi.lFrame.currentTNode}function p5(){let n=pi.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Fd(n,e){let t=pi.lFrame;t.currentTNode=n,t.isParent=e}function AR(){return pi.lFrame.isParent}function IR(){pi.lFrame.isParent=!1}function m5(){return pi.lFrame.contextLView}function cO(){return CT}function ey(n){let e=CT;return CT=n,e}function kd(){let n=pi.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function g5(n){return pi.lFrame.bindingIndex=n}function Th(){return pi.lFrame.bindingIndex++}function dO(n){let e=pi.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function _5(){return pi.lFrame.inI18n}function b5(n,e){let t=pi.lFrame;t.bindingIndex=t.bindingRootIndex=n,ET(e)}function v5(){return pi.lFrame.currentDirectiveIndex}function ET(n){pi.lFrame.currentDirectiveIndex=n}function y5(n){let e=pi.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function uO(){return pi.lFrame.currentQueryIndex}function PR(n){pi.lFrame.currentQueryIndex=n}function x5(n){let e=n[Jt];return e.type===2?e.declTNode:e.type===1?n[mo]:null}function hO(n,e,t){if(t&fi.SkipSelf){let r=e,o=n;for(;r=r.parent,r===null&&!(t&fi.Host);)if(r=x5(o),r===null||(o=o[Sh],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=pi.lFrame=fO();return i.currentTNode=e,i.lView=n,!0}function FR(n){let e=fO(),t=n[Jt];pi.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function fO(){let n=pi.lFrame,e=n===null?null:n.child;return e===null?pO(n):e}function pO(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function mO(){let n=pi.lFrame;return pi.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var gO=mO;function kR(){let n=mO();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function w5(n){return(pi.lFrame.contextLView=s5(n,pi.lFrame.contextLView))[yr]}function sc(){return pi.lFrame.selectedIndex}function Rd(n){pi.lFrame.selectedIndex=n}function OR(){let n=pi.lFrame;return RR(n.tView,n.selectedIndex)}function M5(){return pi.lFrame.currentNamespace}var _O=!0;function Ny(){return _O}function Ly(n){_O=n}function S5(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=Jk(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function jR(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Hv(n,e,t){bO(n,e,3,t)}function Gv(n,e,t,i){(n[Nt]&3)===t&&bO(n,e,t,i)}function aT(n,e){let t=n[Nt];(t&3)===e&&(t&=16383,t+=1,n[Nt]=t)}function bO(n,e,t,i){let r=i!==void 0?n[lh]&65535:0,o=i??-1,s=e.length-1,a=0;for(let l=r;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(n[lh]+=65536),(a<o||o==-1)&&(T5(n,t,e,l),n[lh]=(n[lh]&4294901760)+l+2),l++}function $F(n,e){Ko(4,n,e);let t=_i(null);try{e.call(n)}finally{_i(t),Ko(5,n,e)}}function T5(n,e,t,i){let r=t[i]<0,o=t[i+1],s=r?-t[i]:t[i],a=n[s];r?n[Nt]>>14<n[lh]>>16&&(n[Nt]&3)===e&&(n[Nt]+=16384,$F(a,o)):$F(a,o)}var hh=-1,Cd=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=i}};function R5(n){return n instanceof Cd}function C5(n){return(n.flags&8)!==0}function E5(n){return(n.flags&16)!==0}function D5(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{let o=r,s=t[++i];A5(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function vO(n){return n===3||n===4||n===6}function A5(n){return n.charCodeAt(0)===64}function _h(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?qF(n,t,r,null,e[++i]):qF(n,t,r,null,null))}}return n}function qF(n,e,t,i,r){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(i===null){r!==null&&(n[o+1]=r);return}else if(i===n[o+1]){n[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i),r!==null&&n.splice(o++,0,r)}var lT={},DT=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Ry(i);let r=this.injector.get(e,lT,i);return r!==lT||t===lT?r:this.parentInjector.get(e,t,i)}};function yO(n){return n!==hh}function ty(n){return n&32767}function I5(n){return n>>16}function iy(n,e){let t=I5(n),i=e;for(;t>0;)i=i[Sh],t--;return i}var AT=!0;function ny(n){let e=AT;return AT=n,e}var P5=256,xO=P5-1,wO=5,F5=0,ha={};function k5(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(nm)&&(i=t[nm]),i==null&&(i=t[nm]=F5++);let r=i&xO,o=1<<r;e.data[n+(r>>wO)]|=o}function ry(n,e){let t=MO(n,e);if(t!==-1)return t;let i=e[Jt];i.firstCreatePass&&(n.injectorIndex=e.length,cT(i.data,n),cT(e,null),cT(i.blueprint,null));let r=NR(n,e),o=n.injectorIndex;if(yO(r)){let s=ty(r),a=iy(r,e),l=a[Jt].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=r,o}function cT(n,e){n.push(0,0,0,0,0,0,0,0,e)}function MO(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function NR(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=EO(r),i===null)return hh;if(t++,r=r[Sh],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return hh}function IT(n,e,t){k5(n,e,t)}function O5(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(vO(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function SO(n,e,t){if(t&fi.Optional||n!==void 0)return n;wR(e,"NodeInjector")}function TO(n,e,t,i){if(t&fi.Optional&&i===void 0&&(i=null),!(t&(fi.Self|fi.Host))){let r=n[am],o=ao(void 0);try{return r?r.get(e,i,t&fi.Optional):Ok(e,i,t&fi.Optional)}finally{ao(o)}}return SO(i,e,t)}function RO(n,e,t,i=fi.Default,r){if(n!==null){if(e[Nt]&2048&&!(i&fi.Self)){let s=B5(n,e,t,i,ha);if(s!==ha)return s}let o=CO(n,e,t,i,ha);if(o!==ha)return o}return TO(e,t,i,r)}function CO(n,e,t,i,r){let o=N5(t);if(typeof o=="function"){if(!hO(e,n,i))return i&fi.Host?SO(r,t,i):TO(e,t,i,r);try{let s;if(s=o(i),s==null&&!(i&fi.Optional))wR(t);else return s}finally{gO()}}else if(typeof o=="number"){let s=null,a=MO(n,e),l=hh,c=i&fi.Host?e[ko][mo]:null;for((a===-1||i&fi.SkipSelf)&&(l=a===-1?NR(n,e):e[a+8],l===hh||!YF(i,!1)?a=-1:(s=e[Jt],a=ty(l),e=iy(l,e)));a!==-1;){let d=e[Jt];if(XF(o,a,d.data)){let u=j5(a,e,t,s,i,c);if(u!==ha)return u}l=e[a+8],l!==hh&&YF(i,e[Jt].data[a+8]===c)&&XF(o,a,e)?(s=d,a=ty(l),e=iy(l,e)):a=-1}}return r}function j5(n,e,t,i,r,o){let s=e[Jt],a=s.data[n+8],l=i==null?Pd(a)&&AT:i!=s&&(a.type&3)!==0,c=r&fi.Host&&o===a,d=Wv(a,s,t,l,c);return d!==null?cm(e,s,d,a):ha}function Wv(n,e,t,i,r){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,c=n.directiveEnd,d=o>>20,u=i?a:a+d,h=r?a+d:c;for(let f=u;f<h;f++){let m=s[f];if(f<l&&t===m||f>=l&&m.type===t)return f}if(r){let f=s[l];if(f&&al(f)&&f.type===t)return l}return null}function cm(n,e,t,i){let r=n[t],o=e.data;if(R5(r)){let s=r;s.resolving&&TG(SG(o[t]));let a=ny(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?ao(s.injectImpl):null,d=hO(n,i,fi.Default);try{r=n[t]=s.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&S5(t,o[t],e)}finally{c!==null&&ao(c),ny(a),s.resolving=!1,gO()}}return r}function N5(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(nm)?n[nm]:void 0;return typeof e=="number"?e>=0?e&xO:L5:e}function XF(n,e,t){let i=1<<n;return!!(t[e+(n>>wO)]&i)}function YF(n,e){return!(n&fi.Self)&&!(n&fi.Host&&e)}var vd=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return RO(this._tNode,this._lView,e,Ry(i),t)}};function L5(){return new vd(Ir(),Ut())}function le(n){return mm(()=>{let e=n.prototype.constructor,t=e[qv]||PT(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[qv]||PT(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function PT(n){return Dk(n)?()=>{let e=PT(Xr(n));return e&&e()}:yd(n)}function B5(n,e,t,i,r){let o=n,s=e;for(;o!==null&&s!==null&&s[Nt]&2048&&!Jv(s);){let a=CO(o,s,t,i|fi.Self,ha);if(a!==ha)return a;let l=o.parent;if(!l){let c=s[Zk];if(c){let d=c.get(t,ha,i);if(d!==ha)return d}l=EO(s),s=s[Sh]}o=l}return r}function EO(n){let e=n[Jt],t=e.type;return t===2?e.declTNode:t===1?n[mo]:null}function By(n){return O5(Ir(),n)}function ZF(n,e=null,t=null,i){let r=DO(n,e,t,i);return r.resolveInjectorInitializers(),r}function DO(n,e=null,t=null,i,r=new Set){let o=[t||lo,UG(n)];return i=i||(typeof n=="object"?void 0:co(n)),new sm(o,e||Iy(),i||null,r)}var yi=class n{static THROW_IF_NOT_FOUND=om;static NULL=new Zv;static create(e,t){if(Array.isArray(e))return ZF({name:""},t,e,"");{let i=e.name??"";return ZF({name:i},e.parent,e.providers,i)}}static \u0275prov=fe({token:n,providedIn:"any",factory:()=>He(Bk)});static __NG_ELEMENT_ID__=-1};var bh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>By(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},U5=new ye("");U5.__NG_ELEMENT_ID__=n=>{let e=Ir();if(e===null)throw new Te(204,!1);if(e.type&2)return e.value;if(n&fi.Optional)return null;throw new Te(204,!1)};var AO=!1,Od=(()=>{class n{static __NG_ELEMENT_ID__=V5;static __NG_ENV_ID__=t=>t}return n})(),oy=class extends Od{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return rO(this._lView,e),()=>a5(this._lView,e)}};function V5(){return new oy(Ut())}var Ed=class{},LR=new ye("",{providedIn:"root",factory:()=>!1});var IO=new ye(""),PO=new ye(""),ba=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new En(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=fe({token:n,providedIn:"root",factory:()=>new n})}return n})();var FT=class extends tt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Yk()&&(this.destroyRef=E(Od,{optional:!0})??void 0,this.pendingTasks=E(ba,{optional:!0})??void 0)}emit(e){let t=_i(null);try{super.next(e)}finally{_i(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof bi&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{e(t),i!==void 0&&this.pendingTasks?.remove(i)})}}},rt=FT;function dm(...n){}function FO(n){let e,t;function i(){n=dm;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function QF(n){return queueMicrotask(()=>n()),()=>{n=dm}}var BR="isAngularZone",sy=BR+"_ID",z5=0,nt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new rt(!1);onMicrotaskEmpty=new rt(!1);onStable=new rt(!1);onError=new rt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=AO}=e;if(typeof Zone>"u")throw new Te(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,W5(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(BR)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Te(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Te(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,H5,dm,dm);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},H5={};function UR(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function G5(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){FO(()=>{n.callbackScheduled=!1,kT(n),n.isCheckStableRunning=!0,UR(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),kT(n)}function W5(n){let e=()=>{G5(n)},t=z5++;n._inner=n._inner.fork({name:"angular",properties:{[BR]:!0,[sy]:t,[sy+t]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if($5(l))return i.invokeTask(o,s,a,l);try{return KF(n),i.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),JF(n)}},onInvoke:(i,r,o,s,a,l,c)=>{try{return KF(n),i.invoke(o,s,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!q5(l)&&e(),JF(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,kT(n),UR(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function kT(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function KF(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function JF(n){n._nesting--,UR(n)}var ay=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new rt;onMicrotaskEmpty=new rt;onStable=new rt;onError=new rt;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function $5(n){return kO(n,"__ignore_ng_zone__")}function q5(n){return kO(n,"__scheduler_tick__")}function kO(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function X5(n="zone.js",e){return n==="noop"?new ay:n==="zone.js"?new nt(e):n}var uo=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Y5=new ye("",{providedIn:"root",factory:()=>{let n=E(nt),e=E(uo);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function ek(n,e){return Ck(n,e)}function Z5(n){return Ck(Rk,n)}var Uy=(ek.required=Z5,ek);function Q5(){return Rh(Ir(),Ut())}function Rh(n,e){return new _t(Fs(n,e))}var _t=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Q5}return n})();function K5(n){return n instanceof _t?n.nativeElement:n}var tk=new Set;function ts(n){tk.has(n)||(tk.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function vm(n){return typeof n=="function"&&n[ro]!==void 0}function ul(n,e){ts("NgSignals");let t=cF(n),i=t[ro];return e?.equal&&(i.equal=e.equal),t.set=r=>sv(i,r),t.update=r=>dF(i,r),t.asReadonly=J5.bind(t),t}function J5(){let n=this[ro];if(n.readonlyFn===void 0){let e=()=>this();e[ro]=n,n.readonlyFn=e}return n.readonlyFn}function OO(n){return vm(n)&&typeof n.set=="function"}function eW(){return this._results[Symbol.iterator]()}var ma=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new tt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=jG(e);(this._changesDetected=!OG(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=eW};function jO(n){return(n.flags&128)===128}var NO=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(NO||{}),LO=new Map,tW=0;function iW(){return tW++}function nW(n){LO.set(n[Fy],n)}function OT(n){LO.delete(n[Fy])}var ik="__ngContext__";function jd(n,e){nc(e)?(n[ik]=e[Fy],nW(e)):n[ik]=e}function BO(n){return VO(n[lm])}function UO(n){return VO(n[Ps])}function VO(n){for(;n!==null&&!dl(n);)n=n[Ps];return n}var jT;function zO(n){jT=n}function rW(){if(jT!==void 0)return jT;if(typeof document<"u")return document;throw new Te(210,!1)}var ym=new ye("",{providedIn:"root",factory:()=>oW}),oW="ng",VR=new ye(""),is=new ye("",{providedIn:"platform",factory:()=>"unknown"});var xr=new ye(""),xm=new ye("",{providedIn:"root",factory:()=>rW().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var sW="h",aW="b";var HO=!1,lW=new ye("",{providedIn:"root",factory:()=>HO});var zR=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(zR||{}),Ch=new ye("");var ch=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ch||{}),GO=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=fe({token:n,providedIn:"root",factory:()=>new n})}return n})(),cW=[ch.EarlyRead,ch.Write,ch.MixedReadWrite,ch.Read],dW=(()=>{class n{ngZone=E(nt);scheduler=E(Ed);errorHandler=E(uo,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){E(Ch,{optional:!0})}execute(){this.executing=!0;for(let t of cW)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[t]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>i.hooks[t](i.pipelinedValue),i.snapshot))}catch(r){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(8),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(7))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(zR.AFTER_NEXT_RENDER,t):t()}static \u0275prov=fe({token:n,providedIn:"root",factory:()=>new n})}return n})(),NT=class{impl;hooks;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r,o=null){this.impl=e,this.hooks=t,this.once=i,this.snapshot=o,this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function HR(n,e){!e?.injector&&Py(HR);let t=e?.injector??E(yi);return ts("NgAfterRender"),WO(n,t,e,!1)}function jo(n,e){!e?.injector&&Py(jo);let t=e?.injector??E(yi);return ts("NgAfterNextRender"),WO(n,t,e,!0)}function uW(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function WO(n,e,t,i){let r=e.get(GO);r.impl??=e.get(dW);let o=e.get(Ch,null,{optional:!0}),s=t?.phase??ch.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(Od):null,l=new NT(r.impl,uW(n,s),i,a,o?.snapshot(null));return r.impl.register(l),l}var hW=()=>null;function $O(n,e,t=!1){return hW(n,e,t)}function qO(n,e){let t=n.contentQueries;if(t!==null){let i=_i(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s!==-1){let a=n.data[s];PR(o),a.contentQueries(2,e[s],s)}}}finally{_i(i)}}}function LT(n,e,t){PR(0);let i=_i(null);try{e(n,t)}finally{_i(i)}}function GR(n,e,t){if(TR(e)){let i=_i(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{_i(i)}}}var ga=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ga||{}),jv;function XO(){if(jv===void 0&&(jv=null,Fo.trustedTypes))try{jv=Fo.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return jv}function Vy(n){return XO()?.createHTML(n)||n}function fW(n){return XO()?.createScriptURL(n)||n}var Nv;function pW(){if(Nv===void 0&&(Nv=null,Fo.trustedTypes))try{Nv=Fo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Nv}function nk(n){return pW()?.createScriptURL(n)||n}var ll=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Tk})`}},BT=class extends ll{getTypeName(){return"HTML"}},UT=class extends ll{getTypeName(){return"Style"}},VT=class extends ll{getTypeName(){return"Script"}},zT=class extends ll{getTypeName(){return"URL"}},HT=class extends ll{getTypeName(){return"ResourceURL"}};function ns(n){return n instanceof ll?n.changingThisBreaksApplicationSecurity:n}function ac(n,e){let t=mW(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Tk})`)}return t===e}function mW(n){return n instanceof ll&&n.getTypeName()||null}function YO(n){return new BT(n)}function ZO(n){return new UT(n)}function QO(n){return new VT(n)}function KO(n){return new zT(n)}function JO(n){return new HT(n)}function gW(n){let e=new WT(n);return _W()?new GT(e):e}var GT=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Vy(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},WT=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Vy(e),t}};function _W(){try{return!!new window.DOMParser().parseFromString(Vy(""),"text/html")}catch{return!1}}var bW=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function zy(n){return n=String(n),n.match(bW)?n:"unsafe:"+n}function hl(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function wm(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var ej=hl("area,br,col,hr,img,wbr"),tj=hl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ij=hl("rp,rt"),vW=wm(ij,tj),yW=wm(tj,hl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xW=wm(ij,hl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rk=wm(ej,yW,xW,vW),nj=hl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),wW=hl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),MW=hl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),SW=wm(nj,wW,MW),TW=hl("script,style,template"),$T=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=EW(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=CW(t);if(o){t=o;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=ok(e).toLowerCase();if(!rk.hasOwnProperty(t))return this.sanitizedSomething=!0,!TW.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!SW.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;nj[a]&&(l=zy(l)),this.buf.push(" ",s,'="',sk(l),'"')}return this.buf.push(">"),!0}endElement(e){let t=ok(e).toLowerCase();rk.hasOwnProperty(t)&&!ej.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(sk(e))}};function RW(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function CW(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw rj(e);return e}function EW(n){let e=n.firstChild;if(e&&RW(n,e))throw rj(e);return e}function ok(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function rj(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var DW=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,AW=/([^\#-~ |!])/g;function sk(n){return n.replace(/&/g,"&amp;").replace(DW,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(AW,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Lv;function oj(n,e){let t=null;try{Lv=Lv||gW(n);let i=e?String(e):"";t=Lv.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=Lv.getInertBodyElement(i)}while(i!==o);let a=new $T().sanitizeChildren(ak(t)||t);return Vy(a)}finally{if(t){let i=ak(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function ak(n){return"content"in n&&IW(n)?n.content:null}function IW(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var ar=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ar||{});function PW(n){let e=aj();return e?e.sanitize(ar.URL,n)||"":ac(n,"URL")?ns(n):zy(Ty(n))}function FW(n){let e=aj();if(e)return nk(e.sanitize(ar.RESOURCE_URL,n)||"");if(ac(n,"ResourceURL"))return nk(ns(n));throw new Te(904,!1)}function Hy(n){return fW(n[0])}function kW(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?FW:PW}function sj(n,e,t){return kW(e,t)(n)}function aj(){let n=Ut();return n&&n[ol].sanitizer}var OW=/^>|^->|<!--|-->|--!>|<!-$/g,jW=/(<|>)/g,NW="\u200B$1\u200B";function LW(n){return n.replace(OW,e=>e.replace(jW,NW))}function WR(n){return n.ownerDocument.defaultView}function Eh(n){return n.ownerDocument}function lj(n){return n instanceof Function?n():n}function BW(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}var cj="ng-template";function UW(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&BW(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if($R(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function $R(n){return n.type===4&&n.value!==cj}function VW(n,e,t){let i=n.type===4&&!t?cj:n.value;return e===i}function zW(n,e,t){let i=4,r=n.attrs,o=r!==null?WW(r):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Is(i)&&!Is(l))return!1;if(s&&Is(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!VW(n,l,t)||l===""&&e.length===1){if(Is(i))return!1;s=!0}}else if(i&8){if(r===null||!UW(n,r,l,t)){if(Is(i))return!1;s=!0}}else{let c=e[++a],d=HW(l,r,$R(n),t);if(d===-1){if(Is(i))return!1;s=!0;continue}if(c!==""){let u;if(d>o?u="":u=r[d+1].toLowerCase(),i&2&&c!==u){if(Is(i))return!1;s=!0}}}}return Is(i)||s}function Is(n){return(n&1)===0}function HW(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let s=e[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return $W(e,n)}function dj(n,e,t=!1){for(let i=0;i<e.length;i++)if(zW(n,e[i],t))return!0;return!1}function GW(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function WW(n){for(let e=0;e<n.length;e++){let t=n[e];if(vO(t))return e}return n.length}function $W(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function qW(n,e){e:for(let t=0;t<e.length;t++){let i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function lk(n,e){return n?":not("+e.trim()+")":e}function XW(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(i&2){let a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Is(s)&&(e+=lk(o,r),r=""),i=s,o=o||!Is(i);t++}return r!==""&&(e+=lk(o,r)),e}function YW(n){return n.map(XW).join(",")}function ZW(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!Is(r))break;r=o}i++}return t.length&&e.push(1,...t),e}var ks={};function QW(n,e){return n.createText(e)}function KW(n,e,t){n.setValue(e,t)}function JW(n,e){return n.createComment(LW(e))}function uj(n,e,t){return n.createElement(e,t)}function ly(n,e,t,i,r){n.insertBefore(e,t,i,r)}function hj(n,e,t){n.appendChild(e,t)}function ck(n,e,t,i,r){i!==null?ly(n,e,t,i,r):hj(n,e,t)}function e8(n,e,t){n.removeChild(null,e,t)}function t8(n,e,t){n.setAttribute(e,"style",t)}function i8(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function fj(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&D5(n,e,i),r!==null&&i8(n,e,r),o!==null&&t8(n,e,o)}function qR(n,e,t,i,r,o,s,a,l,c,d){let u=er+i,h=u+r,f=n8(u,h),m=typeof c=="function"?c():c;return f[Jt]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1,ssrId:d}}function n8(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:ks);return t}function r8(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=qR(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function XR(n,e,t,i,r,o,s,a,l,c,d){let u=e.blueprint.slice();return u[cl]=r,u[Nt]=i|4|128|8|64|1024,(c!==null||n&&n[Nt]&2048)&&(u[Nt]|=2048),nO(u),u[Ar]=u[Sh]=n,u[yr]=t,u[ol]=s||n&&n[ol],u[An]=a||n&&n[An],u[am]=l||n&&n[am]||null,u[mo]=o,u[Fy]=iW(),u[mh]=d,u[Zk]=c,u[ko]=e.type==2?n[ko]:u,u}function o8(n,e,t){let i=Fs(e,n),r=r8(t),o=n[ol].rendererFactory,s=YR(n,XR(n,r,null,pj(t),i,e,null,o.createRenderer(i,t),null,null,null));return n[e.index]=s}function pj(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function mj(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function YR(n,e){return n[lm]?n[GF][Ps]=e:n[lm]=e,n[GF]=e,e}function k(n=1){gj(In(),Ut(),sc()+n,!1)}function gj(n,e,t,i){if(!i)if((e[Nt]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Hv(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Gv(e,o,0,t)}Rd(t)}var Gy=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Gy||{});function _j(n,e,t,i){let r=_i(null);try{let[o,s,a]=n.inputs[t],l=null;s&Gy.SignalBased&&(l=e[o][ro]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(e,i)),n.setInput!==null?n.setInput(e,l,i,t,o):Kk(e,l,o,i)}finally{_i(r)}}function bj(n,e,t,i,r){let o=sc(),s=i&2;try{Rd(-1),s&&e.length>er&&gj(n,e,er,!1),Ko(s?2:0,r),t(i,r)}finally{Rd(o),Ko(s?3:1,r)}}function ZR(n,e,t){jy()&&(jd(Fs(t,e),e),vj(n,e,t))}function vj(n,e,t){u8(n,e,t),(t.flags&64)===64&&h8(n,e,t)}function QR(n,e,t=Fs){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?t(e,n):n[s];n[r++]=a}}}function s8(n,e,t,i){let o=i.get(lW,HO)||t===ga.ShadowDom,s=n.selectRootElement(e,o);return a8(s),s}function a8(n){l8(n)}var l8=()=>null;function c8(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function yj(n,e,t,i,r,o,s,a){let l=e.inputs,c;if(!a&&l!=null&&(c=l[i]))JR(n,t,c,i,r),Pd(e)&&d8(t,e.index);else if(e.type&3){let d=Fs(e,t);i=c8(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(d,i,r)}else e.type&12}function d8(n,e){let t=pa(e,n);t[Nt]&16||(t[Nt]|=64)}function u8(n,e,t){let i=t.directiveStart,r=t.directiveEnd;Pd(t)&&o8(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||ry(t,e);let o=t.initialInputs;for(let s=i;s<r;s++){let a=n.data[s],l=cm(e,n,s,t);if(jd(l,e),o!==null&&g8(e,s-i,l,a,t,o),al(a)){let c=pa(t.index,e);c[yr]=cm(e,n,s,t)}}}function h8(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,s=v5();try{Rd(o);for(let a=i;a<r;a++){let l=n.data[a],c=e[a];ET(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&f8(l,c)}}finally{Rd(-1),ET(s)}}function f8(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function KR(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let o=t[r];dj(e,o.selectors,!1)&&(i??=[],al(o)?i.unshift(o):i.push(o))}return i}function p8(n,e,t,i,r,o){let s=Fs(n,e);m8(e[An],s,o,n.value,t,i,r)}function m8(n,e,t,i,r,o,s){if(o==null)n.removeAttribute(e,r,t);else{let a=s==null?Ty(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}function g8(n,e,t,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];_j(i,t,l,c)}}function xj(n,e){let t=n[am],i=t?t.get(uo,null):null;i&&i.handleError(e)}function JR(n,e,t,i,r){for(let o=0;o<t.length;o+=2){let s=t[o],a=t[o+1],l=e[s],c=n.data[s];_j(c,l,a,r)}}function _8(n,e){let t=pa(e,n),i=t[Jt];b8(i,t);let r=t[cl];r!==null&&t[mh]===null&&(t[mh]=$O(r,t[am])),eC(i,t,t[yr])}function b8(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function eC(n,e,t){FR(e);try{let i=n.viewQuery;i!==null&&LT(1,i,t);let r=n.template;r!==null&&bj(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[sl]?.finishViewCreation(n),n.staticContentQueries&&qO(n,e),n.staticViewQueries&&LT(2,n.viewQuery,t);let o=n.components;o!==null&&v8(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Nt]&=-5,kR()}}function v8(n,e){for(let t=0;t<e.length;t++)_8(n,e[t])}function Mm(n,e,t,i){let r=_i(null);try{let o=e.tView,a=n[Nt]&4096?4096:16,l=XR(n,o,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=n[e.index];l[wd]=c;let d=n[sl];return d!==null&&(l[sl]=d.createEmbeddedView(o)),eC(o,l,t),l}finally{_i(r)}}function vh(n,e){return!e||e.firstChild===null||jO(n)}var y8;function tC(n,e){return y8(n,e)}var _a=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(_a||{});function iC(n){return(n.flags&32)===32}function dh(n,e,t,i,r){if(i!=null){let o,s=!1;dl(i)?o=i:nc(i)&&(s=!0,i=i[cl]);let a=fa(i);n===0&&t!==null?r==null?hj(e,t,a):ly(e,t,a,r||null,!0):n===1&&t!==null?ly(e,t,a,r||null,!0):n===2?e8(e,a,s):n===3&&e.destroyNode(a),o!=null&&A8(e,n,o,t,r)}}function x8(n,e){wj(n,e),e[cl]=null,e[mo]=null}function w8(n,e,t,i,r,o){i[cl]=r,i[mo]=e,qy(n,i,t,1,r,o)}function wj(n,e){e[ol].changeDetectionScheduler?.notify(10),qy(n,e,e[An],2,null,null)}function M8(n){let e=n[lm];if(!e)return dT(n[Jt],n);for(;e;){let t=null;if(nc(e))t=e[lm];else{let i=e[Dr];i&&(t=i)}if(!t){for(;e&&!e[Ps]&&e!==n;)nc(e)&&dT(e[Jt],e),e=e[Ar];e===null&&(e=n),nc(e)&&dT(e[Jt],e),t=e&&e[Ps]}e=t}}function nC(n,e){let t=n[gh],i=t.indexOf(e);t.splice(i,1)}function Wy(n,e){if(_m(e))return;let t=e[An];t.destroyNode&&qy(n,e,t,3,null,null),M8(e)}function dT(n,e){if(_m(e))return;let t=_i(null);try{e[Nt]&=-129,e[Nt]|=256,e[Po]&&Zu(e[Po]),T8(n,e),S8(n,e),e[Jt].type===1&&e[An].destroy();let i=e[wd];if(i!==null&&dl(e[Ar])){i!==e[Ar]&&nC(i,e);let r=e[sl];r!==null&&r.detachView(n)}OT(e)}finally{_i(t)}}function S8(n,e){let t=n.cleanup,i=e[Qv];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[t[s+1]];t[s].call(a)}i!==null&&(e[Qv]=null);let r=e[ic];if(r!==null){e[ic]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=e[Md];if(o!==null){e[Md]=null;for(let s of o)s.destroy()}}function T8(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof Cd)){let o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];Ko(4,a,l);try{l.call(a)}finally{Ko(5,a,l)}}else{Ko(4,r,o);try{o.call(r)}finally{Ko(5,r,o)}}}}}function Mj(n,e,t){return R8(n,e.parent,t)}function R8(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[cl];if(Pd(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===ga.None||r===ga.Emulated)return null}return Fs(i,t)}function Sj(n,e,t){return E8(n,e,t)}function C8(n,e,t){return n.type&40?Fs(n,t):null}var E8=C8,dk;function $y(n,e,t,i){let r=Mj(n,i,e),o=e[An],s=i.parent||e[mo],a=Sj(s,i,e);if(r!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)ck(o,r,t[l],a,!1);else ck(o,r,t,a,!1);dk!==void 0&&dk(o,i,e,t,r)}function im(n,e){if(e!==null){let t=e.type;if(t&3)return Fs(e,n);if(t&4)return qT(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return im(n,i);{let r=n[e.index];return dl(r)?qT(-1,r):fa(r)}}else{if(t&128)return im(n,e.next);if(t&32)return tC(e,n)()||fa(n[e.index]);{let i=Tj(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Td(n[ko]);return im(r,i)}else return im(n,e.next)}}}return null}function Tj(n,e){if(e!==null){let i=n[ko][mo],r=e.projection;return i.projection[r]}return null}function qT(n,e){let t=Dr+n+1;if(t<e.length){let i=e[t],r=i[Jt].firstChild;if(r!==null)return im(i,r)}return e[Sd]}function rC(n,e,t,i,r,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=i[t.index],l=t.type;if(s&&e===0&&(a&&jd(fa(a),i),t.flags|=2),!iC(t))if(l&8)rC(n,e,t.child,i,r,o,!1),dh(e,n,r,a,o);else if(l&32){let c=tC(t,i),d;for(;d=c();)dh(e,n,r,d,o);dh(e,n,r,a,o)}else l&16?Rj(n,e,i,t,r,o):dh(e,n,r,a,o);t=s?t.projectionNext:t.next}}function qy(n,e,t,i,r,o){rC(t,i,n.firstChild,e,r,o,!1)}function D8(n,e,t){let i=e[An],r=Mj(n,t,e),o=t.parent||e[mo],s=Sj(o,t,e);Rj(i,0,e,t,r,s)}function Rj(n,e,t,i,r,o){let s=t[ko],l=s[mo].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let d=l[c];dh(e,n,r,d,o)}else{let c=l,d=s[Ar];jO(i)&&(c.flags|=128),rC(n,e,c,d,r,o,!0)}}function A8(n,e,t,i,r){let o=t[Sd],s=fa(t);o!==s&&dh(e,n,i,o,r);for(let a=Dr;a<t.length;a++){let l=t[a];qy(l[Jt],l,n,e,i,o)}}function I8(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:_a.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=_a.Important),n.setStyle(t,i,r,o))}}function cy(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(fa(o)),dl(o)&&P8(o,i);let s=t.type;if(s&8)cy(n,e,t.child,i);else if(s&32){let a=tC(t,e),l;for(;l=a();)i.push(l)}else if(s&16){let a=Tj(e,t);if(Array.isArray(a))i.push(...a);else{let l=Td(e[ko]);cy(l[Jt],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function P8(n,e){for(let t=Dr;t<n.length;t++){let i=n[t],r=i[Jt].firstChild;r!==null&&cy(i[Jt],i,r,e)}n[Sd]!==n[cl]&&e.push(n[Sd])}var Cj=[];function F8(n){return n[Po]??k8(n)}function k8(n){let e=Cj.pop()??Object.create(j8);return e.lView=n,e}function O8(n){n.lView[Po]!==n&&(n.lView=null,Cj.push(n))}var j8=Ft(ce({},dd),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{bm(n.lView)},consumerOnSignalRead(){this.lView[Po]=this}});function N8(n){let e=n[Po]??Object.create(L8);return e.lView=n,e}var L8=Ft(ce({},dd),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Td(n.lView);for(;e&&!Ej(e[Jt]);)e=Td(e);e&&DR(e)},consumerOnSignalRead(){this.lView[Po]=this}});function Ej(n){return n.type!==2}function Dj(n){if(n[Md]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[Md])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[Nt]&8192)}}var B8=100;function Aj(n,e=!0,t=0){let r=n[ol].rendererFactory,o=!1;o||r.begin?.();try{U8(n,t)}catch(s){throw e&&xj(n,s),s}finally{o||r.end?.()}}function U8(n,e){let t=cO();try{ey(!0),XT(n,e);let i=0;for(;Oy(n);){if(i===B8)throw new Te(103,!1);i++,XT(n,1)}}finally{ey(t)}}function V8(n,e,t,i){if(_m(e))return;let r=e[Nt],o=!1,s=!1;FR(e);let a=!0,l=null,c=null;o||(Ej(n)?(c=F8(e),l=Yu(c)):QP()===null?(a=!1,c=N8(e),l=Yu(c)):e[Po]&&(Zu(e[Po]),e[Po]=null));try{nO(e),g5(n.bindingStartIndex),t!==null&&bj(n,e,t,2,i);let d=(r&3)===3;if(!o)if(d){let f=n.preOrderCheckHooks;f!==null&&Hv(e,f,null)}else{let f=n.preOrderHooks;f!==null&&Gv(e,f,0,null),aT(e,0)}if(s||z8(e),Dj(e),Ij(e,0),n.contentQueries!==null&&qO(n,e),!o)if(d){let f=n.contentCheckHooks;f!==null&&Hv(e,f)}else{let f=n.contentHooks;f!==null&&Gv(e,f,1),aT(e,1)}G8(n,e);let u=n.components;u!==null&&Fj(e,u,0);let h=n.viewQuery;if(h!==null&&LT(2,h,i),!o)if(d){let f=n.viewCheckHooks;f!==null&&Hv(e,f)}else{let f=n.viewHooks;f!==null&&Gv(e,f,2),aT(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[zv]){for(let f of e[zv])f();e[zv]=null}o||(e[Nt]&=-73)}catch(d){throw o||bm(e),d}finally{c!==null&&(Gp(c,l),a&&O8(c)),kR()}}function Ij(n,e){for(let t=BO(n);t!==null;t=UO(t))for(let i=Dr;i<t.length;i++){let r=t[i];Pj(r,e)}}function z8(n){for(let e=BO(n);e!==null;e=UO(e)){if(!(e[Nt]&2))continue;let t=e[gh];for(let i=0;i<t.length;i++){let r=t[i];DR(r)}}}function H8(n,e,t){let i=pa(e,n);Pj(i,t)}function Pj(n,e){ER(n)&&XT(n,e)}function XT(n,e){let i=n[Jt],r=n[Nt],o=n[Po],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&Wp(o)),s||=!1,o&&(o.dirty=!1),n[Nt]&=-9217,s)V8(i,n,i.template,n[yr]);else if(r&8192){Dj(n),Ij(n,1);let a=i.components;a!==null&&Fj(n,a,1)}}function Fj(n,e,t){for(let i=0;i<e.length;i++)H8(n,e[i],t)}function G8(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Rd(~r);else{let o=r,s=t[++i],a=t[++i];b5(s,o);let l=e[o];Ko(24,l),a(2,l),Ko(25,l)}}}finally{Rd(-1)}}function oC(n,e){let t=cO()?64:1088;for(n[ol].changeDetectionScheduler?.notify(e);n;){n[Nt]|=t;let i=Td(n);if(Jv(n)&&!i)return n;n=i}return null}function kj(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function Oj(n,e){let t=Dr+e;if(t<n.length)return n[t]}function Sm(n,e,t,i=!0){let r=e[Jt];if(W8(r,e,n,t),i){let s=qT(t,n),a=e[An],l=a.parentNode(n[Sd]);l!==null&&w8(r,n[mo],a,e,l,s)}let o=e[mh];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function jj(n,e){let t=um(n,e);return t!==void 0&&Wy(t[Jt],t),t}function um(n,e){if(n.length<=Dr)return;let t=Dr+e,i=n[t];if(i){let r=i[wd];r!==null&&r!==n&&nC(r,i),e>0&&(n[t-1][Ps]=i[Ps]);let o=Yv(n,Dr+e);x8(i[Jt],i);let s=o[sl];s!==null&&s.detachView(o[Jt]),i[Ar]=null,i[Ps]=null,i[Nt]&=-129}return i}function W8(n,e,t,i){let r=Dr+i,o=t.length;i>0&&(t[r-1][Ps]=e),i<o-Dr?(e[Ps]=t[r],Lk(t,Dr+i,e)):(t.push(e),e[Ps]=null),e[Ar]=t;let s=e[wd];s!==null&&t!==s&&Nj(s,e);let a=e[sl];a!==null&&a.insertView(n),RT(e),e[Nt]|=128}function Nj(n,e){let t=n[gh],i=e[Ar];if(nc(i))n[Nt]|=2;else{let r=i[Ar][ko];e[ko]!==r&&(n[Nt]|=2)}t===null?n[gh]=[e]:t.push(e)}var Dd=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Jt];return cy(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i}get context(){return this._lView[yr]}get dirty(){return!!(this._lView[Nt]&9280)||!!this._lView[Po]?.dirty}set context(e){this._lView[yr]=e}get destroyed(){return _m(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ar];if(dl(e)){let t=e[Kv],i=t?t.indexOf(this):-1;i>-1&&(um(e,i),Yv(t,i))}this._attachedToViewContainer=!1}Wy(this._lView[Jt],this._lView)}onDestroy(e){rO(this._lView,e)}markForCheck(){oC(this._cdRefInjectingView||this._lView,4)}markForRefresh(){DR(this._cdRefInjectingView||this._lView)}detach(){this._lView[Nt]&=-129}reattach(){RT(this._lView),this._lView[Nt]|=128}detectChanges(){this._lView[Nt]|=1024,Aj(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Jv(this._lView),t=this._lView[wd];t!==null&&!e&&nC(t,this._lView),wj(this._lView[Jt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Te(902,!1);this._appRef=e;let t=Jv(this._lView),i=this._lView[wd];i!==null&&!t&&Nj(i,this._lView),RT(this._lView)}},Oo=(()=>{class n{static __NG_ELEMENT_ID__=X8}return n})(),$8=Oo,q8=class extends $8{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=Mm(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new Dd(r)}};function X8(){return Xy(Ir(),Ut())}function Xy(n,e){return n.type&4?new q8(e,n,Rh(n,e)):null}function Tm(n,e,t,i,r){let o=n.data[e];if(o===null)o=Y8(n,e,t,i,r),_5()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let s=p5();o.injectorIndex=s===null?-1:s.injectorIndex}return Fd(o,!0),o}function Y8(n,e,t,i,r){let o=lO(),s=AR(),a=s?o:o&&o.parent,l=n.data[e]=Q8(n,a,t,e,i,r);return Z8(n,l,o,s),l}function Z8(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function Q8(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return aO()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Pye=new RegExp(`^(\\d+)*(${aW}|${sW})*(.*)`);var K8=()=>null;function yh(n,e){return K8(n,e)}var YT=class{},dy=class{},ZT=class{resolveComponentFactory(e){throw Error(`No component factory found for ${co(e)}.`)}},xh=class{static NULL=new ZT},ho=class{},lr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>J8()}return n})();function J8(){let n=Ut(),e=Ir(),t=pa(e.index,n);return(nc(t)?t:n)[An]}var e$=(()=>{class n{static \u0275prov=fe({token:n,providedIn:"root",factory:()=>null})}return n})();function QT(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=bT(r,a);else if(o==2){let l=a,c=e[++s];i=bT(i,l+": "+c+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function be(n,e=fi.Default){let t=Ut();if(t===null)return He(n,e);let i=Ir();return RO(i,t,Xr(n),e)}function Yy(){let n="invalid";throw new Error(n)}function sC(n,e,t,i,r){let o=i===null?null:{"":-1},s=r(n,t);if(s!==null){let[a,l]=i$(n,t,s);r$(n,e,t,a,o,l)}o!==null&&i!==null&&t$(t,i,o)}function t$(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new Te(-301,!1);i.push(e[r],o)}}function i$(n,e,t){let i=[],r=null;for(let o of t)o.findHostDirectiveDefs!==null&&(r??=new Map,o.findHostDirectiveDefs(o,i,r)),al(o)&&(i.push(o),n$(n,e,i.length-1));return Pd(e)?i.push(...t.slice(1)):i.push(...t),[i,r]}function n$(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function r$(n,e,t,i,r,o){for(let c=0;c<i.length;c++)IT(ry(t,e),n,i[c].type);u$(t,n.data.length,i.length);for(let c=0;c<i.length;c++){let d=i[c];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,l=mj(n,e,i.length,null);for(let c=0;c<i.length;c++){let d=i[c];t.mergedAttrs=_h(t.mergedAttrs,d.hostAttrs),a$(n,t,e,l,d),d$(l,d,r),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let u=d.type.prototype;!s&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(u.ngOnChanges||u.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}o$(n,t,o)}function o$(n,e,t){let i=e.directiveStart,r=e.directiveEnd,o=n.data,s=e.attrs,a=[],l=null,c=null;for(let d=i;d<r;d++){let u=o[d],h=t?t.get(u):null,f=h?h.inputs:null,m=h?h.outputs:null;l=uk(0,u.inputs,d,l,f),c=uk(1,u.outputs,d,c,m);let _=l!==null&&s!==null&&!$R(e)?s$(l,d,s):null;a.push(_)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function uk(n,e,t,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;i??={};let a=o;if(r!==null){if(!r.hasOwnProperty(o))continue;a=r[o]}n===0?hk(i,t,a,o):hk(i,t,a,s)}return i}function hk(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function s$(n,e,t){let i=null,r=0;for(;r<t.length;){let o=t[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){let s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){i??=[],i.push(s[a+1],t[r+1]);break}}r+=2}return i}function a$(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=yd(r.type,!0)),s=new Cd(o,al(r),be);n.blueprint[i]=s,t[i]=s,l$(n,e,i,mj(n,t,r.hostVars,ks),r)}function l$(n,e,t,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;c$(s)!=a&&s.push(a),s.push(t,i,o)}}function c$(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function d$(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;al(e)&&(t[""]=n)}}function u$(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Lj(n,e,t,i,r,o,s,a){let l=e.consts,c=rc(l,s),d=Tm(e,n,2,i,c);return o&&sC(e,t,d,rc(l,a),r),d.mergedAttrs=_h(d.mergedAttrs,d.attrs),d.attrs!==null&&QT(d,d.attrs,!1),d.mergedAttrs!==null&&QT(d,d.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,d),d}function Bj(n,e){jR(n,e),TR(e)&&n.queries.elementEnd(e)}var uy=class extends xh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=rl(e);return new Ad(t,this.ngModule)}};function h$(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],o={propName:t,templateName:e,isSignal:(i&Gy.SignalBased)!==0};return r&&(o.transform=r),o})}function f$(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function p$(n,e,t){let i=e instanceof Jn?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new DT(t,i):t}function m$(n){let e=n.get(ho,null);if(e===null)throw new Te(407,!1);let t=n.get(e$,null),i=n.get(Ed,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i}}function g$(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return uj(e,t,t==="svg"?i5:t==="math"?n5:null)}var Ad=class extends dy{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){return h$(this.componentDef.inputs)}get outputs(){return f$(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=YW(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r){let o=_i(null);try{let s=this.componentDef,a=i?["ng-version","19.1.7"]:ZW(this.componentDef.selectors[0]),l=qR(0,null,null,1,0,null,null,null,null,[a],null),c=p$(s,r||this.ngModule,e),d=m$(c),u=d.rendererFactory.createRenderer(null,s),h=i?s8(u,i,s.encapsulation,c):g$(s,u),f=XR(null,l,null,512|pj(s),null,null,d,u,c,null,$O(h,c,!0));f[er]=h,FR(f);let m=null;try{let _=Lj(er,l,f,"#host",()=>[this.componentDef],!0,0);h&&(fj(u,h,_),jd(h,f)),vj(l,f,_),GR(l,_,f),Bj(l,_),t!==void 0&&_$(_,this.ngContentSelectors,t),m=pa(_.index,f),f[yr]=m[yr],eC(l,f,null)}catch(_){throw m!==null&&OT(m),OT(f),_}finally{kR()}return new KT(this.componentType,f)}finally{_i(o)}}},KT=class extends YT{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=RR(t[Jt],er),this.location=Rh(this._tNode,t),this.instance=pa(this._tNode.index,t)[yr],this.hostView=this.changeDetectorRef=new Dd(t,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;JR(o[Jt],o,r,e,t),this.previousInputValues.set(e,t);let s=pa(this._tNode.index,o);oC(s,1)}}get injector(){return new vd(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function _$(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null&&o.length?Array.from(o):null)}}var Yr=(()=>{class n{static __NG_ELEMENT_ID__=b$}return n})();function b$(){let n=Ir();return Vj(n,Ut())}var v$=Yr,Uj=class extends v${_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Rh(this._hostTNode,this._hostLView)}get injector(){return new vd(this._hostTNode,this._hostLView)}get parentInjector(){let e=NR(this._hostTNode,this._hostLView);if(yO(e)){let t=iy(e,this._hostLView),i=ty(e),r=t[Jt].data[i+8];return new vd(r,t)}else return new vd(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=fk(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Dr}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=yh(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,r,vh(this._hostTNode,s)),a}createComponent(e,t,i,r,o){let s=e&&!KG(e),a;if(s)a=t;else{let m=t||{};a=m.index,i=m.injector,r=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}let l=s?e:new Ad(rl(e)),c=i||this.parentInjector;if(!o&&l.ngModule==null){let _=(s?c:this.parentInjector).get(Jn,null);_&&(o=_)}let d=rl(l.componentType??{}),u=yh(this._lContainer,d?.id??null),h=u?.firstChild??null,f=l.create(c,r,h,o);return this.insertImpl(f.hostView,a,vh(this._hostTNode,u)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(o5(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[Ar],c=new Uj(l,l[mo],l[Ar]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Sm(s,r,o,i),e.attachToViewContainerRef(),Lk(uT(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=fk(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=um(this._lContainer,t);i&&(Yv(uT(this._lContainer),t),Wy(i[Jt],i))}detach(e){let t=this._adjustIndex(e,-1),i=um(this._lContainer,t);return i&&Yv(uT(this._lContainer),t)!=null?new Dd(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function fk(n){return n[Kv]}function uT(n){return n[Kv]||(n[Kv]=[])}function Vj(n,e){let t,i=e[n.index];return dl(i)?t=i:(t=kj(i,e,null,n),e[n.index]=t,YR(e,t)),x$(t,e,n,i),new Uj(t,n,e)}function y$(n,e){let t=n[An],i=t.createComment(""),r=Fs(e,n),o=t.parentNode(r);return ly(t,o,i,t.nextSibling(r),!1),i}var x$=S$,w$=()=>!1;function M$(n,e,t){return w$(n,e,t)}function S$(n,e,t,i){if(n[Sd])return;let r;t.type&8?r=fa(i):r=y$(e,t),n[Sd]=r}var JT=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},eR=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)aC(e,t).matches!==null&&this.queries[t].setDirty()}},hy=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=P$(e):this.predicate=e}},tR=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},iR=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,T$(t,o)),this.matchTNodeWithReadOption(e,t,Wv(t,e,o,!1,!1))}else i===Oo?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Wv(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===_t||r===Yr||r===Oo&&t.type&4)this.addMatch(t.index,-2);else{let o=Wv(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function T$(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function R$(n,e){return n.type&11?Rh(n,e):n.type&4?Xy(n,e):null}function C$(n,e,t,i){return t===-1?R$(e,n):t===-2?E$(n,e,i):cm(n,n[Jt],t,e)}function E$(n,e,t){if(t===_t)return Rh(e,n);if(t===Oo)return Xy(e,n);if(t===Yr)return Vj(e,n)}function zj(n,e,t,i){let r=e[sl].queries[i];if(r.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let d=o[c];a.push(C$(e,d,s[l+1],t.metadata.read))}}r.matches=a}return r.matches}function nR(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let s=zj(n,e,r,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let c=o[a+1],d=e[-l];for(let u=Dr;u<d.length;u++){let h=d[u];h[wd]===h[Ar]&&nR(h[Jt],h,c,i)}if(d[gh]!==null){let u=d[gh];for(let h=0;h<u.length;h++){let f=u[h];nR(f[Jt],f,c,i)}}}}}return i}function D$(n,e){return n[sl].queries[e].queryList}function Hj(n,e,t){let i=new ma((t&4)===4);return l5(n,e,i,i.destroy),(e[sl]??=new eR).queries.push(new JT(i))-1}function A$(n,e,t){let i=In();return i.firstCreatePass&&(Gj(i,new hy(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),Hj(i,Ut(),e)}function I$(n,e,t,i){let r=In();if(r.firstCreatePass){let o=Ir();Gj(r,new hy(e,t,i),o.index),F$(r,n),(t&2)===2&&(r.staticContentQueries=!0)}return Hj(r,Ut(),t)}function P$(n){return n.split(",").map(e=>e.trim())}function Gj(n,e,t){n.queries===null&&(n.queries=new tR),n.queries.track(new iR(e,t))}function F$(n,e){let t=n.contentQueries||(n.contentQueries=[]),i=t.length?t[t.length-1]:-1;e!==i&&t.push(n.queries.length-1,e)}function aC(n,e){return n.queries.getByIndex(e)}function k$(n,e){let t=n[Jt],i=aC(t,e);return i.crossesNgTemplate?nR(t,n,e,[]):zj(t,n,i,e)}function O$(n){let e=[],t=new Map;function i(r){let o=t.get(r);if(!o){let s=n(r);t.set(r,o=s.then(B$))}return o}return fy.forEach((r,o)=>{let s=[];r.templateUrl&&s.push(i(r.templateUrl).then(c=>{r.template=c}));let a=typeof r.styles=="string"?[r.styles]:r.styles||[];if(r.styles=a,r.styleUrl&&r.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(r.styleUrls?.length){let c=r.styles.length,d=r.styleUrls;r.styleUrls.forEach((u,h)=>{a.push(""),s.push(i(u).then(f=>{a[c+h]=f,d.splice(d.indexOf(u),1),d.length==0&&(r.styleUrls=void 0)}))})}else r.styleUrl&&s.push(i(r.styleUrl).then(c=>{a.push(c),r.styleUrl=void 0}));let l=Promise.all(s).then(()=>U$(o));e.push(l)}),N$(),Promise.all(e).then(()=>{})}var fy=new Map,j$=new Set;function N$(){let n=fy;return fy=new Map,n}function L$(){return fy.size===0}function B$(n){return typeof n=="string"?n:n.text()}function U$(n){j$.delete(n)}var Jo=class{},hm=class{};function Wj(n,e){return new fm(n,e??null,[])}var fm=class extends Jo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new uy(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let o=Vk(e);this._bootstrapComponents=lj(o.bootstrap),this._r3Injector=DO(e,t,[{provide:Jo,useValue:this},{provide:xh,useValue:this.componentFactoryResolver},...i],co(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},py=class extends hm{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new fm(this.moduleType,e,[])}};function V$(n,e,t){return new fm(n,e,t,!1)}var rR=class extends Jo{injector;componentFactoryResolver=new uy(this);instance=null;constructor(e){super();let t=new sm([...e.providers,{provide:Jo,useValue:this},{provide:xh,useValue:this.componentFactoryResolver}],e.parent||Iy(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Zy(n,e,t=null){return new rR({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var z$=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=Wk(!1,t.type),r=i.length>0?Zy([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=fe({token:n,providedIn:"environment",factory:()=>new n(He(Jn))})}return n})();function j(n){return mm(()=>{let e=$j(n),t=Ft(ce({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===NO.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(z$).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ga.Emulated,styles:n.styles||lo,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&ts("NgStandalone"),qj(t);let i=n.dependencies;return t.directiveDefs=pk(i,!1),t.pipeDefs=pk(i,!0),t.id=q$(t),t})}function H$(n){return rl(n)||zk(n)}function G$(n){return n!==null}function Ke(n){return mm(()=>({type:n.type,bootstrap:n.bootstrap||lo,declarations:n.declarations||lo,imports:n.imports||lo,exports:n.exports||lo,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function W$(n,e){if(n==null)return xd;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a,l;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,l=r[3]||null):(o=r,s=r,a=Gy.None,l=null),t[o]=[i,a,l],e[o]=s}return t}function $$(n){if(n==null)return xd;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ue(n){return mm(()=>{let e=$j(n);return qj(e),e})}function rs(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function $j(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||xd,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||lo,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:W$(n.inputs,e),outputs:$$(n.outputs),debugInfo:null}}function qj(n){n.features?.forEach(e=>e(n))}function pk(n,e){if(!n)return null;let t=e?Hk:H$;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(G$)}function q$(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function X$(n){return Object.getPrototypeOf(n.prototype).constructor}function q(n){let e=X$(n.type),t=!0,i=[n];for(;e;){let r;if(al(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Te(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let s=n;s.inputs=hT(n.inputs),s.declaredInputs=hT(n.declaredInputs),s.outputs=hT(n.outputs);let a=r.hostBindings;a&&J$(n,a);let l=r.viewQuery,c=r.contentQueries;if(l&&Q$(n,l),c&&K$(n,c),Y$(n,r),gG(n.outputs,r.outputs),al(r)&&r.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===q&&(t=!1)}}e=Object.getPrototypeOf(e)}Z$(i)}function Y$(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function Z$(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=_h(r.hostAttrs,t=_h(t,r.hostAttrs))}}function hT(n){return n===xd?{}:n===lo?[]:n}function Q$(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function K$(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function J$(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function Xj(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Rm(n,e,t){return n[e]=t}function e6(n,e){return n[e]}function es(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function my(n,e,t,i){let r=es(n,e,t);return es(n,e+1,i)||r}function t6(n,e,t,i,r){let o=my(n,e,t,i);return es(n,e+2,r)||o}function i6(n,e,t,i,r,o){let s=my(n,e,t,i);return my(n,e+2,r,o)||s}function n6(n,e,t,i,r,o,s,a,l){let c=e.consts,d=Tm(e,n,4,s||null,a||null);jy()&&sC(e,t,d,rc(c,l),KR),d.mergedAttrs=_h(d.mergedAttrs,d.attrs),jR(e,d);let u=d.tView=qR(2,d,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,d),u.queries=e.queries.embeddedTView(d)),d}function gy(n,e,t,i,r,o,s,a,l,c){let d=t+er,u=e.firstCreatePass?n6(d,e,n,i,r,o,s,a,l):e.data[d];Fd(u,!1);let h=r6(e,n,u,t);Ny()&&$y(e,n,h,u),jd(h,n);let f=kj(h,n,h,u);return n[d]=f,YR(n,f),M$(f,u,n),ky(u)&&ZR(e,n,u),l!=null&&QR(n,u,c),u}function Ni(n,e,t,i,r,o,s,a){let l=Ut(),c=In(),d=rc(c.consts,o);return gy(l,c,n,e,t,i,r,d,s,a),Ni}var r6=o6;function o6(n,e,t,i){return Ly(!0),e[An].createComment("")}var lC=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var cC=new ye(""),Cm=new ye(""),Qy=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];taskTrackingZone=null;constructor(t,i,r){this._ngZone=t,this.registry=i,dC||(s6(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{nt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(t)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},i)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static \u0275fac=function(i){return new(i||n)(He(nt),He(Ky),He(Cm))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),Ky=(()=>{class n{_applications=new Map;registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return dC?.findTestabilityInTree(this,t,i)??null}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function s6(n){dC=n}var dC;function lc(n){return!!n&&typeof n.then=="function"}function uC(n){return!!n&&typeof n.subscribe=="function"}var Jy=new ye("");var Yj=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=E(Jy,{optional:!0})??[];injector=E(yi);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=po(this.injector,r);if(lc(o))t.push(o);else if(uC(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Zj=(()=>{class n{static \u0275prov=fe({token:n,providedIn:"root",factory:()=>new _y})}return n})(),_y=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||(this.queuedEffectCount++,i.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},e0=new ye("");function a6(){lF(()=>{throw new Te(600,!1)})}function l6(n){return n.isBoundToModule}var c6=10;function Qj(n,e){return Array.isArray(e)?e.reduce(Qj,n):ce(ce({},n),e)}var fo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=E(Y5);afterRenderManager=E(GO);zonelessEnabled=E(LR);rootEffectScheduler=E(Zj);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new tt;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=E(ba).hasPendingTasks.pipe(lt(t=>!t));constructor(){E(Ch,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=E(Jn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){let r=t instanceof dy;if(!this._injector.get(Yj).done){let h=!r&&Gk(t),f=!1;throw new Te(405,f)}let s;r?s=t:s=this._injector.get(xh).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=l6(s)?void 0:this._injector.get(Jo),l=i||s.selector,c=s.create(yi.NULL,[],l,a),d=c.location.nativeElement,u=c.injector.get(cC,null);return u?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),$v(this.components,c),u?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let i=this.tracingSnapshot;this.tracingSnapshot=null,i.run(zR.CHANGE_DETECTION,this._tick),i.dispose();return}if(this._runningTick)throw new Te(101,!1);let t=_i(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,_i(t),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ho,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let t=0;for(;this.dirtyFlags!==0&&t++<c6;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:r}of this.allViews)d6(i,r,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Oy(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;$v(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(e0,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>$v(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Te(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $v(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function d6(n,e,t,i){if(!t&&!Oy(n))return;Aj(n,e,t&&!i?0:1)}function Li(n,e,t,i){let r=Ut(),o=Th();if(es(r,o,e)){let s=In(),a=OR();p8(a,r,n,e,t,i)}return Li}function u6(n,e,t,i){return es(n,Th(),t)?e+Ty(t)+i:ks}function Bv(n,e){return n<<17|e<<2}function Id(n){return n>>17&32767}function h6(n){return(n&2)==2}function f6(n,e){return n&131071|e<<17}function oR(n){return n|2}function wh(n){return(n&131068)>>2}function fT(n,e){return n&-131069|e<<2}function p6(n){return(n&1)===1}function sR(n){return n|1}function m6(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=Id(s),l=wh(s);n[i]=t;let c=!1,d;if(Array.isArray(t)){let u=t;d=u[1],(d===null||gm(u,d)>0)&&(c=!0)}else d=t;if(r)if(l!==0){let h=Id(n[a+1]);n[i+1]=Bv(h,a),h!==0&&(n[h+1]=fT(n[h+1],i)),n[a+1]=f6(n[a+1],i)}else n[i+1]=Bv(a,0),a!==0&&(n[a+1]=fT(n[a+1],i)),a=i;else n[i+1]=Bv(l,0),a===0?a=i:n[l+1]=fT(n[l+1],i),l=i;c&&(n[i+1]=oR(n[i+1])),mk(n,d,i,!0),mk(n,d,i,!1),g6(e,d,n,i,o),s=Bv(a,l),o?e.classBindings=s:e.styleBindings=s}function g6(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&gm(o,e)>=0&&(t[i+1]=sR(t[i+1]))}function mk(n,e,t,i){let r=n[t+1],o=e===null,s=i?Id(r):wh(r),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],c=n[s+1];_6(l,e)&&(a=!0,n[s+1]=i?sR(c):oR(c)),s=i?Id(c):wh(c)}a&&(n[t+1]=i?oR(r):sR(r))}function _6(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?gm(n,e)>=0:!1}var Kn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Kj(n){return n.substring(Kn.key,Kn.keyEnd)}function b6(n){return n.substring(Kn.value,Kn.valueEnd)}function v6(n){return tN(n),Jj(n,Mh(n,0,Kn.textEnd))}function Jj(n,e){let t=Kn.textEnd;return t===e?-1:(e=Kn.keyEnd=x6(n,Kn.key=e,t),Mh(n,e,t))}function y6(n){return tN(n),eN(n,Mh(n,0,Kn.textEnd))}function eN(n,e){let t=Kn.textEnd,i=Kn.key=Mh(n,e,t);return t===i?-1:(i=Kn.keyEnd=w6(n,i,t),i=gk(n,i,t,58),i=Kn.value=Mh(n,i,t),i=Kn.valueEnd=M6(n,i,t),gk(n,i,t,59))}function tN(n){Kn.key=0,Kn.keyEnd=0,Kn.value=0,Kn.valueEnd=0,Kn.textEnd=n.length}function Mh(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function x6(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function w6(n,e,t){let i;for(;e<t&&((i=n.charCodeAt(e))===45||i===95||(i&-33)>=65&&(i&-33)<=90||i>=48&&i<=57);)e++;return e}function gk(n,e,t,i){return e=Mh(n,e,t),e<t&&e++,e}function M6(n,e,t){let i=-1,r=-1,o=-1,s=e,a=s;for(;s<t;){let l=n.charCodeAt(s++);if(l===59)return a;l===34||l===39?a=s=_k(n,l,s,t):e===s-4&&o===85&&r===82&&i===76&&l===40?a=s=_k(n,41,s,t):l>32&&(a=s),o=r,r=i,i=l&-33}return a}function _k(n,e,t,i){let r=-1,o=t;for(;o<i;){let s=n.charCodeAt(o++);if(s==e&&r!==92)return o;s==92&&r===92?r=0:r=s}throw new Error}function O(n,e,t){let i=Ut(),r=Th();if(es(i,r,e)){let o=In(),s=OR();yj(o,s,i,n,e,i[An],t,!1)}return O}function aR(n,e,t,i,r){let o=e.inputs,s=r?"class":"style";JR(n,t,o[s],s,i)}function os(n,e,t){return iN(n,e,t,!1),os}function Vt(n,e){return iN(n,e,null,!0),Vt}function t0(n){nN(sN,S6,n,!1)}function S6(n,e){for(let t=y6(e);t>=0;t=eN(e,t))sN(n,Kj(e),b6(e))}function ss(n){nN(I6,T6,n,!0)}function T6(n,e){for(let t=v6(e);t>=0;t=Jj(e,t))Ey(n,Kj(e),!0)}function iN(n,e,t,i){let r=Ut(),o=In(),s=dO(2);if(o.firstUpdatePass&&oN(o,n,s,i),e!==ks&&es(r,s,e)){let a=o.data[sc()];aN(o,a,r,r[An],n,r[s+1]=F6(e,t),i,s)}}function nN(n,e,t,i){let r=In(),o=dO(2);r.firstUpdatePass&&oN(r,null,o,i);let s=Ut();if(t!==ks&&es(s,o,t)){let a=r.data[sc()];if(lN(a,i)&&!rN(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=bT(l,t||"")),aR(r,a,s,t,i)}else P6(r,a,s,s[An],s[o+1],s[o+1]=A6(n,e,t),i,o)}}function rN(n,e){return e>=n.expandoStartIndex}function oN(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[sc()],s=rN(n,t);lN(o,i)&&e===null&&!s&&(e=!1),e=R6(r,o,e,i),m6(r,o,e,t,s,i)}}function R6(n,e,t,i){let r=y5(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=pT(null,n,e,t,i),t=pm(t,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==r)if(t=pT(r,n,e,t,i),o===null){let l=C6(n,e,i);l!==void 0&&Array.isArray(l)&&(l=pT(null,n,e,l[1],i),l=pm(l,e.attrs,i),E6(n,e,i,l))}else o=D6(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function C6(n,e,t){let i=t?e.classBindings:e.styleBindings;if(wh(i)!==0)return n[Id(i)]}function E6(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[Id(r)]=i}function D6(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=pm(i,s,t)}return pm(i,e.attrs,t)}function pT(n,e,t,i,r){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],i=pm(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function pm(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Ey(n,s,t?!0:e[++o]))}return n===void 0?null:n}function A6(n,e,t){if(t==null||t==="")return lo;let i=[],r=ns(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function sN(n,e,t){Ey(n,e,ns(t))}function I6(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&Ey(n,i,t)}function P6(n,e,t,i,r,o,s,a){r===ks&&(r=lo);let l=0,c=0,d=0<r.length?r[0]:null,u=0<o.length?o[0]:null;for(;d!==null||u!==null;){let h=l<r.length?r[l+1]:void 0,f=c<o.length?o[c+1]:void 0,m=null,_;d===u?(l+=2,c+=2,h!==f&&(m=u,_=f)):u===null||d!==null&&d<u?(l+=2,m=d):(c+=2,m=u,_=f),m!==null&&aN(n,e,t,i,m,_,s,a),d=l<r.length?r[l]:null,u=c<o.length?o[c]:null}}function aN(n,e,t,i,r,o,s,a){if(!(e.type&3))return;let l=n.data,c=l[a+1],d=p6(c)?bk(l,e,t,r,wh(c),s):void 0;if(!by(d)){by(o)||h6(c)&&(o=bk(l,null,t,r,a,s));let u=iO(sc(),t);I8(i,s,u,r,o)}}function bk(n,e,t,i,r,o){let s=e===null,a;for(;r>0;){let l=n[r],c=Array.isArray(l),d=c?l[1]:l,u=d===null,h=t[r+1];h===ks&&(h=u?lo:void 0);let f=u?oT(h,i):d===i?h:void 0;if(c&&!by(f)&&(f=oT(l,i)),by(f)&&(a=f,s))return a;let m=n[r+1];r=s?Id(m):wh(m)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=oT(l,i))}return a}function by(n){return n!==void 0}function F6(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=co(ns(n)))),n}function lN(n,e){return(n.flags&(e?8:16))!==0}var lR=class{destroy(e){}updateValue(e,t){}swap(e,t){let i=Math.min(e,t),r=Math.max(e,t),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(e,t){this.attach(t,this.detach(e))}};function mT(n,e,t,i,r){return n===t&&Object.is(e,i)?1:Object.is(r(n,e),r(t,i))?-1:0}function k6(n,e,t){let i,r,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;o<=s&&o<=l;){let c=n.at(o),d=e[o],u=mT(o,c,o,d,t);if(u!==0){u<0&&n.updateValue(o,d),o++;continue}let h=n.at(s),f=e[l],m=mT(s,h,l,f,t);if(m!==0){m<0&&n.updateValue(s,f),s--,l--;continue}let _=t(o,c),g=t(s,h),p=t(o,d);if(Object.is(p,g)){let b=t(l,f);Object.is(b,_)?(n.swap(o,s),n.updateValue(s,f),l--,s--):n.move(s,o),n.updateValue(o,d),o++;continue}if(i??=new vy,r??=yk(n,o,s,t),cR(n,i,o,p))n.updateValue(o,d),o++,s++;else if(r.has(p))i.set(_,n.detach(o)),s--;else{let b=n.create(o,e[o]);n.attach(o,b),o++,s++}}for(;o<=l;)vk(n,i,t,o,e[o]),o++}else if(e!=null){let l=e[Symbol.iterator](),c=l.next();for(;!c.done&&o<=s;){let d=n.at(o),u=c.value,h=mT(o,d,o,u,t);if(h!==0)h<0&&n.updateValue(o,u),o++,c=l.next();else{i??=new vy,r??=yk(n,o,s,t);let f=t(o,u);if(cR(n,i,o,f))n.updateValue(o,u),o++,s++,c=l.next();else if(!r.has(f))n.attach(o,n.create(o,u)),o++,s++,c=l.next();else{let m=t(o,d);i.set(m,n.detach(o)),s--}}}for(;!c.done;)vk(n,i,t,n.length,c.value),c=l.next()}for(;o<=s;)n.destroy(n.detach(s--));i?.forEach(l=>{n.destroy(l)})}function cR(n,e,t,i){return e!==void 0&&e.has(i)?(n.attach(t,e.get(i)),e.delete(i),!0):!1}function vk(n,e,t,i,r){if(cR(n,e,i,t(i,r)))n.updateValue(i,r);else{let o=n.create(i,r);n.attach(i,o)}}function yk(n,e,t,i){let r=new Set;for(let o=e;o<=t;o++)r.add(i(o,n.at(o)));return r}var vy=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,i]of this.kvMap)if(e(i,t),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,t)}}};function Mn(n,e){ts("NgControlFlow");let t=Ut(),i=Th(),r=t[i]!==ks?t[i]:-1,o=r!==-1?yy(t,er+r):void 0,s=0;if(es(t,i,n)){let a=_i(null);try{if(o!==void 0&&jj(o,s),n!==-1){let l=er+n,c=yy(t,l),d=fR(t[Jt],l),u=yh(c,d.tView.ssrId),h=Mm(t,d,e,{dehydratedView:u});Sm(c,h,s,vh(d,u))}}finally{_i(a)}}else if(o!==void 0){let a=Oj(o,s);a!==void 0&&(a[yr]=e)}}var dR=class{lContainer;$implicit;$index;constructor(e,t,i){this.lContainer=e,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-Dr}};function wr(n,e){return e}var uR=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,i){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=i}};function cr(n,e,t,i,r,o,s,a,l,c,d,u,h){ts("NgControlFlow");let f=Ut(),m=In(),_=l!==void 0,g=Ut(),p=a?s.bind(g[ko][yr]):s,b=new uR(_,p);g[er+n]=b,gy(f,m,n+1,e,t,i,r,rc(m.consts,o)),_&&gy(f,m,n+2,l,c,d,u,rc(m.consts,h))}var hR=class extends lR{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,i){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=i}get length(){return this.lContainer.length-Dr}at(e){return this.getLView(e)[yr].$implicit}attach(e,t){let i=t[mh];this.needsIndexUpdate||=e!==this.length,Sm(this.lContainer,t,e,vh(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,O6(this.lContainer,e)}create(e,t){let i=yh(this.lContainer,this.templateTNode.tView.ssrId),r=Mm(this.hostLView,this.templateTNode,new dR(this.lContainer,t,e),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(e){Wy(e[Jt],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[yr].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[yr].$index=e}getLView(e){return j6(this.lContainer,e)}};function dr(n){let e=_i(null),t=sc();try{let i=Ut(),r=i[Jt],o=i[t],s=t+1,a=yy(i,s);if(o.liveCollection===void 0){let c=fR(r,s);o.liveCollection=new hR(a,i,c)}else o.liveCollection.reset();let l=o.liveCollection;if(k6(l,n,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let c=Th(),d=l.length===0;if(es(i,c,d)){let u=t+2,h=yy(i,u);if(d){let f=fR(r,u),m=yh(h,f.tView.ssrId),_=Mm(i,f,void 0,{dehydratedView:m});Sm(h,_,0,vh(f,m))}else jj(h,0)}}}finally{_i(e)}}function yy(n,e){return n[e]}function O6(n,e){return um(n,e)}function j6(n,e){return Oj(n,e)}function fR(n,e){return RR(n,e)}function U(n,e,t,i){let r=Ut(),o=In(),s=er+n,a=r[An],l=o.firstCreatePass?Lj(s,o,r,e,KR,jy(),t,i):o.data[s],c=N6(o,r,l,a,e,n);r[s]=c;let d=ky(l);return Fd(l,!0),fj(a,c,l),!iC(l)&&Ny()&&$y(o,r,c,l),c5()===0&&jd(c,r),d5(),d&&(ZR(o,r,l),GR(o,l,r)),i!==null&&QR(r,l),U}function Q(){let n=Ir();AR()?IR():(n=n.parent,Fd(n,!1));let e=n;h5(e)&&f5(),u5();let t=In();return t.firstCreatePass&&Bj(t,e),e.classesWithoutHost!=null&&C5(e)&&aR(t,e,Ut(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&E5(e)&&aR(t,e,Ut(),e.stylesWithoutHost,!1),Q}function ae(n,e,t,i){return U(n,e,t,i),Q(),ae}var N6=(n,e,t,i,r,o)=>(Ly(!0),uj(i,r,M5()));function L6(n,e,t,i,r){let o=e.consts,s=rc(o,i),a=Tm(e,n,8,"ng-container",s);s!==null&&QT(a,s,!0);let l=rc(o,r);return jy()&&sC(e,t,a,l,KR),a.mergedAttrs=_h(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function cN(n,e,t){let i=Ut(),r=In(),o=n+er,s=r.firstCreatePass?L6(o,r,i,e,t):r.data[o];Fd(s,!0);let a=B6(r,i,s,n);return i[o]=a,Ny()&&$y(r,i,a,s),jd(a,i),ky(s)&&(ZR(r,i,s),GR(r,s,i)),t!=null&&QR(i,s),cN}function dN(){let n=Ir(),e=In();return AR()?IR():(n=n.parent,Fd(n,!1)),e.firstCreatePass&&(jR(e,n),TR(n)&&e.queries.elementEnd(n)),dN}function Dh(n,e,t){return cN(n,e,t),dN(),Dh}var B6=(n,e,t,i)=>(Ly(!0),JW(e[An],""));function Xt(){return Ut()}var xy="en-US";var U6=xy;function V6(n){typeof n=="string"&&(U6=n.toLowerCase().replace(/_/g,"-"))}var z6=(n,e,t)=>{};function De(n,e,t,i){let r=Ut(),o=In(),s=Ir();return uN(o,r,r[An],s,n,e,i),De}function H6(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===t&&r[o+1]===i){let a=e[Qv],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function uN(n,e,t,i,r,o,s){let a=ky(i),c=n.firstCreatePass&&sO(n),d=e[yr],u=oO(e),h=!0;if(i.type&3||s){let _=Fs(i,e),g=s?s(_):_,p=u.length,b=s?y=>s(fa(y[i.index])):i.index,v=null;if(!s&&a&&(v=H6(n,e,r,i.index)),v!==null){let y=v.__ngLastListenerFn__||v;y.__ngNextListenerFn__=o,v.__ngLastListenerFn__=o,h=!1}else{o=wk(i,e,d,o),z6(_,r,o);let y=t.listen(g,r,o);u.push(o,y),c&&c.push(r,b,p,p+1)}}else o=wk(i,e,d,o);let f=i.outputs,m;if(h&&f!==null&&(m=f[r])){let _=m.length;if(_)for(let g=0;g<_;g+=2){let p=m[g],b=m[g+1],R=e[p][b].subscribe(o),S=u.length;u.push(o,R),c&&c.push(r,i.index,S,-(S+1))}}}function xk(n,e,t,i){let r=_i(null);try{return Ko(6,e,t),t(i)!==!1}catch(o){return xj(n,o),!1}finally{Ko(7,e,t),_i(r)}}function wk(n,e,t,i){return function r(o){if(o===Function)return i;let s=Pd(n)?pa(n.index,e):e;oC(s,5);let a=xk(e,t,i,o),l=r.__ngNextListenerFn__;for(;l;)a=xk(e,t,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function Ht(n=1){return w5(n)}function G6(n,e){let t=null,i=GW(n);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){t=r;continue}if(i===null?dj(n,o,!0):qW(i,o))return r}return t}function ie(n){let e=Ut()[ko][mo];if(!e.projection){let t=n?n.length:1,i=e.projection=NG(t,null),r=i.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?G6(o,n):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o)}o=o.next}}}function Y(n,e=0,t,i,r,o){let s=Ut(),a=In(),l=i?n+1:null;l!==null&&gy(s,a,l,i,r,o,null,t);let c=Tm(a,er+n,16,null,t||null);c.projection===null&&(c.projection=e),IR();let u=!s[mh]||aO();s[ko][mo].projection[c.projection]===null&&l!==null?W6(s,a,l):u&&!iC(c)&&D8(a,s,c)}function W6(n,e,t){let i=er+t,r=e.data[i],o=n[i],s=yh(o,r.tView.ssrId),a=Mm(n,r,void 0,{dehydratedView:s});Sm(o,a,0,vh(r,s))}function nn(n,e,t,i){I$(n,e,t,i)}function Gt(n,e,t){A$(n,e,t)}function ct(n){let e=Ut(),t=In(),i=uO();PR(i+1);let r=aC(t,i);if(n.dirty&&r5(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=k$(e,i);n.reset(o,K5),n.notifyOnChanges()}return!0}return!1}function dt(){return D$(Ut(),uO())}function $6(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function At(n){let e=m5();return CR(e,er+n)}function It(n,e=""){let t=Ut(),i=In(),r=n+er,o=i.firstCreatePass?Tm(i,r,1,e,null):i.data[r],s=q6(i,t,o,e,n);t[r]=s,Ny()&&$y(i,t,s,o),Fd(o,!1)}var q6=(n,e,t,i,r)=>(Ly(!0),QW(e[An],i));function cc(n){return va("",n,""),cc}function va(n,e,t){let i=Ut(),r=u6(i,n,e,t);return r!==ks&&X6(i,sc(),r),va}function X6(n,e,t){let i=iO(e,n);KW(n[An],i,t)}function Ah(n,e,t){OO(e)&&(e=e());let i=Ut(),r=Th();if(es(i,r,e)){let o=In(),s=OR();yj(o,s,i,n,e,i[An],t,!1)}return Ah}function Em(n,e){let t=OO(n);return t&&n.set(e),t}function Ih(n,e){let t=Ut(),i=In(),r=Ir();return uN(i,t,t[An],r,n,e),Ih}function Y6(n,e,t){let i=In();if(i.firstCreatePass){let r=al(n);pR(t,i.data,i.blueprint,r,!0),pR(e,i.data,i.blueprint,r,!1)}}function pR(n,e,t,i,r){if(n=Xr(n),Array.isArray(n))for(let o=0;o<n.length;o++)pR(n[o],e,t,i,r);else{let o=In(),s=Ut(),a=Ir(),l=ph(n)?n:Xr(n.provide),c=Xk(n),d=a.providerIndexes&1048575,u=a.directiveStart,h=a.providerIndexes>>20;if(ph(n)||!n.multi){let f=new Cd(c,r,be),m=_T(l,e,r?d:d+h,u);m===-1?(IT(ry(a,s),o,l),gT(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(f),s.push(f)):(t[m]=f,s[m]=f)}else{let f=_T(l,e,d+h,u),m=_T(l,e,d,d+h),_=f>=0&&t[f],g=m>=0&&t[m];if(r&&!g||!r&&!_){IT(ry(a,s),o,l);let p=K6(r?Q6:Z6,t.length,r,i,c);!r&&g&&(t[m].providerFactory=p),gT(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(p),s.push(p)}else{let p=hN(t[r?m:f],c,!r&&i);gT(o,n,f>-1?f:m,p)}!r&&i&&g&&t[m].componentProviders++}}}function gT(n,e,t,i){let r=ph(e),o=GG(e);if(r||o){let l=(o?Xr(e.useClass):e).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let d=c.indexOf(t);d===-1?c.push(t,[i,l]):c[d+1].push(i,l)}else c.push(t,l)}}}function hN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function _T(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function Z6(n,e,t,i){return mR(this.multi,[])}function Q6(n,e,t,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=cm(t,t[Jt],this.providerFactory.index,i);o=a.slice(0,s),mR(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],mR(r,o);return o}function mR(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function K6(n,e,t,i,r){let o=new Cd(n,t,be);return o.multi=[],o.index=e,o.componentProviders=0,hN(o,r,i&&!t),o}function J(n,e=[]){return t=>{t.providersResolver=(i,r)=>Y6(i,r?r(n):n,e)}}function Z(n,e,t){let i=kd()+n,r=Ut();return r[i]===ks?Rm(r,i,t?e.call(t):e()):e6(r,i)}function vt(n,e,t,i){return fN(Ut(),kd(),n,e,t,i)}function zn(n,e,t,i,r){return pN(Ut(),kd(),n,e,t,i,r)}function ya(n,e,t,i,r,o){return J6(Ut(),kd(),n,e,t,i,r,o)}function Ph(n,e,t,i,r,o,s){return eq(Ut(),kd(),n,e,t,i,r,o,s)}function i0(n,e){let t=n[e];return t===ks?void 0:t}function fN(n,e,t,i,r,o){let s=e+t;return es(n,s,r)?Rm(n,s+1,o?i.call(o,r):i(r)):i0(n,s+1)}function pN(n,e,t,i,r,o,s){let a=e+t;return my(n,a,r,o)?Rm(n,a+2,s?i.call(s,r,o):i(r,o)):i0(n,a+2)}function J6(n,e,t,i,r,o,s,a){let l=e+t;return t6(n,l,r,o,s)?Rm(n,l+3,a?i.call(a,r,o,s):i(r,o,s)):i0(n,l+3)}function eq(n,e,t,i,r,o,s,a,l){let c=e+t;return i6(n,c,r,o,s,a)?Rm(n,c+4,l?i.call(l,r,o,s,a):i(r,o,s,a)):i0(n,c+4)}function Bi(n,e){let t=In(),i,r=n+er;t.firstCreatePass?(i=tq(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=yd(i.type,!0)),s,a=ao(be);try{let l=ny(!1),c=o();return ny(l),$6(t,Ut(),r,c),c}finally{ao(a)}}function tq(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function Yi(n,e,t){let i=n+er,r=Ut(),o=CR(r,i);return gN(r,i)?fN(r,kd(),e,o.transform,t,o):o.transform(t)}function mN(n,e,t,i){let r=n+er,o=Ut(),s=CR(o,r);return gN(o,r)?pN(o,kd(),e,s.transform,t,i,s):s.transform(t,i)}function gN(n,e){return n[Jt].data[e].pure}function n0(n,e){return Xy(n,e)}var Uv=null;function iq(n){Uv!==null&&(n.defaultEncapsulation!==Uv.defaultEncapsulation||n.preserveWhitespaces!==Uv.preserveWhitespaces)||(Uv=n)}var oc=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},hC=new oc("19.1.7"),gR=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},r0=(()=>{class n{compileModuleSync(t){return new py(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=Vk(t),o=lj(r.declarations).reduce((s,a)=>{let l=rl(a);return l&&s.push(new Ad(l)),s},[]);return new gR(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nq=new ye("");function rq(n,e,t){let i=new py(t);return Promise.resolve(i)}function Mk(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var oq=(()=>{class n{zone=E(nt);changeDetectionScheduler=E(Ed);applicationRef=E(fo);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sq({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new nt(Ft(ce({},_N()),{scheduleInRootZone:t})),[{provide:nt,useFactory:n},{provide:fh,multi:!0,useFactory:()=>{let i=E(oq,{optional:!0});return()=>i.initialize()}},{provide:fh,multi:!0,useFactory:()=>{let i=E(aq);return()=>{i.initialize()}}},e===!0?{provide:IO,useValue:!0}:[],{provide:PO,useValue:t??AO}]}function _N(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var aq=(()=>{class n{subscription=new bi;initialized=!1;zone=E(nt);pendingTasks=E(ba);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{nt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{nt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var lq=(()=>{class n{appRef=E(fo);taskService=E(ba);ngZone=E(nt);zonelessEnabled=E(LR);tracing=E(Ch,{optional:!0});disableScheduling=E(IO,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new bi;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(sy):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(E(PO,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ay||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 13:{this.appRef.dirtyFlags|=16,i=!0;break}case 14:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{i=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?QF:FO;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(sy+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,QF(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cq(){return typeof $localize<"u"&&$localize.locale||xy}var o0=new ye("",{providedIn:"root",factory:()=>E(o0,fi.Optional|fi.SkipSelf)||cq()});var wy=new ye(""),dq=new ye("");function em(n){return!n.moduleRef}function uq(n){let e=em(n)?n.r3Injector:n.moduleRef.injector,t=e.get(nt);return t.run(()=>{em(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(uo,null),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:o=>{i.handleError(o)}})}),em(n)){let o=()=>e.destroy(),s=n.platformInjector.get(wy);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(wy);s.add(o),n.moduleRef.onDestroy(()=>{$v(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return fq(i,t,()=>{let o=e.get(Yj);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(o0,xy);if(V6(s||xy),!e.get(dq,!0))return em(n)?e.get(fo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(em(n)){let l=e.get(fo);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return hq(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function hq(n,e){let t=n.injector.get(fo);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Te(-403,!1);e.push(n)}function fq(n,e,t){try{let i=t();return lc(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var bN=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,i){let r=i?.scheduleInRootZone,o=()=>X5(i?.ngZone,Ft(ce({},_N({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),{scheduleInRootZone:r})),s=i?.ignoreChangesOutsideZone,a=[sq({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Ed,useExisting:lq}],l=V$(t.moduleType,this.injector,a);return uq({moduleRef:l,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,i=[]){let r=Qj({},i);return rq(this.injector,r,t).then(o=>this.bootstrapModuleFactory(o,r))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Te(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let t=this._injector.get(wy,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(i){return new(i||n)(He(yi))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),rm=null,vN=new ye("");function pq(n){if(rm&&!rm.get(vN,!1))throw new Te(400,!1);a6(),rm=n;let e=n.get(bN);return _q(n),e}function fC(n,e,t=[]){let i=`Platform: ${e}`,r=new ye(i);return(o=[])=>{let s=yN();if(!s||s.injector.get(vN,!1)){let a=[...t,...o,{provide:r,useValue:!0}];n?n(a):pq(mq(a,i))}return gq(r)}}function mq(n=[],e){return yi.create({name:e,providers:[{provide:Ay,useValue:"platform"},{provide:wy,useValue:new Set([()=>rm=null])},...n]})}function gq(n){let e=yN();if(!e)throw new Te(401,!1);return e}function yN(){return rm?.get(bN)??null}function _q(n){let e=n.get(VR,null);po(n,()=>{e?.forEach(t=>t())})}function xN(){return!1}var un=(()=>{class n{static __NG_ELEMENT_ID__=bq}return n})();function bq(n){return vq(Ir(),Ut(),(n&16)===16)}function vq(n,e,t){if(Pd(n)&&!t){let i=pa(n.index,e);return new Dd(i,i)}else if(n.type&175){let i=e[ko];return new Dd(i,e)}return null}var _R=class{constructor(){}supports(e){return e instanceof Map||Xj(e)}create(){return new bR}},bR=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Xj(e)))throw new Te(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let r=this._records.get(e);this._maybeAddToChanges(r,t);let o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}let i=new vR(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}},vR=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function Sk(){return new pC([new _R])}var pC=(()=>{class n{static \u0275prov=fe({token:n,providedIn:"root",factory:Sk});factories;constructor(t){this.factories=t}static create(t,i){if(i){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||Sk()),deps:[[n,new Nk,new Cy]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i)return i;throw new Te(901,!1)}}return n})();var wN=fC(null,"core",[]),MN=(()=>{class n{constructor(t){}static \u0275fac=function(i){return new(i||n)(He(fo))};static \u0275mod=Ke({type:n});static \u0275inj=Qe({})}return n})();function Si(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Nd(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function Fh(n,e){ts("NgSignals");let t=oF(n);return e?.equal&&(t[ro].equal=e.equal),t}function as(n){let e=_i(null);try{return n()}finally{_i(e)}}var SN=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=yq}return n})();function yq(){return new SN(Ut(),Ir())}var xq=!1,wq=(()=>{class n extends _y{pendingTasks=E(ba);taskId=null;schedule(t){super.schedule(t),this.taskId===null&&(this.taskId=this.pendingTasks.add(),queueMicrotask(()=>this.flush()))}flush(){try{super.flush()}finally{this.taskId!==null&&(this.pendingTasks.remove(this.taskId),this.taskId=null)}}static \u0275prov=fe({token:n,providedIn:"root",factory:()=>new n})}return n})(),yR=class{scheduler;effectFn;zone;injector;unregisterOnDestroy;watcher;constructor(e,t,i,r,o,s){this.scheduler=e,this.effectFn=t,this.zone=i,this.injector=o,this.watcher=uF(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(uo,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.schedule(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function Mq(){}function Sq(n,e){ts("NgSignals"),!e?.injector&&Py(Mq);let t=e?.injector??E(yi),i=e?.manualCleanup!==!0?t.get(Od):null,r=new yR(t.get(wq),n,typeof Zone>"u"?null:Zone.current,i,t,e?.allowSignalWrites??!1),o=t.get(un,null,{optional:!0});return!o||!(o._lView[Nt]&8)?r.watcher.notify():(o._lView[zv]??=[]).push(r.watcher.notify),r}var Tq=xq;var xR=class{[ro];constructor(e){this[ro]=e}destroy(){this[ro].destroy()}};function kh(n,e){if(Tq)return Sq(n,e);ts("NgSignals"),!e?.injector&&Py(kh);let t=e?.injector??E(yi),i=e?.manualCleanup!==!0?t.get(Od):null,r,o=t.get(SN,null,{optional:!0}),s=t.get(Ed);return o!==null&&!e?.forceRoot?(r=Eq(o.view,s,n),i instanceof oy&&i._lView===o.view&&(i=null)):r=Dq(n,t.get(Zj),s),r.injector=t,i!==null&&(r.onDestroyFn=i.onDestroy(()=>r.destroy())),new xR(r)}var TN=Ft(ce({},dd),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:dm,run(){if(this.dirty=!1,this.hasRun&&!Wp(this))return;this.hasRun=!0;let n=i=>(this.cleanupFns??=[]).push(i),e=Yu(this),t=ey(!1);try{this.maybeCleanup(),this.fn(n)}finally{ey(t),Gp(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),Rq=Ft(ce({},TN),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(13)},destroy(){Zu(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),Cq=Ft(ce({},TN),{consumerMarkedDirty(){this.view[Nt]|=8192,bm(this.view),this.notifier.notify(14)},destroy(){Zu(this),this.onDestroyFn(),this.maybeCleanup(),this.view[Md]?.delete(this)}});function Eq(n,e,t){let i=Object.create(Cq);return i.view=n,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=e,i.fn=t,n[Md]??=new Set,n[Md].add(i),i.consumerMarkedDirty(i),i}function Dq(n,e,t){let i=Object.create(Rq);return i.fn=n,i.scheduler=e,i.notifier=t,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.schedule(i),i.notifier.notify(13),i}function s0(n,e){let t=rl(n),i=e.elementInjector||Iy();return new Ad(t).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}function RN(n){let e=rl(n);if(!e)return null;let t=new Ad(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var AN=null;function xa(){return AN}function IN(n){AN??=n}var a0=class{};var Pt=new ye(""),bC=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:()=>E(Iq),providedIn:"platform"})}return n})(),PN=new ye(""),Iq=(()=>{class n extends bC{_location;_history;_doc=E(Pt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xa().getBaseHref(this._doc)}onPopState(t){let i=xa().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=xa().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function vC(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function CN(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function fl(n){return n&&n[0]!=="?"?`?${n}`:n}var pl=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:()=>E(yC),providedIn:"root"})}return n})(),FN=new ye(""),yC=(()=>{class n extends pl{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??E(Pt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return vC(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+fl(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+fl(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+fl(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(He(bC),He(FN,8))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kN=(()=>{class n extends pl{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(t){let i=vC(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+fl(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+fl(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(He(bC),He(FN,8))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),dc=(()=>{class n{_subject=new tt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=kq(CN(EN(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+fl(i))}normalize(t){return n.stripTrailingSlash(Fq(this._basePath,EN(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fl(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fl(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=fl;static joinWithSlash=vC;static stripTrailingSlash=CN;static \u0275fac=function(i){return new(i||n)(He(pl))};static \u0275prov=fe({token:n,factory:()=>Pq(),providedIn:"root"})}return n})();function Pq(){return new dc(He(pl))}function Fq(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function EN(n){return n.replace(/\/index.html$/,"")}function kq(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function l0(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var ON=(()=>{class n{_viewContainerRef;ngComponentOutlet=null;ngComponentOutletInputs;ngComponentOutletInjector;ngComponentOutletContent;ngComponentOutletNgModule;ngComponentOutletNgModuleFactory;_componentRef;_moduleRef;_inputsUsed=new Map;get componentInstance(){return this._componentRef?.instance??null}constructor(t){this._viewContainerRef=t}_needToReCreateNgModuleInstance(t){return t.ngComponentOutletNgModule!==void 0||t.ngComponentOutletNgModuleFactory!==void 0}_needToReCreateComponentInstance(t){return t.ngComponentOutlet!==void 0||t.ngComponentOutletContent!==void 0||t.ngComponentOutletInjector!==void 0||this._needToReCreateNgModuleInstance(t)}ngOnChanges(t){if(this._needToReCreateComponentInstance(t)&&(this._viewContainerRef.clear(),this._inputsUsed.clear(),this._componentRef=void 0,this.ngComponentOutlet)){let i=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;this._needToReCreateNgModuleInstance(t)&&(this._moduleRef?.destroy(),this.ngComponentOutletNgModule?this._moduleRef=Wj(this.ngComponentOutletNgModule,DN(i)):this.ngComponentOutletNgModuleFactory?this._moduleRef=this.ngComponentOutletNgModuleFactory.create(DN(i)):this._moduleRef=void 0),this._componentRef=this._viewContainerRef.createComponent(this.ngComponentOutlet,{injector:i,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent})}}ngDoCheck(){if(this._componentRef){if(this.ngComponentOutletInputs)for(let t of Object.keys(this.ngComponentOutletInputs))this._inputsUsed.set(t,!0);this._applyInputStateDiff(this._componentRef)}}ngOnDestroy(){this._moduleRef?.destroy()}_applyInputStateDiff(t){for(let[i,r]of this._inputsUsed)r?(t.setInput(i,this.ngComponentOutletInputs[i]),this._inputsUsed.set(i,!1)):(t.setInput(i,void 0),this._inputsUsed.delete(i))}static \u0275fac=function(i){return new(i||n)(be(Yr))};static \u0275dir=Ue({type:n,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInputs:"ngComponentOutletInputs",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},exportAs:["ngComponentOutlet"],features:[tr]})}return n})();function DN(n){return n.get(Jo).injector}var jN=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){let[r,o]=t.split("."),s=r.indexOf("-")===-1?void 0:_a.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,s):this._renderer.removeStyle(this._ngEl.nativeElement,r,s)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static \u0275fac=function(i){return new(i||n)(be(_t),be(pC),be(lr))};static \u0275dir=Ue({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})(),NN=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(t,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||n)(be(Yr))};static \u0275dir=Ue({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[tr]})}return n})();function Oq(n,e){return new Te(2100,!1)}var mC=class{createSubscription(e,t){return as(()=>e.subscribe({next:t,error:i=>{throw i}}))}dispose(e){as(()=>e.unsubscribe())}},gC=class{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}},jq=new gC,Nq=new mC,c0=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(lc(t))return jq;if(uC(t))return Nq;throw Oq(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(i){return new(i||n)(be(un,16))};static \u0275pipe=rs({name:"async",type:n,pure:!1})}return n})();var d0=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({})}return n})(),xC="browser",Lq="server";function Dm(n){return n===xC}function wC(n){return n===Lq}var LN=(()=>{class n{static \u0275prov=fe({token:n,providedIn:"root",factory:()=>new _C(E(Pt),window)})}return n})(),_C=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=Bq(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}};function Bq(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}var Oh=class{};var Im=class{},h0=class{},Ld=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=t.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var SC=class{encodeKey(e){return BN(e)}encodeValue(e){return BN(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Uq(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var Vq=/%(\d[a-f0-9])/gi,zq={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function BN(n){return encodeURIComponent(n).replace(Vq,(e,t)=>zq[t]??e)}function u0(n){return`${n}`}var wa=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new SC,e.fromString){if(e.fromObject)throw new Te(2805,!1);this.map=Uq(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(u0):[u0(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(u0(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(u0(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var TC=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Hq(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function UN(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function VN(n){return typeof Blob<"u"&&n instanceof Blob}function zN(n){return typeof FormData<"u"&&n instanceof FormData}function Gq(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var HN="Content-Type",GN="Accept",XN="X-Request-URL",YN="text/plain",ZN="application/json",Wq=`${ZN}, ${YN}, */*`,Am=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,i,r){this.url=t,this.method=e.toUpperCase();let o;if(Hq(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ld,this.context??=new TC,!this.params)this.params=new wa,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||UN(this.body)||VN(this.body)||zN(this.body)||Gq(this.body)?this.body:this.body instanceof wa?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||zN(this.body)?null:VN(this.body)?this.body.type||null:UN(this.body)?null:typeof this.body=="string"?YN:this.body instanceof wa?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?ZN:null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,c=e.headers||this.headers,d=e.params||this.params,u=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(d=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),d)),new n(t,i,s,{params:d,headers:c,context:u,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},Nh=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Nh||{}),Pm=class{headers;status;statusText;url;ok;type;constructor(e,t=200,i="OK"){this.headers=e.headers||new Ld,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},RC=class n extends Pm{constructor(e={}){super(e)}type=Nh.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},f0=class n extends Pm{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Nh.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},p0=class extends Pm{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},$q=200,qq=204;function MC(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Fm=(()=>{class n{handler;constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof Am)o=t;else{let l;r.headers instanceof Ld?l=r.headers:l=new Ld(r.headers);let c;r.params&&(r.params instanceof wa?c=r.params:c=new wa({fromObject:r.params})),o=new Am(t,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=gt(o).pipe(tl(l=>this.handler.handle(l)));if(t instanceof Am||r.observe==="events")return s;let a=s.pipe(vi(l=>l instanceof f0));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(lt(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Te(2806,!1);return l.body}));case"blob":return a.pipe(lt(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Te(2807,!1);return l.body}));case"text":return a.pipe(lt(l=>{if(l.body!==null&&typeof l.body!="string")throw new Te(2808,!1);return l.body}));case"json":default:return a.pipe(lt(l=>l.body))}case"response":return a;default:throw new Te(2809,!1)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new wa().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,MC(r,i))}post(t,i,r={}){return this.request("POST",t,MC(r,i))}put(t,i,r={}){return this.request("PUT",t,MC(r,i))}static \u0275fac=function(i){return new(i||n)(He(Im))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();var Xq=new ye("");function QN(n,e){return e(n)}function Yq(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}function Zq(n,e,t){return(i,r)=>po(t,()=>e(i,o=>n(o,r)))}var Qq=new ye(""),CC=new ye(""),Kq=new ye(""),KN=new ye("",{providedIn:"root",factory:()=>!0});function Jq(){let n=null;return(e,t)=>{n===null&&(n=(E(Qq,{optional:!0})??[]).reduceRight(Yq,QN));let i=E(ba);if(E(KN)){let o=i.add();return n(e,t).pipe(ua(()=>i.remove(o)))}else return n(e,t)}}var WN=(()=>{class n extends Im{backend;injector;chain=null;pendingTasks=E(ba);contributeToStability=E(KN);constructor(t,i){super(),this.backend=t,this.injector=i}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(CC),...this.injector.get(Kq,[])]));this.chain=i.reduceRight((r,o)=>Zq(r,o,this.injector),QN)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(ua(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(He(h0),He(Jn))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();var e9=/^\)\]\}',?\n/,t9=RegExp(`^${XN}:`,"m");function i9(n){return"responseURL"in n&&n.responseURL?n.responseURL:t9.test(n.getAllResponseHeaders())?n.getResponseHeader(XN):null}var $N=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new Te(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?ji(i.\u0275loadImpl()):gt(null)).pipe(Nn(()=>new Ot(o=>{let s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((_,g)=>s.setRequestHeader(_,g.join(","))),t.headers.has(GN)||s.setRequestHeader(GN,Wq),!t.headers.has(HN)){let _=t.detectContentTypeHeader();_!==null&&s.setRequestHeader(HN,_)}if(t.responseType){let _=t.responseType.toLowerCase();s.responseType=_!=="json"?_:"text"}let a=t.serializeBody(),l=null,c=()=>{if(l!==null)return l;let _=s.statusText||"OK",g=new Ld(s.getAllResponseHeaders()),p=i9(s)||t.url;return l=new RC({headers:g,status:s.status,statusText:_,url:p}),l},d=()=>{let{headers:_,status:g,statusText:p,url:b}=c(),v=null;g!==qq&&(v=typeof s.response>"u"?s.responseText:s.response),g===0&&(g=v?$q:0);let y=g>=200&&g<300;if(t.responseType==="json"&&typeof v=="string"){let R=v;v=v.replace(e9,"");try{v=v!==""?JSON.parse(v):null}catch(S){v=R,y&&(y=!1,v={error:S,text:v})}}y?(o.next(new f0({body:v,headers:_,status:g,statusText:p,url:b||void 0})),o.complete()):o.error(new p0({error:v,headers:_,status:g,statusText:p,url:b||void 0}))},u=_=>{let{url:g}=c(),p=new p0({error:_,status:s.status||0,statusText:s.statusText||"Unknown Error",url:g||void 0});o.error(p)},h=!1,f=_=>{h||(o.next(c()),h=!0);let g={type:Nh.DownloadProgress,loaded:_.loaded};_.lengthComputable&&(g.total=_.total),t.responseType==="text"&&s.responseText&&(g.partialText=s.responseText),o.next(g)},m=_=>{let g={type:Nh.UploadProgress,loaded:_.loaded};_.lengthComputable&&(g.total=_.total),o.next(g)};return s.addEventListener("load",d),s.addEventListener("error",u),s.addEventListener("timeout",u),s.addEventListener("abort",u),t.reportProgress&&(s.addEventListener("progress",f),a!==null&&s.upload&&s.upload.addEventListener("progress",m)),s.send(a),o.next({type:Nh.Sent}),()=>{s.removeEventListener("error",u),s.removeEventListener("abort",u),s.removeEventListener("load",d),s.removeEventListener("timeout",u),t.reportProgress&&(s.removeEventListener("progress",f),a!==null&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||n)(He(Oh))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),JN=new ye(""),n9="XSRF-TOKEN",r9=new ye("",{providedIn:"root",factory:()=>n9}),o9="X-XSRF-TOKEN",s9=new ye("",{providedIn:"root",factory:()=>o9}),m0=class{},a9=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=l0(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(i){return new(i||n)(He(Pt),He(is),He(r9))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();function l9(n,e){let t=n.url.toLowerCase();if(!E(JN)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=E(m0).getToken(),r=E(s9);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var eL=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(eL||{});function c9(n,e){return{\u0275kind:n,\u0275providers:e}}function d9(...n){let e=[Fm,$N,WN,{provide:Im,useExisting:WN},{provide:h0,useFactory:()=>E(Xq,{optional:!0})??E($N)},{provide:CC,useValue:l9,multi:!0},{provide:JN,useValue:!0},{provide:m0,useClass:a9}];for(let t of n)e.push(...t.\u0275providers);return Dy(e)}var qN=new ye("");function u9(){return c9(eL.LegacyInterceptors,[{provide:qN,useFactory:Jq},{provide:CC,useExisting:qN,multi:!0}])}var tL=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({providers:[d9(u9())]})}return n})();var DC=class extends a0{supportsDOMEvents=!0},AC=class n extends DC{static makeCurrent(){IN(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=f9();return t==null?null:p9(t)}resetBaseElement(){km=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return l0(document.cookie,e)}},km=null;function f9(){return km=km||document.querySelector("base"),km?km.getAttribute("href"):null}function p9(n){return new URL(n,document.baseURI).pathname}var IC=class{addToWindow(e){Fo.getAngularTestability=(i,r=!0)=>{let o=e.findTestabilityInTree(i,r);if(o==null)throw new Te(5103,!1);return o},Fo.getAllAngularTestabilities=()=>e.getAllTestabilities(),Fo.getAllAngularRootElements=()=>e.getAllRootElements();let t=i=>{let r=Fo.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&i()};r.forEach(a=>{a.whenStable(s)})};Fo.frameworkStabilizers||(Fo.frameworkStabilizers=[]),Fo.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,i){if(t==null)return null;let r=e.getTestability(t);return r??(i?xa().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},m9=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),PC=new ye(""),sL=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r,o){return this._findPluginFor(i).addEventListener(t,i,r,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new Te(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(He(PC),He(nt))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),_0=class{_doc;constructor(e){this._doc=e}manager},g0="ng-app-id";function iL(n){for(let e of n)e.remove()}function nL(n,e){let t=e.createElement("style");return t.textContent=n,t}function g9(n,e,t,i){let r=n.head?.querySelectorAll(`style[${g0}="${e}"],link[${g0}="${e}"]`);if(r)for(let o of r)o.removeAttribute(g0),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function FC(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var aL=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.isServer=wC(o),g9(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,nL);i?.forEach(r=>this.addUsage(r,this.external,FC))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let o=i.get(t);o?o.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(iL(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])iL(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,nL(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,FC(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(g0,this.appId),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(He(Pt),He(ym),He(xm,8),He(is))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),EC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},OC=/%COMP%/g;var lL="%COMP%",_9=`_nghost-${lL}`,b9=`_ngcontent-${lL}`,v9=!0,y9=new ye("",{providedIn:"root",factory:()=>v9});function x9(n){return b9.replace(OC,n)}function w9(n){return _9.replace(OC,n)}function cL(n,e){return e.map(t=>t.replace(OC,n))}var b0=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,o,s,a,l,c=null,d=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=d,this.platformIsServer=wC(a),this.defaultRenderer=new Om(t,s,l,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ga.ShadowDom&&(i=Ft(ce({},i),{encapsulation:ga.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof v0?r.applyToHost(t):r instanceof jm&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,u=this.platformIsServer,h=this.tracingService;switch(i.encapsulation){case ga.Emulated:o=new v0(l,c,i,this.appId,d,s,a,u,h);break;case ga.ShadowDom:return new kC(l,c,t,i,s,a,this.nonce,u,h);default:o=new jm(l,c,i,d,s,a,u,h);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(He(sL),He(aL),He(ym),He(y9),He(Pt),He(is),He(nt),He(xm),He(Ch,8))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),Om=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(EC[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(rL(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(rL(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Te(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=EC[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=EC[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(_a.DashCase|_a.Important)?e.style.setProperty(t,i,r&_a.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&_a.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=xa().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);let o=this.decoratePreventDefault(i);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function rL(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var kC=class extends Om{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,o,s,a,l,c){super(e,o,s,l,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=cL(r.id,d);for(let h of d){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}let u=r.getExternalStyles?.();if(u)for(let h of u){let f=FC(h,o);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},jm=class extends Om{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,o,s,a,l,c){super(e,o,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let d=i.styles;this.styles=c?cL(c,d):d,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},v0=class extends jm{contentAttr;hostAttr;constructor(e,t,i,r,o,s,a,l,c){let d=r+"-"+i.id;super(e,t,i,o,s,a,l,c,d),this.contentAttr=x9(d),this.hostAttr=w9(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},M9=(()=>{class n extends _0{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,o){return t.addEventListener(i,r,o),()=>this.removeEventListener(t,i,r,o)}removeEventListener(t,i,r,o){return t.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(He(Pt))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),oL=["alt","control","meta","shift"],S9={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},T9={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},R9=(()=>{class n extends _0{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,o){let s=n.parseEventName(i),a=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xa().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),oL.forEach(c=>{let d=i.indexOf(c);d>-1&&(i.splice(d,1),s+=c+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(t,i){let r=S9[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),oL.forEach(s=>{if(s!==r){let a=T9[s];a(t)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(He(Pt))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();function C9(){AC.makeCurrent()}function E9(){return new uo}function D9(){return zO(document),document}var A9=[{provide:is,useValue:xC},{provide:VR,useValue:C9,multi:!0},{provide:Pt,useFactory:D9,deps:[]}],dL=fC(wN,"browser",A9);var I9=[{provide:Cm,useClass:IC,deps:[]},{provide:cC,useClass:Qy,deps:[nt,Ky,Cm]},{provide:Qy,useClass:Qy,deps:[nt,Ky,Cm]}],P9=[{provide:Ay,useValue:"root"},{provide:uo,useFactory:E9,deps:[]},{provide:PC,useClass:M9,multi:!0,deps:[Pt]},{provide:PC,useClass:R9,multi:!0,deps:[Pt]},b0,aL,sL,{provide:ho,useExisting:b0},{provide:Oh,useClass:m9,deps:[]},[]],y0=(()=>{class n{constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({providers:[...P9,...I9],imports:[d0,MN]})}return n})();var uL=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(He(Pt))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Nm=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=He(F9),r},providedIn:"root"})}return n})(),F9=(()=>{class n extends Nm{_doc;constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case ar.NONE:return i;case ar.HTML:return ac(i,"HTML")?ns(i):oj(this._doc,String(i)).toString();case ar.STYLE:return ac(i,"Style")?ns(i):i;case ar.SCRIPT:if(ac(i,"Script"))return ns(i);throw new Te(5200,!1);case ar.URL:return ac(i,"URL")?ns(i):zy(String(i));case ar.RESOURCE_URL:if(ac(i,"ResourceURL"))return ns(i);throw new Te(5201,!1);default:throw new Te(5202,!1)}}bypassSecurityTrustHtml(t){return YO(t)}bypassSecurityTrustStyle(t){return ZO(t)}bypassSecurityTrustScript(t){return QO(t)}bypassSecurityTrustUrl(t){return KO(t)}bypassSecurityTrustResourceUrl(t){return JO(t)}static \u0275fac=function(i){return new(i||n)(He(Pt))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ai="primary",Zm=Symbol("RouteTitle"),VC=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Hh(n){return new VC(n)}function k9(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function O9(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ma(n[t],e[t]))return!1;return!0}function Ma(n,e){let t=n?zC(n):void 0,i=e?zC(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!xL(n[r],e[r]))return!1;return!0}function zC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function xL(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function wL(n){return n.length>0?n[n.length-1]:null}function hc(n){return Zp(n)?n:lc(n)?ji(Promise.resolve(n)):gt(n)}var j9={exact:SL,subset:TL},ML={exact:N9,subset:L9,ignored:()=>!0};function hL(n,e,t){return j9[t.paths](n.root,e.root,t.matrixParams)&&ML[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function N9(n,e){return Ma(n,e)}function SL(n,e,t){if(!Ud(n.segments,e.segments)||!M0(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!SL(n.children[i],e.children[i],t))return!1;return!0}function L9(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>xL(n[t],e[t]))}function TL(n,e,t){return RL(n,e,e.segments,t)}function RL(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Ud(r,t)||e.hasChildren()||!M0(r,t,i))}else if(n.segments.length===t.length){if(!Ud(n.segments,t)||!M0(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!TL(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ud(n.segments,r)||!M0(n.segments,r,i)||!n.children[ai]?!1:RL(n.children[ai],e,o,i)}}function M0(n,e,t){return e.every((i,r)=>ML[t](n[r].parameters,i.parameters))}var gl=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ui([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Hh(this.queryParams),this._queryParamMap}toString(){return V9.serialize(this)}},Ui=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return S0(this)}},Bd=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Hh(this.parameters),this._parameterMap}toString(){return EL(this)}};function B9(n,e){return Ud(n,e)&&n.every((t,i)=>Ma(t.parameters,e[i].parameters))}function Ud(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function U9(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===ai&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==ai&&(t=t.concat(e(r,i)))}),t}var Qm=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:()=>new Gh,providedIn:"root"})}return n})(),Gh=class{parse(e){let t=new GC(e);return new gl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Lm(e.root,!0)}`,i=G9(e.queryParams),r=typeof e.fragment=="string"?`#${z9(e.fragment)}`:"";return`${t}${i}${r}`}},V9=new Gh;function S0(n){return n.segments.map(e=>EL(e)).join("/")}function Lm(n,e){if(!n.hasChildren())return S0(n);if(e){let t=n.children[ai]?Lm(n.children[ai],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==ai&&i.push(`${r}:${Lm(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=U9(n,(i,r)=>r===ai?[Lm(n.children[ai],!1)]:[`${r}:${Lm(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[ai]!=null?`${S0(n)}/${t[0]}`:`${S0(n)}/(${t.join("//")})`}}function CL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function x0(n){return CL(n).replace(/%3B/gi,";")}function z9(n){return encodeURI(n)}function HC(n){return CL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function T0(n){return decodeURIComponent(n)}function fL(n){return T0(n.replace(/\+/g,"%20"))}function EL(n){return`${HC(n.path)}${H9(n.parameters)}`}function H9(n){return Object.entries(n).map(([e,t])=>`;${HC(e)}=${HC(t)}`).join("")}function G9(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${x0(t)}=${x0(r)}`).join("&"):`${x0(t)}=${x0(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var W9=/^[^\/()?;#]+/;function NC(n){let e=n.match(W9);return e?e[0]:""}var $9=/^[^\/()?;=#]+/;function q9(n){let e=n.match($9);return e?e[0]:""}var X9=/^[^=?&#]+/;function Y9(n){let e=n.match(X9);return e?e[0]:""}var Z9=/^[^&#]+/;function Q9(n){let e=n.match(Z9);return e?e[0]:""}var GC=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ui([],{}):new Ui([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[ai]=new Ui(e,t)),i}parseSegment(){let e=NC(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Te(4009,!1);return this.capture(e),new Bd(T0(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=q9(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=NC(this.remaining);r&&(i=r,this.capture(i))}e[T0(t)]=T0(i)}parseQueryParam(e){let t=Y9(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=Q9(this.remaining);s&&(i=s,this.capture(i))}let r=fL(t),o=fL(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=NC(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Te(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ai);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ai]:new Ui([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Te(4011,!1)}};function DL(n){return n.segments.length>0?new Ui([],{[ai]:n}):n}function AL(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=AL(r);if(i===ai&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new Ui(n.segments,e);return K9(t)}function K9(n){if(n.numberOfChildren===1&&n.children[ai]){let e=n.children[ai];return new Ui(n.segments.concat(e.segments),e.children)}return n}function Vd(n){return n instanceof gl}function J9(n,e,t=null,i=null){let r=IL(n);return PL(r,e,t,i)}function IL(n){let e;function t(o){let s={};for(let l of o.children){let c=t(l);s[l.outlet]=c}let a=new Ui(o.url,s);return o===n&&(e=a),a}let i=t(n.root),r=DL(i);return e??r}function PL(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return LC(r,r,r,t,i);let o=eX(e);if(o.toRoot())return LC(r,r,new Ui([],{}),t,i);let s=tX(o,r,n),a=s.processChildren?Um(s.segmentGroup,s.index,o.commands):kL(s.segmentGroup,s.index,o.commands);return LC(r,s.segmentGroup,a,t,i)}function R0(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Hm(n){return typeof n=="object"&&n!=null&&n.outlets}function LC(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`});let s;n===e?s=t:s=FL(n,e,t);let a=DL(AL(s));return new gl(a,o,r)}function FL(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=FL(o,e,t)}),new Ui(n.segments,i)}var C0=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&R0(i[0]))throw new Te(4003,!1);let r=i.find(Hm);if(r&&r!==wL(i))throw new Te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function eX(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new C0(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new C0(t,e,i)}var Uh=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function tX(n,e,t){if(n.isAbsolute)return new Uh(e,!0,0);if(!t)return new Uh(e,!1,NaN);if(t.parent===null)return new Uh(t,!0,0);let i=R0(n.commands[0])?0:1,r=t.segments.length-1+i;return iX(t,r,n.numberOfDoubleDots)}function iX(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Te(4005,!1);r=i.segments.length}return new Uh(i,!1,r-o)}function nX(n){return Hm(n[0])?n[0].outlets:{[ai]:n}}function kL(n,e,t){if(n??=new Ui([],{}),n.segments.length===0&&n.hasChildren())return Um(n,e,t);let i=rX(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new Ui(n.segments.slice(0,i.pathIndex),{});return o.children[ai]=new Ui(n.segments.slice(i.pathIndex),n.children),Um(o,0,r)}else return i.match&&r.length===0?new Ui(n.segments,{}):i.match&&!n.hasChildren()?WC(n,e,t):i.match?Um(n,0,r):WC(n,e,t)}function Um(n,e,t){if(t.length===0)return new Ui(n.segments,{});{let i=nX(t),r={};if(Object.keys(i).some(o=>o!==ai)&&n.children[ai]&&n.numberOfChildren===1&&n.children[ai].segments.length===0){let o=Um(n.children[ai],e,t);return new Ui(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=kL(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new Ui(n.segments,r)}}function rX(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let s=n.segments[r],a=t[i];if(Hm(a))break;let l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!mL(l,c,s))return o;i+=2}else{if(!mL(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function WC(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(Hm(o)){let l=oX(o.outlets);return new Ui(i,l)}if(r===0&&R0(t[0])){let l=n.segments[e];i.push(new Bd(l.path,pL(t[0]))),r++;continue}let s=Hm(o)?o.outlets[ai]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&R0(a)?(i.push(new Bd(s,pL(a))),r+=2):(i.push(new Bd(s,{})),r++)}return new Ui(i,{})}function oX(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=WC(new Ui([],{}),0,i))}),e}function pL(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function mL(n,e,t){return n==t.path&&Ma(e,t.parameters)}var Vm="imperative",ur=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ur||{}),ls=class{id;url;constructor(e,t){this.id=e,this.url=t}},Wh=class extends ls{type=ur.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Sa=class extends ls{urlAfterRedirects;type=ur.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Lo=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Lo||{}),E0=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(E0||{}),ml=class extends ls{reason;code;type=ur.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},uc=class extends ls{reason;code;type=ur.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},Gm=class extends ls{error;target;type=ur.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},D0=class extends ls{urlAfterRedirects;state;type=ur.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$C=class extends ls{urlAfterRedirects;state;type=ur.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qC=class extends ls{urlAfterRedirects;state;shouldActivate;type=ur.GuardsCheckEnd;constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},XC=class extends ls{urlAfterRedirects;state;type=ur.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},YC=class extends ls{urlAfterRedirects;state;type=ur.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ZC=class{route;type=ur.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},QC=class{route;type=ur.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},KC=class{snapshot;type=ur.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},JC=class{snapshot;type=ur.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},eE=class{snapshot;type=ur.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tE=class{snapshot;type=ur.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},A0=class{routerEvent;position;anchor;type=ur.Scroll;constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Wm=class{},$h=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function sX(n,e){return n.providers&&!n._injector&&(n._injector=Zy(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Os(n){return n.outlet||ai}function aX(n,e){let t=n.filter(i=>Os(i)===e);return t.push(...n.filter(i=>Os(i)!==e)),t}function Km(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var iE=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Km(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Jm(this.rootInjector)}},Jm=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new iE(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(He(Jn))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),I0=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=nE(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=nE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=rE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return rE(e,this._root).map(t=>t.value)}};function nE(n,e){if(n===e.value)return e;for(let t of e.children){let i=nE(n,t);if(i)return i}return null}function rE(n,e){if(n===e.value)return[e];for(let t of e.children){let i=rE(n,t);if(i.length)return i.unshift(e),i}return[]}var No=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Bh(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var P0=class extends I0{snapshot;constructor(e,t){super(e),this.snapshot=t,fE(this,e)}toString(){return this.snapshot.toString()}};function OL(n){let e=lX(n),t=new En([new Bd("",{})]),i=new En({}),r=new En({}),o=new En({}),s=new En(""),a=new _l(t,i,o,s,r,ai,n,e.root);return a.snapshot=e.root,new P0(new No(a,[]),e)}function lX(n){let e={},t={},i={},r="",o=new Vh([],e,i,r,t,ai,n,null,{});return new k0("",new No(o,[]))}var _l=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(lt(c=>c[Zm]))??gt(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(lt(e=>Hh(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(lt(e=>Hh(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function F0(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:ce(ce({},e.params),n.params),data:ce(ce({},e.data),n.data),resolve:ce(ce(ce(ce({},n.data),e.data),r?.data),n._resolvedData)}:i={params:ce({},n.params),data:ce({},n.data),resolve:ce(ce({},n.data),n._resolvedData??{})},r&&NL(r)&&(i.resolve[Zm]=r.title),i}var Vh=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Zm]}constructor(e,t,i,r,o,s,a,l,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Hh(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Hh(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},k0=class extends I0{url;constructor(e,t){super(t),this.url=e,fE(this,t)}toString(){return jL(this._root)}};function fE(n,e){e.value._routerState=n,e.children.forEach(t=>fE(n,t))}function jL(n){let e=n.children.length>0?` { ${n.children.map(jL).join(", ")} } `:"";return`${n.value}${e}`}function BC(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ma(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ma(e.params,t.params)||n.paramsSubject.next(t.params),O9(e.url,t.url)||n.urlSubject.next(t.url),Ma(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function oE(n,e){let t=Ma(n.params,e.params)&&B9(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||oE(n.parent,e.parent))}function NL(n){return typeof n.title=="string"||n.title===null}var cX=new ye(""),pE=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ai;activateEvents=new rt;deactivateEvents=new rt;attachEvents=new rt;detachEvents=new rt;routerOutletData=Uy(void 0);parentContexts=E(Jm);location=E(Yr);changeDetector=E(un);inputBinder=E(B0,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Te(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Te(4013,!1);this._activatedRoute=t;let r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new sE(t,a,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[tr]})}return n})(),sE=class n{route;childContexts;parent;outletData;__ngOutletInjector(e){return new n(this.route,this.childContexts,e,this.outletData)}constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===_l?this.route:e===Jm?this.childContexts:e===cX?this.outletData:this.parent.get(e,t)}},B0=new ye(""),gL=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=gd([i.queryParams,i.params,i.data]).pipe(Nn(([o,s,a],l)=>(a=ce(ce(ce({},o),s),a),l===0?gt(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let s=RN(i.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();function dX(n,e,t){let i=$m(n,e._root,t?t._root:void 0);return new P0(i,e)}function $m(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=uX(n,e,t);return new No(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>$m(n,a)),s}}let i=hX(e.value),r=e.children.map(o=>$m(n,o));return new No(i,r)}}function uX(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return $m(n,i,r);return $m(n,i)})}function hX(n){return new _l(new En(n.url),new En(n.params),new En(n.queryParams),new En(n.fragment),new En(n.data),n.outlet,n.component,n)}var qm=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},LL="ngNavigationCancelingError";function O0(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Vd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=BL(!1,Lo.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function BL(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[LL]=!0,t.cancellationCode=e,t}function fX(n){return UL(n)&&Vd(n.url)}function UL(n){return!!n&&n[LL]}var pX=(n,e,t,i)=>lt(r=>(new aE(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),aE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),BC(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Bh(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Bh(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Bh(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Bh(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new tE(o.value.snapshot))}),e.children.length&&this.forwardEvent(new JC(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(BC(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),BC(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,i)}},j0=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},zh=class{component;route;constructor(e,t){this.component=e,this.route=t}};function mX(n,e,t){let i=n._root,r=e?e._root:null;return Bm(i,r,t,[i.value])}function gX(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Xh(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!Ak(n)?n:e.get(n):i}function Bm(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Bh(e);return n.children.forEach(s=>{_X(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>zm(a,t.getContext(s),r)),r}function _X(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=bX(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new j0(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Bm(n,e,a?a.children:null,i,r):Bm(n,e,t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new zh(a.outlet.component,s))}else s&&zm(e,a,r),r.canActivateChecks.push(new j0(i)),o.component?Bm(n,null,a?a.children:null,i,r):Bm(n,null,t,i,r);return r}function bX(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ud(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ud(n.url,e.url)||!Ma(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oE(n,e)||!Ma(n.queryParams,e.queryParams);case"paramsChange":default:return!oE(n,e)}}function zm(n,e,t){let i=Bh(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?e?zm(s,e.children.getContext(o),t):zm(s,null,t):zm(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new zh(e.outlet.component,r)):t.canDeactivateChecks.push(new zh(null,r)):t.canDeactivateChecks.push(new zh(null,r))}function eg(n){return typeof n=="function"}function vX(n){return typeof n=="boolean"}function yX(n){return n&&eg(n.canLoad)}function xX(n){return n&&eg(n.canActivate)}function wX(n){return n&&eg(n.canActivateChild)}function MX(n){return n&&eg(n.canDeactivate)}function SX(n){return n&&eg(n.canMatch)}function VL(n){return n instanceof Es||n?.name==="EmptyError"}var w0=Symbol("INITIAL_VALUE");function qh(){return Nn(n=>gd(n.map(e=>e.pipe(Er(1),Io(w0)))).pipe(lt(e=>{for(let t of e)if(t!==!0){if(t===w0)return w0;if(t===!1||TX(t))return t}return!0}),vi(e=>e!==w0),Er(1)))}function TX(n){return Vd(n)||n instanceof qm}function RX(n,e){return Dn(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?gt(Ft(ce({},t),{guardsResult:!0})):CX(s,i,r,n).pipe(Dn(a=>a&&vX(a)?EX(i,o,n,e):gt(a)),lt(a=>Ft(ce({},t),{guardsResult:a})))})}function CX(n,e,t,i){return ji(n).pipe(Dn(r=>FX(r.component,r.route,t,e,i)),il(r=>r!==!0,!0))}function EX(n,e,t,i){return ji(e).pipe(tl(r=>Jl(AX(r.route.parent,i),DX(r.route,i),PX(n,r.path,t),IX(n,r.route,t))),il(r=>r!==!0,!0))}function DX(n,e){return n!==null&&e&&e(new eE(n)),gt(!0)}function AX(n,e){return n!==null&&e&&e(new KC(n)),gt(!0)}function IX(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return gt(!0);let r=i.map(o=>Av(()=>{let s=Km(e)??t,a=Xh(o,s),l=xX(a)?a.canActivate(e,n):po(s,()=>a(e,n));return hc(l).pipe(il())}));return gt(r).pipe(qh())}function PX(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>gX(s)).filter(s=>s!==null).map(s=>Av(()=>{let a=s.guards.map(l=>{let c=Km(s.node)??t,d=Xh(l,c),u=wX(d)?d.canActivateChild(i,n):po(c,()=>d(i,n));return hc(u).pipe(il())});return gt(a).pipe(qh())}));return gt(o).pipe(qh())}function FX(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return gt(!0);let s=o.map(a=>{let l=Km(e)??r,c=Xh(a,l),d=MX(c)?c.canDeactivate(n,e,t,i):po(l,()=>c(n,e,t,i));return hc(d).pipe(il())});return gt(s).pipe(qh())}function kX(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return gt(!0);let o=r.map(s=>{let a=Xh(s,n),l=yX(a)?a.canLoad(e,t):po(n,()=>a(e,t));return hc(l)});return gt(o).pipe(qh(),zL(i))}function zL(n){return ZS(Xi(e=>{if(typeof e!="boolean")throw O0(n,e)}),lt(e=>e===!0))}function OX(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return gt(!0);let o=r.map(s=>{let a=Xh(s,n),l=SX(a)?a.canMatch(e,t):po(n,()=>a(e,t));return hc(l)});return gt(o).pipe(qh(),zL(i))}var Xm=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Ym=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Lh(n){return so(new Xm(n))}function jX(n){return so(new Te(4e3,!1))}function NX(n){return so(BL(!1,Lo.GuardRejected))}var lE=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return gt(i);if(r.numberOfChildren>1||!r.children[ai])return jX(`${e.redirectTo}`);r=r.children[ai]}}applyRedirectCommands(e,t,i,r,o){if(typeof t!="string"){let a=t,{queryParams:l,fragment:c,routeConfig:d,url:u,outlet:h,params:f,data:m,title:_}=r,g=po(o,()=>a({params:f,data:m,queryParams:l,fragment:c,routeConfig:d,url:u,outlet:h,title:_}));if(g instanceof gl)throw new Ym(g);t=g}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new Ym(s);return s}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new gl(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,i,r)}),new Ui(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Te(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},cE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function LX(n,e,t,i,r){let o=HL(n,e,t);return o.matched?(i=sX(e,i),OX(i,e,t,r).pipe(lt(s=>s===!0?o:ce({},cE)))):gt(o)}function HL(n,e,t){if(e.path==="**")return BX(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?ce({},cE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||k9)(t,n,e);if(!r)return ce({},cE);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?ce(ce({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function BX(n){return{matched:!0,parameters:n.length>0?wL(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function _L(n,e,t,i){return t.length>0&&zX(n,t,i)?{segmentGroup:new Ui(e,VX(i,new Ui(t,n.children))),slicedSegments:[]}:t.length===0&&HX(n,t,i)?{segmentGroup:new Ui(n.segments,UX(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Ui(n.segments,n.children),slicedSegments:t}}function UX(n,e,t,i){let r={};for(let o of t)if(U0(n,e,o)&&!i[Os(o)]){let s=new Ui([],{});r[Os(o)]=s}return ce(ce({},i),r)}function VX(n,e){let t={};t[ai]=e;for(let i of n)if(i.path===""&&Os(i)!==ai){let r=new Ui([],{});t[Os(i)]=r}return t}function zX(n,e,t){return t.some(i=>U0(n,e,i)&&Os(i)!==ai)}function HX(n,e,t){return t.some(i=>U0(n,e,i))}function U0(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function GX(n,e,t){return e.length===0&&!n.children[t]}var dE=class{};function WX(n,e,t,i,r,o,s="emptyOnly"){return new uE(n,e,t,i,r,s,o).recognize()}var $X=31,uE=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new lE(this.urlSerializer,this.urlTree)}noMatchError(e){return new Te(4002,`'${e.segmentGroup}'`)}recognize(){let e=_L(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(lt(({children:t,rootSnapshot:i})=>{let r=new No(i,t),o=new k0("",r),s=J9(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Vh([],Object.freeze({}),Object.freeze(ce({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ai,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ai,t).pipe(lt(i=>({children:i,rootSnapshot:t})),qr(i=>{if(i instanceof Ym)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Xm?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(lt(s=>s instanceof No?[s]:[]))}processChildren(e,t,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return ji(o).pipe(tl(s=>{let a=i.children[s],l=aX(t,s);return this.processSegmentGroup(e,l,a,s,r)}),nT((s,a)=>(s.push(...a),s)),ec(null),iT(),Dn(s=>{if(s===null)return Lh(i);let a=GL(s);return qX(a),gt(a)}))}processSegment(e,t,i,r,o,s,a){return ji(t).pipe(tl(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,r,o,s,a).pipe(qr(c=>{if(c instanceof Xm)return gt(null);throw c}))),il(l=>!!l),qr(l=>{if(VL(l))return GX(i,r,o)?gt(new dE):Lh(i);throw l}))}processSegmentAgainstRoute(e,t,i,r,o,s,a,l){return Os(i)!==s&&(s===ai||!U0(r,o,i))?Lh(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s,l):Lh(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s,a){let{matched:l,parameters:c,consumedSegments:d,positionalParamSegments:u,remainingSegments:h}=HL(t,r,o);if(!l)return Lh(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>$X&&(this.allowRedirects=!1));let f=new Vh(o,c,Object.freeze(ce({},this.urlTree.queryParams)),this.urlTree.fragment,bL(r),Os(r),r.component??r._loadedComponent??null,r,vL(r)),m=F0(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(m.params),f.data=Object.freeze(m.data);let _=this.applyRedirects.applyRedirectCommands(d,r.redirectTo,u,f,e);return this.applyRedirects.lineralizeSegments(r,_).pipe(Dn(g=>this.processSegment(e,i,t,g.concat(h),s,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let a=LX(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),a.pipe(Nn(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Nn(({routes:c})=>{let d=i._loadedInjector??e,{parameters:u,consumedSegments:h,remainingSegments:f}=l,m=new Vh(h,u,Object.freeze(ce({},this.urlTree.queryParams)),this.urlTree.fragment,bL(i),Os(i),i.component??i._loadedComponent??null,i,vL(i)),_=F0(m,s,this.paramsInheritanceStrategy);m.params=Object.freeze(_.params),m.data=Object.freeze(_.data);let{segmentGroup:g,slicedSegments:p}=_L(t,h,f,c);if(p.length===0&&g.hasChildren())return this.processChildren(d,c,g,m).pipe(lt(v=>new No(m,v)));if(c.length===0&&p.length===0)return gt(new No(m,[]));let b=Os(i)===o;return this.processSegment(d,c,g,p,b?ai:o,!0,m).pipe(lt(v=>new No(m,v instanceof No?[v]:[])))}))):Lh(t)))}getChildConfig(e,t,i){return t.children?gt({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?gt({routes:t._loadedRoutes,injector:t._loadedInjector}):kX(e,t,i,this.urlSerializer).pipe(Dn(r=>r?this.configLoader.loadChildren(e,t).pipe(Xi(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):NX(t))):gt({routes:[],injector:e})}};function qX(n){n.sort((e,t)=>e.value.outlet===ai?-1:t.value.outlet===ai?1:e.value.outlet.localeCompare(t.value.outlet))}function XX(n){let e=n.value.routeConfig;return e&&e.path===""}function GL(n){let e=[],t=new Set;for(let i of n){if(!XX(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=GL(i.children);e.push(new No(i.value,r))}return e.filter(i=>!t.has(i))}function bL(n){return n.data||{}}function vL(n){return n.resolve||{}}function YX(n,e,t,i,r,o){return Dn(s=>WX(n,e,t,i,s.extractedUrl,r,o).pipe(lt(({state:a,tree:l})=>Ft(ce({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function ZX(n,e){return Dn(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return gt(t);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of WL(l))s.add(c);let a=0;return ji(s).pipe(tl(l=>o.has(l)?QX(l,i,n,e):(l.data=F0(l,l.parent,n).resolve,gt(void 0))),Xi(()=>a++),sh(1),Dn(l=>a===s.size?gt(t):_n))})}function WL(n){let e=n.children.map(t=>WL(t)).flat();return[n,...e]}function QX(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!NL(r)&&(o[Zm]=r.title),KX(o,n,e,i).pipe(lt(s=>(n._resolvedData=s,n.data=F0(n,n.parent,t).resolve,null)))}function KX(n,e,t,i){let r=zC(n);if(r.length===0)return gt({});let o={};return ji(r).pipe(Dn(s=>JX(n[s],e,t,i).pipe(il(),Xi(a=>{if(a instanceof qm)throw O0(new Gh,a);o[s]=a}))),sh(1),lt(()=>o),qr(s=>VL(s)?_n:so(s)))}function JX(n,e,t,i){let r=Km(e)??i,o=Xh(n,r),s=o.resolve?o.resolve(e,t):po(r,()=>o(e,t));return hc(s)}function UC(n){return Nn(e=>{let t=n(e);return t?ji(t).pipe(lt(()=>e)):gt(e)})}var $L=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===ai);return i}getResolvedTitleForRoute(t){return t.data[Zm]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:()=>E(eY),providedIn:"root"})}return n})(),eY=(()=>{class n extends $L{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(He(uL))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tg=new ye("",{providedIn:"root",factory:()=>({})}),tY=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=j({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&ae(0,"router-outlet")},dependencies:[pE],encapsulation:2})}return n})();function mE(n){let e=n.children&&n.children.map(mE),t=e?Ft(ce({},n),{children:e}):ce({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ai&&(t.component=tY),t}var N0=new ye(""),gE=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=E(r0);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return gt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=hc(t.loadComponent()).pipe(lt(qL),Xi(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ua(()=>{this.componentLoaders.delete(t)})),r=new ih(i,()=>new tt).pipe(th());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return gt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=iY(i,this.compiler,t,this.onLoadEndListener).pipe(ua(()=>{this.childrenLoaders.delete(i)})),s=new ih(o,()=>new tt).pipe(th());return this.childrenLoaders.set(i,s),s}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iY(n,e,t,i){return hc(n.loadChildren()).pipe(lt(qL),Dn(r=>r instanceof hm||Array.isArray(r)?gt(r):ji(e.compileModuleAsync(r))),lt(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(t).injector,s=o.get(N0,[],{optional:!0,self:!0}).flat()),{routes:s.map(mE),injector:o}}))}function nY(n){return n&&typeof n=="object"&&"default"in n}function qL(n){return nY(n)?n.default:n}var _E=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:()=>E(rY),providedIn:"root"})}return n})(),rY=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),XL=new ye(""),YL=new ye("");function oY(n,e,t){let i=n.get(YL),r=n.get(Pt);return n.get(nt).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(c=>setTimeout(c));let o,s=new Promise(c=>{o=c}),a=r.startViewTransition(()=>(o(),sY(n))),{onViewTransitionCreated:l}=i;return l&&po(n,()=>l({transition:a,from:e,to:t})),s})}function sY(n){return new Promise(e=>{jo({read:()=>setTimeout(e)},{injector:n})})}var ZL=new ye(""),bE=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new tt;transitionAbortSubject=new tt;configLoader=E(gE);environmentInjector=E(Jn);destroyRef=E(Od);urlSerializer=E(Qm);rootContexts=E(Jm);location=E(dc);inputBindingEnabled=E(B0,{optional:!0})!==null;titleStrategy=E($L);options=E(tg,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=E(_E);createViewTransition=E(XL,{optional:!0});navigationErrorHandler=E(ZL,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>gt(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new ZC(r)),i=r=>this.events.next(new QC(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(Ft(ce(ce({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new En({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Vm,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vi(o=>o.id!==0),lt(o=>Ft(ce({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Nn(o=>{let s=!1,a=!1;return gt(o).pipe(Nn(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Lo.SupersededByNewNavigation),_n;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Ft(ce({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&d!=="reload"){let u="";return this.events.next(new uc(l.id,this.urlSerializer.serialize(l.rawUrl),u,E0.IgnoredSameUrlNavigation)),l.resolve(!1),_n}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return gt(l).pipe(Nn(u=>{let h=this.transitions?.getValue();return this.events.next(new Wh(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),h!==this.transitions?.getValue()?_n:Promise.resolve(u)}),YX(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Xi(u=>{o.targetSnapshot=u.targetSnapshot,o.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=Ft(ce({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let h=new D0(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:u,extractedUrl:h,source:f,restoredState:m,extras:_}=l,g=new Wh(u,this.urlSerializer.serialize(h),f,m);this.events.next(g);let p=OL(this.rootComponentType).snapshot;return this.currentTransition=o=Ft(ce({},l),{targetSnapshot:p,urlAfterRedirects:h,extras:Ft(ce({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,gt(o)}else{let u="";return this.events.next(new uc(l.id,this.urlSerializer.serialize(l.extractedUrl),u,E0.IgnoredByUrlHandlingStrategy)),l.resolve(!1),_n}}),Xi(l=>{let c=new $C(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),lt(l=>(this.currentTransition=o=Ft(ce({},l),{guards:mX(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),RX(this.environmentInjector,l=>this.events.next(l)),Xi(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw O0(this.urlSerializer,l.guardsResult);let c=new qC(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),vi(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Lo.GuardRejected),!1)),UC(l=>{if(l.guards.canActivateChecks.length)return gt(l).pipe(Xi(c=>{let d=new XC(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),Nn(c=>{let d=!1;return gt(c).pipe(ZX(this.paramsInheritanceStrategy,this.environmentInjector),Xi({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(c,"",Lo.NoDataFromResolver)}}))}),Xi(c=>{let d=new YC(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}))}),UC(l=>{let c=d=>{let u=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(d.routeConfig).pipe(Xi(h=>{d.component=h}),lt(()=>{})));for(let h of d.children)u.push(...c(h));return u};return gd(c(l.targetSnapshot.root)).pipe(ec(null),Er(1))}),UC(()=>this.afterPreactivation()),Nn(()=>{let{currentSnapshot:l,targetSnapshot:c}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return d?ji(d).pipe(lt(()=>o)):gt(o)}),lt(l=>{let c=dX(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Ft(ce({},l),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,o}),Xi(()=>{this.events.next(new Wm)}),pX(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Er(1),Xi({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Sa(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Ri(this.transitionAbortSubject.pipe(Xi(l=>{throw l}))),ua(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Lo.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),qr(l=>{if(this.destroyed)return o.resolve(!1),_n;if(a=!0,UL(l))this.events.next(new ml(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),fX(l)?this.events.next(new $h(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let c=new Gm(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let d=po(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(d instanceof qm){let{message:u,cancellationCode:h}=O0(this.urlSerializer,d);this.events.next(new ml(o.id,this.urlSerializer.serialize(o.extractedUrl),u,h)),this.events.next(new $h(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(c),l}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return _n}))}))}cancelNavigationTransition(t,i,r){let o=new ml(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function aY(n){return n!==Vm}var lY=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:()=>E(cY),providedIn:"root"})}return n})(),hE=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},cY=(()=>{class n extends hE{static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QL=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:()=>E(dY),providedIn:"root"})}return n})(),dY=(()=>{class n extends QL{location=E(dc);urlSerializer=E(Qm);options=E(tg,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=E(_E);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new gl;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=OL(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof Wh)this.stateMemento=this.createStateMemento();else if(t instanceof uc)this.rawUrlTree=i.initialUrl;else if(t instanceof D0){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof Wm?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof ml&&(t.code===Lo.GuardRejected||t.code===Lo.NoDataFromResolver)?this.restoreHistory(i):t instanceof Gm?this.restoreHistory(i,!0):t instanceof Sa&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof gl?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,s=ce(ce({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",s)}else{let o=ce(ce({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function KL(n,e){n.events.pipe(vi(t=>t instanceof Sa||t instanceof ml||t instanceof Gm||t instanceof uc),lt(t=>t instanceof Sa||t instanceof uc?0:(t instanceof ml?t.code===Lo.Redirect||t.code===Lo.SupersededByNewNavigation:!1)?2:1),vi(t=>t!==2),Er(1)).subscribe(()=>{e()})}var uY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},zd=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=E(lC);stateManager=E(QL);options=E(tg,{optional:!0})||{};pendingTasks=E(ba);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=E(bE);urlSerializer=E(Qm);location=E(dc);urlHandlingStrategy=E(_E);_events=new tt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=E(lY);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=E(N0,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!E(B0,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new bi;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof ml&&i.code!==Lo.Redirect&&i.code!==Lo.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Sa)this.navigated=!0;else if(i instanceof $h){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=ce({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||aY(r.source)},s);this.scheduleNavigation(a,Vm,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}pY(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Vm,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=ce({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(mE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=ce(ce({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let u;try{let h=r?r.snapshot:this.routerState.snapshot.root;u=IL(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),u=this.currentUrlTree.root}return PL(u,t,d,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Vd(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Vm,null,i)}navigate(t,i={skipLocationChange:!1}){return fY(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=ce({},uY):i===!1?r=ce({},hY):r=i,Vd(t))return hL(this.currentUrlTree,t,r);let o=this.parseUrl(t);return hL(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((u,h)=>{a=u,l=h});let d=this.pendingTasks.add();return KL(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(u=>Promise.reject(u))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fY(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Te(4008,!1)}function pY(n){return!(n instanceof Wm)&&!(n instanceof $h)}var JL=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new tt;constructor(t,i,r,o,s,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(c=>{c instanceof Sa&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Vd(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||i||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let i=this.href===null?null:sj(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Vd(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(be(zd),be(_l),By("tabindex"),be(lr),be(_t),be(pl))};static \u0275dir=Ue({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&De("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&Li("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Si],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Si],replaceUrl:[2,"replaceUrl","replaceUrl",Si],routerLink:"routerLink"},features:[tr]})}return n})();var L0=class{};var mY=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,i,r,o,s){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(vi(t=>t instanceof Sa),tl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Zy(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ji(r).pipe(Kl())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=gt(null);let o=r.pipe(Dn(s=>s===null?gt(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return ji([o,s]).pipe(Kl())}else return o})}static \u0275fac=function(i){return new(i||n)(He(zd),He(r0),He(Jn),He(L0),He(gE))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),e2=new ye(""),gY=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,i,r,o,s={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Wh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Sa?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof uc&&t.code===E0.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof A0&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new A0(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){Yy()};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();function _Y(n){return n.routerState.root}function ig(n,e){return{\u0275kind:n,\u0275providers:e}}function bY(){let n=E(yi);return e=>{let t=n.get(fo);if(e!==t.components[0])return;let i=n.get(zd),r=n.get(t2);n.get(vE)===1&&i.initialNavigation(),n.get(i2,null,fi.Optional)?.setUpPreloading(),n.get(e2,null,fi.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var t2=new ye("",{factory:()=>new tt}),vE=new ye("",{providedIn:"root",factory:()=>1});function vY(){return ig(2,[{provide:vE,useValue:0},{provide:Jy,multi:!0,deps:[yi],useFactory:e=>{let t=e.get(PN,Promise.resolve());return()=>t.then(()=>new Promise(i=>{let r=e.get(zd),o=e.get(t2);KL(r,()=>{i(!0)}),e.get(bE).afterPreactivation=()=>(i(!0),o.closed?gt(void 0):o),r.initialNavigation()}))}}])}function yY(){return ig(3,[{provide:Jy,multi:!0,useFactory:()=>{let e=E(zd);return()=>{e.setUpLocationChangeListener()}}},{provide:vE,useValue:2}])}var i2=new ye("");function xY(n){return ig(0,[{provide:i2,useExisting:mY},{provide:L0,useExisting:n}])}function wY(){return ig(8,[gL,{provide:B0,useExisting:gL}])}function MY(n){let e=[{provide:XL,useValue:oY},{provide:YL,useValue:ce({skipNextTransition:!!n?.skipInitialTransition},n)}];return ig(9,e)}var SY=[dc,{provide:Qm,useClass:Gh},zd,Jm,{provide:_l,useFactory:_Y,deps:[zd]},gE,[]],yE=(()=>{class n{constructor(){}static forRoot(t,i){return{ngModule:n,providers:[SY,[],{provide:N0,multi:!0,useValue:t},[],i?.errorHandler?{provide:ZL,useValue:i.errorHandler}:[],{provide:tg,useValue:i||{}},i?.useHash?RY():CY(),TY(),i?.preloadingStrategy?xY(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?EY(i):[],i?.bindToComponentInputs?wY().\u0275providers:[],i?.enableViewTransitions?MY().\u0275providers:[],DY()]}}static forChild(t){return{ngModule:n,providers:[{provide:N0,multi:!0,useValue:t}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({})}return n})();function TY(){return{provide:e2,useFactory:()=>{let n=E(LN),e=E(nt),t=E(tg),i=E(bE),r=E(Qm);return t.scrollOffset&&n.setOffset(t.scrollOffset),new gY(r,i,n,e,t)}}}function RY(){return{provide:pl,useClass:kN}}function CY(){return{provide:pl,useClass:yC}}function EY(n){return[n.initialNavigation==="disabled"?yY().\u0275providers:[],n.initialNavigation==="enabledBlocking"?vY().\u0275providers:[]]}var yL=new ye("");function DY(){return[{provide:yL,useFactory:bY},{provide:e0,multi:!0,useExisting:yL}]}var zc={};P4(zc,{ACESFilmicToneMapping:()=>OD,AddEquation:()=>fr,AddOperation:()=>ID,AdditiveAnimationBlendMode:()=>Nw,AdditiveBlending:()=>Bc,AgXToneMapping:()=>ND,AlphaFormat:()=>Iw,AlwaysCompare:()=>ZD,AlwaysDepth:()=>__,AlwaysStencilFunc:()=>Ax,AmbientLight:()=>_u,AnimationAction:()=>p_,AnimationClip:()=>Fa,AnimationLoader:()=>$x,AnimationMixer:()=>Lf,AnimationObjectGroup:()=>iw,AnimationUtils:()=>tU,ArcCurve:()=>Dg,ArrayCamera:()=>u_,ArrowHelper:()=>yw,AttachedBindMode:()=>Dx,Audio:()=>h_,AudioAnalyser:()=>tw,AudioContext:()=>Nf,AudioListener:()=>Jx,AudioLoader:()=>Qx,AxesHelper:()=>xw,BackSide:()=>Br,BasicDepthPacking:()=>zD,BasicShadowMap:()=>fB,BatchedMesh:()=>Eg,Bone:()=>Ic,BooleanKeyframeTrack:()=>Ia,Box2:()=>cw,Box3:()=>vn,Box3Helper:()=>Bf,BoxGeometry:()=>Qi,BoxHelper:()=>bw,BufferAttribute:()=>mi,BufferGeometry:()=>bt,BufferGeometryLoader:()=>d_,ByteType:()=>Ew,Cache:()=>Ra,Camera:()=>Rl,CameraHelper:()=>_w,CanvasTexture:()=>kc,CapsuleGeometry:()=>kg,CatmullRomCurve3:()=>Ag,CineonToneMapping:()=>kD,CircleGeometry:()=>Og,ClampToEdgeWrapping:()=>Kr,Clock:()=>eo,Color:()=>he,ColorKeyframeTrack:()=>Ff,ColorManagement:()=>ui,CompressedArrayTexture:()=>Hx,CompressedCubeTexture:()=>Gx,CompressedTexture:()=>uu,CompressedTextureLoader:()=>qx,ConeGeometry:()=>jg,ConstantAlphaFactor:()=>ED,ConstantColorFactor:()=>RD,Controls:()=>pr,CubeCamera:()=>Mg,CubeReflectionMapping:()=>Oa,CubeRefractionMapping:()=>Pl,CubeTexture:()=>Ac,CubeTextureLoader:()=>Xx,CubeUVReflectionMapping:()=>yu,CubicBezierCurve:()=>Tf,CubicBezierCurve3:()=>Ig,CubicInterpolant:()=>t_,CullFaceBack:()=>Sw,CullFaceFront:()=>pD,CullFaceFrontBack:()=>hB,CullFaceNone:()=>fD,Curve:()=>bo,CurvePath:()=>Fg,CustomBlending:()=>Uc,CustomToneMapping:()=>jD,CylinderGeometry:()=>Fn,Cylindrical:()=>aw,Data3DTexture:()=>xf,DataArrayTexture:()=>nu,DataTexture:()=>Mr,DataTextureLoader:()=>Yx,DataUtils:()=>XB,DecrementStencilOp:()=>SB,DecrementWrapStencilOp:()=>RB,DefaultLoadingManager:()=>n1,DepthFormat:()=>Mc,DepthStencilFormat:()=>hs,DepthTexture:()=>ps,DetachedBindMode:()=>BD,DirectionalLight:()=>Dl,DirectionalLightHelper:()=>gw,DiscreteInterpolant:()=>i_,DodecahedronGeometry:()=>Ng,DoubleSide:()=>$n,DstAlphaFactor:()=>bu,DstColorFactor:()=>vu,DynamicCopyUsage:()=>VB,DynamicDrawUsage:()=>OB,DynamicReadUsage:()=>LB,EdgesGeometry:()=>Lg,EllipseCurve:()=>ms,EqualCompare:()=>$D,EqualDepth:()=>v_,EqualStencilFunc:()=>AB,EquirectangularReflectionMapping:()=>Vf,EquirectangularRefractionMapping:()=>zf,Euler:()=>Jr,EventDispatcher:()=>Ho,ExtrudeGeometry:()=>zg,FileLoader:()=>Wn,Float16BufferAttribute:()=>Lx,Float32BufferAttribute:()=>Ne,FloatType:()=>nr,Fog:()=>ou,FogExp2:()=>Tg,FramebufferTexture:()=>zx,FrontSide:()=>ds,Frustum:()=>Pc,GLBufferAttribute:()=>sw,GLSL1:()=>HB,GLSL3:()=>Uw,GreaterCompare:()=>qD,GreaterDepth:()=>x_,GreaterEqualCompare:()=>YD,GreaterEqualDepth:()=>y_,GreaterEqualStencilFunc:()=>kB,GreaterStencilFunc:()=>PB,GridHelper:()=>Lc,Group:()=>Tr,HalfFloatType:()=>zi,HemisphereLight:()=>mu,HemisphereLightHelper:()=>pw,IcosahedronGeometry:()=>fu,ImageBitmapLoader:()=>jf,ImageLoader:()=>Nc,ImageUtils:()=>xg,IncrementStencilOp:()=>MB,IncrementWrapStencilOp:()=>TB,InstancedBufferAttribute:()=>fs,InstancedBufferGeometry:()=>c_,InstancedInterleavedBuffer:()=>ow,InstancedMesh:()=>Cl,Int16BufferAttribute:()=>jx,Int32BufferAttribute:()=>Nx,Int8BufferAttribute:()=>Fx,IntType:()=>M_,InterleavedBuffer:()=>Ea,InterleavedBufferAttribute:()=>Hs,Interpolant:()=>Aa,InterpolateDiscrete:()=>Ec,InterpolateLinear:()=>Dc,InterpolateSmooth:()=>gg,InvertStencilOp:()=>CB,KeepStencilOp:()=>yc,KeyframeTrack:()=>vo,LOD:()=>Cg,LatheGeometry:()=>Af,Layers:()=>ru,LessCompare:()=>WD,LessDepth:()=>b_,LessEqualCompare:()=>Bw,LessEqualDepth:()=>Rc,LessEqualStencilFunc:()=>IB,LessStencilFunc:()=>DB,Light:()=>Ks,LightProbe:()=>a_,Line:()=>Ki,Line3:()=>dw,LineBasicMaterial:()=>an,LineCurve:()=>Rf,LineCurve3:()=>Pg,LineDashedMaterial:()=>e_,LineLoop:()=>cu,LineSegments:()=>Sr,LinearFilter:()=>bn,LinearInterpolant:()=>Pf,LinearMipMapLinearFilter:()=>_B,LinearMipMapNearestFilter:()=>gB,LinearMipmapLinearFilter:()=>xo,LinearMipmapNearestFilter:()=>Vc,LinearSRGBColorSpace:()=>Gn,LinearToneMapping:()=>PD,LinearTransfer:()=>_f,Loader:()=>qn,LoaderUtils:()=>gs,LoadingManager:()=>kf,LoopOnce:()=>eb,LoopPingPong:()=>VD,LoopRepeat:()=>UD,LuminanceAlphaFormat:()=>kw,LuminanceFormat:()=>Fw,MOUSE:()=>ln,Material:()=>hn,MaterialLoader:()=>l_,MathUtils:()=>it,Matrix2:()=>lw,Matrix3:()=>$t,Matrix4:()=>Ie,MaxEquation:()=>vD,Mesh:()=>ke,MeshBasicMaterial:()=>on,MeshDepthMaterial:()=>jc,MeshDistanceMaterial:()=>If,MeshLambertMaterial:()=>Kg,MeshMatcapMaterial:()=>Jg,MeshNormalMaterial:()=>Xs,MeshPhongMaterial:()=>pu,MeshPhysicalMaterial:()=>jr,MeshStandardMaterial:()=>Rr,MeshToonMaterial:()=>Qg,MinEquation:()=>bD,MirroredRepeatWrapping:()=>Cc,MixOperation:()=>AD,MultiplyBlending:()=>Cw,MultiplyOperation:()=>Uf,NearestFilter:()=>hi,NearestMipMapLinearFilter:()=>mB,NearestMipMapNearestFilter:()=>pB,NearestMipmapLinearFilter:()=>Fl,NearestMipmapNearestFilter:()=>Hf,NeutralToneMapping:()=>LD,NeverCompare:()=>GD,NeverDepth:()=>g_,NeverStencilFunc:()=>EB,NoBlending:()=>ii,NoColorSpace:()=>Na,NoToneMapping:()=>ka,NormalAnimationBlendMode:()=>tb,NormalBlending:()=>us,NotEqualCompare:()=>XD,NotEqualDepth:()=>w_,NotEqualStencilFunc:()=>FB,NumberKeyframeTrack:()=>Ys,Object3D:()=>xt,ObjectLoader:()=>Zx,ObjectSpaceNormalMap:()=>HD,OctahedronGeometry:()=>Ws,OneFactor:()=>yD,OneMinusConstantAlphaFactor:()=>DD,OneMinusConstantColorFactor:()=>CD,OneMinusDstAlphaFactor:()=>MD,OneMinusDstColorFactor:()=>SD,OneMinusSrcAlphaFactor:()=>Tc,OneMinusSrcColorFactor:()=>wD,OrthographicCamera:()=>yo,PCFShadowMap:()=>Tw,PCFSoftShadowMap:()=>mD,PMREMGenerator:()=>ob,Path:()=>Oc,PerspectiveCamera:()=>rn,Plane:()=>ir,PlaneGeometry:()=>$s,PlaneHelper:()=>vw,PointLight:()=>El,PointLightHelper:()=>fw,Points:()=>du,PointsMaterial:()=>Fc,PolarGridHelper:()=>mw,PolyhedronGeometry:()=>Gs,PositionalAudio:()=>ew,PropertyBinding:()=>$i,PropertyMixer:()=>f_,QuadraticBezierCurve:()=>Cf,QuadraticBezierCurve3:()=>Ef,Quaternion:()=>Yt,QuaternionKeyframeTrack:()=>Zs,QuaternionLinearInterpolant:()=>n_,RED_GREEN_RGTC2_Format:()=>K_,RED_RGTC1_Format:()=>jw,REVISION:()=>m_,RGBADepthPacking:()=>ib,RGBAFormat:()=>Or,RGBAIntegerFormat:()=>C_,RGBA_ASTC_10x10_Format:()=>$_,RGBA_ASTC_10x5_Format:()=>H_,RGBA_ASTC_10x6_Format:()=>G_,RGBA_ASTC_10x8_Format:()=>W_,RGBA_ASTC_12x10_Format:()=>q_,RGBA_ASTC_12x12_Format:()=>X_,RGBA_ASTC_4x4_Format:()=>O_,RGBA_ASTC_5x4_Format:()=>j_,RGBA_ASTC_5x5_Format:()=>N_,RGBA_ASTC_6x5_Format:()=>L_,RGBA_ASTC_6x6_Format:()=>B_,RGBA_ASTC_8x5_Format:()=>U_,RGBA_ASTC_8x6_Format:()=>V_,RGBA_ASTC_8x8_Format:()=>z_,RGBA_BPTC_Format:()=>Yf,RGBA_ETC2_EAC_Format:()=>k_,RGBA_PVRTC_2BPPV1_Format:()=>I_,RGBA_PVRTC_4BPPV1_Format:()=>A_,RGBA_S3TC_DXT1_Format:()=>$f,RGBA_S3TC_DXT3_Format:()=>qf,RGBA_S3TC_DXT5_Format:()=>Xf,RGBDepthPacking:()=>vB,RGBFormat:()=>Pw,RGBIntegerFormat:()=>bB,RGB_BPTC_SIGNED_Format:()=>Y_,RGB_BPTC_UNSIGNED_Format:()=>Z_,RGB_ETC1_Format:()=>P_,RGB_ETC2_Format:()=>F_,RGB_PVRTC_2BPPV1_Format:()=>D_,RGB_PVRTC_4BPPV1_Format:()=>E_,RGB_S3TC_DXT1_Format:()=>Wf,RGDepthPacking:()=>yB,RGFormat:()=>Ow,RGIntegerFormat:()=>R_,RawShaderMaterial:()=>Zg,Ray:()=>zs,Raycaster:()=>Nr,RectAreaLight:()=>o_,RedFormat:()=>Ol,RedIntegerFormat:()=>Gf,ReinhardToneMapping:()=>FD,RenderTarget:()=>wg,RepeatWrapping:()=>zo,ReplaceStencilOp:()=>wB,ReverseSubtractEquation:()=>_D,RingGeometry:()=>Hg,SIGNED_RED_GREEN_RGTC2_Format:()=>J_,SIGNED_RED_RGTC1_Format:()=>Q_,SRGBColorSpace:()=>Zi,SRGBTransfer:()=>Vi,Scene:()=>su,ShaderChunk:()=>ci,ShaderLib:()=>ta,ShaderMaterial:()=>Et,ShadowMaterial:()=>Yg,Shape:()=>Ca,ShapeGeometry:()=>Gg,ShapePath:()=>ww,ShapeUtils:()=>Vs,ShortType:()=>Dw,Skeleton:()=>lu,SkeletonHelper:()=>hw,SkinnedMesh:()=>au,Source:()=>Ta,Sphere:()=>Tn,SphereGeometry:()=>Da,Spherical:()=>Al,SphericalHarmonics3:()=>s_,SplineCurve:()=>Df,SpotLight:()=>gu,SpotLightHelper:()=>uw,Sprite:()=>Rg,SpriteMaterial:()=>Sf,SrcAlphaFactor:()=>Sc,SrcAlphaSaturateFactor:()=>TD,SrcColorFactor:()=>xD,StaticCopyUsage:()=>UB,StaticDrawUsage:()=>bf,StaticReadUsage:()=>NB,StereoCamera:()=>Kx,StreamCopyUsage:()=>zB,StreamDrawUsage:()=>jB,StreamReadUsage:()=>BB,StringKeyframeTrack:()=>Pa,SubtractEquation:()=>gD,SubtractiveBlending:()=>Rw,TOUCH:()=>Lr,TangentSpaceNormalMap:()=>jl,TetrahedronGeometry:()=>Wg,Texture:()=>yn,TextureLoader:()=>Of,TextureUtils:()=>nU,TorusGeometry:()=>qs,TorusKnotGeometry:()=>$g,Triangle:()=>Bs,TriangleFanDrawMode:()=>xu,TriangleStripDrawMode:()=>Zf,TrianglesDrawMode:()=>Lw,TubeGeometry:()=>qg,UVMapping:()=>yg,Uint16BufferAttribute:()=>wf,Uint32BufferAttribute:()=>Mf,Uint8BufferAttribute:()=>kx,Uint8ClampedBufferAttribute:()=>Ox,Uniform:()=>nw,UniformsGroup:()=>rw,UniformsLib:()=>Ve,UniformsUtils:()=>Hi,UnsignedByteType:()=>ea,UnsignedInt248Type:()=>_s,UnsignedInt5999Type:()=>Aw,UnsignedIntType:()=>ja,UnsignedShort4444Type:()=>S_,UnsignedShort5551Type:()=>T_,UnsignedShortType:()=>kl,VSMShadowMap:()=>Js,Vector2:()=>V,Vector3:()=>w,Vector4:()=>li,VectorKeyframeTrack:()=>Qs,VideoTexture:()=>Vx,WebGL3DRenderTarget:()=>Px,WebGLArrayRenderTarget:()=>Ix,WebGLCoordinateSystem:()=>Us,WebGLCubeRenderTarget:()=>Sg,WebGLMultipleRenderTargets:()=>Mw,WebGLRenderTarget:()=>ti,WebGLRenderer:()=>Nl,WebGLUtils:()=>PU,WebGPUCoordinateSystem:()=>vf,WireframeGeometry:()=>Xg,WrapAroundEnding:()=>gf,ZeroCurvatureEnding:()=>xc,ZeroFactor:()=>Il,ZeroSlopeEnding:()=>wc,ZeroStencilOp:()=>xB,createCanvasElement:()=>JD});var m_="171",ln={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Lr={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},fD=0,Sw=1,pD=2,hB=3,fB=0,Tw=1,mD=2,Js=3,ds=0,Br=1,$n=2,ii=0,us=1,Bc=2,Rw=3,Cw=4,Uc=5,fr=100,gD=101,_D=102,bD=103,vD=104,Il=200,yD=201,xD=202,wD=203,Sc=204,Tc=205,bu=206,MD=207,vu=208,SD=209,TD=210,RD=211,CD=212,ED=213,DD=214,g_=0,__=1,b_=2,Rc=3,v_=4,y_=5,x_=6,w_=7,Uf=0,AD=1,ID=2,ka=0,PD=1,FD=2,kD=3,OD=4,jD=5,ND=6,LD=7,Dx="attached",BD="detached",yg=300,Oa=301,Pl=302,Vf=303,zf=304,yu=306,zo=1e3,Kr=1001,Cc=1002,hi=1003,Hf=1004,pB=1004,Fl=1005,mB=1005,bn=1006,Vc=1007,gB=1007,xo=1008,_B=1008,ea=1009,Ew=1010,Dw=1011,kl=1012,M_=1013,ja=1014,nr=1015,zi=1016,S_=1017,T_=1018,_s=1020,Aw=35902,Iw=1021,Pw=1022,Or=1023,Fw=1024,kw=1025,Mc=1026,hs=1027,Ol=1028,Gf=1029,Ow=1030,R_=1031,bB=1032,C_=1033,Wf=33776,$f=33777,qf=33778,Xf=33779,E_=35840,D_=35841,A_=35842,I_=35843,P_=36196,F_=37492,k_=37496,O_=37808,j_=37809,N_=37810,L_=37811,B_=37812,U_=37813,V_=37814,z_=37815,H_=37816,G_=37817,W_=37818,$_=37819,q_=37820,X_=37821,Yf=36492,Y_=36494,Z_=36495,jw=36283,Q_=36284,K_=36285,J_=36286,eb=2200,UD=2201,VD=2202,Ec=2300,Dc=2301,gg=2302,xc=2400,wc=2401,gf=2402,tb=2500,Nw=2501,Lw=0,Zf=1,xu=2,zD=3200,ib=3201,vB=3202,yB=3203,jl=0,HD=1,Na="",Zi="srgb",Gn="srgb-linear",_f="linear",Vi="srgb",xB=0,yc=7680,wB=7681,MB=7682,SB=7683,TB=34055,RB=34056,CB=5386,EB=512,DB=513,AB=514,IB=515,PB=516,FB=517,kB=518,Ax=519,GD=512,WD=513,$D=514,Bw=515,qD=516,XD=517,YD=518,ZD=519,bf=35044,OB=35048,jB=35040,NB=35045,LB=35049,BB=35041,UB=35046,VB=35050,zB=35042,HB="100",Uw="300 es",Us=2e3,vf=2001,Ho=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let i=this._listeners[e.type];if(i!==void 0){e.target=this;let r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,e);e.target=null}}},Pr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],r2=1234567,tu=Math.PI/180,iu=180/Math.PI;function Vo(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Pr[n&255]+Pr[n>>8&255]+Pr[n>>16&255]+Pr[n>>24&255]+"-"+Pr[e&255]+Pr[e>>8&255]+"-"+Pr[e>>16&15|64]+Pr[e>>24&255]+"-"+Pr[t&63|128]+Pr[t>>8&255]+"-"+Pr[t>>16&255]+Pr[t>>24&255]+Pr[i&255]+Pr[i>>8&255]+Pr[i>>16&255]+Pr[i>>24&255]).toLowerCase()}function Wt(n,e,t){return Math.max(e,Math.min(t,n))}function QD(n,e){return(n%e+e)%e}function AY(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function IY(n,e,t){return n!==e?(t-n)/(e-n):0}function _g(n,e,t){return(1-t)*n+t*e}function PY(n,e,t,i){return _g(n,e,1-Math.exp(-t*i))}function FY(n,e=1){return e-Math.abs(QD(n,e*2)-e)}function kY(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function OY(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function jY(n,e){return n+Math.floor(Math.random()*(e-n+1))}function NY(n,e){return n+Math.random()*(e-n)}function LY(n){return n*(.5-Math.random())}function BY(n){n!==void 0&&(r2=n);let e=r2+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function UY(n){return n*tu}function VY(n){return n*iu}function zY(n){return(n&n-1)===0&&n!==0}function HY(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function GY(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function WY(n,e,t,i,r){let o=Math.cos,s=Math.sin,a=o(t/2),l=s(t/2),c=o((e+i)/2),d=s((e+i)/2),u=o((e-i)/2),h=s((e-i)/2),f=o((i-e)/2),m=s((i-e)/2);switch(r){case"XYX":n.set(a*d,l*u,l*h,a*c);break;case"YZY":n.set(l*h,a*d,l*u,a*c);break;case"ZXZ":n.set(l*u,l*h,a*d,a*c);break;case"XZX":n.set(a*d,l*m,l*f,a*c);break;case"YXY":n.set(l*f,a*d,l*m,a*c);break;case"ZYZ":n.set(l*m,l*f,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Qr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ei(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var it={DEG2RAD:tu,RAD2DEG:iu,generateUUID:Vo,clamp:Wt,euclideanModulo:QD,mapLinear:AY,inverseLerp:IY,lerp:_g,damp:PY,pingpong:FY,smoothstep:kY,smootherstep:OY,randInt:jY,randFloat:NY,randFloatSpread:LY,seededRandom:BY,degToRad:UY,radToDeg:VY,isPowerOfTwo:zY,ceilPowerOfTwo:HY,floorPowerOfTwo:GY,setQuaternionFromProperEuler:WY,normalize:ei,denormalize:Qr},V=class n{constructor(e=0,t=0){n.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Wt(this.x,e.x,t.x),this.y=Wt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Wt(this.x,e,t),this.y=Wt(this.y,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Wt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(Wt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*i-s*r+e.x,this.y=o*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},$t=class n{constructor(e,t,i,r,o,s,a,l,c){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,o,s,a,l,c)}set(e,t,i,r,o,s,a,l,c){let d=this.elements;return d[0]=e,d[1]=r,d[2]=a,d[3]=t,d[4]=o,d[5]=l,d[6]=i,d[7]=s,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[3],l=i[6],c=i[1],d=i[4],u=i[7],h=i[2],f=i[5],m=i[8],_=r[0],g=r[3],p=r[6],b=r[1],v=r[4],y=r[7],R=r[2],S=r[5],T=r[8];return o[0]=s*_+a*b+l*R,o[3]=s*g+a*v+l*S,o[6]=s*p+a*y+l*T,o[1]=c*_+d*b+u*R,o[4]=c*g+d*v+u*S,o[7]=c*p+d*y+u*T,o[2]=h*_+f*b+m*R,o[5]=h*g+f*v+m*S,o[8]=h*p+f*y+m*T,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return t*s*d-t*a*c-i*o*d+i*a*l+r*o*c-r*s*l}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],d=e[8],u=d*s-a*c,h=a*l-d*o,f=c*o-s*l,m=t*u+i*h+r*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);let _=1/m;return e[0]=u*_,e[1]=(r*c-d*i)*_,e[2]=(a*i-r*s)*_,e[3]=h*_,e[4]=(d*t-r*l)*_,e[5]=(r*o-a*t)*_,e[6]=f*_,e[7]=(i*l-c*t)*_,e[8]=(s*t-i*o)*_,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,o,s,a){let l=Math.cos(o),c=Math.sin(o);return this.set(i*l,i*c,-i*(l*s+c*a)+s+e,-r*c,r*l,-r*(-c*s+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(xE.makeScale(e,t)),this}rotate(e){return this.premultiply(xE.makeRotation(-e)),this}translate(e,t){return this.premultiply(xE.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},xE=new $t;function KD(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}var $Y={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ff(n,e){return new $Y[n](e)}function yf(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function JD(){let n=yf("canvas");return n.style.display="block",n}var o2={};function wu(n){n in o2||(o2[n]=!0,console.warn(n))}function GB(n,e,t){return new Promise(function(i,r){function o(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(o,t);break;default:i()}}setTimeout(o,t)})}function WB(n){let e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function $B(n){let e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}var s2=new $t().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),a2=new $t().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function qY(){let n={enabled:!0,workingColorSpace:Gn,spaces:{},convert:function(r,o,s){return this.enabled===!1||o===s||!o||!s||(this.spaces[o].transfer===Vi&&(r.r=Tl(r.r),r.g=Tl(r.g),r.b=Tl(r.b)),this.spaces[o].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[o].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Vi&&(r.r=mf(r.r),r.g=mf(r.g),r.b=mf(r.b))),r},fromWorkingColorSpace:function(r,o){return this.convert(r,this.workingColorSpace,o)},toWorkingColorSpace:function(r,o){return this.convert(r,o,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Na?_f:this.spaces[r].transfer},getLuminanceCoefficients:function(r,o=this.workingColorSpace){return r.fromArray(this.spaces[o].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,o,s){return r.copy(this.spaces[o].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Gn]:{primaries:e,whitePoint:i,transfer:_f,toXYZ:s2,fromXYZ:a2,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Zi},outputColorSpaceConfig:{drawingBufferColorSpace:Zi}},[Zi]:{primaries:e,whitePoint:i,transfer:Vi,toXYZ:s2,fromXYZ:a2,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Zi}}}),n}var ui=qY();function Tl(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function mf(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var Yh,xg=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Yh===void 0&&(Yh=yf("canvas")),Yh.width=e.width,Yh.height=e.height;let i=Yh.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Yh}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=yf("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=Tl(o[s]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Tl(t[i]/255)*255):t[i]=Tl(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},XY=0,Ta=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:XY++}),this.uuid=Vo(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(wE(r[s].image)):o.push(wE(r[s]))}else o=wE(r);i.url=o}return t||(e.images[this.uuid]=i),i}};function wE(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?xg.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var YY=0,yn=(()=>{class n extends Ho{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Kr,o=Kr,s=bn,a=xo,l=Or,c=ea,d=n.DEFAULT_ANISOTROPY,u=Na){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:YY++}),this.uuid=Vo(),this.name="",this.source=new Ta(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=c,this.offset=new V(0,0),this.repeat=new V(1,1),this.center=new V(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new $t,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==yg)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case zo:t.x=t.x-Math.floor(t.x);break;case Kr:t.x=t.x<0?0:1;break;case Cc:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case zo:t.y=t.y-Math.floor(t.y);break;case Kr:t.y=t.y<0?0:1;break;case Cc:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=yg,n.DEFAULT_ANISOTROPY=1,n})(),li=class n{constructor(e=0,t=0,i=0,r=1){n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,o,l=e.elements,c=l[0],d=l[4],u=l[8],h=l[1],f=l[5],m=l[9],_=l[2],g=l[6],p=l[10];if(Math.abs(d-h)<.01&&Math.abs(u-_)<.01&&Math.abs(m-g)<.01){if(Math.abs(d+h)<.1&&Math.abs(u+_)<.1&&Math.abs(m+g)<.1&&Math.abs(c+f+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let v=(c+1)/2,y=(f+1)/2,R=(p+1)/2,S=(d+h)/4,T=(u+_)/4,A=(m+g)/4;return v>y&&v>R?v<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(v),r=S/i,o=T/i):y>R?y<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(y),i=S/r,o=A/r):R<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(R),i=T/o,r=A/o),this.set(i,r,o,t),this}let b=Math.sqrt((g-m)*(g-m)+(u-_)*(u-_)+(h-d)*(h-d));return Math.abs(b)<.001&&(b=1),this.x=(g-m)/b,this.y=(u-_)/b,this.z=(h-d)/b,this.w=Math.acos((c+f+p-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Wt(this.x,e.x,t.x),this.y=Wt(this.y,e.y,t.y),this.z=Wt(this.z,e.z,t.z),this.w=Wt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Wt(this.x,e,t),this.y=Wt(this.y,e,t),this.z=Wt(this.z,e,t),this.w=Wt(this.w,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Wt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},wg=class extends Ho{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new li(0,0,e,t),this.scissorTest=!1,this.viewport=new li(0,0,e,t);let r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:bn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);let o=new yn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);o.flipY=!1,o.generateMipmaps=i.generateMipmaps,o.internalFormat=i.internalFormat,this.textures=[];let s=i.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new Ta(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},ti=class extends wg{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}},nu=class extends yn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=hi,this.minFilter=hi,this.wrapR=Kr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}},Ix=class extends ti{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new nu(null,e,t,i),this.texture.isRenderTargetTexture=!0}},xf=class extends yn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=hi,this.minFilter=hi,this.wrapR=Kr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Px=class extends ti{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new xf(null,e,t,i),this.texture.isRenderTargetTexture=!0}},Yt=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,o,s,a){let l=i[r+0],c=i[r+1],d=i[r+2],u=i[r+3],h=o[s+0],f=o[s+1],m=o[s+2],_=o[s+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=d,e[t+3]=u;return}if(a===1){e[t+0]=h,e[t+1]=f,e[t+2]=m,e[t+3]=_;return}if(u!==_||l!==h||c!==f||d!==m){let g=1-a,p=l*h+c*f+d*m+u*_,b=p>=0?1:-1,v=1-p*p;if(v>Number.EPSILON){let R=Math.sqrt(v),S=Math.atan2(R,p*b);g=Math.sin(g*S)/R,a=Math.sin(a*S)/R}let y=a*b;if(l=l*g+h*y,c=c*g+f*y,d=d*g+m*y,u=u*g+_*y,g===1-a){let R=1/Math.sqrt(l*l+c*c+d*d+u*u);l*=R,c*=R,d*=R,u*=R}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=u}static multiplyQuaternionsFlat(e,t,i,r,o,s){let a=i[r],l=i[r+1],c=i[r+2],d=i[r+3],u=o[s],h=o[s+1],f=o[s+2],m=o[s+3];return e[t]=a*m+d*u+l*f-c*h,e[t+1]=l*m+d*h+c*u-a*f,e[t+2]=c*m+d*f+a*h-l*u,e[t+3]=d*m-a*u-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let i=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,c=a(i/2),d=a(r/2),u=a(o/2),h=l(i/2),f=l(r/2),m=l(o/2);switch(s){case"XYZ":this._x=h*d*u+c*f*m,this._y=c*f*u-h*d*m,this._z=c*d*m+h*f*u,this._w=c*d*u-h*f*m;break;case"YXZ":this._x=h*d*u+c*f*m,this._y=c*f*u-h*d*m,this._z=c*d*m-h*f*u,this._w=c*d*u+h*f*m;break;case"ZXY":this._x=h*d*u-c*f*m,this._y=c*f*u+h*d*m,this._z=c*d*m+h*f*u,this._w=c*d*u-h*f*m;break;case"ZYX":this._x=h*d*u-c*f*m,this._y=c*f*u+h*d*m,this._z=c*d*m-h*f*u,this._w=c*d*u+h*f*m;break;case"YZX":this._x=h*d*u+c*f*m,this._y=c*f*u+h*d*m,this._z=c*d*m-h*f*u,this._w=c*d*u-h*f*m;break;case"XZY":this._x=h*d*u-c*f*m,this._y=c*f*u-h*d*m,this._z=c*d*m+h*f*u,this._w=c*d*u+h*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],o=t[8],s=t[1],a=t[5],l=t[9],c=t[2],d=t[6],u=t[10],h=i+a+u;if(h>0){let f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(d-l)*f,this._y=(o-c)*f,this._z=(s-r)*f}else if(i>a&&i>u){let f=2*Math.sqrt(1+i-a-u);this._w=(d-l)/f,this._x=.25*f,this._y=(r+s)/f,this._z=(o+c)/f}else if(a>u){let f=2*Math.sqrt(1+a-i-u);this._w=(o-c)/f,this._x=(r+s)/f,this._y=.25*f,this._z=(l+d)/f}else{let f=2*Math.sqrt(1+u-i-a);this._w=(s-r)/f,this._x=(o+c)/f,this._y=(l+d)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Wt(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,o=e._z,s=e._w,a=t._x,l=t._y,c=t._z,d=t._w;return this._x=i*d+s*a+r*c-o*l,this._y=r*d+s*l+o*a-i*c,this._z=o*d+s*c+i*l-r*a,this._w=s*d-i*a-r*l-o*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let i=this._x,r=this._y,o=this._z,s=this._w,a=s*e._w+i*e._x+r*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;let l=1-a*a;if(l<=Number.EPSILON){let f=1-t;return this._w=f*s+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*o+t*this._z,this.normalize(),this}let c=Math.sqrt(l),d=Math.atan2(c,a),u=Math.sin((1-t)*d)/c,h=Math.sin(t*d)/c;return this._w=s*u+this._w*h,this._x=i*u+this._x*h,this._y=r*u+this._y*h,this._z=o*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},w=class n{constructor(e=0,t=0,i=0){n.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(l2.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(l2.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*r,this.y=o[1]*t+o[4]*i+o[7]*r,this.z=o[2]*t+o[5]*i+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,o=e.elements,s=1/(o[3]*t+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*t+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*t+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(e){let t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z,l=e.w,c=2*(s*r-a*i),d=2*(a*t-o*r),u=2*(o*i-s*t);return this.x=t+l*c+s*u-a*d,this.y=i+l*d+a*c-o*u,this.z=r+l*u+o*d-s*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r,this.y=o[1]*t+o[5]*i+o[9]*r,this.z=o[2]*t+o[6]*i+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Wt(this.x,e.x,t.x),this.y=Wt(this.y,e.y,t.y),this.z=Wt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Wt(this.x,e,t),this.y=Wt(this.y,e,t),this.z=Wt(this.z,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Wt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,r=e.y,o=e.z,s=t.x,a=t.y,l=t.z;return this.x=r*l-o*a,this.y=o*s-i*l,this.z=i*a-r*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return ME.copy(this).projectOnVector(e),this.sub(ME)}reflect(e){return this.sub(ME.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(Wt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},ME=new w,l2=new Yt,vn=class{constructor(e=new w(1/0,1/0,1/0),t=new w(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(js.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(js.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=js.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0){let o=i.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,js):js.fromBufferAttribute(o,s),js.applyMatrix4(e.matrixWorld),this.expandByPoint(js);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),V0.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),V0.copy(i.boundingBox)),V0.applyMatrix4(e.matrixWorld),this.union(V0)}let r=e.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,js),js.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ng),z0.subVectors(this.max,ng),Zh.subVectors(e.a,ng),Qh.subVectors(e.b,ng),Kh.subVectors(e.c,ng),fc.subVectors(Qh,Zh),pc.subVectors(Kh,Qh),Hd.subVectors(Zh,Kh);let t=[0,-fc.z,fc.y,0,-pc.z,pc.y,0,-Hd.z,Hd.y,fc.z,0,-fc.x,pc.z,0,-pc.x,Hd.z,0,-Hd.x,-fc.y,fc.x,0,-pc.y,pc.x,0,-Hd.y,Hd.x,0];return!SE(t,Zh,Qh,Kh,z0)||(t=[1,0,0,0,1,0,0,0,1],!SE(t,Zh,Qh,Kh,z0))?!1:(H0.crossVectors(fc,pc),t=[H0.x,H0.y,H0.z],SE(t,Zh,Qh,Kh,z0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,js).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(js).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(bl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),bl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),bl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),bl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),bl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),bl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),bl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),bl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(bl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},bl=[new w,new w,new w,new w,new w,new w,new w,new w],js=new w,V0=new vn,Zh=new w,Qh=new w,Kh=new w,fc=new w,pc=new w,Hd=new w,ng=new w,z0=new w,H0=new w,Gd=new w;function SE(n,e,t,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){Gd.fromArray(n,o);let a=r.x*Math.abs(Gd.x)+r.y*Math.abs(Gd.y)+r.z*Math.abs(Gd.z),l=e.dot(Gd),c=t.dot(Gd),d=i.dot(Gd);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}var ZY=new vn,rg=new w,TE=new w,Tn=class{constructor(e=new w,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):ZY.setFromPoints(e).getCenter(i);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;rg.subVectors(e,this.center);let t=rg.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(rg,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(TE.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(rg.copy(e.center).add(TE)),this.expandByPoint(rg.copy(e.center).sub(TE))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},vl=new w,RE=new w,G0=new w,mc=new w,CE=new w,W0=new w,EE=new w,zs=class{constructor(e=new w,t=new w(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,vl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=vl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(vl.copy(this.origin).addScaledVector(this.direction,t),vl.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){RE.copy(e).add(t).multiplyScalar(.5),G0.copy(t).sub(e).normalize(),mc.copy(this.origin).sub(RE);let o=e.distanceTo(t)*.5,s=-this.direction.dot(G0),a=mc.dot(this.direction),l=-mc.dot(G0),c=mc.lengthSq(),d=Math.abs(1-s*s),u,h,f,m;if(d>0)if(u=s*l-a,h=s*a-l,m=o*d,u>=0)if(h>=-m)if(h<=m){let _=1/d;u*=_,h*=_,f=u*(u+s*h+2*a)+h*(s*u+h+2*l)+c}else h=o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*l)+c;else h=-o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*l)+c;else h<=-m?(u=Math.max(0,-(-s*o+a)),h=u>0?-o:Math.min(Math.max(-o,-l),o),f=-u*u+h*(h+2*l)+c):h<=m?(u=0,h=Math.min(Math.max(-o,-l),o),f=h*(h+2*l)+c):(u=Math.max(0,-(s*o+a)),h=u>0?o:Math.min(Math.max(-o,-l),o),f=-u*u+h*(h+2*l)+c);else h=s>0?-o:o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(RE).addScaledVector(G0,h),f}intersectSphere(e,t){vl.subVectors(e.center,this.origin);let i=vl.dot(this.direction),r=vl.dot(vl)-i*i,o=e.radius*e.radius;if(r>o)return null;let s=Math.sqrt(o-r),a=i-s,l=i+s;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,o,s,a,l,c=1/this.direction.x,d=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),d>=0?(o=(e.min.y-h.y)*d,s=(e.max.y-h.y)*d):(o=(e.max.y-h.y)*d,s=(e.min.y-h.y)*d),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),u>=0?(a=(e.min.z-h.z)*u,l=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,l=(e.min.z-h.z)*u),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,vl)!==null}intersectTriangle(e,t,i,r,o){CE.subVectors(t,e),W0.subVectors(i,e),EE.crossVectors(CE,W0);let s=this.direction.dot(EE),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;mc.subVectors(this.origin,e);let l=a*this.direction.dot(W0.crossVectors(mc,W0));if(l<0)return null;let c=a*this.direction.dot(CE.cross(mc));if(c<0||l+c>s)return null;let d=-a*mc.dot(EE);return d<0?null:this.at(d/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Ie=class n{constructor(e,t,i,r,o,s,a,l,c,d,u,h,f,m,_,g){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,o,s,a,l,c,d,u,h,f,m,_,g)}set(e,t,i,r,o,s,a,l,c,d,u,h,f,m,_,g){let p=this.elements;return p[0]=e,p[4]=t,p[8]=i,p[12]=r,p[1]=o,p[5]=s,p[9]=a,p[13]=l,p[2]=c,p[6]=d,p[10]=u,p[14]=h,p[3]=f,p[7]=m,p[11]=_,p[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/Jh.setFromMatrixColumn(e,0).length(),o=1/Jh.setFromMatrixColumn(e,1).length(),s=1/Jh.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,r=e.y,o=e.z,s=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),d=Math.cos(o),u=Math.sin(o);if(e.order==="XYZ"){let h=s*d,f=s*u,m=a*d,_=a*u;t[0]=l*d,t[4]=-l*u,t[8]=c,t[1]=f+m*c,t[5]=h-_*c,t[9]=-a*l,t[2]=_-h*c,t[6]=m+f*c,t[10]=s*l}else if(e.order==="YXZ"){let h=l*d,f=l*u,m=c*d,_=c*u;t[0]=h+_*a,t[4]=m*a-f,t[8]=s*c,t[1]=s*u,t[5]=s*d,t[9]=-a,t[2]=f*a-m,t[6]=_+h*a,t[10]=s*l}else if(e.order==="ZXY"){let h=l*d,f=l*u,m=c*d,_=c*u;t[0]=h-_*a,t[4]=-s*u,t[8]=m+f*a,t[1]=f+m*a,t[5]=s*d,t[9]=_-h*a,t[2]=-s*c,t[6]=a,t[10]=s*l}else if(e.order==="ZYX"){let h=s*d,f=s*u,m=a*d,_=a*u;t[0]=l*d,t[4]=m*c-f,t[8]=h*c+_,t[1]=l*u,t[5]=_*c+h,t[9]=f*c-m,t[2]=-c,t[6]=a*l,t[10]=s*l}else if(e.order==="YZX"){let h=s*l,f=s*c,m=a*l,_=a*c;t[0]=l*d,t[4]=_-h*u,t[8]=m*u+f,t[1]=u,t[5]=s*d,t[9]=-a*d,t[2]=-c*d,t[6]=f*u+m,t[10]=h-_*u}else if(e.order==="XZY"){let h=s*l,f=s*c,m=a*l,_=a*c;t[0]=l*d,t[4]=-u,t[8]=c*d,t[1]=h*u+_,t[5]=s*d,t[9]=f*u-m,t[2]=m*u-f,t[6]=a*d,t[10]=_*u+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(QY,e,KY)}lookAt(e,t,i){let r=this.elements;return Bo.subVectors(e,t),Bo.lengthSq()===0&&(Bo.z=1),Bo.normalize(),gc.crossVectors(i,Bo),gc.lengthSq()===0&&(Math.abs(i.z)===1?Bo.x+=1e-4:Bo.z+=1e-4,Bo.normalize(),gc.crossVectors(i,Bo)),gc.normalize(),$0.crossVectors(Bo,gc),r[0]=gc.x,r[4]=$0.x,r[8]=Bo.x,r[1]=gc.y,r[5]=$0.y,r[9]=Bo.y,r[2]=gc.z,r[6]=$0.z,r[10]=Bo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[4],l=i[8],c=i[12],d=i[1],u=i[5],h=i[9],f=i[13],m=i[2],_=i[6],g=i[10],p=i[14],b=i[3],v=i[7],y=i[11],R=i[15],S=r[0],T=r[4],A=r[8],M=r[12],x=r[1],I=r[5],z=r[9],W=r[13],ee=r[2],se=r[6],N=r[10],H=r[14],L=r[3],te=r[7],Se=r[11],Pe=r[15];return o[0]=s*S+a*x+l*ee+c*L,o[4]=s*T+a*I+l*se+c*te,o[8]=s*A+a*z+l*N+c*Se,o[12]=s*M+a*W+l*H+c*Pe,o[1]=d*S+u*x+h*ee+f*L,o[5]=d*T+u*I+h*se+f*te,o[9]=d*A+u*z+h*N+f*Se,o[13]=d*M+u*W+h*H+f*Pe,o[2]=m*S+_*x+g*ee+p*L,o[6]=m*T+_*I+g*se+p*te,o[10]=m*A+_*z+g*N+p*Se,o[14]=m*M+_*W+g*H+p*Pe,o[3]=b*S+v*x+y*ee+R*L,o[7]=b*T+v*I+y*se+R*te,o[11]=b*A+v*z+y*N+R*Se,o[15]=b*M+v*W+y*H+R*Pe,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],o=e[12],s=e[1],a=e[5],l=e[9],c=e[13],d=e[2],u=e[6],h=e[10],f=e[14],m=e[3],_=e[7],g=e[11],p=e[15];return m*(+o*l*u-r*c*u-o*a*h+i*c*h+r*a*f-i*l*f)+_*(+t*l*f-t*c*h+o*s*h-r*s*f+r*c*d-o*l*d)+g*(+t*c*u-t*a*f-o*s*u+i*s*f+o*a*d-i*c*d)+p*(-r*a*d-t*l*u+t*a*h+r*s*u-i*s*h+i*l*d)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],d=e[8],u=e[9],h=e[10],f=e[11],m=e[12],_=e[13],g=e[14],p=e[15],b=u*g*c-_*h*c+_*l*f-a*g*f-u*l*p+a*h*p,v=m*h*c-d*g*c-m*l*f+s*g*f+d*l*p-s*h*p,y=d*_*c-m*u*c+m*a*f-s*_*f-d*a*p+s*u*p,R=m*u*l-d*_*l-m*a*h+s*_*h+d*a*g-s*u*g,S=t*b+i*v+r*y+o*R;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let T=1/S;return e[0]=b*T,e[1]=(_*h*o-u*g*o-_*r*f+i*g*f+u*r*p-i*h*p)*T,e[2]=(a*g*o-_*l*o+_*r*c-i*g*c-a*r*p+i*l*p)*T,e[3]=(u*l*o-a*h*o-u*r*c+i*h*c+a*r*f-i*l*f)*T,e[4]=v*T,e[5]=(d*g*o-m*h*o+m*r*f-t*g*f-d*r*p+t*h*p)*T,e[6]=(m*l*o-s*g*o-m*r*c+t*g*c+s*r*p-t*l*p)*T,e[7]=(s*h*o-d*l*o+d*r*c-t*h*c-s*r*f+t*l*f)*T,e[8]=y*T,e[9]=(m*u*o-d*_*o-m*i*f+t*_*f+d*i*p-t*u*p)*T,e[10]=(s*_*o-m*a*o+m*i*c-t*_*c-s*i*p+t*a*p)*T,e[11]=(d*a*o-s*u*o-d*i*c+t*u*c+s*i*f-t*a*f)*T,e[12]=R*T,e[13]=(d*_*r-m*u*r+m*i*h-t*_*h-d*i*g+t*u*g)*T,e[14]=(m*a*r-s*_*r-m*i*l+t*_*l+s*i*g-t*a*g)*T,e[15]=(s*u*r-d*a*r+d*i*l-t*u*l-s*i*h+t*a*h)*T,this}scale(e){let t=this.elements,i=e.x,r=e.y,o=e.z;return t[0]*=i,t[4]*=r,t[8]*=o,t[1]*=i,t[5]*=r,t[9]*=o,t[2]*=i,t[6]*=r,t[10]*=o,t[3]*=i,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),o=1-i,s=e.x,a=e.y,l=e.z,c=o*s,d=o*a;return this.set(c*s+i,c*a-r*l,c*l+r*a,0,c*a+r*l,d*a+i,d*l-r*s,0,c*l-r*a,d*l+r*s,o*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,o,s){return this.set(1,i,o,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,o=t._x,s=t._y,a=t._z,l=t._w,c=o+o,d=s+s,u=a+a,h=o*c,f=o*d,m=o*u,_=s*d,g=s*u,p=a*u,b=l*c,v=l*d,y=l*u,R=i.x,S=i.y,T=i.z;return r[0]=(1-(_+p))*R,r[1]=(f+y)*R,r[2]=(m-v)*R,r[3]=0,r[4]=(f-y)*S,r[5]=(1-(h+p))*S,r[6]=(g+b)*S,r[7]=0,r[8]=(m+v)*T,r[9]=(g-b)*T,r[10]=(1-(h+_))*T,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,o=Jh.set(r[0],r[1],r[2]).length(),s=Jh.set(r[4],r[5],r[6]).length(),a=Jh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],Ns.copy(this);let c=1/o,d=1/s,u=1/a;return Ns.elements[0]*=c,Ns.elements[1]*=c,Ns.elements[2]*=c,Ns.elements[4]*=d,Ns.elements[5]*=d,Ns.elements[6]*=d,Ns.elements[8]*=u,Ns.elements[9]*=u,Ns.elements[10]*=u,t.setFromRotationMatrix(Ns),i.x=o,i.y=s,i.z=a,this}makePerspective(e,t,i,r,o,s,a=Us){let l=this.elements,c=2*o/(t-e),d=2*o/(i-r),u=(t+e)/(t-e),h=(i+r)/(i-r),f,m;if(a===Us)f=-(s+o)/(s-o),m=-2*s*o/(s-o);else if(a===vf)f=-s/(s-o),m=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=u,l[12]=0,l[1]=0,l[5]=d,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,o,s,a=Us){let l=this.elements,c=1/(t-e),d=1/(i-r),u=1/(s-o),h=(t+e)*c,f=(i+r)*d,m,_;if(a===Us)m=(s+o)*u,_=-2*u;else if(a===vf)m=o*u,_=-1*u;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=_,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},Jh=new w,Ns=new Ie,QY=new w(0,0,0),KY=new w(1,1,1),gc=new w,$0=new w,Bo=new w,c2=new Ie,d2=new Yt,Jr=(()=>{class n{constructor(t=0,i=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,o=this._order){return this._x=t,this._y=i,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){let o=t.elements,s=o[0],a=o[4],l=o[8],c=o[1],d=o[5],u=o[9],h=o[2],f=o[6],m=o[10];switch(i){case"XYZ":this._y=Math.asin(Wt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Wt(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(l,m),this._z=Math.atan2(c,d)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Wt(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Wt(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,m),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin(Wt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,d),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(l,m));break;case"XZY":this._z=Math.asin(-Wt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,d),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return c2.makeRotationFromQuaternion(t),this.setFromRotationMatrix(c2,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return d2.setFromEuler(this),this.setFromQuaternion(d2,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),ru=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},JY=0,u2=new w,ef=new Yt,yl=new Ie,q0=new w,og=new w,e7=new w,t7=new Yt,h2=new w(1,0,0),f2=new w(0,1,0),p2=new w(0,0,1),m2={type:"added"},i7={type:"removed"},tf={type:"childadded",child:null},DE={type:"childremoved",child:null},xt=(()=>{class n extends Ho{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:JY++}),this.uuid=Vo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let t=new w,i=new Jr,r=new Yt,o=new w(1,1,1);function s(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Ie},normalMatrix:{value:new $t}}),this.matrix=new Ie,this.matrixWorld=new Ie,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ru,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return ef.setFromAxisAngle(t,i),this.quaternion.multiply(ef),this}rotateOnWorldAxis(t,i){return ef.setFromAxisAngle(t,i),this.quaternion.premultiply(ef),this}rotateX(t){return this.rotateOnAxis(h2,t)}rotateY(t){return this.rotateOnAxis(f2,t)}rotateZ(t){return this.rotateOnAxis(p2,t)}translateOnAxis(t,i){return u2.copy(t).applyQuaternion(this.quaternion),this.position.add(u2.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(h2,t)}translateY(t){return this.translateOnAxis(f2,t)}translateZ(t){return this.translateOnAxis(p2,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(yl.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?q0.copy(t):q0.set(t,i,r);let o=this.parent;this.updateWorldMatrix(!0,!1),og.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?yl.lookAt(og,q0,this.up):yl.lookAt(q0,og,this.up),this.quaternion.setFromRotationMatrix(yl),o&&(yl.extractRotation(o.matrixWorld),ef.setFromRotationMatrix(yl),this.quaternion.premultiply(ef.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(m2),tf.child=t,this.dispatchEvent(tf),tf.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(i7),DE.child=t,this.dispatchEvent(DE),DE.child=null),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),yl.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),yl.multiply(t.parent.matrixWorld)),t.applyMatrix4(yl),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(m2),tf.child=t,this.dispatchEvent(tf),tf.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,o=this.children.length;r<o;r++){let a=this.children[r].getObjectByProperty(t,i);if(a!==void 0)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(og,t,e7),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(og,t7,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverseVisible(t)}traverseAncestors(t){let i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(t){let i=t===void 0||typeof t=="string",r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.visibility=this._visibility,o.active=this._active,o.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.geometryCount=this._geometryCount,o.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(o.boundingSphere={center:o.boundingSphere.center.toArray(),radius:o.boundingSphere.radius}),this.boundingBox!==null&&(o.boundingBox={min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()}));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(t.geometries,this.geometry);let l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){let c=l.shapes;if(Array.isArray(c))for(let d=0,u=c.length;d<u;d++){let h=c[d];s(t.shapes,h)}else s(t.shapes,c)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(t.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let l=[];for(let c=0,d=this.material.length;c<d;c++)l.push(s(t.materials,this.material[c]));o.material=l}else o.material=s(t.materials,this.material);if(this.children.length>0){o.children=[];for(let l=0;l<this.children.length;l++)o.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){o.animations=[];for(let l=0;l<this.animations.length;l++){let c=this.animations[l];o.animations.push(s(t.animations,c))}}if(i){let l=a(t.geometries),c=a(t.materials),d=a(t.textures),u=a(t.images),h=a(t.shapes),f=a(t.skeletons),m=a(t.animations),_=a(t.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),d.length>0&&(r.textures=d),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),m.length>0&&(r.animations=m),_.length>0&&(r.nodes=_)}return r.object=o,r;function a(l){let c=[];for(let d in l){let u=l[d];delete u.metadata,c.push(u)}return c}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let r=0;r<t.children.length;r++){let o=t.children[r];this.add(o.clone())}return this}}return n.DEFAULT_UP=new w(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),Ls=new w,xl=new w,AE=new w,wl=new w,nf=new w,rf=new w,g2=new w,IE=new w,PE=new w,FE=new w,kE=new li,OE=new li,jE=new li,Bs=class n{constructor(e=new w,t=new w,i=new w){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Ls.subVectors(e,t),r.cross(Ls);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,i,r,o){Ls.subVectors(r,t),xl.subVectors(i,t),AE.subVectors(e,t);let s=Ls.dot(Ls),a=Ls.dot(xl),l=Ls.dot(AE),c=xl.dot(xl),d=xl.dot(AE),u=s*c-a*a;if(u===0)return o.set(0,0,0),null;let h=1/u,f=(c*l-a*d)*h,m=(s*d-a*l)*h;return o.set(1-f-m,m,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,wl)===null?!1:wl.x>=0&&wl.y>=0&&wl.x+wl.y<=1}static getInterpolation(e,t,i,r,o,s,a,l){return this.getBarycoord(e,t,i,r,wl)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,wl.x),l.addScaledVector(s,wl.y),l.addScaledVector(a,wl.z),l)}static getInterpolatedAttribute(e,t,i,r,o,s){return kE.setScalar(0),OE.setScalar(0),jE.setScalar(0),kE.fromBufferAttribute(e,t),OE.fromBufferAttribute(e,i),jE.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(kE,o.x),s.addScaledVector(OE,o.y),s.addScaledVector(jE,o.z),s}static isFrontFacing(e,t,i,r){return Ls.subVectors(i,t),xl.subVectors(e,t),Ls.cross(xl).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ls.subVectors(this.c,this.b),xl.subVectors(this.a,this.b),Ls.cross(xl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return n.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,o){return n.getInterpolation(e,this.a,this.b,this.c,t,i,r,o)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,o=this.c,s,a;nf.subVectors(r,i),rf.subVectors(o,i),IE.subVectors(e,i);let l=nf.dot(IE),c=rf.dot(IE);if(l<=0&&c<=0)return t.copy(i);PE.subVectors(e,r);let d=nf.dot(PE),u=rf.dot(PE);if(d>=0&&u<=d)return t.copy(r);let h=l*u-d*c;if(h<=0&&l>=0&&d<=0)return s=l/(l-d),t.copy(i).addScaledVector(nf,s);FE.subVectors(e,o);let f=nf.dot(FE),m=rf.dot(FE);if(m>=0&&f<=m)return t.copy(o);let _=f*c-l*m;if(_<=0&&c>=0&&m<=0)return a=c/(c-m),t.copy(i).addScaledVector(rf,a);let g=d*m-f*u;if(g<=0&&u-d>=0&&f-m>=0)return g2.subVectors(o,r),a=(u-d)/(u-d+(f-m)),t.copy(r).addScaledVector(g2,a);let p=1/(g+_+h);return s=_*p,a=h*p,t.copy(i).addScaledVector(nf,s).addScaledVector(rf,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},qB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_c={h:0,s:0,l:0},X0={h:0,s:0,l:0};function NE(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}var he=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Zi){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ui.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=ui.workingColorSpace){return this.r=e,this.g=t,this.b=i,ui.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=ui.workingColorSpace){if(e=QD(e,1),t=Wt(t,0,1),i=Wt(i,0,1),t===0)this.r=this.g=this.b=i;else{let o=i<=.5?i*(1+t):i+t-i*t,s=2*i-o;this.r=NE(s,o,e+1/3),this.g=NE(s,o,e),this.b=NE(s,o,e-1/3)}return ui.toWorkingColorSpace(this,r),this}setStyle(e,t=Zi){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Zi){let i=qB[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Tl(e.r),this.g=Tl(e.g),this.b=Tl(e.b),this}copyLinearToSRGB(e){return this.r=mf(e.r),this.g=mf(e.g),this.b=mf(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Zi){return ui.fromWorkingColorSpace(Fr.copy(this),e),Math.round(Wt(Fr.r*255,0,255))*65536+Math.round(Wt(Fr.g*255,0,255))*256+Math.round(Wt(Fr.b*255,0,255))}getHexString(e=Zi){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ui.workingColorSpace){ui.fromWorkingColorSpace(Fr.copy(this),t);let i=Fr.r,r=Fr.g,o=Fr.b,s=Math.max(i,r,o),a=Math.min(i,r,o),l,c,d=(a+s)/2;if(a===s)l=0,c=0;else{let u=s-a;switch(c=d<=.5?u/(s+a):u/(2-s-a),s){case i:l=(r-o)/u+(r<o?6:0);break;case r:l=(o-i)/u+2;break;case o:l=(i-r)/u+4;break}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,t=ui.workingColorSpace){return ui.fromWorkingColorSpace(Fr.copy(this),t),e.r=Fr.r,e.g=Fr.g,e.b=Fr.b,e}getStyle(e=Zi){ui.fromWorkingColorSpace(Fr.copy(this),e);let t=Fr.r,i=Fr.g,r=Fr.b;return e!==Zi?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(_c),this.setHSL(_c.h+e,_c.s+t,_c.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(_c),e.getHSL(X0);let i=_g(_c.h,X0.h,t),r=_g(_c.s,X0.s,t),o=_g(_c.l,X0.l,t);return this.setHSL(i,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,i=this.g,r=this.b,o=e.elements;return this.r=o[0]*t+o[3]*i+o[6]*r,this.g=o[1]*t+o[4]*i+o[7]*r,this.b=o[2]*t+o[5]*i+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Fr=new he;he.NAMES=qB;var n7=0,hn=class extends Ho{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:n7++}),this.uuid=Vo(),this.name="",this.type="Material",this.blending=us,this.side=ds,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Sc,this.blendDst=Tc,this.blendEquation=fr,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new he(0,0,0),this.blendAlpha=0,this.depthFunc=Rc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ax,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=yc,this.stencilZFail=yc,this.stencilZPass=yc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==us&&(i.blending=this.blending),this.side!==ds&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Sc&&(i.blendSrc=this.blendSrc),this.blendDst!==Tc&&(i.blendDst=this.blendDst),this.blendEquation!==fr&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Rc&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Ax&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==yc&&(i.stencilFail=this.stencilFail),this.stencilZFail!==yc&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==yc&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(o){let s=[];for(let a in o){let l=o[a];delete l.metadata,s.push(l)}return s}if(t){let o=r(e.textures),s=r(e.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}},on=class extends hn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new he(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jr,this.combine=Uf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},Sl=r7();function r7(){let n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){let c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}let o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,d=0;for(;!(c&8388608);)c<<=1,d-=8388608;c&=-8388609,d+=947912704,o[l]=c|d}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:o,exponentTable:s,offsetTable:a}}function _o(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Wt(n,-65504,65504),Sl.floatView[0]=n;let e=Sl.uint32View[0],t=e>>23&511;return Sl.baseTable[t]+((e&8388607)>>Sl.shiftTable[t])}function mg(n){let e=n>>10;return Sl.uint32View[0]=Sl.mantissaTable[Sl.offsetTable[e]+(n&1023)]+Sl.exponentTable[e],Sl.floatView[0]}var XB={toHalfFloat:_o,fromHalfFloat:mg},Hn=new w,Y0=new V,mi=class{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=bf,this.updateRanges=[],this.gpuType=nr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Y0.fromBufferAttribute(this,t),Y0.applyMatrix3(e),this.setXY(t,Y0.x,Y0.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Hn.fromBufferAttribute(this,t),Hn.applyMatrix3(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Hn.fromBufferAttribute(this,t),Hn.applyMatrix4(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Hn.fromBufferAttribute(this,t),Hn.applyNormalMatrix(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Hn.fromBufferAttribute(this,t),Hn.transformDirection(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Qr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=ei(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Qr(t,this.array)),t}setX(e,t){return this.normalized&&(t=ei(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Qr(t,this.array)),t}setY(e,t){return this.normalized&&(t=ei(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Qr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ei(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Qr(t,this.array)),t}setW(e,t){return this.normalized&&(t=ei(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=ei(t,this.array),i=ei(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=ei(t,this.array),i=ei(i,this.array),r=ei(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e*=this.itemSize,this.normalized&&(t=ei(t,this.array),i=ei(i,this.array),r=ei(r,this.array),o=ei(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==bf&&(e.usage=this.usage),e}},Fx=class extends mi{constructor(e,t,i){super(new Int8Array(e),t,i)}},kx=class extends mi{constructor(e,t,i){super(new Uint8Array(e),t,i)}},Ox=class extends mi{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}},jx=class extends mi{constructor(e,t,i){super(new Int16Array(e),t,i)}},wf=class extends mi{constructor(e,t,i){super(new Uint16Array(e),t,i)}},Nx=class extends mi{constructor(e,t,i){super(new Int32Array(e),t,i)}},Mf=class extends mi{constructor(e,t,i){super(new Uint32Array(e),t,i)}},Lx=class extends mi{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=mg(this.array[e*this.itemSize]);return this.normalized&&(t=Qr(t,this.array)),t}setX(e,t){return this.normalized&&(t=ei(t,this.array)),this.array[e*this.itemSize]=_o(t),this}getY(e){let t=mg(this.array[e*this.itemSize+1]);return this.normalized&&(t=Qr(t,this.array)),t}setY(e,t){return this.normalized&&(t=ei(t,this.array)),this.array[e*this.itemSize+1]=_o(t),this}getZ(e){let t=mg(this.array[e*this.itemSize+2]);return this.normalized&&(t=Qr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ei(t,this.array)),this.array[e*this.itemSize+2]=_o(t),this}getW(e){let t=mg(this.array[e*this.itemSize+3]);return this.normalized&&(t=Qr(t,this.array)),t}setW(e,t){return this.normalized&&(t=ei(t,this.array)),this.array[e*this.itemSize+3]=_o(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=ei(t,this.array),i=ei(i,this.array)),this.array[e+0]=_o(t),this.array[e+1]=_o(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=ei(t,this.array),i=ei(i,this.array),r=ei(r,this.array)),this.array[e+0]=_o(t),this.array[e+1]=_o(i),this.array[e+2]=_o(r),this}setXYZW(e,t,i,r,o){return e*=this.itemSize,this.normalized&&(t=ei(t,this.array),i=ei(i,this.array),r=ei(r,this.array),o=ei(o,this.array)),this.array[e+0]=_o(t),this.array[e+1]=_o(i),this.array[e+2]=_o(r),this.array[e+3]=_o(o),this}},Ne=class extends mi{constructor(e,t,i){super(new Float32Array(e),t,i)}},o7=0,cs=new Ie,LE=new xt,of=new w,Uo=new vn,sg=new vn,hr=new w,bt=class n extends Ho{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:o7++}),this.uuid=Vo(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(KD(e)?Mf:wf)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let o=new $t().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return cs.makeRotationFromQuaternion(e),this.applyMatrix4(cs),this}rotateX(e){return cs.makeRotationX(e),this.applyMatrix4(cs),this}rotateY(e){return cs.makeRotationY(e),this.applyMatrix4(cs),this}rotateZ(e){return cs.makeRotationZ(e),this.applyMatrix4(cs),this}translate(e,t,i){return cs.makeTranslation(e,t,i),this.applyMatrix4(cs),this}scale(e,t,i){return cs.makeScale(e,t,i),this.applyMatrix4(cs),this}lookAt(e){return LE.lookAt(e),LE.updateMatrix(),this.applyMatrix4(LE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(of).negate(),this.translate(of.x,of.y,of.z),this}setFromPoints(e){let t=this.getAttribute("position");if(t===void 0){let i=[];for(let r=0,o=e.length;r<o;r++){let s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Ne(i,3))}else{let i=Math.min(e.length,t.count);for(let r=0;r<i;r++){let o=e[r];t.setXYZ(r,o.x,o.y,o.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vn);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new w(-1/0,-1/0,-1/0),new w(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let o=t[i];Uo.setFromBufferAttribute(o),this.morphTargetsRelative?(hr.addVectors(this.boundingBox.min,Uo.min),this.boundingBox.expandByPoint(hr),hr.addVectors(this.boundingBox.max,Uo.max),this.boundingBox.expandByPoint(hr)):(this.boundingBox.expandByPoint(Uo.min),this.boundingBox.expandByPoint(Uo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Tn);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new w,1/0);return}if(e){let i=this.boundingSphere.center;if(Uo.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++){let a=t[o];sg.setFromBufferAttribute(a),this.morphTargetsRelative?(hr.addVectors(Uo.min,sg.min),Uo.expandByPoint(hr),hr.addVectors(Uo.max,sg.max),Uo.expandByPoint(hr)):(Uo.expandByPoint(sg.min),Uo.expandByPoint(sg.max))}Uo.getCenter(i);let r=0;for(let o=0,s=e.count;o<s;o++)hr.fromBufferAttribute(e,o),r=Math.max(r,i.distanceToSquared(hr));if(t)for(let o=0,s=t.length;o<s;o++){let a=t[o],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)hr.fromBufferAttribute(a,c),l&&(of.fromBufferAttribute(e,c),hr.add(of)),r=Math.max(r,i.distanceToSquared(hr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=t.position,r=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new mi(new Float32Array(4*i.count),4));let s=this.getAttribute("tangent"),a=[],l=[];for(let A=0;A<i.count;A++)a[A]=new w,l[A]=new w;let c=new w,d=new w,u=new w,h=new V,f=new V,m=new V,_=new w,g=new w;function p(A,M,x){c.fromBufferAttribute(i,A),d.fromBufferAttribute(i,M),u.fromBufferAttribute(i,x),h.fromBufferAttribute(o,A),f.fromBufferAttribute(o,M),m.fromBufferAttribute(o,x),d.sub(c),u.sub(c),f.sub(h),m.sub(h);let I=1/(f.x*m.y-m.x*f.y);isFinite(I)&&(_.copy(d).multiplyScalar(m.y).addScaledVector(u,-f.y).multiplyScalar(I),g.copy(u).multiplyScalar(f.x).addScaledVector(d,-m.x).multiplyScalar(I),a[A].add(_),a[M].add(_),a[x].add(_),l[A].add(g),l[M].add(g),l[x].add(g))}let b=this.groups;b.length===0&&(b=[{start:0,count:e.count}]);for(let A=0,M=b.length;A<M;++A){let x=b[A],I=x.start,z=x.count;for(let W=I,ee=I+z;W<ee;W+=3)p(e.getX(W+0),e.getX(W+1),e.getX(W+2))}let v=new w,y=new w,R=new w,S=new w;function T(A){R.fromBufferAttribute(r,A),S.copy(R);let M=a[A];v.copy(M),v.sub(R.multiplyScalar(R.dot(M))).normalize(),y.crossVectors(S,M);let I=y.dot(l[A])<0?-1:1;s.setXYZW(A,v.x,v.y,v.z,I)}for(let A=0,M=b.length;A<M;++A){let x=b[A],I=x.start,z=x.count;for(let W=I,ee=I+z;W<ee;W+=3)T(e.getX(W+0)),T(e.getX(W+1)),T(e.getX(W+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new mi(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);let r=new w,o=new w,s=new w,a=new w,l=new w,c=new w,d=new w,u=new w;if(e)for(let h=0,f=e.count;h<f;h+=3){let m=e.getX(h+0),_=e.getX(h+1),g=e.getX(h+2);r.fromBufferAttribute(t,m),o.fromBufferAttribute(t,_),s.fromBufferAttribute(t,g),d.subVectors(s,o),u.subVectors(r,o),d.cross(u),a.fromBufferAttribute(i,m),l.fromBufferAttribute(i,_),c.fromBufferAttribute(i,g),a.add(d),l.add(d),c.add(d),i.setXYZ(m,a.x,a.y,a.z),i.setXYZ(_,l.x,l.y,l.z),i.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),o.fromBufferAttribute(t,h+1),s.fromBufferAttribute(t,h+2),d.subVectors(s,o),u.subVectors(r,o),d.cross(u),i.setXYZ(h+0,d.x,d.y,d.z),i.setXYZ(h+1,d.x,d.y,d.z),i.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)hr.fromBufferAttribute(e,t),hr.normalize(),e.setXYZ(t,hr.x,hr.y,hr.z)}toNonIndexed(){function e(a,l){let c=a.array,d=a.itemSize,u=a.normalized,h=new c.constructor(l.length*d),f=0,m=0;for(let _=0,g=l.length;_<g;_++){a.isInterleavedBufferAttribute?f=l[_]*a.data.stride+a.offset:f=l[_]*d;for(let p=0;p<d;p++)h[m++]=c[f++]}return new mi(h,d,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new n,i=this.index.array,r=this.attributes;for(let a in r){let l=r[a],c=e(l,i);t.setAttribute(a,c)}let o=this.morphAttributes;for(let a in o){let l=[],c=o[a];for(let d=0,u=c.length;d<u;d++){let h=c[d],f=e(h,i);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,l=s.length;a<l;a++){let c=s[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let l=this.parameters;for(let c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let l in i){let c=i[l];e.data.attributes[l]=c.toJSON(e.data)}let r={},o=!1;for(let l in this.morphAttributes){let c=this.morphAttributes[l],d=[];for(let u=0,h=c.length;u<h;u++){let f=c[u];d.push(f.toJSON(e.data))}d.length>0&&(r[l]=d,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone(t));let r=e.attributes;for(let c in r){let d=r[c];this.setAttribute(c,d.clone(t))}let o=e.morphAttributes;for(let c in o){let d=[],u=o[c];for(let h=0,f=u.length;h<f;h++)d.push(u[h].clone(t));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let c=0,d=s.length;c<d;c++){let u=s[c];this.addGroup(u.start,u.count,u.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},_2=new Ie,Wd=new zs,Z0=new Tn,b2=new w,Q0=new w,K0=new w,J0=new w,BE=new w,ex=new w,v2=new w,tx=new w,ke=class extends xt{constructor(e=new bt,t=new on){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,t){let i=this.geometry,r=i.attributes.position,o=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(o&&a){ex.set(0,0,0);for(let l=0,c=o.length;l<c;l++){let d=a[l],u=o[l];d!==0&&(BE.fromBufferAttribute(u,e),s?ex.addScaledVector(BE,d):ex.addScaledVector(BE.sub(t),d))}t.add(ex)}return t}raycast(e,t){let i=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Z0.copy(i.boundingSphere),Z0.applyMatrix4(o),Wd.copy(e.ray).recast(e.near),!(Z0.containsPoint(Wd.origin)===!1&&(Wd.intersectSphere(Z0,b2)===null||Wd.origin.distanceToSquared(b2)>(e.far-e.near)**2))&&(_2.copy(o).invert(),Wd.copy(e.ray).applyMatrix4(_2),!(i.boundingBox!==null&&Wd.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Wd)))}_computeIntersections(e,t,i){let r,o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,c=o.attributes.uv,d=o.attributes.uv1,u=o.attributes.normal,h=o.groups,f=o.drawRange;if(a!==null)if(Array.isArray(s))for(let m=0,_=h.length;m<_;m++){let g=h[m],p=s[g.materialIndex],b=Math.max(g.start,f.start),v=Math.min(a.count,Math.min(g.start+g.count,f.start+f.count));for(let y=b,R=v;y<R;y+=3){let S=a.getX(y),T=a.getX(y+1),A=a.getX(y+2);r=ix(this,p,e,i,c,d,u,S,T,A),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=g.materialIndex,t.push(r))}}else{let m=Math.max(0,f.start),_=Math.min(a.count,f.start+f.count);for(let g=m,p=_;g<p;g+=3){let b=a.getX(g),v=a.getX(g+1),y=a.getX(g+2);r=ix(this,s,e,i,c,d,u,b,v,y),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(s))for(let m=0,_=h.length;m<_;m++){let g=h[m],p=s[g.materialIndex],b=Math.max(g.start,f.start),v=Math.min(l.count,Math.min(g.start+g.count,f.start+f.count));for(let y=b,R=v;y<R;y+=3){let S=y,T=y+1,A=y+2;r=ix(this,p,e,i,c,d,u,S,T,A),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=g.materialIndex,t.push(r))}}else{let m=Math.max(0,f.start),_=Math.min(l.count,f.start+f.count);for(let g=m,p=_;g<p;g+=3){let b=g,v=g+1,y=g+2;r=ix(this,s,e,i,c,d,u,b,v,y),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}}};function s7(n,e,t,i,r,o,s,a){let l;if(e.side===Br?l=i.intersectTriangle(s,o,r,!0,a):l=i.intersectTriangle(r,o,s,e.side===ds,a),l===null)return null;tx.copy(a),tx.applyMatrix4(n.matrixWorld);let c=t.ray.origin.distanceTo(tx);return c<t.near||c>t.far?null:{distance:c,point:tx.clone(),object:n}}function ix(n,e,t,i,r,o,s,a,l,c){n.getVertexPosition(a,Q0),n.getVertexPosition(l,K0),n.getVertexPosition(c,J0);let d=s7(n,e,t,i,Q0,K0,J0,v2);if(d){let u=new w;Bs.getBarycoord(v2,Q0,K0,J0,u),r&&(d.uv=Bs.getInterpolatedAttribute(r,a,l,c,u,new V)),o&&(d.uv1=Bs.getInterpolatedAttribute(o,a,l,c,u,new V)),s&&(d.normal=Bs.getInterpolatedAttribute(s,a,l,c,u,new w),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));let h={a,b:l,c,normal:new w,materialIndex:0};Bs.getNormal(Q0,K0,J0,h.normal),d.face=h,d.barycoord=u}return d}var Qi=class n extends bt{constructor(e=1,t=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};let a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let l=[],c=[],d=[],u=[],h=0,f=0;m("z","y","x",-1,-1,i,t,e,s,o,0),m("z","y","x",1,-1,i,t,-e,s,o,1),m("x","z","y",1,1,e,i,t,r,s,2),m("x","z","y",1,-1,e,i,-t,r,s,3),m("x","y","z",1,-1,e,t,i,r,o,4),m("x","y","z",-1,-1,e,t,-i,r,o,5),this.setIndex(l),this.setAttribute("position",new Ne(c,3)),this.setAttribute("normal",new Ne(d,3)),this.setAttribute("uv",new Ne(u,2));function m(_,g,p,b,v,y,R,S,T,A,M){let x=y/T,I=R/A,z=y/2,W=R/2,ee=S/2,se=T+1,N=A+1,H=0,L=0,te=new w;for(let Se=0;Se<N;Se++){let Pe=Se*I-W;for(let Ge=0;Ge<se;Ge++){let St=Ge*x-z;te[_]=St*b,te[g]=Pe*v,te[p]=ee,c.push(te.x,te.y,te.z),te[_]=0,te[g]=0,te[p]=S>0?1:-1,d.push(te.x,te.y,te.z),u.push(Ge/T),u.push(1-Se/A),H+=1}}for(let Se=0;Se<A;Se++)for(let Pe=0;Pe<T;Pe++){let Ge=h+Pe+se*Se,St=h+Pe+se*(Se+1),K=h+(Pe+1)+se*(Se+1),Re=h+(Pe+1)+se*Se;l.push(Ge,St,Re),l.push(St,K,Re),L+=6}a.addGroup(f,L,M),f+=L,h+=H}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Mu(n){let e={};for(let t in n){e[t]={};for(let i in n[t]){let r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Ur(n){let e={};for(let t=0;t<n.length;t++){let i=Mu(n[t]);for(let r in i)e[r]=i[r]}return e}function a7(n){let e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function e1(n){let e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:ui.workingColorSpace}var Hi={clone:Mu,merge:Ur},l7=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,c7=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Et=class extends hn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=l7,this.fragmentShader=c7,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Mu(e.uniforms),this.uniformsGroups=a7(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},Rl=class extends xt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ie,this.projectionMatrix=new Ie,this.projectionMatrixInverse=new Ie,this.coordinateSystem=Us}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},bc=new w,y2=new V,x2=new V,rn=class extends Rl{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=iu*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(tu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return iu*2*Math.atan(Math.tan(tu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){bc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(bc.x,bc.y).multiplyScalar(-e/bc.z),bc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(bc.x,bc.y).multiplyScalar(-e/bc.z)}getViewSize(e,t){return this.getViewBounds(e,y2,x2),t.subVectors(x2,y2)}setViewOffset(e,t,i,r,o,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(tu*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,o=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let l=s.fullWidth,c=s.fullHeight;o+=s.offsetX*r/l,t-=s.offsetY*i/c,r*=s.width/l,i*=s.height/c}let a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},sf=-90,af=1,Mg=class extends xt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new rn(sf,af,e,t);r.layers=this.layers,this.add(r);let o=new rn(sf,af,e,t);o.layers=this.layers,this.add(o);let s=new rn(sf,af,e,t);s.layers=this.layers,this.add(s);let a=new rn(sf,af,e,t);a.layers=this.layers,this.add(a);let l=new rn(sf,af,e,t);l.layers=this.layers,this.add(l);let c=new rn(sf,af,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[i,r,o,s,a,l]=t;for(let c of t)this.remove(c);if(e===Us)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===vf)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[o,s,a,l,c,d]=this.children,u=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;let _=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,o),e.setRenderTarget(i,1,r),e.render(t,s),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=_,e.setRenderTarget(i,5,r),e.render(t,d),e.setRenderTarget(u,h,f),e.xr.enabled=m,i.texture.needsPMREMUpdate=!0}},Ac=class extends yn{constructor(e,t,i,r,o,s,a,l,c,d){e=e!==void 0?e:[],t=t!==void 0?t:Oa,super(e,t,i,r,o,s,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},Sg=class extends ti{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Ac(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:bn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Qi(5,5,5),o=new Et({name:"CubemapFromEquirect",uniforms:Mu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Br,blending:ii});o.uniforms.tEquirect.value=t;let s=new ke(r,o),a=t.minFilter;return t.minFilter===xo&&(t.minFilter=bn),new Mg(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,i,r){let o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(o)}},Tg=class n{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new he(e),this.density=t}clone(){return new n(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}},ou=class n{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new he(e),this.near=t,this.far=i}clone(){return new n(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}},su=class extends xt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Jr,this.environmentIntensity=1,this.environmentRotation=new Jr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}},Ea=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=bf,this.updateRanges=[],this.version=0,this.uuid=Vo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Vo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Vo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Zr=new w,Hs=class n{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Zr.fromBufferAttribute(this,t),Zr.applyMatrix4(e),this.setXYZ(t,Zr.x,Zr.y,Zr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Zr.fromBufferAttribute(this,t),Zr.applyNormalMatrix(e),this.setXYZ(t,Zr.x,Zr.y,Zr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Zr.fromBufferAttribute(this,t),Zr.transformDirection(e),this.setXYZ(t,Zr.x,Zr.y,Zr.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Qr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=ei(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=ei(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ei(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ei(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ei(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Qr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Qr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Qr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Qr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ei(t,this.array),i=ei(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ei(t,this.array),i=ei(i,this.array),r=ei(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=ei(t,this.array),i=ei(i,this.array),r=ei(r,this.array),o=ei(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return new mi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new n(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},Sf=class extends hn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new he(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},lf,ag=new w,cf=new w,df=new w,uf=new V,lg=new V,YB=new Ie,nx=new w,cg=new w,rx=new w,w2=new V,UE=new V,M2=new V,Rg=class extends xt{constructor(e=new Sf){if(super(),this.isSprite=!0,this.type="Sprite",lf===void 0){lf=new bt;let t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Ea(t,5);lf.setIndex([0,1,2,0,2,3]),lf.setAttribute("position",new Hs(i,3,0,!1)),lf.setAttribute("uv",new Hs(i,2,3,!1))}this.geometry=lf,this.material=e,this.center=new V(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),cf.setFromMatrixScale(this.matrixWorld),YB.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),df.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&cf.multiplyScalar(-df.z);let i=this.material.rotation,r,o;i!==0&&(o=Math.cos(i),r=Math.sin(i));let s=this.center;ox(nx.set(-.5,-.5,0),df,s,cf,r,o),ox(cg.set(.5,-.5,0),df,s,cf,r,o),ox(rx.set(.5,.5,0),df,s,cf,r,o),w2.set(0,0),UE.set(1,0),M2.set(1,1);let a=e.ray.intersectTriangle(nx,cg,rx,!1,ag);if(a===null&&(ox(cg.set(-.5,.5,0),df,s,cf,r,o),UE.set(0,1),a=e.ray.intersectTriangle(nx,rx,cg,!1,ag),a===null))return;let l=e.ray.origin.distanceTo(ag);l<e.near||l>e.far||t.push({distance:l,point:ag.clone(),uv:Bs.getInterpolation(ag,nx,cg,rx,w2,UE,M2,new V),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}};function ox(n,e,t,i,r,o){uf.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(lg.x=o*uf.x-r*uf.y,lg.y=r*uf.x+o*uf.y):lg.copy(uf),n.copy(e),n.x+=lg.x,n.y+=lg.y,n.applyMatrix4(YB)}var sx=new w,S2=new w,Cg=class extends xt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);let t=e.levels;for(let i=0,r=t.length;i<r;i++){let o=t[i];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);let r=this.levels,o;for(o=0;o<r.length&&!(t<r[o].distance);o++);return r.splice(o,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){let t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){let r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){let t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),e<o)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){sx.setFromMatrixPosition(this.matrixWorld);let r=e.ray.origin.distanceTo(sx);this.getObjectForDistance(r).raycast(e,t)}}update(e){let t=this.levels;if(t.length>1){sx.setFromMatrixPosition(e.matrixWorld),S2.setFromMatrixPosition(this.matrixWorld);let i=sx.distanceTo(S2)/e.zoom;t[0].object.visible=!0;let r,o;for(r=1,o=t.length;r<o;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),i>=s)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<o;r++)t[r].object.visible=!1}}toJSON(e){let t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];let i=this.levels;for(let r=0,o=i.length;r<o;r++){let s=i[r];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}},T2=new w,R2=new li,C2=new li,d7=new w,E2=new Ie,ax=new w,VE=new Tn,D2=new Ie,zE=new zs,au=class extends ke{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Dx,this.bindMatrix=new Ie,this.bindMatrixInverse=new Ie,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;this.boundingBox===null&&(this.boundingBox=new vn),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,ax),this.boundingBox.expandByPoint(ax)}computeBoundingSphere(){let e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Tn),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,ax),this.boundingSphere.expandByPoint(ax)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){let i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),VE.copy(this.boundingSphere),VE.applyMatrix4(r),e.ray.intersectsSphere(VE)!==!1&&(D2.copy(r).invert(),zE.copy(e.ray).applyMatrix4(D2),!(this.boundingBox!==null&&zE.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,zE)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new li,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);let o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Dx?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===BD?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){let i=this.skeleton,r=this.geometry;R2.fromBufferAttribute(r.attributes.skinIndex,e),C2.fromBufferAttribute(r.attributes.skinWeight,e),T2.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){let s=C2.getComponent(o);if(s!==0){let a=R2.getComponent(o);E2.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(d7.copy(T2).applyMatrix4(E2),s)}}return t.applyMatrix4(this.bindMatrixInverse)}},Ic=class extends xt{constructor(){super(),this.isBone=!0,this.type="Bone"}},Mr=class extends yn{constructor(e=null,t=1,i=1,r,o,s,a,l,c=hi,d=hi,u,h){super(null,s,a,l,c,d,r,o,u,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},A2=new Ie,u7=new Ie,lu=class n{constructor(e=[],t=[]){this.uuid=Vo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Ie)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let i=new Ie;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let o=0,s=e.length;o<s;o++){let a=e[o]?e[o].matrixWorld:u7;A2.multiplyMatrices(a,t[o]),A2.toArray(i,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let i=new Mr(t,e,e,Or,nr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){let r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){let o=e.bones[i],s=t[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new Ic),this.bones.push(s),this.boneInverses.push(new Ie().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){let e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,i=this.boneInverses;for(let r=0,o=t.length;r<o;r++){let s=t[r];e.bones.push(s.uuid);let a=i[r];e.boneInverses.push(a.toArray())}return e}},fs=class extends mi{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},hf=new Ie,I2=new Ie,lx=[],P2=new vn,h7=new Ie,dg=new ke,ug=new Tn,Cl=class extends ke{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new fs(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,h7)}computeBoundingBox(){let e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new vn),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,hf),P2.copy(e.boundingBox).applyMatrix4(hf),this.boundingBox.union(P2)}computeBoundingSphere(){let e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Tn),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,hf),ug.copy(e.boundingSphere).applyMatrix4(hf),this.boundingSphere.union(ug)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){let i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,o=i.length+1,s=e*o+1;for(let a=0;a<i.length;a++)i[a]=r[s+a]}raycast(e,t){let i=this.matrixWorld,r=this.count;if(dg.geometry=this.geometry,dg.material=this.material,dg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ug.copy(this.boundingSphere),ug.applyMatrix4(i),e.ray.intersectsSphere(ug)!==!1))for(let o=0;o<r;o++){this.getMatrixAt(o,hf),I2.multiplyMatrices(i,hf),dg.matrixWorld=I2,dg.raycast(e,lx);for(let s=0,a=lx.length;s<a;s++){let l=lx[s];l.instanceId=o,l.object=this,t.push(l)}lx.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new fs(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){let i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Mr(new Float32Array(r*this.count),r,this.count,Ol,nr));let o=this.morphTexture.source.data.data,s=0;for(let c=0;c<i.length;c++)s+=i[c];let a=this.geometry.morphTargetsRelative?1:1-s,l=r*e;o[l]=a,o.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}},HE=new w,f7=new w,p7=new $t,ir=class{constructor(e=new w(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=HE.subVectors(i,t).cross(f7.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let i=e.delta(HE),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(e.start).addScaledVector(i,o)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||p7.getNormalMatrix(e),r=this.coplanarPoint(HE).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},$d=new Tn,cx=new w,Pc=class{constructor(e=new ir,t=new ir,i=new ir,r=new ir,o=new ir,s=new ir){this.planes=[e,t,i,r,o,s]}set(e,t,i,r,o,s){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Us){let i=this.planes,r=e.elements,o=r[0],s=r[1],a=r[2],l=r[3],c=r[4],d=r[5],u=r[6],h=r[7],f=r[8],m=r[9],_=r[10],g=r[11],p=r[12],b=r[13],v=r[14],y=r[15];if(i[0].setComponents(l-o,h-c,g-f,y-p).normalize(),i[1].setComponents(l+o,h+c,g+f,y+p).normalize(),i[2].setComponents(l+s,h+d,g+m,y+b).normalize(),i[3].setComponents(l-s,h-d,g-m,y-b).normalize(),i[4].setComponents(l-a,h-u,g-_,y-v).normalize(),t===Us)i[5].setComponents(l+a,h+u,g+_,y+v).normalize();else if(t===vf)i[5].setComponents(a,u,_,v).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),$d.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),$d.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere($d)}intersectsSprite(e){return $d.center.set(0,0,0),$d.radius=.7071067811865476,$d.applyMatrix4(e.matrixWorld),this.intersectsSphere($d)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(cx.x=r.normal.x>0?e.max.x:e.min.x,cx.y=r.normal.y>0?e.max.y:e.min.y,cx.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(cx)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function GE(n,e){return n-e}function m7(n,e){return n.z-e.z}function g7(n,e){return e.z-n.z}var iD=class{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){let o=this.pool,s=this.list;this.index>=o.length&&o.push({start:-1,count:-1,z:-1,index:-1});let a=o[this.index];s.push(a),this.index++,a.start=e,a.count=t,a.z=i,a.index=r}reset(){this.list.length=0,this.index=0}},go=new Ie,_7=new he(1,1,1),WE=new Pc,dx=new vn,qd=new Tn,hg=new w,F2=new w,b7=new w,$E=new iD,kr=new ke,ux=[];function v7(n,e,t=0){let i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){let r=n.count;for(let o=0;o<r;o++)for(let s=0;s<i;s++)e.setComponent(o+t,s,n.getComponent(o,s))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function Xd(n,e){if(n.constructor!==e.constructor){let t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{let t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}var Eg=class extends ke{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,i=t*2,r){super(new bt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);let t=new Float32Array(e*e*4),i=new Mr(t,e,e,Or,nr);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);let t=new Uint32Array(e*e),i=new Mr(t,e,e,Gf,ja);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);let t=new Float32Array(e*e*4).fill(1),i=new Mr(t,e,e,Or,nr);i.colorSpace=ui.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){let t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(let o in e.attributes){let s=e.getAttribute(o),{array:a,itemSize:l,normalized:c}=s,d=new a.constructor(i*l),u=new mi(d,l,c);t.setAttribute(o,u)}if(e.getIndex()!==null){let o=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new mi(o,1))}this._geometryInitialized=!0}}_validateGeometry(e){let t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(let i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);let r=e.getAttribute(i),o=t.getAttribute(i);if(r.itemSize!==o.itemSize||r.normalized!==o.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){let t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){let t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vn);let e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;let o=t[i].geometryIndex;this.getMatrixAt(i,go),this.getBoundingBoxAt(o,dx).applyMatrix4(go),e.union(dx)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Tn);let e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;let o=t[i].geometryIndex;this.getMatrixAt(i,go),this.getBoundingSphereAt(o,qd).applyMatrix4(go),e.union(qd)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");let i={visible:!0,active:!0,geometryIndex:e},r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(GE),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));let o=this._matricesTexture;go.identity().toArray(o.image.data,r*16),o.needsUpdate=!0;let s=this._colorsTexture;return s&&(_7.toArray(s.image.data,r*4),s.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);let r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},o=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;let s=e.getIndex();if(s!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?s.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(GE),l=this._availableGeometryIds.shift(),o[l]=r):(l=this._geometryCount,this._geometryCount++,o.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);let i=this.geometry,r=i.getIndex()!==null,o=i.getIndex(),s=t.getIndex(),a=this._geometryInfo[e];if(r&&s.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");let l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(let d in i.attributes){let u=t.getAttribute(d),h=i.getAttribute(d);v7(u,h,l);let f=u.itemSize;for(let m=u.count,_=c;m<_;m++){let g=l+m;for(let p=0;p<f;p++)h.setComponent(g,p,0)}h.needsUpdate=!0,h.addUpdateRange(l*f,c*f)}if(r){let d=a.indexStart,u=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let h=0;h<s.count;h++)o.setX(d+h,l+s.getX(h));for(let h=s.count,f=u;h<f;h++)o.setX(d+h,l);o.needsUpdate=!0,o.addUpdateRange(d,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){let t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;let i=this._instanceInfo;for(let r=0,o=i.length;r<o;r++)i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0,i=this._geometryInfo,r=i.map((s,a)=>a).sort((s,a)=>i[s].vertexStart-i[a].vertexStart),o=this.geometry;for(let s=0,a=i.length;s<a;s++){let l=r[s],c=i[l];if(c.active!==!1){if(o.index!==null){if(c.indexStart!==t){let{indexStart:d,vertexStart:u,reservedIndexCount:h}=c,f=o.index,m=f.array,_=e-u;for(let g=d;g<d+h;g++)m[g]=m[g]+_;f.array.copyWithin(t,d,d+h),f.addUpdateRange(t,h),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){let{vertexStart:d,reservedVertexCount:u}=c,h=o.attributes;for(let f in h){let m=h[f],{array:_,itemSize:g}=m;_.copyWithin(e*g,d*g,(d+u)*g),m.addUpdateRange(e*g,u*g)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=o.index?c.indexStart:c.vertexStart,this._nextIndexStart=o.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;let i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){let o=new vn,s=i.index,a=i.attributes.position;for(let l=r.start,c=r.start+r.count;l<c;l++){let d=l;s&&(d=s.getX(d)),o.expandByPoint(hg.fromBufferAttribute(a,d))}r.boundingBox=o}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;let i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){let o=new Tn;this.getBoundingBoxAt(e,dx),dx.getCenter(o.center);let s=i.index,a=i.attributes.position,l=0;for(let c=r.start,d=r.start+r.count;c<d;c++){let u=c;s&&(u=s.getX(u)),hg.fromBufferAttribute(a,u),l=Math.max(l,o.center.distanceToSquared(hg))}o.radius=Math.sqrt(l),r.boundingSphere=o}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);let i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);let i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){let t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(GE);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);let r=new Int32Array(e),o=new Int32Array(e);Xd(this._multiDrawCounts,r),Xd(this._multiDrawStarts,o),this._multiDrawCounts=r,this._multiDrawStarts=o,this._maxInstanceCount=e;let s=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;s.dispose(),this._initIndirectTexture(),Xd(s.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),Xd(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),Xd(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){let i=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...i.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);let o=this.geometry;o.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new bt,this._initializeGeometry(o));let s=this.geometry;o.index&&Xd(o.index.array,s.index.array);for(let a in o.attributes)Xd(o.attributes[a].array,s.attributes[a].array)}raycast(e,t){let i=this._instanceInfo,r=this._geometryInfo,o=this.matrixWorld,s=this.geometry;kr.material=this.material,kr.geometry.index=s.index,kr.geometry.attributes=s.attributes,kr.geometry.boundingBox===null&&(kr.geometry.boundingBox=new vn),kr.geometry.boundingSphere===null&&(kr.geometry.boundingSphere=new Tn);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;let c=i[a].geometryIndex,d=r[c];kr.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(a,kr.matrixWorld).premultiply(o),this.getBoundingBoxAt(c,kr.geometry.boundingBox),this.getBoundingSphereAt(c,kr.geometry.boundingSphere),kr.raycast(e,ux);for(let u=0,h=ux.length;u<h;u++){let f=ux[u];f.object=this,f.batchId=a,t.push(f)}ux.length=0}kr.material=null,kr.geometry.index=null,kr.geometry.attributes={},kr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>Ft(ce({},t),{boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>ce({},t)),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,r,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;let s=r.getIndex(),a=s===null?1:s.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,d=this._multiDrawCounts,u=this._geometryInfo,h=this.perObjectFrustumCulled,f=this._indirectTexture,m=f.image.data;h&&(go.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),WE.setFromProjectionMatrix(go,e.coordinateSystem));let _=0;if(this.sortObjects){go.copy(this.matrixWorld).invert(),hg.setFromMatrixPosition(i.matrixWorld).applyMatrix4(go),F2.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(go);for(let b=0,v=l.length;b<v;b++)if(l[b].visible&&l[b].active){let y=l[b].geometryIndex;this.getMatrixAt(b,go),this.getBoundingSphereAt(y,qd).applyMatrix4(go);let R=!1;if(h&&(R=!WE.intersectsSphere(qd)),!R){let S=u[y],T=b7.subVectors(qd.center,hg).dot(F2);$E.push(S.start,S.count,T,b)}}let g=$E.list,p=this.customSort;p===null?g.sort(o.transparent?g7:m7):p.call(this,g,i);for(let b=0,v=g.length;b<v;b++){let y=g[b];c[_]=y.start*a,d[_]=y.count,m[_]=y.index,_++}$E.reset()}else for(let g=0,p=l.length;g<p;g++)if(l[g].visible&&l[g].active){let b=l[g].geometryIndex,v=!1;if(h&&(this.getMatrixAt(g,go),this.getBoundingSphereAt(b,qd).applyMatrix4(go),v=!WE.intersectsSphere(qd)),!v){let y=u[b];c[_]=y.start*a,d[_]=y.count,m[_]=g,_++}}f.needsUpdate=!0,this._multiDrawCount=_,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,o,s){this.onBeforeRender(e,null,r,o,s)}},an=class extends hn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new he(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},Bx=new w,Ux=new w,k2=new Ie,fg=new zs,hx=new Tn,qE=new w,O2=new w,Ki=class extends xt{constructor(e=new bt,t=new an){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[0];for(let r=1,o=t.count;r<o;r++)Bx.fromBufferAttribute(t,r-1),Ux.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Bx.distanceTo(Ux);e.setAttribute("lineDistance",new Ne(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),hx.copy(i.boundingSphere),hx.applyMatrix4(r),hx.radius+=o,e.ray.intersectsSphere(hx)===!1)return;k2.copy(r).invert(),fg.copy(e.ray).applyMatrix4(k2);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,d=i.index,h=i.attributes.position;if(d!==null){let f=Math.max(0,s.start),m=Math.min(d.count,s.start+s.count);for(let _=f,g=m-1;_<g;_+=c){let p=d.getX(_),b=d.getX(_+1),v=fx(this,e,fg,l,p,b);v&&t.push(v)}if(this.isLineLoop){let _=d.getX(m-1),g=d.getX(f),p=fx(this,e,fg,l,_,g);p&&t.push(p)}}else{let f=Math.max(0,s.start),m=Math.min(h.count,s.start+s.count);for(let _=f,g=m-1;_<g;_+=c){let p=fx(this,e,fg,l,_,_+1);p&&t.push(p)}if(this.isLineLoop){let _=fx(this,e,fg,l,m-1,f);_&&t.push(_)}}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function fx(n,e,t,i,r,o){let s=n.geometry.attributes.position;if(Bx.fromBufferAttribute(s,r),Ux.fromBufferAttribute(s,o),t.distanceSqToSegment(Bx,Ux,qE,O2)>i)return;qE.applyMatrix4(n.matrixWorld);let l=e.ray.origin.distanceTo(qE);if(!(l<e.near||l>e.far))return{distance:l,point:O2.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:n}}var j2=new w,N2=new w,Sr=class extends Ki{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[];for(let r=0,o=t.count;r<o;r+=2)j2.fromBufferAttribute(t,r),N2.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+j2.distanceTo(N2);e.setAttribute("lineDistance",new Ne(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},cu=class extends Ki{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}},Fc=class extends hn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new he(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},L2=new Ie,nD=new zs,px=new Tn,mx=new w,du=class extends xt{constructor(e=new bt,t=new Fc){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),px.copy(i.boundingSphere),px.applyMatrix4(r),px.radius+=o,e.ray.intersectsSphere(px)===!1)return;L2.copy(r).invert(),nD.copy(e.ray).applyMatrix4(L2);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,u=i.attributes.position;if(c!==null){let h=Math.max(0,s.start),f=Math.min(c.count,s.start+s.count);for(let m=h,_=f;m<_;m++){let g=c.getX(m);mx.fromBufferAttribute(u,g),B2(mx,g,l,r,e,t,this)}}else{let h=Math.max(0,s.start),f=Math.min(u.count,s.start+s.count);for(let m=h,_=f;m<_;m++)mx.fromBufferAttribute(u,m),B2(mx,m,l,r,e,t,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function B2(n,e,t,i,r,o,s){let a=nD.distanceSqToPoint(n);if(a<t){let l=new w;nD.closestPointToPoint(n,l),l.applyMatrix4(i);let c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;o.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}var Tr=class extends xt{constructor(){super(),this.isGroup=!0,this.type="Group"}},Vx=class extends yn{constructor(e,t,i,r,o,s,a,l,c){super(e,t,i,r,o,s,a,l,c),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:bn,this.magFilter=o!==void 0?o:bn,this.generateMipmaps=!1;let d=this;function u(){d.needsUpdate=!0,e.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(u)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},zx=class extends yn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=hi,this.minFilter=hi,this.generateMipmaps=!1,this.needsUpdate=!0}},uu=class extends yn{constructor(e,t,i,r,o,s,a,l,c,d,u,h){super(null,s,a,l,c,d,r,o,u,h),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}},Hx=class extends uu{constructor(e,t,i,r,o,s){super(e,t,i,o,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Kr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}},Gx=class extends uu{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Oa),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}},kc=class extends yn{constructor(e,t,i,r,o,s,a,l,c){super(e,t,i,r,o,s,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}},ps=class extends yn{constructor(e,t,i,r,o,s,a,l,c,d=Mc){if(d!==Mc&&d!==hs)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===Mc&&(i=ja),i===void 0&&d===hs&&(i=_s),super(null,r,o,s,a,l,d,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:hi,this.minFilter=l!==void 0?l:hi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}},bo=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],i,r=this.getPoint(0),o=0;t.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),o+=i.distanceTo(r),t.push(o),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let i=this.getLengths(),r=0,o=i.length,s;t?s=t:s=e*i[o-1];let a=0,l=o-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-s,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===s)return r/(o-1);let d=i[r],h=i[r+1]-d,f=(s-d)/h;return(r+f)/(o-1)}getTangent(e,t){let r=e-1e-4,o=e+1e-4;r<0&&(r=0),o>1&&(o=1);let s=this.getPoint(r),a=this.getPoint(o),l=t||(s.isVector2?new V:new w);return l.copy(a).sub(s).normalize(),l}getTangentAt(e,t){let i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){let i=new w,r=[],o=[],s=[],a=new w,l=new Ie;for(let f=0;f<=e;f++){let m=f/e;r[f]=this.getTangentAt(m,new w)}o[0]=new w,s[0]=new w;let c=Number.MAX_VALUE,d=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);d<=c&&(c=d,i.set(1,0,0)),u<=c&&(c=u,i.set(0,1,0)),h<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),o[0].crossVectors(r[0],a),s[0].crossVectors(r[0],o[0]);for(let f=1;f<=e;f++){if(o[f]=o[f-1].clone(),s[f]=s[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();let m=Math.acos(Wt(r[f-1].dot(r[f]),-1,1));o[f].applyMatrix4(l.makeRotationAxis(a,m))}s[f].crossVectors(r[f],o[f])}if(t===!0){let f=Math.acos(Wt(o[0].dot(o[e]),-1,1));f/=e,r[0].dot(a.crossVectors(o[0],o[e]))>0&&(f=-f);for(let m=1;m<=e;m++)o[m].applyMatrix4(l.makeRotationAxis(r[m],f*m)),s[m].crossVectors(r[m],o[m])}return{tangents:r,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},ms=class extends bo{constructor(e=0,t=0,i=1,r=1,o=0,s=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new V){let i=t,r=Math.PI*2,o=this.aEndAngle-this.aStartAngle,s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(s?o=0:o=r),this.aClockwise===!0&&!s&&(o===r?o=-r:o=o-r);let a=this.aStartAngle+e*o,l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let d=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*d-f*u+this.aX,c=h*u+f*d+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},Dg=class extends ms{constructor(e,t,i,r,o,s){super(e,t,i,i,r,o,s),this.isArcCurve=!0,this.type="ArcCurve"}};function t1(){let n=0,e=0,t=0,i=0;function r(o,s,a,l){n=o,e=a,t=-3*o+3*s-2*a-l,i=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,c){r(s,a,c*(a-o),c*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,c,d,u){let h=(s-o)/c-(a-o)/(c+d)+(a-s)/d,f=(a-s)/d-(l-s)/(d+u)+(l-a)/u;h*=d,f*=d,r(s,a,h,f)},calc:function(o){let s=o*o,a=s*o;return n+e*o+t*s+i*a}}}var gx=new w,XE=new t1,YE=new t1,ZE=new t1,Ag=class extends bo{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new w){let i=t,r=this.points,o=r.length,s=(o-(this.closed?0:1))*e,a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:l===0&&a===o-1&&(a=o-2,l=1);let c,d;this.closed||a>0?c=r[(a-1)%o]:(gx.subVectors(r[0],r[1]).add(r[0]),c=gx);let u=r[a%o],h=r[(a+1)%o];if(this.closed||a+2<o?d=r[(a+2)%o]:(gx.subVectors(r[o-1],r[o-2]).add(r[o-1]),d=gx),this.curveType==="centripetal"||this.curveType==="chordal"){let f=this.curveType==="chordal"?.5:.25,m=Math.pow(c.distanceToSquared(u),f),_=Math.pow(u.distanceToSquared(h),f),g=Math.pow(h.distanceToSquared(d),f);_<1e-4&&(_=1),m<1e-4&&(m=_),g<1e-4&&(g=_),XE.initNonuniformCatmullRom(c.x,u.x,h.x,d.x,m,_,g),YE.initNonuniformCatmullRom(c.y,u.y,h.y,d.y,m,_,g),ZE.initNonuniformCatmullRom(c.z,u.z,h.z,d.z,m,_,g)}else this.curveType==="catmullrom"&&(XE.initCatmullRom(c.x,u.x,h.x,d.x,this.tension),YE.initCatmullRom(c.y,u.y,h.y,d.y,this.tension),ZE.initCatmullRom(c.z,u.z,h.z,d.z,this.tension));return i.set(XE.calc(l),YE.calc(l),ZE.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new w().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function U2(n,e,t,i,r){let o=(i-e)*.5,s=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+o+s)*l+(-3*t+3*i-2*o-s)*a+o*n+t}function y7(n,e){let t=1-n;return t*t*e}function x7(n,e){return 2*(1-n)*n*e}function w7(n,e){return n*n*e}function bg(n,e,t,i){return y7(n,e)+x7(n,t)+w7(n,i)}function M7(n,e){let t=1-n;return t*t*t*e}function S7(n,e){let t=1-n;return 3*t*t*n*e}function T7(n,e){return 3*(1-n)*n*n*e}function R7(n,e){return n*n*n*e}function vg(n,e,t,i,r){return M7(n,e)+S7(n,t)+T7(n,i)+R7(n,r)}var Tf=class extends bo{constructor(e=new V,t=new V,i=new V,r=new V){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new V){let i=t,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set(vg(e,r.x,o.x,s.x,a.x),vg(e,r.y,o.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Ig=class extends bo{constructor(e=new w,t=new w,i=new w,r=new w){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new w){let i=t,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set(vg(e,r.x,o.x,s.x,a.x),vg(e,r.y,o.y,s.y,a.y),vg(e,r.z,o.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Rf=class extends bo{constructor(e=new V,t=new V){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new V){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new V){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Pg=class extends bo{constructor(e=new w,t=new w){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new w){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new w){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Cf=class extends bo{constructor(e=new V,t=new V,i=new V){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new V){let i=t,r=this.v0,o=this.v1,s=this.v2;return i.set(bg(e,r.x,o.x,s.x),bg(e,r.y,o.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Ef=class extends bo{constructor(e=new w,t=new w,i=new w){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new w){let i=t,r=this.v0,o=this.v1,s=this.v2;return i.set(bg(e,r.x,o.x,s.x),bg(e,r.y,o.y,s.y),bg(e,r.z,o.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Df=class extends bo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new V){let i=t,r=this.points,o=(r.length-1)*e,s=Math.floor(o),a=o-s,l=r[s===0?s:s-1],c=r[s],d=r[s>r.length-2?r.length-1:s+1],u=r[s>r.length-3?r.length-1:s+2];return i.set(U2(a,l.x,c.x,d.x,u.x),U2(a,l.y,c.y,d.y,u.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new V().fromArray(r))}return this}},Wx=Object.freeze({__proto__:null,ArcCurve:Dg,CatmullRomCurve3:Ag,CubicBezierCurve:Tf,CubicBezierCurve3:Ig,EllipseCurve:ms,LineCurve:Rf,LineCurve3:Pg,QuadraticBezierCurve:Cf,QuadraticBezierCurve3:Ef,SplineCurve:Df}),Fg=class extends bo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){let i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Wx[i](t,e))}return this}getPoint(e,t){let i=e*this.getLength(),r=this.getCurveLengths(),o=0;for(;o<r.length;){if(r[o]>=i){let s=r[o]-i,a=this.curves[o],l=a.getLength(),c=l===0?0:1-s/l;return a.getPointAt(c,t)}o++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],i;for(let r=0,o=this.curves;r<o.length;r++){let s=o[r],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(a);for(let c=0;c<l.length;c++){let d=l[c];i&&i.equals(d)||(t.push(d),i=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(new Wx[r.type]().fromJSON(r))}return this}},Oc=class extends Fg{constructor(e){super(),this.type="Path",this.currentPoint=new V,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let i=new Rf(this.currentPoint.clone(),new V(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){let o=new Cf(this.currentPoint.clone(),new V(e,t),new V(i,r));return this.curves.push(o),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,o,s){let a=new Tf(this.currentPoint.clone(),new V(e,t),new V(i,r),new V(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),i=new Df(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,o,s){let a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,o,s),this}absarc(e,t,i,r,o,s){return this.absellipse(e,t,i,i,r,o,s),this}ellipse(e,t,i,r,o,s,a,l){let c=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+c,t+d,i,r,o,s,a,l),this}absellipse(e,t,i,r,o,s,a,l){let c=new ms(e,t,i,r,o,s,a,l);if(this.curves.length>0){let u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);let d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},Af=class n extends bt{constructor(e=[new V(0,-.5),new V(.5,0),new V(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Wt(r,0,Math.PI*2);let o=[],s=[],a=[],l=[],c=[],d=1/t,u=new w,h=new V,f=new w,m=new w,_=new w,g=0,p=0;for(let b=0;b<=e.length-1;b++)switch(b){case 0:g=e[b+1].x-e[b].x,p=e[b+1].y-e[b].y,f.x=p*1,f.y=-g,f.z=p*0,_.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case e.length-1:l.push(_.x,_.y,_.z);break;default:g=e[b+1].x-e[b].x,p=e[b+1].y-e[b].y,f.x=p*1,f.y=-g,f.z=p*0,m.copy(f),f.x+=_.x,f.y+=_.y,f.z+=_.z,f.normalize(),l.push(f.x,f.y,f.z),_.copy(m)}for(let b=0;b<=t;b++){let v=i+b*d*r,y=Math.sin(v),R=Math.cos(v);for(let S=0;S<=e.length-1;S++){u.x=e[S].x*y,u.y=e[S].y,u.z=e[S].x*R,s.push(u.x,u.y,u.z),h.x=b/t,h.y=S/(e.length-1),a.push(h.x,h.y);let T=l[3*S+0]*y,A=l[3*S+1],M=l[3*S+0]*R;c.push(T,A,M)}}for(let b=0;b<t;b++)for(let v=0;v<e.length-1;v++){let y=v+b*e.length,R=y,S=y+e.length,T=y+e.length+1,A=y+1;o.push(R,S,A),o.push(T,A,S)}this.setIndex(o),this.setAttribute("position",new Ne(s,3)),this.setAttribute("uv",new Ne(a,2)),this.setAttribute("normal",new Ne(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.points,e.segments,e.phiStart,e.phiLength)}},kg=class n extends Af{constructor(e=1,t=1,i=4,r=8){let o=new Oc;o.absarc(0,-t/2,e,Math.PI*1.5,0),o.absarc(0,t/2,e,0,Math.PI*.5),super(o.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new n(e.radius,e.length,e.capSegments,e.radialSegments)}},Og=class n extends bt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);let o=[],s=[],a=[],l=[],c=new w,d=new V;s.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let u=0,h=3;u<=t;u++,h+=3){let f=i+u/t*r;c.x=e*Math.cos(f),c.y=e*Math.sin(f),s.push(c.x,c.y,c.z),a.push(0,0,1),d.x=(s[h]/e+1)/2,d.y=(s[h+1]/e+1)/2,l.push(d.x,d.y)}for(let u=1;u<=t;u++)o.push(u,u+1,0);this.setIndex(o),this.setAttribute("position",new Ne(s,3)),this.setAttribute("normal",new Ne(a,3)),this.setAttribute("uv",new Ne(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.segments,e.thetaStart,e.thetaLength)}},Fn=class n extends bt{constructor(e=1,t=1,i=1,r=32,o=1,s=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};let c=this;r=Math.floor(r),o=Math.floor(o);let d=[],u=[],h=[],f=[],m=0,_=[],g=i/2,p=0;b(),s===!1&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(d),this.setAttribute("position",new Ne(u,3)),this.setAttribute("normal",new Ne(h,3)),this.setAttribute("uv",new Ne(f,2));function b(){let y=new w,R=new w,S=0,T=(t-e)/i;for(let A=0;A<=o;A++){let M=[],x=A/o,I=x*(t-e)+e;for(let z=0;z<=r;z++){let W=z/r,ee=W*l+a,se=Math.sin(ee),N=Math.cos(ee);R.x=I*se,R.y=-x*i+g,R.z=I*N,u.push(R.x,R.y,R.z),y.set(se,T,N).normalize(),h.push(y.x,y.y,y.z),f.push(W,1-x),M.push(m++)}_.push(M)}for(let A=0;A<r;A++)for(let M=0;M<o;M++){let x=_[M][A],I=_[M+1][A],z=_[M+1][A+1],W=_[M][A+1];(e>0||M!==0)&&(d.push(x,I,W),S+=3),(t>0||M!==o-1)&&(d.push(I,z,W),S+=3)}c.addGroup(p,S,0),p+=S}function v(y){let R=m,S=new V,T=new w,A=0,M=y===!0?e:t,x=y===!0?1:-1;for(let z=1;z<=r;z++)u.push(0,g*x,0),h.push(0,x,0),f.push(.5,.5),m++;let I=m;for(let z=0;z<=r;z++){let ee=z/r*l+a,se=Math.cos(ee),N=Math.sin(ee);T.x=M*N,T.y=g*x,T.z=M*se,u.push(T.x,T.y,T.z),h.push(0,x,0),S.x=se*.5+.5,S.y=N*.5*x+.5,f.push(S.x,S.y),m++}for(let z=0;z<r;z++){let W=R+z,ee=I+z;y===!0?d.push(ee,ee+1,W):d.push(ee+1,ee,W),A+=3}c.addGroup(p,A,y===!0?1:2),p+=A}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},jg=class n extends Fn{constructor(e=1,t=1,i=32,r=1,o=!1,s=0,a=Math.PI*2){super(0,e,t,i,r,o,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},Gs=class n extends bt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};let o=[],s=[];a(r),c(i),d(),this.setAttribute("position",new Ne(o,3)),this.setAttribute("normal",new Ne(o.slice(),3)),this.setAttribute("uv",new Ne(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(b){let v=new w,y=new w,R=new w;for(let S=0;S<t.length;S+=3)f(t[S+0],v),f(t[S+1],y),f(t[S+2],R),l(v,y,R,b)}function l(b,v,y,R){let S=R+1,T=[];for(let A=0;A<=S;A++){T[A]=[];let M=b.clone().lerp(y,A/S),x=v.clone().lerp(y,A/S),I=S-A;for(let z=0;z<=I;z++)z===0&&A===S?T[A][z]=M:T[A][z]=M.clone().lerp(x,z/I)}for(let A=0;A<S;A++)for(let M=0;M<2*(S-A)-1;M++){let x=Math.floor(M/2);M%2===0?(h(T[A][x+1]),h(T[A+1][x]),h(T[A][x])):(h(T[A][x+1]),h(T[A+1][x+1]),h(T[A+1][x]))}}function c(b){let v=new w;for(let y=0;y<o.length;y+=3)v.x=o[y+0],v.y=o[y+1],v.z=o[y+2],v.normalize().multiplyScalar(b),o[y+0]=v.x,o[y+1]=v.y,o[y+2]=v.z}function d(){let b=new w;for(let v=0;v<o.length;v+=3){b.x=o[v+0],b.y=o[v+1],b.z=o[v+2];let y=g(b)/2/Math.PI+.5,R=p(b)/Math.PI+.5;s.push(y,1-R)}m(),u()}function u(){for(let b=0;b<s.length;b+=6){let v=s[b+0],y=s[b+2],R=s[b+4],S=Math.max(v,y,R),T=Math.min(v,y,R);S>.9&&T<.1&&(v<.2&&(s[b+0]+=1),y<.2&&(s[b+2]+=1),R<.2&&(s[b+4]+=1))}}function h(b){o.push(b.x,b.y,b.z)}function f(b,v){let y=b*3;v.x=e[y+0],v.y=e[y+1],v.z=e[y+2]}function m(){let b=new w,v=new w,y=new w,R=new w,S=new V,T=new V,A=new V;for(let M=0,x=0;M<o.length;M+=9,x+=6){b.set(o[M+0],o[M+1],o[M+2]),v.set(o[M+3],o[M+4],o[M+5]),y.set(o[M+6],o[M+7],o[M+8]),S.set(s[x+0],s[x+1]),T.set(s[x+2],s[x+3]),A.set(s[x+4],s[x+5]),R.copy(b).add(v).add(y).divideScalar(3);let I=g(R);_(S,x+0,b,I),_(T,x+2,v,I),_(A,x+4,y,I)}}function _(b,v,y,R){R<0&&b.x===1&&(s[v]=b.x-1),y.x===0&&y.z===0&&(s[v]=R/2/Math.PI+.5)}function g(b){return Math.atan2(b.z,-b.x)}function p(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.vertices,e.indices,e.radius,e.details)}},Ng=class n extends Gs{constructor(e=1,t=0){let i=(1+Math.sqrt(5))/2,r=1/i,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new n(e.radius,e.detail)}},_x=new w,bx=new w,QE=new w,vx=new Bs,Lg=class extends bt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){let r=Math.pow(10,4),o=Math.cos(tu*t),s=e.getIndex(),a=e.getAttribute("position"),l=s?s.count:a.count,c=[0,0,0],d=["a","b","c"],u=new Array(3),h={},f=[];for(let m=0;m<l;m+=3){s?(c[0]=s.getX(m),c[1]=s.getX(m+1),c[2]=s.getX(m+2)):(c[0]=m,c[1]=m+1,c[2]=m+2);let{a:_,b:g,c:p}=vx;if(_.fromBufferAttribute(a,c[0]),g.fromBufferAttribute(a,c[1]),p.fromBufferAttribute(a,c[2]),vx.getNormal(QE),u[0]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,u[1]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,u[2]=`${Math.round(p.x*r)},${Math.round(p.y*r)},${Math.round(p.z*r)}`,!(u[0]===u[1]||u[1]===u[2]||u[2]===u[0]))for(let b=0;b<3;b++){let v=(b+1)%3,y=u[b],R=u[v],S=vx[d[b]],T=vx[d[v]],A=`${y}_${R}`,M=`${R}_${y}`;M in h&&h[M]?(QE.dot(h[M].normal)<=o&&(f.push(S.x,S.y,S.z),f.push(T.x,T.y,T.z)),h[M]=null):A in h||(h[A]={index0:c[b],index1:c[v],normal:QE.clone()})}}for(let m in h)if(h[m]){let{index0:_,index1:g}=h[m];_x.fromBufferAttribute(a,_),bx.fromBufferAttribute(a,g),f.push(_x.x,_x.y,_x.z),f.push(bx.x,bx.y,bx.z)}this.setAttribute("position",new Ne(f,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}},Ca=class extends Oc{constructor(e){super(e),this.uuid=Vo(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(new Oc().fromJSON(r))}return this}},C7={triangulate:function(n,e,t=2){let i=e&&e.length,r=i?e[0]*t:n.length,o=ZB(n,0,r,t,!0),s=[];if(!o||o.next===o.prev)return s;let a,l,c,d,u,h,f;if(i&&(o=P7(n,e,o,t)),n.length>80*t){a=c=n[0],l=d=n[1];for(let m=t;m<r;m+=t)u=n[m],h=n[m+1],u<a&&(a=u),h<l&&(l=h),u>c&&(c=u),h>d&&(d=h);f=Math.max(c-a,d-l),f=f!==0?32767/f:0}return Bg(o,s,t,a,l,f,0),s}};function ZB(n,e,t,i,r){let o,s;if(r===H7(n,e,t,i)>0)for(o=e;o<t;o+=i)s=V2(o,n[o],n[o+1],s);else for(o=t-i;o>=e;o-=i)s=V2(o,n[o],n[o+1],s);return s&&Vw(s,s.next)&&(Vg(s),s=s.next),s}function hu(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Vw(t,t.next)||Sn(t.prev,t,t.next)===0)){if(Vg(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Bg(n,e,t,i,r,o,s){if(!n)return;!s&&o&&N7(n,i,r,o);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,o?D7(n,i,r,o):E7(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),Vg(n),n=c.next,a=c.next;continue}if(n=c,n===a){s?s===1?(n=A7(hu(n),e,t),Bg(n,e,t,i,r,o,2)):s===2&&I7(n,e,t,i,r,o):Bg(hu(n),e,t,i,r,o,1);break}}}function E7(n){let e=n.prev,t=n,i=n.next;if(Sn(e,t,i)>=0)return!1;let r=e.x,o=t.x,s=i.x,a=e.y,l=t.y,c=i.y,d=r<o?r<s?r:s:o<s?o:s,u=a<l?a<c?a:c:l<c?l:c,h=r>o?r>s?r:s:o>s?o:s,f=a>l?a>c?a:c:l>c?l:c,m=i.next;for(;m!==e;){if(m.x>=d&&m.x<=h&&m.y>=u&&m.y<=f&&pf(r,a,o,l,s,c,m.x,m.y)&&Sn(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function D7(n,e,t,i){let r=n.prev,o=n,s=n.next;if(Sn(r,o,s)>=0)return!1;let a=r.x,l=o.x,c=s.x,d=r.y,u=o.y,h=s.y,f=a<l?a<c?a:c:l<c?l:c,m=d<u?d<h?d:h:u<h?u:h,_=a>l?a>c?a:c:l>c?l:c,g=d>u?d>h?d:h:u>h?u:h,p=rD(f,m,e,t,i),b=rD(_,g,e,t,i),v=n.prevZ,y=n.nextZ;for(;v&&v.z>=p&&y&&y.z<=b;){if(v.x>=f&&v.x<=_&&v.y>=m&&v.y<=g&&v!==r&&v!==s&&pf(a,d,l,u,c,h,v.x,v.y)&&Sn(v.prev,v,v.next)>=0||(v=v.prevZ,y.x>=f&&y.x<=_&&y.y>=m&&y.y<=g&&y!==r&&y!==s&&pf(a,d,l,u,c,h,y.x,y.y)&&Sn(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;v&&v.z>=p;){if(v.x>=f&&v.x<=_&&v.y>=m&&v.y<=g&&v!==r&&v!==s&&pf(a,d,l,u,c,h,v.x,v.y)&&Sn(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;y&&y.z<=b;){if(y.x>=f&&y.x<=_&&y.y>=m&&y.y<=g&&y!==r&&y!==s&&pf(a,d,l,u,c,h,y.x,y.y)&&Sn(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function A7(n,e,t){let i=n;do{let r=i.prev,o=i.next.next;!Vw(r,o)&&QB(r,i,i.next,o)&&Ug(r,o)&&Ug(o,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(o.i/t|0),Vg(i),Vg(i.next),i=n=o),i=i.next}while(i!==n);return hu(i)}function I7(n,e,t,i,r,o){let s=n;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&U7(s,a)){let l=KB(s,a);s=hu(s,s.next),l=hu(l,l.next),Bg(s,e,t,i,r,o,0),Bg(l,e,t,i,r,o,0);return}a=a.next}s=s.next}while(s!==n)}function P7(n,e,t,i){let r=[],o,s,a,l,c;for(o=0,s=e.length;o<s;o++)a=e[o]*i,l=o<s-1?e[o+1]*i:n.length,c=ZB(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(B7(c));for(r.sort(F7),o=0;o<r.length;o++)t=k7(r[o],t);return t}function F7(n,e){return n.x-e.x}function k7(n,e){let t=O7(n,e);if(!t)return e;let i=KB(t,n);return hu(i,i.next),hu(t,t.next)}function O7(n,e){let t=e,i=-1/0,r,o=n.x,s=n.y;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){let h=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=o&&h>i&&(i=h,r=t.x<t.next.x?t:t.next,h===o))return r}t=t.next}while(t!==e);if(!r)return null;let a=r,l=r.x,c=r.y,d=1/0,u;t=r;do o>=t.x&&t.x>=l&&o!==t.x&&pf(s<c?o:i,s,l,c,s<c?i:o,s,t.x,t.y)&&(u=Math.abs(s-t.y)/(o-t.x),Ug(t,n)&&(u<d||u===d&&(t.x>r.x||t.x===r.x&&j7(r,t)))&&(r=t,d=u)),t=t.next;while(t!==a);return r}function j7(n,e){return Sn(n.prev,n,e.prev)<0&&Sn(e.next,n,n.next)<0}function N7(n,e,t,i){let r=n;do r.z===0&&(r.z=rD(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,L7(r)}function L7(n){let e,t,i,r,o,s,a,l,c=1;do{for(t=n,n=null,o=null,s=0;t;){for(s++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:n=r,r.prevZ=o,o=r;t=i}o.nextZ=null,c*=2}while(s>1);return n}function rD(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function B7(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function pf(n,e,t,i,r,o,s,a){return(r-s)*(e-a)>=(n-s)*(o-a)&&(n-s)*(i-a)>=(t-s)*(e-a)&&(t-s)*(o-a)>=(r-s)*(i-a)}function U7(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!V7(n,e)&&(Ug(n,e)&&Ug(e,n)&&z7(n,e)&&(Sn(n.prev,n,e.prev)||Sn(n,e.prev,e))||Vw(n,e)&&Sn(n.prev,n,n.next)>0&&Sn(e.prev,e,e.next)>0)}function Sn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Vw(n,e){return n.x===e.x&&n.y===e.y}function QB(n,e,t,i){let r=xx(Sn(n,e,t)),o=xx(Sn(n,e,i)),s=xx(Sn(t,i,n)),a=xx(Sn(t,i,e));return!!(r!==o&&s!==a||r===0&&yx(n,t,e)||o===0&&yx(n,i,e)||s===0&&yx(t,n,i)||a===0&&yx(t,e,i))}function yx(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function xx(n){return n>0?1:n<0?-1:0}function V7(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&QB(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Ug(n,e){return Sn(n.prev,n,n.next)<0?Sn(n,e,n.next)>=0&&Sn(n,n.prev,e)>=0:Sn(n,e,n.prev)<0||Sn(n,n.next,e)<0}function z7(n,e){let t=n,i=!1,r=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&r<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function KB(n,e){let t=new oD(n.i,n.x,n.y),i=new oD(e.i,e.x,e.y),r=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,o.next=i,i.prev=o,i}function V2(n,e,t,i){let r=new oD(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Vg(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function oD(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function H7(n,e,t,i){let r=0;for(let o=e,s=t-i;o<t;o+=i)r+=(n[s]-n[o])*(n[o+1]+n[s+1]),s=o;return r}var Vs=class n{static area(e){let t=e.length,i=0;for(let r=t-1,o=0;o<t;r=o++)i+=e[r].x*e[o].y-e[o].x*e[r].y;return i*.5}static isClockWise(e){return n.area(e)<0}static triangulateShape(e,t){let i=[],r=[],o=[];z2(e),H2(i,e);let s=e.length;t.forEach(z2);for(let l=0;l<t.length;l++)r.push(s),s+=t[l].length,H2(i,t[l]);let a=C7.triangulate(i,r);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}};function z2(n){let e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function H2(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}var zg=class n extends bt{constructor(e=new Ca([new V(.5,.5),new V(-.5,.5),new V(-.5,-.5),new V(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let i=this,r=[],o=[];for(let a=0,l=e.length;a<l;a++){let c=e[a];s(c)}this.setAttribute("position",new Ne(r,3)),this.setAttribute("uv",new Ne(o,2)),this.computeVertexNormals();function s(a){let l=[],c=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,u=t.depth!==void 0?t.depth:1,h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:.2,m=t.bevelSize!==void 0?t.bevelSize:f-.1,_=t.bevelOffset!==void 0?t.bevelOffset:0,g=t.bevelSegments!==void 0?t.bevelSegments:3,p=t.extrudePath,b=t.UVGenerator!==void 0?t.UVGenerator:G7,v,y=!1,R,S,T,A;p&&(v=p.getSpacedPoints(d),y=!0,h=!1,R=p.computeFrenetFrames(d,!1),S=new w,T=new w,A=new w),h||(g=0,f=0,m=0,_=0);let M=a.extractPoints(c),x=M.shape,I=M.holes;if(!Vs.isClockWise(x)){x=x.reverse();for(let xe=0,Fe=I.length;xe<Fe;xe++){let F=I[xe];Vs.isClockWise(F)&&(I[xe]=F.reverse())}}let W=Vs.triangulateShape(x,I),ee=x;for(let xe=0,Fe=I.length;xe<Fe;xe++){let F=I[xe];x=x.concat(F)}function se(xe,Fe,F){return Fe||console.error("THREE.ExtrudeGeometry: vec does not exist"),xe.clone().addScaledVector(Fe,F)}let N=x.length,H=W.length;function L(xe,Fe,F){let pt,Ce,Je,Oe=xe.x-Fe.x,wt=xe.y-Fe.y,$e=F.x-xe.x,P=F.y-xe.y,C=Oe*Oe+wt*wt,X=Oe*P-wt*$e;if(Math.abs(X)>Number.EPSILON){let pe=Math.sqrt(C),Me=Math.sqrt($e*$e+P*P),ge=Fe.x-wt/pe,ut=Fe.y+Oe/pe,je=F.x-P/Me,Xe=F.y+$e/Me,Qt=((je-ge)*P-(Xe-ut)*$e)/(Oe*P-wt*$e);pt=ge+Oe*Qt-xe.x,Ce=ut+wt*Qt-xe.y;let Ee=pt*pt+Ce*Ce;if(Ee<=2)return new V(pt,Ce);Je=Math.sqrt(Ee/2)}else{let pe=!1;Oe>Number.EPSILON?$e>Number.EPSILON&&(pe=!0):Oe<-Number.EPSILON?$e<-Number.EPSILON&&(pe=!0):Math.sign(wt)===Math.sign(P)&&(pe=!0),pe?(pt=-wt,Ce=Oe,Je=Math.sqrt(C)):(pt=Oe,Ce=wt,Je=Math.sqrt(C/2))}return new V(pt/Je,Ce/Je)}let te=[];for(let xe=0,Fe=ee.length,F=Fe-1,pt=xe+1;xe<Fe;xe++,F++,pt++)F===Fe&&(F=0),pt===Fe&&(pt=0),te[xe]=L(ee[xe],ee[F],ee[pt]);let Se=[],Pe,Ge=te.concat();for(let xe=0,Fe=I.length;xe<Fe;xe++){let F=I[xe];Pe=[];for(let pt=0,Ce=F.length,Je=Ce-1,Oe=pt+1;pt<Ce;pt++,Je++,Oe++)Je===Ce&&(Je=0),Oe===Ce&&(Oe=0),Pe[pt]=L(F[pt],F[Je],F[Oe]);Se.push(Pe),Ge=Ge.concat(Pe)}for(let xe=0;xe<g;xe++){let Fe=xe/g,F=f*Math.cos(Fe*Math.PI/2),pt=m*Math.sin(Fe*Math.PI/2)+_;for(let Ce=0,Je=ee.length;Ce<Je;Ce++){let Oe=se(ee[Ce],te[Ce],pt);ve(Oe.x,Oe.y,-F)}for(let Ce=0,Je=I.length;Ce<Je;Ce++){let Oe=I[Ce];Pe=Se[Ce];for(let wt=0,$e=Oe.length;wt<$e;wt++){let P=se(Oe[wt],Pe[wt],pt);ve(P.x,P.y,-F)}}}let St=m+_;for(let xe=0;xe<N;xe++){let Fe=h?se(x[xe],Ge[xe],St):x[xe];y?(T.copy(R.normals[0]).multiplyScalar(Fe.x),S.copy(R.binormals[0]).multiplyScalar(Fe.y),A.copy(v[0]).add(T).add(S),ve(A.x,A.y,A.z)):ve(Fe.x,Fe.y,0)}for(let xe=1;xe<=d;xe++)for(let Fe=0;Fe<N;Fe++){let F=h?se(x[Fe],Ge[Fe],St):x[Fe];y?(T.copy(R.normals[xe]).multiplyScalar(F.x),S.copy(R.binormals[xe]).multiplyScalar(F.y),A.copy(v[xe]).add(T).add(S),ve(A.x,A.y,A.z)):ve(F.x,F.y,u/d*xe)}for(let xe=g-1;xe>=0;xe--){let Fe=xe/g,F=f*Math.cos(Fe*Math.PI/2),pt=m*Math.sin(Fe*Math.PI/2)+_;for(let Ce=0,Je=ee.length;Ce<Je;Ce++){let Oe=se(ee[Ce],te[Ce],pt);ve(Oe.x,Oe.y,u+F)}for(let Ce=0,Je=I.length;Ce<Je;Ce++){let Oe=I[Ce];Pe=Se[Ce];for(let wt=0,$e=Oe.length;wt<$e;wt++){let P=se(Oe[wt],Pe[wt],pt);y?ve(P.x,P.y+v[d-1].y,v[d-1].x+F):ve(P.x,P.y,u+F)}}}K(),Re();function K(){let xe=r.length/3;if(h){let Fe=0,F=N*Fe;for(let pt=0;pt<H;pt++){let Ce=W[pt];ze(Ce[2]+F,Ce[1]+F,Ce[0]+F)}Fe=d+g*2,F=N*Fe;for(let pt=0;pt<H;pt++){let Ce=W[pt];ze(Ce[0]+F,Ce[1]+F,Ce[2]+F)}}else{for(let Fe=0;Fe<H;Fe++){let F=W[Fe];ze(F[2],F[1],F[0])}for(let Fe=0;Fe<H;Fe++){let F=W[Fe];ze(F[0]+N*d,F[1]+N*d,F[2]+N*d)}}i.addGroup(xe,r.length/3-xe,0)}function Re(){let xe=r.length/3,Fe=0;We(ee,Fe),Fe+=ee.length;for(let F=0,pt=I.length;F<pt;F++){let Ce=I[F];We(Ce,Fe),Fe+=Ce.length}i.addGroup(xe,r.length/3-xe,1)}function We(xe,Fe){let F=xe.length;for(;--F>=0;){let pt=F,Ce=F-1;Ce<0&&(Ce=xe.length-1);for(let Je=0,Oe=d+g*2;Je<Oe;Je++){let wt=N*Je,$e=N*(Je+1),P=Fe+pt+wt,C=Fe+Ce+wt,X=Fe+Ce+$e,pe=Fe+pt+$e;qe(P,C,X,pe)}}}function ve(xe,Fe,F){l.push(xe),l.push(Fe),l.push(F)}function ze(xe,Fe,F){Be(xe),Be(Fe),Be(F);let pt=r.length/3,Ce=b.generateTopUV(i,r,pt-3,pt-2,pt-1);di(Ce[0]),di(Ce[1]),di(Ce[2])}function qe(xe,Fe,F,pt){Be(xe),Be(Fe),Be(pt),Be(Fe),Be(F),Be(pt);let Ce=r.length/3,Je=b.generateSideWallUV(i,r,Ce-6,Ce-3,Ce-2,Ce-1);di(Je[0]),di(Je[1]),di(Je[3]),di(Je[1]),di(Je[2]),di(Je[3])}function Be(xe){r.push(l[xe*3+0]),r.push(l[xe*3+1]),r.push(l[xe*3+2])}function di(xe){o.push(xe.x),o.push(xe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return W7(t,i,e)}static fromJSON(e,t){let i=[];for(let o=0,s=e.shapes.length;o<s;o++){let a=t[e.shapes[o]];i.push(a)}let r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Wx[r.type]().fromJSON(r)),new n(i,e.options)}},G7={generateTopUV:function(n,e,t,i,r){let o=e[t*3],s=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],d=e[r*3+1];return[new V(o,s),new V(a,l),new V(c,d)]},generateSideWallUV:function(n,e,t,i,r,o){let s=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],d=e[i*3+1],u=e[i*3+2],h=e[r*3],f=e[r*3+1],m=e[r*3+2],_=e[o*3],g=e[o*3+1],p=e[o*3+2];return Math.abs(a-d)<Math.abs(s-c)?[new V(s,1-l),new V(c,1-u),new V(h,1-m),new V(_,1-p)]:[new V(a,1-l),new V(d,1-u),new V(f,1-m),new V(g,1-p)]}};function W7(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){let o=n[i];t.shapes.push(o.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}var fu=class n extends Gs{constructor(e=1,t=0){let i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,o,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new n(e.radius,e.detail)}},Ws=class n extends Gs{constructor(e=1,t=0){let i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new n(e.radius,e.detail)}},$s=class n extends bt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let o=e/2,s=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,d=l+1,u=e/a,h=t/l,f=[],m=[],_=[],g=[];for(let p=0;p<d;p++){let b=p*h-s;for(let v=0;v<c;v++){let y=v*u-o;m.push(y,-b,0),_.push(0,0,1),g.push(v/a),g.push(1-p/l)}}for(let p=0;p<l;p++)for(let b=0;b<a;b++){let v=b+c*p,y=b+c*(p+1),R=b+1+c*(p+1),S=b+1+c*p;f.push(v,y,S),f.push(y,R,S)}this.setIndex(f),this.setAttribute("position",new Ne(m,3)),this.setAttribute("normal",new Ne(_,3)),this.setAttribute("uv",new Ne(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}},Hg=class n extends bt{constructor(e=.5,t=1,i=32,r=1,o=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:o,thetaLength:s},i=Math.max(3,i),r=Math.max(1,r);let a=[],l=[],c=[],d=[],u=e,h=(t-e)/r,f=new w,m=new V;for(let _=0;_<=r;_++){for(let g=0;g<=i;g++){let p=o+g/i*s;f.x=u*Math.cos(p),f.y=u*Math.sin(p),l.push(f.x,f.y,f.z),c.push(0,0,1),m.x=(f.x/t+1)/2,m.y=(f.y/t+1)/2,d.push(m.x,m.y)}u+=h}for(let _=0;_<r;_++){let g=_*(i+1);for(let p=0;p<i;p++){let b=p+g,v=b,y=b+i+1,R=b+i+2,S=b+1;a.push(v,y,S),a.push(y,R,S)}}this.setIndex(a),this.setAttribute("position",new Ne(l,3)),this.setAttribute("normal",new Ne(c,3)),this.setAttribute("uv",new Ne(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}},Gg=class n extends bt{constructor(e=new Ca([new V(0,.5),new V(-.5,-.5),new V(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let i=[],r=[],o=[],s=[],a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let d=0;d<e.length;d++)c(e[d]),this.addGroup(a,l,d),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Ne(r,3)),this.setAttribute("normal",new Ne(o,3)),this.setAttribute("uv",new Ne(s,2));function c(d){let u=r.length/3,h=d.extractPoints(t),f=h.shape,m=h.holes;Vs.isClockWise(f)===!1&&(f=f.reverse());for(let g=0,p=m.length;g<p;g++){let b=m[g];Vs.isClockWise(b)===!0&&(m[g]=b.reverse())}let _=Vs.triangulateShape(f,m);for(let g=0,p=m.length;g<p;g++){let b=m[g];f=f.concat(b)}for(let g=0,p=f.length;g<p;g++){let b=f[g];r.push(b.x,b.y,0),o.push(0,0,1),s.push(b.x,b.y)}for(let g=0,p=_.length;g<p;g++){let b=_[g],v=b[0]+u,y=b[1]+u,R=b[2]+u;i.push(v,y,R),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes;return $7(t,e)}static fromJSON(e,t){let i=[];for(let r=0,o=e.shapes.length;r<o;r++){let s=t[e.shapes[r]];i.push(s)}return new n(i,e.curveSegments)}};function $7(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){let r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}var Da=class n extends bt{constructor(e=1,t=32,i=16,r=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:o,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));let l=Math.min(s+a,Math.PI),c=0,d=[],u=new w,h=new w,f=[],m=[],_=[],g=[];for(let p=0;p<=i;p++){let b=[],v=p/i,y=0;p===0&&s===0?y=.5/t:p===i&&l===Math.PI&&(y=-.5/t);for(let R=0;R<=t;R++){let S=R/t;u.x=-e*Math.cos(r+S*o)*Math.sin(s+v*a),u.y=e*Math.cos(s+v*a),u.z=e*Math.sin(r+S*o)*Math.sin(s+v*a),m.push(u.x,u.y,u.z),h.copy(u).normalize(),_.push(h.x,h.y,h.z),g.push(S+y,1-v),b.push(c++)}d.push(b)}for(let p=0;p<i;p++)for(let b=0;b<t;b++){let v=d[p][b+1],y=d[p][b],R=d[p+1][b],S=d[p+1][b+1];(p!==0||s>0)&&f.push(v,y,S),(p!==i-1||l<Math.PI)&&f.push(y,R,S)}this.setIndex(f),this.setAttribute("position",new Ne(m,3)),this.setAttribute("normal",new Ne(_,3)),this.setAttribute("uv",new Ne(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},Wg=class n extends Gs{constructor(e=1,t=0){let i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new n(e.radius,e.detail)}},qs=class n extends bt{constructor(e=1,t=.4,i=12,r=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:o},i=Math.floor(i),r=Math.floor(r);let s=[],a=[],l=[],c=[],d=new w,u=new w,h=new w;for(let f=0;f<=i;f++)for(let m=0;m<=r;m++){let _=m/r*o,g=f/i*Math.PI*2;u.x=(e+t*Math.cos(g))*Math.cos(_),u.y=(e+t*Math.cos(g))*Math.sin(_),u.z=t*Math.sin(g),a.push(u.x,u.y,u.z),d.x=e*Math.cos(_),d.y=e*Math.sin(_),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(m/r),c.push(f/i)}for(let f=1;f<=i;f++)for(let m=1;m<=r;m++){let _=(r+1)*f+m-1,g=(r+1)*(f-1)+m-1,p=(r+1)*(f-1)+m,b=(r+1)*f+m;s.push(_,g,b),s.push(g,p,b)}this.setIndex(s),this.setAttribute("position",new Ne(a,3)),this.setAttribute("normal",new Ne(l,3)),this.setAttribute("uv",new Ne(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},$g=class n extends bt{constructor(e=1,t=.4,i=64,r=8,o=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:o,q:s},i=Math.floor(i),r=Math.floor(r);let a=[],l=[],c=[],d=[],u=new w,h=new w,f=new w,m=new w,_=new w,g=new w,p=new w;for(let v=0;v<=i;++v){let y=v/i*o*Math.PI*2;b(y,o,s,e,f),b(y+.01,o,s,e,m),g.subVectors(m,f),p.addVectors(m,f),_.crossVectors(g,p),p.crossVectors(_,g),_.normalize(),p.normalize();for(let R=0;R<=r;++R){let S=R/r*Math.PI*2,T=-t*Math.cos(S),A=t*Math.sin(S);u.x=f.x+(T*p.x+A*_.x),u.y=f.y+(T*p.y+A*_.y),u.z=f.z+(T*p.z+A*_.z),l.push(u.x,u.y,u.z),h.subVectors(u,f).normalize(),c.push(h.x,h.y,h.z),d.push(v/i),d.push(R/r)}}for(let v=1;v<=i;v++)for(let y=1;y<=r;y++){let R=(r+1)*(v-1)+(y-1),S=(r+1)*v+(y-1),T=(r+1)*v+y,A=(r+1)*(v-1)+y;a.push(R,S,A),a.push(S,T,A)}this.setIndex(a),this.setAttribute("position",new Ne(l,3)),this.setAttribute("normal",new Ne(c,3)),this.setAttribute("uv",new Ne(d,2));function b(v,y,R,S,T){let A=Math.cos(v),M=Math.sin(v),x=R/y*v,I=Math.cos(x);T.x=S*(2+I)*.5*A,T.y=S*(2+I)*M*.5,T.z=S*Math.sin(x)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},qg=class n extends bt{constructor(e=new Ef(new w(-1,-1,0),new w(-1,1,0),new w(1,1,0)),t=64,i=1,r=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:o};let s=e.computeFrenetFrames(t,o);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;let a=new w,l=new w,c=new V,d=new w,u=[],h=[],f=[],m=[];_(),this.setIndex(m),this.setAttribute("position",new Ne(u,3)),this.setAttribute("normal",new Ne(h,3)),this.setAttribute("uv",new Ne(f,2));function _(){for(let v=0;v<t;v++)g(v);g(o===!1?t:0),b(),p()}function g(v){d=e.getPointAt(v/t,d);let y=s.normals[v],R=s.binormals[v];for(let S=0;S<=r;S++){let T=S/r*Math.PI*2,A=Math.sin(T),M=-Math.cos(T);l.x=M*y.x+A*R.x,l.y=M*y.y+A*R.y,l.z=M*y.z+A*R.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=d.x+i*l.x,a.y=d.y+i*l.y,a.z=d.z+i*l.z,u.push(a.x,a.y,a.z)}}function p(){for(let v=1;v<=t;v++)for(let y=1;y<=r;y++){let R=(r+1)*(v-1)+(y-1),S=(r+1)*v+(y-1),T=(r+1)*v+y,A=(r+1)*(v-1)+y;m.push(R,S,A),m.push(S,T,A)}}function b(){for(let v=0;v<=t;v++)for(let y=0;y<=r;y++)c.x=v/t,c.y=y/r,f.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new n(new Wx[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}},Xg=class extends bt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){let t=[],i=new Set,r=new w,o=new w;if(e.index!==null){let s=e.attributes.position,a=e.index,l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,d=l.length;c<d;++c){let u=l[c],h=u.start,f=u.count;for(let m=h,_=h+f;m<_;m+=3)for(let g=0;g<3;g++){let p=a.getX(m+g),b=a.getX(m+(g+1)%3);r.fromBufferAttribute(s,p),o.fromBufferAttribute(s,b),G2(r,o,i)===!0&&(t.push(r.x,r.y,r.z),t.push(o.x,o.y,o.z))}}}else{let s=e.attributes.position;for(let a=0,l=s.count/3;a<l;a++)for(let c=0;c<3;c++){let d=3*a+c,u=3*a+(c+1)%3;r.fromBufferAttribute(s,d),o.fromBufferAttribute(s,u),G2(r,o,i)===!0&&(t.push(r.x,r.y,r.z),t.push(o.x,o.y,o.z))}}this.setAttribute("position",new Ne(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}};function G2(n,e,t){let i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var W2=Object.freeze({__proto__:null,BoxGeometry:Qi,CapsuleGeometry:kg,CircleGeometry:Og,ConeGeometry:jg,CylinderGeometry:Fn,DodecahedronGeometry:Ng,EdgesGeometry:Lg,ExtrudeGeometry:zg,IcosahedronGeometry:fu,LatheGeometry:Af,OctahedronGeometry:Ws,PlaneGeometry:$s,PolyhedronGeometry:Gs,RingGeometry:Hg,ShapeGeometry:Gg,SphereGeometry:Da,TetrahedronGeometry:Wg,TorusGeometry:qs,TorusKnotGeometry:$g,TubeGeometry:qg,WireframeGeometry:Xg}),Yg=class extends hn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new he(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}},Zg=class extends Et{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}},Rr=class extends hn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new he(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new he(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jl,this.normalScale=new V(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},jr=class extends Rr{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new V(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Wt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new he(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new he(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new he(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},pu=class extends hn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new he(16777215),this.specular=new he(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new he(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jl,this.normalScale=new V(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jr,this.combine=Uf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},Qg=class extends hn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new he(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new he(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jl,this.normalScale=new V(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},Xs=class extends hn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jl,this.normalScale=new V(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}},Kg=class extends hn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new he(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new he(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jl,this.normalScale=new V(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jr,this.combine=Uf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},jc=class extends hn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=zD,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},If=class extends hn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},Jg=class extends hn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new he(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jl,this.normalScale=new V(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}},e_=class extends an{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}};function eu(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function JB(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function eU(n){function e(r,o){return n[r]-n[o]}let t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function sD(n,e,t){let i=n.length,r=new n.constructor(i);for(let o=0,s=0;s!==i;++o){let a=t[o]*e;for(let l=0;l!==e;++l)r[s++]=n[a+l]}return r}function i1(n,e,t,i){let r=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[r++];if(o===void 0)return;let s=o[i];if(s!==void 0)if(Array.isArray(s))do s=o[i],s!==void 0&&(e.push(o.time),t.push.apply(t,s)),o=n[r++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[i],s!==void 0&&(e.push(o.time),s.toArray(t,t.length)),o=n[r++];while(o!==void 0);else do s=o[i],s!==void 0&&(e.push(o.time),t.push(s)),o=n[r++];while(o!==void 0)}function q7(n,e,t,i,r=30){let o=n.clone();o.name=e;let s=[];for(let l=0;l<o.tracks.length;++l){let c=o.tracks[l],d=c.getValueSize(),u=[],h=[];for(let f=0;f<c.times.length;++f){let m=c.times[f]*r;if(!(m<t||m>=i)){u.push(c.times[f]);for(let _=0;_<d;++_)h.push(c.values[f*d+_])}}u.length!==0&&(c.times=eu(u,c.times.constructor),c.values=eu(h,c.values.constructor),s.push(c))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o}function X7(n,e=0,t=n,i=30){i<=0&&(i=30);let r=t.tracks.length,o=e/i;for(let s=0;s<r;++s){let a=t.tracks[s],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;let c=n.tracks.find(function(p){return p.name===a.name&&p.ValueTypeName===l});if(c===void 0)continue;let d=0,u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=u/3);let h=0,f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);let m=a.times.length-1,_;if(o<=a.times[0]){let p=d,b=u-d;_=a.values.slice(p,b)}else if(o>=a.times[m]){let p=m*u+d,b=p+u-d;_=a.values.slice(p,b)}else{let p=a.createInterpolant(),b=d,v=u-d;p.evaluate(o),_=p.resultBuffer.slice(b,v)}l==="quaternion"&&new Yt().fromArray(_).normalize().conjugate().toArray(_);let g=c.times.length;for(let p=0;p<g;++p){let b=p*f+h;if(l==="quaternion")Yt.multiplyQuaternionsFlat(c.values,b,_,0,c.values,b);else{let v=f-h*2;for(let y=0;y<v;++y)c.values[b+y]-=_[y]}}}return n.blendMode=Nw,n}var tU={convertArray:eu,isTypedArray:JB,getKeyframeOrder:eU,sortedArray:sD,flattenJSON:i1,subclip:q7,makeClipAdditive:X7},Aa=class{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,r=t[i],o=t[i-1];e:{t:{let s;i:{n:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<o)break n;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=r,r=t[++i],e<r)break t}s=t.length;break i}if(!(e>=o)){let a=t[1];e<a&&(i=2,o=a);for(let l=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=o,o=t[--i-1],e>=o)break t}s=i,i=0;break i}break e}for(;i<s;){let a=i+s>>>1;e<t[a]?s=a:i=a+1}if(r=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r;for(let s=0;s!==r;++s)t[s]=i[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},t_=class extends Aa{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:xc,endingEnd:xc}}intervalChanged_(e,t,i){let r=this.parameterPositions,o=e-2,s=e+1,a=r[o],l=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case wc:o=e,a=2*t-i;break;case gf:o=r.length-2,a=t+r[o]-r[o+1];break;default:o=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case wc:s=e,l=2*i-t;break;case gf:s=1,l=i+r[1]-r[0];break;default:s=e-1,l=t}let c=(i-t)*.5,d=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=o*d,this._offsetNext=s*d}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,f=this._weightNext,m=(i-t)/(r-t),_=m*m,g=_*m,p=-h*g+2*h*_-h*m,b=(1+h)*g+(-1.5-2*h)*_+(-.5+h)*m+1,v=(-1-f)*g+(1.5+f)*_+.5*m,y=f*g-f*_;for(let R=0;R!==a;++R)o[R]=p*s[d+R]+b*s[c+R]+v*s[l+R]+y*s[u+R];return o}},Pf=class extends Aa{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=(i-t)/(r-t),u=1-d;for(let h=0;h!==a;++h)o[h]=s[c+h]*u+s[l+h]*d;return o}},i_=class extends Aa{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}},vo=class{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=eu(t,this.TimeBufferType),this.values=eu(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:eu(e.times,Array),values:eu(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new i_(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Pf(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new t_(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ec:t=this.InterpolantFactoryMethodDiscrete;break;case Dc:t=this.InterpolantFactoryMethodLinear;break;case gg:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ec;case this.InterpolantFactoryMethodLinear:return Dc;case this.InterpolantFactoryMethodSmooth:return gg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){let i=this.times,r=i.length,o=0,s=r-1;for(;o!==r&&i[o]<e;)++o;for(;s!==-1&&i[s]>t;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);let a=this.getValueSize();this.times=i.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,r=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){let l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(r!==void 0&&JB(r))for(let a=0,l=r.length;a!==l;++a){let c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===gg,o=e.length-1,s=1;for(let a=1;a<o;++a){let l=!1,c=e[a],d=e[a+1];if(c!==d&&(a!==1||c!==e[0]))if(r)l=!0;else{let u=a*i,h=u-i,f=u+i;for(let m=0;m!==i;++m){let _=t[u+m];if(_!==t[h+m]||_!==t[f+m]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];let u=a*i,h=s*i;for(let f=0;f!==i;++f)t[h+f]=t[u+f]}++s}}if(o>0){e[s]=e[o];for(let a=o*i,l=s*i,c=0;c!==i;++c)t[l+c]=t[a+c];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};vo.prototype.TimeBufferType=Float32Array;vo.prototype.ValueBufferType=Float32Array;vo.prototype.DefaultInterpolation=Dc;var Ia=class extends vo{constructor(e,t,i){super(e,t,i)}};Ia.prototype.ValueTypeName="bool";Ia.prototype.ValueBufferType=Array;Ia.prototype.DefaultInterpolation=Ec;Ia.prototype.InterpolantFactoryMethodLinear=void 0;Ia.prototype.InterpolantFactoryMethodSmooth=void 0;var Ff=class extends vo{};Ff.prototype.ValueTypeName="color";var Ys=class extends vo{};Ys.prototype.ValueTypeName="number";var n_=class extends Aa{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t),c=e*a;for(let d=c+a;c!==d;c+=4)Yt.slerpFlat(o,0,s,c-a,s,c,l);return o}},Zs=class extends vo{InterpolantFactoryMethodLinear(e){return new n_(this.times,this.values,this.getValueSize(),e)}};Zs.prototype.ValueTypeName="quaternion";Zs.prototype.InterpolantFactoryMethodSmooth=void 0;var Pa=class extends vo{constructor(e,t,i){super(e,t,i)}};Pa.prototype.ValueTypeName="string";Pa.prototype.ValueBufferType=Array;Pa.prototype.DefaultInterpolation=Ec;Pa.prototype.InterpolantFactoryMethodLinear=void 0;Pa.prototype.InterpolantFactoryMethodSmooth=void 0;var Qs=class extends vo{};Qs.prototype.ValueTypeName="vector";var Fa=class{constructor(e="",t=-1,i=[],r=tb){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Vo(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,a=i.length;s!==a;++s)t.push(Z7(i[s]).scale(r));let o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){let t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=i.length;o!==s;++o)t.push(vo.toJSON(i[o]));return r}static CreateFromMorphTargetSequence(e,t,i,r){let o=t.length,s=[];for(let a=0;a<o;a++){let l=[],c=[];l.push((a+o-1)%o,a,(a+1)%o),c.push(0,1,0);let d=eU(l);l=sD(l,1,d),c=sD(c,1,d),!r&&l[0]===0&&(l.push(o),c.push(c[0])),s.push(new Ys(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,s)}static findByName(e,t){let i=e;if(!Array.isArray(e)){let r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){let r={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){let c=e[a],d=c.name.match(o);if(d&&d.length>1){let u=d[1],h=r[u];h||(r[u]=h=[]),h.push(c)}}let s=[];for(let a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(u,h,f,m,_){if(f.length!==0){let g=[],p=[];i1(f,g,p,m),g.length!==0&&_.push(new u(h,g,p))}},r=[],o=e.name||"default",s=e.fps||30,a=e.blendMode,l=e.length||-1,c=e.hierarchy||[];for(let u=0;u<c.length;u++){let h=c[u].keys;if(!(!h||h.length===0))if(h[0].morphTargets){let f={},m;for(m=0;m<h.length;m++)if(h[m].morphTargets)for(let _=0;_<h[m].morphTargets.length;_++)f[h[m].morphTargets[_]]=-1;for(let _ in f){let g=[],p=[];for(let b=0;b!==h[m].morphTargets.length;++b){let v=h[m];g.push(v.time),p.push(v.morphTarget===_?1:0)}r.push(new Ys(".morphTargetInfluence["+_+"]",g,p))}l=f.length*s}else{let f=".bones["+t[u].name+"]";i(Qs,f+".position",h,"pos",r),i(Zs,f+".quaternion",h,"rot",r),i(Qs,f+".scale",h,"scl",r)}}return r.length===0?null:new this(o,l,r,a)}resetDuration(){let e=this.tracks,t=0;for(let i=0,r=e.length;i!==r;++i){let o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function Y7(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ys;case"vector":case"vector2":case"vector3":case"vector4":return Qs;case"color":return Ff;case"quaternion":return Zs;case"bool":case"boolean":return Ia;case"string":return Pa}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Z7(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=Y7(n.type);if(n.times===void 0){let t=[],i=[];i1(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}var Ra={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},kf=class{constructor(e,t,i){let r=this,o=!1,s=0,a=0,l,c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){a++,o===!1&&r.onStart!==void 0&&r.onStart(d,s,a),o=!0},this.itemEnd=function(d){s++,r.onProgress!==void 0&&r.onProgress(d,s,a),s===a&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,u){return c.push(d,u),this},this.removeHandler=function(d){let u=c.indexOf(d);return u!==-1&&c.splice(u,2),this},this.getHandler=function(d){for(let u=0,h=c.length;u<h;u+=2){let f=c[u],m=c[u+1];if(f.global&&(f.lastIndex=0),f.test(d))return m}return null}}},n1=new kf,qn=(()=>{class n{constructor(t){this.manager=t!==void 0?t:n1,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){let r=this;return new Promise(function(o,s){r.load(t,o,i,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})(),Ml={},aD=class extends Error{constructor(e,t){super(e),this.response=t}},Wn=class extends qn{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=Ra.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(Ml[e]!==void 0){Ml[e].push({onLoad:t,onProgress:i,onError:r});return}Ml[e]=[],Ml[e].push({onLoad:t,onProgress:i,onError:r});let s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;let d=Ml[e],u=c.body.getReader(),h=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),f=h?parseInt(h):0,m=f!==0,_=0,g=new ReadableStream({start(p){b();function b(){u.read().then(({done:v,value:y})=>{if(v)p.close();else{_+=y.byteLength;let R=new ProgressEvent("progress",{lengthComputable:m,loaded:_,total:f});for(let S=0,T=d.length;S<T;S++){let A=d[S];A.onProgress&&A.onProgress(R)}p.enqueue(y),b()}},v=>{p.error(v)})}}});return new Response(g)}else throw new aD(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return c.json();default:if(a===void 0)return c.text();{let u=/charset="?([^;"\s]*)"?/i.exec(a),h=u&&u[1]?u[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(m=>f.decode(m))}}}).then(c=>{Ra.add(e,c);let d=Ml[e];delete Ml[e];for(let u=0,h=d.length;u<h;u++){let f=d[u];f.onLoad&&f.onLoad(c)}}).catch(c=>{let d=Ml[e];if(d===void 0)throw this.manager.itemError(e),c;delete Ml[e];for(let u=0,h=d.length;u<h;u++){let f=d[u];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},$x=class extends qn{constructor(e){super(e)}load(e,t,i,r){let o=this,s=new Wn(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{t(o.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),o.manager.itemError(e)}},i,r)}parse(e){let t=[];for(let i=0;i<e.length;i++){let r=Fa.parse(e[i]);t.push(r)}return t}},qx=class extends qn{constructor(e){super(e)}load(e,t,i,r){let o=this,s=[],a=new uu,l=new Wn(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(o.withCredentials);let c=0;function d(u){l.load(e[u],function(h){let f=o.parse(h,!0);s[u]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},c+=1,c===6&&(f.mipmapCount===1&&(a.minFilter=bn),a.image=s,a.format=f.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let u=0,h=e.length;u<h;++u)d(u);else l.load(e,function(u){let h=o.parse(u,!0);if(h.isCubemap){let f=h.mipmaps.length/h.mipmapCount;for(let m=0;m<f;m++){s[m]={mipmaps:[]};for(let _=0;_<h.mipmapCount;_++)s[m].mipmaps.push(h.mipmaps[m*h.mipmapCount+_]),s[m].format=h.format,s[m].width=h.width,s[m].height=h.height}a.image=s}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=bn),a.format=h.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}},Nc=class extends qn{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=Ra.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;let a=yf("img");function l(){d(),Ra.add(e,this),t&&t(this),o.manager.itemEnd(e)}function c(u){d(),r&&r(u),o.manager.itemError(e),o.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}},Xx=class extends qn{constructor(e){super(e)}load(e,t,i,r){let o=new Ac;o.colorSpace=Zi;let s=new Nc(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function l(c){s.load(e[c],function(d){o.images[c]=d,a++,a===6&&(o.needsUpdate=!0,t&&t(o))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return o}},Yx=class extends qn{constructor(e){super(e)}load(e,t,i,r){let o=this,s=new Mr,a=new Wn(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(o.withCredentials),a.load(e,function(l){let c;try{c=o.parse(l)}catch(d){if(r!==void 0)r(d);else{console.error(d);return}}c.image!==void 0?s.image=c.image:c.data!==void 0&&(s.image.width=c.width,s.image.height=c.height,s.image.data=c.data),s.wrapS=c.wrapS!==void 0?c.wrapS:Kr,s.wrapT=c.wrapT!==void 0?c.wrapT:Kr,s.magFilter=c.magFilter!==void 0?c.magFilter:bn,s.minFilter=c.minFilter!==void 0?c.minFilter:bn,s.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(s.colorSpace=c.colorSpace),c.flipY!==void 0&&(s.flipY=c.flipY),c.format!==void 0&&(s.format=c.format),c.type!==void 0&&(s.type=c.type),c.mipmaps!==void 0&&(s.mipmaps=c.mipmaps,s.minFilter=xo),c.mipmapCount===1&&(s.minFilter=bn),c.generateMipmaps!==void 0&&(s.generateMipmaps=c.generateMipmaps),s.needsUpdate=!0,t&&t(s,c)},i,r),s}},Of=class extends qn{constructor(e){super(e)}load(e,t,i,r){let o=new yn,s=new Nc(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,t!==void 0&&t(o)},i,r),o}},Ks=class extends xt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new he(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}},mu=class extends Ks{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(xt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new he(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},KE=new Ie,$2=new w,q2=new w,r_=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new V(512,512),this.map=null,this.mapPass=null,this.matrix=new Ie,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Pc,this._frameExtents=new V(1,1),this._viewportCount=1,this._viewports=[new li(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;$2.setFromMatrixPosition(e.matrixWorld),t.position.copy($2),q2.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(q2),t.updateMatrixWorld(),KE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(KE),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(KE)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},lD=class extends r_{constructor(){super(new rn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,i=iu*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||r!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=r,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},gu=class extends Ks{constructor(e,t,i=0,r=Math.PI/3,o=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(xt.DEFAULT_UP),this.updateMatrix(),this.target=new xt,this.distance=i,this.angle=r,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new lD}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},X2=new Ie,pg=new w,JE=new w,cD=class extends r_{constructor(){super(new rn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new V(4,2),this._viewportCount=6,this._viewports=[new li(2,1,1,1),new li(0,1,1,1),new li(3,1,1,1),new li(1,1,1,1),new li(3,0,1,1),new li(1,0,1,1)],this._cubeDirections=[new w(1,0,0),new w(-1,0,0),new w(0,0,1),new w(0,0,-1),new w(0,1,0),new w(0,-1,0)],this._cubeUps=[new w(0,1,0),new w(0,1,0),new w(0,1,0),new w(0,1,0),new w(0,0,1),new w(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,r=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),pg.setFromMatrixPosition(e.matrixWorld),i.position.copy(pg),JE.copy(i.position),JE.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(JE),i.updateMatrixWorld(),r.makeTranslation(-pg.x,-pg.y,-pg.z),X2.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(X2)}},El=class extends Ks{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new cD}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},yo=class extends Rl{constructor(e=-1,t=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=i-e,s=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){let c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=c*this.view.offsetX,s=o+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},dD=class extends r_{constructor(){super(new yo(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Dl=class extends Ks{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(xt.DEFAULT_UP),this.updateMatrix(),this.target=new xt,this.shadow=new dD}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},_u=class extends Ks{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}},o_=class extends Ks{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){let t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}},s_=class{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new w)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){let i=e.x,r=e.y,o=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*o),t.addScaledVector(s[3],.488603*i),t.addScaledVector(s[4],1.092548*(i*r)),t.addScaledVector(s[5],1.092548*(r*o)),t.addScaledVector(s[6],.315392*(3*o*o-1)),t.addScaledVector(s[7],1.092548*(i*o)),t.addScaledVector(s[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){let i=e.x,r=e.y,o=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*r),t.addScaledVector(s[2],2*.511664*o),t.addScaledVector(s[3],2*.511664*i),t.addScaledVector(s[4],2*.429043*i*r),t.addScaledVector(s[5],2*.429043*r*o),t.addScaledVector(s[6],.743125*o*o-.247708),t.addScaledVector(s[7],2*.429043*i*o),t.addScaledVector(s[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){let i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){let i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){let i=e.x,r=e.y,o=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*o,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*i*o,t[8]=.546274*(i*i-r*r)}},a_=class extends Ks{constructor(e=new s_,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){let t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}},l_=class n extends qn{constructor(e){super(e),this.textures={}}load(e,t,i,r){let o=this,s=new Wn(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{t(o.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),o.manager.itemError(e)}},i,r)}parse(e){let t=this.textures;function i(o){return t[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),t[o]}let r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new he().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(let o in e.uniforms){let s=e.uniforms[o];switch(r.uniforms[o]={},s.type){case"t":r.uniforms[o].value=i(s.value);break;case"c":r.uniforms[o].value=new he().setHex(s.value);break;case"v2":r.uniforms[o].value=new V().fromArray(s.value);break;case"v3":r.uniforms[o].value=new w().fromArray(s.value);break;case"v4":r.uniforms[o].value=new li().fromArray(s.value);break;case"m3":r.uniforms[o].value=new $t().fromArray(s.value);break;case"m4":r.uniforms[o].value=new Ie().fromArray(s.value);break;default:r.uniforms[o].value=s.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(let o in e.extensions)r.extensions[o]=e.extensions[o];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),r.normalScale=new V().fromArray(o)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new V().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return n.createMaterialFromType(e)}static createMaterialFromType(e){let t={ShadowMaterial:Yg,SpriteMaterial:Sf,RawShaderMaterial:Zg,ShaderMaterial:Et,PointsMaterial:Fc,MeshPhysicalMaterial:jr,MeshStandardMaterial:Rr,MeshPhongMaterial:pu,MeshToonMaterial:Qg,MeshNormalMaterial:Xs,MeshLambertMaterial:Kg,MeshDepthMaterial:jc,MeshDistanceMaterial:If,MeshBasicMaterial:on,MeshMatcapMaterial:Jg,LineDashedMaterial:e_,LineBasicMaterial:an,Material:hn};return new t[e]}},gs=class{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){let t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}},c_=class extends bt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},d_=class extends qn{constructor(e){super(e)}load(e,t,i,r){let o=this,s=new Wn(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{t(o.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),o.manager.itemError(e)}},i,r)}parse(e){let t={},i={};function r(f,m){if(t[m]!==void 0)return t[m];let g=f.interleavedBuffers[m],p=o(f,g.buffer),b=ff(g.type,p),v=new Ea(b,g.stride);return v.uuid=g.uuid,t[m]=v,v}function o(f,m){if(i[m]!==void 0)return i[m];let g=f.arrayBuffers[m],p=new Uint32Array(g).buffer;return i[m]=p,p}let s=e.isInstancedBufferGeometry?new c_:new bt,a=e.data.index;if(a!==void 0){let f=ff(a.type,a.array);s.setIndex(new mi(f,1))}let l=e.data.attributes;for(let f in l){let m=l[f],_;if(m.isInterleavedBufferAttribute){let g=r(e.data,m.data);_=new Hs(g,m.itemSize,m.offset,m.normalized)}else{let g=ff(m.type,m.array),p=m.isInstancedBufferAttribute?fs:mi;_=new p(g,m.itemSize,m.normalized)}m.name!==void 0&&(_.name=m.name),m.usage!==void 0&&_.setUsage(m.usage),s.setAttribute(f,_)}let c=e.data.morphAttributes;if(c)for(let f in c){let m=c[f],_=[];for(let g=0,p=m.length;g<p;g++){let b=m[g],v;if(b.isInterleavedBufferAttribute){let y=r(e.data,b.data);v=new Hs(y,b.itemSize,b.offset,b.normalized)}else{let y=ff(b.type,b.array);v=new mi(y,b.itemSize,b.normalized)}b.name!==void 0&&(v.name=b.name),_.push(v)}s.morphAttributes[f]=_}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);let u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let f=0,m=u.length;f!==m;++f){let _=u[f];s.addGroup(_.start,_.count,_.materialIndex)}let h=e.data.boundingSphere;if(h!==void 0){let f=new w;h.center!==void 0&&f.fromArray(h.center),s.boundingSphere=new Tn(f,h.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}},Zx=class extends qn{constructor(e){super(e)}load(e,t,i,r){let o=this,s=this.path===""?gs.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;let a=new Wn(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(u){r!==void 0&&r(u),console.error("THREE:ObjectLoader: Can't parse "+e+".",u.message);return}let d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(c,t)},i,r)}loadAsync(e,t){return xi(this,null,function*(){let i=this,r=this.path===""?gs.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;let o=new Wn(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);let s=yield o.loadAsync(e,t),a=JSON.parse(s),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return yield i.parseAsync(a)})}parse(e,t){let i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,o,l,a,i),d=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,d),this.bindLightTargets(c),t!==void 0){let u=!1;for(let h in s)if(s[h].data instanceof HTMLImageElement){u=!0;break}u===!1&&t(c)}return c}parseAsync(e){return xi(this,null,function*(){let t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),o=yield this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,o),a=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,r,a,s,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l})}parseShapes(e){let t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){let o=new Ca().fromJSON(e[i]);t[o.uuid]=o}return t}parseSkeletons(e,t){let i={},r={};if(t.traverse(function(o){o.isBone&&(r[o.uuid]=o)}),e!==void 0)for(let o=0,s=e.length;o<s;o++){let a=new lu().fromJSON(e[o],r);i[a.uuid]=a}return i}parseGeometries(e,t){let i={};if(e!==void 0){let r=new d_;for(let o=0,s=e.length;o<s;o++){let a,l=e[o];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in W2?a=W2[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){let i={},r={};if(e!==void 0){let o=new l_;o.setTextures(t);for(let s=0,a=e.length;s<a;s++){let l=e[s];i[l.uuid]===void 0&&(i[l.uuid]=o.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){let t={};if(e!==void 0)for(let i=0;i<e.length;i++){let r=e[i],o=Fa.parse(r);t[o.uuid]=o}return t}parseImages(e,t){let i=this,r={},o;function s(l){return i.manager.itemStart(l),o.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){let c=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return s(d)}else return l.data?{data:ff(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){let l=new kf(t);o=new Nc(l),o.setCrossOrigin(this.crossOrigin);for(let c=0,d=e.length;c<d;c++){let u=e[c],h=u.url;if(Array.isArray(h)){let f=[];for(let m=0,_=h.length;m<_;m++){let g=h[m],p=a(g);p!==null&&(p instanceof HTMLImageElement?f.push(p):f.push(new Mr(p.data,p.width,p.height)))}r[u.uuid]=new Ta(f)}else{let f=a(u.url);r[u.uuid]=new Ta(f)}}}return r}parseImagesAsync(e){return xi(this,null,function*(){let t=this,i={},r;function o(s){return xi(this,null,function*(){if(typeof s=="string"){let a=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return yield r.loadAsync(l)}else return s.data?{data:ff(s.type,s.data),width:s.width,height:s.height}:null})}if(e!==void 0&&e.length>0){r=new Nc(this.manager),r.setCrossOrigin(this.crossOrigin);for(let s=0,a=e.length;s<a;s++){let l=e[s],c=l.url;if(Array.isArray(c)){let d=[];for(let u=0,h=c.length;u<h;u++){let f=c[u],m=yield o(f);m!==null&&(m instanceof HTMLImageElement?d.push(m):d.push(new Mr(m.data,m.width,m.height)))}i[l.uuid]=new Ta(d)}else{let d=yield o(l.url);i[l.uuid]=new Ta(d)}}}return i})}parseTextures(e,t){function i(o,s){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),s[o])}let r={};if(e!==void 0)for(let o=0,s=e.length;o<s;o++){let a=e[o];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);let l=t[a.image],c=l.data,d;Array.isArray(c)?(d=new Ac,c.length===6&&(d.needsUpdate=!0)):(c&&c.data?d=new Mr:d=new yn,c&&(d.needsUpdate=!0)),d.source=l,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=i(a.mapping,Q7)),a.channel!==void 0&&(d.channel=a.channel),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=i(a.wrap[0],Y2),d.wrapT=i(a.wrap[1],Y2)),a.format!==void 0&&(d.format=a.format),a.internalFormat!==void 0&&(d.internalFormat=a.internalFormat),a.type!==void 0&&(d.type=a.type),a.colorSpace!==void 0&&(d.colorSpace=a.colorSpace),a.minFilter!==void 0&&(d.minFilter=i(a.minFilter,Z2)),a.magFilter!==void 0&&(d.magFilter=i(a.magFilter,Z2)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.generateMipmaps!==void 0&&(d.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(d.compareFunction=a.compareFunction),a.userData!==void 0&&(d.userData=a.userData),r[a.uuid]=d}return r}parseObject(e,t,i,r,o){let s;function a(h){return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),t[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){let f=[];for(let m=0,_=h.length;m<_;m++){let g=h[m];i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),f.push(i[g])}return f}return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),i[h]}}function c(h){return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),r[h]}let d,u;switch(e.type){case"Scene":s=new su,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new he(e.background):s.background=c(e.background)),e.environment!==void 0&&(s.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new ou(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new Tg(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new rn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new yo(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new _u(e.color,e.intensity);break;case"DirectionalLight":s=new Dl(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new El(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new o_(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new gu(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new mu(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new a_().fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),u=l(e.material),s=new au(d,u),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),u=l(e.material),s=new ke(d,u);break;case"InstancedMesh":d=a(e.geometry),u=l(e.material);let h=e.count,f=e.instanceMatrix,m=e.instanceColor;s=new Cl(d,u,h),s.instanceMatrix=new fs(new Float32Array(f.array),16),m!==void 0&&(s.instanceColor=new fs(new Float32Array(m.array),m.itemSize));break;case"BatchedMesh":d=a(e.geometry),u=l(e.material),s=new Eg(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,u),s.geometry=d,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._visibility=e.visibility,s._active=e.active,s._bounds=e.bounds.map(_=>{let g=new vn;g.min.fromArray(_.boxMin),g.max.fromArray(_.boxMax);let p=new Tn;return p.radius=_.sphereRadius,p.center.fromArray(_.sphereCenter),{boxInitialized:_.boxInitialized,box:g,sphereInitialized:_.sphereInitialized,sphere:p}}),s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._geometryCount=e.geometryCount,s._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":s=new Cg;break;case"Line":s=new Ki(a(e.geometry),l(e.material));break;case"LineLoop":s=new cu(a(e.geometry),l(e.material));break;case"LineSegments":s=new Sr(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new du(a(e.geometry),l(e.material));break;case"Sprite":s=new Rg(l(e.material));break;case"Group":s=new Tr;break;case"Bone":s=new Ic;break;default:s=new xt}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){let h=e.children;for(let f=0;f<h.length;f++)s.add(this.parseObject(h[f],t,i,r,o))}if(e.animations!==void 0){let h=e.animations;for(let f=0;f<h.length;f++){let m=h[f];s.animations.push(o[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);let h=e.levels;for(let f=0;f<h.length;f++){let m=h[f],_=s.getObjectByProperty("uuid",m.object);_!==void 0&&s.addLevel(_,m.distance,m.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){let r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){let i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new xt}})}},Q7={UVMapping:yg,CubeReflectionMapping:Oa,CubeRefractionMapping:Pl,EquirectangularReflectionMapping:Vf,EquirectangularRefractionMapping:zf,CubeUVReflectionMapping:yu},Y2={RepeatWrapping:zo,ClampToEdgeWrapping:Kr,MirroredRepeatWrapping:Cc},Z2={NearestFilter:hi,NearestMipmapNearestFilter:Hf,NearestMipmapLinearFilter:Fl,LinearFilter:bn,LinearMipmapNearestFilter:Vc,LinearMipmapLinearFilter:xo},jf=class extends qn{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=Ra.get(e);if(s!==void 0){if(o.manager.itemStart(e),s.then){s.then(c=>{t&&t(c),o.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;let l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(c){return Ra.add(e,c),t&&t(c),o.manager.itemEnd(e),c}).catch(function(c){r&&r(c),Ra.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});Ra.add(e,l),o.manager.itemStart(e)}},wx,Nf=class{static getContext(){return wx===void 0&&(wx=new(window.AudioContext||window.webkitAudioContext)),wx}static setContext(e){wx=e}},Qx=class extends qn{constructor(e){super(e)}load(e,t,i,r){let o=this,s=new Wn(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{let c=l.slice(0);Nf.getContext().decodeAudioData(c,function(u){t(u)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),o.manager.itemError(e)}}},Q2=new Ie,K2=new Ie,Yd=new Ie,Kx=class{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new rn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new rn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){let t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Yd.copy(e.projectionMatrix);let r=t.eyeSep/2,o=r*t.near/t.focus,s=t.near*Math.tan(tu*t.fov*.5)/t.zoom,a,l;K2.elements[12]=-r,Q2.elements[12]=r,a=-s*t.aspect+o,l=s*t.aspect+o,Yd.elements[0]=2*t.near/(l-a),Yd.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Yd),a=-s*t.aspect-o,l=s*t.aspect-o,Yd.elements[0]=2*t.near/(l-a),Yd.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Yd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(K2),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Q2)}},u_=class extends rn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},eo=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=J2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=J2();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function J2(){return performance.now()}var Zd=new w,eB=new Yt,K7=new w,Qd=new w,Jx=class extends xt{constructor(){super(),this.type="AudioListener",this.context=Nf.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new eo}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);let t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Zd,eB,K7),Qd.set(0,0,-1).applyQuaternion(eB),t.positionX){let r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Zd.x,r),t.positionY.linearRampToValueAtTime(Zd.y,r),t.positionZ.linearRampToValueAtTime(Zd.z,r),t.forwardX.linearRampToValueAtTime(Qd.x,r),t.forwardY.linearRampToValueAtTime(Qd.y,r),t.forwardZ.linearRampToValueAtTime(Qd.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Zd.x,Zd.y,Zd.z),t.setOrientation(Qd.x,Qd.y,Qd.z,i.x,i.y,i.z)}},h_=class extends xt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;let t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}},Kd=new w,tB=new Yt,J7=new w,Jd=new w,ew=class extends h_{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Kd,tB,J7),Jd.set(0,0,1).applyQuaternion(tB);let t=this.panner;if(t.positionX){let i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Kd.x,i),t.positionY.linearRampToValueAtTime(Kd.y,i),t.positionZ.linearRampToValueAtTime(Kd.z,i),t.orientationX.linearRampToValueAtTime(Jd.x,i),t.orientationY.linearRampToValueAtTime(Jd.y,i),t.orientationZ.linearRampToValueAtTime(Jd.z,i)}else t.setPosition(Kd.x,Kd.y,Kd.z),t.setOrientation(Jd.x,Jd.y,Jd.z)}},tw=class{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0,t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}},f_=class{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,o,s;switch(t){case"quaternion":r=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let i=this.buffer,r=this.valueSize,o=e*r+r,s=this.cumulativeWeight;if(s===0){for(let a=0;a!==r;++a)i[o+a]=i[a];s=t}else{s+=t;let a=t/s;this._mixBufferRegion(i,o,0,a,r)}this.cumulativeWeight=s}accumulateAdditive(e){let t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,i=this.buffer,r=e*t+t,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){let l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-o,t)}s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){let e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let o=i,s=r;o!==s;++o)t[o]=t[r+o%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,o){if(r>=.5)for(let s=0;s!==o;++s)e[t+s]=e[i+s]}_slerp(e,t,i,r){Yt.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,o){let s=this._workIndex*o;Yt.multiplyQuaternionsFlat(e,s,e,t,e,i),Yt.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,i,r,o){let s=1-r;for(let a=0;a!==o;++a){let l=t+a;e[l]=e[l]*s+e[i+a]*r}}_lerpAdditive(e,t,i,r,o){for(let s=0;s!==o;++s){let a=t+s;e[a]=e[a]+e[i+s]*r}}},r1="\\[\\]\\.:\\/",eZ=new RegExp("["+r1+"]","g"),o1="[^"+r1+"]",tZ="[^"+r1.replace("\\.","")+"]",iZ=/((?:WC+[\/:])*)/.source.replace("WC",o1),nZ=/(WCOD+)?/.source.replace("WCOD",tZ),rZ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",o1),oZ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",o1),sZ=new RegExp("^"+iZ+nZ+rZ+oZ+"$"),aZ=["material","materials","bones","map"],uD=class{constructor(e,t,i){let r=i||$i.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},$i=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(eZ,"")}static parseTrackName(t){let i=sZ.exec(t);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let s=r.nodeName.substring(o+1);aZ.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(i===void 0||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){let r=t.skeleton.getBoneByName(i);if(r!==void 0)return r}if(t.children){let r=function(s){for(let a=0;a<s.length;a++){let l=s[a];if(l.name===i||l.uuid===i)return l;let c=r(l.children);if(c)return c}return null},o=r(t.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)t[i++]=r[o]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++]}_setValue_array_setNeedsUpdate(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node,i=this.parsedPath,r=i.objectName,o=i.propertyName,s=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let d=i.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let u=0;u<t.length;u++)if(t[u].name===d){d=u;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(d!==void 0){if(t[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[d]}}let a=t[o];if(a===void 0){let d=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+o+" but it wasn't found.",t);return}let l=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(o==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=uD,n})();$i.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};$i.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};$i.prototype.GetterByBindingType=[$i.prototype._getValue_direct,$i.prototype._getValue_array,$i.prototype._getValue_arrayElement,$i.prototype._getValue_toArray];$i.prototype.SetterByBindingTypeAndVersioning=[[$i.prototype._setValue_direct,$i.prototype._setValue_direct_setNeedsUpdate,$i.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$i.prototype._setValue_array,$i.prototype._setValue_array_setNeedsUpdate,$i.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$i.prototype._setValue_arrayElement,$i.prototype._setValue_arrayElement_setNeedsUpdate,$i.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$i.prototype._setValue_fromArray,$i.prototype._setValue_fromArray_setNeedsUpdate,$i.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var iw=class{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Vo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;let e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};let t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){let e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length,a,l=e.length,c=this.nCachedObjects_;for(let d=0,u=arguments.length;d!==u;++d){let h=arguments[d],f=h.uuid,m=t[f];if(m===void 0){m=l++,t[f]=m,e.push(h);for(let _=0,g=s;_!==g;++_)o[_].push(new $i(h,i[_],r[_]))}else if(m<c){a=e[m];let _=--c,g=e[_];t[g.uuid]=m,e[m]=g,t[f]=_,e[_]=h;for(let p=0,b=s;p!==b;++p){let v=o[p],y=v[_],R=v[m];v[m]=y,R===void 0&&(R=new $i(h,i[p],r[p])),v[_]=R}}else e[m]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){let e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length,o=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){let l=arguments[s],c=l.uuid,d=t[c];if(d!==void 0&&d>=o){let u=o++,h=e[u];t[h.uuid]=d,e[d]=h,t[c]=u,e[u]=l;for(let f=0,m=r;f!==m;++f){let _=i[f],g=_[u],p=_[d];_[d]=g,_[u]=p}}}this.nCachedObjects_=o}uncache(){let e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length,o=this.nCachedObjects_,s=e.length;for(let a=0,l=arguments.length;a!==l;++a){let c=arguments[a],d=c.uuid,u=t[d];if(u!==void 0)if(delete t[d],u<o){let h=--o,f=e[h],m=--s,_=e[m];t[f.uuid]=u,e[u]=f,t[_.uuid]=h,e[h]=_,e.pop();for(let g=0,p=r;g!==p;++g){let b=i[g],v=b[h],y=b[m];b[u]=v,b[h]=y,b.pop()}}else{let h=--s,f=e[h];h>0&&(t[f.uuid]=u),e[u]=f,e.pop();for(let m=0,_=r;m!==_;++m){let g=i[m];g[u]=g[h],g.pop()}}}this.nCachedObjects_=o}subscribe_(e,t){let i=this._bindingsIndicesByPath,r=i[e],o=this._bindings;if(r!==void 0)return o[r];let s=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,d=this.nCachedObjects_,u=new Array(c);r=o.length,i[e]=r,s.push(e),a.push(t),o.push(u);for(let h=d,f=l.length;h!==f;++h){let m=l[h];u[h]=new $i(m,e,t)}return u}unsubscribe_(e){let t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){let r=this._paths,o=this._parsedPaths,s=this._bindings,a=s.length-1,l=s[a],c=e[a];t[c]=i,s[i]=l,s.pop(),o[i]=o[a],o.pop(),r[i]=r[a],r.pop()}}},p_=class{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;let o=t.tracks,s=o.length,a=new Array(s),l={endingStart:xc,endingEnd:xc};for(let c=0;c!==s;++c){let d=o[c].createInterpolant(null);a[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=UD,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){let r=this._clip.duration,o=e._clip.duration,s=o/r,a=r/o;e.warp(1,s,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){let r=this._mixer,o=r.time,s=this.timeScale,a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);let l=a.parameterPositions,c=a.sampleValues;return l[0]=o,l[1]=o+i,c[0]=e/s,c[1]=t/s,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}let o=this._startTime;if(o!==null){let l=(e-o)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);let s=this._updateTime(t),a=this._updateWeight(e);if(a>0){let l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case Nw:for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(s),c[d].accumulateAdditive(a);break;case tb:default:for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(s),c[d].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let i=this._weightInterpolant;if(i!==null){let r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let i=this._timeScaleInterpolant;if(i!==null){let r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,i=this.loop,r=this.time+e,o=this._loopCount,s=i===VD;if(e===0)return o===-1?r:s&&(o&1)===1?t-r:r;if(i===eb){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=t||r<0){let a=Math.floor(r/t);r-=t*a,o+=Math.abs(a);let l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){let c=e<0;this._setEndings(c,!c,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(s&&(o&1)===1)return t-r}return r}_setEndings(e,t,i){let r=this._interpolantSettings;i?(r.endingStart=wc,r.endingEnd=wc):(e?r.endingStart=this.zeroSlopeAtStart?wc:xc:r.endingStart=gf,t?r.endingEnd=this.zeroSlopeAtEnd?wc:xc:r.endingEnd=gf)}_scheduleFading(e,t,i){let r=this._mixer,o=r.time,s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);let a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=t,a[1]=o+e,l[1]=i,this}},lZ=new Float32Array(1),Lf=class extends Ho{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let i=e._localRoot||this._root,r=e._clip.tracks,o=r.length,s=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName,d=c[l];d===void 0&&(d={},c[l]=d);for(let u=0;u!==o;++u){let h=r[u],f=h.name,m=d[f];if(m!==void 0)++m.referenceCount,s[u]=m;else{if(m=s[u],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,f));continue}let _=t&&t._propertyBindings[u].binding.parsedPath;m=new f_($i.create(i,f,_),h.ValueTypeName,h.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,f),s[u]=m}a[u].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let i=(e._localRoot||this._root).uuid,r=e._clip.uuid,o=this._actionsByClip[r];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,r,i)}let t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){let o=t[i];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){let o=t[i];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){let r=this._actions,o=this._actionsByClip,s=o[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=s;else{let a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[i]=e}_removeInactiveAction(e){let t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;let o=e._clip.uuid,s=this._actionsByClip,a=s[o],l=a.knownActions,c=l[l.length-1],d=e._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),e._byClipCacheIndex=null;let u=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete u[h],l.length===0&&delete s[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){let o=t[i];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){let t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=i,t[i]=o}_takeBackAction(e){let t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=i,t[i]=o}_addInactiveBinding(e,t,i){let r=this._bindingsByRootAndName,o=this._bindings,s=r[t];s===void 0&&(s={},r[t]=s),s[i]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){let t=this._bindings,i=e.binding,r=i.rootNode.uuid,o=i.path,s=this._bindingsByRootAndName,a=s[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[o],Object.keys(a).length===0&&delete s[r]}_lendBinding(e){let t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=i,t[i]=o}_takeBackBinding(e){let t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=i,t[i]=o}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];return i===void 0&&(i=new Pf(new Float32Array(2),new Float32Array(2),1,lZ),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){let t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,o=t[r];e.__cacheIndex=r,t[r]=e,o.__cacheIndex=i,t[i]=o}clipAction(e,t,i){let r=t||this._root,o=r.uuid,s=typeof e=="string"?Fa.findByName(r,e):e,a=s!==null?s.uuid:e,l=this._actionsByClip[a],c=null;if(i===void 0&&(s!==null?i=s.blendMode:i=tb),l!==void 0){let u=l.actionByRoot[o];if(u!==void 0&&u.blendMode===i)return u;c=l.knownActions[0],s===null&&(s=c._clip)}if(s===null)return null;let d=new p_(this,s,t,i);return this._bindAction(d,c),this._addInactiveAction(d,a,o),d}existingAction(e,t){let i=t||this._root,r=i.uuid,o=typeof e=="string"?Fa.findByName(i,e):e,s=o?o.uuid:e,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;let t=this._actions,i=this._nActiveActions,r=this.time+=e,o=Math.sign(e),s=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,o,s);let a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,i=e.uuid,r=this._actionsByClip,o=r[i];if(o!==void 0){let s=o.knownActions;for(let a=0,l=s.length;a!==l;++a){let c=s[a];this._deactivateAction(c);let d=c._cacheIndex,u=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=d,t[d]=u,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){let t=e.uuid,i=this._actionsByClip;for(let s in i){let a=i[s].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}let r=this._bindingsByRootAndName,o=r[t];if(o!==void 0)for(let s in o){let a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){let i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}},nw=class n{constructor(e){this.value=e}clone(){return new n(this.value.clone===void 0?this.value:this.value.clone())}},cZ=0,rw=class extends Ho{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:cZ++}),this.name="",this.usage=bf,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){let t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;let t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){let o=Array.isArray(t[i])?t[i]:[t[i]];for(let s=0;s<o.length;s++)this.uniforms.push(o[s].clone())}return this}clone(){return new this.constructor().copy(this)}},ow=class extends Ea{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){let t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){let t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}},sw=class{constructor(e,t,i,r,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}},iB=new Ie,Nr=class{constructor(e,t,i=0,r=1/0){this.ray=new zs(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new ru,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return iB.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(iB),this}intersectObject(e,t=!0,i=[]){return hD(e,this,i,t),i.sort(nB),i}intersectObjects(e,t=!0,i=[]){for(let r=0,o=e.length;r<o;r++)hD(e[r],this,i,t);return i.sort(nB),i}};function nB(n,e){return n.distance-e.distance}function hD(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){let o=n.children;for(let s=0,a=o.length;s<a;s++)hD(o[s],e,t,!0)}}var Al=class{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Wt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Wt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},aw=class{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}},lw=class n{constructor(e,t,i,r){n.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){let o=this.elements;return o[0]=e,o[2]=t,o[1]=i,o[3]=r,this}},rB=new V,cw=class{constructor(e=new V(1/0,1/0),t=new V(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=rB.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,rB).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},oB=new w,Mx=new w,dw=class{constructor(e=new w,t=new w){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){oB.subVectors(e,this.start),Mx.subVectors(this.end,this.start);let i=Mx.dot(Mx),o=Mx.dot(oB)/i;return t&&(o=Wt(o,0,1)),o}closestPointToPoint(e,t,i){let r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},sB=new w,uw=class extends xt{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let i=new bt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,l=32;s<l;s++,a++){let c=s/l*Math.PI*2,d=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(d),Math.sin(d),1)}i.setAttribute("position",new Ne(r,3));let o=new an({fog:!1,toneMapped:!1});this.cone=new Sr(i,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),sB.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(sB),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},vc=new w,Sx=new Ie,eD=new Ie,hw=class extends Sr{constructor(e){let t=iU(e),i=new bt,r=[],o=[],s=new he(0,0,1),a=new he(0,1,0);for(let c=0;c<t.length;c++){let d=t[c];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),o.push(s.r,s.g,s.b),o.push(a.r,a.g,a.b))}i.setAttribute("position",new Ne(r,3)),i.setAttribute("color",new Ne(o,3));let l=new an({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){let t=this.bones,i=this.geometry,r=i.getAttribute("position");eD.copy(this.root.matrixWorld).invert();for(let o=0,s=0;o<t.length;o++){let a=t[o];a.parent&&a.parent.isBone&&(Sx.multiplyMatrices(eD,a.matrixWorld),vc.setFromMatrixPosition(Sx),r.setXYZ(s,vc.x,vc.y,vc.z),Sx.multiplyMatrices(eD,a.parent.matrixWorld),vc.setFromMatrixPosition(Sx),r.setXYZ(s+1,vc.x,vc.y,vc.z),s+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}};function iU(n){let e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,iU(n.children[t]));return e}var fw=class extends ke{constructor(e,t,i){let r=new Da(t,4,2),o=new on({wireframe:!0,fog:!1,toneMapped:!1});super(r,o),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},dZ=new w,aB=new he,lB=new he,pw=class extends xt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";let r=new Ws(t);r.rotateY(Math.PI*.5),this.material=new on({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);let o=r.getAttribute("position"),s=new Float32Array(o.count*3);r.setAttribute("color",new mi(s,3)),this.add(new ke(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){let e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{let t=e.geometry.getAttribute("color");aB.copy(this.light.color),lB.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){let o=i<r/2?aB:lB;t.setXYZ(i,o.r,o.g,o.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(dZ.setFromMatrixPosition(this.light.matrixWorld).negate())}},Lc=class extends Sr{constructor(e=10,t=10,i=4473924,r=8947848){i=new he(i),r=new he(r);let o=t/2,s=e/t,a=e/2,l=[],c=[];for(let h=0,f=0,m=-a;h<=t;h++,m+=s){l.push(-a,0,m,a,0,m),l.push(m,0,-a,m,0,a);let _=h===o?i:r;_.toArray(c,f),f+=3,_.toArray(c,f),f+=3,_.toArray(c,f),f+=3,_.toArray(c,f),f+=3}let d=new bt;d.setAttribute("position",new Ne(l,3)),d.setAttribute("color",new Ne(c,3));let u=new an({vertexColors:!0,toneMapped:!1});super(d,u),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},mw=class extends Sr{constructor(e=10,t=16,i=8,r=64,o=4473924,s=8947848){o=new he(o),s=new he(s);let a=[],l=[];if(t>1)for(let u=0;u<t;u++){let h=u/t*(Math.PI*2),f=Math.sin(h)*e,m=Math.cos(h)*e;a.push(0,0,0),a.push(f,0,m);let _=u&1?o:s;l.push(_.r,_.g,_.b),l.push(_.r,_.g,_.b)}for(let u=0;u<i;u++){let h=u&1?o:s,f=e-e/i*u;for(let m=0;m<r;m++){let _=m/r*(Math.PI*2),g=Math.sin(_)*f,p=Math.cos(_)*f;a.push(g,0,p),l.push(h.r,h.g,h.b),_=(m+1)/r*(Math.PI*2),g=Math.sin(_)*f,p=Math.cos(_)*f,a.push(g,0,p),l.push(h.r,h.g,h.b)}}let c=new bt;c.setAttribute("position",new Ne(a,3)),c.setAttribute("color",new Ne(l,3));let d=new an({vertexColors:!0,toneMapped:!1});super(c,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},cB=new w,Tx=new w,dB=new w,gw=class extends xt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new bt;r.setAttribute("position",new Ne([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let o=new an({fog:!1,toneMapped:!1});this.lightPlane=new Ki(r,o),this.add(this.lightPlane),r=new bt,r.setAttribute("position",new Ne([0,0,0,0,0,1],3)),this.targetLine=new Ki(r,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),cB.setFromMatrixPosition(this.light.matrixWorld),Tx.setFromMatrixPosition(this.light.target.matrixWorld),dB.subVectors(Tx,cB),this.lightPlane.lookAt(Tx),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Tx),this.targetLine.scale.z=dB.length()}},Rx=new w,Pn=new Rl,_w=class extends Sr{constructor(e){let t=new bt,i=new an({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],o=[],s={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(m,_){l(m),l(_)}function l(m){r.push(0,0,0),o.push(0,0,0),s[m]===void 0&&(s[m]=[]),s[m].push(r.length/3-1)}t.setAttribute("position",new Ne(r,3)),t.setAttribute("color",new Ne(o,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();let c=new he(16755200),d=new he(16711680),u=new he(43775),h=new he(16777215),f=new he(3355443);this.setColors(c,d,u,h,f)}setColors(e,t,i,r,o){let a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,o.r,o.g,o.b),a.setXYZ(41,o.r,o.g,o.b),a.setXYZ(42,o.r,o.g,o.b),a.setXYZ(43,o.r,o.g,o.b),a.setXYZ(44,o.r,o.g,o.b),a.setXYZ(45,o.r,o.g,o.b),a.setXYZ(46,o.r,o.g,o.b),a.setXYZ(47,o.r,o.g,o.b),a.setXYZ(48,o.r,o.g,o.b),a.setXYZ(49,o.r,o.g,o.b),a.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,i=1,r=1;Pn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ln("c",t,e,Pn,0,0,-1),Ln("t",t,e,Pn,0,0,1),Ln("n1",t,e,Pn,-i,-r,-1),Ln("n2",t,e,Pn,i,-r,-1),Ln("n3",t,e,Pn,-i,r,-1),Ln("n4",t,e,Pn,i,r,-1),Ln("f1",t,e,Pn,-i,-r,1),Ln("f2",t,e,Pn,i,-r,1),Ln("f3",t,e,Pn,-i,r,1),Ln("f4",t,e,Pn,i,r,1),Ln("u1",t,e,Pn,i*.7,r*1.1,-1),Ln("u2",t,e,Pn,-i*.7,r*1.1,-1),Ln("u3",t,e,Pn,0,r*2,-1),Ln("cf1",t,e,Pn,-i,0,1),Ln("cf2",t,e,Pn,i,0,1),Ln("cf3",t,e,Pn,0,-r,1),Ln("cf4",t,e,Pn,0,r,1),Ln("cn1",t,e,Pn,-i,0,-1),Ln("cn2",t,e,Pn,i,0,-1),Ln("cn3",t,e,Pn,0,-r,-1),Ln("cn4",t,e,Pn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Ln(n,e,t,i,r,o,s){Rx.set(r,o,s).unproject(i);let a=e[n];if(a!==void 0){let l=t.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],Rx.x,Rx.y,Rx.z)}}var Cx=new vn,bw=class extends Sr{constructor(e,t=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),o=new bt;o.setIndex(new mi(i,1)),o.setAttribute("position",new mi(r,3)),super(o,new an({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Cx.setFromObject(this.object),Cx.isEmpty())return;let t=Cx.min,i=Cx.max,r=this.geometry.attributes.position,o=r.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=t.x,o[4]=i.y,o[5]=i.z,o[6]=t.x,o[7]=t.y,o[8]=i.z,o[9]=i.x,o[10]=t.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=t.z,o[15]=t.x,o[16]=i.y,o[17]=t.z,o[18]=t.x,o[19]=t.y,o[20]=t.z,o[21]=i.x,o[22]=t.y,o[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}},Bf=class extends Sr{constructor(e,t=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new bt;o.setIndex(new mi(i,1)),o.setAttribute("position",new Ne(r,3)),super(o,new an({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},vw=class extends Ki{constructor(e,t=1,i=16776960){let r=i,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new bt;s.setAttribute("position",new Ne(o,3)),s.computeBoundingSphere(),super(s,new an({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;let a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new bt;l.setAttribute("position",new Ne(a,3)),l.computeBoundingSphere(),this.add(new ke(l,new on({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}},uB=new w,Ex,tD,yw=class extends xt{constructor(e=new w(0,0,1),t=new w(0,0,0),i=1,r=16776960,o=i*.2,s=o*.2){super(),this.type="ArrowHelper",Ex===void 0&&(Ex=new bt,Ex.setAttribute("position",new Ne([0,0,0,0,1,0],3)),tD=new Fn(0,.5,1,5,1),tD.translate(0,-.5,0)),this.position.copy(t),this.line=new Ki(Ex,new an({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ke(tD,new on({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,o,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{uB.set(e.z,0,-e.x).normalize();let t=Math.acos(e.y);this.quaternion.setFromAxisAngle(uB,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}},xw=class extends Sr{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new bt;r.setAttribute("position",new Ne(t,3)),r.setAttribute("color",new Ne(i,3));let o=new an({vertexColors:!0,toneMapped:!1});super(r,o),this.type="AxesHelper"}setColors(e,t,i){let r=new he,o=this.geometry.attributes.color.array;return r.set(e),r.toArray(o,0),r.toArray(o,3),r.set(t),r.toArray(o,6),r.toArray(o,9),r.set(i),r.toArray(o,12),r.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},ww=class{constructor(){this.type="ShapePath",this.color=new he,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Oc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,o,s){return this.currentPath.bezierCurveTo(e,t,i,r,o,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(p){let b=[];for(let v=0,y=p.length;v<y;v++){let R=p[v],S=new Ca;S.curves=R.curves,b.push(S)}return b}function i(p,b){let v=b.length,y=!1;for(let R=v-1,S=0;S<v;R=S++){let T=b[R],A=b[S],M=A.x-T.x,x=A.y-T.y;if(Math.abs(x)>Number.EPSILON){if(x<0&&(T=b[S],M=-M,A=b[R],x=-x),p.y<T.y||p.y>A.y)continue;if(p.y===T.y){if(p.x===T.x)return!0}else{let I=x*(p.x-T.x)-M*(p.y-T.y);if(I===0)return!0;if(I<0)continue;y=!y}}else{if(p.y!==T.y)continue;if(A.x<=p.x&&p.x<=T.x||T.x<=p.x&&p.x<=A.x)return!0}}return y}let r=Vs.isClockWise,o=this.subPaths;if(o.length===0)return[];let s,a,l,c=[];if(o.length===1)return a=o[0],l=new Ca,l.curves=a.curves,c.push(l),c;let d=!r(o[0].getPoints());d=e?!d:d;let u=[],h=[],f=[],m=0,_;h[m]=void 0,f[m]=[];for(let p=0,b=o.length;p<b;p++)a=o[p],_=a.getPoints(),s=r(_),s=e?!s:s,s?(!d&&h[m]&&m++,h[m]={s:new Ca,p:_},h[m].s.curves=a.curves,d&&m++,f[m]=[]):f[m].push({h:a,p:_[0]});if(!h[0])return t(o);if(h.length>1){let p=!1,b=0;for(let v=0,y=h.length;v<y;v++)u[v]=[];for(let v=0,y=h.length;v<y;v++){let R=f[v];for(let S=0;S<R.length;S++){let T=R[S],A=!0;for(let M=0;M<h.length;M++)i(T.p,h[M].p)&&(v!==M&&b++,A?(A=!1,u[M].push(T)):p=!0);A&&u[v].push(T)}}b>0&&p===!1&&(f=u)}let g;for(let p=0,b=h.length;p<b;p++){l=h[p].s,c.push(l),g=f[p];for(let v=0,y=g.length;v<y;v++)l.holes.push(g[v].h)}return c}},pr=class extends Ho{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}};function uZ(n,e){let t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function hZ(n,e){let t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function fZ(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function zw(n,e,t,i){let r=pZ(i);switch(t){case Iw:return n*e;case Fw:return n*e;case kw:return n*e*2;case Ol:return n*e/r.components*r.byteLength;case Gf:return n*e/r.components*r.byteLength;case Ow:return n*e*2/r.components*r.byteLength;case R_:return n*e*2/r.components*r.byteLength;case Pw:return n*e*3/r.components*r.byteLength;case Or:return n*e*4/r.components*r.byteLength;case C_:return n*e*4/r.components*r.byteLength;case Wf:case $f:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case qf:case Xf:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case D_:case I_:return Math.max(n,16)*Math.max(e,8)/4;case E_:case A_:return Math.max(n,8)*Math.max(e,8)/2;case P_:case F_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case k_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case O_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case j_:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case N_:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case L_:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case B_:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case U_:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case V_:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case z_:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case H_:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case G_:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case W_:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case $_:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case q_:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case X_:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Yf:case Y_:case Z_:return Math.ceil(n/4)*Math.ceil(e/4)*16;case jw:case Q_:return Math.ceil(n/4)*Math.ceil(e/4)*8;case K_:case J_:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function pZ(n){switch(n){case ea:case Ew:return{byteLength:1,components:1};case kl:case Dw:case zi:return{byteLength:2,components:1};case S_:case T_:return{byteLength:2,components:4};case ja:case M_:case nr:return{byteLength:4,components:1};case Aw:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}var nU={contain:uZ,cover:hZ,fill:fZ,getByteLength:zw},Mw=class extends ti{constructor(e=1,t=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,Ft(ce({},r),{count:i})),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:m_}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=m_);function CU(){let n=null,e=!1,t=null,i=null;function r(o,s){t(o,s),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function mZ(n){let e=new WeakMap;function t(a,l){let c=a.array,d=a.usage,u=c.byteLength,h=n.createBuffer();n.bindBuffer(l,h),n.bufferData(l,c,d),a.onUploadCallback();let f;if(c instanceof Float32Array)f=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?f=n.HALF_FLOAT:f=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)f=n.SHORT;else if(c instanceof Uint32Array)f=n.UNSIGNED_INT;else if(c instanceof Int32Array)f=n.INT;else if(c instanceof Int8Array)f=n.BYTE;else if(c instanceof Uint8Array)f=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)f=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:h,type:f,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:u}}function i(a,l,c){let d=l.array,u=l.updateRanges;if(n.bindBuffer(c,a),u.length===0)n.bufferSubData(c,0,d);else{u.sort((f,m)=>f.start-m.start);let h=0;for(let f=1;f<u.length;f++){let m=u[h],_=u[f];_.start<=m.start+m.count+1?m.count=Math.max(m.count,_.start+_.count-m.start):(++h,u[h]=_)}u.length=h+1;for(let f=0,m=u.length;f<m;f++){let _=u[f];n.bufferSubData(c,_.start*d.BYTES_PER_ELEMENT,d,_.start,_.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);let l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function s(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let d=e.get(a);(!d||d.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:r,remove:o,update:s}}var gZ=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,_Z=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,bZ=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,vZ=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,yZ=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,xZ=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,wZ=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,MZ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,SZ=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,TZ=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,RZ=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,CZ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,EZ=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,DZ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,AZ=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,IZ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,PZ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,FZ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,kZ=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,OZ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,jZ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,NZ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,LZ=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,BZ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,UZ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,VZ=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,zZ=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,HZ=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,GZ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,WZ=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,$Z="gl_FragColor = linearToOutputTexel( gl_FragColor );",qZ=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,XZ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,YZ=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,ZZ=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,QZ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,KZ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,JZ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,eQ=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,tQ=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,iQ=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,nQ=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,rQ=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,oQ=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,sQ=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,aQ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,lQ=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,cQ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,dQ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,uQ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,hQ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,fQ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,pQ=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,mQ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,gQ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,_Q=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,bQ=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,vQ=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,yQ=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,xQ=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,wQ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,MQ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,SQ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,TQ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,RQ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,CQ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,EQ=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,DQ=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,AQ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,IQ=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,PQ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,FQ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,kQ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,OQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,jQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,NQ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,LQ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,BQ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,UQ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,VQ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,zQ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,HQ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,GQ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,WQ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,$Q=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,qQ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,XQ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,YQ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,ZQ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,QQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,KQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,JQ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,eK=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,tK=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,iK=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,nK=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,rK=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,oK=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,sK=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,aK=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,lK=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,cK=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,dK=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uK=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,hK=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,fK=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,pK=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,mK=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,gK=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_K=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,bK=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vK=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,yK=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xK=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,wK=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,MK=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,SK=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,TK=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,RK=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,CK=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,EK=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,DK=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,AK=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IK=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,PK=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FK=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,kK=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OK=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,jK=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,NK=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,LK=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BK=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,UK=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VK=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zK=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HK=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,GK=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,WK=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$K=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,qK=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,XK=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ci={alphahash_fragment:gZ,alphahash_pars_fragment:_Z,alphamap_fragment:bZ,alphamap_pars_fragment:vZ,alphatest_fragment:yZ,alphatest_pars_fragment:xZ,aomap_fragment:wZ,aomap_pars_fragment:MZ,batching_pars_vertex:SZ,batching_vertex:TZ,begin_vertex:RZ,beginnormal_vertex:CZ,bsdfs:EZ,iridescence_fragment:DZ,bumpmap_pars_fragment:AZ,clipping_planes_fragment:IZ,clipping_planes_pars_fragment:PZ,clipping_planes_pars_vertex:FZ,clipping_planes_vertex:kZ,color_fragment:OZ,color_pars_fragment:jZ,color_pars_vertex:NZ,color_vertex:LZ,common:BZ,cube_uv_reflection_fragment:UZ,defaultnormal_vertex:VZ,displacementmap_pars_vertex:zZ,displacementmap_vertex:HZ,emissivemap_fragment:GZ,emissivemap_pars_fragment:WZ,colorspace_fragment:$Z,colorspace_pars_fragment:qZ,envmap_fragment:XZ,envmap_common_pars_fragment:YZ,envmap_pars_fragment:ZZ,envmap_pars_vertex:QZ,envmap_physical_pars_fragment:lQ,envmap_vertex:KZ,fog_vertex:JZ,fog_pars_vertex:eQ,fog_fragment:tQ,fog_pars_fragment:iQ,gradientmap_pars_fragment:nQ,lightmap_pars_fragment:rQ,lights_lambert_fragment:oQ,lights_lambert_pars_fragment:sQ,lights_pars_begin:aQ,lights_toon_fragment:cQ,lights_toon_pars_fragment:dQ,lights_phong_fragment:uQ,lights_phong_pars_fragment:hQ,lights_physical_fragment:fQ,lights_physical_pars_fragment:pQ,lights_fragment_begin:mQ,lights_fragment_maps:gQ,lights_fragment_end:_Q,logdepthbuf_fragment:bQ,logdepthbuf_pars_fragment:vQ,logdepthbuf_pars_vertex:yQ,logdepthbuf_vertex:xQ,map_fragment:wQ,map_pars_fragment:MQ,map_particle_fragment:SQ,map_particle_pars_fragment:TQ,metalnessmap_fragment:RQ,metalnessmap_pars_fragment:CQ,morphinstance_vertex:EQ,morphcolor_vertex:DQ,morphnormal_vertex:AQ,morphtarget_pars_vertex:IQ,morphtarget_vertex:PQ,normal_fragment_begin:FQ,normal_fragment_maps:kQ,normal_pars_fragment:OQ,normal_pars_vertex:jQ,normal_vertex:NQ,normalmap_pars_fragment:LQ,clearcoat_normal_fragment_begin:BQ,clearcoat_normal_fragment_maps:UQ,clearcoat_pars_fragment:VQ,iridescence_pars_fragment:zQ,opaque_fragment:HQ,packing:GQ,premultiplied_alpha_fragment:WQ,project_vertex:$Q,dithering_fragment:qQ,dithering_pars_fragment:XQ,roughnessmap_fragment:YQ,roughnessmap_pars_fragment:ZQ,shadowmap_pars_fragment:QQ,shadowmap_pars_vertex:KQ,shadowmap_vertex:JQ,shadowmask_pars_fragment:eK,skinbase_vertex:tK,skinning_pars_vertex:iK,skinning_vertex:nK,skinnormal_vertex:rK,specularmap_fragment:oK,specularmap_pars_fragment:sK,tonemapping_fragment:aK,tonemapping_pars_fragment:lK,transmission_fragment:cK,transmission_pars_fragment:dK,uv_pars_fragment:uK,uv_pars_vertex:hK,uv_vertex:fK,worldpos_vertex:pK,background_vert:mK,background_frag:gK,backgroundCube_vert:_K,backgroundCube_frag:bK,cube_vert:vK,cube_frag:yK,depth_vert:xK,depth_frag:wK,distanceRGBA_vert:MK,distanceRGBA_frag:SK,equirect_vert:TK,equirect_frag:RK,linedashed_vert:CK,linedashed_frag:EK,meshbasic_vert:DK,meshbasic_frag:AK,meshlambert_vert:IK,meshlambert_frag:PK,meshmatcap_vert:FK,meshmatcap_frag:kK,meshnormal_vert:OK,meshnormal_frag:jK,meshphong_vert:NK,meshphong_frag:LK,meshphysical_vert:BK,meshphysical_frag:UK,meshtoon_vert:VK,meshtoon_frag:zK,points_vert:HK,points_frag:GK,shadow_vert:WK,shadow_frag:$K,sprite_vert:qK,sprite_frag:XK},Ve={common:{diffuse:{value:new he(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new $t},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new $t}},envmap:{envMap:{value:null},envMapRotation:{value:new $t},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new $t}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new $t}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new $t},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new $t},normalScale:{value:new V(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new $t},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new $t}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new $t}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new $t}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new he(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new he(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0},uvTransform:{value:new $t}},sprite:{diffuse:{value:new he(16777215)},opacity:{value:1},center:{value:new V(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new $t},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0}}},ta={basic:{uniforms:Ur([Ve.common,Ve.specularmap,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.fog]),vertexShader:ci.meshbasic_vert,fragmentShader:ci.meshbasic_frag},lambert:{uniforms:Ur([Ve.common,Ve.specularmap,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.fog,Ve.lights,{emissive:{value:new he(0)}}]),vertexShader:ci.meshlambert_vert,fragmentShader:ci.meshlambert_frag},phong:{uniforms:Ur([Ve.common,Ve.specularmap,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.fog,Ve.lights,{emissive:{value:new he(0)},specular:{value:new he(1118481)},shininess:{value:30}}]),vertexShader:ci.meshphong_vert,fragmentShader:ci.meshphong_frag},standard:{uniforms:Ur([Ve.common,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.roughnessmap,Ve.metalnessmap,Ve.fog,Ve.lights,{emissive:{value:new he(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ci.meshphysical_vert,fragmentShader:ci.meshphysical_frag},toon:{uniforms:Ur([Ve.common,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.gradientmap,Ve.fog,Ve.lights,{emissive:{value:new he(0)}}]),vertexShader:ci.meshtoon_vert,fragmentShader:ci.meshtoon_frag},matcap:{uniforms:Ur([Ve.common,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.fog,{matcap:{value:null}}]),vertexShader:ci.meshmatcap_vert,fragmentShader:ci.meshmatcap_frag},points:{uniforms:Ur([Ve.points,Ve.fog]),vertexShader:ci.points_vert,fragmentShader:ci.points_frag},dashed:{uniforms:Ur([Ve.common,Ve.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ci.linedashed_vert,fragmentShader:ci.linedashed_frag},depth:{uniforms:Ur([Ve.common,Ve.displacementmap]),vertexShader:ci.depth_vert,fragmentShader:ci.depth_frag},normal:{uniforms:Ur([Ve.common,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,{opacity:{value:1}}]),vertexShader:ci.meshnormal_vert,fragmentShader:ci.meshnormal_frag},sprite:{uniforms:Ur([Ve.sprite,Ve.fog]),vertexShader:ci.sprite_vert,fragmentShader:ci.sprite_frag},background:{uniforms:{uvTransform:{value:new $t},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ci.background_vert,fragmentShader:ci.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new $t}},vertexShader:ci.backgroundCube_vert,fragmentShader:ci.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ci.cube_vert,fragmentShader:ci.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ci.equirect_vert,fragmentShader:ci.equirect_frag},distanceRGBA:{uniforms:Ur([Ve.common,Ve.displacementmap,{referencePosition:{value:new w},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ci.distanceRGBA_vert,fragmentShader:ci.distanceRGBA_frag},shadow:{uniforms:Ur([Ve.lights,Ve.fog,{color:{value:new he(0)},opacity:{value:1}}]),vertexShader:ci.shadow_vert,fragmentShader:ci.shadow_frag}};ta.physical={uniforms:Ur([ta.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new $t},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new $t},clearcoatNormalScale:{value:new V(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new $t},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new $t},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new $t},sheen:{value:0},sheenColor:{value:new he(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new $t},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new $t},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new $t},transmissionSamplerSize:{value:new V},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new $t},attenuationDistance:{value:0},attenuationColor:{value:new he(0)},specularColor:{value:new he(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new $t},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new $t},anisotropyVector:{value:new V},anisotropyMap:{value:null},anisotropyMapTransform:{value:new $t}}]),vertexShader:ci.meshphysical_vert,fragmentShader:ci.meshphysical_frag};var Hw={r:0,b:0,g:0},Su=new Jr,YK=new Ie;function ZK(n,e,t,i,r,o,s){let a=new he(0),l=o===!0?0:1,c,d,u=null,h=0,f=null;function m(v){let y=v.isScene===!0?v.background:null;return y&&y.isTexture&&(y=(v.backgroundBlurriness>0?t:e).get(y)),y}function _(v){let y=!1,R=m(v);R===null?p(a,l):R&&R.isColor&&(p(R,1),y=!0);let S=n.xr.getEnvironmentBlendMode();S==="additive"?i.buffers.color.setClear(0,0,0,1,s):S==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||y)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function g(v,y){let R=m(y);R&&(R.isCubeTexture||R.mapping===yu)?(d===void 0&&(d=new ke(new Qi(1,1,1),new Et({name:"BackgroundCubeMaterial",uniforms:Mu(ta.backgroundCube.uniforms),vertexShader:ta.backgroundCube.vertexShader,fragmentShader:ta.backgroundCube.fragmentShader,side:Br,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(S,T,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),Su.copy(y.backgroundRotation),Su.x*=-1,Su.y*=-1,Su.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(Su.y*=-1,Su.z*=-1),d.material.uniforms.envMap.value=R,d.material.uniforms.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(YK.makeRotationFromEuler(Su)),d.material.toneMapped=ui.getTransfer(R.colorSpace)!==Vi,(u!==R||h!==R.version||f!==n.toneMapping)&&(d.material.needsUpdate=!0,u=R,h=R.version,f=n.toneMapping),d.layers.enableAll(),v.unshift(d,d.geometry,d.material,0,0,null)):R&&R.isTexture&&(c===void 0&&(c=new ke(new $s(2,2),new Et({name:"BackgroundMaterial",uniforms:Mu(ta.background.uniforms),vertexShader:ta.background.vertexShader,fragmentShader:ta.background.fragmentShader,side:ds,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=R,c.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,c.material.toneMapped=ui.getTransfer(R.colorSpace)!==Vi,R.matrixAutoUpdate===!0&&R.updateMatrix(),c.material.uniforms.uvTransform.value.copy(R.matrix),(u!==R||h!==R.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,u=R,h=R.version,f=n.toneMapping),c.layers.enableAll(),v.unshift(c,c.geometry,c.material,0,0,null))}function p(v,y){v.getRGB(Hw,e1(n)),i.buffers.color.setClear(Hw.r,Hw.g,Hw.b,y,s)}function b(){d!==void 0&&(d.geometry.dispose(),d.material.dispose()),c!==void 0&&(c.geometry.dispose(),c.material.dispose())}return{getClearColor:function(){return a},setClearColor:function(v,y=1){a.set(v),l=y,p(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(v){l=v,p(a,l)},render:_,addToRenderList:g,dispose:b}}function QK(n,e){let t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=h(null),o=r,s=!1;function a(x,I,z,W,ee){let se=!1,N=u(W,z,I);o!==N&&(o=N,c(o.object)),se=f(x,W,z,ee),se&&m(x,W,z,ee),ee!==null&&e.update(ee,n.ELEMENT_ARRAY_BUFFER),(se||s)&&(s=!1,y(x,I,z,W),ee!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(ee).buffer))}function l(){return n.createVertexArray()}function c(x){return n.bindVertexArray(x)}function d(x){return n.deleteVertexArray(x)}function u(x,I,z){let W=z.wireframe===!0,ee=i[x.id];ee===void 0&&(ee={},i[x.id]=ee);let se=ee[I.id];se===void 0&&(se={},ee[I.id]=se);let N=se[W];return N===void 0&&(N=h(l()),se[W]=N),N}function h(x){let I=[],z=[],W=[];for(let ee=0;ee<t;ee++)I[ee]=0,z[ee]=0,W[ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:I,enabledAttributes:z,attributeDivisors:W,object:x,attributes:{},index:null}}function f(x,I,z,W){let ee=o.attributes,se=I.attributes,N=0,H=z.getAttributes();for(let L in H)if(H[L].location>=0){let Se=ee[L],Pe=se[L];if(Pe===void 0&&(L==="instanceMatrix"&&x.instanceMatrix&&(Pe=x.instanceMatrix),L==="instanceColor"&&x.instanceColor&&(Pe=x.instanceColor)),Se===void 0||Se.attribute!==Pe||Pe&&Se.data!==Pe.data)return!0;N++}return o.attributesNum!==N||o.index!==W}function m(x,I,z,W){let ee={},se=I.attributes,N=0,H=z.getAttributes();for(let L in H)if(H[L].location>=0){let Se=se[L];Se===void 0&&(L==="instanceMatrix"&&x.instanceMatrix&&(Se=x.instanceMatrix),L==="instanceColor"&&x.instanceColor&&(Se=x.instanceColor));let Pe={};Pe.attribute=Se,Se&&Se.data&&(Pe.data=Se.data),ee[L]=Pe,N++}o.attributes=ee,o.attributesNum=N,o.index=W}function _(){let x=o.newAttributes;for(let I=0,z=x.length;I<z;I++)x[I]=0}function g(x){p(x,0)}function p(x,I){let z=o.newAttributes,W=o.enabledAttributes,ee=o.attributeDivisors;z[x]=1,W[x]===0&&(n.enableVertexAttribArray(x),W[x]=1),ee[x]!==I&&(n.vertexAttribDivisor(x,I),ee[x]=I)}function b(){let x=o.newAttributes,I=o.enabledAttributes;for(let z=0,W=I.length;z<W;z++)I[z]!==x[z]&&(n.disableVertexAttribArray(z),I[z]=0)}function v(x,I,z,W,ee,se,N){N===!0?n.vertexAttribIPointer(x,I,z,ee,se):n.vertexAttribPointer(x,I,z,W,ee,se)}function y(x,I,z,W){_();let ee=W.attributes,se=z.getAttributes(),N=I.defaultAttributeValues;for(let H in se){let L=se[H];if(L.location>=0){let te=ee[H];if(te===void 0&&(H==="instanceMatrix"&&x.instanceMatrix&&(te=x.instanceMatrix),H==="instanceColor"&&x.instanceColor&&(te=x.instanceColor)),te!==void 0){let Se=te.normalized,Pe=te.itemSize,Ge=e.get(te);if(Ge===void 0)continue;let St=Ge.buffer,K=Ge.type,Re=Ge.bytesPerElement,We=K===n.INT||K===n.UNSIGNED_INT||te.gpuType===M_;if(te.isInterleavedBufferAttribute){let ve=te.data,ze=ve.stride,qe=te.offset;if(ve.isInstancedInterleavedBuffer){for(let Be=0;Be<L.locationSize;Be++)p(L.location+Be,ve.meshPerAttribute);x.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=ve.meshPerAttribute*ve.count)}else for(let Be=0;Be<L.locationSize;Be++)g(L.location+Be);n.bindBuffer(n.ARRAY_BUFFER,St);for(let Be=0;Be<L.locationSize;Be++)v(L.location+Be,Pe/L.locationSize,K,Se,ze*Re,(qe+Pe/L.locationSize*Be)*Re,We)}else{if(te.isInstancedBufferAttribute){for(let ve=0;ve<L.locationSize;ve++)p(L.location+ve,te.meshPerAttribute);x.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let ve=0;ve<L.locationSize;ve++)g(L.location+ve);n.bindBuffer(n.ARRAY_BUFFER,St);for(let ve=0;ve<L.locationSize;ve++)v(L.location+ve,Pe/L.locationSize,K,Se,Pe*Re,Pe/L.locationSize*ve*Re,We)}}else if(N!==void 0){let Se=N[H];if(Se!==void 0)switch(Se.length){case 2:n.vertexAttrib2fv(L.location,Se);break;case 3:n.vertexAttrib3fv(L.location,Se);break;case 4:n.vertexAttrib4fv(L.location,Se);break;default:n.vertexAttrib1fv(L.location,Se)}}}}b()}function R(){A();for(let x in i){let I=i[x];for(let z in I){let W=I[z];for(let ee in W)d(W[ee].object),delete W[ee];delete I[z]}delete i[x]}}function S(x){if(i[x.id]===void 0)return;let I=i[x.id];for(let z in I){let W=I[z];for(let ee in W)d(W[ee].object),delete W[ee];delete I[z]}delete i[x.id]}function T(x){for(let I in i){let z=i[I];if(z[x.id]===void 0)continue;let W=z[x.id];for(let ee in W)d(W[ee].object),delete W[ee];delete z[x.id]}}function A(){M(),s=!0,o!==r&&(o=r,c(o.object))}function M(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:A,resetDefaultState:M,dispose:R,releaseStatesOfGeometry:S,releaseStatesOfProgram:T,initAttributes:_,enableAttribute:g,disableUnusedAttributes:b}}function KK(n,e,t){let i;function r(c){i=c}function o(c,d){n.drawArrays(i,c,d),t.update(d,i,1)}function s(c,d,u){u!==0&&(n.drawArraysInstanced(i,c,d,u),t.update(d,i,u))}function a(c,d,u){if(u===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,d,0,u);let f=0;for(let m=0;m<u;m++)f+=d[m];t.update(f,i,1)}function l(c,d,u,h){if(u===0)return;let f=e.get("WEBGL_multi_draw");if(f===null)for(let m=0;m<c.length;m++)s(c[m],d[m],h[m]);else{f.multiDrawArraysInstancedWEBGL(i,c,0,d,0,h,0,u);let m=0;for(let _=0;_<u;_++)m+=d[_]*h[_];t.update(m,i,1)}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function JK(n,e,t,i){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let T=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(T){return!(T!==Or&&i.convert(T)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(T){let A=T===zi&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(T!==ea&&i.convert(T)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&T!==nr&&!A)}function l(T){if(T==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";T="mediump"}return T==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp",d=l(c);d!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",d,"instead."),c=d);let u=t.logarithmicDepthBuffer===!0,h=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),_=n.getParameter(n.MAX_TEXTURE_SIZE),g=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),p=n.getParameter(n.MAX_VERTEX_ATTRIBS),b=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),v=n.getParameter(n.MAX_VARYING_VECTORS),y=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),R=m>0,S=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:u,reverseDepthBuffer:h,maxTextures:f,maxVertexTextures:m,maxTextureSize:_,maxCubemapSize:g,maxAttributes:p,maxVertexUniforms:b,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:R,maxSamples:S}}function eJ(n){let e=this,t=null,i=0,r=!1,o=!1,s=new ir,a=new $t,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,h){let f=u.length!==0||h||i!==0||r;return r=h,i=u.length,f},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(u,h){t=d(u,h,0)},this.setState=function(u,h,f){let m=u.clippingPlanes,_=u.clipIntersection,g=u.clipShadows,p=n.get(u);if(!r||m===null||m.length===0||o&&!g)o?d(null):c();else{let b=o?0:i,v=b*4,y=p.clippingState||null;l.value=y,y=d(m,h,v,f);for(let R=0;R!==v;++R)y[R]=t[R];p.clippingState=y,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=b}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(u,h,f,m){let _=u!==null?u.length:0,g=null;if(_!==0){if(g=l.value,m!==!0||g===null){let p=f+_*4,b=h.matrixWorldInverse;a.getNormalMatrix(b),(g===null||g.length<p)&&(g=new Float32Array(p));for(let v=0,y=f;v!==_;++v,y+=4)s.copy(u[v]).applyMatrix4(b,a),s.normal.toArray(g,y),g[y+3]=s.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,g}}function tJ(n){let e=new WeakMap;function t(s,a){return a===Vf?s.mapping=Oa:a===zf&&(s.mapping=Pl),s}function i(s){if(s&&s.isTexture){let a=s.mapping;if(a===Vf||a===zf)if(e.has(s)){let l=e.get(s).texture;return t(l,s.mapping)}else{let l=s.image;if(l&&l.height>0){let c=new Sg(l.height);return c.fromEquirectangularTexture(n,s),e.set(s,c),s.addEventListener("dispose",r),t(c.texture,s.mapping)}else return null}}return s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}var Kf=4,rU=[.125,.215,.35,.446,.526,.582],Cu=20,s1=new yo,oU=new he,a1=null,l1=0,c1=0,d1=!1,Ru=(1+Math.sqrt(5))/2,Qf=1/Ru,sU=[new w(-Ru,Qf,0),new w(Ru,Qf,0),new w(-Qf,0,Ru),new w(Qf,0,Ru),new w(0,Ru,-Qf),new w(0,Ru,Qf),new w(-1,1,-1),new w(1,1,-1),new w(-1,1,1),new w(1,1,1)],ob=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){a1=this._renderer.getRenderTarget(),l1=this._renderer.getActiveCubeFace(),c1=this._renderer.getActiveMipmapLevel(),d1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,i,r,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=cU(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=lU(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(a1,l1,c1),this._renderer.xr.enabled=d1,e.scissorTest=!1,Gw(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Oa||e.mapping===Pl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),a1=this._renderer.getRenderTarget(),l1=this._renderer.getActiveCubeFace(),c1=this._renderer.getActiveMipmapLevel(),d1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:bn,minFilter:bn,generateMipmaps:!1,type:zi,format:Or,colorSpace:Gn,depthBuffer:!1},r=aU(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=aU(e,t,i);let{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=iJ(o)),this._blurMaterial=nJ(o,e,t)}return r}_compileMaterial(e){let t=new ke(this._lodPlanes[0],e);this._renderer.compile(t,s1)}_sceneToCubeUV(e,t,i,r){let a=new rn(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,u=d.autoClear,h=d.toneMapping;d.getClearColor(oU),d.toneMapping=ka,d.autoClear=!1;let f=new on({name:"PMREM.Background",side:Br,depthWrite:!1,depthTest:!1}),m=new ke(new Qi,f),_=!1,g=e.background;g?g.isColor&&(f.color.copy(g),e.background=null,_=!0):(f.color.copy(oU),_=!0);for(let p=0;p<6;p++){let b=p%3;b===0?(a.up.set(0,l[p],0),a.lookAt(c[p],0,0)):b===1?(a.up.set(0,0,l[p]),a.lookAt(0,c[p],0)):(a.up.set(0,l[p],0),a.lookAt(0,0,c[p]));let v=this._cubeSize;Gw(r,b*v,p>2?v:0,v,v),d.setRenderTarget(r),_&&d.render(m,a),d.render(e,a)}m.geometry.dispose(),m.material.dispose(),d.toneMapping=h,d.autoClear=u,e.background=g}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===Oa||e.mapping===Pl;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=cU()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=lU());let o=r?this._cubemapMaterial:this._equirectMaterial,s=new ke(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;let l=this._cubeSize;Gw(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(s,s1)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;let r=this._lodPlanes.length;for(let o=1;o<r;o++){let s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=sU[(r-o-1)%sU.length];this._blur(e,o-1,o,s,a)}t.autoClear=i}_blur(e,t,i,r,o){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",o),this._halfBlur(s,e,i,i,r,"longitudinal",o)}_halfBlur(e,t,i,r,o,s,a){let l=this._renderer,c=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let d=3,u=new ke(this._lodPlanes[r],c),h=c.uniforms,f=this._sizeLods[i]-1,m=isFinite(o)?Math.PI/(2*f):2*Math.PI/(2*Cu-1),_=o/m,g=isFinite(o)?1+Math.floor(d*_):Cu;g>Cu&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Cu}`);let p=[],b=0;for(let T=0;T<Cu;++T){let A=T/_,M=Math.exp(-A*A/2);p.push(M),T===0?b+=M:T<g&&(b+=2*M)}for(let T=0;T<p.length;T++)p[T]=p[T]/b;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=p,h.latitudinal.value=s==="latitudinal",a&&(h.poleAxis.value=a);let{_lodMax:v}=this;h.dTheta.value=m,h.mipInt.value=v-i;let y=this._sizeLods[r],R=3*y*(r>v-Kf?r-v+Kf:0),S=4*(this._cubeSize-y);Gw(t,R,S,3*y,2*y),l.setRenderTarget(t),l.render(u,s1)}};function iJ(n){let e=[],t=[],i=[],r=n,o=n-Kf+1+rU.length;for(let s=0;s<o;s++){let a=Math.pow(2,r);t.push(a);let l=1/a;s>n-Kf?l=rU[s-n+Kf-1]:s===0&&(l=0),i.push(l);let c=1/(a-2),d=-c,u=1+c,h=[d,d,u,d,u,u,d,d,u,u,d,u],f=6,m=6,_=3,g=2,p=1,b=new Float32Array(_*m*f),v=new Float32Array(g*m*f),y=new Float32Array(p*m*f);for(let S=0;S<f;S++){let T=S%3*2/3-1,A=S>2?0:-1,M=[T,A,0,T+2/3,A,0,T+2/3,A+1,0,T,A,0,T+2/3,A+1,0,T,A+1,0];b.set(M,_*m*S),v.set(h,g*m*S);let x=[S,S,S,S,S,S];y.set(x,p*m*S)}let R=new bt;R.setAttribute("position",new mi(b,_)),R.setAttribute("uv",new mi(v,g)),R.setAttribute("faceIndex",new mi(y,p)),e.push(R),r>Kf&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function aU(n,e,t){let i=new ti(n,e,t);return i.texture.mapping=yu,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Gw(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function nJ(n,e,t){let i=new Float32Array(Cu),r=new w(0,1,0);return new Et({name:"SphericalGaussianBlur",defines:{n:Cu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:y1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ii,depthTest:!1,depthWrite:!1})}function lU(){return new Et({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:y1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ii,depthTest:!1,depthWrite:!1})}function cU(){return new Et({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:y1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ii,depthTest:!1,depthWrite:!1})}function y1(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function rJ(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){let l=a.mapping,c=l===Vf||l===zf,d=l===Oa||l===Pl;if(c||d){let u=e.get(a),h=u!==void 0?u.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return t===null&&(t=new ob(n)),u=c?t.fromEquirectangular(a,u):t.fromCubemap(a,u),u.texture.pmremVersion=a.pmremVersion,e.set(a,u),u.texture;if(u!==void 0)return u.texture;{let f=a.image;return c&&f&&f.height>0||d&&f&&r(f)?(t===null&&(t=new ob(n)),u=c?t.fromEquirectangular(a):t.fromCubemap(a),u.texture.pmremVersion=a.pmremVersion,e.set(a,u),a.addEventListener("dispose",o),u.texture):null}}}return a}function r(a){let l=0,c=6;for(let d=0;d<c;d++)a[d]!==void 0&&l++;return l===c}function o(a){let l=a.target;l.removeEventListener("dispose",o);let c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:s}}function oJ(n){let e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){let r=t(i);return r===null&&wu("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function sJ(n,e,t,i){let r={},o=new WeakMap;function s(u){let h=u.target;h.index!==null&&e.remove(h.index);for(let m in h.attributes)e.remove(h.attributes[m]);h.removeEventListener("dispose",s),delete r[h.id];let f=o.get(h);f&&(e.remove(f),o.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(u,h){return r[h.id]===!0||(h.addEventListener("dispose",s),r[h.id]=!0,t.memory.geometries++),h}function l(u){let h=u.attributes;for(let f in h)e.update(h[f],n.ARRAY_BUFFER)}function c(u){let h=[],f=u.index,m=u.attributes.position,_=0;if(f!==null){let b=f.array;_=f.version;for(let v=0,y=b.length;v<y;v+=3){let R=b[v+0],S=b[v+1],T=b[v+2];h.push(R,S,S,T,T,R)}}else if(m!==void 0){let b=m.array;_=m.version;for(let v=0,y=b.length/3-1;v<y;v+=3){let R=v+0,S=v+1,T=v+2;h.push(R,S,S,T,T,R)}}else return;let g=new(KD(h)?Mf:wf)(h,1);g.version=_;let p=o.get(u);p&&e.remove(p),o.set(u,g)}function d(u){let h=o.get(u);if(h){let f=u.index;f!==null&&h.version<f.version&&c(u)}else c(u);return o.get(u)}return{get:a,update:l,getWireframeAttribute:d}}function aJ(n,e,t){let i;function r(h){i=h}let o,s;function a(h){o=h.type,s=h.bytesPerElement}function l(h,f){n.drawElements(i,f,o,h*s),t.update(f,i,1)}function c(h,f,m){m!==0&&(n.drawElementsInstanced(i,f,o,h*s,m),t.update(f,i,m))}function d(h,f,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,f,0,o,h,0,m);let g=0;for(let p=0;p<m;p++)g+=f[p];t.update(g,i,1)}function u(h,f,m,_){if(m===0)return;let g=e.get("WEBGL_multi_draw");if(g===null)for(let p=0;p<h.length;p++)c(h[p]/s,f[p],_[p]);else{g.multiDrawElementsInstancedWEBGL(i,f,0,o,h,0,_,0,m);let p=0;for(let b=0;b<m;b++)p+=f[b]*_[b];t.update(p,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=d,this.renderMultiDrawInstances=u}function lJ(n){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,a){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=a*(o/3);break;case n.LINES:t.lines+=a*(o/2);break;case n.LINE_STRIP:t.lines+=a*(o-1);break;case n.LINE_LOOP:t.lines+=a*o;break;case n.POINTS:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function cJ(n,e,t){let i=new WeakMap,r=new li;function o(s,a,l){let c=s.morphTargetInfluences,d=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,u=d!==void 0?d.length:0,h=i.get(a);if(h===void 0||h.count!==u){let x=function(){A.dispose(),i.delete(a),a.removeEventListener("dispose",x)};var f=x;h!==void 0&&h.texture.dispose();let m=a.morphAttributes.position!==void 0,_=a.morphAttributes.normal!==void 0,g=a.morphAttributes.color!==void 0,p=a.morphAttributes.position||[],b=a.morphAttributes.normal||[],v=a.morphAttributes.color||[],y=0;m===!0&&(y=1),_===!0&&(y=2),g===!0&&(y=3);let R=a.attributes.position.count*y,S=1;R>e.maxTextureSize&&(S=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);let T=new Float32Array(R*S*4*u),A=new nu(T,R,S,u);A.type=nr,A.needsUpdate=!0;let M=y*4;for(let I=0;I<u;I++){let z=p[I],W=b[I],ee=v[I],se=R*S*4*I;for(let N=0;N<z.count;N++){let H=N*M;m===!0&&(r.fromBufferAttribute(z,N),T[se+H+0]=r.x,T[se+H+1]=r.y,T[se+H+2]=r.z,T[se+H+3]=0),_===!0&&(r.fromBufferAttribute(W,N),T[se+H+4]=r.x,T[se+H+5]=r.y,T[se+H+6]=r.z,T[se+H+7]=0),g===!0&&(r.fromBufferAttribute(ee,N),T[se+H+8]=r.x,T[se+H+9]=r.y,T[se+H+10]=r.z,T[se+H+11]=ee.itemSize===4?r.w:1)}}h={count:u,texture:A,size:new V(R,S)},i.set(a,h),a.addEventListener("dispose",x)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let m=0;for(let g=0;g<c.length;g++)m+=c[g];let _=a.morphTargetsRelative?1:1-m;l.getUniforms().setValue(n,"morphTargetBaseInfluence",_),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",h.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:o}}function dJ(n,e,t,i){let r=new WeakMap;function o(l){let c=i.render.frame,d=l.geometry,u=e.get(l,d);if(r.get(u)!==c&&(e.update(u),r.set(u,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){let h=l.skeleton;r.get(h)!==c&&(h.update(),r.set(h,c))}return u}function s(){r=new WeakMap}function a(l){let c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:o,dispose:s}}var EU=new yn,dU=new ps(1,1),DU=new nu,AU=new xf,IU=new Ac,uU=[],hU=[],fU=new Float32Array(16),pU=new Float32Array(9),mU=new Float32Array(4);function ep(n,e,t){let i=n[0];if(i<=0||i>0)return n;let r=e*t,o=uU[r];if(o===void 0&&(o=new Float32Array(r),uU[r]=o),e!==0){i.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function rr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function or(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function $w(n,e){let t=hU[e];t===void 0&&(t=new Int32Array(e),hU[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function uJ(n,e){let t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function hJ(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(rr(t,e))return;n.uniform2fv(this.addr,e),or(t,e)}}function fJ(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(rr(t,e))return;n.uniform3fv(this.addr,e),or(t,e)}}function pJ(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(rr(t,e))return;n.uniform4fv(this.addr,e),or(t,e)}}function mJ(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(rr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),or(t,e)}else{if(rr(t,i))return;mU.set(i),n.uniformMatrix2fv(this.addr,!1,mU),or(t,i)}}function gJ(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(rr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),or(t,e)}else{if(rr(t,i))return;pU.set(i),n.uniformMatrix3fv(this.addr,!1,pU),or(t,i)}}function _J(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(rr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),or(t,e)}else{if(rr(t,i))return;fU.set(i),n.uniformMatrix4fv(this.addr,!1,fU),or(t,i)}}function bJ(n,e){let t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function vJ(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(rr(t,e))return;n.uniform2iv(this.addr,e),or(t,e)}}function yJ(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(rr(t,e))return;n.uniform3iv(this.addr,e),or(t,e)}}function xJ(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(rr(t,e))return;n.uniform4iv(this.addr,e),or(t,e)}}function wJ(n,e){let t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function MJ(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(rr(t,e))return;n.uniform2uiv(this.addr,e),or(t,e)}}function SJ(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(rr(t,e))return;n.uniform3uiv(this.addr,e),or(t,e)}}function TJ(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(rr(t,e))return;n.uniform4uiv(this.addr,e),or(t,e)}}function RJ(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let o;this.type===n.SAMPLER_2D_SHADOW?(dU.compareFunction=Bw,o=dU):o=EU,t.setTexture2D(e||o,r)}function CJ(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||AU,r)}function EJ(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||IU,r)}function DJ(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||DU,r)}function AJ(n){switch(n){case 5126:return uJ;case 35664:return hJ;case 35665:return fJ;case 35666:return pJ;case 35674:return mJ;case 35675:return gJ;case 35676:return _J;case 5124:case 35670:return bJ;case 35667:case 35671:return vJ;case 35668:case 35672:return yJ;case 35669:case 35673:return xJ;case 5125:return wJ;case 36294:return MJ;case 36295:return SJ;case 36296:return TJ;case 35678:case 36198:case 36298:case 36306:case 35682:return RJ;case 35679:case 36299:case 36307:return CJ;case 35680:case 36300:case 36308:case 36293:return EJ;case 36289:case 36303:case 36311:case 36292:return DJ}}function IJ(n,e){n.uniform1fv(this.addr,e)}function PJ(n,e){let t=ep(e,this.size,2);n.uniform2fv(this.addr,t)}function FJ(n,e){let t=ep(e,this.size,3);n.uniform3fv(this.addr,t)}function kJ(n,e){let t=ep(e,this.size,4);n.uniform4fv(this.addr,t)}function OJ(n,e){let t=ep(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function jJ(n,e){let t=ep(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function NJ(n,e){let t=ep(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function LJ(n,e){n.uniform1iv(this.addr,e)}function BJ(n,e){n.uniform2iv(this.addr,e)}function UJ(n,e){n.uniform3iv(this.addr,e)}function VJ(n,e){n.uniform4iv(this.addr,e)}function zJ(n,e){n.uniform1uiv(this.addr,e)}function HJ(n,e){n.uniform2uiv(this.addr,e)}function GJ(n,e){n.uniform3uiv(this.addr,e)}function WJ(n,e){n.uniform4uiv(this.addr,e)}function $J(n,e,t){let i=this.cache,r=e.length,o=$w(t,r);rr(i,o)||(n.uniform1iv(this.addr,o),or(i,o));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||EU,o[s])}function qJ(n,e,t){let i=this.cache,r=e.length,o=$w(t,r);rr(i,o)||(n.uniform1iv(this.addr,o),or(i,o));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||AU,o[s])}function XJ(n,e,t){let i=this.cache,r=e.length,o=$w(t,r);rr(i,o)||(n.uniform1iv(this.addr,o),or(i,o));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||IU,o[s])}function YJ(n,e,t){let i=this.cache,r=e.length,o=$w(t,r);rr(i,o)||(n.uniform1iv(this.addr,o),or(i,o));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||DU,o[s])}function ZJ(n){switch(n){case 5126:return IJ;case 35664:return PJ;case 35665:return FJ;case 35666:return kJ;case 35674:return OJ;case 35675:return jJ;case 35676:return NJ;case 5124:case 35670:return LJ;case 35667:case 35671:return BJ;case 35668:case 35672:return UJ;case 35669:case 35673:return VJ;case 5125:return zJ;case 36294:return HJ;case 36295:return GJ;case 36296:return WJ;case 35678:case 36198:case 36298:case 36306:case 35682:return $J;case 35679:case 36299:case 36307:return qJ;case 35680:case 36300:case 36308:case 36293:return XJ;case 36289:case 36303:case 36311:case 36292:return YJ}}var h1=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=AJ(t.type)}},f1=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=ZJ(t.type)}},p1=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let r=this.seq;for(let o=0,s=r.length;o!==s;++o){let a=r[o];a.setValue(e,t[a.id],i)}}},u1=/(\w+)(\])?(\[|\.)?/g;function gU(n,e){n.seq.push(e),n.map[e.id]=e}function QJ(n,e,t){let i=n.name,r=i.length;for(u1.lastIndex=0;;){let o=u1.exec(i),s=u1.lastIndex,a=o[1],l=o[2]==="]",c=o[3];if(l&&(a=a|0),c===void 0||c==="["&&s+2===r){gU(t,c===void 0?new h1(a,n,e):new f1(a,n,e));break}else{let u=t.map[a];u===void 0&&(u=new p1(a),gU(t,u)),t=u}}}var Jf=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let o=e.getActiveUniform(t,r),s=e.getUniformLocation(t,o.name);QJ(o,s,this)}}setValue(e,t,i,r){let o=this.map[t];o!==void 0&&o.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let o=0,s=t.length;o!==s;++o){let a=t[o],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,o=e.length;r!==o;++r){let s=e[r];s.id in t&&i.push(s)}return i}};function _U(n,e,t){let i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}var KJ=37297,JJ=0;function eee(n,e){let t=n.split(`
`),i=[],r=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=r;s<o;s++){let a=s+1;i.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return i.join(`
`)}var bU=new $t;function tee(n){ui._getMatrix(bU,ui.workingColorSpace,n);let e=`mat3( ${bU.elements.map(t=>t.toFixed(4))} )`;switch(ui.getTransfer(n)){case _f:return[e,"LinearTransferOETF"];case Vi:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function vU(n,e,t){let i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";let o=/ERROR: 0:(\d+)/.exec(r);if(o){let s=parseInt(o[1]);return t.toUpperCase()+`

`+r+`

`+eee(n.getShaderSource(e),s)}else return r}function iee(n,e){let t=tee(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function nee(n,e){let t;switch(e){case PD:t="Linear";break;case FD:t="Reinhard";break;case kD:t="Cineon";break;case OD:t="ACESFilmic";break;case ND:t="AgX";break;case LD:t="Neutral";break;case jD:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}var Ww=new w;function ree(){ui.getLuminanceCoefficients(Ww);let n=Ww.x.toFixed(4),e=Ww.y.toFixed(4),t=Ww.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function oee(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(nb).join(`
`)}function see(n){let e=[];for(let t in n){let i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function aee(n,e){let t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let o=n.getActiveAttrib(e,r),s=o.name,a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),t[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return t}function nb(n){return n!==""}function yU(n,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function xU(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var lee=/^[ \t]*#include +<([\w\d./]+)>/gm;function m1(n){return n.replace(lee,dee)}var cee=new Map;function dee(n,e){let t=ci[e];if(t===void 0){let i=cee.get(e);if(i!==void 0)t=ci[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return m1(t)}var uee=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function wU(n){return n.replace(uee,hee)}function hee(n,e,t,i){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function MU(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function fee(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Tw?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===mD?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Js&&(e="SHADOWMAP_TYPE_VSM"),e}function pee(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Oa:case Pl:e="ENVMAP_TYPE_CUBE";break;case yu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function mee(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Pl:e="ENVMAP_MODE_REFRACTION";break}return e}function gee(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Uf:e="ENVMAP_BLENDING_MULTIPLY";break;case AD:e="ENVMAP_BLENDING_MIX";break;case ID:e="ENVMAP_BLENDING_ADD";break}return e}function _ee(n){let e=n.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function bee(n,e,t,i){let r=n.getContext(),o=t.defines,s=t.vertexShader,a=t.fragmentShader,l=fee(t),c=pee(t),d=mee(t),u=gee(t),h=_ee(t),f=oee(t),m=see(o),_=r.createProgram(),g,p,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(nb).join(`
`),g.length>0&&(g+=`
`),p=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(nb).join(`
`),p.length>0&&(p+=`
`)):(g=[MU(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(nb).join(`
`),p=[MU(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ka?"#define TONE_MAPPING":"",t.toneMapping!==ka?ci.tonemapping_pars_fragment:"",t.toneMapping!==ka?nee("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ci.colorspace_pars_fragment,iee("linearToOutputTexel",t.outputColorSpace),ree(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(nb).join(`
`)),s=m1(s),s=yU(s,t),s=xU(s,t),a=m1(a),a=yU(a,t),a=xU(a,t),s=wU(s),a=wU(a),t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,g=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,p=["#define varying in",t.glslVersion===Uw?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Uw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);let v=b+g+s,y=b+p+a,R=_U(r,r.VERTEX_SHADER,v),S=_U(r,r.FRAGMENT_SHADER,y);r.attachShader(_,R),r.attachShader(_,S),t.index0AttributeName!==void 0?r.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_);function T(I){if(n.debug.checkShaderErrors){let z=r.getProgramInfoLog(_).trim(),W=r.getShaderInfoLog(R).trim(),ee=r.getShaderInfoLog(S).trim(),se=!0,N=!0;if(r.getProgramParameter(_,r.LINK_STATUS)===!1)if(se=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,_,R,S);else{let H=vU(r,R,"vertex"),L=vU(r,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(_,r.VALIDATE_STATUS)+`

Material Name: `+I.name+`
Material Type: `+I.type+`

Program Info Log: `+z+`
`+H+`
`+L)}else z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",z):(W===""||ee==="")&&(N=!1);N&&(I.diagnostics={runnable:se,programLog:z,vertexShader:{log:W,prefix:g},fragmentShader:{log:ee,prefix:p}})}r.deleteShader(R),r.deleteShader(S),A=new Jf(r,_),M=aee(r,_)}let A;this.getUniforms=function(){return A===void 0&&T(this),A};let M;this.getAttributes=function(){return M===void 0&&T(this),M};let x=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return x===!1&&(x=r.getProgramParameter(_,KJ)),x},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=JJ++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=R,this.fragmentShader=S,this}var vee=0,g1=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return i===void 0&&(i=new _1(e),t.set(e,i)),i}},_1=class{constructor(e){this.id=vee++,this.code=e,this.usedTimes=0}};function yee(n,e,t,i,r,o,s){let a=new ru,l=new g1,c=new Set,d=[],u=r.logarithmicDepthBuffer,h=r.vertexTextures,f=r.precision,m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(M){return c.add(M),M===0?"uv":`uv${M}`}function g(M,x,I,z,W){let ee=z.fog,se=W.geometry,N=M.isMeshStandardMaterial?z.environment:null,H=(M.isMeshStandardMaterial?t:e).get(M.envMap||N),L=H&&H.mapping===yu?H.image.height:null,te=m[M.type];M.precision!==null&&(f=r.getMaxPrecision(M.precision),f!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",f,"instead."));let Se=se.morphAttributes.position||se.morphAttributes.normal||se.morphAttributes.color,Pe=Se!==void 0?Se.length:0,Ge=0;se.morphAttributes.position!==void 0&&(Ge=1),se.morphAttributes.normal!==void 0&&(Ge=2),se.morphAttributes.color!==void 0&&(Ge=3);let St,K,Re,We;if(te){let Gi=ta[te];St=Gi.vertexShader,K=Gi.fragmentShader}else St=M.vertexShader,K=M.fragmentShader,l.update(M),Re=l.getVertexShaderID(M),We=l.getFragmentShaderID(M);let ve=n.getRenderTarget(),ze=n.state.buffers.depth.getReversed(),qe=W.isInstancedMesh===!0,Be=W.isBatchedMesh===!0,di=!!M.map,xe=!!M.matcap,Fe=!!H,F=!!M.aoMap,pt=!!M.lightMap,Ce=!!M.bumpMap,Je=!!M.normalMap,Oe=!!M.displacementMap,wt=!!M.emissiveMap,$e=!!M.metalnessMap,P=!!M.roughnessMap,C=M.anisotropy>0,X=M.clearcoat>0,pe=M.dispersion>0,Me=M.iridescence>0,ge=M.sheen>0,ut=M.transmission>0,je=C&&!!M.anisotropyMap,Xe=X&&!!M.clearcoatMap,Qt=X&&!!M.clearcoatNormalMap,Ee=X&&!!M.clearcoatRoughnessMap,ot=Me&&!!M.iridescenceMap,Tt=Me&&!!M.iridescenceThicknessMap,kt=ge&&!!M.sheenColorMap,st=ge&&!!M.sheenRoughnessMap,Mi=!!M.specularMap,jt=!!M.specularColorMap,Di=!!M.specularIntensityMap,B=ut&&!!M.transmissionMap,Le=ut&&!!M.thicknessMap,de=!!M.gradientMap,we=!!M.alphaMap,et=M.alphaTest>0,Ze=!!M.alphaHash,si=!!M.extensions,Rn=ka;M.toneMapped&&(ve===null||ve.isXRRenderTarget===!0)&&(Rn=n.toneMapping);let Cr={shaderID:te,shaderType:M.type,shaderName:M.name,vertexShader:St,fragmentShader:K,defines:M.defines,customVertexShaderID:Re,customFragmentShaderID:We,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:f,batching:Be,batchingColor:Be&&W._colorsTexture!==null,instancing:qe,instancingColor:qe&&W.instanceColor!==null,instancingMorph:qe&&W.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:ve===null?n.outputColorSpace:ve.isXRRenderTarget===!0?ve.texture.colorSpace:Gn,alphaToCoverage:!!M.alphaToCoverage,map:di,matcap:xe,envMap:Fe,envMapMode:Fe&&H.mapping,envMapCubeUVHeight:L,aoMap:F,lightMap:pt,bumpMap:Ce,normalMap:Je,displacementMap:h&&Oe,emissiveMap:wt,normalMapObjectSpace:Je&&M.normalMapType===HD,normalMapTangentSpace:Je&&M.normalMapType===jl,metalnessMap:$e,roughnessMap:P,anisotropy:C,anisotropyMap:je,clearcoat:X,clearcoatMap:Xe,clearcoatNormalMap:Qt,clearcoatRoughnessMap:Ee,dispersion:pe,iridescence:Me,iridescenceMap:ot,iridescenceThicknessMap:Tt,sheen:ge,sheenColorMap:kt,sheenRoughnessMap:st,specularMap:Mi,specularColorMap:jt,specularIntensityMap:Di,transmission:ut,transmissionMap:B,thicknessMap:Le,gradientMap:de,opaque:M.transparent===!1&&M.blending===us&&M.alphaToCoverage===!1,alphaMap:we,alphaTest:et,alphaHash:Ze,combine:M.combine,mapUv:di&&_(M.map.channel),aoMapUv:F&&_(M.aoMap.channel),lightMapUv:pt&&_(M.lightMap.channel),bumpMapUv:Ce&&_(M.bumpMap.channel),normalMapUv:Je&&_(M.normalMap.channel),displacementMapUv:Oe&&_(M.displacementMap.channel),emissiveMapUv:wt&&_(M.emissiveMap.channel),metalnessMapUv:$e&&_(M.metalnessMap.channel),roughnessMapUv:P&&_(M.roughnessMap.channel),anisotropyMapUv:je&&_(M.anisotropyMap.channel),clearcoatMapUv:Xe&&_(M.clearcoatMap.channel),clearcoatNormalMapUv:Qt&&_(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ee&&_(M.clearcoatRoughnessMap.channel),iridescenceMapUv:ot&&_(M.iridescenceMap.channel),iridescenceThicknessMapUv:Tt&&_(M.iridescenceThicknessMap.channel),sheenColorMapUv:kt&&_(M.sheenColorMap.channel),sheenRoughnessMapUv:st&&_(M.sheenRoughnessMap.channel),specularMapUv:Mi&&_(M.specularMap.channel),specularColorMapUv:jt&&_(M.specularColorMap.channel),specularIntensityMapUv:Di&&_(M.specularIntensityMap.channel),transmissionMapUv:B&&_(M.transmissionMap.channel),thicknessMapUv:Le&&_(M.thicknessMap.channel),alphaMapUv:we&&_(M.alphaMap.channel),vertexTangents:!!se.attributes.tangent&&(Je||C),vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!se.attributes.color&&se.attributes.color.itemSize===4,pointsUvs:W.isPoints===!0&&!!se.attributes.uv&&(di||we),fog:!!ee,useFog:M.fog===!0,fogExp2:!!ee&&ee.isFogExp2,flatShading:M.flatShading===!0,sizeAttenuation:M.sizeAttenuation===!0,logarithmicDepthBuffer:u,reverseDepthBuffer:ze,skinning:W.isSkinnedMesh===!0,morphTargets:se.morphAttributes.position!==void 0,morphNormals:se.morphAttributes.normal!==void 0,morphColors:se.morphAttributes.color!==void 0,morphTargetsCount:Pe,morphTextureStride:Ge,numDirLights:x.directional.length,numPointLights:x.point.length,numSpotLights:x.spot.length,numSpotLightMaps:x.spotLightMap.length,numRectAreaLights:x.rectArea.length,numHemiLights:x.hemi.length,numDirLightShadows:x.directionalShadowMap.length,numPointLightShadows:x.pointShadowMap.length,numSpotLightShadows:x.spotShadowMap.length,numSpotLightShadowsWithMaps:x.numSpotLightShadowsWithMaps,numLightProbes:x.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:M.dithering,shadowMapEnabled:n.shadowMap.enabled&&I.length>0,shadowMapType:n.shadowMap.type,toneMapping:Rn,decodeVideoTexture:di&&M.map.isVideoTexture===!0&&ui.getTransfer(M.map.colorSpace)===Vi,decodeVideoTextureEmissive:wt&&M.emissiveMap.isVideoTexture===!0&&ui.getTransfer(M.emissiveMap.colorSpace)===Vi,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===$n,flipSided:M.side===Br,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionClipCullDistance:si&&M.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(si&&M.extensions.multiDraw===!0||Be)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:M.customProgramCacheKey()};return Cr.vertexUv1s=c.has(1),Cr.vertexUv2s=c.has(2),Cr.vertexUv3s=c.has(3),c.clear(),Cr}function p(M){let x=[];if(M.shaderID?x.push(M.shaderID):(x.push(M.customVertexShaderID),x.push(M.customFragmentShaderID)),M.defines!==void 0)for(let I in M.defines)x.push(I),x.push(M.defines[I]);return M.isRawShaderMaterial===!1&&(b(x,M),v(x,M),x.push(n.outputColorSpace)),x.push(M.customProgramCacheKey),x.join()}function b(M,x){M.push(x.precision),M.push(x.outputColorSpace),M.push(x.envMapMode),M.push(x.envMapCubeUVHeight),M.push(x.mapUv),M.push(x.alphaMapUv),M.push(x.lightMapUv),M.push(x.aoMapUv),M.push(x.bumpMapUv),M.push(x.normalMapUv),M.push(x.displacementMapUv),M.push(x.emissiveMapUv),M.push(x.metalnessMapUv),M.push(x.roughnessMapUv),M.push(x.anisotropyMapUv),M.push(x.clearcoatMapUv),M.push(x.clearcoatNormalMapUv),M.push(x.clearcoatRoughnessMapUv),M.push(x.iridescenceMapUv),M.push(x.iridescenceThicknessMapUv),M.push(x.sheenColorMapUv),M.push(x.sheenRoughnessMapUv),M.push(x.specularMapUv),M.push(x.specularColorMapUv),M.push(x.specularIntensityMapUv),M.push(x.transmissionMapUv),M.push(x.thicknessMapUv),M.push(x.combine),M.push(x.fogExp2),M.push(x.sizeAttenuation),M.push(x.morphTargetsCount),M.push(x.morphAttributeCount),M.push(x.numDirLights),M.push(x.numPointLights),M.push(x.numSpotLights),M.push(x.numSpotLightMaps),M.push(x.numHemiLights),M.push(x.numRectAreaLights),M.push(x.numDirLightShadows),M.push(x.numPointLightShadows),M.push(x.numSpotLightShadows),M.push(x.numSpotLightShadowsWithMaps),M.push(x.numLightProbes),M.push(x.shadowMapType),M.push(x.toneMapping),M.push(x.numClippingPlanes),M.push(x.numClipIntersection),M.push(x.depthPacking)}function v(M,x){a.disableAll(),x.supportsVertexTextures&&a.enable(0),x.instancing&&a.enable(1),x.instancingColor&&a.enable(2),x.instancingMorph&&a.enable(3),x.matcap&&a.enable(4),x.envMap&&a.enable(5),x.normalMapObjectSpace&&a.enable(6),x.normalMapTangentSpace&&a.enable(7),x.clearcoat&&a.enable(8),x.iridescence&&a.enable(9),x.alphaTest&&a.enable(10),x.vertexColors&&a.enable(11),x.vertexAlphas&&a.enable(12),x.vertexUv1s&&a.enable(13),x.vertexUv2s&&a.enable(14),x.vertexUv3s&&a.enable(15),x.vertexTangents&&a.enable(16),x.anisotropy&&a.enable(17),x.alphaHash&&a.enable(18),x.batching&&a.enable(19),x.dispersion&&a.enable(20),x.batchingColor&&a.enable(21),M.push(a.mask),a.disableAll(),x.fog&&a.enable(0),x.useFog&&a.enable(1),x.flatShading&&a.enable(2),x.logarithmicDepthBuffer&&a.enable(3),x.reverseDepthBuffer&&a.enable(4),x.skinning&&a.enable(5),x.morphTargets&&a.enable(6),x.morphNormals&&a.enable(7),x.morphColors&&a.enable(8),x.premultipliedAlpha&&a.enable(9),x.shadowMapEnabled&&a.enable(10),x.doubleSided&&a.enable(11),x.flipSided&&a.enable(12),x.useDepthPacking&&a.enable(13),x.dithering&&a.enable(14),x.transmission&&a.enable(15),x.sheen&&a.enable(16),x.opaque&&a.enable(17),x.pointsUvs&&a.enable(18),x.decodeVideoTexture&&a.enable(19),x.decodeVideoTextureEmissive&&a.enable(20),x.alphaToCoverage&&a.enable(21),M.push(a.mask)}function y(M){let x=m[M.type],I;if(x){let z=ta[x];I=Hi.clone(z.uniforms)}else I=M.uniforms;return I}function R(M,x){let I;for(let z=0,W=d.length;z<W;z++){let ee=d[z];if(ee.cacheKey===x){I=ee,++I.usedTimes;break}}return I===void 0&&(I=new bee(n,x,M,o),d.push(I)),I}function S(M){if(--M.usedTimes===0){let x=d.indexOf(M);d[x]=d[d.length-1],d.pop(),M.destroy()}}function T(M){l.remove(M)}function A(){l.dispose()}return{getParameters:g,getProgramCacheKey:p,getUniforms:y,acquireProgram:R,releaseProgram:S,releaseShaderCache:T,programs:d,dispose:A}}function xee(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function i(s){n.delete(s)}function r(s,a,l){n.get(s)[a]=l}function o(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:o}}function wee(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function SU(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function TU(){let n=[],e=0,t=[],i=[],r=[];function o(){e=0,t.length=0,i.length=0,r.length=0}function s(u,h,f,m,_,g){let p=n[e];return p===void 0?(p={id:u.id,object:u,geometry:h,material:f,groupOrder:m,renderOrder:u.renderOrder,z:_,group:g},n[e]=p):(p.id=u.id,p.object=u,p.geometry=h,p.material=f,p.groupOrder=m,p.renderOrder=u.renderOrder,p.z=_,p.group=g),e++,p}function a(u,h,f,m,_,g){let p=s(u,h,f,m,_,g);f.transmission>0?i.push(p):f.transparent===!0?r.push(p):t.push(p)}function l(u,h,f,m,_,g){let p=s(u,h,f,m,_,g);f.transmission>0?i.unshift(p):f.transparent===!0?r.unshift(p):t.unshift(p)}function c(u,h){t.length>1&&t.sort(u||wee),i.length>1&&i.sort(h||SU),r.length>1&&r.sort(h||SU)}function d(){for(let u=e,h=n.length;u<h;u++){let f=n[u];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:i,transparent:r,init:o,push:a,unshift:l,finish:d,sort:c}}function Mee(){let n=new WeakMap;function e(i,r){let o=n.get(i),s;return o===void 0?(s=new TU,n.set(i,[s])):r>=o.length?(s=new TU,o.push(s)):s=o[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function See(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new w,color:new he};break;case"SpotLight":t={position:new w,direction:new w,color:new he,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new w,color:new he,distance:0,decay:0};break;case"HemisphereLight":t={direction:new w,skyColor:new he,groundColor:new he};break;case"RectAreaLight":t={color:new he,position:new w,halfWidth:new w,halfHeight:new w};break}return n[e.id]=t,t}}}function Tee(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new V};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new V};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new V,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}var Ree=0;function Cee(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Eee(n){let e=new See,t=Tee(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new w);let r=new w,o=new Ie,s=new Ie;function a(c){let d=0,u=0,h=0;for(let M=0;M<9;M++)i.probe[M].set(0,0,0);let f=0,m=0,_=0,g=0,p=0,b=0,v=0,y=0,R=0,S=0,T=0;c.sort(Cee);for(let M=0,x=c.length;M<x;M++){let I=c[M],z=I.color,W=I.intensity,ee=I.distance,se=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)d+=z.r*W,u+=z.g*W,h+=z.b*W;else if(I.isLightProbe){for(let N=0;N<9;N++)i.probe[N].addScaledVector(I.sh.coefficients[N],W);T++}else if(I.isDirectionalLight){let N=e.get(I);if(N.color.copy(I.color).multiplyScalar(I.intensity),I.castShadow){let H=I.shadow,L=t.get(I);L.shadowIntensity=H.intensity,L.shadowBias=H.bias,L.shadowNormalBias=H.normalBias,L.shadowRadius=H.radius,L.shadowMapSize=H.mapSize,i.directionalShadow[f]=L,i.directionalShadowMap[f]=se,i.directionalShadowMatrix[f]=I.shadow.matrix,b++}i.directional[f]=N,f++}else if(I.isSpotLight){let N=e.get(I);N.position.setFromMatrixPosition(I.matrixWorld),N.color.copy(z).multiplyScalar(W),N.distance=ee,N.coneCos=Math.cos(I.angle),N.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),N.decay=I.decay,i.spot[_]=N;let H=I.shadow;if(I.map&&(i.spotLightMap[R]=I.map,R++,H.updateMatrices(I),I.castShadow&&S++),i.spotLightMatrix[_]=H.matrix,I.castShadow){let L=t.get(I);L.shadowIntensity=H.intensity,L.shadowBias=H.bias,L.shadowNormalBias=H.normalBias,L.shadowRadius=H.radius,L.shadowMapSize=H.mapSize,i.spotShadow[_]=L,i.spotShadowMap[_]=se,y++}_++}else if(I.isRectAreaLight){let N=e.get(I);N.color.copy(z).multiplyScalar(W),N.halfWidth.set(I.width*.5,0,0),N.halfHeight.set(0,I.height*.5,0),i.rectArea[g]=N,g++}else if(I.isPointLight){let N=e.get(I);if(N.color.copy(I.color).multiplyScalar(I.intensity),N.distance=I.distance,N.decay=I.decay,I.castShadow){let H=I.shadow,L=t.get(I);L.shadowIntensity=H.intensity,L.shadowBias=H.bias,L.shadowNormalBias=H.normalBias,L.shadowRadius=H.radius,L.shadowMapSize=H.mapSize,L.shadowCameraNear=H.camera.near,L.shadowCameraFar=H.camera.far,i.pointShadow[m]=L,i.pointShadowMap[m]=se,i.pointShadowMatrix[m]=I.shadow.matrix,v++}i.point[m]=N,m++}else if(I.isHemisphereLight){let N=e.get(I);N.skyColor.copy(I.color).multiplyScalar(W),N.groundColor.copy(I.groundColor).multiplyScalar(W),i.hemi[p]=N,p++}}g>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ve.LTC_FLOAT_1,i.rectAreaLTC2=Ve.LTC_FLOAT_2):(i.rectAreaLTC1=Ve.LTC_HALF_1,i.rectAreaLTC2=Ve.LTC_HALF_2)),i.ambient[0]=d,i.ambient[1]=u,i.ambient[2]=h;let A=i.hash;(A.directionalLength!==f||A.pointLength!==m||A.spotLength!==_||A.rectAreaLength!==g||A.hemiLength!==p||A.numDirectionalShadows!==b||A.numPointShadows!==v||A.numSpotShadows!==y||A.numSpotMaps!==R||A.numLightProbes!==T)&&(i.directional.length=f,i.spot.length=_,i.rectArea.length=g,i.point.length=m,i.hemi.length=p,i.directionalShadow.length=b,i.directionalShadowMap.length=b,i.pointShadow.length=v,i.pointShadowMap.length=v,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=b,i.pointShadowMatrix.length=v,i.spotLightMatrix.length=y+R-S,i.spotLightMap.length=R,i.numSpotLightShadowsWithMaps=S,i.numLightProbes=T,A.directionalLength=f,A.pointLength=m,A.spotLength=_,A.rectAreaLength=g,A.hemiLength=p,A.numDirectionalShadows=b,A.numPointShadows=v,A.numSpotShadows=y,A.numSpotMaps=R,A.numLightProbes=T,i.version=Ree++)}function l(c,d){let u=0,h=0,f=0,m=0,_=0,g=d.matrixWorldInverse;for(let p=0,b=c.length;p<b;p++){let v=c[p];if(v.isDirectionalLight){let y=i.directional[u];y.direction.setFromMatrixPosition(v.matrixWorld),r.setFromMatrixPosition(v.target.matrixWorld),y.direction.sub(r),y.direction.transformDirection(g),u++}else if(v.isSpotLight){let y=i.spot[f];y.position.setFromMatrixPosition(v.matrixWorld),y.position.applyMatrix4(g),y.direction.setFromMatrixPosition(v.matrixWorld),r.setFromMatrixPosition(v.target.matrixWorld),y.direction.sub(r),y.direction.transformDirection(g),f++}else if(v.isRectAreaLight){let y=i.rectArea[m];y.position.setFromMatrixPosition(v.matrixWorld),y.position.applyMatrix4(g),s.identity(),o.copy(v.matrixWorld),o.premultiply(g),s.extractRotation(o),y.halfWidth.set(v.width*.5,0,0),y.halfHeight.set(0,v.height*.5,0),y.halfWidth.applyMatrix4(s),y.halfHeight.applyMatrix4(s),m++}else if(v.isPointLight){let y=i.point[h];y.position.setFromMatrixPosition(v.matrixWorld),y.position.applyMatrix4(g),h++}else if(v.isHemisphereLight){let y=i.hemi[_];y.direction.setFromMatrixPosition(v.matrixWorld),y.direction.transformDirection(g),_++}}}return{setup:a,setupView:l,state:i}}function RU(n){let e=new Eee(n),t=[],i=[];function r(d){c.camera=d,t.length=0,i.length=0}function o(d){t.push(d)}function s(d){i.push(d)}function a(){e.setup(t)}function l(d){e.setupView(t,d)}let c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:o,pushShadow:s}}function Dee(n){let e=new WeakMap;function t(r,o=0){let s=e.get(r),a;return s===void 0?(a=new RU(n),e.set(r,[a])):o>=s.length?(a=new RU(n),s.push(a)):a=s[o],a}function i(){e=new WeakMap}return{get:t,dispose:i}}var Aee=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Iee=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Pee(n,e,t){let i=new Pc,r=new V,o=new V,s=new li,a=new jc({depthPacking:ib}),l=new If,c={},d=t.maxTextureSize,u={[ds]:Br,[Br]:ds,[$n]:$n},h=new Et({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new V},radius:{value:4}},vertexShader:Aee,fragmentShader:Iee}),f=h.clone();f.defines.HORIZONTAL_PASS=1;let m=new bt;m.setAttribute("position",new mi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let _=new ke(m,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Tw;let p=this.type;this.render=function(S,T,A){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||S.length===0)return;let M=n.getRenderTarget(),x=n.getActiveCubeFace(),I=n.getActiveMipmapLevel(),z=n.state;z.setBlending(ii),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);let W=p!==Js&&this.type===Js,ee=p===Js&&this.type!==Js;for(let se=0,N=S.length;se<N;se++){let H=S[se],L=H.shadow;if(L===void 0){console.warn("THREE.WebGLShadowMap:",H,"has no shadow.");continue}if(L.autoUpdate===!1&&L.needsUpdate===!1)continue;r.copy(L.mapSize);let te=L.getFrameExtents();if(r.multiply(te),o.copy(L.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(o.x=Math.floor(d/te.x),r.x=o.x*te.x,L.mapSize.x=o.x),r.y>d&&(o.y=Math.floor(d/te.y),r.y=o.y*te.y,L.mapSize.y=o.y)),L.map===null||W===!0||ee===!0){let Pe=this.type!==Js?{minFilter:hi,magFilter:hi}:{};L.map!==null&&L.map.dispose(),L.map=new ti(r.x,r.y,Pe),L.map.texture.name=H.name+".shadowMap",L.camera.updateProjectionMatrix()}n.setRenderTarget(L.map),n.clear();let Se=L.getViewportCount();for(let Pe=0;Pe<Se;Pe++){let Ge=L.getViewport(Pe);s.set(o.x*Ge.x,o.y*Ge.y,o.x*Ge.z,o.y*Ge.w),z.viewport(s),L.updateMatrices(H,Pe),i=L.getFrustum(),y(T,A,L.camera,H,this.type)}L.isPointLightShadow!==!0&&this.type===Js&&b(L,A),L.needsUpdate=!1}p=this.type,g.needsUpdate=!1,n.setRenderTarget(M,x,I)};function b(S,T){let A=e.update(_);h.defines.VSM_SAMPLES!==S.blurSamples&&(h.defines.VSM_SAMPLES=S.blurSamples,f.defines.VSM_SAMPLES=S.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new ti(r.x,r.y)),h.uniforms.shadow_pass.value=S.map.texture,h.uniforms.resolution.value=S.mapSize,h.uniforms.radius.value=S.radius,n.setRenderTarget(S.mapPass),n.clear(),n.renderBufferDirect(T,null,A,h,_,null),f.uniforms.shadow_pass.value=S.mapPass.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,n.setRenderTarget(S.map),n.clear(),n.renderBufferDirect(T,null,A,f,_,null)}function v(S,T,A,M){let x=null,I=A.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(I!==void 0)x=I;else if(x=A.isPointLight===!0?l:a,n.localClippingEnabled&&T.clipShadows===!0&&Array.isArray(T.clippingPlanes)&&T.clippingPlanes.length!==0||T.displacementMap&&T.displacementScale!==0||T.alphaMap&&T.alphaTest>0||T.map&&T.alphaTest>0){let z=x.uuid,W=T.uuid,ee=c[z];ee===void 0&&(ee={},c[z]=ee);let se=ee[W];se===void 0&&(se=x.clone(),ee[W]=se,T.addEventListener("dispose",R)),x=se}if(x.visible=T.visible,x.wireframe=T.wireframe,M===Js?x.side=T.shadowSide!==null?T.shadowSide:T.side:x.side=T.shadowSide!==null?T.shadowSide:u[T.side],x.alphaMap=T.alphaMap,x.alphaTest=T.alphaTest,x.map=T.map,x.clipShadows=T.clipShadows,x.clippingPlanes=T.clippingPlanes,x.clipIntersection=T.clipIntersection,x.displacementMap=T.displacementMap,x.displacementScale=T.displacementScale,x.displacementBias=T.displacementBias,x.wireframeLinewidth=T.wireframeLinewidth,x.linewidth=T.linewidth,A.isPointLight===!0&&x.isMeshDistanceMaterial===!0){let z=n.properties.get(x);z.light=A}return x}function y(S,T,A,M,x){if(S.visible===!1)return;if(S.layers.test(T.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&x===Js)&&(!S.frustumCulled||i.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,S.matrixWorld);let W=e.update(S),ee=S.material;if(Array.isArray(ee)){let se=W.groups;for(let N=0,H=se.length;N<H;N++){let L=se[N],te=ee[L.materialIndex];if(te&&te.visible){let Se=v(S,te,M,x);S.onBeforeShadow(n,S,T,A,W,Se,L),n.renderBufferDirect(A,null,W,Se,S,L),S.onAfterShadow(n,S,T,A,W,Se,L)}}}else if(ee.visible){let se=v(S,ee,M,x);S.onBeforeShadow(n,S,T,A,W,se,null),n.renderBufferDirect(A,null,W,se,S,null),S.onAfterShadow(n,S,T,A,W,se,null)}}let z=S.children;for(let W=0,ee=z.length;W<ee;W++)y(z[W],T,A,M,x)}function R(S){S.target.removeEventListener("dispose",R);for(let A in c){let M=c[A],x=S.target.uuid;x in M&&(M[x].dispose(),delete M[x])}}}var Fee={[g_]:__,[b_]:x_,[v_]:w_,[Rc]:y_,[__]:g_,[x_]:b_,[w_]:v_,[y_]:Rc};function kee(n,e){function t(){let B=!1,Le=new li,de=null,we=new li(0,0,0,0);return{setMask:function(et){de!==et&&!B&&(n.colorMask(et,et,et,et),de=et)},setLocked:function(et){B=et},setClear:function(et,Ze,si,Rn,Cr){Cr===!0&&(et*=Rn,Ze*=Rn,si*=Rn),Le.set(et,Ze,si,Rn),we.equals(Le)===!1&&(n.clearColor(et,Ze,si,Rn),we.copy(Le))},reset:function(){B=!1,de=null,we.set(-1,0,0,0)}}}function i(){let B=!1,Le=!1,de=null,we=null,et=null;return{setReversed:function(Ze){if(Le!==Ze){let si=e.get("EXT_clip_control");Le?si.clipControlEXT(si.LOWER_LEFT_EXT,si.ZERO_TO_ONE_EXT):si.clipControlEXT(si.LOWER_LEFT_EXT,si.NEGATIVE_ONE_TO_ONE_EXT);let Rn=et;et=null,this.setClear(Rn)}Le=Ze},getReversed:function(){return Le},setTest:function(Ze){Ze?ve(n.DEPTH_TEST):ze(n.DEPTH_TEST)},setMask:function(Ze){de!==Ze&&!B&&(n.depthMask(Ze),de=Ze)},setFunc:function(Ze){if(Le&&(Ze=Fee[Ze]),we!==Ze){switch(Ze){case g_:n.depthFunc(n.NEVER);break;case __:n.depthFunc(n.ALWAYS);break;case b_:n.depthFunc(n.LESS);break;case Rc:n.depthFunc(n.LEQUAL);break;case v_:n.depthFunc(n.EQUAL);break;case y_:n.depthFunc(n.GEQUAL);break;case x_:n.depthFunc(n.GREATER);break;case w_:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}we=Ze}},setLocked:function(Ze){B=Ze},setClear:function(Ze){et!==Ze&&(Le&&(Ze=1-Ze),n.clearDepth(Ze),et=Ze)},reset:function(){B=!1,de=null,we=null,et=null,Le=!1}}}function r(){let B=!1,Le=null,de=null,we=null,et=null,Ze=null,si=null,Rn=null,Cr=null;return{setTest:function(Gi){B||(Gi?ve(n.STENCIL_TEST):ze(n.STENCIL_TEST))},setMask:function(Gi){Le!==Gi&&!B&&(n.stencilMask(Gi),Le=Gi)},setFunc:function(Gi,Ss,el){(de!==Gi||we!==Ss||et!==el)&&(n.stencilFunc(Gi,Ss,el),de=Gi,we=Ss,et=el)},setOp:function(Gi,Ss,el){(Ze!==Gi||si!==Ss||Rn!==el)&&(n.stencilOp(Gi,Ss,el),Ze=Gi,si=Ss,Rn=el)},setLocked:function(Gi){B=Gi},setClear:function(Gi){Cr!==Gi&&(n.clearStencil(Gi),Cr=Gi)},reset:function(){B=!1,Le=null,de=null,we=null,et=null,Ze=null,si=null,Rn=null,Cr=null}}}let o=new t,s=new i,a=new r,l=new WeakMap,c=new WeakMap,d={},u={},h=new WeakMap,f=[],m=null,_=!1,g=null,p=null,b=null,v=null,y=null,R=null,S=null,T=new he(0,0,0),A=0,M=!1,x=null,I=null,z=null,W=null,ee=null,se=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),N=!1,H=0,L=n.getParameter(n.VERSION);L.indexOf("WebGL")!==-1?(H=parseFloat(/^WebGL (\d)/.exec(L)[1]),N=H>=1):L.indexOf("OpenGL ES")!==-1&&(H=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),N=H>=2);let te=null,Se={},Pe=n.getParameter(n.SCISSOR_BOX),Ge=n.getParameter(n.VIEWPORT),St=new li().fromArray(Pe),K=new li().fromArray(Ge);function Re(B,Le,de,we){let et=new Uint8Array(4),Ze=n.createTexture();n.bindTexture(B,Ze),n.texParameteri(B,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(B,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let si=0;si<de;si++)B===n.TEXTURE_3D||B===n.TEXTURE_2D_ARRAY?n.texImage3D(Le,0,n.RGBA,1,1,we,0,n.RGBA,n.UNSIGNED_BYTE,et):n.texImage2D(Le+si,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,et);return Ze}let We={};We[n.TEXTURE_2D]=Re(n.TEXTURE_2D,n.TEXTURE_2D,1),We[n.TEXTURE_CUBE_MAP]=Re(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),We[n.TEXTURE_2D_ARRAY]=Re(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),We[n.TEXTURE_3D]=Re(n.TEXTURE_3D,n.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),ve(n.DEPTH_TEST),s.setFunc(Rc),Ce(!1),Je(Sw),ve(n.CULL_FACE),F(ii);function ve(B){d[B]!==!0&&(n.enable(B),d[B]=!0)}function ze(B){d[B]!==!1&&(n.disable(B),d[B]=!1)}function qe(B,Le){return u[B]!==Le?(n.bindFramebuffer(B,Le),u[B]=Le,B===n.DRAW_FRAMEBUFFER&&(u[n.FRAMEBUFFER]=Le),B===n.FRAMEBUFFER&&(u[n.DRAW_FRAMEBUFFER]=Le),!0):!1}function Be(B,Le){let de=f,we=!1;if(B){de=h.get(Le),de===void 0&&(de=[],h.set(Le,de));let et=B.textures;if(de.length!==et.length||de[0]!==n.COLOR_ATTACHMENT0){for(let Ze=0,si=et.length;Ze<si;Ze++)de[Ze]=n.COLOR_ATTACHMENT0+Ze;de.length=et.length,we=!0}}else de[0]!==n.BACK&&(de[0]=n.BACK,we=!0);we&&n.drawBuffers(de)}function di(B){return m!==B?(n.useProgram(B),m=B,!0):!1}let xe={[fr]:n.FUNC_ADD,[gD]:n.FUNC_SUBTRACT,[_D]:n.FUNC_REVERSE_SUBTRACT};xe[bD]=n.MIN,xe[vD]=n.MAX;let Fe={[Il]:n.ZERO,[yD]:n.ONE,[xD]:n.SRC_COLOR,[Sc]:n.SRC_ALPHA,[TD]:n.SRC_ALPHA_SATURATE,[vu]:n.DST_COLOR,[bu]:n.DST_ALPHA,[wD]:n.ONE_MINUS_SRC_COLOR,[Tc]:n.ONE_MINUS_SRC_ALPHA,[SD]:n.ONE_MINUS_DST_COLOR,[MD]:n.ONE_MINUS_DST_ALPHA,[RD]:n.CONSTANT_COLOR,[CD]:n.ONE_MINUS_CONSTANT_COLOR,[ED]:n.CONSTANT_ALPHA,[DD]:n.ONE_MINUS_CONSTANT_ALPHA};function F(B,Le,de,we,et,Ze,si,Rn,Cr,Gi){if(B===ii){_===!0&&(ze(n.BLEND),_=!1);return}if(_===!1&&(ve(n.BLEND),_=!0),B!==Uc){if(B!==g||Gi!==M){if((p!==fr||y!==fr)&&(n.blendEquation(n.FUNC_ADD),p=fr,y=fr),Gi)switch(B){case us:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Bc:n.blendFunc(n.ONE,n.ONE);break;case Rw:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Cw:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",B);break}else switch(B){case us:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Bc:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Rw:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Cw:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",B);break}b=null,v=null,R=null,S=null,T.set(0,0,0),A=0,g=B,M=Gi}return}et=et||Le,Ze=Ze||de,si=si||we,(Le!==p||et!==y)&&(n.blendEquationSeparate(xe[Le],xe[et]),p=Le,y=et),(de!==b||we!==v||Ze!==R||si!==S)&&(n.blendFuncSeparate(Fe[de],Fe[we],Fe[Ze],Fe[si]),b=de,v=we,R=Ze,S=si),(Rn.equals(T)===!1||Cr!==A)&&(n.blendColor(Rn.r,Rn.g,Rn.b,Cr),T.copy(Rn),A=Cr),g=B,M=!1}function pt(B,Le){B.side===$n?ze(n.CULL_FACE):ve(n.CULL_FACE);let de=B.side===Br;Le&&(de=!de),Ce(de),B.blending===us&&B.transparent===!1?F(ii):F(B.blending,B.blendEquation,B.blendSrc,B.blendDst,B.blendEquationAlpha,B.blendSrcAlpha,B.blendDstAlpha,B.blendColor,B.blendAlpha,B.premultipliedAlpha),s.setFunc(B.depthFunc),s.setTest(B.depthTest),s.setMask(B.depthWrite),o.setMask(B.colorWrite);let we=B.stencilWrite;a.setTest(we),we&&(a.setMask(B.stencilWriteMask),a.setFunc(B.stencilFunc,B.stencilRef,B.stencilFuncMask),a.setOp(B.stencilFail,B.stencilZFail,B.stencilZPass)),wt(B.polygonOffset,B.polygonOffsetFactor,B.polygonOffsetUnits),B.alphaToCoverage===!0?ve(n.SAMPLE_ALPHA_TO_COVERAGE):ze(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ce(B){x!==B&&(B?n.frontFace(n.CW):n.frontFace(n.CCW),x=B)}function Je(B){B!==fD?(ve(n.CULL_FACE),B!==I&&(B===Sw?n.cullFace(n.BACK):B===pD?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ze(n.CULL_FACE),I=B}function Oe(B){B!==z&&(N&&n.lineWidth(B),z=B)}function wt(B,Le,de){B?(ve(n.POLYGON_OFFSET_FILL),(W!==Le||ee!==de)&&(n.polygonOffset(Le,de),W=Le,ee=de)):ze(n.POLYGON_OFFSET_FILL)}function $e(B){B?ve(n.SCISSOR_TEST):ze(n.SCISSOR_TEST)}function P(B){B===void 0&&(B=n.TEXTURE0+se-1),te!==B&&(n.activeTexture(B),te=B)}function C(B,Le,de){de===void 0&&(te===null?de=n.TEXTURE0+se-1:de=te);let we=Se[de];we===void 0&&(we={type:void 0,texture:void 0},Se[de]=we),(we.type!==B||we.texture!==Le)&&(te!==de&&(n.activeTexture(de),te=de),n.bindTexture(B,Le||We[B]),we.type=B,we.texture=Le)}function X(){let B=Se[te];B!==void 0&&B.type!==void 0&&(n.bindTexture(B.type,null),B.type=void 0,B.texture=void 0)}function pe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function Me(){try{n.compressedTexImage3D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function ge(){try{n.texSubImage2D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function ut(){try{n.texSubImage3D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function je(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function Xe(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function Qt(){try{n.texStorage2D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function Ee(){try{n.texStorage3D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function ot(){try{n.texImage2D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function Tt(){try{n.texImage3D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function kt(B){St.equals(B)===!1&&(n.scissor(B.x,B.y,B.z,B.w),St.copy(B))}function st(B){K.equals(B)===!1&&(n.viewport(B.x,B.y,B.z,B.w),K.copy(B))}function Mi(B,Le){let de=c.get(Le);de===void 0&&(de=new WeakMap,c.set(Le,de));let we=de.get(B);we===void 0&&(we=n.getUniformBlockIndex(Le,B.name),de.set(B,we))}function jt(B,Le){let we=c.get(Le).get(B);l.get(Le)!==we&&(n.uniformBlockBinding(Le,we,B.__bindingPointIndex),l.set(Le,we))}function Di(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},te=null,Se={},u={},h=new WeakMap,f=[],m=null,_=!1,g=null,p=null,b=null,v=null,y=null,R=null,S=null,T=new he(0,0,0),A=0,M=!1,x=null,I=null,z=null,W=null,ee=null,St.set(0,0,n.canvas.width,n.canvas.height),K.set(0,0,n.canvas.width,n.canvas.height),o.reset(),s.reset(),a.reset()}return{buffers:{color:o,depth:s,stencil:a},enable:ve,disable:ze,bindFramebuffer:qe,drawBuffers:Be,useProgram:di,setBlending:F,setMaterial:pt,setFlipSided:Ce,setCullFace:Je,setLineWidth:Oe,setPolygonOffset:wt,setScissorTest:$e,activeTexture:P,bindTexture:C,unbindTexture:X,compressedTexImage2D:pe,compressedTexImage3D:Me,texImage2D:ot,texImage3D:Tt,updateUBOMapping:Mi,uniformBlockBinding:jt,texStorage2D:Qt,texStorage3D:Ee,texSubImage2D:ge,texSubImage3D:ut,compressedTexSubImage2D:je,compressedTexSubImage3D:Xe,scissor:kt,viewport:st,reset:Di}}function Oee(n,e,t,i,r,o,s){let a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new V,d=new WeakMap,u,h=new WeakMap,f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(P,C){return f?new OffscreenCanvas(P,C):yf("canvas")}function _(P,C,X){let pe=1,Me=$e(P);if((Me.width>X||Me.height>X)&&(pe=X/Math.max(Me.width,Me.height)),pe<1)if(typeof HTMLImageElement<"u"&&P instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&P instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&P instanceof ImageBitmap||typeof VideoFrame<"u"&&P instanceof VideoFrame){let ge=Math.floor(pe*Me.width),ut=Math.floor(pe*Me.height);u===void 0&&(u=m(ge,ut));let je=C?m(ge,ut):u;return je.width=ge,je.height=ut,je.getContext("2d").drawImage(P,0,0,ge,ut),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Me.width+"x"+Me.height+") to ("+ge+"x"+ut+")."),je}else return"data"in P&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Me.width+"x"+Me.height+")."),P;return P}function g(P){return P.generateMipmaps}function p(P){n.generateMipmap(P)}function b(P){return P.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:P.isWebGL3DRenderTarget?n.TEXTURE_3D:P.isWebGLArrayRenderTarget||P.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function v(P,C,X,pe,Me=!1){if(P!==null){if(n[P]!==void 0)return n[P];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+P+"'")}let ge=C;if(C===n.RED&&(X===n.FLOAT&&(ge=n.R32F),X===n.HALF_FLOAT&&(ge=n.R16F),X===n.UNSIGNED_BYTE&&(ge=n.R8)),C===n.RED_INTEGER&&(X===n.UNSIGNED_BYTE&&(ge=n.R8UI),X===n.UNSIGNED_SHORT&&(ge=n.R16UI),X===n.UNSIGNED_INT&&(ge=n.R32UI),X===n.BYTE&&(ge=n.R8I),X===n.SHORT&&(ge=n.R16I),X===n.INT&&(ge=n.R32I)),C===n.RG&&(X===n.FLOAT&&(ge=n.RG32F),X===n.HALF_FLOAT&&(ge=n.RG16F),X===n.UNSIGNED_BYTE&&(ge=n.RG8)),C===n.RG_INTEGER&&(X===n.UNSIGNED_BYTE&&(ge=n.RG8UI),X===n.UNSIGNED_SHORT&&(ge=n.RG16UI),X===n.UNSIGNED_INT&&(ge=n.RG32UI),X===n.BYTE&&(ge=n.RG8I),X===n.SHORT&&(ge=n.RG16I),X===n.INT&&(ge=n.RG32I)),C===n.RGB_INTEGER&&(X===n.UNSIGNED_BYTE&&(ge=n.RGB8UI),X===n.UNSIGNED_SHORT&&(ge=n.RGB16UI),X===n.UNSIGNED_INT&&(ge=n.RGB32UI),X===n.BYTE&&(ge=n.RGB8I),X===n.SHORT&&(ge=n.RGB16I),X===n.INT&&(ge=n.RGB32I)),C===n.RGBA_INTEGER&&(X===n.UNSIGNED_BYTE&&(ge=n.RGBA8UI),X===n.UNSIGNED_SHORT&&(ge=n.RGBA16UI),X===n.UNSIGNED_INT&&(ge=n.RGBA32UI),X===n.BYTE&&(ge=n.RGBA8I),X===n.SHORT&&(ge=n.RGBA16I),X===n.INT&&(ge=n.RGBA32I)),C===n.RGB&&X===n.UNSIGNED_INT_5_9_9_9_REV&&(ge=n.RGB9_E5),C===n.RGBA){let ut=Me?_f:ui.getTransfer(pe);X===n.FLOAT&&(ge=n.RGBA32F),X===n.HALF_FLOAT&&(ge=n.RGBA16F),X===n.UNSIGNED_BYTE&&(ge=ut===Vi?n.SRGB8_ALPHA8:n.RGBA8),X===n.UNSIGNED_SHORT_4_4_4_4&&(ge=n.RGBA4),X===n.UNSIGNED_SHORT_5_5_5_1&&(ge=n.RGB5_A1)}return(ge===n.R16F||ge===n.R32F||ge===n.RG16F||ge===n.RG32F||ge===n.RGBA16F||ge===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ge}function y(P,C){let X;return P?C===null||C===ja||C===_s?X=n.DEPTH24_STENCIL8:C===nr?X=n.DEPTH32F_STENCIL8:C===kl&&(X=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):C===null||C===ja||C===_s?X=n.DEPTH_COMPONENT24:C===nr?X=n.DEPTH_COMPONENT32F:C===kl&&(X=n.DEPTH_COMPONENT16),X}function R(P,C){return g(P)===!0||P.isFramebufferTexture&&P.minFilter!==hi&&P.minFilter!==bn?Math.log2(Math.max(C.width,C.height))+1:P.mipmaps!==void 0&&P.mipmaps.length>0?P.mipmaps.length:P.isCompressedTexture&&Array.isArray(P.image)?C.mipmaps.length:1}function S(P){let C=P.target;C.removeEventListener("dispose",S),A(C),C.isVideoTexture&&d.delete(C)}function T(P){let C=P.target;C.removeEventListener("dispose",T),x(C)}function A(P){let C=i.get(P);if(C.__webglInit===void 0)return;let X=P.source,pe=h.get(X);if(pe){let Me=pe[C.__cacheKey];Me.usedTimes--,Me.usedTimes===0&&M(P),Object.keys(pe).length===0&&h.delete(X)}i.remove(P)}function M(P){let C=i.get(P);n.deleteTexture(C.__webglTexture);let X=P.source,pe=h.get(X);delete pe[C.__cacheKey],s.memory.textures--}function x(P){let C=i.get(P);if(P.depthTexture&&(P.depthTexture.dispose(),i.remove(P.depthTexture)),P.isWebGLCubeRenderTarget)for(let pe=0;pe<6;pe++){if(Array.isArray(C.__webglFramebuffer[pe]))for(let Me=0;Me<C.__webglFramebuffer[pe].length;Me++)n.deleteFramebuffer(C.__webglFramebuffer[pe][Me]);else n.deleteFramebuffer(C.__webglFramebuffer[pe]);C.__webglDepthbuffer&&n.deleteRenderbuffer(C.__webglDepthbuffer[pe])}else{if(Array.isArray(C.__webglFramebuffer))for(let pe=0;pe<C.__webglFramebuffer.length;pe++)n.deleteFramebuffer(C.__webglFramebuffer[pe]);else n.deleteFramebuffer(C.__webglFramebuffer);if(C.__webglDepthbuffer&&n.deleteRenderbuffer(C.__webglDepthbuffer),C.__webglMultisampledFramebuffer&&n.deleteFramebuffer(C.__webglMultisampledFramebuffer),C.__webglColorRenderbuffer)for(let pe=0;pe<C.__webglColorRenderbuffer.length;pe++)C.__webglColorRenderbuffer[pe]&&n.deleteRenderbuffer(C.__webglColorRenderbuffer[pe]);C.__webglDepthRenderbuffer&&n.deleteRenderbuffer(C.__webglDepthRenderbuffer)}let X=P.textures;for(let pe=0,Me=X.length;pe<Me;pe++){let ge=i.get(X[pe]);ge.__webglTexture&&(n.deleteTexture(ge.__webglTexture),s.memory.textures--),i.remove(X[pe])}i.remove(P)}let I=0;function z(){I=0}function W(){let P=I;return P>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+P+" texture units while this GPU supports only "+r.maxTextures),I+=1,P}function ee(P){let C=[];return C.push(P.wrapS),C.push(P.wrapT),C.push(P.wrapR||0),C.push(P.magFilter),C.push(P.minFilter),C.push(P.anisotropy),C.push(P.internalFormat),C.push(P.format),C.push(P.type),C.push(P.generateMipmaps),C.push(P.premultiplyAlpha),C.push(P.flipY),C.push(P.unpackAlignment),C.push(P.colorSpace),C.join()}function se(P,C){let X=i.get(P);if(P.isVideoTexture&&Oe(P),P.isRenderTargetTexture===!1&&P.version>0&&X.__version!==P.version){let pe=P.image;if(pe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(pe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{K(X,P,C);return}}t.bindTexture(n.TEXTURE_2D,X.__webglTexture,n.TEXTURE0+C)}function N(P,C){let X=i.get(P);if(P.version>0&&X.__version!==P.version){K(X,P,C);return}t.bindTexture(n.TEXTURE_2D_ARRAY,X.__webglTexture,n.TEXTURE0+C)}function H(P,C){let X=i.get(P);if(P.version>0&&X.__version!==P.version){K(X,P,C);return}t.bindTexture(n.TEXTURE_3D,X.__webglTexture,n.TEXTURE0+C)}function L(P,C){let X=i.get(P);if(P.version>0&&X.__version!==P.version){Re(X,P,C);return}t.bindTexture(n.TEXTURE_CUBE_MAP,X.__webglTexture,n.TEXTURE0+C)}let te={[zo]:n.REPEAT,[Kr]:n.CLAMP_TO_EDGE,[Cc]:n.MIRRORED_REPEAT},Se={[hi]:n.NEAREST,[Hf]:n.NEAREST_MIPMAP_NEAREST,[Fl]:n.NEAREST_MIPMAP_LINEAR,[bn]:n.LINEAR,[Vc]:n.LINEAR_MIPMAP_NEAREST,[xo]:n.LINEAR_MIPMAP_LINEAR},Pe={[GD]:n.NEVER,[ZD]:n.ALWAYS,[WD]:n.LESS,[Bw]:n.LEQUAL,[$D]:n.EQUAL,[YD]:n.GEQUAL,[qD]:n.GREATER,[XD]:n.NOTEQUAL};function Ge(P,C){if(C.type===nr&&e.has("OES_texture_float_linear")===!1&&(C.magFilter===bn||C.magFilter===Vc||C.magFilter===Fl||C.magFilter===xo||C.minFilter===bn||C.minFilter===Vc||C.minFilter===Fl||C.minFilter===xo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(P,n.TEXTURE_WRAP_S,te[C.wrapS]),n.texParameteri(P,n.TEXTURE_WRAP_T,te[C.wrapT]),(P===n.TEXTURE_3D||P===n.TEXTURE_2D_ARRAY)&&n.texParameteri(P,n.TEXTURE_WRAP_R,te[C.wrapR]),n.texParameteri(P,n.TEXTURE_MAG_FILTER,Se[C.magFilter]),n.texParameteri(P,n.TEXTURE_MIN_FILTER,Se[C.minFilter]),C.compareFunction&&(n.texParameteri(P,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(P,n.TEXTURE_COMPARE_FUNC,Pe[C.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(C.magFilter===hi||C.minFilter!==Fl&&C.minFilter!==xo||C.type===nr&&e.has("OES_texture_float_linear")===!1)return;if(C.anisotropy>1||i.get(C).__currentAnisotropy){let X=e.get("EXT_texture_filter_anisotropic");n.texParameterf(P,X.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(C.anisotropy,r.getMaxAnisotropy())),i.get(C).__currentAnisotropy=C.anisotropy}}}function St(P,C){let X=!1;P.__webglInit===void 0&&(P.__webglInit=!0,C.addEventListener("dispose",S));let pe=C.source,Me=h.get(pe);Me===void 0&&(Me={},h.set(pe,Me));let ge=ee(C);if(ge!==P.__cacheKey){Me[ge]===void 0&&(Me[ge]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,X=!0),Me[ge].usedTimes++;let ut=Me[P.__cacheKey];ut!==void 0&&(Me[P.__cacheKey].usedTimes--,ut.usedTimes===0&&M(C)),P.__cacheKey=ge,P.__webglTexture=Me[ge].texture}return X}function K(P,C,X){let pe=n.TEXTURE_2D;(C.isDataArrayTexture||C.isCompressedArrayTexture)&&(pe=n.TEXTURE_2D_ARRAY),C.isData3DTexture&&(pe=n.TEXTURE_3D);let Me=St(P,C),ge=C.source;t.bindTexture(pe,P.__webglTexture,n.TEXTURE0+X);let ut=i.get(ge);if(ge.version!==ut.__version||Me===!0){t.activeTexture(n.TEXTURE0+X);let je=ui.getPrimaries(ui.workingColorSpace),Xe=C.colorSpace===Na?null:ui.getPrimaries(C.colorSpace),Qt=C.colorSpace===Na||je===Xe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,C.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,C.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Qt);let Ee=_(C.image,!1,r.maxTextureSize);Ee=wt(C,Ee);let ot=o.convert(C.format,C.colorSpace),Tt=o.convert(C.type),kt=v(C.internalFormat,ot,Tt,C.colorSpace,C.isVideoTexture);Ge(pe,C);let st,Mi=C.mipmaps,jt=C.isVideoTexture!==!0,Di=ut.__version===void 0||Me===!0,B=ge.dataReady,Le=R(C,Ee);if(C.isDepthTexture)kt=y(C.format===hs,C.type),Di&&(jt?t.texStorage2D(n.TEXTURE_2D,1,kt,Ee.width,Ee.height):t.texImage2D(n.TEXTURE_2D,0,kt,Ee.width,Ee.height,0,ot,Tt,null));else if(C.isDataTexture)if(Mi.length>0){jt&&Di&&t.texStorage2D(n.TEXTURE_2D,Le,kt,Mi[0].width,Mi[0].height);for(let de=0,we=Mi.length;de<we;de++)st=Mi[de],jt?B&&t.texSubImage2D(n.TEXTURE_2D,de,0,0,st.width,st.height,ot,Tt,st.data):t.texImage2D(n.TEXTURE_2D,de,kt,st.width,st.height,0,ot,Tt,st.data);C.generateMipmaps=!1}else jt?(Di&&t.texStorage2D(n.TEXTURE_2D,Le,kt,Ee.width,Ee.height),B&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ee.width,Ee.height,ot,Tt,Ee.data)):t.texImage2D(n.TEXTURE_2D,0,kt,Ee.width,Ee.height,0,ot,Tt,Ee.data);else if(C.isCompressedTexture)if(C.isCompressedArrayTexture){jt&&Di&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Le,kt,Mi[0].width,Mi[0].height,Ee.depth);for(let de=0,we=Mi.length;de<we;de++)if(st=Mi[de],C.format!==Or)if(ot!==null)if(jt){if(B)if(C.layerUpdates.size>0){let et=zw(st.width,st.height,C.format,C.type);for(let Ze of C.layerUpdates){let si=st.data.subarray(Ze*et/st.data.BYTES_PER_ELEMENT,(Ze+1)*et/st.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,de,0,0,Ze,st.width,st.height,1,ot,si)}C.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,de,0,0,0,st.width,st.height,Ee.depth,ot,st.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,de,kt,st.width,st.height,Ee.depth,0,st.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else jt?B&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,de,0,0,0,st.width,st.height,Ee.depth,ot,Tt,st.data):t.texImage3D(n.TEXTURE_2D_ARRAY,de,kt,st.width,st.height,Ee.depth,0,ot,Tt,st.data)}else{jt&&Di&&t.texStorage2D(n.TEXTURE_2D,Le,kt,Mi[0].width,Mi[0].height);for(let de=0,we=Mi.length;de<we;de++)st=Mi[de],C.format!==Or?ot!==null?jt?B&&t.compressedTexSubImage2D(n.TEXTURE_2D,de,0,0,st.width,st.height,ot,st.data):t.compressedTexImage2D(n.TEXTURE_2D,de,kt,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):jt?B&&t.texSubImage2D(n.TEXTURE_2D,de,0,0,st.width,st.height,ot,Tt,st.data):t.texImage2D(n.TEXTURE_2D,de,kt,st.width,st.height,0,ot,Tt,st.data)}else if(C.isDataArrayTexture)if(jt){if(Di&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Le,kt,Ee.width,Ee.height,Ee.depth),B)if(C.layerUpdates.size>0){let de=zw(Ee.width,Ee.height,C.format,C.type);for(let we of C.layerUpdates){let et=Ee.data.subarray(we*de/Ee.data.BYTES_PER_ELEMENT,(we+1)*de/Ee.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,we,Ee.width,Ee.height,1,ot,Tt,et)}C.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ee.width,Ee.height,Ee.depth,ot,Tt,Ee.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,kt,Ee.width,Ee.height,Ee.depth,0,ot,Tt,Ee.data);else if(C.isData3DTexture)jt?(Di&&t.texStorage3D(n.TEXTURE_3D,Le,kt,Ee.width,Ee.height,Ee.depth),B&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ee.width,Ee.height,Ee.depth,ot,Tt,Ee.data)):t.texImage3D(n.TEXTURE_3D,0,kt,Ee.width,Ee.height,Ee.depth,0,ot,Tt,Ee.data);else if(C.isFramebufferTexture){if(Di)if(jt)t.texStorage2D(n.TEXTURE_2D,Le,kt,Ee.width,Ee.height);else{let de=Ee.width,we=Ee.height;for(let et=0;et<Le;et++)t.texImage2D(n.TEXTURE_2D,et,kt,de,we,0,ot,Tt,null),de>>=1,we>>=1}}else if(Mi.length>0){if(jt&&Di){let de=$e(Mi[0]);t.texStorage2D(n.TEXTURE_2D,Le,kt,de.width,de.height)}for(let de=0,we=Mi.length;de<we;de++)st=Mi[de],jt?B&&t.texSubImage2D(n.TEXTURE_2D,de,0,0,ot,Tt,st):t.texImage2D(n.TEXTURE_2D,de,kt,ot,Tt,st);C.generateMipmaps=!1}else if(jt){if(Di){let de=$e(Ee);t.texStorage2D(n.TEXTURE_2D,Le,kt,de.width,de.height)}B&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ot,Tt,Ee)}else t.texImage2D(n.TEXTURE_2D,0,kt,ot,Tt,Ee);g(C)&&p(pe),ut.__version=ge.version,C.onUpdate&&C.onUpdate(C)}P.__version=C.version}function Re(P,C,X){if(C.image.length!==6)return;let pe=St(P,C),Me=C.source;t.bindTexture(n.TEXTURE_CUBE_MAP,P.__webglTexture,n.TEXTURE0+X);let ge=i.get(Me);if(Me.version!==ge.__version||pe===!0){t.activeTexture(n.TEXTURE0+X);let ut=ui.getPrimaries(ui.workingColorSpace),je=C.colorSpace===Na?null:ui.getPrimaries(C.colorSpace),Xe=C.colorSpace===Na||ut===je?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,C.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,C.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Xe);let Qt=C.isCompressedTexture||C.image[0].isCompressedTexture,Ee=C.image[0]&&C.image[0].isDataTexture,ot=[];for(let we=0;we<6;we++)!Qt&&!Ee?ot[we]=_(C.image[we],!0,r.maxCubemapSize):ot[we]=Ee?C.image[we].image:C.image[we],ot[we]=wt(C,ot[we]);let Tt=ot[0],kt=o.convert(C.format,C.colorSpace),st=o.convert(C.type),Mi=v(C.internalFormat,kt,st,C.colorSpace),jt=C.isVideoTexture!==!0,Di=ge.__version===void 0||pe===!0,B=Me.dataReady,Le=R(C,Tt);Ge(n.TEXTURE_CUBE_MAP,C);let de;if(Qt){jt&&Di&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Le,Mi,Tt.width,Tt.height);for(let we=0;we<6;we++){de=ot[we].mipmaps;for(let et=0;et<de.length;et++){let Ze=de[et];C.format!==Or?kt!==null?jt?B&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,et,0,0,Ze.width,Ze.height,kt,Ze.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,et,Mi,Ze.width,Ze.height,0,Ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):jt?B&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,et,0,0,Ze.width,Ze.height,kt,st,Ze.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,et,Mi,Ze.width,Ze.height,0,kt,st,Ze.data)}}}else{if(de=C.mipmaps,jt&&Di){de.length>0&&Le++;let we=$e(ot[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Le,Mi,we.width,we.height)}for(let we=0;we<6;we++)if(Ee){jt?B&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,0,0,ot[we].width,ot[we].height,kt,st,ot[we].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,Mi,ot[we].width,ot[we].height,0,kt,st,ot[we].data);for(let et=0;et<de.length;et++){let si=de[et].image[we].image;jt?B&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,et+1,0,0,si.width,si.height,kt,st,si.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,et+1,Mi,si.width,si.height,0,kt,st,si.data)}}else{jt?B&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,0,0,kt,st,ot[we]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,Mi,kt,st,ot[we]);for(let et=0;et<de.length;et++){let Ze=de[et];jt?B&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,et+1,0,0,kt,st,Ze.image[we]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+we,et+1,Mi,kt,st,Ze.image[we])}}}g(C)&&p(n.TEXTURE_CUBE_MAP),ge.__version=Me.version,C.onUpdate&&C.onUpdate(C)}P.__version=C.version}function We(P,C,X,pe,Me,ge){let ut=o.convert(X.format,X.colorSpace),je=o.convert(X.type),Xe=v(X.internalFormat,ut,je,X.colorSpace),Qt=i.get(C),Ee=i.get(X);if(Ee.__renderTarget=C,!Qt.__hasExternalTextures){let ot=Math.max(1,C.width>>ge),Tt=Math.max(1,C.height>>ge);Me===n.TEXTURE_3D||Me===n.TEXTURE_2D_ARRAY?t.texImage3D(Me,ge,Xe,ot,Tt,C.depth,0,ut,je,null):t.texImage2D(Me,ge,Xe,ot,Tt,0,ut,je,null)}t.bindFramebuffer(n.FRAMEBUFFER,P),Je(C)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,pe,Me,Ee.__webglTexture,0,Ce(C)):(Me===n.TEXTURE_2D||Me>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Me<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,pe,Me,Ee.__webglTexture,ge),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ve(P,C,X){if(n.bindRenderbuffer(n.RENDERBUFFER,P),C.depthBuffer){let pe=C.depthTexture,Me=pe&&pe.isDepthTexture?pe.type:null,ge=y(C.stencilBuffer,Me),ut=C.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,je=Ce(C);Je(C)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,je,ge,C.width,C.height):X?n.renderbufferStorageMultisample(n.RENDERBUFFER,je,ge,C.width,C.height):n.renderbufferStorage(n.RENDERBUFFER,ge,C.width,C.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,ut,n.RENDERBUFFER,P)}else{let pe=C.textures;for(let Me=0;Me<pe.length;Me++){let ge=pe[Me],ut=o.convert(ge.format,ge.colorSpace),je=o.convert(ge.type),Xe=v(ge.internalFormat,ut,je,ge.colorSpace),Qt=Ce(C);X&&Je(C)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Qt,Xe,C.width,C.height):Je(C)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Qt,Xe,C.width,C.height):n.renderbufferStorage(n.RENDERBUFFER,Xe,C.width,C.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ze(P,C){if(C&&C.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,P),!(C.depthTexture&&C.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let pe=i.get(C.depthTexture);pe.__renderTarget=C,(!pe.__webglTexture||C.depthTexture.image.width!==C.width||C.depthTexture.image.height!==C.height)&&(C.depthTexture.image.width=C.width,C.depthTexture.image.height=C.height,C.depthTexture.needsUpdate=!0),se(C.depthTexture,0);let Me=pe.__webglTexture,ge=Ce(C);if(C.depthTexture.format===Mc)Je(C)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Me,0,ge):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Me,0);else if(C.depthTexture.format===hs)Je(C)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Me,0,ge):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Me,0);else throw new Error("Unknown depthTexture format")}function qe(P){let C=i.get(P),X=P.isWebGLCubeRenderTarget===!0;if(C.__boundDepthTexture!==P.depthTexture){let pe=P.depthTexture;if(C.__depthDisposeCallback&&C.__depthDisposeCallback(),pe){let Me=()=>{delete C.__boundDepthTexture,delete C.__depthDisposeCallback,pe.removeEventListener("dispose",Me)};pe.addEventListener("dispose",Me),C.__depthDisposeCallback=Me}C.__boundDepthTexture=pe}if(P.depthTexture&&!C.__autoAllocateDepthBuffer){if(X)throw new Error("target.depthTexture not supported in Cube render targets");ze(C.__webglFramebuffer,P)}else if(X){C.__webglDepthbuffer=[];for(let pe=0;pe<6;pe++)if(t.bindFramebuffer(n.FRAMEBUFFER,C.__webglFramebuffer[pe]),C.__webglDepthbuffer[pe]===void 0)C.__webglDepthbuffer[pe]=n.createRenderbuffer(),ve(C.__webglDepthbuffer[pe],P,!1);else{let Me=P.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ge=C.__webglDepthbuffer[pe];n.bindRenderbuffer(n.RENDERBUFFER,ge),n.framebufferRenderbuffer(n.FRAMEBUFFER,Me,n.RENDERBUFFER,ge)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,C.__webglFramebuffer),C.__webglDepthbuffer===void 0)C.__webglDepthbuffer=n.createRenderbuffer(),ve(C.__webglDepthbuffer,P,!1);else{let pe=P.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Me=C.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Me),n.framebufferRenderbuffer(n.FRAMEBUFFER,pe,n.RENDERBUFFER,Me)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Be(P,C,X){let pe=i.get(P);C!==void 0&&We(pe.__webglFramebuffer,P,P.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),X!==void 0&&qe(P)}function di(P){let C=P.texture,X=i.get(P),pe=i.get(C);P.addEventListener("dispose",T);let Me=P.textures,ge=P.isWebGLCubeRenderTarget===!0,ut=Me.length>1;if(ut||(pe.__webglTexture===void 0&&(pe.__webglTexture=n.createTexture()),pe.__version=C.version,s.memory.textures++),ge){X.__webglFramebuffer=[];for(let je=0;je<6;je++)if(C.mipmaps&&C.mipmaps.length>0){X.__webglFramebuffer[je]=[];for(let Xe=0;Xe<C.mipmaps.length;Xe++)X.__webglFramebuffer[je][Xe]=n.createFramebuffer()}else X.__webglFramebuffer[je]=n.createFramebuffer()}else{if(C.mipmaps&&C.mipmaps.length>0){X.__webglFramebuffer=[];for(let je=0;je<C.mipmaps.length;je++)X.__webglFramebuffer[je]=n.createFramebuffer()}else X.__webglFramebuffer=n.createFramebuffer();if(ut)for(let je=0,Xe=Me.length;je<Xe;je++){let Qt=i.get(Me[je]);Qt.__webglTexture===void 0&&(Qt.__webglTexture=n.createTexture(),s.memory.textures++)}if(P.samples>0&&Je(P)===!1){X.__webglMultisampledFramebuffer=n.createFramebuffer(),X.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,X.__webglMultisampledFramebuffer);for(let je=0;je<Me.length;je++){let Xe=Me[je];X.__webglColorRenderbuffer[je]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,X.__webglColorRenderbuffer[je]);let Qt=o.convert(Xe.format,Xe.colorSpace),Ee=o.convert(Xe.type),ot=v(Xe.internalFormat,Qt,Ee,Xe.colorSpace,P.isXRRenderTarget===!0),Tt=Ce(P);n.renderbufferStorageMultisample(n.RENDERBUFFER,Tt,ot,P.width,P.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+je,n.RENDERBUFFER,X.__webglColorRenderbuffer[je])}n.bindRenderbuffer(n.RENDERBUFFER,null),P.depthBuffer&&(X.__webglDepthRenderbuffer=n.createRenderbuffer(),ve(X.__webglDepthRenderbuffer,P,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ge){t.bindTexture(n.TEXTURE_CUBE_MAP,pe.__webglTexture),Ge(n.TEXTURE_CUBE_MAP,C);for(let je=0;je<6;je++)if(C.mipmaps&&C.mipmaps.length>0)for(let Xe=0;Xe<C.mipmaps.length;Xe++)We(X.__webglFramebuffer[je][Xe],P,C,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+je,Xe);else We(X.__webglFramebuffer[je],P,C,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+je,0);g(C)&&p(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ut){for(let je=0,Xe=Me.length;je<Xe;je++){let Qt=Me[je],Ee=i.get(Qt);t.bindTexture(n.TEXTURE_2D,Ee.__webglTexture),Ge(n.TEXTURE_2D,Qt),We(X.__webglFramebuffer,P,Qt,n.COLOR_ATTACHMENT0+je,n.TEXTURE_2D,0),g(Qt)&&p(n.TEXTURE_2D)}t.unbindTexture()}else{let je=n.TEXTURE_2D;if((P.isWebGL3DRenderTarget||P.isWebGLArrayRenderTarget)&&(je=P.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(je,pe.__webglTexture),Ge(je,C),C.mipmaps&&C.mipmaps.length>0)for(let Xe=0;Xe<C.mipmaps.length;Xe++)We(X.__webglFramebuffer[Xe],P,C,n.COLOR_ATTACHMENT0,je,Xe);else We(X.__webglFramebuffer,P,C,n.COLOR_ATTACHMENT0,je,0);g(C)&&p(je),t.unbindTexture()}P.depthBuffer&&qe(P)}function xe(P){let C=P.textures;for(let X=0,pe=C.length;X<pe;X++){let Me=C[X];if(g(Me)){let ge=b(P),ut=i.get(Me).__webglTexture;t.bindTexture(ge,ut),p(ge),t.unbindTexture()}}}let Fe=[],F=[];function pt(P){if(P.samples>0){if(Je(P)===!1){let C=P.textures,X=P.width,pe=P.height,Me=n.COLOR_BUFFER_BIT,ge=P.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ut=i.get(P),je=C.length>1;if(je)for(let Xe=0;Xe<C.length;Xe++)t.bindFramebuffer(n.FRAMEBUFFER,ut.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xe,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,ut.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xe,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,ut.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ut.__webglFramebuffer);for(let Xe=0;Xe<C.length;Xe++){if(P.resolveDepthBuffer&&(P.depthBuffer&&(Me|=n.DEPTH_BUFFER_BIT),P.stencilBuffer&&P.resolveStencilBuffer&&(Me|=n.STENCIL_BUFFER_BIT)),je){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,ut.__webglColorRenderbuffer[Xe]);let Qt=i.get(C[Xe]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Qt,0)}n.blitFramebuffer(0,0,X,pe,0,0,X,pe,Me,n.NEAREST),l===!0&&(Fe.length=0,F.length=0,Fe.push(n.COLOR_ATTACHMENT0+Xe),P.depthBuffer&&P.resolveDepthBuffer===!1&&(Fe.push(ge),F.push(ge),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,F)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Fe))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),je)for(let Xe=0;Xe<C.length;Xe++){t.bindFramebuffer(n.FRAMEBUFFER,ut.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xe,n.RENDERBUFFER,ut.__webglColorRenderbuffer[Xe]);let Qt=i.get(C[Xe]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,ut.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xe,n.TEXTURE_2D,Qt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ut.__webglMultisampledFramebuffer)}else if(P.depthBuffer&&P.resolveDepthBuffer===!1&&l){let C=P.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[C])}}}function Ce(P){return Math.min(r.maxSamples,P.samples)}function Je(P){let C=i.get(P);return P.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&C.__useRenderToTexture!==!1}function Oe(P){let C=s.render.frame;d.get(P)!==C&&(d.set(P,C),P.update())}function wt(P,C){let X=P.colorSpace,pe=P.format,Me=P.type;return P.isCompressedTexture===!0||P.isVideoTexture===!0||X!==Gn&&X!==Na&&(ui.getTransfer(X)===Vi?(pe!==Or||Me!==ea)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",X)),C}function $e(P){return typeof HTMLImageElement<"u"&&P instanceof HTMLImageElement?(c.width=P.naturalWidth||P.width,c.height=P.naturalHeight||P.height):typeof VideoFrame<"u"&&P instanceof VideoFrame?(c.width=P.displayWidth,c.height=P.displayHeight):(c.width=P.width,c.height=P.height),c}this.allocateTextureUnit=W,this.resetTextureUnits=z,this.setTexture2D=se,this.setTexture2DArray=N,this.setTexture3D=H,this.setTextureCube=L,this.rebindTextures=Be,this.setupRenderTarget=di,this.updateRenderTargetMipmap=xe,this.updateMultisampleRenderTarget=pt,this.setupDepthRenderbuffer=qe,this.setupFrameBufferTexture=We,this.useMultisampledRTT=Je}function PU(n,e){function t(i,r=Na){let o,s=ui.getTransfer(r);if(i===ea)return n.UNSIGNED_BYTE;if(i===S_)return n.UNSIGNED_SHORT_4_4_4_4;if(i===T_)return n.UNSIGNED_SHORT_5_5_5_1;if(i===Aw)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===Ew)return n.BYTE;if(i===Dw)return n.SHORT;if(i===kl)return n.UNSIGNED_SHORT;if(i===M_)return n.INT;if(i===ja)return n.UNSIGNED_INT;if(i===nr)return n.FLOAT;if(i===zi)return n.HALF_FLOAT;if(i===Iw)return n.ALPHA;if(i===Pw)return n.RGB;if(i===Or)return n.RGBA;if(i===Fw)return n.LUMINANCE;if(i===kw)return n.LUMINANCE_ALPHA;if(i===Mc)return n.DEPTH_COMPONENT;if(i===hs)return n.DEPTH_STENCIL;if(i===Ol)return n.RED;if(i===Gf)return n.RED_INTEGER;if(i===Ow)return n.RG;if(i===R_)return n.RG_INTEGER;if(i===C_)return n.RGBA_INTEGER;if(i===Wf||i===$f||i===qf||i===Xf)if(s===Vi)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===Wf)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===$f)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===qf)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Xf)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===Wf)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===$f)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===qf)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Xf)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===E_||i===D_||i===A_||i===I_)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===E_)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===D_)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===A_)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===I_)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===P_||i===F_||i===k_)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(i===P_||i===F_)return s===Vi?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===k_)return s===Vi?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===O_||i===j_||i===N_||i===L_||i===B_||i===U_||i===V_||i===z_||i===H_||i===G_||i===W_||i===$_||i===q_||i===X_)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(i===O_)return s===Vi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===j_)return s===Vi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===N_)return s===Vi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===L_)return s===Vi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===B_)return s===Vi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===U_)return s===Vi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===V_)return s===Vi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===z_)return s===Vi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===H_)return s===Vi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===G_)return s===Vi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===W_)return s===Vi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===$_)return s===Vi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===q_)return s===Vi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===X_)return s===Vi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Yf||i===Y_||i===Z_)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(i===Yf)return s===Vi?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Y_)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Z_)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===jw||i===Q_||i===K_||i===J_)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(i===Yf)return o.COMPRESSED_RED_RGTC1_EXT;if(i===Q_)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===K_)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===J_)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===_s?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}var jee={type:"move"},rb=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Tr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Tr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new w,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new w),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Tr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new w,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new w),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,o=null,s=null,a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){s=!0;for(let _ of e.hand.values()){let g=t.getJointPose(_,i),p=this._getHandJoint(c,_);g!==null&&(p.matrix.fromArray(g.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,p.jointRadius=g.radius),p.visible=g!==null}let d=c.joints["index-finger-tip"],u=c.joints["thumb-tip"],h=d.position.distanceTo(u.position),f=.02,m=.005;c.inputState.pinching&&h>f+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&o!==null&&(r=o),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(jee)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=o!==null),c!==null&&(c.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let i=new Tr;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}},Nee=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Lee=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,b1=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){let r=new yn,o=e.properties.get(r);o.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){let t=e.cameras[0].viewport,i=new Et({vertexShader:Nee,fragmentShader:Lee,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ke(new $s(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},v1=class extends Ho{constructor(e,t){super();let i=this,r=null,o=1,s=null,a="local-floor",l=1,c=null,d=null,u=null,h=null,f=null,m=null,_=new b1,g=t.getContextAttributes(),p=null,b=null,v=[],y=[],R=new V,S=null,T=new rn;T.viewport=new li;let A=new rn;A.viewport=new li;let M=[T,A],x=new u_,I=null,z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(K){let Re=v[K];return Re===void 0&&(Re=new rb,v[K]=Re),Re.getTargetRaySpace()},this.getControllerGrip=function(K){let Re=v[K];return Re===void 0&&(Re=new rb,v[K]=Re),Re.getGripSpace()},this.getHand=function(K){let Re=v[K];return Re===void 0&&(Re=new rb,v[K]=Re),Re.getHandSpace()};function W(K){let Re=y.indexOf(K.inputSource);if(Re===-1)return;let We=v[Re];We!==void 0&&(We.update(K.inputSource,K.frame,c||s),We.dispatchEvent({type:K.type,data:K.inputSource}))}function ee(){r.removeEventListener("select",W),r.removeEventListener("selectstart",W),r.removeEventListener("selectend",W),r.removeEventListener("squeeze",W),r.removeEventListener("squeezestart",W),r.removeEventListener("squeezeend",W),r.removeEventListener("end",ee),r.removeEventListener("inputsourceschange",se);for(let K=0;K<v.length;K++){let Re=y[K];Re!==null&&(y[K]=null,v[K].disconnect(Re))}I=null,z=null,_.reset(),e.setRenderTarget(p),f=null,h=null,u=null,r=null,b=null,St.stop(),i.isPresenting=!1,e.setPixelRatio(S),e.setSize(R.width,R.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(K){o=K,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(K){a=K,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||s},this.setReferenceSpace=function(K){c=K},this.getBaseLayer=function(){return h!==null?h:f},this.getBinding=function(){return u},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=function(K){return xi(this,null,function*(){if(r=K,r!==null){if(p=e.getRenderTarget(),r.addEventListener("select",W),r.addEventListener("selectstart",W),r.addEventListener("selectend",W),r.addEventListener("squeeze",W),r.addEventListener("squeezestart",W),r.addEventListener("squeezeend",W),r.addEventListener("end",ee),r.addEventListener("inputsourceschange",se),g.xrCompatible!==!0&&(yield t.makeXRCompatible()),S=e.getPixelRatio(),e.getSize(R),r.renderState.layers===void 0){let Re={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:o};f=new XRWebGLLayer(r,t,Re),r.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),b=new ti(f.framebufferWidth,f.framebufferHeight,{format:Or,type:ea,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})}else{let Re=null,We=null,ve=null;g.depth&&(ve=g.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Re=g.stencil?hs:Mc,We=g.stencil?_s:ja);let ze={colorFormat:t.RGBA8,depthFormat:ve,scaleFactor:o};u=new XRWebGLBinding(r,t),h=u.createProjectionLayer(ze),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),b=new ti(h.textureWidth,h.textureHeight,{format:Or,type:ea,depthTexture:new ps(h.textureWidth,h.textureHeight,We,void 0,void 0,void 0,void 0,void 0,void 0,Re),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}b.isXRRenderTarget=!0,this.setFoveation(l),c=null,s=yield r.requestReferenceSpace(a),St.setContext(r),St.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return _.getDepthTexture()};function se(K){for(let Re=0;Re<K.removed.length;Re++){let We=K.removed[Re],ve=y.indexOf(We);ve>=0&&(y[ve]=null,v[ve].disconnect(We))}for(let Re=0;Re<K.added.length;Re++){let We=K.added[Re],ve=y.indexOf(We);if(ve===-1){for(let qe=0;qe<v.length;qe++)if(qe>=y.length){y.push(We),ve=qe;break}else if(y[qe]===null){y[qe]=We,ve=qe;break}if(ve===-1)break}let ze=v[ve];ze&&ze.connect(We)}}let N=new w,H=new w;function L(K,Re,We){N.setFromMatrixPosition(Re.matrixWorld),H.setFromMatrixPosition(We.matrixWorld);let ve=N.distanceTo(H),ze=Re.projectionMatrix.elements,qe=We.projectionMatrix.elements,Be=ze[14]/(ze[10]-1),di=ze[14]/(ze[10]+1),xe=(ze[9]+1)/ze[5],Fe=(ze[9]-1)/ze[5],F=(ze[8]-1)/ze[0],pt=(qe[8]+1)/qe[0],Ce=Be*F,Je=Be*pt,Oe=ve/(-F+pt),wt=Oe*-F;if(Re.matrixWorld.decompose(K.position,K.quaternion,K.scale),K.translateX(wt),K.translateZ(Oe),K.matrixWorld.compose(K.position,K.quaternion,K.scale),K.matrixWorldInverse.copy(K.matrixWorld).invert(),ze[10]===-1)K.projectionMatrix.copy(Re.projectionMatrix),K.projectionMatrixInverse.copy(Re.projectionMatrixInverse);else{let $e=Be+Oe,P=di+Oe,C=Ce-wt,X=Je+(ve-wt),pe=xe*di/P*$e,Me=Fe*di/P*$e;K.projectionMatrix.makePerspective(C,X,pe,Me,$e,P),K.projectionMatrixInverse.copy(K.projectionMatrix).invert()}}function te(K,Re){Re===null?K.matrixWorld.copy(K.matrix):K.matrixWorld.multiplyMatrices(Re.matrixWorld,K.matrix),K.matrixWorldInverse.copy(K.matrixWorld).invert()}this.updateCamera=function(K){if(r===null)return;let Re=K.near,We=K.far;_.texture!==null&&(_.depthNear>0&&(Re=_.depthNear),_.depthFar>0&&(We=_.depthFar)),x.near=A.near=T.near=Re,x.far=A.far=T.far=We,(I!==x.near||z!==x.far)&&(r.updateRenderState({depthNear:x.near,depthFar:x.far}),I=x.near,z=x.far),T.layers.mask=K.layers.mask|2,A.layers.mask=K.layers.mask|4,x.layers.mask=T.layers.mask|A.layers.mask;let ve=K.parent,ze=x.cameras;te(x,ve);for(let qe=0;qe<ze.length;qe++)te(ze[qe],ve);ze.length===2?L(x,T,A):x.projectionMatrix.copy(T.projectionMatrix),Se(K,x,ve)};function Se(K,Re,We){We===null?K.matrix.copy(Re.matrixWorld):(K.matrix.copy(We.matrixWorld),K.matrix.invert(),K.matrix.multiply(Re.matrixWorld)),K.matrix.decompose(K.position,K.quaternion,K.scale),K.updateMatrixWorld(!0),K.projectionMatrix.copy(Re.projectionMatrix),K.projectionMatrixInverse.copy(Re.projectionMatrixInverse),K.isPerspectiveCamera&&(K.fov=iu*2*Math.atan(1/K.projectionMatrix.elements[5]),K.zoom=1)}this.getCamera=function(){return x},this.getFoveation=function(){if(!(h===null&&f===null))return l},this.setFoveation=function(K){l=K,h!==null&&(h.fixedFoveation=K),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=K)},this.hasDepthSensing=function(){return _.texture!==null},this.getDepthSensingMesh=function(){return _.getMesh(x)};let Pe=null;function Ge(K,Re){if(d=Re.getViewerPose(c||s),m=Re,d!==null){let We=d.views;f!==null&&(e.setRenderTargetFramebuffer(b,f.framebuffer),e.setRenderTarget(b));let ve=!1;We.length!==x.cameras.length&&(x.cameras.length=0,ve=!0);for(let qe=0;qe<We.length;qe++){let Be=We[qe],di=null;if(f!==null)di=f.getViewport(Be);else{let Fe=u.getViewSubImage(h,Be);di=Fe.viewport,qe===0&&(e.setRenderTargetTextures(b,Fe.colorTexture,h.ignoreDepthValues?void 0:Fe.depthStencilTexture),e.setRenderTarget(b))}let xe=M[qe];xe===void 0&&(xe=new rn,xe.layers.enable(qe),xe.viewport=new li,M[qe]=xe),xe.matrix.fromArray(Be.transform.matrix),xe.matrix.decompose(xe.position,xe.quaternion,xe.scale),xe.projectionMatrix.fromArray(Be.projectionMatrix),xe.projectionMatrixInverse.copy(xe.projectionMatrix).invert(),xe.viewport.set(di.x,di.y,di.width,di.height),qe===0&&(x.matrix.copy(xe.matrix),x.matrix.decompose(x.position,x.quaternion,x.scale)),ve===!0&&x.cameras.push(xe)}let ze=r.enabledFeatures;if(ze&&ze.includes("depth-sensing")){let qe=u.getDepthInformation(We[0]);qe&&qe.isValid&&qe.texture&&_.init(e,qe,r.renderState)}}for(let We=0;We<v.length;We++){let ve=y[We],ze=v[We];ve!==null&&ze!==void 0&&ze.update(ve,Re,c||s)}Pe&&Pe(K,Re),Re.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Re}),m=null}let St=new CU;St.setAnimationLoop(Ge),this.setAnimationLoop=function(K){Pe=K},this.dispose=function(){}}},Tu=new Jr,Bee=new Ie;function Uee(n,e){function t(g,p){g.matrixAutoUpdate===!0&&g.updateMatrix(),p.value.copy(g.matrix)}function i(g,p){p.color.getRGB(g.fogColor.value,e1(n)),p.isFog?(g.fogNear.value=p.near,g.fogFar.value=p.far):p.isFogExp2&&(g.fogDensity.value=p.density)}function r(g,p,b,v,y){p.isMeshBasicMaterial||p.isMeshLambertMaterial?o(g,p):p.isMeshToonMaterial?(o(g,p),u(g,p)):p.isMeshPhongMaterial?(o(g,p),d(g,p)):p.isMeshStandardMaterial?(o(g,p),h(g,p),p.isMeshPhysicalMaterial&&f(g,p,y)):p.isMeshMatcapMaterial?(o(g,p),m(g,p)):p.isMeshDepthMaterial?o(g,p):p.isMeshDistanceMaterial?(o(g,p),_(g,p)):p.isMeshNormalMaterial?o(g,p):p.isLineBasicMaterial?(s(g,p),p.isLineDashedMaterial&&a(g,p)):p.isPointsMaterial?l(g,p,b,v):p.isSpriteMaterial?c(g,p):p.isShadowMaterial?(g.color.value.copy(p.color),g.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function o(g,p){g.opacity.value=p.opacity,p.color&&g.diffuse.value.copy(p.color),p.emissive&&g.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(g.map.value=p.map,t(p.map,g.mapTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,t(p.alphaMap,g.alphaMapTransform)),p.bumpMap&&(g.bumpMap.value=p.bumpMap,t(p.bumpMap,g.bumpMapTransform),g.bumpScale.value=p.bumpScale,p.side===Br&&(g.bumpScale.value*=-1)),p.normalMap&&(g.normalMap.value=p.normalMap,t(p.normalMap,g.normalMapTransform),g.normalScale.value.copy(p.normalScale),p.side===Br&&g.normalScale.value.negate()),p.displacementMap&&(g.displacementMap.value=p.displacementMap,t(p.displacementMap,g.displacementMapTransform),g.displacementScale.value=p.displacementScale,g.displacementBias.value=p.displacementBias),p.emissiveMap&&(g.emissiveMap.value=p.emissiveMap,t(p.emissiveMap,g.emissiveMapTransform)),p.specularMap&&(g.specularMap.value=p.specularMap,t(p.specularMap,g.specularMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest);let b=e.get(p),v=b.envMap,y=b.envMapRotation;v&&(g.envMap.value=v,Tu.copy(y),Tu.x*=-1,Tu.y*=-1,Tu.z*=-1,v.isCubeTexture&&v.isRenderTargetTexture===!1&&(Tu.y*=-1,Tu.z*=-1),g.envMapRotation.value.setFromMatrix4(Bee.makeRotationFromEuler(Tu)),g.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=p.reflectivity,g.ior.value=p.ior,g.refractionRatio.value=p.refractionRatio),p.lightMap&&(g.lightMap.value=p.lightMap,g.lightMapIntensity.value=p.lightMapIntensity,t(p.lightMap,g.lightMapTransform)),p.aoMap&&(g.aoMap.value=p.aoMap,g.aoMapIntensity.value=p.aoMapIntensity,t(p.aoMap,g.aoMapTransform))}function s(g,p){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,p.map&&(g.map.value=p.map,t(p.map,g.mapTransform))}function a(g,p){g.dashSize.value=p.dashSize,g.totalSize.value=p.dashSize+p.gapSize,g.scale.value=p.scale}function l(g,p,b,v){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,g.size.value=p.size*b,g.scale.value=v*.5,p.map&&(g.map.value=p.map,t(p.map,g.uvTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,t(p.alphaMap,g.alphaMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest)}function c(g,p){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,g.rotation.value=p.rotation,p.map&&(g.map.value=p.map,t(p.map,g.mapTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,t(p.alphaMap,g.alphaMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest)}function d(g,p){g.specular.value.copy(p.specular),g.shininess.value=Math.max(p.shininess,1e-4)}function u(g,p){p.gradientMap&&(g.gradientMap.value=p.gradientMap)}function h(g,p){g.metalness.value=p.metalness,p.metalnessMap&&(g.metalnessMap.value=p.metalnessMap,t(p.metalnessMap,g.metalnessMapTransform)),g.roughness.value=p.roughness,p.roughnessMap&&(g.roughnessMap.value=p.roughnessMap,t(p.roughnessMap,g.roughnessMapTransform)),p.envMap&&(g.envMapIntensity.value=p.envMapIntensity)}function f(g,p,b){g.ior.value=p.ior,p.sheen>0&&(g.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),g.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(g.sheenColorMap.value=p.sheenColorMap,t(p.sheenColorMap,g.sheenColorMapTransform)),p.sheenRoughnessMap&&(g.sheenRoughnessMap.value=p.sheenRoughnessMap,t(p.sheenRoughnessMap,g.sheenRoughnessMapTransform))),p.clearcoat>0&&(g.clearcoat.value=p.clearcoat,g.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(g.clearcoatMap.value=p.clearcoatMap,t(p.clearcoatMap,g.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,t(p.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(g.clearcoatNormalMap.value=p.clearcoatNormalMap,t(p.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===Br&&g.clearcoatNormalScale.value.negate())),p.dispersion>0&&(g.dispersion.value=p.dispersion),p.iridescence>0&&(g.iridescence.value=p.iridescence,g.iridescenceIOR.value=p.iridescenceIOR,g.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(g.iridescenceMap.value=p.iridescenceMap,t(p.iridescenceMap,g.iridescenceMapTransform)),p.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=p.iridescenceThicknessMap,t(p.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),p.transmission>0&&(g.transmission.value=p.transmission,g.transmissionSamplerMap.value=b.texture,g.transmissionSamplerSize.value.set(b.width,b.height),p.transmissionMap&&(g.transmissionMap.value=p.transmissionMap,t(p.transmissionMap,g.transmissionMapTransform)),g.thickness.value=p.thickness,p.thicknessMap&&(g.thicknessMap.value=p.thicknessMap,t(p.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=p.attenuationDistance,g.attenuationColor.value.copy(p.attenuationColor)),p.anisotropy>0&&(g.anisotropyVector.value.set(p.anisotropy*Math.cos(p.anisotropyRotation),p.anisotropy*Math.sin(p.anisotropyRotation)),p.anisotropyMap&&(g.anisotropyMap.value=p.anisotropyMap,t(p.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=p.specularIntensity,g.specularColor.value.copy(p.specularColor),p.specularColorMap&&(g.specularColorMap.value=p.specularColorMap,t(p.specularColorMap,g.specularColorMapTransform)),p.specularIntensityMap&&(g.specularIntensityMap.value=p.specularIntensityMap,t(p.specularIntensityMap,g.specularIntensityMapTransform))}function m(g,p){p.matcap&&(g.matcap.value=p.matcap)}function _(g,p){let b=e.get(p).light;g.referencePosition.value.setFromMatrixPosition(b.matrixWorld),g.nearDistance.value=b.shadow.camera.near,g.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Vee(n,e,t,i){let r={},o={},s=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(b,v){let y=v.program;i.uniformBlockBinding(b,y)}function c(b,v){let y=r[b.id];y===void 0&&(m(b),y=d(b),r[b.id]=y,b.addEventListener("dispose",g));let R=v.program;i.updateUBOMapping(b,R);let S=e.render.frame;o[b.id]!==S&&(h(b),o[b.id]=S)}function d(b){let v=u();b.__bindingPointIndex=v;let y=n.createBuffer(),R=b.__size,S=b.usage;return n.bindBuffer(n.UNIFORM_BUFFER,y),n.bufferData(n.UNIFORM_BUFFER,R,S),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,v,y),y}function u(){for(let b=0;b<a;b++)if(s.indexOf(b)===-1)return s.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(b){let v=r[b.id],y=b.uniforms,R=b.__cache;n.bindBuffer(n.UNIFORM_BUFFER,v);for(let S=0,T=y.length;S<T;S++){let A=Array.isArray(y[S])?y[S]:[y[S]];for(let M=0,x=A.length;M<x;M++){let I=A[M];if(f(I,S,M,R)===!0){let z=I.__offset,W=Array.isArray(I.value)?I.value:[I.value],ee=0;for(let se=0;se<W.length;se++){let N=W[se],H=_(N);typeof N=="number"||typeof N=="boolean"?(I.__data[0]=N,n.bufferSubData(n.UNIFORM_BUFFER,z+ee,I.__data)):N.isMatrix3?(I.__data[0]=N.elements[0],I.__data[1]=N.elements[1],I.__data[2]=N.elements[2],I.__data[3]=0,I.__data[4]=N.elements[3],I.__data[5]=N.elements[4],I.__data[6]=N.elements[5],I.__data[7]=0,I.__data[8]=N.elements[6],I.__data[9]=N.elements[7],I.__data[10]=N.elements[8],I.__data[11]=0):(N.toArray(I.__data,ee),ee+=H.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,z,I.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(b,v,y,R){let S=b.value,T=v+"_"+y;if(R[T]===void 0)return typeof S=="number"||typeof S=="boolean"?R[T]=S:R[T]=S.clone(),!0;{let A=R[T];if(typeof S=="number"||typeof S=="boolean"){if(A!==S)return R[T]=S,!0}else if(A.equals(S)===!1)return A.copy(S),!0}return!1}function m(b){let v=b.uniforms,y=0,R=16;for(let T=0,A=v.length;T<A;T++){let M=Array.isArray(v[T])?v[T]:[v[T]];for(let x=0,I=M.length;x<I;x++){let z=M[x],W=Array.isArray(z.value)?z.value:[z.value];for(let ee=0,se=W.length;ee<se;ee++){let N=W[ee],H=_(N),L=y%R,te=L%H.boundary,Se=L+te;y+=te,Se!==0&&R-Se<H.storage&&(y+=R-Se),z.__data=new Float32Array(H.storage/Float32Array.BYTES_PER_ELEMENT),z.__offset=y,y+=H.storage}}}let S=y%R;return S>0&&(y+=R-S),b.__size=y,b.__cache={},this}function _(b){let v={boundary:0,storage:0};return typeof b=="number"||typeof b=="boolean"?(v.boundary=4,v.storage=4):b.isVector2?(v.boundary=8,v.storage=8):b.isVector3||b.isColor?(v.boundary=16,v.storage=12):b.isVector4?(v.boundary=16,v.storage=16):b.isMatrix3?(v.boundary=48,v.storage=48):b.isMatrix4?(v.boundary=64,v.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),v}function g(b){let v=b.target;v.removeEventListener("dispose",g);let y=s.indexOf(v.__bindingPointIndex);s.splice(y,1),n.deleteBuffer(r[v.id]),delete r[v.id],delete o[v.id]}function p(){for(let b in r)n.deleteBuffer(r[b]);s=[],r={},o={}}return{bind:l,update:c,dispose:p}}var Nl=class{constructor(e={}){let{canvas:t=JD(),context:i=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:u=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let f;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=i.getContextAttributes().alpha}else f=s;let m=new Uint32Array(4),_=new Int32Array(4),g=null,p=null,b=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Zi,this.toneMapping=ka,this.toneMappingExposure=1;let y=this,R=!1,S=0,T=0,A=null,M=-1,x=null,I=new li,z=new li,W=null,ee=new he(0),se=0,N=t.width,H=t.height,L=1,te=null,Se=null,Pe=new li(0,0,N,H),Ge=new li(0,0,N,H),St=!1,K=new Pc,Re=!1,We=!1,ve=new Ie,ze=new Ie,qe=new w,Be=new li,di={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},xe=!1;function Fe(){return A===null?L:1}let F=i;function pt(D,G){return t.getContext(D,G)}try{let D={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${m_}`),t.addEventListener("webglcontextlost",we,!1),t.addEventListener("webglcontextrestored",et,!1),t.addEventListener("webglcontextcreationerror",Ze,!1),F===null){let G="webgl2";if(F=pt(G,D),F===null)throw pt(G)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(D){throw console.error("THREE.WebGLRenderer: "+D.message),D}let Ce,Je,Oe,wt,$e,P,C,X,pe,Me,ge,ut,je,Xe,Qt,Ee,ot,Tt,kt,st,Mi,jt,Di,B;function Le(){Ce=new oJ(F),Ce.init(),jt=new PU(F,Ce),Je=new JK(F,Ce,e,jt),Oe=new kee(F,Ce),Je.reverseDepthBuffer&&h&&Oe.buffers.depth.setReversed(!0),wt=new lJ(F),$e=new xee,P=new Oee(F,Ce,Oe,$e,Je,jt,wt),C=new tJ(y),X=new rJ(y),pe=new mZ(F),Di=new QK(F,pe),Me=new sJ(F,pe,wt,Di),ge=new dJ(F,Me,pe,wt),kt=new cJ(F,Je,P),Ee=new eJ($e),ut=new yee(y,C,X,Ce,Je,Di,Ee),je=new Uee(y,$e),Xe=new Mee,Qt=new Dee(Ce),Tt=new ZK(y,C,X,Oe,ge,f,l),ot=new Pee(y,ge,Je),B=new Vee(F,wt,Je,Oe),st=new KK(F,Ce,wt),Mi=new aJ(F,Ce,wt),wt.programs=ut.programs,y.capabilities=Je,y.extensions=Ce,y.properties=$e,y.renderLists=Xe,y.shadowMap=ot,y.state=Oe,y.info=wt}Le();let de=new v1(y,F);this.xr=de,this.getContext=function(){return F},this.getContextAttributes=function(){return F.getContextAttributes()},this.forceContextLoss=function(){let D=Ce.get("WEBGL_lose_context");D&&D.loseContext()},this.forceContextRestore=function(){let D=Ce.get("WEBGL_lose_context");D&&D.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(D){D!==void 0&&(L=D,this.setSize(N,H,!1))},this.getSize=function(D){return D.set(N,H)},this.setSize=function(D,G,ne=!0){if(de.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}N=D,H=G,t.width=Math.floor(D*L),t.height=Math.floor(G*L),ne===!0&&(t.style.width=D+"px",t.style.height=G+"px"),this.setViewport(0,0,D,G)},this.getDrawingBufferSize=function(D){return D.set(N*L,H*L).floor()},this.setDrawingBufferSize=function(D,G,ne){N=D,H=G,L=ne,t.width=Math.floor(D*ne),t.height=Math.floor(G*ne),this.setViewport(0,0,D,G)},this.getCurrentViewport=function(D){return D.copy(I)},this.getViewport=function(D){return D.copy(Pe)},this.setViewport=function(D,G,ne,re){D.isVector4?Pe.set(D.x,D.y,D.z,D.w):Pe.set(D,G,ne,re),Oe.viewport(I.copy(Pe).multiplyScalar(L).round())},this.getScissor=function(D){return D.copy(Ge)},this.setScissor=function(D,G,ne,re){D.isVector4?Ge.set(D.x,D.y,D.z,D.w):Ge.set(D,G,ne,re),Oe.scissor(z.copy(Ge).multiplyScalar(L).round())},this.getScissorTest=function(){return St},this.setScissorTest=function(D){Oe.setScissorTest(St=D)},this.setOpaqueSort=function(D){te=D},this.setTransparentSort=function(D){Se=D},this.getClearColor=function(D){return D.copy(Tt.getClearColor())},this.setClearColor=function(){Tt.setClearColor.apply(Tt,arguments)},this.getClearAlpha=function(){return Tt.getClearAlpha()},this.setClearAlpha=function(){Tt.setClearAlpha.apply(Tt,arguments)},this.clear=function(D=!0,G=!0,ne=!0){let re=0;if(D){let $=!1;if(A!==null){let Ae=A.texture.format;$=Ae===C_||Ae===R_||Ae===Gf}if($){let Ae=A.texture.type,Ye=Ae===ea||Ae===ja||Ae===kl||Ae===_s||Ae===S_||Ae===T_,at=Tt.getClearColor(),mt=Tt.getClearAlpha(),Bt=at.r,zt=at.g,Mt=at.b;Ye?(m[0]=Bt,m[1]=zt,m[2]=Mt,m[3]=mt,F.clearBufferuiv(F.COLOR,0,m)):(_[0]=Bt,_[1]=zt,_[2]=Mt,_[3]=mt,F.clearBufferiv(F.COLOR,0,_))}else re|=F.COLOR_BUFFER_BIT}G&&(re|=F.DEPTH_BUFFER_BIT),ne&&(re|=F.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),F.clear(re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",we,!1),t.removeEventListener("webglcontextrestored",et,!1),t.removeEventListener("webglcontextcreationerror",Ze,!1),Tt.dispose(),Xe.dispose(),Qt.dispose(),$e.dispose(),C.dispose(),X.dispose(),ge.dispose(),Di.dispose(),B.dispose(),ut.dispose(),de.dispose(),de.removeEventListener("sessionstart",zP),de.removeEventListener("sessionend",HP),ld.stop()};function we(D){D.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function et(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1;let D=wt.autoReset,G=ot.enabled,ne=ot.autoUpdate,re=ot.needsUpdate,$=ot.type;Le(),wt.autoReset=D,ot.enabled=G,ot.autoUpdate=ne,ot.needsUpdate=re,ot.type=$}function Ze(D){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",D.statusMessage)}function si(D){let G=D.target;G.removeEventListener("dispose",si),Rn(G)}function Rn(D){Cr(D),$e.remove(D)}function Cr(D){let G=$e.get(D).programs;G!==void 0&&(G.forEach(function(ne){ut.releaseProgram(ne)}),D.isShaderMaterial&&ut.releaseShaderCache(D))}this.renderBufferDirect=function(D,G,ne,re,$,Ae){G===null&&(G=di);let Ye=$.isMesh&&$.matrixWorld.determinant()<0,at=C4(D,G,ne,re,$);Oe.setMaterial(re,Ye);let mt=ne.index,Bt=1;if(re.wireframe===!0){if(mt=Me.getWireframeAttribute(ne),mt===void 0)return;Bt=2}let zt=ne.drawRange,Mt=ne.attributes.position,Ei=zt.start*Bt,ki=(zt.start+zt.count)*Bt;Ae!==null&&(Ei=Math.max(Ei,Ae.start*Bt),ki=Math.min(ki,(Ae.start+Ae.count)*Bt)),mt!==null?(Ei=Math.max(Ei,0),ki=Math.min(ki,mt.count)):Mt!=null&&(Ei=Math.max(Ei,0),ki=Math.min(ki,Mt.count));let Vn=ki-Ei;if(Vn<0||Vn===1/0)return;Di.setup($,re,at,ne,mt);let Cn,Ai=st;if(mt!==null&&(Cn=pe.get(mt),Ai=Mi,Ai.setIndex(Cn)),$.isMesh)re.wireframe===!0?(Oe.setLineWidth(re.wireframeLinewidth*Fe()),Ai.setMode(F.LINES)):Ai.setMode(F.TRIANGLES);else if($.isLine){let Rt=re.linewidth;Rt===void 0&&(Rt=1),Oe.setLineWidth(Rt*Fe()),$.isLineSegments?Ai.setMode(F.LINES):$.isLineLoop?Ai.setMode(F.LINE_LOOP):Ai.setMode(F.LINE_STRIP)}else $.isPoints?Ai.setMode(F.POINTS):$.isSprite&&Ai.setMode(F.TRIANGLES);if($.isBatchedMesh)if($._multiDrawInstances!==null)Ai.renderMultiDrawInstances($._multiDrawStarts,$._multiDrawCounts,$._multiDrawCount,$._multiDrawInstances);else if(Ce.get("WEBGL_multi_draw"))Ai.renderMultiDraw($._multiDrawStarts,$._multiDrawCounts,$._multiDrawCount);else{let Rt=$._multiDrawStarts,vr=$._multiDrawCounts,Oi=$._multiDrawCount,Ts=mt?pe.get(mt).bytesPerElement:1,Xu=$e.get(re).currentProgram.getUniforms();for(let Ao=0;Ao<Oi;Ao++)Xu.setValue(F,"_gl_DrawID",Ao),Ai.render(Rt[Ao]/Ts,vr[Ao])}else if($.isInstancedMesh)Ai.renderInstances(Ei,Vn,$.count);else if(ne.isInstancedBufferGeometry){let Rt=ne._maxInstanceCount!==void 0?ne._maxInstanceCount:1/0,vr=Math.min(ne.instanceCount,Rt);Ai.renderInstances(Ei,Vn,vr)}else Ai.render(Ei,Vn)};function Gi(D,G,ne){D.transparent===!0&&D.side===$n&&D.forceSinglePass===!1?(D.side=Br,D.needsUpdate=!0,tv(D,G,ne),D.side=ds,D.needsUpdate=!0,tv(D,G,ne),D.side=$n):tv(D,G,ne)}this.compile=function(D,G,ne=null){ne===null&&(ne=D),p=Qt.get(ne),p.init(G),v.push(p),ne.traverseVisible(function($){$.isLight&&$.layers.test(G.layers)&&(p.pushLight($),$.castShadow&&p.pushShadow($))}),D!==ne&&D.traverseVisible(function($){$.isLight&&$.layers.test(G.layers)&&(p.pushLight($),$.castShadow&&p.pushShadow($))}),p.setupLights();let re=new Set;return D.traverse(function($){if(!($.isMesh||$.isPoints||$.isLine||$.isSprite))return;let Ae=$.material;if(Ae)if(Array.isArray(Ae))for(let Ye=0;Ye<Ae.length;Ye++){let at=Ae[Ye];Gi(at,ne,$),re.add(at)}else Gi(Ae,ne,$),re.add(Ae)}),v.pop(),p=null,re},this.compileAsync=function(D,G,ne=null){let re=this.compile(D,G,ne);return new Promise($=>{function Ae(){if(re.forEach(function(Ye){$e.get(Ye).currentProgram.isReady()&&re.delete(Ye)}),re.size===0){$(D);return}setTimeout(Ae,10)}Ce.get("KHR_parallel_shader_compile")!==null?Ae():setTimeout(Ae,10)})};let Ss=null;function el(D){Ss&&Ss(D)}function zP(){ld.stop()}function HP(){ld.start()}let ld=new CU;ld.setAnimationLoop(el),typeof self<"u"&&ld.setContext(self),this.setAnimationLoop=function(D){Ss=D,de.setAnimationLoop(D),D===null?ld.stop():ld.start()},de.addEventListener("sessionstart",zP),de.addEventListener("sessionend",HP),this.render=function(D,G){if(G!==void 0&&G.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(R===!0)return;if(D.matrixWorldAutoUpdate===!0&&D.updateMatrixWorld(),G.parent===null&&G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),de.enabled===!0&&de.isPresenting===!0&&(de.cameraAutoUpdate===!0&&de.updateCamera(G),G=de.getCamera()),D.isScene===!0&&D.onBeforeRender(y,D,G,A),p=Qt.get(D,v.length),p.init(G),v.push(p),ze.multiplyMatrices(G.projectionMatrix,G.matrixWorldInverse),K.setFromProjectionMatrix(ze),We=this.localClippingEnabled,Re=Ee.init(this.clippingPlanes,We),g=Xe.get(D,b.length),g.init(),b.push(g),de.enabled===!0&&de.isPresenting===!0){let Ae=y.xr.getDepthSensingMesh();Ae!==null&&NS(Ae,G,-1/0,y.sortObjects)}NS(D,G,0,y.sortObjects),g.finish(),y.sortObjects===!0&&g.sort(te,Se),xe=de.enabled===!1||de.isPresenting===!1||de.hasDepthSensing()===!1,xe&&Tt.addToRenderList(g,D),this.info.render.frame++,Re===!0&&Ee.beginShadows();let ne=p.state.shadowsArray;ot.render(ne,D,G),Re===!0&&Ee.endShadows(),this.info.autoReset===!0&&this.info.reset();let re=g.opaque,$=g.transmissive;if(p.setupLights(),G.isArrayCamera){let Ae=G.cameras;if($.length>0)for(let Ye=0,at=Ae.length;Ye<at;Ye++){let mt=Ae[Ye];WP(re,$,D,mt)}xe&&Tt.render(D);for(let Ye=0,at=Ae.length;Ye<at;Ye++){let mt=Ae[Ye];GP(g,D,mt,mt.viewport)}}else $.length>0&&WP(re,$,D,G),xe&&Tt.render(D),GP(g,D,G);A!==null&&(P.updateMultisampleRenderTarget(A),P.updateRenderTargetMipmap(A)),D.isScene===!0&&D.onAfterRender(y,D,G),Di.resetDefaultState(),M=-1,x=null,v.pop(),v.length>0?(p=v[v.length-1],Re===!0&&Ee.setGlobalState(y.clippingPlanes,p.state.camera)):p=null,b.pop(),b.length>0?g=b[b.length-1]:g=null};function NS(D,G,ne,re){if(D.visible===!1)return;if(D.layers.test(G.layers)){if(D.isGroup)ne=D.renderOrder;else if(D.isLOD)D.autoUpdate===!0&&D.update(G);else if(D.isLight)p.pushLight(D),D.castShadow&&p.pushShadow(D);else if(D.isSprite){if(!D.frustumCulled||K.intersectsSprite(D)){re&&Be.setFromMatrixPosition(D.matrixWorld).applyMatrix4(ze);let Ye=ge.update(D),at=D.material;at.visible&&g.push(D,Ye,at,ne,Be.z,null)}}else if((D.isMesh||D.isLine||D.isPoints)&&(!D.frustumCulled||K.intersectsObject(D))){let Ye=ge.update(D),at=D.material;if(re&&(D.boundingSphere!==void 0?(D.boundingSphere===null&&D.computeBoundingSphere(),Be.copy(D.boundingSphere.center)):(Ye.boundingSphere===null&&Ye.computeBoundingSphere(),Be.copy(Ye.boundingSphere.center)),Be.applyMatrix4(D.matrixWorld).applyMatrix4(ze)),Array.isArray(at)){let mt=Ye.groups;for(let Bt=0,zt=mt.length;Bt<zt;Bt++){let Mt=mt[Bt],Ei=at[Mt.materialIndex];Ei&&Ei.visible&&g.push(D,Ye,Ei,ne,Be.z,Mt)}}else at.visible&&g.push(D,Ye,at,ne,Be.z,null)}}let Ae=D.children;for(let Ye=0,at=Ae.length;Ye<at;Ye++)NS(Ae[Ye],G,ne,re)}function GP(D,G,ne,re){let $=D.opaque,Ae=D.transmissive,Ye=D.transparent;p.setupLightsView(ne),Re===!0&&Ee.setGlobalState(y.clippingPlanes,ne),re&&Oe.viewport(I.copy(re)),$.length>0&&ev($,G,ne),Ae.length>0&&ev(Ae,G,ne),Ye.length>0&&ev(Ye,G,ne),Oe.buffers.depth.setTest(!0),Oe.buffers.depth.setMask(!0),Oe.buffers.color.setMask(!0),Oe.setPolygonOffset(!1)}function WP(D,G,ne,re){if((ne.isScene===!0?ne.overrideMaterial:null)!==null)return;p.state.transmissionRenderTarget[re.id]===void 0&&(p.state.transmissionRenderTarget[re.id]=new ti(1,1,{generateMipmaps:!0,type:Ce.has("EXT_color_buffer_half_float")||Ce.has("EXT_color_buffer_float")?zi:ea,minFilter:xo,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ui.workingColorSpace}));let Ae=p.state.transmissionRenderTarget[re.id],Ye=re.viewport||I;Ae.setSize(Ye.z,Ye.w);let at=y.getRenderTarget();y.setRenderTarget(Ae),y.getClearColor(ee),se=y.getClearAlpha(),se<1&&y.setClearColor(16777215,.5),y.clear(),xe&&Tt.render(ne);let mt=y.toneMapping;y.toneMapping=ka;let Bt=re.viewport;if(re.viewport!==void 0&&(re.viewport=void 0),p.setupLightsView(re),Re===!0&&Ee.setGlobalState(y.clippingPlanes,re),ev(D,ne,re),P.updateMultisampleRenderTarget(Ae),P.updateRenderTargetMipmap(Ae),Ce.has("WEBGL_multisampled_render_to_texture")===!1){let zt=!1;for(let Mt=0,Ei=G.length;Mt<Ei;Mt++){let ki=G[Mt],Vn=ki.object,Cn=ki.geometry,Ai=ki.material,Rt=ki.group;if(Ai.side===$n&&Vn.layers.test(re.layers)){let vr=Ai.side;Ai.side=Br,Ai.needsUpdate=!0,$P(Vn,ne,re,Cn,Ai,Rt),Ai.side=vr,Ai.needsUpdate=!0,zt=!0}}zt===!0&&(P.updateMultisampleRenderTarget(Ae),P.updateRenderTargetMipmap(Ae))}y.setRenderTarget(at),y.setClearColor(ee,se),Bt!==void 0&&(re.viewport=Bt),y.toneMapping=mt}function ev(D,G,ne){let re=G.isScene===!0?G.overrideMaterial:null;for(let $=0,Ae=D.length;$<Ae;$++){let Ye=D[$],at=Ye.object,mt=Ye.geometry,Bt=re===null?Ye.material:re,zt=Ye.group;at.layers.test(ne.layers)&&$P(at,G,ne,mt,Bt,zt)}}function $P(D,G,ne,re,$,Ae){D.onBeforeRender(y,G,ne,re,$,Ae),D.modelViewMatrix.multiplyMatrices(ne.matrixWorldInverse,D.matrixWorld),D.normalMatrix.getNormalMatrix(D.modelViewMatrix),$.onBeforeRender(y,G,ne,re,D,Ae),$.transparent===!0&&$.side===$n&&$.forceSinglePass===!1?($.side=Br,$.needsUpdate=!0,y.renderBufferDirect(ne,G,re,$,D,Ae),$.side=ds,$.needsUpdate=!0,y.renderBufferDirect(ne,G,re,$,D,Ae),$.side=$n):y.renderBufferDirect(ne,G,re,$,D,Ae),D.onAfterRender(y,G,ne,re,$,Ae)}function tv(D,G,ne){G.isScene!==!0&&(G=di);let re=$e.get(D),$=p.state.lights,Ae=p.state.shadowsArray,Ye=$.state.version,at=ut.getParameters(D,$.state,Ae,G,ne),mt=ut.getProgramCacheKey(at),Bt=re.programs;re.environment=D.isMeshStandardMaterial?G.environment:null,re.fog=G.fog,re.envMap=(D.isMeshStandardMaterial?X:C).get(D.envMap||re.environment),re.envMapRotation=re.environment!==null&&D.envMap===null?G.environmentRotation:D.envMapRotation,Bt===void 0&&(D.addEventListener("dispose",si),Bt=new Map,re.programs=Bt);let zt=Bt.get(mt);if(zt!==void 0){if(re.currentProgram===zt&&re.lightsStateVersion===Ye)return XP(D,at),zt}else at.uniforms=ut.getUniforms(D),D.onBeforeCompile(at,y),zt=ut.acquireProgram(at,mt),Bt.set(mt,zt),re.uniforms=at.uniforms;let Mt=re.uniforms;return(!D.isShaderMaterial&&!D.isRawShaderMaterial||D.clipping===!0)&&(Mt.clippingPlanes=Ee.uniform),XP(D,at),re.needsLights=D4(D),re.lightsStateVersion=Ye,re.needsLights&&(Mt.ambientLightColor.value=$.state.ambient,Mt.lightProbe.value=$.state.probe,Mt.directionalLights.value=$.state.directional,Mt.directionalLightShadows.value=$.state.directionalShadow,Mt.spotLights.value=$.state.spot,Mt.spotLightShadows.value=$.state.spotShadow,Mt.rectAreaLights.value=$.state.rectArea,Mt.ltc_1.value=$.state.rectAreaLTC1,Mt.ltc_2.value=$.state.rectAreaLTC2,Mt.pointLights.value=$.state.point,Mt.pointLightShadows.value=$.state.pointShadow,Mt.hemisphereLights.value=$.state.hemi,Mt.directionalShadowMap.value=$.state.directionalShadowMap,Mt.directionalShadowMatrix.value=$.state.directionalShadowMatrix,Mt.spotShadowMap.value=$.state.spotShadowMap,Mt.spotLightMatrix.value=$.state.spotLightMatrix,Mt.spotLightMap.value=$.state.spotLightMap,Mt.pointShadowMap.value=$.state.pointShadowMap,Mt.pointShadowMatrix.value=$.state.pointShadowMatrix),re.currentProgram=zt,re.uniformsList=null,zt}function qP(D){if(D.uniformsList===null){let G=D.currentProgram.getUniforms();D.uniformsList=Jf.seqWithValue(G.seq,D.uniforms)}return D.uniformsList}function XP(D,G){let ne=$e.get(D);ne.outputColorSpace=G.outputColorSpace,ne.batching=G.batching,ne.batchingColor=G.batchingColor,ne.instancing=G.instancing,ne.instancingColor=G.instancingColor,ne.instancingMorph=G.instancingMorph,ne.skinning=G.skinning,ne.morphTargets=G.morphTargets,ne.morphNormals=G.morphNormals,ne.morphColors=G.morphColors,ne.morphTargetsCount=G.morphTargetsCount,ne.numClippingPlanes=G.numClippingPlanes,ne.numIntersection=G.numClipIntersection,ne.vertexAlphas=G.vertexAlphas,ne.vertexTangents=G.vertexTangents,ne.toneMapping=G.toneMapping}function C4(D,G,ne,re,$){G.isScene!==!0&&(G=di),P.resetTextureUnits();let Ae=G.fog,Ye=re.isMeshStandardMaterial?G.environment:null,at=A===null?y.outputColorSpace:A.isXRRenderTarget===!0?A.texture.colorSpace:Gn,mt=(re.isMeshStandardMaterial?X:C).get(re.envMap||Ye),Bt=re.vertexColors===!0&&!!ne.attributes.color&&ne.attributes.color.itemSize===4,zt=!!ne.attributes.tangent&&(!!re.normalMap||re.anisotropy>0),Mt=!!ne.morphAttributes.position,Ei=!!ne.morphAttributes.normal,ki=!!ne.morphAttributes.color,Vn=ka;re.toneMapped&&(A===null||A.isXRRenderTarget===!0)&&(Vn=y.toneMapping);let Cn=ne.morphAttributes.position||ne.morphAttributes.normal||ne.morphAttributes.color,Ai=Cn!==void 0?Cn.length:0,Rt=$e.get(re),vr=p.state.lights;if(Re===!0&&(We===!0||D!==x)){let Wr=D===x&&re.id===M;Ee.setState(re,D,Wr)}let Oi=!1;re.version===Rt.__version?(Rt.needsLights&&Rt.lightsStateVersion!==vr.state.version||Rt.outputColorSpace!==at||$.isBatchedMesh&&Rt.batching===!1||!$.isBatchedMesh&&Rt.batching===!0||$.isBatchedMesh&&Rt.batchingColor===!0&&$.colorTexture===null||$.isBatchedMesh&&Rt.batchingColor===!1&&$.colorTexture!==null||$.isInstancedMesh&&Rt.instancing===!1||!$.isInstancedMesh&&Rt.instancing===!0||$.isSkinnedMesh&&Rt.skinning===!1||!$.isSkinnedMesh&&Rt.skinning===!0||$.isInstancedMesh&&Rt.instancingColor===!0&&$.instanceColor===null||$.isInstancedMesh&&Rt.instancingColor===!1&&$.instanceColor!==null||$.isInstancedMesh&&Rt.instancingMorph===!0&&$.morphTexture===null||$.isInstancedMesh&&Rt.instancingMorph===!1&&$.morphTexture!==null||Rt.envMap!==mt||re.fog===!0&&Rt.fog!==Ae||Rt.numClippingPlanes!==void 0&&(Rt.numClippingPlanes!==Ee.numPlanes||Rt.numIntersection!==Ee.numIntersection)||Rt.vertexAlphas!==Bt||Rt.vertexTangents!==zt||Rt.morphTargets!==Mt||Rt.morphNormals!==Ei||Rt.morphColors!==ki||Rt.toneMapping!==Vn||Rt.morphTargetsCount!==Ai)&&(Oi=!0):(Oi=!0,Rt.__version=re.version);let Ts=Rt.currentProgram;Oi===!0&&(Ts=tv(re,G,$));let Xu=!1,Ao=!1,Vp=!1,gn=Ts.getUniforms(),Zo=Rt.uniforms;if(Oe.useProgram(Ts.program)&&(Xu=!0,Ao=!0,Vp=!0),re.id!==M&&(M=re.id,Ao=!0),Xu||x!==D){Oe.buffers.depth.getReversed()?(ve.copy(D.projectionMatrix),WB(ve),$B(ve),gn.setValue(F,"projectionMatrix",ve)):gn.setValue(F,"projectionMatrix",D.projectionMatrix),gn.setValue(F,"viewMatrix",D.matrixWorldInverse);let no=gn.map.cameraPosition;no!==void 0&&no.setValue(F,qe.setFromMatrixPosition(D.matrixWorld)),Je.logarithmicDepthBuffer&&gn.setValue(F,"logDepthBufFC",2/(Math.log(D.far+1)/Math.LN2)),(re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshLambertMaterial||re.isMeshBasicMaterial||re.isMeshStandardMaterial||re.isShaderMaterial)&&gn.setValue(F,"isOrthographic",D.isOrthographicCamera===!0),x!==D&&(x=D,Ao=!0,Vp=!0)}if($.isSkinnedMesh){gn.setOptional(F,$,"bindMatrix"),gn.setOptional(F,$,"bindMatrixInverse");let Wr=$.skeleton;Wr&&(Wr.boneTexture===null&&Wr.computeBoneTexture(),gn.setValue(F,"boneTexture",Wr.boneTexture,P))}$.isBatchedMesh&&(gn.setOptional(F,$,"batchingTexture"),gn.setValue(F,"batchingTexture",$._matricesTexture,P),gn.setOptional(F,$,"batchingIdTexture"),gn.setValue(F,"batchingIdTexture",$._indirectTexture,P),gn.setOptional(F,$,"batchingColorTexture"),$._colorsTexture!==null&&gn.setValue(F,"batchingColorTexture",$._colorsTexture,P));let Qo=ne.morphAttributes;if((Qo.position!==void 0||Qo.normal!==void 0||Qo.color!==void 0)&&kt.update($,ne,Ts),(Ao||Rt.receiveShadow!==$.receiveShadow)&&(Rt.receiveShadow=$.receiveShadow,gn.setValue(F,"receiveShadow",$.receiveShadow)),re.isMeshGouraudMaterial&&re.envMap!==null&&(Zo.envMap.value=mt,Zo.flipEnvMap.value=mt.isCubeTexture&&mt.isRenderTargetTexture===!1?-1:1),re.isMeshStandardMaterial&&re.envMap===null&&G.environment!==null&&(Zo.envMapIntensity.value=G.environmentIntensity),Ao&&(gn.setValue(F,"toneMappingExposure",y.toneMappingExposure),Rt.needsLights&&E4(Zo,Vp),Ae&&re.fog===!0&&je.refreshFogUniforms(Zo,Ae),je.refreshMaterialUniforms(Zo,re,L,H,p.state.transmissionRenderTarget[D.id]),Jf.upload(F,qP(Rt),Zo,P)),re.isShaderMaterial&&re.uniformsNeedUpdate===!0&&(Jf.upload(F,qP(Rt),Zo,P),re.uniformsNeedUpdate=!1),re.isSpriteMaterial&&gn.setValue(F,"center",$.center),gn.setValue(F,"modelViewMatrix",$.modelViewMatrix),gn.setValue(F,"normalMatrix",$.normalMatrix),gn.setValue(F,"modelMatrix",$.matrixWorld),re.isShaderMaterial||re.isRawShaderMaterial){let Wr=re.uniformsGroups;for(let no=0,LS=Wr.length;no<LS;no++){let cd=Wr[no];B.update(cd,Ts),B.bind(cd,Ts)}}return Ts}function E4(D,G){D.ambientLightColor.needsUpdate=G,D.lightProbe.needsUpdate=G,D.directionalLights.needsUpdate=G,D.directionalLightShadows.needsUpdate=G,D.pointLights.needsUpdate=G,D.pointLightShadows.needsUpdate=G,D.spotLights.needsUpdate=G,D.spotLightShadows.needsUpdate=G,D.rectAreaLights.needsUpdate=G,D.hemisphereLights.needsUpdate=G}function D4(D){return D.isMeshLambertMaterial||D.isMeshToonMaterial||D.isMeshPhongMaterial||D.isMeshStandardMaterial||D.isShadowMaterial||D.isShaderMaterial&&D.lights===!0}this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return A},this.setRenderTargetTextures=function(D,G,ne){$e.get(D.texture).__webglTexture=G,$e.get(D.depthTexture).__webglTexture=ne;let re=$e.get(D);re.__hasExternalTextures=!0,re.__autoAllocateDepthBuffer=ne===void 0,re.__autoAllocateDepthBuffer||Ce.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),re.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(D,G){let ne=$e.get(D);ne.__webglFramebuffer=G,ne.__useDefaultFramebuffer=G===void 0},this.setRenderTarget=function(D,G=0,ne=0){A=D,S=G,T=ne;let re=!0,$=null,Ae=!1,Ye=!1;if(D){let mt=$e.get(D);if(mt.__useDefaultFramebuffer!==void 0)Oe.bindFramebuffer(F.FRAMEBUFFER,null),re=!1;else if(mt.__webglFramebuffer===void 0)P.setupRenderTarget(D);else if(mt.__hasExternalTextures)P.rebindTextures(D,$e.get(D.texture).__webglTexture,$e.get(D.depthTexture).__webglTexture);else if(D.depthBuffer){let Mt=D.depthTexture;if(mt.__boundDepthTexture!==Mt){if(Mt!==null&&$e.has(Mt)&&(D.width!==Mt.image.width||D.height!==Mt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");P.setupDepthRenderbuffer(D)}}let Bt=D.texture;(Bt.isData3DTexture||Bt.isDataArrayTexture||Bt.isCompressedArrayTexture)&&(Ye=!0);let zt=$e.get(D).__webglFramebuffer;D.isWebGLCubeRenderTarget?(Array.isArray(zt[G])?$=zt[G][ne]:$=zt[G],Ae=!0):D.samples>0&&P.useMultisampledRTT(D)===!1?$=$e.get(D).__webglMultisampledFramebuffer:Array.isArray(zt)?$=zt[ne]:$=zt,I.copy(D.viewport),z.copy(D.scissor),W=D.scissorTest}else I.copy(Pe).multiplyScalar(L).floor(),z.copy(Ge).multiplyScalar(L).floor(),W=St;if(Oe.bindFramebuffer(F.FRAMEBUFFER,$)&&re&&Oe.drawBuffers(D,$),Oe.viewport(I),Oe.scissor(z),Oe.setScissorTest(W),Ae){let mt=$e.get(D.texture);F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_CUBE_MAP_POSITIVE_X+G,mt.__webglTexture,ne)}else if(Ye){let mt=$e.get(D.texture),Bt=G||0;F.framebufferTextureLayer(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,mt.__webglTexture,ne||0,Bt)}M=-1},this.readRenderTargetPixels=function(D,G,ne,re,$,Ae,Ye){if(!(D&&D.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let at=$e.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&Ye!==void 0&&(at=at[Ye]),at){Oe.bindFramebuffer(F.FRAMEBUFFER,at);try{let mt=D.texture,Bt=mt.format,zt=mt.type;if(!Je.textureFormatReadable(Bt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Je.textureTypeReadable(zt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}G>=0&&G<=D.width-re&&ne>=0&&ne<=D.height-$&&F.readPixels(G,ne,re,$,jt.convert(Bt),jt.convert(zt),Ae)}finally{let mt=A!==null?$e.get(A).__webglFramebuffer:null;Oe.bindFramebuffer(F.FRAMEBUFFER,mt)}}},this.readRenderTargetPixelsAsync=function(D,G,ne,re,$,Ae,Ye){return xi(this,null,function*(){if(!(D&&D.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let at=$e.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&Ye!==void 0&&(at=at[Ye]),at){let mt=D.texture,Bt=mt.format,zt=mt.type;if(!Je.textureFormatReadable(Bt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Je.textureTypeReadable(zt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(G>=0&&G<=D.width-re&&ne>=0&&ne<=D.height-$){Oe.bindFramebuffer(F.FRAMEBUFFER,at);let Mt=F.createBuffer();F.bindBuffer(F.PIXEL_PACK_BUFFER,Mt),F.bufferData(F.PIXEL_PACK_BUFFER,Ae.byteLength,F.STREAM_READ),F.readPixels(G,ne,re,$,jt.convert(Bt),jt.convert(zt),0);let Ei=A!==null?$e.get(A).__webglFramebuffer:null;Oe.bindFramebuffer(F.FRAMEBUFFER,Ei);let ki=F.fenceSync(F.SYNC_GPU_COMMANDS_COMPLETE,0);return F.flush(),yield GB(F,ki,4),F.bindBuffer(F.PIXEL_PACK_BUFFER,Mt),F.getBufferSubData(F.PIXEL_PACK_BUFFER,0,Ae),F.deleteBuffer(Mt),F.deleteSync(ki),Ae}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}})},this.copyFramebufferToTexture=function(D,G=null,ne=0){D.isTexture!==!0&&(wu("WebGLRenderer: copyFramebufferToTexture function signature has changed."),G=arguments[0]||null,D=arguments[1]);let re=Math.pow(2,-ne),$=Math.floor(D.image.width*re),Ae=Math.floor(D.image.height*re),Ye=G!==null?G.x:0,at=G!==null?G.y:0;P.setTexture2D(D,0),F.copyTexSubImage2D(F.TEXTURE_2D,ne,0,0,Ye,at,$,Ae),Oe.unbindTexture()};let A4=F.createFramebuffer(),I4=F.createFramebuffer();this.copyTextureToTexture=function(D,G,ne=null,re=null,$=0,Ae=null){D.isTexture!==!0&&(wu("WebGLRenderer: copyTextureToTexture function signature has changed."),re=arguments[0]||null,D=arguments[1],G=arguments[2],Ae=arguments[3]||0,ne=null),Ae===null&&($!==0?(wu("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ae=$,$=0):Ae=0);let Ye,at,mt,Bt,zt,Mt,Ei,ki,Vn,Cn=D.isCompressedTexture?D.mipmaps[Ae]:D.image;if(ne!==null)Ye=ne.max.x-ne.min.x,at=ne.max.y-ne.min.y,mt=ne.isBox3?ne.max.z-ne.min.z:1,Bt=ne.min.x,zt=ne.min.y,Mt=ne.isBox3?ne.min.z:0;else{let Qo=Math.pow(2,-$);Ye=Math.floor(Cn.width*Qo),at=Math.floor(Cn.height*Qo),D.isDataArrayTexture?mt=Cn.depth:D.isData3DTexture?mt=Math.floor(Cn.depth*Qo):mt=1,Bt=0,zt=0,Mt=0}re!==null?(Ei=re.x,ki=re.y,Vn=re.z):(Ei=0,ki=0,Vn=0);let Ai=jt.convert(G.format),Rt=jt.convert(G.type),vr;G.isData3DTexture?(P.setTexture3D(G,0),vr=F.TEXTURE_3D):G.isDataArrayTexture||G.isCompressedArrayTexture?(P.setTexture2DArray(G,0),vr=F.TEXTURE_2D_ARRAY):(P.setTexture2D(G,0),vr=F.TEXTURE_2D),F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,G.flipY),F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),F.pixelStorei(F.UNPACK_ALIGNMENT,G.unpackAlignment);let Oi=F.getParameter(F.UNPACK_ROW_LENGTH),Ts=F.getParameter(F.UNPACK_IMAGE_HEIGHT),Xu=F.getParameter(F.UNPACK_SKIP_PIXELS),Ao=F.getParameter(F.UNPACK_SKIP_ROWS),Vp=F.getParameter(F.UNPACK_SKIP_IMAGES);F.pixelStorei(F.UNPACK_ROW_LENGTH,Cn.width),F.pixelStorei(F.UNPACK_IMAGE_HEIGHT,Cn.height),F.pixelStorei(F.UNPACK_SKIP_PIXELS,Bt),F.pixelStorei(F.UNPACK_SKIP_ROWS,zt),F.pixelStorei(F.UNPACK_SKIP_IMAGES,Mt);let gn=D.isDataArrayTexture||D.isData3DTexture,Zo=G.isDataArrayTexture||G.isData3DTexture;if(D.isDepthTexture){let Qo=$e.get(D),Wr=$e.get(G),no=$e.get(Qo.__renderTarget),LS=$e.get(Wr.__renderTarget);Oe.bindFramebuffer(F.READ_FRAMEBUFFER,no.__webglFramebuffer),Oe.bindFramebuffer(F.DRAW_FRAMEBUFFER,LS.__webglFramebuffer);for(let cd=0;cd<mt;cd++)gn&&(F.framebufferTextureLayer(F.READ_FRAMEBUFFER,F.COLOR_ATTACHMENT0,$e.get(D).__webglTexture,$,Mt+cd),F.framebufferTextureLayer(F.DRAW_FRAMEBUFFER,F.COLOR_ATTACHMENT0,$e.get(G).__webglTexture,Ae,Vn+cd)),F.blitFramebuffer(Bt,zt,Ye,at,Ei,ki,Ye,at,F.DEPTH_BUFFER_BIT,F.NEAREST);Oe.bindFramebuffer(F.READ_FRAMEBUFFER,null),Oe.bindFramebuffer(F.DRAW_FRAMEBUFFER,null)}else if($!==0||D.isRenderTargetTexture||$e.has(D)){let Qo=$e.get(D),Wr=$e.get(G);Oe.bindFramebuffer(F.READ_FRAMEBUFFER,A4),Oe.bindFramebuffer(F.DRAW_FRAMEBUFFER,I4);for(let no=0;no<mt;no++)gn?F.framebufferTextureLayer(F.READ_FRAMEBUFFER,F.COLOR_ATTACHMENT0,Qo.__webglTexture,$,Mt+no):F.framebufferTexture2D(F.READ_FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,Qo.__webglTexture,$),Zo?F.framebufferTextureLayer(F.DRAW_FRAMEBUFFER,F.COLOR_ATTACHMENT0,Wr.__webglTexture,Ae,Vn+no):F.framebufferTexture2D(F.DRAW_FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,Wr.__webglTexture,Ae),$!==0?F.blitFramebuffer(Bt,zt,Ye,at,Ei,ki,Ye,at,F.COLOR_BUFFER_BIT,F.NEAREST):Zo?F.copyTexSubImage3D(vr,Ae,Ei,ki,Vn+no,Bt,zt,Ye,at):F.copyTexSubImage2D(vr,Ae,Ei,ki,Bt,zt,Ye,at);Oe.bindFramebuffer(F.READ_FRAMEBUFFER,null),Oe.bindFramebuffer(F.DRAW_FRAMEBUFFER,null)}else Zo?D.isDataTexture||D.isData3DTexture?F.texSubImage3D(vr,Ae,Ei,ki,Vn,Ye,at,mt,Ai,Rt,Cn.data):G.isCompressedArrayTexture?F.compressedTexSubImage3D(vr,Ae,Ei,ki,Vn,Ye,at,mt,Ai,Cn.data):F.texSubImage3D(vr,Ae,Ei,ki,Vn,Ye,at,mt,Ai,Rt,Cn):D.isDataTexture?F.texSubImage2D(F.TEXTURE_2D,Ae,Ei,ki,Ye,at,Ai,Rt,Cn.data):D.isCompressedTexture?F.compressedTexSubImage2D(F.TEXTURE_2D,Ae,Ei,ki,Cn.width,Cn.height,Ai,Cn.data):F.texSubImage2D(F.TEXTURE_2D,Ae,Ei,ki,Ye,at,Ai,Rt,Cn);F.pixelStorei(F.UNPACK_ROW_LENGTH,Oi),F.pixelStorei(F.UNPACK_IMAGE_HEIGHT,Ts),F.pixelStorei(F.UNPACK_SKIP_PIXELS,Xu),F.pixelStorei(F.UNPACK_SKIP_ROWS,Ao),F.pixelStorei(F.UNPACK_SKIP_IMAGES,Vp),Ae===0&&G.generateMipmaps&&F.generateMipmap(vr),Oe.unbindTexture()},this.copyTextureToTexture3D=function(D,G,ne=null,re=null,$=0){return D.isTexture!==!0&&(wu("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ne=arguments[0]||null,re=arguments[1]||null,D=arguments[2],G=arguments[3],$=arguments[4]||0),wu('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(D,G,ne,re,$)},this.initRenderTarget=function(D){$e.get(D).__webglFramebuffer===void 0&&P.setupRenderTarget(D)},this.initTexture=function(D){D.isCubeTexture?P.setTextureCube(D,0):D.isData3DTexture?P.setTexture3D(D,0):D.isDataArrayTexture||D.isCompressedArrayTexture?P.setTexture2DArray(D,0):P.setTexture2D(D,0),Oe.unbindTexture()},this.resetState=function(){S=0,T=0,A=null,Oe.reset(),Di.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Us}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorspace=ui._getDrawingBufferColorSpace(e),t.unpackColorSpace=ui._getUnpackColorSpace()}};function x1(n){return!!(n&&n.set)}function me(n,e){if(x1(n)){if(e===void 0)return n;if(Array.isArray(e))return n.set(...e),n;if(n.copy&&e)return n.copy(e),n;if(e!==void 0)return n.set(e),n}else return e;return n}function FU(n){return!!(n&&typeof n.dispose=="function")}function Hc(n){return n!==void 0&&(n.observed||n.observers?.length>0)}var w1=class{constructor(e){this.memberMap=new Map,this.children=[],this.eventListener={},this.loaded=!1,this.add=(...t)=>(this.objRef&&this.objRef.add(...t),this.children.push(...t),this),this.remove=(...t)=>{this.objRef&&this.objRef.remove(...t);for(let i of t){let r=this.children.indexOf(i);r>=0&&(this.children=this.children.splice(r,1))}return this},this.applyToObject3D=t=>{if(this.memberMap.forEach((i,r)=>{let o=t[r];x1(o)?me(o,i):t[r]=i}),this.children.forEach(i=>t.add(i)),this.objRef?.parent){let i=this.objRef?.parent;i.remove(this.objRef),i.add(t)}},this.addEventListener=(t,i)=>{let r=this.eventListener[t];r||(r=[],this.eventListener[t]=r),r.push(i),this.objRef&&this.objRef.addEventListener(t,i)},this.removeEventListener=(t,i)=>{let r=this.eventListener[t];if(!r)return;let o=r.indexOf(i);o>=0&&r.splice(o,1)},this.objRef=e}get(e,t,i){switch(t){case"__isProxy":return!0;case"applyToObject3D":return this.applyToObject3D;case"objRef":return this.loaded?this.objRef:void 0;case"add":return this.add;case"remove":return this.remove;case"children":return this.objRef?this.objRef.children:this.children;default:{let r=t,o=this.objRef[r];return o!==void 0&&this.memberMap.set(r,o),o}}}set(e,t,i,r){return t==="objRef"?(i&&this.applyToObject3D(i),this.loaded=!0,this.objRef=i):(this.memberMap.set(t,i),this.objRef&&(this.objRef[t]=i)),!0}};function qw(n=new xt){let e=new w1(n);return new Proxy(e,e)}function tp(n){return n.__isProxy===!0&&n.objRef===void 0}var to=(()=>{class n{set objRef(t){this.applyObjRef(t)}get objRef(){return this._objRef}constructor(){this.autoAddToParent=!0,this.autoDispose=!0}addToParent(){}removeFromParent(){}set threeEvents(t){this.removeEvents(),this.eventListeners=t,this.applyEvents()}get threeEvents(){return this.eventListeners}get onUpdate(){return this.updateEmitter||(this.updateEmitter=new rt),this.updateEmitter}get objRef$(){return this._objRef$||(this._objRef$=new pd(1)),this._objRef$}ngOnInit(){this.objRef||(this.objRef=this.createThreeInstance(this.args))}getType(){throw new Error("derive me")}createThreeInstance(t){return Array.isArray(t)?new(this.getType())(...t):new(this.getType())(t)}ngOnChanges(t){if(this.objRef&&!tp(this.objRef)){this.emitPropertyChanges(t);return}this.objRef||(this.objRef=this.createThreeInstance(t.args?.currentValue));for(let i in t)this[i]=t[i].currentValue;this.emitPropertyChanges(t)}disposeObjRef(){FU(this.objRef)&&this.objRef.dispose()}ngOnDestroy(){this.removeEvents(),this.removeFromParent(),this.autoDispose&&this.disposeObjRef(),this.emitRemoveEvent()}applyObjRef(t){this._objRef!==t&&(this.removeFromParent(),this._objRef=t,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}emitObjRefChange(){this._objRef&&!tp(this._objRef)&&(this._objRef.dispatchEvent?.({type:"loaded",object:this._objRef}),this._objRef$&&this._objRef$.next(this._objRef))}emitRemoveEvent(){this._objRef&&!tp(this._objRef)&&(this._objRef.dispatchEvent?.({type:"removed",object:this._objRef}),this._objRef$&&this._objRef$.next(this._objRef))}emitPropertyChanges(t){this._objRef&&this._objRef.dispatchEvent?.({type:"changes",changes:t}),this.updateEmitter&&this.updateEmitter.next(t)}removeEvents(){if(this.eventListeners&&this._objRef){for(let t of Object.entries(this.eventListeners))this._objRef.removeEventListener(t[0],t[1]);this.eventListeners=void 0}}applyEvents(){if(this.eventListeners&&this._objRef)for(let t of Object.entries(this.eventListeners))this._objRef.addEventListener(t[0],t[1])}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["th-abs-wrapper"]],inputs:{autoAddToParent:"autoAddToParent",autoDispose:"autoDispose",objRef:"objRef",args:"args",threeEvents:"threeEvents"},outputs:{onUpdate:"onUpdate",objRef$:"objRef$"},standalone:!1,features:[tr],decls:0,vars:0,template:function(i,r){},encapsulation:2,changeDetection:0})}}return n})();var zee=["*"],kU=(()=>{class n extends to{constructor(t){super(),this.parent=t}addToParent(){this._objRef&&this.parent.objRef&&(!this._objRef.parent||this._objRef.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(this._objRef)}removeFromParent(){this._objRef?.parent?.remove(this._objRef)}applyObjRef(t){(this._objRef!==t||this._objRef?.parent?.uuid!==this.parent.objRef.uuid)&&(this.removeFromParent(),this._objRef=t,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}attachToParent(t,i){!this.parent.objRef||t===i&&i?.parent?.uuid===this.parent.objRef.uuid||(i&&i.parent&&i.parent.remove(i),t&&(!t.parent||t.parent&&t.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(t))}set lookAt(t){Promise.resolve().then(()=>{this.objRef&&(Array.isArray(t)?this.objRef.lookAt(...t):this.objRef.lookAt(t))})}static{this.\u0275fac=function(i){return new(i||n)(be(n))}}static{this.\u0275cmp=j({type:n,selectors:[["th-abs-object"]],inputs:{lookAt:"lookAt"},standalone:!1,features:[q],ngContentSelectors:zee,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Hee=["*"],ue=class n extends kU{getType(){return xt}get isObject3D(){return this._objRef?.isObject3D}get id(){return this._objRef?.id}set uuid(e){this._objRef&&(this._objRef.uuid=e)}get uuid(){return this._objRef?.uuid}set name(e){this._objRef&&(this._objRef.name=e)}get name(){return this._objRef?.name}get type(){return this._objRef?.type}set children(e){this._objRef&&(this._objRef.children=e)}get children(){return this._objRef?.children}set up(e){this._objRef&&(this._objRef.up=me(this._objRef.up,e))}get up(){return this._objRef?.up}set position(e){this._objRef&&me(this._objRef.position,e)}get position(){return this._objRef?.position}set rotation(e){this._objRef&&me(this._objRef.rotation,e)}get rotation(){return this._objRef?.rotation}set quaternion(e){this._objRef&&me(this._objRef.quaternion,e)}get quaternion(){return this._objRef?.quaternion}set scale(e){this._objRef&&me(this._objRef.scale,e)}get scale(){return this._objRef?.scale}set modelViewMatrix(e){this._objRef&&me(this._objRef.modelViewMatrix,e)}get modelViewMatrix(){return this._objRef?.modelViewMatrix}set normalMatrix(e){this._objRef&&me(this._objRef.normalMatrix,e)}get normalMatrix(){return this._objRef?.normalMatrix}set matrix(e){this._objRef&&(this._objRef.matrix=me(this._objRef.matrix,e))}get matrix(){return this._objRef?.matrix}set matrixWorld(e){this._objRef&&(this._objRef.matrixWorld=me(this._objRef.matrixWorld,e))}get matrixWorld(){return this._objRef?.matrixWorld}set matrixAutoUpdate(e){this._objRef&&(this._objRef.matrixAutoUpdate=e)}get matrixAutoUpdate(){return this._objRef?.matrixAutoUpdate}set matrixWorldAutoUpdate(e){this._objRef&&(this._objRef.matrixWorldAutoUpdate=e)}get matrixWorldAutoUpdate(){return this._objRef?.matrixWorldAutoUpdate}set matrixWorldNeedsUpdate(e){this._objRef&&(this._objRef.matrixWorldNeedsUpdate=e)}get matrixWorldNeedsUpdate(){return this._objRef?.matrixWorldNeedsUpdate}set layers(e){this._objRef&&(this._objRef.layers=me(this._objRef.layers,e))}get layers(){return this._objRef?.layers}set visible(e){this._objRef&&(this._objRef.visible=e)}get visible(){return this._objRef?.visible}set castShadow(e){this._objRef&&(this._objRef.castShadow=e)}get castShadow(){return this._objRef?.castShadow}set receiveShadow(e){this._objRef&&(this._objRef.receiveShadow=e)}get receiveShadow(){return this._objRef?.receiveShadow}set frustumCulled(e){this._objRef&&(this._objRef.frustumCulled=e)}get frustumCulled(){return this._objRef?.frustumCulled}set renderOrder(e){this._objRef&&(this._objRef.renderOrder=e)}get renderOrder(){return this._objRef?.renderOrder}set animations(e){this._objRef&&(this._objRef.animations=e)}get animations(){return this._objRef?.animations}set userData(e){this._objRef&&(this._objRef.userData=e)}get userData(){return this._objRef?.userData}set customDepthMaterial(e){this._objRef&&(this._objRef.customDepthMaterial=e)}get customDepthMaterial(){return this._objRef?.customDepthMaterial}set customDistanceMaterial(e){this._objRef&&(this._objRef.customDistanceMaterial=e)}get customDistanceMaterial(){return this._objRef?.customDistanceMaterial}static{this.DEFAULT_UP=xt.DEFAULT_UP}static{this.DEFAULT_MATRIX_AUTO_UPDATE=xt.DEFAULT_MATRIX_AUTO_UPDATE}static{this.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=xt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE}constructor(e){super(e)}static{this.\u0275fac=function(t){return new(t||n)(be(n,4))}}static{this.\u0275cmp=j({type:n,selectors:[["th-object3D"]],inputs:{uuid:"uuid",name:"name",children:"children",up:"up",position:"position",rotation:"rotation",quaternion:"quaternion",scale:"scale",modelViewMatrix:"modelViewMatrix",normalMatrix:"normalMatrix",matrix:"matrix",matrixWorld:"matrixWorld",matrixAutoUpdate:"matrixAutoUpdate",matrixWorldAutoUpdate:"matrixWorldAutoUpdate",matrixWorldNeedsUpdate:"matrixWorldNeedsUpdate",layers:"layers",visible:"visible",castShadow:"castShadow",receiveShadow:"receiveShadow",frustumCulled:"frustumCulled",renderOrder:"renderOrder",animations:"animations",userData:"userData",customDepthMaterial:"customDepthMaterial",customDistanceMaterial:"customDistanceMaterial"},standalone:!1,features:[J([]),q],ngContentSelectors:Hee,decls:1,vars:0,template:function(t,i){t&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}};var Gee=["*"],Ll=(()=>{class n extends ue{getType(){return Rl}get isCamera(){return this._objRef?.isCamera}get type(){return this._objRef?.type}set layers(t){this._objRef&&(this._objRef.layers=me(this._objRef.layers,t))}get layers(){return this._objRef?.layers}set matrixWorldInverse(t){this._objRef&&(this._objRef.matrixWorldInverse=me(this._objRef.matrixWorldInverse,t))}get matrixWorldInverse(){return this._objRef?.matrixWorldInverse}set projectionMatrix(t){this._objRef&&(this._objRef.projectionMatrix=me(this._objRef.projectionMatrix,t))}get projectionMatrix(){return this._objRef?.projectionMatrix}set projectionMatrixInverse(t){this._objRef&&(this._objRef.projectionMatrixInverse=me(this._objRef.projectionMatrixInverse,t))}get projectionMatrixInverse(){return this._objRef?.projectionMatrixInverse}set coordinateSystem(t){this._objRef&&(this._objRef.coordinateSystem=t)}get coordinateSystem(){return this._objRef?.coordinateSystem}set viewport(t){this._objRef&&(this._objRef.viewport=me(this._objRef.viewport,t))}get viewport(){return this._objRef?.viewport}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-camera"]],inputs:{layers:"layers",matrixWorldInverse:"matrixWorldInverse",projectionMatrix:"projectionMatrix",projectionMatrixInverse:"projectionMatrixInverse",coordinateSystem:"coordinateSystem",viewport:"viewport"},standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)}]),q],ngContentSelectors:Gee,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Wee=["*"],Zt=(()=>{class n extends Ll{getType(){return rn}get isPerspectiveCamera(){return this._objRef?.isPerspectiveCamera}get type(){return this._objRef?.type}set zoom(t){this._objRef&&(this._objRef.zoom=t)}get zoom(){return this._objRef?.zoom}set fov(t){this._objRef&&(this._objRef.fov=t)}get fov(){return this._objRef?.fov}set aspect(t){this._objRef&&(this._objRef.aspect=t)}get aspect(){return this._objRef?.aspect}set near(t){this._objRef&&(this._objRef.near=t)}get near(){return this._objRef?.near}set far(t){this._objRef&&(this._objRef.far=t)}get far(){return this._objRef?.far}set focus(t){this._objRef&&(this._objRef.focus=t)}get focus(){return this._objRef?.focus}set view(t){this._objRef&&(this._objRef.view=t)}get view(){return this._objRef?.view}set filmGauge(t){this._objRef&&(this._objRef.filmGauge=t)}get filmGauge(){return this._objRef?.filmGauge}set filmOffset(t){this._objRef&&(this._objRef.filmOffset=t)}get filmOffset(){return this._objRef?.filmOffset}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-perspectiveCamera"]],inputs:{zoom:"zoom",fov:"fov",aspect:"aspect",near:"near",far:"far",focus:"focus",view:"view",filmGauge:"filmGauge",filmOffset:"filmOffset"},standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)},{provide:Ll,useExisting:_e(()=>n)}]),q],ngContentSelectors:Wee,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var $ee=["*"],M1=(()=>{class n extends ue{getType(){return Ki}get isLine(){return this._objRef?.isLine}get type(){return this._objRef?.type}set geometry(t){this._objRef&&(this._objRef.geometry=t)}get geometry(){return this._objRef?.geometry}set material(t){this._objRef&&(this._objRef.material=t)}get material(){return this._objRef?.material}set morphTargetInfluences(t){this._objRef&&(this._objRef.morphTargetInfluences=t)}get morphTargetInfluences(){return this._objRef?.morphTargetInfluences}set morphTargetDictionary(t){this._objRef&&(this._objRef.morphTargetDictionary=t)}get morphTargetDictionary(){return this._objRef?.morphTargetDictionary}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-line"]],inputs:{geometry:"geometry",material:"material",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary"},standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)}]),q],ngContentSelectors:$ee,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var qee=["*"],La=(()=>{class n extends M1{getType(){return Sr}get isLineSegments(){return this._objRef?.isLineSegments}get type(){return this._objRef?.type}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-lineSegments"]],standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)}]),q],ngContentSelectors:qee,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Xee=["*"],Vr=(()=>{class n extends La{getType(){return Lc}get type(){return this._objRef?.type}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-gridHelper"]],standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)}]),q],ngContentSelectors:Xee,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Yee=["*"],ia=(()=>{class n extends ue{get isLight(){return this._objRef?.isLight}get type(){return this._objRef?.type}set color(t){this._objRef&&(this._objRef.color=me(this._objRef.color,t))}get color(){return this._objRef?.color}set intensity(t){this._objRef&&(this._objRef.intensity=t)}get intensity(){return this._objRef?.intensity}set shadow(t){this._objRef&&(this._objRef.shadow=t)}get shadow(){return this._objRef?.shadow}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-light"]],inputs:{color:"color",intensity:"intensity",shadow:"shadow"},standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)}]),q],ngContentSelectors:Yee,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Zee=["*"],mr=(()=>{class n extends ia{getType(){return Dl}get isDirectionalLight(){return this._objRef?.isDirectionalLight}get type(){return this._objRef?.type}set castShadow(t){this._objRef&&(this._objRef.castShadow=t)}get castShadow(){return this._objRef?.castShadow}set position(t){this._objRef&&me(this._objRef.position,t)}get position(){return this._objRef?.position}set shadow(t){this._objRef&&(this._objRef.shadow=t)}get shadow(){return this._objRef?.shadow}set target(t){this._objRef&&(this._objRef.target=t)}get target(){return this._objRef?.target}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-directionalLight"]],inputs:{castShadow:"castShadow",position:"position",shadow:"shadow",target:"target"},standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)}]),q],ngContentSelectors:Zee,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Qee=["*"],ip=(()=>{class n extends ia{getType(){return mu}get isHemisphereLight(){return this._objRef?.isHemisphereLight}get type(){return this._objRef?.type}set position(t){this._objRef&&me(this._objRef.position,t)}get position(){return this._objRef?.position}set color(t){this._objRef&&(this._objRef.color=me(this._objRef.color,t))}get color(){return this._objRef?.color}set groundColor(t){this._objRef&&(this._objRef.groundColor=me(this._objRef.groundColor,t))}get groundColor(){return this._objRef?.groundColor}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-hemisphereLight"]],inputs:{position:"position",color:"color",groundColor:"groundColor"},standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)}]),q],ngContentSelectors:Qee,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Kee=["*"],Ci=(()=>{class n extends ue{getType(){return ke}get isMesh(){return this._objRef?.isMesh}get type(){return this._objRef?.type}set geometry(t){this._objRef&&(this._objRef.geometry=t)}get geometry(){return this._objRef?.geometry}set material(t){this._objRef&&(this._objRef.material=t)}get material(){return this._objRef?.material}set morphTargetInfluences(t){this._objRef&&(this._objRef.morphTargetInfluences=t)}get morphTargetInfluences(){return this._objRef?.morphTargetInfluences}set morphTargetDictionary(t){this._objRef&&(this._objRef.morphTargetDictionary=t)}get morphTargetDictionary(){return this._objRef?.morphTargetDictionary}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-mesh"]],inputs:{geometry:"geometry",material:"material",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary"},standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)}]),q],ngContentSelectors:Kee,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Jee=["*"],Lt=(()=>{class n extends ue{getType(){return su}get isScene(){return this._objRef?.isScene}set type(t){this._objRef&&(this._objRef.type=t)}get type(){return this._objRef?.type}set fog(t){this._objRef&&(this._objRef.fog=t)}get fog(){return this._objRef?.fog}set backgroundBlurriness(t){this._objRef&&(this._objRef.backgroundBlurriness=t)}get backgroundBlurriness(){return this._objRef?.backgroundBlurriness}set backgroundIntensity(t){this._objRef&&(this._objRef.backgroundIntensity=t)}get backgroundIntensity(){return this._objRef?.backgroundIntensity}set overrideMaterial(t){this._objRef&&(this._objRef.overrideMaterial=t)}get overrideMaterial(){return this._objRef?.overrideMaterial}set background(t){this._objRef&&(this._objRef.background=me(this._objRef.background,t))}get background(){return this._objRef?.background}set backgroundRotation(t){this._objRef&&(this._objRef.backgroundRotation=me(this._objRef.backgroundRotation,t))}get backgroundRotation(){return this._objRef?.backgroundRotation}set environment(t){this._objRef&&(this._objRef.environment=t)}get environment(){return this._objRef?.environment}set environmentIntensity(t){this._objRef&&(this._objRef.environmentIntensity=t)}get environmentIntensity(){return this._objRef?.environmentIntensity}set environmentRotation(t){this._objRef&&(this._objRef.environmentRotation=me(this._objRef.environmentRotation,t))}get environmentRotation(){return this._objRef?.environmentRotation}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-scene"]],inputs:{type:"type",fog:"fog",backgroundBlurriness:"backgroundBlurriness",backgroundIntensity:"backgroundIntensity",overrideMaterial:"overrideMaterial",background:"background",backgroundRotation:"backgroundRotation",environment:"environment",environmentIntensity:"environmentIntensity",environmentRotation:"environmentRotation"},standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)}]),q],ngContentSelectors:Jee,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var OU=(()=>{class n extends to{constructor(t){super(),this.parent=t}addToParent(){if(!this.parent.objRef)throw new Error("parent object doesn't hold a three js object instance");this.parent.objRef.material=this.objRef}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.material=void 0)}static{this.\u0275fac=function(i){return new(i||n)(be(ue))}}static{this.\u0275cmp=j({type:n,selectors:[["th-abs-material"]],standalone:!1,features:[q],decls:0,vars:0,template:function(i,r){},encapsulation:2,changeDetection:0})}}return n})();var ete=["*"],fn=(()=>{class n extends OU{getType(){return hn}get isMaterial(){return this._objRef?.isMaterial}set type(t){this._objRef&&(this._objRef.type=t)}get type(){return this._objRef?.type}set alphaHash(t){this._objRef&&(this._objRef.alphaHash=t)}get alphaHash(){return this._objRef?.alphaHash}set alphaToCoverage(t){this._objRef&&(this._objRef.alphaToCoverage=t)}get alphaToCoverage(){return this._objRef?.alphaToCoverage}set blendAlpha(t){this._objRef&&(this._objRef.blendAlpha=t)}get blendAlpha(){return this._objRef?.blendAlpha}set blendColor(t){this._objRef&&(this._objRef.blendColor=me(this._objRef.blendColor,t))}get blendColor(){return this._objRef?.blendColor}set blendDst(t){this._objRef&&(this._objRef.blendDst=t)}get blendDst(){return this._objRef?.blendDst}set blendDstAlpha(t){this._objRef&&(this._objRef.blendDstAlpha=t)}get blendDstAlpha(){return this._objRef?.blendDstAlpha}set blendEquation(t){this._objRef&&(this._objRef.blendEquation=t)}get blendEquation(){return this._objRef?.blendEquation}set blendEquationAlpha(t){this._objRef&&(this._objRef.blendEquationAlpha=t)}get blendEquationAlpha(){return this._objRef?.blendEquationAlpha}set blending(t){this._objRef&&(this._objRef.blending=t)}get blending(){return this._objRef?.blending}set blendSrc(t){this._objRef&&(this._objRef.blendSrc=t)}get blendSrc(){return this._objRef?.blendSrc}set blendSrcAlpha(t){this._objRef&&(this._objRef.blendSrcAlpha=t)}get blendSrcAlpha(){return this._objRef?.blendSrcAlpha}set clipIntersection(t){this._objRef&&(this._objRef.clipIntersection=t)}get clipIntersection(){return this._objRef?.clipIntersection}set clippingPlanes(t){this._objRef&&(this._objRef.clippingPlanes=t)}get clippingPlanes(){return this._objRef?.clippingPlanes}set clipShadows(t){this._objRef&&(this._objRef.clipShadows=t)}get clipShadows(){return this._objRef?.clipShadows}set colorWrite(t){this._objRef&&(this._objRef.colorWrite=t)}get colorWrite(){return this._objRef?.colorWrite}set defines(t){this._objRef&&(this._objRef.defines=t)}get defines(){return this._objRef?.defines}set depthFunc(t){this._objRef&&(this._objRef.depthFunc=t)}get depthFunc(){return this._objRef?.depthFunc}set depthTest(t){this._objRef&&(this._objRef.depthTest=t)}get depthTest(){return this._objRef?.depthTest}set depthWrite(t){this._objRef&&(this._objRef.depthWrite=t)}get depthWrite(){return this._objRef?.depthWrite}set id(t){this._objRef&&(this._objRef.id=t)}get id(){return this._objRef?.id}set stencilWrite(t){this._objRef&&(this._objRef.stencilWrite=t)}get stencilWrite(){return this._objRef?.stencilWrite}set stencilFunc(t){this._objRef&&(this._objRef.stencilFunc=t)}get stencilFunc(){return this._objRef?.stencilFunc}set stencilRef(t){this._objRef&&(this._objRef.stencilRef=t)}get stencilRef(){return this._objRef?.stencilRef}set stencilWriteMask(t){this._objRef&&(this._objRef.stencilWriteMask=t)}get stencilWriteMask(){return this._objRef?.stencilWriteMask}set stencilFuncMask(t){this._objRef&&(this._objRef.stencilFuncMask=t)}get stencilFuncMask(){return this._objRef?.stencilFuncMask}set stencilFail(t){this._objRef&&(this._objRef.stencilFail=t)}get stencilFail(){return this._objRef?.stencilFail}set stencilZFail(t){this._objRef&&(this._objRef.stencilZFail=t)}get stencilZFail(){return this._objRef?.stencilZFail}set stencilZPass(t){this._objRef&&(this._objRef.stencilZPass=t)}get stencilZPass(){return this._objRef?.stencilZPass}set name(t){this._objRef&&(this._objRef.name=t)}get name(){return this._objRef?.name}set opacity(t){this._objRef&&(this._objRef.opacity=t)}get opacity(){return this._objRef?.opacity}set polygonOffset(t){this._objRef&&(this._objRef.polygonOffset=t)}get polygonOffset(){return this._objRef?.polygonOffset}set polygonOffsetFactor(t){this._objRef&&(this._objRef.polygonOffsetFactor=t)}get polygonOffsetFactor(){return this._objRef?.polygonOffsetFactor}set polygonOffsetUnits(t){this._objRef&&(this._objRef.polygonOffsetUnits=t)}get polygonOffsetUnits(){return this._objRef?.polygonOffsetUnits}set precision(t){this._objRef&&(this._objRef.precision=t)}get precision(){return this._objRef?.precision}set premultipliedAlpha(t){this._objRef&&(this._objRef.premultipliedAlpha=t)}get premultipliedAlpha(){return this._objRef?.premultipliedAlpha}set forceSinglePass(t){this._objRef&&(this._objRef.forceSinglePass=t)}get forceSinglePass(){return this._objRef?.forceSinglePass}set dithering(t){this._objRef&&(this._objRef.dithering=t)}get dithering(){return this._objRef?.dithering}set side(t){this._objRef&&(this._objRef.side=t)}get side(){return this._objRef?.side}set shadowSide(t){this._objRef&&(this._objRef.shadowSide=t)}get shadowSide(){return this._objRef?.shadowSide}set toneMapped(t){this._objRef&&(this._objRef.toneMapped=t)}get toneMapped(){return this._objRef?.toneMapped}set transparent(t){this._objRef&&(this._objRef.transparent=t)}get transparent(){return this._objRef?.transparent}set uuid(t){this._objRef&&(this._objRef.uuid=t)}get uuid(){return this._objRef?.uuid}set vertexColors(t){this._objRef&&(this._objRef.vertexColors=t)}get vertexColors(){return this._objRef?.vertexColors}set visible(t){this._objRef&&(this._objRef.visible=t)}get visible(){return this._objRef?.visible}set userData(t){this._objRef&&(this._objRef.userData=t)}get userData(){return this._objRef?.userData}set version(t){this._objRef&&(this._objRef.version=t)}get version(){return this._objRef?.version}get alphaTest(){return this._objRef?.alphaTest}set alphaTest(t){this._objRef&&(this._objRef.alphaTest=t)}set needsUpdate(t){this._objRef&&(this._objRef.needsUpdate=t)}constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(be(ue,4))}}static{this.\u0275cmp=j({type:n,selectors:[["th-material"]],inputs:{type:"type",alphaHash:"alphaHash",alphaToCoverage:"alphaToCoverage",blendAlpha:"blendAlpha",blendColor:"blendColor",blendDst:"blendDst",blendDstAlpha:"blendDstAlpha",blendEquation:"blendEquation",blendEquationAlpha:"blendEquationAlpha",blending:"blending",blendSrc:"blendSrc",blendSrcAlpha:"blendSrcAlpha",clipIntersection:"clipIntersection",clippingPlanes:"clippingPlanes",clipShadows:"clipShadows",colorWrite:"colorWrite",defines:"defines",depthFunc:"depthFunc",depthTest:"depthTest",depthWrite:"depthWrite",id:"id",stencilWrite:"stencilWrite",stencilFunc:"stencilFunc",stencilRef:"stencilRef",stencilWriteMask:"stencilWriteMask",stencilFuncMask:"stencilFuncMask",stencilFail:"stencilFail",stencilZFail:"stencilZFail",stencilZPass:"stencilZPass",name:"name",opacity:"opacity",polygonOffset:"polygonOffset",polygonOffsetFactor:"polygonOffsetFactor",polygonOffsetUnits:"polygonOffsetUnits",precision:"precision",premultipliedAlpha:"premultipliedAlpha",forceSinglePass:"forceSinglePass",dithering:"dithering",side:"side",shadowSide:"shadowSide",toneMapped:"toneMapped",transparent:"transparent",uuid:"uuid",vertexColors:"vertexColors",visible:"visible",userData:"userData",version:"version",alphaTest:"alphaTest",needsUpdate:"needsUpdate"},standalone:!1,features:[J([]),q],ngContentSelectors:ete,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var tte=["*"],Mo=(()=>{class n extends fn{getType(){return pu}get isMeshPhongMaterial(){return this._objRef?.isMeshPhongMaterial}set color(t){this._objRef&&(this._objRef.color=me(this._objRef.color,t))}get color(){return this._objRef?.color}set specular(t){this._objRef&&(this._objRef.specular=me(this._objRef.specular,t))}get specular(){return this._objRef?.specular}set shininess(t){this._objRef&&(this._objRef.shininess=t)}get shininess(){return this._objRef?.shininess}set map(t){this._objRef&&(this._objRef.map=t)}get map(){return this._objRef?.map}set lightMap(t){this._objRef&&(this._objRef.lightMap=t)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(t){this._objRef&&(this._objRef.lightMapIntensity=t)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set aoMap(t){this._objRef&&(this._objRef.aoMap=t)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(t){this._objRef&&(this._objRef.aoMapIntensity=t)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set emissive(t){this._objRef&&(this._objRef.emissive=me(this._objRef.emissive,t))}get emissive(){return this._objRef?.emissive}set emissiveIntensity(t){this._objRef&&(this._objRef.emissiveIntensity=t)}get emissiveIntensity(){return this._objRef?.emissiveIntensity}set emissiveMap(t){this._objRef&&(this._objRef.emissiveMap=t)}get emissiveMap(){return this._objRef?.emissiveMap}set bumpMap(t){this._objRef&&(this._objRef.bumpMap=t)}get bumpMap(){return this._objRef?.bumpMap}set bumpScale(t){this._objRef&&(this._objRef.bumpScale=t)}get bumpScale(){return this._objRef?.bumpScale}set normalMap(t){this._objRef&&(this._objRef.normalMap=t)}get normalMap(){return this._objRef?.normalMap}set normalMapType(t){this._objRef&&(this._objRef.normalMapType=t)}get normalMapType(){return this._objRef?.normalMapType}set normalScale(t){this._objRef&&(this._objRef.normalScale=me(this._objRef.normalScale,t))}get normalScale(){return this._objRef?.normalScale}set displacementMap(t){this._objRef&&(this._objRef.displacementMap=t)}get displacementMap(){return this._objRef?.displacementMap}set displacementScale(t){this._objRef&&(this._objRef.displacementScale=t)}get displacementScale(){return this._objRef?.displacementScale}set displacementBias(t){this._objRef&&(this._objRef.displacementBias=t)}get displacementBias(){return this._objRef?.displacementBias}set specularMap(t){this._objRef&&(this._objRef.specularMap=t)}get specularMap(){return this._objRef?.specularMap}set alphaMap(t){this._objRef&&(this._objRef.alphaMap=t)}get alphaMap(){return this._objRef?.alphaMap}set envMap(t){this._objRef&&(this._objRef.envMap=t)}get envMap(){return this._objRef?.envMap}set envMapRotation(t){this._objRef&&(this._objRef.envMapRotation=me(this._objRef.envMapRotation,t))}get envMapRotation(){return this._objRef?.envMapRotation}set combine(t){this._objRef&&(this._objRef.combine=t)}get combine(){return this._objRef?.combine}set reflectivity(t){this._objRef&&(this._objRef.reflectivity=t)}get reflectivity(){return this._objRef?.reflectivity}set refractionRatio(t){this._objRef&&(this._objRef.refractionRatio=t)}get refractionRatio(){return this._objRef?.refractionRatio}set wireframe(t){this._objRef&&(this._objRef.wireframe=t)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(t){this._objRef&&(this._objRef.wireframeLinewidth=t)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(t){this._objRef&&(this._objRef.wireframeLinecap=t)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(t){this._objRef&&(this._objRef.wireframeLinejoin=t)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set flatShading(t){this._objRef&&(this._objRef.flatShading=t)}get flatShading(){return this._objRef?.flatShading}set metal(t){this._objRef&&(this._objRef.metal=t)}get metal(){return this._objRef?.metal}set fog(t){this._objRef&&(this._objRef.fog=t)}get fog(){return this._objRef?.fog}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-meshPhongMaterial"]],inputs:{color:"color",specular:"specular",shininess:"shininess",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",emissive:"emissive",emissiveIntensity:"emissiveIntensity",emissiveMap:"emissiveMap",bumpMap:"bumpMap",bumpScale:"bumpScale",normalMap:"normalMap",normalMapType:"normalMapType",normalScale:"normalScale",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",specularMap:"specularMap",alphaMap:"alphaMap",envMap:"envMap",envMapRotation:"envMapRotation",combine:"combine",reflectivity:"reflectivity",refractionRatio:"refractionRatio",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",flatShading:"flatShading",metal:"metal",fog:"fog"},standalone:!1,features:[J([{provide:fn,useExisting:_e(()=>n)}]),q],ngContentSelectors:tte,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var jU=(()=>{class n extends to{constructor(t){super(),this.parent=t}addToParent(){this.parent.objRef&&(this.parent.objRef.geometry=this.objRef,this.parent.objRef.updateMorphTargets&&this.parent.objRef.updateMorphTargets())}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.geometry=void 0)}static{this.\u0275fac=function(i){return new(i||n)(be(ue))}}static{this.\u0275cmp=j({type:n,selectors:[["th-abs-geometry"]],standalone:!1,features:[q],decls:0,vars:0,template:function(i,r){},encapsulation:2,changeDetection:0})}}return n})();var ite=["*"],ni=(()=>{class n extends jU{getType(){return bt}set id(t){this._objRef&&(this._objRef.id=t)}get id(){return this._objRef?.id}set uuid(t){this._objRef&&(this._objRef.uuid=t)}get uuid(){return this._objRef?.uuid}set name(t){this._objRef&&(this._objRef.name=t)}get name(){return this._objRef?.name}get type(){return this._objRef?.type}set index(t){this._objRef&&(this._objRef.index=me(this._objRef.index,t))}get index(){return this._objRef?.index}set indirect(t){this._objRef&&(this._objRef.indirect=me(this._objRef.indirect,t))}get indirect(){return this._objRef?.indirect}set attributes(t){this._objRef&&(this._objRef.attributes=t)}get attributes(){return this._objRef?.attributes}set morphAttributes(t){this._objRef&&(this._objRef.morphAttributes=t)}get morphAttributes(){return this._objRef?.morphAttributes}set morphTargetsRelative(t){this._objRef&&(this._objRef.morphTargetsRelative=t)}get morphTargetsRelative(){return this._objRef?.morphTargetsRelative}set groups(t){this._objRef&&(this._objRef.groups=t)}get groups(){return this._objRef?.groups}set boundingBox(t){this._objRef&&(this._objRef.boundingBox=me(this._objRef.boundingBox,t))}get boundingBox(){return this._objRef?.boundingBox}set boundingSphere(t){this._objRef&&(this._objRef.boundingSphere=me(this._objRef.boundingSphere,t))}get boundingSphere(){return this._objRef?.boundingSphere}set drawRange(t){this._objRef&&(this._objRef.drawRange=t)}get drawRange(){return this._objRef?.drawRange}set userData(t){this._objRef&&(this._objRef.userData=t)}get userData(){return this._objRef?.userData}get isBufferGeometry(){return this._objRef?.isBufferGeometry}constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(be(ue,4))}}static{this.\u0275cmp=j({type:n,selectors:[["th-bufferGeometry"]],inputs:{id:"id",uuid:"uuid",name:"name",index:"index",indirect:"indirect",attributes:"attributes",morphAttributes:"morphAttributes",morphTargetsRelative:"morphTargetsRelative",groups:"groups",boundingBox:"boundingBox",boundingSphere:"boundingSphere",drawRange:"drawRange",userData:"userData"},standalone:!1,features:[J([]),q],ngContentSelectors:ite,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var rte=["*"],bs=(()=>{class n extends ni{getType(){return $s}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-planeGeometry"]],standalone:!1,features:[J([{provide:ni,useExisting:_e(()=>n)}]),q],ngContentSelectors:rte,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Du=new ye("A reference to the raycaster object",{factory:()=>new Nr}),Ul=(()=>{class n{static{this.instanceCnt=0}constructor(){this.raycaster=E(Du),this.selected=null,this.enabled=!0,this.groups=[],this.paused=!1,this.maxClickDistance=23,this.nid=n.instanceCnt++,this.onPointerMove=this.onPointerMove.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerUp=this.onPointerUp.bind(this)}ngOnDestroy(){this.disable(),this.unsubscribe()}subscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.addEventListener("pointermove",this.onPointerMove),this.canvas.addEventListener("pointerdown",this.onPointerDown),this.canvas.addEventListener("pointerup",this.onPointerUp)}unsubscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.removeEventListener("pointermove",this.onPointerMove),this.canvas.removeEventListener("pointerdown",this.onPointerDown),this.canvas.removeEventListener("pointerup",this.onPointerUp)}enable(){this.enabled=!0}disable(){this.enabled=!1}pause(){this.paused=!0}resume(){this.paused=!1}get isEnabled(){return this.enabled}init(t,i){this.camera=t,this.canvas=i,this.subscribe()}addEventTarget(t){this.groups.push(t)}removeEventTarget(t){let i=this.groups.indexOf(t);i>=0&&this.groups.splice(i,1)}onPointerMove(t){if(!this.isReady())return;let i=this.getFirstIntersectedGroup(t.layerX,t.layerY,"mouseEnter");if((!this.selected||this.selected!==i?.target)&&(this.selected&&(this.selected.host.objRef?.dispatchEvent({type:"mouseExit",component:this.selected.host}),this.selected.emitOnMouseExit(),this.selected=null),i&&i.target)){this.selected=i.target;let r=ce({type:"mouseEnter",component:i.target.host},i);this.selected.host.objRef?.dispatchEvent(r),this.selected.emitOnMouseEnter(r)}}onPointerDown(t){if(this.maxClickDistance=t.width,this.pointerDownEvent=t,!this.isReady())return;let i=this.getFirstIntersectedGroup(t.layerX,t.layerY,"pointerDown");if(i&&i.target&&i.target.host.objRef){let r=ce({type:"pointerDown",component:i.target.host},i);i.target.host.objRef.dispatchEvent(r),i.target.emitOnPointerDown(r)}}onPointerUp(t){let i=this.pointerDownEvent;if(this.pointerDownEvent=void 0,!this.isReady())return;let r=this.getFirstIntersectedGroup(t.layerX,t.layerY,"pointerUp");if(r&&r.target&&r.target.host.objRef){let o=ce({type:"pointerUp",component:r.target.host},r);r.target.host.objRef.dispatchEvent(o),r.target.emitOnPointerUp(o)}if(!(this.calcPointerDownUpDinstance(t,i)>this.maxClickDistance)&&(r=this.getFirstIntersectedGroup(t.layerX,t.layerY,"click"),r&&r.target&&r.target.host.objRef)){let o=ce({type:"click",component:r.target.host},r);r.target.host.objRef.dispatchEvent(o),r.target.emitOnClick(o)}}isReady(t){return!!(this.enabled&&(t||!this.paused)&&this.camera&&this.camera.objRef&&this.groups&&this.groups.length>0)}calcPointerDownUpDinstance(t,i){if(!i)return Number.MAX_VALUE;let r=t.layerX-i.layerX,o=t.layerY-i.layerY;return Math.sqrt(r*r+o*o)}getFirstIntersectedGroup(t,i,r){if(!this.camera||!this.canvas||!this.camera.objRef)return;t=t/this.canvas.clientWidth*2-1,i=-(i/this.canvas.clientHeight)*2+1;let o=new V(t,i);this.raycaster.setFromCamera(o,this.camera.objRef);let s,a;for(let l of this.groups){let c=l.host.objRef;if(!l[r]||!c)continue;let d=this.raycaster.intersectObject(c,!0);d.length>0&&(!s||s.distance>d[0].distance)&&(s=d[0],a=l)}if(a&&s)return ce({target:a},s)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac})}}return n})();var ote=["*"],sb=new ye("HOST_ELEMENT"),zr=(()=>{class n{constructor(t,i){this.engServ=t,this.raycaster=i,this.hostElement=E(sb),this.onCurrentRendererPass=new rt,this.onRender=new rt}set contentScene(t){t&&(this.scene=t)}set effectComposer(t){this._effectComposer=t,this.configureEffectComposerRenderTarget()}get effectComposer(){return this._effectComposer}set camera(t){this._camera=t,this.initRaycaster()}get camera(){return this._camera}set contentCamera(t){t&&(this.camera=t)}set viewPort(t){this._viewPort=t,this.configureEffectComposerRenderTarget()}get viewPort(){return this._viewPort}ngOnInit(){this.initRaycaster()}initRaycaster(){this.camera&&this.raycaster.init(this.camera,this.hostElement.nativeElement)}add(t){}remove(t){}configureEffectComposerRenderTarget(){if(!(!this.viewPort||!this.effectComposer)){let t,i;this.viewPort instanceof li?(t=this.viewPort.z,i=this.viewPort?.width):(t=this.viewPort.width,i=this.viewPort.height),this.effectComposer.setSize(t,i)}}static{this.\u0275fac=function(i){return new(i||n)(be(So),be(Ul))}}static{this.\u0275cmp=j({type:n,selectors:[["th-view"]],contentQueries:function(i,r,o){if(i&1&&(nn(o,Lt,5),nn(o,Ll,5)),i&2){let s;ct(s=dt())&&(r.contentScene=s.first),ct(s=dt())&&(r.contentCamera=s.first)}},inputs:{scene:"scene",effectComposer:"effectComposer",camera:"camera",shadow:"shadow",viewPort:"viewPort",scissor:"scissor",scissorTest:"scissorTest",clearColor:"clearColor",clearAlpha:"clearAlpha"},outputs:{onCurrentRendererPass:"onCurrentRendererPass",onRender:"onRender"},standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)},{provide:Du,useValue:new Nr},Ul])],ngContentSelectors:ote,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var LU=new w,ste=new Yt,BU=new w,sp=class extends xt{constructor(e=document.createElement("div")){super(),this.isCSS3DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof t.element.ownerDocument.defaultView.Element&&t.element.parentNode!==null&&t.element.remove()})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this}};var Ba=new Ie,ate=new Ie,Xw=class{constructor(e={}){let t=this,i,r,o,s,a={camera:{style:""},objects:new WeakMap},l=e.element!==void 0?e.element:document.createElement("div");l.style.overflow="hidden",this.domElement=l;let c=document.createElement("div");c.style.transformOrigin="0 0",c.style.pointerEvents="none",l.appendChild(c);let d=document.createElement("div");d.style.transformStyle="preserve-3d",c.appendChild(d),this.getSize=function(){return{width:i,height:r}},this.render=function(g,p){let b=p.projectionMatrix.elements[5]*s;p.view&&p.view.enabled?(c.style.transform=`translate( ${-p.view.offsetX*(i/p.view.width)}px, ${-p.view.offsetY*(r/p.view.height)}px )`,c.style.transform+=`scale( ${p.view.fullWidth/p.view.width}, ${p.view.fullHeight/p.view.height} )`):c.style.transform="",g.matrixWorldAutoUpdate===!0&&g.updateMatrixWorld(),p.parent===null&&p.matrixWorldAutoUpdate===!0&&p.updateMatrixWorld();let v,y;p.isOrthographicCamera&&(v=-(p.right+p.left)/2,y=(p.top+p.bottom)/2);let R=p.view&&p.view.enabled?p.view.height/p.view.fullHeight:1,S=p.isOrthographicCamera?`scale( ${R} )scale(`+b+")translate("+u(v)+"px,"+u(y)+"px)"+h(p.matrixWorldInverse):`scale( ${R} )translateZ(`+b+"px)"+h(p.matrixWorldInverse),A=(p.isPerspectiveCamera?"perspective("+b+"px) ":"")+S+"translate("+o+"px,"+s+"px)";a.camera.style!==A&&(d.style.transform=A,a.camera.style=A),_(g,g,p,S)},this.setSize=function(g,p){i=g,r=p,o=i/2,s=r/2,l.style.width=g+"px",l.style.height=p+"px",c.style.width=g+"px",c.style.height=p+"px",d.style.width=g+"px",d.style.height=p+"px"};function u(g){return Math.abs(g)<1e-10?0:g}function h(g){let p=g.elements;return"matrix3d("+u(p[0])+","+u(-p[1])+","+u(p[2])+","+u(p[3])+","+u(p[4])+","+u(-p[5])+","+u(p[6])+","+u(p[7])+","+u(p[8])+","+u(-p[9])+","+u(p[10])+","+u(p[11])+","+u(p[12])+","+u(-p[13])+","+u(p[14])+","+u(p[15])+")"}function f(g){let p=g.elements;return"translate(-50%,-50%)"+("matrix3d("+u(p[0])+","+u(p[1])+","+u(p[2])+","+u(p[3])+","+u(-p[4])+","+u(-p[5])+","+u(-p[6])+","+u(-p[7])+","+u(p[8])+","+u(p[9])+","+u(p[10])+","+u(p[11])+","+u(p[12])+","+u(p[13])+","+u(p[14])+","+u(p[15])+")")}function m(g){g.isCSS3DObject&&(g.element.style.display="none");for(let p=0,b=g.children.length;p<b;p++)m(g.children[p])}function _(g,p,b,v){if(g.visible===!1){m(g);return}if(g.isCSS3DObject){let y=g.layers.test(b.layers)===!0,R=g.element;if(R.style.display=y===!0?"":"none",y===!0){g.onBeforeRender(t,p,b);let S;g.isCSS3DSprite?(Ba.copy(b.matrixWorldInverse),Ba.transpose(),g.rotation2D!==0&&Ba.multiply(ate.makeRotationZ(g.rotation2D)),g.matrixWorld.decompose(LU,ste,BU),Ba.setPosition(LU),Ba.scale(BU),Ba.elements[3]=0,Ba.elements[7]=0,Ba.elements[11]=0,Ba.elements[15]=1,S=f(Ba)):S=f(g.matrixWorld);let T=a.objects.get(g);if(T===void 0||T.style!==S){R.style.transform=S;let A={style:S};a.objects.set(g,A)}R.parentNode!==d&&d.appendChild(R),g.onAfterRender(t,p,b)}}for(let y=0,R=g.children.length;y<R;y++)_(g.children[y],p,b,v)}}};var lp=class extends xt{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new V(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof t.element.ownerDocument.defaultView.Element&&t.element.parentNode!==null&&t.element.remove()})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}},ap=new w,UU=new Ie,VU=new Ie,zU=new w,HU=new w,Yw=class{constructor(e={}){let t=this,i,r,o,s,a={objects:new WeakMap},l=e.element!==void 0?e.element:document.createElement("div");l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:i,height:r}},this.render=function(m,_){m.matrixWorldAutoUpdate===!0&&m.updateMatrixWorld(),_.parent===null&&_.matrixWorldAutoUpdate===!0&&_.updateMatrixWorld(),UU.copy(_.matrixWorldInverse),VU.multiplyMatrices(_.projectionMatrix,UU),d(m,m,_),f(m)},this.setSize=function(m,_){i=m,r=_,o=i/2,s=r/2,l.style.width=m+"px",l.style.height=_+"px"};function c(m){m.isCSS2DObject&&(m.element.style.display="none");for(let _=0,g=m.children.length;_<g;_++)c(m.children[_])}function d(m,_,g){if(m.visible===!1){c(m);return}if(m.isCSS2DObject){ap.setFromMatrixPosition(m.matrixWorld),ap.applyMatrix4(VU);let p=ap.z>=-1&&ap.z<=1&&m.layers.test(g.layers)===!0,b=m.element;b.style.display=p===!0?"":"none",p===!0&&(m.onBeforeRender(t,_,g),b.style.transform="translate("+-100*m.center.x+"%,"+-100*m.center.y+"%)translate("+(ap.x*o+o)+"px,"+(-ap.y*s+s)+"px)",b.parentNode!==l&&l.appendChild(b),m.onAfterRender(t,_,g));let v={distanceToCameraSquared:u(g,m)};a.objects.set(m,v)}for(let p=0,b=m.children.length;p<b;p++)d(m.children[p],_,g)}function u(m,_){return zU.setFromMatrixPosition(m.matrixWorld),HU.setFromMatrixPosition(_.matrixWorld),zU.distanceToSquared(HU)}function h(m){let _=[];return m.traverseVisible(function(g){g.isCSS2DObject&&_.push(g)}),_}function f(m){let _=h(m).sort(function(p,b){if(p.renderOrder!==b.renderOrder)return b.renderOrder-p.renderOrder;let v=a.objects.get(p).distanceToCameraSquared,y=a.objects.get(b).distanceToCameraSquared;return v-y}),g=_.length;for(let p=0,b=_.length;p<b;p++)_[p].element.style.zIndex=g-p}}};var GU={alpha:!0,antialias:!0,preserveDrawingBuffer:!0},Vl=new ye("Renderer Providers"),WU=new ye("CSS3DRenderer"),$U=new ye("CSS2DRenderer"),Au=new ye("WebGLRenderer");function Wc(n){let e=new Nl(ce(ce({},GU),n));return Object.assign(e,ce(ce({},GU),n)),[{provide:Au,useValue:e},{provide:Vl,multi:!0,useExisting:Au}]}function Zw(n){return[{provide:WU,useFactory:()=>{let t=new Xw(n),i=t.domElement.style;return i.position="absolute",i.top="0px",i.bottom="0px",i.left="0px",i.right="0px",i.overflow="hidden",t}},{provide:Vl,multi:!0,useExisting:WU}]}function qU(n){return[{provide:$U,useFactory:()=>{let t=new Yw(n),i=t.domElement.style;return i.position="absolute",i.top="0px",i.bottom="0px",i.left="0px",i.right="0px",i.overflow="hidden",t}},{provide:Vl,multi:!0,useExisting:$U}]}var So=(()=>{class n{constructor(t){this.ngZone=t,this.hostElement=E(sb),this.clock=new eo,this.destroyed$=new tt,this.resizeEmitter=new rt,this.beforeRenderEmitter=new rt,this.views=[],this.beforeRender$=this.beforeRenderEmitter.pipe(Ri(this.destroyed$)),this.resize$=this.resizeEmitter.pipe(Ri(this.destroyed$));let i=this.initRenderer();this.renderers=i.renderers,this.canvas=i.canvas,this.wegblRenderer=i.mainRenderer,this.initResizeObserver()}ngOnDestroy(){this.resizeObserver&&this.hostElement&&this.resizeObserver.unobserve(this.hostElement.nativeElement)}initResizeObserver(){this.ngZone.runOutsideAngular(()=>{this.initCanvasSize(),this.resizeObserver||(this.resizeObserver=new ResizeObserver(()=>{this.resize()})),this.resizeObserver.observe(this.hostElement.nativeElement)})}initCanvasSize(){this.canvas?.style.setProperty("width","100%"),this.canvas?.style.setProperty("height","100%")}initRenderer(){let t=E(Vl),i,r;for(let o of t)o.domElement instanceof HTMLCanvasElement&&(r=o,i=r.domElement);if(!t||t.length<1)throw new Error("missing Canvas Renderer");return{canvas:i,mainRenderer:r,renderers:t}}setViews(t){this.views=t}addView(t){this.views.push(t);let i=this.calcRendererSize();i&&this.adjustViewDimensions(t,i.width,i.height)}render(){this.beforeRenderEmitter.emit({engine:this,delta:this.clock.getDelta()});for(let t of this.views)this.renderView(t)}renderView(t){let i=t.camera,r=t.scene;if(!(!i||!r||!i.objRef||!r.objRef)){Hc(t.onRender)&&this.ngZone.run(()=>t.onRender.emit({renderer:this.renderers,scene:r,camera:i}));for(let o of this.renderers)if(!(t.effectComposer&&!(o instanceof Nl)))if(this.applyRendererParametersFromView(t,o),Hc(t.onCurrentRendererPass)&&this.ngZone.run(()=>t.onCurrentRendererPass.emit({renderer:o,scene:r,camera:i,engine:this})),t.effectComposer){t.effectComposer.render();return}else o.render(r.objRef,i.objRef)}}applyRendererParametersFromView(t,i){t.viewPort&&i.setViewport&&(t.viewPort instanceof li?i.setViewport(t.viewPort):i.setViewport(t.viewPort.x,t.viewPort.y,t.viewPort.width,t.viewPort.height)),t.scissor&&i.setScissor&&(t.scissor instanceof li?i.setScissor(t.scissor):i.setScissor(t.scissor.x,t.scissor.y,t.scissor.width,t.scissor.height)),t.scissorTest!==void 0&&i.setScissorTest&&i.setScissorTest(t.scissorTest),t.clearColor&&i.setClearColor&&i.setClearColor(t.clearColor),t.clearAlpha!==void 0&&i.setClearAlpha&&i.setClearAlpha(t.clearAlpha),t.shadow!==void 0&&i.shadowMap&&(i.shadowMap.enabled=!0)}resize(){let{width:t,height:i}=this.calcRendererSize();this.renderers?.forEach(r=>r.setSize(t,i,!1));for(let r of this.views)this.adjustViewDimensions(r,t,i);return this.resizeEmitter.emit({width:t,height:i}),!0}calcRendererSize(){return{width:this.hostElement.nativeElement.clientWidth??0,height:this.hostElement.nativeElement.clientHeight??0}}adjustViewDimensions(t,i,r){t.viewPort||(t.camera&&t.camera.objRef.aspect&&(t.camera.objRef.aspect=i/r,t.camera.objRef.updateProjectionMatrix()),t.effectComposer?.setSize(i,r))}static{this.\u0275fac=function(i){return new(i||n)(He(nt))}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac})}}return n})();var Ua=(()=>{class n{constructor(t,i){this.engineService=t,this.ngZone=i,this.active=!0,this.destroyed$=new tt,this.beforeRender$=this.engineService.beforeRender$,this.engineService.resize$.pipe(Ri(this.destroyed$)).subscribe(()=>this.requestAnimationFrame())}ngOnDestroy(){this.stop(),this.destroyed$.next(),this.destroyed$.complete()}start(){this.active||(this.active=!0,this.requestAnimationFrame())}stop(){this.active=!1,this.frameId!==void 0&&(cancelAnimationFrame(this.frameId),this.frameId=void 0)}isActive(){return this.active}requestAnimationFrame(){this.frameId===void 0&&this.ngZone.runOutsideAngular(()=>this.frameId=requestAnimationFrame(()=>{this.frameId=void 0,this.engineService.render(),this.active&&this.requestAnimationFrame()}))}static{this.\u0275fac=function(i){return new(i||n)(He(So),He(nt))}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac})}}return n})();var lte=["*"];function cte(n,e){n&1&&Y(0)}function dte(){return[{provide:Vl,useFactory:()=>{let n=E(Vl,{skipSelf:!0,optional:!0});return n||[Wc()[0].useValue]}},{provide:Au,useFactory:()=>{let n=E(Au,{skipSelf:!0,optional:!0});if(n)return n;let e=E(Vl),t=e[0];if(e.length===1&&t instanceof Nl)return t}}]}var Dt=(()=>{class n extends zr{static{this.instanceCnt=0}get obj(){return this}set views(t){this.setViews(t)}get rendererCanvas(){return this.engServ.canvas}constructor(t,i,r,o){super(t,r),this.engServ=t,this.animationLoop=i,this.raycaster=r,this.elementRef=o,this.isDevMode=xN,this.nid=n.instanceCnt++,this.disableDefaultView=!1,this.engServ.renderers.forEach(s=>this.elementRef.nativeElement.appendChild(s.domElement))}ngAfterContentChecked(){this.animationLoop.requestAnimationFrame()}ngAfterViewInit(){this.animationLoop.requestAnimationFrame()}ngOnInit(){this.engServ.resize(),super.ngOnInit(),this.setViews()}setViews(t){this.engServ.setViews([]),this.disableDefaultView||this.engServ.addView(this),t?.forEach(i=>this.engServ.addView(i))}static{this.\u0275fac=function(i){return new(i||n)(be(So),be(Ua),be(_e(()=>Ul)),be(_t))}}static{this.\u0275cmp=j({type:n,selectors:[["th-canvas"]],contentQueries:function(i,r,o){if(i&1&&nn(o,zr,4),i&2){let s;ct(s=dt())&&(r.views=s)}},inputs:{disableDefaultView:"disableDefaultView"},standalone:!1,features:[J([{provide:sb,useFactory:()=>E(_t)},{provide:ue,useExisting:_e(()=>n)},So,Ua,{provide:Du,useValue:new Nr},_e(()=>Ul),{provide:zr,useExisting:_e(()=>n)},dte()]),q],ngContentSelectors:lte,decls:1,vars:1,template:function(i,r){i&1&&(ie(),Ni(0,cte,1,0)),i&2&&Mn(r.isDevMode()?0:-1)},styles:["[_nghost-%COMP%]{display:flex;flex:auto;line-height:0;height:100%}canvas[_ngcontent-%COMP%]{flex:auto;outline:none;width:100%;height:100%}"],changeDetection:0})}}return n})();var ab=function(){var n=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(d){d.preventDefault(),i(++n%e.children.length)},!1);function t(d){return e.appendChild(d.dom),d}function i(d){for(var u=0;u<e.children.length;u++)e.children[u].style.display=u===d?"block":"none";n=d}var r=(performance||Date).now(),o=r,s=0,a=t(new ab.Panel("FPS","#0ff","#002")),l=t(new ab.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new ab.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){s++;var d=(performance||Date).now();if(l.update(d-r,200),d>=o+1e3&&(a.update(s*1e3/(d-o),100),o=d,s=0,c)){var u=performance.memory;c.update(u.usedJSHeapSize/1048576,u.jsHeapSizeLimit/1048576)}return d},update:function(){r=this.end()},domElement:e,setMode:i}};ab.Panel=function(n,e,t){var i=1/0,r=0,o=Math.round,s=o(window.devicePixelRatio||1),a=80*s,l=48*s,c=3*s,d=2*s,u=3*s,h=15*s,f=74*s,m=30*s,_=document.createElement("canvas");_.width=a,_.height=l,_.style.cssText="width:80px;height:48px";var g=_.getContext("2d");return g.font="bold "+9*s+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=t,g.fillRect(0,0,a,l),g.fillStyle=e,g.fillText(n,c,d),g.fillRect(u,h,f,m),g.fillStyle=t,g.globalAlpha=.9,g.fillRect(u,h,f,m),{dom:_,update:function(p,b){i=Math.min(i,p),r=Math.max(r,p),g.fillStyle=t,g.globalAlpha=1,g.fillRect(0,0,a,h),g.fillStyle=e,g.fillText(o(p)+" "+n+" ("+o(i)+"-"+o(r)+")",c,d),g.drawImage(_,u+s,h,f-s,m,u,h,f-s,m),g.fillRect(u+f-s,h,s,m),g.fillStyle=t,g.globalAlpha=.9,g.fillRect(u+f-s,h,s,o((1-p/b)*m))}}};var YU=ab;var On=(()=>{class n{constructor(t,i){this.engineService=t,this.canvas=i,this.stats=new YU}ngOnDestroy(){this.renderSubscription&&this.renderSubscription.unsubscribe()}ngOnInit(){if(!this.canvas.elementRef)throw new Error("No canvas present");let t=this.canvas.elementRef.nativeElement;t&&(t.style.position="relative",this.stats.dom.style.position="absolute",this.stats.showPanel(0),t.appendChild(this.stats.dom),this.renderSubscription=this.engineService.beforeRender$.subscribe(()=>{this.stats.update()}))}set thStats(t){t?this.stats.dom.style.visibility="visible":this.stats.dom.style.visibility="hidden"}static{this.\u0275fac=function(i){return new(i||n)(be(So),be(Dt))}}static{this.\u0275dir=Ue({type:n,selectors:[["","thStats",""]],inputs:{thStats:"thStats"},standalone:!1})}}return n})();var Qw="https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/assets/",pn="assets/";function T1(n,e){if(e===Lw)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===xu||e===Zf){let t=n.getIndex();if(t===null){let s=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)s.push(l);n.setIndex(s),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}let i=t.count-2,r=[];if(e===xu)for(let s=1;s<=i;s++)r.push(t.getX(0)),r.push(t.getX(s)),r.push(t.getX(s+1));else for(let s=0;s<i;s++)s%2===0?(r.push(t.getX(s)),r.push(t.getX(s+1)),r.push(t.getX(s+2))):(r.push(t.getX(s+2)),r.push(t.getX(s+1)),r.push(t.getX(s)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let o=n.clone();return o.setIndex(r),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var Kw=class extends qn{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new P1(t)}),this.register(function(t){return new F1(t)}),this.register(function(t){return new z1(t)}),this.register(function(t){return new H1(t)}),this.register(function(t){return new G1(t)}),this.register(function(t){return new O1(t)}),this.register(function(t){return new j1(t)}),this.register(function(t){return new N1(t)}),this.register(function(t){return new L1(t)}),this.register(function(t){return new I1(t)}),this.register(function(t){return new B1(t)}),this.register(function(t){return new k1(t)}),this.register(function(t){return new V1(t)}),this.register(function(t){return new U1(t)}),this.register(function(t){return new D1(t)}),this.register(function(t){return new W1(t)}),this.register(function(t){return new $1(t)})}load(e,t,i,r){let o=this,s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){let c=gs.extractUrlBase(e);s=gs.resolveURL(c,this.path)}else s=gs.extractUrlBase(e);this.manager.itemStart(e);let a=function(c){r?r(c):console.error(c),o.manager.itemError(e),o.manager.itemEnd(e)},l=new Wn(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{o.parse(c,s,function(d){t(d),o.manager.itemEnd(e)},a)}catch(d){a(d)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let o,s={},a={},l=new TextDecoder;if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===e3){try{s[wi.KHR_BINARY_GLTF]=new q1(e)}catch(u){r&&r(u);return}o=JSON.parse(s[wi.KHR_BINARY_GLTF].content)}else o=JSON.parse(l.decode(e));else o=e;if(o.asset===void 0||o.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let c=new eA(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){let u=this.pluginCallbacks[d](c);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,s[u.name]=!0}if(o.extensionsUsed)for(let d=0;d<o.extensionsUsed.length;++d){let u=o.extensionsUsed[d],h=o.extensionsRequired||[];switch(u){case wi.KHR_MATERIALS_UNLIT:s[u]=new A1;break;case wi.KHR_DRACO_MESH_COMPRESSION:s[u]=new X1(o,this.dracoLoader);break;case wi.KHR_TEXTURE_TRANSFORM:s[u]=new Y1;break;case wi.KHR_MESH_QUANTIZATION:s[u]=new Z1;break;default:h.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(s),c.setPlugins(a),c.parse(i,r)}parseAsync(e,t){let i=this;return new Promise(function(r,o){i.parse(e,t,r,o)})}};function ute(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}var wi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},D1=class{constructor(e){this.parser=e,this.name=wi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){let o=t[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){let t=this.parser,i="light:"+e,r=t.cache.get(i);if(r)return r;let o=t.json,l=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e],c,d=new he(16777215);l.color!==void 0&&d.setRGB(l.color[0],l.color[1],l.color[2],Gn);let u=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new Dl(d),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new El(d),c.distance=u;break;case"spot":c=new gu(d),c.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,zl(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){let t=this,i=this.parser,o=i.json.nodes[e],a=(o.extensions&&o.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}},A1=class{constructor(){this.name=wi.KHR_MATERIALS_UNLIT}getMaterialType(){return on}extendParams(e,t,i){let r=[];e.color=new he(1,1,1),e.opacity=1;let o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){let s=o.baseColorFactor;e.color.setRGB(s[0],s[1],s[2],Gn),e.opacity=s[3]}o.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",o.baseColorTexture,Zi))}return Promise.all(r)}},I1=class{constructor(e){this.parser=e,this.name=wi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(t.emissiveIntensity=o),Promise.resolve()}},P1=class{constructor(e){this.parser=e,this.name=wi.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:jr}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(t.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){let a=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new V(a,a)}return Promise.all(o)}},F1=class{constructor(e){this.parser=e,this.name=wi.KHR_MATERIALS_DISPERSION}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:jr}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return t.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}},k1=class{constructor(e){this.parser=e,this.name=wi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:jr}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(t.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(t.iridescenceIOR=s.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}},O1=class{constructor(e){this.parser=e,this.name=wi.KHR_MATERIALS_SHEEN}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:jr}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[];t.sheenColor=new he(0,0,0),t.sheenRoughness=0,t.sheen=1;let s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){let a=s.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Gn)}return s.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(i.assignTexture(t,"sheenColorMap",s.sheenColorTexture,Zi)),s.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}},j1=class{constructor(e){this.parser=e,this.name=wi.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:jr}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(t.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(i.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(o)}},N1=class{constructor(e){this.parser=e,this.name=wi.KHR_MATERIALS_VOLUME}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:jr}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];t.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(i.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;let a=s.attenuationColor||[1,1,1];return t.attenuationColor=new he().setRGB(a[0],a[1],a[2],Gn),Promise.all(o)}},L1=class{constructor(e){this.parser=e,this.name=wi.KHR_MATERIALS_IOR}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:jr}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return t.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}},B1=class{constructor(e){this.parser=e,this.name=wi.KHR_MATERIALS_SPECULAR}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:jr}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];t.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(i.assignTexture(t,"specularIntensityMap",s.specularTexture));let a=s.specularColorFactor||[1,1,1];return t.specularColor=new he().setRGB(a[0],a[1],a[2],Gn),s.specularColorTexture!==void 0&&o.push(i.assignTexture(t,"specularColorMap",s.specularColorTexture,Zi)),Promise.all(o)}},U1=class{constructor(e){this.parser=e,this.name=wi.EXT_MATERIALS_BUMP}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:jr}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return t.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(i.assignTexture(t,"bumpMap",s.bumpTexture)),Promise.all(o)}},V1=class{constructor(e){this.parser=e,this.name=wi.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:jr}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(t.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(t.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(i.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}},z1=class{constructor(e){this.parser=e,this.name=wi.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;let o=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,s)}},H1=class{constructor(e){this.parser=e,this.name=wi.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let t=this.name,i=this.parser,r=i.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;let s=o.extensions[t],a=r.images[s.source],l=i.textureLoader;if(a.uri){let c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,s.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},G1=class{constructor(e){this.parser=e,this.name=wi.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){let t=this.name,i=this.parser,r=i.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;let s=o.extensions[t],a=r.images[s.source],l=i.textureLoader;if(a.uri){let c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,s.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},W1=class{constructor(e){this.name=wi.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){let r=i.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){let l=r.byteOffset||0,c=r.byteLength||0,d=r.count,u=r.byteStride,h=new Uint8Array(a,l,c);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(d,u,h,r.mode,r.filter).then(function(f){return f.buffer}):s.ready.then(function(){let f=new ArrayBuffer(d*u);return s.decodeGltfBuffer(new Uint8Array(f),d,u,h,r.mode,r.filter),f})})}else return null}},$1=class{constructor(e){this.name=wi.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;let r=t.meshes[i.mesh];for(let c of r.primitives)if(c.mode!==vs.TRIANGLES&&c.mode!==vs.TRIANGLE_STRIP&&c.mode!==vs.TRIANGLE_FAN&&c.mode!==void 0)return null;let s=i.extensions[this.name].attributes,a=[],l={};for(let c in s)a.push(this.parser.getDependency("accessor",s[c]).then(d=>(l[c]=d,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{let d=c.pop(),u=d.isGroup?d.children:[d],h=c[0].count,f=[];for(let m of u){let _=new Ie,g=new w,p=new Yt,b=new w(1,1,1),v=new Cl(m.geometry,m.material,h);for(let y=0;y<h;y++)l.TRANSLATION&&g.fromBufferAttribute(l.TRANSLATION,y),l.ROTATION&&p.fromBufferAttribute(l.ROTATION,y),l.SCALE&&b.fromBufferAttribute(l.SCALE,y),v.setMatrixAt(y,_.compose(g,p,b));for(let y in l)if(y==="_COLOR_0"){let R=l[y];v.instanceColor=new fs(R.array,R.itemSize,R.normalized)}else y!=="TRANSLATION"&&y!=="ROTATION"&&y!=="SCALE"&&m.geometry.setAttribute(y,l[y]);xt.prototype.copy.call(v,m),this.parser.assignFinalMaterial(v),f.push(v)}return d.isGroup?(d.clear(),d.add(...f),d):f[0]}))}},e3="glTF",lb=12,ZU={JSON:1313821514,BIN:5130562},q1=class{constructor(e){this.name=wi.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,lb),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==e3)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-lb,o=new DataView(e,lb),s=0;for(;s<r;){let a=o.getUint32(s,!0);s+=4;let l=o.getUint32(s,!0);if(s+=4,l===ZU.JSON){let c=new Uint8Array(e,lb+s,a);this.content=i.decode(c)}else if(l===ZU.BIN){let c=lb+s;this.body=e.slice(c,c+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},X1=class{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=wi.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let i=this.json,r=this.dracoLoader,o=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},l={},c={};for(let d in s){let u=K1[d]||d.toLowerCase();a[u]=s[d]}for(let d in e.attributes){let u=K1[d]||d.toLowerCase();if(s[d]!==void 0){let h=i.accessors[e.attributes[d]],f=cp[h.componentType];c[u]=f.name,l[u]=h.normalized===!0}}return t.getDependency("bufferView",o).then(function(d){return new Promise(function(u,h){r.decodeDracoFile(d,function(f){for(let m in f.attributes){let _=f.attributes[m],g=l[m];g!==void 0&&(_.normalized=g)}u(f)},a,c,Gn,h)})})}},Y1=class{constructor(){this.name=wi.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}},Z1=class{constructor(){this.name=wi.KHR_MESH_QUANTIZATION}},Jw=class extends Aa{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r*3+r;for(let s=0;s!==r;s++)t[s]=i[o+s];return t}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,d=r-t,u=(i-t)/d,h=u*u,f=h*u,m=e*c,_=m-c,g=-2*f+3*h,p=f-h,b=1-g,v=p-h+u;for(let y=0;y!==a;y++){let R=s[_+y+a],S=s[_+y+l]*d,T=s[m+y+a],A=s[m+y]*d;o[y]=b*R+v*S+g*T+p*A}return o}},hte=new Yt,Q1=class extends Jw{interpolate_(e,t,i,r){let o=super.interpolate_(e,t,i,r);return hte.fromArray(o).normalize().toArray(o),o}},vs={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},cp={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},QU={9728:hi,9729:bn,9984:Hf,9985:Vc,9986:Fl,9987:xo},KU={33071:Kr,33648:Cc,10497:zo},R1={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},K1={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},$c={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},fte={CUBICSPLINE:void 0,LINEAR:Dc,STEP:Ec},C1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function pte(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Rr({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ds})),n.DefaultMaterial}function Iu(n,e,t){for(let i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function zl(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function mte(n,e,t){let i=!1,r=!1,o=!1;for(let c=0,d=e.length;c<d;c++){let u=e[c];if(u.POSITION!==void 0&&(i=!0),u.NORMAL!==void 0&&(r=!0),u.COLOR_0!==void 0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(n);let s=[],a=[],l=[];for(let c=0,d=e.length;c<d;c++){let u=e[c];if(i){let h=u.POSITION!==void 0?t.getDependency("accessor",u.POSITION):n.attributes.position;s.push(h)}if(r){let h=u.NORMAL!==void 0?t.getDependency("accessor",u.NORMAL):n.attributes.normal;a.push(h)}if(o){let h=u.COLOR_0!==void 0?t.getDependency("accessor",u.COLOR_0):n.attributes.color;l.push(h)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l)]).then(function(c){let d=c[0],u=c[1],h=c[2];return i&&(n.morphAttributes.position=d),r&&(n.morphAttributes.normal=u),o&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}function gte(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){let t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function _te(n){let e,t=n.extensions&&n.extensions[wi.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+E1(t.attributes):e=n.indices+":"+E1(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+E1(n.targets[i]);return e}function E1(n){let e="",t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function J1(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function bte(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}var vte=new Ie,eA=class{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new ute,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,o=!1,s=-1;if(typeof navigator<"u"){let a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;let l=a.match(/Version\/(\d+)/);r=i&&l?parseInt(l[1],10):-1,o=a.indexOf("Firefox")>-1,s=o?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||o&&s<98?this.textureLoader=new Of(this.options.manager):this.textureLoader=new jf(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Wn(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let i=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(s){let a={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:i,userData:{}};return Iu(o,a,r),zl(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(let l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,o=t.length;r<o;r++){let s=t[r].joints;for(let a=0,l=s.length;a<l;a++)e[s[a]].isBone=!0}for(let r=0,o=e.length;r<o;r++){let s=e[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(i[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;let r=i.clone(),o=(s,a)=>{let l=this.associations.get(s);l!=null&&this.associations.set(a,l);for(let[c,d]of s.children.entries())o(d,a.children[c])};return o(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){let r=e(t[i]);if(r)return r}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let i=[];for(let r=0;r<t.length;r++){let o=e(t[r]);o&&i.push(o)}return i}getDependency(e,t){let i=e+":"+t,r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(t)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){let i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(o,s){return i.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[wi.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(o,s){i.load(gs.resolveURL(t.uri,r.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){let r=t.byteLength||0,o=t.byteOffset||0;return i.slice(o,o+r)})}loadAccessor(e){let t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){let s=R1[r.type],a=cp[r.componentType],l=r.normalized===!0,c=new a(r.count*s);return Promise.resolve(new mi(c,s,l))}let o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(s){let a=s[0],l=R1[r.type],c=cp[r.componentType],d=c.BYTES_PER_ELEMENT,u=d*l,h=r.byteOffset||0,f=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,m=r.normalized===!0,_,g;if(f&&f!==u){let p=Math.floor(h/f),b="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+p+":"+r.count,v=t.cache.get(b);v||(_=new c(a,p*f,r.count*f/d),v=new Ea(_,f/d),t.cache.add(b,v)),g=new Hs(v,l,h%f/d,m)}else a===null?_=new c(r.count*l):_=new c(a,h,r.count*l),g=new mi(_,l,m);if(r.sparse!==void 0){let p=R1.SCALAR,b=cp[r.sparse.indices.componentType],v=r.sparse.indices.byteOffset||0,y=r.sparse.values.byteOffset||0,R=new b(s[1],v,r.sparse.count*p),S=new c(s[2],y,r.sparse.count*l);a!==null&&(g=new mi(g.array.slice(),g.itemSize,g.normalized)),g.normalized=!1;for(let T=0,A=R.length;T<A;T++){let M=R[T];if(g.setX(M,S[T*l]),l>=2&&g.setY(M,S[T*l+1]),l>=3&&g.setZ(M,S[T*l+2]),l>=4&&g.setW(M,S[T*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}g.normalized=m}return g})}loadTexture(e){let t=this.json,i=this.options,o=t.textures[e].source,s=t.images[o],a=this.textureLoader;if(s.uri){let l=i.manager.getHandler(s.uri);l!==null&&(a=l)}return this.loadTextureImage(e,o,a)}loadTextureImage(e,t,i){let r=this,o=this.json,s=o.textures[e],a=o.images[t],l=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];let c=this.loadImageSource(t,i).then(function(d){d.flipY=!1,d.name=s.name||a.name||"",d.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(d.name=a.uri);let h=(o.samplers||{})[s.sampler]||{};return d.magFilter=QU[h.magFilter]||bn,d.minFilter=QU[h.minFilter]||xo,d.wrapS=KU[h.wrapS]||zo,d.wrapT=KU[h.wrapT]||zo,d.generateMipmaps=!d.isCompressedTexture&&d.minFilter!==hi&&d.minFilter!==bn,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){let i=this,r=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());let s=r.images[e],a=self.URL||self.webkitURL,l=s.uri||"",c=!1;if(s.bufferView!==void 0)l=i.getDependency("bufferView",s.bufferView).then(function(u){c=!0;let h=new Blob([u],{type:s.mimeType});return l=a.createObjectURL(h),l});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let d=Promise.resolve(l).then(function(u){return new Promise(function(h,f){let m=h;t.isImageBitmapLoader===!0&&(m=function(_){let g=new yn(_);g.needsUpdate=!0,h(g)}),t.load(gs.resolveURL(u,o.path),m,void 0,f)})}).then(function(u){return c===!0&&a.revokeObjectURL(l),zl(u,s),u.userData.mimeType=s.mimeType||bte(s.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),u});return this.sourceCache[e]=d,d}assignTexture(e,t,i,r){let o=this;return this.getDependency("texture",i.index).then(function(s){if(!s)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(s=s.clone(),s.channel=i.texCoord),o.extensions[wi.KHR_TEXTURE_TRANSFORM]){let a=i.extensions!==void 0?i.extensions[wi.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let l=o.associations.get(s);s=o.extensions[wi.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,l)}}return r!==void 0&&(s.colorSpace=r),e[t]=s,s})}assignFinalMaterial(e){let t=e.geometry,i=e.material,r=t.attributes.tangent===void 0,o=t.attributes.color!==void 0,s=t.attributes.normal===void 0;if(e.isPoints){let a="PointsMaterial:"+i.uuid,l=this.cache.get(a);l||(l=new Fc,hn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){let a="LineBasicMaterial:"+i.uuid,l=this.cache.get(a);l||(l=new an,hn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||o||s){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),o&&(l.vertexColors=!0),s&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Rr}loadMaterial(e){let t=this,i=this.json,r=this.extensions,o=i.materials[e],s,a={},l=o.extensions||{},c=[];if(l[wi.KHR_MATERIALS_UNLIT]){let u=r[wi.KHR_MATERIALS_UNLIT];s=u.getMaterialType(),c.push(u.extendParams(a,o,t))}else{let u=o.pbrMetallicRoughness||{};if(a.color=new he(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){let h=u.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],Gn),a.opacity=h[3]}u.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",u.baseColorTexture,Zi)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),s=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}o.doubleSided===!0&&(a.side=$n);let d=o.alphaMode||C1.OPAQUE;if(d===C1.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,d===C1.MASK&&(a.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==on&&(c.push(t.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new V(1,1),o.normalTexture.scale!==void 0)){let u=o.normalTexture.scale;a.normalScale.set(u,u)}if(o.occlusionTexture!==void 0&&s!==on&&(c.push(t.assignTexture(a,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==on){let u=o.emissiveFactor;a.emissive=new he().setRGB(u[0],u[1],u[2],Gn)}return o.emissiveTexture!==void 0&&s!==on&&c.push(t.assignTexture(a,"emissiveMap",o.emissiveTexture,Zi)),Promise.all(c).then(function(){let u=new s(a);return o.name&&(u.name=o.name),zl(u,o),t.associations.set(u,{materials:e}),o.extensions&&Iu(r,u,o),u})}createUniqueName(e){let t=$i.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,i=this.extensions,r=this.primitiveCache;function o(a){return i[wi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return JU(l,a,t)})}let s=[];for(let a=0,l=e.length;a<l;a++){let c=e[a],d=_te(c),u=r[d];if(u)s.push(u.promise);else{let h;c.extensions&&c.extensions[wi.KHR_DRACO_MESH_COMPRESSION]?h=o(c):h=JU(new bt,c,t),r[d]={primitive:c,promise:h},s.push(h)}}return Promise.all(s)}loadMesh(e){let t=this,i=this.json,r=this.extensions,o=i.meshes[e],s=o.primitives,a=[];for(let l=0,c=s.length;l<c;l++){let d=s[l].material===void 0?pte(this.cache):this.getDependency("material",s[l].material);a.push(d)}return a.push(t.loadGeometries(s)),Promise.all(a).then(function(l){let c=l.slice(0,l.length-1),d=l[l.length-1],u=[];for(let f=0,m=d.length;f<m;f++){let _=d[f],g=s[f],p,b=c[f];if(g.mode===vs.TRIANGLES||g.mode===vs.TRIANGLE_STRIP||g.mode===vs.TRIANGLE_FAN||g.mode===void 0)p=o.isSkinnedMesh===!0?new au(_,b):new ke(_,b),p.isSkinnedMesh===!0&&p.normalizeSkinWeights(),g.mode===vs.TRIANGLE_STRIP?p.geometry=T1(p.geometry,Zf):g.mode===vs.TRIANGLE_FAN&&(p.geometry=T1(p.geometry,xu));else if(g.mode===vs.LINES)p=new Sr(_,b);else if(g.mode===vs.LINE_STRIP)p=new Ki(_,b);else if(g.mode===vs.LINE_LOOP)p=new cu(_,b);else if(g.mode===vs.POINTS)p=new du(_,b);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(p.geometry.morphAttributes).length>0&&gte(p,o),p.name=t.createUniqueName(o.name||"mesh_"+e),zl(p,o),g.extensions&&Iu(r,p,g),t.assignFinalMaterial(p),u.push(p)}for(let f=0,m=u.length;f<m;f++)t.associations.set(u[f],{meshes:e,primitives:f});if(u.length===1)return o.extensions&&Iu(r,u[0],o),u[0];let h=new Tr;o.extensions&&Iu(r,h,o),t.associations.set(h,{meshes:e});for(let f=0,m=u.length;f<m;f++)h.add(u[f]);return h})}loadCamera(e){let t,i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new rn(it.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new yo(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),zl(t,i),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],i=[];for(let r=0,o=t.joints.length;r<o;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){let o=r.pop(),s=r,a=[],l=[];for(let c=0,d=s.length;c<d;c++){let u=s[c];if(u){a.push(u);let h=new Ie;o!==null&&h.fromArray(o.array,c*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new lu(a,l)})}loadAnimation(e){let t=this.json,i=this,r=t.animations[e],o=r.name?r.name:"animation_"+e,s=[],a=[],l=[],c=[],d=[];for(let u=0,h=r.channels.length;u<h;u++){let f=r.channels[u],m=r.samplers[f.sampler],_=f.target,g=_.node,p=r.parameters!==void 0?r.parameters[m.input]:m.input,b=r.parameters!==void 0?r.parameters[m.output]:m.output;_.node!==void 0&&(s.push(this.getDependency("node",g)),a.push(this.getDependency("accessor",p)),l.push(this.getDependency("accessor",b)),c.push(m),d.push(_))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(d)]).then(function(u){let h=u[0],f=u[1],m=u[2],_=u[3],g=u[4],p=[];for(let b=0,v=h.length;b<v;b++){let y=h[b],R=f[b],S=m[b],T=_[b],A=g[b];if(y===void 0)continue;y.updateMatrix&&y.updateMatrix();let M=i._createAnimationTracks(y,R,S,T,A);if(M)for(let x=0;x<M.length;x++)p.push(M[x])}return new Fa(o,void 0,p)})}createNodeMesh(e){let t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(o){let s=i._getNodeRef(i.meshCache,r.mesh,o);return r.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),s})}loadNode(e){let t=this.json,i=this,r=t.nodes[e],o=i._loadNodeShallow(e),s=[],a=r.children||[];for(let c=0,d=a.length;c<d;c++)s.push(i.getDependency("node",a[c]));let l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([o,Promise.all(s),l]).then(function(c){let d=c[0],u=c[1],h=c[2];h!==null&&d.traverse(function(f){f.isSkinnedMesh&&f.bind(h,vte)});for(let f=0,m=u.length;f<m;f++)d.add(u[f]);return d})}_loadNodeShallow(e){let t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];let o=t.nodes[e],s=o.name?r.createUniqueName(o.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),o.camera!==void 0&&a.push(r.getDependency("camera",o.camera).then(function(c){return r._getNodeRef(r.cameraCache,o.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let d;if(o.isBone===!0?d=new Ic:c.length>1?d=new Tr:c.length===1?d=c[0]:d=new xt,d!==c[0])for(let u=0,h=c.length;u<h;u++)d.add(c[u]);if(o.name&&(d.userData.name=o.name,d.name=s),zl(d,o),o.extensions&&Iu(i,d,o),o.matrix!==void 0){let u=new Ie;u.fromArray(o.matrix),d.applyMatrix4(u)}else o.translation!==void 0&&d.position.fromArray(o.translation),o.rotation!==void 0&&d.quaternion.fromArray(o.rotation),o.scale!==void 0&&d.scale.fromArray(o.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){let t=this.extensions,i=this.json.scenes[e],r=this,o=new Tr;i.name&&(o.name=r.createUniqueName(i.name)),zl(o,i),i.extensions&&Iu(t,o,i);let s=i.nodes||[],a=[];for(let l=0,c=s.length;l<c;l++)a.push(r.getDependency("node",s[l]));return Promise.all(a).then(function(l){for(let d=0,u=l.length;d<u;d++)o.add(l[d]);let c=d=>{let u=new Map;for(let[h,f]of r.associations)(h instanceof hn||h instanceof yn)&&u.set(h,f);return d.traverse(h=>{let f=r.associations.get(h);f!=null&&u.set(h,f)}),u};return r.associations=c(o),o})}_createAnimationTracks(e,t,i,r,o){let s=[],a=e.name?e.name:e.uuid,l=[];$c[o.path]===$c.weights?e.traverse(function(h){h.morphTargetInfluences&&l.push(h.name?h.name:h.uuid)}):l.push(a);let c;switch($c[o.path]){case $c.weights:c=Ys;break;case $c.rotation:c=Zs;break;case $c.position:case $c.scale:c=Qs;break;default:switch(i.itemSize){case 1:c=Ys;break;case 2:case 3:default:c=Qs;break}break}let d=r.interpolation!==void 0?fte[r.interpolation]:Dc,u=this._getArrayFromAccessor(i);for(let h=0,f=l.length;h<f;h++){let m=new c(l[h]+"."+$c[o.path],t.array,u,d);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),s.push(m)}return s}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let i=J1(t.constructor),r=new Float32Array(t.length);for(let o=0,s=t.length;o<s;o++)r[o]=t[o]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){let r=this instanceof Zs?Q1:Jw;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function yte(n,e,t){let i=e.attributes,r=new vn;if(i.POSITION!==void 0){let a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new w(l[0],l[1],l[2]),new w(c[0],c[1],c[2])),a.normalized){let d=J1(cp[a.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let o=e.targets;if(o!==void 0){let a=new w,l=new w;for(let c=0,d=o.length;c<d;c++){let u=o[c];if(u.POSITION!==void 0){let h=t.json.accessors[u.POSITION],f=h.min,m=h.max;if(f!==void 0&&m!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(m[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(m[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(m[2]))),h.normalized){let _=J1(cp[h.componentType]);l.multiplyScalar(_)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;let s=new Tn;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=s}function JU(n,e,t){let i=e.attributes,r=[];function o(s,a){return t.getDependency("accessor",s).then(function(l){n.setAttribute(a,l)})}for(let s in i){let a=K1[s]||s.toLowerCase();a in n.attributes||r.push(o(i[s],a))}if(e.indices!==void 0&&!n.index){let s=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(s)}return ui.workingColorSpace!==Gn&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${ui.workingColorSpace}" not supported.`),zl(n,e),yte(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?mte(n,e.targets,t):n})}var dp=class{setCrossOrigin(e){this.crossOrigin=e}setWithCredentials(e){this.withCredentials=e}createLoaderInstance(){let e=new this.clazz;return this.crossOrigin&&e.setCrossOrigin(this.crossOrigin),this.withCredentials!==void 0&&e.setWithCredentials(this.withCredentials),e}};var up=(()=>{class n extends dp{load(...t){return this.createLoaderInstance().loadAsync(...t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac})}}return n})();var hp=(()=>{class n{set url(t){this._url=t,this.load()}get url(){return this._url}get onLoaded(){return this.onLoaded$||(this.onLoaded$=new rt),this.onLoaded$}get onProgress(){return this.onProgress$||(this.onProgress$=new rt),this.onProgress$}constructor(t,i){this.host=t,this.zone=i,this.initialized=!1,this.animationLoop=E(Ua),this.proxy=qw(),t.objRef=this.proxy}ngOnInit(){this.initialized=!0,this.load()}load(){return xi(this,null,function*(){if(!this.initialized)return;if(this._url===void 0)throw new Error("missing url");if(!this.proxy)return;let t=this._url,i=Hc(this.onProgress$)?o=>{this.zone.run(()=>{this.onProgress$?.next(o)})}:void 0,r=yield this.zone.runOutsideAngular(()=>this.service.load(t,i));this.animationLoop.requestAnimationFrame(),this.proxy.objRef=this.getRefFromResponse(r),this.host.objRef=this.proxy,this.onLoaded$&&r!=null&&this.zone.run(()=>this.onLoaded$?.next(r))})}static{this.\u0275fac=function(i){Yy()}}static{this.\u0275dir=Ue({type:n,inputs:{url:"url"},outputs:{onLoaded:"onLoaded",onProgress:"onProgress"},standalone:!1})}}return n})();var tA=new WeakMap,eM=class extends qn{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){let o=new Wn(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,s=>{this.parse(s,t,r)},i,r)}parse(e,t,i=()=>{}){this.decodeDracoFile(e,t,null,null,Zi,i).catch(i)}decodeDracoFile(e,t,i,r,o=Gn,s=()=>{}){let a={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:o};return this.decodeGeometry(e,a).then(t).catch(s)}decodeGeometry(e,t){let i=JSON.stringify(t);if(tA.has(e)){let l=tA.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r,o=this.workerNextTaskID++,s=e.byteLength,a=this._getWorker(o,s).then(l=>(r=l,new Promise((c,d)=>{r._callbacks[o]={resolve:c,reject:d},r.postMessage({type:"decode",id:o,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&o&&this._releaseTask(r,o)}),tA.set(e,{key:i,promise:a}),a}_createGeometry(e){let t=new bt;e.index&&t.setIndex(new mi(e.index.array,1));for(let i=0;i<e.attributes.length;i++){let r=e.attributes[i],o=r.name,s=r.array,a=r.itemSize,l=new mi(s,a);o==="color"&&(this._assignVertexColorSpace(l,r.vertexColorSpace),l.normalized=!(s instanceof Float32Array)),t.setAttribute(o,l)}return t}_assignVertexColorSpace(e,t){if(t!==Zi)return;let i=new he;for(let r=0,o=e.count;r<o;r++)i.fromBufferAttribute(e,r),ui.toWorkingColorSpace(i,Zi),e.setXYZ(r,i.r,i.g,i.b)}_loadLibrary(e,t){let i=new Wn(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,o)=>{i.load(e,r,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{let r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);let o=xte.toString(),s=["/* draco decoder */",r,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(o){let s=o.data;switch(s.type){case"decode":r._callbacks[s.id].resolve(s);break;case"error":r._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,o){return r._taskLoad>o._taskLoad?-1:1});let i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function xte(){let n,e;onmessage=function(s){let a=s.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(d){n.onModuleLoaded=function(u){d({draco:u})},DracoDecoderModule(n)});break;case"decode":let l=a.buffer,c=a.taskConfig;e.then(d=>{let u=d.draco,h=new u.Decoder;try{let f=t(u,h,new Int8Array(l),c),m=f.attributes.map(_=>_.array.buffer);f.index&&m.push(f.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:f},m)}catch(f){console.error(f),self.postMessage({type:"error",id:a.id,error:f.message})}finally{u.destroy(h)}});break}};function t(s,a,l,c){let d=c.attributeIDs,u=c.attributeTypes,h,f,m=a.GetEncodedGeometryType(l);if(m===s.TRIANGULAR_MESH)h=new s.Mesh,f=a.DecodeArrayToMesh(l,l.byteLength,h);else if(m===s.POINT_CLOUD)h=new s.PointCloud,f=a.DecodeArrayToPointCloud(l,l.byteLength,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());let _={index:null,attributes:[]};for(let g in d){let p=self[u[g]],b,v;if(c.useUniqueIDs)v=d[g],b=a.GetAttributeByUniqueId(h,v);else{if(v=a.GetAttributeId(h,s[d[g]]),v===-1)continue;b=a.GetAttribute(h,v)}let y=r(s,a,h,g,p,b);g==="color"&&(y.vertexColorSpace=c.vertexColorSpace),_.attributes.push(y)}return m===s.TRIANGULAR_MESH&&(_.index=i(s,a,h)),s.destroy(h),_}function i(s,a,l){let d=l.num_faces()*3,u=d*4,h=s._malloc(u);a.GetTrianglesUInt32Array(l,u,h);let f=new Uint32Array(s.HEAPF32.buffer,h,d).slice();return s._free(h),{array:f,itemSize:1}}function r(s,a,l,c,d,u){let h=u.num_components(),m=l.num_points()*h,_=m*d.BYTES_PER_ELEMENT,g=o(s,d),p=s._malloc(_);a.GetAttributeDataArrayForAllPoints(l,u,g,_,p);let b=new d(s.HEAPF32.buffer,p,m).slice();return s._free(p),{name:c,array:b,itemSize:h}}function o(s,a){switch(a){case Float32Array:return s.DT_FLOAT32;case Int8Array:return s.DT_INT8;case Int16Array:return s.DT_INT16;case Int32Array:return s.DT_INT32;case Uint8Array:return s.DT_UINT8;case Uint16Array:return s.DT_UINT16;case Uint32Array:return s.DT_UINT32}}}var io=class extends dp{load(...e){return this.createLoaderInstance().load(...e)}};var qc=(()=>{class n extends io{constructor(){super(...arguments),this.clazz=eM,this.decoderPath="",this.reuseInstance=!0}setDecoderPath(t){this.decoderPath=t}setDecoderConfig(t){this.decoderConfig=t}setWorkerLimit(t){this.workerLimit=t}setReuseInstance(t){this.reuseInstance=t}createLoaderInstance(){if(this.reuseInstance&&this.instance)return this.instance;let t=super.createLoaderInstance();return t.setDecoderPath(this.decoderPath),this.decoderConfig&&t.setDecoderConfig(this.decoderConfig),this.workerLimit&&t.setWorkerLimit(this.workerLimit),this.reuseInstance&&(this.instance=t),t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Mte=(()=>{class n extends up{constructor(t){super(),this.dracoLoaderService=t,this.clazz=Kw}createLoaderInstance(){let t=super.createLoaderInstance();return t.setDRACOLoader(this.dracoLoaderService.createLoaderInstance()),t}static{this.\u0275fac=function(i){return new(i||n)(He(qc))}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Yn=(()=>{class n extends hp{constructor(t,i,r){super(t,i),this.host=t,this.zone=i,this.service=r}getRefFromResponse(t){return t.scene}static{this.\u0275fac=function(i){return new(i||n)(be(ue,1),be(nt),be(Mte))}}static{this.\u0275dir=Ue({type:n,selectors:[["","loadGLTF",""]],standalone:!1,features:[q]})}}return n})();var Xc=(()=>{class n{constructor(t,i){this.engineService=t,this.animationLoopService=i}get beforeRender(){return this.engineService.beforeRender$}get onResize(){return this.engineService.resize$}set renderOnDemand(t){t?this.animationLoopService.stop():this.animationLoopService.start()}get renderOnDemand(){return!this.animationLoopService.isActive()}static{this.\u0275fac=function(i){return new(i||n)(be(So),be(Ua))}}static{this.\u0275dir=Ue({type:n,selectors:[["","beforeRender",""],["","onResize",""],["","renderOnDemand",""]],inputs:{renderOnDemand:"renderOnDemand"},outputs:{beforeRender:"beforeRender",onResize:"onResize"},standalone:!1})}}return n})();var t3=(()=>{class n{constructor(){this.assetPath=pn+"RobotExpressive.glb",this.states=["Idle","Walking","Running","Dance","Death","Sitting","Standing"],this.emotes=["Jump","Yes","No","Wave","Punch","ThumbsUp"],this.actions={}}onInit(t){this.animationMixer=new Lf(t.scene),t.scene.traverse(i=>{i.isMesh&&(i.castShadow=!0,i.receiveShadow=!0)});for(let i of t.animations){let r=this.animationMixer.clipAction(i);this.actions[i.name]=r,(this.emotes.indexOf(i.name)>=0||this.states.indexOf(i.name)>=4)&&(r.clampWhenFinished=!0,r.loop=eb)}this.activeAction=this.actions.Walking,this.activeAction.play()}beforeRender(t){this.animationMixer&&this.animationMixer.update(t.delta)}fadeToAction(t,i){this.previousAction=this.activeAction,this.activeAction=this.actions[t],this.previousAction&&this.previousAction!==this.activeAction&&this.previousAction.fadeOut(i),this.activeAction.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(i).play()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["app-robot"]],standalone:!1,decls:1,vars:2,consts:[["loadGLTF","",3,"onLoaded","beforeRender","url","castShadow"]],template:function(i,r){i&1&&(U(0,"th-mesh",0),De("onLoaded",function(s){return r.onInit(s)})("beforeRender",function(s){return r.beforeRender(s)}),Q()),i&2&&O("url",r.assetPath)("castShadow",!0)},dependencies:[Ci,Yn,Xc],encapsulation:2,changeDetection:0})}}return n})();var iM=(()=>{class n{transform(t){return new ou(...t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=rs({name:"fog",type:n,pure:!0,standalone:!1})}}return n})();var Tte=["gridHelper"],Rte=()=>["#e0e0e0"],Cte=()=>["#e0e0e0",20,100],Ete=()=>[45,2,.25,100],Dte=n=>[n,5,10],Ate=()=>[0,2,0],Ite=()=>["#ffffff","#444444"],Pte=()=>[0,20,0],Fte=()=>["#ffffff"],kte=()=>[0,20,10],Ote=n=>[n,0,0],jte=()=>[2e3,2e3],Nte=()=>({color:"#999999",depthWrite:!1}),Lte=()=>[200,40,"#000000","#000000"],n3=(()=>{class n{constructor(){this.Math=Math}ngAfterViewInit(){let t=this.gridHelper?.objRef?.material;t&&(t.opacity=.2,t.transparent=!0)}onBeforeRender(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["app-animation-example"]],viewQuery:function(i,r){if(i&1&&Gt(Tte,7),i&2){let o;ct(o=dt())&&(r.gridHelper=o.first)}},standalone:!1,decls:12,vars:37,consts:[["gridHelper",""],[3,"onRender","thStats","shadow"],[3,"background","fog"],[3,"args","position","lookAt"],[3,"args","position","intensity"],[3,"args","position","castShadow","intensity"],[3,"rotation","receiveShadow"],[3,"args"],[3,"args","receiveShadow"]],template:function(i,r){if(i&1){let o=Xt();U(0,"th-canvas",1),De("onRender",function(){return ht(o),ft(r.onBeforeRender())}),U(1,"th-scene",2),Bi(2,"fog"),ae(3,"th-perspectiveCamera",3)(4,"th-hemisphereLight",4)(5,"th-directionalLight",5),U(6,"th-mesh",6),ae(7,"th-planeGeometry",7)(8,"th-meshPhongMaterial",7),Q(),ae(9,"th-gridHelper",8,0)(11,"app-robot"),Q()()}i&2&&(O("thStats",!0)("shadow",!0),k(),O("background",Z(22,Rte))("fog",Yi(2,20,Z(23,Cte))),k(2),O("args",Z(24,Ete))("position",vt(25,Dte,-5))("lookAt",Z(27,Ate)),k(),O("args",Z(28,Ite))("position",Z(29,Pte))("intensity",3),k(),O("args",Z(30,Fte))("position",Z(31,kte))("castShadow",!0)("intensity",3),k(),O("rotation",vt(32,Ote,-.5*r.Math.PI))("receiveShadow",!0),k(),O("args",Z(34,jte)),k(),O("args",Z(35,Nte)),k(),O("args",Z(36,Lte))("receiveShadow",!0))},dependencies:[Zt,Vr,mr,ip,Ci,Lt,Mo,bs,Dt,On,t3,iM],encapsulation:2,changeDetection:0})}}return n})();var Bte=["*"],Ii=(()=>{class n extends ia{getType(){return _u}get isAmbientLight(){return this._objRef?.isAmbientLight}get type(){return this._objRef?.type}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-ambientLight"]],standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)}]),q],ngContentSelectors:Bte,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Ute=["*"],za=(()=>{class n extends fn{getType(){return on}get isMeshBasicMaterial(){return this._objRef?.isMeshBasicMaterial}set color(t){this._objRef&&(this._objRef.color=me(this._objRef.color,t))}get color(){return this._objRef?.color}set map(t){this._objRef&&(this._objRef.map=t)}get map(){return this._objRef?.map}set lightMap(t){this._objRef&&(this._objRef.lightMap=t)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(t){this._objRef&&(this._objRef.lightMapIntensity=t)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set aoMap(t){this._objRef&&(this._objRef.aoMap=t)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(t){this._objRef&&(this._objRef.aoMapIntensity=t)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set specularMap(t){this._objRef&&(this._objRef.specularMap=t)}get specularMap(){return this._objRef?.specularMap}set alphaMap(t){this._objRef&&(this._objRef.alphaMap=t)}get alphaMap(){return this._objRef?.alphaMap}set envMap(t){this._objRef&&(this._objRef.envMap=t)}get envMap(){return this._objRef?.envMap}set envMapRotation(t){this._objRef&&(this._objRef.envMapRotation=me(this._objRef.envMapRotation,t))}get envMapRotation(){return this._objRef?.envMapRotation}set combine(t){this._objRef&&(this._objRef.combine=t)}get combine(){return this._objRef?.combine}set reflectivity(t){this._objRef&&(this._objRef.reflectivity=t)}get reflectivity(){return this._objRef?.reflectivity}set refractionRatio(t){this._objRef&&(this._objRef.refractionRatio=t)}get refractionRatio(){return this._objRef?.refractionRatio}set wireframe(t){this._objRef&&(this._objRef.wireframe=t)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(t){this._objRef&&(this._objRef.wireframeLinewidth=t)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(t){this._objRef&&(this._objRef.wireframeLinecap=t)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(t){this._objRef&&(this._objRef.wireframeLinejoin=t)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set fog(t){this._objRef&&(this._objRef.fog=t)}get fog(){return this._objRef?.fog}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-meshBasicMaterial"]],inputs:{color:"color",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",specularMap:"specularMap",alphaMap:"alphaMap",envMap:"envMap",envMapRotation:"envMapRotation",combine:"combine",reflectivity:"reflectivity",refractionRatio:"refractionRatio",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",fog:"fog"},standalone:!1,features:[J([{provide:fn,useExisting:_e(()=>n)}]),q],ngContentSelectors:Ute,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Vte=["*"],Pu=(()=>{class n extends ni{getType(){return Qi}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-boxGeometry"]],standalone:!1,features:[J([{provide:ni,useExisting:_e(()=>n)}]),q],ngContentSelectors:Vte,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var zte=()=>({color:"purple"}),Hte=()=>[75,2,.1,1e3],Gte=()=>[1,1,5],r3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["app-basic-example"]],standalone:!1,decls:7,vars:6,consts:[[3,"args"],[3,"args","position"]],template:function(i,r){i&1&&(U(0,"th-canvas")(1,"th-scene")(2,"th-mesh"),ae(3,"th-boxGeometry")(4,"th-meshBasicMaterial",0),Q(),ae(5,"th-ambientLight")(6,"th-perspectiveCamera",1),Q()()),i&2&&(k(4),O("args",Z(3,zte)),k(2),O("args",Z(4,Hte))("position",Z(5,Gte)))},dependencies:[Zt,Ii,Ci,Lt,za,Pu,Dt],encapsulation:2,changeDetection:0})}}return n})();var o3={type:"change"},oA={type:"start"},a3={type:"end"},nM=new zs,s3=new ir,Wte=Math.cos(70*it.DEG2RAD),sr=new w,To=2*Math.PI,Ji={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},rA=1e-6,fp=class extends pr{constructor(e,t=null){super(e,t),this.state=Ji.NONE,this.enabled=!0,this.target=new w,this.cursor=new w,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:ln.ROTATE,MIDDLE:ln.DOLLY,RIGHT:ln.PAN},this.touches={ONE:Lr.ROTATE,TWO:Lr.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new w,this._lastQuaternion=new Yt,this._lastTargetPosition=new w,this._quat=new Yt().setFromUnitVectors(e.up,new w(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Al,this._sphericalDelta=new Al,this._scale=1,this._panOffset=new w,this._rotateStart=new V,this._rotateEnd=new V,this._rotateDelta=new V,this._panStart=new V,this._panEnd=new V,this._panDelta=new V,this._dollyStart=new V,this._dollyEnd=new V,this._dollyDelta=new V,this._dollyDirection=new w,this._mouse=new V,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=qte.bind(this),this._onPointerDown=$te.bind(this),this._onPointerUp=Xte.bind(this),this._onContextMenu=tie.bind(this),this._onMouseWheel=Qte.bind(this),this._onKeyDown=Kte.bind(this),this._onTouchStart=Jte.bind(this),this._onTouchMove=eie.bind(this),this._onMouseDown=Yte.bind(this),this._onMouseMove=Zte.bind(this),this._interceptControlDown=iie.bind(this),this._interceptControlUp=nie.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(o3),this.update(),this.state=Ji.NONE}update(e=null){let t=this.object.position;sr.copy(t).sub(this.target),sr.applyQuaternion(this._quat),this._spherical.setFromVector3(sr),this.autoRotate&&this.state===Ji.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(i)&&isFinite(r)&&(i<-Math.PI?i+=To:i>Math.PI&&(i-=To),r<-Math.PI?r+=To:r>Math.PI&&(r-=To),i<=r?this._spherical.theta=Math.max(i,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+r)/2?Math.max(i,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let o=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let s=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),o=s!=this._spherical.radius}if(sr.setFromSpherical(this._spherical),sr.applyQuaternion(this._quatInverse),t.copy(this.target).add(sr),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let s=null;if(this.object.isPerspectiveCamera){let a=sr.length();s=this._clampDistance(a*this._scale);let l=a-s;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),o=!!l}else if(this.object.isOrthographicCamera){let a=new w(this._mouse.x,this._mouse.y,0);a.unproject(this.object);let l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),o=l!==this.object.zoom;let c=new w(this._mouse.x,this._mouse.y,0);c.unproject(this.object),this.object.position.sub(c).add(a),this.object.updateMatrixWorld(),s=sr.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;s!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(s).add(this.object.position):(nM.origin.copy(this.object.position),nM.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(nM.direction))<Wte?this.object.lookAt(this.target):(s3.setFromNormalAndCoplanarPoint(this.object.up,this.target),nM.intersectPlane(s3,this.target))))}else if(this.object.isOrthographicCamera){let s=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),s!==this.object.zoom&&(this.object.updateProjectionMatrix(),o=!0)}return this._scale=1,this._performCursorZoom=!1,o||this._lastPosition.distanceToSquared(this.object.position)>rA||8*(1-this._lastQuaternion.dot(this.object.quaternion))>rA||this._lastTargetPosition.distanceToSquared(this.target)>rA?(this.dispatchEvent(o3),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?To/60*this.autoRotateSpeed*e:To/60/60*this.autoRotateSpeed}_getZoomScale(e){let t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){sr.setFromMatrixColumn(t,0),sr.multiplyScalar(-e),this._panOffset.add(sr)}_panUp(e,t){this.screenSpacePanning===!0?sr.setFromMatrixColumn(t,1):(sr.setFromMatrixColumn(t,0),sr.crossVectors(this.object.up,sr)),sr.multiplyScalar(e),this._panOffset.add(sr)}_pan(e,t){let i=this.domElement;if(this.object.isPerspectiveCamera){let r=this.object.position;sr.copy(r).sub(this.target);let o=sr.length();o*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*o/i.clientHeight,this.object.matrix),this._panUp(2*t*o/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let i=this.domElement.getBoundingClientRect(),r=e-i.left,o=t-i.top,s=i.width,a=i.height;this._mouse.x=r/s*2-1,this._mouse.y=-(o/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;this._rotateLeft(To*this._rotateDelta.x/t.clientHeight),this._rotateUp(To*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(To*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-To*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(To*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-To*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._rotateStart.set(i,r)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panStart.set(i,r)}}_handleTouchStartDolly(e){let t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(i*i+r*r);this._dollyStart.set(0,o)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{let i=this._getSecondPointerPosition(e),r=.5*(e.pageX+i.x),o=.5*(e.pageY+i.y);this._rotateEnd.set(r,o)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;this._rotateLeft(To*this._rotateDelta.x/t.clientHeight),this._rotateUp(To*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panEnd.set(i,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){let t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(i*i+r*r);this._dollyEnd.set(0,o),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let s=(e.pageX+t.x)*.5,a=(e.pageY+t.y)*.5;this._updateZoomParameters(s,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new V,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){let t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){let t=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}};function $te(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function qte(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function Xte(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(a3),this.state=Ji.NONE;break;case 1:let e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function Yte(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case ln.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=Ji.DOLLY;break;case ln.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Ji.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Ji.ROTATE}break;case ln.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Ji.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Ji.PAN}break;default:this.state=Ji.NONE}this.state!==Ji.NONE&&this.dispatchEvent(oA)}function Zte(n){switch(this.state){case Ji.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case Ji.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case Ji.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function Qte(n){this.enabled===!1||this.enableZoom===!1||this.state!==Ji.NONE||(n.preventDefault(),this.dispatchEvent(oA),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(a3))}function Kte(n){this.enabled!==!1&&this._handleKeyDown(n)}function Jte(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case Lr.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=Ji.TOUCH_ROTATE;break;case Lr.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=Ji.TOUCH_PAN;break;default:this.state=Ji.NONE}break;case 2:switch(this.touches.TWO){case Lr.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=Ji.TOUCH_DOLLY_PAN;break;case Lr.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=Ji.TOUCH_DOLLY_ROTATE;break;default:this.state=Ji.NONE}break;default:this.state=Ji.NONE}this.state!==Ji.NONE&&this.dispatchEvent(oA)}function eie(n){switch(this._trackPointer(n),this.state){case Ji.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case Ji.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case Ji.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case Ji.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=Ji.NONE}}function tie(n){this.enabled!==!1&&n.preventDefault()}function iie(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function nie(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var cn=(()=>{class n extends to{set domElement(t){this._objRef&&(this._objRef.domElement=t)}get domElement(){return this._objRef?.domElement}set object(t){this._objRef&&(this._objRef.object=t)}get object(){return this._objRef?.object}set enabled(t){this._objRef&&(this._objRef.enabled=t)}get enabled(){return this._objRef?.enabled}constructor(t,i){super(),this._camera=t,this.canvas=i,this.renderLoop=E(Ua)}createThreeInstance(t){t||(t=[this._camera.objRef,this.canvas?.elementRef.nativeElement]);let i=super.createThreeInstance(t);return this.patchDispatchEvent(i),this.subscribeControlUpdater(i),i}patchDispatchEvent(t){if(t.dispatchEvent){this.origDispatchEventMethod=t.dispatchEvent;let i=this.origDispatchEventMethod;t.dispatchEvent=r=>{i.call(t,r),this.renderLoop.requestAnimationFrame()}}}ngOnDestroy(){super.ngOnDestroy(),this.unpatchDispatchEvent(),this.unsubscribeControlUpdater()}unpatchDispatchEvent(){this.origDispatchEventMethod&&this._objRef&&(this._objRef.dispatchEvent=this.origDispatchEventMethod)}subscribeControlUpdater(t){t.update!==void 0&&(this.beforeRenderSubscription=this.renderLoop.beforeRender$.subscribe(i=>{t.update(i.delta)}))}unsubscribeControlUpdater(){this.beforeRenderSubscription&&this.beforeRenderSubscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)(be(ue),be(Dt))}}static{this.\u0275cmp=j({type:n,selectors:[["th-abs-control"]],inputs:{domElement:"domElement",object:"object",enabled:"enabled"},standalone:!1,features:[q],decls:0,vars:0,template:function(i,r){},encapsulation:2,changeDetection:0})}}return n})();var rie=["*"],jn=(()=>{class n extends cn{getType(){return fp}set target(t){this._objRef&&(this._objRef.target=me(this._objRef.target,t))}get target(){return this._objRef?.target}set cursor(t){this._objRef&&(this._objRef.cursor=me(this._objRef.cursor,t))}get cursor(){return this._objRef?.cursor}set minDistance(t){this._objRef&&(this._objRef.minDistance=t)}get minDistance(){return this._objRef?.minDistance}set maxDistance(t){this._objRef&&(this._objRef.maxDistance=t)}get maxDistance(){return this._objRef?.maxDistance}set minZoom(t){this._objRef&&(this._objRef.minZoom=t)}get minZoom(){return this._objRef?.minZoom}set maxZoom(t){this._objRef&&(this._objRef.maxZoom=t)}get maxZoom(){return this._objRef?.maxZoom}set minTargetRadius(t){this._objRef&&(this._objRef.minTargetRadius=t)}get minTargetRadius(){return this._objRef?.minTargetRadius}set maxTargetRadius(t){this._objRef&&(this._objRef.maxTargetRadius=t)}get maxTargetRadius(){return this._objRef?.maxTargetRadius}set minPolarAngle(t){this._objRef&&(this._objRef.minPolarAngle=t)}get minPolarAngle(){return this._objRef?.minPolarAngle}set maxPolarAngle(t){this._objRef&&(this._objRef.maxPolarAngle=t)}get maxPolarAngle(){return this._objRef?.maxPolarAngle}set minAzimuthAngle(t){this._objRef&&(this._objRef.minAzimuthAngle=t)}get minAzimuthAngle(){return this._objRef?.minAzimuthAngle}set maxAzimuthAngle(t){this._objRef&&(this._objRef.maxAzimuthAngle=t)}get maxAzimuthAngle(){return this._objRef?.maxAzimuthAngle}set enableDamping(t){this._objRef&&(this._objRef.enableDamping=t)}get enableDamping(){return this._objRef?.enableDamping}set dampingFactor(t){this._objRef&&(this._objRef.dampingFactor=t)}get dampingFactor(){return this._objRef?.dampingFactor}set enableZoom(t){this._objRef&&(this._objRef.enableZoom=t)}get enableZoom(){return this._objRef?.enableZoom}set zoomSpeed(t){this._objRef&&(this._objRef.zoomSpeed=t)}get zoomSpeed(){return this._objRef?.zoomSpeed}set enableRotate(t){this._objRef&&(this._objRef.enableRotate=t)}get enableRotate(){return this._objRef?.enableRotate}set rotateSpeed(t){this._objRef&&(this._objRef.rotateSpeed=t)}get rotateSpeed(){return this._objRef?.rotateSpeed}set enablePan(t){this._objRef&&(this._objRef.enablePan=t)}get enablePan(){return this._objRef?.enablePan}set panSpeed(t){this._objRef&&(this._objRef.panSpeed=t)}get panSpeed(){return this._objRef?.panSpeed}set screenSpacePanning(t){this._objRef&&(this._objRef.screenSpacePanning=t)}get screenSpacePanning(){return this._objRef?.screenSpacePanning}set keyPanSpeed(t){this._objRef&&(this._objRef.keyPanSpeed=t)}get keyPanSpeed(){return this._objRef?.keyPanSpeed}set zoomToCursor(t){this._objRef&&(this._objRef.zoomToCursor=t)}get zoomToCursor(){return this._objRef?.zoomToCursor}set autoRotate(t){this._objRef&&(this._objRef.autoRotate=t)}get autoRotate(){return this._objRef?.autoRotate}set autoRotateSpeed(t){this._objRef&&(this._objRef.autoRotateSpeed=t)}get autoRotateSpeed(){return this._objRef?.autoRotateSpeed}set keys(t){this._objRef&&(this._objRef.keys=t)}get keys(){return this._objRef?.keys}set mouseButtons(t){this._objRef&&(this._objRef.mouseButtons=t)}get mouseButtons(){return this._objRef?.mouseButtons}set touches(t){this._objRef&&(this._objRef.touches=t)}get touches(){return this._objRef?.touches}set target0(t){this._objRef&&(this._objRef.target0=me(this._objRef.target0,t))}get target0(){return this._objRef?.target0}set position0(t){this._objRef&&(this._objRef.position0=me(this._objRef.position0,t))}get position0(){return this._objRef?.position0}set zoom0(t){this._objRef&&(this._objRef.zoom0=t)}get zoom0(){return this._objRef?.zoom0}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-orbitControls"]],inputs:{target:"target",cursor:"cursor",minDistance:"minDistance",maxDistance:"maxDistance",minZoom:"minZoom",maxZoom:"maxZoom",minTargetRadius:"minTargetRadius",maxTargetRadius:"maxTargetRadius",minPolarAngle:"minPolarAngle",maxPolarAngle:"maxPolarAngle",minAzimuthAngle:"minAzimuthAngle",maxAzimuthAngle:"maxAzimuthAngle",enableDamping:"enableDamping",dampingFactor:"dampingFactor",enableZoom:"enableZoom",zoomSpeed:"zoomSpeed",enableRotate:"enableRotate",rotateSpeed:"rotateSpeed",enablePan:"enablePan",panSpeed:"panSpeed",screenSpacePanning:"screenSpacePanning",keyPanSpeed:"keyPanSpeed",zoomToCursor:"zoomToCursor",autoRotate:"autoRotate",autoRotateSpeed:"autoRotateSpeed",keys:"keys",mouseButtons:"mouseButtons",touches:"touches",target0:"target0",position0:"position0",zoom0:"zoom0"},standalone:!1,features:[J([{provide:cn,useExisting:_e(()=>n)}]),q],ngContentSelectors:rie,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var oie=["*"],gr=(()=>{class n extends ia{getType(){return El}get isPointLight(){return this._objRef?.isPointLight}set type(t){this._objRef&&(this._objRef.type=t)}get type(){return this._objRef?.type}set intensity(t){this._objRef&&(this._objRef.intensity=t)}get intensity(){return this._objRef?.intensity}set distance(t){this._objRef&&(this._objRef.distance=t)}get distance(){return this._objRef?.distance}set castShadow(t){this._objRef&&(this._objRef.castShadow=t)}get castShadow(){return this._objRef?.castShadow}set decay(t){this._objRef&&(this._objRef.decay=t)}get decay(){return this._objRef?.decay}set shadow(t){this._objRef&&(this._objRef.shadow=t)}get shadow(){return this._objRef?.shadow}set power(t){this._objRef&&(this._objRef.power=t)}get power(){return this._objRef?.power}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-pointLight"]],inputs:{type:"type",intensity:"intensity",distance:"distance",castShadow:"castShadow",decay:"decay",shadow:"shadow",power:"power"},standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)}]),q],ngContentSelectors:oie,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var ys=(()=>{class n{get onMouseEnter(){return this.mouseEnter||(this.mouseEnter=new rt),this.mouseEnter}get onMouseExit(){return this.mouseExit||(this.mouseExit=new rt),this.mouseExit}get onClick(){return this.click||(this.click=new rt),this.click}get onPointerDown(){return this.pointerDown||(this.pointerDown=new rt),this.pointerDown}get onPointerUp(){return this.pointerUp||(this.pointerUp=new rt),this.pointerUp}constructor(t,i){this.host=t,this.raycasterService=i,this.emitOnMouseEnter=this.emitOnMouseEnter.bind(this),this.emitOnMouseExit=this.emitOnMouseExit.bind(this),this.emitOnClick=this.emitOnClick.bind(this)}ngAfterViewInit(){this.subscribeEvents()}subscribeEvents(){this.raycasterService.addEventTarget(this)}unSubscribeEvents(){this.raycasterService.removeEventTarget(this)}emitOnMouseExit(){this.mouseExit?.emit({component:this.host,type:"mouseExit"})}emitOnMouseEnter(t){this.mouseEnter?.emit(t)}emitOnClick(t){this.click?.emit(t)}emitOnPointerDown(t){this.pointerDown?.emit(t)}emitOnPointerUp(t){this.pointerUp?.emit(t)}ngOnDestroy(){this.unSubscribeEvents()}static{this.\u0275fac=function(i){return new(i||n)(be(ue,1),be(Ul))}}static{this.\u0275dir=Ue({type:n,selectors:[["","onClick",""],["","onMouseEnter",""],["","onMouseExit",""],["","onPointerDown",""],["","onPointerUp",""]],outputs:{onMouseEnter:"onMouseEnter",onMouseExit:"onMouseExit",onClick:"onClick",onPointerDown:"onPointerDown",onPointerUp:"onPointerUp"},standalone:!1})}}return n})();var sie=()=>[2,2,2],aie=()=>[1,1,1],lie=()=>[10,10],l3=()=>[10,10,10],cie=()=>[45,2,.1,100],die=()=>[0,0,0],c3=(()=>{class n{constructor(){this.selected=!1,this.glbPath=`${pn}DamagedHelmet.glb`}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["app-controls-example"]],standalone:!1,decls:8,vars:17,consts:[[3,"thStats"],[3,"intensity"],["loadGLTF","",3,"onClick","url","scale"],[3,"args"],[3,"position","intensity"],[3,"args","position","lookAt"]],template:function(i,r){i&1&&(U(0,"th-canvas",0)(1,"th-scene"),ae(2,"th-ambientLight",1),U(3,"th-object3D",2),De("onClick",function(){return r.selected=!r.selected}),Q(),ae(4,"th-gridHelper",3)(5,"th-pointLight",4),U(6,"th-perspectiveCamera",5),ae(7,"th-orbitControls"),Q()()()),i&2&&(O("thStats",!0),k(2),O("intensity",3),k(),O("url",r.glbPath)("scale",r.selected?Z(10,sie):Z(11,aie)),k(),O("args",Z(12,lie)),k(),O("position",Z(13,l3))("intensity",3),k(),O("args",Z(14,cie))("position",Z(15,l3))("lookAt",Z(16,die)))},dependencies:[jn,Zt,ue,Vr,Ii,gr,Lt,Dt,Yn,ys,On],encapsulation:2,changeDetection:0})}}return n})();var uie=()=>[0,1,0],hie=()=>[10,10],d3=()=>[10,10,10],fie=()=>[45,2,.1,100],pie=()=>[0,0,0],u3=(()=>{class n{constructor(t){this.cdref=t,this.modelScale=[1,1,1],this.rotation=[0,0,0],this.modelUrl1=`${pn}DamagedHelmet.glb`,this.modelUrl2=`${pn}BoomBox.glb`,this.modelUrl=this.toggleModel(),this.intervalHandle=window.setInterval(()=>this.toggleModel(),3e3)}toggleModel(){return this.modelUrl!==this.modelUrl1?this.modelUrl=this.modelUrl1:this.modelUrl=this.modelUrl2,this.cdref.markForCheck(),this.modelUrl}onLoaded(){this.modelUrl!==this.modelUrl1?this.modelScale=[100,100,100]:this.modelScale=[1,1,1]}onRefChange(t){}onBeforeRender(){this.rotation=[0,this.rotation[1]+.01,0]}ngOnDestroy(){window.clearInterval(this.intervalHandle)}static{this.\u0275fac=function(i){return new(i||n)(be(un))}}static{this.\u0275cmp=j({type:n,selectors:[["app-dynamic-loader-example"]],standalone:!1,decls:7,vars:17,consts:[[3,"onRender"],[3,"intensity"],["loadGLTF","",3,"onLoaded","objRef$","url","scale","rotation","position"],[3,"args"],[3,"position","intensity"],[3,"args","position","lookAt"]],template:function(i,r){i&1&&(U(0,"th-canvas",0),De("onRender",function(){return r.onBeforeRender()}),U(1,"th-scene"),ae(2,"th-ambientLight",1),U(3,"th-object3D",2),De("onLoaded",function(){return r.onLoaded()})("objRef$",function(s){return r.onRefChange(s)}),Q(),ae(4,"th-gridHelper",3)(5,"th-pointLight",4)(6,"th-perspectiveCamera",5),Q()()),i&2&&(k(2),O("intensity",3),k(),O("url",r.modelUrl)("scale",r.modelScale)("rotation",r.rotation)("position",Z(11,uie)),k(),O("args",Z(12,hie)),k(),O("position",Z(13,d3))("intensity",3),k(),O("args",Z(14,fie))("position",Z(15,d3))("lookAt",Z(16,pie)))},dependencies:[Zt,ue,Vr,Ii,gr,Lt,Dt,Yn],encapsulation:2,changeDetection:0})}}return n})();var h3=(()=>{class n{transform(t,i){return t.bind(i)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=rs({name:"bind",type:n,pure:!0,standalone:!1})}}return n})();var gie=()=>[10,10],f3=()=>[10,10,10],_ie=()=>[45,2,.1,100],bie=()=>[0,0,0],vie=(n,e)=>({change:n,end:e});function yie(n,e){if(n&1&&(U(0,"li"),It(1),Q()),n&2){let t=e.$implicit;k(),va(" ",t," ")}}var p3=(()=>{class n{constructor(t){this.cdref=t,this.id="CID",this.changes=[],this.rotation=[0,0,0],this.position=[0,1,0],this.assetPath=`${pn}DamagedHelmet.glb`,this.onOrbitControlEnd=()=>{this.pushToChangesArray(`${this.id}: orbit control end`)},window.setInterval(()=>{this.rotation=[0,this.rotation[1]+.05,0],this.cdref.markForCheck()},1500),window.setInterval(()=>{this.position=[0,(this.position[1]+1)%5,0],this.cdref.markForCheck()},3e3)}logUpdates(t){this.pushToChangesArray(Object.keys(t).toString())}onLoaded(){this.changes.push("Model loaded")}onOrbitControlChange(){this.pushToChangesArray(`${this.id}: orbit control change`)}pushToChangesArray(t){this.changes.length>=20&&this.changes.shift(),this.changes.push(t)}static{this.\u0275fac=function(i){return new(i||n)(be(un))}}static{this.\u0275cmp=j({type:n,selectors:[["app-events-example"]],standalone:!1,decls:15,vars:22,consts:[[3,"intensity"],["loadGLTF","",3,"onUpdate","onLoaded","url","rotation","position"],[3,"args"],[3,"position","intensity"],[3,"args","position","lookAt"],[3,"threeEvents"],[1,"change-list"]],template:function(i,r){i&1&&(U(0,"th-canvas")(1,"th-scene"),ae(2,"th-ambientLight",0),U(3,"th-object3D",1),De("onUpdate",function(s){return r.logUpdates(s)})("onLoaded",function(){return r.onLoaded()}),Q(),ae(4,"th-gridHelper",2)(5,"th-pointLight",3),U(6,"th-perspectiveCamera",4),ae(7,"th-orbitControls",5),Bi(8,"bind"),Q()()(),U(9,"div",6)(10,"h1"),It(11,"Updates"),Q(),U(12,"ol"),cr(13,yie,2,1,"li",null,wr),Q()()),i&2&&(k(2),O("intensity",3),k(),O("url",r.assetPath)("rotation",r.rotation)("position",r.position),k(),O("args",Z(14,gie)),k(),O("position",Z(15,f3))("intensity",3),k(),O("args",Z(16,_ie))("position",Z(17,f3))("lookAt",Z(18,bie)),k(),O("threeEvents",zn(19,vie,mN(8,11,r.onOrbitControlChange,r),r.onOrbitControlEnd)),k(6),dr(r.changes))},dependencies:[jn,Zt,ue,Vr,Ii,gr,Lt,Dt,Yn,h3],styles:[".change-list[_ngcontent-%COMP%]{padding:1em;box-shadow:0 4px 8px #0003;transition:.3s}[_nghost-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr)}"],changeDetection:0})}}return n})();var Yc={name:"ngx-three",version:"0.37.0",scripts:{ng:"ng",start:"ng serve",build:"ng build ngx-three","build:prod":"ng build ngx-three --configuration production","build:demo":"ng build ngx-three-demo --configuration production --base-href /ngx-three/",test:"ng test","test-headless":"ng test --watch=false --browsers=ChromeHeadless",lint:"ng lint",e2e:"ng e2e","copy:docs":"(cp README.md dist/ngx-three/ || copy README.md dist\\ngx-three)",package:"ng build --configuration production ngx-three && npm run copy:docs",format:'prettier-eslint --write "{,!(node_modules|dist)/**/}*.{ts,tsx}"'},private:!0,dependencies:{"@angular/animations":"^19.1.7","@angular/cdk":"^19.1.5","@angular/common":"^19.1.7","@angular/compiler":"^19.1.7","@angular/core":"^19.1.7","@angular/forms":"^19.1.7","@angular/material":"^19.1.5","@angular/platform-browser":"^19.1.7","@angular/platform-browser-dynamic":"^19.1.7","@angular/router":"^19.1.7","@stackblitz/sdk":"^1.9.0","@types/webxr":"^0.5.5","highlight.js":"^11.9.0","lil-gui":"^0.18.2","ngx-highlightjs":"^11.0.0-beta.1","normalize.css":"^8.0.1",rxjs:"~7.8.1","simplex-noise":"^4.0.1",three:"~0.171.0",tslib:"^2.6.2","zone.js":"~0.15.0"},devDependencies:{"@angular-devkit/build-angular":"^19.1.8","@angular-eslint/builder":"~18.4.0","@angular-eslint/eslint-plugin":"~18.4.0","@angular-eslint/eslint-plugin-template":"~18.4.0","@angular-eslint/schematics":"^18.4.0","@angular-eslint/template-parser":"~18.4.0","@angular/cli":"^19.1.8","@angular/compiler-cli":"^19.1.7","@types/jasmine":"^4.3.5","@types/node":"^20.5.3","@types/three":"^0.171.0","@typescript-eslint/eslint-plugin":"^7.2.0","@typescript-eslint/parser":"^7.2.0",acorn:">=8",eslint:"^8.57.0","eslint-plugin-import":"^2.28.1","eslint-plugin-jsdoc":"^46.5.0","eslint-plugin-prefer-arrow":"^1.2.3","jasmine-core":"^5.1.0","jasmine-spec-reporter":"^7.0.0",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","ng-packagr":"^19.2.0",prettier:"^3.0.2","prettier-eslint":"^15.0.1","prettier-eslint-cli":"^7.1.0","ts-node":"^10.9.1",typescript:"^5.7.3","utility-types":"^3.10.0"}};var sA=`
import "zone.js";`;function m3(n,e){return xi(this,null,function*(){let t=dA(n),i=mp(t),r=cA(i),o={"package.json":Mie(),"src/index.html":{content:lA(r)},"src/main.ts":{content:aA(i,e)},"src/polyfills.ts":{content:sA},"src/assets.ts":{content:`export const ASSET_PATH = '${Qw}';`}};yield wie(n,o),fetch("https://codesandbox.io/api/v1/sandboxes/define?json=1",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({files:o})}).then(s=>s.json()).then(s=>window.open(`https://codesandbox.io/s/${s.sandbox_id}`,"_blank"))})}function wie(n,e){return Promise.all(n.map(t=>fetch(t).then(i=>xi(this,null,function*(){e[`src/app/${mp(t)}`]={content:yield i.text()}}))))}function Mie(){return{content:{main:"src/main.ts",dependencies:ce({"ngx-three":"latest","@types/three":Yc.devDependencies["@types/three"]},Yc.dependencies),devDependencies:ce({},Yc.devDependencies)}}}function mp(n){return n.replace(/^.*[\\\/]/,"")}function aA(n,e){let t=Tie(e)??Sie(n),i=Rie(e,t);return`
            import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';
            import { NgModule } from '@angular/core';
            import { BrowserModule } from '@angular/platform-browser';
            import { NgxThreeModule } from 'ngx-three';
            import { FormsModule } from '@angular/forms';
            import { ${i} } from './app/${n.replace(".ts","")}';

            @NgModule({
                imports: [
                    BrowserModule,
                    NgxThreeModule,
                    FormsModule
                ],
                providers: [],
                declarations: [${i}],
                bootstrap: [${t}]
            })
            export class AppModule {}

            platformBrowserDynamic().bootstrapModule(AppModule)
            .catch(err => console.log(err));
            `}function lA(n){return`
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>NgxThreeDemo</title>
        <base href="/" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" type="image/x-icon" href="favicon.ico" />
    </head>
    <body>
        <${n}></${n}>
    </body>
    </html>
    `}function Sie(n){return n.replace(".ts","").replace(/(?:^\w|[A-Z]|\b\w)/g,(e,t)=>e.toUpperCase()).replace(/[-.]/g,"")}function cA(n){return"app-"+n.replace(".component.ts","")}function dA(n){for(let e of n)if(e.endsWith(".ts"))return e;return""}function g3(n){for(let e of n)if(e.endsWith(".html"))return e}function Tie(n){if(n&&n.length>0)return n[0]}function Rie(n,e){return n&&n.length>0?n.join(","):e}var Cie="https://stackblitz.com",_3=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],Eie=["project","search","ports","settings"],Die=["light","dark"],Aie=["editor","preview"],b3={clickToLoad:n=>gp("ctl",n),devToolsHeight:n=>v3("devtoolsheight",n),forceEmbedLayout:n=>gp("embed",n),hideDevTools:n=>gp("hidedevtools",n),hideExplorer:n=>gp("hideExplorer",n),hideNavigation:n=>gp("hideNavigation",n),openFile:n=>y3("file",n),showSidebar:n=>Iie("showSidebar",n),sidebarView:n=>uA("sidebarView",n,Eie),startScript:n=>y3("startScript",n),terminalHeight:n=>v3("terminalHeight",n),theme:n=>uA("theme",n,Die),view:n=>uA("view",n,Aie),zenMode:n=>gp("zenMode",n)};function x3(n={}){let e=Object.entries(n).map(([t,i])=>i!=null&&b3.hasOwnProperty(t)?b3[t](i):"").filter(Boolean);return e.length?`?${e.join("&")}`:""}function gp(n,e){return e===!0?`${n}=1`:""}function Iie(n,e){return typeof e=="boolean"?`${n}=${e?"1":"0"}`:""}function v3(n,e){if(typeof e=="number"&&!Number.isNaN(e)){let t=Math.min(100,Math.max(0,e));return`${n}=${encodeURIComponent(Math.round(t))}`}return""}function uA(n,e="",t=[]){return t.includes(e)?`${n}=${encodeURIComponent(e)}`:""}function y3(n,e){return(Array.isArray(e)?e:[e]).filter(i=>typeof i=="string"&&i.trim()!=="").map(i=>`${n}=${encodeURIComponent(i)}`).join("&")}function w3(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function mA(n,e){return`${M3(e)}${n}${x3(e)}`}function gA(n,e){let t={forceEmbedLayout:!0};return e&&typeof e=="object"&&Object.assign(t,e),`${M3(t)}${n}${x3(t)}`}function M3(n={}){return(typeof n.origin=="string"?n.origin:Cie).replace(/\/$/,"")}function _A(n,e,t){if(!e||!n||!n.parentNode)throw new Error("Invalid Element");n.id&&(e.id=n.id),n.className&&(e.className=n.className),Pie(e,t),n.replaceWith(e)}function bA(n){if(typeof n=="string"){let e=document.getElementById(n);if(!e)throw new Error(`Could not find element with id '${n}'`);return e}else if(n instanceof HTMLElement)return n;throw new Error(`Invalid element: ${n}`)}function vA(n){return n&&n.newWindow===!1?"_self":"_blank"}function Pie(n,e={}){let t=Object.hasOwnProperty.call(e,"height")?`${e.height}`:"300",i=Object.hasOwnProperty.call(e,"width")?`${e.width}`:void 0;n.setAttribute("height",t),i?n.setAttribute("width",i):n.setAttribute("style","width:100%;")}var hA=class{constructor(e){this.pending={},this.port=e,this.port.onmessage=this.messageListener.bind(this)}request({type:e,payload:t}){return new Promise((i,r)=>{let o=w3();this.pending[o]={resolve:i,reject:r},this.port.postMessage({type:e,payload:Ft(ce({},t),{__reqid:o})})})}messageListener(e){if(typeof e.data.payload?.__reqid!="string")return;let{type:t,payload:i}=e.data,{__reqid:r,__success:o,__error:s}=i;this.pending[r]&&(o?this.pending[r].resolve(this.cleanResult(i)):this.pending[r].reject(s?`${t}: ${s}`:t),delete this.pending[r])}cleanResult(e){let t=ce({},e);return delete t.__reqid,delete t.__success,delete t.__error,Object.keys(t).length?t:null}},fA=class{constructor(e,t){this.editor={openFile:i=>this._rdc.request({type:"SDK_OPEN_FILE",payload:{path:i}}),setCurrentFile:i=>this._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:i}}),setTheme:i=>this._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:i}}),setView:i=>this._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:i}}),showSidebar:(i=!0)=>this._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:i}})},this.preview={origin:"",getUrl:()=>this._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then(i=>i?.url??null),setUrl:(i="/")=>{if(typeof i!="string"||!i.startsWith("/"))throw new Error(`Invalid argument: expected a path starting with '/', got '${i}'`);return this._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:i}})}},this._rdc=new hA(e),Object.defineProperty(this.preview,"origin",{value:typeof t.previewOrigin=="string"?t.previewOrigin:null,writable:!1})}applyFsDiff(e){let t=i=>i!==null&&typeof i=="object";if(!t(e)||!t(e.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(e.destroy))throw new Error("Invalid diff object: expected diff.destroy to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:e})}getDependencies(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}getFsSnapshot(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}},rM=[],pA=class{constructor(e){this.id=w3(),this.element=e,this.pending=new Promise((t,i)=>{let r=({data:c,ports:d})=>{c?.action==="SDK_INIT_SUCCESS"&&c.id===this.id&&(this.vm=new fA(d[0],c.payload),t(this.vm),s())},o=()=>{this.element.contentWindow?.postMessage({action:"SDK_INIT",id:this.id},"*")};function s(){window.clearInterval(l),window.removeEventListener("message",r)}window.addEventListener("message",r),o();let a=0,l=window.setInterval(()=>{if(this.vm){s();return}if(a>=20){s(),i("Timeout: Unable to establish a connection with the StackBlitz VM"),rM.forEach((c,d)=>{c.id===this.id&&rM.splice(d,1)});return}a++,o()},500)}),rM.push(this)}},Fie=n=>{let e=n instanceof Element?"element":"id";return rM.find(t=>t[e]===n)??null};function kie(n,e){let t=document.createElement("input");return t.type="hidden",t.name=n,t.value=e,t}function Oie(n){return n.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}function S3({template:n,title:e,description:t,dependencies:i,files:r,settings:o}){if(!_3.includes(n)){let c=_3.map(d=>`'${d}'`).join(", ");console.warn(`Unsupported project.template: must be one of ${c}`)}let s=[],a=(c,d,u="")=>{s.push(kie(c,typeof d=="string"?d:u))};a("project[title]",e),typeof t=="string"&&t.length>0&&a("project[description]",t),a("project[template]",n,"javascript"),i&&(n==="node"?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):a("project[dependencies]",JSON.stringify(i))),o&&a("project[settings]",JSON.stringify(o)),Object.entries(r).forEach(([c,d])=>{a(`project[files][${Oie(c)}]`,d)});let l=document.createElement("form");return l.method="POST",l.setAttribute("style","display:none!important;"),l.append(...s),l}function jie(n,e){let t=S3(n);return t.action=gA("/run",e),t.id="sb_run",`<!doctype html>
<html>
<head><title></title></head>
<body>
  ${t.outerHTML}
  <script>document.getElementById('${t.id}').submit();<\/script>
</body>
</html>`}function Nie(n,e){let t=S3(n);t.action=mA("/run",e),t.target=vA(e),document.body.appendChild(t),t.submit(),document.body.removeChild(t)}function oM(n){return n?.contentWindow?(Fie(n)??new pA(n)).pending:Promise.reject("Provided element is not an iframe.")}function Lie(n,e){Nie(n,e)}function Bie(n,e){let t=mA(`/edit/${n}`,e),i=vA(e);window.open(t,i)}function Uie(n,e){let t=mA(`/github/${n}`,e),i=vA(e);window.open(t,i)}function Vie(n,e,t){let i=bA(n),r=jie(e,t),o=document.createElement("iframe");return _A(i,o,t),o.contentDocument?.write(r),oM(o)}function zie(n,e,t){let i=bA(n),r=document.createElement("iframe");return r.src=gA(`/edit/${e}`,t),_A(i,r,t),oM(r)}function Hie(n,e,t){let i=bA(n),r=document.createElement("iframe");return r.src=gA(`/github/${e}`,t),_A(i,r,t),oM(r)}var T3={connect:oM,embedGithubProject:Hie,embedProject:Vie,embedProjectId:zie,openGithubProject:Uie,openProject:Lie,openProjectId:Bie};function R3(n,e){return xi(this,null,function*(){let t=dA(n),i=g3(n),r=mp(t),o=cA(r),s={template:"angular-cli",title:o,description:"ngx-three example "+o,files:{"src/index.html":lA(o),"src/main.ts":aA(r,e),"src/polyfills.ts":sA,"src/assets.ts":`export const ASSET_PATH = '${Qw}';`},dependencies:ce({"ngx-three":"latest","@types/three":Yc.devDependencies["@types/three"]},Yc.dependencies),devDependencies:ce({},Yc.devDependencies)};yield Gie(n,s.files);let a=i?{openFile:`src/app/${mp(i)}`}:void 0;T3.openProject(s,a)})}function Gie(n,e){return Promise.all(n.map(t=>fetch(t).then(i=>xi(this,null,function*(){let r=yield i.text();e[`src/app/${mp(t)}`]=r}))))}var Ga=class{constructor(){this.urls=[],this.fileNames=[]}setUrls(e){this.urls=e,this.fileNames=this.extractFileNames()}extractFileNames(){return this.urls.map(e=>e.split("/").pop()??"")}toStackblitz(e){e?.preventDefault(),R3(this.urls,this.declarations)}toCodeSandbox(e){e?.preventDefault(),m3(this.urls,this.declarations)}getLanguage(e){switch(e.substring(e.lastIndexOf(".")+1)){case"ts":return"typescript";case"js":return"javascript";case"html":return"html";case"css":return"css";default:return"typescript"}}};var wA;try{wA=typeof Intl<"u"&&Intl.v8BreakIterator}catch{wA=!1}var en=(()=>{class n{_platformId=E(is);isBrowser=this._platformId?Dm(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||wA)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var db;function Wie(){if(db==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>db=!0}))}finally{db=db||!1}return db}function _p(n){return Wie()?n:!!n.capture}var ra=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(ra||{}),sM,Fu;function aM(){if(Fu==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Fu=!1,Fu;if("scrollBehavior"in document.documentElement.style)Fu=!0;else{let n=Element.prototype.scrollTo;n?Fu=!/\{\s*\[native code\]\s*\}/.test(n.toString()):Fu=!1}}return Fu}function bp(){if(typeof document!="object"||!document)return ra.NORMAL;if(sM==null){let n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";let t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),sM=ra.NORMAL,n.scrollLeft===0&&(n.scrollLeft=1,sM=n.scrollLeft===0?ra.NEGATED:ra.INVERTED),n.remove()}return sM}var xA;function $ie(){if(xA==null){let n=typeof document<"u"?document.head:null;xA=!!(n&&(n.createShadowRoot||n.attachShadow))}return xA}function C3(n){if($ie()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function xs(n){return n.composedPath?n.composedPath()[0]:n.target}function MA(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function SA(n,e,t,i,r){let o=parseInt(hC.major),s=parseInt(hC.minor);return o>19||o===19&&s>0||o===0&&s===0?n.listen(e,t,i,r):(e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)})}var lM=new WeakMap,Go=(()=>{class n{_appRef;_injector=E(yi);_environmentInjector=E(Jn);load(t){let i=this._appRef=this._appRef||this._injector.get(fo),r=lM.get(i);r||(r={loaders:new Set,refs:[]},lM.set(i,r),i.onDestroy(()=>{lM.get(i)?.refs.forEach(o=>o.destroy()),lM.delete(i)})),r.loaders.has(t)||(r.loaders.add(t),r.refs.push(s0(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),TA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=j({type:n,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(i,r){},styles:[".cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}"],encapsulation:2,changeDetection:0})}return n})();function vp(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function Wo(n){return n!=null&&`${n}`!="false"}function Zc(n,e=0){return qie(n)?Number(n):arguments.length===2?e:0}function qie(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function yp(n){return Array.isArray(n)?n:[n]}function Un(n){return n==null?"":typeof n=="string"?n:`${n}px`}function oa(n){return n instanceof _t?n.nativeElement:n}function Xie(n){if(n.type==="characterData"&&n.target instanceof Comment)return!0;if(n.type==="childList"){for(let e=0;e<n.addedNodes.length;e++)if(!(n.addedNodes[e]instanceof Comment))return!1;for(let e=0;e<n.removedNodes.length;e++)if(!(n.removedNodes[e]instanceof Comment))return!1;return!0}return!1}var E3=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Yie=(()=>{class n{_mutationObserverFactory=E(E3);_observedElements=new Map;_ngZone=E(nt);constructor(){}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){let i=oa(t);return new Ot(r=>{let s=this._observeElement(i).pipe(lt(a=>a.filter(l=>!Xie(l))),vi(a=>!!a.length)).subscribe(a=>{this._ngZone.run(()=>{r.next(a)})});return()=>{s.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){return this._ngZone.runOutsideAngular(()=>{if(this._observedElements.has(t))this._observedElements.get(t).count++;else{let i=new tt,r=this._mutationObserverFactory.create(o=>i.next(o));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream})}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){let{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cM=(()=>{class n{_contentObserver=E(Yie);_elementRef=E(_t);event=new rt;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._disabled?this._unsubscribe():this._subscribe()}_disabled=!1;get debounce(){return this._debounce}set debounce(t){this._debounce=Zc(t),this._subscribe()}_debounce;_currentSubscription=null;constructor(){}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let t=this._contentObserver.observe(this._elementRef);this._currentSubscription=(this.debounce?t.pipe(As(this.debounce)):t).subscribe(this.event)}_unsubscribe(){this._currentSubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[2,"cdkObserveContentDisabled","disabled",Si],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]})}return n})(),dM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({providers:[E3]})}return n})();var I3=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({})}return n})(),D3=new Set,ku,Zie=(()=>{class n{_platform=E(en);_nonce=E(xm,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Kie}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&Qie(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Qie(n,e){if(!D3.has(n))try{ku||(ku=document.createElement("style"),e&&ku.setAttribute("nonce",e),ku.setAttribute("type","text/css"),document.head.appendChild(ku)),ku.sheet&&(ku.sheet.insertRule(`@media ${n} {body{ }}`,0),D3.add(n))}catch(t){console.error(t)}}function Kie(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var uM=(()=>{class n{_mediaMatcher=E(Zie);_zone=E(nt);_queries=new Map;_destroySubject=new tt;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return A3(yp(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let r=A3(yp(t)).map(s=>this._registerQuery(s).observable),o=gd(r);return o=Jl(o.pipe(Er(1)),o.pipe(bd(1),As(0))),o.pipe(lt(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let i=this._mediaMatcher.matchMedia(t),o={observable:new Ot(s=>{let a=l=>this._zone.run(()=>s.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Io(i),lt(({matches:s})=>({query:t,matches:s})),Ri(this._destroySubject)),mql:i};return this._queries.set(t,o),o}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function A3(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}var P3={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var vne=200,EA=class{_letterKeyStream=new tt;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new tt;selectedItem=this._selectedItem;constructor(e,t){let i=typeof t?.debounceInterval=="number"?t.debounceInterval:vne;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(e),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(e){this._selectedItemIndex=e}setItems(e){this._items=e}handleKey(e){let t=e.keyCode;e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(e){this._letterKeyStream.pipe(Xi(t=>this._pressedLetters.push(t)),As(e),vi(()=>this._pressedLetters.length>0),lt(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let i=1;i<this._items.length+1;i++){let r=(this._selectedItemIndex+i)%this._items.length,o=this._items[r];if(!this._skipPredicateFn?.(o)&&o.getLabel?.().toLocaleUpperCase().trim().indexOf(t)===0){this._selectedItem.next(o);break}}this._pressedLetters=[]})}},DA=class{_items;_activeItemIndex=-1;_activeItem=ul(null);_wrap=!1;_typeaheadSubscription=bi.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=e=>e.disabled;constructor(e,t){this._items=e,e instanceof ma?this._itemChangesSubscription=e.changes.subscribe(i=>this._itemsChanged(i.toArray())):vm(e)&&(this._effectRef=kh(()=>this._itemsChanged(e()),{injector:t}))}tabOut=new tt;change=new tt;skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();let t=this._getItemsArray();return this._typeahead=new EA(t,{debounceInterval:typeof e=="number"?e:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){let t=this._activeItem();this.updateActiveItem(e),this._activeItem()!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){let t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!e[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(t){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(r||vp(e,"shiftKey"))&&this._typeahead?.handleKey(e);return}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let t=this._getItemsArray(),i=typeof e=="number"?e:t.indexOf(e),r=t[i];this._activeItem.set(r??null),this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let t=this._getItemsArray();for(let i=1;i<=t.length;i++){let r=(this._activeItemIndex+e*i+t.length)%t.length,o=t[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){let i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(e+=t,!i[e])return;this.setActiveItem(e)}}_getItemsArray(){return vm(this._items)?this._items():this._items instanceof ma?this._items.toArray():this._items}_itemsChanged(e){this._typeahead?.setItems(e);let t=this._activeItem();if(t){let i=e.indexOf(t);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i))}}};var pM=class extends DA{_origin="program";setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}};var IA=(()=>{class n{_platform=E(en);constructor(){}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return xne(t)&&getComputedStyle(t).visibility==="visible"}isTabbable(t){if(!this._platform.isBrowser)return!1;let i=yne(Dne(t));if(i&&(F3(i)===-1||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),o=F3(t);return t.hasAttribute("contenteditable")?o!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!Cne(t)?!1:r==="audio"?t.hasAttribute("controls")?o!==-1:!1:r==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||t.hasAttribute("controls"):t.tabIndex>=0}isFocusable(t,i){return Ene(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yne(n){try{return n.frameElement}catch{return null}}function xne(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function wne(n){let e=n.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function Mne(n){return Tne(n)&&n.type=="hidden"}function Sne(n){return Rne(n)&&n.hasAttribute("href")}function Tne(n){return n.nodeName.toLowerCase()=="input"}function Rne(n){return n.nodeName.toLowerCase()=="a"}function j3(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let e=n.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function F3(n){if(!j3(n))return null;let e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function Cne(n){let e=n.nodeName.toLowerCase(),t=e==="input"&&n.type;return t==="text"||t==="password"||e==="select"||e==="textarea"}function Ene(n){return Mne(n)?!1:wne(n)||Sne(n)||n.hasAttribute("contenteditable")||j3(n)}function Dne(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var AA=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_enabled=!0;constructor(e,t,i,r,o=!1,s){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._injector=s,o||this.attachAnchors()}destroy(){let e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){let i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){let t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children;for(let i=0;i<t.length;i++){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children;for(let i=t.length-1;i>=0;i--){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._injector?jo(e,{injector:this._injector}):setTimeout(e)}},N3=(()=>{class n{_checker=E(IA);_ngZone=E(nt);_document=E(Pt);_injector=E(yi);constructor(){E(Go).load(TA)}create(t,i=!1){return new AA(t,this._checker,this._ngZone,this._document,i,this._injector)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function PA(n){return n.buttons===0||n.detail===0}function FA(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var Ane=new ye("cdk-input-modality-detector-options"),Ine={ignoreKeys:[18,17,224,91,16]},L3=650,xp=_p({passive:!0,capture:!0}),Pne=(()=>{class n{_platform=E(en);modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new En(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(i=>i===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=xs(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<L3||(this._modality.next(PA(t)?"keyboard":"mouse"),this._mostRecentTarget=xs(t))};_onTouchstart=t=>{if(FA(t)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=xs(t)};constructor(){let t=E(nt),i=E(Pt),r=E(Ane,{optional:!0});this._options=ce(ce({},Ine),r),this.modalityDetected=this._modality.pipe(bd(1)),this.modalityChanged=this.modalityDetected.pipe(Fv()),this._platform.isBrowser&&t.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,xp),i.addEventListener("mousedown",this._onMousedown,xp),i.addEventListener("touchstart",this._onTouchstart,xp)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,xp),document.removeEventListener("mousedown",this._onMousedown,xp),document.removeEventListener("touchstart",this._onTouchstart,xp))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var fM=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(fM||{}),Fne=new ye("cdk-focus-monitor-default-options"),hM=_p({passive:!0,capture:!0}),wp=(()=>{class n{_ngZone=E(nt);_platform=E(en);_inputModalityDetector=E(Pne);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=E(Pt,{optional:!0});_stopInputModalityDetector=new tt;constructor(){let t=E(Fne,{optional:!0});this._detectionMode=t?.detectionMode||fM.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{let i=xs(t);for(let r=i;r;r=r.parentElement)t.type==="focus"?this._onFocus(t,r):this._onBlur(t,r)};monitor(t,i=!1){let r=oa(t);if(!this._platform.isBrowser||r.nodeType!==1)return gt();let o=C3(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;let a={checkChildren:i,subject:new tt,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){let i=oa(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){let o=oa(t),s=this._getDocument().activeElement;o===s?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),typeof o.focus=="function"&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===fM.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused",i==="touch"),t.classList.toggle("cdk-keyboard-focused",i==="keyboard"),t.classList.toggle("cdk-mouse-focused",i==="mouse"),t.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&i,this._detectionMode===fM.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?L3:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(t,i){let r=this._elementInfo.get(i),o=xs(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,hM),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,hM)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ri(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){let i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,hM),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,hM),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){let i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let o=t.labels;if(o){for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),B3=(()=>{class n{_elementRef=E(_t);_focusMonitor=E(wp);_monitorSubscription;_focusOrigin=null;cdkFocusChange=new rt;constructor(){}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let t=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(t,t.nodeType===1&&t.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>{this._focusOrigin=i,this.cdkFocusChange.emit(i)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"]})}return n})(),Ou=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Ou||{}),k3="cdk-high-contrast-black-on-white",O3="cdk-high-contrast-white-on-black",RA="cdk-high-contrast-active",U3=(()=>{class n{_platform=E(en);_hasCheckedHighContrastMode;_document=E(Pt);_breakpointSubscription;constructor(){this._breakpointSubscription=E(uM).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Ou.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Ou.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Ou.BLACK_ON_WHITE}return Ou.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(RA,k3,O3),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Ou.BLACK_ON_WHITE?t.add(RA,k3):i===Ou.WHITE_ON_BLACK&&t.add(RA,O3)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var CA={},ub=(()=>{class n{_appId=E(ym);getId(t){return this._appId!=="ng"&&(t+=this._appId),CA.hasOwnProperty(t)||(CA[t]=0),`${t}${CA[t]++}`}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var kne=new ye("cdk-dir-doc",{providedIn:"root",factory:One});function One(){return E(Pt)}var jne=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function Nne(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?jne.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var Gl=(()=>{class n{value="ltr";change=new rt;constructor(){let t=E(kne,{optional:!0});if(t){let i=t.body?t.body.dir:null,r=t.documentElement?t.documentElement.dir:null;this.value=Nne(i||r||"ltr")}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Qc=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({})}return n})();var Ti=(()=>{class n{constructor(){E(U3)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({imports:[Qc,Qc]})}return n})();var ju=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=j({type:n,selectors:[["structural-styles"]],decls:0,vars:0,template:function(i,r){},styles:['.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}'],encapsulation:2,changeDetection:0})}return n})();var $o=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}($o||{}),jA=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=$o.HIDDEN;constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r}fadeOut(){this._renderer.fadeOutRipple(this)}},V3=_p({passive:!0,capture:!0}),NA=class{_events=new Map;addHandler(e,t,i,r){let o=this._events.get(t);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,V3)})}removeHandler(e,t,i){let r=this._events.get(e);if(!r)return;let o=r.get(t);o&&(o.delete(i),o.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,V3)))}_delegateEventHandler=e=>{let t=xs(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(e))})}},gM={enterDuration:225,exitDuration:150},Bne=800,z3=_p({passive:!0,capture:!0}),H3=["mousedown","touchstart"],G3=["mouseup","mouseleave","touchend","touchcancel"],Une=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=j({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[".mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}"],encapsulation:2,changeDetection:0})}return n})(),Mp=class n{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new NA;constructor(e,t,i,r,o){this._target=e,this._ngZone=t,this._platform=r,r.isBrowser&&(this._containerElement=oa(i)),o&&o.get(Go).load(Une)}fadeInRipple(e,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=ce(ce({},gM),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let s=i.radius||Vne(e,t,r),a=e-r.left,l=t-r.top,c=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${a-s}px`,d.style.top=`${l-s}px`,d.style.height=`${s*2}px`,d.style.width=`${s*2}px`,i.color!=null&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),h=u.transitionProperty,f=u.transitionDuration,m=h==="none"||f==="0s"||f==="0s, 0s"||r.width===0&&r.height===0,_=new jA(this,d,i,m);d.style.transform="scale3d(1, 1, 1)",_.state=$o.FADING_IN,i.persistent||(this._mostRecentTransientRipple=_);let g=null;return!m&&(c||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let p=()=>{g&&(g.fallbackTimer=null),clearTimeout(v),this._finishRippleTransition(_)},b=()=>this._destroyRipple(_),v=setTimeout(b,c+100);d.addEventListener("transitionend",p),d.addEventListener("transitioncancel",b),g={onTransitionEnd:p,onTransitionCancel:b,fallbackTimer:v}}),this._activeRipples.set(_,g),(m||!c)&&this._finishRippleTransition(_),_}fadeOutRipple(e){if(e.state===$o.FADING_OUT||e.state===$o.HIDDEN)return;let t=e.element,i=ce(ce({},gM),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=$o.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=oa(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,H3.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{G3.forEach(t=>{this._triggerElement.addEventListener(t,this,z3)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===$o.FADING_IN?this._startFadeOutTransition(e):e.state===$o.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=$o.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=$o.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=PA(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+Bne;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!FA(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===$o.VISIBLE||e.config.terminateOnPointerUp&&e.state===$o.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(H3.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(G3.forEach(t=>e.removeEventListener(t,this,z3)),this._pointerUpEventsRegistered=!1))}};function Vne(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}var Sp=new ye("mat-ripple-global-options"),_M=(()=>{class n{_elementRef=E(_t);_animationMode=E(xr,{optional:!0});color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let t=E(nt),i=E(en),r=E(Sp,{optional:!0}),o=E(yi);this._globalOptions=r||{},this._rippleRenderer=new Mp(this,t,this._elementRef,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:ce(ce(ce({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return typeof t=="number"?this._rippleRenderer.fadeInRipple(t,i,ce(ce({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,ce(ce({},this.rippleConfig),t))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){i&2&&Vt("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})(),Nu=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({imports:[Ti,Ti]})}return n})();var LA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({imports:[Ti]})}return n})();var BA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({imports:[Nu,Ti,LA]})}return n})(),W3={capture:!0},$3=["focus","mousedown","mouseenter","touchstart"],kA="mat-ripple-loader-uninitialized",OA="mat-ripple-loader-class-name",q3="mat-ripple-loader-centered",mM="mat-ripple-loader-disabled",X3=(()=>{class n{_document=E(Pt,{optional:!0});_animationMode=E(xr,{optional:!0});_globalRippleOptions=E(Sp,{optional:!0});_platform=E(en);_ngZone=E(nt);_injector=E(yi);_hosts=new Map;constructor(){this._ngZone.runOutsideAngular(()=>{for(let t of $3)this._document?.addEventListener(t,this._onInteraction,W3)})}ngOnDestroy(){let t=this._hosts.keys();for(let i of t)this.destroyRipple(i);for(let i of $3)this._document?.removeEventListener(i,this._onInteraction,W3)}configureRipple(t,i){t.setAttribute(kA,this._globalRippleOptions?.namespace??""),(i.className||!t.hasAttribute(OA))&&t.setAttribute(OA,i.className||""),i.centered&&t.setAttribute(q3,""),i.disabled&&t.setAttribute(mM,"")}setDisabled(t,i){let r=this._hosts.get(t);r?(r.target.rippleDisabled=i,!i&&!r.hasSetUpEvents&&(r.hasSetUpEvents=!0,r.renderer.setupTriggerEvents(t))):i?t.setAttribute(mM,""):t.removeAttribute(mM)}_onInteraction=t=>{let i=xs(t);if(i instanceof HTMLElement){let r=i.closest(`[${kA}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}};_createRipple(t){if(!this._document||this._hosts.has(t))return;t.querySelector(".mat-ripple")?.remove();let i=this._document.createElement("span");i.classList.add("mat-ripple",t.getAttribute(OA)),t.append(i);let r=this._animationMode==="NoopAnimations",o=this._globalRippleOptions,s=r?0:o?.animation?.enterDuration??gM.enterDuration,a=r?0:o?.animation?.exitDuration??gM.exitDuration,l={rippleDisabled:r||o?.disabled||t.hasAttribute(mM),rippleConfig:{centered:t.hasAttribute(q3),terminateOnPointerUp:o?.terminateOnPointerUp,animation:{enterDuration:s,exitDuration:a}}},c=new Mp(l,this._ngZone,i,this._platform,this._injector),d=!l.rippleDisabled;d&&c.setupTriggerEvents(t),this._hosts.set(t,{target:l,renderer:c,hasSetUpEvents:d}),t.removeAttribute(kA)}destroyRipple(t){let i=this._hosts.get(t);i&&(i.renderer._removeTriggerEvents(),this._hosts.delete(t))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var zne=["mat-button",""],Hne=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Gne=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var Wne="@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button{outline:solid 1px}}";var $ne=["mat-icon-button",""],qne=["*"];var Xne=new ye("MAT_BUTTON_CONFIG");var Yne=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Y3=(()=>{class n{_elementRef=E(_t);_ngZone=E(nt);_animationMode=E(xr,{optional:!0});_focusMonitor=E(wp);_rippleLoader=E(X3);_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;constructor(){E(Go).load(ju);let t=E(Xne,{optional:!0}),i=this._elementRef.nativeElement,r=i.classList;this.disabledInteractive=t?.disabledInteractive??!1,this.color=t?.color??null,this._rippleLoader?.configureRipple(i,{className:"mat-mdc-button-ripple"});for(let{attribute:o,mdcClasses:s}of Yne)i.hasAttribute(o)&&r.add(...s)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Si],disabled:[2,"disabled","disabled",Si],ariaDisabled:[2,"aria-disabled","ariaDisabled",Si],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Si]}})}return n})();var bM=(()=>{class n extends Y3{static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275cmp=j({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(i,r){i&2&&(Li("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),ss(r.color?"mat-"+r.color:""),Vt("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[q],attrs:zne,ngContentSelectors:Gne,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(ie(Hne),ae(0,"span",0),Y(1),U(2,"span",1),Y(3,1),Q(),Y(4,2),ae(5,"span",2)(6,"span",3)),i&2&&Vt("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 12px);height:var(--mdc-text-button-container-height, 40px);font-family:var(--mdc-text-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display, block)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-filled-button-container-height, 40px);font-family:var(--mdc-filled-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-filled-button-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display, block)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-sys-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-filled-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-sys-level1));height:var(--mdc-protected-button-container-height, 40px);font-family:var(--mdc-protected-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-protected-button-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display, block)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-sys-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-protected-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-outlined-button-container-height, 40px);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-sys-corner-full));border-width:var(--mdc-outlined-button-outline-width, 1px);padding:0 var(--mat-outlined-button-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display, block)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-sys-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mdc-outlined-button-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width, 1px);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}',"@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button{outline:solid 1px}}"],encapsulation:2,changeDetection:0})}return n})();var Z3=(()=>{class n extends Y3{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=j({type:n,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(i,r){i&2&&(Li("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),ss(r.color?"mat-"+r.color:""),Vt("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[q],attrs:$ne,ngContentSelectors:qne,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(ie(),ae(0,"span",0),Y(1),ae(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 40px);height:var(--mdc-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 40px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size, 24px);color:var(--mdc-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display, block)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',Wne],encapsulation:2,changeDetection:0})}return n})();var hb=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({imports:[Ti,Nu,Ti]})}return n})();var Zne=["*"],vM;function Qne(){if(vM===void 0&&(vM=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(vM=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return vM}function fb(n){return Qne()?.createHTML(n)||n}function K3(n){return Error(`Unable to find icon with the name "${n}"`)}function Kne(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function J3(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function eV(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var Wl=class{url;svgText;options;svgElement;constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}},Jne=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(t,i,r,o){this._httpClient=t,this._sanitizer=i,this._errorHandler=o,this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,o){return this._addSvgIconConfig(t,i,new Wl(r,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,o){let s=this._sanitizer.sanitize(ar.HTML,r);if(!s)throw eV(r);let a=fb(s);return this._addSvgIconConfig(t,i,new Wl("",a,o))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Wl(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){let o=this._sanitizer.sanitize(ar.HTML,i);if(!o)throw eV(i);let s=fb(o);return this._addSvgIconSetConfig(t,new Wl("",s,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let i=this._sanitizer.sanitize(ar.RESOURCE_URL,t);if(!i)throw J3(t);let r=this._cachedIconsByUrl.get(i);return r?gt(yM(r)):this._loadSvgIconFromConfig(new Wl(t,null)).pipe(Xi(o=>this._cachedIconsByUrl.set(i,o)),lt(o=>yM(o)))}getNamedSvgIcon(t,i=""){let r=tV(i,t),o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,t),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);let s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(t,s):so(K3(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?gt(yM(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(lt(i=>yM(i)))}_getSvgFromIconSetConfigs(t,i){let r=this._extractIconWithNameFromAnySet(t,i);if(r)return gt(r);let o=i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(qr(a=>{let c=`Loading icon set URL: ${this._sanitizer.sanitize(ar.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),gt(null)})));return _d(o).pipe(lt(()=>{let s=this._extractIconWithNameFromAnySet(t,i);if(!s)throw K3(t);return s}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){let o=i[r];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){let s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,t,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Xi(i=>t.svgText=i),lt(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?gt(null):this._fetchIcon(t).pipe(Xi(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){let o=t.querySelector(`[id="${i}"]`);if(!o)return null;let s=o.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,r);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),r);let a=this._svgElementFromString(fb("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(t){let i=this._document.createElement("DIV");i.innerHTML=t;let r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){let i=this._svgElementFromString(fb("<svg></svg>")),r=t.attributes;for(let o=0;o<r.length;o++){let{name:s,value:a}=r[o];s!=="id"&&i.setAttribute(s,a)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){let{url:i,options:r}=t,o=r?.withCredentials??!1;if(!this._httpClient)throw Kne();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let s=this._sanitizer.sanitize(ar.RESOURCE_URL,i);if(!s)throw J3(i);let a=this._inProgressUrlFetches.get(s);if(a)return a;let l=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(lt(c=>fb(c)),ua(()=>this._inProgressUrlFetches.delete(s)),Jp());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(tV(t,i),r),this}_addSvgIconSetConfig(t,i){let r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){let i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){let o=this._resolvers[r](i,t);if(o)return ere(o)?new Wl(o.url,null,o.options):new Wl(o,null)}}static \u0275fac=function(i){return new(i||n)(He(Fm,8),He(Nm),He(Pt,8),He(uo))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yM(n){return n.cloneNode(!0)}function tV(n,e){return n+":"+e}function ere(n){return!!(n.url&&n.options)}var tre=new ye("MAT_ICON_DEFAULT_OPTIONS"),ire=new ye("mat-icon-location",{providedIn:"root",factory:nre});function nre(){let n=E(Pt),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var iV=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],rre=iV.map(n=>`[${n}]`).join(", "),ore=/^url\(['"]?#(.*?)['"]?\)$/,xM=(()=>{class n{_elementRef=E(_t);_iconRegistry=E(Jne);_location=E(ire);_errorHandler=E(uo);_defaultColor;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(t){let i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(t){let i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=bi.EMPTY;constructor(){let t=E(new bh("aria-hidden"),{optional:!0}),i=E(tre,{optional:!0});i&&(i.color&&(this.color=this._defaultColor=i.color),i.fontSet&&(this.fontSet=i.fontSet)),t||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let r=t.childNodes[i];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){let i=t.querySelectorAll(rre),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)iV.forEach(s=>{let a=i[o],l=a.getAttribute(s),c=l?l.match(ore):null;if(c){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:s,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Er(1)).subscribe(o=>this._setSvgElement(o),o=>{let s=`Error retrieving icon ${i}:${r}! ${o.message}`;this._errorHandler.handleError(new Error(s))})}}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=j({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){i&2&&(Li("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),ss(r.color?"mat-"+r.color:""),Vt("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Si],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:Zne,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),pb=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({imports:[Ti,Ti]})}return n})();var sre=["*"];var are=new ye("MAT_CARD_CONFIG"),rV=(()=>{class n{appearance;constructor(){let t=E(are,{optional:!0});this.appearance=t?.appearance||"raised"}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=j({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(i,r){i&2&&Vt("mat-mdc-card-outlined",r.appearance==="outlined")("mdc-card--outlined",r.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:sre,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},styles:['.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mdc-elevated-card-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color, var(--mat-sys-surface));border-radius:var(--mdc-outlined-card-container-shape, var(--mat-sys-corner-medium));border-width:var(--mdc-outlined-card-outline-width, 1px);border-color:var(--mdc-outlined-card-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mdc-outlined-card-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return n})();var oV=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return n})();var sV=(()=>{class n{align="start";static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(i,r){i&2&&Vt("mat-mdc-card-actions-align-end",r.align==="end")},inputs:{align:"align"},exportAs:["matCardActions"]})}return n})();var UA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({imports:[Ti,Ti]})}return n})();var mb=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},VA=class extends mb{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(e,t,i,r,o){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.projectableNodes=o}},Lu=class extends mb{templateRef;viewContainerRef;context;injector;constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},zA=class extends mb{element;constructor(e){super(),this.element=e instanceof _t?e.nativeElement:e}},wM=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof VA)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof Lu)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof zA)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var MM=class extends wM{outletElement;_appRef;_defaultInjector;_document;constructor(e,t,i,r,o){super(),this.outletElement=e,this._appRef=i,this._defaultInjector=r,this._document=o}attachComponentPortal(e){let t;if(e.viewContainerRef){let i=e.injector||e.viewContainerRef.injector,r=i.get(Jo,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:i,ngModuleRef:r,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else t=s0(e.component,{elementInjector:e.injector||this._defaultInjector||yi.NULL,environmentInjector:this._appRef.injector,projectableNodes:e.projectableNodes||void 0}),this._appRef.attachView(t.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(t.hostView),t.destroy()});return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);r!==-1&&t.remove(r)}),this._attachedPortal=e,i}attachDomPortal=e=>{let t=e.element;t.parentNode;let i=this._document.createComment("dom-portal");t.parentNode.insertBefore(i,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(t,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var aV=(()=>{class n extends Lu{constructor(){let t=E(Oo),i=E(Yr);super(t,i)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[q]})}return n})();var SM=(()=>{class n extends wM{_moduleRef=E(Jo,{optional:!0});_document=E(Pt);_viewContainerRef=E(Yr);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}attached=new rt;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);let i=t.viewContainerRef!=null?t.viewContainerRef:this._viewContainerRef,r=i.createComponent(t.component,{index:i.length,injector:t.injector||i.injector,projectableNodes:t.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return i!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(t){t.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}attachDomPortal=t=>{let i=t.element;i.parentNode;let r=this._document.createComment("dom-portal");t.setAttachedHost(this),i.parentNode.insertBefore(r,i),this._getRootNode().appendChild(i),this._attachedPortal=t,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(i,r)})};_getRootNode(){let t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[q]})}return n})();var lV=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({})}return n})();var HA=class{_box;_destroyed=new tt;_resizeSubject=new tt;_resizeObserver;_elementObservables=new Map;constructor(e){this._box=e,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new Ot(t=>{let i=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),i.unsubscribe(),this._elementObservables.delete(e)}}).pipe(vi(t=>t.some(i=>i.target===e)),nl({bufferSize:1,refCount:!0}),Ri(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},cV=(()=>{class n{_cleanupErrorListener;_observers=new Map;_ngZone=E(nt);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,t]of this._observers)t.destroy();this._observers.clear(),this._cleanupErrorListener?.()}observe(t,i){let r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new HA(r)),this._observers.get(r).observe(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var cre=20,gb=(()=>{class n{_ngZone=E(nt);_platform=E(en);_renderer=E(ho).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new tt;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=cre){return this._platform.isBrowser?new Ot(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let r=t>0?this._scrolled.pipe(Iv(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):gt()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){let r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(vi(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(t){let i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_scrollableContainsElement(t,i){let r=oa(i),o=t.getElementRef().nativeElement;do if(r==o)return!0;while(r=r.parentElement);return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Kc=(()=>{class n{elementRef=E(_t);scrollDispatcher=E(gb);ngZone=E(nt);dir=E(Gl,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new tt;_renderer=E(lr);_cleanupScroll;_elementScrolled=new tt;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",t=>this._elementScrolled.next(t))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){let i=this.elementRef.nativeElement,r=this.dir&&this.dir.value=="rtl";t.left==null&&(t.left=r?t.end:t.start),t.right==null&&(t.right=r?t.start:t.end),t.bottom!=null&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&bp()!=ra.NORMAL?(t.left!=null&&(t.right=i.scrollWidth-i.clientWidth-t.left),bp()==ra.INVERTED?t.left=t.right:bp()==ra.NEGATED&&(t.left=t.right?-t.right:t.right)):t.right!=null&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){let i=this.elementRef.nativeElement;aM()?i.scrollTo(t):(t.top!=null&&(i.scrollTop=t.top),t.left!=null&&(i.scrollLeft=t.left))}measureScrollOffset(t){let i="left",r="right",o=this.elementRef.nativeElement;if(t=="top")return o.scrollTop;if(t=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let s=this.dir&&this.dir.value=="rtl";return t=="start"?t=s?r:i:t=="end"&&(t=s?i:r),s&&bp()==ra.INVERTED?t==i?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:s&&bp()==ra.NEGATED?t==i?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:t==i?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return n})(),dre=20,Jc=(()=>{class n{_platform=E(en);_listeners;_viewportSize;_change=new tt;_document=E(Pt,{optional:!0});constructor(){let t=E(nt),i=E(ho).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=o=>this._change.next(o);this._listeners=[i.listen("window","resize",r),i.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,i=this._getWindow(),r=t.documentElement,o=r.getBoundingClientRect(),s=-o.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,a=-o.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:s,left:a}}change(t=dre){return t>0?this._change.pipe(Iv(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Bu=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({})}return n})(),GA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({imports:[Qc,Bu,Qc,Bu]})}return n})();var ri=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(ri||{}),Wa="*";function dV(n,e){return{type:ri.Trigger,name:n,definitions:e,options:{}}}function TM(n,e=null){return{type:ri.Animate,styles:e,timings:n}}function uV(n,e=null){return{type:ri.Sequence,steps:n,options:e}}function $l(n){return{type:ri.Style,styles:n,offset:null}}function RM(n,e,t){return{type:ri.State,name:n,styles:e,options:t}}function CM(n,e,t=null){return{type:ri.Transition,expr:n,animation:e,options:t}}var ed=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},_b=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,i=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},EM="!";var XA=["*"];function fre(n,e){n&1&&Y(0)}var pre=["tabListContainer"],mre=["tabList"],gre=["tabListInner"],_re=["nextPaginator"],bre=["previousPaginator"],vre=n=>({animationDuration:n}),yre=(n,e)=>({value:n,params:e});function xre(n,e){}var wre=["tabBodyWrapper"],Mre=["tabHeader"];function Sre(n,e){}function Tre(n,e){if(n&1&&Ni(0,Sre,0,0,"ng-template",12),n&2){let t=Ht().$implicit;O("cdkPortalOutlet",t.templateLabel)}}function Rre(n,e){if(n&1&&It(0),n&2){let t=Ht().$implicit;cc(t.textLabel)}}function Cre(n,e){if(n&1){let t=Xt();U(0,"div",7,2),De("click",function(){let r=ht(t),o=r.$implicit,s=r.$index,a=Ht(),l=At(1);return ft(a._handleClick(o,l,s))})("cdkFocusChange",function(r){let o=ht(t).$index,s=Ht();return ft(s._tabFocusChanged(r,o))}),ae(2,"span",8)(3,"div",9),U(4,"span",10)(5,"span",11),Ni(6,Tre,1,1,null,12)(7,Rre,1,1),Q()()()}if(n&2){let t=e.$implicit,i=e.$index,r=At(1),o=Ht();ss(t.labelClass),Vt("mdc-tab--active",o.selectedIndex===i),O("id",o._getTabLabelId(i))("disabled",t.disabled)("fitInkBarToContent",o.fitInkBarToContent),Li("tabIndex",o._getTabIndex(i))("aria-posinset",i+1)("aria-setsize",o._tabs.length)("aria-controls",o._getTabContentId(i))("aria-selected",o.selectedIndex===i)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),k(3),O("matRippleTrigger",r)("matRippleDisabled",t.disabled||o.disableRipple),k(3),Mn(t.templateLabel?6:7)}}function Ere(n,e){n&1&&Y(0)}function Dre(n,e){if(n&1){let t=Xt();U(0,"mat-tab-body",13),De("_onCentered",function(){ht(t);let r=Ht();return ft(r._removeTabBodyWrapperHeight())})("_onCentering",function(r){ht(t);let o=Ht();return ft(o._setTabBodyWrapperHeight(r))}),Q()}if(n&2){let t=e.$implicit,i=e.$index,r=Ht();ss(t.bodyClass),Vt("mat-mdc-tab-body-active",r.selectedIndex===i),O("id",r._getTabContentId(i))("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",r.animationDuration)("preserveContent",r.preserveContent),Li("tabindex",r.contentTabIndex!=null&&r.selectedIndex===i?r.contentTabIndex:null)("aria-labelledby",r._getTabLabelId(i))("aria-hidden",r.selectedIndex!==i)}}var Are=new ye("MatTabContent"),Ire=(()=>{class n{template=E(Oo);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,selectors:[["","matTabContent",""]],features:[J([{provide:Are,useExisting:n}])]})}return n})(),Pre=new ye("MatTabLabel"),pV=new ye("MAT_TAB"),Fre=(()=>{class n extends aV{_closestTab=E(pV,{optional:!0});static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275dir=Ue({type:n,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[J([{provide:Pre,useExisting:n}]),q]})}return n})(),mV=new ye("MAT_TAB_GROUP"),YA=(()=>{class n{_viewContainerRef=E(Yr);_closestTabGroup=E(mV,{optional:!0});disabled=!1;get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}_templateLabel;_explicitContent=void 0;_implicitContent;textLabel="";ariaLabel;ariaLabelledby;labelClass;bodyClass;_contentPortal=null;get content(){return this._contentPortal}_stateChanges=new tt;position=null;origin=null;isActive=!1;constructor(){E(Go).load(ju)}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new Lu(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&t._closestTab===this&&(this._templateLabel=t)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=j({type:n,selectors:[["mat-tab"]],contentQueries:function(i,r,o){if(i&1&&(nn(o,Fre,5),nn(o,Ire,7,Oo)),i&2){let s;ct(s=dt())&&(r.templateLabel=s.first),ct(s=dt())&&(r._explicitContent=s.first)}},viewQuery:function(i,r){if(i&1&&Gt(Oo,7),i&2){let o;ct(o=dt())&&(r._implicitContent=o.first)}},hostAttrs:["hidden",""],inputs:{disabled:[2,"disabled","disabled",Si],textLabel:[0,"label","textLabel"],ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],features:[J([{provide:pV,useExisting:n}]),tr],ngContentSelectors:XA,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Ni(0,fre,1,0,"ng-template"))},encapsulation:2})}return n})(),WA="mdc-tab-indicator--active",hV="mdc-tab-indicator--no-transition",$A=class{_items;_currentItem;constructor(e){this._items=e}hide(){this._items.forEach(e=>e.deactivateInkBar()),this._currentItem=void 0}alignToElement(e){let t=this._items.find(r=>r.elementRef.nativeElement===e),i=this._currentItem;if(t!==i&&(i?.deactivateInkBar(),t)){let r=i?.elementRef.nativeElement.getBoundingClientRect?.();t.activateInkBar(r),this._currentItem=t}}},kre=(()=>{class n{_elementRef=E(_t);_inkBarElement;_inkBarContentElement;_fitToContent=!1;get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(t){this._fitToContent!==t&&(this._fitToContent=t,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(t){let i=this._elementRef.nativeElement;if(!t||!i.getBoundingClientRect||!this._inkBarContentElement){i.classList.add(WA);return}let r=i.getBoundingClientRect(),o=t.width/r.width,s=t.left-r.left;i.classList.add(hV),this._inkBarContentElement.style.setProperty("transform",`translateX(${s}px) scaleX(${o})`),i.getBoundingClientRect(),i.classList.remove(hV),i.classList.add(WA),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this._elementRef.nativeElement.classList.remove(WA)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){let t=this._elementRef.nativeElement.ownerDocument||document,i=this._inkBarElement=t.createElement("span"),r=this._inkBarContentElement=t.createElement("span");i.className="mdc-tab-indicator",r.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",i.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){this._inkBarElement;let t=this._fitToContent?this._elementRef.nativeElement.querySelector(".mdc-tab__content"):this._elementRef.nativeElement;t.appendChild(this._inkBarElement)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,inputs:{fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",Si]}})}return n})();var gV=(()=>{class n extends kre{elementRef=E(_t);disabled=!1;focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275dir=Ue({type:n,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(i,r){i&2&&(Li("aria-disabled",!!r.disabled),Vt("mat-mdc-tab-disabled",r.disabled))},inputs:{disabled:[2,"disabled","disabled",Si]},features:[q]})}return n})(),fV={passive:!0},Ore=650,jre=100,Nre=(()=>{class n{_elementRef=E(_t);_changeDetectorRef=E(un);_viewportRuler=E(Jc);_dir=E(Gl,{optional:!0});_ngZone=E(nt);_platform=E(en);_sharedResizeObserver=E(cV);_injector=E(yi);_renderer=E(lr);_animationMode=E(xr,{optional:!0});_eventCleanups;_scrollDistance=0;_selectedIndexChanged=!1;_destroyed=new tt;_showPaginationControls=!1;_disableScrollAfter=!0;_disableScrollBefore=!0;_tabLabelCount;_scrollDistanceChanged;_keyManager;_currentTextContent;_stopScrolling=new tt;disablePagination=!1;get selectedIndex(){return this._selectedIndex}set selectedIndex(t){let i=isNaN(t)?0:t;this._selectedIndex!=i&&(this._selectedIndexChanged=!0,this._selectedIndex=i,this._keyManager&&this._keyManager.updateActiveItem(i))}_selectedIndex=0;selectFocusedIndex=new rt;indexFocused=new rt;constructor(){this._eventCleanups=this._ngZone.runOutsideAngular(()=>[this._renderer.listen(this._elementRef.nativeElement,"mouseleave",()=>this._stopInterval())])}ngAfterViewInit(){this._eventCleanups.push(SA(this._renderer,this._previousPaginator.nativeElement,"touchstart",()=>this._handlePaginatorPress("before"),fV),SA(this._renderer,this._nextPaginator.nativeElement,"touchstart",()=>this._handlePaginatorPress("after"),fV))}ngAfterContentInit(){let t=this._dir?this._dir.change:gt("ltr"),i=this._sharedResizeObserver.observe(this._elementRef.nativeElement).pipe(As(32),Ri(this._destroyed)),r=this._viewportRuler.change(150).pipe(Ri(this._destroyed)),o=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new pM(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),jo(o,{injector:this._injector}),Ds(t,r,i,this._items.changes,this._itemsResized()).pipe(Ri(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),o()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(s=>{this.indexFocused.emit(s),this._setTabFocus(s)})}_itemsResized(){return typeof ResizeObserver!="function"?_n:this._items.changes.pipe(Io(this._items),Nn(t=>new Ot(i=>this._ngZone.runOutsideAngular(()=>{let r=new ResizeObserver(o=>i.next(o));return t.forEach(o=>r.observe(o.elementRef.nativeElement)),()=>{r.disconnect()}}))),bd(1),vi(t=>t.some(i=>i.contentRect.width>0&&i.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._eventCleanups.forEach(t=>t()),this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!vp(t))switch(t.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){let i=this._items.get(this.focusIndex);i&&!i.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t))}break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){let t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){!this._isValidIndex(t)||this.focusIndex===t||!this._keyManager||this._keyManager.setActiveItem(t)}_isValidIndex(t){return this._items?!!this._items.toArray()[t]:!0}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();let i=this._tabListContainer.nativeElement;this._getLayoutDirection()=="ltr"?i.scrollLeft=0:i.scrollLeft=i.scrollWidth-i.offsetWidth}}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;let t=this.scrollDistance,i=this._getLayoutDirection()==="ltr"?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(i)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){let i=this._tabListContainer.nativeElement.offsetWidth,r=(t=="before"?-1:1)*i/3;return this._scrollTo(this._scrollDistance+r)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;let i=this._items?this._items.toArray()[t]:null;if(!i)return;let r=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:o,offsetWidth:s}=i.elementRef.nativeElement,a,l;this._getLayoutDirection()=="ltr"?(a=o,l=a+s):(l=this._tabListInner.nativeElement.offsetWidth-o,a=l-s);let c=this.scrollDistance,d=this.scrollDistance+r;a<c?this.scrollDistance-=c-a:l>d&&(this.scrollDistance+=Math.min(l-d,a-c))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{let t=this._tabListInner.nativeElement.scrollWidth,i=this._elementRef.nativeElement.offsetWidth,r=t-i>=5;r||(this.scrollDistance=0),r!==this._showPaginationControls&&(this._showPaginationControls=r,this._changeDetectorRef.markForCheck())}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=this.scrollDistance==0,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){let t=this._tabListInner.nativeElement.scrollWidth,i=this._tabListContainer.nativeElement.offsetWidth;return t-i||0}_alignInkBarToSelectedTab(){let t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,i=t?t.elementRef.nativeElement:null;i?this._inkBar.alignToElement(i):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,i){i&&i.button!=null&&i.button!==0||(this._stopInterval(),Kp(Ore,jre).pipe(Ri(Ds(this._stopScrolling,this._destroyed))).subscribe(()=>{let{maxScrollDistance:r,distance:o}=this._scrollHeader(t);(o===0||o>=r)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};let i=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(i,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:i,distance:this._scrollDistance}}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,inputs:{disablePagination:[2,"disablePagination","disablePagination",Si],selectedIndex:[2,"selectedIndex","selectedIndex",Nd]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"}})}return n})(),Lre=(()=>{class n extends Nre{_items;_tabListContainer;_tabList;_tabListInner;_nextPaginator;_previousPaginator;_inkBar;ariaLabel;ariaLabelledby;disableRipple=!1;ngAfterContentInit(){this._inkBar=new $A(this._items),super.ngAfterContentInit()}_itemSelected(t){t.preventDefault()}static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275cmp=j({type:n,selectors:[["mat-tab-header"]],contentQueries:function(i,r,o){if(i&1&&nn(o,gV,4),i&2){let s;ct(s=dt())&&(r._items=s)}},viewQuery:function(i,r){if(i&1&&(Gt(pre,7),Gt(mre,7),Gt(gre,7),Gt(_re,5),Gt(bre,5)),i&2){let o;ct(o=dt())&&(r._tabListContainer=o.first),ct(o=dt())&&(r._tabList=o.first),ct(o=dt())&&(r._tabListInner=o.first),ct(o=dt())&&(r._nextPaginator=o.first),ct(o=dt())&&(r._previousPaginator=o.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(i,r){i&2&&Vt("mat-mdc-tab-header-pagination-controls-enabled",r._showPaginationControls)("mat-mdc-tab-header-rtl",r._getLayoutDirection()=="rtl")},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],disableRipple:[2,"disableRipple","disableRipple",Si]},features:[q],ngContentSelectors:XA,decls:13,vars:10,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"click","mousedown","touchend","matRippleDisabled"],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],[1,"mat-mdc-tab-labels"],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"mousedown","click","touchend","matRippleDisabled"]],template:function(i,r){if(i&1){let o=Xt();ie(),U(0,"div",5,0),De("click",function(){return ht(o),ft(r._handlePaginatorClick("before"))})("mousedown",function(a){return ht(o),ft(r._handlePaginatorPress("before",a))})("touchend",function(){return ht(o),ft(r._stopInterval())}),ae(2,"div",6),Q(),U(3,"div",7,1),De("keydown",function(a){return ht(o),ft(r._handleKeydown(a))}),U(5,"div",8,2),De("cdkObserveContent",function(){return ht(o),ft(r._onContentChanges())}),U(7,"div",9,3),Y(9),Q()()(),U(10,"div",10,4),De("mousedown",function(a){return ht(o),ft(r._handlePaginatorPress("after",a))})("click",function(){return ht(o),ft(r._handlePaginatorClick("after"))})("touchend",function(){return ht(o),ft(r._stopInterval())}),ae(12,"div",6),Q()}i&2&&(Vt("mat-mdc-tab-header-pagination-disabled",r._disableScrollBefore),O("matRippleDisabled",r._disableScrollBefore||r.disableRipple),k(3),Vt("_mat-animation-noopable",r._animationMode==="NoopAnimations"),k(2),Li("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby||null),k(5),Vt("mat-mdc-tab-header-pagination-disabled",r._disableScrollAfter),O("matRippleDisabled",r._disableScrollAfter||r.disableRipple))},dependencies:[_M,cM],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;outline:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color, var(--mat-sys-on-surface))}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height, 1px);border-bottom-color:var(--mat-tab-header-divider-color, var(--mat-sys-surface-variant))}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height, 1px);border-top-color:var(--mat-tab-header-divider-color, var(--mat-sys-surface-variant))}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.cdk-drop-list .mat-mdc-tab-labels,.mat-mdc-tab-labels.cdk-drop-list{min-height:var(--mdc-secondary-navigation-tab-container-height, 48px)}.mat-mdc-tab::before{margin:5px}@media(forced-colors: active){.mat-mdc-tab[aria-disabled=true]{color:GrayText}}"],encapsulation:2})}return n})(),Bre=new ye("MAT_TABS_CONFIG"),Ure={translateTab:dV("translateTab",[RM("center, void, left-origin-center, right-origin-center",$l({transform:"none",visibility:"visible"})),RM("left",$l({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),RM("right",$l({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),CM("* => left, * => right, left => center, right => center",TM("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),CM("void => left-origin-center",[$l({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),TM("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),CM("void => right-origin-center",[$l({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),TM("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])},Vre=(()=>{class n extends SM{_host=E(_V);_centeringSub=bi.EMPTY;_leavingSub=bi.EMPTY;constructor(){super()}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(Io(this._host._isCenterPosition(this._host._position))).subscribe(t=>{this._host._content&&t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,selectors:[["","matTabBodyHost",""]],features:[q]})}return n})(),_V=(()=>{class n{_elementRef=E(_t);_dir=E(Gl,{optional:!0});_positionIndex;_dirChangeSubscription=bi.EMPTY;_position;_translateTabComplete=new tt;_onCentering=new rt;_beforeCentering=new rt;_afterLeavingCenter=new rt;_onCentered=new rt(!0);_portalHost;_content;origin;animationDuration="500ms";preserveContent=!1;set position(t){this._positionIndex=t,this._computePositionAnimationState()}constructor(){if(this._dir){let t=E(un);this._dirChangeSubscription=this._dir.change.subscribe(i=>{this._computePositionAnimationState(i),t.markForCheck()})}this._translateTabComplete.subscribe(t=>{this._isCenterPosition(t.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(t.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){this._position=="center"&&this.origin!=null&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){let i=this._isCenterPosition(t.toState);this._beforeCentering.emit(i),i&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_isCenterPosition(t){return t=="center"||t=="left-origin-center"||t=="right-origin-center"}_computePositionAnimationState(t=this._getLayoutDirection()){this._positionIndex<0?this._position=t=="ltr"?"left":"right":this._positionIndex>0?this._position=t=="ltr"?"right":"left":this._position="center"}_computePositionFromOrigin(t){let i=this._getLayoutDirection();return i=="ltr"&&t<=0||i=="rtl"&&t>0?"left-origin-center":"right-origin-center"}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=j({type:n,selectors:[["mat-tab-body"]],viewQuery:function(i,r){if(i&1&&Gt(SM,5),i&2){let o;ct(o=dt())&&(r._portalHost=o.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:[0,"content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},decls:3,vars:6,consts:[["content",""],["cdkScrollable","",1,"mat-mdc-tab-body-content"],["matTabBodyHost",""]],template:function(i,r){if(i&1){let o=Xt();U(0,"div",1,0),De("@translateTab.start",function(a){return ht(o),ft(r._onTranslateTabStarted(a))})("@translateTab.done",function(a){return ht(o),ft(r._translateTabComplete.next(a))}),Ni(2,xre,0,0,"ng-template",2),Q()}i&2&&O("@translateTab",zn(3,yre,r._position,vt(1,vre,r.animationDuration)))},dependencies:[Vre,Kc],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[Ure.translateTab]}})}return n})(),zre=!0,bV=(()=>{class n{_elementRef=E(_t);_changeDetectorRef=E(un);_animationMode=E(xr,{optional:!0});_allTabs;_tabBodyWrapper;_tabHeader;_tabs=new ma;_indexToSelect=0;_lastFocusedTabIndex=null;_tabBodyWrapperHeight=0;_tabsSubscription=bi.EMPTY;_tabLabelSubscription=bi.EMPTY;color;get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(t){this._fitInkBarToContent=t,this._changeDetectorRef.markForCheck()}_fitInkBarToContent=!1;stretchTabs=!0;alignTabs=null;dynamicHeight=!1;get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=isNaN(t)?null:t}_selectedIndex=null;headerPosition="above";get animationDuration(){return this._animationDuration}set animationDuration(t){let i=t+"";this._animationDuration=/^\d+$/.test(i)?t+"ms":i}_animationDuration;get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(t){this._contentTabIndex=isNaN(t)?null:t}_contentTabIndex;disablePagination=!1;disableRipple=!1;preserveContent=!1;get backgroundColor(){return this._backgroundColor}set backgroundColor(t){if(!zre)throw new Error("mat-tab-group background color must be set through the Sass theming API");let i=this._elementRef.nativeElement.classList;i.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),t&&i.add("mat-tabs-with-background",`mat-background-${t}`),this._backgroundColor=t}_backgroundColor;ariaLabel;ariaLabelledby;selectedIndexChange=new rt;focusChange=new rt;animationDone=new rt;selectedTabChange=new rt(!0);_groupId;_isServer=!E(en).isBrowser;constructor(){let t=E(Bre,{optional:!0});this._groupId=E(ub).getId("mat-tab-group-"),this.animationDuration=t&&t.animationDuration?t.animationDuration:"500ms",this.disablePagination=t&&t.disablePagination!=null?t.disablePagination:!1,this.dynamicHeight=t&&t.dynamicHeight!=null?t.dynamicHeight:!1,t?.contentTabIndex!=null&&(this.contentTabIndex=t.contentTabIndex),this.preserveContent=!!t?.preserveContent,this.fitInkBarToContent=t&&t.fitInkBarToContent!=null?t.fitInkBarToContent:!1,this.stretchTabs=t&&t.stretchTabs!=null?t.stretchTabs:!0,this.alignTabs=t&&t.alignTabs!=null?t.alignTabs:null}ngAfterContentChecked(){let t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){let i=this._selectedIndex==null;if(!i){this.selectedTabChange.emit(this._createChangeEvent(t));let r=this._tabBodyWrapper.nativeElement;r.style.minHeight=r.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((r,o)=>r.isActive=o===t),i||(this.selectedIndexChange.emit(t),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((i,r)=>{i.position=r-t,this._selectedIndex!=null&&i.position==0&&!i.origin&&(i.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{let t=this._clampTabIndex(this._indexToSelect);if(t===this._selectedIndex){let i=this._tabs.toArray(),r;for(let o=0;o<i.length;o++)if(i[o].isActive){this._indexToSelect=this._selectedIndex=o,this._lastFocusedTabIndex=null,r=i[o];break}!r&&i[t]&&Promise.resolve().then(()=>{i[t].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(t))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(Io(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(i=>i._closestTabGroup===this||!i._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(t){let i=this._tabHeader;i&&(i.focusIndex=t)}_focusChanged(t){this._lastFocusedTabIndex=t,this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){let i=new qA;return i.index=t,this._tabs&&this._tabs.length&&(i.tab=this._tabs.toArray()[t]),i}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=Ds(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`${this._groupId}-label-${t}`}_getTabContentId(t){return`${this._groupId}-content-${t}`}_setTabBodyWrapperHeight(t){if(!this.dynamicHeight||!this._tabBodyWrapperHeight)return;let i=this._tabBodyWrapper.nativeElement;i.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(i.style.height=t+"px")}_removeTabBodyWrapperHeight(){let t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,i,r){i.focusIndex=r,t.disabled||(this.selectedIndex=r)}_getTabIndex(t){let i=this._lastFocusedTabIndex??this.selectedIndex;return t===i?0:-1}_tabFocusChanged(t,i){t&&t!=="mouse"&&t!=="touch"&&(this._tabHeader.focusIndex=i)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=j({type:n,selectors:[["mat-tab-group"]],contentQueries:function(i,r,o){if(i&1&&nn(o,YA,5),i&2){let s;ct(s=dt())&&(r._allTabs=s)}},viewQuery:function(i,r){if(i&1&&(Gt(wre,5),Gt(Mre,5)),i&2){let o;ct(o=dt())&&(r._tabBodyWrapper=o.first),ct(o=dt())&&(r._tabHeader=o.first)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:11,hostBindings:function(i,r){i&2&&(Li("mat-align-tabs",r.alignTabs),ss("mat-"+(r.color||"primary")),os("--mat-tab-animation-duration",r.animationDuration),Vt("mat-mdc-tab-group-dynamic-height",r.dynamicHeight)("mat-mdc-tab-group-inverted-header",r.headerPosition==="below")("mat-mdc-tab-group-stretch-tabs",r.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",Si],stretchTabs:[2,"mat-stretch-tabs","stretchTabs",Si],alignTabs:[0,"mat-align-tabs","alignTabs"],dynamicHeight:[2,"dynamicHeight","dynamicHeight",Si],selectedIndex:[2,"selectedIndex","selectedIndex",Nd],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[2,"contentTabIndex","contentTabIndex",Nd],disablePagination:[2,"disablePagination","disablePagination",Si],disableRipple:[2,"disableRipple","disableRipple",Si],preserveContent:[2,"preserveContent","preserveContent",Si],backgroundColor:"backgroundColor",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"]},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],features:[J([{provide:mV,useExisting:n}])],ngContentSelectors:XA,decls:9,vars:8,consts:[["tabHeader",""],["tabBodyWrapper",""],["tabNode",""],[3,"indexFocused","selectFocusedIndex","selectedIndex","disableRipple","disablePagination","aria-label","aria-labelledby"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-focus-indicator",3,"id","mdc-tab--active","class","disabled","fitInkBarToContent"],[1,"mat-mdc-tab-body-wrapper"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","class","content","position","origin","animationDuration","preserveContent"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-focus-indicator",3,"click","cdkFocusChange","id","disabled","fitInkBarToContent"],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"_onCentered","_onCentering","id","content","position","origin","animationDuration","preserveContent"]],template:function(i,r){if(i&1){let o=Xt();ie(),U(0,"mat-tab-header",3,0),De("indexFocused",function(a){return ht(o),ft(r._focusChanged(a))})("selectFocusedIndex",function(a){return ht(o),ft(r.selectedIndex=a)}),cr(2,Cre,8,17,"div",4,wr),Q(),Ni(4,Ere,1,0),U(5,"div",5,1),cr(7,Dre,1,13,"mat-tab-body",6,wr),Q()}i&2&&(O("selectedIndex",r.selectedIndex||0)("disableRipple",r.disableRipple)("disablePagination",r.disablePagination)("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby),k(2),dr(r._tabs),k(2),Mn(r._isServer?4:-1),k(),Vt("_mat-animation-noopable",r._animationMode==="NoopAnimations"),k(2),dr(r._tabs))},dependencies:[Lre,gV,B3,_M,SM,_V],styles:['.mdc-tab{min-width:90px;padding:0 24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;z-index:1}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab--active .mdc-tab__text-label{transition-delay:100ms}._mat-animation-noopable .mdc-tab__text-label{transition:none}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transition:var(--mat-tab-animation-duration, 250ms) transform cubic-bezier(0.4, 0, 0.2, 1);transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}._mat-animation-noopable .mdc-tab-indicator__content,.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mat-mdc-tab-ripple.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;height:var(--mdc-secondary-navigation-tab-container-height, 48px);font-family:var(--mat-tab-header-label-text-font, var(--mat-sys-title-small-font));font-size:var(--mat-tab-header-label-text-size, var(--mat-sys-title-small-size));letter-spacing:var(--mat-tab-header-label-text-tracking, var(--mat-sys-title-small-tracking));line-height:var(--mat-tab-header-label-text-line-height, var(--mat-sys-title-small-line-height));font-weight:var(--mat-tab-header-label-text-weight, var(--mat-sys-title-small-weight))}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mdc-tab-indicator-active-indicator-height, 2px);border-radius:var(--mdc-tab-indicator-active-indicator-shape, 0)}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color, var(--mat-sys-primary))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color, var(--mat-sys-primary))}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color, var(--mat-sys-on-surface));display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2})}return n})(),qA=class{index;tab};var ZA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({imports:[Ti,Ti]})}return n})();var JA=new ye("HIGHLIGHT_OPTIONS");function yV(n){return[{provide:JA,useValue:n}]}var Tp=function(n){return n.FULL_WITH_CORE_LIBRARY_IMPORTS="The full library and the core library were imported, only one of them should be imported!",n.FULL_WITH_LANGUAGE_IMPORTS="The highlighting languages were imported they are not needed!",n.CORE_WITHOUT_LANGUAGE_IMPORTS="The highlighting languages were not imported!",n.LANGUAGE_WITHOUT_CORE_IMPORTS="The core library was not imported!",n.NO_FULL_AND_NO_CORE_IMPORTS="Highlight.js library was not imported!",n}(Tp||{}),Gre=(()=>{class n{constructor(){this.document=E(Pt),this.isPlatformBrowser=Dm(E(is)),this.options=E(JA,{optional:!0}),this._ready=new En(null),this.ready=tT(this._ready.asObservable().pipe(vi(t=>!!t))),this.isPlatformBrowser&&(this.document.defaultView.hljs?this._ready.next(this.document.defaultView.hljs):this._loadLibrary().pipe(Nn(t=>this.options?.lineNumbersLoader?(this.document.defaultView.hljs=t,this.loadLineNumbers().pipe(Xi(i=>{i.activateLineNumbers(),this._ready.next(t)}))):(this._ready.next(t),_n)),qr(t=>(console.error("[HLJS] ",t),this._ready.error(t),_n))).subscribe(),this.options?.themePath&&this.loadTheme(this.options.themePath))}_loadLibrary(){if(this.options){if(this.options.fullLibraryLoader&&this.options.coreLibraryLoader)return so(()=>Tp.FULL_WITH_CORE_LIBRARY_IMPORTS);if(this.options.fullLibraryLoader&&this.options.languages)return so(()=>Tp.FULL_WITH_LANGUAGE_IMPORTS);if(this.options.coreLibraryLoader&&!this.options.languages)return so(()=>Tp.CORE_WITHOUT_LANGUAGE_IMPORTS);if(!this.options.coreLibraryLoader&&this.options.languages)return so(()=>Tp.LANGUAGE_WITHOUT_CORE_IMPORTS);if(this.options.fullLibraryLoader)return this.loadFullLibrary();if(this.options.coreLibraryLoader&&this.options.languages&&Object.keys(this.options.languages).length)return this.loadCoreLibrary().pipe(Nn(t=>this._loadLanguages(t)))}return so(()=>Tp.NO_FULL_AND_NO_CORE_IMPORTS)}_loadLanguages(t){let i=Object.entries(this.options.languages).map(([r,o])=>QA(o()).pipe(Xi(s=>t.registerLanguage(r,s))));return _d(i).pipe(lt(()=>t))}loadCoreLibrary(){return QA(this.options.coreLibraryLoader())}loadFullLibrary(){return QA(this.options.fullLibraryLoader())}loadLineNumbers(){return ji(this.options.lineNumbersLoader())}setTheme(t){this.isPlatformBrowser&&(this._themeLinkElement?this._themeLinkElement.href=t:this.loadTheme(t))}loadTheme(t){this._themeLinkElement=this.document.createElement("link"),this._themeLinkElement.href=t,this._themeLinkElement.type="text/css",this._themeLinkElement.rel="stylesheet",this._themeLinkElement.media="screen,print",this.document.head.appendChild(this._themeLinkElement)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),QA=n=>ji(n).pipe(vi(e=>!!e?.default),lt(e=>e.default)),Wre=(()=>{class n{constructor(){this.loader=E(Gre),this.options=E(JA,{optional:!0}),this.hljsSignal=ul(null),this.hljs=Fh(()=>this.hljsSignal()),this.loader.ready.then(t=>{this.hljsSignal.set(t),this.options?.highlightOptions&&t.configure(this.options.highlightOptions)})}highlight(t,i){return xi(this,null,function*(){return(yield this.loader.ready).highlight(t,i)})}highlightAuto(t,i){return xi(this,null,function*(){return(yield this.loader.ready).highlightAuto(t,i)})}highlightElement(t){return xi(this,null,function*(){(yield this.loader.ready).highlightElement(t)})}highlightAll(){return xi(this,null,function*(){(yield this.loader.ready).highlightAll()})}configure(t){return xi(this,null,function*(){(yield this.loader.ready).configure(t)})}registerLanguage(t,i){return xi(this,null,function*(){(yield this.loader.ready).registerLanguage(t,i)})}unregisterLanguage(t){return xi(this,null,function*(){(yield this.loader.ready).unregisterLanguage(t)})}registerAliases(r,o){return xi(this,arguments,function*(t,{languageName:i}){(yield this.loader.ready).registerAliases(t,{languageName:i})})}listLanguages(){return xi(this,null,function*(){return(yield this.loader.ready).listLanguages()})}getLanguage(t){return xi(this,null,function*(){return(yield this.loader.ready).getLanguage(t)})}safeMode(){return xi(this,null,function*(){(yield this.loader.ready).safeMode()})}debugMode(){return xi(this,null,function*(){(yield this.loader.ready).debugMode()})}lineNumbersBlock(t,i){return xi(this,null,function*(){let r=yield this.loader.ready;r.lineNumbersBlock&&r.lineNumbersBlock(t,i)})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),KA;function $re(){if(!KA)try{KA=window?.trustedTypes?.createPolicy("ngx-highlightjs",{createHTML:n=>n})}catch{}return KA}function qre(n){return $re()?.createHTML(n)||n}var vV=(()=>{class n{constructor(){this._hljs=E(Wre),this._nativeElement=E(_t).nativeElement,this._sanitizer=E(Nm),this._platform=E(is),Dm(this._platform)&&(kh(()=>{let t=this.code();this.setTextContent(t||""),t&&this.highlightElement(t)}),kh(()=>{let t=this.highlightResult();this.setInnerHTML(t?.value),this.highlighted.emit(t)}))}setTextContent(t){requestAnimationFrame(()=>this._nativeElement.textContent=t)}setInnerHTML(t){requestAnimationFrame(()=>this._nativeElement.innerHTML=qre(this._sanitizer.sanitize(ar.HTML,t)||""))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ue({type:n,standalone:!1})}}return n})(),xV=(()=>{class n extends vV{constructor(){super(...arguments),this.code=Uy(null,{alias:"highlight"}),this.highlightResult=ul(null),this.highlighted=new rt}highlightElement(t){return xi(this,null,function*(){let i=yield this._hljs.highlight(t,{language:this.language,ignoreIllegals:this.ignoreIllegals});this.highlightResult.set(i)})}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275dir=Ue({type:n,selectors:[["","highlight",""]],hostVars:2,hostBindings:function(i,r){i&2&&Vt("hljs",!0)},inputs:{code:[1,"highlight","code"],language:"language",ignoreIllegals:[2,"ignoreIllegals","ignoreIllegals",Si]},outputs:{highlighted:"highlighted"},features:[J([{provide:vV,useExisting:n}]),q]})}}return n})();var wV=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Ke({type:n})}static{this.\u0275inj=Qe({})}}return n})();function MV(n){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!]))?/.test(n)}var Yre=new ye("GIST_OPTIONS");var Zre=(()=>{class n{constructor(){this._http=E(Fm),this._options=E(Yre,{optional:!0})}getCodeFromGist(t){let i;return this._options?.clientId&&this._options?.clientSecret&&(i=new wa().set("client_id",this._options.clientId).set("client_secret",this._options.clientSecret)),this.fetchFile(`https://api.github.com/gists/${t}`,{params:i,responseType:"json"})}getCodeFromUrl(t){return this.fetchFile(t,{responseType:"text"})}fetchFile(t,i){return MV(t)?this._http.get(t,i).pipe(nl(1),qr(r=>(console.error("[NgxHighlight]: Unable to fetch the URL!",r.message),_n))):_n}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Qre=new ye("HIGHLIGHT_FILE_LOCATION",{providedIn:"root",factory:Kre});function Kre(){let n=E(Pt)?.location;return{getPathname:()=>n?n.origin:""}}var SV=(()=>{class n{constructor(){this._location=E(Qre),this._loader=E(Zre)}transform(t){return this._loader.getCodeFromUrl(MV(t)?t:`${this._location.getPathname()}/${t}`)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=rs({name:"codeFromUrl",type:n,pure:!0})}}return n})(),TV=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Ke({type:n})}static{this.\u0275inj=Qe({})}}return n})();function eoe(n,e){if(n&1&&(U(0,"mat-tab",2)(1,"pre"),It(2,"              "),ae(3,"code",5),Bi(4,"codeFromUrl"),Bi(5,"async"),It(6,`
            `),Q()()),n&2){let t=e.$implicit,i=e.$index,r=Ht();O("label",r.fileNames[i]),k(3),O("highlight",Yi(5,5,Yi(4,3,t)))("language",r.getLanguage(r.fileNames[i]))}}var RV=(()=>{class n{constructor(t){this.editorService=t,this.fileNames=[],this.lineNumbers=!1}set codeUrls(t){this.editorService.setUrls(t),this.fileNames=this.editorService.fileNames}get codeUrls(){return this.editorService.urls}getLanguage(t){return this.editorService.getLanguage(t)}static{this.\u0275fac=function(i){return new(i||n)(be(Ga))}}static{this.\u0275cmp=j({type:n,selectors:[["app-code"]],inputs:{codeUrls:"codeUrls",lineNumbers:"lineNumbers"},standalone:!1,decls:15,vars:0,consts:[[1,"code-wrapper","hljs"],["dynamicHeight","","color","primary","backgroundColor","primary"],[3,"label"],["align","end"],["mat-button","","href","#",1,"gist-url",3,"click"],[3,"highlight","language"]],template:function(i,r){i&1&&(U(0,"mat-card")(1,"mat-card-content")(2,"div",0)(3,"mat-tab-group",1),cr(4,eoe,7,7,"mat-tab",2,wr),Q()()(),U(6,"mat-card-actions",3)(7,"button",4),De("click",function(s){return r.editorService.toCodeSandbox(s)}),U(8,"mat-icon"),It(9,"crop_din"),Q(),It(10," CodeSandbox "),Q(),U(11,"button",4),De("click",function(s){return r.editorService.toStackblitz(s)}),U(12,"mat-icon"),It(13,"bolt"),Q(),It(14," Stackblitz "),Q()()()),i&2&&(k(4),dr(r.codeUrls))},dependencies:[bM,xM,rV,sV,oV,YA,bV,xV,c0,SV],styles:["pre[_ngcontent-%COMP%]{display:flex;margin-top:0;margin-bottom:0;word-wrap:break-word}pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{flex:1;line-height:1.8em;font-size:14px;min-height:100%;padding:1em 1.2em}pre[_ngcontent-%COMP%]   code.hljs-line-numbers[_ngcontent-%COMP%]{padding:0}.mat-mdc-card[_ngcontent-%COMP%]{padding:0;margin-bottom:3em}.mat-card-header[_ngcontent-%COMP%]{margin:0!important;padding:0!important;display:flex;align-items:center;height:40px}.mat-card-content[_ngcontent-%COMP%]{position:relative;overflow:hidden;padding:1px;margin-bottom:0}.mat-card-footer[_ngcontent-%COMP%]{padding:10px!important;margin:0!important;display:flex;flex-direction:row-reverse}.mat-card-footer[_ngcontent-%COMP%]   .gist-url[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:300;font-size:13px;text-decoration:unset}.mat-card-footer[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.mat-icon[_ngcontent-%COMP%]{margin:0 3px}.code-wrapper[_ngcontent-%COMP%]{border-radius:3px 3px 0 0}  .hljs{padding:0;border:none;transition:border ease 1s}  .hljs-ln{padding:10px 0}  .hljs-ln tr:first-child td{padding-top:10px!important}  .hljs-ln tr:last-child td{padding-bottom:10px!important}  td.hljs-ln-numbers{-webkit-user-select:none;user-select:none;text-align:center;color:#cccccc6b;border-right:1px solid rgba(204,204,204,.1098039216);vertical-align:top;padding-right:10px!important;padding-left:10px!important}  td.hljs-ln-code{padding-left:10px!important}"],changeDetection:0})}}return n})();function ioe(n,e){n&1&&Dh(0)}var CV=(()=>{class n{constructor(t,i){this.editorService=t,this.route=i,this.exampleComponent=null,this.codeUrls=this.route.snapshot.data.codeUrls??[],this.editorService.declarations=this.route.snapshot.data.declarations,this.exampleComponent=this.route.snapshot.data.exampleComponent}static{this.\u0275fac=function(i){return new(i||n)(be(Ga),be(_l))}}static{this.\u0275cmp=j({type:n,selectors:[["app-example-page"]],standalone:!1,decls:3,vars:3,consts:[[1,"example-container"],[4,"ngComponentOutlet"],[3,"lineNumbers","codeUrls"]],template:function(i,r){i&1&&(U(0,"div",0),Ni(1,ioe,1,0,"ng-container",1),Q(),ae(2,"app-code",2)),i&2&&(k(),O("ngComponentOutlet",r.exampleComponent),k(),O("lineNumbers",!0)("codeUrls",r.codeUrls))},dependencies:[ON,RV],encapsulation:2,changeDetection:0})}}return n})();var mn=class{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}},noe=new yo(-1,1,1,-1,0,1),eI=class extends bt{constructor(){super(),this.setAttribute("position",new Ne([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Ne([0,2,0,0,2,0],2))}},roe=new eI,_r=class{constructor(e){this._mesh=new ke(roe,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,noe)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}};var br={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};var Rp=class extends mn{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof Et?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Hi.clone(e.uniforms),this.material=new Et({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new _r(this.material)}render(e,t,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}};var bb=class extends mn{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,i){let r=e.getContext(),o=e.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0);let s,a;this.inverse?(s=0,a=1):(s=1,a=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),o.buffers.stencil.setFunc(r.ALWAYS,s,4294967295),o.buffers.stencil.setClear(a),o.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.color.setMask(!0),o.buffers.depth.setMask(!0),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(r.EQUAL,1,4294967295),o.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),o.buffers.stencil.setLocked(!0)}},DM=class extends mn{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}};var AM=class{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){let i=e.getSize(new V);this._width=i.width,this._height=i.height,t=new ti(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:zi}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Rp(br),this.copyPass.material.blending=ii,this.clock=new eo}swapBuffers(){let e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){let t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());let t=this.renderer.getRenderTarget(),i=!1;for(let r=0,o=this.passes.length;r<o;r++){let s=this.passes[r];if(s.enabled!==!1){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),s.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),s.needsSwap){if(i){let a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}bb!==void 0&&(s instanceof bb?i=!0:s instanceof DM&&(i=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){let t=this.renderer.getSize(new V);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;let i=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(i,r),this.renderTarget2.setSize(i,r);for(let o=0;o<this.passes.length;o++)this.passes[o].setSize(i,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}};var ooe=["*"],EV=(()=>{class n extends to{getType(){return AM}set renderer(t){this._objRef&&(this._objRef.renderer=t)}get renderer(){return this._objRef?.renderer}set renderTarget1(t){this._objRef&&(this._objRef.renderTarget1=t)}get renderTarget1(){return this._objRef?.renderTarget1}set renderTarget2(t){this._objRef&&(this._objRef.renderTarget2=t)}get renderTarget2(){return this._objRef?.renderTarget2}set writeBuffer(t){this._objRef&&(this._objRef.writeBuffer=t)}get writeBuffer(){return this._objRef?.writeBuffer}set readBuffer(t){this._objRef&&(this._objRef.readBuffer=t)}get readBuffer(){return this._objRef?.readBuffer}set passes(t){this._objRef&&(this._objRef.passes=t)}get passes(){return this._objRef?.passes}set copyPass(t){this._objRef&&(this._objRef.copyPass=t)}get copyPass(){return this._objRef?.copyPass}set clock(t){this._objRef&&(this._objRef.clock=t)}get clock(){return this._objRef?.clock}set renderToScreen(t){this._objRef&&(this._objRef.renderToScreen=t)}get renderToScreen(){return this._objRef?.renderToScreen}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-effectComposerGen"]],inputs:{renderer:"renderer",renderTarget1:"renderTarget1",renderTarget2:"renderTarget2",writeBuffer:"writeBuffer",readBuffer:"readBuffer",passes:"passes",copyPass:"copyPass",clock:"clock",renderToScreen:"renderToScreen"},standalone:!1,features:[J([]),q],ngContentSelectors:ooe,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var soe=["*"],$a=(()=>{class n extends EV{constructor(t,i){super(),this.view=t,this.engineService=i}createThreeInstance(t){return t||(t=new Array(5)),t[0]=t[0]??this.engineService.wegblRenderer,t[1]=t[1]??this.initRenderTarget(),super.createThreeInstance(t)}initRenderTarget(){if(this.view.viewPort){let t,i;return this.view.viewPort instanceof li?(t=this.view.viewPort.z,i=this.view.viewPort?.width):(t=this.view.viewPort.width,i=this.view.viewPort.height),new ti(t,i)}else return}addToParent(){this._objRef&&(this.view.effectComposer=this._objRef)}removeFromParent(){this.view.effectComposer=void 0}static{this.\u0275fac=function(i){return new(i||n)(be(zr),be(So))}}static{this.\u0275cmp=j({type:n,selectors:[["th-effectComposer"]],standalone:!1,features:[J([]),q],ngContentSelectors:soe,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var gi=(()=>{class n extends to{constructor(t){super(),this.effectComposer=t}addToParent(){this._objRef&&this.effectComposer&&this.effectComposer.objRef&&this.effectComposer.objRef.addPass(this._objRef)}removeFromParent(){this._objRef&&this.effectComposer&&this.effectComposer.objRef&&this.effectComposer.objRef.removePass(this._objRef)}static{this.\u0275fac=function(i){return new(i||n)(be($a,8))}}static{this.\u0275cmp=j({type:n,selectors:[["th-abs-control"]],standalone:!1,features:[q],decls:0,vars:0,template:function(i,r){},encapsulation:2,changeDetection:0})}}return n})();var aoe=["*"],Pi=(()=>{class n extends gi{getType(){return mn}set isPass(t){this._objRef&&(this._objRef.isPass=t)}get isPass(){return this._objRef?.isPass}set enabled(t){this._objRef&&(this._objRef.enabled=t)}get enabled(){return this._objRef?.enabled}set needsSwap(t){this._objRef&&(this._objRef.needsSwap=t)}get needsSwap(){return this._objRef?.needsSwap}set clear(t){this._objRef&&(this._objRef.clear=t)}get clear(){return this._objRef?.clear}set renderToScreen(t){this._objRef&&(this._objRef.renderToScreen=t)}get renderToScreen(){return this._objRef?.renderToScreen}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-pass"]],inputs:{isPass:"isPass",enabled:"enabled",needsSwap:"needsSwap",clear:"clear",renderToScreen:"renderToScreen"},standalone:!1,features:[J([{provide:gi,useExisting:_e(()=>n)}]),q],ngContentSelectors:aoe,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var yt={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},qi={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},oi={x:0,y:0},qo={camera:new Ie,gizmos:new Ie},dn={type:"change"},aa={type:"start"},ws={type:"end"},loe=new Nr,Zn=new w,DV=new Ie,AV=new Ie,sa=new w,IM=class extends pr{constructor(e,t=null,i=null){super(e,t),this.scene=i,this.target=new w,this._currentTarget=new w,this.radiusFactor=.67,this.mouseActions=[],this._mouseOp=null,this._v2_1=new V,this._v3_1=new w,this._v3_2=new w,this._m4_1=new Ie,this._m4_2=new Ie,this._quat=new Yt,this._translationMatrix=new Ie,this._rotationMatrix=new Ie,this._scaleMatrix=new Ie,this._rotationAxis=new w,this._cameraMatrixState=new Ie,this._cameraProjectionState=new Ie,this._fovState=1,this._upState=new w,this._zoomState=1,this._nearPos=0,this._farPos=0,this._gizmoMatrixState=new Ie,this._up0=new w,this._zoom0=1,this._fov0=0,this._initialNear=0,this._nearPos0=0,this._initialFar=0,this._farPos0=0,this._cameraMatrixState0=new Ie,this._gizmoMatrixState0=new Ie,this._button=-1,this._touchStart=[],this._touchCurrent=[],this._input=qi.NONE,this._switchSensibility=32,this._startFingerDistance=0,this._currentFingerDistance=0,this._startFingerRotation=0,this._currentFingerRotation=0,this._devPxRatio=0,this._downValid=!0,this._nclicks=0,this._downEvents=[],this._downStart=0,this._clickStart=0,this._maxDownTime=250,this._maxInterval=300,this._posThreshold=24,this._movementThreshold=24,this._currentCursorPosition=new w,this._startCursorPosition=new w,this._grid=null,this._gridPosition=new w,this._gizmos=new Tr,this._curvePts=128,this._timeStart=-1,this._animationId=-1,this.focusAnimationTime=500,this._timePrev=0,this._timeCurrent=0,this._anglePrev=0,this._angleCurrent=0,this._cursorPosPrev=new w,this._cursorPosCurr=new w,this._wPrev=0,this._wCurr=0,this.adjustNearFar=!1,this.scaleFactor=1.1,this.dampingFactor=25,this.wMax=20,this.enableAnimations=!0,this.enableGrid=!1,this.cursorZoom=!1,this.minFov=5,this.maxFov=90,this.rotateSpeed=1,this.enablePan=!0,this.enableRotate=!0,this.enableZoom=!0,this.enableGizmos=!0,this.enableFocus=!0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this._tbRadius=1,this._state=yt.IDLE,this.setCamera(e),this.scene!=null&&this.scene.add(this._gizmos),this.initializeMouseActions(),this._onContextMenu=doe.bind(this),this._onWheel=moe.bind(this),this._onPointerUp=poe.bind(this),this._onPointerMove=foe.bind(this),this._onPointerDown=hoe.bind(this),this._onPointerCancel=uoe.bind(this),this._onWindowResize=coe.bind(this),t!==null&&this.connect()}connect(){this.domElement.style.touchAction="none",this._devPxRatio=window.devicePixelRatio,this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onWheel),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),window.addEventListener("resize",this._onWindowResize)}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),window.removeEventListener("resize",this._onWindowResize)}onSinglePanStart(e,t){if(this.enabled)switch(this.dispatchEvent(aa),this.setCenter(e.clientX,e.clientY),t){case"PAN":if(!this.enablePan)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(dn)),this.updateTbState(yt.PAN,!0),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.object,oi.x,oi.y,this.domElement)),this.enableGrid&&(this.drawGrid(),this.dispatchEvent(dn));break;case"ROTATE":if(!this.enableRotate)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1),this.updateTbState(yt.ROTATE,!0),this._startCursorPosition.copy(this.unprojectOnTbSurface(this.object,oi.x,oi.y,this.domElement,this._tbRadius)),this.activateGizmos(!0),this.enableAnimations&&(this._timePrev=this._timeCurrent=performance.now(),this._angleCurrent=this._anglePrev=0,this._cursorPosPrev.copy(this._startCursorPosition),this._cursorPosCurr.copy(this._cursorPosPrev),this._wCurr=0,this._wPrev=this._wCurr),this.dispatchEvent(dn);break;case"FOV":if(!this.object.isPerspectiveCamera||!this.enableZoom)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(dn)),this.updateTbState(yt.FOV,!0),this._startCursorPosition.setY(this.getCursorNDC(oi.x,oi.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition);break;case"ZOOM":if(!this.enableZoom)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(dn)),this.updateTbState(yt.SCALE,!0),this._startCursorPosition.setY(this.getCursorNDC(oi.x,oi.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition);break}}onSinglePanMove(e,t){if(this.enabled){let i=t!=this._state;switch(this.setCenter(e.clientX,e.clientY),t){case yt.PAN:this.enablePan&&(i?(this.dispatchEvent(ws),this.dispatchEvent(aa),this.updateTbState(t,!0),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.object,oi.x,oi.y,this.domElement)),this.enableGrid&&this.drawGrid(),this.activateGizmos(!1)):(this._currentCursorPosition.copy(this.unprojectOnTbPlane(this.object,oi.x,oi.y,this.domElement)),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition))));break;case yt.ROTATE:if(this.enableRotate)if(i)this.dispatchEvent(ws),this.dispatchEvent(aa),this.updateTbState(t,!0),this._startCursorPosition.copy(this.unprojectOnTbSurface(this.object,oi.x,oi.y,this.domElement,this._tbRadius)),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!0);else{this._currentCursorPosition.copy(this.unprojectOnTbSurface(this.object,oi.x,oi.y,this.domElement,this._tbRadius));let r=this._startCursorPosition.distanceTo(this._currentCursorPosition),o=this._startCursorPosition.angleTo(this._currentCursorPosition),s=Math.max(r/this._tbRadius,o)*this.rotateSpeed;this.applyTransformMatrix(this.rotate(this.calculateRotationAxis(this._startCursorPosition,this._currentCursorPosition),s)),this.enableAnimations&&(this._timePrev=this._timeCurrent,this._timeCurrent=performance.now(),this._anglePrev=this._angleCurrent,this._angleCurrent=s,this._cursorPosPrev.copy(this._cursorPosCurr),this._cursorPosCurr.copy(this._currentCursorPosition),this._wPrev=this._wCurr,this._wCurr=this.calculateAngularSpeed(this._anglePrev,this._angleCurrent,this._timePrev,this._timeCurrent))}break;case yt.SCALE:if(this.enableZoom)if(i)this.dispatchEvent(ws),this.dispatchEvent(aa),this.updateTbState(t,!0),this._startCursorPosition.setY(this.getCursorNDC(oi.x,oi.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(oi.x,oi.y,this.domElement).y*.5);let o=this._currentCursorPosition.y-this._startCursorPosition.y,s=1;o<0?s=1/Math.pow(this.scaleFactor,-o*8):o>0&&(s=Math.pow(this.scaleFactor,o*8)),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this.applyTransformMatrix(this.scale(s,this._v3_1))}break;case yt.FOV:if(this.enableZoom&&this.object.isPerspectiveCamera)if(i)this.dispatchEvent(ws),this.dispatchEvent(aa),this.updateTbState(t,!0),this._startCursorPosition.setY(this.getCursorNDC(oi.x,oi.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(oi.x,oi.y,this.domElement).y*.5);let o=this._currentCursorPosition.y-this._startCursorPosition.y,s=1;o<0?s=1/Math.pow(this.scaleFactor,-o*8):o>0&&(s=Math.pow(this.scaleFactor,o*8)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);let a=this._v3_1.distanceTo(this._gizmos.position),l=a/s;l=it.clamp(l,this.minDistance,this.maxDistance);let c=a*Math.tan(it.DEG2RAD*this._fovState*.5),d=it.RAD2DEG*(Math.atan(c/l)*2);d=it.clamp(d,this.minFov,this.maxFov);let u=c/Math.tan(it.DEG2RAD*(d/2));s=a/u,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.scale(s,this._v3_2,!1)),Zn.copy(this._gizmos.position).sub(this.object.position).normalize().multiplyScalar(u/a),this._m4_1.makeTranslation(Zn.x,Zn.y,Zn.z)}break}this.dispatchEvent(dn)}}onSinglePanEnd(){if(this._state==yt.ROTATE){if(!this.enableRotate)return;if(this.enableAnimations)if(performance.now()-this._timeCurrent<120){let t=Math.abs((this._wPrev+this._wCurr)/2),i=this;this._animationId=window.requestAnimationFrame(function(r){i.updateTbState(yt.ANIMATION_ROTATE,!0);let o=i.calculateRotationAxis(i._cursorPosPrev,i._cursorPosCurr);i.onRotationAnim(r,o,Math.min(t,i.wMax))})}else this.updateTbState(yt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(dn);else this.updateTbState(yt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(dn)}else(this._state==yt.PAN||this._state==yt.IDLE)&&(this.updateTbState(yt.IDLE,!1),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1),this.dispatchEvent(dn));this.dispatchEvent(ws)}onDoubleTap(e){if(this.enabled&&this.enablePan&&this.enableFocus&&this.scene!=null){this.dispatchEvent(aa),this.setCenter(e.clientX,e.clientY);let t=this.unprojectOnObj(this.getCursorNDC(oi.x,oi.y,this.domElement),this.object);if(t!=null&&this.enableAnimations){let i=this;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),this._timeStart=-1,this._animationId=window.requestAnimationFrame(function(r){i.updateTbState(yt.ANIMATION_FOCUS,!0),i.onFocusAnim(r,t,i._cameraMatrixState,i._gizmoMatrixState)})}else t!=null&&!this.enableAnimations&&(this.updateTbState(yt.FOCUS,!0),this.focus(t,this.scaleFactor),this.updateTbState(yt.IDLE,!1),this.dispatchEvent(dn))}this.dispatchEvent(ws)}onDoublePanStart(){this.enabled&&this.enablePan&&(this.dispatchEvent(aa),this.updateTbState(yt.PAN,!0),this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.object,oi.x,oi.y,this.domElement,!0)),this._currentCursorPosition.copy(this._startCursorPosition),this.activateGizmos(!1))}onDoublePanMove(){this.enabled&&this.enablePan&&(this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=yt.PAN&&(this.updateTbState(yt.PAN,!0),this._startCursorPosition.copy(this._currentCursorPosition)),this._currentCursorPosition.copy(this.unprojectOnTbPlane(this.object,oi.x,oi.y,this.domElement,!0)),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition,!0)),this.dispatchEvent(dn))}onDoublePanEnd(){this.updateTbState(yt.IDLE,!1),this.dispatchEvent(ws)}onRotateStart(){this.enabled&&this.enableRotate&&(this.dispatchEvent(aa),this.updateTbState(yt.ZROTATE,!0),this._startFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this._currentFingerRotation=this._startFingerRotation,this.object.getWorldDirection(this._rotationAxis),!this.enablePan&&!this.enableZoom&&this.activateGizmos(!0))}onRotateMove(){if(this.enabled&&this.enableRotate){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let e;this._state!=yt.ZROTATE&&(this.updateTbState(yt.ZROTATE,!0),this._startFingerRotation=this._currentFingerRotation),this._currentFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this.enablePan?(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),e=this.unprojectOnTbPlane(this.object,oi.x,oi.y,this.domElement).applyQuaternion(this.object.quaternion).multiplyScalar(1/this.object.zoom).add(this._v3_2)):e=new w().setFromMatrixPosition(this._gizmoMatrixState);let t=it.DEG2RAD*(this._startFingerRotation-this._currentFingerRotation);this.applyTransformMatrix(this.zRotate(e,t)),this.dispatchEvent(dn)}}onRotateEnd(){this.updateTbState(yt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(ws)}onPinchStart(){this.enabled&&this.enableZoom&&(this.dispatchEvent(aa),this.updateTbState(yt.SCALE,!0),this._startFingerDistance=this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),this._currentFingerDistance=this._startFingerDistance,this.activateGizmos(!1))}onPinchMove(){if(this.enabled&&this.enableZoom){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let e=12;this._state!=yt.SCALE&&(this._startFingerDistance=this._currentFingerDistance,this.updateTbState(yt.SCALE,!0)),this._currentFingerDistance=Math.max(this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),e*this._devPxRatio);let t=this._currentFingerDistance/this._startFingerDistance,i;this.enablePan?this.object.isOrthographicCamera?i=this.unprojectOnTbPlane(this.object,oi.x,oi.y,this.domElement).applyQuaternion(this.object.quaternion).multiplyScalar(1/this.object.zoom).add(this._gizmos.position):this.object.isPerspectiveCamera&&(i=this.unprojectOnTbPlane(this.object,oi.x,oi.y,this.domElement).applyQuaternion(this.object.quaternion).add(this._gizmos.position)):i=this._gizmos.position,this.applyTransformMatrix(this.scale(t,i)),this.dispatchEvent(dn)}}onPinchEnd(){this.updateTbState(yt.IDLE,!1),this.dispatchEvent(ws)}onTriplePanStart(){if(this.enabled&&this.enableZoom){this.dispatchEvent(aa),this.updateTbState(yt.SCALE,!0);let e=0,t=0,i=this._touchCurrent.length;for(let r=0;r<i;r++)e+=this._touchCurrent[r].clientX,t+=this._touchCurrent[r].clientY;this.setCenter(e/i,t/i),this._startCursorPosition.setY(this.getCursorNDC(oi.x,oi.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition)}}onTriplePanMove(){if(this.enabled&&this.enableZoom){let e=0,t=0,i=this._touchCurrent.length;for(let h=0;h<i;h++)e+=this._touchCurrent[h].clientX,t+=this._touchCurrent[h].clientY;this.setCenter(e/i,t/i);let r=8;this._currentCursorPosition.setY(this.getCursorNDC(oi.x,oi.y,this.domElement).y*.5);let o=this._currentCursorPosition.y-this._startCursorPosition.y,s=1;o<0?s=1/Math.pow(this.scaleFactor,-o*r):o>0&&(s=Math.pow(this.scaleFactor,o*r)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);let a=this._v3_1.distanceTo(this._gizmos.position),l=a/s;l=it.clamp(l,this.minDistance,this.maxDistance);let c=a*Math.tan(it.DEG2RAD*this._fovState*.5),d=it.RAD2DEG*(Math.atan(c/l)*2);d=it.clamp(d,this.minFov,this.maxFov);let u=c/Math.tan(it.DEG2RAD*(d/2));s=a/u,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.scale(s,this._v3_2,!1)),Zn.copy(this._gizmos.position).sub(this.object.position).normalize().multiplyScalar(u/a),this._m4_1.makeTranslation(Zn.x,Zn.y,Zn.z),this.dispatchEvent(dn)}}onTriplePanEnd(){this.updateTbState(yt.IDLE,!1),this.dispatchEvent(ws)}setCenter(e,t){oi.x=e,oi.y=t}initializeMouseActions(){this.setMouseAction("PAN",0,"CTRL"),this.setMouseAction("PAN",2),this.setMouseAction("ROTATE",0),this.setMouseAction("ZOOM","WHEEL"),this.setMouseAction("ZOOM",1),this.setMouseAction("FOV","WHEEL","SHIFT"),this.setMouseAction("FOV",1,"SHIFT")}compareMouseAction(e,t){return e.operation==t.operation?e.mouse==t.mouse&&e.key==t.key:!1}setMouseAction(e,t,i=null){let r=["PAN","ROTATE","ZOOM","FOV"],o=[0,1,2,"WHEEL"],s=["CTRL","SHIFT",null],a;if(!r.includes(e)||!o.includes(t)||!s.includes(i)||t=="WHEEL"&&e!="ZOOM"&&e!="FOV")return!1;switch(e){case"PAN":a=yt.PAN;break;case"ROTATE":a=yt.ROTATE;break;case"ZOOM":a=yt.SCALE;break;case"FOV":a=yt.FOV;break}let l={operation:e,mouse:t,key:i,state:a};for(let c=0;c<this.mouseActions.length;c++)if(this.mouseActions[c].mouse==l.mouse&&this.mouseActions[c].key==l.key)return this.mouseActions.splice(c,1,l),!0;return this.mouseActions.push(l),!0}unsetMouseAction(e,t=null){for(let i=0;i<this.mouseActions.length;i++)if(this.mouseActions[i].mouse==e&&this.mouseActions[i].key==t)return this.mouseActions.splice(i,1),!0;return!1}getOpFromAction(e,t){let i;for(let r=0;r<this.mouseActions.length;r++)if(i=this.mouseActions[r],i.mouse==e&&i.key==t)return i.operation;if(t!=null){for(let r=0;r<this.mouseActions.length;r++)if(i=this.mouseActions[r],i.mouse==e&&i.key==null)return i.operation}return null}getOpStateFromAction(e,t){let i;for(let r=0;r<this.mouseActions.length;r++)if(i=this.mouseActions[r],i.mouse==e&&i.key==t)return i.state;if(t!=null){for(let r=0;r<this.mouseActions.length;r++)if(i=this.mouseActions[r],i.mouse==e&&i.key==null)return i.state}return null}getAngle(e,t){return Math.atan2(t.clientY-e.clientY,t.clientX-e.clientX)*180/Math.PI}updateTouchEvent(e){for(let t=0;t<this._touchCurrent.length;t++)if(this._touchCurrent[t].pointerId==e.pointerId){this._touchCurrent.splice(t,1,e);break}}applyTransformMatrix(e){if(e.camera!=null&&(this._m4_1.copy(this._cameraMatrixState).premultiply(e.camera),this._m4_1.decompose(this.object.position,this.object.quaternion,this.object.scale),this.object.updateMatrix(),(this._state==yt.ROTATE||this._state==yt.ZROTATE||this._state==yt.ANIMATION_ROTATE)&&this.object.up.copy(this._upState).applyQuaternion(this.object.quaternion)),e.gizmos!=null&&(this._m4_1.copy(this._gizmoMatrixState).premultiply(e.gizmos),this._m4_1.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix()),this._state==yt.SCALE||this._state==yt.FOCUS||this._state==yt.ANIMATION_FOCUS)if(this._tbRadius=this.calculateTbRadius(this.object),this.adjustNearFar){let t=this.object.position.distanceTo(this._gizmos.position),i=new vn;i.setFromObject(this._gizmos);let r=new Tn;i.getBoundingSphere(r);let o=Math.max(this._nearPos0,r.radius+r.center.length()),s=t-this._initialNear,a=Math.min(o,s);this.object.near=t-a;let l=Math.min(this._farPos0,-r.radius+r.center.length()),c=t-this._initialFar,d=Math.min(l,c);this.object.far=t-d,this.object.updateProjectionMatrix()}else{let t=!1;this.object.near!=this._initialNear&&(this.object.near=this._initialNear,t=!0),this.object.far!=this._initialFar&&(this.object.far=this._initialFar,t=!0),t&&this.object.updateProjectionMatrix()}}calculateAngularSpeed(e,t,i,r){let o=t-e,s=(r-i)/1e3;return s==0?0:o/s}calculatePointersDistance(e,t){return Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2))}calculateRotationAxis(e,t){return this._rotationMatrix.extractRotation(this._cameraMatrixState),this._quat.setFromRotationMatrix(this._rotationMatrix),this._rotationAxis.crossVectors(e,t).applyQuaternion(this._quat),this._rotationAxis.normalize().clone()}calculateTbRadius(e){let t=e.position.distanceTo(this._gizmos.position);if(e.type=="PerspectiveCamera"){let i=it.DEG2RAD*e.fov*.5,r=Math.atan(e.aspect*Math.tan(i));return Math.tan(Math.min(i,r))*t*this.radiusFactor}else if(e.type=="OrthographicCamera")return Math.min(e.top,e.right)*this.radiusFactor}focus(e,t,i=1){Zn.copy(e).sub(this._gizmos.position).multiplyScalar(i),this._translationMatrix.makeTranslation(Zn.x,Zn.y,Zn.z),DV.copy(this._gizmoMatrixState),this._gizmoMatrixState.premultiply(this._translationMatrix),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),AV.copy(this._cameraMatrixState),this._cameraMatrixState.premultiply(this._translationMatrix),this._cameraMatrixState.decompose(this.object.position,this.object.quaternion,this.object.scale),this.enableZoom&&this.applyTransformMatrix(this.scale(t,this._gizmos.position)),this._gizmoMatrixState.copy(DV),this._cameraMatrixState.copy(AV)}drawGrid(){if(this.scene!=null){let i,r,o,s;if(this.object.isOrthographicCamera){let a=this.object.right-this.object.left,l=this.object.bottom-this.object.top;o=Math.max(a,l),s=o/20,i=o/this.object.zoom*3,r=i/s*this.object.zoom}else if(this.object.isPerspectiveCamera){let a=this.object.position.distanceTo(this._gizmos.position),l=it.DEG2RAD*this.object.fov*.5,c=Math.atan(this.object.aspect*Math.tan(l));o=Math.tan(Math.max(l,c))*a*2,s=o/20,i=o*3,r=i/s}this._grid==null&&(this._grid=new Lc(i,r,8947848,8947848),this._grid.position.copy(this._gizmos.position),this._gridPosition.copy(this._grid.position),this._grid.quaternion.copy(this.object.quaternion),this._grid.rotateX(Math.PI*.5),this.scene.add(this._grid))}}dispose(){this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),this.disconnect(),this.scene!==null&&this.scene.remove(this._gizmos),this.disposeGrid()}disposeGrid(){this._grid!=null&&this.scene!=null&&(this.scene.remove(this._grid),this._grid=null)}easeOutCubic(e){return 1-Math.pow(1-e,3)}activateGizmos(e){let t=this._gizmos.children[0],i=this._gizmos.children[1],r=this._gizmos.children[2];e?(t.material.setValues({opacity:1}),i.material.setValues({opacity:1}),r.material.setValues({opacity:1})):(t.material.setValues({opacity:.6}),i.material.setValues({opacity:.6}),r.material.setValues({opacity:.6}))}getCursorNDC(e,t,i){let r=i.getBoundingClientRect();return this._v2_1.setX((e-r.left)/r.width*2-1),this._v2_1.setY((r.bottom-t)/r.height*2-1),this._v2_1.clone()}getCursorPosition(e,t,i){return this._v2_1.copy(this.getCursorNDC(e,t,i)),this._v2_1.x*=(this.object.right-this.object.left)*.5,this._v2_1.y*=(this.object.top-this.object.bottom)*.5,this._v2_1.clone()}setCamera(e){e.lookAt(this.target),e.updateMatrix(),e.type=="PerspectiveCamera"&&(this._fov0=e.fov,this._fovState=e.fov),this._cameraMatrixState0.copy(e.matrix),this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraProjectionState.copy(e.projectionMatrix),this._zoom0=e.zoom,this._zoomState=this._zoom0,this._initialNear=e.near,this._nearPos0=e.position.distanceTo(this.target)-e.near,this._nearPos=this._initialNear,this._initialFar=e.far,this._farPos0=e.position.distanceTo(this.target)-e.far,this._farPos=this._initialFar,this._up0.copy(e.up),this._upState.copy(e.up),this.object=e,this.object.updateProjectionMatrix(),this._tbRadius=this.calculateTbRadius(e),this.makeGizmos(this.target,this._tbRadius)}setGizmosVisible(e){this._gizmos.visible=e,this.dispatchEvent(dn)}setTbRadius(e){this.radiusFactor=e,this._tbRadius=this.calculateTbRadius(this.object);let i=new ms(0,0,this._tbRadius,this._tbRadius).getPoints(this._curvePts),r=new bt().setFromPoints(i);for(let o in this._gizmos.children)this._gizmos.children[o].geometry=r;this.dispatchEvent(dn)}makeGizmos(e,t){let r=new ms(0,0,t,t).getPoints(this._curvePts),o=new bt().setFromPoints(r),s=new an({color:16744576,fog:!1,transparent:!0,opacity:.6}),a=new an({color:8454016,fog:!1,transparent:!0,opacity:.6}),l=new an({color:8421631,fog:!1,transparent:!0,opacity:.6}),c=new Ki(o,s),d=new Ki(o,a),u=new Ki(o,l),h=Math.PI*.5;if(c.rotation.x=h,d.rotation.y=h,this._gizmoMatrixState0.identity().setPosition(e),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this.object.zoom!==1){let f=1/this.object.zoom;this._scaleMatrix.makeScale(f,f,f),this._translationMatrix.makeTranslation(-e.x,-e.y,-e.z),this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix),this._translationMatrix.makeTranslation(e.x,e.y,e.z),this._gizmoMatrixState.premultiply(this._translationMatrix)}this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.traverse(function(f){f.isLine&&(f.geometry.dispose(),f.material.dispose())}),this._gizmos.clear(),this._gizmos.add(c),this._gizmos.add(d),this._gizmos.add(u)}onFocusAnim(e,t,i,r){if(this._timeStart==-1&&(this._timeStart=e),this._state==yt.ANIMATION_FOCUS){let s=(e-this._timeStart)/this.focusAnimationTime;if(this._gizmoMatrixState.copy(r),s>=1)this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(t,this.scaleFactor),this._timeStart=-1,this.updateTbState(yt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(dn);else{let a=this.easeOutCubic(s),l=1-a+this.scaleFactor*a;this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(t,l,a),this.dispatchEvent(dn);let c=this;this._animationId=window.requestAnimationFrame(function(d){c.onFocusAnim(d,t,i,r.clone())})}}else this._animationId=-1,this._timeStart=-1}onRotationAnim(e,t,i){if(this._timeStart==-1&&(this._anglePrev=0,this._angleCurrent=0,this._timeStart=e),this._state==yt.ANIMATION_ROTATE){let r=(e-this._timeStart)/1e3;if(i+-this.dampingFactor*r>0){this._angleCurrent=.5*-this.dampingFactor*Math.pow(r,2)+i*r+0,this.applyTransformMatrix(this.rotate(t,this._angleCurrent)),this.dispatchEvent(dn);let s=this;this._animationId=window.requestAnimationFrame(function(a){s.onRotationAnim(a,t,i)})}else this._animationId=-1,this._timeStart=-1,this.updateTbState(yt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(dn)}else this._animationId=-1,this._timeStart=-1,this._state!=yt.ROTATE&&(this.activateGizmos(!1),this.dispatchEvent(dn))}pan(e,t,i=!1){let r=e.clone().sub(t);if(this.object.isOrthographicCamera)r.multiplyScalar(1/this.object.zoom);else if(this.object.isPerspectiveCamera&&i){this._v3_1.setFromMatrixPosition(this._cameraMatrixState0),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0);let o=this._v3_1.distanceTo(this._v3_2)/this.object.position.distanceTo(this._gizmos.position);r.multiplyScalar(1/o)}return this._v3_1.set(r.x,r.y,0).applyQuaternion(this.object.quaternion),this._m4_1.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z),this.setTransformationMatrices(this._m4_1,this._m4_1),qo}reset(){this.object.zoom=this._zoom0,this.object.isPerspectiveCamera&&(this.object.fov=this._fov0),this.object.near=this._nearPos,this.object.far=this._farPos,this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraMatrixState.decompose(this.object.position,this.object.quaternion,this.object.scale),this.object.up.copy(this._up0),this.object.updateMatrix(),this.object.updateProjectionMatrix(),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this._gizmoMatrixState0.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix(),this._tbRadius=this.calculateTbRadius(this.object),this.makeGizmos(this._gizmos.position,this._tbRadius),this.object.lookAt(this._gizmos.position),this.updateTbState(yt.IDLE,!1),this.dispatchEvent(dn)}rotate(e,t){let i=this._gizmos.position;return this._translationMatrix.makeTranslation(-i.x,-i.y,-i.z),this._rotationMatrix.makeRotationAxis(e,-t),this._m4_1.makeTranslation(i.x,i.y,i.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1),qo}copyState(){let e;this.object.isOrthographicCamera?e=JSON.stringify({arcballState:{cameraFar:this.object.far,cameraMatrix:this.object.matrix,cameraNear:this.object.near,cameraUp:this.object.up,cameraZoom:this.object.zoom,gizmoMatrix:this._gizmos.matrix}}):this.object.isPerspectiveCamera&&(e=JSON.stringify({arcballState:{cameraFar:this.object.far,cameraFov:this.object.fov,cameraMatrix:this.object.matrix,cameraNear:this.object.near,cameraUp:this.object.up,cameraZoom:this.object.zoom,gizmoMatrix:this._gizmos.matrix}})),navigator.clipboard.writeText(e)}pasteState(){let e=this;navigator.clipboard.readText().then(function(i){e.setStateFromJSON(i)})}saveState(){this._cameraMatrixState0.copy(this.object.matrix),this._gizmoMatrixState0.copy(this._gizmos.matrix),this._nearPos=this.object.near,this._farPos=this.object.far,this._zoom0=this.object.zoom,this._up0.copy(this.object.up),this.object.isPerspectiveCamera&&(this._fov0=this.object.fov)}scale(e,t,i=!0){sa.copy(t);let r=1/e;if(this.object.isOrthographicCamera){this.object.zoom=this._zoomState,this.object.zoom*=e,this.object.zoom>this.maxZoom?(this.object.zoom=this.maxZoom,r=this._zoomState/this.maxZoom):this.object.zoom<this.minZoom&&(this.object.zoom=this.minZoom,r=this._zoomState/this.minZoom),this.object.updateProjectionMatrix(),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this._scaleMatrix.makeScale(r,r,r),this._translationMatrix.makeTranslation(-this._v3_1.x,-this._v3_1.y,-this._v3_1.z),this._m4_2.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z).multiply(this._scaleMatrix),this._m4_2.multiply(this._translationMatrix),sa.sub(this._v3_1);let o=sa.clone().multiplyScalar(r);return sa.sub(o),this._m4_1.makeTranslation(sa.x,sa.y,sa.z),this._m4_2.premultiply(this._m4_1),this.setTransformationMatrices(this._m4_1,this._m4_2),qo}else if(this.object.isPerspectiveCamera){this._v3_1.setFromMatrixPosition(this._cameraMatrixState),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);let o=this._v3_1.distanceTo(sa),s=o-o*r,a=o-s;if(a<this.minDistance?(r=this.minDistance/o,s=o-o*r):a>this.maxDistance&&(r=this.maxDistance/o,s=o-o*r),Zn.copy(sa).sub(this._v3_1).normalize().multiplyScalar(s),this._m4_1.makeTranslation(Zn.x,Zn.y,Zn.z),i){let l=this._v3_2;o=l.distanceTo(sa),s=o-o*r,Zn.copy(sa).sub(this._v3_2).normalize().multiplyScalar(s),this._translationMatrix.makeTranslation(l.x,l.y,l.z),this._scaleMatrix.makeScale(r,r,r),this._m4_2.makeTranslation(Zn.x,Zn.y,Zn.z).multiply(this._translationMatrix),this._m4_2.multiply(this._scaleMatrix),this._translationMatrix.makeTranslation(-l.x,-l.y,-l.z),this._m4_2.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1,this._m4_2)}else this.setTransformationMatrices(this._m4_1);return qo}}setFov(e){this.object.isPerspectiveCamera&&(this.object.fov=it.clamp(e,this.minFov,this.maxFov),this.object.updateProjectionMatrix())}setTransformationMatrices(e=null,t=null){e!=null?qo.camera!=null?qo.camera.copy(e):qo.camera=e.clone():qo.camera=null,t!=null?qo.gizmos!=null?qo.gizmos.copy(t):qo.gizmos=t.clone():qo.gizmos=null}zRotate(e,t){return this._rotationMatrix.makeRotationAxis(this._rotationAxis,t),this._translationMatrix.makeTranslation(-e.x,-e.y,-e.z),this._m4_1.makeTranslation(e.x,e.y,e.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(e),this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis,t),this._v3_2.sub(this._v3_1),this._m4_2.makeTranslation(this._v3_2.x,this._v3_2.y,this._v3_2.z),this.setTransformationMatrices(this._m4_1,this._m4_2),qo}getRaycaster(){return loe}unprojectOnObj(e,t){let i=this.getRaycaster();i.near=t.near,i.far=t.far,i.setFromCamera(e,t);let r=i.intersectObjects(this.scene.children,!0);for(let o=0;o<r.length;o++)if(r[o].object.uuid!=this._gizmos.uuid&&r[o].face!=null)return r[o].point.clone();return null}unprojectOnTbSurface(e,t,i,r,o){if(e.type=="OrthographicCamera"){this._v2_1.copy(this.getCursorPosition(t,i,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0);let s=Math.pow(this._v2_1.x,2),a=Math.pow(this._v2_1.y,2),l=Math.pow(this._tbRadius,2);return s+a<=l*.5?this._v3_1.setZ(Math.sqrt(l-(s+a))):this._v3_1.setZ(l*.5/Math.sqrt(s+a)),this._v3_1}else if(e.type=="PerspectiveCamera"){this._v2_1.copy(this.getCursorNDC(t,i,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(e.projectionMatrixInverse);let s=this._v3_1.clone().normalize(),a=e.position.distanceTo(this._gizmos.position),l=Math.pow(o,2),c=this._v3_1.z,d=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));if(d==0)return s.set(this._v3_1.x,this._v3_1.y,o),s;let u=c/d,h=a,f=Math.pow(u,2)+1,m=2*u*h,_=Math.pow(h,2)-l,g=Math.pow(m,2)-4*f*_;if(g>=0&&(this._v2_1.setX((-m-Math.sqrt(g))/(2*f)),this._v2_1.setY(u*this._v2_1.x+h),it.RAD2DEG*this._v2_1.angle()>=45)){let v=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(a-this._v2_1.y,2));return s.multiplyScalar(v),s.z+=a,s}f=u,m=h,_=-l*.5,g=Math.pow(m,2)-4*f*_,this._v2_1.setX((-m-Math.sqrt(g))/(2*f)),this._v2_1.setY(u*this._v2_1.x+h);let p=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(a-this._v2_1.y,2));return s.multiplyScalar(p),s.z+=a,s}}unprojectOnTbPlane(e,t,i,r,o=!1){if(e.type=="OrthographicCamera")return this._v2_1.copy(this.getCursorPosition(t,i,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0),this._v3_1.clone();if(e.type=="PerspectiveCamera"){this._v2_1.copy(this.getCursorNDC(t,i,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(e.projectionMatrixInverse);let s=this._v3_1.clone().normalize(),a=this._v3_1.z,l=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2)),c;if(o?c=this._v3_1.setFromMatrixPosition(this._cameraMatrixState0).distanceTo(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0)):c=e.position.distanceTo(this._gizmos.position),l==0)return s.set(0,0,0),s;let d=a/l,u=c,h=-u/d,f=Math.sqrt(Math.pow(u,2)+Math.pow(h,2));return s.multiplyScalar(f),s.z=0,s}}updateMatrixState(){this._cameraMatrixState.copy(this.object.matrix),this._gizmoMatrixState.copy(this._gizmos.matrix),this.object.isOrthographicCamera?(this._cameraProjectionState.copy(this.object.projectionMatrix),this.object.updateProjectionMatrix(),this._zoomState=this.object.zoom):this.object.isPerspectiveCamera&&(this._fovState=this.object.fov)}updateTbState(e,t){this._state=e,t&&this.updateMatrixState()}update(){if(this.target.equals(this._currentTarget)===!1&&(this._gizmos.position.copy(this.target),this._tbRadius=this.calculateTbRadius(this.object),this.makeGizmos(this.target,this._tbRadius),this._currentTarget.copy(this.target)),this.object.isOrthographicCamera){if(this.object.zoom>this.maxZoom||this.object.zoom<this.minZoom){let t=it.clamp(this.object.zoom,this.minZoom,this.maxZoom);this.applyTransformMatrix(this.scale(t/this.object.zoom,this._gizmos.position,!0))}}else if(this.object.isPerspectiveCamera){let t=this.object.position.distanceTo(this._gizmos.position);if(t>this.maxDistance+1e-6||t<this.minDistance-1e-6){let r=it.clamp(t,this.minDistance,this.maxDistance);this.applyTransformMatrix(this.scale(r/t,this._gizmos.position)),this.updateMatrixState()}(this.object.fov<this.minFov||this.object.fov>this.maxFov)&&(this.object.fov=it.clamp(this.object.fov,this.minFov,this.maxFov),this.object.updateProjectionMatrix());let i=this._tbRadius;if(this._tbRadius=this.calculateTbRadius(this.object),i<this._tbRadius-1e-6||i>this._tbRadius+1e-6){let r=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3,o=this._tbRadius/r,a=new ms(0,0,o,o).getPoints(this._curvePts),l=new bt().setFromPoints(a);for(let c in this._gizmos.children)this._gizmos.children[c].geometry=l}}this.object.lookAt(this._gizmos.position)}setStateFromJSON(e){let t=JSON.parse(e);if(t.arcballState!=null){this._cameraMatrixState.fromArray(t.arcballState.cameraMatrix.elements),this._cameraMatrixState.decompose(this.object.position,this.object.quaternion,this.object.scale),this.object.up.copy(t.arcballState.cameraUp),this.object.near=t.arcballState.cameraNear,this.object.far=t.arcballState.cameraFar,this.object.zoom=t.arcballState.cameraZoom,this.object.isPerspectiveCamera&&(this.object.fov=t.arcballState.cameraFov),this._gizmoMatrixState.fromArray(t.arcballState.gizmoMatrix.elements),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.object.updateMatrix(),this.object.updateProjectionMatrix(),this._gizmos.updateMatrix(),this._tbRadius=this.calculateTbRadius(this.object);let i=new Ie().copy(this._gizmoMatrixState0);this.makeGizmos(this._gizmos.position,this._tbRadius),this._gizmoMatrixState0.copy(i),this.object.lookAt(this._gizmos.position),this.updateTbState(yt.IDLE,!1),this.dispatchEvent(dn)}}};function coe(){let n=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3;this._tbRadius=this.calculateTbRadius(this.object);let e=this._tbRadius/n,i=new ms(0,0,e,e).getPoints(this._curvePts),r=new bt().setFromPoints(i);for(let o in this._gizmos.children)this._gizmos.children[o].geometry=r;this.dispatchEvent(dn)}function doe(n){if(this.enabled){for(let e=0;e<this.mouseActions.length;e++)if(this.mouseActions[e].mouse==2){n.preventDefault();break}}}function uoe(){this._touchStart.splice(0,this._touchStart.length),this._touchCurrent.splice(0,this._touchCurrent.length),this._input=qi.NONE}function hoe(n){if(n.button==0&&n.isPrimary?(this._downValid=!0,this._downEvents.push(n),this._downStart=performance.now()):this._downValid=!1,n.pointerType=="touch"&&this._input!=qi.CURSOR)switch(this._touchStart.push(n),this._touchCurrent.push(n),this._input){case qi.NONE:this._input=qi.ONE_FINGER,this.onSinglePanStart(n,"ROTATE"),window.addEventListener("pointermove",this._onPointerMove),window.addEventListener("pointerup",this._onPointerUp);break;case qi.ONE_FINGER:case qi.ONE_FINGER_SWITCHED:this._input=qi.TWO_FINGER,this.onRotateStart(),this.onPinchStart(),this.onDoublePanStart();break;case qi.TWO_FINGER:this._input=qi.MULT_FINGER,this.onTriplePanStart(n);break}else if(n.pointerType!="touch"&&this._input==qi.NONE){let e=null;n.ctrlKey||n.metaKey?e="CTRL":n.shiftKey&&(e="SHIFT"),this._mouseOp=this.getOpFromAction(n.button,e),this._mouseOp!=null&&(window.addEventListener("pointermove",this._onPointerMove),window.addEventListener("pointerup",this._onPointerUp),this._input=qi.CURSOR,this._button=n.button,this.onSinglePanStart(n,this._mouseOp))}}function foe(n){if(n.pointerType=="touch"&&this._input!=qi.CURSOR)switch(this._input){case qi.ONE_FINGER:this.updateTouchEvent(n),this.onSinglePanMove(n,yt.ROTATE);break;case qi.ONE_FINGER_SWITCHED:if(this.calculatePointersDistance(this._touchCurrent[0],n)*this._devPxRatio>=this._switchSensibility){this._input=qi.ONE_FINGER,this.updateTouchEvent(n),this.onSinglePanStart(n,"ROTATE");break}break;case qi.TWO_FINGER:this.updateTouchEvent(n),this.onRotateMove(),this.onPinchMove(),this.onDoublePanMove();break;case qi.MULT_FINGER:this.updateTouchEvent(n),this.onTriplePanMove(n);break}else if(n.pointerType!="touch"&&this._input==qi.CURSOR){let e=null;n.ctrlKey||n.metaKey?e="CTRL":n.shiftKey&&(e="SHIFT");let t=this.getOpStateFromAction(this._button,e);t!=null&&this.onSinglePanMove(n,t)}this._downValid&&this.calculatePointersDistance(this._downEvents[this._downEvents.length-1],n)*this._devPxRatio>this._movementThreshold&&(this._downValid=!1)}function poe(n){if(n.pointerType=="touch"&&this._input!=qi.CURSOR){let e=this._touchCurrent.length;for(let t=0;t<e;t++)if(this._touchCurrent[t].pointerId==n.pointerId){this._touchCurrent.splice(t,1),this._touchStart.splice(t,1);break}switch(this._input){case qi.ONE_FINGER:case qi.ONE_FINGER_SWITCHED:window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=qi.NONE,this.onSinglePanEnd();break;case qi.TWO_FINGER:this.onDoublePanEnd(n),this.onPinchEnd(n),this.onRotateEnd(n),this._input=qi.ONE_FINGER_SWITCHED;break;case qi.MULT_FINGER:this._touchCurrent.length==0&&(window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=qi.NONE,this.onTriplePanEnd());break}}else n.pointerType!="touch"&&this._input==qi.CURSOR&&(window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=qi.NONE,this.onSinglePanEnd(),this._button=-1);if(n.isPrimary)if(this._downValid)if(n.timeStamp-this._downEvents[this._downEvents.length-1].timeStamp<=this._maxDownTime)if(this._nclicks==0)this._nclicks=1,this._clickStart=performance.now();else{let t=n.timeStamp-this._clickStart,i=this.calculatePointersDistance(this._downEvents[1],this._downEvents[0])*this._devPxRatio;t<=this._maxInterval&&i<=this._posThreshold?(this._nclicks=0,this._downEvents.splice(0,this._downEvents.length),this.onDoubleTap(n)):(this._nclicks=1,this._downEvents.shift(),this._clickStart=performance.now())}else this._downValid=!1,this._nclicks=0,this._downEvents.splice(0,this._downEvents.length);else this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)}function moe(n){if(this.enabled&&this.enableZoom){let e=null;n.ctrlKey||n.metaKey?e="CTRL":n.shiftKey&&(e="SHIFT");let t=this.getOpFromAction("WHEEL",e);if(t!=null){n.preventDefault(),this.dispatchEvent(aa);let i=125,r=n.deltaY/i,o=1;switch(r>0?o=1/this.scaleFactor:r<0&&(o=this.scaleFactor),t){case"ZOOM":if(this.updateTbState(yt.SCALE,!0),r>0?o=1/Math.pow(this.scaleFactor,r):r<0&&(o=Math.pow(this.scaleFactor,-r)),this.cursorZoom&&this.enablePan){let s;this.object.isOrthographicCamera?s=this.unprojectOnTbPlane(this.object,n.clientX,n.clientY,this.domElement).applyQuaternion(this.object.quaternion).multiplyScalar(1/this.object.zoom).add(this._gizmos.position):this.object.isPerspectiveCamera&&(s=this.unprojectOnTbPlane(this.object,n.clientX,n.clientY,this.domElement).applyQuaternion(this.object.quaternion).add(this._gizmos.position)),this.applyTransformMatrix(this.scale(o,s))}else this.applyTransformMatrix(this.scale(o,this._gizmos.position));this._grid!=null&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(yt.IDLE,!1),this.dispatchEvent(dn),this.dispatchEvent(ws);break;case"FOV":if(this.object.isPerspectiveCamera){this.updateTbState(yt.FOV,!0),n.deltaX!=0&&(r=n.deltaX/i,o=1,r>0?o=1/Math.pow(this.scaleFactor,r):r<0&&(o=Math.pow(this.scaleFactor,-r))),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);let s=this._v3_1.distanceTo(this._gizmos.position),a=s/o;a=it.clamp(a,this.minDistance,this.maxDistance);let l=s*Math.tan(it.DEG2RAD*this.object.fov*.5),c=it.RAD2DEG*(Math.atan(l/a)*2);c>this.maxFov?c=this.maxFov:c<this.minFov&&(c=this.minFov);let d=l/Math.tan(it.DEG2RAD*(c/2));o=s/d,this.setFov(c),this.applyTransformMatrix(this.scale(o,this._gizmos.position,!1))}this._grid!=null&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(yt.IDLE,!1),this.dispatchEvent(dn),this.dispatchEvent(ws);break}}}}var goe=["*"],IV=(()=>{class n extends cn{getType(){return IM}set scene(t){this._objRef&&(this._objRef.scene=t)}get scene(){return this._objRef?.scene}set radiusFactor(t){this._objRef&&(this._objRef.radiusFactor=t)}get radiusFactor(){return this._objRef?.radiusFactor}set focusAnimationTime(t){this._objRef&&(this._objRef.focusAnimationTime=t)}get focusAnimationTime(){return this._objRef?.focusAnimationTime}set adjustNearFar(t){this._objRef&&(this._objRef.adjustNearFar=t)}get adjustNearFar(){return this._objRef?.adjustNearFar}set scaleFactor(t){this._objRef&&(this._objRef.scaleFactor=t)}get scaleFactor(){return this._objRef?.scaleFactor}set dampingFactor(t){this._objRef&&(this._objRef.dampingFactor=t)}get dampingFactor(){return this._objRef?.dampingFactor}set wMax(t){this._objRef&&(this._objRef.wMax=t)}get wMax(){return this._objRef?.wMax}set enableAnimations(t){this._objRef&&(this._objRef.enableAnimations=t)}get enableAnimations(){return this._objRef?.enableAnimations}set enableFocus(t){this._objRef&&(this._objRef.enableFocus=t)}get enableFocus(){return this._objRef?.enableFocus}set enableGrid(t){this._objRef&&(this._objRef.enableGrid=t)}get enableGrid(){return this._objRef?.enableGrid}set cursorZoom(t){this._objRef&&(this._objRef.cursorZoom=t)}get cursorZoom(){return this._objRef?.cursorZoom}set rotateSpeed(t){this._objRef&&(this._objRef.rotateSpeed=t)}get rotateSpeed(){return this._objRef?.rotateSpeed}set enablePan(t){this._objRef&&(this._objRef.enablePan=t)}get enablePan(){return this._objRef?.enablePan}set enableRotate(t){this._objRef&&(this._objRef.enableRotate=t)}get enableRotate(){return this._objRef?.enableRotate}set enableZoom(t){this._objRef&&(this._objRef.enableZoom=t)}get enableZoom(){return this._objRef?.enableZoom}set minDistance(t){this._objRef&&(this._objRef.minDistance=t)}get minDistance(){return this._objRef?.minDistance}set maxDistance(t){this._objRef&&(this._objRef.maxDistance=t)}get maxDistance(){return this._objRef?.maxDistance}set minZoom(t){this._objRef&&(this._objRef.minZoom=t)}get minZoom(){return this._objRef?.minZoom}set maxZoom(t){this._objRef&&(this._objRef.maxZoom=t)}get maxZoom(){return this._objRef?.maxZoom}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-arcballControls"]],inputs:{scene:"scene",radiusFactor:"radiusFactor",focusAnimationTime:"focusAnimationTime",adjustNearFar:"adjustNearFar",scaleFactor:"scaleFactor",dampingFactor:"dampingFactor",wMax:"wMax",enableAnimations:"enableAnimations",enableFocus:"enableFocus",enableGrid:"enableGrid",cursorZoom:"cursorZoom",rotateSpeed:"rotateSpeed",enablePan:"enablePan",enableRotate:"enableRotate",enableZoom:"enableZoom",minDistance:"minDistance",maxDistance:"maxDistance",minZoom:"minZoom",maxZoom:"maxZoom"},standalone:!1,features:[J([{provide:cn,useExisting:_e(()=>n)}]),q],ngContentSelectors:goe,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var boe=["*"],PV=(()=>{class n extends La{getType(){return Bf}get type(){return this._objRef?.type}set box(t){this._objRef&&(this._objRef.box=me(this._objRef.box,t))}get box(){return this._objRef?.box}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-box3Helper"]],inputs:{box:"box"},standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)}]),q],ngContentSelectors:boe,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var yoe=["*"],FV=(()=>{class n extends ue{getType(){return lp}set element(t){this._objRef&&(this._objRef.element=t)}get element(){return this._objRef?.element}set center(t){this._objRef&&(this._objRef.center=me(this._objRef.center,t))}get center(){return this._objRef?.center}set onBeforeRender(t){this._objRef&&(this._objRef.onBeforeRender=t)}get onBeforeRender(){return this._objRef?.onBeforeRender}set onAfterRender(t){this._objRef&&(this._objRef.onAfterRender=t)}get onAfterRender(){return this._objRef?.onAfterRender}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-cSS2DObjectGen"]],inputs:{element:"element",center:"center",onBeforeRender:"onBeforeRender",onAfterRender:"onAfterRender"},standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)}]),q],ngContentSelectors:yoe,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var xoe=["*"],kV=(()=>{class n extends ue{getType(){return sp}set element(t){this._objRef&&(this._objRef.element=t)}get element(){return this._objRef?.element}set onBeforeRender(t){this._objRef&&(this._objRef.onBeforeRender=t)}get onBeforeRender(){return this._objRef?.onBeforeRender}set onAfterRender(t){this._objRef&&(this._objRef.onAfterRender=t)}get onAfterRender(){return this._objRef?.onAfterRender}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-cSS3DObjectGen"]],inputs:{element:"element",onBeforeRender:"onBeforeRender",onAfterRender:"onAfterRender"},standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)}]),q],ngContentSelectors:xoe,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Ro=(()=>{class n extends to{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-abs-texture"]],standalone:!1,features:[q],decls:0,vars:0,template:function(i,r){},encapsulation:2,changeDetection:0})}}return n})();var woe=["*"],Co=class n extends Ro{getType(){return yn}get isTexture(){return this._objRef?.isTexture}get id(){return this._objRef?.id}set uuid(e){this._objRef&&(this._objRef.uuid=e)}get uuid(){return this._objRef?.uuid}set name(e){this._objRef&&(this._objRef.name=e)}get name(){return this._objRef?.name}set source(e){this._objRef&&(this._objRef.source=e)}get source(){return this._objRef?.source}get image(){return this._objRef?.image}set image(e){this._objRef&&(this._objRef.image=e)}set mipmaps(e){this._objRef&&(this._objRef.mipmaps=e)}get mipmaps(){return this._objRef?.mipmaps}set mapping(e){this._objRef&&(this._objRef.mapping=e)}get mapping(){return this._objRef?.mapping}set channel(e){this._objRef&&(this._objRef.channel=e)}get channel(){return this._objRef?.channel}set wrapS(e){this._objRef&&(this._objRef.wrapS=e)}get wrapS(){return this._objRef?.wrapS}set wrapT(e){this._objRef&&(this._objRef.wrapT=e)}get wrapT(){return this._objRef?.wrapT}set magFilter(e){this._objRef&&(this._objRef.magFilter=e)}get magFilter(){return this._objRef?.magFilter}set minFilter(e){this._objRef&&(this._objRef.minFilter=e)}get minFilter(){return this._objRef?.minFilter}set anisotropy(e){this._objRef&&(this._objRef.anisotropy=e)}get anisotropy(){return this._objRef?.anisotropy}set format(e){this._objRef&&(this._objRef.format=e)}get format(){return this._objRef?.format}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set internalFormat(e){this._objRef&&(this._objRef.internalFormat=e)}get internalFormat(){return this._objRef?.internalFormat}set matrix(e){this._objRef&&(this._objRef.matrix=me(this._objRef.matrix,e))}get matrix(){return this._objRef?.matrix}set matrixAutoUpdate(e){this._objRef&&(this._objRef.matrixAutoUpdate=e)}get matrixAutoUpdate(){return this._objRef?.matrixAutoUpdate}set offset(e){this._objRef&&(this._objRef.offset=me(this._objRef.offset,e))}get offset(){return this._objRef?.offset}set repeat(e){this._objRef&&(this._objRef.repeat=me(this._objRef.repeat,e))}get repeat(){return this._objRef?.repeat}set center(e){this._objRef&&(this._objRef.center=me(this._objRef.center,e))}get center(){return this._objRef?.center}set rotation(e){this._objRef&&(this._objRef.rotation=e)}get rotation(){return this._objRef?.rotation}set generateMipmaps(e){this._objRef&&(this._objRef.generateMipmaps=e)}get generateMipmaps(){return this._objRef?.generateMipmaps}set premultiplyAlpha(e){this._objRef&&(this._objRef.premultiplyAlpha=e)}get premultiplyAlpha(){return this._objRef?.premultiplyAlpha}set flipY(e){this._objRef&&(this._objRef.flipY=e)}get flipY(){return this._objRef?.flipY}set unpackAlignment(e){this._objRef&&(this._objRef.unpackAlignment=e)}get unpackAlignment(){return this._objRef?.unpackAlignment}set colorSpace(e){this._objRef&&(this._objRef.colorSpace=e)}get colorSpace(){return this._objRef?.colorSpace}set isRenderTargetTexture(e){this._objRef&&(this._objRef.isRenderTargetTexture=e)}get isRenderTargetTexture(){return this._objRef?.isRenderTargetTexture}set userData(e){this._objRef&&(this._objRef.userData=e)}get userData(){return this._objRef?.userData}set version(e){this._objRef&&(this._objRef.version=e)}get version(){return this._objRef?.version}set pmremVersion(e){this._objRef&&(this._objRef.pmremVersion=e)}get pmremVersion(){return this._objRef?.pmremVersion}set needsUpdate(e){this._objRef&&(this._objRef.needsUpdate=e)}set needsPMREMUpdate(e){this._objRef&&(this._objRef.needsPMREMUpdate=e)}static{this.DEFAULT_ANISOTROPY=yn.DEFAULT_ANISOTROPY}static{this.DEFAULT_IMAGE=yn.DEFAULT_IMAGE}static{this.DEFAULT_MAPPING=yn.DEFAULT_MAPPING}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=le(n)))(i||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-texture"]],inputs:{uuid:"uuid",name:"name",source:"source",image:"image",mipmaps:"mipmaps",mapping:"mapping",channel:"channel",wrapS:"wrapS",wrapT:"wrapT",magFilter:"magFilter",minFilter:"minFilter",anisotropy:"anisotropy",format:"format",type:"type",internalFormat:"internalFormat",matrix:"matrix",matrixAutoUpdate:"matrixAutoUpdate",offset:"offset",repeat:"repeat",center:"center",rotation:"rotation",generateMipmaps:"generateMipmaps",premultiplyAlpha:"premultiplyAlpha",flipY:"flipY",unpackAlignment:"unpackAlignment",colorSpace:"colorSpace",isRenderTargetTexture:"isRenderTargetTexture",userData:"userData",version:"version",pmremVersion:"pmremVersion",needsUpdate:"needsUpdate",needsPMREMUpdate:"needsPMREMUpdate"},standalone:!1,features:[J([{provide:Ro,useExisting:_e(()=>n)}]),q],ngContentSelectors:woe,decls:1,vars:0,template:function(t,i){t&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}};var Moe=["*"],xb=(()=>{class n extends ni{getType(){return Gs}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-polyhedronGeometry"]],standalone:!1,features:[J([{provide:ni,useExisting:_e(()=>n)}]),q],ngContentSelectors:Moe,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var FM={name:"DotScreenShader",uniforms:{tDiffuse:{value:null},tSize:{value:new V(256,256)},center:{value:new V(.5,.5)},angle:{value:1.57},scale:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform vec2 center;
		uniform float angle;
		uniform float scale;
		uniform vec2 tSize;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		float pattern() {

			float s = sin( angle ), c = cos( angle );

			vec2 tex = vUv * tSize - center;
			vec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;

			return ( sin( point.x ) * sin( point.y ) ) * 4.0;

		}

		void main() {

			vec4 color = texture2D( tDiffuse, vUv );

			float average = ( color.r + color.g + color.b ) / 3.0;

			gl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );

		}`};var Cp=new ir,ql=new V,OV=new w,nI=new V,kM=new V,OM=new w,rI=new w,jV=new Ie,NV=new w,LV=new w,Eo=null,qa=null,Xl=[],td={NONE:-1,PAN:0,ROTATE:1},jM=class extends pr{constructor(e,t,i=null){super(t,i),this.objects=e,this.recursive=!0,this.transformGroup=!1,this.rotateSpeed=1,this.raycaster=new Nr,this.mouseButtons={LEFT:ln.PAN,MIDDLE:ln.PAN,RIGHT:ln.ROTATE},this.touches={ONE:Lr.PAN},this._onPointerMove=Soe.bind(this),this._onPointerDown=Toe.bind(this),this._onPointerCancel=Roe.bind(this),this._onContextMenu=Coe.bind(this),i!==null&&this.connect()}connect(){this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerCancel),this.domElement.addEventListener("pointerleave",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerCancel),this.domElement.removeEventListener("pointerleave",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto",this.domElement.style.cursor=""}dispose(){this.disconnect()}_updatePointer(e){let t=this.domElement.getBoundingClientRect();ql.x=(e.clientX-t.left)/t.width*2-1,ql.y=-(e.clientY-t.top)/t.height*2+1}_updateState(e){let t;if(e.pointerType==="touch")t=this.touches.ONE;else switch(e.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=null}switch(t){case ln.PAN:case Lr.PAN:this.state=td.PAN;break;case ln.ROTATE:case Lr.ROTATE:this.state=td.ROTATE;break;default:this.state=td.NONE}}getRaycaster(){return console.warn("THREE.DragControls: getRaycaster() has been deprecated. Use controls.raycaster instead."),this.raycaster}setObjects(e){console.warn("THREE.DragControls: setObjects() has been deprecated. Use controls.objects instead."),this.objects=e}getObjects(){return console.warn("THREE.DragControls: getObjects() has been deprecated. Use controls.objects instead."),this.objects}activate(){console.warn("THREE.DragControls: activate() has been renamed to connect()."),this.connect()}deactivate(){console.warn("THREE.DragControls: deactivate() has been renamed to disconnect()."),this.disconnect()}set mode(e){console.warn("THREE.DragControls: The .mode property has been removed. Define the type of transformation via the .mouseButtons or .touches properties.")}get mode(){console.warn("THREE.DragControls: The .mode property has been removed. Define the type of transformation via the .mouseButtons or .touches properties.")}};function Soe(n){let e=this.object,t=this.domElement,i=this.raycaster;if(this.enabled!==!1){if(this._updatePointer(n),i.setFromCamera(ql,e),Eo)this.state===td.PAN?i.ray.intersectPlane(Cp,OM)&&Eo.position.copy(OM.sub(OV).applyMatrix4(jV)):this.state===td.ROTATE&&(nI.subVectors(ql,kM).multiplyScalar(this.rotateSpeed),Eo.rotateOnWorldAxis(NV,nI.x),Eo.rotateOnWorldAxis(LV.normalize(),-nI.y)),this.dispatchEvent({type:"drag",object:Eo}),kM.copy(ql);else if(n.pointerType==="mouse"||n.pointerType==="pen")if(Xl.length=0,i.setFromCamera(ql,e),i.intersectObjects(this.objects,this.recursive,Xl),Xl.length>0){let r=Xl[0].object;Cp.setFromNormalAndCoplanarPoint(e.getWorldDirection(Cp.normal),rI.setFromMatrixPosition(r.matrixWorld)),qa!==r&&qa!==null&&(this.dispatchEvent({type:"hoveroff",object:qa}),t.style.cursor="auto",qa=null),qa!==r&&(this.dispatchEvent({type:"hoveron",object:r}),t.style.cursor="pointer",qa=r)}else qa!==null&&(this.dispatchEvent({type:"hoveroff",object:qa}),t.style.cursor="auto",qa=null);kM.copy(ql)}}function Toe(n){let e=this.object,t=this.domElement,i=this.raycaster;this.enabled!==!1&&(this._updatePointer(n),this._updateState(n),Xl.length=0,i.setFromCamera(ql,e),i.intersectObjects(this.objects,this.recursive,Xl),Xl.length>0&&(this.transformGroup===!0?Eo=BV(Xl[0].object):Eo=Xl[0].object,Cp.setFromNormalAndCoplanarPoint(e.getWorldDirection(Cp.normal),rI.setFromMatrixPosition(Eo.matrixWorld)),i.ray.intersectPlane(Cp,OM)&&(this.state===td.PAN?(jV.copy(Eo.parent.matrixWorld).invert(),OV.copy(OM).sub(rI.setFromMatrixPosition(Eo.matrixWorld))):this.state===td.ROTATE&&(NV.set(0,1,0).applyQuaternion(e.quaternion).normalize(),LV.set(1,0,0).applyQuaternion(e.quaternion).normalize())),t.style.cursor="move",this.dispatchEvent({type:"dragstart",object:Eo})),kM.copy(ql))}function Roe(){this.enabled!==!1&&(Eo&&(this.dispatchEvent({type:"dragend",object:Eo}),Eo=null),this.domElement.style.cursor=qa?"pointer":"auto",this.state=td.NONE)}function Coe(n){this.enabled!==!1&&n.preventDefault()}function BV(n,e=null){return n.isGroup&&(e=n),n.parent===null?e:BV(n.parent,e)}var Eoe=["*"],UV=(()=>{class n extends cn{getType(){return jM}set objects(t){this._objRef&&(this._objRef.objects=t)}get objects(){return this._objRef?.objects}set recursive(t){this._objRef&&(this._objRef.recursive=t)}get recursive(){return this._objRef?.recursive}set transformGroup(t){this._objRef&&(this._objRef.transformGroup=t)}get transformGroup(){return this._objRef?.transformGroup}set rotateSpeed(t){this._objRef&&(this._objRef.rotateSpeed=t)}get rotateSpeed(){return this._objRef?.rotateSpeed}set raycaster(t){this._objRef&&(this._objRef.raycaster=me(this._objRef.raycaster,t))}get raycaster(){return this._objRef?.raycaster}set mouseButtons(t){this._objRef&&(this._objRef.mouseButtons=t)}get mouseButtons(){return this._objRef?.mouseButtons}set touches(t){this._objRef&&(this._objRef.touches=t)}get touches(){return this._objRef?.touches}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-dragControls"]],inputs:{objects:"objects",recursive:"recursive",transformGroup:"transformGroup",rotateSpeed:"rotateSpeed",raycaster:"raycaster",mouseButtons:"mouseButtons",touches:"touches"},standalone:!1,features:[J([{provide:cn,useExisting:_e(()=>n)}]),q],ngContentSelectors:Eoe,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var VV={name:"FilmShader",uniforms:{tDiffuse:{value:null},time:{value:0},intensity:{value:.5},grayscale:{value:!1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#include <common>

		uniform float intensity;
		uniform bool grayscale;
		uniform float time;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 base = texture2D( tDiffuse, vUv );

			float noise = rand( fract( vUv + time ) );

			vec3 color = base.rgb + base.rgb * clamp( 0.1 + noise, 0.0, 1.0 );

			color = mix( base.rgb, color, intensity );

			if ( grayscale ) {

				color = vec3( luminance( color ) ); // assuming linear-srgb

			}

			gl_FragColor = vec4( color, base.a );

		}`};var NM=class extends mn{constructor(e=.5,t=!1){super();let i=VV;this.uniforms=Hi.clone(i.uniforms),this.material=new Et({name:i.name,uniforms:this.uniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader}),this.uniforms.intensity.value=e,this.uniforms.grayscale.value=t,this.fsQuad=new _r(this.material)}render(e,t,i,r){this.uniforms.tDiffuse.value=i.texture,this.uniforms.time.value+=r,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}};var Aoe=["*"],zV=(()=>{class n extends Pi{getType(){return NM}set uniforms(t){this._objRef&&Object.assign(this._objRef.uniforms,t)}get uniforms(){return this._objRef?.uniforms}set material(t){this._objRef&&(this._objRef.material=t)}get material(){return this._objRef?.material}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-filmPass"]],inputs:{uniforms:"uniforms",material:"material",fsQuad:"fsQuad"},standalone:!1,features:[J([{provide:gi,useExisting:_e(()=>n)}]),q],ngContentSelectors:Aoe,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var HV=new w,oI=new Al,sI=new w,GV=new w,LM=class extends pr{constructor(e,t=null){super(e,t),this.movementSpeed=1,this.lookSpeed=.005,this.lookVertical=!0,this.autoForward=!1,this.activeLook=!0,this.heightSpeed=!1,this.heightCoef=1,this.heightMin=0,this.heightMax=1,this.constrainVertical=!1,this.verticalMin=0,this.verticalMax=Math.PI,this.mouseDragOn=!1,this._autoSpeedFactor=0,this._pointerX=0,this._pointerY=0,this._moveForward=!1,this._moveBackward=!1,this._moveLeft=!1,this._moveRight=!1,this._viewHalfX=0,this._viewHalfY=0,this._lat=0,this._lon=0,this._onPointerMove=koe.bind(this),this._onPointerDown=Poe.bind(this),this._onPointerUp=Foe.bind(this),this._onContextMenu=Noe.bind(this),this._onKeyDown=Ooe.bind(this),this._onKeyUp=joe.bind(this),t!==null&&(this.connect(),this.handleResize()),this._setOrientation()}connect(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu)}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointerdown",this._onPointerMove),this.domElement.removeEventListener("pointermove",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("contextmenu",this._onContextMenu)}dispose(){this.disconnect()}handleResize(){this.domElement===document?(this._viewHalfX=window.innerWidth/2,this._viewHalfY=window.innerHeight/2):(this._viewHalfX=this.domElement.offsetWidth/2,this._viewHalfY=this.domElement.offsetHeight/2)}lookAt(e,t,i){return e.isVector3?sI.copy(e):sI.set(e,t,i),this.object.lookAt(sI),this._setOrientation(),this}update(e){if(this.enabled===!1)return;if(this.heightSpeed){let c=it.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this._autoSpeedFactor=e*(c*this.heightCoef)}else this._autoSpeedFactor=0;let t=e*this.movementSpeed;(this._moveForward||this.autoForward&&!this._moveBackward)&&this.object.translateZ(-(t+this._autoSpeedFactor)),this._moveBackward&&this.object.translateZ(t),this._moveLeft&&this.object.translateX(-t),this._moveRight&&this.object.translateX(t),this._moveUp&&this.object.translateY(t),this._moveDown&&this.object.translateY(-t);let i=e*this.lookSpeed;this.activeLook||(i=0);let r=1;this.constrainVertical&&(r=Math.PI/(this.verticalMax-this.verticalMin)),this._lon-=this._pointerX*i,this.lookVertical&&(this._lat-=this._pointerY*i*r),this._lat=Math.max(-85,Math.min(85,this._lat));let o=it.degToRad(90-this._lat),s=it.degToRad(this._lon);this.constrainVertical&&(o=it.mapLinear(o,0,Math.PI,this.verticalMin,this.verticalMax));let a=this.object.position;GV.setFromSphericalCoords(1,o,s).add(a),this.object.lookAt(GV)}_setOrientation(){let e=this.object.quaternion;HV.set(0,0,-1).applyQuaternion(e),oI.setFromVector3(HV),this._lat=90-it.radToDeg(oI.phi),this._lon=it.radToDeg(oI.theta)}};function Poe(n){if(this.domElement!==document&&this.domElement.focus(),this.activeLook)switch(n.button){case 0:this._moveForward=!0;break;case 2:this._moveBackward=!0;break}this.mouseDragOn=!0}function Foe(n){if(this.activeLook)switch(n.button){case 0:this._moveForward=!1;break;case 2:this._moveBackward=!1;break}this.mouseDragOn=!1}function koe(n){this.domElement===document?(this._pointerX=n.pageX-this._viewHalfX,this._pointerY=n.pageY-this._viewHalfY):(this._pointerX=n.pageX-this.domElement.offsetLeft-this._viewHalfX,this._pointerY=n.pageY-this.domElement.offsetTop-this._viewHalfY)}function Ooe(n){switch(n.code){case"ArrowUp":case"KeyW":this._moveForward=!0;break;case"ArrowLeft":case"KeyA":this._moveLeft=!0;break;case"ArrowDown":case"KeyS":this._moveBackward=!0;break;case"ArrowRight":case"KeyD":this._moveRight=!0;break;case"KeyR":this._moveUp=!0;break;case"KeyF":this._moveDown=!0;break}}function joe(n){switch(n.code){case"ArrowUp":case"KeyW":this._moveForward=!1;break;case"ArrowLeft":case"KeyA":this._moveLeft=!1;break;case"ArrowDown":case"KeyS":this._moveBackward=!1;break;case"ArrowRight":case"KeyD":this._moveRight=!1;break;case"KeyR":this._moveUp=!1;break;case"KeyF":this._moveDown=!1;break}}function Noe(n){this.enabled!==!1&&n.preventDefault()}var Loe=["*"],WV=(()=>{class n extends cn{getType(){return LM}set movementSpeed(t){this._objRef&&(this._objRef.movementSpeed=t)}get movementSpeed(){return this._objRef?.movementSpeed}set lookSpeed(t){this._objRef&&(this._objRef.lookSpeed=t)}get lookSpeed(){return this._objRef?.lookSpeed}set lookVertical(t){this._objRef&&(this._objRef.lookVertical=t)}get lookVertical(){return this._objRef?.lookVertical}set autoForward(t){this._objRef&&(this._objRef.autoForward=t)}get autoForward(){return this._objRef?.autoForward}set activeLook(t){this._objRef&&(this._objRef.activeLook=t)}get activeLook(){return this._objRef?.activeLook}set heightSpeed(t){this._objRef&&(this._objRef.heightSpeed=t)}get heightSpeed(){return this._objRef?.heightSpeed}set heightCoef(t){this._objRef&&(this._objRef.heightCoef=t)}get heightCoef(){return this._objRef?.heightCoef}set heightMin(t){this._objRef&&(this._objRef.heightMin=t)}get heightMin(){return this._objRef?.heightMin}set heightMax(t){this._objRef&&(this._objRef.heightMax=t)}get heightMax(){return this._objRef?.heightMax}set constrainVertical(t){this._objRef&&(this._objRef.constrainVertical=t)}get constrainVertical(){return this._objRef?.constrainVertical}set verticalMin(t){this._objRef&&(this._objRef.verticalMin=t)}get verticalMin(){return this._objRef?.verticalMin}set verticalMax(t){this._objRef&&(this._objRef.verticalMax=t)}get verticalMax(){return this._objRef?.verticalMax}set mouseDragOn(t){this._objRef&&(this._objRef.mouseDragOn=t)}get mouseDragOn(){return this._objRef?.mouseDragOn}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-firstPersonControls"]],inputs:{movementSpeed:"movementSpeed",lookSpeed:"lookSpeed",lookVertical:"lookVertical",autoForward:"autoForward",activeLook:"activeLook",heightSpeed:"heightSpeed",heightCoef:"heightCoef",heightMin:"heightMin",heightMax:"heightMax",constrainVertical:"constrainVertical",verticalMin:"verticalMin",verticalMax:"verticalMax",mouseDragOn:"mouseDragOn"},standalone:!1,features:[J([{provide:cn,useExisting:_e(()=>n)}]),q],ngContentSelectors:Loe,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Uoe={type:"change"},$V=1e-6,qV=new Yt,BM=class extends pr{constructor(e,t=null){super(e,t),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this._moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this._moveVector=new w(0,0,0),this._rotationVector=new w(0,0,0),this._lastQuaternion=new Yt,this._lastPosition=new w,this._status=0,this._onKeyDown=Voe.bind(this),this._onKeyUp=zoe.bind(this),this._onPointerMove=Goe.bind(this),this._onPointerDown=Hoe.bind(this),this._onPointerUp=Woe.bind(this),this._onPointerCancel=$oe.bind(this),this._onContextMenu=qoe.bind(this),t!==null&&this.connect()}connect(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu)}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu)}dispose(){this.disconnect()}update(e){if(this.enabled===!1)return;let t=this.object,i=e*this.movementSpeed,r=e*this.rollSpeed;t.translateX(this._moveVector.x*i),t.translateY(this._moveVector.y*i),t.translateZ(this._moveVector.z*i),qV.set(this._rotationVector.x*r,this._rotationVector.y*r,this._rotationVector.z*r,1).normalize(),t.quaternion.multiply(qV),(this._lastPosition.distanceToSquared(t.position)>$V||8*(1-this._lastQuaternion.dot(t.quaternion))>$V)&&(this.dispatchEvent(Uoe),this._lastQuaternion.copy(t.quaternion),this._lastPosition.copy(t.position))}_updateMovementVector(){let e=this._moveState.forward||this.autoForward&&!this._moveState.back?1:0;this._moveVector.x=-this._moveState.left+this._moveState.right,this._moveVector.y=-this._moveState.down+this._moveState.up,this._moveVector.z=-e+this._moveState.back}_updateRotationVector(){this._rotationVector.x=-this._moveState.pitchDown+this._moveState.pitchUp,this._rotationVector.y=-this._moveState.yawRight+this._moveState.yawLeft,this._rotationVector.z=-this._moveState.rollRight+this._moveState.rollLeft}_getContainerDimensions(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}}};function Voe(n){if(!(n.altKey||this.enabled===!1)){switch(n.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this._moveState.forward=1;break;case"KeyS":this._moveState.back=1;break;case"KeyA":this._moveState.left=1;break;case"KeyD":this._moveState.right=1;break;case"KeyR":this._moveState.up=1;break;case"KeyF":this._moveState.down=1;break;case"ArrowUp":this._moveState.pitchUp=1;break;case"ArrowDown":this._moveState.pitchDown=1;break;case"ArrowLeft":this._moveState.yawLeft=1;break;case"ArrowRight":this._moveState.yawRight=1;break;case"KeyQ":this._moveState.rollLeft=1;break;case"KeyE":this._moveState.rollRight=1;break}this._updateMovementVector(),this._updateRotationVector()}}function zoe(n){if(this.enabled!==!1){switch(n.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this._moveState.forward=0;break;case"KeyS":this._moveState.back=0;break;case"KeyA":this._moveState.left=0;break;case"KeyD":this._moveState.right=0;break;case"KeyR":this._moveState.up=0;break;case"KeyF":this._moveState.down=0;break;case"ArrowUp":this._moveState.pitchUp=0;break;case"ArrowDown":this._moveState.pitchDown=0;break;case"ArrowLeft":this._moveState.yawLeft=0;break;case"ArrowRight":this._moveState.yawRight=0;break;case"KeyQ":this._moveState.rollLeft=0;break;case"KeyE":this._moveState.rollRight=0;break}this._updateMovementVector(),this._updateRotationVector()}}function Hoe(n){if(this.enabled!==!1)if(this.dragToLook)this._status++;else{switch(n.button){case 0:this._moveState.forward=1;break;case 2:this._moveState.back=1;break}this._updateMovementVector()}}function Goe(n){if(this.enabled!==!1&&(!this.dragToLook||this._status>0)){let e=this._getContainerDimensions(),t=e.size[0]/2,i=e.size[1]/2;this._moveState.yawLeft=-(n.pageX-e.offset[0]-t)/t,this._moveState.pitchDown=(n.pageY-e.offset[1]-i)/i,this._updateRotationVector()}}function Woe(n){if(this.enabled!==!1){if(this.dragToLook)this._status--,this._moveState.yawLeft=this._moveState.pitchDown=0;else{switch(n.button){case 0:this._moveState.forward=0;break;case 2:this._moveState.back=0;break}this._updateMovementVector()}this._updateRotationVector()}}function $oe(){this.enabled!==!1&&(this.dragToLook?(this._status=0,this._moveState.yawLeft=this._moveState.pitchDown=0):(this._moveState.forward=0,this._moveState.back=0,this._updateMovementVector()),this._updateRotationVector())}function qoe(n){this.enabled!==!1&&n.preventDefault()}var Xoe=["*"],XV=(()=>{class n extends cn{getType(){return BM}set movementSpeed(t){this._objRef&&(this._objRef.movementSpeed=t)}get movementSpeed(){return this._objRef?.movementSpeed}set rollSpeed(t){this._objRef&&(this._objRef.rollSpeed=t)}get rollSpeed(){return this._objRef?.rollSpeed}set dragToLook(t){this._objRef&&(this._objRef.dragToLook=t)}get dragToLook(){return this._objRef?.dragToLook}set autoForward(t){this._objRef&&(this._objRef.autoForward=t)}get autoForward(){return this._objRef?.autoForward}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-flyControls"]],inputs:{movementSpeed:"movementSpeed",rollSpeed:"rollSpeed",dragToLook:"dragToLook",autoForward:"autoForward"},standalone:!1,features:[J([{provide:cn,useExisting:_e(()=>n)}]),q],ngContentSelectors:Xoe,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var YV={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:`

		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`

		uniform int byp; //should we apply the glitch ?

		uniform sampler2D tDiffuse;
		uniform sampler2D tDisp;

		uniform float amount;
		uniform float angle;
		uniform float seed;
		uniform float seed_x;
		uniform float seed_y;
		uniform float distortion_x;
		uniform float distortion_y;
		uniform float col_s;

		varying vec2 vUv;


		float rand(vec2 co){
			return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
		}

		void main() {
			if(byp<1) {
				vec2 p = vUv;
				float xs = floor(gl_FragCoord.x / 0.5);
				float ys = floor(gl_FragCoord.y / 0.5);
				//based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch
				float disp = texture2D(tDisp, p*seed*seed).r;
				if(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {
					if(seed_x>0.){
						p.y = 1. - (p.y + distortion_y);
					}
					else {
						p.y = distortion_y;
					}
				}
				if(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {
					if(seed_y>0.){
						p.x=distortion_x;
					}
					else {
						p.x = 1. - (p.x + distortion_x);
					}
				}
				p.x+=disp*seed_x*(seed/5.);
				p.y+=disp*seed_y*(seed/5.);
				//base from RGB shift shader
				vec2 offset = amount * vec2( cos(angle), sin(angle));
				vec4 cr = texture2D(tDiffuse, p + offset);
				vec4 cga = texture2D(tDiffuse, p);
				vec4 cb = texture2D(tDiffuse, p - offset);
				gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);
				//add noise
				vec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);
				gl_FragColor = gl_FragColor+ snow;
			}
			else {
				gl_FragColor=texture2D (tDiffuse, vUv);
			}
		}`};var UM=class extends mn{constructor(e=64){super();let t=YV;this.uniforms=Hi.clone(t.uniforms),this.heightMap=this.generateHeightmap(e),this.uniforms.tDisp.value=this.heightMap,this.material=new Et({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.fsQuad=new _r(this.material),this.goWild=!1,this.curF=0,this.generateTrigger()}render(e,t,i){this.uniforms.tDiffuse.value=i.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||this.goWild==!0?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=it.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=it.randFloat(-1,1),this.uniforms.seed_y.value=it.randFloat(-1,1),this.uniforms.distortion_x.value=it.randFloat(0,1),this.uniforms.distortion_y.value=it.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=it.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=it.randFloat(0,1),this.uniforms.distortion_y.value=it.randFloat(0,1),this.uniforms.seed_x.value=it.randFloat(-.3,.3),this.uniforms.seed_y.value=it.randFloat(-.3,.3)):this.goWild==!1&&(this.uniforms.byp.value=1),this.curF++,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}generateTrigger(){this.randX=it.randInt(120,240)}generateHeightmap(e){let t=new Float32Array(e*e),i=e*e;for(let o=0;o<i;o++){let s=it.randFloat(0,1);t[o]=s}let r=new Mr(t,e,e,Ol,nr);return r.needsUpdate=!0,r}dispose(){this.material.dispose(),this.heightMap.dispose(),this.fsQuad.dispose()}};var Zoe=["*"],ZV=(()=>{class n extends Pi{getType(){return UM}set uniforms(t){this._objRef&&Object.assign(this._objRef.uniforms,t)}get uniforms(){return this._objRef?.uniforms}set material(t){this._objRef&&(this._objRef.material=t)}get material(){return this._objRef?.material}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}set goWild(t){this._objRef&&(this._objRef.goWild=t)}get goWild(){return this._objRef?.goWild}set curF(t){this._objRef&&(this._objRef.curF=t)}get curF(){return this._objRef?.curF}set randX(t){this._objRef&&(this._objRef.randX=t)}get randX(){return this._objRef?.randX}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-glitchPass"]],inputs:{uniforms:"uniforms",material:"material",fsQuad:"fsQuad",goWild:"goWild",curF:"curF",randX:"randX"},standalone:!1,features:[J([{provide:gi,useExisting:_e(()=>n)}]),q],ngContentSelectors:Zoe,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Koe=["*"],id=(()=>{class n extends ue{getType(){return Tr}get isGroup(){return this._objRef?.isGroup}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-group"]],standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)}]),q],ngContentSelectors:Koe,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Joe=["*"],QV=(()=>{class n extends xb{getType(){return fu}get type(){return this._objRef?.type}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-icosahedronGeometry"]],standalone:!1,features:[J([{provide:ni,useExisting:_e(()=>n)}]),q],ngContentSelectors:Joe,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var tse=["*"],KV=(()=>{class n extends Ci{getType(){return Cl}get isInstancedMesh(){return this._objRef?.isInstancedMesh}set boundingBox(t){this._objRef&&(this._objRef.boundingBox=me(this._objRef.boundingBox,t))}get boundingBox(){return this._objRef?.boundingBox}set boundingSphere(t){this._objRef&&(this._objRef.boundingSphere=me(this._objRef.boundingSphere,t))}get boundingSphere(){return this._objRef?.boundingSphere}set count(t){this._objRef&&(this._objRef.count=t)}get count(){return this._objRef?.count}set instanceColor(t){this._objRef&&(this._objRef.instanceColor=me(this._objRef.instanceColor,t))}get instanceColor(){return this._objRef?.instanceColor}set instanceMatrix(t){this._objRef&&(this._objRef.instanceMatrix=me(this._objRef.instanceMatrix,t))}get instanceMatrix(){return this._objRef?.instanceMatrix}set morphTexture(t){this._objRef&&(this._objRef.morphTexture=t)}get morphTexture(){return this._objRef?.morphTexture}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-instancedMesh"]],inputs:{boundingBox:"boundingBox",boundingSphere:"boundingSphere",count:"count",instanceColor:"instanceColor",instanceMatrix:"instanceMatrix",morphTexture:"morphTexture"},standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)}]),q],ngContentSelectors:tse,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var nse=["*"],wb=(()=>{class n extends Pi{getType(){return Rp}set textureID(t){this._objRef&&(this._objRef.textureID=t)}get textureID(){return this._objRef?.textureID}set uniforms(t){this._objRef&&Object.assign(this._objRef.uniforms,t)}get uniforms(){return this._objRef?.uniforms}set material(t){this._objRef&&(this._objRef.material=t)}get material(){return this._objRef?.material}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-shaderPass"]],inputs:{textureID:"textureID",uniforms:"uniforms",material:"material",fsQuad:"fsQuad"},standalone:!1,features:[J([{provide:gi,useExisting:_e(()=>n)}]),q],ngContentSelectors:nse,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var VM=class extends fp{constructor(e,t){super(e,t),this.screenSpacePanning=!1,this.mouseButtons={LEFT:ln.PAN,MIDDLE:ln.DOLLY,RIGHT:ln.ROTATE},this.touches={ONE:Lr.PAN,TWO:Lr.DOLLY_ROTATE}}};var rse=["*"],ez=(()=>{class n extends jn{getType(){return VM}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-mapControls"]],standalone:!1,features:[J([{provide:cn,useExisting:_e(()=>n)}]),q],ngContentSelectors:rse,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var sse=["*"],Mb=(()=>{class n extends fn{getType(){return Rr}get isMeshStandardMaterial(){return this._objRef?.isMeshStandardMaterial}set defines(t){this._objRef&&(this._objRef.defines=t)}get defines(){return this._objRef?.defines}set color(t){this._objRef&&(this._objRef.color=me(this._objRef.color,t))}get color(){return this._objRef?.color}set roughness(t){this._objRef&&(this._objRef.roughness=t)}get roughness(){return this._objRef?.roughness}set metalness(t){this._objRef&&(this._objRef.metalness=t)}get metalness(){return this._objRef?.metalness}set map(t){this._objRef&&(this._objRef.map=t)}get map(){return this._objRef?.map}set lightMap(t){this._objRef&&(this._objRef.lightMap=t)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(t){this._objRef&&(this._objRef.lightMapIntensity=t)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set aoMap(t){this._objRef&&(this._objRef.aoMap=t)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(t){this._objRef&&(this._objRef.aoMapIntensity=t)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set emissive(t){this._objRef&&(this._objRef.emissive=me(this._objRef.emissive,t))}get emissive(){return this._objRef?.emissive}set emissiveIntensity(t){this._objRef&&(this._objRef.emissiveIntensity=t)}get emissiveIntensity(){return this._objRef?.emissiveIntensity}set emissiveMap(t){this._objRef&&(this._objRef.emissiveMap=t)}get emissiveMap(){return this._objRef?.emissiveMap}set bumpMap(t){this._objRef&&(this._objRef.bumpMap=t)}get bumpMap(){return this._objRef?.bumpMap}set bumpScale(t){this._objRef&&(this._objRef.bumpScale=t)}get bumpScale(){return this._objRef?.bumpScale}set normalMap(t){this._objRef&&(this._objRef.normalMap=t)}get normalMap(){return this._objRef?.normalMap}set normalMapType(t){this._objRef&&(this._objRef.normalMapType=t)}get normalMapType(){return this._objRef?.normalMapType}set normalScale(t){this._objRef&&(this._objRef.normalScale=me(this._objRef.normalScale,t))}get normalScale(){return this._objRef?.normalScale}set displacementMap(t){this._objRef&&(this._objRef.displacementMap=t)}get displacementMap(){return this._objRef?.displacementMap}set displacementScale(t){this._objRef&&(this._objRef.displacementScale=t)}get displacementScale(){return this._objRef?.displacementScale}set displacementBias(t){this._objRef&&(this._objRef.displacementBias=t)}get displacementBias(){return this._objRef?.displacementBias}set roughnessMap(t){this._objRef&&(this._objRef.roughnessMap=t)}get roughnessMap(){return this._objRef?.roughnessMap}set metalnessMap(t){this._objRef&&(this._objRef.metalnessMap=t)}get metalnessMap(){return this._objRef?.metalnessMap}set alphaMap(t){this._objRef&&(this._objRef.alphaMap=t)}get alphaMap(){return this._objRef?.alphaMap}set envMap(t){this._objRef&&(this._objRef.envMap=t)}get envMap(){return this._objRef?.envMap}set envMapRotation(t){this._objRef&&(this._objRef.envMapRotation=me(this._objRef.envMapRotation,t))}get envMapRotation(){return this._objRef?.envMapRotation}set envMapIntensity(t){this._objRef&&(this._objRef.envMapIntensity=t)}get envMapIntensity(){return this._objRef?.envMapIntensity}set wireframe(t){this._objRef&&(this._objRef.wireframe=t)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(t){this._objRef&&(this._objRef.wireframeLinewidth=t)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(t){this._objRef&&(this._objRef.wireframeLinecap=t)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(t){this._objRef&&(this._objRef.wireframeLinejoin=t)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set flatShading(t){this._objRef&&(this._objRef.flatShading=t)}get flatShading(){return this._objRef?.flatShading}set fog(t){this._objRef&&(this._objRef.fog=t)}get fog(){return this._objRef?.fog}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-meshStandardMaterial"]],inputs:{defines:"defines",color:"color",roughness:"roughness",metalness:"metalness",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",emissive:"emissive",emissiveIntensity:"emissiveIntensity",emissiveMap:"emissiveMap",bumpMap:"bumpMap",bumpScale:"bumpScale",normalMap:"normalMap",normalMapType:"normalMapType",normalScale:"normalScale",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",roughnessMap:"roughnessMap",metalnessMap:"metalnessMap",alphaMap:"alphaMap",envMap:"envMap",envMapRotation:"envMapRotation",envMapIntensity:"envMapIntensity",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",flatShading:"flatShading",fog:"fog"},standalone:!1,features:[J([{provide:fn,useExisting:_e(()=>n)}]),q],ngContentSelectors:sse,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Ep=class n extends mn{constructor(e,t,i,r){super(),this.renderScene=t,this.renderCamera=i,this.selectedObjects=r!==void 0?r:[],this.visibleEdgeColor=new he(1,1,1),this.hiddenEdgeColor=new he(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this._selectionCache=new Set,this.resolution=e!==void 0?new V(e.x,e.y):new V(256,256);let o=Math.round(this.resolution.x/this.downSampleRatio),s=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new ti(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new jc,this.depthMaterial.side=$n,this.depthMaterial.depthPacking=ib,this.depthMaterial.blending=ii,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=$n,this.prepareMaskMaterial.fragmentShader=d(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new ti(this.resolution.x,this.resolution.y,{type:zi}),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new ti(o,s,{type:zi}),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new ti(o,s,{type:zi}),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new ti(Math.round(o/2),Math.round(s/2),{type:zi}),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new ti(o,s,{type:zi}),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new ti(Math.round(o/2),Math.round(s/2),{type:zi}),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;let a=4,l=4;this.separableBlurMaterial1=this.getSeperableBlurMaterial(a),this.separableBlurMaterial1.uniforms.texSize.value.set(o,s),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(l),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(o/2),Math.round(s/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=l,this.overlayMaterial=this.getOverlayMaterial();let c=br;this.copyUniforms=Hi.clone(c.uniforms),this.materialCopy=new Et({uniforms:this.copyUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,blending:ii,depthTest:!1,depthWrite:!1}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new he,this.oldClearAlpha=1,this.fsQuad=new _r(null),this.tempPulseColor1=new he,this.tempPulseColor2=new he,this.textureMatrix=new Ie;function d(u,h){let f=h.isPerspectiveCamera?"perspective":"orthographic";return u.replace(/DEPTH_TO_VIEW_Z/g,f+"DepthToViewZ")}}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}setSize(e,t){this.renderTargetMaskBuffer.setSize(e,t),this.renderTargetDepthBuffer.setSize(e,t);let i=Math.round(e/this.downSampleRatio),r=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(i,r),this.renderTargetBlurBuffer1.setSize(i,r),this.renderTargetEdgeBuffer1.setSize(i,r),this.separableBlurMaterial1.uniforms.texSize.value.set(i,r),i=Math.round(i/2),r=Math.round(r/2),this.renderTargetBlurBuffer2.setSize(i,r),this.renderTargetEdgeBuffer2.setSize(i,r),this.separableBlurMaterial2.uniforms.texSize.value.set(i,r)}updateSelectionCache(){let e=this._selectionCache;function t(i){i.isMesh&&e.add(i)}e.clear();for(let i=0;i<this.selectedObjects.length;i++)this.selectedObjects[i].traverse(t)}changeVisibilityOfSelectedObjects(e){let t=this._visibilityCache;for(let i of this._selectionCache)e===!0?i.visible=t.get(i):(t.set(i,i.visible),i.visible=e)}changeVisibilityOfNonSelectedObjects(e){let t=this._visibilityCache,i=this._selectionCache;function r(o){if(o.isMesh||o.isSprite){if(!i.has(o)){let s=o.visible;(e===!1||t.get(o)===!0)&&(o.visible=e),t.set(o,s)}}else(o.isPoints||o.isLine)&&(e===!0?o.visible=t.get(o):(t.set(o,o.visible),o.visible=e))}this.renderScene.traverse(r)}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(e,t,i,r,o){if(this.selectedObjects.length>0){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();let s=e.autoClear;e.autoClear=!1,o&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this.updateSelectionCache(),this.changeVisibilityOfSelectedObjects(!1);let a=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this._selectionCache.clear(),this.renderScene.background=a,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){let l=.625+Math.cos(performance.now()*.01/this.pulsePeriod)*.75/2;this.tempPulseColor1.multiplyScalar(l),this.tempPulseColor2.multiplyScalar(l)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=n.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=n.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=n.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=n.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,o&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(i),this.fsQuad.render(e),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=i.texture,e.setRenderTarget(null),this.fsQuad.render(e))}getPrepareMaskMaterial(){return new Et({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new V(.5,.5)},textureMatrix:{value:null}},vertexShader:`#include <morphtarget_pars_vertex>
				#include <skinning_pars_vertex>

				varying vec4 projTexCoord;
				varying vec4 vPosition;
				uniform mat4 textureMatrix;

				void main() {

					#include <skinbase_vertex>
					#include <begin_vertex>
					#include <morphtarget_vertex>
					#include <skinning_vertex>
					#include <project_vertex>

					vPosition = mvPosition;

					vec4 worldPosition = vec4( transformed, 1.0 );

					#ifdef USE_INSTANCING

						worldPosition = instanceMatrix * worldPosition;

					#endif

					worldPosition = modelMatrix * worldPosition;

					projTexCoord = textureMatrix * worldPosition;

				}`,fragmentShader:`#include <packing>
				varying vec4 vPosition;
				varying vec4 projTexCoord;
				uniform sampler2D depthTexture;
				uniform vec2 cameraNearFar;

				void main() {

					float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));
					float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );
					float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;
					gl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);

				}`})}getEdgeDetectionMaterial(){return new Et({uniforms:{maskTexture:{value:null},texSize:{value:new V(.5,.5)},visibleEdgeColor:{value:new w(1,1,1)},hiddenEdgeColor:{value:new w(1,1,1)}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform vec2 texSize;
				uniform vec3 visibleEdgeColor;
				uniform vec3 hiddenEdgeColor;

				void main() {
					vec2 invSize = 1.0 / texSize;
					vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);
					vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);
					vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);
					vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);
					vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);
					float diff1 = (c1.r - c2.r)*0.5;
					float diff2 = (c3.r - c4.r)*0.5;
					float d = length( vec2(diff1, diff2) );
					float a1 = min(c1.g, c2.g);
					float a2 = min(c3.g, c4.g);
					float visibilityFactor = min(a1, a2);
					vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;
					gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);
				}`})}getSeperableBlurMaterial(e){return new Et({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new V(.5,.5)},direction:{value:new V(.5,.5)},kernelRadius:{value:1}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;
				uniform float kernelRadius;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}

				void main() {
					vec2 invSize = 1.0 / texSize;
					float sigma = kernelRadius/2.0;
					float weightSum = gaussianPdf(0.0, sigma);
					vec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;
					vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);
					vec2 uvOffset = delta;
					for( int i = 1; i <= MAX_RADIUS; i ++ ) {
						float x = kernelRadius * float(i) / float(MAX_RADIUS);
						float w = gaussianPdf(x, sigma);
						vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);
						vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);
						diffuseSum += ((sample1 + sample2) * w);
						weightSum += (2.0 * w);
						uvOffset += delta;
					}
					gl_FragColor = diffuseSum/weightSum;
				}`})}getOverlayMaterial(){return new Et({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform sampler2D edgeTexture1;
				uniform sampler2D edgeTexture2;
				uniform sampler2D patternTexture;
				uniform float edgeStrength;
				uniform float edgeGlow;
				uniform bool usePatternTexture;

				void main() {
					vec4 edgeValue1 = texture2D(edgeTexture1, vUv);
					vec4 edgeValue2 = texture2D(edgeTexture2, vUv);
					vec4 maskColor = texture2D(maskTexture, vUv);
					vec4 patternColor = texture2D(patternTexture, 6.0 * vUv);
					float visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;
					vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;
					vec4 finalColor = edgeStrength * maskColor.r * edgeValue;
					if(usePatternTexture)
						finalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);
					gl_FragColor = finalColor;
				}`,blending:Bc,depthTest:!1,depthWrite:!1,transparent:!0})}};Ep.BlurDirectionX=new V(1,0);Ep.BlurDirectionY=new V(0,1);var ase=["*"],iz=(()=>{class n extends Pi{getType(){return Ep}set renderScene(t){this._objRef&&(this._objRef.renderScene=t)}get renderScene(){return this._objRef?.renderScene}set renderCamera(t){this._objRef&&(this._objRef.renderCamera=t)}get renderCamera(){return this._objRef?.renderCamera}set selectedObjects(t){this._objRef&&(this._objRef.selectedObjects=t)}get selectedObjects(){return this._objRef?.selectedObjects}set visibleEdgeColor(t){this._objRef&&(this._objRef.visibleEdgeColor=me(this._objRef.visibleEdgeColor,t))}get visibleEdgeColor(){return this._objRef?.visibleEdgeColor}set hiddenEdgeColor(t){this._objRef&&(this._objRef.hiddenEdgeColor=me(this._objRef.hiddenEdgeColor,t))}get hiddenEdgeColor(){return this._objRef?.hiddenEdgeColor}set edgeGlow(t){this._objRef&&(this._objRef.edgeGlow=t)}get edgeGlow(){return this._objRef?.edgeGlow}set usePatternTexture(t){this._objRef&&(this._objRef.usePatternTexture=t)}get usePatternTexture(){return this._objRef?.usePatternTexture}set edgeThickness(t){this._objRef&&(this._objRef.edgeThickness=t)}get edgeThickness(){return this._objRef?.edgeThickness}set edgeStrength(t){this._objRef&&(this._objRef.edgeStrength=t)}get edgeStrength(){return this._objRef?.edgeStrength}set downSampleRatio(t){this._objRef&&(this._objRef.downSampleRatio=t)}get downSampleRatio(){return this._objRef?.downSampleRatio}set pulsePeriod(t){this._objRef&&(this._objRef.pulsePeriod=t)}get pulsePeriod(){return this._objRef?.pulsePeriod}set resolution(t){this._objRef&&(this._objRef.resolution=me(this._objRef.resolution,t))}get resolution(){return this._objRef?.resolution}set patternTexture(t){this._objRef&&(this._objRef.patternTexture=t)}get patternTexture(){return this._objRef?.patternTexture}set maskBufferMaterial(t){this._objRef&&(this._objRef.maskBufferMaterial=t)}get maskBufferMaterial(){return this._objRef?.maskBufferMaterial}set renderTargetMaskBuffer(t){this._objRef&&(this._objRef.renderTargetMaskBuffer=t)}get renderTargetMaskBuffer(){return this._objRef?.renderTargetMaskBuffer}set depthMaterial(t){this._objRef&&(this._objRef.depthMaterial=t)}get depthMaterial(){return this._objRef?.depthMaterial}set prepareMaskMaterial(t){this._objRef&&(this._objRef.prepareMaskMaterial=t)}get prepareMaskMaterial(){return this._objRef?.prepareMaskMaterial}set renderTargetDepthBuffer(t){this._objRef&&(this._objRef.renderTargetDepthBuffer=t)}get renderTargetDepthBuffer(){return this._objRef?.renderTargetDepthBuffer}set renderTargetMaskDownSampleBuffer(t){this._objRef&&(this._objRef.renderTargetMaskDownSampleBuffer=t)}get renderTargetMaskDownSampleBuffer(){return this._objRef?.renderTargetMaskDownSampleBuffer}set renderTargetBlurBuffer1(t){this._objRef&&(this._objRef.renderTargetBlurBuffer1=t)}get renderTargetBlurBuffer1(){return this._objRef?.renderTargetBlurBuffer1}set renderTargetBlurBuffer2(t){this._objRef&&(this._objRef.renderTargetBlurBuffer2=t)}get renderTargetBlurBuffer2(){return this._objRef?.renderTargetBlurBuffer2}set edgeDetectionMaterial(t){this._objRef&&(this._objRef.edgeDetectionMaterial=t)}get edgeDetectionMaterial(){return this._objRef?.edgeDetectionMaterial}set renderTargetEdgeBuffer1(t){this._objRef&&(this._objRef.renderTargetEdgeBuffer1=t)}get renderTargetEdgeBuffer1(){return this._objRef?.renderTargetEdgeBuffer1}set renderTargetEdgeBuffer2(t){this._objRef&&(this._objRef.renderTargetEdgeBuffer2=t)}get renderTargetEdgeBuffer2(){return this._objRef?.renderTargetEdgeBuffer2}set separableBlurMaterial1(t){this._objRef&&(this._objRef.separableBlurMaterial1=t)}get separableBlurMaterial1(){return this._objRef?.separableBlurMaterial1}set separableBlurMaterial2(t){this._objRef&&(this._objRef.separableBlurMaterial2=t)}get separableBlurMaterial2(){return this._objRef?.separableBlurMaterial2}set overlayMaterial(t){this._objRef&&(this._objRef.overlayMaterial=t)}get overlayMaterial(){return this._objRef?.overlayMaterial}set copyUniforms(t){this._objRef&&(this._objRef.copyUniforms=t)}get copyUniforms(){return this._objRef?.copyUniforms}set materialCopy(t){this._objRef&&(this._objRef.materialCopy=t)}get materialCopy(){return this._objRef?.materialCopy}set oldClearColor(t){this._objRef&&(this._objRef.oldClearColor=me(this._objRef.oldClearColor,t))}get oldClearColor(){return this._objRef?.oldClearColor}set oldClearAlpha(t){this._objRef&&(this._objRef.oldClearAlpha=t)}get oldClearAlpha(){return this._objRef?.oldClearAlpha}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}set tempPulseColor1(t){this._objRef&&(this._objRef.tempPulseColor1=me(this._objRef.tempPulseColor1,t))}get tempPulseColor1(){return this._objRef?.tempPulseColor1}set tempPulseColor2(t){this._objRef&&(this._objRef.tempPulseColor2=me(this._objRef.tempPulseColor2,t))}get tempPulseColor2(){return this._objRef?.tempPulseColor2}set textureMatrix(t){this._objRef&&(this._objRef.textureMatrix=me(this._objRef.textureMatrix,t))}get textureMatrix(){return this._objRef?.textureMatrix}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-outlinePass"]],inputs:{renderScene:"renderScene",renderCamera:"renderCamera",selectedObjects:"selectedObjects",visibleEdgeColor:"visibleEdgeColor",hiddenEdgeColor:"hiddenEdgeColor",edgeGlow:"edgeGlow",usePatternTexture:"usePatternTexture",edgeThickness:"edgeThickness",edgeStrength:"edgeStrength",downSampleRatio:"downSampleRatio",pulsePeriod:"pulsePeriod",resolution:"resolution",patternTexture:"patternTexture",maskBufferMaterial:"maskBufferMaterial",renderTargetMaskBuffer:"renderTargetMaskBuffer",depthMaterial:"depthMaterial",prepareMaskMaterial:"prepareMaskMaterial",renderTargetDepthBuffer:"renderTargetDepthBuffer",renderTargetMaskDownSampleBuffer:"renderTargetMaskDownSampleBuffer",renderTargetBlurBuffer1:"renderTargetBlurBuffer1",renderTargetBlurBuffer2:"renderTargetBlurBuffer2",edgeDetectionMaterial:"edgeDetectionMaterial",renderTargetEdgeBuffer1:"renderTargetEdgeBuffer1",renderTargetEdgeBuffer2:"renderTargetEdgeBuffer2",separableBlurMaterial1:"separableBlurMaterial1",separableBlurMaterial2:"separableBlurMaterial2",overlayMaterial:"overlayMaterial",copyUniforms:"copyUniforms",materialCopy:"materialCopy",oldClearColor:"oldClearColor",oldClearAlpha:"oldClearAlpha",fsQuad:"fsQuad",tempPulseColor1:"tempPulseColor1",tempPulseColor2:"tempPulseColor2",textureMatrix:"textureMatrix"},standalone:!1,features:[J([{provide:gi,useExisting:_e(()=>n)}]),q],ngContentSelectors:ase,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var cse=["*"],lI=(()=>{class n extends fn{getType(){return Et}get isShaderMaterial(){return this._objRef?.isShaderMaterial}set defines(t){this._objRef&&(this._objRef.defines=t)}get defines(){return this._objRef?.defines}set uniforms(t){this._objRef&&(this._objRef.uniforms=t)}get uniforms(){return this._objRef?.uniforms}set uniformsGroups(t){this._objRef&&(this._objRef.uniformsGroups=t)}get uniformsGroups(){return this._objRef?.uniformsGroups}set vertexShader(t){this._objRef&&(this._objRef.vertexShader=t)}get vertexShader(){return this._objRef?.vertexShader}set fragmentShader(t){this._objRef&&(this._objRef.fragmentShader=t)}get fragmentShader(){return this._objRef?.fragmentShader}set linewidth(t){this._objRef&&(this._objRef.linewidth=t)}get linewidth(){return this._objRef?.linewidth}set wireframe(t){this._objRef&&(this._objRef.wireframe=t)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(t){this._objRef&&(this._objRef.wireframeLinewidth=t)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set fog(t){this._objRef&&(this._objRef.fog=t)}get fog(){return this._objRef?.fog}set lights(t){this._objRef&&(this._objRef.lights=t)}get lights(){return this._objRef?.lights}set clipping(t){this._objRef&&(this._objRef.clipping=t)}get clipping(){return this._objRef?.clipping}set extensions(t){this._objRef&&(this._objRef.extensions=t)}get extensions(){return this._objRef?.extensions}set defaultAttributeValues(t){this._objRef&&(this._objRef.defaultAttributeValues=t)}get defaultAttributeValues(){return this._objRef?.defaultAttributeValues}set index0AttributeName(t){this._objRef&&(this._objRef.index0AttributeName=t)}get index0AttributeName(){return this._objRef?.index0AttributeName}set uniformsNeedUpdate(t){this._objRef&&(this._objRef.uniformsNeedUpdate=t)}get uniformsNeedUpdate(){return this._objRef?.uniformsNeedUpdate}set glslVersion(t){this._objRef&&(this._objRef.glslVersion=t)}get glslVersion(){return this._objRef?.glslVersion}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-shaderMaterial"]],inputs:{defines:"defines",uniforms:"uniforms",uniformsGroups:"uniformsGroups",vertexShader:"vertexShader",fragmentShader:"fragmentShader",linewidth:"linewidth",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",fog:"fog",lights:"lights",clipping:"clipping",extensions:"extensions",defaultAttributeValues:"defaultAttributeValues",index0AttributeName:"index0AttributeName",uniformsNeedUpdate:"uniformsNeedUpdate",glslVersion:"glslVersion"},standalone:!1,features:[J([{provide:fn,useExisting:_e(()=>n)}]),q],ngContentSelectors:cse,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var zM=class extends mn{constructor(e,t,i=null,r=null,o=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=i,this.clearColor=r,this.clearAlpha=o,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new he}render(e,t,i){let r=e.autoClear;e.autoClear=!1;let o,s;this.overrideMaterial!==null&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(o=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(o),this.overrideMaterial!==null&&(this.scene.overrideMaterial=s),e.autoClear=r}};var use=["*"],nz=(()=>{class n extends Pi{getType(){return zM}set scene(t){this._objRef&&(this._objRef.scene=t)}get scene(){return this._objRef?.scene}set camera(t){this._objRef&&(this._objRef.camera=t)}get camera(){return this._objRef?.camera}set overrideMaterial(t){this._objRef&&(this._objRef.overrideMaterial=t)}get overrideMaterial(){return this._objRef?.overrideMaterial}set clearColor(t){this._objRef&&(this._objRef.clearColor=me(this._objRef.clearColor,t))}get clearColor(){return this._objRef?.clearColor}set clearAlpha(t){this._objRef&&(this._objRef.clearAlpha=t)}get clearAlpha(){return this._objRef?.clearAlpha}set clearDepth(t){this._objRef&&(this._objRef.clearDepth=t)}get clearDepth(){return this._objRef?.clearDepth}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-renderPassGen"]],inputs:{scene:"scene",camera:"camera",overrideMaterial:"overrideMaterial",clearColor:"clearColor",clearAlpha:"clearAlpha",clearDepth:"clearDepth"},standalone:!1,features:[J([{provide:gi,useExisting:_e(()=>n)}]),q],ngContentSelectors:use,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Sb={name:"SAOShader",defines:{NUM_SAMPLES:7,NUM_RINGS:4,DIFFUSE_TEXTURE:0,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new V(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new Ie},cameraInverseProjectionMatrix:{value:new Ie},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`
		#include <common>

		varying vec2 vUv;

		#if DIFFUSE_TEXTURE == 1
		uniform sampler2D tDiffuse;
		#endif

		uniform highp sampler2D tDepth;
		uniform highp sampler2D tNormal;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;

		uniform float scale;
		uniform float intensity;
		uniform float bias;
		uniform float kernelRadius;
		uniform float minResolution;
		uniform vec2 size;
		uniform float randomSeed;

		// RGBA depth

		#include <packing>

		vec4 getDefaultColor( const in vec2 screenPosition ) {
			#if DIFFUSE_TEXTURE == 1
			return texture2D( tDiffuse, vUv );
			#else
			return vec4( 1.0 );
			#endif
		}

		float getDepth( const in vec2 screenPosition ) {
			return texture2D( tDepth, screenPosition ).x;
		}

		float getViewZ( const in float depth ) {
			#if PERSPECTIVE_CAMERA == 1
			return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
			return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}

		vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {
			float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];
			vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );
			clipPosition *= clipW; // unprojection.

			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;
		}

		vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {
			return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );
		}

		float scaleDividedByCameraFar;
		float minResolutionMultipliedByCameraFar;

		float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {
			vec3 viewDelta = sampleViewPosition - centerViewPosition;
			float viewDistance = length( viewDelta );
			float scaledScreenDistance = scaleDividedByCameraFar * viewDistance;

			return max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );
		}

		// moving costly divides into consts
		const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );
		const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );

		float getAmbientOcclusion( const in vec3 centerViewPosition ) {
			// precompute some variables require in getOcclusion.
			scaleDividedByCameraFar = scale / cameraFar;
			minResolutionMultipliedByCameraFar = minResolution * cameraFar;
			vec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );

			// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/
			float angle = rand( vUv + randomSeed ) * PI2;
			vec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;
			vec2 radiusStep = radius;

			float occlusionSum = 0.0;
			float weightSum = 0.0;

			for( int i = 0; i < NUM_SAMPLES; i ++ ) {
				vec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;
				radius += radiusStep;
				angle += ANGLE_STEP;

				float sampleDepth = getDepth( sampleUv );
				if( sampleDepth >= ( 1.0 - EPSILON ) ) {
					continue;
				}

				float sampleViewZ = getViewZ( sampleDepth );
				vec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );
				occlusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );
				weightSum += 1.0;
			}

			if( weightSum == 0.0 ) discard;

			return occlusionSum * ( intensity / weightSum );
		}

		void main() {
			float centerDepth = getDepth( vUv );
			if( centerDepth >= ( 1.0 - EPSILON ) ) {
				discard;
			}

			float centerViewZ = getViewZ( centerDepth );
			vec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );

			float ambientOcclusion = getAmbientOcclusion( viewPosition );

			gl_FragColor = getDefaultColor( vUv );
			gl_FragColor.xyz *=  1.0 - ambientOcclusion;
		}`};var Yl={name:"DepthLimitedBlurShader",defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new V(512,512)},sampleUvOffsets:{value:[new V(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1e3},depthCutoff:{value:10}},vertexShader:`

		#include <common>

		uniform vec2 size;

		varying vec2 vUv;
		varying vec2 vInvSize;

		void main() {
			vUv = uv;
			vInvSize = 1.0 / size;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`

		#include <common>
		#include <packing>

		uniform sampler2D tDiffuse;
		uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform float depthCutoff;

		uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];
		uniform float sampleWeights[ KERNEL_RADIUS + 1 ];

		varying vec2 vUv;
		varying vec2 vInvSize;

		float getDepth( const in vec2 screenPosition ) {
			#if DEPTH_PACKING == 1
			return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );
			#else
			return texture2D( tDepth, screenPosition ).x;
			#endif
		}

		float getViewZ( const in float depth ) {
			#if PERSPECTIVE_CAMERA == 1
			return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
			return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}

		void main() {
			float depth = getDepth( vUv );
			if( depth >= ( 1.0 - EPSILON ) ) {
				discard;
			}

			float centerViewZ = -getViewZ( depth );
			bool rBreak = false, lBreak = false;

			float weightSum = sampleWeights[0];
			vec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;

			for( int i = 1; i <= KERNEL_RADIUS; i ++ ) {

				float sampleWeight = sampleWeights[i];
				vec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;

				vec2 sampleUv = vUv + sampleUvOffset;
				float viewZ = -getViewZ( getDepth( sampleUv ) );

				if( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;

				if( ! rBreak ) {
					diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;
					weightSum += sampleWeight;
				}

				sampleUv = vUv - sampleUvOffset;
				viewZ = -getViewZ( getDepth( sampleUv ) );

				if( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;

				if( ! lBreak ) {
					diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;
					weightSum += sampleWeight;
				}

			}

			gl_FragColor = diffuseSum / weightSum;
		}`},Tb={createSampleWeights:function(n,e){let t=[];for(let i=0;i<=n;i++)t.push(hse(i,e));return t},createSampleOffsets:function(n,e){let t=[];for(let i=0;i<=n;i++)t.push(e.clone().multiplyScalar(i));return t},configure:function(n,e,t,i){n.defines.KERNEL_RADIUS=e,n.uniforms.sampleUvOffsets.value=Tb.createSampleOffsets(e,i),n.uniforms.sampleWeights.value=Tb.createSampleWeights(e,t),n.needsUpdate=!0}};function hse(n,e){return Math.exp(-(n*n)/(2*(e*e)))/(Math.sqrt(2*Math.PI)*e)}var cI=(()=>{class n extends mn{constructor(t,i,r=new V(256,256)){super(),this.scene=t,this.camera=i,this.clear=!0,this.needsSwap=!1,this.originalClearColor=new he,this._oldClearColor=new he,this.oldClearAlpha=1,this.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},this.resolution=new V(r.x,r.y),this.saoRenderTarget=new ti(this.resolution.x,this.resolution.y,{type:zi}),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone();let o=new ps;o.format=hs,o.type=_s,this.normalRenderTarget=new ti(this.resolution.x,this.resolution.y,{minFilter:hi,magFilter:hi,type:zi,depthTexture:o}),this.normalMaterial=new Xs,this.normalMaterial.blending=ii,this.saoMaterial=new Et({defines:Object.assign({},Sb.defines),fragmentShader:Sb.fragmentShader,vertexShader:Sb.vertexShader,uniforms:Hi.clone(Sb.uniforms)}),this.saoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms.tDepth.value=o,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.blending=ii,this.vBlurMaterial=new Et({uniforms:Hi.clone(Yl.uniforms),defines:Object.assign({},Yl.defines),vertexShader:Yl.vertexShader,fragmentShader:Yl.fragmentShader}),this.vBlurMaterial.defines.DEPTH_PACKING=0,this.vBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms.tDepth.value=o,this.vBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=ii,this.hBlurMaterial=new Et({uniforms:Hi.clone(Yl.uniforms),defines:Object.assign({},Yl.defines),vertexShader:Yl.vertexShader,fragmentShader:Yl.fragmentShader}),this.hBlurMaterial.defines.DEPTH_PACKING=0,this.hBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms.tDiffuse.value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms.tDepth.value=o,this.hBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=ii,this.materialCopy=new Et({uniforms:Hi.clone(br.uniforms),vertexShader:br.vertexShader,fragmentShader:br.fragmentShader,blending:ii}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=Uc,this.materialCopy.blendSrc=vu,this.materialCopy.blendDst=Il,this.materialCopy.blendEquation=fr,this.materialCopy.blendSrcAlpha=bu,this.materialCopy.blendDstAlpha=Il,this.materialCopy.blendEquationAlpha=fr,this.fsQuad=new _r(null)}render(t,i,r){this.renderToScreen&&(this.materialCopy.blending=ii,this.materialCopy.uniforms.tDiffuse.value=r.texture,this.materialCopy.needsUpdate=!0,this.renderPass(t,this.materialCopy,null)),t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();let o=t.autoClear;t.autoClear=!1,this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;let s=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);this.vBlurMaterial.uniforms.depthCutoff.value=s,this.hBlurMaterial.uniforms.depthCutoff.value=s,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),(this.prevStdDev!==this.params.saoBlurStdDev||this.prevNumSamples!==this.params.saoBlurRadius)&&(Tb.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new V(0,1)),Tb.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new V(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),this.renderOverride(t,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(t,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(t,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(t,this.hBlurMaterial,this.saoRenderTarget,16777215,1));let a=this.materialCopy;this.params.output===n.OUTPUT.Normal?(this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),this.params.output===n.OUTPUT.Default?a.blending=Uc:a.blending=ii,this.renderPass(t,a,this.renderToScreen?null:r),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=o}renderPass(t,i,r,o,s){t.getClearColor(this.originalClearColor);let a=t.getClearAlpha(),l=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,o!=null&&(t.setClearColor(o),t.setClearAlpha(s||0),t.clear()),this.fsQuad.material=i,this.fsQuad.render(t),t.autoClear=l,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}renderOverride(t,i,r,o,s){t.getClearColor(this.originalClearColor);let a=t.getClearAlpha(),l=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,o=i.clearColor||o,s=i.clearAlpha||s,o!=null&&(t.setClearColor(o),t.setClearAlpha(s||0),t.clear()),this.scene.overrideMaterial=i,t.render(this.scene,this.camera),this.scene.overrideMaterial=null,t.autoClear=l,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}setSize(t,i){this.saoRenderTarget.setSize(t,i),this.blurIntermediateRenderTarget.setSize(t,i),this.normalRenderTarget.setSize(t,i),this.saoMaterial.uniforms.size.value.set(t,i),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(t,i),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(t,i),this.hBlurMaterial.needsUpdate=!0}dispose(){this.saoRenderTarget.dispose(),this.blurIntermediateRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.normalMaterial.dispose(),this.saoMaterial.dispose(),this.vBlurMaterial.dispose(),this.hBlurMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}}return n.OUTPUT={Default:0,SAO:1,Normal:2},n})();var fse=["*"],rz=class n extends Pi{getType(){return cI}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set originalClearColor(e){this._objRef&&(this._objRef.originalClearColor=me(this._objRef.originalClearColor,e))}get originalClearColor(){return this._objRef?.originalClearColor}set oldClearColor(e){this._objRef&&(this._objRef.oldClearColor=me(this._objRef.oldClearColor,e))}get oldClearColor(){return this._objRef?.oldClearColor}set oldClearAlpha(e){this._objRef&&(this._objRef.oldClearAlpha=e)}get oldClearAlpha(){return this._objRef?.oldClearAlpha}set resolution(e){this._objRef&&(this._objRef.resolution=me(this._objRef.resolution,e))}get resolution(){return this._objRef?.resolution}set saoRenderTarget(e){this._objRef&&(this._objRef.saoRenderTarget=e)}get saoRenderTarget(){return this._objRef?.saoRenderTarget}set blurIntermediateRenderTarget(e){this._objRef&&(this._objRef.blurIntermediateRenderTarget=e)}get blurIntermediateRenderTarget(){return this._objRef?.blurIntermediateRenderTarget}set normalRenderTarget(e){this._objRef&&(this._objRef.normalRenderTarget=e)}get normalRenderTarget(){return this._objRef?.normalRenderTarget}set normalMaterial(e){this._objRef&&(this._objRef.normalMaterial=e)}get normalMaterial(){return this._objRef?.normalMaterial}set saoMaterial(e){this._objRef&&(this._objRef.saoMaterial=e)}get saoMaterial(){return this._objRef?.saoMaterial}set vBlurMaterial(e){this._objRef&&(this._objRef.vBlurMaterial=e)}get vBlurMaterial(){return this._objRef?.vBlurMaterial}set hBlurMaterial(e){this._objRef&&(this._objRef.hBlurMaterial=e)}get hBlurMaterial(){return this._objRef?.hBlurMaterial}set materialCopy(e){this._objRef&&(this._objRef.materialCopy=e)}get materialCopy(){return this._objRef?.materialCopy}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set params(e){this._objRef&&(this._objRef.params=e)}get params(){return this._objRef?.params}static{this.OUTPUT=cI.OUTPUT}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=le(n)))(i||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-sAOPass"]],inputs:{scene:"scene",camera:"camera",originalClearColor:"originalClearColor",oldClearColor:"oldClearColor",oldClearAlpha:"oldClearAlpha",resolution:"resolution",saoRenderTarget:"saoRenderTarget",blurIntermediateRenderTarget:"blurIntermediateRenderTarget",normalRenderTarget:"normalRenderTarget",normalMaterial:"normalMaterial",saoMaterial:"saoMaterial",vBlurMaterial:"vBlurMaterial",hBlurMaterial:"hBlurMaterial",materialCopy:"materialCopy",fsQuad:"fsQuad",params:"params"},standalone:!1,features:[J([{provide:gi,useExisting:_e(()=>n)}]),q],ngContentSelectors:fse,decls:1,vars:0,template:function(t,i){t&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}};var HM=class{constructor(e=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let t=0;t<256;t++)this.p[t]=Math.floor(e.random()*256);this.perm=[];for(let t=0;t<512;t++)this.perm[t]=this.p[t&255];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(e,t,i){return e[0]*t+e[1]*i}dot3(e,t,i,r){return e[0]*t+e[1]*i+e[2]*r}dot4(e,t,i,r,o){return e[0]*t+e[1]*i+e[2]*r+e[3]*o}noise(e,t){let i,r,o,s=.5*(Math.sqrt(3)-1),a=(e+t)*s,l=Math.floor(e+a),c=Math.floor(t+a),d=(3-Math.sqrt(3))/6,u=(l+c)*d,h=l-u,f=c-u,m=e-h,_=t-f,g,p;m>_?(g=1,p=0):(g=0,p=1);let b=m-g+d,v=_-p+d,y=m-1+2*d,R=_-1+2*d,S=l&255,T=c&255,A=this.perm[S+this.perm[T]]%12,M=this.perm[S+g+this.perm[T+p]]%12,x=this.perm[S+1+this.perm[T+1]]%12,I=.5-m*m-_*_;I<0?i=0:(I*=I,i=I*I*this.dot(this.grad3[A],m,_));let z=.5-b*b-v*v;z<0?r=0:(z*=z,r=z*z*this.dot(this.grad3[M],b,v));let W=.5-y*y-R*R;return W<0?o=0:(W*=W,o=W*W*this.dot(this.grad3[x],y,R)),70*(i+r+o)}noise3d(e,t,i){let r,o,s,a,c=(e+t+i)*.3333333333333333,d=Math.floor(e+c),u=Math.floor(t+c),h=Math.floor(i+c),f=1/6,m=(d+u+h)*f,_=d-m,g=u-m,p=h-m,b=e-_,v=t-g,y=i-p,R,S,T,A,M,x;b>=v?v>=y?(R=1,S=0,T=0,A=1,M=1,x=0):b>=y?(R=1,S=0,T=0,A=1,M=0,x=1):(R=0,S=0,T=1,A=1,M=0,x=1):v<y?(R=0,S=0,T=1,A=0,M=1,x=1):b<y?(R=0,S=1,T=0,A=0,M=1,x=1):(R=0,S=1,T=0,A=1,M=1,x=0);let I=b-R+f,z=v-S+f,W=y-T+f,ee=b-A+2*f,se=v-M+2*f,N=y-x+2*f,H=b-1+3*f,L=v-1+3*f,te=y-1+3*f,Se=d&255,Pe=u&255,Ge=h&255,St=this.perm[Se+this.perm[Pe+this.perm[Ge]]]%12,K=this.perm[Se+R+this.perm[Pe+S+this.perm[Ge+T]]]%12,Re=this.perm[Se+A+this.perm[Pe+M+this.perm[Ge+x]]]%12,We=this.perm[Se+1+this.perm[Pe+1+this.perm[Ge+1]]]%12,ve=.6-b*b-v*v-y*y;ve<0?r=0:(ve*=ve,r=ve*ve*this.dot3(this.grad3[St],b,v,y));let ze=.6-I*I-z*z-W*W;ze<0?o=0:(ze*=ze,o=ze*ze*this.dot3(this.grad3[K],I,z,W));let qe=.6-ee*ee-se*se-N*N;qe<0?s=0:(qe*=qe,s=qe*qe*this.dot3(this.grad3[Re],ee,se,N));let Be=.6-H*H-L*L-te*te;return Be<0?a=0:(Be*=Be,a=Be*Be*this.dot3(this.grad3[We],H,L,te)),32*(r+o+s+a)}noise4d(e,t,i,r){let o=this.grad4,s=this.simplex,a=this.perm,l=(Math.sqrt(5)-1)/4,c=(5-Math.sqrt(5))/20,d,u,h,f,m,_=(e+t+i+r)*l,g=Math.floor(e+_),p=Math.floor(t+_),b=Math.floor(i+_),v=Math.floor(r+_),y=(g+p+b+v)*c,R=g-y,S=p-y,T=b-y,A=v-y,M=e-R,x=t-S,I=i-T,z=r-A,W=M>x?32:0,ee=M>I?16:0,se=x>I?8:0,N=M>z?4:0,H=x>z?2:0,L=I>z?1:0,te=W+ee+se+N+H+L,Se=s[te][0]>=3?1:0,Pe=s[te][1]>=3?1:0,Ge=s[te][2]>=3?1:0,St=s[te][3]>=3?1:0,K=s[te][0]>=2?1:0,Re=s[te][1]>=2?1:0,We=s[te][2]>=2?1:0,ve=s[te][3]>=2?1:0,ze=s[te][0]>=1?1:0,qe=s[te][1]>=1?1:0,Be=s[te][2]>=1?1:0,di=s[te][3]>=1?1:0,xe=M-Se+c,Fe=x-Pe+c,F=I-Ge+c,pt=z-St+c,Ce=M-K+2*c,Je=x-Re+2*c,Oe=I-We+2*c,wt=z-ve+2*c,$e=M-ze+3*c,P=x-qe+3*c,C=I-Be+3*c,X=z-di+3*c,pe=M-1+4*c,Me=x-1+4*c,ge=I-1+4*c,ut=z-1+4*c,je=g&255,Xe=p&255,Qt=b&255,Ee=v&255,ot=a[je+a[Xe+a[Qt+a[Ee]]]]%32,Tt=a[je+Se+a[Xe+Pe+a[Qt+Ge+a[Ee+St]]]]%32,kt=a[je+K+a[Xe+Re+a[Qt+We+a[Ee+ve]]]]%32,st=a[je+ze+a[Xe+qe+a[Qt+Be+a[Ee+di]]]]%32,Mi=a[je+1+a[Xe+1+a[Qt+1+a[Ee+1]]]]%32,jt=.6-M*M-x*x-I*I-z*z;jt<0?d=0:(jt*=jt,d=jt*jt*this.dot4(o[ot],M,x,I,z));let Di=.6-xe*xe-Fe*Fe-F*F-pt*pt;Di<0?u=0:(Di*=Di,u=Di*Di*this.dot4(o[Tt],xe,Fe,F,pt));let B=.6-Ce*Ce-Je*Je-Oe*Oe-wt*wt;B<0?h=0:(B*=B,h=B*B*this.dot4(o[kt],Ce,Je,Oe,wt));let Le=.6-$e*$e-P*P-C*C-X*X;Le<0?f=0:(Le*=Le,f=Le*Le*this.dot4(o[st],$e,P,C,X));let de=.6-pe*pe-Me*Me-ge*ge-ut*ut;return de<0?m=0:(de*=de,m=de*de*this.dot4(o[Mi],pe,Me,ge,ut)),27*(d+u+h+f+m)}};var Rb={name:"SSAOShader",defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new V},cameraProjectionMatrix:{value:new Ie},cameraInverseProjectionMatrix:{value:new Ie},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
		uniform highp sampler2D tNormal;
		uniform highp sampler2D tDepth;
		uniform sampler2D tNoise;

		uniform vec3 kernel[ KERNEL_SIZE ];

		uniform vec2 resolution;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;

		uniform float kernelRadius;
		uniform float minDistance; // avoid artifacts caused by neighbour fragments with minimal depth difference
		uniform float maxDistance; // avoid the influence of fragments which are too far away

		varying vec2 vUv;

		#include <packing>

		float getDepth( const in vec2 screenPosition ) {

			return texture2D( tDepth, screenPosition ).x;

		}

		float getLinearDepth( const in vec2 screenPosition ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, screenPosition ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, screenPosition ).x;

			#endif

		}

		float getViewZ( const in float depth ) {

			#if PERSPECTIVE_CAMERA == 1

				return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );

			#else

				return orthographicDepthToViewZ( depth, cameraNear, cameraFar );

			#endif

		}

		vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {

			float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];

			vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );

			clipPosition *= clipW; // unprojection.

			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;

		}

		vec3 getViewNormal( const in vec2 screenPosition ) {

			return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );

		}

		void main() {

			float depth = getDepth( vUv );

			if ( depth == 1.0 ) {

				gl_FragColor = vec4( 1.0 ); // don't influence background
				
			} else {

				float viewZ = getViewZ( depth );

				vec3 viewPosition = getViewPosition( vUv, depth, viewZ );
				vec3 viewNormal = getViewNormal( vUv );

				vec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );
				vec3 random = vec3( texture2D( tNoise, vUv * noiseScale ).r );

				// compute matrix used to reorient a kernel vector

				vec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );
				vec3 bitangent = cross( viewNormal, tangent );
				mat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );

				float occlusion = 0.0;

				for ( int i = 0; i < KERNEL_SIZE; i ++ ) {

					vec3 sampleVector = kernelMatrix * kernel[ i ]; // reorient sample vector in view space
					vec3 samplePoint = viewPosition + ( sampleVector * kernelRadius ); // calculate sample point

					vec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 ); // project point and calculate NDC
					samplePointNDC /= samplePointNDC.w;

					vec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5; // compute uv coordinates

					float realDepth = getLinearDepth( samplePointUv ); // get linear depth from depth texture
					float sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar ); // compute linear depth of the sample view Z value
					float delta = sampleDepth - realDepth;

					if ( delta > minDistance && delta < maxDistance ) { // if fragment is before sample point, increase occlusion

						occlusion += 1.0;

					}

				}

				occlusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );

				gl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );

			}

		}`},Cb={name:"SSAODepthShader",defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:`varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;

		varying vec2 vUv;

		#include <packing>

		float getLinearDepth( const in vec2 screenPosition ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, screenPosition ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, screenPosition ).x;

			#endif

		}

		void main() {

			float depth = getLinearDepth( vUv );
			gl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );

		}`},Eb={name:"SSAOBlurShader",uniforms:{tDiffuse:{value:null},resolution:{value:new V}},vertexShader:`varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`uniform sampler2D tDiffuse;

		uniform vec2 resolution;

		varying vec2 vUv;

		void main() {

			vec2 texelSize = ( 1.0 / resolution );
			float result = 0.0;

			for ( int i = - 2; i <= 2; i ++ ) {

				for ( int j = - 2; j <= 2; j ++ ) {

					vec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;
					result += texture2D( tDiffuse, vUv + offset ).r;

				}

			}

			gl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );

		}`};var dI=(()=>{class n extends mn{constructor(t,i,r,o,s=32){super(),this.width=r!==void 0?r:512,this.height=o!==void 0?o:512,this.clear=!0,this.needsSwap=!1,this.camera=i,this.scene=t,this.kernelRadius=8,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(s),this.generateRandomKernelRotations();let a=new ps;a.format=hs,a.type=_s,this.normalRenderTarget=new ti(this.width,this.height,{minFilter:hi,magFilter:hi,type:zi,depthTexture:a}),this.ssaoRenderTarget=new ti(this.width,this.height,{type:zi}),this.blurRenderTarget=this.ssaoRenderTarget.clone(),this.ssaoMaterial=new Et({defines:Object.assign({},Rb.defines),uniforms:Hi.clone(Rb.uniforms),vertexShader:Rb.vertexShader,fragmentShader:Rb.fragmentShader,blending:ii}),this.ssaoMaterial.defines.KERNEL_SIZE=s,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new Xs,this.normalMaterial.blending=ii,this.blurMaterial=new Et({defines:Object.assign({},Eb.defines),uniforms:Hi.clone(Eb.uniforms),vertexShader:Eb.vertexShader,fragmentShader:Eb.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new Et({defines:Object.assign({},Cb.defines),uniforms:Hi.clone(Cb.uniforms),vertexShader:Cb.vertexShader,fragmentShader:Cb.fragmentShader,blending:ii}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new Et({uniforms:Hi.clone(br.uniforms),vertexShader:br.vertexShader,fragmentShader:br.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:vu,blendDst:Il,blendEquation:fr,blendSrcAlpha:bu,blendDstAlpha:Il,blendEquationAlpha:fr}),this.fsQuad=new _r(null),this.originalClearColor=new he}dispose(){this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(t,i,r){switch(this.overrideVisibility(),this.renderOverride(t,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(t,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(t,this.blurMaterial,this.blurRenderTarget),this.output){case n.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=ii,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:r);break;case n.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=ii,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:r);break;case n.OUTPUT.Depth:this.renderPass(t,this.depthRenderMaterial,this.renderToScreen?null:r);break;case n.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=ii,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:r);break;case n.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=Uc,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:r);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}renderPass(t,i,r,o,s){t.getClearColor(this.originalClearColor);let a=t.getClearAlpha(),l=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,o!=null&&(t.setClearColor(o),t.setClearAlpha(s||0),t.clear()),this.fsQuad.material=i,this.fsQuad.render(t),t.autoClear=l,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}renderOverride(t,i,r,o,s){t.getClearColor(this.originalClearColor);let a=t.getClearAlpha(),l=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,o=i.clearColor||o,s=i.clearAlpha||s,o!=null&&(t.setClearColor(o),t.setClearAlpha(s||0),t.clear()),this.scene.overrideMaterial=i,t.render(this.scene,this.camera),this.scene.overrideMaterial=null,t.autoClear=l,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}setSize(t,i){this.width=t,this.height=i,this.ssaoRenderTarget.setSize(t,i),this.normalRenderTarget.setSize(t,i),this.blurRenderTarget.setSize(t,i),this.ssaoMaterial.uniforms.resolution.value.set(t,i),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(t,i)}generateSampleKernel(t){let i=this.kernel;for(let r=0;r<t;r++){let o=new w;o.x=Math.random()*2-1,o.y=Math.random()*2-1,o.z=Math.random(),o.normalize();let s=r/t;s=it.lerp(.1,1,s*s),o.multiplyScalar(s),i.push(o)}}generateRandomKernelRotations(){let r=new HM,o=4*4,s=new Float32Array(o);for(let a=0;a<o;a++){let l=Math.random()*2-1,c=Math.random()*2-1,d=0;s[a]=r.noise3d(l,c,d)}this.noiseTexture=new Mr(s,4,4,Ol,nr),this.noiseTexture.wrapS=zo,this.noiseTexture.wrapT=zo,this.noiseTexture.needsUpdate=!0}overrideVisibility(){let t=this.scene,i=this._visibilityCache;t.traverse(function(r){i.set(r,r.visible),(r.isPoints||r.isLine)&&(r.visible=!1)})}restoreVisibility(){let t=this.scene,i=this._visibilityCache;t.traverse(function(r){let o=i.get(r);r.visible=o}),i.clear()}}return n.OUTPUT={Default:0,SSAO:1,Blur:2,Depth:3,Normal:4},n})();var pse=["*"],oz=class n extends Pi{getType(){return dI}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set width(e){this._objRef&&(this._objRef.width=e)}get width(){return this._objRef?.width}set height(e){this._objRef&&(this._objRef.height=e)}get height(){return this._objRef?.height}set clear(e){this._objRef&&(this._objRef.clear=e)}get clear(){return this._objRef?.clear}set kernelRadius(e){this._objRef&&(this._objRef.kernelRadius=e)}get kernelRadius(){return this._objRef?.kernelRadius}set kernel(e){this._objRef&&(this._objRef.kernel=e)}get kernel(){return this._objRef?.kernel}set noiseTexture(e){this._objRef&&(this._objRef.noiseTexture=e)}get noiseTexture(){return this._objRef?.noiseTexture}set output(e){this._objRef&&(this._objRef.output=e)}get output(){return this._objRef?.output}set minDistance(e){this._objRef&&(this._objRef.minDistance=e)}get minDistance(){return this._objRef?.minDistance}set maxDistance(e){this._objRef&&(this._objRef.maxDistance=e)}get maxDistance(){return this._objRef?.maxDistance}set normalRenderTarget(e){this._objRef&&(this._objRef.normalRenderTarget=e)}get normalRenderTarget(){return this._objRef?.normalRenderTarget}set ssaoRenderTarget(e){this._objRef&&(this._objRef.ssaoRenderTarget=e)}get ssaoRenderTarget(){return this._objRef?.ssaoRenderTarget}set blurRenderTarget(e){this._objRef&&(this._objRef.blurRenderTarget=e)}get blurRenderTarget(){return this._objRef?.blurRenderTarget}set ssaoMaterial(e){this._objRef&&(this._objRef.ssaoMaterial=e)}get ssaoMaterial(){return this._objRef?.ssaoMaterial}set normalMaterial(e){this._objRef&&(this._objRef.normalMaterial=e)}get normalMaterial(){return this._objRef?.normalMaterial}set blurMaterial(e){this._objRef&&(this._objRef.blurMaterial=e)}get blurMaterial(){return this._objRef?.blurMaterial}set depthRenderMaterial(e){this._objRef&&(this._objRef.depthRenderMaterial=e)}get depthRenderMaterial(){return this._objRef?.depthRenderMaterial}set copyMaterial(e){this._objRef&&(this._objRef.copyMaterial=e)}get copyMaterial(){return this._objRef?.copyMaterial}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set originalClearColor(e){this._objRef&&(this._objRef.originalClearColor=me(this._objRef.originalClearColor,e))}get originalClearColor(){return this._objRef?.originalClearColor}static{this.OUTPUT=dI.OUTPUT}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=le(n)))(i||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-sSAOPass"]],inputs:{scene:"scene",camera:"camera",width:"width",height:"height",clear:"clear",kernelRadius:"kernelRadius",kernel:"kernel",noiseTexture:"noiseTexture",output:"output",minDistance:"minDistance",maxDistance:"maxDistance",normalRenderTarget:"normalRenderTarget",ssaoRenderTarget:"ssaoRenderTarget",blurRenderTarget:"blurRenderTarget",ssaoMaterial:"ssaoMaterial",normalMaterial:"normalMaterial",blurMaterial:"blurMaterial",depthRenderMaterial:"depthRenderMaterial",copyMaterial:"copyMaterial",fsQuad:"fsQuad",originalClearColor:"originalClearColor"},standalone:!1,features:[J([{provide:gi,useExisting:_e(()=>n)}]),q],ngContentSelectors:pse,decls:1,vars:0,template:function(t,i){t&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}};var la={name:"SSRShader",defines:{MAX_STEP:0,PERSPECTIVE_CAMERA:!0,DISTANCE_ATTENUATION:!0,FRESNEL:!0,INFINITE_THICK:!1,SELECTIVE:!1},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tMetalness:{value:null},tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new V},cameraProjectionMatrix:{value:new Ie},cameraInverseProjectionMatrix:{value:new Ie},opacity:{value:.5},maxDistance:{value:180},cameraRange:{value:0},thickness:{value:.018}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}

	`,fragmentShader:`
		// precision highp float;
		precision highp sampler2D;
		varying vec2 vUv;
		uniform sampler2D tDepth;
		uniform sampler2D tNormal;
		uniform sampler2D tMetalness;
		uniform sampler2D tDiffuse;
		uniform float cameraRange;
		uniform vec2 resolution;
		uniform float opacity;
		uniform float cameraNear;
		uniform float cameraFar;
		uniform float maxDistance;
		uniform float thickness;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;
		#include <packing>
		float pointToLineDistance(vec3 x0, vec3 x1, vec3 x2) {
			//x0: point, x1: linePointA, x2: linePointB
			//https://mathworld.wolfram.com/Point-LineDistance3-Dimensional.html
			return length(cross(x0-x1,x0-x2))/length(x2-x1);
		}
		float pointPlaneDistance(vec3 point,vec3 planePoint,vec3 planeNormal){
			// https://mathworld.wolfram.com/Point-PlaneDistance.html
			//// https://en.wikipedia.org/wiki/Plane_(geometry)
			//// http://paulbourke.net/geometry/pointlineplane/
			float a=planeNormal.x,b=planeNormal.y,c=planeNormal.z;
			float x0=point.x,y0=point.y,z0=point.z;
			float x=planePoint.x,y=planePoint.y,z=planePoint.z;
			float d=-(a*x+b*y+c*z);
			float distance=(a*x0+b*y0+c*z0+d)/sqrt(a*a+b*b+c*c);
			return distance;
		}
		float getDepth( const in vec2 uv ) {
			return texture2D( tDepth, uv ).x;
		}
		float getViewZ( const in float depth ) {
			#ifdef PERSPECTIVE_CAMERA
				return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
				return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}
		vec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {
			vec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc
			clipPosition *= clipW; //clip
			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;//view
		}
		vec3 getViewNormal( const in vec2 uv ) {
			return unpackRGBToNormal( texture2D( tNormal, uv ).xyz );
		}
		vec2 viewPositionToXY(vec3 viewPosition){
			vec2 xy;
			vec4 clip=cameraProjectionMatrix*vec4(viewPosition,1);
			xy=clip.xy;//clip
			float clipW=clip.w;
			xy/=clipW;//NDC
			xy=(xy+1.)/2.;//uv
			xy*=resolution;//screen
			return xy;
		}
		void main(){
			#ifdef SELECTIVE
				float metalness=texture2D(tMetalness,vUv).r;
				if(metalness==0.) return;
			#endif

			float depth = getDepth( vUv );
			float viewZ = getViewZ( depth );
			if(-viewZ>=cameraFar) return;

			float clipW = cameraProjectionMatrix[2][3] * viewZ+cameraProjectionMatrix[3][3];
			vec3 viewPosition=getViewPosition( vUv, depth, clipW );

			vec2 d0=gl_FragCoord.xy;
			vec2 d1;

			vec3 viewNormal=getViewNormal( vUv );

			#ifdef PERSPECTIVE_CAMERA
				vec3 viewIncidentDir=normalize(viewPosition);
				vec3 viewReflectDir=reflect(viewIncidentDir,viewNormal);
			#else
				vec3 viewIncidentDir=vec3(0,0,-1);
				vec3 viewReflectDir=reflect(viewIncidentDir,viewNormal);
			#endif

			float maxReflectRayLen=maxDistance/dot(-viewIncidentDir,viewNormal);
			// dot(a,b)==length(a)*length(b)*cos(theta) // https://www.mathsisfun.com/algebra/vectors-dot-product.html
			// if(a.isNormalized&&b.isNormalized) dot(a,b)==cos(theta)
			// maxDistance/maxReflectRayLen=cos(theta)
			// maxDistance/maxReflectRayLen==dot(a,b)
			// maxReflectRayLen==maxDistance/dot(a,b)

			vec3 d1viewPosition=viewPosition+viewReflectDir*maxReflectRayLen;
			#ifdef PERSPECTIVE_CAMERA
				if(d1viewPosition.z>-cameraNear){
					//https://tutorial.math.lamar.edu/Classes/CalcIII/EqnsOfLines.aspx
					float t=(-cameraNear-viewPosition.z)/viewReflectDir.z;
					d1viewPosition=viewPosition+viewReflectDir*t;
				}
			#endif
			d1=viewPositionToXY(d1viewPosition);

			float totalLen=length(d1-d0);
			float xLen=d1.x-d0.x;
			float yLen=d1.y-d0.y;
			float totalStep=max(abs(xLen),abs(yLen));
			float xSpan=xLen/totalStep;
			float ySpan=yLen/totalStep;
			for(float i=0.;i<float(MAX_STEP);i++){
				if(i>=totalStep) break;
				vec2 xy=vec2(d0.x+i*xSpan,d0.y+i*ySpan);
				if(xy.x<0.||xy.x>resolution.x||xy.y<0.||xy.y>resolution.y) break;
				float s=length(xy-d0)/totalLen;
				vec2 uv=xy/resolution;

				float d = getDepth(uv);
				float vZ = getViewZ( d );
				if(-vZ>=cameraFar) continue;
				float cW = cameraProjectionMatrix[2][3] * vZ+cameraProjectionMatrix[3][3];
				vec3 vP=getViewPosition( uv, d, cW );

				#ifdef PERSPECTIVE_CAMERA
					// https://comp.nus.edu.sg/~lowkl/publications/lowk_persp_interp_techrep.pdf
					float recipVPZ=1./viewPosition.z;
					float viewReflectRayZ=1./(recipVPZ+s*(1./d1viewPosition.z-recipVPZ));
				#else
					float viewReflectRayZ=viewPosition.z+s*(d1viewPosition.z-viewPosition.z);
				#endif

				// if(viewReflectRayZ>vZ) continue; // will cause "npm run make-screenshot webgl_postprocessing_ssr" high probability hang.
				// https://github.com/mrdoob/three.js/pull/21539#issuecomment-821061164
				if(viewReflectRayZ<=vZ){

					bool hit;
					#ifdef INFINITE_THICK
						hit=true;
					#else
						float away=pointToLineDistance(vP,viewPosition,d1viewPosition);

						float minThickness;
						vec2 xyNeighbor=xy;
						xyNeighbor.x+=1.;
						vec2 uvNeighbor=xyNeighbor/resolution;
						vec3 vPNeighbor=getViewPosition(uvNeighbor,d,cW);
						minThickness=vPNeighbor.x-vP.x;
						minThickness*=3.;
						float tk=max(minThickness,thickness);

						hit=away<=tk;
					#endif

					if(hit){
						vec3 vN=getViewNormal( uv );
						if(dot(viewReflectDir,vN)>=0.) continue;
						float distance=pointPlaneDistance(vP,viewPosition,viewNormal);
						if(distance>maxDistance) break;
						float op=opacity;
						#ifdef DISTANCE_ATTENUATION
							float ratio=1.-(distance/maxDistance);
							float attenuation=ratio*ratio;
							op=opacity*attenuation;
						#endif
						#ifdef FRESNEL
							float fresnelCoe=(dot(viewIncidentDir,viewReflectDir)+1.)/2.;
							op*=fresnelCoe;
						#endif
						vec4 reflectColor=texture2D(tDiffuse,uv);
						gl_FragColor.xyz=reflectColor.xyz;
						gl_FragColor.a=op;
						break;
					}
				}
			}
		}
	`},Db={name:"SSRDepthShader",defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}

	`,fragmentShader:`

		uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;

		varying vec2 vUv;

		#include <packing>

		float getLinearDepth( const in vec2 uv ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, uv ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, uv ).x;

			#endif

		}

		void main() {

			float depth = getLinearDepth( vUv );
			float d = 1.0 - depth;
			// d=(d-.999)*1000.;
			gl_FragColor = vec4( vec3( d ), 1.0 );

		}

	`},Zl={name:"SSRBlurShader",uniforms:{tDiffuse:{value:null},resolution:{value:new V},opacity:{value:.5}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}

	`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec2 resolution;
		varying vec2 vUv;
		void main() {
			//reverse engineering from PhotoShop blur filter, then change coefficient

			vec2 texelSize = ( 1.0 / resolution );

			vec4 c=texture2D(tDiffuse,vUv);

			vec2 offset;

			offset=(vec2(-1,0))*texelSize;
			vec4 cl=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(1,0))*texelSize;
			vec4 cr=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,-1))*texelSize;
			vec4 cb=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,1))*texelSize;
			vec4 ct=texture2D(tDiffuse,vUv+offset);

			// float coeCenter=.5;
			// float coeSide=.125;
			float coeCenter=.2;
			float coeSide=.2;
			float a=c.a*coeCenter+cl.a*coeSide+cr.a*coeSide+cb.a*coeSide+ct.a*coeSide;
			vec3 rgb=(c.rgb*c.a*coeCenter+cl.rgb*cl.a*coeSide+cr.rgb*cr.a*coeSide+cb.rgb*cb.a*coeSide+ct.rgb*ct.a*coeSide)/a;
			gl_FragColor=vec4(rgb,a);

		}
	`};var uI=(()=>{class n extends mn{constructor({renderer:t,scene:i,camera:r,width:o,height:s,selects:a,bouncing:l=!1,groundReflector:c}){super(),this.width=o!==void 0?o:512,this.height=s!==void 0?s:512,this.clear=!0,this.renderer=t,this.scene=i,this.camera=r,this.groundReflector=c,this.opacity=la.uniforms.opacity.value,this.output=0,this.maxDistance=la.uniforms.maxDistance.value,this.thickness=la.uniforms.thickness.value,this.tempColor=new he,this._selects=a,this.selective=Array.isArray(this._selects),Object.defineProperty(this,"selects",{get(){return this._selects},set(u){this._selects!==u&&(this._selects=u,Array.isArray(u)?(this.selective=!0,this.ssrMaterial.defines.SELECTIVE=!0,this.ssrMaterial.needsUpdate=!0):(this.selective=!1,this.ssrMaterial.defines.SELECTIVE=!1,this.ssrMaterial.needsUpdate=!0))}}),this._bouncing=l,Object.defineProperty(this,"bouncing",{get(){return this._bouncing},set(u){this._bouncing!==u&&(this._bouncing=u,u?this.ssrMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture:this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture)}}),this.blur=!0,this._distanceAttenuation=la.defines.DISTANCE_ATTENUATION,Object.defineProperty(this,"distanceAttenuation",{get(){return this._distanceAttenuation},set(u){this._distanceAttenuation!==u&&(this._distanceAttenuation=u,this.ssrMaterial.defines.DISTANCE_ATTENUATION=u,this.ssrMaterial.needsUpdate=!0)}}),this._fresnel=la.defines.FRESNEL,Object.defineProperty(this,"fresnel",{get(){return this._fresnel},set(u){this._fresnel!==u&&(this._fresnel=u,this.ssrMaterial.defines.FRESNEL=u,this.ssrMaterial.needsUpdate=!0)}}),this._infiniteThick=la.defines.INFINITE_THICK,Object.defineProperty(this,"infiniteThick",{get(){return this._infiniteThick},set(u){this._infiniteThick!==u&&(this._infiniteThick=u,this.ssrMaterial.defines.INFINITE_THICK=u,this.ssrMaterial.needsUpdate=!0)}});let d=new ps;d.type=kl,d.minFilter=hi,d.magFilter=hi,this.beautyRenderTarget=new ti(this.width,this.height,{minFilter:hi,magFilter:hi,type:zi,depthTexture:d,depthBuffer:!0}),this.prevRenderTarget=new ti(this.width,this.height,{minFilter:hi,magFilter:hi}),this.normalRenderTarget=new ti(this.width,this.height,{minFilter:hi,magFilter:hi,type:zi}),this.metalnessRenderTarget=new ti(this.width,this.height,{minFilter:hi,magFilter:hi,type:zi}),this.ssrRenderTarget=new ti(this.width,this.height,{minFilter:hi,magFilter:hi}),this.blurRenderTarget=this.ssrRenderTarget.clone(),this.blurRenderTarget2=this.ssrRenderTarget.clone(),this.ssrMaterial=new Et({defines:Object.assign({},la.defines,{MAX_STEP:Math.sqrt(this.width*this.width+this.height*this.height)}),uniforms:Hi.clone(la.uniforms),vertexShader:la.vertexShader,fragmentShader:la.fragmentShader,blending:ii}),this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssrMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssrMaterial.defines.SELECTIVE=this.selective,this.ssrMaterial.needsUpdate=!0,this.ssrMaterial.uniforms.tMetalness.value=this.metalnessRenderTarget.texture,this.ssrMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.ssrMaterial.uniforms.cameraNear.value=this.camera.near,this.ssrMaterial.uniforms.cameraFar.value=this.camera.far,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.ssrMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new Xs,this.normalMaterial.blending=ii,this.metalnessOnMaterial=new on({color:"white"}),this.metalnessOffMaterial=new on({color:"black"}),this.blurMaterial=new Et({defines:Object.assign({},Zl.defines),uniforms:Hi.clone(Zl.uniforms),vertexShader:Zl.vertexShader,fragmentShader:Zl.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.blurMaterial2=new Et({defines:Object.assign({},Zl.defines),uniforms:Hi.clone(Zl.uniforms),vertexShader:Zl.vertexShader,fragmentShader:Zl.fragmentShader}),this.blurMaterial2.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.blurMaterial2.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new Et({defines:Object.assign({},Db.defines),uniforms:Hi.clone(Db.uniforms),vertexShader:Db.vertexShader,fragmentShader:Db.fragmentShader,blending:ii}),this.depthRenderMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new Et({uniforms:Hi.clone(br.uniforms),vertexShader:br.vertexShader,fragmentShader:br.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:Sc,blendDst:Tc,blendEquation:fr,blendSrcAlpha:Sc,blendDstAlpha:Tc,blendEquationAlpha:fr}),this.fsQuad=new _r(null),this.originalClearColor=new he}dispose(){this.beautyRenderTarget.dispose(),this.prevRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.metalnessRenderTarget.dispose(),this.ssrRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.blurRenderTarget2.dispose(),this.normalMaterial.dispose(),this.metalnessOnMaterial.dispose(),this.metalnessOffMaterial.dispose(),this.blurMaterial.dispose(),this.blurMaterial2.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(t,i){switch(t.setRenderTarget(this.beautyRenderTarget),t.clear(),this.groundReflector&&(this.groundReflector.visible=!1,this.groundReflector.doRender(this.renderer,this.scene,this.camera),this.groundReflector.visible=!0),t.render(this.scene,this.camera),this.groundReflector&&(this.groundReflector.visible=!1),this.renderOverride(t,this.normalMaterial,this.normalRenderTarget,0,0),this.selective&&this.renderMetalness(t,this.metalnessOnMaterial,this.metalnessRenderTarget,0,0),this.ssrMaterial.uniforms.opacity.value=this.opacity,this.ssrMaterial.uniforms.maxDistance.value=this.maxDistance,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.renderPass(t,this.ssrMaterial,this.ssrRenderTarget),this.blur&&(this.renderPass(t,this.blurMaterial,this.blurRenderTarget),this.renderPass(t,this.blurMaterial2,this.blurRenderTarget2)),this.output){case n.OUTPUT.Default:this.bouncing?(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=ii,this.renderPass(t,this.copyMaterial,this.prevRenderTarget),this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=us,this.renderPass(t,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture,this.copyMaterial.blending=ii,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i)):(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=ii,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i),this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=us,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i));break;case n.OUTPUT.SSR:this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=ii,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i),this.bouncing&&(this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=ii,this.renderPass(t,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=us,this.renderPass(t,this.copyMaterial,this.prevRenderTarget));break;case n.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=ii,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Depth:this.renderPass(t,this.depthRenderMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=ii,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Metalness:this.copyMaterial.uniforms.tDiffuse.value=this.metalnessRenderTarget.texture,this.copyMaterial.blending=ii,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;default:console.warn("THREE.SSRPass: Unknown output type.")}}renderPass(t,i,r,o,s){this.originalClearColor.copy(t.getClearColor(this.tempColor));let a=t.getClearAlpha(this.tempColor),l=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,o!=null&&(t.setClearColor(o),t.setClearAlpha(s||0),t.clear()),this.fsQuad.material=i,this.fsQuad.render(t),t.autoClear=l,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}renderOverride(t,i,r,o,s){this.originalClearColor.copy(t.getClearColor(this.tempColor));let a=t.getClearAlpha(this.tempColor),l=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,o=i.clearColor||o,s=i.clearAlpha||s,o!=null&&(t.setClearColor(o),t.setClearAlpha(s||0),t.clear()),this.scene.overrideMaterial=i,t.render(this.scene,this.camera),this.scene.overrideMaterial=null,t.autoClear=l,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}renderMetalness(t,i,r,o,s){this.originalClearColor.copy(t.getClearColor(this.tempColor));let a=t.getClearAlpha(this.tempColor),l=t.autoClear,c=this.scene.background,d=this.scene.fog;t.setRenderTarget(r),t.autoClear=!1,this.scene.background=null,this.scene.fog=null,o=i.clearColor||o,s=i.clearAlpha||s,o!=null&&(t.setClearColor(o),t.setClearAlpha(s||0),t.clear()),this.scene.traverseVisible(u=>{u._SSRPassBackupMaterial=u.material,this._selects.includes(u)?u.material=this.metalnessOnMaterial:u.material=this.metalnessOffMaterial}),t.render(this.scene,this.camera),this.scene.traverseVisible(u=>{u.material=u._SSRPassBackupMaterial}),t.autoClear=l,t.setClearColor(this.originalClearColor),t.setClearAlpha(a),this.scene.background=c,this.scene.fog=d}setSize(t,i){this.width=t,this.height=i,this.ssrMaterial.defines.MAX_STEP=Math.sqrt(t*t+i*i),this.ssrMaterial.needsUpdate=!0,this.beautyRenderTarget.setSize(t,i),this.prevRenderTarget.setSize(t,i),this.ssrRenderTarget.setSize(t,i),this.normalRenderTarget.setSize(t,i),this.metalnessRenderTarget.setSize(t,i),this.blurRenderTarget.setSize(t,i),this.blurRenderTarget2.setSize(t,i),this.ssrMaterial.uniforms.resolution.value.set(t,i),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(t,i),this.blurMaterial2.uniforms.resolution.value.set(t,i)}}return n.OUTPUT={Default:0,SSR:1,Beauty:3,Depth:4,Normal:5,Metalness:7},n})();var mse=["*"],sz=class n extends Pi{getType(){return uI}set width(e){this._objRef&&(this._objRef.width=e)}get width(){return this._objRef?.width}set height(e){this._objRef&&(this._objRef.height=e)}get height(){return this._objRef?.height}set clear(e){this._objRef&&(this._objRef.clear=e)}get clear(){return this._objRef?.clear}set renderer(e){this._objRef&&(this._objRef.renderer=e)}get renderer(){return this._objRef?.renderer}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set groundReflector(e){this._objRef&&(this._objRef.groundReflector=e)}get groundReflector(){return this._objRef?.groundReflector}set opacity(e){this._objRef&&(this._objRef.opacity=e)}get opacity(){return this._objRef?.opacity}set output(e){this._objRef&&(this._objRef.output=e)}get output(){return this._objRef?.output}set maxDistance(e){this._objRef&&(this._objRef.maxDistance=e)}get maxDistance(){return this._objRef?.maxDistance}set thickness(e){this._objRef&&(this._objRef.thickness=e)}get thickness(){return this._objRef?.thickness}set tempColor(e){this._objRef&&(this._objRef.tempColor=me(this._objRef.tempColor,e))}get tempColor(){return this._objRef?.tempColor}get selects(){return this._objRef?.selects}set selects(e){this._objRef&&(this._objRef.selects=e)}set selective(e){this._objRef&&(this._objRef.selective=e)}get selective(){return this._objRef?.selective}get bouncing(){return this._objRef?.bouncing}set bouncing(e){this._objRef&&(this._objRef.bouncing=e)}set blur(e){this._objRef&&(this._objRef.blur=e)}get blur(){return this._objRef?.blur}get distanceAttenuation(){return this._objRef?.distanceAttenuation}set distanceAttenuation(e){this._objRef&&(this._objRef.distanceAttenuation=e)}get fresnel(){return this._objRef?.fresnel}set fresnel(e){this._objRef&&(this._objRef.fresnel=e)}get infiniteThick(){return this._objRef?.infiniteThick}set infiniteThick(e){this._objRef&&(this._objRef.infiniteThick=e)}set beautyRenderTarget(e){this._objRef&&(this._objRef.beautyRenderTarget=e)}get beautyRenderTarget(){return this._objRef?.beautyRenderTarget}set prevRenderTarget(e){this._objRef&&(this._objRef.prevRenderTarget=e)}get prevRenderTarget(){return this._objRef?.prevRenderTarget}set normalRenderTarget(e){this._objRef&&(this._objRef.normalRenderTarget=e)}get normalRenderTarget(){return this._objRef?.normalRenderTarget}set metalnessRenderTarget(e){this._objRef&&(this._objRef.metalnessRenderTarget=e)}get metalnessRenderTarget(){return this._objRef?.metalnessRenderTarget}set ssrRenderTarget(e){this._objRef&&(this._objRef.ssrRenderTarget=e)}get ssrRenderTarget(){return this._objRef?.ssrRenderTarget}set blurRenderTarget(e){this._objRef&&(this._objRef.blurRenderTarget=e)}get blurRenderTarget(){return this._objRef?.blurRenderTarget}set blurRenderTarget2(e){this._objRef&&(this._objRef.blurRenderTarget2=e)}get blurRenderTarget2(){return this._objRef?.blurRenderTarget2}set ssrMaterial(e){this._objRef&&(this._objRef.ssrMaterial=e)}get ssrMaterial(){return this._objRef?.ssrMaterial}set normalMaterial(e){this._objRef&&(this._objRef.normalMaterial=e)}get normalMaterial(){return this._objRef?.normalMaterial}set metalnessOnMaterial(e){this._objRef&&(this._objRef.metalnessOnMaterial=e)}get metalnessOnMaterial(){return this._objRef?.metalnessOnMaterial}set metalnessOffMaterial(e){this._objRef&&(this._objRef.metalnessOffMaterial=e)}get metalnessOffMaterial(){return this._objRef?.metalnessOffMaterial}set blurMaterial(e){this._objRef&&(this._objRef.blurMaterial=e)}get blurMaterial(){return this._objRef?.blurMaterial}set blurMaterial2(e){this._objRef&&(this._objRef.blurMaterial2=e)}get blurMaterial2(){return this._objRef?.blurMaterial2}set depthRenderMaterial(e){this._objRef&&(this._objRef.depthRenderMaterial=e)}get depthRenderMaterial(){return this._objRef?.depthRenderMaterial}set copyMaterial(e){this._objRef&&(this._objRef.copyMaterial=e)}get copyMaterial(){return this._objRef?.copyMaterial}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set originalClearColor(e){this._objRef&&(this._objRef.originalClearColor=me(this._objRef.originalClearColor,e))}get originalClearColor(){return this._objRef?.originalClearColor}static{this.OUTPUT=uI.OUTPUT}set dispose(e){this._objRef&&(this._objRef.dispose=e)}get dispose(){return this._objRef?.dispose}set renderPass(e){this._objRef&&(this._objRef.renderPass=e)}get renderPass(){return this._objRef?.renderPass}set renderOverride(e){this._objRef&&(this._objRef.renderOverride=e)}get renderOverride(){return this._objRef?.renderOverride}set renderMetalness(e){this._objRef&&(this._objRef.renderMetalness=e)}get renderMetalness(){return this._objRef?.renderMetalness}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=le(n)))(i||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-sSRPass"]],inputs:{width:"width",height:"height",clear:"clear",renderer:"renderer",scene:"scene",camera:"camera",groundReflector:"groundReflector",opacity:"opacity",output:"output",maxDistance:"maxDistance",thickness:"thickness",tempColor:"tempColor",selects:"selects",selective:"selective",bouncing:"bouncing",blur:"blur",distanceAttenuation:"distanceAttenuation",fresnel:"fresnel",infiniteThick:"infiniteThick",beautyRenderTarget:"beautyRenderTarget",prevRenderTarget:"prevRenderTarget",normalRenderTarget:"normalRenderTarget",metalnessRenderTarget:"metalnessRenderTarget",ssrRenderTarget:"ssrRenderTarget",blurRenderTarget:"blurRenderTarget",blurRenderTarget2:"blurRenderTarget2",ssrMaterial:"ssrMaterial",normalMaterial:"normalMaterial",metalnessOnMaterial:"metalnessOnMaterial",metalnessOffMaterial:"metalnessOffMaterial",blurMaterial:"blurMaterial",blurMaterial2:"blurMaterial2",depthRenderMaterial:"depthRenderMaterial",copyMaterial:"copyMaterial",fsQuad:"fsQuad",originalClearColor:"originalClearColor",dispose:"dispose",renderPass:"renderPass",renderOverride:"renderOverride",renderMetalness:"renderMetalness"},standalone:!1,features:[J([{provide:gi,useExisting:_e(()=>n)}]),q],ngContentSelectors:mse,decls:1,vars:0,template:function(t,i){t&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}};var gse=["*"],nd=(()=>{class n extends ni{getType(){return Da}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-sphereGeometry"]],standalone:!1,features:[J([{provide:ni,useExisting:_e(()=>n)}]),q],ngContentSelectors:gse,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var hI={type:"change"},mI={type:"start"},gI={type:"end"},az=1e-6,Fi={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},WM=new V,rd=new V,_se=new w,$M=new w,fI=new w,Dp=new Yt,lz=new w,qM=new w,pI=new w,XM=new w,YM=class extends pr{constructor(e,t=null){super(e,t),this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:ln.ROTATE,MIDDLE:ln.DOLLY,RIGHT:ln.PAN},this.state=Fi.NONE,this.keyState=Fi.NONE,this.target=new w,this._lastPosition=new w,this._lastZoom=1,this._touchZoomDistanceStart=0,this._touchZoomDistanceEnd=0,this._lastAngle=0,this._eye=new w,this._movePrev=new V,this._moveCurr=new V,this._lastAxis=new w,this._zoomStart=new V,this._zoomEnd=new V,this._panStart=new V,this._panEnd=new V,this._pointers=[],this._pointerPositions={},this._onPointerMove=vse.bind(this),this._onPointerDown=bse.bind(this),this._onPointerUp=yse.bind(this),this._onPointerCancel=xse.bind(this),this._onContextMenu=Ese.bind(this),this._onMouseWheel=Cse.bind(this),this._onKeyDown=Mse.bind(this),this._onKeyUp=wse.bind(this),this._onTouchStart=Dse.bind(this),this._onTouchMove=Ase.bind(this),this._onTouchEnd=Ise.bind(this),this._onMouseDown=Sse.bind(this),this._onMouseMove=Tse.bind(this),this._onMouseUp=Rse.bind(this),this._target0=this.target.clone(),this._position0=this.object.position.clone(),this._up0=this.object.up.clone(),this._zoom0=this.object.zoom,t!==null&&(this.connect(),this.handleResize()),this.update()}connect(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}handleResize(){let e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}update(){this._eye.subVectors(this.object.position,this.target),this.noRotate||this._rotateCamera(),this.noZoom||this._zoomCamera(),this.noPan||this._panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this._checkDistances(),this.object.lookAt(this.target),this._lastPosition.distanceToSquared(this.object.position)>az&&(this.dispatchEvent(hI),this._lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this._lastPosition.distanceToSquared(this.object.position)>az||this._lastZoom!==this.object.zoom)&&(this.dispatchEvent(hI),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type.")}reset(){this.state=Fi.NONE,this.keyState=Fi.NONE,this.target.copy(this._target0),this.object.position.copy(this._position0),this.object.up.copy(this._up0),this.object.zoom=this._zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(hI),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom}_panCamera(){if(rd.copy(this._panEnd).sub(this._panStart),rd.lengthSq()){if(this.object.isOrthographicCamera){let e=(this.object.right-this.object.left)/this.object.zoom/this.domElement.clientWidth,t=(this.object.top-this.object.bottom)/this.object.zoom/this.domElement.clientWidth;rd.x*=e,rd.y*=t}rd.multiplyScalar(this._eye.length()*this.panSpeed),$M.copy(this._eye).cross(this.object.up).setLength(rd.x),$M.add(_se.copy(this.object.up).setLength(rd.y)),this.object.position.add($M),this.target.add($M),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(rd.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}_rotateCamera(){XM.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0);let e=XM.length();e?(this._eye.copy(this.object.position).sub(this.target),lz.copy(this._eye).normalize(),qM.copy(this.object.up).normalize(),pI.crossVectors(qM,lz).normalize(),qM.setLength(this._moveCurr.y-this._movePrev.y),pI.setLength(this._moveCurr.x-this._movePrev.x),XM.copy(qM.add(pI)),fI.crossVectors(XM,this._eye).normalize(),e*=this.rotateSpeed,Dp.setFromAxisAngle(fI,e),this._eye.applyQuaternion(Dp),this.object.up.applyQuaternion(Dp),this._lastAxis.copy(fI),this._lastAngle=e):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),Dp.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(Dp),this.object.up.applyQuaternion(Dp)),this._movePrev.copy(this._moveCurr)}_zoomCamera(){let e;this.state===Fi.TOUCH_ZOOM_PAN?(e=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=it.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(e=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,e!==1&&e>0&&(this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=it.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor)}_getMouseOnScreen(e,t){return WM.set((e-this.screen.left)/this.screen.width,(t-this.screen.top)/this.screen.height),WM}_getMouseOnCircle(e,t){return WM.set((e-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-t))/this.screen.width),WM}_addPointer(e){this._pointers.push(e)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t].pointerId==e.pointerId){this._pointers.splice(t,1);return}}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new V,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){let t=e.pointerId===this._pointers[0].pointerId?this._pointers[1]:this._pointers[0];return this._pointerPositions[t.pointerId]}_checkDistances(){(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}};function bse(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n))}function vse(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function yse(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchEnd(n):this._onMouseUp(),this._removePointer(n),this._pointers.length===0&&(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp)))}function xse(n){this._removePointer(n)}function wse(){this.enabled!==!1&&(this.keyState=Fi.NONE,window.addEventListener("keydown",this._onKeyDown))}function Mse(n){this.enabled!==!1&&(window.removeEventListener("keydown",this._onKeyDown),this.keyState===Fi.NONE&&(n.code===this.keys[Fi.ROTATE]&&!this.noRotate?this.keyState=Fi.ROTATE:n.code===this.keys[Fi.ZOOM]&&!this.noZoom?this.keyState=Fi.ZOOM:n.code===this.keys[Fi.PAN]&&!this.noPan&&(this.keyState=Fi.PAN)))}function Sse(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case ln.DOLLY:this.state=Fi.ZOOM;break;case ln.ROTATE:this.state=Fi.ROTATE;break;case ln.PAN:this.state=Fi.PAN;break;default:this.state=Fi.NONE}let t=this.keyState!==Fi.NONE?this.keyState:this.state;t===Fi.ROTATE&&!this.noRotate?(this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY)),this._movePrev.copy(this._moveCurr)):t===Fi.ZOOM&&!this.noZoom?(this._zoomStart.copy(this._getMouseOnScreen(n.pageX,n.pageY)),this._zoomEnd.copy(this._zoomStart)):t===Fi.PAN&&!this.noPan&&(this._panStart.copy(this._getMouseOnScreen(n.pageX,n.pageY)),this._panEnd.copy(this._panStart)),this.dispatchEvent(mI)}function Tse(n){let e=this.keyState!==Fi.NONE?this.keyState:this.state;e===Fi.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY))):e===Fi.ZOOM&&!this.noZoom?this._zoomEnd.copy(this._getMouseOnScreen(n.pageX,n.pageY)):e===Fi.PAN&&!this.noPan&&this._panEnd.copy(this._getMouseOnScreen(n.pageX,n.pageY))}function Rse(){this.state=Fi.NONE,this.dispatchEvent(gI)}function Cse(n){if(this.enabled!==!1&&this.noZoom!==!0){switch(n.preventDefault(),n.deltaMode){case 2:this._zoomStart.y-=n.deltaY*.025;break;case 1:this._zoomStart.y-=n.deltaY*.01;break;default:this._zoomStart.y-=n.deltaY*25e-5;break}this.dispatchEvent(mI),this.dispatchEvent(gI)}}function Ese(n){this.enabled!==!1&&n.preventDefault()}function Dse(n){switch(this._trackPointer(n),this._pointers.length){case 1:this.state=Fi.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(this._pointers[0].pageX,this._pointers[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this.state=Fi.TOUCH_ZOOM_PAN;let e=this._pointers[0].pageX-this._pointers[1].pageX,t=this._pointers[0].pageY-this._pointers[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(e*e+t*t);let i=(this._pointers[0].pageX+this._pointers[1].pageX)/2,r=(this._pointers[0].pageY+this._pointers[1].pageY)/2;this._panStart.copy(this._getMouseOnScreen(i,r)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(mI)}function Ase(n){switch(this._trackPointer(n),this._pointers.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY));break;default:let e=this._getSecondPointerPosition(n),t=n.pageX-e.x,i=n.pageY-e.y;this._touchZoomDistanceEnd=Math.sqrt(t*t+i*i);let r=(n.pageX+e.x)/2,o=(n.pageY+e.y)/2;this._panEnd.copy(this._getMouseOnScreen(r,o));break}}function Ise(n){switch(this._pointers.length){case 0:this.state=Fi.NONE;break;case 1:this.state=Fi.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY)),this._movePrev.copy(this._moveCurr);break;case 2:this.state=Fi.TOUCH_ZOOM_PAN;for(let e=0;e<this._pointers.length;e++)if(this._pointers[e].pointerId!==n.pointerId){let t=this._pointerPositions[this._pointers[e].pointerId];this._moveCurr.copy(this._getMouseOnCircle(t.x,t.y)),this._movePrev.copy(this._moveCurr);break}break}this.dispatchEvent(gI)}var Pse=["*"],ZM=(()=>{class n extends cn{getType(){return YM}set screen(t){this._objRef&&(this._objRef.screen=t)}get screen(){return this._objRef?.screen}set rotateSpeed(t){this._objRef&&(this._objRef.rotateSpeed=t)}get rotateSpeed(){return this._objRef?.rotateSpeed}set zoomSpeed(t){this._objRef&&(this._objRef.zoomSpeed=t)}get zoomSpeed(){return this._objRef?.zoomSpeed}set panSpeed(t){this._objRef&&(this._objRef.panSpeed=t)}get panSpeed(){return this._objRef?.panSpeed}set noRotate(t){this._objRef&&(this._objRef.noRotate=t)}get noRotate(){return this._objRef?.noRotate}set noZoom(t){this._objRef&&(this._objRef.noZoom=t)}get noZoom(){return this._objRef?.noZoom}set noPan(t){this._objRef&&(this._objRef.noPan=t)}get noPan(){return this._objRef?.noPan}set staticMoving(t){this._objRef&&(this._objRef.staticMoving=t)}get staticMoving(){return this._objRef?.staticMoving}set dynamicDampingFactor(t){this._objRef&&(this._objRef.dynamicDampingFactor=t)}get dynamicDampingFactor(){return this._objRef?.dynamicDampingFactor}set minDistance(t){this._objRef&&(this._objRef.minDistance=t)}get minDistance(){return this._objRef?.minDistance}set maxDistance(t){this._objRef&&(this._objRef.maxDistance=t)}get maxDistance(){return this._objRef?.maxDistance}set minZoom(t){this._objRef&&(this._objRef.minZoom=t)}get minZoom(){return this._objRef?.minZoom}set maxZoom(t){this._objRef&&(this._objRef.maxZoom=t)}get maxZoom(){return this._objRef?.maxZoom}set keys(t){this._objRef&&(this._objRef.keys=t)}get keys(){return this._objRef?.keys}set mouseButtons(t){this._objRef&&(this._objRef.mouseButtons=t)}get mouseButtons(){return this._objRef?.mouseButtons}set target(t){this._objRef&&(this._objRef.target=me(this._objRef.target,t))}get target(){return this._objRef?.target}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-trackballControls"]],inputs:{screen:"screen",rotateSpeed:"rotateSpeed",zoomSpeed:"zoomSpeed",panSpeed:"panSpeed",noRotate:"noRotate",noZoom:"noZoom",noPan:"noPan",staticMoving:"staticMoving",dynamicDampingFactor:"dynamicDampingFactor",minDistance:"minDistance",maxDistance:"maxDistance",minZoom:"minZoom",maxZoom:"maxZoom",keys:"keys",mouseButtons:"mouseButtons",target:"target"},standalone:!1,features:[J([{provide:cn,useExisting:_e(()=>n)}]),q],ngContentSelectors:Pse,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Uu=new Nr,Gr=new w,od=new w,wn=new Yt,dz={X:new w(1,0,0),Y:new w(0,1,0),Z:new w(0,0,1)},_I={type:"change"},uz={type:"mouseDown",mode:null},hz={type:"mouseUp",mode:null},fz={type:"objectChange"},Ap=class extends pr{constructor(e,t=null){super(void 0,t);let i=new vI(this);this._root=i;let r=new yI;this._gizmo=r,i.add(r);let o=new xI;this._plane=o,i.add(o);let s=this;function a(v,y){let R=y;Object.defineProperty(s,v,{get:function(){return R!==void 0?R:y},set:function(S){R!==S&&(R=S,o[v]=S,r[v]=S,s.dispatchEvent({type:v+"-changed",value:S}),s.dispatchEvent(_I))}}),s[v]=y,o[v]=y,r[v]=y}a("camera",e),a("object",void 0),a("enabled",!0),a("axis",null),a("mode","translate"),a("translationSnap",null),a("rotationSnap",null),a("scaleSnap",null),a("space","world"),a("size",1),a("dragging",!1),a("showX",!0),a("showY",!0),a("showZ",!0),a("minX",-1/0),a("maxX",1/0),a("minY",-1/0),a("maxY",1/0),a("minZ",-1/0),a("maxZ",1/0);let l=new w,c=new w,d=new Yt,u=new Yt,h=new w,f=new Yt,m=new w,_=new w,g=new w,p=0,b=new w;a("worldPosition",l),a("worldPositionStart",c),a("worldQuaternion",d),a("worldQuaternionStart",u),a("cameraPosition",h),a("cameraQuaternion",f),a("pointStart",m),a("pointEnd",_),a("rotationAxis",g),a("rotationAngle",p),a("eye",b),this._offset=new w,this._startNorm=new w,this._endNorm=new w,this._cameraScale=new w,this._parentPosition=new w,this._parentQuaternion=new Yt,this._parentQuaternionInv=new Yt,this._parentScale=new w,this._worldScaleStart=new w,this._worldQuaternionInv=new Yt,this._worldScale=new w,this._positionStart=new w,this._quaternionStart=new Yt,this._scaleStart=new w,this._getPointer=Fse.bind(this),this._onPointerDown=Ose.bind(this),this._onPointerHover=kse.bind(this),this._onPointerMove=jse.bind(this),this._onPointerUp=Nse.bind(this),t!==null&&this.connect()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.style.touchAction="auto"}getHelper(){return this._root}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;e!==null&&Uu.setFromCamera(e,this.camera);let t=bI(this._gizmo.picker[this.mode],Uu);t?this.axis=t.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e!=null&&e.button!==0)&&this.axis!==null){e!==null&&Uu.setFromCamera(e,this.camera);let t=bI(this._plane,Uu,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,uz.mode=this.mode,this.dispatchEvent(uz)}}pointerMove(e){let t=this.axis,i=this.mode,r=this.object,o=this.space;if(i==="scale"?o="local":(t==="E"||t==="XYZE"||t==="XYZ")&&(o="world"),r===void 0||t===null||this.dragging===!1||e!==null&&e.button!==-1)return;e!==null&&Uu.setFromCamera(e,this.camera);let s=bI(this._plane,Uu,!0);if(s){if(this.pointEnd.copy(s.point).sub(this.worldPositionStart),i==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),o==="local"&&t!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),t.indexOf("X")===-1&&(this._offset.x=0),t.indexOf("Y")===-1&&(this._offset.y=0),t.indexOf("Z")===-1&&(this._offset.z=0),o==="local"&&t!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),r.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(o==="local"&&(r.position.applyQuaternion(wn.copy(this._quaternionStart).invert()),t.search("X")!==-1&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.position.applyQuaternion(this._quaternionStart)),o==="world"&&(r.parent&&r.position.add(Gr.setFromMatrixPosition(r.parent.matrixWorld)),t.search("X")!==-1&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.parent&&r.position.sub(Gr.setFromMatrixPosition(r.parent.matrixWorld)))),r.position.x=Math.max(this.minX,Math.min(this.maxX,r.position.x)),r.position.y=Math.max(this.minY,Math.min(this.maxY,r.position.y)),r.position.z=Math.max(this.minZ,Math.min(this.maxZ,r.position.z));else if(i==="scale"){if(t.search("XYZ")!==-1){let a=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(a*=-1),od.set(a,a,a)}else Gr.copy(this.pointStart),od.copy(this.pointEnd),Gr.applyQuaternion(this._worldQuaternionInv),od.applyQuaternion(this._worldQuaternionInv),od.divide(Gr),t.search("X")===-1&&(od.x=1),t.search("Y")===-1&&(od.y=1),t.search("Z")===-1&&(od.z=1);r.scale.copy(this._scaleStart).multiply(od),this.scaleSnap&&(t.search("X")!==-1&&(r.scale.x=Math.round(r.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Y")!==-1&&(r.scale.y=Math.round(r.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Z")!==-1&&(r.scale.z=Math.round(r.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(i==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);let a=20/this.worldPosition.distanceTo(Gr.setFromMatrixPosition(this.camera.matrixWorld)),l=!1;t==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(Gr.copy(this.rotationAxis).cross(this.eye))*a):(t==="X"||t==="Y"||t==="Z")&&(this.rotationAxis.copy(dz[t]),Gr.copy(dz[t]),o==="local"&&Gr.applyQuaternion(this.worldQuaternion),Gr.cross(this.eye),Gr.length()===0?l=!0:this.rotationAngle=this._offset.dot(Gr.normalize())*a),(t==="E"||l)&&(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),o==="local"&&t!=="E"&&t!=="XYZE"?(r.quaternion.copy(this._quaternionStart),r.quaternion.multiply(wn.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),r.quaternion.copy(wn.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),r.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(_I),this.dispatchEvent(fz)}}pointerUp(e){e!==null&&e.button!==0||(this.dragging&&this.axis!==null&&(hz.mode=this.mode,this.dispatchEvent(hz)),this.dragging=!1,this.axis=null)}dispose(){this.disconnect(),this._root.dispose()}attach(e){return this.object=e,this._root.visible=!0,this}detach(){return this.object=void 0,this.axis=null,this._root.visible=!1,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(_I),this.dispatchEvent(fz),this.pointStart.copy(this.pointEnd))}getRaycaster(){return Uu}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}};function Fse(n){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:n.button};{let e=this.domElement.getBoundingClientRect();return{x:(n.clientX-e.left)/e.width*2-1,y:-(n.clientY-e.top)/e.height*2+1,button:n.button}}}function kse(n){if(this.enabled)switch(n.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(n));break}}function Ose(n){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(n)),this.pointerDown(this._getPointer(n)))}function jse(n){this.enabled&&this.pointerMove(this._getPointer(n))}function Nse(n){this.enabled&&(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(n)))}function bI(n,e,t){let i=e.intersectObject(n,!0);for(let r=0;r<i.length;r++)if(i[r].object.visible||t)return i[r];return!1}var QM=new Jr,sn=new w(0,1,0),pz=new w(0,0,0),mz=new Ie,KM=new Yt,eS=new Yt,Xa=new w,gz=new Ie,Pb=new w(1,0,0),Vu=new w(0,1,0),Fb=new w(0,0,1),JM=new w,Ab=new w,Ib=new w,vI=class extends xt{constructor(e){super(),this.isTransformControlsRoot=!0,this.controls=e,this.visible=!1}updateMatrixWorld(e){let t=this.controls;t.object!==void 0&&(t.object.updateMatrixWorld(),t.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):t.object.parent.matrixWorld.decompose(t._parentPosition,t._parentQuaternion,t._parentScale),t.object.matrixWorld.decompose(t.worldPosition,t.worldQuaternion,t._worldScale),t._parentQuaternionInv.copy(t._parentQuaternion).invert(),t._worldQuaternionInv.copy(t.worldQuaternion).invert()),t.camera.updateMatrixWorld(),t.camera.matrixWorld.decompose(t.cameraPosition,t.cameraQuaternion,t._cameraScale),t.camera.isOrthographicCamera?t.camera.getWorldDirection(t.eye).negate():t.eye.copy(t.cameraPosition).sub(t.worldPosition).normalize(),super.updateMatrixWorld(e)}dispose(){this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}},yI=class extends xt{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";let e=new on({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new an({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=e.clone();i.opacity=.15;let r=t.clone();r.opacity=.5;let o=e.clone();o.color.setHex(16711680);let s=e.clone();s.color.setHex(65280);let a=e.clone();a.color.setHex(255);let l=e.clone();l.color.setHex(16711680),l.opacity=.5;let c=e.clone();c.color.setHex(65280),c.opacity=.5;let d=e.clone();d.color.setHex(255),d.opacity=.5;let u=e.clone();u.opacity=.25;let h=e.clone();h.color.setHex(16776960),h.opacity=.25,e.clone().color.setHex(16776960);let m=e.clone();m.color.setHex(7895160);let _=new Fn(0,.04,.1,12);_.translate(0,.05,0);let g=new Qi(.08,.08,.08);g.translate(0,.04,0);let p=new bt;p.setAttribute("position",new Ne([0,0,0,1,0,0],3));let b=new Fn(.0075,.0075,.5,3);b.translate(0,.25,0);function v(se,N){let H=new qs(se,.0075,3,64,N*Math.PI*2);return H.rotateY(Math.PI/2),H.rotateX(Math.PI/2),H}function y(){let se=new bt;return se.setAttribute("position",new Ne([0,0,0,1,1,1],3)),se}let R={X:[[new ke(_,o),[.5,0,0],[0,0,-Math.PI/2]],[new ke(_,o),[-.5,0,0],[0,0,Math.PI/2]],[new ke(b,o),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new ke(_,s),[0,.5,0]],[new ke(_,s),[0,-.5,0],[Math.PI,0,0]],[new ke(b,s)]],Z:[[new ke(_,a),[0,0,.5],[Math.PI/2,0,0]],[new ke(_,a),[0,0,-.5],[-Math.PI/2,0,0]],[new ke(b,a),null,[Math.PI/2,0,0]]],XYZ:[[new ke(new Ws(.1,0),u.clone()),[0,0,0]]],XY:[[new ke(new Qi(.15,.15,.01),d.clone()),[.15,.15,0]]],YZ:[[new ke(new Qi(.15,.15,.01),l.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ke(new Qi(.15,.15,.01),c.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},S={X:[[new ke(new Fn(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new ke(new Fn(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new ke(new Fn(.2,0,.6,4),i),[0,.3,0]],[new ke(new Fn(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new ke(new Fn(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new ke(new Fn(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new ke(new Ws(.2,0),i)]],XY:[[new ke(new Qi(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new ke(new Qi(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ke(new Qi(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]]},T={START:[[new ke(new Ws(.01,2),r),null,null,null,"helper"]],END:[[new ke(new Ws(.01,2),r),null,null,null,"helper"]],DELTA:[[new Ki(y(),r),null,null,null,"helper"]],X:[[new Ki(p,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Ki(p,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Ki(p,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},A={XYZE:[[new ke(v(.5,1),m),null,[0,Math.PI/2,0]]],X:[[new ke(v(.5,.5),o)]],Y:[[new ke(v(.5,.5),s),null,[0,0,-Math.PI/2]]],Z:[[new ke(v(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new ke(v(.75,1),h),null,[0,Math.PI/2,0]]]},M={AXIS:[[new Ki(p,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},x={XYZE:[[new ke(new Da(.25,10,8),i)]],X:[[new ke(new qs(.5,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new ke(new qs(.5,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new ke(new qs(.5,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new ke(new qs(.75,.1,2,24),i)]]},I={X:[[new ke(g,o),[.5,0,0],[0,0,-Math.PI/2]],[new ke(b,o),[0,0,0],[0,0,-Math.PI/2]],[new ke(g,o),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new ke(g,s),[0,.5,0]],[new ke(b,s)],[new ke(g,s),[0,-.5,0],[0,0,Math.PI]]],Z:[[new ke(g,a),[0,0,.5],[Math.PI/2,0,0]],[new ke(b,a),[0,0,0],[Math.PI/2,0,0]],[new ke(g,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new ke(new Qi(.15,.15,.01),d),[.15,.15,0]]],YZ:[[new ke(new Qi(.15,.15,.01),l),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ke(new Qi(.15,.15,.01),c),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new ke(new Qi(.1,.1,.1),u.clone())]]},z={X:[[new ke(new Fn(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new ke(new Fn(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new ke(new Fn(.2,0,.6,4),i),[0,.3,0]],[new ke(new Fn(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new ke(new Fn(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new ke(new Fn(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new ke(new Qi(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new ke(new Qi(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ke(new Qi(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new ke(new Qi(.2,.2,.2),i),[0,0,0]]]},W={X:[[new Ki(p,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Ki(p,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Ki(p,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function ee(se){let N=new xt;for(let H in se)for(let L=se[H].length;L--;){let te=se[H][L][0].clone(),Se=se[H][L][1],Pe=se[H][L][2],Ge=se[H][L][3],St=se[H][L][4];te.name=H,te.tag=St,Se&&te.position.set(Se[0],Se[1],Se[2]),Pe&&te.rotation.set(Pe[0],Pe[1],Pe[2]),Ge&&te.scale.set(Ge[0],Ge[1],Ge[2]),te.updateMatrix();let K=te.geometry.clone();K.applyMatrix4(te.matrix),te.geometry=K,te.renderOrder=1/0,te.position.set(0,0,0),te.rotation.set(0,0,0),te.scale.set(1,1,1),N.add(te)}return N}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=ee(R)),this.add(this.gizmo.rotate=ee(A)),this.add(this.gizmo.scale=ee(I)),this.add(this.picker.translate=ee(S)),this.add(this.picker.rotate=ee(x)),this.add(this.picker.scale=ee(z)),this.add(this.helper.translate=ee(T)),this.add(this.helper.rotate=ee(M)),this.add(this.helper.scale=ee(W)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){let i=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:eS;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let r=[];r=r.concat(this.picker[this.mode].children),r=r.concat(this.gizmo[this.mode].children),r=r.concat(this.helper[this.mode].children);for(let o=0;o<r.length;o++){let s=r[o];s.visible=!0,s.rotation.set(0,0,0),s.position.copy(this.worldPosition);let a;if(this.camera.isOrthographicCamera?a=(this.camera.top-this.camera.bottom)/this.camera.zoom:a=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),s.scale.set(1,1,1).multiplyScalar(a*this.size/4),s.tag==="helper"){s.visible=!1,s.name==="AXIS"?(s.visible=!!this.axis,this.axis==="X"&&(wn.setFromEuler(QM.set(0,0,0)),s.quaternion.copy(i).multiply(wn),Math.abs(sn.copy(Pb).applyQuaternion(i).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="Y"&&(wn.setFromEuler(QM.set(0,0,Math.PI/2)),s.quaternion.copy(i).multiply(wn),Math.abs(sn.copy(Vu).applyQuaternion(i).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="Z"&&(wn.setFromEuler(QM.set(0,Math.PI/2,0)),s.quaternion.copy(i).multiply(wn),Math.abs(sn.copy(Fb).applyQuaternion(i).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="XYZE"&&(wn.setFromEuler(QM.set(0,Math.PI/2,0)),sn.copy(this.rotationAxis),s.quaternion.setFromRotationMatrix(mz.lookAt(pz,sn,Vu)),s.quaternion.multiply(wn),s.visible=this.dragging),this.axis==="E"&&(s.visible=!1)):s.name==="START"?(s.position.copy(this.worldPositionStart),s.visible=this.dragging):s.name==="END"?(s.position.copy(this.worldPosition),s.visible=this.dragging):s.name==="DELTA"?(s.position.copy(this.worldPositionStart),s.quaternion.copy(this.worldQuaternionStart),Gr.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),Gr.applyQuaternion(this.worldQuaternionStart.clone().invert()),s.scale.copy(Gr),s.visible=this.dragging):(s.quaternion.copy(i),this.dragging?s.position.copy(this.worldPositionStart):s.position.copy(this.worldPosition),this.axis&&(s.visible=this.axis.search(s.name)!==-1));continue}s.quaternion.copy(i),this.mode==="translate"||this.mode==="scale"?(s.name==="X"&&Math.abs(sn.copy(Pb).applyQuaternion(i).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="Y"&&Math.abs(sn.copy(Vu).applyQuaternion(i).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="Z"&&Math.abs(sn.copy(Fb).applyQuaternion(i).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="XY"&&Math.abs(sn.copy(Fb).applyQuaternion(i).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="YZ"&&Math.abs(sn.copy(Pb).applyQuaternion(i).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="XZ"&&Math.abs(sn.copy(Vu).applyQuaternion(i).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1)):this.mode==="rotate"&&(KM.copy(i),sn.copy(this.eye).applyQuaternion(wn.copy(i).invert()),s.name.search("E")!==-1&&s.quaternion.setFromRotationMatrix(mz.lookAt(this.eye,pz,Vu)),s.name==="X"&&(wn.setFromAxisAngle(Pb,Math.atan2(-sn.y,sn.z)),wn.multiplyQuaternions(KM,wn),s.quaternion.copy(wn)),s.name==="Y"&&(wn.setFromAxisAngle(Vu,Math.atan2(sn.x,sn.z)),wn.multiplyQuaternions(KM,wn),s.quaternion.copy(wn)),s.name==="Z"&&(wn.setFromAxisAngle(Fb,Math.atan2(sn.y,sn.x)),wn.multiplyQuaternions(KM,wn),s.quaternion.copy(wn))),s.visible=s.visible&&(s.name.indexOf("X")===-1||this.showX),s.visible=s.visible&&(s.name.indexOf("Y")===-1||this.showY),s.visible=s.visible&&(s.name.indexOf("Z")===-1||this.showZ),s.visible=s.visible&&(s.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),s.material._color=s.material._color||s.material.color.clone(),s.material._opacity=s.material._opacity||s.material.opacity,s.material.color.copy(s.material._color),s.material.opacity=s.material._opacity,this.enabled&&this.axis&&(s.name===this.axis||this.axis.split("").some(function(l){return s.name===l}))&&(s.material.color.setHex(16776960),s.material.opacity=1)}super.updateMatrixWorld(e)}},xI=class extends ke{constructor(){super(new $s(1e5,1e5,2,2),new on({visible:!1,wireframe:!0,side:$n,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),JM.copy(Pb).applyQuaternion(t==="local"?this.worldQuaternion:eS),Ab.copy(Vu).applyQuaternion(t==="local"?this.worldQuaternion:eS),Ib.copy(Fb).applyQuaternion(t==="local"?this.worldQuaternion:eS),sn.copy(Ab),this.mode){case"translate":case"scale":switch(this.axis){case"X":sn.copy(this.eye).cross(JM),Xa.copy(JM).cross(sn);break;case"Y":sn.copy(this.eye).cross(Ab),Xa.copy(Ab).cross(sn);break;case"Z":sn.copy(this.eye).cross(Ib),Xa.copy(Ib).cross(sn);break;case"XY":Xa.copy(Ib);break;case"YZ":Xa.copy(JM);break;case"XZ":sn.copy(Ib),Xa.copy(Ab);break;case"XYZ":case"E":Xa.set(0,0,0);break}break;case"rotate":default:Xa.set(0,0,0)}Xa.length()===0?this.quaternion.copy(this.cameraQuaternion):(gz.lookAt(Gr.set(0,0,0),Xa,sn),this.quaternion.setFromRotationMatrix(gz)),super.updateMatrixWorld(e)}};var Lse=["*"],_z=(()=>{class n extends cn{getType(){return Ap}set camera(t){this._objRef&&(this._objRef.camera=t)}get camera(){return this._objRef?.camera}set axis(t){this._objRef&&(this._objRef.axis=t)}get axis(){return this._objRef?.axis}set mode(t){this._objRef&&(this._objRef.mode=t)}get mode(){return this._objRef?.mode}set translationSnap(t){this._objRef&&(this._objRef.translationSnap=t)}get translationSnap(){return this._objRef?.translationSnap}set rotationSnap(t){this._objRef&&(this._objRef.rotationSnap=t)}get rotationSnap(){return this._objRef?.rotationSnap}set scaleSnap(t){this._objRef&&(this._objRef.scaleSnap=t)}get scaleSnap(){return this._objRef?.scaleSnap}set space(t){this._objRef&&(this._objRef.space=t)}get space(){return this._objRef?.space}set size(t){this._objRef&&(this._objRef.size=t)}get size(){return this._objRef?.size}set dragging(t){this._objRef&&(this._objRef.dragging=t)}get dragging(){return this._objRef?.dragging}set showX(t){this._objRef&&(this._objRef.showX=t)}get showX(){return this._objRef?.showX}set showY(t){this._objRef&&(this._objRef.showY=t)}get showY(){return this._objRef?.showY}set showZ(t){this._objRef&&(this._objRef.showZ=t)}get showZ(){return this._objRef?.showZ}set minx(t){this._objRef&&(this._objRef.minx=t)}get minx(){return this._objRef?.minx}set maxX(t){this._objRef&&(this._objRef.maxX=t)}get maxX(){return this._objRef?.maxX}set minY(t){this._objRef&&(this._objRef.minY=t)}get minY(){return this._objRef?.minY}set maxY(t){this._objRef&&(this._objRef.maxY=t)}get maxY(){return this._objRef?.maxY}set minZ(t){this._objRef&&(this._objRef.minZ=t)}get minZ(){return this._objRef?.minZ}set maxZ(t){this._objRef&&(this._objRef.maxZ=t)}get maxZ(){return this._objRef?.maxZ}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-transformControlsGen"]],inputs:{camera:"camera",axis:"axis",mode:"mode",translationSnap:"translationSnap",rotationSnap:"rotationSnap",scaleSnap:"scaleSnap",space:"space",size:"size",dragging:"dragging",showX:"showX",showY:"showY",showZ:"showZ",minx:"minx",maxX:"maxX",minY:"minY",maxY:"maxY",minZ:"minZ",maxZ:"maxZ"},standalone:!1,features:[J([{provide:cn,useExisting:_e(()=>n)}]),q],ngContentSelectors:Lse,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var bz={name:"LuminosityHighPassShader",shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new he(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};var Ip=class n extends mn{constructor(e,t,i,r){super(),this.strength=t!==void 0?t:1,this.radius=i,this.threshold=r,this.resolution=e!==void 0?new V(e.x,e.y):new V(256,256),this.clearColor=new he(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let o=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);this.renderTargetBright=new ti(o,s,{type:zi}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let u=0;u<this.nMips;u++){let h=new ti(o,s,{type:zi});h.texture.name="UnrealBloomPass.h"+u,h.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(h);let f=new ti(o,s,{type:zi});f.texture.name="UnrealBloomPass.v"+u,f.texture.generateMipmaps=!1,this.renderTargetsVertical.push(f),o=Math.round(o/2),s=Math.round(s/2)}let a=bz;this.highPassUniforms=Hi.clone(a.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Et({uniforms:this.highPassUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}),this.separableBlurMaterials=[];let l=[3,5,7,9,11];o=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);for(let u=0;u<this.nMips;u++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(l[u])),this.separableBlurMaterials[u].uniforms.invSize.value=new V(1/o,1/s),o=Math.round(o/2),s=Math.round(s/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1;let c=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=c,this.bloomTintColors=[new w(1,1,1),new w(1,1,1),new w(1,1,1),new w(1,1,1),new w(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;let d=br;this.copyUniforms=Hi.clone(d.uniforms),this.blendMaterial=new Et({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:Bc,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new he,this.oldClearAlpha=1,this.basic=new on,this.fsQuad=new _r(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,t){let i=Math.round(e/2),r=Math.round(t/2);this.renderTargetBright.setSize(i,r);for(let o=0;o<this.nMips;o++)this.renderTargetsHorizontal[o].setSize(i,r),this.renderTargetsVertical[o].setSize(i,r),this.separableBlurMaterials[o].uniforms.invSize.value=new V(1/i,1/r),i=Math.round(i/2),r=Math.round(r/2)}render(e,t,i,r,o){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();let s=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),o&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=i.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=i.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let a=this.renderTargetBright;for(let l=0;l<this.nMips;l++)this.fsQuad.material=this.separableBlurMaterials[l],this.separableBlurMaterials[l].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[l].uniforms.direction.value=n.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[l]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[l].uniforms.colorTexture.value=this.renderTargetsHorizontal[l].texture,this.separableBlurMaterials[l].uniforms.direction.value=n.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[l]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[l];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,o&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}getSeperableBlurMaterial(e){let t=[];for(let i=0;i<e;i++)t.push(.39894*Math.exp(-.5*i*i/(e*e))/e);return new Et({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new V(.5,.5)},direction:{value:new V(.5,.5)},gaussianCoefficients:{value:t}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new Et({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}};Ip.BlurDirectionX=new V(1,0);Ip.BlurDirectionY=new V(0,1);var Bse=["*"],tS=(()=>{class n extends Pi{getType(){return Ip}set resolution(t){this._objRef&&(this._objRef.resolution=me(this._objRef.resolution,t))}get resolution(){return this._objRef?.resolution}set strength(t){this._objRef&&(this._objRef.strength=t)}get strength(){return this._objRef?.strength}set radius(t){this._objRef&&(this._objRef.radius=t)}get radius(){return this._objRef?.radius}set threshold(t){this._objRef&&(this._objRef.threshold=t)}get threshold(){return this._objRef?.threshold}set clearColor(t){this._objRef&&(this._objRef.clearColor=me(this._objRef.clearColor,t))}get clearColor(){return this._objRef?.clearColor}set renderTargetsHorizontal(t){this._objRef&&(this._objRef.renderTargetsHorizontal=t)}get renderTargetsHorizontal(){return this._objRef?.renderTargetsHorizontal}set renderTargetsVertical(t){this._objRef&&(this._objRef.renderTargetsVertical=t)}get renderTargetsVertical(){return this._objRef?.renderTargetsVertical}set nMips(t){this._objRef&&(this._objRef.nMips=t)}get nMips(){return this._objRef?.nMips}set renderTargetBright(t){this._objRef&&(this._objRef.renderTargetBright=t)}get renderTargetBright(){return this._objRef?.renderTargetBright}set highPassUniforms(t){this._objRef&&(this._objRef.highPassUniforms=t)}get highPassUniforms(){return this._objRef?.highPassUniforms}set materialHighPassFilter(t){this._objRef&&(this._objRef.materialHighPassFilter=t)}get materialHighPassFilter(){return this._objRef?.materialHighPassFilter}set separableBlurMaterials(t){this._objRef&&(this._objRef.separableBlurMaterials=t)}get separableBlurMaterials(){return this._objRef?.separableBlurMaterials}set compositeMaterial(t){this._objRef&&(this._objRef.compositeMaterial=t)}get compositeMaterial(){return this._objRef?.compositeMaterial}set bloomTintColors(t){this._objRef&&(this._objRef.bloomTintColors=t)}get bloomTintColors(){return this._objRef?.bloomTintColors}set copyUniforms(t){this._objRef&&(this._objRef.copyUniforms=t)}get copyUniforms(){return this._objRef?.copyUniforms}set blendMaterial(t){this._objRef&&(this._objRef.blendMaterial=t)}get blendMaterial(){return this._objRef?.blendMaterial}set oldClearColor(t){this._objRef&&(this._objRef.oldClearColor=me(this._objRef.oldClearColor,t))}get oldClearColor(){return this._objRef?.oldClearColor}set oldClearAlpha(t){this._objRef&&(this._objRef.oldClearAlpha=t)}get oldClearAlpha(){return this._objRef?.oldClearAlpha}set basic(t){this._objRef&&(this._objRef.basic=t)}get basic(){return this._objRef?.basic}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-unrealBloomPass"]],inputs:{resolution:"resolution",strength:"strength",radius:"radius",threshold:"threshold",clearColor:"clearColor",renderTargetsHorizontal:"renderTargetsHorizontal",renderTargetsVertical:"renderTargetsVertical",nMips:"nMips",renderTargetBright:"renderTargetBright",highPassUniforms:"highPassUniforms",materialHighPassFilter:"materialHighPassFilter",separableBlurMaterials:"separableBlurMaterials",compositeMaterial:"compositeMaterial",bloomTintColors:"bloomTintColors",copyUniforms:"copyUniforms",blendMaterial:"blendMaterial",oldClearColor:"oldClearColor",oldClearAlpha:"oldClearAlpha",basic:"basic",fsQuad:"fsQuad"},standalone:!1,features:[J([{provide:gi,useExisting:_e(()=>n)}]),q],ngContentSelectors:Bse,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Use=["*"],yz=(()=>{class n extends FV{constructor(){super(...arguments),this.elementRef=E(_t)}getType(){return lp}createThreeInstance(t){return super.createThreeInstance(t??this.elementRef?.nativeElement)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-cSS2DObject"]],standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)}]),q],ngContentSelectors:Use,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0})}}return n})();var zse=["*"],iS=(()=>{class n extends kV{constructor(){super(...arguments),this.elementRef=E(_t)}getType(){return sp}createThreeInstance(t){return super.createThreeInstance(t??this.elementRef?.nativeElement)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275cmp=j({type:n,selectors:[["th-cSS3DObject"]],standalone:!1,features:[J([{provide:ue,useExisting:_e(()=>n)}]),q],ngContentSelectors:zse,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0})}}return n})();var Hse=["*"],Pp=(()=>{class n extends nz{constructor(t,i){super(t),this.effectComposer=t,this.view=i}createThreeInstance(t){return t||(t=new Array(5)),t[0]=t[0]??this.view.scene,t[1]=t[1]??this.view.camera,t[2]=t[2]??this.overrideMaterial,t[3]=t[3]??this.clearColor,t[4]=t[4]??this.clearAlpha,super.createThreeInstance(t)}ngAfterContentChecked(){this._objRef&&(this.view.scene&&this.view.scene.objRef&&(this._objRef.scene=this.view.scene.objRef),this.view.camera&&this.view.camera.objRef&&(this._objRef.camera=this.view.camera.objRef))}static{this.\u0275fac=function(i){return new(i||n)(be($a),be(zr))}}static{this.\u0275cmp=j({type:n,selectors:[["th-renderPass"]],standalone:!1,features:[J([{provide:gi,useExisting:_e(()=>n)}]),q],ngContentSelectors:Hse,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var Gse=["*"],wz=(()=>{class n extends _z{constructor(t,i,r){super(t,i),this.scene=r,this.objectAdded=()=>{this.objRef&&this.targetObject!=null&&this.targetObject.parent&&this.objRef.attach(this.targetObject)},this.objectRemoved=()=>{this._objRef?.detach()}}getType(){return Ap}set object(t){this._objRef&&(this.removeObjectListeners(),this.targetObject=t,this.addObjectListeners(),t?this.objectAdded():this.objectRemoved())}addToParent(){this._objRef&&!this._objRef.object&&this.scene?.objRef?.add(this._objRef.object)}removeFromParent(){this._objRef&&this.scene?.objRef?.remove(this._objRef.object)}ngOnDestroy(){this.removeObjectListeners(),this.objectRemoved(),this.targetObject=void 0}removeObjectListeners(){this.targetObject&&(this.targetObject.removeEventListener("added",this.objectAdded),this.targetObject.removeEventListener("removed",this.objectRemoved))}addObjectListeners(){this.targetObject?.addEventListener("added",this.objectAdded),this.targetObject?.addEventListener("removed",this.objectRemoved)}static{this.\u0275fac=function(i){return new(i||n)(be(ue),be(Dt),be(Lt))}}static{this.\u0275cmp=j({type:n,selectors:[["th-transformControls"]],inputs:{object:"object"},standalone:!1,features:[J([{provide:cn,useExisting:_e(()=>n)}]),q],ngContentSelectors:Gse,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}}return n})();var MI=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Ke({type:n})}static{this.\u0275inj=Qe({})}}return n})();var Qa=(()=>{class n{transform(t){return Array.isArray(t)?new he(...t):new he(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=rs({name:"color",type:n,pure:!0,standalone:!1})}}return n})();var Do=new he,rS=class extends qn{constructor(e){super(e),this.propertyNameMapping={},this.customPropertyMapping={}}load(e,t,i,r){let o=this,s=new Wn(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{t(o.parse(a))}catch(l){r?r(l):console.error(l),o.manager.itemError(e)}},i,r)}setPropertyNameMapping(e){this.propertyNameMapping=e}setCustomPropertyNameMapping(e){this.customPropertyMapping=e}parse(e){function t(g,p=0){let b=/^ply([\s\S]*)end_header(\r\n|\r|\n)/,v="",y=b.exec(g);y!==null&&(v=y[1]);let R={comments:[],elements:[],headerLength:p,objInfo:""},S=v.split(/\r\n|\r|\n/),T;function A(M,x){let I={type:M[0]};return I.type==="list"?(I.name=M[3],I.countType=M[1],I.itemType=M[2]):I.name=M[1],I.name in x&&(I.name=x[I.name]),I}for(let M=0;M<S.length;M++){let x=S[M];if(x=x.trim(),x==="")continue;let I=x.split(/\s+/),z=I.shift();switch(x=I.join(" "),z){case"format":R.format=I[0],R.version=I[1];break;case"comment":R.comments.push(x);break;case"element":T!==void 0&&R.elements.push(T),T={},T.name=I[0],T.count=parseInt(I[1]),T.properties=[];break;case"property":T.properties.push(A(I,_.propertyNameMapping));break;case"obj_info":R.objInfo=x;break;default:console.log("unhandled",z,I)}}return T!==void 0&&R.elements.push(T),R}function i(g,p){switch(p){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(g);case"float":case"double":case"float32":case"float64":return parseFloat(g)}}function r(g,p){let b={};for(let v=0;v<g.length;v++){if(p.empty())return null;if(g[v].type==="list"){let y=[],R=i(p.next(),g[v].countType);for(let S=0;S<R;S++){if(p.empty())return null;y.push(i(p.next(),g[v].itemType))}b[g[v].name]=y}else b[g[v].name]=i(p.next(),g[v].type)}return b}function o(){let g={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[],faceVertexColors:[]};for(let p of Object.keys(_.customPropertyMapping))g[p]=[];return g}function s(g){let p=g.map(v=>v.name);function b(v){for(let y=0,R=v.length;y<R;y++){let S=v[y];if(p.includes(S))return S}return null}return{attrX:b(["x","px","posx"])||"x",attrY:b(["y","py","posy"])||"y",attrZ:b(["z","pz","posz"])||"z",attrNX:b(["nx","normalx"]),attrNY:b(["ny","normaly"]),attrNZ:b(["nz","normalz"]),attrS:b(["s","u","texture_u","tx"]),attrT:b(["t","v","texture_v","ty"]),attrR:b(["red","diffuse_red","r","diffuse_r"]),attrG:b(["green","diffuse_green","g","diffuse_g"]),attrB:b(["blue","diffuse_blue","b","diffuse_b"])}}function a(g,p){let b=o(),v=/end_header\s+(\S[\s\S]*\S|\S)\s*$/,y,R;(R=v.exec(g))!==null?y=R[1].split(/\s+/):y=[];let S=new SI(y);e:for(let T=0;T<p.elements.length;T++){let A=p.elements[T],M=s(A.properties);for(let x=0;x<A.count;x++){let I=r(A.properties,S);if(!I)break e;c(b,A.name,I,M)}}return l(b)}function l(g){let p=new bt;g.indices.length>0&&p.setIndex(g.indices),p.setAttribute("position",new Ne(g.vertices,3)),g.normals.length>0&&p.setAttribute("normal",new Ne(g.normals,3)),g.uvs.length>0&&p.setAttribute("uv",new Ne(g.uvs,2)),g.colors.length>0&&p.setAttribute("color",new Ne(g.colors,3)),(g.faceVertexUvs.length>0||g.faceVertexColors.length>0)&&(p=p.toNonIndexed(),g.faceVertexUvs.length>0&&p.setAttribute("uv",new Ne(g.faceVertexUvs,2)),g.faceVertexColors.length>0&&p.setAttribute("color",new Ne(g.faceVertexColors,3)));for(let b of Object.keys(_.customPropertyMapping))g[b].length>0&&p.setAttribute(b,new Ne(g[b],_.customPropertyMapping[b].length));return p.computeBoundingSphere(),p}function c(g,p,b,v){if(p==="vertex"){g.vertices.push(b[v.attrX],b[v.attrY],b[v.attrZ]),v.attrNX!==null&&v.attrNY!==null&&v.attrNZ!==null&&g.normals.push(b[v.attrNX],b[v.attrNY],b[v.attrNZ]),v.attrS!==null&&v.attrT!==null&&g.uvs.push(b[v.attrS],b[v.attrT]),v.attrR!==null&&v.attrG!==null&&v.attrB!==null&&(Do.setRGB(b[v.attrR]/255,b[v.attrG]/255,b[v.attrB]/255,Zi),g.colors.push(Do.r,Do.g,Do.b));for(let y of Object.keys(_.customPropertyMapping))for(let R of _.customPropertyMapping[y])g[y].push(b[R])}else if(p==="face"){let y=b.vertex_indices||b.vertex_index,R=b.texcoord;y.length===3?(g.indices.push(y[0],y[1],y[2]),R&&R.length===6&&(g.faceVertexUvs.push(R[0],R[1]),g.faceVertexUvs.push(R[2],R[3]),g.faceVertexUvs.push(R[4],R[5]))):y.length===4&&(g.indices.push(y[0],y[1],y[3]),g.indices.push(y[1],y[2],y[3])),v.attrR!==null&&v.attrG!==null&&v.attrB!==null&&(Do.setRGB(b[v.attrR]/255,b[v.attrG]/255,b[v.attrB]/255,Zi),g.faceVertexColors.push(Do.r,Do.g,Do.b),g.faceVertexColors.push(Do.r,Do.g,Do.b),g.faceVertexColors.push(Do.r,Do.g,Do.b))}}function d(g,p){let b={},v=0;for(let y=0;y<p.length;y++){let R=p[y],S=R.valueReader;if(R.type==="list"){let T=[],A=R.countReader.read(g+v);v+=R.countReader.size;for(let M=0;M<A;M++)T.push(S.read(g+v)),v+=S.size;b[R.name]=T}else b[R.name]=S.read(g+v),v+=S.size}return[b,v]}function u(g,p,b){function v(y,R,S){switch(R){case"int8":case"char":return{read:T=>y.getInt8(T),size:1};case"uint8":case"uchar":return{read:T=>y.getUint8(T),size:1};case"int16":case"short":return{read:T=>y.getInt16(T,S),size:2};case"uint16":case"ushort":return{read:T=>y.getUint16(T,S),size:2};case"int32":case"int":return{read:T=>y.getInt32(T,S),size:4};case"uint32":case"uint":return{read:T=>y.getUint32(T,S),size:4};case"float32":case"float":return{read:T=>y.getFloat32(T,S),size:4};case"float64":case"double":return{read:T=>y.getFloat64(T,S),size:8}}}for(let y=0,R=g.length;y<R;y++){let S=g[y];S.type==="list"?(S.countReader=v(p,S.countType,b),S.valueReader=v(p,S.itemType,b)):S.valueReader=v(p,S.type,b)}}function h(g,p){let b=o(),v=p.format==="binary_little_endian",y=new DataView(g,p.headerLength),R,S=0;for(let T=0;T<p.elements.length;T++){let A=p.elements[T],M=A.properties,x=s(M);u(M,y,v);for(let I=0;I<A.count;I++){R=d(S,M),S+=R[1];let z=R[0];c(b,A.name,z,x)}}return l(b)}function f(g){let p=0,b=!0,v="",y=[],R=new TextDecoder().decode(g.subarray(0,5)),S=/^ply\r\n/.test(R);do{let T=String.fromCharCode(g[p++]);T!==`
`&&T!=="\r"?v+=T:(v==="end_header"&&(b=!1),v!==""&&(y.push(v),v=""))}while(b&&p<g.length);return S===!0&&p++,{headerText:y.join("\r")+"\r",headerLength:p}}let m,_=this;if(e instanceof ArrayBuffer){let g=new Uint8Array(e),{headerText:p,headerLength:b}=f(g),v=t(p,b);if(v.format==="ascii"){let y=new TextDecoder().decode(g);m=a(y,v)}else m=h(e,v)}else m=a(e,t(e));return m}},SI=class{constructor(e){this.arr=e,this.i=0}empty(){return this.i>=this.arr.length}next(){return this.arr[this.i++]}};var $se=(()=>{class n extends up{constructor(){super(...arguments),this.clazz=rS}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})()}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Mz=(()=>{class n extends hp{constructor(t,i,r){super(t,i),this.host=t,this.zone=i,this.service=r}getRefFromResponse(t){return t.computeVertexNormals(),t}load(){return xi(this,null,function*(){if(!this.initialized)return;if(this._url===void 0)throw new Error("missing url");let t=this._url,i=Hc(this.onProgress$)?o=>{this.onProgress$?.next(o)}:void 0,r=yield this.zone.runOutsideAngular(()=>this.service.load(t,i));this.host.objRef=this.getRefFromResponse(r),this.onLoaded$&&r!==void 0&&this.onLoaded$?.next(r)})}static{this.\u0275fac=function(i){return new(i||n)(be(ni,1),be(nt),be($se))}}static{this.\u0275dir=Ue({type:n,selectors:[["","loadPLY",""]],standalone:!1,features:[q]})}}return n})();var Xse=["outerRef"],Yse=["innerRef"],Zse=["*"];function Qse(n,e){n&1&&Dh(0)}function Kse(n,e){if(n&1){let t=Xt();U(0,"div",5,1),De("onResize",function(){ht(t);let r=Ht();return ft(r.onResize())}),U(2,"div",3,2)(4,"div",6),Ni(5,Qse,1,0,"ng-container",7),Q()()()}if(n&2){let t=Ht(),i=At(3);O("ngStyle",t.styles),k(2),O("ngStyle",t.transformInnerStyles),k(2),t0(t.style),O("className",t.className),k(),O("ngTemplateOutlet",i)}}function Jse(n,e){n&1&&Dh(0)}function eae(n,e){if(n&1&&(U(0,"div",4,1),Ni(2,Jse,1,0,"ng-container",7),Q()),n&2){let t=Ht(),i=At(3);O("ngStyle",t.styles)("className",t.className),k(2),O("ngTemplateOutlet",i)}}function tae(n,e){n&1&&Y(0)}var Ob=new w,CI=new w,iae=new w;function nae(n,e,t){let i=Ob.setFromMatrixPosition(n.matrixWorld);i.project(e);let r=t.width/2,o=t.height/2;return[i.x*r+r,-(i.y*o)+o]}function rae(n,e){let t=Ob.setFromMatrixPosition(n.matrixWorld),i=CI.setFromMatrixPosition(e.matrixWorld),r=t.sub(i),o=e.getWorldDirection(iae);return r.angleTo(o)>Math.PI/2}function oae(n,e,t,i){let r=Ob.setFromMatrixPosition(n.matrixWorld),o=r.clone();o.project(e),t.setFromCamera(o,e);let s=t.intersectObjects(i,!0);if(s.length){let a=s[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function sae(n,e){if(e instanceof yo)return e.zoom;if(e instanceof rn){let t=Ob.setFromMatrixPosition(n.matrixWorld),i=CI.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,o=t.distanceTo(i);return 1/(2*Math.tan(r/2)*o)}else return 1}function aae(n,e,t){if(e instanceof rn||e instanceof yo){let i=Ob.setFromMatrixPosition(n.matrixWorld),r=CI.setFromMatrixPosition(e.matrixWorld),o=i.distanceTo(r),s=(t[1]-t[0])/(e.far-e.near),a=t[1]-s*e.far;return Math.round(s*o+a)}}var RI=n=>Math.abs(n)<1e-10?0:n;function Sz(n,e,t=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=RI(e[r]*n.elements[r])+(r!==15?",":")");return t+i}var lae=(n=>e=>Sz(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),cae=(n=>(e,t)=>Sz(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]),Tz=(()=>{class n extends id{constructor(t,i){super(i),this.view=t,this.DoubleSide=$n,this.FRAGMENT_SHADER=uae,this.VERTEX_SHADER=dae,this.prepend=!1,this.center=!1,this.fullscreen=!1,this.eps=.001,this.sprite=!1,this.transform=!1,this.zIndexRange=[16777271,0],this.onOcclude=new rt,this.calculatePosition=nae,this.as="div",this.pointerEvents="auto",this.transformInnerStyles=this.computeInnerStyles(),this.styles=null,this.oldZoom=0,this.oldPosition=[0,0],this.notOccluded=!0,this.raycaster=E(Du)}ngOnInit(){super.ngOnInit(),this.styles=this.computeStyles()}ngAfterViewInit(){this.el=document.createElement(this.as),this.frameSubscription=this.view.onRender.subscribe(()=>this.onFrame()),this.transformOuterRef&&this.el.appendChild(this.transformOuterRef.nativeElement),this.el&&!this.target&&this.appendElement(this.el)}onResize(){this.styles=this.computeStyles()}ngOnChanges(t){super.ngOnChanges(t)}appendElement(t){if(!(!this.el||!this.objRef||!this.view.hostElement||!this.view.camera)){if(this.target=this.portal??this.view.hostElement.nativeElement,this.view.scene?.objRef?.updateMatrixWorld(),this.transform)t.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{let i=this.calculatePosition(this.objRef,this.view.camera.objRef,this.getSize());t.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${i[0]}px,${i[1]}px,0);transform-origin:0 0;`}this.target&&(this.prepend?this.target.prepend(t):this.target.appendChild(t))}}onFrame(){let t=this.view.camera?.objRef,i=this.view.scene?.objRef,r=this._objRef,o=this.getSize();if(!t||!r||!i||!this.el)return;t.updateMatrixWorld(),r.updateWorldMatrix(!0,!1);let s=this.transform?this.oldPosition:this.calculatePosition(r,t,o);if(this.transform||Math.abs(this.oldZoom-t.zoom)>this.eps||Math.abs(this.oldPosition[0]-s[0])>this.eps||Math.abs(this.oldPosition[1]-s[1])>this.eps){let a=rae(r,t),l=!1;typeof this.occlude=="boolean"?this.occlude===!0&&(l=[i]):Array.isArray(this.occlude)&&(l=this.occlude.map(d=>d.objRef??d));let c=this.notOccluded;if(l?this.notOccluded=!a&&oae(r,t,this.raycaster,l):this.notOccluded=!a,c!==this.notOccluded&&(this.onOcclude.length>0?this.onOcclude.next(!this.notOccluded):this.el.style.display=this.notOccluded?"block":"none"),this.el.style.zIndex=`${aae(r,t,this.zIndexRange)}`,this.transform){let[d,u]=[o.width/2,o.height/2],h=t.projectionMatrix.elements[5]*u,{isOrthographicCamera:f,top:m,left:_,bottom:g,right:p}=t,b=lae(t.matrixWorldInverse),v=f?`scale(${h})translate(${RI(-(p+_)/2)}px,${RI((m+g)/2)}px)`:`translateZ(${h}px)`,y=r.matrixWorld;this.sprite&&(y=t.matrixWorldInverse.clone().transpose().copyPosition(y).scale(r.scale),y.elements[3]=y.elements[7]=y.elements[11]=0,y.elements[15]=1),this.el.style.width=o.width+"px",this.el.style.height=o.height+"px",this.el.style.perspective=f?"":`${h}px`,this.transformOuterRef&&this.transformInnerRef&&(this.transformOuterRef.nativeElement.style.transform=`${v}${b}translate(${d}px,${u}px)`,this.transformInnerRef.nativeElement.style.transform=cae(y,1/((this.distanceFactor||10)/400)))}else{let d=this.distanceFactor===void 0?1:sae(r,t)*this.distanceFactor;this.el.style.transform=`translate3d(${s[0]}px,${s[1]}px,0) scale(${d})`}this.oldPosition=s,this.oldZoom=t.zoom}}ngOnDestroy(){this.el?.remove(),this.frameSubscription?.unsubscribe()}computeStyles(){let t=this.getSize();return this.transform?{position:"absolute",top:0,left:0,width:t.width+"px",height:t.height+"px",transformStyle:"preserve-3d",pointerEvents:"none"}:ce(ce({position:"absolute",transform:this.center?"translate3d(-50%,-50%,0)":"none"},this.fullscreen&&{top:-t.height/2+"px",left:-t.width/2+"px",width:t.width+"px",height:t.height+"px"}),this.style)}computeInnerStyles(){return{position:"absolute",pointerEvents:this.pointerEvents}}getSize(){return this.view.viewPort??this.view.hostElement.nativeElement.getBoundingClientRect()??{width:0,height:0}}static{this.\u0275fac=function(i){return new(i||n)(be(zr),be(ue,4))}}static{this.\u0275cmp=j({type:n,selectors:[["th-html"]],viewQuery:function(i,r){if(i&1&&(Gt(Xse,5),Gt(Yse,5)),i&2){let o;ct(o=dt())&&(r.transformOuterRef=o.first),ct(o=dt())&&(r.transformInnerRef=o.first)}},inputs:{prepend:"prepend",center:"center",fullscreen:"fullscreen",portal:"portal",distanceFactor:"distanceFactor",sprite:"sprite",transform:"transform",zIndexRange:"zIndexRange",style:"style",className:"className",occlude:"occlude",calculatePosition:"calculatePosition",as:"as",wrapperClass:"wrapperClass",pointerEvents:"pointerEvents"},outputs:{onOcclude:"onOcclude"},standalone:!1,features:[q,tr],ngContentSelectors:Zse,decls:4,vars:1,consts:[["tempOutlet",""],["outerRef",""],["innerRef",""],[3,"ngStyle"],[3,"ngStyle","className"],[3,"onResize","ngStyle"],[3,"className"],[4,"ngTemplateOutlet"]],template:function(i,r){i&1&&(ie(),Ni(0,Kse,6,6,"div",3)(1,eae,3,3,"div",4)(2,tae,1,0,"ng-template",null,0,n0)),i&2&&Mn(r.transform?0:1)},dependencies:[NN,jN,Xc],encapsulation:2,changeDetection:0})}}return n})(),dae=`
/*
  This shader is from the THREE's SpriteMaterial.
  We need to turn the backing plane into a Sprite
  (make it always face the camera) if "transfrom" 
  is false. 
*/
#include <common>
void main() {
  vec2 center = vec2(0., 1.);
  float rotation = 0.0;
  
  // This is somewhat arbitrary, but it seems to work well
  // Need to figure out how to derive this dynamically if it even matters
  float size = 0.03;
  vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
  bool isPerspective = isPerspectiveMatrix( projectionMatrix );
  if ( isPerspective ) scale *= - mvPosition.z;
  vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
  rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
  mvPosition.xy += rotatedPosition;
  gl_Position = projectionMatrix * mvPosition;
}
`,uae=`
void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
}
`;var Fp=(()=>{class n{constructor(t,i){this.host=t,this.parent=i,this.host.autoAddToParent=!1,this.host.autoDispose=!1,this.host.objRef=qw()}set refById(t){this.id=t,this.subscription?.unsubscribe(),this.subscription=this.parent.objRef$.subscribe(i=>{this.parentObj=i,this.applyRef()})}applyRef(){if(!this.parentObj||this.id===void 0)return;let t=this.findById(this.parentObj,this.id);t&&this.setRef(this.host,t)}findById(t,i){if((t.name??t.uuid)===i)return t;for(let r of t.children){let o=this.findById(r,i);if(o!==void 0)return o}}setRef(t,i){let r=t.objRef;r&&tp(r)&&(r.objRef=i,t.objRef=r)}ngOnDestroy(){this.subscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)(be(ue,2),be(ue,4))}}static{this.\u0275dir=Ue({type:n,selectors:[["","refById",""]],inputs:{refById:"refById"},standalone:!1})}}return n})();var Rz=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Ke({type:n})}static{this.\u0275inj=Qe({imports:[MI,d0,MI]})}}return n})();function Cz(n){return[{provide:ue,useExisting:_e(()=>n)}]}var DI=n=>[0,n,0],fae=()=>[0,1,0],pae=()=>({background:"lightblue",borderRadius:"1em",padding:"1em",display:"flex",flexDirection:"column"}),Ez=n=>[n,0,0],mae=n=>[0,.039,n],gae=()=>[.17,.17,.17],_ae=()=>[4,10,2],bae=()=>[100,100],vae=()=>[55,2,.1,100],yae=(n,e)=>[n,0,e],xae=()=>[0,0,0],Dz=(()=>{class n{constructor(t){this.Math=Math,this.sprite=!1,this.glbPath=`${pn}mac-draco.glb`,this.clock=new eo(!0),this.plane=new ir(new w(0,1,0),3),this.rotation=[0,0,0],this.position=[0,0,0],t.setDecoderPath("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/jsm/libs/draco/gltf/"),t.setCrossOrigin("no-cors"),this.calcPose()}onBeforeRender(){this.calcPose()}calcPose(){let t=this.clock.getElapsedTime();this.rotation=[it.lerp(this.rotation[0],Math.cos(t/2)/20+.25,.1),it.lerp(this.rotation[1],Math.sin(t/4)/20,.1),it.lerp(this.rotation[2],Math.sin(t/8)/20,.1)],this.position=[0,it.lerp(this.position[1],(-2+Math.sin(t/2))/2,.1),0]}static{this.\u0275fac=function(i){return new(i||n)(be(qc))}}static{this.\u0275cmp=j({type:n,selectors:[["app-html-example"]],standalone:!1,decls:17,vars:57,consts:[["light",""],[3,"onRender","thStats","shadow"],[3,"intensity"],[3,"rotation","position"],["loadGLTF","",3,"castShadow","url","position","rotation"],[3,"refById"],[3,"rotation","position","scale","sprite","transform","occlude"],["src",Hy`./multi-view-postprocessing-example`,2,"width","1960px","height","1280px"],[3,"castShadow","position","lookAt","color","intensity"],[3,"receiveShadow","rotation","position"],[3,"args"],[3,"color"],[3,"args","position","lookAt"]],template:function(i,r){if(i&1){let o=Xt();U(0,"th-canvas",1),De("onRender",function(){return ht(o),ft(r.onBeforeRender())}),U(1,"th-scene"),ae(2,"th-ambientLight",2),U(3,"th-group",3)(4,"th-object3D",4)(5,"th-mesh",5)(6,"th-html",6),ae(7,"iframe",7),Q()()()(),ae(8,"th-directionalLight",8,0),Bi(10,"color"),U(11,"th-mesh",9),ae(12,"th-planeGeometry",10)(13,"th-meshBasicMaterial",11),Bi(14,"color"),Q(),U(15,"th-perspectiveCamera",12),ae(16,"th-orbitControls"),Q()()()}i&2&&(O("thStats",!0)("shadow",!0),k(2),O("intensity",3),k(),O("rotation",vt(35,DI,r.Math.PI))("position",Z(37,fae)),k(),O("castShadow",!0)("url",r.glbPath)("position",r.position)("rotation",r.rotation),k(),O("refById","Cube008_2"),k(),t0(Z(38,pae)),O("rotation",vt(39,Ez,-1*r.Math.PI/2))("position",vt(41,mae,-.12))("scale",Z(43,gae))("sprite",r.sprite)("transform",!0)("occlude",!0),k(2),O("castShadow",!0)("position",Z(44,_ae))("lookAt",vt(45,DI,-3))("color",Yi(10,31,"#ffffff"))("intensity",2),k(3),O("receiveShadow",!0)("rotation",vt(47,Ez,3*r.Math.PI/2))("position",vt(49,DI,-3)),k(),O("args",Z(51,bae)),k(),O("color",Yi(14,33,"#efefef")),k(2),O("args",Z(52,vae))("position",zn(53,yae,-5,-15))("lookAt",Z(56,xae)))},dependencies:[jn,Zt,ue,Ii,mr,id,Ci,Lt,za,bs,Dt,Yn,On,Fp,Tz,Qa],encapsulation:2,changeDetection:0})}}return n})();var R8e=.5*(Math.sqrt(3)-1),C8e=(3-Math.sqrt(3))/6,wae=1/3,Ka=1/6,E8e=(Math.sqrt(5)-1)/4,D8e=(5-Math.sqrt(5))/20,AI=n=>Math.floor(n)|0;var II=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function Az(n=Math.random){let e=Mae(n),t=new Float64Array(e).map(o=>II[o%12*3]),i=new Float64Array(e).map(o=>II[o%12*3+1]),r=new Float64Array(e).map(o=>II[o%12*3+2]);return function(s,a,l){let c,d,u,h,f=(s+a+l)*wae,m=AI(s+f),_=AI(a+f),g=AI(l+f),p=(m+_+g)*Ka,b=m-p,v=_-p,y=g-p,R=s-b,S=a-v,T=l-y,A,M,x,I,z,W;R>=S?S>=T?(A=1,M=0,x=0,I=1,z=1,W=0):R>=T?(A=1,M=0,x=0,I=1,z=0,W=1):(A=0,M=0,x=1,I=1,z=0,W=1):S<T?(A=0,M=0,x=1,I=0,z=1,W=1):R<T?(A=0,M=1,x=0,I=0,z=1,W=1):(A=0,M=1,x=0,I=1,z=1,W=0);let ee=R-A+Ka,se=S-M+Ka,N=T-x+Ka,H=R-I+2*Ka,L=S-z+2*Ka,te=T-W+2*Ka,Se=R-1+3*Ka,Pe=S-1+3*Ka,Ge=T-1+3*Ka,St=m&255,K=_&255,Re=g&255,We=.6-R*R-S*S-T*T;if(We<0)c=0;else{let Be=St+e[K+e[Re]];We*=We,c=We*We*(t[Be]*R+i[Be]*S+r[Be]*T)}let ve=.6-ee*ee-se*se-N*N;if(ve<0)d=0;else{let Be=St+A+e[K+M+e[Re+x]];ve*=ve,d=ve*ve*(t[Be]*ee+i[Be]*se+r[Be]*N)}let ze=.6-H*H-L*L-te*te;if(ze<0)u=0;else{let Be=St+I+e[K+z+e[Re+W]];ze*=ze,u=ze*ze*(t[Be]*H+i[Be]*L+r[Be]*te)}let qe=.6-Se*Se-Pe*Pe-Ge*Ge;if(qe<0)h=0;else{let Be=St+1+e[K+1+e[Re+1]];qe*=qe,h=qe*qe*(t[Be]*Se+i[Be]*Pe+r[Be]*Ge)}return 32*(c+d+u+h)}}function Mae(n){let t=new Uint8Array(512);for(let i=0;i<512/2;i++)t[i]=i;for(let i=0;i<512/2-1;i++){let r=i+~~(n()*(256-i)),o=t[i];t[i]=t[r],t[r]=o}for(let i=256;i<512;i++)t[i]=t[i-256];return t}var Sae=["canvas"],Tae=["light"],Rae=["instancedMesh"],Cae=()=>[0,0,30],Eae=()=>[0,0,0],Dae=()=>["#808080"],Aae=n=>[void 0,void 0,n],Iae=(n,e,t)=>[n,e,t],Iz=()=>["#9C1E15"],Pae=n=>[0,0,n],Fae=(n,e)=>[n,e],Pz=(()=>{class n{constructor(){this.SIZE=1.5,this.NX=20,this.NY=20,this.PADDING=1,this.SIZEP=this.SIZE+this.PADDING,this.W=this.NX*this.SIZEP-this.PADDING,this.H=this.NY*this.SIZEP-this.PADDING,this.NUM_INSTANCES=this.NX*this.NY,this.dummy=new xt,this.simplexNoise=Az(),this.pointerPN={x:0,y:0}}ngOnInit(){this.light?.shadow&&(this.light.shadow.mapSize.width=1024,this.light.shadow.mapSize.height=1024)}onRender(){this.updateLightPosition(),this.updateInstanceMatrix()}updateLightPosition(){let t=this.light?.position;t&&(t.x=this.pointerPN.x*this.W,t.y=this.pointerPN.y*this.H)}updateInstanceMatrix(){if(!this.instancedMesh||!this.instancedMesh.objRef)return;let t=-this.W/2+this.PADDING,i=-this.H/2+this.PADDING,r=Date.now()*1e-4,o=this.pointerPN.x*.1,s=this.pointerPN.y*.1,a=.005,l,c,d,u,h,f;for(let m=0;m<this.NX;m++)for(let _=0;_<this.NY;_++)l=t+m*this.SIZEP,c=i+_*this.SIZEP,d=l*a+o,u=c*a+s,h=this.simplexNoise(d,u,r)*Math.PI,f=this.simplexNoise(u,d,r)*Math.PI,this.dummy.position.set(l,c,-10),this.dummy.rotation.set(h,f,0),this.dummy.updateMatrix(),this.instancedMesh?.objRef?.setMatrixAt(m*this.NY+_,this.dummy.matrix);this.instancedMesh.objRef.instanceMatrix.needsUpdate=!0}onMouseMove(t){if(!this.canvas||!this.canvas.hostElement.nativeElement)return;let i=this.canvas.hostElement.nativeElement;this.pointerPN.x=(t.clientX-i.offsetLeft+window.scrollX)/i.clientWidth*2-1,this.pointerPN.y=-((t.clientY-i.offsetTop+window.scrollY)/i.clientHeight)*2+1}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["app-instanced-mesh-example"]],viewQuery:function(i,r){if(i&1&&(Gt(Sae,5),Gt(Tae,5),Gt(Rae,5)),i&2){let o;ct(o=dt())&&(r.canvas=o.first),ct(o=dt())&&(r.light=o.first),ct(o=dt())&&(r.instancedMesh=o.first)}},hostBindings:function(i,r){i&1&&De("mousemove",function(s){return r.onMouseMove(s)},!1,Eh)},standalone:!1,decls:15,vars:34,consts:[["canvas",""],["light",""],["instancedMesh",""],[3,"onRender","shadow"],[3,"position","lookAt"],[3,"intensity","color"],[3,"castShadow","intensity","decay"],[3,"args","count","castShadow","receiveShadow"],[3,"args"],[3,"color"],[3,"position","receiveShadow"]],template:function(i,r){if(i&1){let o=Xt();U(0,"th-canvas",3,0),De("onRender",function(){return ht(o),ft(r.onRender())}),U(2,"th-scene")(3,"th-perspectiveCamera",4),ae(4,"th-orbitControls"),Q(),ae(5,"th-ambientLight",5)(6,"th-pointLight",6,1),U(8,"th-instancedMesh",7,2),ae(10,"th-boxGeometry",8)(11,"th-meshPhongMaterial",9),Q(),U(12,"th-mesh",10),ae(13,"th-planeGeometry",8)(14,"th-meshPhongMaterial",9),Q()()()}i&2&&(O("shadow",!0),k(3),O("position",Z(18,Cae))("lookAt",Z(19,Eae)),k(2),O("intensity",3)("color",Z(20,Dae)),k(),O("castShadow",!0)("intensity",3)("decay",0),k(2),O("args",vt(21,Aae,r.NUM_INSTANCES))("count",r.NUM_INSTANCES)("castShadow",!0)("receiveShadow",!0),k(2),O("args",ya(23,Iae,r.SIZE,r.SIZE,r.SIZE)),k(),O("color",Z(27,Iz)),k(),O("position",vt(28,Pae,-10-r.SIZE))("receiveShadow",!0),k(),O("args",zn(30,Fae,r.W*2,r.H*2)),k(),O("color",Z(33,Iz)))},dependencies:[jn,Zt,Ii,gr,KV,Ci,Lt,Mo,Pu,bs,Dt],encapsulation:2,changeDetection:0})}}return n})();var kae=()=>[2,2,2],Oae=()=>[1,1,1],jae=()=>({color:"purple"}),Nae=n=>[n,0,0],Lae=()=>[2,0,0],Bae=()=>[75,2,.1,1e3],Uae=()=>[1,1,5],Vae=(()=>{class n{constructor(){this.selected=!1,this.rotation=[0,0,0],this.position=[0,0,0]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["app-box"]],inputs:{rotation:"rotation",position:"position"},standalone:!1,decls:3,vars:7,consts:[[3,"onClick","rotation","position","scale"],[3,"args"]],template:function(i,r){i&1&&(U(0,"th-mesh",0),De("onClick",function(){return r.selected=!r.selected}),ae(1,"th-boxGeometry")(2,"th-meshBasicMaterial",1),Q()),i&2&&(O("rotation",r.rotation)("position",r.position)("scale",r.selected?Z(4,kae):Z(5,Oae)),k(2),O("args",Z(6,jae)))},dependencies:[Ci,za,Pu,ys],encapsulation:2,changeDetection:0})}}return n})(),Fz=(()=>{class n{constructor(){this.rotation=[0,0,0]}onBeforeRender(){this.rotation=[0,this.rotation[2]+.01,this.rotation[2]+.01]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["app-introductory-example"]],standalone:!1,decls:6,vars:11,consts:[[3,"onRender"],[3,"position","rotation"],[3,"args","position"]],template:function(i,r){i&1&&(U(0,"th-canvas",0),De("onRender",function(){return r.onBeforeRender()}),U(1,"th-scene"),ae(2,"app-box",1)(3,"app-box",1)(4,"th-ambientLight")(5,"th-perspectiveCamera",2),Q()()),i&2&&(k(2),O("position",vt(6,Nae,-2))("rotation",r.rotation),k(),O("position",Z(8,Lae))("rotation",r.rotation),k(2),O("args",Z(9,Bae))("position",Z(10,Uae)))},dependencies:[Zt,Ii,Lt,Dt,Vae],encapsulation:2,changeDetection:0})}}return n})();var zae=()=>[0,1,0],Hae=()=>[100,100,100],Gae=n=>[0,0,n],Wae=()=>[10,10],kz=()=>[10,10,10],$ae=()=>[45,2,.1,100],qae=()=>[0,0,0],Oz=(()=>{class n{constructor(){this.assetPath1=`${pn}DamagedHelmet.glb`,this.assetPath2=`${pn}BoomBox.glb`,this.rotation=[0,0,0]}onBeforeRender(){this.rotation=[0,this.rotation[1]+.01,0]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["app-loader-example"]],standalone:!1,decls:8,vars:24,consts:[[3,"onRender"],[3,"thStats"],[3,"intensity"],["loadGLTF","",3,"url","rotation","position"],["loadGLTF","",3,"url","scale","rotation","position"],[3,"args"],[3,"position","decay"],[3,"args","position","lookAt"]],template:function(i,r){i&1&&(U(0,"th-canvas",0),De("onRender",function(){return r.onBeforeRender()}),U(1,"th-scene",1),ae(2,"th-ambientLight",2),U(3,"th-object3D",3),ae(4,"th-object3D",4),Q(),ae(5,"th-gridHelper",5)(6,"th-pointLight",6)(7,"th-perspectiveCamera",7),Q()()),i&2&&(k(),O("thStats",!0),k(),O("intensity",3),k(),O("url",r.assetPath1)("rotation",r.rotation)("position",Z(15,zae)),k(),O("url",r.assetPath2)("scale",Z(16,Hae))("rotation",r.rotation)("position",vt(17,Gae,-3)),k(),O("args",Z(19,Wae)),k(),O("position",Z(20,kz))("decay",0),k(),O("args",Z(21,$ae))("position",Z(22,kz))("lookAt",Z(23,qae)))},dependencies:[Zt,ue,Vr,Ii,gr,Lt,Dt,Yn,On],encapsulation:2,changeDetection:0})}}return n})();var Xae=["slider"],Yae=()=>[35,2,.1,100],Zae=()=>[0,0,6],Qae=(n,e)=>({x:0,y:0,width:n,height:e}),Kae=()=>["#ffffff","#444444",1],Jae=n=>[n,2,2],ele=()=>[1,3],tle=(n,e,t)=>({x:n,y:0,width:e,height:t}),jz=(()=>{class n{constructor(){this.sliderPos=0,this.controlsEnabled=!0,this.colorLeft=new he(12375183),this.colorRight=new he(9419988)}ngOnInit(){!this.slider||!this.canvas||!this.canvas.rendererCanvas||(this.slider.nativeElement.style.touchAction="none",this.sliderPos=(this.canvas.rendererCanvas.clientWidth||0)/2)}onPointerMove(t){if(this.controlsEnabled||!this.canvas||!this.canvas.rendererCanvas||!this.slider||t.isPrimary===!1)return;let r=this.canvas.rendererCanvas.getBoundingClientRect();this.sliderPos=Math.max(r.left,Math.min(r.right,t.pageX))-r.left,this.slider.nativeElement.style.left=this.sliderPos-this.slider.nativeElement.offsetWidth/2+"px"}onPointerUp(){this.controlsEnabled=!0}onSliderPointerDown(t){t.isPrimary!==!1&&(this.controlsEnabled=!1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["app-multi-scene-example"]],viewQuery:function(i,r){if(i&1&&(Gt(Xae,7),Gt(Dt,7)),i&2){let o;ct(o=dt())&&(r.slider=o.first),ct(o=dt())&&(r.canvas=o.first)}},hostBindings:function(i,r){i&1&&De("pointermove",function(s){return r.onPointerMove(s)},!1,WR)("pointerup",function(){return r.onPointerUp()},!1,WR)},standalone:!1,decls:20,vars:33,consts:[["slider",""],["thecanvas",""],["cam",""],["light",""],["geo",""],[1,"slider",3,"pointerdown"],[3,"disableDefaultView"],[3,"args","position"],[3,"scissor","scissorTest","clearColor","camera"],[3,"background"],[3,"args","position","intensity"],[3,"args"],[3,"objRef"],[3,"geometry"],[3,"wireframe"]],template:function(i,r){if(i&1){let o=Xt();U(0,"div",5,0),De("pointerdown",function(a){return ht(o),ft(r.onSliderPointerDown(a))}),Q(),U(2,"th-canvas",6,1)(4,"th-perspectiveCamera",7,2),ae(6,"th-orbitControls"),Q(),U(7,"th-view",8)(8,"th-scene",9),ae(9,"th-hemisphereLight",10,3),U(11,"th-mesh"),ae(12,"th-meshStandardMaterial")(13,"th-icosahedronGeometry",11,4),Q()()(),U(15,"th-view",8)(16,"th-scene",9),ae(17,"th-hemisphereLight",12),U(18,"th-mesh",13),ae(19,"th-meshStandardMaterial",14),Q()()()()}if(i&2){let o=At(3),s=At(5),a=At(10),l=At(14);k(2),O("disableDefaultView",!0),k(2),O("args",Z(20,Yae))("position",Z(21,Zae)),k(3),O("scissor",zn(22,Qae,r.sliderPos,(o.rendererCanvas==null?null:o.rendererCanvas.height)||0))("scissorTest",!0)("clearColor",r.colorLeft)("camera",s),k(),O("background",r.colorLeft),k(),O("args",Z(25,Kae))("position",vt(26,Jae,-2))("intensity",3),k(4),O("args",Z(28,ele)),k(2),O("scissor",ya(29,tle,r.sliderPos,(o.rendererCanvas==null?null:o.rendererCanvas.width)||0,(o.rendererCanvas==null?null:o.rendererCanvas.height)||0))("scissorTest",!0)("clearColor",r.colorRight)("camera",s),k(),O("background",r.colorRight),k(),O("objRef",a.objRef==null?null:a.objRef.clone()),k(),O("geometry",l.objRef),k(),O("wireframe",!0)}},dependencies:[jn,Zt,ip,Ci,Lt,Mb,QV,Dt,zr],styles:[".container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.slider[_ngcontent-%COMP%]{position:absolute;cursor:ew-resize;width:40px;height:40px;background-color:#f32196;opacity:.7;border-radius:50%;top:calc(50% - 20px);left:calc(50% - 20px)}"],changeDetection:0})}}return n})();var sS={name:"RGBShiftShader",uniforms:{tDiffuse:{value:null},amount:{value:.005},angle:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float amount;
		uniform float angle;

		varying vec2 vUv;

		void main() {

			vec2 offset = amount * vec2( cos(angle), sin(angle));
			vec4 cr = texture2D(tDiffuse, vUv + offset);
			vec4 cga = texture2D(tDiffuse, vUv);
			vec4 cb = texture2D(tDiffuse, vUv - offset);
			gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);

		}`};var ile=["thecanvas"],nle=(n,e)=>({x:0,y:0,width:n,height:e}),rle=()=>[0,0,1],ole=()=>["#ffffff"],sle=()=>[0,0,0],aS=n=>[n,0,0],ale=()=>[200,32,16],lle=()=>["#fac400"],cle=()=>["#f83f0d"],dle=()=>[400,0,0],PI=(n,e,t,i)=>({x:n,y:e,width:t,height:i}),ule=n=>[n],hle=()=>({value:.055}),fle=n=>({amount:n}),ple=()=>[.35,.5,2048,!0],Nz=(()=>{class n{constructor(){this.Math=Math,this.RGBShiftShader=sS,this.DotScreenShader=FM,this.canvasWidth=128,this.canvasHeight=128,this.mouseX=0,this.mouseY=0,this.view1={left:0,bottom:0,width:.5,height:1,background:new he(.5,.5,.7),eye:[0,300,1800],up:[0,1,0],fov:30,updateCamera:(t,i)=>{this.updateSize(),t.position.x+=this.mouseX*.05,t.position.x=Math.max(Math.min(t.position.x,2e3),-2e3),t.lookAt(i.position),t.updateProjectionMatrix()}},this.view2={left:.5,bottom:0,width:.5,height:.5,background:new he(.7,.5,.5),eye:[0,1800,0],up:[0,0,1],fov:45,updateCamera:(t,i)=>{this.updateSize(),t.position.x-=this.mouseX*.05,t.position.x=Math.max(Math.min(t.position.x,2e3),-2e3),t.lookAt(t.position.clone().setY(0)),t.updateProjectionMatrix()}},this.view3={left:.5,bottom:.5,width:.5,height:.5,background:new he(.5,.7,.7),eye:[1400,800,1400],up:[0,1,0],fov:60,updateCamera:(t,i)=>{this.updateSize(),t.position.y-=this.mouseX*.05,t.position.y=Math.max(Math.min(t.position.y,1600),-1600),t.lookAt(i.position),t.updateProjectionMatrix()}}}ngOnInit(){!this.canvas||!this.canvas.rendererCanvas||(this.shadowTexture=new kc(this.canvas.rendererCanvas))}updateSize(){!this.canvas||!this.canvas.rendererCanvas||(this.canvasWidth=this.canvas.rendererCanvas.width,this.canvasHeight=this.canvas.rendererCanvas.height)}onMouseMove(t){if(!this.canvas||!this.canvas.rendererCanvas)return;let i=this.canvas.rendererCanvas.getBoundingClientRect();this.mouseX=t.clientX-i.left-i.width/2,this.mouseY=t.clientY-i.right-i.height/2}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["app-multi-view-postprocessing-example"]],viewQuery:function(i,r){if(i&1&&Gt(ile,7),i&2){let o;ct(o=dt())&&(r.canvas=o.first)}},hostBindings:function(i,r){i&1&&De("mousemove",function(s){return r.onMouseMove(s)},!1,Eh)},standalone:!1,decls:32,vars:96,consts:[["thecanvas",""],["scene",""],["geo",""],["mat",""],["thview1",""],["camera1",""],["thview2",""],["camera2",""],["thview3",""],["camera3",""],[3,"disableDefaultView","viewPort"],[3,"position","args","intensity"],[3,"position","rotation"],[3,"args"],[3,"flatShading","shininess","specular","color"],[3,"position","rotation","geometry","material"],[3,"onRender","scene","viewPort","scissor","scissorTest"],[3,"position","up","fov","aspect","near","far"],[3,"clearColor"],[3,"strength"],[3,"args","uniforms"],[3,"onRender","scene","viewPort","scissor","scissorTest","clearColor"]],template:function(i,r){if(i&1){let o=Xt();U(0,"th-canvas",10,0)(2,"th-scene",null,1),ae(4,"th-directionalLight",11),U(5,"th-mesh",12),ae(6,"th-sphereGeometry",13,2)(8,"th-meshPhongMaterial",14,3),Q(),ae(10,"th-mesh",15)(11,"th-mesh",15),Q(),U(12,"th-view",16,4),De("onRender",function(){ht(o);let a=At(3),l=At(15);return ft(r.view1.updateCamera(l.objRef,a.objRef))}),ae(14,"th-perspectiveCamera",17,5),U(16,"th-effectComposer"),ae(17,"th-renderPass",18)(18,"th-unrealBloomPass",19)(19,"th-shaderPass",20)(20,"th-glitchPass"),Q()(),U(21,"th-view",21,6),De("onRender",function(){ht(o);let a=At(3),l=At(24);return ft(r.view2.updateCamera(l.objRef,a.objRef))}),ae(23,"th-perspectiveCamera",17,7),U(25,"th-effectComposer"),ae(26,"th-renderPass")(27,"th-filmPass",13),Q()(),U(28,"th-view",21,8),De("onRender",function(){ht(o);let a=At(3),l=At(31);return ft(r.view3.updateCamera(l.objRef,a.objRef))}),ae(30,"th-perspectiveCamera",17,9),Q()()}if(i&2){let o=At(3),s=At(7),a=At(9),l=At(13),c=At(22),d=At(29);O("disableDefaultView",!0)("viewPort",zn(57,nle,.5*r.canvasWidth,r.canvasHeight)),k(4),O("position",Z(60,rle))("args",Z(61,ole))("intensity",3),k(),O("position",Z(62,sle))("rotation",vt(63,aS,-r.Math.PI/2)),k(),O("args",Z(65,ale)),k(2),O("flatShading",!1)("shininess",30)("specular",Z(66,lle))("color",Z(67,cle)),k(2),O("position",vt(68,aS,-400))("rotation",vt(70,aS,-r.Math.PI/2))("geometry",s.objRef)("material",a.objRef),k(),O("position",Z(72,dle))("rotation",vt(73,aS,-r.Math.PI/2))("geometry",s.objRef)("material",a.objRef),k(),O("scene",o)("viewPort",Ph(75,PI,r.view1.left*r.canvasWidth,r.view1.bottom*r.canvasHeight,r.view1.width*r.canvasWidth,r.view1.height*r.canvasHeight))("scissor",l.viewPort)("scissorTest",!0),k(2),O("position",r.view1.eye)("up",r.view1.up)("fov",r.view1.fov)("aspect",r.view1.width*r.canvasWidth/(r.view1.height*r.canvasHeight))("near",1)("far",1e4),k(3),O("clearColor",r.view1.background),k(),O("strength",.2),k(),O("args",vt(80,ule,r.RGBShiftShader))("uniforms",vt(83,fle,Z(82,hle))),k(2),O("scene",o)("viewPort",Ph(85,PI,r.view2.left*r.canvasWidth,r.view2.bottom*r.canvasHeight,r.view2.width*r.canvasWidth,r.view2.height*r.canvasHeight))("scissor",c.viewPort)("scissorTest",!0)("clearColor",r.view2.background),k(2),O("position",r.view2.eye)("up",r.view2.up)("fov",r.view2.fov)("aspect",r.view2.width*r.canvasWidth/(r.view2.height*r.canvasHeight))("near",1)("far",1e4),k(4),O("args",Z(90,ple)),k(),O("scene",o)("viewPort",Ph(91,PI,r.view3.left*r.canvasWidth,r.view3.bottom*r.canvasHeight,r.view3.width*r.canvasWidth,r.view3.height*r.canvasHeight))("scissor",d.viewPort)("scissorTest",!0)("clearColor",r.view3.background),k(2),O("position",r.view3.eye)("up",r.view3.up)("fov",r.view3.fov)("aspect",r.view3.width*r.canvasWidth/(r.view3.height*r.canvasHeight))("near",1)("far",1e4)}},dependencies:[Zt,mr,Ci,Lt,Mo,nd,$a,zV,ZV,Pp,wb,tS,Dt,zr],encapsulation:2,changeDetection:0})}}return n})();var $z=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(be(lr),be(_t))};static \u0275dir=Ue({type:n})}return n})(),Vb=(()=>{class n extends $z{static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275dir=Ue({type:n,features:[q]})}return n})(),Np=new ye(""),mle={provide:Np,useExisting:_e(()=>NI),multi:!0},NI=(()=>{class n extends Vb{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275dir=Ue({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&De("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[J([mle]),q]})}return n})(),gle={provide:Np,useExisting:_e(()=>hS),multi:!0};function _le(){let n=xa()?xa().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var ble=new ye(""),hS=(()=>{class n extends $z{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!_le())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(be(lr),be(_t),be(ble,8))};static \u0275dir=Ue({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&De("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[J([gle]),q]})}return n})();var vle=new ye(""),yle=new ye("");function qz(n){return n!=null}function Xz(n){return lc(n)?ji(n):n}function Yz(n){let e={};return n.forEach(t=>{e=t!=null?ce(ce({},e),t):e}),Object.keys(e).length===0?null:e}function Zz(n,e){return e.map(t=>t(n))}function xle(n){return!n.validate}function Qz(n){return n.map(e=>xle(e)?e:t=>e.validate(t))}function wle(n){if(!n)return null;let e=n.filter(qz);return e.length==0?null:function(t){return Yz(Zz(t,e))}}function Kz(n){return n!=null?wle(Qz(n)):null}function Mle(n){if(!n)return null;let e=n.filter(qz);return e.length==0?null:function(t){let i=Zz(t,e).map(Xz);return _d(i).pipe(lt(Yz))}}function Jz(n){return n!=null?Mle(Qz(n)):null}function Lz(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Sle(n){return n._rawValidators}function Tle(n){return n._rawAsyncValidators}function FI(n){return n?Array.isArray(n)?n:[n]:[]}function cS(n,e){return Array.isArray(n)?n.includes(e):n===e}function Bz(n,e){let t=FI(e);return FI(n).forEach(r=>{cS(t,r)||t.push(r)}),t}function Uz(n,e){return FI(e).filter(t=>!cS(n,t))}var dS=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Kz(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Jz(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},kI=class extends dS{name;get formDirective(){return null}get path(){return null}},Ub=class extends dS{_parent=null;name=null;valueAccessor=null},OI=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Rle={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},s$e=Ft(ce({},Rle),{"[class.ng-submitted]":"isSubmitted"}),fS=(()=>{class n extends OI{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(be(Ub,2))};static \u0275dir=Ue({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Vt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[q]})}return n})();var jb="VALID",lS="INVALID",kp="PENDING",Nb="DISABLED",jp=class{},uS=class extends jp{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Lb=class extends jp{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Bb=class extends jp{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Op=class extends jp{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function Cle(n){return(pS(n)?n.validators:n)||null}function Ele(n){return Array.isArray(n)?Kz(n):n||null}function Dle(n,e){return(pS(e)?e.asyncValidators:n)||null}function Ale(n){return Array.isArray(n)?Jz(n):n||null}function pS(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var jI=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return as(this.statusReactive)}set status(e){as(()=>this.statusReactive.set(e))}_status=Fh(()=>this.statusReactive());statusReactive=ul(void 0);get valid(){return this.status===jb}get invalid(){return this.status===lS}get pending(){return this.status==kp}get disabled(){return this.status===Nb}get enabled(){return this.status!==Nb}errors;get pristine(){return as(this.pristineReactive)}set pristine(e){as(()=>this.pristineReactive.set(e))}_pristine=Fh(()=>this.pristineReactive());pristineReactive=ul(!0);get dirty(){return!this.pristine}get touched(){return as(this.touchedReactive)}set touched(e){as(()=>this.touchedReactive.set(e))}_touched=Fh(()=>this.touchedReactive());touchedReactive=ul(!1);get untouched(){return!this.touched}_events=new tt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Bz(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Bz(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Uz(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Uz(e,this._rawAsyncValidators))}hasValidator(e){return cS(this._rawValidators,e)}hasAsyncValidator(e){return cS(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ft(ce({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Bb(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Bb(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ft(ce({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Lb(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Lb(!0,i))}markAsPending(e={}){this.status=kp;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Op(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ft(ce({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Nb,this.errors=null,this._forEachChild(r=>{r.disable(Ft(ce({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new uS(this.value,i)),this._events.next(new Op(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ft(ce({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=jb,this._forEachChild(i=>{i.enable(Ft(ce({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ft(ce({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jb||this.status===kp)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new uS(this.value,t)),this._events.next(new Op(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ft(ce({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Nb:jb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=kp,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=Xz(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Op(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new rt,this.statusChanges=new rt}_calculateStatus(){return this._allControlsDisabled()?Nb:this.errors?lS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(kp)?kp:this._anyControlsHaveStatus(lS)?lS:jb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Lb(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Bb(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){pS(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Ele(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Ale(this._rawAsyncValidators)}};var eH=new ye("",{providedIn:"root",factory:()=>LI}),LI="always";function Ile(n,e){return[...e.path,n]}function Ple(n,e,t=LI){kle(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Ole(n,e),Nle(n,e),jle(n,e),Fle(n,e)}function Vz(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Fle(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function kle(n,e){let t=Sle(n);e.validator!==null?n.setValidators(Lz(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=Tle(n);e.asyncValidator!==null?n.setAsyncValidators(Lz(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Vz(e._rawValidators,r),Vz(e._rawAsyncValidators,r)}function Ole(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&tH(n,e)})}function jle(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&tH(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function tH(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Nle(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Lle(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Ble(n){return Object.getPrototypeOf(n.constructor)===Vb}function Ule(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===hS?t=o:Ble(o)?i=o:r=o}),r||i||t||null}function zz(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Hz(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Vle=class extends jI{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(Cle(t),Dle(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pS(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Hz(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){zz(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){zz(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Hz(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var zle={provide:Ub,useExisting:_e(()=>zb)},Gz=Promise.resolve(),zb=(()=>{class n extends Ub{_changeDetectorRef;callSetDisabledState;control=new Vle;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new rt;constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Ule(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Lle(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ple(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Gz.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Si(i);Gz.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Ile(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(be(kI,9),be(vle,10),be(yle,10),be(Np,10),be(un,8),be(eH,8))};static \u0275dir=Ue({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[J([zle]),q,tr]})}return n})();var Hle={provide:Np,useExisting:_e(()=>BI),multi:!0},BI=(()=>{class n extends Vb{writeValue(t){this.setProperty("value",parseFloat(t))}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275dir=Ue({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(i,r){i&1&&De("change",function(s){return r.onChange(s.target.value)})("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[J([Hle]),q]})}return n})();var Gle={provide:Np,useExisting:_e(()=>mS),multi:!0};function iH(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Wle(n){return n.split(":")[0]}var mS=(()=>{class n extends Vb{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i=this._getOptionId(t),r=iH(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=Wle(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275dir=Ue({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&De("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[J([Gle]),q]})}return n})(),nH=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(iH(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(be(_t),be(lr),be(mS,9))};static \u0275dir=Ue({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),$le={provide:Np,useExisting:_e(()=>rH),multi:!0};function Wz(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function qle(n){return n.split(":")[0]}var rH=(()=>{class n extends Vb{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],c=this._getOptionValue(l.value);r.push(c)}}else{let s=i.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=qle(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275dir=Ue({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&De("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[J([$le]),q]})}return n})(),oH=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Wz(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Wz(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(be(_t),be(lr),be(rH,9))};static \u0275dir=Ue({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var Xle=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({})}return n})();var sH=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:eH,useValue:t.callSetDisabledState??LI}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({imports:[Xle]})}return n})();var Yle=()=>[2,2,2],Zle=()=>[1,1,1],Qle=()=>[10,10],lH=()=>[10,10,10],Kle=()=>[45,2,.1,100],Jle=()=>[0,0,0],ece=n=>[n],tce=(n,e,t)=>[n,e,t];function ice(n,e){n&1&&ae(0,"th-orbitControls")}function nce(n,e){n&1&&ae(0,"th-mapControls")}function rce(n,e){n&1&&ae(0,"th-arcballControls")}function oce(n,e){if(n&1&&ae(0,"th-transformControls",15),n&2){Ht();let t=At(26);O("object",t.objRef)}}function sce(n,e){if(n&1&&ae(0,"th-dragControls",12),n&2){Ht();let t=At(22),i=At(26),r=At(30);O("args",ya(3,tce,vt(1,ece,i.objRef),r.objRef,t.hostElement.nativeElement))}}function ace(n,e){n&1&&ae(0,"th-flyControls")}function lce(n,e){n&1&&ae(0,"th-trackballControls")}function cce(n,e){n&1&&ae(0,"th-firstPersonControls")}var cH=(()=>{class n{constructor(){this.controlType="orbit",this.renderOnDemand=!0,this.selected=!1,this.glbPath=`${pn}DamagedHelmet.glb`}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["app-on-demand-example"]],standalone:!1,decls:39,vars:21,consts:[["canvas",""],["model",""],["camera",""],[1,"control-panel"],["id","ondemand","type","checkbox",3,"ngModelChange","ngModel"],["for","ondemand"],[1,"form-control",3,"ngModelChange","ngModel"],[1,"works-on-demand"],[1,"needs-loop"],[3,"thStats","renderOnDemand"],[3,"intensity"],["loadGLTF","",3,"onClick","url","scale"],[3,"args"],[3,"position","decay"],[3,"args","position","lookAt"],[3,"object"]],template:function(i,r){if(i&1){let o=Xt();U(0,"div",3)(1,"input",4),Ih("ngModelChange",function(a){return ht(o),Em(r.renderOnDemand,a)||(r.renderOnDemand=a),ft(a)}),Q(),U(2,"label",5),It(3,"Render On-Demand"),Q(),U(4,"select",6),Ih("ngModelChange",function(a){return ht(o),Em(r.controlType,a)||(r.controlType=a),ft(a)}),U(5,"option",7),It(6,"orbit"),Q(),U(7,"option",7),It(8,"map"),Q(),U(9,"option",7),It(10,"arcball"),Q(),U(11,"option",7),It(12,"transform"),Q(),U(13,"option",7),It(14,"drag"),Q(),U(15,"option",8),It(16,"fly"),Q(),U(17,"option",8),It(18,"trackball"),Q(),U(19,"option",8),It(20,"firstpersion"),Q()()(),U(21,"th-canvas",9,0)(23,"th-scene"),ae(24,"th-ambientLight",10),U(25,"th-object3D",11,1),De("onClick",function(){return ht(o),ft(r.selected=!r.selected)}),Q(),ae(27,"th-gridHelper",12)(28,"th-pointLight",13),U(29,"th-perspectiveCamera",14,2),Ni(31,ice,1,0,"th-orbitControls")(32,nce,1,0,"th-mapControls")(33,rce,1,0,"th-arcballControls")(34,oce,1,1,"th-transformControls",15)(35,sce,1,7,"th-dragControls",12)(36,ace,1,0,"th-flyControls")(37,lce,1,0,"th-trackballControls")(38,cce,1,0,"th-firstPersonControls"),Q()()()}if(i&2){let o;k(),Ah("ngModel",r.renderOnDemand),k(3),Ah("ngModel",r.controlType),k(17),O("thStats",!0)("renderOnDemand",r.renderOnDemand),k(3),O("intensity",3),k(),O("url",r.glbPath)("scale",r.selected?Z(14,Yle):Z(15,Zle)),k(2),O("args",Z(16,Qle)),k(),O("position",Z(17,lH))("decay",0),k(),O("args",Z(18,Kle))("position",Z(19,lH))("lookAt",Z(20,Jle)),k(2),Mn((o=r.controlType)==="orbit"?31:o==="map"?32:o==="arcball"?33:o==="transform"?34:o==="drag"?35:o==="fly"?36:o==="trackball"?37:o==="firstpersion"?38:-1)}},dependencies:[wz,IV,UV,WV,XV,jn,ez,ZM,Zt,ue,Vr,Ii,gr,Lt,Dt,Yn,ys,Xc,On,nH,oH,NI,mS,fS,zb],styles:[".needs-loop[_ngcontent-%COMP%]{color:red}.works-on-demand[_ngcontent-%COMP%]{color:green}.control-panel[_ngcontent-%COMP%]{display:flex;gap:1em;margin:1em}"],changeDetection:0})}}return n})();var sd=class n{constructor(e,t,i,r,o="div"){this.parent=e,this.object=t,this.property=i,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),n.nextNameID=n.nextNameID||0,this.$name.id=`lil-gui-name-${++n.nextNameID}`,this.$widget=document.createElement(o),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",s=>s.stopPropagation()),this.domElement.addEventListener("keyup",s=>s.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled?this:(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e),this)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){let t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);let e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}},UI=class extends sd{constructor(e,t,i){super(e,t,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}};function VI(n){let e,t;return(e=n.match(/(#|0x)?([a-f0-9]{6})/i))?t=e[2]:(e=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?t=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(t=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),t?"#"+t:!1}var dce={isPrimitive:!0,match:n=>typeof n=="string",fromHexString:VI,toHexString:VI},Gb={isPrimitive:!0,match:n=>typeof n=="number",fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},uce={isPrimitive:!1,match:n=>Array.isArray(n),fromHexString(n,e,t=1){let i=Gb.fromHexString(n);e[0]=(i>>16&255)/255*t,e[1]=(i>>8&255)/255*t,e[2]=(i&255)/255*t},toHexString([n,e,t],i=1){i=255/i;let r=n*i<<16^e*i<<8^t*i<<0;return Gb.toHexString(r)}},hce={isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,e,t=1){let i=Gb.fromHexString(n);e.r=(i>>16&255)/255*t,e.g=(i>>8&255)/255*t,e.b=(i&255)/255*t},toHexString({r:n,g:e,b:t},i=1){i=255/i;let r=n*i<<16^e*i<<8^t*i<<0;return Gb.toHexString(r)}},fce=[dce,Gb,uce,hce];function pce(n){return fce.find(e=>e.match(n))}var zI=class extends sd{constructor(e,t,i,r){super(e,t,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=pce(this.initialValue),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{let o=VI(this.$text.value);o&&this._setValueFromHexString(o)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){let t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}},Hb=class extends sd{constructor(e,t,i){super(e,t,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",r=>{r.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}},HI=class extends sd{constructor(e,t,i,r,o,s){super(e,t,i,"number"),this._initInput(),this.min(r),this.max(o);let a=s!==void 0;this.step(a?s:this._getImplicitStep(),a),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){let e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=t*100+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;let t=()=>{let b=parseFloat(this.$input.value);isNaN(b)||(this._stepExplicit&&(b=this._snap(b)),this.setValue(this._clamp(b)))},i=b=>{let v=parseFloat(this.$input.value);isNaN(v)||(this._snapClampSetValue(v+b),this.$input.value=this.getValue())},r=b=>{b.key==="Enter"&&this.$input.blur(),b.code==="ArrowUp"&&(b.preventDefault(),i(this._step*this._arrowKeyMultiplier(b))),b.code==="ArrowDown"&&(b.preventDefault(),i(this._step*this._arrowKeyMultiplier(b)*-1))},o=b=>{this._inputFocused&&(b.preventDefault(),i(this._step*this._normalizeMouseWheel(b)))},s=!1,a,l,c,d,u,h=5,f=b=>{a=b.clientX,l=c=b.clientY,s=!0,d=this.getValue(),u=0,window.addEventListener("mousemove",m),window.addEventListener("mouseup",_)},m=b=>{if(s){let v=b.clientX-a,y=b.clientY-l;Math.abs(y)>h?(b.preventDefault(),this.$input.blur(),s=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(v)>h&&_()}if(!s){let v=b.clientY-c;u-=v*this._step*this._arrowKeyMultiplier(b),d+u>this._max?u=this._max-d:d+u<this._min&&(u=this._min-d),this._snapClampSetValue(d+u)}c=b.clientY},_=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",_)},g=()=>{this._inputFocused=!0},p=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",t),this.$input.addEventListener("keydown",r),this.$input.addEventListener("wheel",o,{passive:!1}),this.$input.addEventListener("mousedown",f),this.$input.addEventListener("focus",g),this.$input.addEventListener("blur",p)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");let e=(p,b,v,y,R)=>(p-b)/(v-b)*(R-y)+y,t=p=>{let b=this.$slider.getBoundingClientRect(),v=e(p,b.left,b.right,this._min,this._max);this._snapClampSetValue(v)},i=p=>{this._setDraggingStyle(!0),t(p.clientX),window.addEventListener("mousemove",r),window.addEventListener("mouseup",o)},r=p=>{t(p.clientX)},o=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",o)},s=!1,a,l,c=p=>{p.preventDefault(),this._setDraggingStyle(!0),t(p.touches[0].clientX),s=!1},d=p=>{p.touches.length>1||(this._hasScrollBar?(a=p.touches[0].clientX,l=p.touches[0].clientY,s=!0):c(p),window.addEventListener("touchmove",u,{passive:!1}),window.addEventListener("touchend",h))},u=p=>{if(s){let b=p.touches[0].clientX-a,v=p.touches[0].clientY-l;Math.abs(b)>Math.abs(v)?c(p):(window.removeEventListener("touchmove",u),window.removeEventListener("touchend",h))}else p.preventDefault(),t(p.touches[0].clientX)},h=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",u),window.removeEventListener("touchend",h)},f=this._callOnFinishChange.bind(this),m=400,_,g=p=>{if(Math.abs(p.deltaX)<Math.abs(p.deltaY)&&this._hasScrollBar)return;p.preventDefault();let v=this._normalizeMouseWheel(p)*this._step;this._snapClampSetValue(this.getValue()+v),this.$input.value=this.getValue(),clearTimeout(_),_=setTimeout(f,m)};this.$slider.addEventListener("mousedown",i),this.$slider.addEventListener("touchstart",d,{passive:!1}),this.$slider.addEventListener("wheel",g,{passive:!1})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle(`lil-gui-${t}`,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:i}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,i=-e.wheelDelta/120,i*=this._stepExplicit?1:10),t+-i}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){let t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){let e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}},GI=class extends sd{constructor(e,t,i,r){super(e,t,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach(o=>{let s=document.createElement("option");s.innerHTML=o,this.$select.appendChild(s)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){let e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=t===-1?e:this._names[t],this}},WI=class extends sd{constructor(e,t,i){super(e,t,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",r=>{r.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}},mce=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  background-color: var(--background-color);
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean .widget {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "\u2195";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background-color: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background-color: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background-color: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  height: var(--title-height);
  line-height: calc(var(--title-height) - 4px);
  font-weight: 600;
  padding: 0 var(--padding);
  -webkit-tap-highlight-color: transparent;
  cursor: pointer;
  outline: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "\u25BE";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "\u25B8";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui input {
  -webkit-tap-highlight-color: transparent;
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input::-webkit-outer-spin-button,
.lil-gui input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.lil-gui input[type=number] {
  -moz-appearance: textfield;
}
.lil-gui input[type=checkbox] {
  appearance: none;
  -webkit-appearance: none;
  height: var(--checkbox-size);
  width: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "\u2713";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  -webkit-tap-highlight-color: transparent;
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  border: 1px solid var(--widget-color);
  text-align: center;
  line-height: calc(var(--widget-height) - 4px);
}
@media (hover: hover) {
  .lil-gui button:hover {
    background: var(--hover-color);
    border-color: var(--hover-color);
  }
  .lil-gui button:focus {
    border-color: var(--focus-color);
  }
}
.lil-gui button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function gce(n){let e=document.createElement("style");e.innerHTML=n;let t=document.querySelector("head link[rel=stylesheet], head style");t?document.head.insertBefore(e,t):document.head.appendChild(e)}var dH=!1,$I=class n{constructor({parent:e,autoPlace:t=e===void 0,container:i,width:r,title:o="Controls",closeFolders:s=!1,injectStyles:a=!0,touchStyles:l=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",c=>{(c.code==="Enter"||c.code==="Space")&&(c.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(o),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),l&&this.domElement.classList.add("allow-touch-styles"),!dH&&a&&(gce(mce),dH=!0),i?i.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this._closeFolders=s}add(e,t,i,r,o){if(Object(i)===i)return new GI(this,e,t,i);let s=e[t];switch(typeof s){case"number":return new HI(this,e,t,i,r,o);case"boolean":return new UI(this,e,t);case"string":return new WI(this,e,t);case"function":return new Hb(this,e,t)}console.error(`gui.add failed
	property:`,t,`
	object:`,e,`
	value:`,s)}addColor(e,t,i=1){return new zI(this,e,t,i)}addFolder(e){let t=new n({parent:this,title:e});return this.root._closeFolders&&t.close(),t}load(e,t=!0){return e.controllers&&this.controllers.forEach(i=>{i instanceof Hb||i._name in e.controllers&&i.load(e.controllers[i._name])}),t&&e.folders&&this.folders.forEach(i=>{i._title in e.folders&&i.load(e.folders[i._title])}),this}save(e=!0){let t={controllers:{},folders:{}};return this.controllers.forEach(i=>{if(!(i instanceof Hb)){if(i._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${i._name}"`);t.controllers[i._name]=i.save()}}),e&&this.folders.forEach(i=>{if(i._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${i._title}"`);t.folders[i._title]=i.save()}),t}open(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(e){this._closed!==e&&(this._closed=e,this._callOnOpenClose(this))}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{let t=this.$children.clientHeight;this.$children.style.height=t+"px",this.domElement.classList.add("transition");let i=o=>{o.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);let r=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=r+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(i=>i.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),this._onChange!==void 0&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onOpenClose(e){return this._onOpenClose=e,this}_callOnOpenClose(e){this.parent&&this.parent._callOnOpenClose(e),this._onOpenClose!==void 0&&this._onOpenClose.call(this,e)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(t=>{e=e.concat(t.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(t=>{e=e.concat(t.foldersRecursive())}),e}},uH=$I;var _ce=["outlinePass"],bce=()=>["#ffffff"],vce=()=>[0,0,8],yce=()=>["#aaaaaa"],xce=()=>["#ddffdd"],wce=()=>[3,48,24],qI=(n,e,t)=>[n,e,t];function Mce(n,e){if(n&1){let t=Xt();U(0,"th-mesh",13),De("onMouseEnter",function(r){ht(t);let o=Ht();return ft(o.onHover(r))})("onMouseExit",function(){ht(t);let r=Ht();return ft(r.onBlur())})("onPointerDown",function(r){ht(t);let o=Ht();return ft(o.onPointerDown(r))}),ae(1,"th-meshPhongMaterial",14),Q()}if(n&2){let t=e.$implicit;Ht();let i=At(11);O("geometry",i.objRef)("position",ya(7,qI,t.x,t.y,t.z))("scale",ya(11,qI,t.scale,t.scale,t.scale))("receiveShadow",!0)("castShadow",!0),k(),O("flatShading",!0)("color",t.color)}}var hH=(()=>{class n{constructor(t){this.elem=t,this.outlinePassResolution=new V(window.innerWidth,window.innerHeight),this.meshData=[],this.visibleEdgeColor="#ffffff",this.hiddenEdgeColor="#190a05",this.edgeStrength=3,this.edgeGlow=.5,this.edgeThickness=1,this.pulsePeriod=1,this.initGUI(),this.initMeshData()}initGUI(){let t=new uH({title:"Settings",injectStyles:!0,container:this.elem.nativeElement,autoPlace:!0});t.add(this,"edgeStrength",.01,10),t.add(this,"edgeGlow",0,2),t.add(this,"edgeThickness",1,4),t.add(this,"pulsePeriod",0,5),t.addColor(this,"visibleEdgeColor"),t.addColor(this,"hiddenEdgeColor")}ngOnInit(){this.outlinePassResolution=new V(window.innerWidth,window.innerHeight),this.outlinePass&&(this.outlinePass.resolution=this.outlinePassResolution)}initMeshData(){for(let t=0;t<20;t++)this.meshData.push({color:new he().setHSL(Math.random(),1,.3),x:Math.random()*4-2,y:Math.random()*4-2,z:Math.random()*4-2,scale:Math.random()*.3+.1})}onHover(t){t.component.objRef&&(this.outlinePass.selectedObjects=[t.component.objRef])}onBlur(){this.outlinePass.selectedObjects=[]}onPointerDown(t){t.component.material?.color.set("#ff0000")}static{this.\u0275fac=function(i){return new(i||n)(be(_t))}}static{this.\u0275cmp=j({type:n,selectors:[["app-outline-pass-events-example"]],viewQuery:function(i,r){if(i&1&&Gt(_ce,7),i&2){let o;ct(o=dt())&&(r.outlinePass=o.first)}},standalone:!1,decls:20,vars:32,consts:[["thecanvas",""],["scene",""],["camera",""],["light",""],["geometry",""],["outlinePass",""],[3,"shadow","thStats"],[3,"background"],[3,"position","fov","near","far"],[3,"color","intensity"],[3,"args"],[3,"geometry","position","scale","receiveShadow","castShadow"],[3,"args","visibleEdgeColor","hiddenEdgeColor","edgeStrength","edgeGlow","edgeThickness","pulsePeriod"],[3,"onMouseEnter","onMouseExit","onPointerDown","geometry","position","scale","receiveShadow","castShadow"],[3,"flatShading","color"]],template:function(i,r){if(i&1&&(U(0,"th-canvas",6,0)(2,"th-scene",7,1)(4,"th-perspectiveCamera",8,2),ae(6,"th-orbitControls"),Q(),ae(7,"th-ambientLight",9)(8,"th-directionalLight",9,3)(10,"th-sphereGeometry",10,4),cr(12,Mce,2,15,"th-mesh",11,wr),Q(),U(14,"th-effectComposer"),ae(15,"th-renderPass")(16,"th-outlinePass",12,5),Bi(18,"color"),Bi(19,"color"),Q()()),i&2){let o=At(3),s=At(5);O("shadow",!0)("thStats",!0),k(2),O("background",Z(23,bce)),k(2),O("position",Z(24,vce))("fov",45)("near",.1)("far",100),k(3),O("color",Z(25,yce))("intensity",3),k(),O("color",Z(26,xce))("intensity",1.8),k(2),O("args",Z(27,wce)),k(2),dr(r.meshData),k(4),O("args",ya(28,qI,r.outlinePassResolution,o.objRef,s.objRef))("visibleEdgeColor",Yi(18,19,r.visibleEdgeColor))("hiddenEdgeColor",Yi(19,21,r.hiddenEdgeColor))("edgeStrength",r.edgeStrength)("edgeGlow",r.edgeGlow)("edgeThickness",r.edgeThickness)("pulsePeriod",r.pulsePeriod)}},dependencies:[jn,Zt,Ii,mr,Ci,Lt,Mo,nd,$a,iz,Pp,Dt,ys,On,Qa],styles:["[_nghost-%COMP%]     .lil-gui{position:fixed;right:0;z-index:9999}"],changeDetection:0})}}return n})();var Sce=["camera"],Tce=()=>["#72645b",2,15],Rce=n=>[0,n,0],fH=n=>[n,0,0],Cce=()=>[40,40],Ece=()=>({color:"#999999",specular:"#101010"}),Dce=n=>[0,n,.3],Ace=()=>[.001,.001,.001],Ice=()=>({color:"#0055ff",flatShading:!0}),Pce=()=>["#443333","#111122"],Fce=()=>[1,1,1],kce=n=>[.5,1,n],Oce=()=>[35,2,1,15],pH=(()=>{class n{constructor(){this.Math=Math,this.cameraPosition=new w(3,.15,3),this.assetPath=`${pn}dolphins.ply`}onBeforeRender(){let t=Date.now()*5e-4;this.camera&&(this.camera.position=new w(Math.sin(t)*2.5,.15,Math.cos(t)*2.5),this.camera.lookAt=[0,.1,0])}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["app-plyloader-example"]],viewQuery:function(i,r){if(i&1&&Gt(Sce,5),i&2){let o;ct(o=dt())&&(r.camera=o.first)}},standalone:!1,decls:17,vars:58,consts:[["camera",""],[3,"onRender","shadow"],[3,"background","fog"],[3,"position","rotation","receiveShadow"],[3,"args"],[3,"rotation","position","scale","castShadow","receiveShadow"],["loadPLY","",3,"url"],[3,"args","intensity"],[3,"castShadow","position","color","intensity","receiveShadow"]],template:function(i,r){if(i&1){let o=Xt();U(0,"th-canvas",1),De("onRender",function(){return ht(o),ft(r.onBeforeRender())}),U(1,"th-scene",2),Bi(2,"color"),Bi(3,"fog"),U(4,"th-mesh",3),ae(5,"th-planeGeometry",4)(6,"th-meshPhongMaterial",4),Q(),U(7,"th-mesh",5),ae(8,"th-bufferGeometry",6)(9,"th-meshStandardMaterial",4),Q(),ae(10,"th-hemisphereLight",7)(11,"th-directionalLight",8),Bi(12,"color"),ae(13,"th-directionalLight",8),Bi(14,"color"),ae(15,"th-perspectiveCamera",4,0),Q()()}i&2&&(O("shadow",!0),k(),O("background",Yi(2,32,"#72645b"))("fog",Yi(3,34,Z(40,Tce))),k(3),O("position",vt(41,Rce,-.5))("rotation",vt(43,fH,-r.Math.PI/2))("receiveShadow",!0),k(),O("args",Z(45,Cce)),k(),O("args",Z(46,Ece)),k(),O("rotation",vt(47,fH,-r.Math.PI/2))("position",vt(49,Dce,-.2))("scale",Z(51,Ace))("castShadow",!0)("receiveShadow",!0),k(),O("url",r.assetPath),k(),O("args",Z(52,Ice)),k(),O("args",Z(53,Pce))("intensity",3),k(),O("castShadow",!0)("position",Z(54,Fce))("color",Yi(12,36,"#ffffff"))("intensity",1.35)("castShadow",!0)("receiveShadow",!0)("intensity",3),k(2),O("castShadow",!0)("position",vt(55,kce,-1))("color",Yi(14,38,"#ffaa00"))("intensity",1)("castShadow",!0)("receiveShadow",!0)("intensity",3),k(2),O("args",Z(57,Oce)))},dependencies:[Zt,mr,ip,Ci,Lt,Mo,Mb,ni,bs,Dt,Mz,Qa,iM],encapsulation:2,changeDetection:0})}}return n})();var jce=["object"],Nce=["light"],Lce=n=>[n],Bce=n=>({value:n}),Uce=n=>({amount:n}),mH=()=>["#ffffff"],Vce=n=>[0,0,n],zce=()=>["#333333"],Hce=()=>[1,4,4];function Gce(n,e){if(n&1&&(U(0,"th-mesh",14),ae(1,"th-meshPhongMaterial",15),Q()),n&2){let t=e.$implicit;Ht();let i=At(15);O("geometry",i.objRef)("position",t.pos)("rotation",t.rotation)("scale",t.scale),k(),O("flatShading",!0)("color",t.color)}}var gH=(()=>{class n{constructor(){this.DotScreenShader=FM,this.RGBShiftShader=sS,this.shiftAmount=.0015,this.zDist=400,this.meshData=[],this.initMeshData()}ngOnInit(){this.light?.position?.set(1,1,1)}initMeshData(){for(let t=0;t<100;t++){let i=Math.random()*50;this.meshData.push({pos:new w(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize().multiplyScalar(Math.random()*this.zDist),rotation:new Jr(Math.random()*2,Math.random()*2,Math.random()*2),scale:new w(i,i,i),color:new he(16777215*Math.random())})}}animate(){this.object?.objRef?.rotation&&(this.object.objRef.rotation.x+=.005,this.object.objRef.rotation.y+=.01)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["app-post-processing-example"]],viewQuery:function(i,r){if(i&1&&(Gt(jce,7),Gt(Nce,7)),i&2){let o;ct(o=dt())&&(r.object=o.first),ct(o=dt())&&(r.light=o.first)}},standalone:!1,decls:20,vars:30,consts:[["thecanvas",""],["light",""],["geometry",""],["object",""],["for","shift"],["id","shift","type","range",3,"ngModelChange","ngModel","min","max","step"],[3,"onRender","shadow","thStats"],[3,"strength"],[3,"args","uniforms"],[3,"background"],[3,"position","fov","near","far"],[3,"color","intensity"],[3,"color"],[3,"args"],[3,"geometry","position","rotation","scale"],[3,"flatShading","color"]],template:function(i,r){if(i&1){let o=Xt();U(0,"label",4),It(1,"Shift Amount"),Q(),U(2,"input",5),Ih("ngModelChange",function(a){return ht(o),Em(r.shiftAmount,a)||(r.shiftAmount=a),ft(a)}),Q(),U(3,"th-canvas",6,0),De("onRender",function(){return ht(o),ft(r.animate())}),U(5,"th-effectComposer"),ae(6,"th-renderPass")(7,"th-unrealBloomPass",7)(8,"th-shaderPass",8),Q(),U(9,"th-scene",9),ae(10,"th-perspectiveCamera",10)(11,"th-ambientLight",11)(12,"th-directionalLight",12,1)(14,"th-sphereGeometry",13,2),U(16,"th-object3D",null,3),cr(18,Gce,2,6,"th-mesh",14,wr),Q()()()}i&2&&(k(2),Ah("ngModel",r.shiftAmount),O("min",.0015)("max",.2)("step",.005),k(),O("shadow",!0)("thStats",!0),k(4),O("strength",1),k(),O("args",vt(18,Lce,r.RGBShiftShader))("uniforms",vt(22,Uce,vt(20,Bce,r.shiftAmount))),k(),O("background",Z(24,mH)),k(),O("position",vt(25,Vce,r.zDist))("fov",70)("near",1)("far",1e3),k(),O("color",Z(27,zce))("intensity",6),k(),O("color",Z(28,mH)),k(2),O("args",Z(29,Hce)),k(4),dr(r.meshData))},dependencies:[Zt,ue,Ii,mr,Ci,Lt,Mo,nd,$a,Pp,wb,tS,Dt,On,hS,BI,fS,zb],styles:["label[_ngcontent-%COMP%]{margin-right:.5em}"],changeDetection:0})}}return n})();var XI=n=>[0,n,0],Wce=()=>[0,1,0],$ce=()=>[4,10,2],qce=n=>[n,0,0],Xce=()=>[100,100],Yce=()=>[55,2,.1,100],Zce=(n,e)=>[n,0,e],Qce=()=>[0,0,0],_H=(()=>{class n{constructor(t){this.Math=Math,this.selected=!1,this.glbPath=`${pn}mac-draco.glb`,this.clock=new eo(!0),this.plane=new ir(new w(0,1,0),3),this.rotation=[0,0,0],this.position=[0,0,0],this.uniforms={time:{value:1}},this.fragmentShader1=`
uniform float time;
varying vec2 vUv;

void main( void ) {
  vec2 position = - 1.0 + 2.0 * vUv;

  float red = abs( sin( position.x * position.y + time / 5.0 ) );
  float green = abs( sin( position.x * position.y + time / 4.0 ) );
  float blue = abs( sin( position.x * position.y + time / 3.0 ) );
  gl_FragColor = vec4( red, green, blue, 1.0 );

}
`,this.fragmentShader2=`
  uniform float time;
  varying vec2 vUv;

  void main( void ) {
    vec2 position = vUv;
    float color = 0.0;
    color += sin( position.x * cos( time / 15.0 ) * 80.0 ) + cos( position.y * cos( time / 15.0 ) * 10.0 );
    color += sin( position.y * sin( time / 10.0 ) * 40.0 ) + cos( position.x * sin( time / 25.0 ) * 40.0 );
    color += sin( position.x * sin( time / 5.0 ) * 10.0 ) + sin( position.y * sin( time / 35.0 ) * 80.0 );
    color *= sin( time / 10.0 ) * 0.5;
    gl_FragColor = vec4( vec3( color, color * 0.5, sin( color + time / 3.0 ) * 0.75 ), 1.0 );
  }
  `,this.vertexShader=`varying vec2 vUv;
  void main() {
    vUv = uv;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;
  }
  `,t.setDecoderPath("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/jsm/libs/draco/gltf/"),t.setCrossOrigin("no-cors"),this.calcPose()}onBeforeRender(){this.calcPose(),this.calcUniforms()}calcPose(){let t=this.clock.getElapsedTime();this.rotation=[it.lerp(this.rotation[0],Math.cos(t/2)/20+.25,.1),it.lerp(this.rotation[1],Math.sin(t/4)/20,.1),it.lerp(this.rotation[2],Math.sin(t/8)/20,.1)],this.position=[0,it.lerp(this.position[1],(-2+Math.sin(t/2))/2,.1),0]}calcUniforms(){this.uniforms.time.value=1+this.clock.getElapsedTime()*5}static{this.\u0275fac=function(i){return new(i||n)(be(qc))}}static{this.\u0275cmp=j({type:n,selectors:[["app-ref-by-id-example"]],standalone:!1,decls:17,vars:45,consts:[["shader",""],["light",""],[3,"onRender","thStats","shadow"],[3,"rotation","position"],["loadGLTF","",3,"onClick","castShadow","url","position","rotation"],[3,"refById"],[3,"vertexShader","fragmentShader","uniforms"],[3,"castShadow","position","lookAt","color","intensity"],[3,"receiveShadow","rotation","position"],[3,"args"],[3,"color"],[3,"args","position","lookAt"]],template:function(i,r){if(i&1){let o=Xt();U(0,"th-canvas",2),De("onRender",function(){return ht(o),ft(r.onBeforeRender())}),U(1,"th-scene"),ae(2,"th-ambientLight"),U(3,"th-group",3)(4,"th-object3D",4),De("onClick",function(){ht(o);let a=At(7);return r.selected=!r.selected,ft(a.uniformsNeedUpdate=!0)}),U(5,"th-mesh",5),ae(6,"th-shaderMaterial",6,0),Q()()(),ae(8,"th-directionalLight",7,1),Bi(10,"color"),U(11,"th-mesh",8),ae(12,"th-planeGeometry",9)(13,"th-meshBasicMaterial",10),Bi(14,"color"),Q(),U(15,"th-perspectiveCamera",11),ae(16,"th-orbitControls"),Q()()()}i&2&&(O("thStats",!0)("shadow",!0),k(3),O("rotation",vt(29,XI,r.Math.PI))("position",Z(31,Wce)),k(),O("castShadow",!0)("url",r.glbPath)("position",r.position)("rotation",r.rotation),k(),O("refById","Cube008_2"),k(),O("vertexShader",r.vertexShader)("fragmentShader",r.selected?r.fragmentShader1:r.fragmentShader2)("uniforms",r.uniforms),k(2),O("castShadow",!0)("position",Z(32,$ce))("lookAt",vt(33,XI,-3))("color",Yi(10,25,"#ffffff"))("intensity",.75),k(3),O("receiveShadow",!0)("rotation",vt(35,qce,3*r.Math.PI/2))("position",vt(37,XI,-3)),k(),O("args",Z(39,Xce)),k(),O("color",Yi(14,27,"#efefef")),k(2),O("args",Z(40,Yce))("position",zn(41,Zce,-5,-15))("lookAt",Z(44,Qce)))},dependencies:[jn,Zt,ue,Ii,mr,id,Ci,Lt,za,lI,bs,Dt,Yn,ys,On,Fp,Qa],encapsulation:2,changeDetection:0})}}return n})();var YI=()=>[0,0,0],Kce=()=>[2,2,2],Jce=()=>[1,1,1],ede=(n,e)=>[n,e],tde=()=>[10,10],bH=()=>[10,10,10],ide=()=>[45,2,.1,100],nde=(()=>{class n extends Ci{constructor(t){super(t)}ngOnInit(){super.ngOnInit(),this.objRef&&(this.objRef.material=new Rr({color:"green"}),this.objRef.geometry=new Qi(1,1,1))}static{this.\u0275fac=function(i){return new(i||n)(be(ue,4))}}static{this.\u0275cmp=j({type:n,selectors:[["th-box"]],standalone:!1,features:[J(Cz(n)),q],decls:0,vars:0,template:function(i,r){},encapsulation:2,changeDetection:0})}}return n})(),vH=(()=>{class n{constructor(){this.THREE=zc,this.box=new vn(new w(0,0,0),new w(1.5,1.5,1.5)),this.color=new he(1,0,0),this.rotation=[0,0,0],this.material=new Rr,this.selected=!1,this.material.color.set("green"),setInterval(()=>{this.material.color.r!==0?(this.material=new Rr,this.material.color.set("green")):(this.material=new Rr,this.material.color.set("red"))},400)}onBeforeRender(){this.rotation=[0,this.rotation[2]+.01,this.rotation[2]+.01]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["app-simple-example"]],standalone:!1,features:[J([Wc()])],decls:8,vars:27,consts:[[3,"onRender"],[3,"intensity"],[3,"position","material","rotation","scale"],[3,"onClick","args","material","position"],[3,"args"],[3,"position","intensity","decay"],[3,"args","position","lookAt"]],template:function(i,r){i&1&&(U(0,"th-canvas",0),De("onRender",function(){return r.onBeforeRender()}),U(1,"th-scene"),ae(2,"th-ambientLight",1)(3,"th-box",2),U(4,"th-box3Helper",3),De("onClick",function(){return r.selected=!r.selected}),Q(),ae(5,"th-gridHelper",4)(6,"th-pointLight",5)(7,"th-perspectiveCamera",6),Q()()),i&2&&(k(2),O("intensity",3),k(),O("position",Z(15,YI))("material",r.material)("rotation",r.rotation)("scale",r.selected?Z(16,Kce):Z(17,Jce)),k(),O("args",zn(18,ede,r.box,r.color))("material",r.material)("position",Z(21,YI)),k(),O("args",Z(22,tde)),k(),O("position",Z(23,bH))("intensity",3)("decay",0),k(),O("args",Z(24,ide))("position",Z(25,bH))("lookAt",Z(26,YI)))},dependencies:[Zt,PV,Vr,Ii,gr,Lt,Dt,ys,nde],encapsulation:2,changeDetection:0})}}return n})();var rde=["thecanvas"],ode=(n,e)=>({x:0,y:0,width:n,height:e}),sde=()=>[0,0,1],ade=()=>["#ffffff"],lde=()=>[0,0,0],gS=n=>[n,0,0],cde=()=>[200,32,16],dde=()=>["#fac400"],ude=()=>["#f83f0d"],hde=()=>[400,0,0],fde=(n,e,t,i)=>({x:n,y:e,width:t,height:i});function pde(n,e){if(n&1){let t=Xt();U(0,"th-view",13,4),De("onRender",function(){let r=ht(t).$implicit,o=At(3);Ht();let s=At(3);return ft(r.updateCamera(o.objRef,s.objRef))}),ae(2,"th-perspectiveCamera",14,5),Q()}if(n&2){let t=e.$implicit,i=At(1),r=Ht(),o=At(3);O("scene",o)("viewPort",Ph(11,fde,t.left*r.canvasWidth,t.bottom*r.canvasHeight,t.width*r.canvasWidth,t.height*r.canvasHeight))("scissor",i.viewPort)("scissorTest",!0)("clearColor",t.background),k(2),O("position",t.eye)("up",t.up)("fov",t.fov)("aspect",t.width*r.canvasWidth/(t.height*r.canvasHeight))("near",1)("far",1e4)}}var yH=(()=>{class n{constructor(){this.Math=Math,this.canvasWidth=128,this.canvasHeight=128,this.mouseX=0,this.mouseY=0,this.views=[{left:0,bottom:0,width:.5,height:1,background:new he(.5,.5,.7),eye:[0,300,1800],up:[0,1,0],fov:30,updateCamera:(t,i)=>{this.updateSize(),t.position.x+=this.mouseX*.05,t.position.x=Math.max(Math.min(t.position.x,2e3),-2e3),t.lookAt(i.position),t.updateProjectionMatrix()}},{left:.5,bottom:0,width:.5,height:.5,background:new he(.7,.5,.5),eye:[0,1800,0],up:[0,0,1],fov:45,updateCamera:(t,i)=>{this.updateSize(),t.position.x-=this.mouseX*.05,t.position.x=Math.max(Math.min(t.position.x,2e3),-2e3),t.lookAt(t.position.clone().setY(0)),t.updateProjectionMatrix()}},{left:.5,bottom:.5,width:.5,height:.5,background:new he(.5,.7,.7),eye:[1400,800,1400],up:[0,1,0],fov:60,updateCamera:(t,i)=>{this.updateSize(),t.position.y-=this.mouseX*.05,t.position.y=Math.max(Math.min(t.position.y,1600),-1600),t.lookAt(i.position),t.updateProjectionMatrix()}}]}ngOnInit(){!this.canvas||!this.canvas.rendererCanvas||(this.shadowTexture=new kc(this.canvas.rendererCanvas))}updateSize(){!this.canvas||!this.canvas.rendererCanvas||(this.canvasWidth=this.canvas.rendererCanvas.width,this.canvasHeight=this.canvas.rendererCanvas.height)}onMouseMove(t){if(!this.canvas||!this.canvas.rendererCanvas)return;let i=this.canvas.rendererCanvas.getBoundingClientRect();this.mouseX=t.clientX-i.left-i.width/2,this.mouseY=t.clientY-i.right-i.height/2}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["app-views-example"]],viewQuery:function(i,r){if(i&1&&Gt(rde,7),i&2){let o;ct(o=dt())&&(r.canvas=o.first)}},hostBindings:function(i,r){i&1&&De("mousemove",function(s){return r.onMouseMove(s)},!1,Eh)},standalone:!1,decls:14,vars:38,consts:[["thecanvas",""],["scene",""],["geo",""],["mat",""],["thview",""],["camera",""],[3,"disableDefaultView","viewPort"],[3,"position","args","intensity"],[3,"position","rotation"],[3,"args"],[3,"flatShading","shininess","specular","color"],[3,"position","rotation","geometry","material"],[3,"scene","viewPort","scissor","scissorTest","clearColor"],[3,"onRender","scene","viewPort","scissor","scissorTest","clearColor"],[3,"position","up","fov","aspect","near","far"]],template:function(i,r){if(i&1&&(U(0,"th-canvas",6,0)(2,"th-scene",null,1),ae(4,"th-directionalLight",7),U(5,"th-mesh",8),ae(6,"th-sphereGeometry",9,2)(8,"th-meshPhongMaterial",10,3),Q(),ae(10,"th-mesh",11)(11,"th-mesh",11),Q(),cr(12,pde,4,16,"th-view",12,wr),Q()),i&2){let o=At(7),s=At(9);O("disableDefaultView",!0)("viewPort",zn(20,ode,.5*r.canvasWidth,r.canvasHeight)),k(4),O("position",Z(23,sde))("args",Z(24,ade))("intensity",3),k(),O("position",Z(25,lde))("rotation",vt(26,gS,-r.Math.PI/2)),k(),O("args",Z(28,cde)),k(2),O("flatShading",!1)("shininess",30)("specular",Z(29,dde))("color",Z(30,ude)),k(2),O("position",vt(31,gS,-400))("rotation",vt(33,gS,-r.Math.PI/2))("geometry",o.objRef)("material",s.objRef),k(),O("position",Z(35,hde))("rotation",vt(36,gS,-r.Math.PI/2))("geometry",o.objRef)("material",s.objRef),k(),dr(r.views)}},dependencies:[Zt,mr,Ci,Lt,Mo,nd,Dt,zr],encapsulation:2,changeDetection:0})}}return n})();var mde=()=>[0,1,0],gde=()=>[0,0,.2],_de=()=>[0,0],bde=()=>[10,10],xH=()=>[10,10,10],vde=()=>[45,2,.1,100],yde=()=>[0,0,0],wH=(()=>{class n{constructor(){this.assetPath1=`${pn}DamagedHelmet.glb`,this.assetPath2=`${pn}BoomBox.glb`,this.rotation=[0,0,0]}onBeforeRender(){this.rotation=[0,this.rotation[1]+.01,0]}resetRotation(){this.rotation=[0,0,0]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["app-multi-renderer-example"]],standalone:!1,features:[J([Wc(),qU()])],decls:13,vars:21,consts:[[3,"onRender"],[3,"thStats"],[3,"intensity"],["loadGLTF","",3,"url","rotation","position"],[3,"position","center"],[1,"label"],[3,"pointerdown"],[3,"args"],[3,"position","decay"],[3,"args","position","lookAt"]],template:function(i,r){i&1&&(U(0,"th-canvas",0),De("onRender",function(){return r.onBeforeRender()}),U(1,"th-scene",1),ae(2,"th-ambientLight",2),U(3,"th-object3D",3)(4,"th-cSS2DObject",4)(5,"div",5),It(6," A Helmet "),U(7,"button",6),De("pointerdown",function(){return r.resetRotation()}),It(8,"Reset"),Q()()()(),ae(9,"th-gridHelper",7)(10,"th-pointLight",8),U(11,"th-perspectiveCamera",9),ae(12,"th-orbitControls"),Q()()()),i&2&&(k(),O("thStats",!0),k(),O("intensity",3),k(),O("url",r.assetPath1)("rotation",r.rotation)("position",Z(13,mde)),k(),O("position",Z(14,gde))("center",Z(15,_de)),k(5),O("args",Z(16,bde)),k(),O("position",Z(17,xH))("decay",0),k(),O("args",Z(18,vde))("position",Z(19,xH))("lookAt",Z(20,yde)))},dependencies:[jn,Zt,ue,Vr,Ii,gr,Lt,yz,Dt,Yn,On],styles:[".label{background-color:#d3d3d3;border-radius:5px;line-height:1rem;padding:.5rem;display:inline-block}"],changeDetection:0})}}return n})();var xde=()=>[10,10,10],wde=()=>[45,2,1,1e4],Mde=()=>[0,0,3e3],Sde=()=>[0,0,0];function Tde(n,e){if(n&1&&(U(0,"th-cSS3DObject",8)(1,"div",12)(2,"div",13),It(3),Q(),U(4,"div",14),It(5),Q(),U(6,"div",15),It(7),ae(8,"br"),It(9),Q()()()),n&2){let t=e.$implicit,i=e.$index,r=Ht();O("position",r.poses[i].position),k(),os("background","rgba(0,127,127,"+(r.Math.random()*.5+.25)+")"),k(2),va(" ",i+1," "),k(2),va(" ",t[0]," "),k(2),va(" ",t[1]," "),k(2),va(" ",t[2]," ")}}var MH=(()=>{class n{constructor(){this.Math=Math,this.table=[["H","Hydrogen","1.00794",1,1],["He","Helium","4.002602",18,1],["Li","Lithium","6.941",1,2],["Be","Beryllium","9.012182",2,2],["B","Boron","10.811",13,2],["C","Carbon","12.0107",14,2],["N","Nitrogen","14.0067",15,2],["O","Oxygen","15.9994",16,2],["F","Fluorine","18.9984032",17,2],["Ne","Neon","20.1797",18,2],["Na","Sodium","22.98976...",1,3],["Mg","Magnesium","24.305",2,3],["Al","Aluminium","26.9815386",13,3],["Si","Silicon","28.0855",14,3],["P","Phosphorus","30.973762",15,3],["S","Sulfur","32.065",16,3],["Cl","Chlorine","35.453",17,3],["Ar","Argon","39.948",18,3],["K","Potassium","39.948",1,4],["Ca","Calcium","40.078",2,4],["Sc","Scandium","44.955912",3,4],["Ti","Titanium","47.867",4,4],["V","Vanadium","50.9415",5,4],["Cr","Chromium","51.9961",6,4],["Mn","Manganese","54.938045",7,4],["Fe","Iron","55.845",8,4],["Co","Cobalt","58.933195",9,4],["Ni","Nickel","58.6934",10,4],["Cu","Copper","63.546",11,4],["Zn","Zinc","65.38",12,4],["Ga","Gallium","69.723",13,4],["Ge","Germanium","72.63",14,4],["As","Arsenic","74.9216",15,4],["Se","Selenium","78.96",16,4],["Br","Bromine","79.904",17,4],["Kr","Krypton","83.798",18,4],["Rb","Rubidium","85.4678",1,5],["Sr","Strontium","87.62",2,5],["Y","Yttrium","88.90585",3,5],["Zr","Zirconium","91.224",4,5],["Nb","Niobium","92.90628",5,5],["Mo","Molybdenum","95.96",6,5],["Tc","Technetium","(98)",7,5],["Ru","Ruthenium","101.07",8,5],["Rh","Rhodium","102.9055",9,5],["Pd","Palladium","106.42",10,5],["Ag","Silver","107.8682",11,5],["Cd","Cadmium","112.411",12,5],["In","Indium","114.818",13,5],["Sn","Tin","118.71",14,5],["Sb","Antimony","121.76",15,5],["Te","Tellurium","127.6",16,5],["I","Iodine","126.90447",17,5],["Xe","Xenon","131.293",18,5],["Cs","Caesium","132.9054",1,6],["Ba","Barium","132.9054",2,6],["La","Lanthanum","138.90547",4,9],["Ce","Cerium","140.116",5,9],["Pr","Praseodymium","140.90765",6,9],["Nd","Neodymium","144.242",7,9],["Pm","Promethium","(145)",8,9],["Sm","Samarium","150.36",9,9],["Eu","Europium","151.964",10,9],["Gd","Gadolinium","157.25",11,9],["Tb","Terbium","158.92535",12,9],["Dy","Dysprosium","162.5",13,9],["Ho","Holmium","164.93032",14,9],["Er","Erbium","167.259",15,9],["Tm","Thulium","168.93421",16,9],["Yb","Ytterbium","173.054",17,9],["Lu","Lutetium","174.9668",18,9],["Hf","Hafnium","178.49",4,6],["Ta","Tantalum","180.94788",5,6],["W","Tungsten","183.84",6,6],["Re","Rhenium","186.207",7,6],["Os","Osmium","190.23",8,6],["Ir","Iridium","192.217",9,6],["Pt","Platinum","195.084",10,6],["Au","Gold","196.966569",11,6],["Hg","Mercury","200.59",12,6],["Tl","Thallium","204.3833",13,6],["Pb","Lead","207.2",14,6],["Bi","Bismuth","208.9804",15,6],["Po","Polonium","(209)",16,6],["At","Astatine","(210)",17,6],["Rn","Radon","(222)",18,6],["Fr","Francium","(223)",1,7],["Ra","Radium","(226)",2,7],["Ac","Actinium","(227)",4,10],["Th","Thorium","232.03806",5,10],["Pa","Protactinium","231.0588",6,10],["U","Uranium","238.02891",7,10],["Np","Neptunium","(237)",8,10],["Pu","Plutonium","(244)",9,10],["Am","Americium","(243)",10,10],["Cm","Curium","(247)",11,10],["Bk","Berkelium","(247)",12,10],["Cf","Californium","(251)",13,10],["Es","Einstenium","(252)",14,10],["Fm","Fermium","(257)",15,10],["Md","Mendelevium","(258)",16,10],["No","Nobelium","(259)",17,10],["Lr","Lawrencium","(262)",18,10],["Rf","Rutherfordium","(267)",4,7],["Db","Dubnium","(268)",5,7],["Sg","Seaborgium","(271)",6,7],["Bh","Bohrium","(272)",7,7],["Hs","Hassium","(270)",8,7],["Mt","Meitnerium","(276)",9,7],["Ds","Darmstadium","(281)",10,7],["Rg","Roentgenium","(280)",11,7],["Cn","Copernicium","(285)",12,7],["Nh","Nihonium","(286)",13,7],["Fl","Flerovium","(289)",14,7],["Mc","Moscovium","(290)",15,7],["Lv","Livermorium","(293)",16,7],["Ts","Tennessine","(294)",17,7],["Og","Oganesson","(294)",18,7]],this.poses=[],this.createRandomPoses()}createRandomPoses(){this.poses=[];for(let t=0;t<this.table.length;t++){let i=new xt;i.position.set(Math.random()*4e3-2e3,Math.random()*4e3-2e3,Math.random()*4e3-2e3),this.poses.push(i)}}createTablePoses(){this.poses=this.table.map(t=>{let i=new xt;return i.position.x=t[3]*140-1330,i.position.y=-(t[4]*180)+990,i})}createSpherePoses(){let t=new w,i=this.table.length;this.poses=this.table.map((r,o)=>{let s=Math.acos(-1+2*o/i),a=Math.sqrt(i*Math.PI)*s,l=new xt;return l.position.setFromSphericalCoords(800,s,a),t.copy(l.position).multiplyScalar(2),l.lookAt(t),l})}createHelixPoses(){let t=new w;this.poses=this.table.map((i,r)=>{let o=r*.175+Math.PI,s=-(r*8)+450,a=new xt;return a.position.setFromCylindricalCoords(900,o,s),t.x=a.position.x*2,t.y=a.position.y,t.z=a.position.z*2,a.lookAt(t),a})}createGridPoses(){this.poses=this.table.map((t,i)=>{let r=new xt;return r.position.x=i%5*400-800,r.position.y=-(Math.floor(i/5)%5)*400+800,r.position.z=Math.floor(i/25)*1e3-2e3,r})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["app-css3d-multi-renderer-example"]],standalone:!1,features:[J([Zw()])],decls:17,vars:14,consts:[["id","menu"],["id","table",3,"click"],["id","sphere",3,"click"],["id","helix",3,"click"],["id","grid",3,"click"],[1,"canvas-background",3,"renderOnDemand"],[3,"thStats"],[3,"intensity"],[3,"position"],[3,"position","intensity"],[3,"args","position","lookAt"],[3,"minDistance","maxDistance"],[1,"element"],[1,"number"],[1,"symbol"],[1,"details"]],template:function(i,r){i&1&&(U(0,"div",0)(1,"button",1),De("click",function(){return r.createTablePoses()}),It(2,"TABLE"),Q(),U(3,"button",2),De("click",function(){return r.createSpherePoses()}),It(4,"SPHERE"),Q(),U(5,"button",3),De("click",function(){return r.createHelixPoses()}),It(6,"HELIX"),Q(),U(7,"button",4),De("click",function(){return r.createGridPoses()}),It(8,"GRID"),Q()(),U(9,"th-canvas",5)(10,"th-scene",6),ae(11,"th-ambientLight",7),cr(12,Tde,10,7,"th-cSS3DObject",8,wr),ae(14,"th-pointLight",9),U(15,"th-perspectiveCamera",10),ae(16,"th-trackballControls",11),Q()()()),i&2&&(k(9),O("renderOnDemand",!0),k(),O("thStats",!0),k(),O("intensity",3),k(),dr(r.table),k(2),O("position",Z(10,xde))("intensity",3),k(),O("args",Z(11,wde))("position",Z(12,Mde))("lookAt",Z(13,Sde)),k(),O("minDistance",500)("maxDistance",6e3))},dependencies:[ZM,Zt,Ii,gr,Lt,iS,Dt,Xc,On],styles:[".canvas-background[_ngcontent-%COMP%]{background-color:#000}a[_ngcontent-%COMP%]{color:#8ff}#menu[_ngcontent-%COMP%]{position:absolute;bottom:20px;width:100%;text-align:center;z-index:10}.element[_ngcontent-%COMP%]{width:120px;height:160px;box-shadow:0 0 12px #00ffff80;border:1px solid rgba(127,255,255,.25);font-family:Helvetica,sans-serif;text-align:center;line-height:normal;cursor:default}.element[_ngcontent-%COMP%]:hover{box-shadow:0 0 12px #00ffffbf;border:1px solid rgba(127,255,255,.75)}.element[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;font-size:12px;color:#7fffffbf}.element[_ngcontent-%COMP%]   .symbol[_ngcontent-%COMP%]{position:absolute;top:40px;left:0;right:0;font-size:60px;font-weight:700;color:#ffffffbf;text-shadow:0 0 10px rgba(0,255,255,.95)}.element[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:0;right:0;font-size:12px;color:#7fffffbf}button[_ngcontent-%COMP%]{color:#7fffffbf;background:transparent;outline:1px solid rgba(127,255,255,.75);border:0px;padding:5px 10px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#00ffff80}button[_ngcontent-%COMP%]:active{color:#000;background-color:#00ffffbf}"],changeDetection:0})}}return n})();var ZI=n=>[0,n,0],Rde=()=>[0,1,0],SH=n=>[n,0,0],Cde=n=>[0,.04,n],Ede=()=>[.0043,.0043,.0043],Dde=()=>[1960,1280],Ade=()=>[4,10,2],Ide=()=>[100,100],Pde=()=>[55,2,.1,100],Fde=(n,e)=>[n,0,e],kde=()=>[0,0,0],TH=(()=>{class n{constructor(t){this.THREE=zc,this.Math=Math,this.sprite=!1,this.glbPath=`${pn}mac-draco.glb`,this.clock=new eo(!0),this.rotation=[0,0,0],this.position=[0,0,0],this.webGlRenderer=E(Au),t.setDecoderPath("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/jsm/libs/draco/gltf/"),t.setCrossOrigin("no-cors"),this.webGlRenderer.domElement.style.pointerEvents="none",this.webGlRenderer.domElement.style.zIndex="1",this.calcPose()}onBeforeRender(){this.calcPose()}calcPose(){let t=this.clock.getElapsedTime();this.rotation=[it.lerp(this.rotation[0],Math.cos(t/2)/20+.25,.1),it.lerp(this.rotation[1],Math.sin(t/4)/20,.1),it.lerp(this.rotation[2],Math.sin(t/8)/20,.1)],this.position=[0,it.lerp(this.position[1],(-2+Math.sin(t/2))/2,.1),0]}static{this.\u0275fac=function(i){return new(i||n)(be(qc))}}static{this.\u0275cmp=j({type:n,selectors:[["app-html-with-css3d-example"]],standalone:!1,features:[J([Wc(),Zw()])],decls:23,vars:59,consts:[["holder",""],["light",""],[3,"onRender","thStats","shadow"],[3,"intensity"],[3,"rotation","position"],["loadGLTF","",3,"castShadow","url","position","rotation"],[3,"refById"],[3,"rotation","position","scale"],[3,"args"],[3,"opacity","blending","side","color"],["src",Hy`./multi-view-postprocessing-example`,2,"width","1960px","height","1280px"],[3,"castShadow","position","lookAt","color","intensity"],[3,"receiveShadow","rotation","position"],[3,"color"],[3,"args","position","lookAt"]],template:function(i,r){if(i&1){let o=Xt();U(0,"th-canvas",2),De("onRender",function(){return ht(o),ft(r.onBeforeRender())}),U(1,"th-scene"),ae(2,"th-ambientLight",3),U(3,"th-group",4)(4,"th-object3D",5)(5,"th-mesh",6)(6,"th-group",7,0)(8,"th-mesh"),ae(9,"th-planeGeometry",8)(10,"th-meshBasicMaterial",9),Bi(11,"color"),Q(),U(12,"th-cSS3DObject"),ae(13,"iframe",10),Q()()()()(),ae(14,"th-directionalLight",11,1),Bi(16,"color"),U(17,"th-mesh",12),ae(18,"th-planeGeometry",8)(19,"th-meshBasicMaterial",13),Bi(20,"color"),Q(),U(21,"th-perspectiveCamera",14),ae(22,"th-orbitControls"),Q()()()}i&2&&(O("thStats",!0)("shadow",!0),k(2),O("intensity",3),k(),O("rotation",vt(37,ZI,r.Math.PI))("position",Z(39,Rde)),k(),O("castShadow",!0)("url",r.glbPath)("position",r.position)("rotation",r.rotation),k(),O("refById","Cube008_2"),k(),O("rotation",vt(40,SH,-1*r.Math.PI/2))("position",vt(42,Cde,-.02))("scale",Z(44,Ede)),k(3),O("args",Z(45,Dde)),k(),O("opacity",0)("blending",r.THREE.NoBlending)("side",r.THREE.DoubleSide)("color",Yi(11,31,"black")),k(4),O("castShadow",!0)("position",Z(46,Ade))("lookAt",vt(47,ZI,-3))("color",Yi(16,33,"#ffffff"))("intensity",2.2),k(3),O("receiveShadow",!0)("rotation",vt(49,SH,3*r.Math.PI/2))("position",vt(51,ZI,-3)),k(),O("args",Z(53,Ide)),k(),O("color",Yi(20,35,"#efefef")),k(2),O("args",Z(54,Pde))("position",zn(55,Fde,-5,-15))("lookAt",Z(58,kde)))},dependencies:[jn,Zt,ue,Ii,mr,id,Ci,Lt,iS,za,bs,Dt,Yn,On,Fp,Qa],encapsulation:2,changeDetection:0})}}return n})();var Wb=[{path:"basic-example",data:{title:"Basic Example",exampleComponent:r3,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/basic-example/basic-example.component.ts"]}},{path:"simple-example",data:{title:"Simple Example",exampleComponent:vH,declarations:["SimpleExampleComponent","Box"],codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/simple-example/simple-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/simple-example/simple-example.component.ts"]}},{path:"introductory-example",data:{title:"Introductory Example",exampleComponent:Fz,declarations:["IntroductoryExampleComponent","Box"],codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/introductory-example/introductory-example.component.ts"]}},{path:"controls-example",data:{title:"Controls Example",exampleComponent:c3,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/controls-example/controls-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/controls-example/controls-example.component.ts"]}},{path:"loader-example",data:{title:"Loader Example",exampleComponent:Oz,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/loader-example/loader-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/loader-example/loader-example.component.ts"]}},{path:"dynamic loader-example",data:{title:"Dynamic Loader Example",exampleComponent:u3,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/dynamic-loader-example/dynamic-loader-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/dynamic-loader-example/dynamic-loader-example.component.ts"]}},{path:"events-example",data:{title:"Events Example",exampleComponent:p3,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/events-example/events-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/events-example/events-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/events-example/events-example.component.scss"]}},{path:"instanced-mesh-example",data:{title:"Instanced Mesh Example",exampleComponent:Pz,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/instanced-mesh-example/instanced-mesh-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/instanced-mesh-example/instanced-mesh-example.component.ts"]}},{path:"post-processing-example",data:{title:"Post Processing Example",exampleComponent:gH,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/post-processing-example/post-processing-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/post-processing-example/post-processing-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/post-processing-example/post-processing-example.component.scss"]}},{path:"views-example",data:{title:"Multiple Views Example",exampleComponent:yH,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/views-example/views-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/views-example/views-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/views-example/views-example.component.scss"]}},{path:"multi-scene-example",data:{title:"Multiple Scenes Example",codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-scene-example/multi-scene-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-scene-example/multi-scene-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-scene-example/multi-scene-example.component.scss"],exampleComponent:jz}},{path:"multi-view-postprocessing-example",data:{title:"Multiple View Post Processing Example",exampleComponent:Nz,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-view-postprocessing-example/multi-view-postprocessing-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-view-postprocessing-example/multi-view-postprocessing-example.component.ts"]}},{path:"animation-example",data:{title:"Animation Example",exampleComponent:n3,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/animation-example/animation-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/animation-example/animation-example.component.ts"]}},{path:"plyloader-example",data:{title:"PLY Loader Example",exampleComponent:pH,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/plyloader-example/plyloader-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/plyloader-example/plyloader-example.component.ts"]}},{path:"on-demand-example",data:{title:"On-Demand Rendering Example",exampleComponent:cH,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/on-demand-example/on-demand-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/on-demand-example/on-demand-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/on-demand-example/on-demand-example.component.scss"]}},{path:"ref-by-id-example",data:{title:"Ref By Id Example",exampleComponent:_H,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/ref-by-id-example/ref-by-id-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/ref-by-id-example/ref-by-id-example.component.ts"]}},{path:"html-example",data:{title:"Html Content Example",exampleComponent:Dz,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-example/html-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-example/html-example.component.ts"]}},{path:"outline-pass-events-example",data:{title:"Render Pass + Events Example",exampleComponent:hH,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/outline-pass-events-example/outline-pass-events-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/outline-pass-events-example/outline-pass-events-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/outline-pass-events-example/outline-pass-events-example.component.scss"]}},{path:"multi-renderer-example",data:{title:"Multi Renderer Example: WebGL + CSS2D",exampleComponent:wH,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-renderer-example/multi-renderer-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-renderer-example/multi-renderer-example.component.ts"]}},{path:"css3d-renderer-example",data:{title:"CSS3D Renderer Example",exampleComponent:MH,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/css3d-renderer-example/css3d-renderer-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/css3d-renderer-example/css3d-renderer-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/css3d-renderer-example/css3d-renderer-example.component.scss"]}},{path:"html-with-css3d-example",data:{title:"Html with CSS3D Example",exampleComponent:TH,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-with-css3d-example/html-with-css3d-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-with-css3d-example/html-with-css3d-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-with-css3d-example/html-with-css3d-example.component.scss"]}}];Wb.forEach(n=>n.component=CV);var Ode=[];Wb.forEach(n=>{Ode.push(n.component)});var RH=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Ke({type:n})}static{this.\u0275inj=Qe({imports:[yE.forRoot(Wb),yE]})}}return n})();var CH=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({imports:[Ti,Ti]})}return n})();var Nde=["*"],Lde='.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mdc-list-list-item-container-color, transparent);border-radius:var(--mdc-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:"";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-leading-icon-size, 24px);height:var(--mdc-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size, 40px);height:var(--mdc-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mdc-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-trailing-icon-size, 24px);height:var(--mdc-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mdc-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mdc-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mdc-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mdc-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mdc-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mdc-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mdc-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mdc-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mdc-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mdc-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mdc-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}',Bde=["unscopedContent"],Ude=["text"],Vde=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],zde=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var Hde=new ye("ListOption"),Gde=(()=>{class n{_elementRef=E(_t);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]})}return n})(),Wde=(()=>{class n{_elementRef=E(_t);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]})}return n})(),$de=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]})}return n})(),EH=(()=>{class n{_listOption=E(Hde,{optional:!0});constructor(){}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,hostVars:4,hostBindings:function(i,r){i&2&&Vt("mdc-list-item__start",r._isAlignedAtStart())("mdc-list-item__end",!r._isAlignedAtStart())}})}return n})(),qde=(()=>{class n extends EH{static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275dir=Ue({type:n,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[q]})}return n})(),Xde=(()=>{class n extends EH{static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275dir=Ue({type:n,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[q]})}return n})(),Yde=new ye("MAT_LIST_CONFIG"),QI=(()=>{class n{_isNonInteractive=!0;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Wo(t)}_disableRipple=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=Wo(t)}_disabled=!1;_defaultOptions=E(Yde,{optional:!0});static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,hostVars:1,hostBindings:function(i,r){i&2&&Li("aria-disabled",r.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}})}return n})(),Zde=(()=>{class n{_elementRef=E(_t);_ngZone=E(nt);_listBase=E(QI,{optional:!0});_platform=E(en);_hostElement;_isButtonElement;_noopAnimations;_avatars;_icons;set lines(t){this._explicitLines=Zc(t,null),this._updateItemLines(!1)}_explicitLines=null;get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(t){this._disableRipple=Wo(t)}_disableRipple=!1;get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(t){this._disabled=Wo(t)}_disabled=!1;_subscriptions=new bi;_rippleRenderer=null;_hasUnscopedTextContent=!1;rippleConfig;get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(){E(Go).load(ju);let t=E(Sp,{optional:!0}),i=E(xr,{optional:!0});this.rippleConfig=t||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._noopAnimations=i==="NoopAnimations",this._listBase&&!this._listBase._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new Mp(this,this._ngZone,this._hostElement,this._platform,E(yi)),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(Ds(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(t){if(!this._lines||!this._titles||!this._unscopedContent)return;t&&this._checkDomForUnscopedTextContent();let i=this._explicitLines??this._inferLinesFromContent(),r=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",i===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",i===3),this._hasUnscopedTextContent){let o=this._titles.length===0&&i===1;r.classList.toggle("mdc-list-item__primary-text",o),r.classList.toggle("mdc-list-item__secondary-text",!o)}else r.classList.remove("mdc-list-item__primary-text"),r.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let t=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(t+=1),t}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(t=>t.nodeType!==t.COMMENT_NODE).some(t=>!!(t.textContent&&t.textContent.trim()))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,contentQueries:function(i,r,o){if(i&1&&(nn(o,qde,4),nn(o,Xde,4)),i&2){let s;ct(s=dt())&&(r._avatars=s),ct(s=dt())&&(r._icons=s)}},hostVars:4,hostBindings:function(i,r){i&2&&(Li("aria-disabled",r.disabled)("disabled",r._isButtonElement&&r.disabled||null),Vt("mdc-list-item--disabled",r.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}})}return n})();var DH=(()=>{class n extends Zde{_lines;_titles;_meta;_unscopedContent;_itemText;get activated(){return this._activated}set activated(t){this._activated=Wo(t)}_activated=!1;_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}_hasBothLeadingAndTrailing(){return this._meta.length!==0&&(this._avatars.length!==0||this._icons.length!==0)}static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275cmp=j({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(i,r,o){if(i&1&&(nn(o,Wde,5),nn(o,Gde,5),nn(o,$de,5)),i&2){let s;ct(s=dt())&&(r._lines=s),ct(s=dt())&&(r._titles=s),ct(s=dt())&&(r._meta=s)}},viewQuery:function(i,r){if(i&1&&(Gt(Bde,5),Gt(Ude,5)),i&2){let o;ct(o=dt())&&(r._unscopedContent=o.first),ct(o=dt())&&(r._itemText=o.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:13,hostBindings:function(i,r){i&2&&(Li("aria-current",r._getAriaCurrent()),Vt("mdc-list-item--activated",r.activated)("mdc-list-item--with-leading-avatar",r._avatars.length!==0)("mdc-list-item--with-leading-icon",r._icons.length!==0)("mdc-list-item--with-trailing-meta",r._meta.length!==0)("mat-mdc-list-item-both-leading-and-trailing",r._hasBothLeadingAndTrailing())("_mat-animation-noopable",r._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[q],ngContentSelectors:zde,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-focus-indicator"]],template:function(i,r){if(i&1){let o=Xt();ie(Vde),Y(0),U(1,"span",1),Y(2,1),Y(3,2),U(4,"span",2,0),De("cdkObserveContent",function(){return ht(o),ft(r._updateItemLines(!0))}),Y(6,3),Q()(),Y(7,4),Y(8,5),ae(9,"div",3)}},dependencies:[cM],encapsulation:2,changeDetection:0})}return n})();var AH=(()=>{class n extends QI{_isNonInteractive=!1;static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275cmp=j({type:n,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-mdc-nav-list","mat-mdc-list-base","mdc-list"],exportAs:["matNavList"],features:[J([{provide:QI,useExisting:n}]),q],ngContentSelectors:Nde,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},styles:[Lde],encapsulation:2,changeDetection:0})}return n})();var $b=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({imports:[dM,Ti,Nu,LA,CH]})}return n})();var Kde=["*",[["mat-toolbar-row"]]],Jde=["*","mat-toolbar-row"],eue=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ue({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return n})(),IH=(()=>{class n{_elementRef=E(_t);_platform=E(en);_document=E(Pt);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=j({type:n,selectors:[["mat-toolbar"]],contentQueries:function(i,r,o){if(i&1&&nn(o,eue,5),i&2){let s;ct(s=dt())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(i,r){i&2&&(ss(r.color?"mat-"+r.color:""),Vt("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",r._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:Jde,decls:2,vars:0,template:function(i,r){i&1&&(ie(Kde),Y(0),Y(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}"],encapsulation:2,changeDetection:0})}return n})();var qb=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({imports:[Ti,Ti]})}return n})();var vS=["*"],nue=["content"],rue=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],oue=["mat-drawer","mat-drawer-content","*"];function sue(n,e){if(n&1){let t=Xt();U(0,"div",1),De("click",function(){ht(t);let r=Ht();return ft(r._onBackdropClicked())}),Q()}if(n&2){let t=Ht();Vt("mat-drawer-shown",t._isShowingBackdrop())}}function aue(n,e){n&1&&(U(0,"mat-drawer-content"),Y(1,2),Q())}var lue=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],cue=["mat-sidenav","mat-sidenav-content","*"];function due(n,e){if(n&1){let t=Xt();U(0,"div",1),De("click",function(){ht(t);let r=Ht();return ft(r._onBackdropClicked())}),Q()}if(n&2){let t=Ht();Vt("mat-drawer-shown",t._isShowingBackdrop())}}function uue(n,e){n&1&&(U(0,"mat-sidenav-content"),Y(1,2),Q())}var hue=".mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-sys-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-sys-background));box-sizing:border-box;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color, color-mix(in srgb, var(--mat-sys-neutral-variant20) 40%, transparent))}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}@media(forced-colors: active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-content.mat-drawer-content-hidden{opacity:0}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-sys-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow, none);background-color:var(--mat-sidenav-container-background-color, var(--mat-sys-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));width:var(--mat-sidenav-container-width, 360px);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}@media(forced-colors: active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media(forced-colors: active){[dir=rtl] .mat-drawer,.mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-transition .mat-drawer{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating){visibility:hidden;box-shadow:none}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating) .mat-drawer-inner-container{display:none}.mat-drawer.mat-drawer-opened.mat-drawer-opened{transform:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto}.mat-sidenav-fixed{position:fixed}";var fue=new ye("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:pue}),eP=new ye("MAT_DRAWER_CONTAINER");function pue(){return!1}var _S=(()=>{class n extends Kc{_platform=E(en);_changeDetectorRef=E(un);_container=E(JI);constructor(){let t=E(_t),i=E(gb),r=E(nt);super(t,i,r)}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}_shouldBeHidden(){if(this._platform.isBrowser)return!1;let{start:t,end:i}=this._container;return t!=null&&t.mode!=="over"&&t.opened||i!=null&&i.mode!=="over"&&i.opened}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=j({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:6,hostBindings:function(i,r){i&2&&(os("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px"),Vt("mat-drawer-content-hidden",r._shouldBeHidden()))},features:[J([{provide:Kc,useExisting:n}]),q],ngContentSelectors:vS,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}return n})(),KI=(()=>{class n{_elementRef=E(_t);_focusTrapFactory=E(N3);_focusMonitor=E(wp);_platform=E(en);_ngZone=E(nt);_renderer=E(lr);_interactivityChecker=E(IA);_doc=E(Pt,{optional:!0});_container=E(eP,{optional:!0});_focusTrap=null;_elementFocusedBeforeDrawerWasOpened=null;_eventCleanups;_isAttached;_anchor;get position(){return this._position}set position(t){t=t==="end"?"end":"start",t!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}_position="start";get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}_mode="over";get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=Wo(t)}_disableClose=!1;get autoFocus(){let t=this._autoFocus;return t??(this.mode==="side"?"dialog":"first-tabbable")}set autoFocus(t){(t==="true"||t==="false"||t==null)&&(t=Wo(t)),this._autoFocus=t}_autoFocus;get opened(){return this._opened}set opened(t){this.toggle(Wo(t))}_opened=!1;_openedVia;_animationStarted=new tt;_animationEnd=new tt;openedChange=new rt(!0);_openedStream=this.openedChange.pipe(vi(t=>t),lt(()=>{}));openedStart=this._animationStarted.pipe(vi(()=>this.opened),Pv(void 0));_closedStream=this.openedChange.pipe(vi(t=>!t),lt(()=>{}));closedStart=this._animationStarted.pipe(vi(()=>!this.opened),Pv(void 0));_destroyed=new tt;onPositionChanged=new rt;_content;_modeChanged=new tt;_injector=E(yi);_changeDetectorRef=E(un);constructor(){this.openedChange.pipe(Ri(this._destroyed)).subscribe(t=>{t?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{let t=this._elementRef.nativeElement;Qp(t,"keydown").pipe(vi(i=>i.keyCode===27&&!this.disableClose&&!vp(i)),Ri(this._destroyed)).subscribe(i=>this._ngZone.run(()=>{this.close(),i.stopPropagation(),i.preventDefault()})),this._eventCleanups=[this._renderer.listen(t,"transitionrun",this._handleTransitionEvent),this._renderer.listen(t,"transitionend",this._handleTransitionEvent),this._renderer.listen(t,"transitioncancel",this._handleTransitionEvent)]}),this._animationEnd.subscribe(()=>{this.openedChange.emit(this._opened)})}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let r=()=>{o(),s(),t.removeAttribute("tabindex")},o=this._renderer.listen(t,"blur",r),s=this._renderer.listen(t,"mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_takeFocus(){if(!this._focusTrap)return;let t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":jo(()=>{!this._focusTrap.focusInitialElement()&&typeof t.focus=="function"&&t.focus()},{injector:this._injector});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus);break}}_restoreFocus(t){this.autoFocus!=="dialog"&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){let t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._position==="end"&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngOnDestroy(){this._eventCleanups.forEach(t=>t()),this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,i){t&&i&&(this._openedVia=i);let r=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),r}_setOpen(t,i,r){return t===this._opened?Promise.resolve(t?"open":"close"):(this._opened=t,this._container?._transitionsEnabled?this._setIsAnimating(!0):setTimeout(()=>{this._animationStarted.next(),this._animationEnd.next()}),this._elementRef.nativeElement.classList.toggle("mat-drawer-opened",t),!t&&i&&this._restoreFocus(r),this._changeDetectorRef.markForCheck(),this._updateFocusTrapState(),new Promise(o=>{this.openedChange.pipe(Er(1)).subscribe(s=>o(s?"open":"close"))}))}_setIsAnimating(t){this._elementRef.nativeElement.classList.toggle("mat-drawer-animating",t)}_getWidth(){return this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop&&this.opened)}_updatePositionInParent(t){if(!this._platform.isBrowser)return;let i=this._elementRef.nativeElement,r=i.parentNode;t==="end"?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,i)),r.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}_handleTransitionEvent=t=>{let i=this._elementRef.nativeElement;t.target===i&&this._ngZone.run(()=>{t.type==="transitionrun"?this._animationStarted.next(t):(t.type==="transitionend"&&this._setIsAnimating(!1),this._animationEnd.next(t))})};static \u0275fac=function(i){return new(i||n)};static \u0275cmp=j({type:n,selectors:[["mat-drawer"]],viewQuery:function(i,r){if(i&1&&Gt(nue,5),i&2){let o;ct(o=dt())&&(r._content=o.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:11,hostBindings:function(i,r){i&2&&(Li("align",null),os("visibility",!r._container&&!r.opened?"hidden":null),Vt("mat-drawer-end",r.position==="end")("mat-drawer-over",r.mode==="over")("mat-drawer-push",r.mode==="push")("mat-drawer-side",r.mode==="side"))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:vS,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(i,r){i&1&&(ie(),U(0,"div",1,0),Y(2),Q())},dependencies:[Kc],encapsulation:2,changeDetection:0})}return n})(),JI=(()=>{class n{_dir=E(Gl,{optional:!0});_element=E(_t);_ngZone=E(nt);_changeDetectorRef=E(un);_animationMode=E(xr,{optional:!0});_transitionsEnabled=!1;_allDrawers;_drawers=new ma;_content;_userContent;get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=Wo(t)}_autosize=E(fue);get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(t){this._backdropOverride=t==null?null:Wo(t)}_backdropOverride;backdropClick=new rt;_start;_end;_left;_right;_destroyed=new tt;_doCheckSubject=new tt;_contentMargins={left:null,right:null};_contentMarginChanges=new tt;get scrollable(){return this._userContent||this._content}_injector=E(yi);constructor(){let t=E(en),i=E(Jc);this._dir?.change.pipe(Ri(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),i.change().pipe(Ri(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._animationMode!=="NoopAnimations"&&t.isBrowser&&this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._element.nativeElement.classList.add("mat-drawer-transition"),this._transitionsEnabled=!0},200)})}ngAfterContentInit(){this._allDrawers.changes.pipe(Io(this._allDrawers),Ri(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Io(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(As(10),Ri(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,i=0;if(this._left&&this._left.opened){if(this._left.mode=="side")t+=this._left._getWidth();else if(this._left.mode=="push"){let r=this._left._getWidth();t+=r,i-=r}}if(this._right&&this._right.opened){if(this._right.mode=="side")i+=this._right._getWidth();else if(this._right.mode=="push"){let r=this._right._getWidth();i+=r,t-=r}}t=t||null,i=i||null,(t!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:t,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(Ri(this._drawers.changes)).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),t.mode!=="side"&&t.openedChange.pipe(Ri(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){t.onPositionChanged.pipe(Ri(this._drawers.changes)).subscribe(()=>{jo({read:()=>this._validateDrawers()},{injector:this._injector})})}_watchDrawerMode(t){t._modeChanged.pipe(Ri(Ds(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){let i=this._element.nativeElement.classList,r="mat-drawer-container-has-open";t?i.add(r):i.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{t.position=="end"?(this._end!=null,this._end=t):(this._start!=null,this._start=t)}),this._right=this._left=null,this._dir&&this._dir.value==="rtl"?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&this._start.mode!="over"||this._isDrawerOpen(this._end)&&this._end.mode!="over"}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._drawerHasBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(t){return t!=null&&t.opened}_drawerHasBackdrop(t){return this._backdropOverride==null?!!t&&t.mode!=="side":this._backdropOverride}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=j({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(i,r,o){if(i&1&&(nn(o,_S,5),nn(o,KI,5)),i&2){let s;ct(s=dt())&&(r._content=s.first),ct(s=dt())&&(r._allDrawers=s)}},viewQuery:function(i,r){if(i&1&&Gt(_S,5),i&2){let o;ct(o=dt())&&(r._userContent=o.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(i,r){i&2&&Vt("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[J([{provide:eP,useExisting:n}])],ngContentSelectors:oue,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,r){i&1&&(ie(rue),Ni(0,sue,1,2,"div",0),Y(1),Y(2,1),Ni(3,aue,2,0,"mat-drawer-content")),i&2&&(Mn(r.hasBackdrop?0:-1),k(3),Mn(r._content?-1:3))},dependencies:[_S],styles:[".mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-sys-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-sys-background));box-sizing:border-box;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color, color-mix(in srgb, var(--mat-sys-neutral-variant20) 40%, transparent))}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}@media(forced-colors: active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-content.mat-drawer-content-hidden{opacity:0}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-sys-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow, none);background-color:var(--mat-sidenav-container-background-color, var(--mat-sys-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));width:var(--mat-sidenav-container-width, 360px);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}@media(forced-colors: active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media(forced-colors: active){[dir=rtl] .mat-drawer,.mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-transition .mat-drawer{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating){visibility:hidden;box-shadow:none}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating) .mat-drawer-inner-container{display:none}.mat-drawer.mat-drawer-opened.mat-drawer-opened{transform:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto}.mat-sidenav-fixed{position:fixed}"],encapsulation:2,changeDetection:0})}return n})(),bS=(()=>{class n extends _S{static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275cmp=j({type:n,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],features:[J([{provide:Kc,useExisting:n}]),q],ngContentSelectors:vS,decls:1,vars:0,template:function(i,r){i&1&&(ie(),Y(0))},encapsulation:2,changeDetection:0})}return n})(),tP=(()=>{class n extends KI{get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=Wo(t)}_fixedInViewport=!1;get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=Zc(t)}_fixedTopGap=0;get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=Zc(t)}_fixedBottomGap=0;static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275cmp=j({type:n,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:15,hostBindings:function(i,r){i&2&&(Li("align",null),os("top",r.fixedInViewport?r.fixedTopGap:null,"px")("bottom",r.fixedInViewport?r.fixedBottomGap:null,"px"),Vt("mat-drawer-end",r.position==="end")("mat-drawer-over",r.mode==="over")("mat-drawer-push",r.mode==="push")("mat-drawer-side",r.mode==="side")("mat-sidenav-fixed",r.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[J([{provide:KI,useExisting:n}]),q],ngContentSelectors:vS,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(i,r){i&1&&(ie(),U(0,"div",1,0),Y(2),Q())},dependencies:[Kc],encapsulation:2,changeDetection:0})}return n})(),PH=(()=>{class n extends JI{_allDrawers=void 0;_content=void 0;static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275cmp=j({type:n,selectors:[["mat-sidenav-container"]],contentQueries:function(i,r,o){if(i&1&&(nn(o,bS,5),nn(o,tP,5)),i&2){let s;ct(s=dt())&&(r._content=s.first),ct(s=dt())&&(r._allDrawers=s)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(i,r){i&2&&Vt("mat-drawer-container-explicit-backdrop",r._backdropOverride)},exportAs:["matSidenavContainer"],features:[J([{provide:eP,useExisting:n},{provide:JI,useExisting:n}]),q],ngContentSelectors:cue,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,r){i&1&&(ie(lue),Ni(0,due,1,2,"div",0),Y(1),Y(2,1),Ni(3,uue,2,0,"mat-sidenav-content")),i&2&&(Mn(r.hasBackdrop?0:-1),k(3),Mn(r._content?-1:3))},dependencies:[bS],styles:[hue],encapsulation:2,changeDetection:0})}return n})(),FH=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({imports:[Ti,Bu,Bu,Ti]})}return n})();function gue(n,e){if(n&1&&(U(0,"a",3),It(1),Q()),n&2){let t=e.$implicit;O("routerLink",t.path),k(),cc(t.data.title)}}function _ue(n,e){if(n&1){let t=Xt();U(0,"button",10),De("click",function(){ht(t),Ht();let r=At(2);return ft(r.toggle())}),U(1,"mat-icon",11),It(2,"menu"),Q()()}}function bue(n,e){if(n&1){let t=Xt();U(0,"button",12),De("click",function(r){ht(t);let o=Ht();return ft(o.editorService.toCodeSandbox(r))}),U(1,"mat-icon"),It(2,"crop_din"),Q(),It(3," CodeSandbox "),Q()}}function vue(n,e){if(n&1){let t=Xt();U(0,"button",12),De("click",function(r){ht(t);let o=Ht();return ft(o.editorService.toStackblitz(r))}),U(1,"mat-icon"),It(2,"bolt"),Q(),It(3," Stackblitz "),Q()}}var kH=(()=>{class n{constructor(t,i){this.breakpointObserver=t,this.editorService=i,this.routes=Wb,this.isHandset$=this.breakpointObserver.observe(P3.Handset).pipe(lt(r=>r.matches),nl())}static{this.\u0275fac=function(i){return new(i||n)(be(uM),be(Ga))}}static{this.\u0275cmp=j({type:n,selectors:[["app-navigation-shell"]],standalone:!1,decls:22,vars:14,consts:[["drawer",""],[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["mat-list-item","",3,"routerLink"],[1,"content"],["color","primary"],["type","button","aria-label","Toggle sidenav","mat-icon-button",""],[1,"toolbar-spacer"],["mat-button","","href","#"],[1,"main-route-content"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],["mat-button","","href","#",3,"click"]],template:function(i,r){i&1&&(U(0,"mat-sidenav-container",1)(1,"mat-sidenav",2,0),Bi(3,"async"),Bi(4,"async"),Bi(5,"async"),U(6,"mat-toolbar"),It(7,"ngx-three"),Q(),U(8,"mat-nav-list"),cr(9,gue,2,2,"a",3,wr),Q()(),U(11,"mat-sidenav-content",4)(12,"mat-toolbar",5),Ni(13,_ue,3,0,"button",6),Bi(14,"async"),U(15,"span"),It(16,"ngx-three-demo"),Q(),ae(17,"span",7),Ni(18,bue,4,0,"button",8)(19,vue,4,0,"button",8),Q(),U(20,"div",9),ae(21,"router-outlet"),Q()()()),i&2&&(k(),O("mode",Yi(3,6,r.isHandset$)?"over":"side")("opened",Yi(4,8,r.isHandset$)===!1),Li("role",Yi(5,10,r.isHandset$)?"dialog":"navigation"),k(8),dr(r.routes),k(4),Mn(Yi(14,12,r.isHandset$)?13:-1),k(5),Mn(r.editorService.urls.length?18:-1),k(),Mn(r.editorService.urls.length?19:-1))},dependencies:[pE,JL,bM,Z3,AH,DH,xM,IH,tP,PH,bS,c0],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.content[_ngcontent-%COMP%]{height:100vh}.main-route-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{display:block;height:100%}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"],changeDetection:0})}}return n})();var OH=(()=>{class n{constructor(){this.title="ngx-three-demo"}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=j({type:n,selectors:[["app-root"]],standalone:!1,decls:1,vars:0,template:function(i,r){i&1&&ae(0,"app-navigation-shell")},dependencies:[kH],encapsulation:2,changeDetection:0})}}return n})();var jH=aM(),iP=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,t){this._viewportRuler=e,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Un(-this._previousScrollPosition.left),e.style.top=Un(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,t=this._document.body,i=e.style,r=t.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),jH&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),jH&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}};var nP=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(vi(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}},yS=class{enable(){}disable(){}attach(){}};function rP(n,e){return e.some(t=>{let i=n.bottom<t.top,r=n.top>t.bottom,o=n.right<t.left,s=n.left>t.right;return i||r||o||s})}function NH(n,e){return e.some(t=>{let i=n.top<t.top,r=n.bottom>t.bottom,o=n.left<t.left,s=n.right>t.right;return i||r||o||s})}var oP=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();rP(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},xue=(()=>{class n{_scrollDispatcher=E(gb);_viewportRuler=E(Jc);_ngZone=E(nt);_document=E(Pt);constructor(){}noop=()=>new yS;close=t=>new nP(this._scrollDispatcher,this._ngZone,this._viewportRuler,t);block=()=>new iP(this._viewportRuler,this._document);reposition=t=>new oP(this._scrollDispatcher,this._viewportRuler,this._ngZone,t);static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sP=class{positionStrategy;scrollStrategy=new yS;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){let t=Object.keys(e);for(let i of t)e[i]!==void 0&&(this[i]=e[i])}}};var aP=class{connectionPair;scrollableViewProperties;constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}};var HH=(()=>{class n{_attachedOverlays=[];_document=E(Pt);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wue=(()=>{class n extends HH{_ngZone=E(nt);_renderer=E(ho).createRenderer(null,null);_cleanupKeydown;add(t){super.add(t),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=t=>{let i=this._attachedOverlays;for(let r=i.length-1;r>-1;r--)if(i[r]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[r]._keydownEvents.next(t));break}};static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Mue=(()=>{class n extends HH{_platform=E(en);_ngZone=E(nt,{optional:!0});_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;add(t){if(super.add(t),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}_pointerDownListener=t=>{this._pointerDownEventTarget=xs(t)};_clickListener=t=>{let i=xs(t),r=t.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let s=o.length-1;s>-1;s--){let a=o[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(LH(a.overlayElement,i)||LH(a.overlayElement,r))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(t)):l.next(t)}};static \u0275fac=(()=>{let t;return function(r){return(t||(t=le(n)))(r||n)}})();static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function LH(n,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,i=e;for(;i;){if(i===n)return!0;i=t&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var GH=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=j({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return n})(),WH=(()=>{class n{_platform=E(en);_containerElement;_document=E(Pt);_styleLoader=E(Go);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||MA()){let r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}let i=this._document.createElement("div");i.classList.add(t),MA()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(GH)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lP=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(e,t,i,r){this._renderer=t,this._ngZone=i,this.element=e.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=t.listen(this.element,"click",r)}detach(){this._ngZone.runOutsideAngular(()=>{let e=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),e.style.pointerEvents="none",e.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},cP=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new tt;_attachments=new tt;_detachments=new tt;_positionStrategy;_scrollStrategy;_locationChanges=bi.EMPTY;_backdropRef=null;_previousHostParent;_keydownEvents=new tt;_outsidePointerEvents=new tt;_renders=new tt;_afterRenderRef;_afterNextRenderRef;constructor(e,t,i,r,o,s,a,l,c,d=!1,u,h){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=d,this._injector=u,this._renderer=h,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=as(()=>HR(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=jo(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=ce(ce({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Ft(ce({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Un(this._config.width),e.height=Un(this._config.height),e.minWidth=Un(this._config.minWidth),e.minHeight=Un(this._config.minHeight),e.maxWidth=Un(this._config.maxWidth),e.maxHeight=Un(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new lP(this._document,this._renderer,this._ngZone,t=>{this._backdropClick.next(t)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(e))}):this._backdropRef.element.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(e,t,i){let r=yp(t||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let e=this._renders.pipe(Ri(Ds(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e?.disable(),e?.detach?.()}},BH="cdk-overlay-connected-position-bounding-box",Sue=/([A-Za-z%]+)$/,dP=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new tt;_resizeSubscription=bi.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(BH),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),d=this._getOverlayFit(c,t,i,a);if(d.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(d,c,i)){o.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(o.length){let a=null,l=-1;for(let c of o){let d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>l&&(l=d,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&zu(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(BH),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=i.originX=="start"?s:a}t.left<0&&(r-=t.left);let o;return i.originY=="center"?o=e.top+e.height/2:o=i.originY=="top"?e.top:e.bottom,t.top<0&&(o-=t.top),{x:r,y:o}}_getOverlayPoint(e,t,i){let r;i.overlayX=="center"?r=-t.width/2:i.overlayX==="start"?r=this._isRtl()?-t.width:0:r=this._isRtl()?0:-t.width;let o;return i.overlayY=="center"?o=-t.height/2:o=i.overlayY=="top"?0:-t.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,t,i,r){let o=VH(t),{x:s,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(s+=l),c&&(a+=c);let d=0-s,u=s+o.width-i.width,h=0-a,f=a+o.height-i.height,m=this._subtractOverflows(o.width,d,u),_=this._subtractOverflows(o.height,h,f),g=m*_;return{visibleArea:g,isCompletelyWithinViewport:o.width*o.height===g,fitsInViewportVertically:_===o.height,fitsInViewportHorizontally:m==o.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){let r=i.bottom-t.y,o=i.right-t.x,s=UH(this._overlayRef.getConfig().minHeight),a=UH(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||s!=null&&s<=r,c=e.fitsInViewportHorizontally||a!=null&&a<=o;return l&&c}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=VH(t),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),l=Math.max(o.top-i.top-e.y,0),c=Math.max(o.left-i.left-e.x,0),d=0,u=0;return r.width<=o.width?d=c||-s:d=e.x<this._viewportMargin?o.left-i.left-e.x:0,r.height<=o.height?u=l||-a:u=e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:d,y:u},{x:e.x+d,y:e.y+u}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!Tue(this._lastScrollVisibility,i)){let r=new aP(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){let i=this._viewportRect,r=this._isRtl(),o,s,a;if(t.overlayY==="top")s=e.y,o=i.height-s+this._viewportMargin;else if(t.overlayY==="bottom")a=i.height-e.y+this._viewportMargin*2,o=i.height-a+this._viewportMargin;else{let f=Math.min(i.bottom-e.y+i.top,e.y),m=this._lastBoundingBoxSize.height;o=f*2,s=e.y-f,o>m&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-m/2)}let l=t.overlayX==="start"&&!r||t.overlayX==="end"&&r,c=t.overlayX==="end"&&!r||t.overlayX==="start"&&r,d,u,h;if(c)h=i.width-e.x+this._viewportMargin*2,d=e.x-this._viewportMargin;else if(l)u=e.x,d=i.right-e.x;else{let f=Math.min(i.right-e.x+i.left,e.x),m=this._lastBoundingBoxSize.width;d=f*2,u=e.x-f,d>m&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.x-m/2)}return{top:s,left:u,bottom:a,right:h,width:d,height:o}}_setBoundingBoxStyles(e,t){let i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=Un(i.height),r.top=Un(i.top),r.bottom=Un(i.bottom),r.width=Un(i.width),r.left=Un(i.left),r.right=Un(i.right),t.overlayX==="center"?r.alignItems="center":r.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?r.justifyContent="center":r.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=Un(o)),s&&(r.maxWidth=Un(s))}this._lastBoundingBoxSize=i,zu(this._boundingBox.style,r)}_resetBoundingBoxStyles(){zu(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){zu(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let d=this._viewportRuler.getViewportScrollPosition();zu(i,this._getExactOverlayY(t,e,d)),zu(i,this._getExactOverlayX(t,e,d))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=Un(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=Un(s.maxWidth):o&&(i.maxWidth="")),zu(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=Un(o.y);return r}_getExactOverlayX(e,t,i){let r={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(o.x+this._overlayRect.width)}px`}else r.left=Un(o.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:NH(e,i),isOriginOutsideView:rP(e,i),isOverlayClipped:NH(t,i),isOverlayOutsideView:rP(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return t==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&yp(e).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof _t)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}};function zu(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function UH(n){if(typeof n!="number"&&n!=null){let[e,t]=n.split(Sue);return!t||t==="px"?parseFloat(e):null}return n||null}function VH(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function Tue(n,e){return n===e?!0:n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}var zH="cdk-global-overlay-wrapper",uP=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(zH),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,l=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),d=this._xPosition,u=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",m="",_="";l?_="flex-start":d==="center"?(_="center",h?m=u:f=u):h?d==="left"||d==="end"?(_="flex-end",f=u):(d==="right"||d==="start")&&(_="flex-start",m=u):d==="left"||d==="start"?(_="flex-start",f=u):(d==="right"||d==="end")&&(_="flex-end",m=u),e.position=this._cssPosition,e.marginLeft=l?"0":f,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":m,t.justifyContent=_,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(zH),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},Rue=(()=>{class n{_viewportRuler=E(Jc);_document=E(Pt);_platform=E(en);_overlayContainer=E(WH);constructor(){}global(){return new uP}flexibleConnectedTo(t){return new dP(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lp=(()=>{class n{scrollStrategies=E(xue);_overlayContainer=E(WH);_positionBuilder=E(Rue);_keyboardDispatcher=E(wue);_injector=E(yi);_ngZone=E(nt);_document=E(Pt);_directionality=E(Gl);_location=E(dc);_outsideClickDispatcher=E(Mue);_animationsModuleType=E(xr,{optional:!0});_idGenerator=E(ub);_renderer=E(ho).createRenderer(null,null);_appRef;_styleLoader=E(Go);constructor(){}create(t){this._styleLoader.load(GH);let i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),s=new sP(t);return s.direction=s.direction||this._directionality.value,new cP(o,i,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Jn),this._renderer)}position(){return this._positionBuilder}_createPaneElement(t){let i=this._document.createElement("div");return i.id=this._idGenerator.getId("cdk-overlay-"),i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){let t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(fo)),new MM(t,null,this._appRef,this._injector,this._document)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Cue=new ye("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=E(Lp);return()=>n.scrollStrategies.reposition()}});function Eue(n){return()=>n.scrollStrategies.reposition()}var Due={provide:Cue,deps:[Lp],useFactory:Eue},$H=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({providers:[Lp,Due],imports:[Qc,lV,GA,GA]})}return n})();var qH=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({imports:[Ti,dM,Ti]})}return n})();var Aue=new ye("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let n=E(Lp);return()=>n.scrollStrategies.reposition()}});function Iue(n){return()=>n.scrollStrategies.reposition()}var Pue={provide:Aue,deps:[Lp],useFactory:Iue};var hP=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({providers:[Pue],imports:[$H,BA,Ti,Bu,qH,BA,Ti]})}return n})();var fP=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({imports:[Ti,Nu]})}return n})();var Fue=[hb,$b,pb,UA,qb,hP,ZA,fP],XH=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Ke({type:n})}static{this.\u0275inj=Qe({imports:[Fue,hb,$b,pb,UA,qb,hP,ZA,fP]})}}return n})();function YH(n){return new Te(3e3,!1)}function kue(){return new Te(3100,!1)}function Oue(){return new Te(3101,!1)}function jue(n){return new Te(3001,!1)}function Nue(n){return new Te(3003,!1)}function Lue(n){return new Te(3004,!1)}function Bue(n,e){return new Te(3005,!1)}function Uue(){return new Te(3006,!1)}function Vue(){return new Te(3007,!1)}function zue(n,e){return new Te(3008,!1)}function Hue(n){return new Te(3002,!1)}function Gue(n,e,t,i,r){return new Te(3010,!1)}function Wue(){return new Te(3011,!1)}function $ue(){return new Te(3012,!1)}function que(){return new Te(3200,!1)}function Xue(){return new Te(3202,!1)}function Yue(){return new Te(3013,!1)}function Zue(n){return new Te(3014,!1)}function Que(n){return new Te(3015,!1)}function Kue(n){return new Te(3016,!1)}function Jue(n,e){return new Te(3404,!1)}function ehe(n){return new Te(3502,!1)}function the(n){return new Te(3503,!1)}function ihe(){return new Te(3300,!1)}function nhe(n){return new Te(3504,!1)}function rhe(n){return new Te(3301,!1)}function ohe(n,e){return new Te(3302,!1)}function she(n){return new Te(3303,!1)}function ahe(n,e){return new Te(3400,!1)}function lhe(n){return new Te(3401,!1)}function che(n){return new Te(3402,!1)}function dhe(n,e){return new Te(3505,!1)}function ad(n){switch(n.length){case 0:return new ed;case 1:return n[0];default:return new _b(n)}}function c4(n,e,t=new Map,i=new Map){let r=[],o=[],s=-1,a=null;if(e.forEach(l=>{let c=l.get("offset"),d=c==s,u=d&&a||new Map;l.forEach((h,f)=>{let m=f,_=h;if(f!=="offset")switch(m=n.normalizePropertyName(m,r),_){case EM:_=t.get(f);break;case Wa:_=i.get(f);break;default:_=n.normalizeStyleValue(f,m,_,r);break}u.set(m,_)}),d||o.push(u),a=u,s=c}),r.length)throw ehe(r);return o}function OP(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&pP(t,"start",n)));break;case"done":n.onDone(()=>i(t&&pP(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&pP(t,"destroy",n)));break}}function pP(n,e,t){let i=t.totalTime,r=!!t.disabled,o=jP(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,r),s=n._data;return s!=null&&(o._data=s),o}function jP(n,e,t,i,r="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function Yo(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function ZH(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var uhe=typeof document>"u"?null:document.documentElement;function NP(n){let e=n.parentNode||n.host||null;return e===uhe?null:e}function hhe(n){return n.substring(1,6)=="ebkit"}var Hu=null,QH=!1;function fhe(n){Hu||(Hu=phe()||{},QH=Hu.style?"WebkitAppearance"in Hu.style:!1);let e=!0;return Hu.style&&!hhe(n)&&(e=n in Hu.style,!e&&QH&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Hu.style)),e}function phe(){return typeof document<"u"?document.body:null}function d4(n,e){for(;e;){if(e===n)return!0;e=NP(e)}return!1}function u4(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var LP=(()=>{class n{validateStyleProperty(t){return fhe(t)}containsElement(t,i){return d4(t,i)}getParentElement(t){return NP(t)}query(t,i,r){return u4(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,s,a=[],l){return new ed(r,o)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),$u=class{static NOOP=new LP},qu=class{};var mhe=1e3,h4="{{",ghe="}}",f4="ng-enter",yP="ng-leave",xS="ng-trigger",RS=".ng-trigger",KH="ng-animating",xP=".ng-animating";function Ql(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:wP(parseFloat(e[1]),e[2])}function wP(n,e){switch(e){case"s":return n*mhe;default:return n}}function CS(n,e,t){return n.hasOwnProperty("duration")?n:_he(n,e,t)}function _he(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof n=="string"){let a=n.match(i);if(a===null)return e.push(YH(n)),{duration:0,delay:0,easing:""};r=wP(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=wP(parseFloat(l),a[4]));let c=a[5];c&&(s=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(kue()),a=!0),o<0&&(e.push(Oue()),a=!0),a&&e.splice(l,0,YH(n))}return{duration:r,delay:o,easing:s}}function bhe(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Ja(n,e,t){e.forEach((i,r)=>{let o=BP(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function Wu(n,e){e.forEach((t,i)=>{let r=BP(i);n.style[r]=""})}function Xb(n){return Array.isArray(n)?n.length==1?n[0]:uV(n):n}function vhe(n,e,t){let i=e.params||{},r=p4(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(jue(o))})}var MP=new RegExp(`${h4}\\s*(.+?)\\s*${ghe}`,"g");function p4(n){let e=[];if(typeof n=="string"){let t;for(;t=MP.exec(n);)e.push(t[1]);MP.lastIndex=0}return e}function Zb(n,e,t){let i=`${n}`,r=i.replace(MP,(o,s)=>{let a=e[s];return a==null&&(t.push(Nue(s)),a=""),a.toString()});return r==i?n:r}var yhe=/-+([a-z0-9])/g;function BP(n){return n.replace(yhe,(...e)=>e[1].toUpperCase())}function xhe(n,e){return n===0||e===0}function whe(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,UP(n,a)))}}return e}function Xo(n,e,t){switch(e.type){case ri.Trigger:return n.visitTrigger(e,t);case ri.State:return n.visitState(e,t);case ri.Transition:return n.visitTransition(e,t);case ri.Sequence:return n.visitSequence(e,t);case ri.Group:return n.visitGroup(e,t);case ri.Animate:return n.visitAnimate(e,t);case ri.Keyframes:return n.visitKeyframes(e,t);case ri.Style:return n.visitStyle(e,t);case ri.Reference:return n.visitReference(e,t);case ri.AnimateChild:return n.visitAnimateChild(e,t);case ri.AnimateRef:return n.visitAnimateRef(e,t);case ri.Query:return n.visitQuery(e,t);case ri.Stagger:return n.visitStagger(e,t);default:throw Lue(e.type)}}function UP(n,e){return window.getComputedStyle(n)[e]}var Mhe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),ES=class extends qu{normalizePropertyName(e,t){return BP(e)}normalizeStyleValue(e,t,i,r){let o="",s=i.toString().trim();if(Mhe.has(t)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(Bue(e,i))}return s+o}};var DS="*";function She(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>The(i,t,e)):t.push(n),t}function The(n,e,t){if(n[0]==":"){let l=Rhe(n,t);if(typeof l=="function"){e.push(l);return}n=l}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(Que(n)),e;let r=i[1],o=i[2],s=i[3];e.push(JH(r,s));let a=r==DS&&s==DS;o[0]=="<"&&!a&&e.push(JH(s,r))}function Rhe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(Kue(n)),"* => *"}}var wS=new Set(["true","1"]),MS=new Set(["false","0"]);function JH(n,e){let t=wS.has(n)||MS.has(n),i=wS.has(e)||MS.has(e);return(r,o)=>{let s=n==DS||n==r,a=e==DS||e==o;return!s&&t&&typeof r=="boolean"&&(s=r?wS.has(n):MS.has(n)),!a&&i&&typeof o=="boolean"&&(a=o?wS.has(e):MS.has(e)),s&&a}}var m4=":self",Che=new RegExp(`s*${m4}s*,?`,"g");function g4(n,e,t,i){return new SP(n).build(e,t,i)}var e4="",SP=class{_driver;constructor(e){this._driver=e}build(e,t,i){let r=new TP(t);return this._resetContextStyleTimingState(r),Xo(this,Xb(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=e4,e.collectedStyles=new Map,e.collectedStyles.set(e4,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(Uue()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==ri.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,o.push(this.visitState(l,t))}),l.name=c}else if(a.type==ri.Transition){let l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,s.push(l)}else t.errors.push(Vue())}),{type:ri.Trigger,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{p4(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&t.errors.push(zue(e.name,[...o.values()]))}return{type:ri.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=Xo(this,Xb(e.animation),t),r=She(e.expr,t.errors);return{type:ri.Transition,matchers:r,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Gu(e.options)}}visitSequence(e,t){return{type:ri.Sequence,steps:e.steps.map(i=>Xo(this,i,t)),options:Gu(e.options)}}visitGroup(e,t){let i=t.currentTime,r=0,o=e.steps.map(s=>{t.currentTime=i;let a=Xo(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:ri.Group,steps:o,options:Gu(e.options)}}visitAnimate(e,t){let i=Ihe(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:$l({});if(o.type==ri.Keyframes)r=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let c={};i.easing&&(c.easing=i.easing),s=$l(c)}t.currentTime+=i.duration+i.delay;let l=this.visitStyle(s,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:ri.Animate,timings:i,style:r,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===Wa?i.push(a):t.errors.push(Hue(a)):i.push(new Map(Object.entries(a)));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(h4)>=0){o=!0;break}}}),{type:ri.Style,styles:i,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let c=t.collectedStyles.get(t.currentQuerySelector),d=c.get(l),u=!0;d&&(o!=r&&o>=d.startTime&&r<=d.endTime&&(t.errors.push(Gue(l,d.startTime,d.endTime,o,r)),u=!1),o=d.startTime),u&&c.set(l,{startTime:o,endTime:r}),t.options&&vhe(a,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:ri.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(Wue()),i;let r=1,o=0,s=[],a=!1,l=!1,c=0,d=e.steps.map(p=>{let b=this._makeStyleAst(p,t),v=b.offset!=null?b.offset:Ahe(b.styles),y=0;return v!=null&&(o++,y=b.offset=v),l=l||y<0||y>1,a=a||y<c,c=y,s.push(y),b});l&&t.errors.push($ue()),a&&t.errors.push(que());let u=e.steps.length,h=0;o>0&&o<u?t.errors.push(Xue()):o==0&&(h=r/(u-1));let f=u-1,m=t.currentTime,_=t.currentAnimateTimings,g=_.duration;return d.forEach((p,b)=>{let v=h>0?b==f?1:h*b:s[b],y=v*g;t.currentTime=m+_.delay+y,_.duration=y,this._validateStyleAst(p,t),p.offset=v,i.styles.push(p)}),i}visitReference(e,t){return{type:ri.Reference,animation:Xo(this,Xb(e.animation),t),options:Gu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:ri.AnimateChild,options:Gu(e.options)}}visitAnimateRef(e,t){return{type:ri.AnimateRef,animation:this.visitReference(e.animation,t),options:Gu(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=Ehe(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,Yo(t.collectedStyles,t.currentQuerySelector,new Map);let a=Xo(this,Xb(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:ri.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Gu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(Yue());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:CS(e.timings,t.errors,!0);return{type:ri.Stagger,animation:Xo(this,Xb(e.animation),t),timings:i,options:null}}};function Ehe(n){let e=!!n.split(/\s*,\s*/).find(t=>t==m4);return e&&(n=n.replace(Che,"")),n=n.replace(/@\*/g,RS).replace(/@\w+/g,t=>RS+"-"+t.slice(1)).replace(/:animating/g,xP),[n,e]}function Dhe(n){return n?ce({},n):null}var TP=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function Ahe(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function Ihe(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=CS(n,e).duration;return mP(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=mP(0,0,"");return o.dynamic=!0,o.strValue=t,o}let r=CS(t,e);return mP(r.duration,r.delay,r.easing)}function Gu(n){return n?(n=ce({},n),n.params&&(n.params=Dhe(n.params))):n={},n}function mP(n,e,t){return{duration:n,delay:e,easing:t}}function VP(n,e,t,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var Qb=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},Phe=1,Fhe=":enter",khe=new RegExp(Fhe,"g"),Ohe=":leave",jhe=new RegExp(Ohe,"g");function _4(n,e,t,i,r,o=new Map,s=new Map,a,l,c=[]){return new RP().buildKeyframes(n,e,t,i,r,o,s,a,l,c)}var RP=class{buildKeyframes(e,t,i,r,o,s,a,l,c,d=[]){c=c||new Qb;let u=new CP(e,t,c,r,o,d,[]);u.options=l;let h=l.delay?Ql(l.delay):0;u.currentTimeline.delayNextStep(h),u.currentTimeline.setStyles([s],null,u.errors,l),Xo(this,i,u);let f=u.timelines.filter(m=>m.containsAnimation());if(f.length&&a.size){let m;for(let _=f.length-1;_>=0;_--){let g=f[_];if(g.element===t){m=g;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([a],null,u.errors,l)}return f.length?f.map(m=>m.buildKeyframes()):[VP(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let r of e){let o=r?.delay;if(o){let s=typeof o=="number"?o:Ql(Zb(o,r?.params??{},t.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime,s=i.duration!=null?Ql(i.duration):null,a=i.delay!=null?Ql(i.delay):null;return s!==0&&e.forEach(l=>{let c=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Xo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,r=t,o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==ri.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=AS);let s=Ql(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>Xo(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],r=t.currentTimeline.currentTime,o=e.options&&e.options.delay?Ql(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),Xo(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,r=t.params?Zb(i,t.params,t.errors):i;return CS(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());let o=e.style;o.type==ri.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?Ql(r.delay):0;o&&(t.previousNode.type===ri.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=AS);let s=i,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{t.currentQueryIndex=d;let u=t.createSubContext(e.options,c);o&&u.delayNextStep(o),c===t.element&&(l=u.currentTimeline),Xo(this,e.animation,u),u.currentTimeline.applyStylesToKeyframe();let h=u.currentTimeline.currentTime;s=Math.max(s,h)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,r=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime;break}let d=t.currentTimeline;l&&d.delayNextStep(l);let u=d.currentTime;Xo(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-u+(r.startTime-i.currentTimeline.startTime)}},AS={},CP=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=AS;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,i,r,o,s,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=l||new IS(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=Ql(i.duration)),i.delay!=null&&(r.delay=Ql(i.delay));let o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Zb(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){let r=t||this.element,o=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=AS,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new EP(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(khe,"."+this._enterClassName),e=e.replace(jhe,"."+this._leaveClassName);let l=i!=1,c=this._driver.query(this.element,e,l);i!==0&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!o&&a.length==0&&s.push(Zue(t)),a}},IS=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Phe,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Wa),this._currentKeyframe.set(t,Wa);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);let o=r&&r.params||{},s=Nhe(e,this._globalTimelineStyles);for(let[a,l]of s){let c=Zb(l,o,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Wa),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((d,u)=>{d===EM?e.add(u):d===Wa&&t.add(u)}),i||c.set("offset",l/this.duration),r.push(c)});let o=[...e.values()],s=[...t.values()];if(i){let a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return VP(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},EP=class extends IS{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,i,r,o,s,a=!1){super(e,t,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=i+t,a=t/s,l=new Map(e[0]);l.set("offset",0),o.push(l);let c=new Map(e[0]);c.set("offset",t4(a)),o.push(c);let d=e.length-1;for(let u=1;u<=d;u++){let h=new Map(e[u]),f=h.get("offset"),m=t+f*i;h.set("offset",t4(m/s)),o.push(h)}i=s,t=0,r="",e=o}return VP(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}};function t4(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function Nhe(n,e){let t=new Map,i;return n.forEach(r=>{if(r==="*"){i??=e.keys();for(let o of i)t.set(o,Wa)}else for(let[o,s]of r)t.set(o,s)}),t}function i4(n,e,t,i,r,o,s,a,l,c,d,u,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:u,errors:h}}var gP={},PS=class{_triggerName;ast;_stateStyles;constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return Lhe(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,s,a,l,c,d){let u=[],h=this.ast.options&&this.ast.options.params||gP,f=a&&a.params||gP,m=this.buildStyles(i,f,u),_=l&&l.params||gP,g=this.buildStyles(r,_,u),p=new Set,b=new Map,v=new Map,y=r==="void",R={params:b4(_,h),delay:this.ast.options?.delay},S=d?[]:_4(e,t,this.ast.animation,o,s,m,g,R,c,u),T=0;return S.forEach(A=>{T=Math.max(A.duration+A.delay,T)}),u.length?i4(t,this._triggerName,i,r,y,m,g,[],[],b,v,T,u):(S.forEach(A=>{let M=A.element,x=Yo(b,M,new Set);A.preStyleProps.forEach(z=>x.add(z));let I=Yo(v,M,new Set);A.postStyleProps.forEach(z=>I.add(z)),M!==t&&p.add(M)}),i4(t,this._triggerName,i,r,y,m,g,S,[...p.values()],b,v,T))}};function Lhe(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}function b4(n,e){let t=ce({},e);return Object.entries(n).forEach(([i,r])=>{r!=null&&(t[i]=r)}),t}var DP=class{styles;defaultParams;normalizer;constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,r=b4(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Zb(s,r,t));let l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),i.set(a,s)})}),i}};function Bhe(n,e,t){return new AP(n,e,t)}var AP=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,t.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new DP(r.style,o,i))}),n4(this.states,"true","1"),n4(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new PS(e,r,this.states))}),this.fallbackTransition=Uhe(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(s=>s.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function Uhe(n,e,t){let i=[(s,a)=>!0],r={type:ri.Sequence,steps:[],options:null},o={type:ri.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new PS(n,o,e)}function n4(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var Vhe=new Qb,IP=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i}register(e,t){let i=[],r=[],o=g4(this._driver,t,i,r);if(i.length)throw the(i);this._animations.set(e,o)}_buildPlayer(e,t,i){let r=e.element,o=c4(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let r=[],o=this._animations.get(e),s,a=new Map;if(o?(s=_4(this._driver,t,o,f4,yP,new Map,new Map,i,Vhe,r),s.forEach(d=>{let u=Yo(a,d.element,new Map);d.postStyleProps.forEach(h=>u.set(h,null))})):(r.push(ihe()),s=[]),r.length)throw nhe(r);a.forEach((d,u)=>{d.forEach((h,f)=>{d.set(f,this._driver.computeStyle(u,f,Wa))})});let l=s.map(d=>{let u=a.get(d.element);return this._buildPlayer(d,new Map,u)}),c=ad(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw rhe(e);return t}listen(e,t,i,r){let o=jP(t,"","","");return OP(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let s=r[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},r4="ng-animate-queued",zhe=".ng-animate-queued",_P="ng-animate-disabled",Hhe=".ng-animate-disabled",Ghe="ng-star-inserted",Whe=".ng-star-inserted",$he=[],v4={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},qhe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ca="__ng_removed",Kb=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=Yhe(r),i){let o=e,{value:s}=o,a=BS(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(r=>{i[r]==null&&(i[r]=t[r])})}}},Yb="void",bP=new Kb(Yb),PP=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this._hostClassName="ng-tns-"+e,Ms(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw ohe(i,t);if(i==null||i.length==0)throw she(t);if(!Zhe(i))throw ahe(i,t);let o=Yo(this._elementListeners,e,[]),s={name:t,phase:i,callback:r};o.push(s);let a=Yo(this._engine.statesByElement,e,new Map);return a.has(t)||(Ms(e,xS),Ms(e,xS+"-"+t),a.set(t,bP)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw lhe(e);return t}trigger(e,t,i,r=!0){let o=this._getTrigger(t),s=new Jb(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Ms(e,xS),Ms(e,xS+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),c=new Kb(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=bP),!(c.value===Yb)&&l.value===c.value){if(!Jhe(l.params,c.params)){let _=[],g=o.matchStyles(l.value,l.params,_),p=o.matchStyles(c.value,c.params,_);_.length?this._engine.reportError(_):this._engine.afterFlush(()=>{Wu(e,g),Ja(e,p)})}return}let h=Yo(this._engine.playersByElement,e,[]);h.forEach(_=>{_.namespaceId==this.id&&_.triggerName==t&&_.queued&&_.destroy()});let f=o.matchTransition(l.value,c.value,e,c.params),m=!1;if(!f){if(!r)return;f=o.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:s,isFallbackTransition:m}),m||(Ms(e,r4),s.onStart(()=>{Bp(e,r4)})),s.onDone(()=>{let _=this.players.indexOf(s);_>=0&&this.players.splice(_,1);let g=this._engine.playersByElement.get(e);if(g){let p=g.indexOf(s);p>=0&&g.splice(p,1)}}),this.players.push(s),h.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,RS,!0);i.forEach(r=>{if(r[ca])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let d=this.trigger(e,c,Yb,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),i&&ad(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let r=new Set;t.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let l=this._triggers.get(s).fallbackTransition,c=i.get(s)||bP,d=new Kb(Yb),u=new Jb(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:c,toState:d,player:u,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{let o=e[ca];(!o||o===v4)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Ms(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){let l=jP(o,i.triggerName,i.fromState.value,i.toState.value);l._data=e,OP(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{let o=i.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},FP=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new PP(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let l=r.get(a);if(l){let c=i.indexOf(l);i.splice(c+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}}return t}trigger(e,t,i,r){if(SS(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!SS(t))return;let o=t[ca];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ms(e,_P)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Bp(e,_P))}removeNode(e,t,i){if(SS(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[ca]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return SS(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,RS,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,xP,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ad(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[ca];if(t&&t.setForRemoval){if(e[ca]=v4,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(_P)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Hhe,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];Ms(r,Ghe)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?ad(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw che(e)}_flushAnimations(e,t){let i=new Qb,r=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(N=>{d.add(N);let H=this.driver.query(N,zhe,!0);for(let L=0;L<H.length;L++)d.add(H[L])});let u=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=a4(h,this.collectedEnterElements),m=new Map,_=0;f.forEach((N,H)=>{let L=f4+_++;m.set(H,L),N.forEach(te=>Ms(te,L))});let g=[],p=new Set,b=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){let H=this.collectedLeaveElements[N],L=H[ca];L&&L.setForRemoval&&(g.push(H),p.add(H),L.hasAnimation?this.driver.query(H,Whe,!0).forEach(te=>p.add(te)):b.add(H))}let v=new Map,y=a4(h,Array.from(p));y.forEach((N,H)=>{let L=yP+_++;v.set(H,L),N.forEach(te=>Ms(te,L))}),e.push(()=>{f.forEach((N,H)=>{let L=m.get(H);N.forEach(te=>Bp(te,L))}),y.forEach((N,H)=>{let L=v.get(H);N.forEach(te=>Bp(te,L))}),g.forEach(N=>{this.processLeaveNode(N)})});let R=[],S=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(t).forEach(L=>{let te=L.player,Se=L.element;if(R.push(te),this.collectedEnterElements.length){let ve=Se[ca];if(ve&&ve.setForMove){if(ve.previousTriggersValues&&ve.previousTriggersValues.has(L.triggerName)){let ze=ve.previousTriggersValues.get(L.triggerName),qe=this.statesByElement.get(L.element);if(qe&&qe.has(L.triggerName)){let Be=qe.get(L.triggerName);Be.value=ze,qe.set(L.triggerName,Be)}}te.destroy();return}}let Pe=!u||!this.driver.containsElement(u,Se),Ge=v.get(Se),St=m.get(Se),K=this._buildInstruction(L,i,St,Ge,Pe);if(K.errors&&K.errors.length){S.push(K);return}if(Pe){te.onStart(()=>Wu(Se,K.fromStyles)),te.onDestroy(()=>Ja(Se,K.toStyles)),r.push(te);return}if(L.isFallbackTransition){te.onStart(()=>Wu(Se,K.fromStyles)),te.onDestroy(()=>Ja(Se,K.toStyles)),r.push(te);return}let Re=[];K.timelines.forEach(ve=>{ve.stretchStartingKeyframe=!0,this.disabledNodes.has(ve.element)||Re.push(ve)}),K.timelines=Re,i.append(Se,K.timelines);let We={instruction:K,player:te,element:Se};s.push(We),K.queriedElements.forEach(ve=>Yo(a,ve,[]).push(te)),K.preStyleProps.forEach((ve,ze)=>{if(ve.size){let qe=l.get(ze);qe||l.set(ze,qe=new Set),ve.forEach((Be,di)=>qe.add(di))}}),K.postStyleProps.forEach((ve,ze)=>{let qe=c.get(ze);qe||c.set(ze,qe=new Set),ve.forEach((Be,di)=>qe.add(di))})});if(S.length){let N=[];S.forEach(H=>{N.push(dhe(H.triggerName,H.errors))}),R.forEach(H=>H.destroy()),this.reportError(N)}let T=new Map,A=new Map;s.forEach(N=>{let H=N.element;i.has(H)&&(A.set(H,H),this._beforeAnimationBuild(N.player.namespaceId,N.instruction,T))}),r.forEach(N=>{let H=N.element;this._getPreviousPlayers(H,!1,N.namespaceId,N.triggerName,null).forEach(te=>{Yo(T,H,[]).push(te),te.destroy()})});let M=g.filter(N=>l4(N,l,c)),x=new Map;s4(x,this.driver,b,c,Wa).forEach(N=>{l4(N,l,c)&&M.push(N)});let z=new Map;f.forEach((N,H)=>{s4(z,this.driver,new Set(N),l,EM)}),M.forEach(N=>{let H=x.get(N),L=z.get(N);x.set(N,new Map([...H?.entries()??[],...L?.entries()??[]]))});let W=[],ee=[],se={};s.forEach(N=>{let{element:H,player:L,instruction:te}=N;if(i.has(H)){if(d.has(H)){L.onDestroy(()=>Ja(H,te.toStyles)),L.disabled=!0,L.overrideTotalTime(te.totalTime),r.push(L);return}let Se=se;if(A.size>1){let Ge=H,St=[];for(;Ge=Ge.parentNode;){let K=A.get(Ge);if(K){Se=K;break}St.push(Ge)}St.forEach(K=>A.set(K,Se))}let Pe=this._buildAnimation(L.namespaceId,te,T,o,z,x);if(L.setRealPlayer(Pe),Se===se)W.push(L);else{let Ge=this.playersByElement.get(Se);Ge&&Ge.length&&(L.parentPlayer=ad(Ge)),r.push(L)}}else Wu(H,te.fromStyles),L.onDestroy(()=>Ja(H,te.toStyles)),ee.push(L),d.has(H)&&r.push(L)}),ee.forEach(N=>{let H=o.get(N.element);if(H&&H.length){let L=ad(H);N.setRealPlayer(L)}}),r.forEach(N=>{N.parentPlayer?N.syncPlayerEvents(N.parentPlayer):N.destroy()});for(let N=0;N<g.length;N++){let H=g[N],L=H[ca];if(Bp(H,yP),L&&L.hasAnimation)continue;let te=[];if(a.size){let Pe=a.get(H);Pe&&Pe.length&&te.push(...Pe);let Ge=this.driver.query(H,xP,!0);for(let St=0;St<Ge.length;St++){let K=a.get(Ge[St]);K&&K.length&&te.push(...K)}}let Se=te.filter(Pe=>!Pe.destroyed);Se.length?Qhe(this,H,Se):this.processLeaveNode(H)}return g.length=0,W.forEach(N=>{this.players.push(N),N.onDone(()=>{N.destroy();let H=this.players.indexOf(N);this.players.splice(H,1)}),N.play()}),W}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let l=!o||o==Yb;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||s.push(c)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,t,i){let r=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:r;for(let l of t.timelines){let c=l.element,d=c!==o,u=Yo(i,c,[]);this._getPreviousPlayers(c,d,s,a,t.toState).forEach(f=>{let m=f.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),f.destroy(),u.push(f)})}Wu(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,s){let a=t.triggerName,l=t.element,c=[],d=new Set,u=new Set,h=t.timelines.map(m=>{let _=m.element;d.add(_);let g=_[ca];if(g&&g.removedBeforeQueried)return new ed(m.duration,m.delay);let p=_!==l,b=Khe((i.get(_)||$he).map(T=>T.getRealPlayer())).filter(T=>{let A=T;return A.element?A.element===_:!1}),v=o.get(_),y=s.get(_),R=c4(this._normalizer,m.keyframes,v,y),S=this._buildPlayer(m,R,b);if(m.subTimeline&&r&&u.add(_),p){let T=new Jb(e,a,_);T.setRealPlayer(S),c.push(T)}return S});c.forEach(m=>{Yo(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>Xhe(this.playersByQueriedElement,m.element,m))}),d.forEach(m=>Ms(m,KH));let f=ad(h);return f.onDestroy(()=>{d.forEach(m=>Bp(m,KH)),Ja(l,t.toStyles)}),u.forEach(m=>{Yo(r,m,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new ed(e.duration,e.delay)}},Jb=class{namespaceId;triggerName;element;_player=new ed;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>OP(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Yo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Xhe(n,e,t){let i=n.get(e);if(i){if(i.length){let r=i.indexOf(t);i.splice(r,1)}i.length==0&&n.delete(e)}return i}function Yhe(n){return n??null}function SS(n){return n&&n.nodeType===1}function Zhe(n){return n=="start"||n=="done"}function o4(n,e){let t=n.style.display;return n.style.display=e??"none",t}function s4(n,e,t,i,r){let o=[];t.forEach(l=>o.push(o4(l)));let s=[];i.forEach((l,c)=>{let d=new Map;l.forEach(u=>{let h=e.computeStyle(c,u,r);d.set(u,h),(!h||h.length==0)&&(c[ca]=qhe,s.push(c))}),n.set(c,d)});let a=0;return t.forEach(l=>o4(l,o[a++])),s}function a4(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let i=1,r=new Set(e),o=new Map;function s(a){if(!a)return i;let l=o.get(a);if(l)return l;let c=a.parentNode;return t.has(c)?l=c:r.has(c)?l=i:l=s(c),o.set(a,l),l}return e.forEach(a=>{let l=s(a);l!==i&&t.get(l).push(a)}),t}function Ms(n,e){n.classList?.add(e)}function Bp(n,e){n.classList?.remove(e)}function Qhe(n,e,t){ad(t).onDone(()=>n.processLeaveNode(e))}function Khe(n){let e=[];return y4(n,e),e}function y4(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof _b?y4(i.players,e):e.push(i)}}function Jhe(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function l4(n,e,t){let i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}var Up=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,i){this._driver=t,this._normalizer=i,this._transitionEngine=new FP(e.body,t,i),this._timelineEngine=new IP(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){let s=e+"-"+r,a=this._triggerCache[s];if(!a){let l=[],c=[],d=g4(this._driver,o,l,c);if(l.length)throw Jue(r,l);a=Bhe(r,d,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if(i.charAt(0)=="@"){let[o,s]=ZH(i),a=r;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if(i.charAt(0)=="@"){let[s,a]=ZH(i);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function efe(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=vP(e[0]),e.length>1&&(i=vP(e[e.length-1]))):e instanceof Map&&(t=vP(e)),t||i?new tfe(n,t,i):null}var tfe=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Ja(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ja(this._element,this._initialStyles),this._endStyles&&(Ja(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Wu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Wu(this._element,this._endStyles),this._endStyles=null),Ja(this._element,this._initialStyles),this._state=3)}}return n})();function vP(n){let e=null;return n.forEach((t,i)=>{ife(i)&&(e=e||new Map,e.set(i,t))}),e}function ife(n){return n==="display"||n==="position"}var FS=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:UP(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},kS=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return d4(e,t)}getParentElement(e){return NP(e)}query(e,t,i){return u4(e,t,i)}computeStyle(e,t,i){return UP(e,t)}animate(e,t,i,r,o,s=[]){let a=r==0?"both":"forwards",l={duration:i,delay:r,fill:a};o&&(l.easing=o);let c=new Map,d=s.filter(f=>f instanceof FS);xhe(i,r)&&d.forEach(f=>{f.currentSnapshot.forEach((m,_)=>c.set(_,m))});let u=bhe(t).map(f=>new Map(f));u=whe(e,u,c);let h=efe(e,u);return new FS(e,u,l,h)}};var TS="@",x4="@.disabled",OS=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==TS&&t==x4?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i,r){return this.delegate.listen(e,t,i,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},kP=class extends OS{factory;constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==TS?t.charAt(1)=="."&&t==x4?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i,r){if(t.charAt(0)==TS){let o=nfe(e),s=t.slice(1),a="";return s.charAt(0)!=TS&&([s,a]=rfe(s)),this.engine.listen(this.namespaceId,o,s,a,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,i,l)})}return this.delegate.listen(e,t,i,r)}};function nfe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function rfe(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var jS=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,t.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(e,t){let i="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let c=this._rendererCache,d=c.get(r);if(!d){let u=()=>c.delete(r);d=new OS(i,r,this.engine,u),c.set(r,d)}return d}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(o,s,e,c.name,c)};return t.data.animation.forEach(a),new kP(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var sfe=(()=>{class n extends Up{constructor(t,i,r){super(t,i,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||n)(He(Pt),He($u),He(qu))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();function afe(){return new ES}function lfe(n,e,t){return new jS(n,e,t)}var M4=[{provide:qu,useFactory:afe},{provide:Up,useClass:sfe},{provide:ho,useFactory:lfe,deps:[b0,Up,nt]}],w4=[{provide:$u,useFactory:()=>new kS},{provide:xr,useValue:"BrowserAnimations"},...M4],cfe=[{provide:$u,useClass:LP},{provide:xr,useValue:"NoopAnimations"},...M4],S4=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?cfe:w4}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ke({type:n});static \u0275inj=Qe({providers:w4,imports:[y0]})}return n})();var T4=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Ke({type:n,bootstrap:[OH]})}static{this.\u0275inj=Qe({providers:[yV({fullLibraryLoader:()=>import("./chunk-Y4VJBSUU.js")}),Ga],imports:[y0,RH,Rz,XH,sH,wV,TV,S4,I3,qb,hb,FH,pb,$b,tL]})}}return n})();var R4={production:!0};R4.production&&void 0;dL().bootstrapModule(T4,{ngZoneEventCoalescing:!0,ngZoneRunCoalescing:!0}).catch(n=>console.error(n));
