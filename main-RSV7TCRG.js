import{a as xe,b as pi,c as Rw,e as s4,g as yi}from"./chunk-MON7YFGF.js";function SI(n,e){return Object.is(n,e)}var tr=null,Wf=!1,tb=1,Qo=Symbol("SIGNAL");function gi(n){let e=tr;return tr=n,e}function a4(){return Wf}var qf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function nb(n){if(Wf)throw new Error("");if(tr===null)return;tr.consumerOnSignalRead(n);let e=tr.nextProducerIndex++;if(mu(tr),e<tr.producerNode.length&&tr.producerNode[e]!==n&&$f(tr)){let i=tr.producerNode[e];ab(i,tr.producerIndexOfThis[e])}tr.producerNode[e]!==n&&(tr.producerNode[e]=n,tr.producerIndexOfThis[e]=$f(tr)?DI(n,tr,e):0),tr.producerLastReadVersion[e]=n.version}function c4(){tb++}function RI(n){if(!($f(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===tb)){if(!n.producerMustRecompute(n)&&!sb(n)){n.dirty=!1,n.lastCleanEpoch=tb;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=tb}}function TI(n){if(n.liveConsumerNode===void 0)return;let e=Wf;Wf=!0;try{for(let i of n.liveConsumerNode)i.dirty||EI(i)}finally{Wf=e}}function CI(){return tr?.consumerAllowSignalWrites!==!1}function EI(n){n.dirty=!0,TI(n),n.consumerMarkedDirty?.(n)}function rb(n){return n&&(n.nextProducerIndex=0),gi(n)}function ob(n,e){if(gi(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if($f(n))for(let i=n.nextProducerIndex;i<n.producerNode.length;i++)ab(n.producerNode[i],n.producerIndexOfThis[i]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function sb(n){mu(n);for(let e=0;e<n.producerNode.length;e++){let i=n.producerNode[e],t=n.producerLastReadVersion[e];if(t!==i.version||(RI(i),t!==i.version))return!0}return!1}function Dw(n){if(mu(n),$f(n))for(let e=0;e<n.producerNode.length;e++)ab(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function DI(n,e,i){if(AI(n),mu(n),n.liveConsumerNode.length===0)for(let t=0;t<n.producerNode.length;t++)n.producerIndexOfThis[t]=DI(n.producerNode[t],n,t);return n.liveConsumerIndexOfThis.push(i),n.liveConsumerNode.push(e)-1}function ab(n,e){if(AI(n),mu(n),n.liveConsumerNode.length===1)for(let t=0;t<n.producerNode.length;t++)ab(n.producerNode[t],n.producerIndexOfThis[t]);let i=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[i],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[i],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let t=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];mu(r),r.producerIndexOfThis[t]=e}}function $f(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function mu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function AI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function II(n){let e=Object.create(l4);e.computation=n;let i=()=>{if(RI(e),nb(e),e.value===ib)throw e.error;return e.value};return i[Qo]=e,i}var Tw=Symbol("UNSET"),Cw=Symbol("COMPUTING"),ib=Symbol("ERRORED"),l4=pi(xe({},qf),{value:Tw,dirty:!0,error:null,equal:SI,producerMustRecompute(n){return n.value===Tw||n.value===Cw},producerRecomputeValue(n){if(n.value===Cw)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Cw;let i=rb(n),t;try{t=n.computation()}catch(r){t=ib,n.error=r}finally{ob(n,i)}if(e!==Tw&&e!==ib&&t!==ib&&n.equal(e,t)){n.value=e;return}n.value=t,n.version++}});function d4(){throw new Error}var PI=d4;function kI(){PI()}function FI(n){PI=n}var u4=null;function jI(n){let e=Object.create(Aw);e.value=n;let i=()=>(nb(e),e.value);return i[Qo]=e,i}function cb(n,e){CI()||kI(),n.equal(n.value,e)||(n.value=e,h4(n))}function OI(n,e){CI()||kI(),cb(n,e(n.value))}var Aw=pi(xe({},qf),{equal:SI,value:void 0});function h4(n){n.version++,c4(),TI(n),u4?.()}function NI(n,e,i){let t=Object.create(f4);i&&(t.consumerAllowSignalWrites=!0),t.fn=n,t.schedule=e;let r=c=>{t.cleanupFn=c};function o(c){return c.fn===null&&c.schedule===null}function s(c){o(c)||(Dw(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=Ew)}let a=()=>{if(t.fn===null)return;if(a4())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(t.dirty=!1,t.hasRun&&!sb(t))return;t.hasRun=!0;let c=rb(t);try{t.cleanupFn(),t.cleanupFn=Ew,t.fn(r)}finally{ob(t,c)}};return t.ref={notify:()=>EI(t),run:a,cleanup:()=>t.cleanupFn(),destroy:()=>s(t),[Qo]:t},t.ref}var Ew=()=>{},f4=pi(xe({},qf),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:Ew});function St(n){return typeof n=="function"}function pu(n){let i=n(t=>{Error.call(t),t.stack=new Error().stack});return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}var lb=pu(n=>function(i){n(this),this.message=i?`${i.length} errors occurred during unsubscription:
${i.map((t,r)=>`${r+1}) ${t.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=i});function Pl(n,e){if(n){let i=n.indexOf(e);0<=i&&n.splice(i,1)}}var bi=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:i}=this;if(i)if(this._parentage=null,Array.isArray(i))for(let o of i)o.remove(this);else i.remove(this);let{initialTeardown:t}=this;if(St(t))try{t()}catch(o){e=o instanceof lb?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{LI(o)}catch(s){e=e??[],s instanceof lb?e=[...e,...s.errors]:e.push(s)}}if(e)throw new lb(e)}}add(e){var i;if(e&&e!==this)if(this.closed)LI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(i=this._finalizers)!==null&&i!==void 0?i:[]).push(e)}}_hasParent(e){let{_parentage:i}=this;return i===e||Array.isArray(i)&&i.includes(e)}_addParent(e){let{_parentage:i}=this;this._parentage=Array.isArray(i)?(i.push(e),i):i?[i,e]:e}_removeParent(e){let{_parentage:i}=this;i===e?this._parentage=null:Array.isArray(i)&&Pl(i,e)}remove(e){let{_finalizers:i}=this;i&&Pl(i,e),e instanceof n&&e._removeParent(this)}};bi.EMPTY=(()=>{let n=new bi;return n.closed=!0,n})();var Iw=bi.EMPTY;function db(n){return n instanceof bi||n&&"closed"in n&&St(n.remove)&&St(n.add)&&St(n.unsubscribe)}function LI(n){St(n)?n():n.unsubscribe()}var Ko={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var gu={setTimeout(n,e,...i){let{delegate:t}=gu;return t?.setTimeout?t.setTimeout(n,e,...i):setTimeout(n,e,...i)},clearTimeout(n){let{delegate:e}=gu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ub(n){gu.setTimeout(()=>{let{onUnhandledError:e}=Ko;if(e)e(n);else throw n})}function Xf(){}var BI=Pw("C",void 0,void 0);function UI(n){return Pw("E",void 0,n)}function VI(n){return Pw("N",n,void 0)}function Pw(n,e,i){return{kind:n,value:e,error:i}}var kl=null;function bu(n){if(Ko.useDeprecatedSynchronousErrorHandling){let e=!kl;if(e&&(kl={errorThrown:!1,error:null}),n(),e){let{errorThrown:i,error:t}=kl;if(kl=null,i)throw t}}else n()}function zI(n){Ko.useDeprecatedSynchronousErrorHandling&&kl&&(kl.errorThrown=!0,kl.error=n)}var Fl=class extends bi{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,db(e)&&e.add(this)):this.destination=g4}static create(e,i,t){return new Jo(e,i,t)}next(e){this.isStopped?Fw(VI(e),this):this._next(e)}error(e){this.isStopped?Fw(UI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Fw(BI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},m4=Function.prototype.bind;function kw(n,e){return m4.call(n,e)}var jw=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:i}=this;if(i.next)try{i.next(e)}catch(t){hb(t)}}error(e){let{partialObserver:i}=this;if(i.error)try{i.error(e)}catch(t){hb(t)}else hb(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(i){hb(i)}}},Jo=class extends Fl{constructor(e,i,t){super();let r;if(St(e)||!e)r={next:e??void 0,error:i??void 0,complete:t??void 0};else{let o;this&&Ko.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&kw(e.next,o),error:e.error&&kw(e.error,o),complete:e.complete&&kw(e.complete,o)}):r=e}this.destination=new jw(r)}};function hb(n){Ko.useDeprecatedSynchronousErrorHandling?zI(n):ub(n)}function p4(n){throw n}function Fw(n,e){let{onStoppedNotification:i}=Ko;i&&gu.setTimeout(()=>i(n,e))}var g4={closed:!0,next:Xf,error:p4,complete:Xf};var _u=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Fr(n){return n}function Ow(...n){return Nw(n)}function Nw(n){return n.length===0?Fr:n.length===1?n[0]:function(i){return n.reduce((t,r)=>r(t),i)}}var kt=(()=>{class n{constructor(i){i&&(this._subscribe=i)}lift(i){let t=new n;return t.source=this,t.operator=i,t}subscribe(i,t,r){let o=_4(i)?i:new Jo(i,t,r);return bu(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(i){try{return this._subscribe(i)}catch(t){i.error(t)}}forEach(i,t){return t=HI(t),new t((r,o)=>{let s=new Jo({next:a=>{try{i(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(i){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(i)}[_u](){return this}pipe(...i){return Nw(i)(this)}toPromise(i){return i=HI(i),new i((t,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>t(o))})}}return n.create=e=>new n(e),n})();function HI(n){var e;return(e=n??Ko.Promise)!==null&&e!==void 0?e:Promise}function b4(n){return n&&St(n.next)&&St(n.error)&&St(n.complete)}function _4(n){return n&&n instanceof Fl||b4(n)&&db(n)}function Lw(n){return St(n?.lift)}function Xt(n){return e=>{if(Lw(e))return e.lift(function(i){try{return n(i,this)}catch(t){this.error(t)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ht(n,e,i,t,r){return new Bw(n,e,i,t,r)}var Bw=class extends Fl{constructor(e,i,t,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=i?function(a){try{i(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=t?function(){try{t()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:i}=this;super.unsubscribe(),!i&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function vu(){return Xt((n,e)=>{let i=null;n._refCount++;let t=Ht(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){i=null;return}let r=n._connection,o=i;i=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(t),t.closed||(i=n.connect())})}var yu=class extends kt{constructor(e,i){super(),this.source=e,this.subjectFactory=i,this._subject=null,this._refCount=0,this._connection=null,Lw(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new bi;let i=this.getSubject();e.add(this.source.subscribe(Ht(i,void 0,()=>{this._teardown(),i.complete()},t=>{this._teardown(),i.error(t)},()=>this._teardown()))),e.closed&&(this._connection=null,e=bi.EMPTY)}return e}refCount(){return vu()(this)}};var GI=pu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ht=(()=>{class n extends kt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(i){let t=new fb(this,this);return t.operator=i,t}_throwIfClosed(){if(this.closed)throw new GI}next(i){bu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let t of this.currentObservers)t.next(i)}})}error(i){bu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=i;let{observers:t}=this;for(;t.length;)t.shift().error(i)}})}complete(){bu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:i}=this;for(;i.length;)i.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var i;return((i=this.observers)===null||i===void 0?void 0:i.length)>0}_trySubscribe(i){return this._throwIfClosed(),super._trySubscribe(i)}_subscribe(i){return this._throwIfClosed(),this._checkFinalizedStatuses(i),this._innerSubscribe(i)}_innerSubscribe(i){let{hasError:t,isStopped:r,observers:o}=this;return t||r?Iw:(this.currentObservers=null,o.push(i),new bi(()=>{this.currentObservers=null,Pl(o,i)}))}_checkFinalizedStatuses(i){let{hasError:t,thrownError:r,isStopped:o}=this;t?i.error(r):o&&i.complete()}asObservable(){let i=new kt;return i.source=this,i}}return n.create=(e,i)=>new fb(e,i),n})(),fb=class extends ht{constructor(e,i){super(),this.destination=e,this.source=i}next(e){var i,t;(t=(i=this.destination)===null||i===void 0?void 0:i.next)===null||t===void 0||t.call(i,e)}error(e){var i,t;(t=(i=this.destination)===null||i===void 0?void 0:i.error)===null||t===void 0||t.call(i,e)}complete(){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||i===void 0||i.call(e)}_subscribe(e){var i,t;return(t=(i=this.source)===null||i===void 0?void 0:i.subscribe(e))!==null&&t!==void 0?t:Iw}};var xn=class extends ht{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let i=super._subscribe(e);return!i.closed&&e.next(this._value),i}getValue(){let{hasError:e,thrownError:i,_value:t}=this;if(e)throw i;return this._throwIfClosed(),t}next(e){super.next(this._value=e)}};var Yf={now(){return(Yf.delegate||Date).now()},delegate:void 0};var jl=class extends ht{constructor(e=1/0,i=1/0,t=Yf){super(),this._bufferSize=e,this._windowTime=i,this._timestampProvider=t,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=i===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,i)}next(e){let{isStopped:i,_buffer:t,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;i||(t.push(e),!r&&t.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let i=this._innerSubscribe(e),{_infiniteTimeWindow:t,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=t?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),i}_trimBuffer(){let{_bufferSize:e,_timestampProvider:i,_buffer:t,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<t.length&&t.splice(0,t.length-o),!r){let s=i.now(),a=0;for(let c=1;c<t.length&&t[c]<=s;c+=2)a=c;a&&t.splice(0,a+1)}}};var mb=class extends bi{constructor(e,i){super()}schedule(e,i=0){return this}};var Zf={setInterval(n,e,...i){let{delegate:t}=Zf;return t?.setInterval?t.setInterval(n,e,...i):setInterval(n,e,...i)},clearInterval(n){let{delegate:e}=Zf;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var pb=class extends mb{constructor(e,i){super(e,i),this.scheduler=e,this.work=i,this.pending=!1}schedule(e,i=0){var t;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,i)),this.pending=!0,this.delay=i,this.id=(t=this.id)!==null&&t!==void 0?t:this.requestAsyncId(o,this.id,i),this}requestAsyncId(e,i,t=0){return Zf.setInterval(e.flush.bind(e,this),t)}recycleAsyncId(e,i,t=0){if(t!=null&&this.delay===t&&this.pending===!1)return i;i!=null&&Zf.clearInterval(i)}execute(e,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let t=this._execute(e,i);if(t)return t;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,i){let t=!1,r;try{this.work(e)}catch(o){t=!0,r=o||new Error("Scheduled action threw falsy error")}if(t)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:i}=this,{actions:t}=i;this.work=this.state=this.scheduler=null,this.pending=!1,Pl(t,this),e!=null&&(this.id=this.recycleAsyncId(i,e,null)),this.delay=null,super.unsubscribe()}}};var xu=class n{constructor(e,i=n.now){this.schedulerActionCtor=e,this.now=i}schedule(e,i=0,t){return new this.schedulerActionCtor(this,e).schedule(t,i)}};xu.now=Yf.now;var gb=class extends xu{constructor(e,i=xu.now){super(e,i),this.actions=[],this._active=!1}flush(e){let{actions:i}=this;if(this._active){i.push(e);return}let t;this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=i.shift());if(this._active=!1,t){for(;e=i.shift();)e.unsubscribe();throw t}}};var Qf=new gb(pb),WI=Qf;var mn=new kt(n=>n.complete());function bb(n){return n&&St(n.schedule)}function Uw(n){return n[n.length-1]}function _b(n){return St(Uw(n))?n.pop():void 0}function Es(n){return bb(Uw(n))?n.pop():void 0}function $I(n,e){return typeof Uw(n)=="number"?n.pop():e}function XI(n,e,i,t){function r(o){return o instanceof i?o:new i(function(s){s(o)})}return new(i||(i=Promise))(function(o,s){function a(d){try{l(t.next(d))}catch(u){s(u)}}function c(d){try{l(t.throw(d))}catch(u){s(u)}}function l(d){d.done?o(d.value):r(d.value).then(a,c)}l((t=t.apply(n,e||[])).next())})}function qI(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],t=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ol(n){return this instanceof Ol?(this.v=n,this):new Ol(n)}function YI(n,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i.apply(n,e||[]),r,o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(h){t[h]&&(r[h]=function(f){return new Promise(function(p,b){o.push([h,f,p,b])>1||a(h,f)})})}function a(h,f){try{c(t[h](f))}catch(p){u(o[0][3],p)}}function c(h){h.value instanceof Ol?Promise.resolve(h.value.v).then(l,d):u(o[0][2],h)}function l(h){a("next",h)}function d(h){a("throw",h)}function u(h,f){h(f),o.shift(),o.length&&a(o[0][0],o[0][1])}}function ZI(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],i;return e?e.call(n):(n=typeof qI=="function"?qI(n):n[Symbol.iterator](),i={},t("next"),t("throw"),t("return"),i[Symbol.asyncIterator]=function(){return this},i);function t(o){i[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),r(a,c,s.done,s.value)})}}function r(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var wu=n=>n&&typeof n.length=="number"&&typeof n!="function";function vb(n){return St(n?.then)}function yb(n){return St(n[_u])}function xb(n){return Symbol.asyncIterator&&St(n?.[Symbol.asyncIterator])}function wb(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function v4(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Mb=v4();function Sb(n){return St(n?.[Mb])}function Rb(n){return YI(this,arguments,function*(){let i=n.getReader();try{for(;;){let{value:t,done:r}=yield Ol(i.read());if(r)return yield Ol(void 0);yield yield Ol(t)}}finally{i.releaseLock()}})}function Tb(n){return St(n?.getReader)}function Ni(n){if(n instanceof kt)return n;if(n!=null){if(yb(n))return y4(n);if(wu(n))return x4(n);if(vb(n))return w4(n);if(xb(n))return QI(n);if(Sb(n))return M4(n);if(Tb(n))return S4(n)}throw wb(n)}function y4(n){return new kt(e=>{let i=n[_u]();if(St(i.subscribe))return i.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function x4(n){return new kt(e=>{for(let i=0;i<n.length&&!e.closed;i++)e.next(n[i]);e.complete()})}function w4(n){return new kt(e=>{n.then(i=>{e.closed||(e.next(i),e.complete())},i=>e.error(i)).then(null,ub)})}function M4(n){return new kt(e=>{for(let i of n)if(e.next(i),e.closed)return;e.complete()})}function QI(n){return new kt(e=>{R4(n,e).catch(i=>e.error(i))})}function S4(n){return QI(Rb(n))}function R4(n,e){var i,t,r,o;return XI(this,void 0,void 0,function*(){try{for(i=ZI(n);t=yield i.next(),!t.done;){let s=t.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{t&&!t.done&&(o=i.return)&&(yield o.call(i))}finally{if(r)throw r.error}}e.complete()})}function Xr(n,e,i,t=0,r=!1){let o=e.schedule(function(){i(),r?n.add(this.schedule(null,t)):this.unsubscribe()},t);if(n.add(o),!r)return o}function Cb(n,e=0){return Xt((i,t)=>{i.subscribe(Ht(t,r=>Xr(t,n,()=>t.next(r),e),()=>Xr(t,n,()=>t.complete(),e),r=>Xr(t,n,()=>t.error(r),e)))})}function Eb(n,e=0){return Xt((i,t)=>{t.add(n.schedule(()=>i.subscribe(t),e))})}function KI(n,e){return Ni(n).pipe(Eb(e),Cb(e))}function JI(n,e){return Ni(n).pipe(Eb(e),Cb(e))}function eP(n,e){return new kt(i=>{let t=0;return e.schedule(function(){t===n.length?i.complete():(i.next(n[t++]),i.closed||this.schedule())})})}function tP(n,e){return new kt(i=>{let t;return Xr(i,e,()=>{t=n[Mb](),Xr(i,e,()=>{let r,o;try{({value:r,done:o}=t.next())}catch(s){i.error(s);return}o?i.complete():i.next(r)},0,!0)}),()=>St(t?.return)&&t.return()})}function Db(n,e){if(!n)throw new Error("Iterable cannot be null");return new kt(i=>{Xr(i,e,()=>{let t=n[Symbol.asyncIterator]();Xr(i,e,()=>{t.next().then(r=>{r.done?i.complete():i.next(r.value)})},0,!0)})})}function iP(n,e){return Db(Rb(n),e)}function nP(n,e){if(n!=null){if(yb(n))return KI(n,e);if(wu(n))return eP(n,e);if(vb(n))return JI(n,e);if(xb(n))return Db(n,e);if(Sb(n))return tP(n,e);if(Tb(n))return iP(n,e)}throw wb(n)}function Fi(n,e){return e?nP(n,e):Ni(n)}function dt(...n){let e=Es(n);return Fi(n,e)}function Yr(n,e){let i=St(n)?n:()=>n,t=r=>r.error(i());return new kt(e?r=>e.schedule(t,0,r):t)}function Ab(n){return!!n&&(n instanceof kt||St(n.lift)&&St(n.subscribe))}var es=pu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Vw(n,e){let i=typeof e=="object";return new Promise((t,r)=>{let o=new Jo({next:s=>{t(s),o.unsubscribe()},error:r,complete:()=>{i?t(e.defaultValue):r(new es)}});n.subscribe(o)})}function rP(n){return n instanceof Date&&!isNaN(n)}function st(n,e){return Xt((i,t)=>{let r=0;i.subscribe(Ht(t,o=>{t.next(n.call(e,o,r++))}))})}var{isArray:T4}=Array;function C4(n,e){return T4(e)?n(...e):n(e)}function Mu(n){return st(e=>C4(n,e))}var{isArray:E4}=Array,{getPrototypeOf:D4,prototype:A4,keys:I4}=Object;function Ib(n){if(n.length===1){let e=n[0];if(E4(e))return{args:e,keys:null};if(P4(e)){let i=I4(e);return{args:i.map(t=>e[t]),keys:i}}}return{args:n,keys:null}}function P4(n){return n&&typeof n=="object"&&D4(n)===A4}function Pb(n,e){return n.reduce((i,t,r)=>(i[t]=e[r],i),{})}function Nl(...n){let e=Es(n),i=_b(n),{args:t,keys:r}=Ib(n);if(t.length===0)return Fi([],e);let o=new kt(k4(t,e,r?s=>Pb(r,s):Fr));return i?o.pipe(Mu(i)):o}function k4(n,e,i=Fr){return t=>{oP(e,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let c=0;c<r;c++)oP(e,()=>{let l=Fi(n[c],e),d=!1;l.subscribe(Ht(t,u=>{o[c]=u,d||(d=!0,a--),a||t.next(i(o.slice()))},()=>{--s||t.complete()}))},t)},t)}}function oP(n,e,i){n?Xr(i,n,e):e()}function sP(n,e,i,t,r,o,s,a){let c=[],l=0,d=0,u=!1,h=()=>{u&&!c.length&&!l&&e.complete()},f=b=>l<t?p(b):c.push(b),p=b=>{o&&e.next(b),l++;let m=!1;Ni(i(b,d++)).subscribe(Ht(e,g=>{r?.(g),o?f(g):e.next(g)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;c.length&&l<t;){let g=c.shift();s?Xr(e,s,()=>p(g)):p(g)}h()}catch(g){e.error(g)}}))};return n.subscribe(Ht(e,f,()=>{u=!0,h()})),()=>{a?.()}}function wn(n,e,i=1/0){return St(e)?wn((t,r)=>st((o,s)=>e(t,o,r,s))(Ni(n(t,r))),i):(typeof e=="number"&&(i=e),Xt((t,r)=>sP(t,r,n,i)))}function Cc(n=1/0){return wn(Fr,n)}function aP(){return Cc(1)}function Ec(...n){return aP()(Fi(n,Es(n)))}function kb(n){return new kt(e=>{Ni(n()).subscribe(e)})}function Ll(...n){let e=_b(n),{args:i,keys:t}=Ib(n),r=new kt(o=>{let{length:s}=i;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let d=0;d<s;d++){let u=!1;Ni(i[d]).subscribe(Ht(o,h=>{u||(u=!0,l--),a[d]=h},()=>c--,void 0,()=>{(!c||!u)&&(l||o.next(t?Pb(t,a):a),o.complete())}))}});return e?r.pipe(Mu(e)):r}var F4=["addListener","removeListener"],j4=["addEventListener","removeEventListener"],O4=["on","off"];function Fo(n,e,i,t){if(St(i)&&(t=i,i=void 0),t)return Fo(n,e,i).pipe(Mu(t));let[r,o]=B4(n)?j4.map(s=>a=>n[s](e,a,i)):N4(n)?F4.map(cP(n,e)):L4(n)?O4.map(cP(n,e)):[];if(!r&&wu(n))return wn(s=>Fo(s,e,i))(Ni(n));if(!r)throw new TypeError("Invalid event target");return new kt(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function cP(n,e){return i=>t=>n[i](e,t)}function N4(n){return St(n.addListener)&&St(n.removeListener)}function L4(n){return St(n.on)&&St(n.off)}function B4(n){return St(n.addEventListener)&&St(n.removeEventListener)}function Kf(n=0,e,i=WI){let t=-1;return e!=null&&(bb(e)?i=e:t=e),new kt(r=>{let o=rP(n)?+n-i.now():n;o<0&&(o=0);let s=0;return i.schedule(function(){r.closed||(r.next(s++),0<=t?this.schedule(void 0,t):r.complete())},o)})}function ts(...n){let e=Es(n),i=$I(n,1/0),t=n;return t.length?t.length===1?Ni(t[0]):Cc(i)(Fi(t,e)):mn}function _i(n,e){return Xt((i,t)=>{let r=0;i.subscribe(Ht(t,o=>n.call(e,o,r++)&&t.next(o)))})}function lP(n){return Xt((e,i)=>{let t=!1,r=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,t){t=!1;let l=r;r=null,i.next(l)}s&&i.complete()},c=()=>{o=null,s&&i.complete()};e.subscribe(Ht(i,l=>{t=!0,r=l,o||Ni(n(l)).subscribe(o=Ht(i,a,c))},()=>{s=!0,(!t||!o||o.closed)&&i.complete()}))})}function Fb(n,e=Qf){return lP(()=>Kf(n,e))}function jr(n){return Xt((e,i)=>{let t=null,r=!1,o;t=e.subscribe(Ht(i,void 0,void 0,s=>{o=Ni(n(s,jr(n)(e))),t?(t.unsubscribe(),t=null,o.subscribe(i)):r=!0})),r&&(t.unsubscribe(),t=null,o.subscribe(i))})}function dP(n,e,i,t,r){return(o,s)=>{let a=i,c=e,l=0;o.subscribe(Ht(s,d=>{let u=l++;c=a?n(c,d,u):(a=!0,d),t&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}function Aa(n,e){return St(e)?wn(n,e,1):wn(n,1)}function Ia(n,e=Qf){return Xt((i,t)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let l=o;o=null,t.next(l)}};function c(){let l=s+n,d=e.now();if(d<l){r=this.schedule(void 0,l-d),t.add(r);return}a()}i.subscribe(Ht(t,l=>{o=l,s=e.now(),r||(r=e.schedule(c,n),t.add(r))},()=>{a(),t.complete()},void 0,()=>{o=r=null}))})}function Dc(n){return Xt((e,i)=>{let t=!1;e.subscribe(Ht(i,r=>{t=!0,i.next(r)},()=>{t||i.next(n),i.complete()}))})}function Mn(n){return n<=0?()=>mn:Xt((e,i)=>{let t=0;e.subscribe(Ht(i,r=>{++t<=n&&(i.next(r),n<=t&&i.complete())}))})}function Su(n){return st(()=>n)}function Ac(n,e=Fr){return n=n??U4,Xt((i,t)=>{let r,o=!0;i.subscribe(Ht(t,s=>{let a=e(s);(o||!n(r,a))&&(o=!1,r=a,t.next(s))}))})}function U4(n,e){return n===e}function jb(n=V4){return Xt((e,i)=>{let t=!1;e.subscribe(Ht(i,r=>{t=!0,i.next(r)},()=>t?i.complete():i.error(n())))})}function V4(){return new es}function Ds(n){return Xt((e,i)=>{try{e.subscribe(i)}finally{i.add(n)}})}function As(n,e){let i=arguments.length>=2;return t=>t.pipe(n?_i((r,o)=>n(r,o,t)):Fr,Mn(1),i?Dc(e):jb(()=>new es))}function Ru(n){return n<=0?()=>mn:Xt((e,i)=>{let t=[];e.subscribe(Ht(i,r=>{t.push(r),n<t.length&&t.shift()},()=>{for(let r of t)i.next(r);i.complete()},void 0,()=>{t=null}))})}function zw(n,e){let i=arguments.length>=2;return t=>t.pipe(n?_i((r,o)=>n(r,o,t)):Fr,Ru(1),i?Dc(e):jb(()=>new es))}function Hw(n,e){return Xt(dP(n,e,arguments.length>=2,!0))}function Jf(n={}){let{connector:e=()=>new ht,resetOnError:i=!0,resetOnComplete:t=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,c,l=0,d=!1,u=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=c=void 0,d=u=!1},p=()=>{let b=s;f(),b?.unsubscribe()};return Xt((b,m)=>{l++,!u&&!d&&h();let g=c=c??e();m.add(()=>{l--,l===0&&!u&&!d&&(a=Gw(p,r))}),g.subscribe(m),!s&&l>0&&(s=new Jo({next:v=>g.next(v),error:v=>{u=!0,h(),a=Gw(f,i,v),g.error(v)},complete:()=>{d=!0,h(),a=Gw(f,t),g.complete()}}),Ni(b).subscribe(s))})(o)}}function Gw(n,e,...i){if(e===!0){n();return}if(e===!1)return;let t=new Jo({next:()=>{t.unsubscribe(),n()}});return Ni(e(...i)).subscribe(t)}function Bl(n,e,i){let t,r=!1;return n&&typeof n=="object"?{bufferSize:t=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:i}=n:t=n??1/0,Jf({connector:()=>new jl(t,e,i),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Ul(n){return _i((e,i)=>n<=i)}function mo(...n){let e=Es(n);return Xt((i,t)=>{(e?Ec(n,i,e):Ec(n,i)).subscribe(t)})}function An(n,e){return Xt((i,t)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&t.complete();i.subscribe(Ht(t,c=>{r?.unsubscribe();let l=0,d=o++;Ni(n(c,d)).subscribe(r=Ht(t,u=>t.next(e?e(c,u,d,l++):u),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Ti(n){return Xt((e,i)=>{Ni(n).subscribe(Ht(i,()=>i.complete(),Xf)),!i.closed&&e.subscribe(i)})}function Ui(n,e,i){let t=St(n)||e||i?{next:n,error:e,complete:i}:n;return t?Xt((r,o)=>{var s;(s=t.subscribe)===null||s===void 0||s.call(t);let a=!0;r.subscribe(Ht(o,c=>{var l;(l=t.next)===null||l===void 0||l.call(t,c),o.next(c)},()=>{var c;a=!1,(c=t.complete)===null||c===void 0||c.call(t),o.complete()},c=>{var l;a=!1,(l=t.error)===null||l===void 0||l.call(t,c),o.error(c)},()=>{var c,l;a&&((c=t.unsubscribe)===null||c===void 0||c.call(t)),(l=t.finalize)===null||l===void 0||l.call(t)}))}):Fr}var tk="https://g.co/ng/security#xss",Pe=class extends Error{constructor(e,i){super(__(e,i)),this.code=e}};function __(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var ik=Symbol("InputSignalNode#UNSET"),z4=pi(xe({},Aw),{transformFn:void 0,applyValueToInputSignal(n,e){cb(n,e)}});function nk(n,e){let i=Object.create(z4);i.value=n,i.transformFn=e?.transform;function t(){if(nb(i),i.value===ik)throw new Pe(-950,!1);return i.value}return t[Qo]=i,t}function pm(n){return{toString:n}.toString()}var Ob="__parameters__";function H4(n){return function(...i){if(n){let t=n(...i);for(let r in t)this[r]=t[r]}}}function rk(n,e,i){return pm(()=>{let t=H4(e);function r(...o){if(this instanceof r)return t.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(c,l,d){let u=c.hasOwnProperty(Ob)?c[Ob]:Object.defineProperty(c,Ob,{value:[]})[Ob];for(;u.length<=d;)u.push(null);return(u[d]=u[d]||[]).push(s),c}}return i&&(r.prototype=Object.create(i.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var ur=globalThis;function $i(n){for(let e in n)if(n[e]===$i)return e;throw Error("Could not find renamed property on target object.")}function G4(n,e){for(let i in e)e.hasOwnProperty(i)&&!n.hasOwnProperty(i)&&(n[i]=e[i])}function Nr(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Nr).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let i=e.indexOf(`
`);return i===-1?e:e.substring(0,i)}function oM(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var W4=$i({__forward_ref__:$i});function ge(n){return n.__forward_ref__=ge,n.toString=function(){return Nr(this())},n}function Or(n){return ok(n)?n():n}function ok(n){return typeof n=="function"&&n.hasOwnProperty(W4)&&n.__forward_ref__===ge}function Me(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ke(n){return{providers:n.providers||[],imports:n.imports||[]}}function v_(n){return uP(n,ak)||uP(n,ck)}function sk(n){return v_(n)!==null}function uP(n,e){return n.hasOwnProperty(e)?n[e]:null}function $4(n){let e=n&&(n[ak]||n[ck]);return e||null}function hP(n){return n&&(n.hasOwnProperty(fP)||n.hasOwnProperty(q4))?n[fP]:null}var ak=$i({\u0275prov:$i}),fP=$i({\u0275inj:$i}),ck=$i({ngInjectableDef:$i}),q4=$i({ngInjectorDef:$i}),Ce=class{constructor(e,i){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof i=="number"?this.__NG_ELEMENT_ID__=i:i!==void 0&&(this.\u0275prov=Me({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function lk(n){return n&&!!n.\u0275providers}var X4=$i({\u0275cmp:$i}),Y4=$i({\u0275dir:$i}),Z4=$i({\u0275pipe:$i}),Q4=$i({\u0275mod:$i}),Zb=$i({\u0275fac:$i}),em=$i({__NG_ELEMENT_ID__:$i}),mP=$i({__NG_ENV_ID__:$i});function y_(n){return typeof n=="string"?n:n==null?"":String(n)}function K4(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():y_(n)}function J4(n,e){let i=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Pe(-200,n)}function bS(n,e){throw new Pe(-201,!1)}var mi=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(mi||{}),sM;function dk(){return sM}function Zr(n){let e=sM;return sM=n,e}function uk(n,e,i){let t=v_(n);if(t&&t.providedIn=="root")return t.value===void 0?t.value=t.factory():t.value;if(i&mi.Optional)return null;if(e!==void 0)return e;bS(n,"Injector")}var eH={},im=eH,aM="__NG_DI_FLAG__",Qb="ngTempTokenPath",tH="ngTokenPath",iH=/\n/gm,nH="\u0275",pP="__source",Au;function rH(){return Au}function Ic(n){let e=Au;return Au=n,e}function oH(n,e=mi.Default){if(Au===void 0)throw new Pe(-203,!1);return Au===null?uk(n,void 0,e):Au.get(n,e&mi.Optional?null:void 0,e)}function le(n,e=mi.Default){return(dk()||oH)(Or(n),e)}function re(n,e=mi.Default){return le(n,x_(e))}function x_(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function cM(n){let e=[];for(let i=0;i<n.length;i++){let t=Or(n[i]);if(Array.isArray(t)){if(t.length===0)throw new Pe(900,!1);let r,o=mi.Default;for(let s=0;s<t.length;s++){let a=t[s],c=sH(a);typeof c=="number"?c===-1?r=a.token:o|=c:r=a}e.push(le(r,o))}else e.push(le(t))}return e}function hk(n,e){return n[aM]=e,n.prototype[aM]=e,n}function sH(n){return n[aM]}function aH(n,e,i,t){let r=n[Qb];throw e[pP]&&r.unshift(e[pP]),n.message=cH(`
`+n.message,r,i,t),n[tH]=r,n[Qb]=null,n}function cH(n,e,i,t=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==nH?n.slice(2):n;let r=Nr(e);if(Array.isArray(e))r=e.map(Nr).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Nr(a)))}r=`{${o.join(", ")}}`}return`${i}${t?"("+t+")":""}[${r}]: ${n.replace(iH,`
  `)}`}var Hu=hk(rk("Optional"),8);var gm=hk(rk("SkipSelf"),4);function Hl(n,e){let i=n.hasOwnProperty(Zb);return i?n[Zb]:null}function lH(n,e,i){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],o=e[t];if(i&&(r=i(r),o=i(o)),o!==r)return!1}return!0}function dH(n){return n.flat(Number.POSITIVE_INFINITY)}function _S(n,e){n.forEach(i=>Array.isArray(i)?_S(i,e):e(i))}function fk(n,e,i){e>=n.length?n.push(i):n.splice(e,0,i)}function Kb(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function uH(n,e){let i=[];for(let t=0;t<n;t++)i.push(e);return i}function hH(n,e,i,t){let r=n.length;if(r==e)n.push(i,t);else if(r===1)n.push(t,n[0]),n[0]=i;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=i,n[e+1]=t}}function w_(n,e,i){let t=bm(n,e);return t>=0?n[t|1]=i:(t=~t,hH(n,t,e,i)),t}function Ww(n,e){let i=bm(n,e);if(i>=0)return n[i|1]}function bm(n,e){return fH(n,e,1)}function fH(n,e,i){let t=0,r=n.length>>i;for(;r!==t;){let o=t+(r-t>>1),s=n[o<<i];if(e===s)return o<<i;s>e?r=o:t=o+1}return~(r<<i)}var Pu={},Qr=[],ku=new Ce(""),mk=new Ce("",-1),pk=new Ce(""),Jb=class{get(e,i=im){if(i===im){let t=new Error(`NullInjectorError: No provider for ${Nr(e)}!`);throw t.name="NullInjectorError",t}return i}},gk=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(gk||{}),ks=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ks||{}),at=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(at||{});function mH(n,e,i){let t=n.length;for(;;){let r=n.indexOf(e,i);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===t||n.charCodeAt(r+o)<=32)return r}i=r+1}}function lM(n,e,i){let t=0;for(;t<i.length;){let r=i[t];if(typeof r=="number"){if(r!==0)break;t++;let o=i[t++],s=i[t++],a=i[t++];n.setAttribute(e,s,a,o)}else{let o=r,s=i[++t];pH(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),t++}}return t}function bk(n){return n===3||n===4||n===6}function pH(n){return n.charCodeAt(0)===64}function nm(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let i=-1;for(let t=0;t<e.length;t++){let r=e[t];typeof r=="number"?i=r:i===0||(i===-1||i===2?gP(n,i,r,null,e[++t]):gP(n,i,r,null,null))}}return n}function gP(n,e,i,t,r){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===i){if(t===null){r!==null&&(n[o+1]=r);return}else if(t===n[o+1]){n[o+2]=r;return}}o++,t!==null&&o++,r!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,i),t!==null&&n.splice(o++,0,t),r!==null&&n.splice(o++,0,r)}var _k="ng-template";function gH(n,e,i,t){let r=0;if(t){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&mH(e[r+1].toLowerCase(),i,0)!==-1)return!0}else if(vS(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===i)return!0}return!1}function vS(n){return n.type===4&&n.value!==_k}function bH(n,e,i){let t=n.type===4&&!i?_k:n.value;return e===t}function _H(n,e,i){let t=4,r=n.attrs,o=r!==null?xH(r):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!is(t)&&!is(c))return!1;if(s&&is(c))continue;s=!1,t=c|t&1;continue}if(!s)if(t&4){if(t=2|t&1,c!==""&&!bH(n,c,i)||c===""&&e.length===1){if(is(t))return!1;s=!0}}else if(t&8){if(r===null||!gH(n,r,c,i)){if(is(t))return!1;s=!0}}else{let l=e[++a],d=vH(c,r,vS(n),i);if(d===-1){if(is(t))return!1;s=!0;continue}if(l!==""){let u;if(d>o?u="":u=r[d+1].toLowerCase(),t&2&&l!==u){if(is(t))return!1;s=!0}}}}return is(t)||s}function is(n){return(n&1)===0}function vH(n,e,i,t){if(e===null)return-1;let r=0;if(t||!i){let o=!1;for(;r<e.length;){let s=e[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return wH(e,n)}function vk(n,e,i=!1){for(let t=0;t<e.length;t++)if(_H(n,e[t],i))return!0;return!1}function yH(n){let e=n.attrs;if(e!=null){let i=e.indexOf(5);if(!(i&1))return e[i+1]}return null}function xH(n){for(let e=0;e<n.length;e++){let i=n[e];if(bk(i))return e}return n.length}function wH(n,e){let i=n.indexOf(4);if(i>-1)for(i++;i<n.length;){let t=n[i];if(typeof t=="number")return-1;if(t===e)return i;i++}return-1}function MH(n,e){e:for(let i=0;i<e.length;i++){let t=e[i];if(n.length===t.length){for(let r=0;r<n.length;r++)if(n[r]!==t[r])continue e;return!0}}return!1}function bP(n,e){return n?":not("+e.trim()+")":e}function SH(n){let e=n[0],i=1,t=2,r="",o=!1;for(;i<n.length;){let s=n[i];if(typeof s=="string")if(t&2){let a=n[++i];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else t&8?r+="."+s:t&4&&(r+=" "+s);else r!==""&&!is(s)&&(e+=bP(o,r),r=""),t=s,o=o||!is(t);i++}return r!==""&&(e+=bP(o,r)),e}function RH(n){return n.map(SH).join(",")}function TH(n){let e=[],i=[],t=1,r=2;for(;t<n.length;){let o=n[t];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++t]):r===8&&i.push(o);else{if(!is(r))break;r=o}t++}return{attrs:e,classes:i}}function L(n){return pm(()=>{let e=Sk(n),i=pi(xe({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===gk.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ks.Emulated,styles:n.styles||Qr,_:null,schemas:n.schemas||null,tView:null,id:""});Rk(i);let t=n.dependencies;return i.directiveDefs=vP(t,!1),i.pipeDefs=vP(t,!0),i.id=DH(i),i})}function CH(n){return kc(n)||yk(n)}function EH(n){return n!==null}function Je(n){return pm(()=>({type:n.type,bootstrap:n.bootstrap||Qr,declarations:n.declarations||Qr,imports:n.imports||Qr,exports:n.exports||Qr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function _P(n,e){if(n==null)return Pu;let i={};for(let t in n)if(n.hasOwnProperty(t)){let r=n[t],o,s,a=at.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),e?(i[o]=a!==at.None?[t,a]:t,e[o]=s):i[o]=t}return i}function He(n){return pm(()=>{let e=Sk(n);return Rk(e),e})}function Oo(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function kc(n){return n[X4]||null}function yk(n){return n[Y4]||null}function xk(n){return n[Z4]||null}function wk(n){let e=kc(n)||yk(n)||xk(n);return e!==null?e.standalone:!1}function Mk(n,e){let i=n[Q4]||null;if(!i&&e===!0)throw new Error(`Type ${Nr(n)} does not have '\u0275mod' property.`);return i}function Sk(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Pu,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Qr,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:_P(n.inputs,e),outputs:_P(n.outputs),debugInfo:null}}function Rk(n){n.features?.forEach(e=>e(n))}function vP(n,e){if(!n)return null;let i=e?xk:CH;return()=>(typeof n=="function"?n():n).map(t=>i(t)).filter(EH)}function DH(n){let e=0,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of i)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function M_(n){return{\u0275providers:n}}function AH(...n){return{\u0275providers:Tk(!0,n),\u0275fromNgModule:!0}}function Tk(n,...e){let i=[],t=new Set,r,o=s=>{i.push(s)};return _S(e,s=>{let a=s;dM(a,o,[],t)&&(r||=[],r.push(a))}),r!==void 0&&Ck(r,o),i}function Ck(n,e){for(let i=0;i<n.length;i++){let{ngModule:t,providers:r}=n[i];yS(r,o=>{e(o,t)})}}function dM(n,e,i,t){if(n=Or(n),!n)return!1;let r=null,o=hP(n),s=!o&&kc(n);if(!o&&!s){let c=n.ngModule;if(o=hP(c),o)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=t.has(r);if(s){if(a)return!1;if(t.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)dM(l,e,i,t)}}else if(o){if(o.imports!=null&&!a){t.add(r);let l;try{_S(o.imports,d=>{dM(d,e,i,t)&&(l||=[],l.push(d))})}finally{}l!==void 0&&Ck(l,e)}if(!a){let l=Hl(r)||(()=>new r);e({provide:r,useFactory:l,deps:Qr},r),e({provide:pk,useValue:r,multi:!0},r),e({provide:ku,useValue:()=>le(r),multi:!0},r)}let c=o.providers;if(c!=null&&!a){let l=n;yS(c,d=>{e(d,l)})}}else return!1;return r!==n&&n.providers!==void 0}function yS(n,e){for(let i of n)lk(i)&&(i=i.\u0275providers),Array.isArray(i)?yS(i,e):e(i)}var IH=$i({provide:String,useValue:$i});function Ek(n){return n!==null&&typeof n=="object"&&IH in n}function PH(n){return!!(n&&n.useExisting)}function kH(n){return!!(n&&n.useFactory)}function Fu(n){return typeof n=="function"}function FH(n){return!!n.useClass}var S_=new Ce(""),Hb={},jH={},$w;function xS(){return $w===void 0&&($w=new Jb),$w}var xr=class{},rm=class extends xr{get destroyed(){return this._destroyed}constructor(e,i,t,r){super(),this.parent=i,this.source=t,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,hM(e,s=>this.processProvider(s)),this.records.set(mk,Tu(void 0,this)),r.has("environment")&&this.records.set(xr,Tu(void 0,this));let o=this.records.get(S_);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(pk,Qr,mi.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=gi(null);try{for(let t of this._ngOnDestroyHooks)t.ngOnDestroy();let i=this._onDestroyHooks;this._onDestroyHooks=[];for(let t of i)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),gi(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let i=Ic(this),t=Zr(void 0),r;try{return e()}finally{Ic(i),Zr(t)}}get(e,i=im,t=mi.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(mP))return e[mP](this);t=x_(t);let r,o=Ic(this),s=Zr(void 0);try{if(!(t&mi.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=UH(e)&&v_(e);l&&this.injectableDefInScope(l)?c=Tu(uM(e),Hb):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=t&mi.Self?xS():this.parent;return i=t&mi.Optional&&i===im?null:i,a.get(e,i)}catch(a){if(a.name==="NullInjectorError"){if((a[Qb]=a[Qb]||[]).unshift(Nr(e)),o)throw a;return aH(a,e,"R3InjectorError",this.source)}else throw a}finally{Zr(s),Ic(o)}}resolveInjectorInitializers(){let e=gi(null),i=Ic(this),t=Zr(void 0),r;try{let o=this.get(ku,Qr,mi.Self);for(let s of o)s()}finally{Ic(i),Zr(t),gi(e)}}toString(){let e=[],i=this.records;for(let t of i.keys())e.push(Nr(t));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pe(205,!1)}processProvider(e){e=Or(e);let i=Fu(e)?e:Or(e&&e.provide),t=NH(e);if(!Fu(e)&&e.multi===!0){let r=this.records.get(i);r||(r=Tu(void 0,Hb,!0),r.factory=()=>cM(r.multi),this.records.set(i,r)),i=e,r.multi.push(e)}this.records.set(i,t)}hydrate(e,i){let t=gi(null);try{return i.value===Hb&&(i.value=jH,i.value=i.factory()),typeof i.value=="object"&&i.value&&BH(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}finally{gi(t)}}injectableDefInScope(e){if(!e.providedIn)return!1;let i=Or(e.providedIn);return typeof i=="string"?i==="any"||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(e){let i=this._onDestroyHooks.indexOf(e);i!==-1&&this._onDestroyHooks.splice(i,1)}};function uM(n){let e=v_(n),i=e!==null?e.factory:Hl(n);if(i!==null)return i;if(n instanceof Ce)throw new Pe(204,!1);if(n instanceof Function)return OH(n);throw new Pe(204,!1)}function OH(n){if(n.length>0)throw new Pe(204,!1);let i=$4(n);return i!==null?()=>i.factory(n):()=>new n}function NH(n){if(Ek(n))return Tu(void 0,n.useValue);{let e=Dk(n);return Tu(e,Hb)}}function Dk(n,e,i){let t;if(Fu(n)){let r=Or(n);return Hl(r)||uM(r)}else if(Ek(n))t=()=>Or(n.useValue);else if(kH(n))t=()=>n.useFactory(...cM(n.deps||[]));else if(PH(n))t=()=>le(Or(n.useExisting));else{let r=Or(n&&(n.useClass||n.provide));if(LH(n))t=()=>new r(...cM(n.deps));else return Hl(r)||uM(r)}return t}function Tu(n,e,i=!1){return{factory:n,value:e,multi:i?[]:void 0}}function LH(n){return!!n.deps}function BH(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function UH(n){return typeof n=="function"||typeof n=="object"&&n instanceof Ce}function hM(n,e){for(let i of n)Array.isArray(i)?hM(i,e):i&&lk(i)?hM(i.\u0275providers,e):e(i)}function os(n,e){n instanceof rm&&n.assertNotDestroyed();let i,t=Ic(n),r=Zr(void 0);try{return e()}finally{Ic(t),Zr(r)}}function Ak(){return dk()!==void 0||rH()!=null}function Ik(n){if(!Ak())throw new Pe(-203,!1)}function VH(n){let e=ur.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function zH(n){return typeof n=="function"}var Ns=0,Lt=1,It=2,hr=3,ns=4,go=5,ju=6,om=7,vr=8,Ou=9,rs=10,pn=11,sm=12,yP=13,Gu=14,jo=15,_m=16,Cu=17,Pa=18,R_=19,Pk=20,Pc=21,Gb=22,Gl=23,fr=25,wS=1;var Wl=7,e_=8,Nu=9,yr=10,MS=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(MS||{});function Vl(n){return Array.isArray(n)&&typeof n[wS]=="object"}function Oa(n){return Array.isArray(n)&&n[wS]===!0}function SS(n){return(n.flags&4)!==0}function T_(n){return n.componentOffset>-1}function C_(n){return(n.flags&1)===1}function ka(n){return!!n.template}function HH(n){return(n[It]&512)!==0}var fM=class{constructor(e,i,t){this.previousValue=e,this.currentValue=i,this.firstChange=t}isFirstChange(){return this.firstChange}};function kk(n,e,i,t){e!==null?e.applyValueToInputSignal(e,t):n[i]=t}function Un(){return Fk}function Fk(n){return n.type.prototype.ngOnChanges&&(n.setInput=WH),GH}Un.ngInherit=!0;function GH(){let n=Ok(this),e=n?.current;if(e){let i=n.previous;if(i===Pu)n.previous=e;else for(let t in e)i[t]=e[t];n.current=null,this.ngOnChanges(e)}}function WH(n,e,i,t,r){let o=this.declaredInputs[t],s=Ok(n)||$H(n,{previous:Pu,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new fM(l&&l.currentValue,i,c===Pu),kk(n,e,r,i)}var jk="__ngSimpleChanges__";function Ok(n){return n[jk]||null}function $H(n,e){return n[jk]=e}var xP=null;var Is=function(n,e,i){xP?.(n,e,i)},qH="svg",XH="math",YH=!1;function ZH(){return YH}function Fs(n){for(;Array.isArray(n);)n=n[Ns];return n}function QH(n){for(;Array.isArray(n);){if(typeof n[wS]=="object")return n;n=n[Ns]}return null}function Nk(n,e){return Fs(e[n])}function No(n,e){return Fs(e[n.index])}function RS(n,e){return n.data[e]}function TS(n,e){return n[e]}function jc(n,e){let i=e[n];return Vl(i)?i:i[Ns]}function KH(n){return(n[It]&4)===4}function CS(n){return(n[It]&128)===128}function JH(n){return Oa(n[hr])}function Lu(n,e){return e==null?null:n[e]}function Lk(n){n[Cu]=0}function e5(n){n[It]&1024||(n[It]|=1024,CS(n)&&am(n))}function t5(n,e){for(;n>0;)e=e[Gu],n--;return e}function ES(n){return!!(n[It]&9216||n[Gl]?.dirty)}function mM(n){n[rs].changeDetectionScheduler?.notify(1),ES(n)?am(n):n[It]&64&&(ZH()?(n[It]|=1024,am(n)):n[rs].changeDetectionScheduler?.notify())}function am(n){n[rs].changeDetectionScheduler?.notify();let e=cm(n);for(;e!==null&&!(e[It]&8192||(e[It]|=8192,!CS(e)));)e=cm(e)}function Bk(n,e){if((n[It]&256)===256)throw new Pe(911,!1);n[Pc]===null&&(n[Pc]=[]),n[Pc].push(e)}function i5(n,e){if(n[Pc]===null)return;let i=n[Pc].indexOf(e);i!==-1&&n[Pc].splice(i,1)}function cm(n){let e=n[hr];return Oa(e)?e[hr]:e}var ci={lFrame:qk(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function n5(){return ci.lFrame.elementDepthCount}function r5(){ci.lFrame.elementDepthCount++}function o5(){ci.lFrame.elementDepthCount--}function Uk(){return ci.bindingsEnabled}function Vk(){return ci.skipHydrationRootTNode!==null}function s5(n){return ci.skipHydrationRootTNode===n}function a5(){ci.skipHydrationRootTNode=null}function Ft(){return ci.lFrame.lView}function gn(){return ci.lFrame.tView}function ct(n){return ci.lFrame.contextLView=n,n[vr]}function lt(n){return ci.lFrame.contextLView=null,n}function mr(){let n=zk();for(;n!==null&&n.type===64;)n=n.parent;return n}function zk(){return ci.lFrame.currentTNode}function c5(){let n=ci.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Kl(n,e){let i=ci.lFrame;i.currentTNode=n,i.isParent=e}function DS(){return ci.lFrame.isParent}function AS(){ci.lFrame.isParent=!1}function l5(){return ci.lFrame.contextLView}function Jl(){let n=ci.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function d5(n){return ci.lFrame.bindingIndex=n}function ed(){return ci.lFrame.bindingIndex++}function Hk(n){let e=ci.lFrame,i=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,i}function u5(){return ci.lFrame.inI18n}function h5(n,e){let i=ci.lFrame;i.bindingIndex=i.bindingRootIndex=n,pM(e)}function f5(){return ci.lFrame.currentDirectiveIndex}function pM(n){ci.lFrame.currentDirectiveIndex=n}function IS(n){let e=ci.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Gk(){return ci.lFrame.currentQueryIndex}function PS(n){ci.lFrame.currentQueryIndex=n}function m5(n){let e=n[Lt];return e.type===2?e.declTNode:e.type===1?n[go]:null}function Wk(n,e,i){if(i&mi.SkipSelf){let r=e,o=n;for(;r=r.parent,r===null&&!(i&mi.Host);)if(r=m5(o),r===null||(o=o[Gu],r.type&10))break;if(r===null)return!1;e=r,n=o}let t=ci.lFrame=$k();return t.currentTNode=e,t.lView=n,!0}function kS(n){let e=$k(),i=n[Lt];ci.lFrame=e,e.currentTNode=i.firstChild,e.lView=n,e.tView=i,e.contextLView=n,e.bindingIndex=i.bindingStartIndex,e.inI18n=!1}function $k(){let n=ci.lFrame,e=n===null?null:n.child;return e===null?qk(n):e}function qk(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Xk(){let n=ci.lFrame;return ci.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Yk=Xk;function FS(){let n=Xk();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function p5(n){return(ci.lFrame.contextLView=t5(n,ci.lFrame.contextLView))[vr]}function Oc(){return ci.lFrame.selectedIndex}function $l(n){ci.lFrame.selectedIndex=n}function E_(){let n=ci.lFrame;return RS(n.tView,n.selectedIndex)}function g5(){return ci.lFrame.currentNamespace}var Zk=!0;function D_(){return Zk}function A_(n){Zk=n}function b5(n,e,i){let{ngOnChanges:t,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(t){let s=Fk(e);(i.preOrderHooks??=[]).push(n,s),(i.preOrderCheckHooks??=[]).push(n,s)}r&&(i.preOrderHooks??=[]).push(0-n,r),o&&((i.preOrderHooks??=[]).push(n,o),(i.preOrderCheckHooks??=[]).push(n,o))}function I_(n,e){for(let i=e.directiveStart,t=e.directiveEnd;i<t;i++){let o=n.data[i].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-i,s),a&&((n.contentHooks??=[]).push(i,a),(n.contentCheckHooks??=[]).push(i,a)),c&&(n.viewHooks??=[]).push(-i,c),l&&((n.viewHooks??=[]).push(i,l),(n.viewCheckHooks??=[]).push(i,l)),d!=null&&(n.destroyHooks??=[]).push(i,d)}}function Wb(n,e,i){Qk(n,e,3,i)}function $b(n,e,i,t){(n[It]&3)===i&&Qk(n,e,i,t)}function qw(n,e){let i=n[It];(i&3)===e&&(i&=16383,i+=1,n[It]=i)}function Qk(n,e,i,t){let r=t!==void 0?n[Cu]&65535:0,o=t??-1,s=e.length-1,a=0;for(let c=r;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],t!=null&&a>=t)break}else e[c]<0&&(n[Cu]+=65536),(a<o||o==-1)&&(_5(n,i,e,c),n[Cu]=(n[Cu]&4294901760)+c+2),c++}function wP(n,e){Is(4,n,e);let i=gi(null);try{e.call(n)}finally{gi(i),Is(5,n,e)}}function _5(n,e,i,t){let r=i[t]<0,o=i[t+1],s=r?-i[t]:i[t],a=n[s];r?n[It]>>14<n[Cu]>>16&&(n[It]&3)===e&&(n[It]+=16384,wP(a,o)):wP(a,o)}var Iu=-1,ql=class{constructor(e,i,t){this.factory=e,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=t}};function v5(n){return n instanceof ql}function y5(n){return(n.flags&8)!==0}function x5(n){return(n.flags&16)!==0}function Kk(n){return n!==Iu}function t_(n){return n&32767}function w5(n){return n>>16}function i_(n,e){let i=w5(n),t=e;for(;i>0;)t=t[Gu],i--;return t}var gM=!0;function n_(n){let e=gM;return gM=n,e}var M5=256,Jk=M5-1,eF=5,S5=0,Ps={};function R5(n,e,i){let t;typeof i=="string"?t=i.charCodeAt(0)||0:i.hasOwnProperty(em)&&(t=i[em]),t==null&&(t=i[em]=S5++);let r=t&Jk,o=1<<r;e.data[n+(r>>eF)]|=o}function r_(n,e){let i=tF(n,e);if(i!==-1)return i;let t=e[Lt];t.firstCreatePass&&(n.injectorIndex=e.length,Xw(t.data,n),Xw(e,null),Xw(t.blueprint,null));let r=jS(n,e),o=n.injectorIndex;if(Kk(r)){let s=t_(r),a=i_(r,e),c=a[Lt].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=r,o}function Xw(n,e){n.push(0,0,0,0,0,0,0,0,e)}function tF(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function jS(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let i=0,t=null,r=e;for(;r!==null;){if(t=sF(r),t===null)return Iu;if(i++,r=r[Gu],t.injectorIndex!==-1)return t.injectorIndex|i<<16}return Iu}function bM(n,e,i){R5(n,e,i)}function T5(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let i=n.attrs;if(i){let t=i.length,r=0;for(;r<t;){let o=i[r];if(bk(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<t&&typeof i[r]=="string";)r++;else{if(o===e)return i[r+1];r=r+2}}}return null}function iF(n,e,i){if(i&mi.Optional||n!==void 0)return n;bS(e,"NodeInjector")}function nF(n,e,i,t){if(i&mi.Optional&&t===void 0&&(t=null),!(i&(mi.Self|mi.Host))){let r=n[Ou],o=Zr(void 0);try{return r?r.get(e,t,i&mi.Optional):uk(e,t,i&mi.Optional)}finally{Zr(o)}}return iF(t,e,i)}function rF(n,e,i,t=mi.Default,r){if(n!==null){if(e[It]&2048&&!(t&mi.Self)){let s=A5(n,e,i,t,Ps);if(s!==Ps)return s}let o=oF(n,e,i,t,Ps);if(o!==Ps)return o}return nF(e,i,t,r)}function oF(n,e,i,t,r){let o=E5(i);if(typeof o=="function"){if(!Wk(e,n,t))return t&mi.Host?iF(r,i,t):nF(e,i,t,r);try{let s;if(s=o(t),s==null&&!(t&mi.Optional))bS(i);else return s}finally{Yk()}}else if(typeof o=="number"){let s=null,a=tF(n,e),c=Iu,l=t&mi.Host?e[jo][go]:null;for((a===-1||t&mi.SkipSelf)&&(c=a===-1?jS(n,e):e[a+8],c===Iu||!SP(t,!1)?a=-1:(s=e[Lt],a=t_(c),e=i_(c,e)));a!==-1;){let d=e[Lt];if(MP(o,a,d.data)){let u=C5(a,e,i,s,t,l);if(u!==Ps)return u}c=e[a+8],c!==Iu&&SP(t,e[Lt].data[a+8]===l)&&MP(o,a,e)?(s=d,a=t_(c),e=i_(c,e)):a=-1}}return r}function C5(n,e,i,t,r,o){let s=e[Lt],a=s.data[n+8],c=t==null?T_(a)&&gM:t!=s&&(a.type&3)!==0,l=r&mi.Host&&o===a,d=qb(a,s,i,c,l);return d!==null?Xl(e,s,d,a):Ps}function qb(n,e,i,t,r){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,d=o>>20,u=t?a:a+d,h=r?a+d:l;for(let f=u;f<h;f++){let p=s[f];if(f<c&&i===p||f>=c&&p.type===i)return f}if(r){let f=s[c];if(f&&ka(f)&&f.type===i)return c}return null}function Xl(n,e,i,t){let r=n[i],o=e.data;if(v5(r)){let s=r;s.resolving&&J4(K4(o[i]));let a=n_(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Zr(s.injectImpl):null,d=Wk(n,t,mi.Default);try{r=n[i]=s.factory(void 0,o,n,t),e.firstCreatePass&&i>=t.directiveStart&&b5(i,o[i],e)}finally{l!==null&&Zr(l),n_(a),s.resolving=!1,Yk()}}return r}function E5(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(em)?n[em]:void 0;return typeof e=="number"?e>=0?e&Jk:D5:e}function MP(n,e,i){let t=1<<n;return!!(i[e+(n>>eF)]&t)}function SP(n,e){return!(n&mi.Self)&&!(n&mi.Host&&e)}var zl=class{constructor(e,i){this._tNode=e,this._lView=i}get(e,i,t){return rF(this._tNode,this._lView,e,x_(t),i)}};function D5(){return new zl(mr(),Ft())}function be(n){return pm(()=>{let e=n.prototype.constructor,i=e[Zb]||_M(e),t=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==t;){let o=r[Zb]||_M(r);if(o&&o!==i)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function _M(n){return ok(n)?()=>{let e=_M(Or(n));return e&&e()}:Hl(n)}function A5(n,e,i,t,r){let o=n,s=e;for(;o!==null&&s!==null&&s[It]&2048&&!(s[It]&512);){let a=oF(o,s,i,t|mi.Self,Ps);if(a!==Ps)return a;let c=o.parent;if(!c){let l=s[Pk];if(l){let d=l.get(i,Ps,t);if(d!==Ps)return d}c=sF(s),s=s[Gu]}o=c}return r}function sF(n){let e=n[Lt],i=e.type;return i===2?e.declTNode:i===1?n[go]:null}function Nc(n){return T5(mr(),n)}function RP(n,e=null,i=null,t){let r=aF(n,e,i,t);return r.resolveInjectorInitializers(),r}function aF(n,e=null,i=null,t,r=new Set){let o=[i||Qr,AH(n)];return t=t||(typeof n=="object"?void 0:Nr(n)),new rm(o,e||xS(),t||null,r)}var pr=(()=>{let e=class e{static create(t,r){if(Array.isArray(t))return RP({name:""},r,t,"");{let o=t.name??"";return RP({name:o},t.parent,t.providers,o)}}};e.THROW_IF_NOT_FOUND=im,e.NULL=new Jb,e.\u0275prov=Me({token:e,providedIn:"any",factory:()=>le(mk)}),e.__NG_ELEMENT_ID__=-1;let n=e;return n})();var I5="ngOriginalError";function Yw(n){return n[I5]}var Lr=class{constructor(){this._console=console}handleError(e){let i=this._findOriginalError(e);this._console.error("ERROR",e),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(e){let i=e&&Yw(e);for(;i&&Yw(i);)i=Yw(i);return i||null}},cF=new Ce("",{providedIn:"root",factory:()=>re(Lr).handleError.bind(void 0)}),P_=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=P5,e.__NG_ENV_ID__=t=>t;let n=e;return n})(),vM=class extends P_{constructor(e){super(),this._lView=e}onDestroy(e){return Bk(this._lView,e),()=>i5(this._lView,e)}};function P5(){return new vM(Ft())}function TP(n,e){return nk(n,e)}function k5(n){return nk(ik,n)}var lF=(TP.required=k5,TP);function F5(){return Wu(mr(),Ft())}function Wu(n,e){return new Qe(No(n,e))}var Qe=(()=>{let e=class e{constructor(t){this.nativeElement=t}};e.__NG_ELEMENT_ID__=F5;let n=e;return n})();function j5(n){return n instanceof Qe?n.nativeElement:n}var yM=class extends ht{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,Ak()&&(this.destroyRef=re(P_,{optional:!0})??void 0)}emit(e){let i=gi(null);try{super.next(e)}finally{gi(i)}}subscribe(e,i,t){let r=e,o=i||(()=>null),s=t;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Zw(o),r&&(r=Zw(r)),s&&(s=Zw(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof bi&&e.add(a),a}};function Zw(n){return e=>{setTimeout(n,void 0,e)}}var et=yM;function O5(){return this._results[Symbol.iterator]()}var js=class n{get changes(){return this._changes??=new et}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let i=n.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=O5)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,i){return this._results.reduce(e,i)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,i){this.dirty=!1;let t=dH(e);(this._changesDetected=!lH(this._results,t,i))&&(this._results=t,this.length=t.length,this.last=t[this.length-1],this.first=t[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function dF(n){return(n.flags&128)===128}var uF=new Map,N5=0;function L5(){return N5++}function B5(n){uF.set(n[R_],n)}function U5(n){uF.delete(n[R_])}var CP="__ngContext__";function Fc(n,e){Vl(e)?(n[CP]=e[R_],B5(e)):n[CP]=e}function hF(n){return mF(n[sm])}function fF(n){return mF(n[ns])}function mF(n){for(;n!==null&&!Oa(n);)n=n[ns];return n}var xM;function pF(n){xM=n}function V5(){if(xM!==void 0)return xM;if(typeof document<"u")return document;throw new Pe(210,!1)}var vm=new Ce("",{providedIn:"root",factory:()=>z5}),z5="ng",OS=new Ce(""),Br=new Ce("",{providedIn:"platform",factory:()=>"unknown"});var Vn=new Ce(""),ym=new Ce("",{providedIn:"root",factory:()=>V5().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var H5="h",G5="b";var W5=()=>null;function NS(n,e,i=!1){return W5(n,e,i)}var gF=!1,$5=new Ce("",{providedIn:"root",factory:()=>gF});var Nb;function bF(){if(Nb===void 0&&(Nb=null,ur.trustedTypes))try{Nb=ur.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Nb}function k_(n){return bF()?.createHTML(n)||n}function q5(n){return bF()?.createScriptURL(n)||n}var Lb;function X5(){if(Lb===void 0&&(Lb=null,ur.trustedTypes))try{Lb=ur.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Lb}function EP(n){return X5()?.createScriptURL(n)||n}var Fa=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tk})`}},wM=class extends Fa{getTypeName(){return"HTML"}},MM=class extends Fa{getTypeName(){return"Style"}},SM=class extends Fa{getTypeName(){return"Script"}},RM=class extends Fa{getTypeName(){return"URL"}},TM=class extends Fa{getTypeName(){return"ResourceURL"}};function Lo(n){return n instanceof Fa?n.changingThisBreaksApplicationSecurity:n}function Lc(n,e){let i=Y5(n);if(i!=null&&i!==e){if(i==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${i} (see ${tk})`)}return i===e}function Y5(n){return n instanceof Fa&&n.getTypeName()||null}function _F(n){return new wM(n)}function vF(n){return new MM(n)}function yF(n){return new SM(n)}function xF(n){return new RM(n)}function wF(n){return new TM(n)}function Z5(n){let e=new EM(n);return Q5()?new CM(e):e}var CM=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let i=new window.DOMParser().parseFromString(k_(e),"text/html").body;return i===null?this.inertDocumentHelper.getInertBodyElement(e):(i.removeChild(i.firstChild),i)}catch{return null}}},EM=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let i=this.inertDocument.createElement("template");return i.innerHTML=k_(e),i}};function Q5(){try{return!!new window.DOMParser().parseFromString(k_(""),"text/html")}catch{return!1}}var K5=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function F_(n){return n=String(n),n.match(K5)?n:"unsafe:"+n}function Na(n){let e={};for(let i of n.split(","))e[i]=!0;return e}function xm(...n){let e={};for(let i of n)for(let t in i)i.hasOwnProperty(t)&&(e[t]=!0);return e}var MF=Na("area,br,col,hr,img,wbr"),SF=Na("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),RF=Na("rp,rt"),J5=xm(RF,SF),eG=xm(SF,Na("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),tG=xm(RF,Na("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),DP=xm(MF,eG,tG,J5),TF=Na("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),iG=Na("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),nG=Na("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),rG=xm(TF,iG,nG),oG=Na("script,style,template"),DM=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let i=e.firstChild,t=!0,r=[];for(;i;){if(i.nodeType===Node.ELEMENT_NODE?t=this.startElement(i):i.nodeType===Node.TEXT_NODE?this.chars(i.nodeValue):this.sanitizedSomething=!0,t&&i.firstChild){r.push(i),i=cG(i);continue}for(;i;){i.nodeType===Node.ELEMENT_NODE&&this.endElement(i);let o=aG(i);if(o){i=o;break}i=r.pop()}}return this.buf.join("")}startElement(e){let i=AP(e).toLowerCase();if(!DP.hasOwnProperty(i))return this.sanitizedSomething=!0,!oG.hasOwnProperty(i);this.buf.push("<"),this.buf.push(i);let t=e.attributes;for(let r=0;r<t.length;r++){let o=t.item(r),s=o.name,a=s.toLowerCase();if(!rG.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;TF[a]&&(c=F_(c)),this.buf.push(" ",s,'="',IP(c),'"')}return this.buf.push(">"),!0}endElement(e){let i=AP(e).toLowerCase();DP.hasOwnProperty(i)&&!MF.hasOwnProperty(i)&&(this.buf.push("</"),this.buf.push(i),this.buf.push(">"))}chars(e){this.buf.push(IP(e))}};function sG(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function aG(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw CF(e);return e}function cG(n){let e=n.firstChild;if(e&&sG(n,e))throw CF(e);return e}function AP(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function CF(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var lG=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dG=/([^\#-~ |!])/g;function IP(n){return n.replace(/&/g,"&amp;").replace(lG,function(e){let i=e.charCodeAt(0),t=e.charCodeAt(1);return"&#"+((i-55296)*1024+(t-56320)+65536)+";"}).replace(dG,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Bb;function EF(n,e){let i=null;try{Bb=Bb||Z5(n);let t=e?String(e):"";i=Bb.getInertBodyElement(t);let r=5,o=t;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,t=o,o=i.innerHTML,i=Bb.getInertBodyElement(t)}while(t!==o);let a=new DM().sanitizeChildren(PP(i)||i);return k_(a)}finally{if(i){let t=PP(i)||i;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function PP(n){return"content"in n&&uG(n)?n.content:null}function uG(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var nr=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(nr||{});function hG(n){let e=AF();return e?e.sanitize(nr.URL,n)||"":Lc(n,"URL")?Lo(n):F_(y_(n))}function fG(n){let e=AF();if(e)return EP(e.sanitize(nr.RESOURCE_URL,n)||"");if(Lc(n,"ResourceURL"))return EP(Lo(n));throw new Pe(904,!1)}function j_(n){return q5(n[0])}function mG(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?fG:hG}function DF(n,e,i){return mG(e,i)(n)}function AF(){let n=Ft();return n&&n[rs].sanitizer}var pG=/^>|^->|<!--|-->|--!>|<!-$/g,gG=/(<|>)/g,bG="\u200B$1\u200B";function _G(n){return n.replace(pG,e=>e.replace(gG,bG))}function LS(n){return n.ownerDocument.defaultView}function $u(n){return n.ownerDocument}function IF(n){return n instanceof Function?n():n}function vG(n){return(n??re(pr)).get(Br)==="browser"}var Os=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Os||{}),yG;function BS(n,e){return yG(n,e)}function Eu(n,e,i,t,r){if(t!=null){let o,s=!1;Oa(t)?o=t:Vl(t)&&(s=!0,t=t[Ns]);let a=Fs(t);n===0&&i!==null?r==null?OF(e,i,a):o_(e,i,a,r||null,!0):n===1&&i!==null?o_(e,i,a,r||null,!0):n===2?OG(e,a,s):n===3&&e.destroyNode(a),o!=null&&LG(e,n,o,i,r)}}function xG(n,e){return n.createText(e)}function wG(n,e,i){n.setValue(e,i)}function MG(n,e){return n.createComment(_G(e))}function PF(n,e,i){return n.createElement(e,i)}function SG(n,e){kF(n,e),e[Ns]=null,e[go]=null}function RG(n,e,i,t,r,o){t[Ns]=r,t[go]=e,L_(n,t,i,1,r,o)}function kF(n,e){e[rs].changeDetectionScheduler?.notify(1),L_(n,e,e[pn],2,null,null)}function TG(n){let e=n[sm];if(!e)return Qw(n[Lt],n);for(;e;){let i=null;if(Vl(e))i=e[sm];else{let t=e[yr];t&&(i=t)}if(!i){for(;e&&!e[ns]&&e!==n;)Vl(e)&&Qw(e[Lt],e),e=e[hr];e===null&&(e=n),Vl(e)&&Qw(e[Lt],e),i=e&&e[ns]}e=i}}function CG(n,e,i,t){let r=yr+t,o=i.length;t>0&&(i[r-1][ns]=e),t<o-yr?(e[ns]=i[r],fk(i,yr+t,e)):(i.push(e),e[ns]=null),e[hr]=i;let s=e[_m];s!==null&&i!==s&&EG(s,e);let a=e[Pa];a!==null&&a.insertView(n),mM(e),e[It]|=128}function EG(n,e){let i=n[Nu],r=e[hr][hr][jo];e[jo]!==r&&(n[It]|=MS.HasTransplantedViews),i===null?n[Nu]=[e]:i.push(e)}function FF(n,e){let i=n[Nu],t=i.indexOf(e);i.splice(t,1)}function lm(n,e){if(n.length<=yr)return;let i=yr+e,t=n[i];if(t){let r=t[_m];r!==null&&r!==n&&FF(r,t),e>0&&(n[i-1][ns]=t[ns]);let o=Kb(n,yr+e);SG(t[Lt],t);let s=o[Pa];s!==null&&s.detachView(o[Lt]),t[hr]=null,t[ns]=null,t[It]&=-129}return t}function O_(n,e){if(!(e[It]&256)){let i=e[pn];i.destroyNode&&L_(n,e,i,3,null,null),TG(e)}}function Qw(n,e){if(e[It]&256)return;let i=gi(null);try{e[It]&=-129,e[It]|=256,e[Gl]&&Dw(e[Gl]),AG(n,e),DG(n,e),e[Lt].type===1&&e[pn].destroy();let t=e[_m];if(t!==null&&Oa(e[hr])){t!==e[hr]&&FF(t,e);let r=e[Pa];r!==null&&r.detachView(n)}U5(e)}finally{gi(i)}}function DG(n,e){let i=n.cleanup,t=e[om];if(i!==null)for(let o=0;o<i.length-1;o+=2)if(typeof i[o]=="string"){let s=i[o+3];s>=0?t[s]():t[-s].unsubscribe(),o+=2}else{let s=t[i[o+1]];i[o].call(s)}t!==null&&(e[om]=null);let r=e[Pc];if(r!==null){e[Pc]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function AG(n,e){let i;if(n!=null&&(i=n.destroyHooks)!=null)for(let t=0;t<i.length;t+=2){let r=e[i[t]];if(!(r instanceof ql)){let o=i[t+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],c=o[s+1];Is(4,a,c);try{c.call(a)}finally{Is(5,a,c)}}else{Is(4,r,o);try{o.call(r)}finally{Is(5,r,o)}}}}}function jF(n,e,i){return IG(n,e.parent,i)}function IG(n,e,i){let t=e;for(;t!==null&&t.type&40;)e=t,t=e.parent;if(t===null)return i[Ns];{let{componentOffset:r}=t;if(r>-1){let{encapsulation:o}=n.data[t.directiveStart+r];if(o===ks.None||o===ks.Emulated)return null}return No(t,i)}}function o_(n,e,i,t,r){n.insertBefore(e,i,t,r)}function OF(n,e,i){n.appendChild(e,i)}function kP(n,e,i,t,r){t!==null?o_(n,e,i,t,r):OF(n,e,i)}function PG(n,e,i,t){n.removeChild(e,i,t)}function US(n,e){return n.parentNode(e)}function kG(n,e){return n.nextSibling(e)}function NF(n,e,i){return jG(n,e,i)}function FG(n,e,i){return n.type&40?No(n,i):null}var jG=FG,FP;function N_(n,e,i,t){let r=jF(n,t,e),o=e[pn],s=t.parent||e[go],a=NF(s,t,e);if(r!=null)if(Array.isArray(i))for(let c=0;c<i.length;c++)kP(o,r,i[c],a,!1);else kP(o,r,i,a,!1);FP!==void 0&&FP(o,t,e,i,r)}function Xb(n,e){if(e!==null){let i=e.type;if(i&3)return No(e,n);if(i&4)return AM(-1,n[e.index]);if(i&8){let t=e.child;if(t!==null)return Xb(n,t);{let r=n[e.index];return Oa(r)?AM(-1,r):Fs(r)}}else{if(i&32)return BS(e,n)()||Fs(n[e.index]);{let t=LF(n,e);if(t!==null){if(Array.isArray(t))return t[0];let r=cm(n[jo]);return Xb(r,t)}else return Xb(n,e.next)}}}return null}function LF(n,e){if(e!==null){let t=n[jo][go],r=e.projection;return t.projection[r]}return null}function AM(n,e){let i=yr+n+1;if(i<e.length){let t=e[i],r=t[Lt].firstChild;if(r!==null)return Xb(t,r)}return e[Wl]}function OG(n,e,i){let t=US(n,e);t&&PG(n,t,e,i)}function VS(n,e,i,t,r,o,s){for(;i!=null;){let a=t[i.index],c=i.type;if(s&&e===0&&(a&&Fc(Fs(a),t),i.flags|=2),(i.flags&32)!==32)if(c&8)VS(n,e,i.child,t,r,o,!1),Eu(e,n,r,a,o);else if(c&32){let l=BS(i,t),d;for(;d=l();)Eu(e,n,r,d,o);Eu(e,n,r,a,o)}else c&16?BF(n,e,t,i,r,o):Eu(e,n,r,a,o);i=s?i.projectionNext:i.next}}function L_(n,e,i,t,r,o){VS(i,t,n.firstChild,e,r,o,!1)}function NG(n,e,i){let t=e[pn],r=jF(n,i,e),o=i.parent||e[go],s=NF(o,i,e);BF(t,0,e,i,r,s)}function BF(n,e,i,t,r,o){let s=i[jo],c=s[go].projection[t.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Eu(e,n,r,d,o)}else{let l=c,d=s[hr];dF(t)&&(l.flags|=128),VS(n,e,l,d,r,o,!0)}}function LG(n,e,i,t,r){let o=i[Wl],s=Fs(i);o!==s&&Eu(e,n,t,o,r);for(let a=yr;a<i.length;a++){let c=i[a];L_(c[Lt],c,n,e,t,o)}}function BG(n,e,i,t,r){if(e)r?n.addClass(i,t):n.removeClass(i,t);else{let o=t.indexOf("-")===-1?void 0:Os.DashCase;r==null?n.removeStyle(i,t,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Os.Important),n.setStyle(i,t,r,o))}}function UG(n,e,i){n.setAttribute(e,"style",i)}function UF(n,e,i){i===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",i)}function VF(n,e,i){let{mergedAttrs:t,classes:r,styles:o}=i;t!==null&&lM(n,e,t),r!==null&&UF(n,e,r),o!==null&&UG(n,e,o)}var Ls={};function j(n=1){zF(gn(),Ft(),Oc()+n,!1)}function zF(n,e,i,t){if(!t)if((e[It]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Wb(e,o,i)}else{let o=n.preOrderHooks;o!==null&&$b(e,o,0,i)}$l(i)}function k(n,e=mi.Default){let i=Ft();if(i===null)return le(n,e);let t=mr();return rF(t,i,Or(n),e)}function qu(){let n="invalid";throw new Error(n)}function HF(n,e,i,t,r,o){let s=gi(null);try{let a=null;r&at.SignalBased&&(a=e[t][Qo]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&at.HasDecoratorInputTransform&&(o=n.inputTransforms[t].call(e,o)),n.setInput!==null?n.setInput(e,a,o,i,t):kk(e,a,t,o)}finally{gi(s)}}function VG(n,e){let i=n.hostBindingOpCodes;if(i!==null)try{for(let t=0;t<i.length;t++){let r=i[t];if(r<0)$l(~r);else{let o=r,s=i[++t],a=i[++t];h5(s,o);let c=e[o];a(2,c)}}}finally{$l(-1)}}function B_(n,e,i,t,r,o,s,a,c,l,d){let u=e.blueprint.slice();return u[Ns]=r,u[It]=t|4|128|8|64,(l!==null||n&&n[It]&2048)&&(u[It]|=2048),Lk(u),u[hr]=u[Gu]=n,u[vr]=i,u[rs]=s||n&&n[rs],u[pn]=a||n&&n[pn],u[Ou]=c||n&&n[Ou]||null,u[go]=o,u[R_]=L5(),u[ju]=d,u[Pk]=l,u[jo]=e.type==2?n[jo]:u,u}function Xu(n,e,i,t,r){let o=n.data[e];if(o===null)o=zG(n,e,i,t,r),u5()&&(o.flags|=32);else if(o.type&64){o.type=i,o.value=t,o.attrs=r;let s=c5();o.injectorIndex=s===null?-1:s.injectorIndex}return Kl(o,!0),o}function zG(n,e,i,t,r){let o=zk(),s=DS(),a=s?o:o&&o.parent,c=n.data[e]=XG(n,a,i,e,t,r);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function GF(n,e,i,t){if(i===0)return-1;let r=e.length;for(let o=0;o<i;o++)e.push(t),n.blueprint.push(t),n.data.push(null);return r}function WF(n,e,i,t,r){let o=Oc(),s=t&2;try{$l(-1),s&&e.length>fr&&zF(n,e,fr,!1),Is(s?2:0,r),i(t,r)}finally{$l(o),Is(s?3:1,r)}}function zS(n,e,i){if(SS(e)){let t=gi(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=i[s];a.contentQueries(1,c,s)}}}finally{gi(t)}}}function HS(n,e,i){Uk()&&(eW(n,e,i,No(i,e)),(i.flags&64)===64&&XF(n,e,i))}function GS(n,e,i=No){let t=e.localNames;if(t!==null){let r=e.index+1;for(let o=0;o<t.length;o+=2){let s=t[o+1],a=s===-1?i(e,n):n[s];n[r++]=a}}}function $F(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=WS(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function WS(n,e,i,t,r,o,s,a,c,l,d){let u=fr+t,h=u+r,f=HG(u,h),p=typeof l=="function"?l():l;return f[Lt]={type:n,blueprint:f,template:i,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:d}}function HG(n,e){let i=[];for(let t=0;t<e;t++)i.push(t<n?null:Ls);return i}function GG(n,e,i,t){let o=t.get($5,gF)||i===ks.ShadowDom,s=n.selectRootElement(e,o);return WG(s),s}function WG(n){$G(n)}var $G=()=>null;function qG(n,e,i,t){let r=QF(e);r.push(i),n.firstCreatePass&&KF(n).push(t,r.length-1)}function XG(n,e,i,t,r,o){let s=e?e.injectorIndex:-1,a=0;return Vk()&&(a|=128),{type:i,index:t,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function jP(n,e,i,t,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;t??={};let a,c=at.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(r!==null){if(!r.hasOwnProperty(o))continue;l=r[o]}n===0?OP(t,i,l,a,c):OP(t,i,l,a)}return t}function OP(n,e,i,t,r){let o;n.hasOwnProperty(i)?(o=n[i]).push(e,t):o=n[i]=[e,t],r!==void 0&&o.push(r)}function YG(n,e,i){let t=e.directiveStart,r=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let d=t;d<r;d++){let u=o[d],h=i?i.get(u):null,f=h?h.inputs:null,p=h?h.outputs:null;c=jP(0,u.inputs,d,c,f),l=jP(1,u.outputs,d,l,p);let b=c!==null&&s!==null&&!vS(e)?uW(c,d,s):null;a.push(b)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function ZG(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function $S(n,e,i,t,r,o,s,a){let c=No(e,i),l=e.inputs,d;!a&&l!=null&&(d=l[t])?(XS(n,i,d,t,r),T_(e)&&QG(i,e.index)):e.type&3?(t=ZG(t),r=s!=null?s(r,e.value||"",t):r,o.setProperty(c,t,r)):e.type&12}function QG(n,e){let i=jc(e,n);i[It]&16||(i[It]|=64)}function qS(n,e,i,t){if(Uk()){let r=t===null?null:{"":-1},o=iW(n,i),s,a;o===null?s=a=null:[s,a]=o,s!==null&&qF(n,e,i,s,r,a),r&&nW(i,t,r)}i.mergedAttrs=nm(i.mergedAttrs,i.attrs)}function qF(n,e,i,t,r,o){for(let l=0;l<t.length;l++)bM(r_(i,e),n,t[l].type);oW(i,n.data.length,t.length);for(let l=0;l<t.length;l++){let d=t[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=GF(n,e,t.length,null);for(let l=0;l<t.length;l++){let d=t[l];i.mergedAttrs=nm(i.mergedAttrs,d.hostAttrs),sW(n,i,e,c,d),rW(c,d,r),d.contentQueries!==null&&(i.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(i.flags|=64);let u=d.type.prototype;!s&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((n.preOrderHooks??=[]).push(i.index),s=!0),!a&&(u.ngOnChanges||u.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(i.index),a=!0),c++}YG(n,i,o)}function KG(n,e,i,t,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;JG(s)!=a&&s.push(a),s.push(i,t,o)}}function JG(n){let e=n.length;for(;e>0;){let i=n[--e];if(typeof i=="number"&&i<0)return i}return 0}function eW(n,e,i,t){let r=i.directiveStart,o=i.directiveEnd;T_(i)&&aW(e,i,n.data[r+i.componentOffset]),n.firstCreatePass||r_(i,e),Fc(t,e);let s=i.initialInputs;for(let a=r;a<o;a++){let c=n.data[a],l=Xl(e,n,a,i);if(Fc(l,e),s!==null&&dW(e,a-r,l,c,i,s),ka(c)){let d=jc(i.index,e);d[vr]=Xl(e,n,a,i)}}}function XF(n,e,i){let t=i.directiveStart,r=i.directiveEnd,o=i.index,s=f5();try{$l(o);for(let a=t;a<r;a++){let c=n.data[a],l=e[a];pM(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&tW(c,l)}}finally{$l(-1),pM(s)}}function tW(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function iW(n,e){let i=n.directiveRegistry,t=null,r=null;if(i)for(let o=0;o<i.length;o++){let s=i[o];if(vk(e,s.selectors,!1))if(t||(t=[]),ka(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),t.unshift(...a,s);let c=a.length;IM(n,e,c)}else t.unshift(s),IM(n,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,t,r),t.push(s)}return t===null?null:[t,r]}function IM(n,e,i){e.componentOffset=i,(n.components??=[]).push(e.index)}function nW(n,e,i){if(e){let t=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=i[e[r+1]];if(o==null)throw new Pe(-301,!1);t.push(e[r],o)}}}function rW(n,e,i){if(i){if(e.exportAs)for(let t=0;t<e.exportAs.length;t++)i[e.exportAs[t]]=n;ka(e)&&(i[""]=n)}}function oW(n,e,i){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+i,n.providerIndexes=e}function sW(n,e,i,t,r){n.data[t]=r;let o=r.factory||(r.factory=Hl(r.type,!0)),s=new ql(o,ka(r),k);n.blueprint[t]=s,i[t]=s,KG(n,e,t,GF(n,i,r.hostVars,Ls),r)}function aW(n,e,i){let t=No(e,n),r=$F(i),o=n[rs].rendererFactory,s=16;i.signals?s=4096:i.onPush&&(s=64);let a=U_(n,B_(n,r,null,s,t,e,null,o.createRenderer(t,i),null,null,null));n[e.index]=a}function cW(n,e,i,t,r,o){let s=No(n,e);lW(e[pn],s,o,n.value,i,t,r)}function lW(n,e,i,t,r,o,s){if(o==null)n.removeAttribute(e,r,i);else{let a=s==null?y_(o):s(o,t||"",r);n.setAttribute(e,r,a,i)}}function dW(n,e,i,t,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],d=s[a++],u=s[a++];HF(t,i,c,l,d,u)}}function uW(n,e,i){let t=null,r=0;for(;r<i.length;){let o=i[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){t===null&&(t=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){t.push(o,s[a+1],s[a+2],i[r+1]);break}}r+=2}return t}function YF(n,e,i,t){return[n,!0,0,e,null,t,null,i,null,null]}function ZF(n,e){let i=n.contentQueries;if(i!==null){let t=gi(null);try{for(let r=0;r<i.length;r+=2){let o=i[r],s=i[r+1];if(s!==-1){let a=n.data[s];PS(o),a.contentQueries(2,e[s],s)}}}finally{gi(t)}}}function U_(n,e){return n[sm]?n[yP][ns]=e:n[sm]=e,n[yP]=e,e}function PM(n,e,i){PS(0);let t=gi(null);try{e(n,i)}finally{gi(t)}}function QF(n){return n[om]||(n[om]=[])}function KF(n){return n.cleanup||(n.cleanup=[])}function JF(n,e,i){return(n===null||ka(n))&&(i=QH(i[e.index])),i[pn]}function ej(n,e){let i=n[Ou],t=i?i.get(Lr,null):null;t&&t.handleError(e)}function XS(n,e,i,t,r){for(let o=0;o<i.length;){let s=i[o++],a=i[o++],c=i[o++],l=e[s],d=n.data[s];HF(d,l,t,a,c,r)}}function hW(n,e,i){let t=Nk(e,n);wG(n[pn],t,i)}function fW(n,e){let i=jc(e,n),t=i[Lt];mW(t,i);let r=i[Ns];r!==null&&i[ju]===null&&(i[ju]=NS(r,i[Ou])),YS(t,i,i[vr])}function mW(n,e){for(let i=e.length;i<n.blueprint.length;i++)e.push(n.blueprint[i])}function YS(n,e,i){kS(e);try{let t=n.viewQuery;t!==null&&PM(1,t,i);let r=n.template;r!==null&&WF(n,e,r,1,i),n.firstCreatePass&&(n.firstCreatePass=!1),e[Pa]?.finishViewCreation(n),n.staticContentQueries&&ZF(n,e),n.staticViewQueries&&PM(2,n.viewQuery,i);let o=n.components;o!==null&&pW(e,o)}catch(t){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),t}finally{e[It]&=-5,FS()}}function pW(n,e){for(let i=0;i<e.length;i++)fW(n,e[i])}function V_(n,e,i,t){let r=gi(null);try{let o=e.tView,a=n[It]&4096?4096:16,c=B_(n,o,i,a,null,e,null,null,t?.injector??null,t?.embeddedViewInjector??null,t?.dehydratedView??null),l=n[e.index];c[_m]=l;let d=n[Pa];return d!==null&&(c[Pa]=d.createEmbeddedView(o)),YS(o,c,i),c}finally{gi(r)}}function tj(n,e){let i=yr+e;if(i<n.length)return n[i]}function dm(n,e){return!e||e.firstChild===null||dF(n)}function z_(n,e,i,t=!0){let r=e[Lt];if(CG(r,e,n,i),t){let s=AM(i,n),a=e[pn],c=US(a,n[Wl]);c!==null&&RG(r,n[go],a,e,c,s)}let o=e[ju];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ij(n,e){let i=lm(n,e);return i!==void 0&&O_(i[Lt],i),i}function s_(n,e,i,t,r=!1){for(;i!==null;){let o=e[i.index];o!==null&&t.push(Fs(o)),Oa(o)&&gW(o,t);let s=i.type;if(s&8)s_(n,e,i.child,t);else if(s&32){let a=BS(i,e),c;for(;c=a();)t.push(c)}else if(s&16){let a=LF(e,i);if(Array.isArray(a))t.push(...a);else{let c=cm(e[jo]);s_(c[Lt],c,a,t,!0)}}i=r?i.projectionNext:i.next}return t}function gW(n,e){for(let i=yr;i<n.length;i++){let t=n[i],r=t[Lt].firstChild;r!==null&&s_(t[Lt],t,r,e)}n[Wl]!==n[Ns]&&e.push(n[Wl])}var nj=[];function bW(n){return n[Gl]??_W(n)}function _W(n){let e=nj.pop()??Object.create(yW);return e.lView=n,e}function vW(n){n.lView[Gl]!==n&&(n.lView=null,nj.push(n))}var yW=pi(xe({},qf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{am(n.lView)},consumerOnSignalRead(){this.lView[Gl]=this}}),rj=100;function oj(n,e=!0,i=0){let t=n[rs],r=t.rendererFactory,o=!1;o||r.begin?.();try{xW(n,i)}catch(s){throw e&&ej(n,s),s}finally{o||(r.end?.(),t.inlineEffectRunner?.flush())}}function xW(n,e){kM(n,e);let i=0;for(;ES(n);){if(i===rj)throw new Pe(103,!1);i++,kM(n,1)}}function wW(n,e,i,t){let r=e[It];if((r&256)===256)return;let o=!1;!o&&e[rs].inlineEffectRunner?.flush(),kS(e);let s=null,a=null;!o&&MW(n)&&(a=bW(e),s=rb(a));try{Lk(e),d5(n.bindingStartIndex),i!==null&&WF(n,e,i,2,t);let c=(r&3)===3;if(!o)if(c){let u=n.preOrderCheckHooks;u!==null&&Wb(e,u,null)}else{let u=n.preOrderHooks;u!==null&&$b(e,u,0,null),qw(e,0)}if(SW(e),sj(e,0),n.contentQueries!==null&&ZF(n,e),!o)if(c){let u=n.contentCheckHooks;u!==null&&Wb(e,u)}else{let u=n.contentHooks;u!==null&&$b(e,u,1),qw(e,1)}VG(n,e);let l=n.components;l!==null&&cj(e,l,0);let d=n.viewQuery;if(d!==null&&PM(2,d,t),!o)if(c){let u=n.viewCheckHooks;u!==null&&Wb(e,u)}else{let u=n.viewHooks;u!==null&&$b(e,u,2),qw(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Gb]){for(let u of e[Gb])u();e[Gb]=null}o||(e[It]&=-73)}catch(c){throw am(e),c}finally{a!==null&&(ob(a,s),vW(a)),FS()}}function MW(n){return n.type!==2}function sj(n,e){for(let i=hF(n);i!==null;i=fF(i))for(let t=yr;t<i.length;t++){let r=i[t];aj(r,e)}}function SW(n){for(let e=hF(n);e!==null;e=fF(e)){if(!(e[It]&MS.HasTransplantedViews))continue;let i=e[Nu];for(let t=0;t<i.length;t++){let r=i[t],o=r[hr];e5(r)}}}function RW(n,e,i){let t=jc(e,n);aj(t,i)}function aj(n,e){CS(n)&&kM(n,e)}function kM(n,e){let t=n[Lt],r=n[It],o=n[Gl],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&sb(o)),o&&(o.dirty=!1),n[It]&=-9217,s)wW(t,n,t.template,n[vr]);else if(r&8192){sj(n,1);let a=t.components;a!==null&&cj(n,a,1)}}function cj(n,e,i){for(let t=0;t<e.length;t++)RW(n,e[t],i)}function ZS(n){for(n[rs].changeDetectionScheduler?.notify();n;){n[It]|=64;let e=cm(n);if(HH(n)&&!e)return n;n=e}return null}var Yl=class{get rootNodes(){let e=this._lView,i=e[Lt];return s_(i,e,i.firstChild,[])}constructor(e,i,t=!0){this._lView=e,this._cdRefInjectingView=i,this.notifyErrorHandler=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[vr]}set context(e){this._lView[vr]=e}get destroyed(){return(this._lView[It]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[hr];if(Oa(e)){let i=e[e_],t=i?i.indexOf(this):-1;t>-1&&(lm(e,t),Kb(i,t))}this._attachedToViewContainer=!1}O_(this._lView[Lt],this._lView)}onDestroy(e){Bk(this._lView,e)}markForCheck(){ZS(this._cdRefInjectingView||this._lView)}detach(){this._lView[It]&=-129}reattach(){mM(this._lView),this._lView[It]|=128}detectChanges(){this._lView[It]|=1024,oj(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,kF(this._lView[Lt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Pe(902,!1);this._appRef=e,mM(this._lView)}},ir=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=EW;let n=e;return n})(),TW=ir,CW=class extends TW{constructor(e,i,t){super(),this._declarationLView=e,this._declarationTContainer=i,this.elementRef=t}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,i){return this.createEmbeddedViewImpl(e,i)}createEmbeddedViewImpl(e,i,t){let r=V_(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:i,dehydratedView:t});return new Yl(r)}};function EW(){return H_(mr(),Ft())}function H_(n,e){return n.type&4?new CW(e,n,Wu(n,e)):null}var E_e=new RegExp(`^(\\d+)*(${G5}|${H5})*(.*)`);var DW=()=>null;function um(n,e){return DW(n,e)}var Bu=class{},FM=class{},a_=class{};function AW(n){let e=Error(`No component factory found for ${Nr(n)}.`);return e[IW]=n,e}var IW="ngComponent";var jM=class{resolveComponentFactory(e){throw AW(e)}},Bs=(()=>{let e=class e{};e.NULL=new jM;let n=e;return n})(),Zl=class{},Us=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>PW();let n=e;return n})();function PW(){let n=Ft(),e=mr(),i=jc(e.index,n);return(Vl(i)?i:n)[pn]}var kW=(()=>{let e=class e{};e.\u0275prov=Me({token:e,providedIn:"root",factory:()=>null});let n=e;return n})(),Kw={};var NP=new Set;function Vs(n){NP.has(n)||(NP.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Du=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Du||{}),FW={destroy(){}};function G_(n,e){!e&&Ik(G_);let i=e?.injector??re(pr);if(!vG(i))return FW;Vs("NgAfterNextRender");let t=i.get(QS),r=t.handler??=new NM,o=e?.phase??Du.MixedReadWrite,s=()=>{r.unregister(c),a()},a=i.get(P_).onDestroy(s),c=os(i,()=>new OM(o,()=>{s(),n()}));return r.register(c),{destroy:s}}var OM=class{constructor(e,i){this.phase=e,this.callbackFn=i,this.errorHandler=re(Lr,{optional:!0}),re(Bu,{optional:!0})?.notify(1)}invoke(){try{this.callbackFn()}catch(e){this.errorHandler?.handleError(e)}}},NM=class{constructor(){this.executingCallbacks=!1,this.buckets={[Du.EarlyRead]:new Set,[Du.Write]:new Set,[Du.MixedReadWrite]:new Set,[Du.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let i of e)i.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},QS=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=Me({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();function c_(n,e,i){let t=i?n.styles:null,r=i?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=oM(r,a);else if(o==2){let c=a,l=e[++s];t=oM(t,c+": "+l+";")}}i?n.styles=t:n.stylesWithoutHost=t,i?n.classes=r:n.classesWithoutHost=r}var l_=class extends Bs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let i=kc(e);return new Uu(i,this.ngModule)}};function LP(n){let e=[];for(let i in n){if(!n.hasOwnProperty(i))continue;let t=n[i];t!==void 0&&e.push({propName:Array.isArray(t)?t[0]:t,templateName:i})}return e}function jW(n){let e=n.toLowerCase();return e==="svg"?qH:e==="math"?XH:null}var LM=class{constructor(e,i){this.injector=e,this.parentInjector=i}get(e,i,t){t=x_(t);let r=this.injector.get(e,Kw,t);return r!==Kw||i===Kw?r:this.parentInjector.get(e,i,t)}},Uu=class extends a_{get inputs(){let e=this.componentDef,i=e.inputTransforms,t=LP(e.inputs);if(i!==null)for(let r of t)i.hasOwnProperty(r.propName)&&(r.transform=i[r.propName]);return t}get outputs(){return LP(this.componentDef.outputs)}constructor(e,i){super(),this.componentDef=e,this.ngModule=i,this.componentType=e.type,this.selector=RH(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!i}create(e,i,t,r){let o=gi(null);try{r=r||this.ngModule;let s=r instanceof xr?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new LM(e,s):e,c=a.get(Zl,null);if(c===null)throw new Pe(407,!1);let l=a.get(kW,null),d=a.get(QS,null),u=a.get(Bu,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:u},f=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",b=t?GG(f,t,this.componentDef.encapsulation,a):PF(f,p,jW(p)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let g=null;b!==null&&(g=NS(b,a,!0));let v=WS(0,null,null,1,0,null,null,null,null,null,null),_=B_(null,v,null,m,null,null,h,f,a,null,g);kS(_);let y,C;try{let R=this.componentDef,w,A=null;R.findHostDirectiveDefs?(w=[],A=new Map,R.findHostDirectiveDefs(R,w,A),w.push(R)):w=[R];let S=OW(_,b),x=NW(S,b,R,w,_,h,f);C=RS(v,fr),b&&UW(f,R,b,t),i!==void 0&&VW(C,this.ngContentSelectors,i),y=BW(x,R,w,A,_,[zW]),YS(v,_,null)}finally{FS()}return new BM(this.componentType,y,Wu(C,_),_,C)}finally{gi(o)}}},BM=class extends FM{constructor(e,i,t,r,o){super(),this.location=t,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new Yl(r,void 0,!1),this.componentType=e}setInput(e,i){let t=this._tNode.inputs,r;if(t!==null&&(r=t[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),i))return;let o=this._rootLView;XS(o[Lt],o,r,e,i),this.previousInputValues.set(e,i);let s=jc(this._tNode.index,o);ZS(s)}}get injector(){return new zl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function OW(n,e){let i=n[Lt],t=fr;return n[t]=e,Xu(i,t,2,"#host",null)}function NW(n,e,i,t,r,o,s){let a=r[Lt];LW(t,n,e,s);let c=null;e!==null&&(c=NS(e,r[Ou]));let l=o.rendererFactory.createRenderer(e,i),d=16;i.signals?d=4096:i.onPush&&(d=64);let u=B_(r,$F(i),null,d,r[n.index],n,o,l,null,null,c);return a.firstCreatePass&&IM(a,n,t.length-1),U_(r,u),r[n.index]=u}function LW(n,e,i,t){for(let r of n)e.mergedAttrs=nm(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(c_(e,e.mergedAttrs,!0),i!==null&&VF(t,i,e))}function BW(n,e,i,t,r,o){let s=mr(),a=r[Lt],c=No(s,r);qF(a,r,s,i,null,t);for(let d=0;d<i.length;d++){let u=s.directiveStart+d,h=Xl(r,a,u,s);Fc(h,r)}XF(a,r,s),c&&Fc(c,r);let l=Xl(r,a,s.directiveStart+s.componentOffset,s);if(n[vr]=r[vr]=l,o!==null)for(let d of o)d(l,e);return zS(a,s,r),l}function UW(n,e,i,t){if(t)lM(n,i,["ng-version","17.3.7"]);else{let{attrs:r,classes:o}=TH(e.selectors[0]);r&&lM(n,i,r),o&&o.length>0&&UF(n,i,o.join(" "))}}function VW(n,e,i){let t=n.projection=[];for(let r=0;r<e.length;r++){let o=i[r];t.push(o!=null?Array.from(o):null)}}function zW(){let n=mr();I_(Ft()[Lt],n)}var zn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=HW;let n=e;return n})();function HW(){let n=mr();return dj(n,Ft())}var GW=zn,lj=class extends GW{constructor(e,i,t){super(),this._lContainer=e,this._hostTNode=i,this._hostLView=t}get element(){return Wu(this._hostTNode,this._hostLView)}get injector(){return new zl(this._hostTNode,this._hostLView)}get parentInjector(){let e=jS(this._hostTNode,this._hostLView);if(Kk(e)){let i=i_(e,this._hostLView),t=t_(e),r=i[Lt].data[t+8];return new zl(r,i)}else return new zl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let i=BP(this._lContainer);return i!==null&&i[e]||null}get length(){return this._lContainer.length-yr}createEmbeddedView(e,i,t){let r,o;typeof t=="number"?r=t:t!=null&&(r=t.index,o=t.injector);let s=um(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(i||{},o,s);return this.insertImpl(a,r,dm(this._hostTNode,s)),a}createComponent(e,i,t,r,o){let s=e&&!zH(e),a;if(s)a=i;else{let p=i||{};a=p.index,t=p.injector,r=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let c=s?e:new Uu(kc(e)),l=t||this.parentInjector;if(!o&&c.ngModule==null){let b=(s?l:this.parentInjector).get(xr,null);b&&(o=b)}let d=kc(c.componentType??{}),u=um(this._lContainer,d?.id??null),h=u?.firstChild??null,f=c.create(l,r,h,o);return this.insertImpl(f.hostView,a,dm(this._hostTNode,u)),f}insert(e,i){return this.insertImpl(e,i,!0)}insertImpl(e,i,t){let r=e._lView;if(JH(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[hr],l=new lj(c,c[go],c[hr]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(i),s=this._lContainer;return z_(s,r,o,t),e.attachToViewContainerRef(),fk(Jw(s),o,e),e}move(e,i){return this.insert(e,i)}indexOf(e){let i=BP(this._lContainer);return i!==null?i.indexOf(e):-1}remove(e){let i=this._adjustIndex(e,-1),t=lm(this._lContainer,i);t&&(Kb(Jw(this._lContainer),i),O_(t[Lt],t))}detach(e){let i=this._adjustIndex(e,-1),t=lm(this._lContainer,i);return t&&Kb(Jw(this._lContainer),i)!=null?new Yl(t):null}_adjustIndex(e,i=0){return e??this.length+i}};function BP(n){return n[e_]}function Jw(n){return n[e_]||(n[e_]=[])}function dj(n,e){let i,t=e[n.index];return Oa(t)?i=t:(i=YF(t,e,null,n),e[n.index]=i,U_(e,i)),$W(i,e,n,t),new lj(i,n,e)}function WW(n,e){let i=n[pn],t=i.createComment(""),r=No(e,n),o=US(i,r);return o_(i,o,t,kG(i,r),!1),t}var $W=YW,qW=()=>!1;function XW(n,e,i){return qW(n,e,i)}function YW(n,e,i,t){if(n[Wl])return;let r;i.type&8?r=Fs(t):r=WW(e,i),n[Wl]=r}var UM=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},VM=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let i=e.queries;if(i!==null){let t=e.contentQueries!==null?e.contentQueries[0]:i.length,r=[];for(let o=0;o<t;o++){let s=i.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let i=0;i<this.queries.length;i++)KS(e,i).matches!==null&&this.queries[i].setDirty()}},d_=class{constructor(e,i,t=null){this.flags=i,this.read=t,typeof e=="string"?this.predicate=n8(e):this.predicate=e}},zM=class n{constructor(e=[]){this.queries=e}elementStart(e,i){for(let t=0;t<this.queries.length;t++)this.queries[t].elementStart(e,i)}elementEnd(e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(e)}embeddedTView(e){let i=null;for(let t=0;t<this.length;t++){let r=i!==null?i.length:0,o=this.getByIndex(t).embeddedTView(e,r);o&&(o.indexInDeclarationView=t,i!==null?i.push(o):i=[o])}return i!==null?new n(i):null}template(e,i){for(let t=0;t<this.queries.length;t++)this.queries[t].template(e,i)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},HM=class n{constructor(e,i=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(e,i){this.isApplyingToNode(i)&&this.matchTNode(e,i)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,i){this.elementStart(e,i)}embeddedTView(e,i){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,i),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let i=this._declarationNodeIndex,t=e.parent;for(;t!==null&&t.type&8&&t.index!==i;)t=t.parent;return i===(t!==null?t.index:-1)}return this._appliesToNextNode}matchTNode(e,i){let t=this.metadata.predicate;if(Array.isArray(t))for(let r=0;r<t.length;r++){let o=t[r];this.matchTNodeWithReadOption(e,i,ZW(i,o)),this.matchTNodeWithReadOption(e,i,qb(i,e,o,!1,!1))}else t===ir?i.type&4&&this.matchTNodeWithReadOption(e,i,-1):this.matchTNodeWithReadOption(e,i,qb(i,e,t,!1,!1))}matchTNodeWithReadOption(e,i,t){if(t!==null){let r=this.metadata.read;if(r!==null)if(r===Qe||r===zn||r===ir&&i.type&4)this.addMatch(i.index,-2);else{let o=qb(i,e,r,!1,!1);o!==null&&this.addMatch(i.index,o)}else this.addMatch(i.index,t)}}addMatch(e,i){this.matches===null?this.matches=[e,i]:this.matches.push(e,i)}};function ZW(n,e){let i=n.localNames;if(i!==null){for(let t=0;t<i.length;t+=2)if(i[t]===e)return i[t+1]}return null}function QW(n,e){return n.type&11?Wu(n,e):n.type&4?H_(n,e):null}function KW(n,e,i,t){return i===-1?QW(e,n):i===-2?JW(n,e,t):Xl(n,n[Lt],i,e)}function JW(n,e,i){if(i===Qe)return Wu(e,n);if(i===ir)return H_(e,n);if(i===zn)return dj(e,n)}function uj(n,e,i,t){let r=e[Pa].queries[t];if(r.matches===null){let o=n.data,s=i.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let d=o[l];a.push(KW(e,d,s[c+1],i.metadata.read))}}r.matches=a}return r.matches}function GM(n,e,i,t){let r=n.queries.getByIndex(i),o=r.matches;if(o!==null){let s=uj(n,e,r,i);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)t.push(s[a/2]);else{let l=o[a+1],d=e[-c];for(let u=yr;u<d.length;u++){let h=d[u];h[_m]===h[hr]&&GM(h[Lt],h,l,t)}if(d[Nu]!==null){let u=d[Nu];for(let h=0;h<u.length;h++){let f=u[h];GM(f[Lt],f,l,t)}}}}}return t}function e8(n,e){return n[Pa].queries[e].queryList}function hj(n,e,i){let t=new js((i&4)===4);return qG(n,e,t,t.destroy),(e[Pa]??=new VM).queries.push(new UM(t))-1}function t8(n,e,i){let t=gn();return t.firstCreatePass&&(fj(t,new d_(n,e,i),-1),(e&2)===2&&(t.staticViewQueries=!0)),hj(t,Ft(),e)}function i8(n,e,i,t){let r=gn();if(r.firstCreatePass){let o=mr();fj(r,new d_(e,i,t),o.index),r8(r,n),(i&2)===2&&(r.staticContentQueries=!0)}return hj(r,Ft(),i)}function n8(n){return n.split(",").map(e=>e.trim())}function fj(n,e,i){n.queries===null&&(n.queries=new zM),n.queries.track(new HM(e,i))}function r8(n,e){let i=n.contentQueries||(n.contentQueries=[]),t=i.length?i[i.length-1]:-1;e!==t&&i.push(n.queries.length-1,e)}function KS(n,e){return n.queries.getByIndex(e)}function o8(n,e){let i=n[Lt],t=KS(i,e);return t.crossesNgTemplate?GM(i,n,e,[]):uj(i,n,t,e)}function W_(n){return typeof n=="function"&&n[Qo]!==void 0}function JS(n,e){Vs("NgSignals");let i=jI(n),t=i[Qo];return e?.equal&&(t.equal=e.equal),i.set=r=>cb(t,r),i.update=r=>OI(t,r),i.asReadonly=s8.bind(i),i}function s8(){let n=this[Qo];if(n.readonlyFn===void 0){let e=()=>this();e[Qo]=n,n.readonlyFn=e}return n.readonlyFn}function mj(n){return W_(n)&&typeof n.set=="function"}function a8(n){let e=[],i=new Map;function t(r){let o=i.get(r);if(!o){let s=n(r);i.set(r,o=s.then(u8))}return o}return u_.forEach((r,o)=>{let s=[];r.templateUrl&&s.push(t(r.templateUrl).then(l=>{r.template=l}));let a=typeof r.styles=="string"?[r.styles]:r.styles||[];if(r.styles=a,r.styleUrl&&r.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(r.styleUrls?.length){let l=r.styles.length,d=r.styleUrls;r.styleUrls.forEach((u,h)=>{a.push(""),s.push(t(u).then(f=>{a[l+h]=f,d.splice(d.indexOf(u),1),d.length==0&&(r.styleUrls=void 0)}))})}else r.styleUrl&&s.push(t(r.styleUrl).then(l=>{a.push(l),r.styleUrl=void 0}));let c=Promise.all(s).then(()=>h8(o));e.push(c)}),l8(),Promise.all(e).then(()=>{})}var u_=new Map,c8=new Set;function l8(){let n=u_;return u_=new Map,n}function d8(){return u_.size===0}function u8(n){return typeof n=="string"?n:n.text()}function h8(n){c8.delete(n)}function f8(n){return Object.getPrototypeOf(n.prototype).constructor}function X(n){let e=f8(n.type),i=!0,t=[n];for(;e;){let r;if(ka(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Pe(903,!1);r=e.\u0275dir}if(r){if(i){t.push(r);let s=n;s.inputs=Ub(n.inputs),s.inputTransforms=Ub(n.inputTransforms),s.declaredInputs=Ub(n.declaredInputs),s.outputs=Ub(n.outputs);let a=r.hostBindings;a&&_8(n,a);let c=r.viewQuery,l=r.contentQueries;if(c&&g8(n,c),l&&b8(n,l),m8(n,r),G4(n.outputs,r.outputs),ka(r)&&r.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===X&&(i=!1)}}e=Object.getPrototypeOf(e)}p8(t)}function m8(n,e){for(let i in e.inputs){if(!e.inputs.hasOwnProperty(i)||n.inputs.hasOwnProperty(i))continue;let t=e.inputs[i];if(t!==void 0&&(n.inputs[i]=t,n.declaredInputs[i]=e.declaredInputs[i],e.inputTransforms!==null)){let r=Array.isArray(t)?t[0]:t;if(!e.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=e.inputTransforms[r]}}}function p8(n){let e=0,i=null;for(let t=n.length-1;t>=0;t--){let r=n[t];r.hostVars=e+=r.hostVars,r.hostAttrs=nm(r.hostAttrs,i=nm(i,r.hostAttrs))}}function Ub(n){return n===Pu?{}:n===Qr?[]:n}function g8(n,e){let i=n.viewQuery;i?n.viewQuery=(t,r)=>{e(t,r),i(t,r)}:n.viewQuery=e}function b8(n,e){let i=n.contentQueries;i?n.contentQueries=(t,r,o)=>{e(t,r,o),i(t,r,o)}:n.contentQueries=e}function _8(n,e){let i=n.hostBindings;i?n.hostBindings=(t,r)=>{e(t,r),i(t,r)}:n.hostBindings=e}function ln(n){let e=n.inputConfig,i={};for(let t in e)if(e.hasOwnProperty(t)){let r=e[t];Array.isArray(r)&&r[3]&&(i[t]=r[3])}n.inputTransforms=i}var ja=class{},hm=class{};function pj(n,e){return new fm(n,e??null,[])}var fm=class extends ja{constructor(e,i,t){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new l_(this);let r=Mk(e);this._bootstrapComponents=IF(r.bootstrap),this._r3Injector=aF(e,i,[{provide:ja,useValue:this},{provide:Bs,useValue:this.componentFactoryResolver},...t],Nr(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},h_=class extends hm{constructor(e){super(),this.moduleType=e}create(e){return new fm(this.moduleType,e,[])}};function v8(n,e,i){return new fm(n,e,i)}var WM=class extends ja{constructor(e){super(),this.componentFactoryResolver=new l_(this),this.instance=null;let i=new rm([...e.providers,{provide:ja,useValue:this},{provide:Bs,useValue:this.componentFactoryResolver}],e.parent||xS(),e.debugName,new Set(["environment"]));this.injector=i,e.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function $_(n,e,i=null){return new WM({providers:n,parent:e,debugName:i,runEnvironmentInitializers:!0}).injector}var Bc=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new xn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function gj(n){return eR(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function y8(n,e){if(Array.isArray(n))for(let i=0;i<n.length;i++)e(n[i]);else{let i=n[Symbol.iterator](),t;for(;!(t=i.next()).done;)e(t.value)}}function eR(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function wm(n,e,i){return n[e]=i}function x8(n,e){return n[e]}function po(n,e,i){let t=n[e];return Object.is(t,i)?!1:(n[e]=i,!0)}function f_(n,e,i,t){let r=po(n,e,i);return po(n,e+1,t)||r}function w8(n,e,i,t,r){let o=f_(n,e,i,t);return po(n,e+2,r)||o}function M8(n,e,i,t,r,o){let s=f_(n,e,i,t);return f_(n,e+2,r,o)||s}function S8(n){return(n.flags&32)===32}function R8(n,e,i,t,r,o,s,a,c){let l=e.consts,d=Xu(e,n,4,s||null,Lu(l,a));qS(e,i,d,Lu(l,c)),I_(e,d);let u=d.tView=WS(2,d,t,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),u.queries=e.queries.embeddedTView(d)),d}function Nt(n,e,i,t,r,o,s,a){let c=Ft(),l=gn(),d=n+fr,u=l.firstCreatePass?R8(d,l,c,e,i,t,r,o,s):l.data[d];Kl(u,!1);let h=T8(l,c,u,n);D_()&&N_(l,c,h,u),Fc(h,c);let f=YF(h,c,h,u);return c[d]=f,U_(c,f),XW(f,u,c),C_(u)&&HS(l,c,u),s!=null&&GS(c,u,a),Nt}var T8=C8;function C8(n,e,i,t){return A_(!0),e[pn].createComment("")}function UP(...n){}function E8(){let n=typeof ur.requestAnimationFrame=="function",e=ur[n?"requestAnimationFrame":"setTimeout"],i=ur[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&i){let t=e[Zone.__symbol__("OriginalDelegate")];t&&(e=t);let r=i[Zone.__symbol__("OriginalDelegate")];r&&(i=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:i}}var Xe=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:t=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new et(!1),this.onMicrotaskEmpty=new et(!1),this.onStable=new et(!1),this.onError=new et(!1),typeof Zone>"u")throw new Pe(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!t&&i,r.shouldCoalesceRunChangeDetection=t,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=E8().nativeRequestAnimationFrame,I8(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Pe(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Pe(909,!1)}run(e,i,t){return this._inner.run(e,i,t)}runTask(e,i,t,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,D8,UP,UP);try{return o.runTask(s,i,t)}finally{o.cancelTask(s)}}runGuarded(e,i,t){return this._inner.runGuarded(e,i,t)}runOutsideAngular(e){return this._outer.run(e)}},D8={};function tR(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function A8(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ur,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,$M(n),n.isCheckStableRunning=!0,tR(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),$M(n))}function I8(n){let e=()=>{A8(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,t,r,o,s,a)=>{if(P8(a))return i.invokeTask(r,o,s,a);try{return VP(n),i.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),zP(n)}},onInvoke:(i,t,r,o,s,a,c)=>{try{return VP(n),i.invoke(r,o,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),zP(n)}},onHasTask:(i,t,r,o)=>{i.hasTask(r,o),t===r&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,$M(n),tR(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,t,r,o)=>(i.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function $M(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function VP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function zP(n){n._nesting--,tR(n)}var qM=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new et,this.onMicrotaskEmpty=new et,this.onStable=new et,this.onError=new et}run(e,i,t){return e.apply(i,t)}runGuarded(e,i,t){return e.apply(i,t)}runOutsideAngular(e){return e()}runTask(e,i,t,r){return e.apply(i,t)}};function P8(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}function k8(n="zone.js",e){return n==="noop"?new qM:n==="zone.js"?new Xe(e):n}function Vi(n,e,i,t){let r=Ft(),o=ed();if(po(r,o,e)){let s=gn(),a=E_();cW(a,r,n,e,i,t)}return Vi}function F8(n,e,i,t){return po(n,ed(),i)?e+y_(i)+t:Ls}function Vb(n,e){return n<<17|e<<2}function Ql(n){return n>>17&32767}function j8(n){return(n&2)==2}function O8(n,e){return n&131071|e<<17}function XM(n){return n|2}function Vu(n){return(n&131068)>>2}function eM(n,e){return n&-131069|e<<2}function N8(n){return(n&1)===1}function YM(n){return n|1}function L8(n,e,i,t,r,o){let s=o?e.classBindings:e.styleBindings,a=Ql(s),c=Vu(s);n[t]=i;let l=!1,d;if(Array.isArray(i)){let u=i;d=u[1],(d===null||bm(u,d)>0)&&(l=!0)}else d=i;if(r)if(c!==0){let h=Ql(n[a+1]);n[t+1]=Vb(h,a),h!==0&&(n[h+1]=eM(n[h+1],t)),n[a+1]=O8(n[a+1],t)}else n[t+1]=Vb(a,0),a!==0&&(n[a+1]=eM(n[a+1],t)),a=t;else n[t+1]=Vb(c,0),a===0?a=t:n[c+1]=eM(n[c+1],t),c=t;l&&(n[t+1]=XM(n[t+1])),HP(n,d,t,!0),HP(n,d,t,!1),B8(e,d,n,t,o),s=Vb(a,c),o?e.classBindings=s:e.styleBindings=s}function B8(n,e,i,t,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&bm(o,e)>=0&&(i[t+1]=YM(i[t+1]))}function HP(n,e,i,t){let r=n[i+1],o=e===null,s=t?Ql(r):Vu(r),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];U8(c,e)&&(a=!0,n[s+1]=t?YM(l):XM(l)),s=t?Ql(l):Vu(l)}a&&(n[i+1]=t?XM(r):YM(r))}function U8(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?bm(n,e)>=0:!1}var Xn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function bj(n){return n.substring(Xn.key,Xn.keyEnd)}function V8(n){return n.substring(Xn.value,Xn.valueEnd)}function z8(n){return yj(n),_j(n,zu(n,0,Xn.textEnd))}function _j(n,e){let i=Xn.textEnd;return i===e?-1:(e=Xn.keyEnd=G8(n,Xn.key=e,i),zu(n,e,i))}function H8(n){return yj(n),vj(n,zu(n,0,Xn.textEnd))}function vj(n,e){let i=Xn.textEnd,t=Xn.key=zu(n,e,i);return i===t?-1:(t=Xn.keyEnd=W8(n,t,i),t=GP(n,t,i,58),t=Xn.value=zu(n,t,i),t=Xn.valueEnd=$8(n,t,i),GP(n,t,i,59))}function yj(n){Xn.key=0,Xn.keyEnd=0,Xn.value=0,Xn.valueEnd=0,Xn.textEnd=n.length}function zu(n,e,i){for(;e<i&&n.charCodeAt(e)<=32;)e++;return e}function G8(n,e,i){for(;e<i&&n.charCodeAt(e)>32;)e++;return e}function W8(n,e,i){let t;for(;e<i&&((t=n.charCodeAt(e))===45||t===95||(t&-33)>=65&&(t&-33)<=90||t>=48&&t<=57);)e++;return e}function GP(n,e,i,t){return e=zu(n,e,i),e<i&&e++,e}function $8(n,e,i){let t=-1,r=-1,o=-1,s=e,a=s;for(;s<i;){let c=n.charCodeAt(s++);if(c===59)return a;c===34||c===39?a=s=WP(n,c,s,i):e===s-4&&o===85&&r===82&&t===76&&c===40?a=s=WP(n,41,s,i):c>32&&(a=s),o=r,r=t,t=c&-33}return a}function WP(n,e,i,t){let r=-1,o=i;for(;o<t;){let s=n.charCodeAt(o++);if(s==e&&r!==92)return o;s==92&&r===92?r=0:r=s}throw new Error}function P(n,e,i){let t=Ft(),r=ed();if(po(t,r,e)){let o=gn(),s=E_();$S(o,s,t,n,e,t[pn],i,!1)}return P}function ZM(n,e,i,t,r){let o=e.inputs,s=r?"class":"style";XS(n,i,o[s],s,t)}function Bo(n,e,i){return xj(n,e,i,!1),Bo}function Bt(n,e){return xj(n,e,null,!0),Bt}function q_(n){wj(Rj,q8,n,!1)}function q8(n,e){for(let i=H8(e);i>=0;i=vj(e,i))Rj(n,bj(e),V8(e))}function Uo(n){wj(e6,X8,n,!0)}function X8(n,e){for(let i=z8(e);i>=0;i=_j(e,i))w_(n,bj(e),!0)}function xj(n,e,i,t){let r=Ft(),o=gn(),s=Hk(2);if(o.firstUpdatePass&&Sj(o,n,s,t),e!==Ls&&po(r,s,e)){let a=o.data[Oc()];Tj(o,a,r,r[pn],n,r[s+1]=i6(e,i),t,s)}}function wj(n,e,i,t){let r=gn(),o=Hk(2);r.firstUpdatePass&&Sj(r,null,o,t);let s=Ft();if(i!==Ls&&po(s,o,i)){let a=r.data[Oc()];if(Cj(a,t)&&!Mj(r,o)){let c=t?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(i=oM(c,i||"")),ZM(r,a,s,i,t)}else t6(r,a,s,s[pn],s[o+1],s[o+1]=J8(n,e,i),t,o)}}function Mj(n,e){return e>=n.expandoStartIndex}function Sj(n,e,i,t){let r=n.data;if(r[i+1]===null){let o=r[Oc()],s=Mj(n,i);Cj(o,t)&&e===null&&!s&&(e=!1),e=Y8(r,o,e,t),L8(r,o,e,i,s,t)}}function Y8(n,e,i,t){let r=IS(n),o=t?e.residualClasses:e.residualStyles;if(r===null)(t?e.classBindings:e.styleBindings)===0&&(i=tM(null,n,e,i,t),i=mm(i,e.attrs,t),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==r)if(i=tM(r,n,e,i,t),o===null){let c=Z8(n,e,t);c!==void 0&&Array.isArray(c)&&(c=tM(null,n,e,c[1],t),c=mm(c,e.attrs,t),Q8(n,e,t,c))}else o=K8(n,e,t)}return o!==void 0&&(t?e.residualClasses=o:e.residualStyles=o),i}function Z8(n,e,i){let t=i?e.classBindings:e.styleBindings;if(Vu(t)!==0)return n[Ql(t)]}function Q8(n,e,i,t){let r=i?e.classBindings:e.styleBindings;n[Ql(r)]=t}function K8(n,e,i){let t,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;t=mm(t,s,i)}return mm(t,e.attrs,i)}function tM(n,e,i,t,r){let o=null,s=i.directiveEnd,a=i.directiveStylingLast;for(a===-1?a=i.directiveStart:a++;a<s&&(o=e[a],t=mm(t,o.hostAttrs,r),o!==n);)a++;return n!==null&&(i.directiveStylingLast=a),t}function mm(n,e,i){let t=i?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===t&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),w_(n,s,i?!0:e[++o]))}return n===void 0?null:n}function J8(n,e,i){if(i==null||i==="")return Qr;let t=[],r=Lo(i);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(t,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(t,o,r[o]);else typeof r=="string"&&e(t,r);return t}function Rj(n,e,i){w_(n,e,Lo(i))}function e6(n,e,i){let t=String(e);t!==""&&!t.includes(" ")&&w_(n,t,i)}function t6(n,e,i,t,r,o,s,a){r===Ls&&(r=Qr);let c=0,l=0,d=0<r.length?r[0]:null,u=0<o.length?o[0]:null;for(;d!==null||u!==null;){let h=c<r.length?r[c+1]:void 0,f=l<o.length?o[l+1]:void 0,p=null,b;d===u?(c+=2,l+=2,h!==f&&(p=u,b=f)):u===null||d!==null&&d<u?(c+=2,p=d):(l+=2,p=u,b=f),p!==null&&Tj(n,e,i,t,p,b,s,a),d=c<r.length?r[c]:null,u=l<o.length?o[l]:null}}function Tj(n,e,i,t,r,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=N8(l)?$P(c,e,i,r,Vu(l),s):void 0;if(!m_(d)){m_(o)||j8(l)&&(o=$P(c,null,i,r,a,s));let u=Nk(Oc(),i);BG(t,s,u,r,o)}}function $P(n,e,i,t,r,o){let s=e===null,a;for(;r>0;){let c=n[r],l=Array.isArray(c),d=l?c[1]:c,u=d===null,h=i[r+1];h===Ls&&(h=u?Qr:void 0);let f=u?Ww(h,t):d===t?h:void 0;if(l&&!m_(f)&&(f=Ww(c,t)),m_(f)&&(a=f,s))return a;let p=n[r+1];r=s?Ql(p):Vu(p)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Ww(c,t))}return a}function m_(n){return n!==void 0}function i6(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Nr(Lo(n)))),n}function Cj(n,e){return(n.flags&(e?8:16))!==0}var QM=class{destroy(e){}updateValue(e,i){}swap(e,i){let t=Math.min(e,i),r=Math.max(e,i),o=this.detach(r);if(r-t>1){let s=this.detach(t);this.attach(t,o),this.attach(r,s)}else this.attach(t,o)}move(e,i){this.attach(i,this.detach(e))}};function iM(n,e,i,t,r){return n===i&&Object.is(e,t)?1:Object.is(r(n,e),r(i,t))?-1:0}function n6(n,e,i){let t,r,o=0,s=n.length-1;if(Array.isArray(e)){let a=e.length-1;for(;o<=s&&o<=a;){let c=n.at(o),l=e[o],d=iM(o,c,o,l,i);if(d!==0){d<0&&n.updateValue(o,l),o++;continue}let u=n.at(s),h=e[a],f=iM(s,u,a,h,i);if(f!==0){f<0&&n.updateValue(s,h),s--,a--;continue}let p=i(o,c),b=i(s,u),m=i(o,l);if(Object.is(m,b)){let g=i(a,h);Object.is(g,p)?(n.swap(o,s),n.updateValue(s,h),a--,s--):n.move(s,o),n.updateValue(o,l),o++;continue}if(t??=new p_,r??=XP(n,o,s,i),KM(n,t,o,m))n.updateValue(o,l),o++,s++;else if(r.has(m))t.set(p,n.detach(o)),s--;else{let g=n.create(o,e[o]);n.attach(o,g),o++,s++}}for(;o<=a;)qP(n,t,i,o,e[o]),o++}else if(e!=null){let a=e[Symbol.iterator](),c=a.next();for(;!c.done&&o<=s;){let l=n.at(o),d=c.value,u=iM(o,l,o,d,i);if(u!==0)u<0&&n.updateValue(o,d),o++,c=a.next();else{t??=new p_,r??=XP(n,o,s,i);let h=i(o,d);if(KM(n,t,o,h))n.updateValue(o,d),o++,s++,c=a.next();else if(!r.has(h))n.attach(o,n.create(o,d)),o++,s++,c=a.next();else{let f=i(o,l);t.set(f,n.detach(o)),s--}}}for(;!c.done;)qP(n,t,i,n.length,c.value),c=a.next()}for(;o<=s;)n.destroy(n.detach(s--));t?.forEach(a=>{n.destroy(a)})}function KM(n,e,i,t){return e!==void 0&&e.has(t)?(n.attach(i,e.get(t)),e.delete(t),!0):!1}function qP(n,e,i,t,r){if(KM(n,e,t,i(t,r)))n.updateValue(t,r);else{let o=n.create(t,r);n.attach(t,o)}}function XP(n,e,i,t){let r=new Set;for(let o=e;o<=i;o++)r.add(t(o,n.at(o)));return r}var p_=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let i=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(i)?(this.kvMap.set(e,this._vMap.get(i)),this._vMap.delete(i)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,i){if(this.kvMap.has(e)){let t=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(t);)t=r.get(t);r.set(t,i)}else this.kvMap.set(e,i)}forEach(e){for(let[i,t]of this.kvMap)if(e(t,i),this._vMap!==void 0){let r=this._vMap;for(;r.has(t);)t=r.get(t),e(t,i)}}};function bo(n,e,i){Vs("NgControlFlow");let t=Ft(),r=ed(),o=iS(t,fr+n),s=0;if(po(t,r,e)){let a=gi(null);try{if(ij(o,s),e!==-1){let c=nS(t[Lt],fr+e),l=um(o,c.tView.ssrId),d=V_(t,c,i,{dehydratedView:l});z_(o,d,s,dm(c,l))}}finally{gi(a)}}else{let a=tj(o,s);a!==void 0&&(a[vr]=i)}}var JM=class{constructor(e,i,t){this.lContainer=e,this.$implicit=i,this.$index=t}get $count(){return this.lContainer.length-yr}};function X_(n,e){return e}var eS=class{constructor(e,i,t){this.hasEmptyBlock=e,this.trackByFn=i,this.liveCollection=t}};function Y_(n,e,i,t,r,o,s,a,c,l,d,u,h){Vs("NgControlFlow");let f=c!==void 0,p=Ft(),b=a?s.bind(p[jo][vr]):s,m=new eS(f,b);p[fr+n]=m,Nt(n+1,e,i,t,r,o),f&&Nt(n+2,c,l,d,u,h)}var tS=class extends QM{constructor(e,i,t){super(),this.lContainer=e,this.hostLView=i,this.templateTNode=t,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-yr}at(e){return this.getLView(e)[vr].$implicit}attach(e,i){let t=i[ju];this.needsIndexUpdate||=e!==this.length,z_(this.lContainer,i,e,dm(this.templateTNode,t))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,r6(this.lContainer,e)}create(e,i){let t=um(this.lContainer,this.templateTNode.tView.ssrId);return V_(this.hostLView,this.templateTNode,new JM(this.lContainer,i,e),{dehydratedView:t})}destroy(e){O_(e[Lt],e)}updateValue(e,i){this.getLView(e)[vr].$implicit=i}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[vr].$index=e}getLView(e){return o6(this.lContainer,e)}};function Z_(n){let e=gi(null),i=Oc();try{let t=Ft(),r=t[Lt],o=t[i];if(o.liveCollection===void 0){let a=i+1,c=iS(t,a),l=nS(r,a);o.liveCollection=new tS(c,t,l)}else o.liveCollection.reset();let s=o.liveCollection;if(n6(s,n,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let a=ed(),c=s.length===0;if(po(t,a,c)){let l=i+2,d=iS(t,l);if(c){let u=nS(r,l),h=um(d,u.tView.ssrId),f=V_(t,u,void 0,{dehydratedView:h});z_(d,f,0,dm(u,h))}else ij(d,0)}}}finally{gi(e)}}function iS(n,e){return n[e]}function r6(n,e){return lm(n,e)}function o6(n,e){return tj(n,e)}function nS(n,e){return RS(n,e)}function s6(n,e,i,t,r,o){let s=e.consts,a=Lu(s,r),c=Xu(e,n,2,t,a);return qS(e,i,c,Lu(s,o)),c.attrs!==null&&c_(c,c.attrs,!1),c.mergedAttrs!==null&&c_(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function H(n,e,i,t){let r=Ft(),o=gn(),s=fr+n,a=r[pn],c=o.firstCreatePass?s6(s,o,r,e,i,t):o.data[s],l=a6(o,r,c,a,e,n);r[s]=l;let d=C_(c);return Kl(c,!0),VF(a,l,c),!S8(c)&&D_()&&N_(o,r,l,c),n5()===0&&Fc(l,r),r5(),d&&(HS(o,r,c),zS(o,c,r)),t!==null&&GS(r,c),H}function ie(){let n=mr();DS()?AS():(n=n.parent,Kl(n,!1));let e=n;s5(e)&&a5(),o5();let i=gn();return i.firstCreatePass&&(I_(i,n),SS(n)&&i.queries.elementEnd(n)),e.classesWithoutHost!=null&&y5(e)&&ZM(i,e,Ft(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&x5(e)&&ZM(i,e,Ft(),e.stylesWithoutHost,!1),ie}function he(n,e,i,t){return H(n,e,i,t),ie(),he}var a6=(n,e,i,t,r,o)=>(A_(!0),PF(t,r,g5()));function c6(n,e,i,t,r){let o=e.consts,s=Lu(o,t),a=Xu(e,n,8,"ng-container",s);s!==null&&c_(a,s,!0);let c=Lu(o,r);return qS(e,i,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Ej(n,e,i){let t=Ft(),r=gn(),o=n+fr,s=r.firstCreatePass?c6(o,r,t,e,i):r.data[o];Kl(s,!0);let a=l6(r,t,s,n);return t[o]=a,D_()&&N_(r,t,a,s),Fc(a,t),C_(s)&&(HS(r,t,s),zS(r,s,t)),i!=null&&GS(t,s),Ej}function Dj(){let n=mr(),e=gn();return DS()?AS():(n=n.parent,Kl(n,!1)),e.firstCreatePass&&(I_(e,n),SS(n)&&e.queries.elementEnd(n)),Dj}function Yu(n,e,i){return Ej(n,e,i),Dj(),Yu}var l6=(n,e,i,t)=>(A_(!0),MG(e[pn],""));function Gt(){return Ft()}function iR(n,e,i){let t=Ft(),r=ed();if(po(t,r,e)){let o=gn(),s=E_(),a=IS(o.data),c=JF(a,s,t);$S(o,s,t,n,e,c,i,!0)}return iR}var g_="en-US";var d6=g_;function u6(n){typeof n=="string"&&(d6=n.toLowerCase().replace(/_/g,"-"))}function Fe(n,e,i,t){let r=Ft(),o=gn(),s=mr();return rR(o,r,r[pn],s,n,e,t),Fe}function nR(n,e){let i=mr(),t=Ft(),r=gn(),o=IS(r.data),s=JF(o,i,t);return rR(r,t,s,i,n,e),nR}function h6(n,e,i,t){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===i&&r[o+1]===t){let a=e[om],c=r[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function rR(n,e,i,t,r,o,s){let a=C_(t),l=n.firstCreatePass&&KF(n),d=e[vr],u=QF(e),h=!0;if(t.type&3||s){let b=No(t,e),m=s?s(b):b,g=u.length,v=s?y=>s(Fs(y[t.index])):t.index,_=null;if(!s&&a&&(_=h6(n,e,r,t.index)),_!==null){let y=_.__ngLastListenerFn__||_;y.__ngNextListenerFn__=o,_.__ngLastListenerFn__=o,h=!1}else{o=ZP(t,e,d,o,!1);let y=i.listen(m,r,o);u.push(o,y),l&&l.push(r,v,g,g+1)}}else o=ZP(t,e,d,o,!1);let f=t.outputs,p;if(h&&f!==null&&(p=f[r])){let b=p.length;if(b)for(let m=0;m<b;m+=2){let g=p[m],v=p[m+1],C=e[g][v].subscribe(o),R=u.length;u.push(o,C),l&&l.push(r,t.index,R,-(R+1))}}}function YP(n,e,i,t){let r=gi(null);try{return Is(6,e,i),i(t)!==!1}catch(o){return ej(n,o),!1}finally{Is(7,e,i),gi(r)}}function ZP(n,e,i,t,r){return function o(s){if(s===Function)return t;let a=n.componentOffset>-1?jc(n.index,e):e;ZS(a);let c=YP(e,i,t,s),l=o.__ngNextListenerFn__;for(;l;)c=YP(e,i,l,s)&&c,l=l.__ngNextListenerFn__;return r&&c===!1&&s.preventDefault(),c}}function Ut(n=1){return p5(n)}function f6(n,e){let i=null,t=yH(n);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){i=r;continue}if(t===null?vk(n,o,!0):MH(t,o))return r}return i}function ce(n){let e=Ft()[jo][go];if(!e.projection){let i=n?n.length:1,t=e.projection=uH(i,null),r=t.slice(),o=e.child;for(;o!==null;){let s=n?f6(o,n):0;s!==null&&(r[s]?r[s].projectionNext=o:t[s]=o,r[s]=o),o=o.next}}}function ee(n,e=0,i){let t=Ft(),r=gn(),o=Xu(r,fr+n,16,null,i||null);o.projection===null&&(o.projection=e),AS(),(!t[ju]||Vk())&&(o.flags&32)!==32&&NG(r,t,o)}function qi(n,e,i,t){i8(n,e,i,t)}function Vt(n,e,i){t8(n,e,i)}function nt(n){let e=Ft(),i=gn(),t=Gk();PS(t+1);let r=KS(i,t);if(n.dirty&&KH(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=o8(e,t);n.reset(o,j5),n.notifyOnChanges()}return!0}return!1}function rt(){return e8(Ft(),Gk())}function m6(n,e,i,t){i>=n.data.length&&(n.data[i]=null,n.blueprint[i]=null),e[i]=t}function Tt(n){let e=l5();return TS(e,fr+n)}function Et(n,e=""){let i=Ft(),t=gn(),r=n+fr,o=t.firstCreatePass?Xu(t,r,1,e,null):t.data[r],s=p6(t,i,o,e,n);i[r]=s,D_()&&N_(t,i,s,o),Kl(o,!1)}var p6=(n,e,i,t,r)=>(A_(!0),xG(e[pn],t));function Uc(n){return zs("",n,""),Uc}function zs(n,e,i){let t=Ft(),r=F8(t,n,e,i);return r!==Ls&&hW(t,Oc(),r),zs}function Zu(n,e,i){mj(e)&&(e=e());let t=Ft(),r=ed();if(po(t,r,e)){let o=gn(),s=E_();$S(o,s,t,n,e,t[pn],i,!1)}return Zu}function Mm(n,e){let i=mj(n);return i&&n.set(e),i}function Qu(n,e){let i=Ft(),t=gn(),r=mr();return rR(t,i,i[pn],r,n,e),Qu}function g6(n,e,i){let t=gn();if(t.firstCreatePass){let r=ka(n);rS(i,t.data,t.blueprint,r,!0),rS(e,t.data,t.blueprint,r,!1)}}function rS(n,e,i,t,r){if(n=Or(n),Array.isArray(n))for(let o=0;o<n.length;o++)rS(n[o],e,i,t,r);else{let o=gn(),s=Ft(),a=mr(),c=Fu(n)?n:Or(n.provide),l=Dk(n),d=a.providerIndexes&1048575,u=a.directiveStart,h=a.providerIndexes>>20;if(Fu(n)||!n.multi){let f=new ql(l,r,k),p=rM(c,e,r?d:d+h,u);p===-1?(bM(r_(a,s),o,c),nM(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),i.push(f),s.push(f)):(i[p]=f,s[p]=f)}else{let f=rM(c,e,d+h,u),p=rM(c,e,d,d+h),b=f>=0&&i[f],m=p>=0&&i[p];if(r&&!m||!r&&!b){bM(r_(a,s),o,c);let g=v6(r?_6:b6,i.length,r,t,l);!r&&m&&(i[p].providerFactory=g),nM(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),i.push(g),s.push(g)}else{let g=Aj(i[r?p:f],l,!r&&t);nM(o,n,f>-1?f:p,g)}!r&&t&&m&&i[p].componentProviders++}}}function nM(n,e,i,t){let r=Fu(e),o=FH(e);if(r||o){let c=(o?Or(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let d=l.indexOf(i);d===-1?l.push(i,[t,c]):l[d+1].push(t,c)}else l.push(i,c)}}}function Aj(n,e,i){return i&&n.componentProviders++,n.multi.push(e)-1}function rM(n,e,i,t){for(let r=i;r<t;r++)if(e[r]===n)return r;return-1}function b6(n,e,i,t){return oS(this.multi,[])}function _6(n,e,i,t){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Xl(i,i[Lt],this.providerFactory.index,t);o=a.slice(0,s),oS(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],oS(r,o);return o}function oS(n,e){for(let i=0;i<n.length;i++){let t=n[i];e.push(t())}return e}function v6(n,e,i,t,r){let o=new ql(n,i,k);return o.multi=[],o.index=e,o.componentProviders=0,Aj(o,r,t&&!i),o}function oe(n,e=[]){return i=>{i.providersResolver=(t,r)=>g6(t,r?r(n):n,e)}}var y6=(()=>{let e=class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Tk(!1,t.type),o=r.length>0?$_([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=Me({token:e,providedIn:"environment",factory:()=>new e(le(xr))});let n=e;return n})();function Ei(n){Vs("NgStandalone"),n.getStandaloneInjector=e=>e.get(y6).getOrCreateStandaloneInjector(n)}function te(n,e,i){let t=Jl()+n,r=Ft();return r[t]===Ls?wm(r,t,i?e.call(i):e()):x8(r,t)}function gt(n,e,i,t){return Ij(Ft(),Jl(),n,e,i,t)}function Hn(n,e,i,t,r){return Pj(Ft(),Jl(),n,e,i,t,r)}function Hs(n,e,i,t,r,o){return x6(Ft(),Jl(),n,e,i,t,r,o)}function Ku(n,e,i,t,r,o,s){return w6(Ft(),Jl(),n,e,i,t,r,o,s)}function Q_(n,e){let i=n[e];return i===Ls?void 0:i}function Ij(n,e,i,t,r,o){let s=e+i;return po(n,s,r)?wm(n,s+1,o?t.call(o,r):t(r)):Q_(n,s+1)}function Pj(n,e,i,t,r,o,s){let a=e+i;return f_(n,a,r,o)?wm(n,a+2,s?t.call(s,r,o):t(r,o)):Q_(n,a+2)}function x6(n,e,i,t,r,o,s,a){let c=e+i;return w8(n,c,r,o,s)?wm(n,c+3,a?t.call(a,r,o,s):t(r,o,s)):Q_(n,c+3)}function w6(n,e,i,t,r,o,s,a,c){let l=e+i;return M8(n,l,r,o,s,a)?wm(n,l+4,c?t.call(c,r,o,s,a):t(r,o,s,a)):Q_(n,l+4)}function ji(n,e){let i=gn(),t,r=n+fr;i.firstCreatePass?(t=M6(e,i.pipeRegistry),i.data[r]=t,t.onDestroy&&(i.destroyHooks??=[]).push(r,t.onDestroy)):t=i.data[r];let o=t.factory||(t.factory=Hl(t.type,!0)),s,a=Zr(k);try{let c=n_(!1),l=o();return n_(c),m6(i,Ft(),r,l),l}finally{Zr(a)}}function M6(n,e){if(e)for(let i=e.length-1;i>=0;i--){let t=e[i];if(n===t.name)return t}}function zi(n,e,i){let t=n+fr,r=Ft(),o=TS(r,t);return Fj(r,t)?Ij(r,Jl(),e,o.transform,i,o):o.transform(i)}function kj(n,e,i,t){let r=n+fr,o=Ft(),s=TS(o,r);return Fj(o,r)?Pj(o,Jl(),e,s.transform,i,t,s):s.transform(i,t)}function Fj(n,e){return n[Lt].data[e].pure}function Sm(n,e){return H_(n,e)}var zb=null;function S6(n){zb!==null&&(n.defaultEncapsulation!==zb.defaultEncapsulation||n.preserveWhitespaces!==zb.preserveWhitespaces)||(zb=n)}var K_=(()=>{let e=class e{log(t){console.log(t)}warn(t){console.warn(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();var oR=new Ce(""),Rm=new Ce(""),J_=(()=>{let e=class e{constructor(t,r,o){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,sR||(R6(o),o.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,o){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:o})}whenStable(t,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,o){return[]}};e.\u0275fac=function(r){return new(r||e)(le(Xe),le(ev),le(Rm))},e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})(),ev=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return sR?.findTestabilityInTree(this,t,r)??null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();function R6(n){sR=n}var sR;function Vc(n){return!!n&&typeof n.then=="function"}function aR(n){return!!n&&typeof n.subscribe=="function"}var tv=new Ce(""),jj=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=re(tv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let o of this.appInits){let s=o();if(Vc(s))t.push(s);else if(aR(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});t.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),t.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),iv=new Ce("");function T6(){FI(()=>{throw new Pe(600,!1)})}function C6(n){return n.isBoundToModule}function E6(n,e,i){try{let t=i();return Vc(t)?t.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):t}catch(t){throw e.runOutsideAngular(()=>n.handleError(t)),t}}function Oj(n,e){return Array.isArray(e)?e.reduce(Oj,n):xe(xe({},n),e)}var La=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=re(cF),this.afterRenderEffectManager=re(QS),this.externalTestViews=new Set,this.beforeRender=new ht,this.afterTick=new ht,this.componentTypes=[],this.components=[],this.isStable=re(Bc).hasPendingTasks.pipe(st(t=>!t)),this._injector=re(xr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let o=t instanceof a_;if(!this._injector.get(jj).done){let f=!o&&wk(t),p=!1;throw new Pe(405,p)}let a;o?a=t:a=this._injector.get(Bs).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=C6(a)?void 0:this._injector.get(ja),l=r||a.selector,d=a.create(pr.NULL,[],l,c),u=d.location.nativeElement,h=d.injector.get(oR,null);return h?.registerApplication(u),d.onDestroy(()=>{this.detachView(d.hostView),Yb(this.components,d),h?.unregisterApplication(u)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new Pe(101,!1);let r=gi(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,gi(r)}}detectChangesInAttachedViews(t){let r=0,o=this.afterRenderEffectManager;for(;;){if(r===rj)throw new Pe(103,!1);if(t){let s=r===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:c}of this._views)D6(a,s,c)}if(r++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>sS(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>sS(s))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Yb(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(iv,[]);[...this._bootstrapListeners,...r].forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Yb(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Pe(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Yb(n,e){let i=n.indexOf(e);i>-1&&n.splice(i,1)}function D6(n,e,i){!e&&!sS(n)||A6(n,i,e)}function sS(n){return ES(n)}function A6(n,e,i){let t;i?(t=0,n[It]|=1024):n[It]&64?t=0:t=1,oj(n,e,t)}var aS=class{constructor(e,i){this.ngModuleFactory=e,this.componentFactories=i}},nv=(()=>{let e=class e{compileModuleSync(t){return new h_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),o=Mk(t),s=IF(o.declarations).reduce((a,c)=>{let l=kc(c);return l&&a.push(new Uu(l)),a},[]);return new aS(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),I6=new Ce("");function P6(n,e,i){let t=new h_(i);return Promise.resolve(t)}function QP(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var k6=(()=>{let e=class e{constructor(){this.zone=re(Xe),this.applicationRef=re(La)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function F6(n){return[{provide:Xe,useFactory:n},{provide:ku,multi:!0,useFactory:()=>{let e=re(k6,{optional:!0});return()=>e.initialize()}},{provide:ku,multi:!0,useFactory:()=>{let e=re(N6);return()=>{e.initialize()}}},{provide:cF,useFactory:j6}]}function j6(){let n=re(Xe),e=re(Lr);return i=>n.runOutsideAngular(()=>e.handleError(i))}function O6(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var N6=(()=>{let e=class e{constructor(){this.subscription=new bi,this.initialized=!1,this.zone=re(Xe),this.pendingTasks=re(Bc)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Xe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Xe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function L6(){return typeof $localize<"u"&&$localize.locale||g_}var rv=new Ce("",{providedIn:"root",factory:()=>re(rv,mi.Optional|mi.SkipSelf)||L6()});var Nj=new Ce(""),Lj=(()=>{let e=class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let o=k8(r?.ngZone,O6({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return o.run(()=>{let s=v8(t.moduleType,this.injector,F6(()=>o)),a=s.injector.get(Lr,null);return o.runOutsideAngular(()=>{let c=o.onError.subscribe({next:l=>{a.handleError(l)}});s.onDestroy(()=>{Yb(this._modules,s),c.unsubscribe()})}),E6(a,o,()=>{let c=s.injector.get(jj);return c.runInitializers(),c.donePromise.then(()=>{let l=s.injector.get(rv,g_);return u6(l||g_),this._moduleDoBootstrap(s),s})})})}bootstrapModule(t,r=[]){let o=Oj({},r);return P6(this.injector,o,t).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(t){let r=t.injector.get(La);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(o=>r.bootstrap(o));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(r);else throw new Pe(-403,!1);this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pe(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Nj,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(r){return new(r||e)(le(pr))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})(),tm=null,Bj=new Ce("");function B6(n){if(tm&&!tm.get(Bj,!1))throw new Pe(400,!1);T6(),tm=n;let e=n.get(Lj);return z6(n),e}function cR(n,e,i=[]){let t=`Platform: ${e}`,r=new Ce(t);return(o=[])=>{let s=Uj();if(!s||s.injector.get(Bj,!1)){let a=[...i,...o,{provide:r,useValue:!0}];n?n(a):B6(U6(a,t))}return V6(r)}}function U6(n=[],e){return pr.create({name:e,providers:[{provide:S_,useValue:"platform"},{provide:Nj,useValue:new Set([()=>tm=null])},...n]})}function V6(n){let e=Uj();if(!e)throw new Pe(401,!1);return e}function Uj(){return tm?.get(Lj)??null}function z6(n){n.get(OS,null)?.forEach(i=>i())}function Vj(){return!1}var Hi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=H6;let n=e;return n})();function H6(n){return G6(mr(),Ft(),(n&16)===16)}function G6(n,e,i){if(T_(n)&&!i){let t=jc(n.index,e);return new Yl(t,t)}else if(n.type&47){let t=e[jo];return new Yl(t,e)}return null}var cS=class{constructor(){}supports(e){return gj(e)}create(e){return new lS(e)}},W6=(n,e)=>e,lS=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||W6}forEachItem(e){let i;for(i=this._itHead;i!==null;i=i._next)e(i)}forEachOperation(e){let i=this._itHead,t=this._removalsHead,r=0,o=null;for(;i||t;){let s=!t||i&&i.currentIndex<KP(t,r,o)?i:t,a=KP(s,r,o),c=s.currentIndex;if(s===t)r--,t=t._nextRemoved;else if(i=i._next,s.previousIndex==null)r++;else{o||(o=[]);let l=a-r,d=c-r;if(l!=d){for(let h=0;h<l;h++){let f=h<o.length?o[h]:o[h]=0,p=f+h;d<=p&&p<l&&(o[h]=f+1)}let u=s.previousIndex;o[u]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let i;for(i=this._previousItHead;i!==null;i=i._nextPrevious)e(i)}forEachAddedItem(e){let i;for(i=this._additionsHead;i!==null;i=i._nextAdded)e(i)}forEachMovedItem(e){let i;for(i=this._movesHead;i!==null;i=i._nextMoved)e(i)}forEachRemovedItem(e){let i;for(i=this._removalsHead;i!==null;i=i._nextRemoved)e(i)}forEachIdentityChange(e){let i;for(i=this._identityChangesHead;i!==null;i=i._nextIdentityChange)e(i)}diff(e){if(e==null&&(e=[]),!gj(e))throw new Pe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i=this._itHead,t=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),i===null||!Object.is(i.trackById,s)?(i=this._mismatch(i,o,s,a),t=!0):(t&&(i=this._verifyReinsertion(i,o,s,a)),Object.is(i.item,o)||this._addIdentityChange(i,o)),i=i._next}else r=0,y8(e,a=>{s=this._trackByFn(r,a),i===null||!Object.is(i.trackById,s)?(i=this._mismatch(i,a,s,r),t=!0):(t&&(i=this._verifyReinsertion(i,a,s,r)),Object.is(i.item,a)||this._addIdentityChange(i,a)),i=i._next,r++}),this.length=r;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,i,t,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(t,null),e!==null?(Object.is(e.item,i)||this._addIdentityChange(e,i),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(t,r),e!==null?(Object.is(e.item,i)||this._addIdentityChange(e,i),this._moveAfter(e,o,r)):e=this._addAfter(new dS(i,t),o,r)),e}_verifyReinsertion(e,i,t,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(t,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let i=e._next;this._addToRemovals(this._unlink(e)),e=i}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,i,t){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,i,t),this._addToMoves(e,t),e}_moveAfter(e,i,t){return this._unlink(e),this._insertAfter(e,i,t),this._addToMoves(e,t),e}_addAfter(e,i,t){return this._insertAfter(e,i,t),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,i,t){let r=i===null?this._itHead:i._next;return e._next=r,e._prev=i,r===null?this._itTail=e:r._prev=e,i===null?this._itHead=e:i._next=e,this._linkedRecords===null&&(this._linkedRecords=new b_),this._linkedRecords.put(e),e.currentIndex=t,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let i=e._prev,t=e._next;return i===null?this._itHead=t:i._next=t,t===null?this._itTail=i:t._prev=i,e}_addToMoves(e,i){return e.previousIndex===i||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new b_),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,i){return e.item=i,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},dS=class{constructor(e,i){this.item=e,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},uS=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,i){let t;for(t=this._head;t!==null;t=t._nextDup)if((i===null||i<=t.currentIndex)&&Object.is(t.trackById,e))return t;return null}remove(e){let i=e._prevDup,t=e._nextDup;return i===null?this._head=t:i._nextDup=t,t===null?this._tail=i:t._prevDup=i,this._head===null}},b_=class{constructor(){this.map=new Map}put(e){let i=e.trackById,t=this.map.get(i);t||(t=new uS,this.map.set(i,t)),t.add(e)}get(e,i){let t=e,r=this.map.get(t);return r?r.get(e,i):null}remove(e){let i=e.trackById;return this.map.get(i).remove(e)&&this.map.delete(i),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function KP(n,e,i){let t=n.previousIndex;if(t===null)return t;let r=0;return i&&t<i.length&&(r=i[t]),t+e+r}var hS=class{constructor(){}supports(e){return e instanceof Map||eR(e)}create(){return new fS}},fS=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let i;for(i=this._mapHead;i!==null;i=i._next)e(i)}forEachPreviousItem(e){let i;for(i=this._previousMapHead;i!==null;i=i._nextPrevious)e(i)}forEachChangedItem(e){let i;for(i=this._changesHead;i!==null;i=i._nextChanged)e(i)}forEachAddedItem(e){let i;for(i=this._additionsHead;i!==null;i=i._nextAdded)e(i)}forEachRemovedItem(e){let i;for(i=this._removalsHead;i!==null;i=i._nextRemoved)e(i)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||eR(e)))throw new Pe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(e,(t,r)=>{if(i&&i.key===r)this._maybeAddToChanges(i,t),this._appendAfter=i,i=i._next;else{let o=this._getOrCreateRecordForKey(r,t);i=this._insertBeforeOrAppend(i,o)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let t=i;t!==null;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,i){if(e){let t=e._prev;return i._next=e,i._prev=t,e._prev=i,t&&(t._next=i),e===this._mapHead&&(this._mapHead=i),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(e,i){if(this._records.has(e)){let r=this._records.get(e);this._maybeAddToChanges(r,i);let o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}let t=new mS(e);return this._records.set(e,t),t.currentValue=i,this._addToAdditions(t),t}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,i){Object.is(i,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=i,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,i){e instanceof Map?e.forEach(i):Object.keys(e).forEach(t=>i(e[t],t))}},mS=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function JP(){return new ov([new cS])}var ov=(()=>{let e=class e{constructor(t){this.factories=t}static create(t,r){if(r!=null){let o=r.factories.slice();t=t.concat(o)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||JP()),deps:[[e,new gm,new Hu]]}}find(t){let r=this.factories.find(o=>o.supports(t));if(r!=null)return r;throw new Pe(901,!1)}};e.\u0275prov=Me({token:e,providedIn:"root",factory:JP});let n=e;return n})();function ek(){return new lR([new hS])}var lR=(()=>{let e=class e{constructor(t){this.factories=t}static create(t,r){if(r){let o=r.factories.slice();t=t.concat(o)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||ek()),deps:[[e,new gm,new Hu]]}}find(t){let r=this.factories.find(o=>o.supports(t));if(r)return r;throw new Pe(901,!1)}};e.\u0275prov=Me({token:e,providedIn:"root",factory:ek});let n=e;return n})();var zj=cR(null,"core",[]),Hj=(()=>{let e=class e{constructor(t){}};e.\u0275fac=function(r){return new(r||e)(le(La))},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({});let n=e;return n})();function Si(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function td(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function Gj(n,e){Vs("NgSignals");let i=II(n);return e?.equal&&(i[Qo].equal=e.equal),i}function dR(n){let e=gi(null);try{return n()}finally{gi(e)}}var $6=new Ce("",{providedIn:"root",factory:()=>re(q6)}),q6=(()=>{let e=class e{};e.\u0275prov=Me({token:e,providedIn:"root",factory:()=>new pS});let n=e;return n})(),pS=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=re(Bc),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let i=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(i),this.taskId=null})}}enqueue(e){let i=e.creationZone;this.queues.has(i)||this.queues.set(i,new Set);let t=this.queues.get(i);t.has(e)||(this.queuedEffectCount++,t.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,i]of this.queues)e===null?this.flushQueue(i):e.run(()=>this.flushQueue(i))}flushQueue(e){for(let i of e)e.delete(i),this.queuedEffectCount--,i.run()}},gS=class{constructor(e,i,t,r,o,s){this.scheduler=e,this.effectFn=i,this.creationZone=t,this.injector=o,this.watcher=NI(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(i){this.injector.get(Lr,null,{optional:!0})?.handleError(i)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function Ju(n,e){Vs("NgSignals"),!e?.injector&&Ik(Ju);let i=e?.injector??re(pr),t=e?.manualCleanup!==!0?i.get(P_):null,r=new gS(i.get($6),n,typeof Zone>"u"?null:Zone.current,t,i,e?.allowSignalWrites??!1),o=i.get(Hi,null,{optional:!0});return!o||!(o._lView[It]&8)?r.watcher.notify():(o._lView[Gb]??=[]).push(r.watcher.notify),r}function Wj(n){let e=kc(n);if(!e)return null;let i=new Uu(e);return{get selector(){return i.selector},get type(){return i.componentType},get inputs(){return i.inputs},get outputs(){return i.outputs},get ngContentSelectors(){return i.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Qj=null;function Gs(){return Qj}function Kj(n){Qj??=n}var sv=class{};var _t=new Ce(""),_R=(()=>{let e=class e{historyGo(t){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:()=>re(X6),providedIn:"platform"});let n=e;return n})(),Jj=new Ce(""),X6=(()=>{let e=class e extends _R{constructor(){super(),this._doc=re(_t),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Gs().getBaseHref(this._doc)}onPopState(t){let r=Gs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Gs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:()=>new e,providedIn:"platform"});let n=e;return n})();function vR(n,e){if(n.length==0)return e;if(e.length==0)return n;let i=0;return n.endsWith("/")&&i++,e.startsWith("/")&&i++,i==2?n+e.substring(1):i==1?n+e:n+"/"+e}function $j(n){let e=n.match(/#|\?|$/),i=e&&e.index||n.length,t=i-(n[i-1]==="/"?1:0);return n.slice(0,t)+n.slice(i)}function Ba(n){return n&&n[0]!=="?"?"?"+n:n}var Ua=(()=>{let e=class e{historyGo(t){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:()=>re(yR),providedIn:"root"});let n=e;return n})(),eO=new Ce(""),yR=(()=>{let e=class e extends Ua{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??re(_t).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return vR(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ba(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,s){let a=this.prepareExternalUrl(o+Ba(s));this._platformLocation.pushState(t,r,a)}replaceState(t,r,o,s){let a=this.prepareExternalUrl(o+Ba(s));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}};e.\u0275fac=function(r){return new(r||e)(le(_R),le(eO,8))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),tO=(()=>{let e=class e extends Ua{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=vR(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,s){let a=this.prepareExternalUrl(o+Ba(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,r,a)}replaceState(t,r,o,s){let a=this.prepareExternalUrl(o+Ba(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}};e.\u0275fac=function(r){return new(r||e)(le(_R),le(eO,8))},e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})(),zc=(()=>{let e=class e{constructor(t){this._subject=new et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Q6($j(qj(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ba(r))}normalize(t){return e.stripTrailingSlash(Z6(this._basePath,qj(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ba(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ba(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}};e.normalizeQueryParams=Ba,e.joinWithSlash=vR,e.stripTrailingSlash=$j,e.\u0275fac=function(r){return new(r||e)(le(Ua))},e.\u0275prov=Me({token:e,factory:()=>Y6(),providedIn:"root"});let n=e;return n})();function Y6(){return new zc(le(Ua))}function Z6(n,e){if(!n||!e.startsWith(n))return e;let i=e.substring(n.length);return i===""||["/",";","?","#"].includes(i[0])?i:e}function qj(n){return n.replace(/\/index.html$/,"")}function Q6(n){if(new RegExp("^(https?:)?//").test(n)){let[,i]=n.split(/\/\/[^\/]+/);return i}return n}function cv(n,e){e=encodeURIComponent(e);for(let i of n.split(";")){let t=i.indexOf("="),[r,o]=t==-1?[i,""]:[i.slice(0,t),i.slice(t+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var iO=(()=>{let e=class e{constructor(t){this._viewContainerRef=t,this.ngComponentOutlet=null,this._inputsUsed=new Map}_needToReCreateNgModuleInstance(t){return t.ngComponentOutletNgModule!==void 0||t.ngComponentOutletNgModuleFactory!==void 0}_needToReCreateComponentInstance(t){return t.ngComponentOutlet!==void 0||t.ngComponentOutletContent!==void 0||t.ngComponentOutletInjector!==void 0||this._needToReCreateNgModuleInstance(t)}ngOnChanges(t){if(this._needToReCreateComponentInstance(t)&&(this._viewContainerRef.clear(),this._inputsUsed.clear(),this._componentRef=void 0,this.ngComponentOutlet)){let r=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;this._needToReCreateNgModuleInstance(t)&&(this._moduleRef?.destroy(),this.ngComponentOutletNgModule?this._moduleRef=pj(this.ngComponentOutletNgModule,Xj(r)):this.ngComponentOutletNgModuleFactory?this._moduleRef=this.ngComponentOutletNgModuleFactory.create(Xj(r)):this._moduleRef=void 0),this._componentRef=this._viewContainerRef.createComponent(this.ngComponentOutlet,{injector:r,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent})}}ngDoCheck(){if(this._componentRef){if(this.ngComponentOutletInputs)for(let t of Object.keys(this.ngComponentOutletInputs))this._inputsUsed.set(t,!0);this._applyInputStateDiff(this._componentRef)}}ngOnDestroy(){this._moduleRef?.destroy()}_applyInputStateDiff(t){for(let[r,o]of this._inputsUsed)o?(t.setInput(r,this.ngComponentOutletInputs[r]),this._inputsUsed.set(r,!1)):(t.setInput(r,void 0),this._inputsUsed.delete(r))}};e.\u0275fac=function(r){return new(r||e)(k(zn))},e.\u0275dir=He({type:e,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInputs:"ngComponentOutletInputs",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},standalone:!0,features:[Un]});let n=e;return n})();function Xj(n){return n.get(ja).injector}var uR=class{constructor(e,i,t,r){this.$implicit=e,this.ngForOf=i,this.index=t,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Kr=(()=>{let e=class e{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((o,s,a)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new uR(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(s===null?void 0:s);else if(s!==null){let c=r.get(s);r.move(c,a),Yj(c,o)}});for(let o=0,s=r.length;o<s;o++){let c=r.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{let s=r.get(o.currentIndex);Yj(s,o)})}static ngTemplateContextGuard(t,r){return!0}};e.\u0275fac=function(r){return new(r||e)(k(zn),k(ir),k(ov))},e.\u0275dir=He({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let n=e;return n})();function Yj(n,e){n.context.$implicit=e.item}var th=(()=>{let e=class e{constructor(t,r){this._viewContainer=t,this._context=new hR,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Zj("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Zj("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}};e.\u0275fac=function(r){return new(r||e)(k(zn),k(ir))},e.\u0275dir=He({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let n=e;return n})(),hR=class{constructor(){this.$implicit=null,this.ngIf=null}};function Zj(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Nr(e)}'.`)}var K6=!0,fR=class{constructor(e,i){this._viewContainerRef=e,this._templateRef=i,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}},xR=(()=>{let e=class e{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){let r=K6?t===this._ngSwitch:t==this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(let r of this._defaultViews)r.enforceState(t)}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=He({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0});let n=e;return n})(),nO=(()=>{let e=class e{constructor(t,r,o){this.ngSwitch=o,o._addCase(),this._view=new fR(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}};e.\u0275fac=function(r){return new(r||e)(k(zn),k(ir),k(xR,9))},e.\u0275dir=He({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0});let n=e;return n})();var rO=(()=>{let e=class e{constructor(t,r,o){this._ngEl=t,this._differs=r,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[o,s]=t.split("."),a=o.indexOf("-")===-1?void 0:Os.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,o,s?`${r}${s}`:r,a):this._renderer.removeStyle(this._ngEl.nativeElement,o,a)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}};e.\u0275fac=function(r){return new(r||e)(k(Qe),k(lR),k(Us))},e.\u0275dir=He({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let n=e;return n})(),lv=(()=>{let e=class e{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(this._shouldRecreateView(t)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let o=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,o,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,o)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,o):!1,get:(t,r,o)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,o)}})}};e.\u0275fac=function(r){return new(r||e)(k(zn))},e.\u0275dir=He({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Un]});let n=e;return n})();function J6(n,e){return new Pe(2100,!1)}var mR=class{createSubscription(e,i){return dR(()=>e.subscribe({next:i,error:t=>{throw t}}))}dispose(e){dR(()=>e.unsubscribe())}},pR=class{createSubscription(e,i){return e.then(i,t=>{throw t})}dispose(e){}},e$=new pR,t$=new mR,dv=(()=>{let e=class e{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Vc(t))return e$;if(aR(t))return t$;throw J6(e,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(r){return new(r||e)(k(Hi,16))},e.\u0275pipe=Oo({name:"async",type:e,pure:!1,standalone:!0});let n=e;return n})();var Vo=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({});let n=e;return n})(),wR="browser",i$="server";function ih(n){return n===wR}function uv(n){return n===i$}var oO=(()=>{let e=class e{};e.\u0275prov=Me({token:e,providedIn:"root",factory:()=>ih(re(Br))?new gR(re(_t),window):new bR});let n=e;return n})(),gR=class{constructor(e,i){this.document=e,this.window=i,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let i=n$(this.document,e);i&&(this.scrollToElement(i),i.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let i=e.getBoundingClientRect(),t=i.left+this.window.pageXOffset,r=i.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(t-o[0],r-o[1])}};function n$(n,e){let i=n.getElementById(e)||n.getElementsByName(e)[0];if(i)return i;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let t=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=t.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=t.nextNode()}}return null}var bR=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},eh=class{};var Cm=class{},fv=class{},id=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(i=>{let t=i.indexOf(":");if(t>0){let r=i.slice(0,t),o=r.toLowerCase(),s=i.slice(t+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((i,t)=>{this.setHeaderEntries(t,i)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([i,t])=>{this.setHeaderEntries(i,t)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let i=this.headers.get(e.toLowerCase());return i&&i.length>0?i[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,i){return this.clone({name:e,value:i,op:"a"})}set(e,i){return this.clone({name:e,value:i,op:"s"})}delete(e,i){return this.clone({name:e,value:i,op:"d"})}maybeSetNormalizedName(e,i){this.normalizedNames.has(i)||this.normalizedNames.set(i,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(i=>{this.headers.set(i,e.headers.get(i)),this.normalizedNames.set(i,e.normalizedNames.get(i))})}clone(e){let i=new n;return i.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,i.lazyUpdate=(this.lazyUpdate||[]).concat([e]),i}applyUpdate(e){let i=e.name.toLowerCase();switch(e.op){case"a":case"s":let t=e.value;if(typeof t=="string"&&(t=[t]),t.length===0)return;this.maybeSetNormalizedName(e.name,i);let r=(e.op==="a"?this.headers.get(i):void 0)||[];r.push(...t),this.headers.set(i,r);break;case"d":let o=e.value;if(!o)this.headers.delete(i),this.normalizedNames.delete(i);else{let s=this.headers.get(i);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(i),this.normalizedNames.delete(i)):this.headers.set(i,s)}break}}setHeaderEntries(e,i){let t=(Array.isArray(i)?i:[i]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,t),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(i=>e(this.normalizedNames.get(i),this.headers.get(i)))}};var SR=class{encodeKey(e){return sO(e)}encodeValue(e){return sO(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function s$(n,e){let i=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],c=i.get(s)||[];c.push(a),i.set(s,c)}),i}var a$=/%(\d[a-f0-9])/gi,c$={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sO(n){return encodeURIComponent(n).replace(a$,(e,i)=>c$[i]??e)}function hv(n){return`${n}`}var Ws=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new SR,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=s$(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(i=>{let t=e.fromObject[i],r=Array.isArray(t)?t.map(hv):[hv(t)];this.map.set(i,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let i=this.map.get(e);return i?i[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,i){return this.clone({param:e,value:i,op:"a"})}appendAll(e){let i=[];return Object.keys(e).forEach(t=>{let r=e[t];Array.isArray(r)?r.forEach(o=>{i.push({param:t,value:o,op:"a"})}):i.push({param:t,value:r,op:"a"})}),this.clone(i)}set(e,i){return this.clone({param:e,value:i,op:"s"})}delete(e,i){return this.clone({param:e,value:i,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let i=this.encoder.encodeKey(e);return this.map.get(e).map(t=>i+"="+this.encoder.encodeValue(t)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let i=new n({encoder:this.encoder});return i.cloneFrom=this.cloneFrom||this,i.updates=(this.updates||[]).concat(e),i}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let i=(e.op==="a"?this.map.get(e.param):void 0)||[];i.push(hv(e.value)),this.map.set(e.param,i);break;case"d":if(e.value!==void 0){let t=this.map.get(e.param)||[],r=t.indexOf(hv(e.value));r!==-1&&t.splice(r,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var RR=class{constructor(){this.map=new Map}set(e,i){return this.map.set(e,i),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function l$(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function aO(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function cO(n){return typeof Blob<"u"&&n instanceof Blob}function lO(n){return typeof FormData<"u"&&n instanceof FormData}function d$(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Tm=class n{constructor(e,i,t,r){this.url=i,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(l$(this.method)||r?(this.body=t!==void 0?t:null,o=r):o=t,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new id,this.context??=new RR,!this.params)this.params=new Ws,this.urlWithParams=i;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=i;else{let a=i.indexOf("?"),c=a===-1?"?":a<i.length-1?"&":"";this.urlWithParams=i+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||aO(this.body)||cO(this.body)||lO(this.body)||d$(this.body)?this.body:this.body instanceof Ws?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||lO(this.body)?null:cO(this.body)?this.body.type||null:aO(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Ws?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let i=e.method||this.method,t=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,u=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),d)),new n(i,t,s,{params:d,headers:l,context:u,reportProgress:c,responseType:r,withCredentials:a,transferCache:o})}},nh=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(nh||{}),Em=class{constructor(e,i=gv.Ok,t="OK"){this.headers=e.headers||new id,this.status=e.status!==void 0?e.status:i,this.statusText=e.statusText||t,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},TR=class n extends Em{constructor(e={}){super(e),this.type=nh.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},mv=class n extends Em{constructor(e={}){super(e),this.type=nh.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},pv=class extends Em{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},gv=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(gv||{});function MR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Dm=(()=>{let e=class e{constructor(t){this.handler=t}request(t,r,o={}){let s;if(t instanceof Tm)s=t;else{let l;o.headers instanceof id?l=o.headers:l=new id(o.headers);let d;o.params&&(o.params instanceof Ws?d=o.params:d=new Ws({fromObject:o.params})),s=new Tm(t,r,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:d,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=dt(s).pipe(Aa(l=>this.handler.handle(l)));if(t instanceof Tm||o.observe==="events")return a;let c=a.pipe(_i(l=>l instanceof mv));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(st(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(st(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(st(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(st(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Ws().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,MR(o,r))}post(t,r,o={}){return this.request("POST",t,MR(o,r))}put(t,r,o={}){return this.request("PUT",t,MR(o,r))}};e.\u0275fac=function(r){return new(r||e)(le(Cm))},e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})();function fO(n,e){return e(n)}function u$(n,e){return(i,t)=>e.intercept(i,{handle:r=>n(r,t)})}function h$(n,e,i){return(t,r)=>os(i,()=>e(t,o=>n(o,r)))}var f$=new Ce(""),CR=new Ce(""),m$=new Ce(""),p$=new Ce("");function g$(){let n=null;return(e,i)=>{n===null&&(n=(re(f$,{optional:!0})??[]).reduceRight(u$,fO));let t=re(Bc),r=t.add();return n(e,i).pipe(Ds(()=>t.remove(r)))}}var dO=(()=>{let e=class e extends Cm{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=re(Bc);let o=re(p$,{optional:!0});this.backend=o??t}handle(t){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(CR),...this.injector.get(m$,[])]));this.chain=o.reduceRight((s,a)=>h$(s,a,this.injector),fO)}let r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(Ds(()=>this.pendingTasks.remove(r)))}};e.\u0275fac=function(r){return new(r||e)(le(fv),le(xr))},e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})();var b$=/^\)\]\}',?\n/;function _$(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var uO=(()=>{let e=class e{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new Pe(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Fi(r.\u0275loadImpl()):dt(null)).pipe(An(()=>new kt(s=>{let a=r.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((m,g)=>a.setRequestHeader(m,g.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let m=t.detectContentTypeHeader();m!==null&&a.setRequestHeader("Content-Type",m)}if(t.responseType){let m=t.responseType.toLowerCase();a.responseType=m!=="json"?m:"text"}let c=t.serializeBody(),l=null,d=()=>{if(l!==null)return l;let m=a.statusText||"OK",g=new id(a.getAllResponseHeaders()),v=_$(a)||t.url;return l=new TR({headers:g,status:a.status,statusText:m,url:v}),l},u=()=>{let{headers:m,status:g,statusText:v,url:_}=d(),y=null;g!==gv.NoContent&&(y=typeof a.response>"u"?a.responseText:a.response),g===0&&(g=y?gv.Ok:0);let C=g>=200&&g<300;if(t.responseType==="json"&&typeof y=="string"){let R=y;y=y.replace(b$,"");try{y=y!==""?JSON.parse(y):null}catch(w){y=R,C&&(C=!1,y={error:w,text:y})}}C?(s.next(new mv({body:y,headers:m,status:g,statusText:v,url:_||void 0})),s.complete()):s.error(new pv({error:y,headers:m,status:g,statusText:v,url:_||void 0}))},h=m=>{let{url:g}=d(),v=new pv({error:m,status:a.status||0,statusText:a.statusText||"Unknown Error",url:g||void 0});s.error(v)},f=!1,p=m=>{f||(s.next(d()),f=!0);let g={type:nh.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),t.responseType==="text"&&a.responseText&&(g.partialText=a.responseText),s.next(g)},b=m=>{let g={type:nh.UploadProgress,loaded:m.loaded};m.lengthComputable&&(g.total=m.total),s.next(g)};return a.addEventListener("load",u),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),t.reportProgress&&(a.addEventListener("progress",p),c!==null&&a.upload&&a.upload.addEventListener("progress",b)),a.send(c),s.next({type:nh.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",u),a.removeEventListener("timeout",h),t.reportProgress&&(a.removeEventListener("progress",p),c!==null&&a.upload&&a.upload.removeEventListener("progress",b)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(r){return new(r||e)(le(eh))},e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})(),mO=new Ce(""),v$="XSRF-TOKEN",y$=new Ce("",{providedIn:"root",factory:()=>v$}),x$="X-XSRF-TOKEN",w$=new Ce("",{providedIn:"root",factory:()=>x$}),bv=class{},M$=(()=>{let e=class e{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=cv(t,this.cookieName),this.lastCookieString=t),this.lastToken}};e.\u0275fac=function(r){return new(r||e)(le(_t),le(Br),le(y$))},e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})();function S$(n,e){let i=n.url.toLowerCase();if(!re(mO)||n.method==="GET"||n.method==="HEAD"||i.startsWith("http://")||i.startsWith("https://"))return e(n);let t=re(bv).getToken(),r=re(w$);return t!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,t)})),e(n)}var pO=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(pO||{});function R$(n,e){return{\u0275kind:n,\u0275providers:e}}function T$(...n){let e=[Dm,uO,dO,{provide:Cm,useExisting:dO},{provide:fv,useExisting:uO},{provide:CR,useValue:S$,multi:!0},{provide:mO,useValue:!0},{provide:bv,useClass:M$}];for(let i of n)e.push(...i.\u0275providers);return M_(e)}var hO=new Ce("");function C$(){return R$(pO.LegacyInterceptors,[{provide:hO,useFactory:g$},{provide:CR,useExisting:hO,multi:!0}])}var gO=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({providers:[T$(C$())]});let n=e;return n})();var AR=class extends sv{constructor(){super(...arguments),this.supportsDOMEvents=!0}},IR=class n extends AR{static makeCurrent(){Kj(new n)}onAndCancel(e,i,t){return e.addEventListener(i,t),()=>{e.removeEventListener(i,t)}}dispatchEvent(e,i){e.dispatchEvent(i)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,i){return i=i||this.getDefaultDocument(),i.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,i){return i==="window"?window:i==="document"?e:i==="body"?e.body:null}getBaseHref(e){let i=D$();return i==null?null:A$(i)}resetBaseElement(){Am=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return cv(document.cookie,e)}},Am=null;function D$(){return Am=Am||document.querySelector("base"),Am?Am.getAttribute("href"):null}function A$(n){return new URL(n,document.baseURI).pathname}var PR=class{addToWindow(e){ur.getAngularTestability=(t,r=!0)=>{let o=e.findTestabilityInTree(t,r);if(o==null)throw new Pe(5103,!1);return o},ur.getAllAngularTestabilities=()=>e.getAllTestabilities(),ur.getAllAngularRootElements=()=>e.getAllRootElements();let i=t=>{let r=ur.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&t()};r.forEach(a=>{a.whenStable(s)})};ur.frameworkStabilizers||(ur.frameworkStabilizers=[]),ur.frameworkStabilizers.push(i)}findTestabilityInTree(e,i,t){if(i==null)return null;let r=e.getTestability(i);return r??(t?Gs().isShadowRoot(i)?this.findTestabilityInTree(e,i.host,!0):this.findTestabilityInTree(e,i.parentElement,!0):null)}},I$=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})(),kR=new Ce(""),vO=(()=>{let e=class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new Pe(5101,!1);return this._eventNameToPlugin.set(t,r),r}};e.\u0275fac=function(r){return new(r||e)(le(kR),le(Xe))},e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})(),_v=class{constructor(e){this._doc=e}},ER="ng-app-id",yO=(()=>{let e=class e{constructor(t,r,o,s={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=uv(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${ER}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){let o=this.styleRef;if(o.has(t)){let s=o.get(t);return s.usage+=r,s.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===t)return o.delete(r),s.removeAttribute(ER),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(ER,this.appId),t.appendChild(a),a}}addStyleToHost(t,r){let o=this.getStyleElement(t,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(le(_t),le(vm),le(ym,8),le(Br))},e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})(),DR={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},jR=/%COMP%/g,xO="%COMP%",P$=`_nghost-${xO}`,k$=`_ngcontent-${xO}`,F$=!0,j$=new Ce("",{providedIn:"root",factory:()=>F$});function O$(n){return k$.replace(jR,n)}function N$(n){return P$.replace(jR,n)}function wO(n,e){return e.map(i=>i.replace(jR,n))}var vv=(()=>{let e=class e{constructor(t,r,o,s,a,c,l,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=uv(c),this.defaultRenderer=new Im(t,a,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ks.ShadowDom&&(r=pi(xe({},r),{encapsulation:ks.Emulated}));let o=this.getOrCreateRenderer(t,r);return o instanceof yv?o.applyToHost(t):o instanceof Pm&&o.applyStyles(),o}getOrCreateRenderer(t,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case ks.Emulated:s=new yv(l,d,r,this.appId,u,a,c,h);break;case ks.ShadowDom:return new FR(l,d,t,r,a,c,this.nonce,h);default:s=new Pm(l,d,r,u,a,c,h);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(le(vO),le(yO),le(vm),le(j$),le(_t),le(Br),le(Xe),le(ym))},e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})(),Im=class{constructor(e,i,t,r){this.eventManager=e,this.doc=i,this.ngZone=t,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,i){return i?this.doc.createElementNS(DR[i]||i,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,i){(bO(e)?e.content:e).appendChild(i)}insertBefore(e,i,t){e&&(bO(e)?e.content:e).insertBefore(i,t)}removeChild(e,i){e&&e.removeChild(i)}selectRootElement(e,i){let t=typeof e=="string"?this.doc.querySelector(e):e;if(!t)throw new Pe(-5104,!1);return i||(t.textContent=""),t}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,i,t,r){if(r){i=r+":"+i;let o=DR[r];o?e.setAttributeNS(o,i,t):e.setAttribute(i,t)}else e.setAttribute(i,t)}removeAttribute(e,i,t){if(t){let r=DR[t];r?e.removeAttributeNS(r,i):e.removeAttribute(`${t}:${i}`)}else e.removeAttribute(i)}addClass(e,i){e.classList.add(i)}removeClass(e,i){e.classList.remove(i)}setStyle(e,i,t,r){r&(Os.DashCase|Os.Important)?e.style.setProperty(i,t,r&Os.Important?"important":""):e.style[i]=t}removeStyle(e,i,t){t&Os.DashCase?e.style.removeProperty(i):e.style[i]=""}setProperty(e,i,t){e!=null&&(e[i]=t)}setValue(e,i){e.nodeValue=i}listen(e,i,t){if(typeof e=="string"&&(e=Gs().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${i}`);return this.eventManager.addEventListener(e,i,this.decoratePreventDefault(t))}decoratePreventDefault(e){return i=>{if(i==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(i)):e(i))===!1&&i.preventDefault()}}};function bO(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var FR=class extends Im{constructor(e,i,t,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=i,this.hostEl=t,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=wO(r.id,r.styles);for(let d of l){let u=document.createElement("style");a&&u.setAttribute("nonce",a),u.textContent=d,this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,i){return super.appendChild(this.nodeOrShadowRoot(e),i)}insertBefore(e,i,t){return super.insertBefore(this.nodeOrShadowRoot(e),i,t)}removeChild(e,i){return super.removeChild(this.nodeOrShadowRoot(e),i)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Pm=class extends Im{constructor(e,i,t,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=i,this.removeStylesOnCompDestroy=r,this.styles=c?wO(c,t.styles):t.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},yv=class extends Pm{constructor(e,i,t,r,o,s,a,c){let l=r+"-"+t.id;super(e,i,t,o,s,a,c,l),this.contentAttr=O$(l),this.hostAttr=N$(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,i){let t=super.createElement(e,i);return super.setAttribute(t,this.contentAttr,""),t}},L$=(()=>{let e=class e extends _v{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(le(_t))},e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})(),_O=["alt","control","meta","shift"],B$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},U$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},V$=(()=>{let e=class e extends _v{constructor(t){super(t)}supports(t){return e.parseEventName(t)!=null}addEventListener(t,r,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Gs().onAndCancel(t,s.domEventName,a))}static parseEventName(t){let r=t.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),_O.forEach(d=>{let u=r.indexOf(d);u>-1&&(r.splice(u,1),a+=d+".")}),a+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(t,r){let o=B$[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(o=t.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),_O.forEach(a=>{if(a!==o){let c=U$[a];c(t)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(t,r,o){return s=>{e.matchEventFullKeyCode(s,t)&&o.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}};e.\u0275fac=function(r){return new(r||e)(le(_t))},e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})();function z$(){IR.makeCurrent()}function H$(){return new Lr}function G$(){return pF(document),document}var W$=[{provide:Br,useValue:wR},{provide:OS,useValue:z$,multi:!0},{provide:_t,useFactory:G$,deps:[]}],MO=cR(zj,"browser",W$),$$=new Ce(""),q$=[{provide:Rm,useClass:PR,deps:[]},{provide:oR,useClass:J_,deps:[Xe,ev,Rm]},{provide:J_,useClass:J_,deps:[Xe,ev,Rm]}],X$=[{provide:S_,useValue:"root"},{provide:Lr,useFactory:H$,deps:[]},{provide:kR,useClass:L$,multi:!0,deps:[_t,Xe,Br]},{provide:kR,useClass:V$,multi:!0,deps:[_t]},vv,yO,vO,{provide:Zl,useExisting:vv},{provide:eh,useClass:I$,deps:[]},[]],xv=(()=>{let e=class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:vm,useValue:t.appId}]}}};e.\u0275fac=function(r){return new(r||e)(le($$,12))},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({providers:[...X$,...q$],imports:[Vo,Hj]});let n=e;return n})();var SO=(()=>{let e=class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}};e.\u0275fac=function(r){return new(r||e)(le(_t))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var km=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:function(r){let o=null;return r?o=new(r||e):o=le(Y$),o},providedIn:"root"});let n=e;return n})(),Y$=(()=>{let e=class e extends km{constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case nr.NONE:return r;case nr.HTML:return Lc(r,"HTML")?Lo(r):EF(this._doc,String(r)).toString();case nr.STYLE:return Lc(r,"Style")?Lo(r):r;case nr.SCRIPT:if(Lc(r,"Script"))return Lo(r);throw new Pe(5200,!1);case nr.URL:return Lc(r,"URL")?Lo(r):F_(String(r));case nr.RESOURCE_URL:if(Lc(r,"ResourceURL"))return Lo(r);throw new Pe(5201,!1);default:throw new Pe(5202,!1)}}bypassSecurityTrustHtml(t){return _F(t)}bypassSecurityTrustStyle(t){return vF(t)}bypassSecurityTrustScript(t){return yF(t)}bypassSecurityTrustUrl(t){return xF(t)}bypassSecurityTrustResourceUrl(t){return wF(t)}};e.\u0275fac=function(r){return new(r||e)(le(_t))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var ni="primary",Xm=Symbol("RouteTitle"),VR=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i[0]:i}return null}getAll(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}};function ch(n){return new VR(n)}function Z$(n,e,i){let t=i.path.split("/");if(t.length>n.length||i.pathMatch==="full"&&(e.hasChildren()||t.length<n.length))return null;let r={};for(let o=0;o<t.length;o++){let s=t[o],a=n[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,t.length),posParams:r}}function Q$(n,e){if(n.length!==e.length)return!1;for(let i=0;i<n.length;++i)if(!$s(n[i],e[i]))return!1;return!0}function $s(n,e){let i=n?zR(n):void 0,t=e?zR(e):void 0;if(!i||!t||i.length!=t.length)return!1;let r;for(let o=0;o<i.length;o++)if(r=i[o],!kO(n[r],e[r]))return!1;return!0}function zR(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function kO(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let i=[...n].sort(),t=[...e].sort();return i.every((r,o)=>t[o]===r)}else return n===e}function FO(n){return n.length>0?n[n.length-1]:null}function qc(n){return Ab(n)?n:Vc(n)?Fi(Promise.resolve(n)):dt(n)}var K$={exact:OO,subset:NO},jO={exact:J$,subset:e7,ignored:()=>!0};function RO(n,e,i){return K$[i.paths](n.root,e.root,i.matrixParams)&&jO[i.queryParams](n.queryParams,e.queryParams)&&!(i.fragment==="exact"&&n.fragment!==e.fragment)}function J$(n,e){return $s(n,e)}function OO(n,e,i){if(!rd(n.segments,e.segments)||!Sv(n.segments,e.segments,i)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let t in e.children)if(!n.children[t]||!OO(n.children[t],e.children[t],i))return!1;return!0}function e7(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(i=>kO(n[i],e[i]))}function NO(n,e,i){return LO(n,e,e.segments,i)}function LO(n,e,i,t){if(n.segments.length>i.length){let r=n.segments.slice(0,i.length);return!(!rd(r,i)||e.hasChildren()||!Sv(r,i,t))}else if(n.segments.length===i.length){if(!rd(n.segments,i)||!Sv(n.segments,i,t))return!1;for(let r in e.children)if(!n.children[r]||!NO(n.children[r],e.children[r],t))return!1;return!0}else{let r=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!rd(n.segments,r)||!Sv(n.segments,r,t)||!n.children[ni]?!1:LO(n.children[ni],e,o,t)}}function Sv(n,e,i){return e.every((t,r)=>jO[i](n[r].parameters,t.parameters))}var Hc=class{constructor(e=new Oi([],{}),i={},t=null){this.root=e,this.queryParams=i,this.fragment=t}get queryParamMap(){return this._queryParamMap??=ch(this.queryParams),this._queryParamMap}toString(){return n7.serialize(this)}},Oi=class{constructor(e,i){this.segments=e,this.children=i,this.parent=null,Object.values(i).forEach(t=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rv(this)}},nd=class{constructor(e,i){this.path=e,this.parameters=i}get parameterMap(){return this._parameterMap??=ch(this.parameters),this._parameterMap}toString(){return UO(this)}};function t7(n,e){return rd(n,e)&&n.every((i,t)=>$s(i.parameters,e[t].parameters))}function rd(n,e){return n.length!==e.length?!1:n.every((i,t)=>i.path===e[t].path)}function i7(n,e){let i=[];return Object.entries(n.children).forEach(([t,r])=>{t===ni&&(i=i.concat(e(r,t)))}),Object.entries(n.children).forEach(([t,r])=>{t!==ni&&(i=i.concat(e(r,t)))}),i}var Ym=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:()=>new Um,providedIn:"root"});let n=e;return n})(),Um=class{parse(e){let i=new GR(e);return new Hc(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(e){let i=`/${Fm(e.root,!0)}`,t=s7(e.queryParams),r=typeof e.fragment=="string"?`#${r7(e.fragment)}`:"";return`${i}${t}${r}`}},n7=new Um;function Rv(n){return n.segments.map(e=>UO(e)).join("/")}function Fm(n,e){if(!n.hasChildren())return Rv(n);if(e){let i=n.children[ni]?Fm(n.children[ni],!1):"",t=[];return Object.entries(n.children).forEach(([r,o])=>{r!==ni&&t.push(`${r}:${Fm(o,!1)}`)}),t.length>0?`${i}(${t.join("//")})`:i}else{let i=i7(n,(t,r)=>r===ni?[Fm(n.children[ni],!1)]:[`${r}:${Fm(t,!1)}`]);return Object.keys(n.children).length===1&&n.children[ni]!=null?`${Rv(n)}/${i[0]}`:`${Rv(n)}/(${i.join("//")})`}}function BO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wv(n){return BO(n).replace(/%3B/gi,";")}function r7(n){return encodeURI(n)}function HR(n){return BO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tv(n){return decodeURIComponent(n)}function TO(n){return Tv(n.replace(/\+/g,"%20"))}function UO(n){return`${HR(n.path)}${o7(n.parameters)}`}function o7(n){return Object.entries(n).map(([e,i])=>`;${HR(e)}=${HR(i)}`).join("")}function s7(n){let e=Object.entries(n).map(([i,t])=>Array.isArray(t)?t.map(r=>`${wv(i)}=${wv(r)}`).join("&"):`${wv(i)}=${wv(t)}`).filter(i=>i);return e.length?`?${e.join("&")}`:""}var a7=/^[^\/()?;#]+/;function NR(n){let e=n.match(a7);return e?e[0]:""}var c7=/^[^\/()?;=#]+/;function l7(n){let e=n.match(c7);return e?e[0]:""}var d7=/^[^=?&#]+/;function u7(n){let e=n.match(d7);return e?e[0]:""}var h7=/^[^&#]+/;function f7(n){let e=n.match(h7);return e?e[0]:""}var GR=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Oi([],{}):new Oi([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(e.length>0||Object.keys(i).length>0)&&(t[ni]=new Oi(e,i)),t}parseSegment(){let e=NR(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Pe(4009,!1);return this.capture(e),new nd(Tv(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let i=l7(this.remaining);if(!i)return;this.capture(i);let t="";if(this.consumeOptional("=")){let r=NR(this.remaining);r&&(t=r,this.capture(t))}e[Tv(i)]=Tv(t)}parseQueryParam(e){let i=u7(this.remaining);if(!i)return;this.capture(i);let t="";if(this.consumeOptional("=")){let s=f7(this.remaining);s&&(t=s,this.capture(t))}let r=TO(i),o=TO(t);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let t=NR(this.remaining),r=this.remaining[t.length];if(r!=="/"&&r!==")"&&r!==";")throw new Pe(4010,!1);let o;t.indexOf(":")>-1?(o=t.slice(0,t.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ni);let s=this.parseChildren();i[o]=Object.keys(s).length===1?s[ni]:new Oi([],s),this.consumeOptional("//")}return i}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Pe(4011,!1)}};function VO(n){return n.segments.length>0?new Oi([],{[ni]:n}):n}function zO(n){let e={};for(let[t,r]of Object.entries(n.children)){let o=zO(r);if(t===ni&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[t]=o)}let i=new Oi(n.segments,e);return m7(i)}function m7(n){if(n.numberOfChildren===1&&n.children[ni]){let e=n.children[ni];return new Oi(n.segments.concat(e.segments),e.children)}return n}function lh(n){return n instanceof Hc}function p7(n,e,i=null,t=null){let r=HO(n);return GO(r,e,i,t)}function HO(n){let e;function i(o){let s={};for(let c of o.children){let l=i(c);s[c.outlet]=l}let a=new Oi(o.url,s);return o===n&&(e=a),a}let t=i(n.root),r=VO(t);return e??r}function GO(n,e,i,t){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return LR(r,r,r,i,t);let o=g7(e);if(o.toRoot())return LR(r,r,new Oi([],{}),i,t);let s=b7(o,r,n),a=s.processChildren?Nm(s.segmentGroup,s.index,o.commands):$O(s.segmentGroup,s.index,o.commands);return LR(r,s.segmentGroup,a,i,t)}function Cv(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Vm(n){return typeof n=="object"&&n!=null&&n.outlets}function LR(n,e,i,t,r){let o={};t&&Object.entries(t).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===e?s=i:s=WO(n,e,i);let a=VO(zO(s));return new Hc(a,o,r)}function WO(n,e,i){let t={};return Object.entries(n.children).forEach(([r,o])=>{o===e?t[r]=i:t[r]=WO(o,e,i)}),new Oi(n.segments,t)}var Ev=class{constructor(e,i,t){if(this.isAbsolute=e,this.numberOfDoubleDots=i,this.commands=t,e&&t.length>0&&Cv(t[0]))throw new Pe(4003,!1);let r=t.find(Vm);if(r&&r!==FO(t))throw new Pe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function g7(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ev(!0,0,n);let e=0,i=!1,t=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?i=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Ev(i,e,t)}var sh=class{constructor(e,i,t){this.segmentGroup=e,this.processChildren=i,this.index=t}};function b7(n,e,i){if(n.isAbsolute)return new sh(e,!0,0);if(!i)return new sh(e,!1,NaN);if(i.parent===null)return new sh(i,!0,0);let t=Cv(n.commands[0])?0:1,r=i.segments.length-1+t;return _7(i,r,n.numberOfDoubleDots)}function _7(n,e,i){let t=n,r=e,o=i;for(;o>r;){if(o-=r,t=t.parent,!t)throw new Pe(4005,!1);r=t.segments.length}return new sh(t,!1,r-o)}function v7(n){return Vm(n[0])?n[0].outlets:{[ni]:n}}function $O(n,e,i){if(n??=new Oi([],{}),n.segments.length===0&&n.hasChildren())return Nm(n,e,i);let t=y7(n,e,i),r=i.slice(t.commandIndex);if(t.match&&t.pathIndex<n.segments.length){let o=new Oi(n.segments.slice(0,t.pathIndex),{});return o.children[ni]=new Oi(n.segments.slice(t.pathIndex),n.children),Nm(o,0,r)}else return t.match&&r.length===0?new Oi(n.segments,{}):t.match&&!n.hasChildren()?WR(n,e,i):t.match?Nm(n,0,r):WR(n,e,i)}function Nm(n,e,i){if(i.length===0)return new Oi(n.segments,{});{let t=v7(i),r={};if(Object.keys(t).some(o=>o!==ni)&&n.children[ni]&&n.numberOfChildren===1&&n.children[ni].segments.length===0){let o=Nm(n.children[ni],e,i);return new Oi(n.segments,o.children)}return Object.entries(t).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=$O(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{t[o]===void 0&&(r[o]=s)}),new Oi(n.segments,r)}}function y7(n,e,i){let t=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(t>=i.length)return o;let s=n.segments[r],a=i[t];if(Vm(a))break;let c=`${a}`,l=t<i.length-1?i[t+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!EO(c,l,s))return o;t+=2}else{if(!EO(c,{},s))return o;t++}r++}return{match:!0,pathIndex:r,commandIndex:t}}function WR(n,e,i){let t=n.segments.slice(0,e),r=0;for(;r<i.length;){let o=i[r];if(Vm(o)){let c=x7(o.outlets);return new Oi(t,c)}if(r===0&&Cv(i[0])){let c=n.segments[e];t.push(new nd(c.path,CO(i[0]))),r++;continue}let s=Vm(o)?o.outlets[ni]:`${o}`,a=r<i.length-1?i[r+1]:null;s&&a&&Cv(a)?(t.push(new nd(s,CO(a))),r+=2):(t.push(new nd(s,{})),r++)}return new Oi(t,{})}function x7(n){let e={};return Object.entries(n).forEach(([i,t])=>{typeof t=="string"&&(t=[t]),t!==null&&(e[i]=WR(new Oi([],{}),0,t))}),e}function CO(n){let e={};return Object.entries(n).forEach(([i,t])=>e[i]=`${t}`),e}function EO(n,e,i){return n==i.path&&$s(e,i.parameters)}var Lm="imperative",rr=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(rr||{}),zo=class{constructor(e,i){this.id=e,this.url=i}},dh=class extends zo{constructor(e,i,t="imperative",r=null){super(e,i),this.type=rr.NavigationStart,this.navigationTrigger=t,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},qs=class extends zo{constructor(e,i,t){super(e,i),this.urlAfterRedirects=t,this.type=rr.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vo=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(vo||{}),Dv=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Dv||{}),Gc=class extends zo{constructor(e,i,t,r){super(e,i),this.reason=t,this.code=r,this.type=rr.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Wc=class extends zo{constructor(e,i,t,r){super(e,i),this.reason=t,this.code=r,this.type=rr.NavigationSkipped}},zm=class extends zo{constructor(e,i,t,r){super(e,i),this.error=t,this.target=r,this.type=rr.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Av=class extends zo{constructor(e,i,t,r){super(e,i),this.urlAfterRedirects=t,this.state=r,this.type=rr.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$R=class extends zo{constructor(e,i,t,r){super(e,i),this.urlAfterRedirects=t,this.state=r,this.type=rr.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qR=class extends zo{constructor(e,i,t,r,o){super(e,i),this.urlAfterRedirects=t,this.state=r,this.shouldActivate=o,this.type=rr.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},XR=class extends zo{constructor(e,i,t,r){super(e,i),this.urlAfterRedirects=t,this.state=r,this.type=rr.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},YR=class extends zo{constructor(e,i,t,r){super(e,i),this.urlAfterRedirects=t,this.state=r,this.type=rr.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ZR=class{constructor(e){this.route=e,this.type=rr.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},QR=class{constructor(e){this.route=e,this.type=rr.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},KR=class{constructor(e){this.snapshot=e,this.type=rr.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},JR=class{constructor(e){this.snapshot=e,this.type=rr.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},eT=class{constructor(e){this.snapshot=e,this.type=rr.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tT=class{constructor(e){this.snapshot=e,this.type=rr.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Iv=class{constructor(e,i,t){this.routerEvent=e,this.position=i,this.anchor=t,this.type=rr.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Hm=class{},Gm=class{constructor(e){this.url=e}};var iT=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Zm,this.attachRef=null}},Zm=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){let o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new iT,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Pv=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let i=this.pathFromRoot(e);return i.length>1?i[i.length-2]:null}children(e){let i=nT(e,this._root);return i?i.children.map(t=>t.value):[]}firstChild(e){let i=nT(e,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(e){let i=rT(e,this._root);return i.length<2?[]:i[i.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return rT(e,this._root).map(i=>i.value)}};function nT(n,e){if(n===e.value)return e;for(let i of e.children){let t=nT(n,i);if(t)return t}return null}function rT(n,e){if(n===e.value)return[e];for(let i of e.children){let t=rT(n,i);if(t.length)return t.unshift(e),t}return[]}var _o=class{constructor(e,i){this.value=e,this.children=i}toString(){return`TreeNode(${this.value})`}};function oh(n){let e={};return n&&n.children.forEach(i=>e[i.value.outlet]=i),e}var kv=class extends Pv{constructor(e,i){super(e),this.snapshot=i,mT(this,e)}toString(){return this.snapshot.toString()}};function qO(n){let e=w7(n),i=new xn([new nd("",{})]),t=new xn({}),r=new xn({}),o=new xn({}),s=new xn(""),a=new Va(i,t,o,s,r,ni,n,e.root);return a.snapshot=e.root,new kv(new _o(a,[]),e)}function w7(n){let e={},i={},t={},r="",o=new Wm([],e,t,r,i,ni,n,null,{});return new Fv("",new _o(o,[]))}var Va=class{constructor(e,i,t,r,o,s,a,c){this.urlSubject=e,this.paramsSubject=i,this.queryParamsSubject=t,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(st(l=>l[Xm]))??dt(void 0),this.url=e,this.params=i,this.queryParams=t,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(st(e=>ch(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(st(e=>ch(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function fT(n,e,i="emptyOnly"){let t,{routeConfig:r}=n;return e!==null&&(i==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?t={params:xe(xe({},e.params),n.params),data:xe(xe({},e.data),n.data),resolve:xe(xe(xe(xe({},n.data),e.data),r?.data),n._resolvedData)}:t={params:xe({},n.params),data:xe({},n.data),resolve:xe(xe({},n.data),n._resolvedData??{})},r&&YO(r)&&(t.resolve[Xm]=r.title),t}var Wm=class{get title(){return this.data?.[Xm]}constructor(e,i,t,r,o,s,a,c,l){this.url=e,this.params=i,this.queryParams=t,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ch(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ch(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(t=>t.toString()).join("/"),i=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${i}')`}},Fv=class extends Pv{constructor(e,i){super(i),this.url=e,mT(this,i)}toString(){return XO(this._root)}};function mT(n,e){e.value._routerState=n,e.children.forEach(i=>mT(n,i))}function XO(n){let e=n.children.length>0?` { ${n.children.map(XO).join(", ")} } `:"";return`${n.value}${e}`}function BR(n){if(n.snapshot){let e=n.snapshot,i=n._futureSnapshot;n.snapshot=i,$s(e.queryParams,i.queryParams)||n.queryParamsSubject.next(i.queryParams),e.fragment!==i.fragment&&n.fragmentSubject.next(i.fragment),$s(e.params,i.params)||n.paramsSubject.next(i.params),Q$(e.url,i.url)||n.urlSubject.next(i.url),$s(e.data,i.data)||n.dataSubject.next(i.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function oT(n,e){let i=$s(n.params,e.params)&&t7(n.url,e.url),t=!n.parent!=!e.parent;return i&&!t&&(!n.parent||oT(n.parent,e.parent))}function YO(n){return typeof n.title=="string"||n.title===null}var pT=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ni,this.activateEvents=new et,this.deactivateEvents=new et,this.attachEvents=new et,this.detachEvents=new et,this.parentContexts=re(Zm),this.location=re(zn),this.changeDetector=re(Hi),this.environmentInjector=re(xr),this.inputBinder=re(Bv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Pe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Pe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Pe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Pe(4013,!1);this._activatedRoute=t;let o=this.location,a=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new sT(t,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=He({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Un]});let n=e;return n})(),sT=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,i,t){this.route=e,this.childContexts=i,this.parent=t}get(e,i){return e===Va?this.route:e===Zm?this.childContexts:this.parent.get(e,i)}},Bv=new Ce(""),DO=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,o=Nl([r.queryParams,r.params,r.data]).pipe(An(([s,a,c],l)=>(c=xe(xe(xe({},s),a),c),l===0?dt(c):Promise.resolve(c)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let a=Wj(r.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of a.inputs)t.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(t,o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})();function M7(n,e,i){let t=$m(n,e._root,i?i._root:void 0);return new kv(t,e)}function $m(n,e,i){if(i&&n.shouldReuseRoute(e.value,i.value.snapshot)){let t=i.value;t._futureSnapshot=e.value;let r=S7(n,e,i);return new _o(t,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>$m(n,a)),s}}let t=R7(e.value),r=e.children.map(o=>$m(n,o));return new _o(t,r)}}function S7(n,e,i){return e.children.map(t=>{for(let r of i.children)if(n.shouldReuseRoute(t.value,r.value.snapshot))return $m(n,t,r);return $m(n,t)})}function R7(n){return new Va(new xn(n.url),new xn(n.params),new xn(n.queryParams),new xn(n.fragment),new xn(n.data),n.outlet,n.component,n)}var ZO="ngNavigationCancelingError";function QO(n,e){let{redirectTo:i,navigationBehaviorOptions:t}=lh(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=KO(!1,vo.Redirect);return r.url=i,r.navigationBehaviorOptions=t,r}function KO(n,e){let i=new Error(`NavigationCancelingError: ${n||""}`);return i[ZO]=!0,i.cancellationCode=e,i}function T7(n){return JO(n)&&lh(n.url)}function JO(n){return!!n&&n[ZO]}var C7=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ei],decls:1,vars:0,template:function(r,o){r&1&&he(0,"router-outlet")},dependencies:[pT],encapsulation:2});let n=e;return n})();function E7(n,e){return n.providers&&!n._injector&&(n._injector=$_(n.providers,e,`Route: ${n.path}`)),n._injector??e}function gT(n){let e=n.children&&n.children.map(gT),i=e?pi(xe({},n),{children:e}):xe({},n);return!i.component&&!i.loadComponent&&(e||i.loadChildren)&&i.outlet&&i.outlet!==ni&&(i.component=C7),i}function Xs(n){return n.outlet||ni}function D7(n,e){let i=n.filter(t=>Xs(t)===e);return i.push(...n.filter(t=>Xs(t)!==e)),i}function Qm(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let i=e.routeConfig;if(i?._loadedInjector)return i._loadedInjector;if(i?._injector)return i._injector}return null}var A7=(n,e,i,t)=>st(r=>(new aT(e,r.targetRouterState,r.currentRouterState,i,t).activate(n),r)),aT=class{constructor(e,i,t,r,o){this.routeReuseStrategy=e,this.futureState=i,this.currState=t,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let i=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,t,e),BR(this.futureState.root),this.activateChildRoutes(i,t,e)}deactivateChildRoutes(e,i,t){let r=oh(i);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],t),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,t)})}deactivateRoutes(e,i,t){let r=e.value,o=i?i.value:null;if(r===o)if(r.component){let s=t.getContext(r.outlet);s&&this.deactivateChildRoutes(e,i,s.children)}else this.deactivateChildRoutes(e,i,t);else o&&this.deactivateRouteAndItsChildren(i,t)}deactivateRouteAndItsChildren(e,i){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,i):this.deactivateRouteAndOutlet(e,i)}detachAndStoreRouteSubtree(e,i){let t=i.getContext(e.value.outlet),r=t&&e.value.component?t.children:i,o=oh(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(t&&t.outlet){let s=t.outlet.detach(),a=t.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,i){let t=i.getContext(e.value.outlet),r=t&&e.value.component?t.children:i,o=oh(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);t&&(t.outlet&&(t.outlet.deactivate(),t.children.onOutletDeactivated()),t.attachRef=null,t.route=null)}activateChildRoutes(e,i,t){let r=oh(i);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],t),this.forwardEvent(new tT(o.value.snapshot))}),e.children.length&&this.forwardEvent(new JR(e.value.snapshot))}activateRoutes(e,i,t){let r=e.value,o=i?i.value:null;if(BR(r),r===o)if(r.component){let s=t.getOrCreateContext(r.outlet);this.activateChildRoutes(e,i,s.children)}else this.activateChildRoutes(e,i,t);else if(r.component){let s=t.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),BR(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Qm(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,t)}},jv=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ah=class{constructor(e,i){this.component=e,this.route=i}};function I7(n,e,i){let t=n._root,r=e?e._root:null;return jm(t,r,i,[t.value])}function P7(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function hh(n,e){let i=Symbol(),t=e.get(n,i);return t===i?typeof n=="function"&&!sk(n)?n:e.get(n):t}function jm(n,e,i,t,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=oh(e);return n.children.forEach(s=>{k7(s,o[s.value.outlet],i,t.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Bm(a,i.getContext(s),r)),r}function k7(n,e,i,t,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=i?i.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=F7(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new jv(t)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?jm(n,e,a?a.children:null,t,r):jm(n,e,i,t,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new ah(a.outlet.component,s))}else s&&Bm(e,a,r),r.canActivateChecks.push(new jv(t)),o.component?jm(n,null,a?a.children:null,t,r):jm(n,null,i,t,r);return r}function F7(n,e,i){if(typeof i=="function")return i(n,e);switch(i){case"pathParamsChange":return!rd(n.url,e.url);case"pathParamsOrQueryParamsChange":return!rd(n.url,e.url)||!$s(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oT(n,e)||!$s(n.queryParams,e.queryParams);case"paramsChange":default:return!oT(n,e)}}function Bm(n,e,i){let t=oh(n),r=n.value;Object.entries(t).forEach(([o,s])=>{r.component?e?Bm(s,e.children.getContext(o),i):Bm(s,null,i):Bm(s,e,i)}),r.component?e&&e.outlet&&e.outlet.isActivated?i.canDeactivateChecks.push(new ah(e.outlet.component,r)):i.canDeactivateChecks.push(new ah(null,r)):i.canDeactivateChecks.push(new ah(null,r))}function Km(n){return typeof n=="function"}function j7(n){return typeof n=="boolean"}function O7(n){return n&&Km(n.canLoad)}function N7(n){return n&&Km(n.canActivate)}function L7(n){return n&&Km(n.canActivateChild)}function B7(n){return n&&Km(n.canDeactivate)}function U7(n){return n&&Km(n.canMatch)}function e2(n){return n instanceof es||n?.name==="EmptyError"}var Mv=Symbol("INITIAL_VALUE");function uh(){return An(n=>Nl(n.map(e=>e.pipe(Mn(1),mo(Mv)))).pipe(st(e=>{for(let i of e)if(i!==!0){if(i===Mv)return Mv;if(i===!1||i instanceof Hc)return i}return!0}),_i(e=>e!==Mv),Mn(1)))}function V7(n,e){return wn(i=>{let{targetSnapshot:t,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=i;return s.length===0&&o.length===0?dt(pi(xe({},i),{guardsResult:!0})):z7(s,t,r,n).pipe(wn(a=>a&&j7(a)?H7(t,o,n,e):dt(a)),st(a=>pi(xe({},i),{guardsResult:a})))})}function z7(n,e,i,t){return Fi(n).pipe(wn(r=>X7(r.component,r.route,i,e,t)),As(r=>r!==!0,!0))}function H7(n,e,i,t){return Fi(e).pipe(Aa(r=>Ec(W7(r.route.parent,t),G7(r.route,t),q7(n,r.path,i),$7(n,r.route,i))),As(r=>r!==!0,!0))}function G7(n,e){return n!==null&&e&&e(new eT(n)),dt(!0)}function W7(n,e){return n!==null&&e&&e(new KR(n)),dt(!0)}function $7(n,e,i){let t=e.routeConfig?e.routeConfig.canActivate:null;if(!t||t.length===0)return dt(!0);let r=t.map(o=>kb(()=>{let s=Qm(e)??i,a=hh(o,s),c=N7(a)?a.canActivate(e,n):os(s,()=>a(e,n));return qc(c).pipe(As())}));return dt(r).pipe(uh())}function q7(n,e,i){let t=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>P7(s)).filter(s=>s!==null).map(s=>kb(()=>{let a=s.guards.map(c=>{let l=Qm(s.node)??i,d=hh(c,l),u=L7(d)?d.canActivateChild(t,n):os(l,()=>d(t,n));return qc(u).pipe(As())});return dt(a).pipe(uh())}));return dt(o).pipe(uh())}function X7(n,e,i,t,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return dt(!0);let s=o.map(a=>{let c=Qm(e)??r,l=hh(a,c),d=B7(l)?l.canDeactivate(n,e,i,t):os(c,()=>l(n,e,i,t));return qc(d).pipe(As())});return dt(s).pipe(uh())}function Y7(n,e,i,t){let r=e.canLoad;if(r===void 0||r.length===0)return dt(!0);let o=r.map(s=>{let a=hh(s,n),c=O7(a)?a.canLoad(e,i):os(n,()=>a(e,i));return qc(c)});return dt(o).pipe(uh(),t2(t))}function t2(n){return Ow(Ui(e=>{if(lh(e))throw QO(n,e)}),st(e=>e===!0))}function Z7(n,e,i,t){let r=e.canMatch;if(!r||r.length===0)return dt(!0);let o=r.map(s=>{let a=hh(s,n),c=U7(a)?a.canMatch(e,i):os(n,()=>a(e,i));return qc(c)});return dt(o).pipe(uh(),t2(t))}var qm=class{constructor(e){this.segmentGroup=e||null}},Ov=class extends Error{constructor(e){super(),this.urlTree=e}};function rh(n){return Yr(new qm(n))}function Q7(n){return Yr(new Pe(4e3,!1))}function K7(n){return Yr(KO(!1,vo.GuardRejected))}var cT=class{constructor(e,i){this.urlSerializer=e,this.urlTree=i}lineralizeSegments(e,i){let t=[],r=i.root;for(;;){if(t=t.concat(r.segments),r.numberOfChildren===0)return dt(t);if(r.numberOfChildren>1||!r.children[ni])return Q7(e.redirectTo);r=r.children[ni]}}applyRedirectCommands(e,i,t){let r=this.applyRedirectCreateUrlTree(i,this.urlSerializer.parse(i),e,t);if(i.startsWith("/"))throw new Ov(r);return r}applyRedirectCreateUrlTree(e,i,t,r){let o=this.createSegmentGroup(e,i.root,t,r);return new Hc(o,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(e,i){let t={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);t[r]=i[a]}else t[r]=o}),t}createSegmentGroup(e,i,t,r){let o=this.createSegments(e,i.segments,t,r),s={};return Object.entries(i.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,t,r)}),new Oi(o,s)}createSegments(e,i,t,r){return i.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,t))}findPosParam(e,i,t){let r=t[i.path.substring(1)];if(!r)throw new Pe(4001,!1);return r}findOrReturn(e,i){let t=0;for(let r of i){if(r.path===e.path)return i.splice(t),r;t++}return e}},lT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function J7(n,e,i,t,r){let o=bT(n,e,i);return o.matched?(t=E7(e,t),Z7(t,e,i,r).pipe(st(s=>s===!0?o:xe({},lT)))):dt(o)}function bT(n,e,i){if(e.path==="**")return e9(i);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||i.length>0)?xe({},lT):{matched:!0,consumedSegments:[],remainingSegments:i,parameters:{},positionalParamSegments:{}};let r=(e.matcher||Z$)(i,n,e);if(!r)return xe({},lT);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?xe(xe({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:i.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function e9(n){return{matched:!0,parameters:n.length>0?FO(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function AO(n,e,i,t){return i.length>0&&n9(n,i,t)?{segmentGroup:new Oi(e,i9(t,new Oi(i,n.children))),slicedSegments:[]}:i.length===0&&r9(n,i,t)?{segmentGroup:new Oi(n.segments,t9(n,i,t,n.children)),slicedSegments:i}:{segmentGroup:new Oi(n.segments,n.children),slicedSegments:i}}function t9(n,e,i,t){let r={};for(let o of i)if(Uv(n,e,o)&&!t[Xs(o)]){let s=new Oi([],{});r[Xs(o)]=s}return xe(xe({},t),r)}function i9(n,e){let i={};i[ni]=e;for(let t of n)if(t.path===""&&Xs(t)!==ni){let r=new Oi([],{});i[Xs(t)]=r}return i}function n9(n,e,i){return i.some(t=>Uv(n,e,t)&&Xs(t)!==ni)}function r9(n,e,i){return i.some(t=>Uv(n,e,t))}function Uv(n,e,i){return(n.hasChildren()||e.length>0)&&i.pathMatch==="full"?!1:i.path===""}function o9(n,e,i,t){return Xs(n)!==t&&(t===ni||!Uv(e,i,n))?!1:bT(e,n,i).matched}function s9(n,e,i){return e.length===0&&!n.children[i]}var dT=class{};function a9(n,e,i,t,r,o,s="emptyOnly"){return new uT(n,e,i,t,r,s,o).recognize()}var c9=31,uT=class{constructor(e,i,t,r,o,s,a){this.injector=e,this.configLoader=i,this.rootComponentType=t,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new cT(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Pe(4002,`'${e.segmentGroup}'`)}recognize(){let e=AO(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(st(i=>{let t=new Wm([],Object.freeze({}),Object.freeze(xe({},this.urlTree.queryParams)),this.urlTree.fragment,{},ni,this.rootComponentType,null,{}),r=new _o(t,i),o=new Fv("",r),s=p7(t,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ni).pipe(jr(t=>{if(t instanceof Ov)return this.urlTree=t.urlTree,this.match(t.urlTree.root);throw t instanceof qm?this.noMatchError(t):t}))}inheritParamsAndData(e,i){let t=e.value,r=fT(t,i,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o,t))}processSegmentGroup(e,i,t,r){return t.segments.length===0&&t.hasChildren()?this.processChildren(e,i,t):this.processSegment(e,i,t,t.segments,r,!0).pipe(st(o=>o instanceof _o?[o]:[]))}processChildren(e,i,t){let r=[];for(let o of Object.keys(t.children))o==="primary"?r.unshift(o):r.push(o);return Fi(r).pipe(Aa(o=>{let s=t.children[o],a=D7(i,o);return this.processSegmentGroup(e,a,s,o)}),Hw((o,s)=>(o.push(...s),o)),Dc(null),zw(),wn(o=>{if(o===null)return rh(t);let s=i2(o);return l9(s),dt(s)}))}processSegment(e,i,t,r,o,s){return Fi(i).pipe(Aa(a=>this.processSegmentAgainstRoute(a._injector??e,i,a,t,r,o,s).pipe(jr(c=>{if(c instanceof qm)return dt(null);throw c}))),As(a=>!!a),jr(a=>{if(e2(a))return s9(t,r,o)?dt(new dT):rh(t);throw a}))}processSegmentAgainstRoute(e,i,t,r,o,s,a){return o9(t,r,o,s)?t.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,t,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,i,t,o,s):rh(r):rh(r)}expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:d}=bT(i,r,o);if(!a)return rh(i);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>c9&&(this.allowRedirects=!1));let u=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,u).pipe(wn(h=>this.processSegment(e,t,i,h.concat(d),s,!1)))}matchSegmentAgainstRoute(e,i,t,r,o){let s=J7(i,t,r,e,this.urlSerializer);return t.path==="**"&&(i.children={}),s.pipe(An(a=>a.matched?(e=t._injector??e,this.getChildConfig(e,t,r).pipe(An(({routes:c})=>{let l=t._loadedInjector??e,{consumedSegments:d,remainingSegments:u,parameters:h}=a,f=new Wm(d,h,Object.freeze(xe({},this.urlTree.queryParams)),this.urlTree.fragment,u9(t),Xs(t),t.component??t._loadedComponent??null,t,h9(t)),{segmentGroup:p,slicedSegments:b}=AO(i,d,u,c);if(b.length===0&&p.hasChildren())return this.processChildren(l,c,p).pipe(st(g=>g===null?null:new _o(f,g)));if(c.length===0&&b.length===0)return dt(new _o(f,[]));let m=Xs(t)===o;return this.processSegment(l,c,p,b,m?ni:o,!0).pipe(st(g=>new _o(f,g instanceof _o?[g]:[])))}))):rh(i)))}getChildConfig(e,i,t){return i.children?dt({routes:i.children,injector:e}):i.loadChildren?i._loadedRoutes!==void 0?dt({routes:i._loadedRoutes,injector:i._loadedInjector}):Y7(e,i,t,this.urlSerializer).pipe(wn(r=>r?this.configLoader.loadChildren(e,i).pipe(Ui(o=>{i._loadedRoutes=o.routes,i._loadedInjector=o.injector})):K7(i))):dt({routes:[],injector:e})}};function l9(n){n.sort((e,i)=>e.value.outlet===ni?-1:i.value.outlet===ni?1:e.value.outlet.localeCompare(i.value.outlet))}function d9(n){let e=n.value.routeConfig;return e&&e.path===""}function i2(n){let e=[],i=new Set;for(let t of n){if(!d9(t)){e.push(t);continue}let r=e.find(o=>t.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...t.children),i.add(r)):e.push(t)}for(let t of i){let r=i2(t.children);e.push(new _o(t.value,r))}return e.filter(t=>!i.has(t))}function u9(n){return n.data||{}}function h9(n){return n.resolve||{}}function f9(n,e,i,t,r,o){return wn(s=>a9(n,e,i,t,s.extractedUrl,r,o).pipe(st(({state:a,tree:c})=>pi(xe({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function m9(n,e){return wn(i=>{let{targetSnapshot:t,guards:{canActivateChecks:r}}=i;if(!r.length)return dt(i);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of n2(c))s.add(l);let a=0;return Fi(s).pipe(Aa(c=>o.has(c)?p9(c,t,n,e):(c.data=fT(c,c.parent,n).resolve,dt(void 0))),Ui(()=>a++),Ru(1),wn(c=>a===s.size?dt(i):mn))})}function n2(n){let e=n.children.map(i=>n2(i)).flat();return[n,...e]}function p9(n,e,i,t){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!YO(r)&&(o[Xm]=r.title),g9(o,n,e,t).pipe(st(s=>(n._resolvedData=s,n.data=fT(n,n.parent,i).resolve,null)))}function g9(n,e,i,t){let r=zR(n);if(r.length===0)return dt({});let o={};return Fi(r).pipe(wn(s=>b9(n[s],e,i,t).pipe(As(),Ui(a=>{o[s]=a}))),Ru(1),Su(o),jr(s=>e2(s)?mn:Yr(s)))}function b9(n,e,i,t){let r=Qm(e)??t,o=hh(n,r),s=o.resolve?o.resolve(e,i):os(r,()=>o(e,i));return qc(s)}function UR(n){return An(e=>{let i=n(e);return i?Fi(i).pipe(st(()=>e)):dt(e)})}var r2=(()=>{let e=class e{buildTitle(t){let r,o=t.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===ni);return r}getResolvedTitleForRoute(t){return t.data[Xm]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:()=>re(_9),providedIn:"root"});let n=e;return n})(),_9=(()=>{let e=class e extends r2{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(le(SO))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Jm=new Ce("",{providedIn:"root",factory:()=>({})}),Nv=new Ce(""),_T=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=re(nv)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return dt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=qc(t.loadComponent()).pipe(st(o2),Ui(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Ds(()=>{this.componentLoaders.delete(t)})),o=new yu(r,()=>new ht).pipe(vu());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return dt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=v9(r,this.compiler,t,this.onLoadEndListener).pipe(Ds(()=>{this.childrenLoaders.delete(r)})),a=new yu(s,()=>new ht).pipe(vu());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function v9(n,e,i,t){return qc(n.loadChildren()).pipe(st(o2),wn(r=>r instanceof hm||Array.isArray(r)?dt(r):Fi(e.compileModuleAsync(r))),st(r=>{t&&t(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(i).injector,s=o.get(Nv,[],{optional:!0,self:!0}).flat()),{routes:s.map(gT),injector:o}}))}function y9(n){return n&&typeof n=="object"&&"default"in n}function o2(n){return y9(n)?n.default:n}var vT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:()=>re(x9),providedIn:"root"});let n=e;return n})(),x9=(()=>{let e=class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),s2=new Ce(""),a2=new Ce("");function w9(n,e,i){let t=n.get(a2),r=n.get(_t);return n.get(Xe).runOutsideAngular(()=>{if(!r.startViewTransition||t.skipNextTransition)return t.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(l=>{o=l}),a=r.startViewTransition(()=>(o(),M9(n))),{onViewTransitionCreated:c}=t;return c&&os(n,()=>c({transition:a,from:e,to:i})),s})}function M9(n){return new Promise(e=>{G_(e,{injector:n})})}var yT=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ht,this.transitionAbortSubject=new ht,this.configLoader=re(_T),this.environmentInjector=re(xr),this.urlSerializer=re(Ym),this.rootContexts=re(Zm),this.location=re(zc),this.inputBindingEnabled=re(Bv,{optional:!0})!==null,this.titleStrategy=re(r2),this.options=re(Jm,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=re(vT),this.createViewTransition=re(s2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>dt(void 0),this.rootComponentType=null;let t=o=>this.events.next(new ZR(o)),r=o=>this.events.next(new QR(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(pi(xe(xe({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,o){return this.transitions=new xn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Lm,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_i(s=>s.id!==0),st(s=>pi(xe({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),An(s=>{let a=!1,c=!1;return dt(s).pipe(An(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",vo.SupersededByNewNavigation),mn;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?pi(xe({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&u!=="reload"){let h="";return this.events.next(new Wc(l.id,this.urlSerializer.serialize(l.rawUrl),h,Dv.IgnoredSameUrlNavigation)),l.resolve(null),mn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return dt(l).pipe(An(h=>{let f=this.transitions?.getValue();return this.events.next(new dh(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?mn:Promise.resolve(h)}),f9(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ui(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=pi(xe({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Av(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:b,extras:m}=l,g=new dh(h,this.urlSerializer.serialize(f),p,b);this.events.next(g);let v=qO(this.rootComponentType).snapshot;return this.currentTransition=s=pi(xe({},l),{targetSnapshot:v,urlAfterRedirects:f,extras:pi(xe({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,dt(s)}else{let h="";return this.events.next(new Wc(l.id,this.urlSerializer.serialize(l.extractedUrl),h,Dv.IgnoredByUrlHandlingStrategy)),l.resolve(null),mn}}),Ui(l=>{let d=new $R(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),st(l=>(this.currentTransition=s=pi(xe({},l),{guards:I7(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),V7(this.environmentInjector,l=>this.events.next(l)),Ui(l=>{if(s.guardsResult=l.guardsResult,lh(l.guardsResult))throw QO(this.urlSerializer,l.guardsResult);let d=new qR(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),_i(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",vo.GuardRejected),!1)),UR(l=>{if(l.guards.canActivateChecks.length)return dt(l).pipe(Ui(d=>{let u=new XR(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}),An(d=>{let u=!1;return dt(d).pipe(m9(this.paramsInheritanceStrategy,this.environmentInjector),Ui({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(d,"",vo.NoDataFromResolver)}}))}),Ui(d=>{let u=new YR(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}))}),UR(l=>{let d=u=>{let h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(Ui(f=>{u.component=f}),st(()=>{})));for(let f of u.children)h.push(...d(f));return h};return Nl(d(l.targetSnapshot.root)).pipe(Dc(null),Mn(1))}),UR(()=>this.afterPreactivation()),An(()=>{let{currentSnapshot:l,targetSnapshot:d}=s,u=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return u?Fi(u).pipe(st(()=>s)):dt(s)}),st(l=>{let d=M7(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=pi(xe({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),Ui(()=>{this.events.next(new Hm)}),A7(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Mn(1),Ui({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new qs(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Ti(this.transitionAbortSubject.pipe(Ui(l=>{throw l}))),Ds(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",vo.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),jr(l=>{if(c=!0,JO(l))this.events.next(new Gc(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),T7(l)?this.events.next(new Gm(l.url)):s.resolve(!1);else{this.events.next(new zm(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(l))}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return mn}))}))}cancelNavigationTransition(t,r,o){let s=new Gc(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function S9(n){return n!==Lm}var R9=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:()=>re(T9),providedIn:"root"});let n=e;return n})(),hT=class{shouldDetach(e){return!1}store(e,i){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,i){return e.routeConfig===i.routeConfig}},T9=(()=>{let e=class e extends hT{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),c2=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:()=>re(C9),providedIn:"root"});let n=e;return n})(),C9=(()=>{let e=class e extends c2{constructor(){super(...arguments),this.location=re(zc),this.urlSerializer=re(Ym),this.options=re(Jm,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=re(vT),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Hc,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=qO(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof dh)this.stateMemento=this.createStateMemento();else if(t instanceof Wc)this.rawUrlTree=r.initialUrl;else if(t instanceof Av){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else t instanceof Hm?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof Gc&&(t.code===vo.GuardRejected||t.code===vo.NoDataFromResolver)?this.restoreHistory(r):t instanceof zm?this.restoreHistory(r,!0):t instanceof qs&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,a=xe(xe({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",a)}else{let s=xe(xe({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Om=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Om||{});function l2(n,e){n.events.pipe(_i(i=>i instanceof qs||i instanceof Gc||i instanceof zm||i instanceof Wc),st(i=>i instanceof qs||i instanceof Wc?Om.COMPLETE:(i instanceof Gc?i.code===vo.Redirect||i.code===vo.SupersededByNewNavigation:!1)?Om.REDIRECTING:Om.FAILED),_i(i=>i!==Om.REDIRECTING),Mn(1)).subscribe(()=>{e()})}function E9(n){throw n}var D9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},A9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},$c=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=re(K_),this.stateManager=re(c2),this.options=re(Jm,{optional:!0})||{},this.pendingTasks=re(Bc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=re(yT),this.urlSerializer=re(Ym),this.location=re(zc),this.urlHandlingStrategy=re(vT),this._events=new ht,this.errorHandler=this.options.errorHandler||E9,this.navigated=!1,this.routeReuseStrategy=re(R9),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=re(Nv,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!re(Bv,{optional:!0}),this.eventsSubscription=new bi,this.isNgZoneEnabled=re(Xe)instanceof Xe&&Xe.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Gc&&r.code!==vo.Redirect&&r.code!==vo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof qs)this.navigated=!0;else if(r instanceof Gm){let a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||S9(o.source)};this.scheduleNavigation(a,Lm,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}P9(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Lm,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=xe({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(gT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,d=l?this.currentUrlTree.fragment:a,u=null;switch(c){case"merge":u=xe(xe({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=HO(f)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),h=this.currentUrlTree.root}return GO(h,t,u,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let o=lh(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Lm,null,r)}navigate(t,r={skipLocationChange:!1}){return I9(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let o;if(r===!0?o=xe({},D9):r===!1?o=xe({},A9):o=r,lh(t))return RO(this.currentUrlTree,t,o);let s=this.parseUrl(t);return RO(this.currentUrlTree,s,o)}removeEmptyProps(t){return Object.entries(t).reduce((r,[o,s])=>(s!=null&&(r[o]=s),r),{})}scheduleNavigation(t,r,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((h,f)=>{c=h,l=f});let u=this.pendingTasks.add();return l2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function I9(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Pe(4008,!1)}function P9(n){return!(n instanceof Hm)&&!(n instanceof Gm)}var d2=(()=>{let e=class e{constructor(t,r,o,s,a,c){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new ht,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof qs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t!=null?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,o,s,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:DF(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let o=this.renderer,s=this.el.nativeElement;r!==null?o.setAttribute(s,t,r):o.removeAttribute(s,t)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(k($c),k(Va),Nc("tabindex"),k(Us),k(Qe),k(Ua))},e.\u0275dir=He({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){r&1&&Fe("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&Vi("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[at.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Si],skipLocationChange:[at.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Si],replaceUrl:[at.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Si],routerLink:"routerLink"},standalone:!0,features:[ln,Un]});let n=e;return n})();var Lv=class{};var k9=(()=>{let e=class e{constructor(t,r,o,s,a){this.router=t,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(_i(t=>t instanceof qs),Aa(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let o=[];for(let s of r){s.providers&&!s._injector&&(s._injector=$_(s.providers,t,`Route: ${s.path}`));let a=s._injector??t,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return Fi(o).pipe(Cc())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(t,r):o=dt(null);let s=o.pipe(wn(a=>a===null?dt(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return Fi([s,a]).pipe(Cc())}else return s})}};e.\u0275fac=function(r){return new(r||e)(le($c),le(nv),le(xr),le(Lv),le(_T))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),u2=new Ce(""),F9=(()=>{let e=class e{constructor(t,r,o,s,a={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=re(xr),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof dh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof qs?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Wc&&t.code===Dv.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Iv&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>yi(this,null,function*(){yield new Promise(o=>{setTimeout(()=>{o()}),G_(()=>{o()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new Iv(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){qu()},e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})();function j9(n){return n.routerState.root}function ep(n,e){return{\u0275kind:n,\u0275providers:e}}function O9(){let n=re(pr);return e=>{let i=n.get(La);if(e!==i.components[0])return;let t=n.get($c),r=n.get(h2);n.get(xT)===1&&t.initialNavigation(),n.get(f2,null,mi.Optional)?.setUpPreloading(),n.get(u2,null,mi.Optional)?.init(),t.resetRootComponentType(i.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var h2=new Ce("",{factory:()=>new ht}),xT=new Ce("",{providedIn:"root",factory:()=>1});function N9(){return ep(2,[{provide:xT,useValue:0},{provide:tv,multi:!0,deps:[pr],useFactory:e=>{let i=e.get(Jj,Promise.resolve());return()=>i.then(()=>new Promise(t=>{let r=e.get($c),o=e.get(h2);l2(r,()=>{t(!0)}),e.get(yT).afterPreactivation=()=>(t(!0),o.closed?dt(void 0):o),r.initialNavigation()}))}}])}function L9(){return ep(3,[{provide:tv,multi:!0,useFactory:()=>{let e=re($c);return()=>{e.setUpLocationChangeListener()}}},{provide:xT,useValue:2}])}var f2=new Ce("");function B9(n){return ep(0,[{provide:f2,useExisting:k9},{provide:Lv,useExisting:n}])}function U9(){return ep(8,[DO,{provide:Bv,useExisting:DO}])}function V9(n){let e=[{provide:s2,useValue:w9},{provide:a2,useValue:xe({skipNextTransition:!!n?.skipInitialTransition},n)}];return ep(9,e)}var IO=new Ce("ROUTER_FORROOT_GUARD"),z9=[zc,{provide:Ym,useClass:Um},$c,Zm,{provide:Va,useFactory:j9,deps:[$c]},_T,[]],wT=(()=>{let e=class e{constructor(t){}static forRoot(t,r){return{ngModule:e,providers:[z9,[],{provide:Nv,multi:!0,useValue:t},{provide:IO,useFactory:$9,deps:[[$c,new Hu,new gm]]},{provide:Jm,useValue:r||{}},r?.useHash?G9():W9(),H9(),r?.preloadingStrategy?B9(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?q9(r):[],r?.bindToComponentInputs?U9().\u0275providers:[],r?.enableViewTransitions?V9().\u0275providers:[],X9()]}}static forChild(t){return{ngModule:e,providers:[{provide:Nv,multi:!0,useValue:t}]}}};e.\u0275fac=function(r){return new(r||e)(le(IO,8))},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({});let n=e;return n})();function H9(){return{provide:u2,useFactory:()=>{let n=re(oO),e=re(Xe),i=re(Jm),t=re(yT),r=re(Ym);return i.scrollOffset&&n.setOffset(i.scrollOffset),new F9(r,t,n,e,i)}}}function G9(){return{provide:Ua,useClass:tO}}function W9(){return{provide:Ua,useClass:yR}}function $9(n){return"guarded"}function q9(n){return[n.initialNavigation==="disabled"?L9().\u0275providers:[],n.initialNavigation==="enabledBlocking"?N9().\u0275providers:[]]}var PO=new Ce("");function X9(){return[{provide:PO,useFactory:O9},{provide:iv,multi:!0,useExisting:PO}]}var hl={};s4(hl,{ACESFilmicToneMapping:()=>wL,AddEquation:()=>gr,AddOperation:()=>_L,AdditiveAnimationBlendMode:()=>eD,AdditiveBlending:()=>Td,AgXToneMapping:()=>SL,AlphaFormat:()=>AL,AlwaysCompare:()=>$L,AlwaysDepth:()=>uL,AlwaysStencilFunc:()=>NC,AmbientLight:()=>tf,AnimationAction:()=>Py,AnimationClip:()=>lc,AnimationLoader:()=>uE,AnimationMixer:()=>Qp,AnimationObjectGroup:()=>RE,AnimationUtils:()=>mJ,ArcCurve:()=>Q0,ArrayCamera:()=>G0,ArrowHelper:()=>HE,AttachedBindMode:()=>dC,Audio:()=>Ay,AudioAnalyser:()=>ME,AudioContext:()=>Zp,AudioListener:()=>xE,AudioLoader:()=>vE,AxesHelper:()=>GE,BackSide:()=>Hr,BasicDepthPacking:()=>LL,BasicShadowMap:()=>Z9,BatchedMesh:()=>X0,Bone:()=>jd,BooleanKeyframeTrack:()=>ac,Box2:()=>PE,Box3:()=>vn,Box3Helper:()=>Kp,BoxGeometry:()=>Xi,BoxHelper:()=>VE,BufferAttribute:()=>di,BufferGeometry:()=>ft,BufferGeometryLoader:()=>Dy,ByteType:()=>CL,Cache:()=>Ka,Camera:()=>ol,CameraHelper:()=>UE,CanvasTexture:()=>Nd,CapsuleGeometry:()=>ny,CatmullRomCurve3:()=>K0,CineonToneMapping:()=>xL,CircleGeometry:()=>ry,ClampToEdgeWrapping:()=>to,Clock:()=>ro,Color:()=>_e,ColorKeyframeTrack:()=>Wp,ColorManagement:()=>Di,CompressedArrayTexture:()=>oE,CompressedCubeTexture:()=>sE,CompressedTexture:()=>Zh,CompressedTextureLoader:()=>hE,ConeGeometry:()=>oy,ConstantAlphaFactor:()=>cL,ConstantColorFactor:()=>sL,CubeCamera:()=>z0,CubeReflectionMapping:()=>tc,CubeRefractionMapping:()=>nl,CubeTexture:()=>Pd,CubeTextureLoader:()=>fE,CubeUVReflectionMapping:()=>of,CubicBezierCurve:()=>jp,CubicBezierCurve3:()=>J0,CubicInterpolant:()=>xy,CullFaceBack:()=>aC,CullFaceFront:()=>XN,CullFaceFrontBack:()=>Y9,CullFaceNone:()=>qN,Curve:()=>To,CurvePath:()=>iy,CustomBlending:()=>zd,CustomToneMapping:()=>ML,CylinderGeometry:()=>Fn,Cylindrical:()=>IE,Data3DTexture:()=>Dp,DataArrayTexture:()=>Vh,DataTexture:()=>io,DataTextureLoader:()=>mE,DataUtils:()=>Jq,DecrementStencilOp:()=>rq,DecrementWrapStencilOp:()=>sq,DefaultLoadingManager:()=>u3,DepthFormat:()=>Sd,DepthStencilFormat:()=>Ks,DepthTexture:()=>hs,DetachedBindMode:()=>TL,DirectionalLight:()=>cl,DirectionalLightHelper:()=>BE,DiscreteInterpolant:()=>wy,DisplayP3ColorSpace:()=>Ny,DodecahedronGeometry:()=>sy,DoubleSide:()=>Yn,DstAlphaFactor:()=>nf,DstColorFactor:()=>rf,DynamicCopyUsage:()=>xq,DynamicDrawUsage:()=>pq,DynamicReadUsage:()=>_q,EdgesGeometry:()=>ay,EllipseCurve:()=>ms,EqualCompare:()=>zL,EqualDepth:()=>fL,EqualStencilFunc:()=>dq,EquirectangularReflectionMapping:()=>yp,EquirectangularRefractionMapping:()=>xp,Euler:()=>no,EventDispatcher:()=>kn,ExtrudeGeometry:()=>cy,FileLoader:()=>Kn,Float16BufferAttribute:()=>$C,Float32BufferAttribute:()=>We,FloatType:()=>Rr,Fog:()=>Gh,FogExp2:()=>W0,FramebufferTexture:()=>rE,FrontSide:()=>us,Frustum:()=>kd,GLBufferAttribute:()=>DE,GLSL1:()=>Mq,GLSL3:()=>LC,GreaterCompare:()=>HL,GreaterDepth:()=>pL,GreaterEqualCompare:()=>WL,GreaterEqualDepth:()=>mL,GreaterEqualStencilFunc:()=>mq,GreaterStencilFunc:()=>hq,GridHelper:()=>Vd,Group:()=>Tr,HalfFloatType:()=>Wi,HemisphereLight:()=>Jh,HemisphereLightHelper:()=>NE,IcosahedronGeometry:()=>Qh,ImageBitmapLoader:()=>Yp,ImageLoader:()=>Ud,ImageUtils:()=>U0,IncrementStencilOp:()=>nq,IncrementWrapStencilOp:()=>oq,InstancedBufferAttribute:()=>fs,InstancedBufferGeometry:()=>Ey,InstancedInterleavedBuffer:()=>EE,InstancedMesh:()=>sl,Int16BufferAttribute:()=>GC,Int32BufferAttribute:()=>WC,Int8BufferAttribute:()=>VC,IntType:()=>XE,InterleavedBuffer:()=>rc,InterleavedBufferAttribute:()=>ta,Interpolant:()=>sc,InterpolateDiscrete:()=>Id,InterpolateLinear:()=>rl,InterpolateSmooth:()=>L0,InvertStencilOp:()=>aq,KeepStencilOp:()=>bd,KeyframeTrack:()=>Co,LOD:()=>q0,LatheGeometry:()=>Up,Layers:()=>zh,LessCompare:()=>VL,LessDepth:()=>hL,LessEqualCompare:()=>iD,LessEqualDepth:()=>vp,LessEqualStencilFunc:()=>uq,LessStencilFunc:()=>lq,Light:()=>ca,LightProbe:()=>Ty,Line:()=>Yi,Line3:()=>kE,LineBasicMaterial:()=>rn,LineCurve:()=>Op,LineCurve3:()=>ey,LineDashedMaterial:()=>yy,LineLoop:()=>Xh,LineSegments:()=>Cr,LinearDisplayP3ColorSpace:()=>ng,LinearFilter:()=>bn,LinearInterpolant:()=>Gp,LinearMipMapLinearFilter:()=>eq,LinearMipMapNearestFilter:()=>J9,LinearMipmapLinearFilter:()=>wo,LinearMipmapNearestFilter:()=>Md,LinearSRGBColorSpace:()=>jn,LinearToneMapping:()=>vL,LinearTransfer:()=>Mp,Loader:()=>Jn,LoaderUtils:()=>gs,LoadingManager:()=>$p,LoopOnce:()=>Fy,LoopPingPong:()=>NL,LoopRepeat:()=>OL,LuminanceAlphaFormat:()=>kL,LuminanceFormat:()=>PL,MOUSE:()=>Dr,Material:()=>dn,MaterialLoader:()=>Cy,MathUtils:()=>tt,Matrix3:()=>Yt,Matrix4:()=>je,MaxEquation:()=>JN,Mesh:()=>Le,MeshBasicMaterial:()=>Ji,MeshDepthMaterial:()=>Fd,MeshDistanceMaterial:()=>kp,MeshLambertMaterial:()=>_y,MeshMatcapMaterial:()=>vy,MeshNormalMaterial:()=>oa,MeshPhongMaterial:()=>Kh,MeshPhysicalMaterial:()=>Gr,MeshStandardMaterial:()=>Er,MeshToonMaterial:()=>by,MinEquation:()=>KN,MirroredRepeatWrapping:()=>Dd,MixOperation:()=>bL,MultiplyBlending:()=>lC,MultiplyOperation:()=>Jp,NearestFilter:()=>li,NearestMipMapLinearFilter:()=>K9,NearestMipMapNearestFilter:()=>Q9,NearestMipmapLinearFilter:()=>il,NearestMipmapNearestFilter:()=>eg,NeutralToneMapping:()=>RL,NeverCompare:()=>UL,NeverDepth:()=>dL,NeverStencilFunc:()=>cq,NoBlending:()=>Qt,NoColorSpace:()=>Xa,NoToneMapping:()=>Ja,NormalAnimationBlendMode:()=>jy,NormalBlending:()=>ds,NotEqualCompare:()=>GL,NotEqualDepth:()=>gL,NotEqualStencilFunc:()=>fq,NumberKeyframeTrack:()=>sa,Object3D:()=>Rt,ObjectLoader:()=>_E,ObjectSpaceNormalMap:()=>BL,OctahedronGeometry:()=>na,OneFactor:()=>eL,OneMinusConstantAlphaFactor:()=>lL,OneMinusConstantColorFactor:()=>aL,OneMinusDstAlphaFactor:()=>nL,OneMinusDstColorFactor:()=>rL,OneMinusSrcAlphaFactor:()=>Ed,OneMinusSrcColorFactor:()=>iL,OrthographicCamera:()=>Ro,P3Primaries:()=>Rp,PCFShadowMap:()=>qE,PCFSoftShadowMap:()=>YN,PMREMGenerator:()=>Pp,Path:()=>Ld,PerspectiveCamera:()=>Ki,Plane:()=>sr,PlaneGeometry:()=>ea,PlaneHelper:()=>zE,PointLight:()=>al,PointLightHelper:()=>OE,Points:()=>Yh,PointsMaterial:()=>Od,PolarGridHelper:()=>LE,PolyhedronGeometry:()=>ia,PositionalAudio:()=>wE,PropertyBinding:()=>Gi,PropertyMixer:()=>Iy,QuadraticBezierCurve:()=>Np,QuadraticBezierCurve3:()=>Lp,Quaternion:()=>Kt,QuaternionKeyframeTrack:()=>ps,QuaternionLinearInterpolant:()=>My,RED_GREEN_RGTC2_Format:()=>jC,RED_RGTC1_Format:()=>jL,REVISION:()=>ky,RGBADepthPacking:()=>Oy,RGBAFormat:()=>Mo,RGBAIntegerFormat:()=>JE,RGBA_ASTC_10x10_Format:()=>DC,RGBA_ASTC_10x5_Format:()=>TC,RGBA_ASTC_10x6_Format:()=>CC,RGBA_ASTC_10x8_Format:()=>EC,RGBA_ASTC_12x10_Format:()=>AC,RGBA_ASTC_12x12_Format:()=>IC,RGBA_ASTC_4x4_Format:()=>_C,RGBA_ASTC_5x4_Format:()=>vC,RGBA_ASTC_5x5_Format:()=>yC,RGBA_ASTC_6x5_Format:()=>xC,RGBA_ASTC_6x6_Format:()=>wC,RGBA_ASTC_8x5_Format:()=>MC,RGBA_ASTC_8x6_Format:()=>SC,RGBA_ASTC_8x8_Format:()=>RC,RGBA_BPTC_Format:()=>N0,RGBA_ETC2_EAC_Format:()=>bC,RGBA_PVRTC_2BPPV1_Format:()=>mC,RGBA_PVRTC_4BPPV1_Format:()=>fC,RGBA_S3TC_DXT1_Format:()=>F0,RGBA_S3TC_DXT3_Format:()=>j0,RGBA_S3TC_DXT5_Format:()=>O0,RGBFormat:()=>IL,RGB_BPTC_SIGNED_Format:()=>PC,RGB_BPTC_UNSIGNED_Format:()=>kC,RGB_ETC1_Format:()=>pC,RGB_ETC2_Format:()=>gC,RGB_PVRTC_2BPPV1_Format:()=>hC,RGB_PVRTC_4BPPV1_Format:()=>uC,RGB_S3TC_DXT1_Format:()=>k0,RGFormat:()=>FL,RGIntegerFormat:()=>KE,RawShaderMaterial:()=>gy,Ray:()=>Js,Raycaster:()=>Wr,Rec709Primaries:()=>Sp,RectAreaLight:()=>Sy,RedFormat:()=>Hd,RedIntegerFormat:()=>QE,ReinhardToneMapping:()=>yL,RenderTarget:()=>V0,RepeatWrapping:()=>Go,ReplaceStencilOp:()=>iq,ReverseSubtractEquation:()=>QN,RingGeometry:()=>ly,SIGNED_RED_GREEN_RGTC2_Format:()=>OC,SIGNED_RED_RGTC1_Format:()=>FC,SRGBColorSpace:()=>Pn,SRGBTransfer:()=>Qi,Scene:()=>Wh,ShaderChunk:()=>ri,ShaderLib:()=>ls,ShaderMaterial:()=>Dt,ShadowMaterial:()=>py,Shape:()=>ec,ShapeGeometry:()=>dy,ShapePath:()=>WE,ShapeUtils:()=>Qs,ShortType:()=>EL,Skeleton:()=>qh,SkeletonHelper:()=>jE,SkinnedMesh:()=>$h,Source:()=>Za,Sphere:()=>Tn,SphereGeometry:()=>oc,Spherical:()=>ll,SphericalHarmonics3:()=>Ry,SplineCurve:()=>Bp,SpotLight:()=>ef,SpotLightHelper:()=>FE,Sprite:()=>$0,SpriteMaterial:()=>Fp,SrcAlphaFactor:()=>Cd,SrcAlphaSaturateFactor:()=>oL,SrcColorFactor:()=>tL,StaticCopyUsage:()=>yq,StaticDrawUsage:()=>Tp,StaticReadUsage:()=>bq,StereoCamera:()=>yE,StreamCopyUsage:()=>wq,StreamDrawUsage:()=>gq,StreamReadUsage:()=>vq,StringKeyframeTrack:()=>cc,SubtractEquation:()=>ZN,SubtractiveBlending:()=>cC,TOUCH:()=>bs,TangentSpaceNormalMap:()=>ul,TetrahedronGeometry:()=>uy,Texture:()=>yn,TextureLoader:()=>qp,TorusGeometry:()=>ra,TorusKnotGeometry:()=>hy,Triangle:()=>Qa,TriangleFanDrawMode:()=>sf,TriangleStripDrawMode:()=>ig,TrianglesDrawMode:()=>tD,TubeGeometry:()=>fy,UVMapping:()=>B0,Uint16BufferAttribute:()=>Ap,Uint32BufferAttribute:()=>Ip,Uint8BufferAttribute:()=>zC,Uint8ClampedBufferAttribute:()=>HC,Uniform:()=>TE,UniformsGroup:()=>CE,UniformsLib:()=>qe,UniformsUtils:()=>Li,UnsignedByteType:()=>ic,UnsignedInt248Type:()=>la,UnsignedInt5999Type:()=>DL,UnsignedIntType:()=>Ad,UnsignedShort4444Type:()=>YE,UnsignedShort5551Type:()=>ZE,UnsignedShortType:()=>tg,VSMShadowMap:()=>Ys,Vector2:()=>z,Vector3:()=>M,Vector4:()=>xi,VectorKeyframeTrack:()=>aa,VideoTexture:()=>nE,WebGL3DRenderTarget:()=>UC,WebGLArrayRenderTarget:()=>BC,WebGLCoordinateSystem:()=>Zs,WebGLCubeRenderTarget:()=>H0,WebGLMultipleRenderTargets:()=>$E,WebGLRenderTarget:()=>oi,WebGLRenderer:()=>nc,WebGLUtils:()=>r3,WebGPUCoordinateSystem:()=>Cp,WireframeGeometry:()=>my,WrapAroundEnding:()=>wp,ZeroCurvatureEnding:()=>yd,ZeroFactor:()=>dl,ZeroSlopeEnding:()=>xd,ZeroStencilOp:()=>tq,createCanvasElement:()=>XL});var ky="164",Dr={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},bs={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},qN=0,aC=1,XN=2,Y9=3,Z9=0,qE=1,YN=2,Ys=3,us=0,Hr=1,Yn=2,Qt=0,ds=1,Td=2,cC=3,lC=4,zd=5,gr=100,ZN=101,QN=102,KN=103,JN=104,dl=200,eL=201,tL=202,iL=203,Cd=204,Ed=205,nf=206,nL=207,rf=208,rL=209,oL=210,sL=211,aL=212,cL=213,lL=214,dL=0,uL=1,hL=2,vp=3,fL=4,mL=5,pL=6,gL=7,Jp=0,bL=1,_L=2,Ja=0,vL=1,yL=2,xL=3,wL=4,ML=5,SL=6,RL=7,dC="attached",TL="detached",B0=300,tc=301,nl=302,yp=303,xp=304,of=306,Go=1e3,to=1001,Dd=1002,li=1003,eg=1004,Q9=1004,il=1005,K9=1005,bn=1006,Md=1007,J9=1007,wo=1008,eq=1008,ic=1009,CL=1010,EL=1011,tg=1012,XE=1013,Ad=1014,Rr=1015,Wi=1016,YE=1017,ZE=1018,la=1020,DL=35902,AL=1021,IL=1022,Mo=1023,PL=1024,kL=1025,Sd=1026,Ks=1027,Hd=1028,QE=1029,FL=1030,KE=1031,JE=1033,k0=33776,F0=33777,j0=33778,O0=33779,uC=35840,hC=35841,fC=35842,mC=35843,pC=36196,gC=37492,bC=37496,_C=37808,vC=37809,yC=37810,xC=37811,wC=37812,MC=37813,SC=37814,RC=37815,TC=37816,CC=37817,EC=37818,DC=37819,AC=37820,IC=37821,N0=36492,PC=36494,kC=36495,jL=36283,FC=36284,jC=36285,OC=36286,Fy=2200,OL=2201,NL=2202,Id=2300,rl=2301,L0=2302,yd=2400,xd=2401,wp=2402,jy=2500,eD=2501,tD=0,ig=1,sf=2,LL=3200,Oy=3201,ul=0,BL=1,Xa="",Pn="srgb",jn="srgb-linear",Ny="display-p3",ng="display-p3-linear",Mp="linear",Qi="srgb",Sp="rec709",Rp="p3",tq=0,bd=7680,iq=7681,nq=7682,rq=7683,oq=34055,sq=34056,aq=5386,cq=512,lq=513,dq=514,uq=515,hq=516,fq=517,mq=518,NC=519,UL=512,VL=513,zL=514,iD=515,HL=516,GL=517,WL=518,$L=519,Tp=35044,pq=35048,gq=35040,bq=35045,_q=35049,vq=35041,yq=35046,xq=35050,wq=35042,Mq="100",LC="300 es",Zs=2e3,Cp=2001,kn=class{addEventListener(e,i){this._listeners===void 0&&(this._listeners={});let t=this._listeners;t[e]===void 0&&(t[e]=[]),t[e].indexOf(i)===-1&&t[e].push(i)}hasEventListener(e,i){if(this._listeners===void 0)return!1;let t=this._listeners;return t[e]!==void 0&&t[e].indexOf(i)!==-1}removeEventListener(e,i){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let o=r.indexOf(i);o!==-1&&r.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let r=t.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,e);e.target=null}}},wr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],p2=1234567,Rd=Math.PI/180,Uh=180/Math.PI;function So(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0,t=Math.random()*4294967295|0;return(wr[n&255]+wr[n>>8&255]+wr[n>>16&255]+wr[n>>24&255]+"-"+wr[e&255]+wr[e>>8&255]+"-"+wr[e>>16&15|64]+wr[e>>24&255]+"-"+wr[i&63|128]+wr[i>>8&255]+"-"+wr[i>>16&255]+wr[i>>24&255]+wr[t&255]+wr[t>>8&255]+wr[t>>16&255]+wr[t>>24&255]).toLowerCase()}function Rn(n,e,i){return Math.max(e,Math.min(i,n))}function nD(n,e){return(n%e+e)%e}function Sq(n,e,i,t,r){return t+(n-e)*(r-t)/(i-e)}function Rq(n,e,i){return n!==e?(i-n)/(e-n):0}function pp(n,e,i){return(1-i)*n+i*e}function Tq(n,e,i,t){return pp(n,e,1-Math.exp(-i*t))}function Cq(n,e=1){return e-Math.abs(nD(n,e*2)-e)}function Eq(n,e,i){return n<=e?0:n>=i?1:(n=(n-e)/(i-e),n*n*(3-2*n))}function Dq(n,e,i){return n<=e?0:n>=i?1:(n=(n-e)/(i-e),n*n*n*(n*(n*6-15)+10))}function Aq(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Iq(n,e){return n+Math.random()*(e-n)}function Pq(n){return n*(.5-Math.random())}function kq(n){n!==void 0&&(p2=n);let e=p2+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Fq(n){return n*Rd}function jq(n){return n*Uh}function Oq(n){return(n&n-1)===0&&n!==0}function Nq(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Lq(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Bq(n,e,i,t,r){let o=Math.cos,s=Math.sin,a=o(i/2),c=s(i/2),l=o((e+t)/2),d=s((e+t)/2),u=o((e-t)/2),h=s((e-t)/2),f=o((t-e)/2),p=s((t-e)/2);switch(r){case"XYX":n.set(a*d,c*u,c*h,a*l);break;case"YZY":n.set(c*h,a*d,c*u,a*l);break;case"ZXZ":n.set(c*u,c*h,a*d,a*l);break;case"XZX":n.set(a*d,c*p,c*f,a*l);break;case"YXY":n.set(c*f,a*d,c*p,a*l);break;case"ZYZ":n.set(c*p,c*f,a*d,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function zr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Zt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var tt={DEG2RAD:Rd,RAD2DEG:Uh,generateUUID:So,clamp:Rn,euclideanModulo:nD,mapLinear:Sq,inverseLerp:Rq,lerp:pp,damp:Tq,pingpong:Cq,smoothstep:Eq,smootherstep:Dq,randInt:Aq,randFloat:Iq,randFloatSpread:Pq,seededRandom:kq,degToRad:Fq,radToDeg:jq,isPowerOfTwo:Oq,ceilPowerOfTwo:Nq,floorPowerOfTwo:Lq,setQuaternionFromProperEuler:Bq,normalize:Zt,denormalize:zr},z=class n{constructor(e=0,i=0){n.prototype.isVector2=!0,this.x=e,this.y=i}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,i){return this.x=e,this.y=i,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let i=this.x,t=this.y,r=e.elements;return this.x=r[0]*i+r[3]*t+r[6],this.y=r[1]*i+r[4]*t+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,i){return this.x=Math.max(e.x,Math.min(i.x,this.x)),this.y=Math.max(e.y,Math.min(i.y,this.y)),this}clampScalar(e,i){return this.x=Math.max(e,Math.min(i,this.x)),this.y=Math.max(e,Math.min(i,this.y)),this}clampLength(e,i){let t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(i,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let i=Math.sqrt(this.lengthSq()*e.lengthSq());if(i===0)return Math.PI/2;let t=this.dot(e)/i;return Math.acos(Rn(t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let i=this.x-e.x,t=this.y-e.y;return i*i+t*t}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this}lerpVectors(e,i,t){return this.x=e.x+(i.x-e.x)*t,this.y=e.y+(i.y-e.y)*t,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this}rotateAround(e,i){let t=Math.cos(i),r=Math.sin(i),o=this.x-e.x,s=this.y-e.y;return this.x=o*t-s*r+e.x,this.y=o*r+s*t+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Yt=class n{constructor(e,i,t,r,o,s,a,c,l){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,i,t,r,o,s,a,c,l)}set(e,i,t,r,o,s,a,c,l){let d=this.elements;return d[0]=e,d[1]=r,d[2]=a,d[3]=i,d[4]=o,d[5]=c,d[6]=t,d[7]=s,d[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let i=this.elements,t=e.elements;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],this}extractBasis(e,i,t){return e.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),t.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let i=e.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,i){let t=e.elements,r=i.elements,o=this.elements,s=t[0],a=t[3],c=t[6],l=t[1],d=t[4],u=t[7],h=t[2],f=t[5],p=t[8],b=r[0],m=r[3],g=r[6],v=r[1],_=r[4],y=r[7],C=r[2],R=r[5],w=r[8];return o[0]=s*b+a*v+c*C,o[3]=s*m+a*_+c*R,o[6]=s*g+a*y+c*w,o[1]=l*b+d*v+u*C,o[4]=l*m+d*_+u*R,o[7]=l*g+d*y+u*w,o[2]=h*b+f*v+p*C,o[5]=h*m+f*_+p*R,o[8]=h*g+f*y+p*w,this}multiplyScalar(e){let i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=e,i[4]*=e,i[7]*=e,i[2]*=e,i[5]*=e,i[8]*=e,this}determinant(){let e=this.elements,i=e[0],t=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8];return i*s*d-i*a*l-t*o*d+t*a*c+r*o*l-r*s*c}invert(){let e=this.elements,i=e[0],t=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],u=d*s-a*l,h=a*c-d*o,f=l*o-s*c,p=i*u+t*h+r*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);let b=1/p;return e[0]=u*b,e[1]=(r*l-d*t)*b,e[2]=(a*t-r*s)*b,e[3]=h*b,e[4]=(d*i-r*c)*b,e[5]=(r*o-a*i)*b,e[6]=f*b,e[7]=(t*c-l*i)*b,e[8]=(s*i-t*o)*b,this}transpose(){let e,i=this.elements;return e=i[1],i[1]=i[3],i[3]=e,e=i[2],i[2]=i[6],i[6]=e,e=i[5],i[5]=i[7],i[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let i=this.elements;return e[0]=i[0],e[1]=i[3],e[2]=i[6],e[3]=i[1],e[4]=i[4],e[5]=i[7],e[6]=i[2],e[7]=i[5],e[8]=i[8],this}setUvTransform(e,i,t,r,o,s,a){let c=Math.cos(o),l=Math.sin(o);return this.set(t*c,t*l,-t*(c*s+l*a)+s+e,-r*l,r*c,-r*(-l*s+c*a)+a+i,0,0,1),this}scale(e,i){return this.premultiply(MT.makeScale(e,i)),this}rotate(e){return this.premultiply(MT.makeRotation(-e)),this}translate(e,i){return this.premultiply(MT.makeTranslation(e,i)),this}makeTranslation(e,i){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,i,0,0,1),this}makeRotation(e){let i=Math.cos(e),t=Math.sin(e);return this.set(i,-t,0,t,i,0,0,0,1),this}makeScale(e,i){return this.set(e,0,0,0,i,0,0,0,1),this}equals(e){let i=this.elements,t=e.elements;for(let r=0;r<9;r++)if(i[r]!==t[r])return!1;return!0}fromArray(e,i=0){for(let t=0;t<9;t++)this.elements[t]=e[t+i];return this}toArray(e=[],i=0){let t=this.elements;return e[i]=t[0],e[i+1]=t[1],e[i+2]=t[2],e[i+3]=t[3],e[i+4]=t[4],e[i+5]=t[5],e[i+6]=t[6],e[i+7]=t[7],e[i+8]=t[8],e}clone(){return new this.constructor().fromArray(this.elements)}},MT=new Yt;function qL(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}var Uq={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function jh(n,e){return new Uq[n](e)}function Ep(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function XL(){let n=Ep("canvas");return n.style.display="block",n}var g2={};function YL(n){n in g2||(g2[n]=!0,console.warn(n))}var b2=new Yt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),_2=new Yt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Vv={[jn]:{transfer:Mp,primaries:Sp,toReference:n=>n,fromReference:n=>n},[Pn]:{transfer:Qi,primaries:Sp,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[ng]:{transfer:Mp,primaries:Rp,toReference:n=>n.applyMatrix3(_2),fromReference:n=>n.applyMatrix3(b2)},[Ny]:{transfer:Qi,primaries:Rp,toReference:n=>n.convertSRGBToLinear().applyMatrix3(_2),fromReference:n=>n.applyMatrix3(b2).convertLinearToSRGB()}},Vq=new Set([jn,ng]),Di={enabled:!0,_workingColorSpace:jn,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!Vq.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,i){if(this.enabled===!1||e===i||!e||!i)return n;let t=Vv[e].toReference,r=Vv[i].fromReference;return r(t(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Vv[n].primaries},getTransfer:function(n){return n===Xa?Mp:Vv[n].transfer}};function Lh(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function ST(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var fh,U0=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{fh===void 0&&(fh=Ep("canvas")),fh.width=e.width,fh.height=e.height;let t=fh.getContext("2d");e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height),i=fh}return i.width>2048||i.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),i.toDataURL("image/jpeg",.6)):i.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let i=Ep("canvas");i.width=e.width,i.height=e.height;let t=i.getContext("2d");t.drawImage(e,0,0,e.width,e.height);let r=t.getImageData(0,0,e.width,e.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=Lh(o[s]/255)*255;return t.putImageData(r,0,0),i}else if(e.data){let i=e.data.slice(0);for(let t=0;t<i.length;t++)i instanceof Uint8Array||i instanceof Uint8ClampedArray?i[t]=Math.floor(Lh(i[t]/255)*255):i[t]=Lh(i[t]);return{data:i,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},zq=0,Za=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:zq++}),this.uuid=So(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let i=e===void 0||typeof e=="string";if(!i&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let t={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(RT(r[s].image)):o.push(RT(r[s]))}else o=RT(r);t.url=o}return i||(e.images[this.uuid]=t),t}};function RT(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?U0.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Hq=0,yn=(()=>{class n extends kn{constructor(i=n.DEFAULT_IMAGE,t=n.DEFAULT_MAPPING,r=to,o=to,s=bn,a=wo,c=Mo,l=ic,d=n.DEFAULT_ANISOTROPY,u=Xa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Hq++}),this.uuid=So(),this.name="",this.source=new Za(i),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=d,this.format=c,this.internalFormat=null,this.type=l,this.offset=new z(0,0),this.repeat=new z(1,1),this.center=new z(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Yt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(i=null){this.source.data=i}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(i){return this.name=i.name,this.source=i.source,this.mipmaps=i.mipmaps.slice(0),this.mapping=i.mapping,this.channel=i.channel,this.wrapS=i.wrapS,this.wrapT=i.wrapT,this.magFilter=i.magFilter,this.minFilter=i.minFilter,this.anisotropy=i.anisotropy,this.format=i.format,this.internalFormat=i.internalFormat,this.type=i.type,this.offset.copy(i.offset),this.repeat.copy(i.repeat),this.center.copy(i.center),this.rotation=i.rotation,this.matrixAutoUpdate=i.matrixAutoUpdate,this.matrix.copy(i.matrix),this.generateMipmaps=i.generateMipmaps,this.premultiplyAlpha=i.premultiplyAlpha,this.flipY=i.flipY,this.unpackAlignment=i.unpackAlignment,this.colorSpace=i.colorSpace,this.userData=JSON.parse(JSON.stringify(i.userData)),this.needsUpdate=!0,this}toJSON(i){let t=i===void 0||typeof i=="string";if(!t&&i.textures[this.uuid]!==void 0)return i.textures[this.uuid];let r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(i).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(i.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(i){if(this.mapping!==B0)return i;if(i.applyMatrix3(this.matrix),i.x<0||i.x>1)switch(this.wrapS){case Go:i.x=i.x-Math.floor(i.x);break;case to:i.x=i.x<0?0:1;break;case Dd:Math.abs(Math.floor(i.x)%2)===1?i.x=Math.ceil(i.x)-i.x:i.x=i.x-Math.floor(i.x);break}if(i.y<0||i.y>1)switch(this.wrapT){case Go:i.y=i.y-Math.floor(i.y);break;case to:i.y=i.y<0?0:1;break;case Dd:Math.abs(Math.floor(i.y)%2)===1?i.y=Math.ceil(i.y)-i.y:i.y=i.y-Math.floor(i.y);break}return this.flipY&&(i.y=1-i.y),i}set needsUpdate(i){i===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(i){i===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=B0,n.DEFAULT_ANISOTROPY=1,n})(),xi=class n{constructor(e=0,i=0,t=0,r=1){n.prototype.isVector4=!0,this.x=e,this.y=i,this.z=t,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,i,t,r){return this.x=e,this.y=i,this.z=t,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this.z=e.z+i.z,this.w=e.w+i.w,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this.z+=e.z*i,this.w+=e.w*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this.z=e.z-i.z,this.w=e.w-i.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let i=this.x,t=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*i+s[4]*t+s[8]*r+s[12]*o,this.y=s[1]*i+s[5]*t+s[9]*r+s[13]*o,this.z=s[2]*i+s[6]*t+s[10]*r+s[14]*o,this.w=s[3]*i+s[7]*t+s[11]*r+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let i=Math.sqrt(1-e.w*e.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/i,this.y=e.y/i,this.z=e.z/i),this}setAxisAngleFromRotationMatrix(e){let i,t,r,o,c=e.elements,l=c[0],d=c[4],u=c[8],h=c[1],f=c[5],p=c[9],b=c[2],m=c[6],g=c[10];if(Math.abs(d-h)<.01&&Math.abs(u-b)<.01&&Math.abs(p-m)<.01){if(Math.abs(d+h)<.1&&Math.abs(u+b)<.1&&Math.abs(p+m)<.1&&Math.abs(l+f+g-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;let _=(l+1)/2,y=(f+1)/2,C=(g+1)/2,R=(d+h)/4,w=(u+b)/4,A=(p+m)/4;return _>y&&_>C?_<.01?(t=0,r=.707106781,o=.707106781):(t=Math.sqrt(_),r=R/t,o=w/t):y>C?y<.01?(t=.707106781,r=0,o=.707106781):(r=Math.sqrt(y),t=R/r,o=A/r):C<.01?(t=.707106781,r=.707106781,o=0):(o=Math.sqrt(C),t=w/o,r=A/o),this.set(t,r,o,i),this}let v=Math.sqrt((m-p)*(m-p)+(u-b)*(u-b)+(h-d)*(h-d));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-b)/v,this.z=(h-d)/v,this.w=Math.acos((l+f+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,i){return this.x=Math.max(e.x,Math.min(i.x,this.x)),this.y=Math.max(e.y,Math.min(i.y,this.y)),this.z=Math.max(e.z,Math.min(i.z,this.z)),this.w=Math.max(e.w,Math.min(i.w,this.w)),this}clampScalar(e,i){return this.x=Math.max(e,Math.min(i,this.x)),this.y=Math.max(e,Math.min(i,this.y)),this.z=Math.max(e,Math.min(i,this.z)),this.w=Math.max(e,Math.min(i,this.w)),this}clampLength(e,i){let t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(i,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this.z+=(e.z-this.z)*i,this.w+=(e.w-this.w)*i,this}lerpVectors(e,i,t){return this.x=e.x+(i.x-e.x)*t,this.y=e.y+(i.y-e.y)*t,this.z=e.z+(i.z-e.z)*t,this.w=e.w+(i.w-e.w)*t,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this.z=e[i+2],this.w=e[i+3],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e[i+2]=this.z,e[i+3]=this.w,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this.z=e.getZ(i),this.w=e.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},V0=class extends kn{constructor(e=1,i=1,t={}){super(),this.isRenderTarget=!0,this.width=e,this.height=i,this.depth=1,this.scissor=new xi(0,0,e,i),this.scissorTest=!1,this.viewport=new xi(0,0,e,i);let r={width:e,height:i,depth:1};t=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:bn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},t);let o=new yn(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace);o.flipY=!1,o.generateMipmaps=t.generateMipmaps,o.internalFormat=t.internalFormat,this.textures=[];let s=t.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,this.depthTexture=t.depthTexture,this.samples=t.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,i,t=1){if(this.width!==e||this.height!==i||this.depth!==t){this.width=e,this.height=i,this.depth=t;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=e,this.textures[r].image.height=i,this.textures[r].image.depth=t;this.dispose()}this.viewport.set(0,0,e,i),this.scissor.set(0,0,e,i)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,r=e.textures.length;t<r;t++)this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0;let i=Object.assign({},e.texture.image);return this.texture.source=new Za(i),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},oi=class extends V0{constructor(e=1,i=1,t={}){super(e,i,t),this.isWebGLRenderTarget=!0}},Vh=class extends yn{constructor(e=null,i=1,t=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:i,height:t,depth:r},this.magFilter=li,this.minFilter=li,this.wrapR=to,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},BC=class extends oi{constructor(e=1,i=1,t=1,r={}){super(e,i,r),this.isWebGLArrayRenderTarget=!0,this.depth=t,this.texture=new Vh(null,e,i,t),this.texture.isRenderTargetTexture=!0}},Dp=class extends yn{constructor(e=null,i=1,t=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:i,height:t,depth:r},this.magFilter=li,this.minFilter=li,this.wrapR=to,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},UC=class extends oi{constructor(e=1,i=1,t=1,r={}){super(e,i,r),this.isWebGL3DRenderTarget=!0,this.depth=t,this.texture=new Dp(null,e,i,t),this.texture.isRenderTargetTexture=!0}},Kt=class{constructor(e=0,i=0,t=0,r=1){this.isQuaternion=!0,this._x=e,this._y=i,this._z=t,this._w=r}static slerpFlat(e,i,t,r,o,s,a){let c=t[r+0],l=t[r+1],d=t[r+2],u=t[r+3],h=o[s+0],f=o[s+1],p=o[s+2],b=o[s+3];if(a===0){e[i+0]=c,e[i+1]=l,e[i+2]=d,e[i+3]=u;return}if(a===1){e[i+0]=h,e[i+1]=f,e[i+2]=p,e[i+3]=b;return}if(u!==b||c!==h||l!==f||d!==p){let m=1-a,g=c*h+l*f+d*p+u*b,v=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){let C=Math.sqrt(_),R=Math.atan2(C,g*v);m=Math.sin(m*R)/C,a=Math.sin(a*R)/C}let y=a*v;if(c=c*m+h*y,l=l*m+f*y,d=d*m+p*y,u=u*m+b*y,m===1-a){let C=1/Math.sqrt(c*c+l*l+d*d+u*u);c*=C,l*=C,d*=C,u*=C}}e[i]=c,e[i+1]=l,e[i+2]=d,e[i+3]=u}static multiplyQuaternionsFlat(e,i,t,r,o,s){let a=t[r],c=t[r+1],l=t[r+2],d=t[r+3],u=o[s],h=o[s+1],f=o[s+2],p=o[s+3];return e[i]=a*p+d*u+c*f-l*h,e[i+1]=c*p+d*h+l*u-a*f,e[i+2]=l*p+d*f+a*h-c*u,e[i+3]=d*p-a*u-c*h-l*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,i,t,r){return this._x=e,this._y=i,this._z=t,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,i=!0){let t=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,c=Math.sin,l=a(t/2),d=a(r/2),u=a(o/2),h=c(t/2),f=c(r/2),p=c(o/2);switch(s){case"XYZ":this._x=h*d*u+l*f*p,this._y=l*f*u-h*d*p,this._z=l*d*p+h*f*u,this._w=l*d*u-h*f*p;break;case"YXZ":this._x=h*d*u+l*f*p,this._y=l*f*u-h*d*p,this._z=l*d*p-h*f*u,this._w=l*d*u+h*f*p;break;case"ZXY":this._x=h*d*u-l*f*p,this._y=l*f*u+h*d*p,this._z=l*d*p+h*f*u,this._w=l*d*u-h*f*p;break;case"ZYX":this._x=h*d*u-l*f*p,this._y=l*f*u+h*d*p,this._z=l*d*p-h*f*u,this._w=l*d*u+h*f*p;break;case"YZX":this._x=h*d*u+l*f*p,this._y=l*f*u+h*d*p,this._z=l*d*p-h*f*u,this._w=l*d*u-h*f*p;break;case"XZY":this._x=h*d*u-l*f*p,this._y=l*f*u-h*d*p,this._z=l*d*p+h*f*u,this._w=l*d*u+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return i===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,i){let t=i/2,r=Math.sin(t);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(t),this._onChangeCallback(),this}setFromRotationMatrix(e){let i=e.elements,t=i[0],r=i[4],o=i[8],s=i[1],a=i[5],c=i[9],l=i[2],d=i[6],u=i[10],h=t+a+u;if(h>0){let f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(d-c)*f,this._y=(o-l)*f,this._z=(s-r)*f}else if(t>a&&t>u){let f=2*Math.sqrt(1+t-a-u);this._w=(d-c)/f,this._x=.25*f,this._y=(r+s)/f,this._z=(o+l)/f}else if(a>u){let f=2*Math.sqrt(1+a-t-u);this._w=(o-l)/f,this._x=(r+s)/f,this._y=.25*f,this._z=(c+d)/f}else{let f=2*Math.sqrt(1+u-t-a);this._w=(s-r)/f,this._x=(o+l)/f,this._y=(c+d)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,i){let t=e.dot(i)+1;return t<Number.EPSILON?(t=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=t):(this._x=0,this._y=-e.z,this._z=e.y,this._w=t)):(this._x=e.y*i.z-e.z*i.y,this._y=e.z*i.x-e.x*i.z,this._z=e.x*i.y-e.y*i.x,this._w=t),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Rn(this.dot(e),-1,1)))}rotateTowards(e,i){let t=this.angleTo(e);if(t===0)return this;let r=Math.min(1,i/t);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,i){let t=e._x,r=e._y,o=e._z,s=e._w,a=i._x,c=i._y,l=i._z,d=i._w;return this._x=t*d+s*a+r*l-o*c,this._y=r*d+s*c+o*a-t*l,this._z=o*d+s*l+t*c-r*a,this._w=s*d-t*a-r*c-o*l,this._onChangeCallback(),this}slerp(e,i){if(i===0)return this;if(i===1)return this.copy(e);let t=this._x,r=this._y,o=this._z,s=this._w,a=s*e._w+t*e._x+r*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=t,this._y=r,this._z=o,this;let c=1-a*a;if(c<=Number.EPSILON){let f=1-i;return this._w=f*s+i*this._w,this._x=f*t+i*this._x,this._y=f*r+i*this._y,this._z=f*o+i*this._z,this.normalize(),this}let l=Math.sqrt(c),d=Math.atan2(l,a),u=Math.sin((1-i)*d)/l,h=Math.sin(i*d)/l;return this._w=s*u+this._w*h,this._x=t*u+this._x*h,this._y=r*u+this._y*h,this._z=o*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,i,t){return this.copy(e).slerp(i,t)}random(){let e=2*Math.PI*Math.random(),i=2*Math.PI*Math.random(),t=Math.random(),r=Math.sqrt(1-t),o=Math.sqrt(t);return this.set(r*Math.sin(e),r*Math.cos(e),o*Math.sin(i),o*Math.cos(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,i=0){return this._x=e[i],this._y=e[i+1],this._z=e[i+2],this._w=e[i+3],this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._w,e}fromBufferAttribute(e,i){return this._x=e.getX(i),this._y=e.getY(i),this._z=e.getZ(i),this._w=e.getW(i),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},M=class n{constructor(e=0,i=0,t=0){n.prototype.isVector3=!0,this.x=e,this.y=i,this.z=t}set(e,i,t){return t===void 0&&(t=this.z),this.x=e,this.y=i,this.z=t,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this.z=e.z+i.z,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this.z+=e.z*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this.z=e.z-i.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,i){return this.x=e.x*i.x,this.y=e.y*i.y,this.z=e.z*i.z,this}applyEuler(e){return this.applyQuaternion(v2.setFromEuler(e))}applyAxisAngle(e,i){return this.applyQuaternion(v2.setFromAxisAngle(e,i))}applyMatrix3(e){let i=this.x,t=this.y,r=this.z,o=e.elements;return this.x=o[0]*i+o[3]*t+o[6]*r,this.y=o[1]*i+o[4]*t+o[7]*r,this.z=o[2]*i+o[5]*t+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let i=this.x,t=this.y,r=this.z,o=e.elements,s=1/(o[3]*i+o[7]*t+o[11]*r+o[15]);return this.x=(o[0]*i+o[4]*t+o[8]*r+o[12])*s,this.y=(o[1]*i+o[5]*t+o[9]*r+o[13])*s,this.z=(o[2]*i+o[6]*t+o[10]*r+o[14])*s,this}applyQuaternion(e){let i=this.x,t=this.y,r=this.z,o=e.x,s=e.y,a=e.z,c=e.w,l=2*(s*r-a*t),d=2*(a*i-o*r),u=2*(o*t-s*i);return this.x=i+c*l+s*u-a*d,this.y=t+c*d+a*l-o*u,this.z=r+c*u+o*d-s*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let i=this.x,t=this.y,r=this.z,o=e.elements;return this.x=o[0]*i+o[4]*t+o[8]*r,this.y=o[1]*i+o[5]*t+o[9]*r,this.z=o[2]*i+o[6]*t+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,i){return this.x=Math.max(e.x,Math.min(i.x,this.x)),this.y=Math.max(e.y,Math.min(i.y,this.y)),this.z=Math.max(e.z,Math.min(i.z,this.z)),this}clampScalar(e,i){return this.x=Math.max(e,Math.min(i,this.x)),this.y=Math.max(e,Math.min(i,this.y)),this.z=Math.max(e,Math.min(i,this.z)),this}clampLength(e,i){let t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(i,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this.z+=(e.z-this.z)*i,this}lerpVectors(e,i,t){return this.x=e.x+(i.x-e.x)*t,this.y=e.y+(i.y-e.y)*t,this.z=e.z+(i.z-e.z)*t,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,i){let t=e.x,r=e.y,o=e.z,s=i.x,a=i.y,c=i.z;return this.x=r*c-o*a,this.y=o*s-t*c,this.z=t*a-r*s,this}projectOnVector(e){let i=e.lengthSq();if(i===0)return this.set(0,0,0);let t=e.dot(this)/i;return this.copy(e).multiplyScalar(t)}projectOnPlane(e){return TT.copy(this).projectOnVector(e),this.sub(TT)}reflect(e){return this.sub(TT.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let i=Math.sqrt(this.lengthSq()*e.lengthSq());if(i===0)return Math.PI/2;let t=this.dot(e)/i;return Math.acos(Rn(t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let i=this.x-e.x,t=this.y-e.y,r=this.z-e.z;return i*i+t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,i,t){let r=Math.sin(i)*e;return this.x=r*Math.sin(t),this.y=Math.cos(i)*e,this.z=r*Math.cos(t),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,i,t){return this.x=e*Math.sin(i),this.y=t,this.z=e*Math.cos(i),this}setFromMatrixPosition(e){let i=e.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(e){let i=this.setFromMatrixColumn(e,0).length(),t=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=i,this.y=t,this.z=r,this}setFromMatrixColumn(e,i){return this.fromArray(e.elements,i*4)}setFromMatrix3Column(e,i){return this.fromArray(e.elements,i*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this.z=e[i+2],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e[i+2]=this.z,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this.z=e.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,i=Math.random()*2-1,t=Math.sqrt(1-i*i);return this.x=t*Math.cos(e),this.y=i,this.z=t*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},TT=new M,v2=new Kt,vn=class{constructor(e=new M(1/0,1/0,1/0),i=new M(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=i}set(e,i){return this.min.copy(e),this.max.copy(i),this}setFromArray(e){this.makeEmpty();for(let i=0,t=e.length;i<t;i+=3)this.expandByPoint(ss.fromArray(e,i));return this}setFromBufferAttribute(e){this.makeEmpty();for(let i=0,t=e.count;i<t;i++)this.expandByPoint(ss.fromBufferAttribute(e,i));return this}setFromPoints(e){this.makeEmpty();for(let i=0,t=e.length;i<t;i++)this.expandByPoint(e[i]);return this}setFromCenterAndSize(e,i){let t=ss.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(t),this.max.copy(e).add(t),this}setFromObject(e,i=!1){return this.makeEmpty(),this.expandByObject(e,i)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,i=!1){e.updateWorldMatrix(!1,!1);let t=e.geometry;if(t!==void 0){let o=t.getAttribute("position");if(i===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,ss):ss.fromBufferAttribute(o,s),ss.applyMatrix4(e.matrixWorld),this.expandByPoint(ss);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),zv.copy(e.boundingBox)):(t.boundingBox===null&&t.computeBoundingBox(),zv.copy(t.boundingBox)),zv.applyMatrix4(e.matrixWorld),this.union(zv)}let r=e.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],i);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,i){return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ss),ss.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let i,t;return e.normal.x>0?(i=e.normal.x*this.min.x,t=e.normal.x*this.max.x):(i=e.normal.x*this.max.x,t=e.normal.x*this.min.x),e.normal.y>0?(i+=e.normal.y*this.min.y,t+=e.normal.y*this.max.y):(i+=e.normal.y*this.max.y,t+=e.normal.y*this.min.y),e.normal.z>0?(i+=e.normal.z*this.min.z,t+=e.normal.z*this.max.z):(i+=e.normal.z*this.max.z,t+=e.normal.z*this.min.z),i<=-e.constant&&t>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(tp),Hv.subVectors(this.max,tp),mh.subVectors(e.a,tp),ph.subVectors(e.b,tp),gh.subVectors(e.c,tp),Xc.subVectors(ph,mh),Yc.subVectors(gh,ph),od.subVectors(mh,gh);let i=[0,-Xc.z,Xc.y,0,-Yc.z,Yc.y,0,-od.z,od.y,Xc.z,0,-Xc.x,Yc.z,0,-Yc.x,od.z,0,-od.x,-Xc.y,Xc.x,0,-Yc.y,Yc.x,0,-od.y,od.x,0];return!CT(i,mh,ph,gh,Hv)||(i=[1,0,0,0,1,0,0,0,1],!CT(i,mh,ph,gh,Hv))?!1:(Gv.crossVectors(Xc,Yc),i=[Gv.x,Gv.y,Gv.z],CT(i,mh,ph,gh,Hv))}clampPoint(e,i){return i.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ss).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ss).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(za[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),za[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),za[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),za[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),za[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),za[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),za[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),za[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(za),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},za=[new M,new M,new M,new M,new M,new M,new M,new M],ss=new M,zv=new vn,mh=new M,ph=new M,gh=new M,Xc=new M,Yc=new M,od=new M,tp=new M,Hv=new M,Gv=new M,sd=new M;function CT(n,e,i,t,r){for(let o=0,s=n.length-3;o<=s;o+=3){sd.fromArray(n,o);let a=r.x*Math.abs(sd.x)+r.y*Math.abs(sd.y)+r.z*Math.abs(sd.z),c=e.dot(sd),l=i.dot(sd),d=t.dot(sd);if(Math.max(-Math.max(c,l,d),Math.min(c,l,d))>a)return!1}return!0}var Gq=new vn,ip=new M,ET=new M,Tn=class{constructor(e=new M,i=-1){this.isSphere=!0,this.center=e,this.radius=i}set(e,i){return this.center.copy(e),this.radius=i,this}setFromPoints(e,i){let t=this.center;i!==void 0?t.copy(i):Gq.setFromPoints(e).getCenter(t);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,t.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let i=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=i*i}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,i){let t=this.center.distanceToSquared(e);return i.copy(e),t>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ip.subVectors(e,this.center);let i=ip.lengthSq();if(i>this.radius*this.radius){let t=Math.sqrt(i),r=(t-this.radius)*.5;this.center.addScaledVector(ip,r/t),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(ET.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ip.copy(e.center).add(ET)),this.expandByPoint(ip.copy(e.center).sub(ET))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},Ha=new M,DT=new M,Wv=new M,Zc=new M,AT=new M,$v=new M,IT=new M,Js=class{constructor(e=new M,i=new M(0,0,-1)){this.origin=e,this.direction=i}set(e,i){return this.origin.copy(e),this.direction.copy(i),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,i){return i.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ha)),this}closestPointToPoint(e,i){i.subVectors(e,this.origin);let t=i.dot(this.direction);return t<0?i.copy(this.origin):i.copy(this.origin).addScaledVector(this.direction,t)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let i=Ha.subVectors(e,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(e):(Ha.copy(this.origin).addScaledVector(this.direction,i),Ha.distanceToSquared(e))}distanceSqToSegment(e,i,t,r){DT.copy(e).add(i).multiplyScalar(.5),Wv.copy(i).sub(e).normalize(),Zc.copy(this.origin).sub(DT);let o=e.distanceTo(i)*.5,s=-this.direction.dot(Wv),a=Zc.dot(this.direction),c=-Zc.dot(Wv),l=Zc.lengthSq(),d=Math.abs(1-s*s),u,h,f,p;if(d>0)if(u=s*c-a,h=s*a-c,p=o*d,u>=0)if(h>=-p)if(h<=p){let b=1/d;u*=b,h*=b,f=u*(u+s*h+2*a)+h*(s*u+h+2*c)+l}else h=o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*c)+l;else h=-o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*c)+l;else h<=-p?(u=Math.max(0,-(-s*o+a)),h=u>0?-o:Math.min(Math.max(-o,-c),o),f=-u*u+h*(h+2*c)+l):h<=p?(u=0,h=Math.min(Math.max(-o,-c),o),f=h*(h+2*c)+l):(u=Math.max(0,-(s*o+a)),h=u>0?o:Math.min(Math.max(-o,-c),o),f=-u*u+h*(h+2*c)+l);else h=s>0?-o:o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*c)+l;return t&&t.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(DT).addScaledVector(Wv,h),f}intersectSphere(e,i){Ha.subVectors(e.center,this.origin);let t=Ha.dot(this.direction),r=Ha.dot(Ha)-t*t,o=e.radius*e.radius;if(r>o)return null;let s=Math.sqrt(o-r),a=t-s,c=t+s;return c<0?null:a<0?this.at(c,i):this.at(a,i)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let i=e.normal.dot(this.direction);if(i===0)return e.distanceToPoint(this.origin)===0?0:null;let t=-(this.origin.dot(e.normal)+e.constant)/i;return t>=0?t:null}intersectPlane(e,i){let t=this.distanceToPlane(e);return t===null?null:this.at(t,i)}intersectsPlane(e){let i=e.distanceToPoint(this.origin);return i===0||e.normal.dot(this.direction)*i<0}intersectBox(e,i){let t,r,o,s,a,c,l=1/this.direction.x,d=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(t=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(t=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),d>=0?(o=(e.min.y-h.y)*d,s=(e.max.y-h.y)*d):(o=(e.max.y-h.y)*d,s=(e.min.y-h.y)*d),t>s||o>r||((o>t||isNaN(t))&&(t=o),(s<r||isNaN(r))&&(r=s),u>=0?(a=(e.min.z-h.z)*u,c=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,c=(e.min.z-h.z)*u),t>c||a>r)||((a>t||t!==t)&&(t=a),(c<r||r!==r)&&(r=c),r<0)?null:this.at(t>=0?t:r,i)}intersectsBox(e){return this.intersectBox(e,Ha)!==null}intersectTriangle(e,i,t,r,o){AT.subVectors(i,e),$v.subVectors(t,e),IT.crossVectors(AT,$v);let s=this.direction.dot(IT),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;Zc.subVectors(this.origin,e);let c=a*this.direction.dot($v.crossVectors(Zc,$v));if(c<0)return null;let l=a*this.direction.dot(AT.cross(Zc));if(l<0||c+l>s)return null;let d=-a*Zc.dot(IT);return d<0?null:this.at(d/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},je=class n{constructor(e,i,t,r,o,s,a,c,l,d,u,h,f,p,b,m){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,i,t,r,o,s,a,c,l,d,u,h,f,p,b,m)}set(e,i,t,r,o,s,a,c,l,d,u,h,f,p,b,m){let g=this.elements;return g[0]=e,g[4]=i,g[8]=t,g[12]=r,g[1]=o,g[5]=s,g[9]=a,g[13]=c,g[2]=l,g[6]=d,g[10]=u,g[14]=h,g[3]=f,g[7]=p,g[11]=b,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let i=this.elements,t=e.elements;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],this}copyPosition(e){let i=this.elements,t=e.elements;return i[12]=t[12],i[13]=t[13],i[14]=t[14],this}setFromMatrix3(e){let i=e.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(e,i,t){return e.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),t.setFromMatrixColumn(this,2),this}makeBasis(e,i,t){return this.set(e.x,i.x,t.x,0,e.y,i.y,t.y,0,e.z,i.z,t.z,0,0,0,0,1),this}extractRotation(e){let i=this.elements,t=e.elements,r=1/bh.setFromMatrixColumn(e,0).length(),o=1/bh.setFromMatrixColumn(e,1).length(),s=1/bh.setFromMatrixColumn(e,2).length();return i[0]=t[0]*r,i[1]=t[1]*r,i[2]=t[2]*r,i[3]=0,i[4]=t[4]*o,i[5]=t[5]*o,i[6]=t[6]*o,i[7]=0,i[8]=t[8]*s,i[9]=t[9]*s,i[10]=t[10]*s,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(e){let i=this.elements,t=e.x,r=e.y,o=e.z,s=Math.cos(t),a=Math.sin(t),c=Math.cos(r),l=Math.sin(r),d=Math.cos(o),u=Math.sin(o);if(e.order==="XYZ"){let h=s*d,f=s*u,p=a*d,b=a*u;i[0]=c*d,i[4]=-c*u,i[8]=l,i[1]=f+p*l,i[5]=h-b*l,i[9]=-a*c,i[2]=b-h*l,i[6]=p+f*l,i[10]=s*c}else if(e.order==="YXZ"){let h=c*d,f=c*u,p=l*d,b=l*u;i[0]=h+b*a,i[4]=p*a-f,i[8]=s*l,i[1]=s*u,i[5]=s*d,i[9]=-a,i[2]=f*a-p,i[6]=b+h*a,i[10]=s*c}else if(e.order==="ZXY"){let h=c*d,f=c*u,p=l*d,b=l*u;i[0]=h-b*a,i[4]=-s*u,i[8]=p+f*a,i[1]=f+p*a,i[5]=s*d,i[9]=b-h*a,i[2]=-s*l,i[6]=a,i[10]=s*c}else if(e.order==="ZYX"){let h=s*d,f=s*u,p=a*d,b=a*u;i[0]=c*d,i[4]=p*l-f,i[8]=h*l+b,i[1]=c*u,i[5]=b*l+h,i[9]=f*l-p,i[2]=-l,i[6]=a*c,i[10]=s*c}else if(e.order==="YZX"){let h=s*c,f=s*l,p=a*c,b=a*l;i[0]=c*d,i[4]=b-h*u,i[8]=p*u+f,i[1]=u,i[5]=s*d,i[9]=-a*d,i[2]=-l*d,i[6]=f*u+p,i[10]=h-b*u}else if(e.order==="XZY"){let h=s*c,f=s*l,p=a*c,b=a*l;i[0]=c*d,i[4]=-u,i[8]=l*d,i[1]=h*u+b,i[5]=s*d,i[9]=f*u-p,i[2]=p*u-f,i[6]=a*d,i[10]=b*u+h}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Wq,e,$q)}lookAt(e,i,t){let r=this.elements;return yo.subVectors(e,i),yo.lengthSq()===0&&(yo.z=1),yo.normalize(),Qc.crossVectors(t,yo),Qc.lengthSq()===0&&(Math.abs(t.z)===1?yo.x+=1e-4:yo.z+=1e-4,yo.normalize(),Qc.crossVectors(t,yo)),Qc.normalize(),qv.crossVectors(yo,Qc),r[0]=Qc.x,r[4]=qv.x,r[8]=yo.x,r[1]=Qc.y,r[5]=qv.y,r[9]=yo.y,r[2]=Qc.z,r[6]=qv.z,r[10]=yo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,i){let t=e.elements,r=i.elements,o=this.elements,s=t[0],a=t[4],c=t[8],l=t[12],d=t[1],u=t[5],h=t[9],f=t[13],p=t[2],b=t[6],m=t[10],g=t[14],v=t[3],_=t[7],y=t[11],C=t[15],R=r[0],w=r[4],A=r[8],S=r[12],x=r[1],F=r[5],V=r[9],O=r[13],K=r[2],ne=r[6],G=r[10],$=r[14],U=r[3],Z=r[7],me=r[11],ke=r[15];return o[0]=s*R+a*x+c*K+l*U,o[4]=s*w+a*F+c*ne+l*Z,o[8]=s*A+a*V+c*G+l*me,o[12]=s*S+a*O+c*$+l*ke,o[1]=d*R+u*x+h*K+f*U,o[5]=d*w+u*F+h*ne+f*Z,o[9]=d*A+u*V+h*G+f*me,o[13]=d*S+u*O+h*$+f*ke,o[2]=p*R+b*x+m*K+g*U,o[6]=p*w+b*F+m*ne+g*Z,o[10]=p*A+b*V+m*G+g*me,o[14]=p*S+b*O+m*$+g*ke,o[3]=v*R+_*x+y*K+C*U,o[7]=v*w+_*F+y*ne+C*Z,o[11]=v*A+_*V+y*G+C*me,o[15]=v*S+_*O+y*$+C*ke,this}multiplyScalar(e){let i=this.elements;return i[0]*=e,i[4]*=e,i[8]*=e,i[12]*=e,i[1]*=e,i[5]*=e,i[9]*=e,i[13]*=e,i[2]*=e,i[6]*=e,i[10]*=e,i[14]*=e,i[3]*=e,i[7]*=e,i[11]*=e,i[15]*=e,this}determinant(){let e=this.elements,i=e[0],t=e[4],r=e[8],o=e[12],s=e[1],a=e[5],c=e[9],l=e[13],d=e[2],u=e[6],h=e[10],f=e[14],p=e[3],b=e[7],m=e[11],g=e[15];return p*(+o*c*u-r*l*u-o*a*h+t*l*h+r*a*f-t*c*f)+b*(+i*c*f-i*l*h+o*s*h-r*s*f+r*l*d-o*c*d)+m*(+i*l*u-i*a*f-o*s*u+t*s*f+o*a*d-t*l*d)+g*(-r*a*d-i*c*u+i*a*h+r*s*u-t*s*h+t*c*d)}transpose(){let e=this.elements,i;return i=e[1],e[1]=e[4],e[4]=i,i=e[2],e[2]=e[8],e[8]=i,i=e[6],e[6]=e[9],e[9]=i,i=e[3],e[3]=e[12],e[12]=i,i=e[7],e[7]=e[13],e[13]=i,i=e[11],e[11]=e[14],e[14]=i,this}setPosition(e,i,t){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=i,r[14]=t),this}invert(){let e=this.elements,i=e[0],t=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],u=e[9],h=e[10],f=e[11],p=e[12],b=e[13],m=e[14],g=e[15],v=u*m*l-b*h*l+b*c*f-a*m*f-u*c*g+a*h*g,_=p*h*l-d*m*l-p*c*f+s*m*f+d*c*g-s*h*g,y=d*b*l-p*u*l+p*a*f-s*b*f-d*a*g+s*u*g,C=p*u*c-d*b*c-p*a*h+s*b*h+d*a*m-s*u*m,R=i*v+t*_+r*y+o*C;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let w=1/R;return e[0]=v*w,e[1]=(b*h*o-u*m*o-b*r*f+t*m*f+u*r*g-t*h*g)*w,e[2]=(a*m*o-b*c*o+b*r*l-t*m*l-a*r*g+t*c*g)*w,e[3]=(u*c*o-a*h*o-u*r*l+t*h*l+a*r*f-t*c*f)*w,e[4]=_*w,e[5]=(d*m*o-p*h*o+p*r*f-i*m*f-d*r*g+i*h*g)*w,e[6]=(p*c*o-s*m*o-p*r*l+i*m*l+s*r*g-i*c*g)*w,e[7]=(s*h*o-d*c*o+d*r*l-i*h*l-s*r*f+i*c*f)*w,e[8]=y*w,e[9]=(p*u*o-d*b*o-p*t*f+i*b*f+d*t*g-i*u*g)*w,e[10]=(s*b*o-p*a*o+p*t*l-i*b*l-s*t*g+i*a*g)*w,e[11]=(d*a*o-s*u*o-d*t*l+i*u*l+s*t*f-i*a*f)*w,e[12]=C*w,e[13]=(d*b*r-p*u*r+p*t*h-i*b*h-d*t*m+i*u*m)*w,e[14]=(p*a*r-s*b*r-p*t*c+i*b*c+s*t*m-i*a*m)*w,e[15]=(s*u*r-d*a*r+d*t*c-i*u*c-s*t*h+i*a*h)*w,this}scale(e){let i=this.elements,t=e.x,r=e.y,o=e.z;return i[0]*=t,i[4]*=r,i[8]*=o,i[1]*=t,i[5]*=r,i[9]*=o,i[2]*=t,i[6]*=r,i[10]*=o,i[3]*=t,i[7]*=r,i[11]*=o,this}getMaxScaleOnAxis(){let e=this.elements,i=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],t=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(i,t,r))}makeTranslation(e,i,t){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,i,0,0,1,t,0,0,0,1),this}makeRotationX(e){let i=Math.cos(e),t=Math.sin(e);return this.set(1,0,0,0,0,i,-t,0,0,t,i,0,0,0,0,1),this}makeRotationY(e){let i=Math.cos(e),t=Math.sin(e);return this.set(i,0,t,0,0,1,0,0,-t,0,i,0,0,0,0,1),this}makeRotationZ(e){let i=Math.cos(e),t=Math.sin(e);return this.set(i,-t,0,0,t,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,i){let t=Math.cos(i),r=Math.sin(i),o=1-t,s=e.x,a=e.y,c=e.z,l=o*s,d=o*a;return this.set(l*s+t,l*a-r*c,l*c+r*a,0,l*a+r*c,d*a+t,d*c-r*s,0,l*c-r*a,d*c+r*s,o*c*c+t,0,0,0,0,1),this}makeScale(e,i,t){return this.set(e,0,0,0,0,i,0,0,0,0,t,0,0,0,0,1),this}makeShear(e,i,t,r,o,s){return this.set(1,t,o,0,e,1,s,0,i,r,1,0,0,0,0,1),this}compose(e,i,t){let r=this.elements,o=i._x,s=i._y,a=i._z,c=i._w,l=o+o,d=s+s,u=a+a,h=o*l,f=o*d,p=o*u,b=s*d,m=s*u,g=a*u,v=c*l,_=c*d,y=c*u,C=t.x,R=t.y,w=t.z;return r[0]=(1-(b+g))*C,r[1]=(f+y)*C,r[2]=(p-_)*C,r[3]=0,r[4]=(f-y)*R,r[5]=(1-(h+g))*R,r[6]=(m+v)*R,r[7]=0,r[8]=(p+_)*w,r[9]=(m-v)*w,r[10]=(1-(h+b))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,i,t){let r=this.elements,o=bh.set(r[0],r[1],r[2]).length(),s=bh.set(r[4],r[5],r[6]).length(),a=bh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],as.copy(this);let l=1/o,d=1/s,u=1/a;return as.elements[0]*=l,as.elements[1]*=l,as.elements[2]*=l,as.elements[4]*=d,as.elements[5]*=d,as.elements[6]*=d,as.elements[8]*=u,as.elements[9]*=u,as.elements[10]*=u,i.setFromRotationMatrix(as),t.x=o,t.y=s,t.z=a,this}makePerspective(e,i,t,r,o,s,a=Zs){let c=this.elements,l=2*o/(i-e),d=2*o/(t-r),u=(i+e)/(i-e),h=(t+r)/(t-r),f,p;if(a===Zs)f=-(s+o)/(s-o),p=-2*s*o/(s-o);else if(a===Cp)f=-s/(s-o),p=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=l,c[4]=0,c[8]=u,c[12]=0,c[1]=0,c[5]=d,c[9]=h,c[13]=0,c[2]=0,c[6]=0,c[10]=f,c[14]=p,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,i,t,r,o,s,a=Zs){let c=this.elements,l=1/(i-e),d=1/(t-r),u=1/(s-o),h=(i+e)*l,f=(t+r)*d,p,b;if(a===Zs)p=(s+o)*u,b=-2*u;else if(a===Cp)p=o*u,b=-1*u;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=2*l,c[4]=0,c[8]=0,c[12]=-h,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-f,c[2]=0,c[6]=0,c[10]=b,c[14]=-p,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){let i=this.elements,t=e.elements;for(let r=0;r<16;r++)if(i[r]!==t[r])return!1;return!0}fromArray(e,i=0){for(let t=0;t<16;t++)this.elements[t]=e[t+i];return this}toArray(e=[],i=0){let t=this.elements;return e[i]=t[0],e[i+1]=t[1],e[i+2]=t[2],e[i+3]=t[3],e[i+4]=t[4],e[i+5]=t[5],e[i+6]=t[6],e[i+7]=t[7],e[i+8]=t[8],e[i+9]=t[9],e[i+10]=t[10],e[i+11]=t[11],e[i+12]=t[12],e[i+13]=t[13],e[i+14]=t[14],e[i+15]=t[15],e}},bh=new M,as=new je,Wq=new M(0,0,0),$q=new M(1,1,1),Qc=new M,qv=new M,yo=new M,y2=new je,x2=new Kt,no=(()=>{class n{constructor(i=0,t=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=i,this._y=t,this._z=r,this._order=o}get x(){return this._x}set x(i){this._x=i,this._onChangeCallback()}get y(){return this._y}set y(i){this._y=i,this._onChangeCallback()}get z(){return this._z}set z(i){this._z=i,this._onChangeCallback()}get order(){return this._order}set order(i){this._order=i,this._onChangeCallback()}set(i,t,r,o=this._order){return this._x=i,this._y=t,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(i){return this._x=i._x,this._y=i._y,this._z=i._z,this._order=i._order,this._onChangeCallback(),this}setFromRotationMatrix(i,t=this._order,r=!0){let o=i.elements,s=o[0],a=o[4],c=o[8],l=o[1],d=o[5],u=o[9],h=o[2],f=o[6],p=o[10];switch(t){case"XYZ":this._y=Math.asin(Rn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Rn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(c,p),this._z=Math.atan2(l,d)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Rn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Rn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin(Rn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,d),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(c,p));break;case"XZY":this._z=Math.asin(-Rn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,d),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(i,t,r){return y2.makeRotationFromQuaternion(i),this.setFromRotationMatrix(y2,t,r)}setFromVector3(i,t=this._order){return this.set(i.x,i.y,i.z,t)}reorder(i){return x2.setFromEuler(this),this.setFromQuaternion(x2,i)}equals(i){return i._x===this._x&&i._y===this._y&&i._z===this._z&&i._order===this._order}fromArray(i){return this._x=i[0],this._y=i[1],this._z=i[2],i[3]!==void 0&&(this._order=i[3]),this._onChangeCallback(),this}toArray(i=[],t=0){return i[t]=this._x,i[t+1]=this._y,i[t+2]=this._z,i[t+3]=this._order,i}_onChange(i){return this._onChangeCallback=i,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),zh=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},qq=0,w2=new M,_h=new Kt,Ga=new je,Xv=new M,np=new M,Xq=new M,Yq=new Kt,M2=new M(1,0,0),S2=new M(0,1,0),R2=new M(0,0,1),T2={type:"added"},Zq={type:"removed"},vh={type:"childadded",child:null},PT={type:"childremoved",child:null},Rt=(()=>{class n extends kn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:qq++}),this.uuid=So(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let i=new M,t=new no,r=new Kt,o=new M(1,1,1);function s(){r.setFromEuler(t,!1)}function a(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:i},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new je},normalMatrix:{value:new Yt}}),this.matrix=new je,this.matrixWorld=new je,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new zh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(i){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(i),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(i){return this.quaternion.premultiply(i),this}setRotationFromAxisAngle(i,t){this.quaternion.setFromAxisAngle(i,t)}setRotationFromEuler(i){this.quaternion.setFromEuler(i,!0)}setRotationFromMatrix(i){this.quaternion.setFromRotationMatrix(i)}setRotationFromQuaternion(i){this.quaternion.copy(i)}rotateOnAxis(i,t){return _h.setFromAxisAngle(i,t),this.quaternion.multiply(_h),this}rotateOnWorldAxis(i,t){return _h.setFromAxisAngle(i,t),this.quaternion.premultiply(_h),this}rotateX(i){return this.rotateOnAxis(M2,i)}rotateY(i){return this.rotateOnAxis(S2,i)}rotateZ(i){return this.rotateOnAxis(R2,i)}translateOnAxis(i,t){return w2.copy(i).applyQuaternion(this.quaternion),this.position.add(w2.multiplyScalar(t)),this}translateX(i){return this.translateOnAxis(M2,i)}translateY(i){return this.translateOnAxis(S2,i)}translateZ(i){return this.translateOnAxis(R2,i)}localToWorld(i){return this.updateWorldMatrix(!0,!1),i.applyMatrix4(this.matrixWorld)}worldToLocal(i){return this.updateWorldMatrix(!0,!1),i.applyMatrix4(Ga.copy(this.matrixWorld).invert())}lookAt(i,t,r){i.isVector3?Xv.copy(i):Xv.set(i,t,r);let o=this.parent;this.updateWorldMatrix(!0,!1),np.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ga.lookAt(np,Xv,this.up):Ga.lookAt(Xv,np,this.up),this.quaternion.setFromRotationMatrix(Ga),o&&(Ga.extractRotation(o.matrixWorld),_h.setFromRotationMatrix(Ga),this.quaternion.premultiply(_h.invert()))}add(i){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return i===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",i),this):(i&&i.isObject3D?(i.removeFromParent(),i.parent=this,this.children.push(i),i.dispatchEvent(T2),vh.child=i,this.dispatchEvent(vh),vh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",i),this)}remove(i){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let t=this.children.indexOf(i);return t!==-1&&(i.parent=null,this.children.splice(t,1),i.dispatchEvent(Zq),PT.child=i,this.dispatchEvent(PT),PT.child=null),this}removeFromParent(){let i=this.parent;return i!==null&&i.remove(this),this}clear(){return this.remove(...this.children)}attach(i){return this.updateWorldMatrix(!0,!1),Ga.copy(this.matrixWorld).invert(),i.parent!==null&&(i.parent.updateWorldMatrix(!0,!1),Ga.multiply(i.parent.matrixWorld)),i.applyMatrix4(Ga),i.removeFromParent(),i.parent=this,this.children.push(i),i.updateWorldMatrix(!1,!0),i.dispatchEvent(T2),vh.child=i,this.dispatchEvent(vh),vh.child=null,this}getObjectById(i){return this.getObjectByProperty("id",i)}getObjectByName(i){return this.getObjectByProperty("name",i)}getObjectByProperty(i,t){if(this[i]===t)return this;for(let r=0,o=this.children.length;r<o;r++){let a=this.children[r].getObjectByProperty(i,t);if(a!==void 0)return a}}getObjectsByProperty(i,t,r=[]){this[i]===t&&r.push(this);let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(i,t,r);return r}getWorldPosition(i){return this.updateWorldMatrix(!0,!1),i.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(i){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(np,i,Xq),i}getWorldScale(i){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(np,Yq,i),i}getWorldDirection(i){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return i.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(i){i(this);let t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverse(i)}traverseVisible(i){if(this.visible===!1)return;i(this);let t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverseVisible(i)}traverseAncestors(i){let t=this.parent;t!==null&&(i(t),t.traverseAncestors(i))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(i){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||i)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,i=!0);let t=this.children;for(let r=0,o=t.length;r<o;r++){let s=t[r];(s.matrixWorldAutoUpdate===!0||i===!0)&&s.updateMatrixWorld(i)}}updateWorldMatrix(i,t){let r=this.parent;if(i===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let o=this.children;for(let s=0,a=o.length;s<a;s++){let c=o[s];c.matrixWorldAutoUpdate===!0&&c.updateWorldMatrix(!1,!0)}}}toJSON(i){let t=i===void 0||typeof i=="string",r={};t&&(i={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.visibility=this._visibility,o.active=this._active,o.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),o.maxGeometryCount=this._maxGeometryCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.geometryCount=this._geometryCount,o.matricesTexture=this._matricesTexture.toJSON(i),this.boundingSphere!==null&&(o.boundingSphere={center:o.boundingSphere.center.toArray(),radius:o.boundingSphere.radius}),this.boundingBox!==null&&(o.boundingBox={min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()}));function s(c,l){return c[l.uuid]===void 0&&(c[l.uuid]=l.toJSON(i)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(i).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(i).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(i.geometries,this.geometry);let c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){let l=c.shapes;if(Array.isArray(l))for(let d=0,u=l.length;d<u;d++){let h=l[d];s(i.shapes,h)}else s(i.shapes,l)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(i.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let c=[];for(let l=0,d=this.material.length;l<d;l++)c.push(s(i.materials,this.material[l]));o.material=c}else o.material=s(i.materials,this.material);if(this.children.length>0){o.children=[];for(let c=0;c<this.children.length;c++)o.children.push(this.children[c].toJSON(i).object)}if(this.animations.length>0){o.animations=[];for(let c=0;c<this.animations.length;c++){let l=this.animations[c];o.animations.push(s(i.animations,l))}}if(t){let c=a(i.geometries),l=a(i.materials),d=a(i.textures),u=a(i.images),h=a(i.shapes),f=a(i.skeletons),p=a(i.animations),b=a(i.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),d.length>0&&(r.textures=d),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),b.length>0&&(r.nodes=b)}return r.object=o,r;function a(c){let l=[];for(let d in c){let u=c[d];delete u.metadata,l.push(u)}return l}}clone(i){return new this.constructor().copy(this,i)}copy(i,t=!0){if(this.name=i.name,this.up.copy(i.up),this.position.copy(i.position),this.rotation.order=i.rotation.order,this.quaternion.copy(i.quaternion),this.scale.copy(i.scale),this.matrix.copy(i.matrix),this.matrixWorld.copy(i.matrixWorld),this.matrixAutoUpdate=i.matrixAutoUpdate,this.matrixWorldAutoUpdate=i.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=i.matrixWorldNeedsUpdate,this.layers.mask=i.layers.mask,this.visible=i.visible,this.castShadow=i.castShadow,this.receiveShadow=i.receiveShadow,this.frustumCulled=i.frustumCulled,this.renderOrder=i.renderOrder,this.animations=i.animations.slice(),this.userData=JSON.parse(JSON.stringify(i.userData)),t===!0)for(let r=0;r<i.children.length;r++){let o=i.children[r];this.add(o.clone())}return this}}return n.DEFAULT_UP=new M(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),cs=new M,Wa=new M,kT=new M,$a=new M,yh=new M,xh=new M,C2=new M,FT=new M,jT=new M,OT=new M,Qa=class n{constructor(e=new M,i=new M,t=new M){this.a=e,this.b=i,this.c=t}static getNormal(e,i,t,r){r.subVectors(t,i),cs.subVectors(e,i),r.cross(cs);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,i,t,r,o){cs.subVectors(r,i),Wa.subVectors(t,i),kT.subVectors(e,i);let s=cs.dot(cs),a=cs.dot(Wa),c=cs.dot(kT),l=Wa.dot(Wa),d=Wa.dot(kT),u=s*l-a*a;if(u===0)return o.set(0,0,0),null;let h=1/u,f=(l*c-a*d)*h,p=(s*d-a*c)*h;return o.set(1-f-p,p,f)}static containsPoint(e,i,t,r){return this.getBarycoord(e,i,t,r,$a)===null?!1:$a.x>=0&&$a.y>=0&&$a.x+$a.y<=1}static getInterpolation(e,i,t,r,o,s,a,c){return this.getBarycoord(e,i,t,r,$a)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(o,$a.x),c.addScaledVector(s,$a.y),c.addScaledVector(a,$a.z),c)}static isFrontFacing(e,i,t,r){return cs.subVectors(t,i),Wa.subVectors(e,i),cs.cross(Wa).dot(r)<0}set(e,i,t){return this.a.copy(e),this.b.copy(i),this.c.copy(t),this}setFromPointsAndIndices(e,i,t,r){return this.a.copy(e[i]),this.b.copy(e[t]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,i,t,r){return this.a.fromBufferAttribute(e,i),this.b.fromBufferAttribute(e,t),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return cs.subVectors(this.c,this.b),Wa.subVectors(this.a,this.b),cs.cross(Wa).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,i){return n.getBarycoord(e,this.a,this.b,this.c,i)}getInterpolation(e,i,t,r,o){return n.getInterpolation(e,this.a,this.b,this.c,i,t,r,o)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,i){let t=this.a,r=this.b,o=this.c,s,a;yh.subVectors(r,t),xh.subVectors(o,t),FT.subVectors(e,t);let c=yh.dot(FT),l=xh.dot(FT);if(c<=0&&l<=0)return i.copy(t);jT.subVectors(e,r);let d=yh.dot(jT),u=xh.dot(jT);if(d>=0&&u<=d)return i.copy(r);let h=c*u-d*l;if(h<=0&&c>=0&&d<=0)return s=c/(c-d),i.copy(t).addScaledVector(yh,s);OT.subVectors(e,o);let f=yh.dot(OT),p=xh.dot(OT);if(p>=0&&f<=p)return i.copy(o);let b=f*l-c*p;if(b<=0&&l>=0&&p<=0)return a=l/(l-p),i.copy(t).addScaledVector(xh,a);let m=d*p-f*u;if(m<=0&&u-d>=0&&f-p>=0)return C2.subVectors(o,r),a=(u-d)/(u-d+(f-p)),i.copy(r).addScaledVector(C2,a);let g=1/(m+b+h);return s=b*g,a=h*g,i.copy(t).addScaledVector(yh,s).addScaledVector(xh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},ZL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Kc={h:0,s:0,l:0},Yv={h:0,s:0,l:0};function NT(n,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?n+(e-n)*6*i:i<1/2?e:i<2/3?n+(e-n)*6*(2/3-i):n}var _e=class{constructor(e,i,t){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,i,t)}set(e,i,t){if(i===void 0&&t===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,i,t);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,i=Pn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Di.toWorkingColorSpace(this,i),this}setRGB(e,i,t,r=Di.workingColorSpace){return this.r=e,this.g=i,this.b=t,Di.toWorkingColorSpace(this,r),this}setHSL(e,i,t,r=Di.workingColorSpace){if(e=nD(e,1),i=Rn(i,0,1),t=Rn(t,0,1),i===0)this.r=this.g=this.b=t;else{let o=t<=.5?t*(1+i):t+i-t*i,s=2*t-o;this.r=NT(s,o,e+1/3),this.g=NT(s,o,e),this.b=NT(s,o,e-1/3)}return Di.toWorkingColorSpace(this,r),this}setStyle(e,i=Pn){function t(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return t(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,i);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return t(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,i);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return t(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,i);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,i);if(s===6)return this.setHex(parseInt(o,16),i);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,i);return this}setColorName(e,i=Pn){let t=ZL[e.toLowerCase()];return t!==void 0?this.setHex(t,i):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Lh(e.r),this.g=Lh(e.g),this.b=Lh(e.b),this}copyLinearToSRGB(e){return this.r=ST(e.r),this.g=ST(e.g),this.b=ST(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Pn){return Di.fromWorkingColorSpace(Mr.copy(this),e),Math.round(Rn(Mr.r*255,0,255))*65536+Math.round(Rn(Mr.g*255,0,255))*256+Math.round(Rn(Mr.b*255,0,255))}getHexString(e=Pn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,i=Di.workingColorSpace){Di.fromWorkingColorSpace(Mr.copy(this),i);let t=Mr.r,r=Mr.g,o=Mr.b,s=Math.max(t,r,o),a=Math.min(t,r,o),c,l,d=(a+s)/2;if(a===s)c=0,l=0;else{let u=s-a;switch(l=d<=.5?u/(s+a):u/(2-s-a),s){case t:c=(r-o)/u+(r<o?6:0);break;case r:c=(o-t)/u+2;break;case o:c=(t-r)/u+4;break}c/=6}return e.h=c,e.s=l,e.l=d,e}getRGB(e,i=Di.workingColorSpace){return Di.fromWorkingColorSpace(Mr.copy(this),i),e.r=Mr.r,e.g=Mr.g,e.b=Mr.b,e}getStyle(e=Pn){Di.fromWorkingColorSpace(Mr.copy(this),e);let i=Mr.r,t=Mr.g,r=Mr.b;return e!==Pn?`color(${e} ${i.toFixed(3)} ${t.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(i*255)},${Math.round(t*255)},${Math.round(r*255)})`}offsetHSL(e,i,t){return this.getHSL(Kc),this.setHSL(Kc.h+e,Kc.s+i,Kc.l+t)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,i){return this.r=e.r+i.r,this.g=e.g+i.g,this.b=e.b+i.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,i){return this.r+=(e.r-this.r)*i,this.g+=(e.g-this.g)*i,this.b+=(e.b-this.b)*i,this}lerpColors(e,i,t){return this.r=e.r+(i.r-e.r)*t,this.g=e.g+(i.g-e.g)*t,this.b=e.b+(i.b-e.b)*t,this}lerpHSL(e,i){this.getHSL(Kc),e.getHSL(Yv);let t=pp(Kc.h,Yv.h,i),r=pp(Kc.s,Yv.s,i),o=pp(Kc.l,Yv.l,i);return this.setHSL(t,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let i=this.r,t=this.g,r=this.b,o=e.elements;return this.r=o[0]*i+o[3]*t+o[6]*r,this.g=o[1]*i+o[4]*t+o[7]*r,this.b=o[2]*i+o[5]*t+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,i=0){return this.r=e[i],this.g=e[i+1],this.b=e[i+2],this}toArray(e=[],i=0){return e[i]=this.r,e[i+1]=this.g,e[i+2]=this.b,e}fromBufferAttribute(e,i){return this.r=e.getX(i),this.g=e.getY(i),this.b=e.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Mr=new _e;_e.NAMES=ZL;var Qq=0,dn=class extends kn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Qq++}),this.uuid=So(),this.name="",this.type="Material",this.blending=ds,this.side=us,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Cd,this.blendDst=Ed,this.blendEquation=gr,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new _e(0,0,0),this.blendAlpha=0,this.depthFunc=vp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=NC,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=bd,this.stencilZFail=bd,this.stencilZPass=bd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let i in e){let t=e[i];if(t===void 0){console.warn(`THREE.Material: parameter '${i}' has value of undefined.`);continue}let r=this[i];if(r===void 0){console.warn(`THREE.Material: '${i}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(t):r&&r.isVector3&&t&&t.isVector3?r.copy(t):this[i]=t}}toJSON(e){let i=e===void 0||typeof e=="string";i&&(e={textures:{},images:{}});let t={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.color&&this.color.isColor&&(t.color=this.color.getHex()),this.roughness!==void 0&&(t.roughness=this.roughness),this.metalness!==void 0&&(t.metalness=this.metalness),this.sheen!==void 0&&(t.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(t.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(t.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(t.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(t.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(t.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(t.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(t.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(t.shininess=this.shininess),this.clearcoat!==void 0&&(t.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(t.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(t.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(t.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(t.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,t.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(t.dispersion=this.dispersion),this.iridescence!==void 0&&(t.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(t.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(t.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(t.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(t.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(t.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(t.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(t.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(t.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(t.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(t.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(t.lightMap=this.lightMap.toJSON(e).uuid,t.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(t.aoMap=this.aoMap.toJSON(e).uuid,t.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(t.bumpMap=this.bumpMap.toJSON(e).uuid,t.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(t.normalMap=this.normalMap.toJSON(e).uuid,t.normalMapType=this.normalMapType,t.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(t.displacementMap=this.displacementMap.toJSON(e).uuid,t.displacementScale=this.displacementScale,t.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(t.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(t.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(t.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(t.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(t.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(t.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(t.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(t.combine=this.combine)),this.envMapRotation!==void 0&&(t.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(t.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(t.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(t.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(t.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(t.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(t.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(t.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(t.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(t.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(t.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(t.size=this.size),this.shadowSide!==null&&(t.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(t.sizeAttenuation=this.sizeAttenuation),this.blending!==ds&&(t.blending=this.blending),this.side!==us&&(t.side=this.side),this.vertexColors===!0&&(t.vertexColors=!0),this.opacity<1&&(t.opacity=this.opacity),this.transparent===!0&&(t.transparent=!0),this.blendSrc!==Cd&&(t.blendSrc=this.blendSrc),this.blendDst!==Ed&&(t.blendDst=this.blendDst),this.blendEquation!==gr&&(t.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(t.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(t.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(t.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(t.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(t.blendAlpha=this.blendAlpha),this.depthFunc!==vp&&(t.depthFunc=this.depthFunc),this.depthTest===!1&&(t.depthTest=this.depthTest),this.depthWrite===!1&&(t.depthWrite=this.depthWrite),this.colorWrite===!1&&(t.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(t.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==NC&&(t.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(t.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(t.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==bd&&(t.stencilFail=this.stencilFail),this.stencilZFail!==bd&&(t.stencilZFail=this.stencilZFail),this.stencilZPass!==bd&&(t.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(t.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(t.rotation=this.rotation),this.polygonOffset===!0&&(t.polygonOffset=!0),this.polygonOffsetFactor!==0&&(t.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(t.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(t.linewidth=this.linewidth),this.dashSize!==void 0&&(t.dashSize=this.dashSize),this.gapSize!==void 0&&(t.gapSize=this.gapSize),this.scale!==void 0&&(t.scale=this.scale),this.dithering===!0&&(t.dithering=!0),this.alphaTest>0&&(t.alphaTest=this.alphaTest),this.alphaHash===!0&&(t.alphaHash=!0),this.alphaToCoverage===!0&&(t.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(t.premultipliedAlpha=!0),this.forceSinglePass===!0&&(t.forceSinglePass=!0),this.wireframe===!0&&(t.wireframe=!0),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(t.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(t.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(t.flatShading=!0),this.visible===!1&&(t.visible=!1),this.toneMapped===!1&&(t.toneMapped=!1),this.fog===!1&&(t.fog=!1),Object.keys(this.userData).length>0&&(t.userData=this.userData);function r(o){let s=[];for(let a in o){let c=o[a];delete c.metadata,s.push(c)}return s}if(i){let o=r(e.textures),s=r(e.images);o.length>0&&(t.textures=o),s.length>0&&(t.images=s)}return t}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let i=e.clippingPlanes,t=null;if(i!==null){let r=i.length;t=new Array(r);for(let o=0;o!==r;++o)t[o]=i[o].clone()}return this.clippingPlanes=t,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Ji=class extends dn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new _e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new no,this.combine=Jp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},Ya=Kq();function Kq(){let n=new ArrayBuffer(4),e=new Float32Array(n),i=new Uint32Array(n),t=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){let l=c-127;l<-27?(t[c]=0,t[c|256]=32768,r[c]=24,r[c|256]=24):l<-14?(t[c]=1024>>-l-14,t[c|256]=1024>>-l-14|32768,r[c]=-l-1,r[c|256]=-l-1):l<=15?(t[c]=l+15<<10,t[c|256]=l+15<<10|32768,r[c]=13,r[c|256]=13):l<128?(t[c]=31744,t[c|256]=64512,r[c]=24,r[c|256]=24):(t[c]=31744,t[c|256]=64512,r[c]=13,r[c|256]=13)}let o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let c=1;c<1024;++c){let l=c<<13,d=0;for(;!(l&8388608);)l<<=1,d-=8388608;l&=-8388609,d+=947912704,o[c]=l|d}for(let c=1024;c<2048;++c)o[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)s[c]=c<<23;s[31]=1199570944,s[32]=2147483648;for(let c=33;c<63;++c)s[c]=2147483648+(c-32<<23);s[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(a[c]=1024);return{floatView:e,uint32View:i,baseTable:t,shiftTable:r,mantissaTable:o,exponentTable:s,offsetTable:a}}function eo(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Rn(n,-65504,65504),Ya.floatView[0]=n;let e=Ya.uint32View[0],i=e>>23&511;return Ya.baseTable[i]+((e&8388607)>>Ya.shiftTable[i])}function fp(n){let e=n>>10;return Ya.uint32View[0]=Ya.mantissaTable[Ya.offsetTable[e]+(n&1023)]+Ya.exponentTable[e],Ya.floatView[0]}var Jq={toHalfFloat:eo,fromHalfFloat:fp},Gn=new M,Zv=new z,di=class{constructor(e,i,t=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=i,this.count=e!==void 0?e.length/i:0,this.normalized=t,this.usage=Tp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Rr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return YL("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,i){this.updateRanges.push({start:e,count:i})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,i,t){e*=this.itemSize,t*=i.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=i.array[t+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let i=0,t=this.count;i<t;i++)Zv.fromBufferAttribute(this,i),Zv.applyMatrix3(e),this.setXY(i,Zv.x,Zv.y);else if(this.itemSize===3)for(let i=0,t=this.count;i<t;i++)Gn.fromBufferAttribute(this,i),Gn.applyMatrix3(e),this.setXYZ(i,Gn.x,Gn.y,Gn.z);return this}applyMatrix4(e){for(let i=0,t=this.count;i<t;i++)Gn.fromBufferAttribute(this,i),Gn.applyMatrix4(e),this.setXYZ(i,Gn.x,Gn.y,Gn.z);return this}applyNormalMatrix(e){for(let i=0,t=this.count;i<t;i++)Gn.fromBufferAttribute(this,i),Gn.applyNormalMatrix(e),this.setXYZ(i,Gn.x,Gn.y,Gn.z);return this}transformDirection(e){for(let i=0,t=this.count;i<t;i++)Gn.fromBufferAttribute(this,i),Gn.transformDirection(e),this.setXYZ(i,Gn.x,Gn.y,Gn.z);return this}set(e,i=0){return this.array.set(e,i),this}getComponent(e,i){let t=this.array[e*this.itemSize+i];return this.normalized&&(t=zr(t,this.array)),t}setComponent(e,i,t){return this.normalized&&(t=Zt(t,this.array)),this.array[e*this.itemSize+i]=t,this}getX(e){let i=this.array[e*this.itemSize];return this.normalized&&(i=zr(i,this.array)),i}setX(e,i){return this.normalized&&(i=Zt(i,this.array)),this.array[e*this.itemSize]=i,this}getY(e){let i=this.array[e*this.itemSize+1];return this.normalized&&(i=zr(i,this.array)),i}setY(e,i){return this.normalized&&(i=Zt(i,this.array)),this.array[e*this.itemSize+1]=i,this}getZ(e){let i=this.array[e*this.itemSize+2];return this.normalized&&(i=zr(i,this.array)),i}setZ(e,i){return this.normalized&&(i=Zt(i,this.array)),this.array[e*this.itemSize+2]=i,this}getW(e){let i=this.array[e*this.itemSize+3];return this.normalized&&(i=zr(i,this.array)),i}setW(e,i){return this.normalized&&(i=Zt(i,this.array)),this.array[e*this.itemSize+3]=i,this}setXY(e,i,t){return e*=this.itemSize,this.normalized&&(i=Zt(i,this.array),t=Zt(t,this.array)),this.array[e+0]=i,this.array[e+1]=t,this}setXYZ(e,i,t,r){return e*=this.itemSize,this.normalized&&(i=Zt(i,this.array),t=Zt(t,this.array),r=Zt(r,this.array)),this.array[e+0]=i,this.array[e+1]=t,this.array[e+2]=r,this}setXYZW(e,i,t,r,o){return e*=this.itemSize,this.normalized&&(i=Zt(i,this.array),t=Zt(t,this.array),r=Zt(r,this.array),o=Zt(o,this.array)),this.array[e+0]=i,this.array[e+1]=t,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Tp&&(e.usage=this.usage),e}},VC=class extends di{constructor(e,i,t){super(new Int8Array(e),i,t)}},zC=class extends di{constructor(e,i,t){super(new Uint8Array(e),i,t)}},HC=class extends di{constructor(e,i,t){super(new Uint8ClampedArray(e),i,t)}},GC=class extends di{constructor(e,i,t){super(new Int16Array(e),i,t)}},Ap=class extends di{constructor(e,i,t){super(new Uint16Array(e),i,t)}},WC=class extends di{constructor(e,i,t){super(new Int32Array(e),i,t)}},Ip=class extends di{constructor(e,i,t){super(new Uint32Array(e),i,t)}},$C=class extends di{constructor(e,i,t){super(new Uint16Array(e),i,t),this.isFloat16BufferAttribute=!0}getX(e){let i=fp(this.array[e*this.itemSize]);return this.normalized&&(i=zr(i,this.array)),i}setX(e,i){return this.normalized&&(i=Zt(i,this.array)),this.array[e*this.itemSize]=eo(i),this}getY(e){let i=fp(this.array[e*this.itemSize+1]);return this.normalized&&(i=zr(i,this.array)),i}setY(e,i){return this.normalized&&(i=Zt(i,this.array)),this.array[e*this.itemSize+1]=eo(i),this}getZ(e){let i=fp(this.array[e*this.itemSize+2]);return this.normalized&&(i=zr(i,this.array)),i}setZ(e,i){return this.normalized&&(i=Zt(i,this.array)),this.array[e*this.itemSize+2]=eo(i),this}getW(e){let i=fp(this.array[e*this.itemSize+3]);return this.normalized&&(i=zr(i,this.array)),i}setW(e,i){return this.normalized&&(i=Zt(i,this.array)),this.array[e*this.itemSize+3]=eo(i),this}setXY(e,i,t){return e*=this.itemSize,this.normalized&&(i=Zt(i,this.array),t=Zt(t,this.array)),this.array[e+0]=eo(i),this.array[e+1]=eo(t),this}setXYZ(e,i,t,r){return e*=this.itemSize,this.normalized&&(i=Zt(i,this.array),t=Zt(t,this.array),r=Zt(r,this.array)),this.array[e+0]=eo(i),this.array[e+1]=eo(t),this.array[e+2]=eo(r),this}setXYZW(e,i,t,r,o){return e*=this.itemSize,this.normalized&&(i=Zt(i,this.array),t=Zt(t,this.array),r=Zt(r,this.array),o=Zt(o,this.array)),this.array[e+0]=eo(i),this.array[e+1]=eo(t),this.array[e+2]=eo(r),this.array[e+3]=eo(o),this}},We=class extends di{constructor(e,i,t){super(new Float32Array(e),i,t)}},eX=0,Ho=new je,LT=new Rt,wh=new M,xo=new vn,rp=new vn,or=new M,ft=class n extends kn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:eX++}),this.uuid=So(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(qL(e)?Ip:Ap)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,i){return this.attributes[e]=i,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,i,t=0){this.groups.push({start:e,count:i,materialIndex:t})}clearGroups(){this.groups=[]}setDrawRange(e,i){this.drawRange.start=e,this.drawRange.count=i}applyMatrix4(e){let i=this.attributes.position;i!==void 0&&(i.applyMatrix4(e),i.needsUpdate=!0);let t=this.attributes.normal;if(t!==void 0){let o=new Yt().getNormalMatrix(e);t.applyNormalMatrix(o),t.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ho.makeRotationFromQuaternion(e),this.applyMatrix4(Ho),this}rotateX(e){return Ho.makeRotationX(e),this.applyMatrix4(Ho),this}rotateY(e){return Ho.makeRotationY(e),this.applyMatrix4(Ho),this}rotateZ(e){return Ho.makeRotationZ(e),this.applyMatrix4(Ho),this}translate(e,i,t){return Ho.makeTranslation(e,i,t),this.applyMatrix4(Ho),this}scale(e,i,t){return Ho.makeScale(e,i,t),this.applyMatrix4(Ho),this}lookAt(e){return LT.lookAt(e),LT.updateMatrix(),this.applyMatrix4(LT.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(wh).negate(),this.translate(wh.x,wh.y,wh.z),this}setFromPoints(e){let i=[];for(let t=0,r=e.length;t<r;t++){let o=e[t];i.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new We(i,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vn);let e=this.attributes.position,i=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new M(-1/0,-1/0,-1/0),new M(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),i)for(let t=0,r=i.length;t<r;t++){let o=i[t];xo.setFromBufferAttribute(o),this.morphTargetsRelative?(or.addVectors(this.boundingBox.min,xo.min),this.boundingBox.expandByPoint(or),or.addVectors(this.boundingBox.max,xo.max),this.boundingBox.expandByPoint(or)):(this.boundingBox.expandByPoint(xo.min),this.boundingBox.expandByPoint(xo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Tn);let e=this.attributes.position,i=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new M,1/0);return}if(e){let t=this.boundingSphere.center;if(xo.setFromBufferAttribute(e),i)for(let o=0,s=i.length;o<s;o++){let a=i[o];rp.setFromBufferAttribute(a),this.morphTargetsRelative?(or.addVectors(xo.min,rp.min),xo.expandByPoint(or),or.addVectors(xo.max,rp.max),xo.expandByPoint(or)):(xo.expandByPoint(rp.min),xo.expandByPoint(rp.max))}xo.getCenter(t);let r=0;for(let o=0,s=e.count;o<s;o++)or.fromBufferAttribute(e,o),r=Math.max(r,t.distanceToSquared(or));if(i)for(let o=0,s=i.length;o<s;o++){let a=i[o],c=this.morphTargetsRelative;for(let l=0,d=a.count;l<d;l++)or.fromBufferAttribute(a,l),c&&(wh.fromBufferAttribute(e,l),or.add(wh)),r=Math.max(r,t.distanceToSquared(or))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,i=this.attributes;if(e===null||i.position===void 0||i.normal===void 0||i.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let t=i.position,r=i.normal,o=i.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new di(new Float32Array(4*t.count),4));let s=this.getAttribute("tangent"),a=[],c=[];for(let A=0;A<t.count;A++)a[A]=new M,c[A]=new M;let l=new M,d=new M,u=new M,h=new z,f=new z,p=new z,b=new M,m=new M;function g(A,S,x){l.fromBufferAttribute(t,A),d.fromBufferAttribute(t,S),u.fromBufferAttribute(t,x),h.fromBufferAttribute(o,A),f.fromBufferAttribute(o,S),p.fromBufferAttribute(o,x),d.sub(l),u.sub(l),f.sub(h),p.sub(h);let F=1/(f.x*p.y-p.x*f.y);isFinite(F)&&(b.copy(d).multiplyScalar(p.y).addScaledVector(u,-f.y).multiplyScalar(F),m.copy(u).multiplyScalar(f.x).addScaledVector(d,-p.x).multiplyScalar(F),a[A].add(b),a[S].add(b),a[x].add(b),c[A].add(m),c[S].add(m),c[x].add(m))}let v=this.groups;v.length===0&&(v=[{start:0,count:e.count}]);for(let A=0,S=v.length;A<S;++A){let x=v[A],F=x.start,V=x.count;for(let O=F,K=F+V;O<K;O+=3)g(e.getX(O+0),e.getX(O+1),e.getX(O+2))}let _=new M,y=new M,C=new M,R=new M;function w(A){C.fromBufferAttribute(r,A),R.copy(C);let S=a[A];_.copy(S),_.sub(C.multiplyScalar(C.dot(S))).normalize(),y.crossVectors(R,S);let F=y.dot(c[A])<0?-1:1;s.setXYZW(A,_.x,_.y,_.z,F)}for(let A=0,S=v.length;A<S;++A){let x=v[A],F=x.start,V=x.count;for(let O=F,K=F+V;O<K;O+=3)w(e.getX(O+0)),w(e.getX(O+1)),w(e.getX(O+2))}}computeVertexNormals(){let e=this.index,i=this.getAttribute("position");if(i!==void 0){let t=this.getAttribute("normal");if(t===void 0)t=new di(new Float32Array(i.count*3),3),this.setAttribute("normal",t);else for(let h=0,f=t.count;h<f;h++)t.setXYZ(h,0,0,0);let r=new M,o=new M,s=new M,a=new M,c=new M,l=new M,d=new M,u=new M;if(e)for(let h=0,f=e.count;h<f;h+=3){let p=e.getX(h+0),b=e.getX(h+1),m=e.getX(h+2);r.fromBufferAttribute(i,p),o.fromBufferAttribute(i,b),s.fromBufferAttribute(i,m),d.subVectors(s,o),u.subVectors(r,o),d.cross(u),a.fromBufferAttribute(t,p),c.fromBufferAttribute(t,b),l.fromBufferAttribute(t,m),a.add(d),c.add(d),l.add(d),t.setXYZ(p,a.x,a.y,a.z),t.setXYZ(b,c.x,c.y,c.z),t.setXYZ(m,l.x,l.y,l.z)}else for(let h=0,f=i.count;h<f;h+=3)r.fromBufferAttribute(i,h+0),o.fromBufferAttribute(i,h+1),s.fromBufferAttribute(i,h+2),d.subVectors(s,o),u.subVectors(r,o),d.cross(u),t.setXYZ(h+0,d.x,d.y,d.z),t.setXYZ(h+1,d.x,d.y,d.z),t.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),t.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let i=0,t=e.count;i<t;i++)or.fromBufferAttribute(e,i),or.normalize(),e.setXYZ(i,or.x,or.y,or.z)}toNonIndexed(){function e(a,c){let l=a.array,d=a.itemSize,u=a.normalized,h=new l.constructor(c.length*d),f=0,p=0;for(let b=0,m=c.length;b<m;b++){a.isInterleavedBufferAttribute?f=c[b]*a.data.stride+a.offset:f=c[b]*d;for(let g=0;g<d;g++)h[p++]=l[f++]}return new di(h,d,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let i=new n,t=this.index.array,r=this.attributes;for(let a in r){let c=r[a],l=e(c,t);i.setAttribute(a,l)}let o=this.morphAttributes;for(let a in o){let c=[],l=o[a];for(let d=0,u=l.length;d<u;d++){let h=l[d],f=e(h,t);c.push(f)}i.morphAttributes[a]=c}i.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,c=s.length;a<c;a++){let l=s[a];i.addGroup(l.start,l.count,l.materialIndex)}return i}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let c=this.parameters;for(let l in c)c[l]!==void 0&&(e[l]=c[l]);return e}e.data={attributes:{}};let i=this.index;i!==null&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});let t=this.attributes;for(let c in t){let l=t[c];e.data.attributes[c]=l.toJSON(e.data)}let r={},o=!1;for(let c in this.morphAttributes){let l=this.morphAttributes[c],d=[];for(let u=0,h=l.length;u<h;u++){let f=l[u];d.push(f.toJSON(e.data))}d.length>0&&(r[c]=d,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let i={};this.name=e.name;let t=e.index;t!==null&&this.setIndex(t.clone(i));let r=e.attributes;for(let l in r){let d=r[l];this.setAttribute(l,d.clone(i))}let o=e.morphAttributes;for(let l in o){let d=[],u=o[l];for(let h=0,f=u.length;h<f;h++)d.push(u[h].clone(i));this.morphAttributes[l]=d}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let l=0,d=s.length;l<d;l++){let u=s[l];this.addGroup(u.start,u.count,u.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},E2=new je,ad=new Js,Qv=new Tn,D2=new M,Mh=new M,Sh=new M,Rh=new M,BT=new M,Kv=new M,Jv=new z,e0=new z,t0=new z,A2=new M,I2=new M,P2=new M,i0=new M,n0=new M,Le=class extends Rt{constructor(e=new ft,i=new Ji){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=i,this.updateMorphTargets()}copy(e,i){return super.copy(e,i),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let i=this.geometry.morphAttributes,t=Object.keys(i);if(t.length>0){let r=i[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,i){let t=this.geometry,r=t.attributes.position,o=t.morphAttributes.position,s=t.morphTargetsRelative;i.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(o&&a){Kv.set(0,0,0);for(let c=0,l=o.length;c<l;c++){let d=a[c],u=o[c];d!==0&&(BT.fromBufferAttribute(u,e),s?Kv.addScaledVector(BT,d):Kv.addScaledVector(BT.sub(i),d))}i.add(Kv)}return i}raycast(e,i){let t=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(t.boundingSphere===null&&t.computeBoundingSphere(),Qv.copy(t.boundingSphere),Qv.applyMatrix4(o),ad.copy(e.ray).recast(e.near),!(Qv.containsPoint(ad.origin)===!1&&(ad.intersectSphere(Qv,D2)===null||ad.origin.distanceToSquared(D2)>(e.far-e.near)**2))&&(E2.copy(o).invert(),ad.copy(e.ray).applyMatrix4(E2),!(t.boundingBox!==null&&ad.intersectsBox(t.boundingBox)===!1)&&this._computeIntersections(e,i,ad)))}_computeIntersections(e,i,t){let r,o=this.geometry,s=this.material,a=o.index,c=o.attributes.position,l=o.attributes.uv,d=o.attributes.uv1,u=o.attributes.normal,h=o.groups,f=o.drawRange;if(a!==null)if(Array.isArray(s))for(let p=0,b=h.length;p<b;p++){let m=h[p],g=s[m.materialIndex],v=Math.max(m.start,f.start),_=Math.min(a.count,Math.min(m.start+m.count,f.start+f.count));for(let y=v,C=_;y<C;y+=3){let R=a.getX(y),w=a.getX(y+1),A=a.getX(y+2);r=r0(this,g,e,t,l,d,u,R,w,A),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=m.materialIndex,i.push(r))}}else{let p=Math.max(0,f.start),b=Math.min(a.count,f.start+f.count);for(let m=p,g=b;m<g;m+=3){let v=a.getX(m),_=a.getX(m+1),y=a.getX(m+2);r=r0(this,s,e,t,l,d,u,v,_,y),r&&(r.faceIndex=Math.floor(m/3),i.push(r))}}else if(c!==void 0)if(Array.isArray(s))for(let p=0,b=h.length;p<b;p++){let m=h[p],g=s[m.materialIndex],v=Math.max(m.start,f.start),_=Math.min(c.count,Math.min(m.start+m.count,f.start+f.count));for(let y=v,C=_;y<C;y+=3){let R=y,w=y+1,A=y+2;r=r0(this,g,e,t,l,d,u,R,w,A),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=m.materialIndex,i.push(r))}}else{let p=Math.max(0,f.start),b=Math.min(c.count,f.start+f.count);for(let m=p,g=b;m<g;m+=3){let v=m,_=m+1,y=m+2;r=r0(this,s,e,t,l,d,u,v,_,y),r&&(r.faceIndex=Math.floor(m/3),i.push(r))}}}};function tX(n,e,i,t,r,o,s,a){let c;if(e.side===Hr?c=t.intersectTriangle(s,o,r,!0,a):c=t.intersectTriangle(r,o,s,e.side===us,a),c===null)return null;n0.copy(a),n0.applyMatrix4(n.matrixWorld);let l=i.ray.origin.distanceTo(n0);return l<i.near||l>i.far?null:{distance:l,point:n0.clone(),object:n}}function r0(n,e,i,t,r,o,s,a,c,l){n.getVertexPosition(a,Mh),n.getVertexPosition(c,Sh),n.getVertexPosition(l,Rh);let d=tX(n,e,i,t,Mh,Sh,Rh,i0);if(d){r&&(Jv.fromBufferAttribute(r,a),e0.fromBufferAttribute(r,c),t0.fromBufferAttribute(r,l),d.uv=Qa.getInterpolation(i0,Mh,Sh,Rh,Jv,e0,t0,new z)),o&&(Jv.fromBufferAttribute(o,a),e0.fromBufferAttribute(o,c),t0.fromBufferAttribute(o,l),d.uv1=Qa.getInterpolation(i0,Mh,Sh,Rh,Jv,e0,t0,new z)),s&&(A2.fromBufferAttribute(s,a),I2.fromBufferAttribute(s,c),P2.fromBufferAttribute(s,l),d.normal=Qa.getInterpolation(i0,Mh,Sh,Rh,A2,I2,P2,new M),d.normal.dot(t.direction)>0&&d.normal.multiplyScalar(-1));let u={a,b:c,c:l,normal:new M,materialIndex:0};Qa.getNormal(Mh,Sh,Rh,u.normal),d.face=u}return d}var Xi=class n extends ft{constructor(e=1,i=1,t=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:i,depth:t,widthSegments:r,heightSegments:o,depthSegments:s};let a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let c=[],l=[],d=[],u=[],h=0,f=0;p("z","y","x",-1,-1,t,i,e,s,o,0),p("z","y","x",1,-1,t,i,-e,s,o,1),p("x","z","y",1,1,e,t,i,r,s,2),p("x","z","y",1,-1,e,t,-i,r,s,3),p("x","y","z",1,-1,e,i,t,r,o,4),p("x","y","z",-1,-1,e,i,-t,r,o,5),this.setIndex(c),this.setAttribute("position",new We(l,3)),this.setAttribute("normal",new We(d,3)),this.setAttribute("uv",new We(u,2));function p(b,m,g,v,_,y,C,R,w,A,S){let x=y/w,F=C/A,V=y/2,O=C/2,K=R/2,ne=w+1,G=A+1,$=0,U=0,Z=new M;for(let me=0;me<G;me++){let ke=me*F-O;for(let $e=0;$e<ne;$e++){let vt=$e*x-V;Z[b]=vt*v,Z[m]=ke*_,Z[g]=K,l.push(Z.x,Z.y,Z.z),Z[b]=0,Z[m]=0,Z[g]=R>0?1:-1,d.push(Z.x,Z.y,Z.z),u.push($e/w),u.push(1-me/A),$+=1}}for(let me=0;me<A;me++)for(let ke=0;ke<w;ke++){let $e=h+ke+ne*me,vt=h+ke+ne*(me+1),Y=h+(ke+1)+ne*(me+1),Ae=h+(ke+1)+ne*me;c.push($e,vt,Ae),c.push(vt,Y,Ae),U+=6}a.addGroup(f,U,S),f+=U,h+=$}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Hh(n){let e={};for(let i in n){e[i]={};for(let t in n[i]){let r=n[i][t];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[i][t]=null):e[i][t]=r.clone():Array.isArray(r)?e[i][t]=r.slice():e[i][t]=r}}return e}function Vr(n){let e={};for(let i=0;i<n.length;i++){let t=Hh(n[i]);for(let r in t)e[r]=t[r]}return e}function iX(n){let e=[];for(let i=0;i<n.length;i++)e.push(n[i].clone());return e}function QL(n){let e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Di.workingColorSpace}var Li={clone:Hh,merge:Vr},nX=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,rX=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Dt=class extends dn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=nX,this.fragmentShader=rX,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Hh(e.uniforms),this.uniformsGroups=iX(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let i=super.toJSON(e);i.glslVersion=this.glslVersion,i.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?i.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?i.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?i.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?i.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?i.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?i.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?i.uniforms[r]={type:"m4",value:s.toArray()}:i.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader,i.lights=this.lights,i.clipping=this.clipping;let t={};for(let r in this.extensions)this.extensions[r]===!0&&(t[r]=!0);return Object.keys(t).length>0&&(i.extensions=t),i}},ol=class extends Rt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new je,this.projectionMatrix=new je,this.projectionMatrixInverse=new je,this.coordinateSystem=Zs}copy(e,i){return super.copy(e,i),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,i){super.updateWorldMatrix(e,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Jc=new M,k2=new z,F2=new z,Ki=class extends ol{constructor(e=50,i=1,t=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=t,this.far=r,this.focus=10,this.aspect=i,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,i){return super.copy(e,i),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let i=.5*this.getFilmHeight()/e;this.fov=Uh*2*Math.atan(i),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(Rd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Uh*2*Math.atan(Math.tan(Rd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,i,t){Jc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Jc.x,Jc.y).multiplyScalar(-e/Jc.z),Jc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Jc.x,Jc.y).multiplyScalar(-e/Jc.z)}getViewSize(e,i){return this.getViewBounds(e,k2,F2),i.subVectors(F2,k2)}setViewOffset(e,i,t,r,o,s){this.aspect=e/i,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=i,this.view.offsetX=t,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,i=e*Math.tan(Rd*.5*this.fov)/this.zoom,t=2*i,r=this.aspect*t,o=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let c=s.fullWidth,l=s.fullHeight;o+=s.offsetX*r/c,i-=s.offsetY*t/l,r*=s.width/c,t*=s.height/l}let a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,i,i-t,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let i=super.toJSON(e);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,this.view!==null&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}},Th=-90,Ch=1,z0=class extends Rt{constructor(e,i,t){super(),this.type="CubeCamera",this.renderTarget=t,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new Ki(Th,Ch,e,i);r.layers=this.layers,this.add(r);let o=new Ki(Th,Ch,e,i);o.layers=this.layers,this.add(o);let s=new Ki(Th,Ch,e,i);s.layers=this.layers,this.add(s);let a=new Ki(Th,Ch,e,i);a.layers=this.layers,this.add(a);let c=new Ki(Th,Ch,e,i);c.layers=this.layers,this.add(c);let l=new Ki(Th,Ch,e,i);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){let e=this.coordinateSystem,i=this.children.concat(),[t,r,o,s,a,c]=i;for(let l of i)this.remove(l);if(e===Zs)t.up.set(0,1,0),t.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Cp)t.up.set(0,-1,0),t.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let l of i)this.add(l),l.updateMatrixWorld()}update(e,i){this.parent===null&&this.updateMatrixWorld();let{renderTarget:t,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[o,s,a,c,l,d]=this.children,u=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;let b=t.texture.generateMipmaps;t.texture.generateMipmaps=!1,e.setRenderTarget(t,0,r),e.render(i,o),e.setRenderTarget(t,1,r),e.render(i,s),e.setRenderTarget(t,2,r),e.render(i,a),e.setRenderTarget(t,3,r),e.render(i,c),e.setRenderTarget(t,4,r),e.render(i,l),t.texture.generateMipmaps=b,e.setRenderTarget(t,5,r),e.render(i,d),e.setRenderTarget(u,h,f),e.xr.enabled=p,t.texture.needsPMREMUpdate=!0}},Pd=class extends yn{constructor(e,i,t,r,o,s,a,c,l,d){e=e!==void 0?e:[],i=i!==void 0?i:tc,super(e,i,t,r,o,s,a,c,l,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},H0=class extends oi{constructor(e=1,i={}){super(e,e,i),this.isWebGLCubeRenderTarget=!0;let t={width:e,height:e,depth:1},r=[t,t,t,t,t,t];this.texture=new Pd(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:bn}fromEquirectangularTexture(e,i){this.texture.type=i.type,this.texture.colorSpace=i.colorSpace,this.texture.generateMipmaps=i.generateMipmaps,this.texture.minFilter=i.minFilter,this.texture.magFilter=i.magFilter;let t={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Xi(5,5,5),o=new Dt({name:"CubemapFromEquirect",uniforms:Hh(t.uniforms),vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,side:Hr,blending:Qt});o.uniforms.tEquirect.value=i;let s=new Le(r,o),a=i.minFilter;return i.minFilter===wo&&(i.minFilter=bn),new z0(1,10,this).update(e,s),i.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,i,t,r){let o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(i,t,r);e.setRenderTarget(o)}},UT=new M,oX=new M,sX=new Yt,sr=class{constructor(e=new M(1,0,0),i=0){this.isPlane=!0,this.normal=e,this.constant=i}set(e,i){return this.normal.copy(e),this.constant=i,this}setComponents(e,i,t,r){return this.normal.set(e,i,t),this.constant=r,this}setFromNormalAndCoplanarPoint(e,i){return this.normal.copy(e),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(e,i,t){let r=UT.subVectors(t,i).cross(oX.subVectors(e,i)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,i){return i.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,i){let t=e.delta(UT),r=this.normal.dot(t);if(r===0)return this.distanceToPoint(e.start)===0?i.copy(e.start):null;let o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:i.copy(e.start).addScaledVector(t,o)}intersectsLine(e){let i=this.distanceToPoint(e.start),t=this.distanceToPoint(e.end);return i<0&&t>0||t<0&&i>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,i){let t=i||sX.getNormalMatrix(e),r=this.coplanarPoint(UT).applyMatrix4(e),o=this.normal.applyMatrix3(t).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},cd=new Tn,o0=new M,kd=class{constructor(e=new sr,i=new sr,t=new sr,r=new sr,o=new sr,s=new sr){this.planes=[e,i,t,r,o,s]}set(e,i,t,r,o,s){let a=this.planes;return a[0].copy(e),a[1].copy(i),a[2].copy(t),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(e){let i=this.planes;for(let t=0;t<6;t++)i[t].copy(e.planes[t]);return this}setFromProjectionMatrix(e,i=Zs){let t=this.planes,r=e.elements,o=r[0],s=r[1],a=r[2],c=r[3],l=r[4],d=r[5],u=r[6],h=r[7],f=r[8],p=r[9],b=r[10],m=r[11],g=r[12],v=r[13],_=r[14],y=r[15];if(t[0].setComponents(c-o,h-l,m-f,y-g).normalize(),t[1].setComponents(c+o,h+l,m+f,y+g).normalize(),t[2].setComponents(c+s,h+d,m+p,y+v).normalize(),t[3].setComponents(c-s,h-d,m-p,y-v).normalize(),t[4].setComponents(c-a,h-u,m-b,y-_).normalize(),i===Zs)t[5].setComponents(c+a,h+u,m+b,y+_).normalize();else if(i===Cp)t[5].setComponents(a,u,b,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+i);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),cd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let i=e.geometry;i.boundingSphere===null&&i.computeBoundingSphere(),cd.copy(i.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(cd)}intersectsSprite(e){return cd.center.set(0,0,0),cd.radius=.7071067811865476,cd.applyMatrix4(e.matrixWorld),this.intersectsSphere(cd)}intersectsSphere(e){let i=this.planes,t=e.center,r=-e.radius;for(let o=0;o<6;o++)if(i[o].distanceToPoint(t)<r)return!1;return!0}intersectsBox(e){let i=this.planes;for(let t=0;t<6;t++){let r=i[t];if(o0.x=r.normal.x>0?e.max.x:e.min.x,o0.y=r.normal.y>0?e.max.y:e.min.y,o0.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(o0)<0)return!1}return!0}containsPoint(e){let i=this.planes;for(let t=0;t<6;t++)if(i[t].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function KL(){let n=null,e=!1,i=null,t=null;function r(o,s){i(o,s),t=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&i!==null&&(t=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(t),e=!1},setAnimationLoop:function(o){i=o},setContext:function(o){n=o}}}function aX(n){let e=new WeakMap;function i(a,c){let l=a.array,d=a.usage,u=l.byteLength,h=n.createBuffer();n.bindBuffer(c,h),n.bufferData(c,l,d),a.onUploadCallback();let f;if(l instanceof Float32Array)f=n.FLOAT;else if(l instanceof Uint16Array)a.isFloat16BufferAttribute?f=n.HALF_FLOAT:f=n.UNSIGNED_SHORT;else if(l instanceof Int16Array)f=n.SHORT;else if(l instanceof Uint32Array)f=n.UNSIGNED_INT;else if(l instanceof Int32Array)f=n.INT;else if(l instanceof Int8Array)f=n.BYTE;else if(l instanceof Uint8Array)f=n.UNSIGNED_BYTE;else if(l instanceof Uint8ClampedArray)f=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);return{buffer:h,type:f,bytesPerElement:l.BYTES_PER_ELEMENT,version:a.version,size:u}}function t(a,c,l){let d=c.array,u=c._updateRange,h=c.updateRanges;if(n.bindBuffer(l,a),u.count===-1&&h.length===0&&n.bufferSubData(l,0,d),h.length!==0){for(let f=0,p=h.length;f<p;f++){let b=h[f];n.bufferSubData(l,b.start*d.BYTES_PER_ELEMENT,d,b.start,b.count)}c.clearUpdateRanges()}u.count!==-1&&(n.bufferSubData(l,u.offset*d.BYTES_PER_ELEMENT,d,u.offset,u.count),u.count=-1),c.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);let c=e.get(a);c&&(n.deleteBuffer(c.buffer),e.delete(a))}function s(a,c){if(a.isGLBufferAttribute){let d=e.get(a);(!d||d.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}a.isInterleavedBufferAttribute&&(a=a.data);let l=e.get(a);if(l===void 0)e.set(a,i(a,c));else if(l.version<a.version){if(l.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");t(l.buffer,a,c),l.version=a.version}}return{get:r,remove:o,update:s}}var ea=class n extends ft{constructor(e=1,i=1,t=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:i,widthSegments:t,heightSegments:r};let o=e/2,s=i/2,a=Math.floor(t),c=Math.floor(r),l=a+1,d=c+1,u=e/a,h=i/c,f=[],p=[],b=[],m=[];for(let g=0;g<d;g++){let v=g*h-s;for(let _=0;_<l;_++){let y=_*u-o;p.push(y,-v,0),b.push(0,0,1),m.push(_/a),m.push(1-g/c)}}for(let g=0;g<c;g++)for(let v=0;v<a;v++){let _=v+l*g,y=v+l*(g+1),C=v+1+l*(g+1),R=v+1+l*g;f.push(_,y,R),f.push(y,C,R)}this.setIndex(f),this.setAttribute("position",new We(p,3)),this.setAttribute("normal",new We(b,3)),this.setAttribute("uv",new We(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}},cX=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,lX=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,dX=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,uX=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,hX=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,fX=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,mX=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,pX=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,gX=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,bX=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,_X=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,vX=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,yX=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,xX=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,wX=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,MX=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,SX=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,RX=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,TX=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,CX=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,EX=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,DX=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,AX=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,IX=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,PX=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,kX=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,FX=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,jX=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,OX=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,NX=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,LX="gl_FragColor = linearToOutputTexel( gl_FragColor );",BX=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,UX=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,VX=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,zX=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,HX=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,GX=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,WX=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,$X=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,qX=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,XX=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,YX=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,ZX=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,QX=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,KX=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,JX=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,eY=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,tY=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,iY=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,nY=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,rY=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,oY=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,sY=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,aY=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,cY=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lY=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,dY=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,uY=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,hY=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,fY=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,mY=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,pY=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,gY=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,bY=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_Y=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,vY=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,yY=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,xY=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,wY=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,MY=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,SY=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,RY=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,TY=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,CY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,EY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,DY=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,AY=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,IY=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,PY=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,kY=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,FY=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,jY=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,OY=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,NY=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,LY=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,BY=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,UY=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,VY=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,zY=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,HY=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,GY=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,WY=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,$Y=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,qY=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,XY=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,YY=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,ZY=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,QY=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,KY=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,JY=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,eZ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,tZ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,iZ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,nZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,rZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,oZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,sZ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,aZ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cZ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,lZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,dZ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,uZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,hZ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fZ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,mZ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,pZ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,gZ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,bZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,_Z=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vZ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,yZ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,xZ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,wZ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MZ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,SZ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,RZ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,TZ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CZ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,EZ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,DZ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AZ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IZ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,PZ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kZ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FZ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jZ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,OZ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,NZ=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,LZ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,BZ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,UZ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ri={alphahash_fragment:cX,alphahash_pars_fragment:lX,alphamap_fragment:dX,alphamap_pars_fragment:uX,alphatest_fragment:hX,alphatest_pars_fragment:fX,aomap_fragment:mX,aomap_pars_fragment:pX,batching_pars_vertex:gX,batching_vertex:bX,begin_vertex:_X,beginnormal_vertex:vX,bsdfs:yX,iridescence_fragment:xX,bumpmap_pars_fragment:wX,clipping_planes_fragment:MX,clipping_planes_pars_fragment:SX,clipping_planes_pars_vertex:RX,clipping_planes_vertex:TX,color_fragment:CX,color_pars_fragment:EX,color_pars_vertex:DX,color_vertex:AX,common:IX,cube_uv_reflection_fragment:PX,defaultnormal_vertex:kX,displacementmap_pars_vertex:FX,displacementmap_vertex:jX,emissivemap_fragment:OX,emissivemap_pars_fragment:NX,colorspace_fragment:LX,colorspace_pars_fragment:BX,envmap_fragment:UX,envmap_common_pars_fragment:VX,envmap_pars_fragment:zX,envmap_pars_vertex:HX,envmap_physical_pars_fragment:eY,envmap_vertex:GX,fog_vertex:WX,fog_pars_vertex:$X,fog_fragment:qX,fog_pars_fragment:XX,gradientmap_pars_fragment:YX,lightmap_pars_fragment:ZX,lights_lambert_fragment:QX,lights_lambert_pars_fragment:KX,lights_pars_begin:JX,lights_toon_fragment:tY,lights_toon_pars_fragment:iY,lights_phong_fragment:nY,lights_phong_pars_fragment:rY,lights_physical_fragment:oY,lights_physical_pars_fragment:sY,lights_fragment_begin:aY,lights_fragment_maps:cY,lights_fragment_end:lY,logdepthbuf_fragment:dY,logdepthbuf_pars_fragment:uY,logdepthbuf_pars_vertex:hY,logdepthbuf_vertex:fY,map_fragment:mY,map_pars_fragment:pY,map_particle_fragment:gY,map_particle_pars_fragment:bY,metalnessmap_fragment:_Y,metalnessmap_pars_fragment:vY,morphinstance_vertex:yY,morphcolor_vertex:xY,morphnormal_vertex:wY,morphtarget_pars_vertex:MY,morphtarget_vertex:SY,normal_fragment_begin:RY,normal_fragment_maps:TY,normal_pars_fragment:CY,normal_pars_vertex:EY,normal_vertex:DY,normalmap_pars_fragment:AY,clearcoat_normal_fragment_begin:IY,clearcoat_normal_fragment_maps:PY,clearcoat_pars_fragment:kY,iridescence_pars_fragment:FY,opaque_fragment:jY,packing:OY,premultiplied_alpha_fragment:NY,project_vertex:LY,dithering_fragment:BY,dithering_pars_fragment:UY,roughnessmap_fragment:VY,roughnessmap_pars_fragment:zY,shadowmap_pars_fragment:HY,shadowmap_pars_vertex:GY,shadowmap_vertex:WY,shadowmask_pars_fragment:$Y,skinbase_vertex:qY,skinning_pars_vertex:XY,skinning_vertex:YY,skinnormal_vertex:ZY,specularmap_fragment:QY,specularmap_pars_fragment:KY,tonemapping_fragment:JY,tonemapping_pars_fragment:eZ,transmission_fragment:tZ,transmission_pars_fragment:iZ,uv_pars_fragment:nZ,uv_pars_vertex:rZ,uv_vertex:oZ,worldpos_vertex:sZ,background_vert:aZ,background_frag:cZ,backgroundCube_vert:lZ,backgroundCube_frag:dZ,cube_vert:uZ,cube_frag:hZ,depth_vert:fZ,depth_frag:mZ,distanceRGBA_vert:pZ,distanceRGBA_frag:gZ,equirect_vert:bZ,equirect_frag:_Z,linedashed_vert:vZ,linedashed_frag:yZ,meshbasic_vert:xZ,meshbasic_frag:wZ,meshlambert_vert:MZ,meshlambert_frag:SZ,meshmatcap_vert:RZ,meshmatcap_frag:TZ,meshnormal_vert:CZ,meshnormal_frag:EZ,meshphong_vert:DZ,meshphong_frag:AZ,meshphysical_vert:IZ,meshphysical_frag:PZ,meshtoon_vert:kZ,meshtoon_frag:FZ,points_vert:jZ,points_frag:OZ,shadow_vert:NZ,shadow_frag:LZ,sprite_vert:BZ,sprite_frag:UZ},qe={common:{diffuse:{value:new _e(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Yt},alphaMap:{value:null},alphaMapTransform:{value:new Yt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Yt}},envmap:{envMap:{value:null},envMapRotation:{value:new Yt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Yt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Yt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Yt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Yt},normalScale:{value:new z(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Yt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Yt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Yt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Yt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _e(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new _e(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Yt},alphaTest:{value:0},uvTransform:{value:new Yt}},sprite:{diffuse:{value:new _e(16777215)},opacity:{value:1},center:{value:new z(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Yt},alphaMap:{value:null},alphaMapTransform:{value:new Yt},alphaTest:{value:0}}},ls={basic:{uniforms:Vr([qe.common,qe.specularmap,qe.envmap,qe.aomap,qe.lightmap,qe.fog]),vertexShader:ri.meshbasic_vert,fragmentShader:ri.meshbasic_frag},lambert:{uniforms:Vr([qe.common,qe.specularmap,qe.envmap,qe.aomap,qe.lightmap,qe.emissivemap,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.fog,qe.lights,{emissive:{value:new _e(0)}}]),vertexShader:ri.meshlambert_vert,fragmentShader:ri.meshlambert_frag},phong:{uniforms:Vr([qe.common,qe.specularmap,qe.envmap,qe.aomap,qe.lightmap,qe.emissivemap,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.fog,qe.lights,{emissive:{value:new _e(0)},specular:{value:new _e(1118481)},shininess:{value:30}}]),vertexShader:ri.meshphong_vert,fragmentShader:ri.meshphong_frag},standard:{uniforms:Vr([qe.common,qe.envmap,qe.aomap,qe.lightmap,qe.emissivemap,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.roughnessmap,qe.metalnessmap,qe.fog,qe.lights,{emissive:{value:new _e(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ri.meshphysical_vert,fragmentShader:ri.meshphysical_frag},toon:{uniforms:Vr([qe.common,qe.aomap,qe.lightmap,qe.emissivemap,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.gradientmap,qe.fog,qe.lights,{emissive:{value:new _e(0)}}]),vertexShader:ri.meshtoon_vert,fragmentShader:ri.meshtoon_frag},matcap:{uniforms:Vr([qe.common,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.fog,{matcap:{value:null}}]),vertexShader:ri.meshmatcap_vert,fragmentShader:ri.meshmatcap_frag},points:{uniforms:Vr([qe.points,qe.fog]),vertexShader:ri.points_vert,fragmentShader:ri.points_frag},dashed:{uniforms:Vr([qe.common,qe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ri.linedashed_vert,fragmentShader:ri.linedashed_frag},depth:{uniforms:Vr([qe.common,qe.displacementmap]),vertexShader:ri.depth_vert,fragmentShader:ri.depth_frag},normal:{uniforms:Vr([qe.common,qe.bumpmap,qe.normalmap,qe.displacementmap,{opacity:{value:1}}]),vertexShader:ri.meshnormal_vert,fragmentShader:ri.meshnormal_frag},sprite:{uniforms:Vr([qe.sprite,qe.fog]),vertexShader:ri.sprite_vert,fragmentShader:ri.sprite_frag},background:{uniforms:{uvTransform:{value:new Yt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ri.background_vert,fragmentShader:ri.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Yt}},vertexShader:ri.backgroundCube_vert,fragmentShader:ri.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ri.cube_vert,fragmentShader:ri.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ri.equirect_vert,fragmentShader:ri.equirect_frag},distanceRGBA:{uniforms:Vr([qe.common,qe.displacementmap,{referencePosition:{value:new M},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ri.distanceRGBA_vert,fragmentShader:ri.distanceRGBA_frag},shadow:{uniforms:Vr([qe.lights,qe.fog,{color:{value:new _e(0)},opacity:{value:1}}]),vertexShader:ri.shadow_vert,fragmentShader:ri.shadow_frag}};ls.physical={uniforms:Vr([ls.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Yt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Yt},clearcoatNormalScale:{value:new z(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Yt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Yt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Yt},sheen:{value:0},sheenColor:{value:new _e(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Yt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Yt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Yt},transmissionSamplerSize:{value:new z},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Yt},attenuationDistance:{value:0},attenuationColor:{value:new _e(0)},specularColor:{value:new _e(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Yt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Yt},anisotropyVector:{value:new z},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Yt}}]),vertexShader:ri.meshphysical_vert,fragmentShader:ri.meshphysical_frag};var s0={r:0,b:0,g:0},ld=new no,VZ=new je;function zZ(n,e,i,t,r,o,s){let a=new _e(0),c=o===!0?0:1,l,d,u=null,h=0,f=null;function p(v){let _=v.isScene===!0?v.background:null;return _&&_.isTexture&&(_=(v.backgroundBlurriness>0?i:e).get(_)),_}function b(v){let _=!1,y=p(v);y===null?g(a,c):y&&y.isColor&&(g(y,1),_=!0);let C=n.xr.getEnvironmentBlendMode();C==="additive"?t.buffers.color.setClear(0,0,0,1,s):C==="alpha-blend"&&t.buffers.color.setClear(0,0,0,0,s),(n.autoClear||_)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil)}function m(v,_){let y=p(_);y&&(y.isCubeTexture||y.mapping===of)?(d===void 0&&(d=new Le(new Xi(1,1,1),new Dt({name:"BackgroundCubeMaterial",uniforms:Hh(ls.backgroundCube.uniforms),vertexShader:ls.backgroundCube.vertexShader,fragmentShader:ls.backgroundCube.fragmentShader,side:Hr,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(C,R,w){this.matrixWorld.copyPosition(w.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),ld.copy(_.backgroundRotation),ld.x*=-1,ld.y*=-1,ld.z*=-1,y.isCubeTexture&&y.isRenderTargetTexture===!1&&(ld.y*=-1,ld.z*=-1),d.material.uniforms.envMap.value=y,d.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(VZ.makeRotationFromEuler(ld)),d.material.toneMapped=Di.getTransfer(y.colorSpace)!==Qi,(u!==y||h!==y.version||f!==n.toneMapping)&&(d.material.needsUpdate=!0,u=y,h=y.version,f=n.toneMapping),d.layers.enableAll(),v.unshift(d,d.geometry,d.material,0,0,null)):y&&y.isTexture&&(l===void 0&&(l=new Le(new ea(2,2),new Dt({name:"BackgroundMaterial",uniforms:Hh(ls.background.uniforms),vertexShader:ls.background.vertexShader,fragmentShader:ls.background.fragmentShader,side:us,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=y,l.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,l.material.toneMapped=Di.getTransfer(y.colorSpace)!==Qi,y.matrixAutoUpdate===!0&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(u!==y||h!==y.version||f!==n.toneMapping)&&(l.material.needsUpdate=!0,u=y,h=y.version,f=n.toneMapping),l.layers.enableAll(),v.unshift(l,l.geometry,l.material,0,0,null))}function g(v,_){v.getRGB(s0,QL(n)),t.buffers.color.setClear(s0.r,s0.g,s0.b,_,s)}return{getClearColor:function(){return a},setClearColor:function(v,_=1){a.set(v),c=_,g(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(v){c=v,g(a,c)},render:b,addToRenderList:m}}function HZ(n,e){let i=n.getParameter(n.MAX_VERTEX_ATTRIBS),t={},r=h(null),o=r,s=!1;function a(x,F,V,O,K){let ne=!1,G=u(O,V,F);o!==G&&(o=G,l(o.object)),ne=f(x,O,V,K),ne&&p(x,O,V,K),K!==null&&e.update(K,n.ELEMENT_ARRAY_BUFFER),(ne||s)&&(s=!1,y(x,F,V,O),K!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(K).buffer))}function c(){return n.createVertexArray()}function l(x){return n.bindVertexArray(x)}function d(x){return n.deleteVertexArray(x)}function u(x,F,V){let O=V.wireframe===!0,K=t[x.id];K===void 0&&(K={},t[x.id]=K);let ne=K[F.id];ne===void 0&&(ne={},K[F.id]=ne);let G=ne[O];return G===void 0&&(G=h(c()),ne[O]=G),G}function h(x){let F=[],V=[],O=[];for(let K=0;K<i;K++)F[K]=0,V[K]=0,O[K]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:V,attributeDivisors:O,object:x,attributes:{},index:null}}function f(x,F,V,O){let K=o.attributes,ne=F.attributes,G=0,$=V.getAttributes();for(let U in $)if($[U].location>=0){let me=K[U],ke=ne[U];if(ke===void 0&&(U==="instanceMatrix"&&x.instanceMatrix&&(ke=x.instanceMatrix),U==="instanceColor"&&x.instanceColor&&(ke=x.instanceColor)),me===void 0||me.attribute!==ke||ke&&me.data!==ke.data)return!0;G++}return o.attributesNum!==G||o.index!==O}function p(x,F,V,O){let K={},ne=F.attributes,G=0,$=V.getAttributes();for(let U in $)if($[U].location>=0){let me=ne[U];me===void 0&&(U==="instanceMatrix"&&x.instanceMatrix&&(me=x.instanceMatrix),U==="instanceColor"&&x.instanceColor&&(me=x.instanceColor));let ke={};ke.attribute=me,me&&me.data&&(ke.data=me.data),K[U]=ke,G++}o.attributes=K,o.attributesNum=G,o.index=O}function b(){let x=o.newAttributes;for(let F=0,V=x.length;F<V;F++)x[F]=0}function m(x){g(x,0)}function g(x,F){let V=o.newAttributes,O=o.enabledAttributes,K=o.attributeDivisors;V[x]=1,O[x]===0&&(n.enableVertexAttribArray(x),O[x]=1),K[x]!==F&&(n.vertexAttribDivisor(x,F),K[x]=F)}function v(){let x=o.newAttributes,F=o.enabledAttributes;for(let V=0,O=F.length;V<O;V++)F[V]!==x[V]&&(n.disableVertexAttribArray(V),F[V]=0)}function _(x,F,V,O,K,ne,G){G===!0?n.vertexAttribIPointer(x,F,V,K,ne):n.vertexAttribPointer(x,F,V,O,K,ne)}function y(x,F,V,O){b();let K=O.attributes,ne=V.getAttributes(),G=F.defaultAttributeValues;for(let $ in ne){let U=ne[$];if(U.location>=0){let Z=K[$];if(Z===void 0&&($==="instanceMatrix"&&x.instanceMatrix&&(Z=x.instanceMatrix),$==="instanceColor"&&x.instanceColor&&(Z=x.instanceColor)),Z!==void 0){let me=Z.normalized,ke=Z.itemSize,$e=e.get(Z);if($e===void 0)continue;let vt=$e.buffer,Y=$e.type,Ae=$e.bytesPerElement,Ge=Y===n.INT||Y===n.UNSIGNED_INT||Z.gpuType===XE;if(Z.isInterleavedBufferAttribute){let N=Z.data,Se=N.stride,Oe=Z.offset;if(N.isInstancedInterleavedBuffer){for(let B=0;B<U.locationSize;B++)g(U.location+B,N.meshPerAttribute);x.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=N.meshPerAttribute*N.count)}else for(let B=0;B<U.locationSize;B++)m(U.location+B);n.bindBuffer(n.ARRAY_BUFFER,vt);for(let B=0;B<U.locationSize;B++)_(U.location+B,ke/U.locationSize,Y,me,Se*Ae,(Oe+ke/U.locationSize*B)*Ae,Ge)}else{if(Z.isInstancedBufferAttribute){for(let N=0;N<U.locationSize;N++)g(U.location+N,Z.meshPerAttribute);x.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let N=0;N<U.locationSize;N++)m(U.location+N);n.bindBuffer(n.ARRAY_BUFFER,vt);for(let N=0;N<U.locationSize;N++)_(U.location+N,ke/U.locationSize,Y,me,ke*Ae,ke/U.locationSize*N*Ae,Ge)}}else if(G!==void 0){let me=G[$];if(me!==void 0)switch(me.length){case 2:n.vertexAttrib2fv(U.location,me);break;case 3:n.vertexAttrib3fv(U.location,me);break;case 4:n.vertexAttrib4fv(U.location,me);break;default:n.vertexAttrib1fv(U.location,me)}}}}v()}function C(){A();for(let x in t){let F=t[x];for(let V in F){let O=F[V];for(let K in O)d(O[K].object),delete O[K];delete F[V]}delete t[x]}}function R(x){if(t[x.id]===void 0)return;let F=t[x.id];for(let V in F){let O=F[V];for(let K in O)d(O[K].object),delete O[K];delete F[V]}delete t[x.id]}function w(x){for(let F in t){let V=t[F];if(V[x.id]===void 0)continue;let O=V[x.id];for(let K in O)d(O[K].object),delete O[K];delete V[x.id]}}function A(){S(),s=!0,o!==r&&(o=r,l(o.object))}function S(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:A,resetDefaultState:S,dispose:C,releaseStatesOfGeometry:R,releaseStatesOfProgram:w,initAttributes:b,enableAttribute:m,disableUnusedAttributes:v}}function GZ(n,e,i){let t;function r(l){t=l}function o(l,d){n.drawArrays(t,l,d),i.update(d,t,1)}function s(l,d,u){u!==0&&(n.drawArraysInstanced(t,l,d,u),i.update(d,t,u))}function a(l,d,u){if(u===0)return;let h=e.get("WEBGL_multi_draw");if(h===null)for(let f=0;f<u;f++)this.render(l[f],d[f]);else{h.multiDrawArraysWEBGL(t,l,0,d,0,u);let f=0;for(let p=0;p<u;p++)f+=d[p];i.update(f,t,1)}}function c(l,d,u,h){if(u===0)return;let f=e.get("WEBGL_multi_draw");if(f===null)for(let p=0;p<l.length;p++)s(l[p],d[p],h[p]);else{f.multiDrawArraysInstancedWEBGL(t,l,0,d,0,h,0,u);let p=0;for(let b=0;b<u;b++)p+=d[b];for(let b=0;b<h.length;b++)i.update(p,t,h[b])}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=c}function WZ(n,e,i,t){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let R=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(R){return!(R!==Mo&&t.convert(R)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(R){let w=R===Wi&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(R!==ic&&t.convert(R)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&R!==Rr&&!w)}function c(R){if(R==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let l=i.precision!==void 0?i.precision:"highp",d=c(l);d!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",d,"instead."),l=d);let u=i.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_TEXTURE_SIZE),b=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),m=n.getParameter(n.MAX_VERTEX_ATTRIBS),g=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),v=n.getParameter(n.MAX_VARYING_VECTORS),_=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),y=f>0,C=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:a,precision:l,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:f,maxTextureSize:p,maxCubemapSize:b,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:_,vertexTextures:y,maxSamples:C}}function $Z(n){let e=this,i=null,t=0,r=!1,o=!1,s=new sr,a=new Yt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(u,h){let f=u.length!==0||h||t!==0||r;return r=h,t=u.length,f},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(u,h){i=d(u,h,0)},this.setState=function(u,h,f){let p=u.clippingPlanes,b=u.clipIntersection,m=u.clipShadows,g=n.get(u);if(!r||p===null||p.length===0||o&&!m)o?d(null):l();else{let v=o?0:t,_=v*4,y=g.clippingState||null;c.value=y,y=d(p,h,_,f);for(let C=0;C!==_;++C)y[C]=i[C];g.clippingState=y,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=v}};function l(){c.value!==i&&(c.value=i,c.needsUpdate=t>0),e.numPlanes=t,e.numIntersection=0}function d(u,h,f,p){let b=u!==null?u.length:0,m=null;if(b!==0){if(m=c.value,p!==!0||m===null){let g=f+b*4,v=h.matrixWorldInverse;a.getNormalMatrix(v),(m===null||m.length<g)&&(m=new Float32Array(g));for(let _=0,y=f;_!==b;++_,y+=4)s.copy(u[_]).applyMatrix4(v,a),s.normal.toArray(m,y),m[y+3]=s.constant}c.value=m,c.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,m}}function qZ(n){let e=new WeakMap;function i(s,a){return a===yp?s.mapping=tc:a===xp&&(s.mapping=nl),s}function t(s){if(s&&s.isTexture){let a=s.mapping;if(a===yp||a===xp)if(e.has(s)){let c=e.get(s).texture;return i(c,s.mapping)}else{let c=s.image;if(c&&c.height>0){let l=new H0(c.height);return l.fromEquirectangularTexture(n,s),e.set(s,l),s.addEventListener("dispose",r),i(l.texture,s.mapping)}else return null}}return s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function o(){e=new WeakMap}return{get:t,dispose:o}}var Ro=class extends ol{constructor(e=-1,i=1,t=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=i,this.top=t,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,i){return super.copy(e,i),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,i,t,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=i,this.view.offsetX=t,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),t=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=t-e,s=t+e,a=r+i,c=r-i;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=l*this.view.offsetX,s=o+l*this.view.width,a-=d*this.view.offsetY,c=a-d*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let i=super.toJSON(e);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,this.view!==null&&(i.object.view=Object.assign({},this.view)),i}},Oh=4,j2=[.125,.215,.35,.446,.526,.582],vd=20,VT=new Ro,O2=new _e,zT=null,HT=0,GT=0,WT=!1,_d=(1+Math.sqrt(5))/2,Eh=1/_d,N2=[new M(-_d,Eh,0),new M(_d,Eh,0),new M(-Eh,0,_d),new M(Eh,0,_d),new M(0,_d,-Eh),new M(0,_d,Eh),new M(-1,1,-1),new M(1,1,-1),new M(-1,1,1),new M(1,1,1)],Pp=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,i=0,t=.1,r=100){zT=this._renderer.getRenderTarget(),HT=this._renderer.getActiveCubeFace(),GT=this._renderer.getActiveMipmapLevel(),WT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,t,r,o),i>0&&this._blur(o,0,0,i),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,i=null){return this._fromTexture(e,i)}fromCubemap(e,i=null){return this._fromTexture(e,i)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=U2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=B2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(zT,HT,GT),this._renderer.xr.enabled=WT,e.scissorTest=!1,a0(e,0,0,e.width,e.height)}_fromTexture(e,i){e.mapping===tc||e.mapping===nl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),zT=this._renderer.getRenderTarget(),HT=this._renderer.getActiveCubeFace(),GT=this._renderer.getActiveMipmapLevel(),WT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let t=i||this._allocateTargets();return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),i=4*this._cubeSize,t={magFilter:bn,minFilter:bn,generateMipmaps:!1,type:Wi,format:Mo,colorSpace:jn,depthBuffer:!1},r=L2(e,i,t);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==i){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=L2(e,i,t);let{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=XZ(o)),this._blurMaterial=YZ(o,e,i)}return r}_compileMaterial(e){let i=new Le(this._lodPlanes[0],e);this._renderer.compile(i,VT)}_sceneToCubeUV(e,i,t,r){let a=new Ki(90,1,i,t),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],d=this._renderer,u=d.autoClear,h=d.toneMapping;d.getClearColor(O2),d.toneMapping=Ja,d.autoClear=!1;let f=new Ji({name:"PMREM.Background",side:Hr,depthWrite:!1,depthTest:!1}),p=new Le(new Xi,f),b=!1,m=e.background;m?m.isColor&&(f.color.copy(m),e.background=null,b=!0):(f.color.copy(O2),b=!0);for(let g=0;g<6;g++){let v=g%3;v===0?(a.up.set(0,c[g],0),a.lookAt(l[g],0,0)):v===1?(a.up.set(0,0,c[g]),a.lookAt(0,l[g],0)):(a.up.set(0,c[g],0),a.lookAt(0,0,l[g]));let _=this._cubeSize;a0(r,v*_,g>2?_:0,_,_),d.setRenderTarget(r),b&&d.render(p,a),d.render(e,a)}p.geometry.dispose(),p.material.dispose(),d.toneMapping=h,d.autoClear=u,e.background=m}_textureToCubeUV(e,i){let t=this._renderer,r=e.mapping===tc||e.mapping===nl;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=U2()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=B2());let o=r?this._cubemapMaterial:this._equirectMaterial,s=new Le(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;let c=this._cubeSize;a0(i,0,0,3*c,2*c),t.setRenderTarget(i),t.render(s,VT)}_applyPMREM(e){let i=this._renderer,t=i.autoClear;i.autoClear=!1;let r=this._lodPlanes.length;for(let o=1;o<r;o++){let s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=N2[(r-o-1)%N2.length];this._blur(e,o-1,o,s,a)}i.autoClear=t}_blur(e,i,t,r,o){let s=this._pingPongRenderTarget;this._halfBlur(e,s,i,t,r,"latitudinal",o),this._halfBlur(s,e,t,t,r,"longitudinal",o)}_halfBlur(e,i,t,r,o,s,a){let c=this._renderer,l=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let d=3,u=new Le(this._lodPlanes[r],l),h=l.uniforms,f=this._sizeLods[t]-1,p=isFinite(o)?Math.PI/(2*f):2*Math.PI/(2*vd-1),b=o/p,m=isFinite(o)?1+Math.floor(d*b):vd;m>vd&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${vd}`);let g=[],v=0;for(let w=0;w<vd;++w){let A=w/b,S=Math.exp(-A*A/2);g.push(S),w===0?v+=S:w<m&&(v+=2*S)}for(let w=0;w<g.length;w++)g[w]=g[w]/v;h.envMap.value=e.texture,h.samples.value=m,h.weights.value=g,h.latitudinal.value=s==="latitudinal",a&&(h.poleAxis.value=a);let{_lodMax:_}=this;h.dTheta.value=p,h.mipInt.value=_-t;let y=this._sizeLods[r],C=3*y*(r>_-Oh?r-_+Oh:0),R=4*(this._cubeSize-y);a0(i,C,R,3*y,2*y),c.setRenderTarget(i),c.render(u,VT)}};function XZ(n){let e=[],i=[],t=[],r=n,o=n-Oh+1+j2.length;for(let s=0;s<o;s++){let a=Math.pow(2,r);i.push(a);let c=1/a;s>n-Oh?c=j2[s-n+Oh-1]:s===0&&(c=0),t.push(c);let l=1/(a-2),d=-l,u=1+l,h=[d,d,u,d,u,u,d,d,u,u,d,u],f=6,p=6,b=3,m=2,g=1,v=new Float32Array(b*p*f),_=new Float32Array(m*p*f),y=new Float32Array(g*p*f);for(let R=0;R<f;R++){let w=R%3*2/3-1,A=R>2?0:-1,S=[w,A,0,w+2/3,A,0,w+2/3,A+1,0,w,A,0,w+2/3,A+1,0,w,A+1,0];v.set(S,b*p*R),_.set(h,m*p*R);let x=[R,R,R,R,R,R];y.set(x,g*p*R)}let C=new ft;C.setAttribute("position",new di(v,b)),C.setAttribute("uv",new di(_,m)),C.setAttribute("faceIndex",new di(y,g)),e.push(C),r>Oh&&r--}return{lodPlanes:e,sizeLods:i,sigmas:t}}function L2(n,e,i){let t=new oi(n,e,i);return t.texture.mapping=of,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function a0(n,e,i,t,r){n.viewport.set(e,i,t,r),n.scissor.set(e,i,t,r)}function YZ(n,e,i){let t=new Float32Array(vd),r=new M(0,1,0);return new Dt({name:"SphericalGaussianBlur",defines:{n:vd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:rD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Qt,depthTest:!1,depthWrite:!1})}function B2(){return new Dt({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:rD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Qt,depthTest:!1,depthWrite:!1})}function U2(){return new Dt({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:rD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Qt,depthTest:!1,depthWrite:!1})}function rD(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function ZZ(n){let e=new WeakMap,i=null;function t(a){if(a&&a.isTexture){let c=a.mapping,l=c===yp||c===xp,d=c===tc||c===nl;if(l||d){let u=e.get(a),h=u!==void 0?u.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return i===null&&(i=new Pp(n)),u=l?i.fromEquirectangular(a,u):i.fromCubemap(a,u),u.texture.pmremVersion=a.pmremVersion,e.set(a,u),u.texture;if(u!==void 0)return u.texture;{let f=a.image;return l&&f&&f.height>0||d&&f&&r(f)?(i===null&&(i=new Pp(n)),u=l?i.fromEquirectangular(a):i.fromCubemap(a),u.texture.pmremVersion=a.pmremVersion,e.set(a,u),a.addEventListener("dispose",o),u.texture):null}}}return a}function r(a){let c=0,l=6;for(let d=0;d<l;d++)a[d]!==void 0&&c++;return c===l}function o(a){let c=a.target;c.removeEventListener("dispose",o);let l=e.get(c);l!==void 0&&(e.delete(c),l.dispose())}function s(){e=new WeakMap,i!==null&&(i.dispose(),i=null)}return{get:t,dispose:s}}function QZ(n){let e={};function i(t){if(e[t]!==void 0)return e[t];let r;switch(t){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(t)}return e[t]=r,r}return{has:function(t){return i(t)!==null},init:function(){i("EXT_color_buffer_float"),i("WEBGL_clip_cull_distance"),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture"),i("WEBGL_render_shared_exponent")},get:function(t){let r=i(t);return r===null&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),r}}}function KZ(n,e,i,t){let r={},o=new WeakMap;function s(u){let h=u.target;h.index!==null&&e.remove(h.index);for(let p in h.attributes)e.remove(h.attributes[p]);for(let p in h.morphAttributes){let b=h.morphAttributes[p];for(let m=0,g=b.length;m<g;m++)e.remove(b[m])}h.removeEventListener("dispose",s),delete r[h.id];let f=o.get(h);f&&(e.remove(f),o.delete(h)),t.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,i.memory.geometries--}function a(u,h){return r[h.id]===!0||(h.addEventListener("dispose",s),r[h.id]=!0,i.memory.geometries++),h}function c(u){let h=u.attributes;for(let p in h)e.update(h[p],n.ARRAY_BUFFER);let f=u.morphAttributes;for(let p in f){let b=f[p];for(let m=0,g=b.length;m<g;m++)e.update(b[m],n.ARRAY_BUFFER)}}function l(u){let h=[],f=u.index,p=u.attributes.position,b=0;if(f!==null){let v=f.array;b=f.version;for(let _=0,y=v.length;_<y;_+=3){let C=v[_+0],R=v[_+1],w=v[_+2];h.push(C,R,R,w,w,C)}}else if(p!==void 0){let v=p.array;b=p.version;for(let _=0,y=v.length/3-1;_<y;_+=3){let C=_+0,R=_+1,w=_+2;h.push(C,R,R,w,w,C)}}else return;let m=new(qL(h)?Ip:Ap)(h,1);m.version=b;let g=o.get(u);g&&e.remove(g),o.set(u,m)}function d(u){let h=o.get(u);if(h){let f=u.index;f!==null&&h.version<f.version&&l(u)}else l(u);return o.get(u)}return{get:a,update:c,getWireframeAttribute:d}}function JZ(n,e,i){let t;function r(h){t=h}let o,s;function a(h){o=h.type,s=h.bytesPerElement}function c(h,f){n.drawElements(t,f,o,h*s),i.update(f,t,1)}function l(h,f,p){p!==0&&(n.drawElementsInstanced(t,f,o,h*s,p),i.update(f,t,p))}function d(h,f,p){if(p===0)return;let b=e.get("WEBGL_multi_draw");if(b===null)for(let m=0;m<p;m++)this.render(h[m]/s,f[m]);else{b.multiDrawElementsWEBGL(t,f,0,o,h,0,p);let m=0;for(let g=0;g<p;g++)m+=f[g];i.update(m,t,1)}}function u(h,f,p,b){if(p===0)return;let m=e.get("WEBGL_multi_draw");if(m===null)for(let g=0;g<h.length;g++)l(h[g]/s,f[g],b[g]);else{m.multiDrawElementsInstancedWEBGL(t,f,0,o,h,0,b,0,p);let g=0;for(let v=0;v<p;v++)g+=f[v];for(let v=0;v<b.length;v++)i.update(g,t,b[v])}}this.setMode=r,this.setIndex=a,this.render=c,this.renderInstances=l,this.renderMultiDraw=d,this.renderMultiDrawInstances=u}function eQ(n){let e={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function t(o,s,a){switch(i.calls++,s){case n.TRIANGLES:i.triangles+=a*(o/3);break;case n.LINES:i.lines+=a*(o/2);break;case n.LINE_STRIP:i.lines+=a*(o-1);break;case n.LINE_LOOP:i.lines+=a*o;break;case n.POINTS:i.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:e,render:i,programs:null,autoReset:!0,reset:r,update:t}}function tQ(n,e,i){let t=new WeakMap,r=new xi;function o(s,a,c){let l=s.morphTargetInfluences,d=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,u=d!==void 0?d.length:0,h=t.get(a);if(h===void 0||h.count!==u){let x=function(){A.dispose(),t.delete(a),a.removeEventListener("dispose",x)};var f=x;h!==void 0&&h.texture.dispose();let p=a.morphAttributes.position!==void 0,b=a.morphAttributes.normal!==void 0,m=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],v=a.morphAttributes.normal||[],_=a.morphAttributes.color||[],y=0;p===!0&&(y=1),b===!0&&(y=2),m===!0&&(y=3);let C=a.attributes.position.count*y,R=1;C>e.maxTextureSize&&(R=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);let w=new Float32Array(C*R*4*u),A=new Vh(w,C,R,u);A.type=Rr,A.needsUpdate=!0;let S=y*4;for(let F=0;F<u;F++){let V=g[F],O=v[F],K=_[F],ne=C*R*4*F;for(let G=0;G<V.count;G++){let $=G*S;p===!0&&(r.fromBufferAttribute(V,G),w[ne+$+0]=r.x,w[ne+$+1]=r.y,w[ne+$+2]=r.z,w[ne+$+3]=0),b===!0&&(r.fromBufferAttribute(O,G),w[ne+$+4]=r.x,w[ne+$+5]=r.y,w[ne+$+6]=r.z,w[ne+$+7]=0),m===!0&&(r.fromBufferAttribute(K,G),w[ne+$+8]=r.x,w[ne+$+9]=r.y,w[ne+$+10]=r.z,w[ne+$+11]=K.itemSize===4?r.w:1)}}h={count:u,texture:A,size:new z(C,R)},t.set(a,h),a.addEventListener("dispose",x)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",s.morphTexture,i);else{let p=0;for(let m=0;m<l.length;m++)p+=l[m];let b=a.morphTargetsRelative?1:1-p;c.getUniforms().setValue(n,"morphTargetBaseInfluence",b),c.getUniforms().setValue(n,"morphTargetInfluences",l)}c.getUniforms().setValue(n,"morphTargetsTexture",h.texture,i),c.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:o}}function iQ(n,e,i,t){let r=new WeakMap;function o(c){let l=t.render.frame,d=c.geometry,u=e.get(c,d);if(r.get(u)!==l&&(e.update(u),r.set(u,l)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),r.get(c)!==l&&(i.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&i.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,l))),c.isSkinnedMesh){let h=c.skeleton;r.get(h)!==l&&(h.update(),r.set(h,l))}return u}function s(){r=new WeakMap}function a(c){let l=c.target;l.removeEventListener("dispose",a),i.remove(l.instanceMatrix),l.instanceColor!==null&&i.remove(l.instanceColor)}return{update:o,dispose:s}}var hs=class extends yn{constructor(e,i,t,r,o,s,a,c,l,d){if(d=d!==void 0?d:Sd,d!==Sd&&d!==Ks)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");t===void 0&&d===Sd&&(t=Ad),t===void 0&&d===Ks&&(t=la),super(null,r,o,s,a,c,d,t,l),this.isDepthTexture=!0,this.image={width:e,height:i},this.magFilter=a!==void 0?a:li,this.minFilter=c!==void 0?c:li,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let i=super.toJSON(e);return this.compareFunction!==null&&(i.compareFunction=this.compareFunction),i}},JL=new yn,e3=new hs(1,1);e3.compareFunction=iD;var t3=new Vh,i3=new Dp,n3=new Pd,V2=[],z2=[],H2=new Float32Array(16),G2=new Float32Array(9),W2=new Float32Array(4);function af(n,e,i){let t=n[0];if(t<=0||t>0)return n;let r=e*i,o=V2[r];if(o===void 0&&(o=new Float32Array(r),V2[r]=o),e!==0){t.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=i,n[s].toArray(o,a)}return o}function Zn(n,e){if(n.length!==e.length)return!1;for(let i=0,t=n.length;i<t;i++)if(n[i]!==e[i])return!1;return!0}function Qn(n,e){for(let i=0,t=e.length;i<t;i++)n[i]=e[i]}function Ly(n,e){let i=z2[e];i===void 0&&(i=new Int32Array(e),z2[e]=i);for(let t=0;t!==e;++t)i[t]=n.allocateTextureUnit();return i}function nQ(n,e){let i=this.cache;i[0]!==e&&(n.uniform1f(this.addr,e),i[0]=e)}function rQ(n,e){let i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Zn(i,e))return;n.uniform2fv(this.addr,e),Qn(i,e)}}function oQ(n,e){let i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else if(e.r!==void 0)(i[0]!==e.r||i[1]!==e.g||i[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b);else{if(Zn(i,e))return;n.uniform3fv(this.addr,e),Qn(i,e)}}function sQ(n,e){let i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Zn(i,e))return;n.uniform4fv(this.addr,e),Qn(i,e)}}function aQ(n,e){let i=this.cache,t=e.elements;if(t===void 0){if(Zn(i,e))return;n.uniformMatrix2fv(this.addr,!1,e),Qn(i,e)}else{if(Zn(i,t))return;W2.set(t),n.uniformMatrix2fv(this.addr,!1,W2),Qn(i,t)}}function cQ(n,e){let i=this.cache,t=e.elements;if(t===void 0){if(Zn(i,e))return;n.uniformMatrix3fv(this.addr,!1,e),Qn(i,e)}else{if(Zn(i,t))return;G2.set(t),n.uniformMatrix3fv(this.addr,!1,G2),Qn(i,t)}}function lQ(n,e){let i=this.cache,t=e.elements;if(t===void 0){if(Zn(i,e))return;n.uniformMatrix4fv(this.addr,!1,e),Qn(i,e)}else{if(Zn(i,t))return;H2.set(t),n.uniformMatrix4fv(this.addr,!1,H2),Qn(i,t)}}function dQ(n,e){let i=this.cache;i[0]!==e&&(n.uniform1i(this.addr,e),i[0]=e)}function uQ(n,e){let i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Zn(i,e))return;n.uniform2iv(this.addr,e),Qn(i,e)}}function hQ(n,e){let i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(Zn(i,e))return;n.uniform3iv(this.addr,e),Qn(i,e)}}function fQ(n,e){let i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Zn(i,e))return;n.uniform4iv(this.addr,e),Qn(i,e)}}function mQ(n,e){let i=this.cache;i[0]!==e&&(n.uniform1ui(this.addr,e),i[0]=e)}function pQ(n,e){let i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Zn(i,e))return;n.uniform2uiv(this.addr,e),Qn(i,e)}}function gQ(n,e){let i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(Zn(i,e))return;n.uniform3uiv(this.addr,e),Qn(i,e)}}function bQ(n,e){let i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Zn(i,e))return;n.uniform4uiv(this.addr,e),Qn(i,e)}}function _Q(n,e,i){let t=this.cache,r=i.allocateTextureUnit();t[0]!==r&&(n.uniform1i(this.addr,r),t[0]=r);let o=this.type===n.SAMPLER_2D_SHADOW?e3:JL;i.setTexture2D(e||o,r)}function vQ(n,e,i){let t=this.cache,r=i.allocateTextureUnit();t[0]!==r&&(n.uniform1i(this.addr,r),t[0]=r),i.setTexture3D(e||i3,r)}function yQ(n,e,i){let t=this.cache,r=i.allocateTextureUnit();t[0]!==r&&(n.uniform1i(this.addr,r),t[0]=r),i.setTextureCube(e||n3,r)}function xQ(n,e,i){let t=this.cache,r=i.allocateTextureUnit();t[0]!==r&&(n.uniform1i(this.addr,r),t[0]=r),i.setTexture2DArray(e||t3,r)}function wQ(n){switch(n){case 5126:return nQ;case 35664:return rQ;case 35665:return oQ;case 35666:return sQ;case 35674:return aQ;case 35675:return cQ;case 35676:return lQ;case 5124:case 35670:return dQ;case 35667:case 35671:return uQ;case 35668:case 35672:return hQ;case 35669:case 35673:return fQ;case 5125:return mQ;case 36294:return pQ;case 36295:return gQ;case 36296:return bQ;case 35678:case 36198:case 36298:case 36306:case 35682:return _Q;case 35679:case 36299:case 36307:return vQ;case 35680:case 36300:case 36308:case 36293:return yQ;case 36289:case 36303:case 36311:case 36292:return xQ}}function MQ(n,e){n.uniform1fv(this.addr,e)}function SQ(n,e){let i=af(e,this.size,2);n.uniform2fv(this.addr,i)}function RQ(n,e){let i=af(e,this.size,3);n.uniform3fv(this.addr,i)}function TQ(n,e){let i=af(e,this.size,4);n.uniform4fv(this.addr,i)}function CQ(n,e){let i=af(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,i)}function EQ(n,e){let i=af(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,i)}function DQ(n,e){let i=af(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,i)}function AQ(n,e){n.uniform1iv(this.addr,e)}function IQ(n,e){n.uniform2iv(this.addr,e)}function PQ(n,e){n.uniform3iv(this.addr,e)}function kQ(n,e){n.uniform4iv(this.addr,e)}function FQ(n,e){n.uniform1uiv(this.addr,e)}function jQ(n,e){n.uniform2uiv(this.addr,e)}function OQ(n,e){n.uniform3uiv(this.addr,e)}function NQ(n,e){n.uniform4uiv(this.addr,e)}function LQ(n,e,i){let t=this.cache,r=e.length,o=Ly(i,r);Zn(t,o)||(n.uniform1iv(this.addr,o),Qn(t,o));for(let s=0;s!==r;++s)i.setTexture2D(e[s]||JL,o[s])}function BQ(n,e,i){let t=this.cache,r=e.length,o=Ly(i,r);Zn(t,o)||(n.uniform1iv(this.addr,o),Qn(t,o));for(let s=0;s!==r;++s)i.setTexture3D(e[s]||i3,o[s])}function UQ(n,e,i){let t=this.cache,r=e.length,o=Ly(i,r);Zn(t,o)||(n.uniform1iv(this.addr,o),Qn(t,o));for(let s=0;s!==r;++s)i.setTextureCube(e[s]||n3,o[s])}function VQ(n,e,i){let t=this.cache,r=e.length,o=Ly(i,r);Zn(t,o)||(n.uniform1iv(this.addr,o),Qn(t,o));for(let s=0;s!==r;++s)i.setTexture2DArray(e[s]||t3,o[s])}function zQ(n){switch(n){case 5126:return MQ;case 35664:return SQ;case 35665:return RQ;case 35666:return TQ;case 35674:return CQ;case 35675:return EQ;case 35676:return DQ;case 5124:case 35670:return AQ;case 35667:case 35671:return IQ;case 35668:case 35672:return PQ;case 35669:case 35673:return kQ;case 5125:return FQ;case 36294:return jQ;case 36295:return OQ;case 36296:return NQ;case 35678:case 36198:case 36298:case 36306:case 35682:return LQ;case 35679:case 36299:case 36307:return BQ;case 35680:case 36300:case 36308:case 36293:return UQ;case 36289:case 36303:case 36311:case 36292:return VQ}}var qC=class{constructor(e,i,t){this.id=e,this.addr=t,this.cache=[],this.type=i.type,this.setValue=wQ(i.type)}},XC=class{constructor(e,i,t){this.id=e,this.addr=t,this.cache=[],this.type=i.type,this.size=i.size,this.setValue=zQ(i.type)}},YC=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,i,t){let r=this.seq;for(let o=0,s=r.length;o!==s;++o){let a=r[o];a.setValue(e,i[a.id],t)}}},$T=/(\w+)(\])?(\[|\.)?/g;function $2(n,e){n.seq.push(e),n.map[e.id]=e}function HQ(n,e,i){let t=n.name,r=t.length;for($T.lastIndex=0;;){let o=$T.exec(t),s=$T.lastIndex,a=o[1],c=o[2]==="]",l=o[3];if(c&&(a=a|0),l===void 0||l==="["&&s+2===r){$2(i,l===void 0?new qC(a,n,e):new XC(a,n,e));break}else{let u=i.map[a];u===void 0&&(u=new YC(a),$2(i,u)),i=u}}}var Bh=class{constructor(e,i){this.seq=[],this.map={};let t=e.getProgramParameter(i,e.ACTIVE_UNIFORMS);for(let r=0;r<t;++r){let o=e.getActiveUniform(i,r),s=e.getUniformLocation(i,o.name);HQ(o,s,this)}}setValue(e,i,t,r){let o=this.map[i];o!==void 0&&o.setValue(e,t,r)}setOptional(e,i,t){let r=i[t];r!==void 0&&this.setValue(e,t,r)}static upload(e,i,t,r){for(let o=0,s=i.length;o!==s;++o){let a=i[o],c=t[a.id];c.needsUpdate!==!1&&a.setValue(e,c.value,r)}}static seqWithValue(e,i){let t=[];for(let r=0,o=e.length;r!==o;++r){let s=e[r];s.id in i&&t.push(s)}return t}};function q2(n,e,i){let t=n.createShader(e);return n.shaderSource(t,i),n.compileShader(t),t}var GQ=37297,WQ=0;function $Q(n,e){let i=n.split(`
`),t=[],r=Math.max(e-6,0),o=Math.min(e+6,i.length);for(let s=r;s<o;s++){let a=s+1;t.push(`${a===e?">":" "} ${a}: ${i[s]}`)}return t.join(`
`)}function qQ(n){let e=Di.getPrimaries(Di.workingColorSpace),i=Di.getPrimaries(n),t;switch(e===i?t="":e===Rp&&i===Sp?t="LinearDisplayP3ToLinearSRGB":e===Sp&&i===Rp&&(t="LinearSRGBToLinearDisplayP3"),n){case jn:case ng:return[t,"LinearTransferOETF"];case Pn:case Ny:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[t,"LinearTransferOETF"]}}function X2(n,e,i){let t=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(t&&r==="")return"";let o=/ERROR: 0:(\d+)/.exec(r);if(o){let s=parseInt(o[1]);return i.toUpperCase()+`

`+r+`

`+$Q(n.getShaderSource(e),s)}else return r}function XQ(n,e){let i=qQ(e);return`vec4 ${n}( vec4 value ) { return ${i[0]}( ${i[1]}( value ) ); }`}function YQ(n,e){let i;switch(e){case vL:i="Linear";break;case yL:i="Reinhard";break;case xL:i="OptimizedCineon";break;case wL:i="ACESFilmic";break;case SL:i="AgX";break;case RL:i="Neutral";break;case ML:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),i="Linear"}return"vec3 "+n+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function ZQ(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(mp).join(`
`)}function QQ(n){let e=[];for(let i in n){let t=n[i];t!==!1&&e.push("#define "+i+" "+t)}return e.join(`
`)}function KQ(n,e){let i={},t=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<t;r++){let o=n.getActiveAttrib(e,r),s=o.name,a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),i[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return i}function mp(n){return n!==""}function Y2(n,e){let i=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Z2(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var JQ=/^[ \t]*#include +<([\w\d./]+)>/gm;function ZC(n){return n.replace(JQ,tK)}var eK=new Map;function tK(n,e){let i=ri[e];if(i===void 0){let t=eK.get(e);if(t!==void 0)i=ri[t],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,t);else throw new Error("Can not resolve #include <"+e+">")}return ZC(i)}var iK=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Q2(n){return n.replace(iK,nK)}function nK(n,e,i,t){let r="";for(let o=parseInt(e);o<parseInt(i);o++)r+=t.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function K2(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function rK(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===qE?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===YN?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ys&&(e="SHADOWMAP_TYPE_VSM"),e}function oK(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case tc:case nl:e="ENVMAP_TYPE_CUBE";break;case of:e="ENVMAP_TYPE_CUBE_UV";break}return e}function sK(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case nl:e="ENVMAP_MODE_REFRACTION";break}return e}function aK(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Jp:e="ENVMAP_BLENDING_MULTIPLY";break;case bL:e="ENVMAP_BLENDING_MIX";break;case _L:e="ENVMAP_BLENDING_ADD";break}return e}function cK(n){let e=n.envMapCubeUVHeight;if(e===null)return null;let i=Math.log2(e)-2,t=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,i),7*16)),texelHeight:t,maxMip:i}}function lK(n,e,i,t){let r=n.getContext(),o=i.defines,s=i.vertexShader,a=i.fragmentShader,c=rK(i),l=oK(i),d=sK(i),u=aK(i),h=cK(i),f=ZQ(i),p=QQ(o),b=r.createProgram(),m,g,v=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(m=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,p].filter(mp).join(`
`),m.length>0&&(m+=`
`),g=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,p].filter(mp).join(`
`),g.length>0&&(g+=`
`)):(m=[K2(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,p,i.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",i.batching?"#define USE_BATCHING":"",i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.instancingMorph?"#define USE_INSTANCING_MORPH":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+d:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+i.anisotropyMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.morphColors?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+c:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.useLegacyLights?"#define LEGACY_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(mp).join(`
`),g=[K2(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,p,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+l:"",i.envMap?"#define "+d:"",i.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.dispersion?"#define USE_DISPERSION":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+c:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.useLegacyLights?"#define LEGACY_LIGHTS":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==Ja?"#define TONE_MAPPING":"",i.toneMapping!==Ja?ri.tonemapping_pars_fragment:"",i.toneMapping!==Ja?YQ("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",ri.colorspace_pars_fragment,XQ("linearToOutputTexel",i.outputColorSpace),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(mp).join(`
`)),s=ZC(s),s=Y2(s,i),s=Z2(s,i),a=ZC(a),a=Y2(a,i),a=Z2(a,i),s=Q2(s),a=Q2(a),i.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,m=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,g=["#define varying in",i.glslVersion===LC?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===LC?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);let _=v+m+s,y=v+g+a,C=q2(r,r.VERTEX_SHADER,_),R=q2(r,r.FRAGMENT_SHADER,y);r.attachShader(b,C),r.attachShader(b,R),i.index0AttributeName!==void 0?r.bindAttribLocation(b,0,i.index0AttributeName):i.morphTargets===!0&&r.bindAttribLocation(b,0,"position"),r.linkProgram(b);function w(F){if(n.debug.checkShaderErrors){let V=r.getProgramInfoLog(b).trim(),O=r.getShaderInfoLog(C).trim(),K=r.getShaderInfoLog(R).trim(),ne=!0,G=!0;if(r.getProgramParameter(b,r.LINK_STATUS)===!1)if(ne=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,b,C,R);else{let $=X2(r,C,"vertex"),U=X2(r,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(b,r.VALIDATE_STATUS)+`

Material Name: `+F.name+`
Material Type: `+F.type+`

Program Info Log: `+V+`
`+$+`
`+U)}else V!==""?console.warn("THREE.WebGLProgram: Program Info Log:",V):(O===""||K==="")&&(G=!1);G&&(F.diagnostics={runnable:ne,programLog:V,vertexShader:{log:O,prefix:m},fragmentShader:{log:K,prefix:g}})}r.deleteShader(C),r.deleteShader(R),A=new Bh(r,b),S=KQ(r,b)}let A;this.getUniforms=function(){return A===void 0&&w(this),A};let S;this.getAttributes=function(){return S===void 0&&w(this),S};let x=i.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return x===!1&&(x=r.getProgramParameter(b,GQ)),x},this.destroy=function(){t.releaseStatesOfProgram(this),r.deleteProgram(b),this.program=void 0},this.type=i.shaderType,this.name=i.shaderName,this.id=WQ++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=C,this.fragmentShader=R,this}var dK=0,QC=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let i=e.vertexShader,t=e.fragmentShader,r=this._getShaderStage(i),o=this._getShaderStage(t),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){let i=this.materialCache.get(e);for(let t of i)t.usedTimes--,t.usedTimes===0&&this.shaderCache.delete(t.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let i=this.materialCache,t=i.get(e);return t===void 0&&(t=new Set,i.set(e,t)),t}_getShaderStage(e){let i=this.shaderCache,t=i.get(e);return t===void 0&&(t=new KC(e),i.set(e,t)),t}},KC=class{constructor(e){this.id=dK++,this.code=e,this.usedTimes=0}};function uK(n,e,i,t,r,o,s){let a=new zh,c=new QC,l=new Set,d=[],u=r.logarithmicDepthBuffer,h=r.vertexTextures,f=r.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(S){return l.add(S),S===0?"uv":`uv${S}`}function m(S,x,F,V,O){let K=V.fog,ne=O.geometry,G=S.isMeshStandardMaterial?V.environment:null,$=(S.isMeshStandardMaterial?i:e).get(S.envMap||G),U=$&&$.mapping===of?$.image.height:null,Z=p[S.type];S.precision!==null&&(f=r.getMaxPrecision(S.precision),f!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",f,"instead."));let me=ne.morphAttributes.position||ne.morphAttributes.normal||ne.morphAttributes.color,ke=me!==void 0?me.length:0,$e=0;ne.morphAttributes.position!==void 0&&($e=1),ne.morphAttributes.normal!==void 0&&($e=2),ne.morphAttributes.color!==void 0&&($e=3);let vt,Y,Ae,Ge;if(Z){let Ci=ls[Z];vt=Ci.vertexShader,Y=Ci.fragmentShader}else vt=S.vertexShader,Y=S.fragmentShader,c.update(S),Ae=c.getVertexShaderID(S),Ge=c.getFragmentShaderID(S);let N=n.getRenderTarget(),Se=O.isInstancedMesh===!0,Oe=O.isBatchedMesh===!0,B=!!S.map,yt=!!S.matcap,fe=!!$,Ie=!!S.aoMap,ye=!!S.lightMap,Be=!!S.bumpMap,De=!!S.normalMap,Ze=!!S.displacementMap,mt=!!S.emissiveMap,I=!!S.metalnessMap,E=!!S.roughnessMap,Q=S.anisotropy>0,we=S.clearcoat>0,Ee=S.dispersion>0,Re=S.iridescence>0,ut=S.sheen>0,ze=S.transmission>0,Ve=Q&&!!S.anisotropyMap,Mt=we&&!!S.clearcoatMap,Ne=we&&!!S.clearcoatNormalMap,ot=we&&!!S.clearcoatRoughnessMap,Ot=Re&&!!S.iridescenceMap,wt=Re&&!!S.iridescenceThicknessMap,it=ut&&!!S.sheenColorMap,zt=ut&&!!S.sheenRoughnessMap,si=!!S.specularMap,Pi=!!S.specularColorMap,Pt=!!S.specularIntensityMap,T=ze&&!!S.transmissionMap,W=ze&&!!S.thicknessMap,J=!!S.gradientMap,Te=!!S.alphaMap,Ue=S.alphaTest>0,ii=!!S.alphaHash,hi=!!S.extensions,fn=Ja;S.toneMapped&&(N===null||N.isXRRenderTarget===!0)&&(fn=n.toneMapping);let er={shaderID:Z,shaderType:S.type,shaderName:S.name,vertexShader:vt,fragmentShader:Y,defines:S.defines,customVertexShaderID:Ae,customFragmentShaderID:Ge,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:f,batching:Oe,instancing:Se,instancingColor:Se&&O.instanceColor!==null,instancingMorph:Se&&O.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:N===null?n.outputColorSpace:N.isXRRenderTarget===!0?N.texture.colorSpace:jn,alphaToCoverage:!!S.alphaToCoverage,map:B,matcap:yt,envMap:fe,envMapMode:fe&&$.mapping,envMapCubeUVHeight:U,aoMap:Ie,lightMap:ye,bumpMap:Be,normalMap:De,displacementMap:h&&Ze,emissiveMap:mt,normalMapObjectSpace:De&&S.normalMapType===BL,normalMapTangentSpace:De&&S.normalMapType===ul,metalnessMap:I,roughnessMap:E,anisotropy:Q,anisotropyMap:Ve,clearcoat:we,clearcoatMap:Mt,clearcoatNormalMap:Ne,clearcoatRoughnessMap:ot,dispersion:Ee,iridescence:Re,iridescenceMap:Ot,iridescenceThicknessMap:wt,sheen:ut,sheenColorMap:it,sheenRoughnessMap:zt,specularMap:si,specularColorMap:Pi,specularIntensityMap:Pt,transmission:ze,transmissionMap:T,thicknessMap:W,gradientMap:J,opaque:S.transparent===!1&&S.blending===ds&&S.alphaToCoverage===!1,alphaMap:Te,alphaTest:Ue,alphaHash:ii,combine:S.combine,mapUv:B&&b(S.map.channel),aoMapUv:Ie&&b(S.aoMap.channel),lightMapUv:ye&&b(S.lightMap.channel),bumpMapUv:Be&&b(S.bumpMap.channel),normalMapUv:De&&b(S.normalMap.channel),displacementMapUv:Ze&&b(S.displacementMap.channel),emissiveMapUv:mt&&b(S.emissiveMap.channel),metalnessMapUv:I&&b(S.metalnessMap.channel),roughnessMapUv:E&&b(S.roughnessMap.channel),anisotropyMapUv:Ve&&b(S.anisotropyMap.channel),clearcoatMapUv:Mt&&b(S.clearcoatMap.channel),clearcoatNormalMapUv:Ne&&b(S.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ot&&b(S.clearcoatRoughnessMap.channel),iridescenceMapUv:Ot&&b(S.iridescenceMap.channel),iridescenceThicknessMapUv:wt&&b(S.iridescenceThicknessMap.channel),sheenColorMapUv:it&&b(S.sheenColorMap.channel),sheenRoughnessMapUv:zt&&b(S.sheenRoughnessMap.channel),specularMapUv:si&&b(S.specularMap.channel),specularColorMapUv:Pi&&b(S.specularColorMap.channel),specularIntensityMapUv:Pt&&b(S.specularIntensityMap.channel),transmissionMapUv:T&&b(S.transmissionMap.channel),thicknessMapUv:W&&b(S.thicknessMap.channel),alphaMapUv:Te&&b(S.alphaMap.channel),vertexTangents:!!ne.attributes.tangent&&(De||Q),vertexColors:S.vertexColors,vertexAlphas:S.vertexColors===!0&&!!ne.attributes.color&&ne.attributes.color.itemSize===4,pointsUvs:O.isPoints===!0&&!!ne.attributes.uv&&(B||Te),fog:!!K,useFog:S.fog===!0,fogExp2:!!K&&K.isFogExp2,flatShading:S.flatShading===!0,sizeAttenuation:S.sizeAttenuation===!0,logarithmicDepthBuffer:u,skinning:O.isSkinnedMesh===!0,morphTargets:ne.morphAttributes.position!==void 0,morphNormals:ne.morphAttributes.normal!==void 0,morphColors:ne.morphAttributes.color!==void 0,morphTargetsCount:ke,morphTextureStride:$e,numDirLights:x.directional.length,numPointLights:x.point.length,numSpotLights:x.spot.length,numSpotLightMaps:x.spotLightMap.length,numRectAreaLights:x.rectArea.length,numHemiLights:x.hemi.length,numDirLightShadows:x.directionalShadowMap.length,numPointLightShadows:x.pointShadowMap.length,numSpotLightShadows:x.spotShadowMap.length,numSpotLightShadowsWithMaps:x.numSpotLightShadowsWithMaps,numLightProbes:x.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:S.dithering,shadowMapEnabled:n.shadowMap.enabled&&F.length>0,shadowMapType:n.shadowMap.type,toneMapping:fn,useLegacyLights:n._useLegacyLights,decodeVideoTexture:B&&S.map.isVideoTexture===!0&&Di.getTransfer(S.map.colorSpace)===Qi,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===Yn,flipSided:S.side===Hr,useDepthPacking:S.depthPacking>=0,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,extensionClipCullDistance:hi&&S.extensions.clipCullDistance===!0&&t.has("WEBGL_clip_cull_distance"),extensionMultiDraw:hi&&S.extensions.multiDraw===!0&&t.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:t.has("KHR_parallel_shader_compile"),customProgramCacheKey:S.customProgramCacheKey()};return er.vertexUv1s=l.has(1),er.vertexUv2s=l.has(2),er.vertexUv3s=l.has(3),l.clear(),er}function g(S){let x=[];if(S.shaderID?x.push(S.shaderID):(x.push(S.customVertexShaderID),x.push(S.customFragmentShaderID)),S.defines!==void 0)for(let F in S.defines)x.push(F),x.push(S.defines[F]);return S.isRawShaderMaterial===!1&&(v(x,S),_(x,S),x.push(n.outputColorSpace)),x.push(S.customProgramCacheKey),x.join()}function v(S,x){S.push(x.precision),S.push(x.outputColorSpace),S.push(x.envMapMode),S.push(x.envMapCubeUVHeight),S.push(x.mapUv),S.push(x.alphaMapUv),S.push(x.lightMapUv),S.push(x.aoMapUv),S.push(x.bumpMapUv),S.push(x.normalMapUv),S.push(x.displacementMapUv),S.push(x.emissiveMapUv),S.push(x.metalnessMapUv),S.push(x.roughnessMapUv),S.push(x.anisotropyMapUv),S.push(x.clearcoatMapUv),S.push(x.clearcoatNormalMapUv),S.push(x.clearcoatRoughnessMapUv),S.push(x.iridescenceMapUv),S.push(x.iridescenceThicknessMapUv),S.push(x.sheenColorMapUv),S.push(x.sheenRoughnessMapUv),S.push(x.specularMapUv),S.push(x.specularColorMapUv),S.push(x.specularIntensityMapUv),S.push(x.transmissionMapUv),S.push(x.thicknessMapUv),S.push(x.combine),S.push(x.fogExp2),S.push(x.sizeAttenuation),S.push(x.morphTargetsCount),S.push(x.morphAttributeCount),S.push(x.numDirLights),S.push(x.numPointLights),S.push(x.numSpotLights),S.push(x.numSpotLightMaps),S.push(x.numHemiLights),S.push(x.numRectAreaLights),S.push(x.numDirLightShadows),S.push(x.numPointLightShadows),S.push(x.numSpotLightShadows),S.push(x.numSpotLightShadowsWithMaps),S.push(x.numLightProbes),S.push(x.shadowMapType),S.push(x.toneMapping),S.push(x.numClippingPlanes),S.push(x.numClipIntersection),S.push(x.depthPacking)}function _(S,x){a.disableAll(),x.supportsVertexTextures&&a.enable(0),x.instancing&&a.enable(1),x.instancingColor&&a.enable(2),x.instancingMorph&&a.enable(3),x.matcap&&a.enable(4),x.envMap&&a.enable(5),x.normalMapObjectSpace&&a.enable(6),x.normalMapTangentSpace&&a.enable(7),x.clearcoat&&a.enable(8),x.iridescence&&a.enable(9),x.alphaTest&&a.enable(10),x.vertexColors&&a.enable(11),x.vertexAlphas&&a.enable(12),x.vertexUv1s&&a.enable(13),x.vertexUv2s&&a.enable(14),x.vertexUv3s&&a.enable(15),x.vertexTangents&&a.enable(16),x.anisotropy&&a.enable(17),x.alphaHash&&a.enable(18),x.batching&&a.enable(19),x.dispersion&&a.enable(20),S.push(a.mask),a.disableAll(),x.fog&&a.enable(0),x.useFog&&a.enable(1),x.flatShading&&a.enable(2),x.logarithmicDepthBuffer&&a.enable(3),x.skinning&&a.enable(4),x.morphTargets&&a.enable(5),x.morphNormals&&a.enable(6),x.morphColors&&a.enable(7),x.premultipliedAlpha&&a.enable(8),x.shadowMapEnabled&&a.enable(9),x.useLegacyLights&&a.enable(10),x.doubleSided&&a.enable(11),x.flipSided&&a.enable(12),x.useDepthPacking&&a.enable(13),x.dithering&&a.enable(14),x.transmission&&a.enable(15),x.sheen&&a.enable(16),x.opaque&&a.enable(17),x.pointsUvs&&a.enable(18),x.decodeVideoTexture&&a.enable(19),x.alphaToCoverage&&a.enable(20),S.push(a.mask)}function y(S){let x=p[S.type],F;if(x){let V=ls[x];F=Li.clone(V.uniforms)}else F=S.uniforms;return F}function C(S,x){let F;for(let V=0,O=d.length;V<O;V++){let K=d[V];if(K.cacheKey===x){F=K,++F.usedTimes;break}}return F===void 0&&(F=new lK(n,x,S,o),d.push(F)),F}function R(S){if(--S.usedTimes===0){let x=d.indexOf(S);d[x]=d[d.length-1],d.pop(),S.destroy()}}function w(S){c.remove(S)}function A(){c.dispose()}return{getParameters:m,getProgramCacheKey:g,getUniforms:y,acquireProgram:C,releaseProgram:R,releaseShaderCache:w,programs:d,dispose:A}}function hK(){let n=new WeakMap;function e(o){let s=n.get(o);return s===void 0&&(s={},n.set(o,s)),s}function i(o){n.delete(o)}function t(o,s,a){n.get(o)[s]=a}function r(){n=new WeakMap}return{get:e,remove:i,update:t,dispose:r}}function fK(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function J2(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function eN(){let n=[],e=0,i=[],t=[],r=[];function o(){e=0,i.length=0,t.length=0,r.length=0}function s(u,h,f,p,b,m){let g=n[e];return g===void 0?(g={id:u.id,object:u,geometry:h,material:f,groupOrder:p,renderOrder:u.renderOrder,z:b,group:m},n[e]=g):(g.id=u.id,g.object=u,g.geometry=h,g.material=f,g.groupOrder=p,g.renderOrder=u.renderOrder,g.z=b,g.group=m),e++,g}function a(u,h,f,p,b,m){let g=s(u,h,f,p,b,m);f.transmission>0?t.push(g):f.transparent===!0?r.push(g):i.push(g)}function c(u,h,f,p,b,m){let g=s(u,h,f,p,b,m);f.transmission>0?t.unshift(g):f.transparent===!0?r.unshift(g):i.unshift(g)}function l(u,h){i.length>1&&i.sort(u||fK),t.length>1&&t.sort(h||J2),r.length>1&&r.sort(h||J2)}function d(){for(let u=e,h=n.length;u<h;u++){let f=n[u];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:i,transmissive:t,transparent:r,init:o,push:a,unshift:c,finish:d,sort:l}}function mK(){let n=new WeakMap;function e(t,r){let o=n.get(t),s;return o===void 0?(s=new eN,n.set(t,[s])):r>=o.length?(s=new eN,o.push(s)):s=o[r],s}function i(){n=new WeakMap}return{get:e,dispose:i}}function pK(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let i;switch(e.type){case"DirectionalLight":i={direction:new M,color:new _e};break;case"SpotLight":i={position:new M,direction:new M,color:new _e,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new M,color:new _e,distance:0,decay:0};break;case"HemisphereLight":i={direction:new M,skyColor:new _e,groundColor:new _e};break;case"RectAreaLight":i={color:new _e,position:new M,halfWidth:new M,halfHeight:new M};break}return n[e.id]=i,i}}}function gK(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let i;switch(e.type){case"DirectionalLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new z};break;case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new z};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new z,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=i,i}}}var bK=0;function _K(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function vK(n){let e=new pK,i=gK(),t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)t.probe.push(new M);let r=new M,o=new je,s=new je;function a(l,d){let u=0,h=0,f=0;for(let F=0;F<9;F++)t.probe[F].set(0,0,0);let p=0,b=0,m=0,g=0,v=0,_=0,y=0,C=0,R=0,w=0,A=0;l.sort(_K);let S=d===!0?Math.PI:1;for(let F=0,V=l.length;F<V;F++){let O=l[F],K=O.color,ne=O.intensity,G=O.distance,$=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)u+=K.r*ne*S,h+=K.g*ne*S,f+=K.b*ne*S;else if(O.isLightProbe){for(let U=0;U<9;U++)t.probe[U].addScaledVector(O.sh.coefficients[U],ne);A++}else if(O.isDirectionalLight){let U=e.get(O);if(U.color.copy(O.color).multiplyScalar(O.intensity*S),O.castShadow){let Z=O.shadow,me=i.get(O);me.shadowBias=Z.bias,me.shadowNormalBias=Z.normalBias,me.shadowRadius=Z.radius,me.shadowMapSize=Z.mapSize,t.directionalShadow[p]=me,t.directionalShadowMap[p]=$,t.directionalShadowMatrix[p]=O.shadow.matrix,_++}t.directional[p]=U,p++}else if(O.isSpotLight){let U=e.get(O);U.position.setFromMatrixPosition(O.matrixWorld),U.color.copy(K).multiplyScalar(ne*S),U.distance=G,U.coneCos=Math.cos(O.angle),U.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),U.decay=O.decay,t.spot[m]=U;let Z=O.shadow;if(O.map&&(t.spotLightMap[R]=O.map,R++,Z.updateMatrices(O),O.castShadow&&w++),t.spotLightMatrix[m]=Z.matrix,O.castShadow){let me=i.get(O);me.shadowBias=Z.bias,me.shadowNormalBias=Z.normalBias,me.shadowRadius=Z.radius,me.shadowMapSize=Z.mapSize,t.spotShadow[m]=me,t.spotShadowMap[m]=$,C++}m++}else if(O.isRectAreaLight){let U=e.get(O);U.color.copy(K).multiplyScalar(ne),U.halfWidth.set(O.width*.5,0,0),U.halfHeight.set(0,O.height*.5,0),t.rectArea[g]=U,g++}else if(O.isPointLight){let U=e.get(O);if(U.color.copy(O.color).multiplyScalar(O.intensity*S),U.distance=O.distance,U.decay=O.decay,O.castShadow){let Z=O.shadow,me=i.get(O);me.shadowBias=Z.bias,me.shadowNormalBias=Z.normalBias,me.shadowRadius=Z.radius,me.shadowMapSize=Z.mapSize,me.shadowCameraNear=Z.camera.near,me.shadowCameraFar=Z.camera.far,t.pointShadow[b]=me,t.pointShadowMap[b]=$,t.pointShadowMatrix[b]=O.shadow.matrix,y++}t.point[b]=U,b++}else if(O.isHemisphereLight){let U=e.get(O);U.skyColor.copy(O.color).multiplyScalar(ne*S),U.groundColor.copy(O.groundColor).multiplyScalar(ne*S),t.hemi[v]=U,v++}}g>0&&(n.has("OES_texture_float_linear")===!0?(t.rectAreaLTC1=qe.LTC_FLOAT_1,t.rectAreaLTC2=qe.LTC_FLOAT_2):(t.rectAreaLTC1=qe.LTC_HALF_1,t.rectAreaLTC2=qe.LTC_HALF_2)),t.ambient[0]=u,t.ambient[1]=h,t.ambient[2]=f;let x=t.hash;(x.directionalLength!==p||x.pointLength!==b||x.spotLength!==m||x.rectAreaLength!==g||x.hemiLength!==v||x.numDirectionalShadows!==_||x.numPointShadows!==y||x.numSpotShadows!==C||x.numSpotMaps!==R||x.numLightProbes!==A)&&(t.directional.length=p,t.spot.length=m,t.rectArea.length=g,t.point.length=b,t.hemi.length=v,t.directionalShadow.length=_,t.directionalShadowMap.length=_,t.pointShadow.length=y,t.pointShadowMap.length=y,t.spotShadow.length=C,t.spotShadowMap.length=C,t.directionalShadowMatrix.length=_,t.pointShadowMatrix.length=y,t.spotLightMatrix.length=C+R-w,t.spotLightMap.length=R,t.numSpotLightShadowsWithMaps=w,t.numLightProbes=A,x.directionalLength=p,x.pointLength=b,x.spotLength=m,x.rectAreaLength=g,x.hemiLength=v,x.numDirectionalShadows=_,x.numPointShadows=y,x.numSpotShadows=C,x.numSpotMaps=R,x.numLightProbes=A,t.version=bK++)}function c(l,d){let u=0,h=0,f=0,p=0,b=0,m=d.matrixWorldInverse;for(let g=0,v=l.length;g<v;g++){let _=l[g];if(_.isDirectionalLight){let y=t.directional[u];y.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),y.direction.sub(r),y.direction.transformDirection(m),u++}else if(_.isSpotLight){let y=t.spot[f];y.position.setFromMatrixPosition(_.matrixWorld),y.position.applyMatrix4(m),y.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),y.direction.sub(r),y.direction.transformDirection(m),f++}else if(_.isRectAreaLight){let y=t.rectArea[p];y.position.setFromMatrixPosition(_.matrixWorld),y.position.applyMatrix4(m),s.identity(),o.copy(_.matrixWorld),o.premultiply(m),s.extractRotation(o),y.halfWidth.set(_.width*.5,0,0),y.halfHeight.set(0,_.height*.5,0),y.halfWidth.applyMatrix4(s),y.halfHeight.applyMatrix4(s),p++}else if(_.isPointLight){let y=t.point[h];y.position.setFromMatrixPosition(_.matrixWorld),y.position.applyMatrix4(m),h++}else if(_.isHemisphereLight){let y=t.hemi[b];y.direction.setFromMatrixPosition(_.matrixWorld),y.direction.transformDirection(m),b++}}}return{setup:a,setupView:c,state:t}}function tN(n){let e=new vK(n),i=[],t=[];function r(d){l.camera=d,i.length=0,t.length=0}function o(d){i.push(d)}function s(d){t.push(d)}function a(d){e.setup(i,d)}function c(d){e.setupView(i,d)}let l={lightsArray:i,shadowsArray:t,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:l,setupLights:a,setupLightsView:c,pushLight:o,pushShadow:s}}function yK(n){let e=new WeakMap;function i(r,o=0){let s=e.get(r),a;return s===void 0?(a=new tN(n),e.set(r,[a])):o>=s.length?(a=new tN(n),s.push(a)):a=s[o],a}function t(){e=new WeakMap}return{get:i,dispose:t}}var Fd=class extends dn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=LL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},kp=class extends dn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},xK=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,wK=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function MK(n,e,i){let t=new kd,r=new z,o=new z,s=new xi,a=new Fd({depthPacking:Oy}),c=new kp,l={},d=i.maxTextureSize,u={[us]:Hr,[Hr]:us,[Yn]:Yn},h=new Dt({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new z},radius:{value:4}},vertexShader:xK,fragmentShader:wK}),f=h.clone();f.defines.HORIZONTAL_PASS=1;let p=new ft;p.setAttribute("position",new di(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let b=new Le(p,h),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=qE;let g=this.type;this.render=function(R,w,A){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||R.length===0)return;let S=n.getRenderTarget(),x=n.getActiveCubeFace(),F=n.getActiveMipmapLevel(),V=n.state;V.setBlending(Qt),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);let O=g!==Ys&&this.type===Ys,K=g===Ys&&this.type!==Ys;for(let ne=0,G=R.length;ne<G;ne++){let $=R[ne],U=$.shadow;if(U===void 0){console.warn("THREE.WebGLShadowMap:",$,"has no shadow.");continue}if(U.autoUpdate===!1&&U.needsUpdate===!1)continue;r.copy(U.mapSize);let Z=U.getFrameExtents();if(r.multiply(Z),o.copy(U.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(o.x=Math.floor(d/Z.x),r.x=o.x*Z.x,U.mapSize.x=o.x),r.y>d&&(o.y=Math.floor(d/Z.y),r.y=o.y*Z.y,U.mapSize.y=o.y)),U.map===null||O===!0||K===!0){let ke=this.type!==Ys?{minFilter:li,magFilter:li}:{};U.map!==null&&U.map.dispose(),U.map=new oi(r.x,r.y,ke),U.map.texture.name=$.name+".shadowMap",U.camera.updateProjectionMatrix()}n.setRenderTarget(U.map),n.clear();let me=U.getViewportCount();for(let ke=0;ke<me;ke++){let $e=U.getViewport(ke);s.set(o.x*$e.x,o.y*$e.y,o.x*$e.z,o.y*$e.w),V.viewport(s),U.updateMatrices($,ke),t=U.getFrustum(),y(w,A,U.camera,$,this.type)}U.isPointLightShadow!==!0&&this.type===Ys&&v(U,A),U.needsUpdate=!1}g=this.type,m.needsUpdate=!1,n.setRenderTarget(S,x,F)};function v(R,w){let A=e.update(b);h.defines.VSM_SAMPLES!==R.blurSamples&&(h.defines.VSM_SAMPLES=R.blurSamples,f.defines.VSM_SAMPLES=R.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),R.mapPass===null&&(R.mapPass=new oi(r.x,r.y)),h.uniforms.shadow_pass.value=R.map.texture,h.uniforms.resolution.value=R.mapSize,h.uniforms.radius.value=R.radius,n.setRenderTarget(R.mapPass),n.clear(),n.renderBufferDirect(w,null,A,h,b,null),f.uniforms.shadow_pass.value=R.mapPass.texture,f.uniforms.resolution.value=R.mapSize,f.uniforms.radius.value=R.radius,n.setRenderTarget(R.map),n.clear(),n.renderBufferDirect(w,null,A,f,b,null)}function _(R,w,A,S){let x=null,F=A.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(F!==void 0)x=F;else if(x=A.isPointLight===!0?c:a,n.localClippingEnabled&&w.clipShadows===!0&&Array.isArray(w.clippingPlanes)&&w.clippingPlanes.length!==0||w.displacementMap&&w.displacementScale!==0||w.alphaMap&&w.alphaTest>0||w.map&&w.alphaTest>0){let V=x.uuid,O=w.uuid,K=l[V];K===void 0&&(K={},l[V]=K);let ne=K[O];ne===void 0&&(ne=x.clone(),K[O]=ne,w.addEventListener("dispose",C)),x=ne}if(x.visible=w.visible,x.wireframe=w.wireframe,S===Ys?x.side=w.shadowSide!==null?w.shadowSide:w.side:x.side=w.shadowSide!==null?w.shadowSide:u[w.side],x.alphaMap=w.alphaMap,x.alphaTest=w.alphaTest,x.map=w.map,x.clipShadows=w.clipShadows,x.clippingPlanes=w.clippingPlanes,x.clipIntersection=w.clipIntersection,x.displacementMap=w.displacementMap,x.displacementScale=w.displacementScale,x.displacementBias=w.displacementBias,x.wireframeLinewidth=w.wireframeLinewidth,x.linewidth=w.linewidth,A.isPointLight===!0&&x.isMeshDistanceMaterial===!0){let V=n.properties.get(x);V.light=A}return x}function y(R,w,A,S,x){if(R.visible===!1)return;if(R.layers.test(w.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&x===Ys)&&(!R.frustumCulled||t.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,R.matrixWorld);let O=e.update(R),K=R.material;if(Array.isArray(K)){let ne=O.groups;for(let G=0,$=ne.length;G<$;G++){let U=ne[G],Z=K[U.materialIndex];if(Z&&Z.visible){let me=_(R,Z,S,x);R.onBeforeShadow(n,R,w,A,O,me,U),n.renderBufferDirect(A,null,O,me,R,U),R.onAfterShadow(n,R,w,A,O,me,U)}}}else if(K.visible){let ne=_(R,K,S,x);R.onBeforeShadow(n,R,w,A,O,ne,null),n.renderBufferDirect(A,null,O,ne,R,null),R.onAfterShadow(n,R,w,A,O,ne,null)}}let V=R.children;for(let O=0,K=V.length;O<K;O++)y(V[O],w,A,S,x)}function C(R){R.target.removeEventListener("dispose",C);for(let A in l){let S=l[A],x=R.target.uuid;x in S&&(S[x].dispose(),delete S[x])}}}function SK(n){function e(){let T=!1,W=new xi,J=null,Te=new xi(0,0,0,0);return{setMask:function(Ue){J!==Ue&&!T&&(n.colorMask(Ue,Ue,Ue,Ue),J=Ue)},setLocked:function(Ue){T=Ue},setClear:function(Ue,ii,hi,fn,er){er===!0&&(Ue*=fn,ii*=fn,hi*=fn),W.set(Ue,ii,hi,fn),Te.equals(W)===!1&&(n.clearColor(Ue,ii,hi,fn),Te.copy(W))},reset:function(){T=!1,J=null,Te.set(-1,0,0,0)}}}function i(){let T=!1,W=null,J=null,Te=null;return{setTest:function(Ue){Ue?Ge(n.DEPTH_TEST):N(n.DEPTH_TEST)},setMask:function(Ue){W!==Ue&&!T&&(n.depthMask(Ue),W=Ue)},setFunc:function(Ue){if(J!==Ue){switch(Ue){case dL:n.depthFunc(n.NEVER);break;case uL:n.depthFunc(n.ALWAYS);break;case hL:n.depthFunc(n.LESS);break;case vp:n.depthFunc(n.LEQUAL);break;case fL:n.depthFunc(n.EQUAL);break;case mL:n.depthFunc(n.GEQUAL);break;case pL:n.depthFunc(n.GREATER);break;case gL:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}J=Ue}},setLocked:function(Ue){T=Ue},setClear:function(Ue){Te!==Ue&&(n.clearDepth(Ue),Te=Ue)},reset:function(){T=!1,W=null,J=null,Te=null}}}function t(){let T=!1,W=null,J=null,Te=null,Ue=null,ii=null,hi=null,fn=null,er=null;return{setTest:function(Ci){T||(Ci?Ge(n.STENCIL_TEST):N(n.STENCIL_TEST))},setMask:function(Ci){W!==Ci&&!T&&(n.stencilMask(Ci),W=Ci)},setFunc:function(Ci,Ln,nn){(J!==Ci||Te!==Ln||Ue!==nn)&&(n.stencilFunc(Ci,Ln,nn),J=Ci,Te=Ln,Ue=nn)},setOp:function(Ci,Ln,nn){(ii!==Ci||hi!==Ln||fn!==nn)&&(n.stencilOp(Ci,Ln,nn),ii=Ci,hi=Ln,fn=nn)},setLocked:function(Ci){T=Ci},setClear:function(Ci){er!==Ci&&(n.clearStencil(Ci),er=Ci)},reset:function(){T=!1,W=null,J=null,Te=null,Ue=null,ii=null,hi=null,fn=null,er=null}}}let r=new e,o=new i,s=new t,a=new WeakMap,c=new WeakMap,l={},d={},u=new WeakMap,h=[],f=null,p=!1,b=null,m=null,g=null,v=null,_=null,y=null,C=null,R=new _e(0,0,0),w=0,A=!1,S=null,x=null,F=null,V=null,O=null,K=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),ne=!1,G=0,$=n.getParameter(n.VERSION);$.indexOf("WebGL")!==-1?(G=parseFloat(/^WebGL (\d)/.exec($)[1]),ne=G>=1):$.indexOf("OpenGL ES")!==-1&&(G=parseFloat(/^OpenGL ES (\d)/.exec($)[1]),ne=G>=2);let U=null,Z={},me=n.getParameter(n.SCISSOR_BOX),ke=n.getParameter(n.VIEWPORT),$e=new xi().fromArray(me),vt=new xi().fromArray(ke);function Y(T,W,J,Te){let Ue=new Uint8Array(4),ii=n.createTexture();n.bindTexture(T,ii),n.texParameteri(T,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(T,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let hi=0;hi<J;hi++)T===n.TEXTURE_3D||T===n.TEXTURE_2D_ARRAY?n.texImage3D(W,0,n.RGBA,1,1,Te,0,n.RGBA,n.UNSIGNED_BYTE,Ue):n.texImage2D(W+hi,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ue);return ii}let Ae={};Ae[n.TEXTURE_2D]=Y(n.TEXTURE_2D,n.TEXTURE_2D,1),Ae[n.TEXTURE_CUBE_MAP]=Y(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ae[n.TEXTURE_2D_ARRAY]=Y(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ae[n.TEXTURE_3D]=Y(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),o.setClear(1),s.setClear(0),Ge(n.DEPTH_TEST),o.setFunc(vp),Be(!1),De(aC),Ge(n.CULL_FACE),Ie(Qt);function Ge(T){l[T]!==!0&&(n.enable(T),l[T]=!0)}function N(T){l[T]!==!1&&(n.disable(T),l[T]=!1)}function Se(T,W){return d[T]!==W?(n.bindFramebuffer(T,W),d[T]=W,T===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=W),T===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=W),!0):!1}function Oe(T,W){let J=h,Te=!1;if(T){J=u.get(W),J===void 0&&(J=[],u.set(W,J));let Ue=T.textures;if(J.length!==Ue.length||J[0]!==n.COLOR_ATTACHMENT0){for(let ii=0,hi=Ue.length;ii<hi;ii++)J[ii]=n.COLOR_ATTACHMENT0+ii;J.length=Ue.length,Te=!0}}else J[0]!==n.BACK&&(J[0]=n.BACK,Te=!0);Te&&n.drawBuffers(J)}function B(T){return f!==T?(n.useProgram(T),f=T,!0):!1}let yt={[gr]:n.FUNC_ADD,[ZN]:n.FUNC_SUBTRACT,[QN]:n.FUNC_REVERSE_SUBTRACT};yt[KN]=n.MIN,yt[JN]=n.MAX;let fe={[dl]:n.ZERO,[eL]:n.ONE,[tL]:n.SRC_COLOR,[Cd]:n.SRC_ALPHA,[oL]:n.SRC_ALPHA_SATURATE,[rf]:n.DST_COLOR,[nf]:n.DST_ALPHA,[iL]:n.ONE_MINUS_SRC_COLOR,[Ed]:n.ONE_MINUS_SRC_ALPHA,[rL]:n.ONE_MINUS_DST_COLOR,[nL]:n.ONE_MINUS_DST_ALPHA,[sL]:n.CONSTANT_COLOR,[aL]:n.ONE_MINUS_CONSTANT_COLOR,[cL]:n.CONSTANT_ALPHA,[lL]:n.ONE_MINUS_CONSTANT_ALPHA};function Ie(T,W,J,Te,Ue,ii,hi,fn,er,Ci){if(T===Qt){p===!0&&(N(n.BLEND),p=!1);return}if(p===!1&&(Ge(n.BLEND),p=!0),T!==zd){if(T!==b||Ci!==A){if((m!==gr||_!==gr)&&(n.blendEquation(n.FUNC_ADD),m=gr,_=gr),Ci)switch(T){case ds:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Td:n.blendFunc(n.ONE,n.ONE);break;case cC:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case lC:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",T);break}else switch(T){case ds:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Td:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case cC:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case lC:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",T);break}g=null,v=null,y=null,C=null,R.set(0,0,0),w=0,b=T,A=Ci}return}Ue=Ue||W,ii=ii||J,hi=hi||Te,(W!==m||Ue!==_)&&(n.blendEquationSeparate(yt[W],yt[Ue]),m=W,_=Ue),(J!==g||Te!==v||ii!==y||hi!==C)&&(n.blendFuncSeparate(fe[J],fe[Te],fe[ii],fe[hi]),g=J,v=Te,y=ii,C=hi),(fn.equals(R)===!1||er!==w)&&(n.blendColor(fn.r,fn.g,fn.b,er),R.copy(fn),w=er),b=T,A=!1}function ye(T,W){T.side===Yn?N(n.CULL_FACE):Ge(n.CULL_FACE);let J=T.side===Hr;W&&(J=!J),Be(J),T.blending===ds&&T.transparent===!1?Ie(Qt):Ie(T.blending,T.blendEquation,T.blendSrc,T.blendDst,T.blendEquationAlpha,T.blendSrcAlpha,T.blendDstAlpha,T.blendColor,T.blendAlpha,T.premultipliedAlpha),o.setFunc(T.depthFunc),o.setTest(T.depthTest),o.setMask(T.depthWrite),r.setMask(T.colorWrite);let Te=T.stencilWrite;s.setTest(Te),Te&&(s.setMask(T.stencilWriteMask),s.setFunc(T.stencilFunc,T.stencilRef,T.stencilFuncMask),s.setOp(T.stencilFail,T.stencilZFail,T.stencilZPass)),mt(T.polygonOffset,T.polygonOffsetFactor,T.polygonOffsetUnits),T.alphaToCoverage===!0?Ge(n.SAMPLE_ALPHA_TO_COVERAGE):N(n.SAMPLE_ALPHA_TO_COVERAGE)}function Be(T){S!==T&&(T?n.frontFace(n.CW):n.frontFace(n.CCW),S=T)}function De(T){T!==qN?(Ge(n.CULL_FACE),T!==x&&(T===aC?n.cullFace(n.BACK):T===XN?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):N(n.CULL_FACE),x=T}function Ze(T){T!==F&&(ne&&n.lineWidth(T),F=T)}function mt(T,W,J){T?(Ge(n.POLYGON_OFFSET_FILL),(V!==W||O!==J)&&(n.polygonOffset(W,J),V=W,O=J)):N(n.POLYGON_OFFSET_FILL)}function I(T){T?Ge(n.SCISSOR_TEST):N(n.SCISSOR_TEST)}function E(T){T===void 0&&(T=n.TEXTURE0+K-1),U!==T&&(n.activeTexture(T),U=T)}function Q(T,W,J){J===void 0&&(U===null?J=n.TEXTURE0+K-1:J=U);let Te=Z[J];Te===void 0&&(Te={type:void 0,texture:void 0},Z[J]=Te),(Te.type!==T||Te.texture!==W)&&(U!==J&&(n.activeTexture(J),U=J),n.bindTexture(T,W||Ae[T]),Te.type=T,Te.texture=W)}function we(){let T=Z[U];T!==void 0&&T.type!==void 0&&(n.bindTexture(T.type,null),T.type=void 0,T.texture=void 0)}function Ee(){try{n.compressedTexImage2D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}}function Re(){try{n.compressedTexImage3D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}}function ut(){try{n.texSubImage2D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}}function ze(){try{n.texSubImage3D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}}function Ve(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}}function Mt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}}function Ne(){try{n.texStorage2D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}}function ot(){try{n.texStorage3D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}}function Ot(){try{n.texImage2D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}}function wt(){try{n.texImage3D.apply(n,arguments)}catch(T){console.error("THREE.WebGLState:",T)}}function it(T){$e.equals(T)===!1&&(n.scissor(T.x,T.y,T.z,T.w),$e.copy(T))}function zt(T){vt.equals(T)===!1&&(n.viewport(T.x,T.y,T.z,T.w),vt.copy(T))}function si(T,W){let J=c.get(W);J===void 0&&(J=new WeakMap,c.set(W,J));let Te=J.get(T);Te===void 0&&(Te=n.getUniformBlockIndex(W,T.name),J.set(T,Te))}function Pi(T,W){let Te=c.get(W).get(T);a.get(W)!==Te&&(n.uniformBlockBinding(W,Te,T.__bindingPointIndex),a.set(W,Te))}function Pt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),l={},U=null,Z={},d={},u=new WeakMap,h=[],f=null,p=!1,b=null,m=null,g=null,v=null,_=null,y=null,C=null,R=new _e(0,0,0),w=0,A=!1,S=null,x=null,F=null,V=null,O=null,$e.set(0,0,n.canvas.width,n.canvas.height),vt.set(0,0,n.canvas.width,n.canvas.height),r.reset(),o.reset(),s.reset()}return{buffers:{color:r,depth:o,stencil:s},enable:Ge,disable:N,bindFramebuffer:Se,drawBuffers:Oe,useProgram:B,setBlending:Ie,setMaterial:ye,setFlipSided:Be,setCullFace:De,setLineWidth:Ze,setPolygonOffset:mt,setScissorTest:I,activeTexture:E,bindTexture:Q,unbindTexture:we,compressedTexImage2D:Ee,compressedTexImage3D:Re,texImage2D:Ot,texImage3D:wt,updateUBOMapping:si,uniformBlockBinding:Pi,texStorage2D:Ne,texStorage3D:ot,texSubImage2D:ut,texSubImage3D:ze,compressedTexSubImage2D:Ve,compressedTexSubImage3D:Mt,scissor:it,viewport:zt,reset:Pt}}function RK(n,e,i,t,r,o,s){let a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),l=new z,d=new WeakMap,u,h=new WeakMap,f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(I,E){return f?new OffscreenCanvas(I,E):Ep("canvas")}function b(I,E,Q){let we=1,Ee=mt(I);if((Ee.width>Q||Ee.height>Q)&&(we=Q/Math.max(Ee.width,Ee.height)),we<1)if(typeof HTMLImageElement<"u"&&I instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&I instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&I instanceof ImageBitmap||typeof VideoFrame<"u"&&I instanceof VideoFrame){let Re=Math.floor(we*Ee.width),ut=Math.floor(we*Ee.height);u===void 0&&(u=p(Re,ut));let ze=E?p(Re,ut):u;return ze.width=Re,ze.height=ut,ze.getContext("2d").drawImage(I,0,0,Re,ut),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ee.width+"x"+Ee.height+") to ("+Re+"x"+ut+")."),ze}else return"data"in I&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ee.width+"x"+Ee.height+")."),I;return I}function m(I){return I.generateMipmaps&&I.minFilter!==li&&I.minFilter!==bn}function g(I){n.generateMipmap(I)}function v(I,E,Q,we,Ee=!1){if(I!==null){if(n[I]!==void 0)return n[I];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+I+"'")}let Re=E;if(E===n.RED&&(Q===n.FLOAT&&(Re=n.R32F),Q===n.HALF_FLOAT&&(Re=n.R16F),Q===n.UNSIGNED_BYTE&&(Re=n.R8)),E===n.RED_INTEGER&&(Q===n.UNSIGNED_BYTE&&(Re=n.R8UI),Q===n.UNSIGNED_SHORT&&(Re=n.R16UI),Q===n.UNSIGNED_INT&&(Re=n.R32UI),Q===n.BYTE&&(Re=n.R8I),Q===n.SHORT&&(Re=n.R16I),Q===n.INT&&(Re=n.R32I)),E===n.RG&&(Q===n.FLOAT&&(Re=n.RG32F),Q===n.HALF_FLOAT&&(Re=n.RG16F),Q===n.UNSIGNED_BYTE&&(Re=n.RG8)),E===n.RG_INTEGER&&(Q===n.UNSIGNED_BYTE&&(Re=n.RG8UI),Q===n.UNSIGNED_SHORT&&(Re=n.RG16UI),Q===n.UNSIGNED_INT&&(Re=n.RG32UI),Q===n.BYTE&&(Re=n.RG8I),Q===n.SHORT&&(Re=n.RG16I),Q===n.INT&&(Re=n.RG32I)),E===n.RGB&&Q===n.UNSIGNED_INT_5_9_9_9_REV&&(Re=n.RGB9_E5),E===n.RGBA){let ut=Ee?Mp:Di.getTransfer(we);Q===n.FLOAT&&(Re=n.RGBA32F),Q===n.HALF_FLOAT&&(Re=n.RGBA16F),Q===n.UNSIGNED_BYTE&&(Re=ut===Qi?n.SRGB8_ALPHA8:n.RGBA8),Q===n.UNSIGNED_SHORT_4_4_4_4&&(Re=n.RGBA4),Q===n.UNSIGNED_SHORT_5_5_5_1&&(Re=n.RGB5_A1)}return(Re===n.R16F||Re===n.R32F||Re===n.RG16F||Re===n.RG32F||Re===n.RGBA16F||Re===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Re}function _(I,E){return m(I)===!0||I.isFramebufferTexture&&I.minFilter!==li&&I.minFilter!==bn?Math.log2(Math.max(E.width,E.height))+1:I.mipmaps!==void 0&&I.mipmaps.length>0?I.mipmaps.length:I.isCompressedTexture&&Array.isArray(I.image)?E.mipmaps.length:1}function y(I){let E=I.target;E.removeEventListener("dispose",y),R(E),E.isVideoTexture&&d.delete(E)}function C(I){let E=I.target;E.removeEventListener("dispose",C),A(E)}function R(I){let E=t.get(I);if(E.__webglInit===void 0)return;let Q=I.source,we=h.get(Q);if(we){let Ee=we[E.__cacheKey];Ee.usedTimes--,Ee.usedTimes===0&&w(I),Object.keys(we).length===0&&h.delete(Q)}t.remove(I)}function w(I){let E=t.get(I);n.deleteTexture(E.__webglTexture);let Q=I.source,we=h.get(Q);delete we[E.__cacheKey],s.memory.textures--}function A(I){let E=t.get(I);if(I.depthTexture&&I.depthTexture.dispose(),I.isWebGLCubeRenderTarget)for(let we=0;we<6;we++){if(Array.isArray(E.__webglFramebuffer[we]))for(let Ee=0;Ee<E.__webglFramebuffer[we].length;Ee++)n.deleteFramebuffer(E.__webglFramebuffer[we][Ee]);else n.deleteFramebuffer(E.__webglFramebuffer[we]);E.__webglDepthbuffer&&n.deleteRenderbuffer(E.__webglDepthbuffer[we])}else{if(Array.isArray(E.__webglFramebuffer))for(let we=0;we<E.__webglFramebuffer.length;we++)n.deleteFramebuffer(E.__webglFramebuffer[we]);else n.deleteFramebuffer(E.__webglFramebuffer);if(E.__webglDepthbuffer&&n.deleteRenderbuffer(E.__webglDepthbuffer),E.__webglMultisampledFramebuffer&&n.deleteFramebuffer(E.__webglMultisampledFramebuffer),E.__webglColorRenderbuffer)for(let we=0;we<E.__webglColorRenderbuffer.length;we++)E.__webglColorRenderbuffer[we]&&n.deleteRenderbuffer(E.__webglColorRenderbuffer[we]);E.__webglDepthRenderbuffer&&n.deleteRenderbuffer(E.__webglDepthRenderbuffer)}let Q=I.textures;for(let we=0,Ee=Q.length;we<Ee;we++){let Re=t.get(Q[we]);Re.__webglTexture&&(n.deleteTexture(Re.__webglTexture),s.memory.textures--),t.remove(Q[we])}t.remove(I)}let S=0;function x(){S=0}function F(){let I=S;return I>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+I+" texture units while this GPU supports only "+r.maxTextures),S+=1,I}function V(I){let E=[];return E.push(I.wrapS),E.push(I.wrapT),E.push(I.wrapR||0),E.push(I.magFilter),E.push(I.minFilter),E.push(I.anisotropy),E.push(I.internalFormat),E.push(I.format),E.push(I.type),E.push(I.generateMipmaps),E.push(I.premultiplyAlpha),E.push(I.flipY),E.push(I.unpackAlignment),E.push(I.colorSpace),E.join()}function O(I,E){let Q=t.get(I);if(I.isVideoTexture&&De(I),I.isRenderTargetTexture===!1&&I.version>0&&Q.__version!==I.version){let we=I.image;if(we===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(we.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{$e(Q,I,E);return}}i.bindTexture(n.TEXTURE_2D,Q.__webglTexture,n.TEXTURE0+E)}function K(I,E){let Q=t.get(I);if(I.version>0&&Q.__version!==I.version){$e(Q,I,E);return}i.bindTexture(n.TEXTURE_2D_ARRAY,Q.__webglTexture,n.TEXTURE0+E)}function ne(I,E){let Q=t.get(I);if(I.version>0&&Q.__version!==I.version){$e(Q,I,E);return}i.bindTexture(n.TEXTURE_3D,Q.__webglTexture,n.TEXTURE0+E)}function G(I,E){let Q=t.get(I);if(I.version>0&&Q.__version!==I.version){vt(Q,I,E);return}i.bindTexture(n.TEXTURE_CUBE_MAP,Q.__webglTexture,n.TEXTURE0+E)}let $={[Go]:n.REPEAT,[to]:n.CLAMP_TO_EDGE,[Dd]:n.MIRRORED_REPEAT},U={[li]:n.NEAREST,[eg]:n.NEAREST_MIPMAP_NEAREST,[il]:n.NEAREST_MIPMAP_LINEAR,[bn]:n.LINEAR,[Md]:n.LINEAR_MIPMAP_NEAREST,[wo]:n.LINEAR_MIPMAP_LINEAR},Z={[UL]:n.NEVER,[$L]:n.ALWAYS,[VL]:n.LESS,[iD]:n.LEQUAL,[zL]:n.EQUAL,[WL]:n.GEQUAL,[HL]:n.GREATER,[GL]:n.NOTEQUAL};function me(I,E){if(E.type===Rr&&e.has("OES_texture_float_linear")===!1&&(E.magFilter===bn||E.magFilter===Md||E.magFilter===il||E.magFilter===wo||E.minFilter===bn||E.minFilter===Md||E.minFilter===il||E.minFilter===wo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(I,n.TEXTURE_WRAP_S,$[E.wrapS]),n.texParameteri(I,n.TEXTURE_WRAP_T,$[E.wrapT]),(I===n.TEXTURE_3D||I===n.TEXTURE_2D_ARRAY)&&n.texParameteri(I,n.TEXTURE_WRAP_R,$[E.wrapR]),n.texParameteri(I,n.TEXTURE_MAG_FILTER,U[E.magFilter]),n.texParameteri(I,n.TEXTURE_MIN_FILTER,U[E.minFilter]),E.compareFunction&&(n.texParameteri(I,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(I,n.TEXTURE_COMPARE_FUNC,Z[E.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(E.magFilter===li||E.minFilter!==il&&E.minFilter!==wo||E.type===Rr&&e.has("OES_texture_float_linear")===!1)return;if(E.anisotropy>1||t.get(E).__currentAnisotropy){let Q=e.get("EXT_texture_filter_anisotropic");n.texParameterf(I,Q.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(E.anisotropy,r.getMaxAnisotropy())),t.get(E).__currentAnisotropy=E.anisotropy}}}function ke(I,E){let Q=!1;I.__webglInit===void 0&&(I.__webglInit=!0,E.addEventListener("dispose",y));let we=E.source,Ee=h.get(we);Ee===void 0&&(Ee={},h.set(we,Ee));let Re=V(E);if(Re!==I.__cacheKey){Ee[Re]===void 0&&(Ee[Re]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,Q=!0),Ee[Re].usedTimes++;let ut=Ee[I.__cacheKey];ut!==void 0&&(Ee[I.__cacheKey].usedTimes--,ut.usedTimes===0&&w(E)),I.__cacheKey=Re,I.__webglTexture=Ee[Re].texture}return Q}function $e(I,E,Q){let we=n.TEXTURE_2D;(E.isDataArrayTexture||E.isCompressedArrayTexture)&&(we=n.TEXTURE_2D_ARRAY),E.isData3DTexture&&(we=n.TEXTURE_3D);let Ee=ke(I,E),Re=E.source;i.bindTexture(we,I.__webglTexture,n.TEXTURE0+Q);let ut=t.get(Re);if(Re.version!==ut.__version||Ee===!0){i.activeTexture(n.TEXTURE0+Q);let ze=Di.getPrimaries(Di.workingColorSpace),Ve=E.colorSpace===Xa?null:Di.getPrimaries(E.colorSpace),Mt=E.colorSpace===Xa||ze===Ve?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,E.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,E.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Mt);let Ne=b(E.image,!1,r.maxTextureSize);Ne=Ze(E,Ne);let ot=o.convert(E.format,E.colorSpace),Ot=o.convert(E.type),wt=v(E.internalFormat,ot,Ot,E.colorSpace,E.isVideoTexture);me(we,E);let it,zt=E.mipmaps,si=E.isVideoTexture!==!0,Pi=ut.__version===void 0||Ee===!0,Pt=Re.dataReady,T=_(E,Ne);if(E.isDepthTexture)wt=n.DEPTH_COMPONENT16,E.type===Rr?wt=n.DEPTH_COMPONENT32F:E.type===Ad?wt=n.DEPTH_COMPONENT24:E.type===la&&(wt=n.DEPTH24_STENCIL8),Pi&&(si?i.texStorage2D(n.TEXTURE_2D,1,wt,Ne.width,Ne.height):i.texImage2D(n.TEXTURE_2D,0,wt,Ne.width,Ne.height,0,ot,Ot,null));else if(E.isDataTexture)if(zt.length>0){si&&Pi&&i.texStorage2D(n.TEXTURE_2D,T,wt,zt[0].width,zt[0].height);for(let W=0,J=zt.length;W<J;W++)it=zt[W],si?Pt&&i.texSubImage2D(n.TEXTURE_2D,W,0,0,it.width,it.height,ot,Ot,it.data):i.texImage2D(n.TEXTURE_2D,W,wt,it.width,it.height,0,ot,Ot,it.data);E.generateMipmaps=!1}else si?(Pi&&i.texStorage2D(n.TEXTURE_2D,T,wt,Ne.width,Ne.height),Pt&&i.texSubImage2D(n.TEXTURE_2D,0,0,0,Ne.width,Ne.height,ot,Ot,Ne.data)):i.texImage2D(n.TEXTURE_2D,0,wt,Ne.width,Ne.height,0,ot,Ot,Ne.data);else if(E.isCompressedTexture)if(E.isCompressedArrayTexture){si&&Pi&&i.texStorage3D(n.TEXTURE_2D_ARRAY,T,wt,zt[0].width,zt[0].height,Ne.depth);for(let W=0,J=zt.length;W<J;W++)it=zt[W],E.format!==Mo?ot!==null?si?Pt&&i.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,W,0,0,0,it.width,it.height,Ne.depth,ot,it.data,0,0):i.compressedTexImage3D(n.TEXTURE_2D_ARRAY,W,wt,it.width,it.height,Ne.depth,0,it.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):si?Pt&&i.texSubImage3D(n.TEXTURE_2D_ARRAY,W,0,0,0,it.width,it.height,Ne.depth,ot,Ot,it.data):i.texImage3D(n.TEXTURE_2D_ARRAY,W,wt,it.width,it.height,Ne.depth,0,ot,Ot,it.data)}else{si&&Pi&&i.texStorage2D(n.TEXTURE_2D,T,wt,zt[0].width,zt[0].height);for(let W=0,J=zt.length;W<J;W++)it=zt[W],E.format!==Mo?ot!==null?si?Pt&&i.compressedTexSubImage2D(n.TEXTURE_2D,W,0,0,it.width,it.height,ot,it.data):i.compressedTexImage2D(n.TEXTURE_2D,W,wt,it.width,it.height,0,it.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):si?Pt&&i.texSubImage2D(n.TEXTURE_2D,W,0,0,it.width,it.height,ot,Ot,it.data):i.texImage2D(n.TEXTURE_2D,W,wt,it.width,it.height,0,ot,Ot,it.data)}else if(E.isDataArrayTexture)si?(Pi&&i.texStorage3D(n.TEXTURE_2D_ARRAY,T,wt,Ne.width,Ne.height,Ne.depth),Pt&&i.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ne.width,Ne.height,Ne.depth,ot,Ot,Ne.data)):i.texImage3D(n.TEXTURE_2D_ARRAY,0,wt,Ne.width,Ne.height,Ne.depth,0,ot,Ot,Ne.data);else if(E.isData3DTexture)si?(Pi&&i.texStorage3D(n.TEXTURE_3D,T,wt,Ne.width,Ne.height,Ne.depth),Pt&&i.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ne.width,Ne.height,Ne.depth,ot,Ot,Ne.data)):i.texImage3D(n.TEXTURE_3D,0,wt,Ne.width,Ne.height,Ne.depth,0,ot,Ot,Ne.data);else if(E.isFramebufferTexture){if(Pi)if(si)i.texStorage2D(n.TEXTURE_2D,T,wt,Ne.width,Ne.height);else{let W=Ne.width,J=Ne.height;for(let Te=0;Te<T;Te++)i.texImage2D(n.TEXTURE_2D,Te,wt,W,J,0,ot,Ot,null),W>>=1,J>>=1}}else if(zt.length>0){if(si&&Pi){let W=mt(zt[0]);i.texStorage2D(n.TEXTURE_2D,T,wt,W.width,W.height)}for(let W=0,J=zt.length;W<J;W++)it=zt[W],si?Pt&&i.texSubImage2D(n.TEXTURE_2D,W,0,0,ot,Ot,it):i.texImage2D(n.TEXTURE_2D,W,wt,ot,Ot,it);E.generateMipmaps=!1}else if(si){if(Pi){let W=mt(Ne);i.texStorage2D(n.TEXTURE_2D,T,wt,W.width,W.height)}Pt&&i.texSubImage2D(n.TEXTURE_2D,0,0,0,ot,Ot,Ne)}else i.texImage2D(n.TEXTURE_2D,0,wt,ot,Ot,Ne);m(E)&&g(we),ut.__version=Re.version,E.onUpdate&&E.onUpdate(E)}I.__version=E.version}function vt(I,E,Q){if(E.image.length!==6)return;let we=ke(I,E),Ee=E.source;i.bindTexture(n.TEXTURE_CUBE_MAP,I.__webglTexture,n.TEXTURE0+Q);let Re=t.get(Ee);if(Ee.version!==Re.__version||we===!0){i.activeTexture(n.TEXTURE0+Q);let ut=Di.getPrimaries(Di.workingColorSpace),ze=E.colorSpace===Xa?null:Di.getPrimaries(E.colorSpace),Ve=E.colorSpace===Xa||ut===ze?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,E.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,E.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ve);let Mt=E.isCompressedTexture||E.image[0].isCompressedTexture,Ne=E.image[0]&&E.image[0].isDataTexture,ot=[];for(let J=0;J<6;J++)!Mt&&!Ne?ot[J]=b(E.image[J],!0,r.maxCubemapSize):ot[J]=Ne?E.image[J].image:E.image[J],ot[J]=Ze(E,ot[J]);let Ot=ot[0],wt=o.convert(E.format,E.colorSpace),it=o.convert(E.type),zt=v(E.internalFormat,wt,it,E.colorSpace),si=E.isVideoTexture!==!0,Pi=Re.__version===void 0||we===!0,Pt=Ee.dataReady,T=_(E,Ot);me(n.TEXTURE_CUBE_MAP,E);let W;if(Mt){si&&Pi&&i.texStorage2D(n.TEXTURE_CUBE_MAP,T,zt,Ot.width,Ot.height);for(let J=0;J<6;J++){W=ot[J].mipmaps;for(let Te=0;Te<W.length;Te++){let Ue=W[Te];E.format!==Mo?wt!==null?si?Pt&&i.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,Te,0,0,Ue.width,Ue.height,wt,Ue.data):i.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,Te,zt,Ue.width,Ue.height,0,Ue.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):si?Pt&&i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,Te,0,0,Ue.width,Ue.height,wt,it,Ue.data):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,Te,zt,Ue.width,Ue.height,0,wt,it,Ue.data)}}}else{if(W=E.mipmaps,si&&Pi){W.length>0&&T++;let J=mt(ot[0]);i.texStorage2D(n.TEXTURE_CUBE_MAP,T,zt,J.width,J.height)}for(let J=0;J<6;J++)if(Ne){si?Pt&&i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,0,0,ot[J].width,ot[J].height,wt,it,ot[J].data):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,zt,ot[J].width,ot[J].height,0,wt,it,ot[J].data);for(let Te=0;Te<W.length;Te++){let ii=W[Te].image[J].image;si?Pt&&i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,Te+1,0,0,ii.width,ii.height,wt,it,ii.data):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,Te+1,zt,ii.width,ii.height,0,wt,it,ii.data)}}else{si?Pt&&i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,0,0,wt,it,ot[J]):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,zt,wt,it,ot[J]);for(let Te=0;Te<W.length;Te++){let Ue=W[Te];si?Pt&&i.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,Te+1,0,0,wt,it,Ue.image[J]):i.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,Te+1,zt,wt,it,Ue.image[J])}}}m(E)&&g(n.TEXTURE_CUBE_MAP),Re.__version=Ee.version,E.onUpdate&&E.onUpdate(E)}I.__version=E.version}function Y(I,E,Q,we,Ee,Re){let ut=o.convert(Q.format,Q.colorSpace),ze=o.convert(Q.type),Ve=v(Q.internalFormat,ut,ze,Q.colorSpace);if(!t.get(E).__hasExternalTextures){let Ne=Math.max(1,E.width>>Re),ot=Math.max(1,E.height>>Re);Ee===n.TEXTURE_3D||Ee===n.TEXTURE_2D_ARRAY?i.texImage3D(Ee,Re,Ve,Ne,ot,E.depth,0,ut,ze,null):i.texImage2D(Ee,Re,Ve,Ne,ot,0,ut,ze,null)}i.bindFramebuffer(n.FRAMEBUFFER,I),Be(E)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,we,Ee,t.get(Q).__webglTexture,0,ye(E)):(Ee===n.TEXTURE_2D||Ee>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ee<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,we,Ee,t.get(Q).__webglTexture,Re),i.bindFramebuffer(n.FRAMEBUFFER,null)}function Ae(I,E,Q){if(n.bindRenderbuffer(n.RENDERBUFFER,I),E.depthBuffer&&!E.stencilBuffer){let we=n.DEPTH_COMPONENT24;if(Q||Be(E)){let Ee=E.depthTexture;Ee&&Ee.isDepthTexture&&(Ee.type===Rr?we=n.DEPTH_COMPONENT32F:Ee.type===Ad&&(we=n.DEPTH_COMPONENT24));let Re=ye(E);Be(E)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Re,we,E.width,E.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Re,we,E.width,E.height)}else n.renderbufferStorage(n.RENDERBUFFER,we,E.width,E.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,I)}else if(E.depthBuffer&&E.stencilBuffer){let we=ye(E);Q&&Be(E)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,we,n.DEPTH24_STENCIL8,E.width,E.height):Be(E)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,we,n.DEPTH24_STENCIL8,E.width,E.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,E.width,E.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,I)}else{let we=E.textures;for(let Ee=0;Ee<we.length;Ee++){let Re=we[Ee],ut=o.convert(Re.format,Re.colorSpace),ze=o.convert(Re.type),Ve=v(Re.internalFormat,ut,ze,Re.colorSpace),Mt=ye(E);Q&&Be(E)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Mt,Ve,E.width,E.height):Be(E)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Mt,Ve,E.width,E.height):n.renderbufferStorage(n.RENDERBUFFER,Ve,E.width,E.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ge(I,E){if(E&&E.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(n.FRAMEBUFFER,I),!(E.depthTexture&&E.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!t.get(E.depthTexture).__webglTexture||E.depthTexture.image.width!==E.width||E.depthTexture.image.height!==E.height)&&(E.depthTexture.image.width=E.width,E.depthTexture.image.height=E.height,E.depthTexture.needsUpdate=!0),O(E.depthTexture,0);let we=t.get(E.depthTexture).__webglTexture,Ee=ye(E);if(E.depthTexture.format===Sd)Be(E)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,we,0,Ee):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,we,0);else if(E.depthTexture.format===Ks)Be(E)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,we,0,Ee):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,we,0);else throw new Error("Unknown depthTexture format")}function N(I){let E=t.get(I),Q=I.isWebGLCubeRenderTarget===!0;if(I.depthTexture&&!E.__autoAllocateDepthBuffer){if(Q)throw new Error("target.depthTexture not supported in Cube render targets");Ge(E.__webglFramebuffer,I)}else if(Q){E.__webglDepthbuffer=[];for(let we=0;we<6;we++)i.bindFramebuffer(n.FRAMEBUFFER,E.__webglFramebuffer[we]),E.__webglDepthbuffer[we]=n.createRenderbuffer(),Ae(E.__webglDepthbuffer[we],I,!1)}else i.bindFramebuffer(n.FRAMEBUFFER,E.__webglFramebuffer),E.__webglDepthbuffer=n.createRenderbuffer(),Ae(E.__webglDepthbuffer,I,!1);i.bindFramebuffer(n.FRAMEBUFFER,null)}function Se(I,E,Q){let we=t.get(I);E!==void 0&&Y(we.__webglFramebuffer,I,I.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Q!==void 0&&N(I)}function Oe(I){let E=I.texture,Q=t.get(I),we=t.get(E);I.addEventListener("dispose",C);let Ee=I.textures,Re=I.isWebGLCubeRenderTarget===!0,ut=Ee.length>1;if(ut||(we.__webglTexture===void 0&&(we.__webglTexture=n.createTexture()),we.__version=E.version,s.memory.textures++),Re){Q.__webglFramebuffer=[];for(let ze=0;ze<6;ze++)if(E.mipmaps&&E.mipmaps.length>0){Q.__webglFramebuffer[ze]=[];for(let Ve=0;Ve<E.mipmaps.length;Ve++)Q.__webglFramebuffer[ze][Ve]=n.createFramebuffer()}else Q.__webglFramebuffer[ze]=n.createFramebuffer()}else{if(E.mipmaps&&E.mipmaps.length>0){Q.__webglFramebuffer=[];for(let ze=0;ze<E.mipmaps.length;ze++)Q.__webglFramebuffer[ze]=n.createFramebuffer()}else Q.__webglFramebuffer=n.createFramebuffer();if(ut)for(let ze=0,Ve=Ee.length;ze<Ve;ze++){let Mt=t.get(Ee[ze]);Mt.__webglTexture===void 0&&(Mt.__webglTexture=n.createTexture(),s.memory.textures++)}if(I.samples>0&&Be(I)===!1){Q.__webglMultisampledFramebuffer=n.createFramebuffer(),Q.__webglColorRenderbuffer=[],i.bindFramebuffer(n.FRAMEBUFFER,Q.__webglMultisampledFramebuffer);for(let ze=0;ze<Ee.length;ze++){let Ve=Ee[ze];Q.__webglColorRenderbuffer[ze]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Q.__webglColorRenderbuffer[ze]);let Mt=o.convert(Ve.format,Ve.colorSpace),Ne=o.convert(Ve.type),ot=v(Ve.internalFormat,Mt,Ne,Ve.colorSpace,I.isXRRenderTarget===!0),Ot=ye(I);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ot,ot,I.width,I.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ze,n.RENDERBUFFER,Q.__webglColorRenderbuffer[ze])}n.bindRenderbuffer(n.RENDERBUFFER,null),I.depthBuffer&&(Q.__webglDepthRenderbuffer=n.createRenderbuffer(),Ae(Q.__webglDepthRenderbuffer,I,!0)),i.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Re){i.bindTexture(n.TEXTURE_CUBE_MAP,we.__webglTexture),me(n.TEXTURE_CUBE_MAP,E);for(let ze=0;ze<6;ze++)if(E.mipmaps&&E.mipmaps.length>0)for(let Ve=0;Ve<E.mipmaps.length;Ve++)Y(Q.__webglFramebuffer[ze][Ve],I,E,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,Ve);else Y(Q.__webglFramebuffer[ze],I,E,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,0);m(E)&&g(n.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(ut){for(let ze=0,Ve=Ee.length;ze<Ve;ze++){let Mt=Ee[ze],Ne=t.get(Mt);i.bindTexture(n.TEXTURE_2D,Ne.__webglTexture),me(n.TEXTURE_2D,Mt),Y(Q.__webglFramebuffer,I,Mt,n.COLOR_ATTACHMENT0+ze,n.TEXTURE_2D,0),m(Mt)&&g(n.TEXTURE_2D)}i.unbindTexture()}else{let ze=n.TEXTURE_2D;if((I.isWebGL3DRenderTarget||I.isWebGLArrayRenderTarget)&&(ze=I.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),i.bindTexture(ze,we.__webglTexture),me(ze,E),E.mipmaps&&E.mipmaps.length>0)for(let Ve=0;Ve<E.mipmaps.length;Ve++)Y(Q.__webglFramebuffer[Ve],I,E,n.COLOR_ATTACHMENT0,ze,Ve);else Y(Q.__webglFramebuffer,I,E,n.COLOR_ATTACHMENT0,ze,0);m(E)&&g(ze),i.unbindTexture()}I.depthBuffer&&N(I)}function B(I){let E=I.textures;for(let Q=0,we=E.length;Q<we;Q++){let Ee=E[Q];if(m(Ee)){let Re=I.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,ut=t.get(Ee).__webglTexture;i.bindTexture(Re,ut),g(Re),i.unbindTexture()}}}let yt=[],fe=[];function Ie(I){if(I.samples>0){if(Be(I)===!1){let E=I.textures,Q=I.width,we=I.height,Ee=n.COLOR_BUFFER_BIT,Re=I.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ut=t.get(I),ze=E.length>1;if(ze)for(let Ve=0;Ve<E.length;Ve++)i.bindFramebuffer(n.FRAMEBUFFER,ut.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.RENDERBUFFER,null),i.bindFramebuffer(n.FRAMEBUFFER,ut.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.TEXTURE_2D,null,0);i.bindFramebuffer(n.READ_FRAMEBUFFER,ut.__webglMultisampledFramebuffer),i.bindFramebuffer(n.DRAW_FRAMEBUFFER,ut.__webglFramebuffer);for(let Ve=0;Ve<E.length;Ve++){if(I.resolveDepthBuffer&&(I.depthBuffer&&(Ee|=n.DEPTH_BUFFER_BIT),I.stencilBuffer&&I.resolveStencilBuffer&&(Ee|=n.STENCIL_BUFFER_BIT)),ze){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,ut.__webglColorRenderbuffer[Ve]);let Mt=t.get(E[Ve]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Mt,0)}n.blitFramebuffer(0,0,Q,we,0,0,Q,we,Ee,n.NEAREST),c===!0&&(yt.length=0,fe.length=0,yt.push(n.COLOR_ATTACHMENT0+Ve),I.depthBuffer&&I.resolveDepthBuffer===!1&&(yt.push(Re),fe.push(Re),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,fe)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,yt))}if(i.bindFramebuffer(n.READ_FRAMEBUFFER,null),i.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),ze)for(let Ve=0;Ve<E.length;Ve++){i.bindFramebuffer(n.FRAMEBUFFER,ut.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.RENDERBUFFER,ut.__webglColorRenderbuffer[Ve]);let Mt=t.get(E[Ve]).__webglTexture;i.bindFramebuffer(n.FRAMEBUFFER,ut.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.TEXTURE_2D,Mt,0)}i.bindFramebuffer(n.DRAW_FRAMEBUFFER,ut.__webglMultisampledFramebuffer)}else if(I.depthBuffer&&I.resolveDepthBuffer===!1&&c){let E=I.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[E])}}}function ye(I){return Math.min(r.maxSamples,I.samples)}function Be(I){let E=t.get(I);return I.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&E.__useRenderToTexture!==!1}function De(I){let E=s.render.frame;d.get(I)!==E&&(d.set(I,E),I.update())}function Ze(I,E){let Q=I.colorSpace,we=I.format,Ee=I.type;return I.isCompressedTexture===!0||I.isVideoTexture===!0||Q!==jn&&Q!==Xa&&(Di.getTransfer(Q)===Qi?(we!==Mo||Ee!==ic)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Q)),E}function mt(I){return typeof HTMLImageElement<"u"&&I instanceof HTMLImageElement?(l.width=I.naturalWidth||I.width,l.height=I.naturalHeight||I.height):typeof VideoFrame<"u"&&I instanceof VideoFrame?(l.width=I.displayWidth,l.height=I.displayHeight):(l.width=I.width,l.height=I.height),l}this.allocateTextureUnit=F,this.resetTextureUnits=x,this.setTexture2D=O,this.setTexture2DArray=K,this.setTexture3D=ne,this.setTextureCube=G,this.rebindTextures=Se,this.setupRenderTarget=Oe,this.updateRenderTargetMipmap=B,this.updateMultisampleRenderTarget=Ie,this.setupDepthRenderbuffer=N,this.setupFrameBufferTexture=Y,this.useMultisampledRTT=Be}function r3(n,e){function i(t,r=Xa){let o,s=Di.getTransfer(r);if(t===ic)return n.UNSIGNED_BYTE;if(t===YE)return n.UNSIGNED_SHORT_4_4_4_4;if(t===ZE)return n.UNSIGNED_SHORT_5_5_5_1;if(t===DL)return n.UNSIGNED_INT_5_9_9_9_REV;if(t===CL)return n.BYTE;if(t===EL)return n.SHORT;if(t===tg)return n.UNSIGNED_SHORT;if(t===XE)return n.INT;if(t===Ad)return n.UNSIGNED_INT;if(t===Rr)return n.FLOAT;if(t===Wi)return n.HALF_FLOAT;if(t===AL)return n.ALPHA;if(t===IL)return n.RGB;if(t===Mo)return n.RGBA;if(t===PL)return n.LUMINANCE;if(t===kL)return n.LUMINANCE_ALPHA;if(t===Sd)return n.DEPTH_COMPONENT;if(t===Ks)return n.DEPTH_STENCIL;if(t===Hd)return n.RED;if(t===QE)return n.RED_INTEGER;if(t===FL)return n.RG;if(t===KE)return n.RG_INTEGER;if(t===JE)return n.RGBA_INTEGER;if(t===k0||t===F0||t===j0||t===O0)if(s===Qi)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(t===k0)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(t===F0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(t===j0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(t===O0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(t===k0)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===F0)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===j0)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===O0)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(t===uC||t===hC||t===fC||t===mC)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(t===uC)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===hC)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===fC)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===mC)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(t===pC||t===gC||t===bC)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(t===pC||t===gC)return s===Qi?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(t===bC)return s===Qi?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(t===_C||t===vC||t===yC||t===xC||t===wC||t===MC||t===SC||t===RC||t===TC||t===CC||t===EC||t===DC||t===AC||t===IC)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(t===_C)return s===Qi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(t===vC)return s===Qi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(t===yC)return s===Qi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(t===xC)return s===Qi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(t===wC)return s===Qi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(t===MC)return s===Qi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(t===SC)return s===Qi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(t===RC)return s===Qi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(t===TC)return s===Qi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(t===CC)return s===Qi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(t===EC)return s===Qi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(t===DC)return s===Qi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(t===AC)return s===Qi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(t===IC)return s===Qi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(t===N0||t===PC||t===kC)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(t===N0)return s===Qi?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(t===PC)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(t===kC)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(t===jL||t===FC||t===jC||t===OC)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(t===N0)return o.COMPRESSED_RED_RGTC1_EXT;if(t===FC)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(t===jC)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(t===OC)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return t===la?n.UNSIGNED_INT_24_8:n[t]!==void 0?n[t]:null}return{convert:i}}var G0=class extends Ki{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},Tr=class extends Rt{constructor(){super(),this.isGroup=!0,this.type="Group"}},TK={type:"move"},gp=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Tr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Tr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new M,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new M),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Tr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new M,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new M),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let i=this._hand;if(i)for(let t of e.hand.values())this._getHandJoint(i,t)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,i,t){let r=null,o=null,s=null,a=this._targetRay,c=this._grip,l=this._hand;if(e&&i.session.visibilityState!=="visible-blurred"){if(l&&e.hand){s=!0;for(let b of e.hand.values()){let m=i.getJointPose(b,t),g=this._getHandJoint(l,b);m!==null&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=m.radius),g.visible=m!==null}let d=l.joints["index-finger-tip"],u=l.joints["thumb-tip"],h=d.position.distanceTo(u.position),f=.02,p=.005;l.inputState.pinching&&h>f+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&h<=f-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(o=i.getPose(e.gripSpace,t),o!==null&&(c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,o.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(o.linearVelocity)):c.hasLinearVelocity=!1,o.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(o.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(r=i.getPose(e.targetRaySpace,t),r===null&&o!==null&&(r=o),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(TK)))}return a!==null&&(a.visible=r!==null),c!==null&&(c.visible=o!==null),l!==null&&(l.visible=s!==null),this}_getHandJoint(e,i){if(e.joints[i.jointName]===void 0){let t=new Tr;t.matrixAutoUpdate=!1,t.visible=!1,e.joints[i.jointName]=t,e.add(t)}return e.joints[i.jointName]}},CK=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,EK=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,JC=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,i,t){if(this.texture===null){let r=new yn,o=e.properties.get(r);o.__webglTexture=i.texture,(i.depthNear!=t.depthNear||i.depthFar!=t.depthFar)&&(this.depthNear=i.depthNear,this.depthFar=i.depthFar),this.texture=r}}render(e,i){if(this.texture!==null){if(this.mesh===null){let t=i.cameras[0].viewport,r=new Dt({vertexShader:CK,fragmentShader:EK,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Le(new ea(20,20),r)}e.render(this.mesh,i)}}reset(){this.texture=null,this.mesh=null}},eE=class extends kn{constructor(e,i){super();let t=this,r=null,o=1,s=null,a="local-floor",c=1,l=null,d=null,u=null,h=null,f=null,p=null,b=new JC,m=i.getContextAttributes(),g=null,v=null,_=[],y=[],C=new z,R=null,w=new Ki;w.layers.enable(1),w.viewport=new xi;let A=new Ki;A.layers.enable(2),A.viewport=new xi;let S=[w,A],x=new G0;x.layers.enable(1),x.layers.enable(2);let F=null,V=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Y){let Ae=_[Y];return Ae===void 0&&(Ae=new gp,_[Y]=Ae),Ae.getTargetRaySpace()},this.getControllerGrip=function(Y){let Ae=_[Y];return Ae===void 0&&(Ae=new gp,_[Y]=Ae),Ae.getGripSpace()},this.getHand=function(Y){let Ae=_[Y];return Ae===void 0&&(Ae=new gp,_[Y]=Ae),Ae.getHandSpace()};function O(Y){let Ae=y.indexOf(Y.inputSource);if(Ae===-1)return;let Ge=_[Ae];Ge!==void 0&&(Ge.update(Y.inputSource,Y.frame,l||s),Ge.dispatchEvent({type:Y.type,data:Y.inputSource}))}function K(){r.removeEventListener("select",O),r.removeEventListener("selectstart",O),r.removeEventListener("selectend",O),r.removeEventListener("squeeze",O),r.removeEventListener("squeezestart",O),r.removeEventListener("squeezeend",O),r.removeEventListener("end",K),r.removeEventListener("inputsourceschange",ne);for(let Y=0;Y<_.length;Y++){let Ae=y[Y];Ae!==null&&(y[Y]=null,_[Y].disconnect(Ae))}F=null,V=null,b.reset(),e.setRenderTarget(g),f=null,h=null,u=null,r=null,v=null,vt.stop(),t.isPresenting=!1,e.setPixelRatio(R),e.setSize(C.width,C.height,!1),t.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Y){o=Y,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Y){a=Y,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(Y){l=Y},this.getBaseLayer=function(){return h!==null?h:f},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=function(Y){return yi(this,null,function*(){if(r=Y,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",O),r.addEventListener("selectstart",O),r.addEventListener("selectend",O),r.addEventListener("squeeze",O),r.addEventListener("squeezestart",O),r.addEventListener("squeezeend",O),r.addEventListener("end",K),r.addEventListener("inputsourceschange",ne),m.xrCompatible!==!0&&(yield i.makeXRCompatible()),R=e.getPixelRatio(),e.getSize(C),r.renderState.layers===void 0){let Ae={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:o};f=new XRWebGLLayer(r,i,Ae),r.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),v=new oi(f.framebufferWidth,f.framebufferHeight,{format:Mo,type:ic,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil})}else{let Ae=null,Ge=null,N=null;m.depth&&(N=m.stencil?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24,Ae=m.stencil?Ks:Sd,Ge=m.stencil?la:Ad);let Se={colorFormat:i.RGBA8,depthFormat:N,scaleFactor:o};u=new XRWebGLBinding(r,i),h=u.createProjectionLayer(Se),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),v=new oi(h.textureWidth,h.textureHeight,{format:Mo,type:ic,depthTexture:new hs(h.textureWidth,h.textureHeight,Ge,void 0,void 0,void 0,void 0,void 0,void 0,Ae),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}v.isXRRenderTarget=!0,this.setFoveation(c),l=null,s=yield r.requestReferenceSpace(a),vt.setContext(r),vt.start(),t.isPresenting=!0,t.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function ne(Y){for(let Ae=0;Ae<Y.removed.length;Ae++){let Ge=Y.removed[Ae],N=y.indexOf(Ge);N>=0&&(y[N]=null,_[N].disconnect(Ge))}for(let Ae=0;Ae<Y.added.length;Ae++){let Ge=Y.added[Ae],N=y.indexOf(Ge);if(N===-1){for(let Oe=0;Oe<_.length;Oe++)if(Oe>=y.length){y.push(Ge),N=Oe;break}else if(y[Oe]===null){y[Oe]=Ge,N=Oe;break}if(N===-1)break}let Se=_[N];Se&&Se.connect(Ge)}}let G=new M,$=new M;function U(Y,Ae,Ge){G.setFromMatrixPosition(Ae.matrixWorld),$.setFromMatrixPosition(Ge.matrixWorld);let N=G.distanceTo($),Se=Ae.projectionMatrix.elements,Oe=Ge.projectionMatrix.elements,B=Se[14]/(Se[10]-1),yt=Se[14]/(Se[10]+1),fe=(Se[9]+1)/Se[5],Ie=(Se[9]-1)/Se[5],ye=(Se[8]-1)/Se[0],Be=(Oe[8]+1)/Oe[0],De=B*ye,Ze=B*Be,mt=N/(-ye+Be),I=mt*-ye;Ae.matrixWorld.decompose(Y.position,Y.quaternion,Y.scale),Y.translateX(I),Y.translateZ(mt),Y.matrixWorld.compose(Y.position,Y.quaternion,Y.scale),Y.matrixWorldInverse.copy(Y.matrixWorld).invert();let E=B+mt,Q=yt+mt,we=De-I,Ee=Ze+(N-I),Re=fe*yt/Q*E,ut=Ie*yt/Q*E;Y.projectionMatrix.makePerspective(we,Ee,Re,ut,E,Q),Y.projectionMatrixInverse.copy(Y.projectionMatrix).invert()}function Z(Y,Ae){Ae===null?Y.matrixWorld.copy(Y.matrix):Y.matrixWorld.multiplyMatrices(Ae.matrixWorld,Y.matrix),Y.matrixWorldInverse.copy(Y.matrixWorld).invert()}this.updateCamera=function(Y){if(r===null)return;b.texture!==null&&(Y.near=b.depthNear,Y.far=b.depthFar),x.near=A.near=w.near=Y.near,x.far=A.far=w.far=Y.far,(F!==x.near||V!==x.far)&&(r.updateRenderState({depthNear:x.near,depthFar:x.far}),F=x.near,V=x.far,w.near=F,w.far=V,A.near=F,A.far=V,w.updateProjectionMatrix(),A.updateProjectionMatrix(),Y.updateProjectionMatrix());let Ae=Y.parent,Ge=x.cameras;Z(x,Ae);for(let N=0;N<Ge.length;N++)Z(Ge[N],Ae);Ge.length===2?U(x,w,A):x.projectionMatrix.copy(w.projectionMatrix),me(Y,x,Ae)};function me(Y,Ae,Ge){Ge===null?Y.matrix.copy(Ae.matrixWorld):(Y.matrix.copy(Ge.matrixWorld),Y.matrix.invert(),Y.matrix.multiply(Ae.matrixWorld)),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale),Y.updateMatrixWorld(!0),Y.projectionMatrix.copy(Ae.projectionMatrix),Y.projectionMatrixInverse.copy(Ae.projectionMatrixInverse),Y.isPerspectiveCamera&&(Y.fov=Uh*2*Math.atan(1/Y.projectionMatrix.elements[5]),Y.zoom=1)}this.getCamera=function(){return x},this.getFoveation=function(){if(!(h===null&&f===null))return c},this.setFoveation=function(Y){c=Y,h!==null&&(h.fixedFoveation=Y),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=Y)},this.hasDepthSensing=function(){return b.texture!==null};let ke=null;function $e(Y,Ae){if(d=Ae.getViewerPose(l||s),p=Ae,d!==null){let Ge=d.views;f!==null&&(e.setRenderTargetFramebuffer(v,f.framebuffer),e.setRenderTarget(v));let N=!1;Ge.length!==x.cameras.length&&(x.cameras.length=0,N=!0);for(let Oe=0;Oe<Ge.length;Oe++){let B=Ge[Oe],yt=null;if(f!==null)yt=f.getViewport(B);else{let Ie=u.getViewSubImage(h,B);yt=Ie.viewport,Oe===0&&(e.setRenderTargetTextures(v,Ie.colorTexture,h.ignoreDepthValues?void 0:Ie.depthStencilTexture),e.setRenderTarget(v))}let fe=S[Oe];fe===void 0&&(fe=new Ki,fe.layers.enable(Oe),fe.viewport=new xi,S[Oe]=fe),fe.matrix.fromArray(B.transform.matrix),fe.matrix.decompose(fe.position,fe.quaternion,fe.scale),fe.projectionMatrix.fromArray(B.projectionMatrix),fe.projectionMatrixInverse.copy(fe.projectionMatrix).invert(),fe.viewport.set(yt.x,yt.y,yt.width,yt.height),Oe===0&&(x.matrix.copy(fe.matrix),x.matrix.decompose(x.position,x.quaternion,x.scale)),N===!0&&x.cameras.push(fe)}let Se=r.enabledFeatures;if(Se&&Se.includes("depth-sensing")){let Oe=u.getDepthInformation(Ge[0]);Oe&&Oe.isValid&&Oe.texture&&b.init(e,Oe,r.renderState)}}for(let Ge=0;Ge<_.length;Ge++){let N=y[Ge],Se=_[Ge];N!==null&&Se!==void 0&&Se.update(N,Ae,l||s)}b.render(e,x),ke&&ke(Y,Ae),Ae.detectedPlanes&&t.dispatchEvent({type:"planesdetected",data:Ae}),p=null}let vt=new KL;vt.setAnimationLoop($e),this.setAnimationLoop=function(Y){ke=Y},this.dispose=function(){}}},dd=new no,DK=new je;function AK(n,e){function i(m,g){m.matrixAutoUpdate===!0&&m.updateMatrix(),g.value.copy(m.matrix)}function t(m,g){g.color.getRGB(m.fogColor.value,QL(n)),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)}function r(m,g,v,_,y){g.isMeshBasicMaterial||g.isMeshLambertMaterial?o(m,g):g.isMeshToonMaterial?(o(m,g),u(m,g)):g.isMeshPhongMaterial?(o(m,g),d(m,g)):g.isMeshStandardMaterial?(o(m,g),h(m,g),g.isMeshPhysicalMaterial&&f(m,g,y)):g.isMeshMatcapMaterial?(o(m,g),p(m,g)):g.isMeshDepthMaterial?o(m,g):g.isMeshDistanceMaterial?(o(m,g),b(m,g)):g.isMeshNormalMaterial?o(m,g):g.isLineBasicMaterial?(s(m,g),g.isLineDashedMaterial&&a(m,g)):g.isPointsMaterial?c(m,g,v,_):g.isSpriteMaterial?l(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function o(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map,i(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,i(g.alphaMap,m.alphaMapTransform)),g.bumpMap&&(m.bumpMap.value=g.bumpMap,i(g.bumpMap,m.bumpMapTransform),m.bumpScale.value=g.bumpScale,g.side===Hr&&(m.bumpScale.value*=-1)),g.normalMap&&(m.normalMap.value=g.normalMap,i(g.normalMap,m.normalMapTransform),m.normalScale.value.copy(g.normalScale),g.side===Hr&&m.normalScale.value.negate()),g.displacementMap&&(m.displacementMap.value=g.displacementMap,i(g.displacementMap,m.displacementMapTransform),m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap,i(g.emissiveMap,m.emissiveMapTransform)),g.specularMap&&(m.specularMap.value=g.specularMap,i(g.specularMap,m.specularMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let v=e.get(g),_=v.envMap,y=v.envMapRotation;if(_&&(m.envMap.value=_,dd.copy(y),dd.x*=-1,dd.y*=-1,dd.z*=-1,_.isCubeTexture&&_.isRenderTargetTexture===!1&&(dd.y*=-1,dd.z*=-1),m.envMapRotation.value.setFromMatrix4(DK.makeRotationFromEuler(dd)),m.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;let C=n._useLegacyLights===!0?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*C,i(g.lightMap,m.lightMapTransform)}g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity,i(g.aoMap,m.aoMapTransform))}function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,g.map&&(m.map.value=g.map,i(g.map,m.mapTransform))}function a(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}function c(m,g,v,_){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*v,m.scale.value=_*.5,g.map&&(m.map.value=g.map,i(g.map,m.uvTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,i(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}function l(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map,i(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,i(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}function d(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}function u(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}function h(m,g){m.metalness.value=g.metalness,g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap,i(g.metalnessMap,m.metalnessMapTransform)),m.roughness.value=g.roughness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap,i(g.roughnessMap,m.roughnessMapTransform)),g.envMap&&(m.envMapIntensity.value=g.envMapIntensity)}function f(m,g,v){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap,i(g.sheenColorMap,m.sheenColorMapTransform)),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap,i(g.sheenRoughnessMap,m.sheenRoughnessMapTransform))),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap,i(g.clearcoatMap,m.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,i(g.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(m.clearcoatNormalMap.value=g.clearcoatNormalMap,i(g.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Hr&&m.clearcoatNormalScale.value.negate())),g.dispersion>0&&(m.dispersion.value=g.dispersion),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap,i(g.iridescenceMap,m.iridescenceMapTransform)),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap,i(g.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=v.texture,m.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap,i(g.transmissionMap,m.transmissionMapTransform)),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap,i(g.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(m.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(m.anisotropyMap.value=g.anisotropyMap,i(g.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap,i(g.specularColorMap,m.specularColorMapTransform)),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap,i(g.specularIntensityMap,m.specularIntensityMapTransform))}function p(m,g){g.matcap&&(m.matcap.value=g.matcap)}function b(m,g){let v=e.get(g).light;m.referencePosition.value.setFromMatrixPosition(v.matrixWorld),m.nearDistance.value=v.shadow.camera.near,m.farDistance.value=v.shadow.camera.far}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function IK(n,e,i,t){let r={},o={},s=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(v,_){let y=_.program;t.uniformBlockBinding(v,y)}function l(v,_){let y=r[v.id];y===void 0&&(p(v),y=d(v),r[v.id]=y,v.addEventListener("dispose",m));let C=_.program;t.updateUBOMapping(v,C);let R=e.render.frame;o[v.id]!==R&&(h(v),o[v.id]=R)}function d(v){let _=u();v.__bindingPointIndex=_;let y=n.createBuffer(),C=v.__size,R=v.usage;return n.bindBuffer(n.UNIFORM_BUFFER,y),n.bufferData(n.UNIFORM_BUFFER,C,R),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,_,y),y}function u(){for(let v=0;v<a;v++)if(s.indexOf(v)===-1)return s.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(v){let _=r[v.id],y=v.uniforms,C=v.__cache;n.bindBuffer(n.UNIFORM_BUFFER,_);for(let R=0,w=y.length;R<w;R++){let A=Array.isArray(y[R])?y[R]:[y[R]];for(let S=0,x=A.length;S<x;S++){let F=A[S];if(f(F,R,S,C)===!0){let V=F.__offset,O=Array.isArray(F.value)?F.value:[F.value],K=0;for(let ne=0;ne<O.length;ne++){let G=O[ne],$=b(G);typeof G=="number"||typeof G=="boolean"?(F.__data[0]=G,n.bufferSubData(n.UNIFORM_BUFFER,V+K,F.__data)):G.isMatrix3?(F.__data[0]=G.elements[0],F.__data[1]=G.elements[1],F.__data[2]=G.elements[2],F.__data[3]=0,F.__data[4]=G.elements[3],F.__data[5]=G.elements[4],F.__data[6]=G.elements[5],F.__data[7]=0,F.__data[8]=G.elements[6],F.__data[9]=G.elements[7],F.__data[10]=G.elements[8],F.__data[11]=0):(G.toArray(F.__data,K),K+=$.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,V,F.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(v,_,y,C){let R=v.value,w=_+"_"+y;if(C[w]===void 0)return typeof R=="number"||typeof R=="boolean"?C[w]=R:C[w]=R.clone(),!0;{let A=C[w];if(typeof R=="number"||typeof R=="boolean"){if(A!==R)return C[w]=R,!0}else if(A.equals(R)===!1)return A.copy(R),!0}return!1}function p(v){let _=v.uniforms,y=0,C=16;for(let w=0,A=_.length;w<A;w++){let S=Array.isArray(_[w])?_[w]:[_[w]];for(let x=0,F=S.length;x<F;x++){let V=S[x],O=Array.isArray(V.value)?V.value:[V.value];for(let K=0,ne=O.length;K<ne;K++){let G=O[K],$=b(G),U=y%C;U!==0&&C-U<$.boundary&&(y+=C-U),V.__data=new Float32Array($.storage/Float32Array.BYTES_PER_ELEMENT),V.__offset=y,y+=$.storage}}}let R=y%C;return R>0&&(y+=C-R),v.__size=y,v.__cache={},this}function b(v){let _={boundary:0,storage:0};return typeof v=="number"||typeof v=="boolean"?(_.boundary=4,_.storage=4):v.isVector2?(_.boundary=8,_.storage=8):v.isVector3||v.isColor?(_.boundary=16,_.storage=12):v.isVector4?(_.boundary=16,_.storage=16):v.isMatrix3?(_.boundary=48,_.storage=48):v.isMatrix4?(_.boundary=64,_.storage=64):v.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",v),_}function m(v){let _=v.target;_.removeEventListener("dispose",m);let y=s.indexOf(_.__bindingPointIndex);s.splice(y,1),n.deleteBuffer(r[_.id]),delete r[_.id],delete o[_.id]}function g(){for(let v in r)n.deleteBuffer(r[v]);s=[],r={},o={}}return{bind:c,update:l,dispose:g}}var nc=class{constructor(e={}){let{canvas:i=XL(),context:t=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:u=!1}=e;this.isWebGLRenderer=!0;let h;if(t!==null){if(typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=t.getContextAttributes().alpha}else h=s;let f=new Uint32Array(4),p=new Int32Array(4),b=null,m=null,g=[],v=[];this.domElement=i,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Pn,this._useLegacyLights=!1,this.toneMapping=Ja,this.toneMappingExposure=1;let _=this,y=!1,C=0,R=0,w=null,A=-1,S=null,x=new xi,F=new xi,V=null,O=new _e(0),K=0,ne=i.width,G=i.height,$=1,U=null,Z=null,me=new xi(0,0,ne,G),ke=new xi(0,0,ne,G),$e=!1,vt=new kd,Y=!1,Ae=!1,Ge=new je,N=new M,Se={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Oe(){return w===null?$:1}let B=t;function yt(D,q){return i.getContext(D,q)}try{let D={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:d,failIfMajorPerformanceCaveat:u};if("setAttribute"in i&&i.setAttribute("data-engine",`three.js r${ky}`),i.addEventListener("webglcontextlost",T,!1),i.addEventListener("webglcontextrestored",W,!1),i.addEventListener("webglcontextcreationerror",J,!1),B===null){let q="webgl2";if(B=yt(q,D),B===null)throw yt(q)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(D){throw console.error("THREE.WebGLRenderer: "+D.message),D}let fe,Ie,ye,Be,De,Ze,mt,I,E,Q,we,Ee,Re,ut,ze,Ve,Mt,Ne,ot,Ot,wt,it,zt,si;function Pi(){fe=new QZ(B),fe.init(),it=new r3(B,fe),Ie=new WZ(B,fe,e,it),ye=new SK(B),Be=new eQ(B),De=new hK,Ze=new RK(B,fe,ye,De,Ie,it,Be),mt=new qZ(_),I=new ZZ(_),E=new aX(B),zt=new HZ(B,E),Q=new KZ(B,E,Be,zt),we=new iQ(B,Q,E,Be),ot=new tQ(B,Ie,Ze),Ve=new $Z(De),Ee=new uK(_,mt,I,fe,Ie,zt,Ve),Re=new AK(_,De),ut=new mK,ze=new yK(fe),Ne=new zZ(_,mt,I,ye,we,h,c),Mt=new MK(_,we,Ie),si=new IK(B,Be,Ie,ye),Ot=new GZ(B,fe,Be),wt=new JZ(B,fe,Be),Be.programs=Ee.programs,_.capabilities=Ie,_.extensions=fe,_.properties=De,_.renderLists=ut,_.shadowMap=Mt,_.state=ye,_.info=Be}Pi();let Pt=new eE(_,B);this.xr=Pt,this.getContext=function(){return B},this.getContextAttributes=function(){return B.getContextAttributes()},this.forceContextLoss=function(){let D=fe.get("WEBGL_lose_context");D&&D.loseContext()},this.forceContextRestore=function(){let D=fe.get("WEBGL_lose_context");D&&D.restoreContext()},this.getPixelRatio=function(){return $},this.setPixelRatio=function(D){D!==void 0&&($=D,this.setSize(ne,G,!1))},this.getSize=function(D){return D.set(ne,G)},this.setSize=function(D,q,ue=!0){if(Pt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ne=D,G=q,i.width=Math.floor(D*$),i.height=Math.floor(q*$),ue===!0&&(i.style.width=D+"px",i.style.height=q+"px"),this.setViewport(0,0,D,q)},this.getDrawingBufferSize=function(D){return D.set(ne*$,G*$).floor()},this.setDrawingBufferSize=function(D,q,ue){ne=D,G=q,$=ue,i.width=Math.floor(D*ue),i.height=Math.floor(q*ue),this.setViewport(0,0,D,q)},this.getCurrentViewport=function(D){return D.copy(x)},this.getViewport=function(D){return D.copy(me)},this.setViewport=function(D,q,ue,se){D.isVector4?me.set(D.x,D.y,D.z,D.w):me.set(D,q,ue,se),ye.viewport(x.copy(me).multiplyScalar($).round())},this.getScissor=function(D){return D.copy(ke)},this.setScissor=function(D,q,ue,se){D.isVector4?ke.set(D.x,D.y,D.z,D.w):ke.set(D,q,ue,se),ye.scissor(F.copy(ke).multiplyScalar($).round())},this.getScissorTest=function(){return $e},this.setScissorTest=function(D){ye.setScissorTest($e=D)},this.setOpaqueSort=function(D){U=D},this.setTransparentSort=function(D){Z=D},this.getClearColor=function(D){return D.copy(Ne.getClearColor())},this.setClearColor=function(){Ne.setClearColor.apply(Ne,arguments)},this.getClearAlpha=function(){return Ne.getClearAlpha()},this.setClearAlpha=function(){Ne.setClearAlpha.apply(Ne,arguments)},this.clear=function(D=!0,q=!0,ue=!0){let se=0;if(D){let ae=!1;if(w!==null){let Ye=w.texture.format;ae=Ye===JE||Ye===KE||Ye===QE}if(ae){let Ye=w.texture.type,pt=Ye===ic||Ye===Ad||Ye===tg||Ye===la||Ye===YE||Ye===ZE,bt=Ne.getClearColor(),At=Ne.getClearAlpha(),$t=bt.r,ai=bt.g,fi=bt.b;pt?(f[0]=$t,f[1]=ai,f[2]=fi,f[3]=At,B.clearBufferuiv(B.COLOR,0,f)):(p[0]=$t,p[1]=ai,p[2]=fi,p[3]=At,B.clearBufferiv(B.COLOR,0,p))}else se|=B.COLOR_BUFFER_BIT}q&&(se|=B.DEPTH_BUFFER_BIT),ue&&(se|=B.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),B.clear(se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",T,!1),i.removeEventListener("webglcontextrestored",W,!1),i.removeEventListener("webglcontextcreationerror",J,!1),ut.dispose(),ze.dispose(),De.dispose(),mt.dispose(),I.dispose(),we.dispose(),zt.dispose(),si.dispose(),Ee.dispose(),Pt.dispose(),Pt.removeEventListener("sessionstart",Ci),Pt.removeEventListener("sessionend",Ln),nn.stop()};function T(D){D.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function W(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;let D=Be.autoReset,q=Mt.enabled,ue=Mt.autoUpdate,se=Mt.needsUpdate,ae=Mt.type;Pi(),Be.autoReset=D,Mt.enabled=q,Mt.autoUpdate=ue,Mt.needsUpdate=se,Mt.type=ae}function J(D){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",D.statusMessage)}function Te(D){let q=D.target;q.removeEventListener("dispose",Te),Ue(q)}function Ue(D){ii(D),De.remove(D)}function ii(D){let q=De.get(D).programs;q!==void 0&&(q.forEach(function(ue){Ee.releaseProgram(ue)}),D.isShaderMaterial&&Ee.releaseShaderCache(D))}this.renderBufferDirect=function(D,q,ue,se,ae,Ye){q===null&&(q=Se);let pt=ae.isMesh&&ae.matrixWorld.determinant()<0,bt=i4(D,q,ue,se,ae);ye.setMaterial(se,pt);let At=ue.index,$t=1;if(se.wireframe===!0){if(At=Q.getWireframeAttribute(ue),At===void 0)return;$t=2}let ai=ue.drawRange,fi=ue.attributes.position,Bn=ai.start*$t,br=(ai.start+ai.count)*$t;Ye!==null&&(Bn=Math.max(Bn,Ye.start*$t),br=Math.min(br,(Ye.start+Ye.count)*$t)),At!==null?(Bn=Math.max(Bn,0),br=Math.min(br,At.count)):fi!=null&&(Bn=Math.max(Bn,0),br=Math.min(br,fi.count));let fo=br-Bn;if(fo<0||fo===1/0)return;zt.setup(ae,se,bt,ue,At);let Da,ki=Ot;if(At!==null&&(Da=E.get(At),ki=wt,ki.setIndex(Da)),ae.isMesh)se.wireframe===!0?(ye.setLineWidth(se.wireframeLinewidth*Oe()),ki.setMode(B.LINES)):ki.setMode(B.TRIANGLES);else if(ae.isLine){let qt=se.linewidth;qt===void 0&&(qt=1),ye.setLineWidth(qt*Oe()),ae.isLineSegments?ki.setMode(B.LINES):ae.isLineLoop?ki.setMode(B.LINE_LOOP):ki.setMode(B.LINE_STRIP)}else ae.isPoints?ki.setMode(B.POINTS):ae.isSprite&&ki.setMode(B.TRIANGLES);if(ae.isBatchedMesh)ae._multiDrawInstances!==null?ki.renderMultiDrawInstances(ae._multiDrawStarts,ae._multiDrawCounts,ae._multiDrawCount,ae._multiDrawInstances):ki.renderMultiDraw(ae._multiDrawStarts,ae._multiDrawCounts,ae._multiDrawCount);else if(ae.isInstancedMesh)ki.renderInstances(Bn,fo,ae.count);else if(ue.isInstancedBufferGeometry){let qt=ue._maxInstanceCount!==void 0?ue._maxInstanceCount:1/0,Hf=Math.min(ue.instanceCount,qt);ki.renderInstances(Bn,fo,Hf)}else ki.render(Bn,fo)};function hi(D,q,ue){D.transparent===!0&&D.side===Yn&&D.forceSinglePass===!1?(D.side=Hr,D.needsUpdate=!0,eb(D,q,ue),D.side=us,D.needsUpdate=!0,eb(D,q,ue),D.side=Yn):eb(D,q,ue)}this.compile=function(D,q,ue=null){ue===null&&(ue=D),m=ze.get(ue),m.init(q),v.push(m),ue.traverseVisible(function(ae){ae.isLight&&ae.layers.test(q.layers)&&(m.pushLight(ae),ae.castShadow&&m.pushShadow(ae))}),D!==ue&&D.traverseVisible(function(ae){ae.isLight&&ae.layers.test(q.layers)&&(m.pushLight(ae),ae.castShadow&&m.pushShadow(ae))}),m.setupLights(_._useLegacyLights);let se=new Set;return D.traverse(function(ae){let Ye=ae.material;if(Ye)if(Array.isArray(Ye))for(let pt=0;pt<Ye.length;pt++){let bt=Ye[pt];hi(bt,ue,ae),se.add(bt)}else hi(Ye,ue,ae),se.add(Ye)}),v.pop(),m=null,se},this.compileAsync=function(D,q,ue=null){let se=this.compile(D,q,ue);return new Promise(ae=>{function Ye(){if(se.forEach(function(pt){De.get(pt).currentProgram.isReady()&&se.delete(pt)}),se.size===0){ae(D);return}setTimeout(Ye,10)}fe.get("KHR_parallel_shader_compile")!==null?Ye():setTimeout(Ye,10)})};let fn=null;function er(D){fn&&fn(D)}function Ci(){nn.stop()}function Ln(){nn.start()}let nn=new KL;nn.setAnimationLoop(er),typeof self<"u"&&nn.setContext(self),this.setAnimationLoop=function(D){fn=D,Pt.setAnimationLoop(D),D===null?nn.stop():nn.start()},Pt.addEventListener("sessionstart",Ci),Pt.addEventListener("sessionend",Ln),this.render=function(D,q){if(q!==void 0&&q.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;D.matrixWorldAutoUpdate===!0&&D.updateMatrixWorld(),q.parent===null&&q.matrixWorldAutoUpdate===!0&&q.updateMatrixWorld(),Pt.enabled===!0&&Pt.isPresenting===!0&&(Pt.cameraAutoUpdate===!0&&Pt.updateCamera(q),q=Pt.getCamera()),D.isScene===!0&&D.onBeforeRender(_,D,q,w),m=ze.get(D,v.length),m.init(q),v.push(m),Ge.multiplyMatrices(q.projectionMatrix,q.matrixWorldInverse),vt.setFromProjectionMatrix(Ge),Ae=this.localClippingEnabled,Y=Ve.init(this.clippingPlanes,Ae),b=ut.get(D,g.length),b.init(),g.push(b),Sc(D,q,0,_.sortObjects),b.finish(),_.sortObjects===!0&&b.sort(U,Z);let ue=Pt.enabled===!1||Pt.isPresenting===!1||Pt.hasDepthSensing()===!1;ue&&Ne.addToRenderList(b,D),this.info.render.frame++,Y===!0&&Ve.beginShadows();let se=m.state.shadowsArray;Mt.render(se,D,q),Y===!0&&Ve.endShadows(),this.info.autoReset===!0&&this.info.reset();let ae=b.opaque,Ye=b.transmissive;if(m.setupLights(_._useLegacyLights),q.isArrayCamera){let pt=q.cameras;if(Ye.length>0)for(let bt=0,At=pt.length;bt<At;bt++){let $t=pt[bt];Rc(ae,Ye,D,$t)}ue&&Ne.render(D);for(let bt=0,At=pt.length;bt<At;bt++){let $t=pt[bt];Po(b,D,$t,$t.viewport)}}else Ye.length>0&&Rc(ae,Ye,D,q),ue&&Ne.render(D),Po(b,D,q);w!==null&&(Ze.updateMultisampleRenderTarget(w),Ze.updateRenderTargetMipmap(w)),D.isScene===!0&&D.onAfterRender(_,D,q),zt.resetDefaultState(),A=-1,S=null,v.pop(),v.length>0?(m=v[v.length-1],Y===!0&&Ve.setGlobalState(_.clippingPlanes,m.state.camera)):m=null,g.pop(),g.length>0?b=g[g.length-1]:b=null};function Sc(D,q,ue,se){if(D.visible===!1)return;if(D.layers.test(q.layers)){if(D.isGroup)ue=D.renderOrder;else if(D.isLOD)D.autoUpdate===!0&&D.update(q);else if(D.isLight)m.pushLight(D),D.castShadow&&m.pushShadow(D);else if(D.isSprite){if(!D.frustumCulled||vt.intersectsSprite(D)){se&&N.setFromMatrixPosition(D.matrixWorld).applyMatrix4(Ge);let pt=we.update(D),bt=D.material;bt.visible&&b.push(D,pt,bt,ue,N.z,null)}}else if((D.isMesh||D.isLine||D.isPoints)&&(!D.frustumCulled||vt.intersectsObject(D))){let pt=we.update(D),bt=D.material;if(se&&(D.boundingSphere!==void 0?(D.boundingSphere===null&&D.computeBoundingSphere(),N.copy(D.boundingSphere.center)):(pt.boundingSphere===null&&pt.computeBoundingSphere(),N.copy(pt.boundingSphere.center)),N.applyMatrix4(D.matrixWorld).applyMatrix4(Ge)),Array.isArray(bt)){let At=pt.groups;for(let $t=0,ai=At.length;$t<ai;$t++){let fi=At[$t],Bn=bt[fi.materialIndex];Bn&&Bn.visible&&b.push(D,pt,Bn,ue,N.z,fi)}}else bt.visible&&b.push(D,pt,bt,ue,N.z,null)}}let Ye=D.children;for(let pt=0,bt=Ye.length;pt<bt;pt++)Sc(Ye[pt],q,ue,se)}function Po(D,q,ue,se){let ae=D.opaque,Ye=D.transmissive,pt=D.transparent;m.setupLightsView(ue),Y===!0&&Ve.setGlobalState(_.clippingPlanes,ue),se&&ye.viewport(x.copy(se)),ae.length>0&&Ea(ae,q,ue),Ye.length>0&&Ea(Ye,q,ue),pt.length>0&&Ea(pt,q,ue),ye.buffers.depth.setTest(!0),ye.buffers.depth.setMask(!0),ye.buffers.color.setMask(!0),ye.setPolygonOffset(!1)}function Rc(D,q,ue,se){if((ue.isScene===!0?ue.overrideMaterial:null)!==null)return;m.state.transmissionRenderTarget[se.id]===void 0&&(m.state.transmissionRenderTarget[se.id]=new oi(1,1,{generateMipmaps:!0,type:fe.has("EXT_color_buffer_half_float")||fe.has("EXT_color_buffer_float")?Wi:ic,minFilter:wo,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1}));let Ye=m.state.transmissionRenderTarget[se.id],pt=se.viewport||x;Ye.setSize(pt.z,pt.w);let bt=_.getRenderTarget();_.setRenderTarget(Ye),_.getClearColor(O),K=_.getClearAlpha(),K<1&&_.setClearColor(16777215,.5),_.clear();let At=_.toneMapping;_.toneMapping=Ja;let $t=se.viewport;if(se.viewport!==void 0&&(se.viewport=void 0),m.setupLightsView(se),Y===!0&&Ve.setGlobalState(_.clippingPlanes,se),Ea(D,ue,se),Ze.updateMultisampleRenderTarget(Ye),Ze.updateRenderTargetMipmap(Ye),fe.has("WEBGL_multisampled_render_to_texture")===!1){let ai=!1;for(let fi=0,Bn=q.length;fi<Bn;fi++){let br=q[fi],fo=br.object,Da=br.geometry,ki=br.material,qt=br.group;if(ki.side===Yn&&fo.layers.test(se.layers)){let Hf=ki.side;ki.side=Hr,ki.needsUpdate=!0,zf(fo,ue,se,Da,ki,qt),ki.side=Hf,ki.needsUpdate=!0,ai=!0}}ai===!0&&(Ze.updateMultisampleRenderTarget(Ye),Ze.updateRenderTargetMipmap(Ye))}_.setRenderTarget(bt),_.setClearColor(O,K),$t!==void 0&&(se.viewport=$t),_.toneMapping=At}function Ea(D,q,ue){let se=q.isScene===!0?q.overrideMaterial:null;for(let ae=0,Ye=D.length;ae<Ye;ae++){let pt=D[ae],bt=pt.object,At=pt.geometry,$t=se===null?pt.material:se,ai=pt.group;bt.layers.test(ue.layers)&&zf(bt,q,ue,At,$t,ai)}}function zf(D,q,ue,se,ae,Ye){D.onBeforeRender(_,q,ue,se,ae,Ye),D.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,D.matrixWorld),D.normalMatrix.getNormalMatrix(D.modelViewMatrix),ae.onBeforeRender(_,q,ue,se,D,Ye),ae.transparent===!0&&ae.side===Yn&&ae.forceSinglePass===!1?(ae.side=Hr,ae.needsUpdate=!0,_.renderBufferDirect(ue,q,se,ae,D,Ye),ae.side=us,ae.needsUpdate=!0,_.renderBufferDirect(ue,q,se,ae,D,Ye),ae.side=Yn):_.renderBufferDirect(ue,q,se,ae,D,Ye),D.onAfterRender(_,q,ue,se,ae,Ye)}function eb(D,q,ue){q.isScene!==!0&&(q=Se);let se=De.get(D),ae=m.state.lights,Ye=m.state.shadowsArray,pt=ae.state.version,bt=Ee.getParameters(D,ae.state,Ye,q,ue),At=Ee.getProgramCacheKey(bt),$t=se.programs;se.environment=D.isMeshStandardMaterial?q.environment:null,se.fog=q.fog,se.envMap=(D.isMeshStandardMaterial?I:mt).get(D.envMap||se.environment),se.envMapRotation=se.environment!==null&&D.envMap===null?q.environmentRotation:D.envMapRotation,$t===void 0&&(D.addEventListener("dispose",Te),$t=new Map,se.programs=$t);let ai=$t.get(At);if(ai!==void 0){if(se.currentProgram===ai&&se.lightsStateVersion===pt)return xI(D,bt),ai}else bt.uniforms=Ee.getUniforms(D),D.onBuild(ue,bt,_),D.onBeforeCompile(bt,_),ai=Ee.acquireProgram(bt,At),$t.set(At,ai),se.uniforms=bt.uniforms;let fi=se.uniforms;return(!D.isShaderMaterial&&!D.isRawShaderMaterial||D.clipping===!0)&&(fi.clippingPlanes=Ve.uniform),xI(D,bt),se.needsLights=r4(D),se.lightsStateVersion=pt,se.needsLights&&(fi.ambientLightColor.value=ae.state.ambient,fi.lightProbe.value=ae.state.probe,fi.directionalLights.value=ae.state.directional,fi.directionalLightShadows.value=ae.state.directionalShadow,fi.spotLights.value=ae.state.spot,fi.spotLightShadows.value=ae.state.spotShadow,fi.rectAreaLights.value=ae.state.rectArea,fi.ltc_1.value=ae.state.rectAreaLTC1,fi.ltc_2.value=ae.state.rectAreaLTC2,fi.pointLights.value=ae.state.point,fi.pointLightShadows.value=ae.state.pointShadow,fi.hemisphereLights.value=ae.state.hemi,fi.directionalShadowMap.value=ae.state.directionalShadowMap,fi.directionalShadowMatrix.value=ae.state.directionalShadowMatrix,fi.spotShadowMap.value=ae.state.spotShadowMap,fi.spotLightMatrix.value=ae.state.spotLightMatrix,fi.spotLightMap.value=ae.state.spotLightMap,fi.pointShadowMap.value=ae.state.pointShadowMap,fi.pointShadowMatrix.value=ae.state.pointShadowMatrix),se.currentProgram=ai,se.uniformsList=null,ai}function yI(D){if(D.uniformsList===null){let q=D.currentProgram.getUniforms();D.uniformsList=Bh.seqWithValue(q.seq,D.uniforms)}return D.uniformsList}function xI(D,q){let ue=De.get(D);ue.outputColorSpace=q.outputColorSpace,ue.batching=q.batching,ue.instancing=q.instancing,ue.instancingColor=q.instancingColor,ue.instancingMorph=q.instancingMorph,ue.skinning=q.skinning,ue.morphTargets=q.morphTargets,ue.morphNormals=q.morphNormals,ue.morphColors=q.morphColors,ue.morphTargetsCount=q.morphTargetsCount,ue.numClippingPlanes=q.numClippingPlanes,ue.numIntersection=q.numClipIntersection,ue.vertexAlphas=q.vertexAlphas,ue.vertexTangents=q.vertexTangents,ue.toneMapping=q.toneMapping}function i4(D,q,ue,se,ae){q.isScene!==!0&&(q=Se),Ze.resetTextureUnits();let Ye=q.fog,pt=se.isMeshStandardMaterial?q.environment:null,bt=w===null?_.outputColorSpace:w.isXRRenderTarget===!0?w.texture.colorSpace:jn,At=(se.isMeshStandardMaterial?I:mt).get(se.envMap||pt),$t=se.vertexColors===!0&&!!ue.attributes.color&&ue.attributes.color.itemSize===4,ai=!!ue.attributes.tangent&&(!!se.normalMap||se.anisotropy>0),fi=!!ue.morphAttributes.position,Bn=!!ue.morphAttributes.normal,br=!!ue.morphAttributes.color,fo=Ja;se.toneMapped&&(w===null||w.isXRRenderTarget===!0)&&(fo=_.toneMapping);let Da=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,ki=Da!==void 0?Da.length:0,qt=De.get(se),Hf=m.state.lights;if(Y===!0&&(Ae===!0||D!==S)){let ko=D===S&&se.id===A;Ve.setState(se,D,ko)}let cn=!1;se.version===qt.__version?(qt.needsLights&&qt.lightsStateVersion!==Hf.state.version||qt.outputColorSpace!==bt||ae.isBatchedMesh&&qt.batching===!1||!ae.isBatchedMesh&&qt.batching===!0||ae.isInstancedMesh&&qt.instancing===!1||!ae.isInstancedMesh&&qt.instancing===!0||ae.isSkinnedMesh&&qt.skinning===!1||!ae.isSkinnedMesh&&qt.skinning===!0||ae.isInstancedMesh&&qt.instancingColor===!0&&ae.instanceColor===null||ae.isInstancedMesh&&qt.instancingColor===!1&&ae.instanceColor!==null||ae.isInstancedMesh&&qt.instancingMorph===!0&&ae.morphTexture===null||ae.isInstancedMesh&&qt.instancingMorph===!1&&ae.morphTexture!==null||qt.envMap!==At||se.fog===!0&&qt.fog!==Ye||qt.numClippingPlanes!==void 0&&(qt.numClippingPlanes!==Ve.numPlanes||qt.numIntersection!==Ve.numIntersection)||qt.vertexAlphas!==$t||qt.vertexTangents!==ai||qt.morphTargets!==fi||qt.morphNormals!==Bn||qt.morphColors!==br||qt.toneMapping!==fo||qt.morphTargetsCount!==ki)&&(cn=!0):(cn=!0,qt.__version=se.version);let Il=qt.currentProgram;cn===!0&&(Il=eb(se,q,ae));let wI=!1,Gf=!1,ww=!1,_r=Il.getUniforms(),Tc=qt.uniforms;if(ye.useProgram(Il.program)&&(wI=!0,Gf=!0,ww=!0),se.id!==A&&(A=se.id,Gf=!0),wI||S!==D){_r.setValue(B,"projectionMatrix",D.projectionMatrix),_r.setValue(B,"viewMatrix",D.matrixWorldInverse);let ko=_r.map.cameraPosition;ko!==void 0&&ko.setValue(B,N.setFromMatrixPosition(D.matrixWorld)),Ie.logarithmicDepthBuffer&&_r.setValue(B,"logDepthBufFC",2/(Math.log(D.far+1)/Math.LN2)),(se.isMeshPhongMaterial||se.isMeshToonMaterial||se.isMeshLambertMaterial||se.isMeshBasicMaterial||se.isMeshStandardMaterial||se.isShaderMaterial)&&_r.setValue(B,"isOrthographic",D.isOrthographicCamera===!0),S!==D&&(S=D,Gf=!0,ww=!0)}if(ae.isSkinnedMesh){_r.setOptional(B,ae,"bindMatrix"),_r.setOptional(B,ae,"bindMatrixInverse");let ko=ae.skeleton;ko&&(ko.boneTexture===null&&ko.computeBoneTexture(),_r.setValue(B,"boneTexture",ko.boneTexture,Ze))}ae.isBatchedMesh&&(_r.setOptional(B,ae,"batchingTexture"),_r.setValue(B,"batchingTexture",ae._matricesTexture,Ze));let Mw=ue.morphAttributes;if((Mw.position!==void 0||Mw.normal!==void 0||Mw.color!==void 0)&&ot.update(ae,ue,Il),(Gf||qt.receiveShadow!==ae.receiveShadow)&&(qt.receiveShadow=ae.receiveShadow,_r.setValue(B,"receiveShadow",ae.receiveShadow)),se.isMeshGouraudMaterial&&se.envMap!==null&&(Tc.envMap.value=At,Tc.flipEnvMap.value=At.isCubeTexture&&At.isRenderTargetTexture===!1?-1:1),se.isMeshStandardMaterial&&se.envMap===null&&q.environment!==null&&(Tc.envMapIntensity.value=q.environmentIntensity),Gf&&(_r.setValue(B,"toneMappingExposure",_.toneMappingExposure),qt.needsLights&&n4(Tc,ww),Ye&&se.fog===!0&&Re.refreshFogUniforms(Tc,Ye),Re.refreshMaterialUniforms(Tc,se,$,G,m.state.transmissionRenderTarget[D.id]),Bh.upload(B,yI(qt),Tc,Ze)),se.isShaderMaterial&&se.uniformsNeedUpdate===!0&&(Bh.upload(B,yI(qt),Tc,Ze),se.uniformsNeedUpdate=!1),se.isSpriteMaterial&&_r.setValue(B,"center",ae.center),_r.setValue(B,"modelViewMatrix",ae.modelViewMatrix),_r.setValue(B,"normalMatrix",ae.normalMatrix),_r.setValue(B,"modelMatrix",ae.matrixWorld),se.isShaderMaterial||se.isRawShaderMaterial){let ko=se.uniformsGroups;for(let Sw=0,o4=ko.length;Sw<o4;Sw++){let MI=ko[Sw];si.update(MI,Il),si.bind(MI,Il)}}return Il}function n4(D,q){D.ambientLightColor.needsUpdate=q,D.lightProbe.needsUpdate=q,D.directionalLights.needsUpdate=q,D.directionalLightShadows.needsUpdate=q,D.pointLights.needsUpdate=q,D.pointLightShadows.needsUpdate=q,D.spotLights.needsUpdate=q,D.spotLightShadows.needsUpdate=q,D.rectAreaLights.needsUpdate=q,D.hemisphereLights.needsUpdate=q}function r4(D){return D.isMeshLambertMaterial||D.isMeshToonMaterial||D.isMeshPhongMaterial||D.isMeshStandardMaterial||D.isShadowMaterial||D.isShaderMaterial&&D.lights===!0}this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return R},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(D,q,ue){De.get(D.texture).__webglTexture=q,De.get(D.depthTexture).__webglTexture=ue;let se=De.get(D);se.__hasExternalTextures=!0,se.__autoAllocateDepthBuffer=ue===void 0,se.__autoAllocateDepthBuffer||fe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),se.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(D,q){let ue=De.get(D);ue.__webglFramebuffer=q,ue.__useDefaultFramebuffer=q===void 0},this.setRenderTarget=function(D,q=0,ue=0){w=D,C=q,R=ue;let se=!0,ae=null,Ye=!1,pt=!1;if(D){let At=De.get(D);At.__useDefaultFramebuffer!==void 0?(ye.bindFramebuffer(B.FRAMEBUFFER,null),se=!1):At.__webglFramebuffer===void 0?Ze.setupRenderTarget(D):At.__hasExternalTextures&&Ze.rebindTextures(D,De.get(D.texture).__webglTexture,De.get(D.depthTexture).__webglTexture);let $t=D.texture;($t.isData3DTexture||$t.isDataArrayTexture||$t.isCompressedArrayTexture)&&(pt=!0);let ai=De.get(D).__webglFramebuffer;D.isWebGLCubeRenderTarget?(Array.isArray(ai[q])?ae=ai[q][ue]:ae=ai[q],Ye=!0):D.samples>0&&Ze.useMultisampledRTT(D)===!1?ae=De.get(D).__webglMultisampledFramebuffer:Array.isArray(ai)?ae=ai[ue]:ae=ai,x.copy(D.viewport),F.copy(D.scissor),V=D.scissorTest}else x.copy(me).multiplyScalar($).floor(),F.copy(ke).multiplyScalar($).floor(),V=$e;if(ye.bindFramebuffer(B.FRAMEBUFFER,ae)&&se&&ye.drawBuffers(D,ae),ye.viewport(x),ye.scissor(F),ye.setScissorTest(V),Ye){let At=De.get(D.texture);B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_CUBE_MAP_POSITIVE_X+q,At.__webglTexture,ue)}else if(pt){let At=De.get(D.texture),$t=q||0;B.framebufferTextureLayer(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,At.__webglTexture,ue||0,$t)}A=-1},this.readRenderTargetPixels=function(D,q,ue,se,ae,Ye,pt){if(!(D&&D.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let bt=De.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&pt!==void 0&&(bt=bt[pt]),bt){ye.bindFramebuffer(B.FRAMEBUFFER,bt);try{let At=D.texture,$t=At.format,ai=At.type;if(!Ie.textureFormatReadable($t)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ie.textureTypeReadable(ai)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}q>=0&&q<=D.width-se&&ue>=0&&ue<=D.height-ae&&B.readPixels(q,ue,se,ae,it.convert($t),it.convert(ai),Ye)}finally{let At=w!==null?De.get(w).__webglFramebuffer:null;ye.bindFramebuffer(B.FRAMEBUFFER,At)}}},this.copyFramebufferToTexture=function(D,q,ue=0){let se=Math.pow(2,-ue),ae=Math.floor(q.image.width*se),Ye=Math.floor(q.image.height*se);Ze.setTexture2D(q,0),B.copyTexSubImage2D(B.TEXTURE_2D,ue,0,0,D.x,D.y,ae,Ye),ye.unbindTexture()},this.copyTextureToTexture=function(D,q,ue,se=0){let ae=q.image.width,Ye=q.image.height,pt=it.convert(ue.format),bt=it.convert(ue.type);Ze.setTexture2D(ue,0),B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,ue.flipY),B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),B.pixelStorei(B.UNPACK_ALIGNMENT,ue.unpackAlignment),q.isDataTexture?B.texSubImage2D(B.TEXTURE_2D,se,D.x,D.y,ae,Ye,pt,bt,q.image.data):q.isCompressedTexture?B.compressedTexSubImage2D(B.TEXTURE_2D,se,D.x,D.y,q.mipmaps[0].width,q.mipmaps[0].height,pt,q.mipmaps[0].data):B.texSubImage2D(B.TEXTURE_2D,se,D.x,D.y,pt,bt,q.image),se===0&&ue.generateMipmaps&&B.generateMipmap(B.TEXTURE_2D),ye.unbindTexture()},this.copyTextureToTexture3D=function(D,q,ue,se,ae=0){let Ye=D.max.x-D.min.x,pt=D.max.y-D.min.y,bt=D.max.z-D.min.z,At=it.convert(se.format),$t=it.convert(se.type),ai;if(se.isData3DTexture)Ze.setTexture3D(se,0),ai=B.TEXTURE_3D;else if(se.isDataArrayTexture||se.isCompressedArrayTexture)Ze.setTexture2DArray(se,0),ai=B.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,se.flipY),B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,se.premultiplyAlpha),B.pixelStorei(B.UNPACK_ALIGNMENT,se.unpackAlignment);let fi=B.getParameter(B.UNPACK_ROW_LENGTH),Bn=B.getParameter(B.UNPACK_IMAGE_HEIGHT),br=B.getParameter(B.UNPACK_SKIP_PIXELS),fo=B.getParameter(B.UNPACK_SKIP_ROWS),Da=B.getParameter(B.UNPACK_SKIP_IMAGES),ki=ue.isCompressedTexture?ue.mipmaps[ae]:ue.image;B.pixelStorei(B.UNPACK_ROW_LENGTH,ki.width),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,ki.height),B.pixelStorei(B.UNPACK_SKIP_PIXELS,D.min.x),B.pixelStorei(B.UNPACK_SKIP_ROWS,D.min.y),B.pixelStorei(B.UNPACK_SKIP_IMAGES,D.min.z),ue.isDataTexture||ue.isData3DTexture?B.texSubImage3D(ai,ae,q.x,q.y,q.z,Ye,pt,bt,At,$t,ki.data):se.isCompressedArrayTexture?B.compressedTexSubImage3D(ai,ae,q.x,q.y,q.z,Ye,pt,bt,At,ki.data):B.texSubImage3D(ai,ae,q.x,q.y,q.z,Ye,pt,bt,At,$t,ki),B.pixelStorei(B.UNPACK_ROW_LENGTH,fi),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,Bn),B.pixelStorei(B.UNPACK_SKIP_PIXELS,br),B.pixelStorei(B.UNPACK_SKIP_ROWS,fo),B.pixelStorei(B.UNPACK_SKIP_IMAGES,Da),ae===0&&se.generateMipmaps&&B.generateMipmap(ai),ye.unbindTexture()},this.initTexture=function(D){D.isCubeTexture?Ze.setTextureCube(D,0):D.isData3DTexture?Ze.setTexture3D(D,0):D.isDataArrayTexture||D.isCompressedArrayTexture?Ze.setTexture2DArray(D,0):Ze.setTexture2D(D,0),ye.unbindTexture()},this.resetState=function(){C=0,R=0,w=null,ye.reset(),zt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Zs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let i=this.getContext();i.drawingBufferColorSpace=e===Ny?"display-p3":"srgb",i.unpackColorSpace=Di.workingColorSpace===ng?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}},W0=class n{constructor(e,i=25e-5){this.isFogExp2=!0,this.name="",this.color=new _e(e),this.density=i}clone(){return new n(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}},Gh=class n{constructor(e,i=1,t=1e3){this.isFog=!0,this.name="",this.color=new _e(e),this.near=i,this.far=t}clone(){return new n(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}},Wh=class extends Rt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new no,this.environmentIntensity=1,this.environmentRotation=new no,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,i){return super.copy(e,i),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let i=super.toJSON(e);return this.fog!==null&&(i.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(i.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(i.object.backgroundIntensity=this.backgroundIntensity),i.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(i.object.environmentIntensity=this.environmentIntensity),i.object.environmentRotation=this.environmentRotation.toArray(),i}},rc=class{constructor(e,i){this.isInterleavedBuffer=!0,this.array=e,this.stride=i,this.count=e!==void 0?e.length/i:0,this.usage=Tp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=So()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return YL("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,i){this.updateRanges.push({start:e,count:i})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,i,t){e*=this.stride,t*=i.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=i.array[t+r];return this}set(e,i=0){return this.array.set(e,i),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=So()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let i=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),t=new this.constructor(i,this.stride);return t.setUsage(this.usage),t}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=So()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Ur=new M,ta=class n{constructor(e,i,t,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=i,this.offset=t,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let i=0,t=this.data.count;i<t;i++)Ur.fromBufferAttribute(this,i),Ur.applyMatrix4(e),this.setXYZ(i,Ur.x,Ur.y,Ur.z);return this}applyNormalMatrix(e){for(let i=0,t=this.count;i<t;i++)Ur.fromBufferAttribute(this,i),Ur.applyNormalMatrix(e),this.setXYZ(i,Ur.x,Ur.y,Ur.z);return this}transformDirection(e){for(let i=0,t=this.count;i<t;i++)Ur.fromBufferAttribute(this,i),Ur.transformDirection(e),this.setXYZ(i,Ur.x,Ur.y,Ur.z);return this}getComponent(e,i){let t=this.array[e*this.data.stride+this.offset+i];return this.normalized&&(t=zr(t,this.array)),t}setComponent(e,i,t){return this.normalized&&(t=Zt(t,this.array)),this.data.array[e*this.data.stride+this.offset+i]=t,this}setX(e,i){return this.normalized&&(i=Zt(i,this.array)),this.data.array[e*this.data.stride+this.offset]=i,this}setY(e,i){return this.normalized&&(i=Zt(i,this.array)),this.data.array[e*this.data.stride+this.offset+1]=i,this}setZ(e,i){return this.normalized&&(i=Zt(i,this.array)),this.data.array[e*this.data.stride+this.offset+2]=i,this}setW(e,i){return this.normalized&&(i=Zt(i,this.array)),this.data.array[e*this.data.stride+this.offset+3]=i,this}getX(e){let i=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(i=zr(i,this.array)),i}getY(e){let i=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(i=zr(i,this.array)),i}getZ(e){let i=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(i=zr(i,this.array)),i}getW(e){let i=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(i=zr(i,this.array)),i}setXY(e,i,t){return e=e*this.data.stride+this.offset,this.normalized&&(i=Zt(i,this.array),t=Zt(t,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=t,this}setXYZ(e,i,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(i=Zt(i,this.array),t=Zt(t,this.array),r=Zt(r,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=t,this.data.array[e+2]=r,this}setXYZW(e,i,t,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(i=Zt(i,this.array),t=Zt(t,this.array),r=Zt(r,this.array),o=Zt(o,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=t,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let i=[];for(let t=0;t<this.count;t++){let r=t*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)i.push(this.data.array[r+o])}return new di(new this.array.constructor(i),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new n(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let i=[];for(let t=0;t<this.count;t++){let r=t*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)i.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:i,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},Fp=class extends dn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new _e(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},Dh,op=new M,Ah=new M,Ih=new M,Ph=new z,sp=new z,o3=new je,c0=new M,ap=new M,l0=new M,iN=new z,qT=new z,nN=new z,$0=class extends Rt{constructor(e=new Fp){if(super(),this.isSprite=!0,this.type="Sprite",Dh===void 0){Dh=new ft;let i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new rc(i,5);Dh.setIndex([0,1,2,0,2,3]),Dh.setAttribute("position",new ta(t,3,0,!1)),Dh.setAttribute("uv",new ta(t,2,3,!1))}this.geometry=Dh,this.material=e,this.center=new z(.5,.5)}raycast(e,i){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ah.setFromMatrixScale(this.matrixWorld),o3.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ih.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ah.multiplyScalar(-Ih.z);let t=this.material.rotation,r,o;t!==0&&(o=Math.cos(t),r=Math.sin(t));let s=this.center;d0(c0.set(-.5,-.5,0),Ih,s,Ah,r,o),d0(ap.set(.5,-.5,0),Ih,s,Ah,r,o),d0(l0.set(.5,.5,0),Ih,s,Ah,r,o),iN.set(0,0),qT.set(1,0),nN.set(1,1);let a=e.ray.intersectTriangle(c0,ap,l0,!1,op);if(a===null&&(d0(ap.set(-.5,.5,0),Ih,s,Ah,r,o),qT.set(0,1),a=e.ray.intersectTriangle(c0,l0,ap,!1,op),a===null))return;let c=e.ray.origin.distanceTo(op);c<e.near||c>e.far||i.push({distance:c,point:op.clone(),uv:Qa.getInterpolation(op,c0,ap,l0,iN,qT,nN,new z),face:null,object:this})}copy(e,i){return super.copy(e,i),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}};function d0(n,e,i,t,r,o){Ph.subVectors(n,i).addScalar(.5).multiply(t),r!==void 0?(sp.x=o*Ph.x-r*Ph.y,sp.y=r*Ph.x+o*Ph.y):sp.copy(Ph),n.copy(e),n.x+=sp.x,n.y+=sp.y,n.applyMatrix4(o3)}var u0=new M,rN=new M,q0=class extends Rt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);let i=e.levels;for(let t=0,r=i.length;t<r;t++){let o=i[t];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,i=0,t=0){i=Math.abs(i);let r=this.levels,o;for(o=0;o<r.length&&!(i<r[o].distance);o++);return r.splice(o,0,{distance:i,hysteresis:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){let i=this.levels;if(i.length>0){let t,r;for(t=1,r=i.length;t<r;t++){let o=i[t].distance;if(i[t].object.visible&&(o-=o*i[t].hysteresis),e<o)break}return i[t-1].object}return null}raycast(e,i){if(this.levels.length>0){u0.setFromMatrixPosition(this.matrixWorld);let r=e.ray.origin.distanceTo(u0);this.getObjectForDistance(r).raycast(e,i)}}update(e){let i=this.levels;if(i.length>1){u0.setFromMatrixPosition(e.matrixWorld),rN.setFromMatrixPosition(this.matrixWorld);let t=u0.distanceTo(rN)/e.zoom;i[0].object.visible=!0;let r,o;for(r=1,o=i.length;r<o;r++){let s=i[r].distance;if(i[r].object.visible&&(s-=s*i[r].hysteresis),t>=s)i[r-1].object.visible=!1,i[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<o;r++)i[r].object.visible=!1}}toJSON(e){let i=super.toJSON(e);this.autoUpdate===!1&&(i.object.autoUpdate=!1),i.object.levels=[];let t=this.levels;for(let r=0,o=t.length;r<o;r++){let s=t[r];i.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return i}},oN=new M,sN=new xi,aN=new xi,PK=new M,cN=new je,h0=new M,XT=new Tn,lN=new je,YT=new Js,$h=class extends Le{constructor(e,i){super(e,i),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=dC,this.bindMatrix=new je,this.bindMatrixInverse=new je,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;this.boundingBox===null&&(this.boundingBox=new vn),this.boundingBox.makeEmpty();let i=e.getAttribute("position");for(let t=0;t<i.count;t++)this.getVertexPosition(t,h0),this.boundingBox.expandByPoint(h0)}computeBoundingSphere(){let e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Tn),this.boundingSphere.makeEmpty();let i=e.getAttribute("position");for(let t=0;t<i.count;t++)this.getVertexPosition(t,h0),this.boundingSphere.expandByPoint(h0)}copy(e,i){return super.copy(e,i),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,i){let t=this.material,r=this.matrixWorld;t!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),XT.copy(this.boundingSphere),XT.applyMatrix4(r),e.ray.intersectsSphere(XT)!==!1&&(lN.copy(r).invert(),YT.copy(e.ray).applyMatrix4(lN),!(this.boundingBox!==null&&YT.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,i,YT)))}getVertexPosition(e,i){return super.getVertexPosition(e,i),this.applyBoneTransform(e,i),i}bind(e,i){this.skeleton=e,i===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),i=this.matrixWorld),this.bindMatrix.copy(i),this.bindMatrixInverse.copy(i).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new xi,i=this.geometry.attributes.skinWeight;for(let t=0,r=i.count;t<r;t++){e.fromBufferAttribute(i,t);let o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),i.setXYZW(t,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===dC?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===TL?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,i){let t=this.skeleton,r=this.geometry;sN.fromBufferAttribute(r.attributes.skinIndex,e),aN.fromBufferAttribute(r.attributes.skinWeight,e),oN.copy(i).applyMatrix4(this.bindMatrix),i.set(0,0,0);for(let o=0;o<4;o++){let s=aN.getComponent(o);if(s!==0){let a=sN.getComponent(o);cN.multiplyMatrices(t.bones[a].matrixWorld,t.boneInverses[a]),i.addScaledVector(PK.copy(oN).applyMatrix4(cN),s)}}return i.applyMatrix4(this.bindMatrixInverse)}},jd=class extends Rt{constructor(){super(),this.isBone=!0,this.type="Bone"}},io=class extends yn{constructor(e=null,i=1,t=1,r,o,s,a,c,l=li,d=li,u,h){super(null,s,a,c,l,d,r,o,u,h),this.isDataTexture=!0,this.image={data:e,width:i,height:t},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},dN=new je,kK=new je,qh=class n{constructor(e=[],i=[]){this.uuid=So(),this.bones=e.slice(0),this.boneInverses=i,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,i=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),i.length===0)this.calculateInverses();else if(e.length!==i.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,r=this.bones.length;t<r;t++)this.boneInverses.push(new je)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,i=this.bones.length;e<i;e++){let t=new je;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,i=this.bones.length;e<i;e++){let t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,i=this.bones.length;e<i;e++){let t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){let e=this.bones,i=this.boneInverses,t=this.boneMatrices,r=this.boneTexture;for(let o=0,s=e.length;o<s;o++){let a=e[o]?e[o].matrixWorld:kK;dN.multiplyMatrices(a,i[o]),dN.toArray(t,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);let i=new Float32Array(e*e*4);i.set(this.boneMatrices);let t=new io(i,e,e,Mo,Rr);return t.needsUpdate=!0,this.boneMatrices=i,this.boneTexture=t,this}getBoneByName(e){for(let i=0,t=this.bones.length;i<t;i++){let r=this.bones[i];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,i){this.uuid=e.uuid;for(let t=0,r=e.bones.length;t<r;t++){let o=e.bones[t],s=i[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new jd),this.bones.push(s),this.boneInverses.push(new je().fromArray(e.boneInverses[t]))}return this.init(),this}toJSON(){let e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let i=this.bones,t=this.boneInverses;for(let r=0,o=i.length;r<o;r++){let s=i[r];e.bones.push(s.uuid);let a=t[r];e.boneInverses.push(a.toArray())}return e}},fs=class extends di{constructor(e,i,t,r=1){super(e,i,t),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},kh=new je,uN=new je,f0=[],hN=new vn,FK=new je,cp=new Le,lp=new Tn,sl=class extends Le{constructor(e,i,t){super(e,i),this.isInstancedMesh=!0,this.instanceMatrix=new fs(new Float32Array(t*16),16),this.instanceColor=null,this.morphTexture=null,this.count=t,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<t;r++)this.setMatrixAt(r,FK)}computeBoundingBox(){let e=this.geometry,i=this.count;this.boundingBox===null&&(this.boundingBox=new vn),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let t=0;t<i;t++)this.getMatrixAt(t,kh),hN.copy(e.boundingBox).applyMatrix4(kh),this.boundingBox.union(hN)}computeBoundingSphere(){let e=this.geometry,i=this.count;this.boundingSphere===null&&(this.boundingSphere=new Tn),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let t=0;t<i;t++)this.getMatrixAt(t,kh),lp.copy(e.boundingSphere).applyMatrix4(kh),this.boundingSphere.union(lp)}copy(e,i){return super.copy(e,i),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,i){i.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,i){i.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,i){let t=i.morphTargetInfluences,r=this.morphTexture.source.data.data,o=t.length+1,s=e*o+1;for(let a=0;a<t.length;a++)t[a]=r[s+a]}raycast(e,i){let t=this.matrixWorld,r=this.count;if(cp.geometry=this.geometry,cp.material=this.material,cp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),lp.copy(this.boundingSphere),lp.applyMatrix4(t),e.ray.intersectsSphere(lp)!==!1))for(let o=0;o<r;o++){this.getMatrixAt(o,kh),uN.multiplyMatrices(t,kh),cp.matrixWorld=uN,cp.raycast(e,f0);for(let s=0,a=f0.length;s<a;s++){let c=f0[s];c.instanceId=o,c.object=this,i.push(c)}f0.length=0}}setColorAt(e,i){this.instanceColor===null&&(this.instanceColor=new fs(new Float32Array(this.instanceMatrix.count*3),3)),i.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,i){i.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,i){let t=i.morphTargetInfluences,r=t.length+1;this.morphTexture===null&&(this.morphTexture=new io(new Float32Array(r*this.count),r,this.count,Hd,Rr));let o=this.morphTexture.source.data.data,s=0;for(let l=0;l<t.length;l++)s+=t[l];let a=this.geometry.morphTargetsRelative?1:1-s,c=r*e;o[c]=a,o.set(t,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}};function jK(n,e){return n.z-e.z}function OK(n,e){return e.z-n.z}var tE=class{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,i){let t=this.pool,r=this.list;this.index>=t.length&&t.push({start:-1,count:-1,z:-1});let o=t[this.index];r.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=i}reset(){this.list.length=0,this.index=0}},Fh="batchId",el=new je,fN=new je,NK=new je,mN=new je,ZT=new kd,m0=new vn,ud=new Tn,dp=new M,QT=new tE,Sr=new Le,p0=[];function LK(n,e,i=0){let t=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){let r=n.count;for(let o=0;o<r;o++)for(let s=0;s<t;s++)e.setComponent(o+i,s,n.getComponent(o,s))}else e.array.set(n.array,i*t);e.needsUpdate=!0}var X0=class extends Le{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,i,t=i*2,r){super(new ft,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=i,this._maxIndexCount=t,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);let i=new Float32Array(e*e*4),t=new io(i,e,e,Mo,Rr);this._matricesTexture=t}_initializeGeometry(e){let i=this.geometry,t=this._maxVertexCount,r=this._maxGeometryCount,o=this._maxIndexCount;if(this._geometryInitialized===!1){for(let a in e.attributes){let c=e.getAttribute(a),{array:l,itemSize:d,normalized:u}=c,h=new l.constructor(t*d),f=new di(h,d,u);i.setAttribute(a,f)}if(e.getIndex()!==null){let a=t>65536?new Uint32Array(o):new Uint16Array(o);i.setIndex(new di(a,1))}let s=r>65536?new Uint32Array(t):new Uint16Array(t);i.setAttribute(Fh,new di(s,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Fh))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Fh}"`);let i=this.geometry;if(!!e.getIndex()!=!!i.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(let t in i.attributes){if(t===Fh)continue;if(!e.hasAttribute(t))throw new Error(`BatchedMesh: Added geometry missing "${t}". All geometries must have consistent attributes.`);let r=e.getAttribute(t),o=i.getAttribute(t);if(r.itemSize!==o.itemSize||r.normalized!==o.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vn);let e=this._geometryCount,i=this.boundingBox,t=this._active;i.makeEmpty();for(let r=0;r<e;r++)t[r]!==!1&&(this.getMatrixAt(r,el),this.getBoundingBoxAt(r,m0).applyMatrix4(el),i.union(m0))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Tn);let e=this._geometryCount,i=this.boundingSphere,t=this._active;i.makeEmpty();for(let r=0;r<e;r++)t[r]!==!1&&(this.getMatrixAt(r,el),this.getBoundingSphereAt(r,ud).applyMatrix4(el),i.union(ud))}addGeometry(e,i=-1,t=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");let r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1},o=null,s=this._reservedRanges,a=this._drawRanges,c=this._bounds;this._geometryCount!==0&&(o=s[s.length-1]),i===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=i,o===null?r.vertexStart=0:r.vertexStart=o.vertexStart+o.vertexCount;let l=e.getIndex(),d=l!==null;if(d&&(t===-1?r.indexCount=l.count:r.indexCount=t,o===null?r.indexStart=0:r.indexStart=o.indexStart+o.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");let u=this._visibility,h=this._active,f=this._matricesTexture,p=this._matricesTexture.image.data;u.push(!0),h.push(!0);let b=this._geometryCount;this._geometryCount++,NK.toArray(p,b*16),f.needsUpdate=!0,s.push(r),a.push({start:d?r.indexStart:r.vertexStart,count:-1}),c.push({boxInitialized:!1,box:new vn,sphereInitialized:!1,sphere:new Tn});let m=this.geometry.getAttribute(Fh);for(let g=0;g<r.vertexCount;g++)m.setX(r.vertexStart+g,b);return m.needsUpdate=!0,this.setGeometryAt(b,e),b}setGeometryAt(e,i){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(i);let t=this.geometry,r=t.getIndex()!==null,o=t.getIndex(),s=i.getIndex(),a=this._reservedRanges[e];if(r&&s.count>a.indexCount||i.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");let c=a.vertexStart,l=a.vertexCount;for(let f in t.attributes){if(f===Fh)continue;let p=i.getAttribute(f),b=t.getAttribute(f);LK(p,b,c);let m=p.itemSize;for(let g=p.count,v=l;g<v;g++){let _=c+g;for(let y=0;y<m;y++)b.setComponent(_,y,0)}b.needsUpdate=!0,b.addUpdateRange(c*m,l*m)}if(r){let f=a.indexStart;for(let p=0;p<s.count;p++)o.setX(f+p,c+s.getX(p));for(let p=s.count,b=a.indexCount;p<b;p++)o.setX(f+p,c);o.needsUpdate=!0,o.addUpdateRange(f,a.indexCount)}let d=this._bounds[e];i.boundingBox!==null?(d.box.copy(i.boundingBox),d.boxInitialized=!0):d.boxInitialized=!1,i.boundingSphere!==null?(d.sphere.copy(i.boundingSphere),d.sphereInitialized=!0):d.sphereInitialized=!1;let u=this._drawRanges[e],h=i.getAttribute("position");return u.count=r?s.count:h.count,this._visibilityChanged=!0,e}deleteGeometry(e){let i=this._active;return e>=i.length||i[e]===!1?this:(i[e]=!1,this._visibilityChanged=!0,this)}getInstanceCountAt(e){return this._multiDrawInstances===null?null:this._multiDrawInstances[e]}setInstanceCountAt(e,i){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[e]=i,e}getBoundingBoxAt(e,i){if(this._active[e]===!1)return null;let r=this._bounds[e],o=r.box,s=this.geometry;if(r.boxInitialized===!1){o.makeEmpty();let a=s.index,c=s.attributes.position,l=this._drawRanges[e];for(let d=l.start,u=l.start+l.count;d<u;d++){let h=d;a&&(h=a.getX(h)),o.expandByPoint(dp.fromBufferAttribute(c,h))}r.boxInitialized=!0}return i.copy(o),i}getBoundingSphereAt(e,i){if(this._active[e]===!1)return null;let r=this._bounds[e],o=r.sphere,s=this.geometry;if(r.sphereInitialized===!1){o.makeEmpty(),this.getBoundingBoxAt(e,m0),m0.getCenter(o.center);let a=s.index,c=s.attributes.position,l=this._drawRanges[e],d=0;for(let u=l.start,h=l.start+l.count;u<h;u++){let f=u;a&&(f=a.getX(f)),dp.fromBufferAttribute(c,f),d=Math.max(d,o.center.distanceToSquared(dp))}o.radius=Math.sqrt(d),r.sphereInitialized=!0}return i.copy(o),i}setMatrixAt(e,i){let t=this._active,r=this._matricesTexture,o=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||t[e]===!1?this:(i.toArray(o,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,i){let t=this._active,r=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||t[e]===!1?null:i.fromArray(r,e*16)}setVisibleAt(e,i){let t=this._visibility,r=this._active,o=this._geometryCount;return e>=o||r[e]===!1||t[e]===i?this:(t[e]=i,this._visibilityChanged=!0,this)}getVisibleAt(e){let i=this._visibility,t=this._active,r=this._geometryCount;return e>=r||t[e]===!1?!1:i[e]}raycast(e,i){let t=this._visibility,r=this._active,o=this._drawRanges,s=this._geometryCount,a=this.matrixWorld,c=this.geometry;Sr.material=this.material,Sr.geometry.index=c.index,Sr.geometry.attributes=c.attributes,Sr.geometry.boundingBox===null&&(Sr.geometry.boundingBox=new vn),Sr.geometry.boundingSphere===null&&(Sr.geometry.boundingSphere=new Tn);for(let l=0;l<s;l++){if(!t[l]||!r[l])continue;let d=o[l];Sr.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(l,Sr.matrixWorld).premultiply(a),this.getBoundingBoxAt(l,Sr.geometry.boundingBox),this.getBoundingSphereAt(l,Sr.geometry.boundingSphere),Sr.raycast(e,p0);for(let u=0,h=p0.length;u<h;u++){let f=p0[u];f.object=this,f.batchId=l,i.push(f)}p0.length=0}Sr.material=null,Sr.geometry.index=null,Sr.geometry.attributes={},Sr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(i=>xe({},i)),this._reservedRanges=e._reservedRanges.map(i=>xe({},i)),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(i=>({boxInitialized:i.boxInitialized,box:i.box.clone(),sphereInitialized:i.sphereInitialized,sphere:i.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,i,t,r,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;let s=r.getIndex(),a=s===null?1:s.array.BYTES_PER_ELEMENT,c=this._active,l=this._visibility,d=this._multiDrawStarts,u=this._multiDrawCounts,h=this._drawRanges,f=this.perObjectFrustumCulled;f&&(mN.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse).multiply(this.matrixWorld),ZT.setFromProjectionMatrix(mN,e.coordinateSystem));let p=0;if(this.sortObjects){fN.copy(this.matrixWorld).invert(),dp.setFromMatrixPosition(t.matrixWorld).applyMatrix4(fN);for(let g=0,v=l.length;g<v;g++)if(l[g]&&c[g]){this.getMatrixAt(g,el),this.getBoundingSphereAt(g,ud).applyMatrix4(el);let _=!1;if(f&&(_=!ZT.intersectsSphere(ud)),!_){let y=dp.distanceTo(ud.center);QT.push(h[g],y)}}let b=QT.list,m=this.customSort;m===null?b.sort(o.transparent?OK:jK):m.call(this,b,t);for(let g=0,v=b.length;g<v;g++){let _=b[g];d[p]=_.start*a,u[p]=_.count,p++}QT.reset()}else for(let b=0,m=l.length;b<m;b++)if(l[b]&&c[b]){let g=!1;if(f&&(this.getMatrixAt(b,el),this.getBoundingSphereAt(b,ud).applyMatrix4(el),g=!ZT.intersectsSphere(ud)),!g){let v=h[b];d[p]=v.start*a,u[p]=v.count,p++}}this._multiDrawCount=p,this._visibilityChanged=!1}onBeforeShadow(e,i,t,r,o,s){this.onBeforeRender(e,null,r,o,s)}},rn=class extends dn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new _e(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},Y0=new M,Z0=new M,pN=new je,up=new Js,g0=new Tn,KT=new M,gN=new M,Yi=class extends Rt{constructor(e=new ft,i=new rn){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=i,this.updateMorphTargets()}copy(e,i){return super.copy(e,i),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let i=e.attributes.position,t=[0];for(let r=1,o=i.count;r<o;r++)Y0.fromBufferAttribute(i,r-1),Z0.fromBufferAttribute(i,r),t[r]=t[r-1],t[r]+=Y0.distanceTo(Z0);e.setAttribute("lineDistance",new We(t,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,i){let t=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,s=t.drawRange;if(t.boundingSphere===null&&t.computeBoundingSphere(),g0.copy(t.boundingSphere),g0.applyMatrix4(r),g0.radius+=o,e.ray.intersectsSphere(g0)===!1)return;pN.copy(r).invert(),up.copy(e.ray).applyMatrix4(pN);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=this.isLineSegments?2:1,d=t.index,h=t.attributes.position;if(d!==null){let f=Math.max(0,s.start),p=Math.min(d.count,s.start+s.count);for(let b=f,m=p-1;b<m;b+=l){let g=d.getX(b),v=d.getX(b+1),_=b0(this,e,up,c,g,v);_&&i.push(_)}if(this.isLineLoop){let b=d.getX(p-1),m=d.getX(f),g=b0(this,e,up,c,b,m);g&&i.push(g)}}else{let f=Math.max(0,s.start),p=Math.min(h.count,s.start+s.count);for(let b=f,m=p-1;b<m;b+=l){let g=b0(this,e,up,c,b,b+1);g&&i.push(g)}if(this.isLineLoop){let b=b0(this,e,up,c,p-1,f);b&&i.push(b)}}}updateMorphTargets(){let i=this.geometry.morphAttributes,t=Object.keys(i);if(t.length>0){let r=i[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function b0(n,e,i,t,r,o){let s=n.geometry.attributes.position;if(Y0.fromBufferAttribute(s,r),Z0.fromBufferAttribute(s,o),i.distanceSqToSegment(Y0,Z0,KT,gN)>t)return;KT.applyMatrix4(n.matrixWorld);let c=e.ray.origin.distanceTo(KT);if(!(c<e.near||c>e.far))return{distance:c,point:gN.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,object:n}}var bN=new M,_N=new M,Cr=class extends Yi{constructor(e,i){super(e,i),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let i=e.attributes.position,t=[];for(let r=0,o=i.count;r<o;r+=2)bN.fromBufferAttribute(i,r),_N.fromBufferAttribute(i,r+1),t[r]=r===0?0:t[r-1],t[r+1]=t[r]+bN.distanceTo(_N);e.setAttribute("lineDistance",new We(t,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},Xh=class extends Yi{constructor(e,i){super(e,i),this.isLineLoop=!0,this.type="LineLoop"}},Od=class extends dn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new _e(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},vN=new je,iE=new Js,_0=new Tn,v0=new M,Yh=class extends Rt{constructor(e=new ft,i=new Od){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=i,this.updateMorphTargets()}copy(e,i){return super.copy(e,i),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,i){let t=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,s=t.drawRange;if(t.boundingSphere===null&&t.computeBoundingSphere(),_0.copy(t.boundingSphere),_0.applyMatrix4(r),_0.radius+=o,e.ray.intersectsSphere(_0)===!1)return;vN.copy(r).invert(),iE.copy(e.ray).applyMatrix4(vN);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=t.index,u=t.attributes.position;if(l!==null){let h=Math.max(0,s.start),f=Math.min(l.count,s.start+s.count);for(let p=h,b=f;p<b;p++){let m=l.getX(p);v0.fromBufferAttribute(u,m),yN(v0,m,c,r,e,i,this)}}else{let h=Math.max(0,s.start),f=Math.min(u.count,s.start+s.count);for(let p=h,b=f;p<b;p++)v0.fromBufferAttribute(u,p),yN(v0,p,c,r,e,i,this)}}updateMorphTargets(){let i=this.geometry.morphAttributes,t=Object.keys(i);if(t.length>0){let r=i[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function yN(n,e,i,t,r,o,s){let a=iE.distanceSqToPoint(n);if(a<i){let c=new M;iE.closestPointToPoint(n,c),c.applyMatrix4(t);let l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;o.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:s})}}var nE=class extends yn{constructor(e,i,t,r,o,s,a,c,l){super(e,i,t,r,o,s,a,c,l),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:bn,this.magFilter=o!==void 0?o:bn,this.generateMipmaps=!1;let d=this;function u(){d.needsUpdate=!0,e.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(u)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},rE=class extends yn{constructor(e,i){super({width:e,height:i}),this.isFramebufferTexture=!0,this.magFilter=li,this.minFilter=li,this.generateMipmaps=!1,this.needsUpdate=!0}},Zh=class extends yn{constructor(e,i,t,r,o,s,a,c,l,d,u,h){super(null,s,a,c,l,d,r,o,u,h),this.isCompressedTexture=!0,this.image={width:i,height:t},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}},oE=class extends Zh{constructor(e,i,t,r,o,s){super(e,i,t,o,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=to}},sE=class extends Zh{constructor(e,i,t){super(void 0,e[0].width,e[0].height,i,t,tc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}},Nd=class extends yn{constructor(e,i,t,r,o,s,a,c,l){super(e,i,t,r,o,s,a,c,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},To=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,i){let t=this.getUtoTmapping(e);return this.getPoint(t,i)}getPoints(e=5){let i=[];for(let t=0;t<=e;t++)i.push(this.getPoint(t/e));return i}getSpacedPoints(e=5){let i=[];for(let t=0;t<=e;t++)i.push(this.getPointAt(t/e));return i}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let i=[],t,r=this.getPoint(0),o=0;i.push(0);for(let s=1;s<=e;s++)t=this.getPoint(s/e),o+=t.distanceTo(r),i.push(o),r=t;return this.cacheArcLengths=i,i}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,i){let t=this.getLengths(),r=0,o=t.length,s;i?s=i:s=e*t[o-1];let a=0,c=o-1,l;for(;a<=c;)if(r=Math.floor(a+(c-a)/2),l=t[r]-s,l<0)a=r+1;else if(l>0)c=r-1;else{c=r;break}if(r=c,t[r]===s)return r/(o-1);let d=t[r],h=t[r+1]-d,f=(s-d)/h;return(r+f)/(o-1)}getTangent(e,i){let r=e-1e-4,o=e+1e-4;r<0&&(r=0),o>1&&(o=1);let s=this.getPoint(r),a=this.getPoint(o),c=i||(s.isVector2?new z:new M);return c.copy(a).sub(s).normalize(),c}getTangentAt(e,i){let t=this.getUtoTmapping(e);return this.getTangent(t,i)}computeFrenetFrames(e,i){let t=new M,r=[],o=[],s=[],a=new M,c=new je;for(let f=0;f<=e;f++){let p=f/e;r[f]=this.getTangentAt(p,new M)}o[0]=new M,s[0]=new M;let l=Number.MAX_VALUE,d=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);d<=l&&(l=d,t.set(1,0,0)),u<=l&&(l=u,t.set(0,1,0)),h<=l&&t.set(0,0,1),a.crossVectors(r[0],t).normalize(),o[0].crossVectors(r[0],a),s[0].crossVectors(r[0],o[0]);for(let f=1;f<=e;f++){if(o[f]=o[f-1].clone(),s[f]=s[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();let p=Math.acos(Rn(r[f-1].dot(r[f]),-1,1));o[f].applyMatrix4(c.makeRotationAxis(a,p))}s[f].crossVectors(r[f],o[f])}if(i===!0){let f=Math.acos(Rn(o[0].dot(o[e]),-1,1));f/=e,r[0].dot(a.crossVectors(o[0],o[e]))>0&&(f=-f);for(let p=1;p<=e;p++)o[p].applyMatrix4(c.makeRotationAxis(r[p],f*p)),s[p].crossVectors(r[p],o[p])}return{tangents:r,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},ms=class extends To{constructor(e=0,i=0,t=1,r=1,o=0,s=Math.PI*2,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=i,this.xRadius=t,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=c}getPoint(e,i=new z){let t=i,r=Math.PI*2,o=this.aEndAngle-this.aStartAngle,s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(s?o=0:o=r),this.aClockwise===!0&&!s&&(o===r?o=-r:o=o-r);let a=this.aStartAngle+e*o,c=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let d=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=c-this.aX,f=l-this.aY;c=h*d-f*u+this.aX,l=h*u+f*d+this.aY}return t.set(c,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},Q0=class extends ms{constructor(e,i,t,r,o,s){super(e,i,t,t,r,o,s),this.isArcCurve=!0,this.type="ArcCurve"}};function oD(){let n=0,e=0,i=0,t=0;function r(o,s,a,c){n=o,e=a,i=-3*o+3*s-2*a-c,t=2*o-2*s+a+c}return{initCatmullRom:function(o,s,a,c,l){r(s,a,l*(a-o),l*(c-s))},initNonuniformCatmullRom:function(o,s,a,c,l,d,u){let h=(s-o)/l-(a-o)/(l+d)+(a-s)/d,f=(a-s)/d-(c-s)/(d+u)+(c-a)/u;h*=d,f*=d,r(s,a,h,f)},calc:function(o){let s=o*o,a=s*o;return n+e*o+i*s+t*a}}}var y0=new M,JT=new oD,eC=new oD,tC=new oD,K0=class extends To{constructor(e=[],i=!1,t="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=i,this.curveType=t,this.tension=r}getPoint(e,i=new M){let t=i,r=this.points,o=r.length,s=(o-(this.closed?0:1))*e,a=Math.floor(s),c=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:c===0&&a===o-1&&(a=o-2,c=1);let l,d;this.closed||a>0?l=r[(a-1)%o]:(y0.subVectors(r[0],r[1]).add(r[0]),l=y0);let u=r[a%o],h=r[(a+1)%o];if(this.closed||a+2<o?d=r[(a+2)%o]:(y0.subVectors(r[o-1],r[o-2]).add(r[o-1]),d=y0),this.curveType==="centripetal"||this.curveType==="chordal"){let f=this.curveType==="chordal"?.5:.25,p=Math.pow(l.distanceToSquared(u),f),b=Math.pow(u.distanceToSquared(h),f),m=Math.pow(h.distanceToSquared(d),f);b<1e-4&&(b=1),p<1e-4&&(p=b),m<1e-4&&(m=b),JT.initNonuniformCatmullRom(l.x,u.x,h.x,d.x,p,b,m),eC.initNonuniformCatmullRom(l.y,u.y,h.y,d.y,p,b,m),tC.initNonuniformCatmullRom(l.z,u.z,h.z,d.z,p,b,m)}else this.curveType==="catmullrom"&&(JT.initCatmullRom(l.x,u.x,h.x,d.x,this.tension),eC.initCatmullRom(l.y,u.y,h.y,d.y,this.tension),tC.initCatmullRom(l.z,u.z,h.z,d.z,this.tension));return t.set(JT.calc(c),eC.calc(c),tC.calc(c)),t}copy(e){super.copy(e),this.points=[];for(let i=0,t=e.points.length;i<t;i++){let r=e.points[i];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let i=0,t=this.points.length;i<t;i++){let r=this.points[i];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let i=0,t=e.points.length;i<t;i++){let r=e.points[i];this.points.push(new M().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function xN(n,e,i,t,r){let o=(t-e)*.5,s=(r-i)*.5,a=n*n,c=n*a;return(2*i-2*t+o+s)*c+(-3*i+3*t-2*o-s)*a+o*n+i}function BK(n,e){let i=1-n;return i*i*e}function UK(n,e){return 2*(1-n)*n*e}function VK(n,e){return n*n*e}function bp(n,e,i,t){return BK(n,e)+UK(n,i)+VK(n,t)}function zK(n,e){let i=1-n;return i*i*i*e}function HK(n,e){let i=1-n;return 3*i*i*n*e}function GK(n,e){return 3*(1-n)*n*n*e}function WK(n,e){return n*n*n*e}function _p(n,e,i,t,r){return zK(n,e)+HK(n,i)+GK(n,t)+WK(n,r)}var jp=class extends To{constructor(e=new z,i=new z,t=new z,r=new z){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=i,this.v2=t,this.v3=r}getPoint(e,i=new z){let t=i,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return t.set(_p(e,r.x,o.x,s.x,a.x),_p(e,r.y,o.y,s.y,a.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},J0=class extends To{constructor(e=new M,i=new M,t=new M,r=new M){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=i,this.v2=t,this.v3=r}getPoint(e,i=new M){let t=i,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return t.set(_p(e,r.x,o.x,s.x,a.x),_p(e,r.y,o.y,s.y,a.y),_p(e,r.z,o.z,s.z,a.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Op=class extends To{constructor(e=new z,i=new z){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=i}getPoint(e,i=new z){let t=i;return e===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,i){return this.getPoint(e,i)}getTangent(e,i=new z){return i.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,i){return this.getTangent(e,i)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},ey=class extends To{constructor(e=new M,i=new M){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=i}getPoint(e,i=new M){let t=i;return e===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,i){return this.getPoint(e,i)}getTangent(e,i=new M){return i.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,i){return this.getTangent(e,i)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Np=class extends To{constructor(e=new z,i=new z,t=new z){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=i,this.v2=t}getPoint(e,i=new z){let t=i,r=this.v0,o=this.v1,s=this.v2;return t.set(bp(e,r.x,o.x,s.x),bp(e,r.y,o.y,s.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Lp=class extends To{constructor(e=new M,i=new M,t=new M){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=i,this.v2=t}getPoint(e,i=new M){let t=i,r=this.v0,o=this.v1,s=this.v2;return t.set(bp(e,r.x,o.x,s.x),bp(e,r.y,o.y,s.y),bp(e,r.z,o.z,s.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Bp=class extends To{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,i=new z){let t=i,r=this.points,o=(r.length-1)*e,s=Math.floor(o),a=o-s,c=r[s===0?s:s-1],l=r[s],d=r[s>r.length-2?r.length-1:s+1],u=r[s>r.length-3?r.length-1:s+2];return t.set(xN(a,c.x,l.x,d.x,u.x),xN(a,c.y,l.y,d.y,u.y)),t}copy(e){super.copy(e),this.points=[];for(let i=0,t=e.points.length;i<t;i++){let r=e.points[i];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let i=0,t=this.points.length;i<t;i++){let r=this.points[i];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let i=0,t=e.points.length;i<t;i++){let r=e.points[i];this.points.push(new z().fromArray(r))}return this}},ty=Object.freeze({__proto__:null,ArcCurve:Q0,CatmullRomCurve3:K0,CubicBezierCurve:jp,CubicBezierCurve3:J0,EllipseCurve:ms,LineCurve:Op,LineCurve3:ey,QuadraticBezierCurve:Np,QuadraticBezierCurve3:Lp,SplineCurve:Bp}),iy=class extends To{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),i=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(i)){let t=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new ty[t](i,e))}return this}getPoint(e,i){let t=e*this.getLength(),r=this.getCurveLengths(),o=0;for(;o<r.length;){if(r[o]>=t){let s=r[o]-t,a=this.curves[o],c=a.getLength(),l=c===0?0:1-s/c;return a.getPointAt(l,i)}o++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],i=0;for(let t=0,r=this.curves.length;t<r;t++)i+=this.curves[t].getLength(),e.push(i);return this.cacheLengths=e,e}getSpacedPoints(e=40){let i=[];for(let t=0;t<=e;t++)i.push(this.getPoint(t/e));return this.autoClose&&i.push(i[0]),i}getPoints(e=12){let i=[],t;for(let r=0,o=this.curves;r<o.length;r++){let s=o[r],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,c=s.getPoints(a);for(let l=0;l<c.length;l++){let d=c[l];t&&t.equals(d)||(i.push(d),t=d)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i}copy(e){super.copy(e),this.curves=[];for(let i=0,t=e.curves.length;i<t;i++){let r=e.curves[i];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let i=0,t=this.curves.length;i<t;i++){let r=this.curves[i];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let i=0,t=e.curves.length;i<t;i++){let r=e.curves[i];this.curves.push(new ty[r.type]().fromJSON(r))}return this}},Ld=class extends iy{constructor(e){super(),this.type="Path",this.currentPoint=new z,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let i=1,t=e.length;i<t;i++)this.lineTo(e[i].x,e[i].y);return this}moveTo(e,i){return this.currentPoint.set(e,i),this}lineTo(e,i){let t=new Op(this.currentPoint.clone(),new z(e,i));return this.curves.push(t),this.currentPoint.set(e,i),this}quadraticCurveTo(e,i,t,r){let o=new Np(this.currentPoint.clone(),new z(e,i),new z(t,r));return this.curves.push(o),this.currentPoint.set(t,r),this}bezierCurveTo(e,i,t,r,o,s){let a=new jp(this.currentPoint.clone(),new z(e,i),new z(t,r),new z(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){let i=[this.currentPoint.clone()].concat(e),t=new Bp(i);return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this}arc(e,i,t,r,o,s){let a=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+a,i+c,t,r,o,s),this}absarc(e,i,t,r,o,s){return this.absellipse(e,i,t,t,r,o,s),this}ellipse(e,i,t,r,o,s,a,c){let l=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+l,i+d,t,r,o,s,a,c),this}absellipse(e,i,t,r,o,s,a,c){let l=new ms(e,i,t,r,o,s,a,c);if(this.curves.length>0){let u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);let d=l.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},Up=class n extends ft{constructor(e=[new z(0,-.5),new z(.5,0),new z(0,.5)],i=12,t=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:i,phiStart:t,phiLength:r},i=Math.floor(i),r=Rn(r,0,Math.PI*2);let o=[],s=[],a=[],c=[],l=[],d=1/i,u=new M,h=new z,f=new M,p=new M,b=new M,m=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,f.x=g*1,f.y=-m,f.z=g*0,b.copy(f),f.normalize(),c.push(f.x,f.y,f.z);break;case e.length-1:c.push(b.x,b.y,b.z);break;default:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,f.x=g*1,f.y=-m,f.z=g*0,p.copy(f),f.x+=b.x,f.y+=b.y,f.z+=b.z,f.normalize(),c.push(f.x,f.y,f.z),b.copy(p)}for(let v=0;v<=i;v++){let _=t+v*d*r,y=Math.sin(_),C=Math.cos(_);for(let R=0;R<=e.length-1;R++){u.x=e[R].x*y,u.y=e[R].y,u.z=e[R].x*C,s.push(u.x,u.y,u.z),h.x=v/i,h.y=R/(e.length-1),a.push(h.x,h.y);let w=c[3*R+0]*y,A=c[3*R+1],S=c[3*R+0]*C;l.push(w,A,S)}}for(let v=0;v<i;v++)for(let _=0;_<e.length-1;_++){let y=_+v*e.length,C=y,R=y+e.length,w=y+e.length+1,A=y+1;o.push(C,R,A),o.push(w,A,R)}this.setIndex(o),this.setAttribute("position",new We(s,3)),this.setAttribute("uv",new We(a,2)),this.setAttribute("normal",new We(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.points,e.segments,e.phiStart,e.phiLength)}},ny=class n extends Up{constructor(e=1,i=1,t=4,r=8){let o=new Ld;o.absarc(0,-i/2,e,Math.PI*1.5,0),o.absarc(0,i/2,e,0,Math.PI*.5),super(o.getPoints(t),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:i,capSegments:t,radialSegments:r}}static fromJSON(e){return new n(e.radius,e.length,e.capSegments,e.radialSegments)}},ry=class n extends ft{constructor(e=1,i=32,t=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:i,thetaStart:t,thetaLength:r},i=Math.max(3,i);let o=[],s=[],a=[],c=[],l=new M,d=new z;s.push(0,0,0),a.push(0,0,1),c.push(.5,.5);for(let u=0,h=3;u<=i;u++,h+=3){let f=t+u/i*r;l.x=e*Math.cos(f),l.y=e*Math.sin(f),s.push(l.x,l.y,l.z),a.push(0,0,1),d.x=(s[h]/e+1)/2,d.y=(s[h+1]/e+1)/2,c.push(d.x,d.y)}for(let u=1;u<=i;u++)o.push(u,u+1,0);this.setIndex(o),this.setAttribute("position",new We(s,3)),this.setAttribute("normal",new We(a,3)),this.setAttribute("uv",new We(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.segments,e.thetaStart,e.thetaLength)}},Fn=class n extends ft{constructor(e=1,i=1,t=1,r=32,o=1,s=!1,a=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:i,height:t,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:c};let l=this;r=Math.floor(r),o=Math.floor(o);let d=[],u=[],h=[],f=[],p=0,b=[],m=t/2,g=0;v(),s===!1&&(e>0&&_(!0),i>0&&_(!1)),this.setIndex(d),this.setAttribute("position",new We(u,3)),this.setAttribute("normal",new We(h,3)),this.setAttribute("uv",new We(f,2));function v(){let y=new M,C=new M,R=0,w=(i-e)/t;for(let A=0;A<=o;A++){let S=[],x=A/o,F=x*(i-e)+e;for(let V=0;V<=r;V++){let O=V/r,K=O*c+a,ne=Math.sin(K),G=Math.cos(K);C.x=F*ne,C.y=-x*t+m,C.z=F*G,u.push(C.x,C.y,C.z),y.set(ne,w,G).normalize(),h.push(y.x,y.y,y.z),f.push(O,1-x),S.push(p++)}b.push(S)}for(let A=0;A<r;A++)for(let S=0;S<o;S++){let x=b[S][A],F=b[S+1][A],V=b[S+1][A+1],O=b[S][A+1];d.push(x,F,O),d.push(F,V,O),R+=6}l.addGroup(g,R,0),g+=R}function _(y){let C=p,R=new z,w=new M,A=0,S=y===!0?e:i,x=y===!0?1:-1;for(let V=1;V<=r;V++)u.push(0,m*x,0),h.push(0,x,0),f.push(.5,.5),p++;let F=p;for(let V=0;V<=r;V++){let K=V/r*c+a,ne=Math.cos(K),G=Math.sin(K);w.x=S*G,w.y=m*x,w.z=S*ne,u.push(w.x,w.y,w.z),h.push(0,x,0),R.x=ne*.5+.5,R.y=G*.5*x+.5,f.push(R.x,R.y),p++}for(let V=0;V<r;V++){let O=C+V,K=F+V;y===!0?d.push(K,K+1,O):d.push(K+1,K,O),A+=3}l.addGroup(g,A,y===!0?1:2),g+=A}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},oy=class n extends Fn{constructor(e=1,i=1,t=32,r=1,o=!1,s=0,a=Math.PI*2){super(0,e,i,t,r,o,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:i,radialSegments:t,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},ia=class n extends ft{constructor(e=[],i=[],t=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:i,radius:t,detail:r};let o=[],s=[];a(r),l(t),d(),this.setAttribute("position",new We(o,3)),this.setAttribute("normal",new We(o.slice(),3)),this.setAttribute("uv",new We(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(v){let _=new M,y=new M,C=new M;for(let R=0;R<i.length;R+=3)f(i[R+0],_),f(i[R+1],y),f(i[R+2],C),c(_,y,C,v)}function c(v,_,y,C){let R=C+1,w=[];for(let A=0;A<=R;A++){w[A]=[];let S=v.clone().lerp(y,A/R),x=_.clone().lerp(y,A/R),F=R-A;for(let V=0;V<=F;V++)V===0&&A===R?w[A][V]=S:w[A][V]=S.clone().lerp(x,V/F)}for(let A=0;A<R;A++)for(let S=0;S<2*(R-A)-1;S++){let x=Math.floor(S/2);S%2===0?(h(w[A][x+1]),h(w[A+1][x]),h(w[A][x])):(h(w[A][x+1]),h(w[A+1][x+1]),h(w[A+1][x]))}}function l(v){let _=new M;for(let y=0;y<o.length;y+=3)_.x=o[y+0],_.y=o[y+1],_.z=o[y+2],_.normalize().multiplyScalar(v),o[y+0]=_.x,o[y+1]=_.y,o[y+2]=_.z}function d(){let v=new M;for(let _=0;_<o.length;_+=3){v.x=o[_+0],v.y=o[_+1],v.z=o[_+2];let y=m(v)/2/Math.PI+.5,C=g(v)/Math.PI+.5;s.push(y,1-C)}p(),u()}function u(){for(let v=0;v<s.length;v+=6){let _=s[v+0],y=s[v+2],C=s[v+4],R=Math.max(_,y,C),w=Math.min(_,y,C);R>.9&&w<.1&&(_<.2&&(s[v+0]+=1),y<.2&&(s[v+2]+=1),C<.2&&(s[v+4]+=1))}}function h(v){o.push(v.x,v.y,v.z)}function f(v,_){let y=v*3;_.x=e[y+0],_.y=e[y+1],_.z=e[y+2]}function p(){let v=new M,_=new M,y=new M,C=new M,R=new z,w=new z,A=new z;for(let S=0,x=0;S<o.length;S+=9,x+=6){v.set(o[S+0],o[S+1],o[S+2]),_.set(o[S+3],o[S+4],o[S+5]),y.set(o[S+6],o[S+7],o[S+8]),R.set(s[x+0],s[x+1]),w.set(s[x+2],s[x+3]),A.set(s[x+4],s[x+5]),C.copy(v).add(_).add(y).divideScalar(3);let F=m(C);b(R,x+0,v,F),b(w,x+2,_,F),b(A,x+4,y,F)}}function b(v,_,y,C){C<0&&v.x===1&&(s[_]=v.x-1),y.x===0&&y.z===0&&(s[_]=C/2/Math.PI+.5)}function m(v){return Math.atan2(v.z,-v.x)}function g(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.vertices,e.indices,e.radius,e.details)}},sy=class n extends ia{constructor(e=1,i=0){let t=(1+Math.sqrt(5))/2,r=1/t,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-t,0,-r,t,0,r,-t,0,r,t,-r,-t,0,-r,t,0,r,-t,0,r,t,0,-t,0,-r,t,0,-r,-t,0,r,t,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,s,e,i),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new n(e.radius,e.detail)}},x0=new M,w0=new M,iC=new M,M0=new Qa,ay=class extends ft{constructor(e=null,i=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:i},e!==null){let r=Math.pow(10,4),o=Math.cos(Rd*i),s=e.getIndex(),a=e.getAttribute("position"),c=s?s.count:a.count,l=[0,0,0],d=["a","b","c"],u=new Array(3),h={},f=[];for(let p=0;p<c;p+=3){s?(l[0]=s.getX(p),l[1]=s.getX(p+1),l[2]=s.getX(p+2)):(l[0]=p,l[1]=p+1,l[2]=p+2);let{a:b,b:m,c:g}=M0;if(b.fromBufferAttribute(a,l[0]),m.fromBufferAttribute(a,l[1]),g.fromBufferAttribute(a,l[2]),M0.getNormal(iC),u[0]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,u[1]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,u[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(u[0]===u[1]||u[1]===u[2]||u[2]===u[0]))for(let v=0;v<3;v++){let _=(v+1)%3,y=u[v],C=u[_],R=M0[d[v]],w=M0[d[_]],A=`${y}_${C}`,S=`${C}_${y}`;S in h&&h[S]?(iC.dot(h[S].normal)<=o&&(f.push(R.x,R.y,R.z),f.push(w.x,w.y,w.z)),h[S]=null):A in h||(h[A]={index0:l[v],index1:l[_],normal:iC.clone()})}}for(let p in h)if(h[p]){let{index0:b,index1:m}=h[p];x0.fromBufferAttribute(a,b),w0.fromBufferAttribute(a,m),f.push(x0.x,x0.y,x0.z),f.push(w0.x,w0.y,w0.z)}this.setAttribute("position",new We(f,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}},ec=class extends Ld{constructor(e){super(e),this.uuid=So(),this.type="Shape",this.holes=[]}getPointsHoles(e){let i=[];for(let t=0,r=this.holes.length;t<r;t++)i[t]=this.holes[t].getPoints(e);return i}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let i=0,t=e.holes.length;i<t;i++){let r=e.holes[i];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let i=0,t=this.holes.length;i<t;i++){let r=this.holes[i];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let i=0,t=e.holes.length;i<t;i++){let r=e.holes[i];this.holes.push(new Ld().fromJSON(r))}return this}},$K={triangulate:function(n,e,i=2){let t=e&&e.length,r=t?e[0]*i:n.length,o=s3(n,0,r,i,!0),s=[];if(!o||o.next===o.prev)return s;let a,c,l,d,u,h,f;if(t&&(o=QK(n,e,o,i)),n.length>80*i){a=l=n[0],c=d=n[1];for(let p=i;p<r;p+=i)u=n[p],h=n[p+1],u<a&&(a=u),h<c&&(c=h),u>l&&(l=u),h>d&&(d=h);f=Math.max(l-a,d-c),f=f!==0?32767/f:0}return Vp(o,s,i,a,c,f,0),s}};function s3(n,e,i,t,r){let o,s;if(r===cJ(n,e,i,t)>0)for(o=e;o<i;o+=t)s=wN(o,n[o],n[o+1],s);else for(o=i-t;o>=e;o-=t)s=wN(o,n[o],n[o+1],s);return s&&By(s,s.next)&&(Hp(s),s=s.next),s}function Bd(n,e){if(!n)return n;e||(e=n);let i=n,t;do if(t=!1,!i.steiner&&(By(i,i.next)||_n(i.prev,i,i.next)===0)){if(Hp(i),i=e=i.prev,i===i.next)break;t=!0}else i=i.next;while(t||i!==e);return e}function Vp(n,e,i,t,r,o,s){if(!n)return;!s&&o&&iJ(n,t,r,o);let a=n,c,l;for(;n.prev!==n.next;){if(c=n.prev,l=n.next,o?XK(n,t,r,o):qK(n)){e.push(c.i/i|0),e.push(n.i/i|0),e.push(l.i/i|0),Hp(n),n=l.next,a=l.next;continue}if(n=l,n===a){s?s===1?(n=YK(Bd(n),e,i),Vp(n,e,i,t,r,o,2)):s===2&&ZK(n,e,i,t,r,o):Vp(Bd(n),e,i,t,r,o,1);break}}}function qK(n){let e=n.prev,i=n,t=n.next;if(_n(e,i,t)>=0)return!1;let r=e.x,o=i.x,s=t.x,a=e.y,c=i.y,l=t.y,d=r<o?r<s?r:s:o<s?o:s,u=a<c?a<l?a:l:c<l?c:l,h=r>o?r>s?r:s:o>s?o:s,f=a>c?a>l?a:l:c>l?c:l,p=t.next;for(;p!==e;){if(p.x>=d&&p.x<=h&&p.y>=u&&p.y<=f&&Nh(r,a,o,c,s,l,p.x,p.y)&&_n(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function XK(n,e,i,t){let r=n.prev,o=n,s=n.next;if(_n(r,o,s)>=0)return!1;let a=r.x,c=o.x,l=s.x,d=r.y,u=o.y,h=s.y,f=a<c?a<l?a:l:c<l?c:l,p=d<u?d<h?d:h:u<h?u:h,b=a>c?a>l?a:l:c>l?c:l,m=d>u?d>h?d:h:u>h?u:h,g=aE(f,p,e,i,t),v=aE(b,m,e,i,t),_=n.prevZ,y=n.nextZ;for(;_&&_.z>=g&&y&&y.z<=v;){if(_.x>=f&&_.x<=b&&_.y>=p&&_.y<=m&&_!==r&&_!==s&&Nh(a,d,c,u,l,h,_.x,_.y)&&_n(_.prev,_,_.next)>=0||(_=_.prevZ,y.x>=f&&y.x<=b&&y.y>=p&&y.y<=m&&y!==r&&y!==s&&Nh(a,d,c,u,l,h,y.x,y.y)&&_n(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;_&&_.z>=g;){if(_.x>=f&&_.x<=b&&_.y>=p&&_.y<=m&&_!==r&&_!==s&&Nh(a,d,c,u,l,h,_.x,_.y)&&_n(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;y&&y.z<=v;){if(y.x>=f&&y.x<=b&&y.y>=p&&y.y<=m&&y!==r&&y!==s&&Nh(a,d,c,u,l,h,y.x,y.y)&&_n(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function YK(n,e,i){let t=n;do{let r=t.prev,o=t.next.next;!By(r,o)&&a3(r,t,t.next,o)&&zp(r,o)&&zp(o,r)&&(e.push(r.i/i|0),e.push(t.i/i|0),e.push(o.i/i|0),Hp(t),Hp(t.next),t=n=o),t=t.next}while(t!==n);return Bd(t)}function ZK(n,e,i,t,r,o){let s=n;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&oJ(s,a)){let c=c3(s,a);s=Bd(s,s.next),c=Bd(c,c.next),Vp(s,e,i,t,r,o,0),Vp(c,e,i,t,r,o,0);return}a=a.next}s=s.next}while(s!==n)}function QK(n,e,i,t){let r=[],o,s,a,c,l;for(o=0,s=e.length;o<s;o++)a=e[o]*t,c=o<s-1?e[o+1]*t:n.length,l=s3(n,a,c,t,!1),l===l.next&&(l.steiner=!0),r.push(rJ(l));for(r.sort(KK),o=0;o<r.length;o++)i=JK(r[o],i);return i}function KK(n,e){return n.x-e.x}function JK(n,e){let i=eJ(n,e);if(!i)return e;let t=c3(i,n);return Bd(t,t.next),Bd(i,i.next)}function eJ(n,e){let i=e,t=-1/0,r,o=n.x,s=n.y;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){let h=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(h<=o&&h>t&&(t=h,r=i.x<i.next.x?i:i.next,h===o))return r}i=i.next}while(i!==e);if(!r)return null;let a=r,c=r.x,l=r.y,d=1/0,u;i=r;do o>=i.x&&i.x>=c&&o!==i.x&&Nh(s<l?o:t,s,c,l,s<l?t:o,s,i.x,i.y)&&(u=Math.abs(s-i.y)/(o-i.x),zp(i,n)&&(u<d||u===d&&(i.x>r.x||i.x===r.x&&tJ(r,i)))&&(r=i,d=u)),i=i.next;while(i!==a);return r}function tJ(n,e){return _n(n.prev,n,e.prev)<0&&_n(e.next,n,n.next)<0}function iJ(n,e,i,t){let r=n;do r.z===0&&(r.z=aE(r.x,r.y,e,i,t)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,nJ(r)}function nJ(n){let e,i,t,r,o,s,a,c,l=1;do{for(i=n,n=null,o=null,s=0;i;){for(s++,t=i,a=0,e=0;e<l&&(a++,t=t.nextZ,!!t);e++);for(c=l;a>0||c>0&&t;)a!==0&&(c===0||!t||i.z<=t.z)?(r=i,i=i.nextZ,a--):(r=t,t=t.nextZ,c--),o?o.nextZ=r:n=r,r.prevZ=o,o=r;i=t}o.nextZ=null,l*=2}while(s>1);return n}function aE(n,e,i,t,r){return n=(n-i)*r|0,e=(e-t)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function rJ(n){let e=n,i=n;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==n);return i}function Nh(n,e,i,t,r,o,s,a){return(r-s)*(e-a)>=(n-s)*(o-a)&&(n-s)*(t-a)>=(i-s)*(e-a)&&(i-s)*(o-a)>=(r-s)*(t-a)}function oJ(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!sJ(n,e)&&(zp(n,e)&&zp(e,n)&&aJ(n,e)&&(_n(n.prev,n,e.prev)||_n(n,e.prev,e))||By(n,e)&&_n(n.prev,n,n.next)>0&&_n(e.prev,e,e.next)>0)}function _n(n,e,i){return(e.y-n.y)*(i.x-e.x)-(e.x-n.x)*(i.y-e.y)}function By(n,e){return n.x===e.x&&n.y===e.y}function a3(n,e,i,t){let r=R0(_n(n,e,i)),o=R0(_n(n,e,t)),s=R0(_n(i,t,n)),a=R0(_n(i,t,e));return!!(r!==o&&s!==a||r===0&&S0(n,i,e)||o===0&&S0(n,t,e)||s===0&&S0(i,n,t)||a===0&&S0(i,e,t))}function S0(n,e,i){return e.x<=Math.max(n.x,i.x)&&e.x>=Math.min(n.x,i.x)&&e.y<=Math.max(n.y,i.y)&&e.y>=Math.min(n.y,i.y)}function R0(n){return n>0?1:n<0?-1:0}function sJ(n,e){let i=n;do{if(i.i!==n.i&&i.next.i!==n.i&&i.i!==e.i&&i.next.i!==e.i&&a3(i,i.next,n,e))return!0;i=i.next}while(i!==n);return!1}function zp(n,e){return _n(n.prev,n,n.next)<0?_n(n,e,n.next)>=0&&_n(n,n.prev,e)>=0:_n(n,e,n.prev)<0||_n(n,n.next,e)<0}function aJ(n,e){let i=n,t=!1,r=(n.x+e.x)/2,o=(n.y+e.y)/2;do i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(t=!t),i=i.next;while(i!==n);return t}function c3(n,e){let i=new cE(n.i,n.x,n.y),t=new cE(e.i,e.x,e.y),r=n.next,o=e.prev;return n.next=e,e.prev=n,i.next=r,r.prev=i,t.next=i,i.prev=t,o.next=t,t.prev=o,t}function wN(n,e,i,t){let r=new cE(n,e,i);return t?(r.next=t.next,r.prev=t,t.next.prev=r,t.next=r):(r.prev=r,r.next=r),r}function Hp(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function cE(n,e,i){this.i=n,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function cJ(n,e,i,t){let r=0;for(let o=e,s=i-t;o<i;o+=t)r+=(n[s]-n[o])*(n[o+1]+n[s+1]),s=o;return r}var Qs=class n{static area(e){let i=e.length,t=0;for(let r=i-1,o=0;o<i;r=o++)t+=e[r].x*e[o].y-e[o].x*e[r].y;return t*.5}static isClockWise(e){return n.area(e)<0}static triangulateShape(e,i){let t=[],r=[],o=[];MN(e),SN(t,e);let s=e.length;i.forEach(MN);for(let c=0;c<i.length;c++)r.push(s),s+=i[c].length,SN(t,i[c]);let a=$K.triangulate(t,r);for(let c=0;c<a.length;c+=3)o.push(a.slice(c,c+3));return o}};function MN(n){let e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function SN(n,e){for(let i=0;i<e.length;i++)n.push(e[i].x),n.push(e[i].y)}var cy=class n extends ft{constructor(e=new ec([new z(.5,.5),new z(-.5,.5),new z(-.5,-.5),new z(.5,-.5)]),i={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:i},e=Array.isArray(e)?e:[e];let t=this,r=[],o=[];for(let a=0,c=e.length;a<c;a++){let l=e[a];s(l)}this.setAttribute("position",new We(r,3)),this.setAttribute("uv",new We(o,2)),this.computeVertexNormals();function s(a){let c=[],l=i.curveSegments!==void 0?i.curveSegments:12,d=i.steps!==void 0?i.steps:1,u=i.depth!==void 0?i.depth:1,h=i.bevelEnabled!==void 0?i.bevelEnabled:!0,f=i.bevelThickness!==void 0?i.bevelThickness:.2,p=i.bevelSize!==void 0?i.bevelSize:f-.1,b=i.bevelOffset!==void 0?i.bevelOffset:0,m=i.bevelSegments!==void 0?i.bevelSegments:3,g=i.extrudePath,v=i.UVGenerator!==void 0?i.UVGenerator:lJ,_,y=!1,C,R,w,A;g&&(_=g.getSpacedPoints(d),y=!0,h=!1,C=g.computeFrenetFrames(d,!1),R=new M,w=new M,A=new M),h||(m=0,f=0,p=0,b=0);let S=a.extractPoints(l),x=S.shape,F=S.holes;if(!Qs.isClockWise(x)){x=x.reverse();for(let fe=0,Ie=F.length;fe<Ie;fe++){let ye=F[fe];Qs.isClockWise(ye)&&(F[fe]=ye.reverse())}}let O=Qs.triangulateShape(x,F),K=x;for(let fe=0,Ie=F.length;fe<Ie;fe++){let ye=F[fe];x=x.concat(ye)}function ne(fe,Ie,ye){return Ie||console.error("THREE.ExtrudeGeometry: vec does not exist"),fe.clone().addScaledVector(Ie,ye)}let G=x.length,$=O.length;function U(fe,Ie,ye){let Be,De,Ze,mt=fe.x-Ie.x,I=fe.y-Ie.y,E=ye.x-fe.x,Q=ye.y-fe.y,we=mt*mt+I*I,Ee=mt*Q-I*E;if(Math.abs(Ee)>Number.EPSILON){let Re=Math.sqrt(we),ut=Math.sqrt(E*E+Q*Q),ze=Ie.x-I/Re,Ve=Ie.y+mt/Re,Mt=ye.x-Q/ut,Ne=ye.y+E/ut,ot=((Mt-ze)*Q-(Ne-Ve)*E)/(mt*Q-I*E);Be=ze+mt*ot-fe.x,De=Ve+I*ot-fe.y;let Ot=Be*Be+De*De;if(Ot<=2)return new z(Be,De);Ze=Math.sqrt(Ot/2)}else{let Re=!1;mt>Number.EPSILON?E>Number.EPSILON&&(Re=!0):mt<-Number.EPSILON?E<-Number.EPSILON&&(Re=!0):Math.sign(I)===Math.sign(Q)&&(Re=!0),Re?(Be=-I,De=mt,Ze=Math.sqrt(we)):(Be=mt,De=I,Ze=Math.sqrt(we/2))}return new z(Be/Ze,De/Ze)}let Z=[];for(let fe=0,Ie=K.length,ye=Ie-1,Be=fe+1;fe<Ie;fe++,ye++,Be++)ye===Ie&&(ye=0),Be===Ie&&(Be=0),Z[fe]=U(K[fe],K[ye],K[Be]);let me=[],ke,$e=Z.concat();for(let fe=0,Ie=F.length;fe<Ie;fe++){let ye=F[fe];ke=[];for(let Be=0,De=ye.length,Ze=De-1,mt=Be+1;Be<De;Be++,Ze++,mt++)Ze===De&&(Ze=0),mt===De&&(mt=0),ke[Be]=U(ye[Be],ye[Ze],ye[mt]);me.push(ke),$e=$e.concat(ke)}for(let fe=0;fe<m;fe++){let Ie=fe/m,ye=f*Math.cos(Ie*Math.PI/2),Be=p*Math.sin(Ie*Math.PI/2)+b;for(let De=0,Ze=K.length;De<Ze;De++){let mt=ne(K[De],Z[De],Be);N(mt.x,mt.y,-ye)}for(let De=0,Ze=F.length;De<Ze;De++){let mt=F[De];ke=me[De];for(let I=0,E=mt.length;I<E;I++){let Q=ne(mt[I],ke[I],Be);N(Q.x,Q.y,-ye)}}}let vt=p+b;for(let fe=0;fe<G;fe++){let Ie=h?ne(x[fe],$e[fe],vt):x[fe];y?(w.copy(C.normals[0]).multiplyScalar(Ie.x),R.copy(C.binormals[0]).multiplyScalar(Ie.y),A.copy(_[0]).add(w).add(R),N(A.x,A.y,A.z)):N(Ie.x,Ie.y,0)}for(let fe=1;fe<=d;fe++)for(let Ie=0;Ie<G;Ie++){let ye=h?ne(x[Ie],$e[Ie],vt):x[Ie];y?(w.copy(C.normals[fe]).multiplyScalar(ye.x),R.copy(C.binormals[fe]).multiplyScalar(ye.y),A.copy(_[fe]).add(w).add(R),N(A.x,A.y,A.z)):N(ye.x,ye.y,u/d*fe)}for(let fe=m-1;fe>=0;fe--){let Ie=fe/m,ye=f*Math.cos(Ie*Math.PI/2),Be=p*Math.sin(Ie*Math.PI/2)+b;for(let De=0,Ze=K.length;De<Ze;De++){let mt=ne(K[De],Z[De],Be);N(mt.x,mt.y,u+ye)}for(let De=0,Ze=F.length;De<Ze;De++){let mt=F[De];ke=me[De];for(let I=0,E=mt.length;I<E;I++){let Q=ne(mt[I],ke[I],Be);y?N(Q.x,Q.y+_[d-1].y,_[d-1].x+ye):N(Q.x,Q.y,u+ye)}}}Y(),Ae();function Y(){let fe=r.length/3;if(h){let Ie=0,ye=G*Ie;for(let Be=0;Be<$;Be++){let De=O[Be];Se(De[2]+ye,De[1]+ye,De[0]+ye)}Ie=d+m*2,ye=G*Ie;for(let Be=0;Be<$;Be++){let De=O[Be];Se(De[0]+ye,De[1]+ye,De[2]+ye)}}else{for(let Ie=0;Ie<$;Ie++){let ye=O[Ie];Se(ye[2],ye[1],ye[0])}for(let Ie=0;Ie<$;Ie++){let ye=O[Ie];Se(ye[0]+G*d,ye[1]+G*d,ye[2]+G*d)}}t.addGroup(fe,r.length/3-fe,0)}function Ae(){let fe=r.length/3,Ie=0;Ge(K,Ie),Ie+=K.length;for(let ye=0,Be=F.length;ye<Be;ye++){let De=F[ye];Ge(De,Ie),Ie+=De.length}t.addGroup(fe,r.length/3-fe,1)}function Ge(fe,Ie){let ye=fe.length;for(;--ye>=0;){let Be=ye,De=ye-1;De<0&&(De=fe.length-1);for(let Ze=0,mt=d+m*2;Ze<mt;Ze++){let I=G*Ze,E=G*(Ze+1),Q=Ie+Be+I,we=Ie+De+I,Ee=Ie+De+E,Re=Ie+Be+E;Oe(Q,we,Ee,Re)}}}function N(fe,Ie,ye){c.push(fe),c.push(Ie),c.push(ye)}function Se(fe,Ie,ye){B(fe),B(Ie),B(ye);let Be=r.length/3,De=v.generateTopUV(t,r,Be-3,Be-2,Be-1);yt(De[0]),yt(De[1]),yt(De[2])}function Oe(fe,Ie,ye,Be){B(fe),B(Ie),B(Be),B(Ie),B(ye),B(Be);let De=r.length/3,Ze=v.generateSideWallUV(t,r,De-6,De-3,De-2,De-1);yt(Ze[0]),yt(Ze[1]),yt(Ze[3]),yt(Ze[1]),yt(Ze[2]),yt(Ze[3])}function B(fe){r.push(c[fe*3+0]),r.push(c[fe*3+1]),r.push(c[fe*3+2])}function yt(fe){o.push(fe.x),o.push(fe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),i=this.parameters.shapes,t=this.parameters.options;return dJ(i,t,e)}static fromJSON(e,i){let t=[];for(let o=0,s=e.shapes.length;o<s;o++){let a=i[e.shapes[o]];t.push(a)}let r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new ty[r.type]().fromJSON(r)),new n(t,e.options)}},lJ={generateTopUV:function(n,e,i,t,r){let o=e[i*3],s=e[i*3+1],a=e[t*3],c=e[t*3+1],l=e[r*3],d=e[r*3+1];return[new z(o,s),new z(a,c),new z(l,d)]},generateSideWallUV:function(n,e,i,t,r,o){let s=e[i*3],a=e[i*3+1],c=e[i*3+2],l=e[t*3],d=e[t*3+1],u=e[t*3+2],h=e[r*3],f=e[r*3+1],p=e[r*3+2],b=e[o*3],m=e[o*3+1],g=e[o*3+2];return Math.abs(a-d)<Math.abs(s-l)?[new z(s,1-c),new z(l,1-u),new z(h,1-p),new z(b,1-g)]:[new z(a,1-c),new z(d,1-u),new z(f,1-p),new z(m,1-g)]}};function dJ(n,e,i){if(i.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){let o=n[t];i.shapes.push(o.uuid)}else i.shapes.push(n.uuid);return i.options=Object.assign({},e),e.extrudePath!==void 0&&(i.options.extrudePath=e.extrudePath.toJSON()),i}var Qh=class n extends ia{constructor(e=1,i=0){let t=(1+Math.sqrt(5))/2,r=[-1,t,0,1,t,0,-1,-t,0,1,-t,0,0,-1,t,0,1,t,0,-1,-t,0,1,-t,t,0,-1,t,0,1,-t,0,-1,-t,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,o,e,i),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new n(e.radius,e.detail)}},na=class n extends ia{constructor(e=1,i=0){let t=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(t,r,e,i),this.type="OctahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new n(e.radius,e.detail)}},ly=class n extends ft{constructor(e=.5,i=1,t=32,r=1,o=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:i,thetaSegments:t,phiSegments:r,thetaStart:o,thetaLength:s},t=Math.max(3,t),r=Math.max(1,r);let a=[],c=[],l=[],d=[],u=e,h=(i-e)/r,f=new M,p=new z;for(let b=0;b<=r;b++){for(let m=0;m<=t;m++){let g=o+m/t*s;f.x=u*Math.cos(g),f.y=u*Math.sin(g),c.push(f.x,f.y,f.z),l.push(0,0,1),p.x=(f.x/i+1)/2,p.y=(f.y/i+1)/2,d.push(p.x,p.y)}u+=h}for(let b=0;b<r;b++){let m=b*(t+1);for(let g=0;g<t;g++){let v=g+m,_=v,y=v+t+1,C=v+t+2,R=v+1;a.push(_,y,R),a.push(y,C,R)}}this.setIndex(a),this.setAttribute("position",new We(c,3)),this.setAttribute("normal",new We(l,3)),this.setAttribute("uv",new We(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}},dy=class n extends ft{constructor(e=new ec([new z(0,.5),new z(-.5,-.5),new z(.5,-.5)]),i=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:i};let t=[],r=[],o=[],s=[],a=0,c=0;if(Array.isArray(e)===!1)l(e);else for(let d=0;d<e.length;d++)l(e[d]),this.addGroup(a,c,d),a+=c,c=0;this.setIndex(t),this.setAttribute("position",new We(r,3)),this.setAttribute("normal",new We(o,3)),this.setAttribute("uv",new We(s,2));function l(d){let u=r.length/3,h=d.extractPoints(i),f=h.shape,p=h.holes;Qs.isClockWise(f)===!1&&(f=f.reverse());for(let m=0,g=p.length;m<g;m++){let v=p[m];Qs.isClockWise(v)===!0&&(p[m]=v.reverse())}let b=Qs.triangulateShape(f,p);for(let m=0,g=p.length;m<g;m++){let v=p[m];f=f.concat(v)}for(let m=0,g=f.length;m<g;m++){let v=f[m];r.push(v.x,v.y,0),o.push(0,0,1),s.push(v.x,v.y)}for(let m=0,g=b.length;m<g;m++){let v=b[m],_=v[0]+u,y=v[1]+u,C=v[2]+u;t.push(_,y,C),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),i=this.parameters.shapes;return uJ(i,e)}static fromJSON(e,i){let t=[];for(let r=0,o=e.shapes.length;r<o;r++){let s=i[e.shapes[r]];t.push(s)}return new n(t,e.curveSegments)}};function uJ(n,e){if(e.shapes=[],Array.isArray(n))for(let i=0,t=n.length;i<t;i++){let r=n[i];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}var oc=class n extends ft{constructor(e=1,i=32,t=16,r=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:i,heightSegments:t,phiStart:r,phiLength:o,thetaStart:s,thetaLength:a},i=Math.max(3,Math.floor(i)),t=Math.max(2,Math.floor(t));let c=Math.min(s+a,Math.PI),l=0,d=[],u=new M,h=new M,f=[],p=[],b=[],m=[];for(let g=0;g<=t;g++){let v=[],_=g/t,y=0;g===0&&s===0?y=.5/i:g===t&&c===Math.PI&&(y=-.5/i);for(let C=0;C<=i;C++){let R=C/i;u.x=-e*Math.cos(r+R*o)*Math.sin(s+_*a),u.y=e*Math.cos(s+_*a),u.z=e*Math.sin(r+R*o)*Math.sin(s+_*a),p.push(u.x,u.y,u.z),h.copy(u).normalize(),b.push(h.x,h.y,h.z),m.push(R+y,1-_),v.push(l++)}d.push(v)}for(let g=0;g<t;g++)for(let v=0;v<i;v++){let _=d[g][v+1],y=d[g][v],C=d[g+1][v],R=d[g+1][v+1];(g!==0||s>0)&&f.push(_,y,R),(g!==t-1||c<Math.PI)&&f.push(y,C,R)}this.setIndex(f),this.setAttribute("position",new We(p,3)),this.setAttribute("normal",new We(b,3)),this.setAttribute("uv",new We(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},uy=class n extends ia{constructor(e=1,i=0){let t=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(t,r,e,i),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new n(e.radius,e.detail)}},ra=class n extends ft{constructor(e=1,i=.4,t=12,r=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:i,radialSegments:t,tubularSegments:r,arc:o},t=Math.floor(t),r=Math.floor(r);let s=[],a=[],c=[],l=[],d=new M,u=new M,h=new M;for(let f=0;f<=t;f++)for(let p=0;p<=r;p++){let b=p/r*o,m=f/t*Math.PI*2;u.x=(e+i*Math.cos(m))*Math.cos(b),u.y=(e+i*Math.cos(m))*Math.sin(b),u.z=i*Math.sin(m),a.push(u.x,u.y,u.z),d.x=e*Math.cos(b),d.y=e*Math.sin(b),h.subVectors(u,d).normalize(),c.push(h.x,h.y,h.z),l.push(p/r),l.push(f/t)}for(let f=1;f<=t;f++)for(let p=1;p<=r;p++){let b=(r+1)*f+p-1,m=(r+1)*(f-1)+p-1,g=(r+1)*(f-1)+p,v=(r+1)*f+p;s.push(b,m,v),s.push(m,g,v)}this.setIndex(s),this.setAttribute("position",new We(a,3)),this.setAttribute("normal",new We(c,3)),this.setAttribute("uv",new We(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},hy=class n extends ft{constructor(e=1,i=.4,t=64,r=8,o=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:i,tubularSegments:t,radialSegments:r,p:o,q:s},t=Math.floor(t),r=Math.floor(r);let a=[],c=[],l=[],d=[],u=new M,h=new M,f=new M,p=new M,b=new M,m=new M,g=new M;for(let _=0;_<=t;++_){let y=_/t*o*Math.PI*2;v(y,o,s,e,f),v(y+.01,o,s,e,p),m.subVectors(p,f),g.addVectors(p,f),b.crossVectors(m,g),g.crossVectors(b,m),b.normalize(),g.normalize();for(let C=0;C<=r;++C){let R=C/r*Math.PI*2,w=-i*Math.cos(R),A=i*Math.sin(R);u.x=f.x+(w*g.x+A*b.x),u.y=f.y+(w*g.y+A*b.y),u.z=f.z+(w*g.z+A*b.z),c.push(u.x,u.y,u.z),h.subVectors(u,f).normalize(),l.push(h.x,h.y,h.z),d.push(_/t),d.push(C/r)}}for(let _=1;_<=t;_++)for(let y=1;y<=r;y++){let C=(r+1)*(_-1)+(y-1),R=(r+1)*_+(y-1),w=(r+1)*_+y,A=(r+1)*(_-1)+y;a.push(C,R,A),a.push(R,w,A)}this.setIndex(a),this.setAttribute("position",new We(c,3)),this.setAttribute("normal",new We(l,3)),this.setAttribute("uv",new We(d,2));function v(_,y,C,R,w){let A=Math.cos(_),S=Math.sin(_),x=C/y*_,F=Math.cos(x);w.x=R*(2+F)*.5*A,w.y=R*(2+F)*S*.5,w.z=R*Math.sin(x)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},fy=class n extends ft{constructor(e=new Lp(new M(-1,-1,0),new M(-1,1,0),new M(1,1,0)),i=64,t=1,r=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:i,radius:t,radialSegments:r,closed:o};let s=e.computeFrenetFrames(i,o);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;let a=new M,c=new M,l=new z,d=new M,u=[],h=[],f=[],p=[];b(),this.setIndex(p),this.setAttribute("position",new We(u,3)),this.setAttribute("normal",new We(h,3)),this.setAttribute("uv",new We(f,2));function b(){for(let _=0;_<i;_++)m(_);m(o===!1?i:0),v(),g()}function m(_){d=e.getPointAt(_/i,d);let y=s.normals[_],C=s.binormals[_];for(let R=0;R<=r;R++){let w=R/r*Math.PI*2,A=Math.sin(w),S=-Math.cos(w);c.x=S*y.x+A*C.x,c.y=S*y.y+A*C.y,c.z=S*y.z+A*C.z,c.normalize(),h.push(c.x,c.y,c.z),a.x=d.x+t*c.x,a.y=d.y+t*c.y,a.z=d.z+t*c.z,u.push(a.x,a.y,a.z)}}function g(){for(let _=1;_<=i;_++)for(let y=1;y<=r;y++){let C=(r+1)*(_-1)+(y-1),R=(r+1)*_+(y-1),w=(r+1)*_+y,A=(r+1)*(_-1)+y;p.push(C,R,A),p.push(R,w,A)}}function v(){for(let _=0;_<=i;_++)for(let y=0;y<=r;y++)l.x=_/i,l.y=y/r,f.push(l.x,l.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new n(new ty[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}},my=class extends ft{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){let i=[],t=new Set,r=new M,o=new M;if(e.index!==null){let s=e.attributes.position,a=e.index,c=e.groups;c.length===0&&(c=[{start:0,count:a.count,materialIndex:0}]);for(let l=0,d=c.length;l<d;++l){let u=c[l],h=u.start,f=u.count;for(let p=h,b=h+f;p<b;p+=3)for(let m=0;m<3;m++){let g=a.getX(p+m),v=a.getX(p+(m+1)%3);r.fromBufferAttribute(s,g),o.fromBufferAttribute(s,v),RN(r,o,t)===!0&&(i.push(r.x,r.y,r.z),i.push(o.x,o.y,o.z))}}}else{let s=e.attributes.position;for(let a=0,c=s.count/3;a<c;a++)for(let l=0;l<3;l++){let d=3*a+l,u=3*a+(l+1)%3;r.fromBufferAttribute(s,d),o.fromBufferAttribute(s,u),RN(r,o,t)===!0&&(i.push(r.x,r.y,r.z),i.push(o.x,o.y,o.z))}}this.setAttribute("position",new We(i,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}};function RN(n,e,i){let t=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return i.has(t)===!0||i.has(r)===!0?!1:(i.add(t),i.add(r),!0)}var TN=Object.freeze({__proto__:null,BoxGeometry:Xi,CapsuleGeometry:ny,CircleGeometry:ry,ConeGeometry:oy,CylinderGeometry:Fn,DodecahedronGeometry:sy,EdgesGeometry:ay,ExtrudeGeometry:cy,IcosahedronGeometry:Qh,LatheGeometry:Up,OctahedronGeometry:na,PlaneGeometry:ea,PolyhedronGeometry:ia,RingGeometry:ly,ShapeGeometry:dy,SphereGeometry:oc,TetrahedronGeometry:uy,TorusGeometry:ra,TorusKnotGeometry:hy,TubeGeometry:fy,WireframeGeometry:my}),py=class extends dn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new _e(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}},gy=class extends Dt{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}},Er=class extends dn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _e(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ul,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new no,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},Gr=class extends Er{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new z(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Rn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(i){this.ior=(1+.4*i)/(1-.4*i)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new _e(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new _e(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new _e(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},Kh=class extends dn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new _e(16777215),this.specular=new _e(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ul,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new no,this.combine=Jp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},by=class extends dn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new _e(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ul,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},oa=class extends dn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ul,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}},_y=class extends dn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new _e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ul,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new no,this.combine=Jp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},vy=class extends dn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new _e(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ul,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}},yy=class extends rn{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}};function wd(n,e,i){return!n||!i&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function l3(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function d3(n){function e(r,o){return n[r]-n[o]}let i=n.length,t=new Array(i);for(let r=0;r!==i;++r)t[r]=r;return t.sort(e),t}function lE(n,e,i){let t=n.length,r=new n.constructor(t);for(let o=0,s=0;s!==t;++o){let a=i[o]*e;for(let c=0;c!==e;++c)r[s++]=n[a+c]}return r}function sD(n,e,i,t){let r=1,o=n[0];for(;o!==void 0&&o[t]===void 0;)o=n[r++];if(o===void 0)return;let s=o[t];if(s!==void 0)if(Array.isArray(s))do s=o[t],s!==void 0&&(e.push(o.time),i.push.apply(i,s)),o=n[r++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[t],s!==void 0&&(e.push(o.time),s.toArray(i,i.length)),o=n[r++];while(o!==void 0);else do s=o[t],s!==void 0&&(e.push(o.time),i.push(s)),o=n[r++];while(o!==void 0)}function hJ(n,e,i,t,r=30){let o=n.clone();o.name=e;let s=[];for(let c=0;c<o.tracks.length;++c){let l=o.tracks[c],d=l.getValueSize(),u=[],h=[];for(let f=0;f<l.times.length;++f){let p=l.times[f]*r;if(!(p<i||p>=t)){u.push(l.times[f]);for(let b=0;b<d;++b)h.push(l.values[f*d+b])}}u.length!==0&&(l.times=wd(u,l.times.constructor),l.values=wd(h,l.values.constructor),s.push(l))}o.tracks=s;let a=1/0;for(let c=0;c<o.tracks.length;++c)a>o.tracks[c].times[0]&&(a=o.tracks[c].times[0]);for(let c=0;c<o.tracks.length;++c)o.tracks[c].shift(-1*a);return o.resetDuration(),o}function fJ(n,e=0,i=n,t=30){t<=0&&(t=30);let r=i.tracks.length,o=e/t;for(let s=0;s<r;++s){let a=i.tracks[s],c=a.ValueTypeName;if(c==="bool"||c==="string")continue;let l=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===c});if(l===void 0)continue;let d=0,u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=u/3);let h=0,f=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);let p=a.times.length-1,b;if(o<=a.times[0]){let g=d,v=u-d;b=a.values.slice(g,v)}else if(o>=a.times[p]){let g=p*u+d,v=g+u-d;b=a.values.slice(g,v)}else{let g=a.createInterpolant(),v=d,_=u-d;g.evaluate(o),b=g.resultBuffer.slice(v,_)}c==="quaternion"&&new Kt().fromArray(b).normalize().conjugate().toArray(b);let m=l.times.length;for(let g=0;g<m;++g){let v=g*f+h;if(c==="quaternion")Kt.multiplyQuaternionsFlat(l.values,v,b,0,l.values,v);else{let _=f-h*2;for(let y=0;y<_;++y)l.values[v+y]-=b[y]}}}return n.blendMode=eD,n}var mJ={convertArray:wd,isTypedArray:l3,getKeyframeOrder:d3,sortedArray:lE,flattenJSON:sD,subclip:hJ,makeClipAdditive:fJ},sc=class{constructor(e,i,t,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new i.constructor(t),this.sampleValues=i,this.valueSize=t,this.settings=null,this.DefaultSettings_={}}evaluate(e){let i=this.parameterPositions,t=this._cachedIndex,r=i[t],o=i[t-1];e:{t:{let s;i:{n:if(!(e<r)){for(let a=t+2;;){if(r===void 0){if(e<o)break n;return t=i.length,this._cachedIndex=t,this.copySampleValue_(t-1)}if(t===a)break;if(o=r,r=i[++t],e<r)break t}s=i.length;break i}if(!(e>=o)){let a=i[1];e<a&&(t=2,o=a);for(let c=t-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(t===c)break;if(r=o,o=i[--t-1],e>=o)break t}s=t,t=0;break i}break e}for(;t<s;){let a=t+s>>>1;e<i[a]?s=a:t=a+1}if(r=i[t],o=i[t-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return t=i.length,this._cachedIndex=t,this.copySampleValue_(t-1)}this._cachedIndex=t,this.intervalChanged_(t,o,r)}return this.interpolate_(t,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let i=this.resultBuffer,t=this.sampleValues,r=this.valueSize,o=e*r;for(let s=0;s!==r;++s)i[s]=t[o+s];return i}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},xy=class extends sc{constructor(e,i,t,r){super(e,i,t,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:yd,endingEnd:yd}}intervalChanged_(e,i,t){let r=this.parameterPositions,o=e-2,s=e+1,a=r[o],c=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case xd:o=e,a=2*i-t;break;case wp:o=r.length-2,a=i+r[o]-r[o+1];break;default:o=e,a=t}if(c===void 0)switch(this.getSettings_().endingEnd){case xd:s=e,c=2*t-i;break;case wp:s=1,c=t+r[1]-r[0];break;default:s=e-1,c=i}let l=(t-i)*.5,d=this.valueSize;this._weightPrev=l/(i-a),this._weightNext=l/(c-t),this._offsetPrev=o*d,this._offsetNext=s*d}interpolate_(e,i,t,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,d=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(t-i)/(r-i),b=p*p,m=b*p,g=-h*m+2*h*b-h*p,v=(1+h)*m+(-1.5-2*h)*b+(-.5+h)*p+1,_=(-1-f)*m+(1.5+f)*b+.5*p,y=f*m-f*b;for(let C=0;C!==a;++C)o[C]=g*s[d+C]+v*s[l+C]+_*s[c+C]+y*s[u+C];return o}},Gp=class extends sc{constructor(e,i,t,r){super(e,i,t,r)}interpolate_(e,i,t,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,d=(t-i)/(r-i),u=1-d;for(let h=0;h!==a;++h)o[h]=s[l+h]*u+s[c+h]*d;return o}},wy=class extends sc{constructor(e,i,t,r){super(e,i,t,r)}interpolate_(e){return this.copySampleValue_(e-1)}},Co=class{constructor(e,i,t,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(i===void 0||i.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=wd(i,this.TimeBufferType),this.values=wd(t,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let i=e.constructor,t;if(i.toJSON!==this.toJSON)t=i.toJSON(e);else{t={name:e.name,times:wd(e.times,Array),values:wd(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}InterpolantFactoryMethodDiscrete(e){return new wy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Gp(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new xy(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let i;switch(e){case Id:i=this.InterpolantFactoryMethodDiscrete;break;case rl:i=this.InterpolantFactoryMethodLinear;break;case L0:i=this.InterpolantFactoryMethodSmooth;break}if(i===void 0){let t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(t);return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=i,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Id;case this.InterpolantFactoryMethodLinear:return rl;case this.InterpolantFactoryMethodSmooth:return L0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let i=this.times;for(let t=0,r=i.length;t!==r;++t)i[t]+=e}return this}scale(e){if(e!==1){let i=this.times;for(let t=0,r=i.length;t!==r;++t)i[t]*=e}return this}trim(e,i){let t=this.times,r=t.length,o=0,s=r-1;for(;o!==r&&t[o]<e;)++o;for(;s!==-1&&t[s]>i;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);let a=this.getValueSize();this.times=t.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0,i=this.getValueSize();i-Math.floor(i)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let t=this.times,r=this.values,o=t.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){let c=t[a];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(s!==null&&s>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,s),e=!1;break}s=c}if(r!==void 0&&l3(r))for(let a=0,c=r.length;a!==c;++a){let l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){let e=this.times.slice(),i=this.values.slice(),t=this.getValueSize(),r=this.getInterpolation()===L0,o=e.length-1,s=1;for(let a=1;a<o;++a){let c=!1,l=e[a],d=e[a+1];if(l!==d&&(a!==1||l!==e[0]))if(r)c=!0;else{let u=a*t,h=u-t,f=u+t;for(let p=0;p!==t;++p){let b=i[u+p];if(b!==i[h+p]||b!==i[f+p]){c=!0;break}}}if(c){if(a!==s){e[s]=e[a];let u=a*t,h=s*t;for(let f=0;f!==t;++f)i[h+f]=i[u+f]}++s}}if(o>0){e[s]=e[o];for(let a=o*t,c=s*t,l=0;l!==t;++l)i[c+l]=i[a+l];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=i.slice(0,s*t)):(this.times=e,this.values=i),this}clone(){let e=this.times.slice(),i=this.values.slice(),t=this.constructor,r=new t(this.name,e,i);return r.createInterpolant=this.createInterpolant,r}};Co.prototype.TimeBufferType=Float32Array;Co.prototype.ValueBufferType=Float32Array;Co.prototype.DefaultInterpolation=rl;var ac=class extends Co{};ac.prototype.ValueTypeName="bool";ac.prototype.ValueBufferType=Array;ac.prototype.DefaultInterpolation=Id;ac.prototype.InterpolantFactoryMethodLinear=void 0;ac.prototype.InterpolantFactoryMethodSmooth=void 0;var Wp=class extends Co{};Wp.prototype.ValueTypeName="color";var sa=class extends Co{};sa.prototype.ValueTypeName="number";var My=class extends sc{constructor(e,i,t,r){super(e,i,t,r)}interpolate_(e,i,t,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=(t-i)/(r-i),l=e*a;for(let d=l+a;l!==d;l+=4)Kt.slerpFlat(o,0,s,l-a,s,l,c);return o}},ps=class extends Co{InterpolantFactoryMethodLinear(e){return new My(this.times,this.values,this.getValueSize(),e)}};ps.prototype.ValueTypeName="quaternion";ps.prototype.DefaultInterpolation=rl;ps.prototype.InterpolantFactoryMethodSmooth=void 0;var cc=class extends Co{};cc.prototype.ValueTypeName="string";cc.prototype.ValueBufferType=Array;cc.prototype.DefaultInterpolation=Id;cc.prototype.InterpolantFactoryMethodLinear=void 0;cc.prototype.InterpolantFactoryMethodSmooth=void 0;var aa=class extends Co{};aa.prototype.ValueTypeName="vector";var lc=class{constructor(e="",i=-1,t=[],r=jy){this.name=e,this.tracks=t,this.duration=i,this.blendMode=r,this.uuid=So(),this.duration<0&&this.resetDuration()}static parse(e){let i=[],t=e.tracks,r=1/(e.fps||1);for(let s=0,a=t.length;s!==a;++s)i.push(gJ(t[s]).scale(r));let o=new this(e.name,e.duration,i,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){let i=[],t=e.tracks,r={name:e.name,duration:e.duration,tracks:i,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=t.length;o!==s;++o)i.push(Co.toJSON(t[o]));return r}static CreateFromMorphTargetSequence(e,i,t,r){let o=i.length,s=[];for(let a=0;a<o;a++){let c=[],l=[];c.push((a+o-1)%o,a,(a+1)%o),l.push(0,1,0);let d=d3(c);c=lE(c,1,d),l=lE(l,1,d),!r&&c[0]===0&&(c.push(o),l.push(l[0])),s.push(new sa(".morphTargetInfluences["+i[a].name+"]",c,l).scale(1/t))}return new this(e,-1,s)}static findByName(e,i){let t=e;if(!Array.isArray(e)){let r=e;t=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<t.length;r++)if(t[r].name===i)return t[r];return null}static CreateClipsFromMorphTargetSequences(e,i,t){let r={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){let l=e[a],d=l.name.match(o);if(d&&d.length>1){let u=d[1],h=r[u];h||(r[u]=h=[]),h.push(l)}}let s=[];for(let a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],i,t));return s}static parseAnimation(e,i){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let t=function(u,h,f,p,b){if(f.length!==0){let m=[],g=[];sD(f,m,g,p),m.length!==0&&b.push(new u(h,m,g))}},r=[],o=e.name||"default",s=e.fps||30,a=e.blendMode,c=e.length||-1,l=e.hierarchy||[];for(let u=0;u<l.length;u++){let h=l[u].keys;if(!(!h||h.length===0))if(h[0].morphTargets){let f={},p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let b=0;b<h[p].morphTargets.length;b++)f[h[p].morphTargets[b]]=-1;for(let b in f){let m=[],g=[];for(let v=0;v!==h[p].morphTargets.length;++v){let _=h[p];m.push(_.time),g.push(_.morphTarget===b?1:0)}r.push(new sa(".morphTargetInfluence["+b+"]",m,g))}c=f.length*s}else{let f=".bones["+i[u].name+"]";t(aa,f+".position",h,"pos",r),t(ps,f+".quaternion",h,"rot",r),t(aa,f+".scale",h,"scl",r)}}return r.length===0?null:new this(o,c,r,a)}resetDuration(){let e=this.tracks,i=0;for(let t=0,r=e.length;t!==r;++t){let o=this.tracks[t];i=Math.max(i,o.times[o.times.length-1])}return this.duration=i,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let i=0;i<this.tracks.length;i++)e=e&&this.tracks[i].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function pJ(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return sa;case"vector":case"vector2":case"vector3":case"vector4":return aa;case"color":return Wp;case"quaternion":return ps;case"bool":case"boolean":return ac;case"string":return cc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function gJ(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=pJ(n.type);if(n.times===void 0){let i=[],t=[];sD(n.keys,i,t,"value"),n.times=i,n.values=t}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}var Ka={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},$p=class{constructor(e,i,t){let r=this,o=!1,s=0,a=0,c,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=i,this.onError=t,this.itemStart=function(d){a++,o===!1&&r.onStart!==void 0&&r.onStart(d,s,a),o=!0},this.itemEnd=function(d){s++,r.onProgress!==void 0&&r.onProgress(d,s,a),s===a&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,u){return l.push(d,u),this},this.removeHandler=function(d){let u=l.indexOf(d);return u!==-1&&l.splice(u,2),this},this.getHandler=function(d){for(let u=0,h=l.length;u<h;u+=2){let f=l[u],p=l[u+1];if(f.global&&(f.lastIndex=0),f.test(d))return p}return null}}},u3=new $p,Jn=(()=>{class n{constructor(i){this.manager=i!==void 0?i:u3,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(i,t){let r=this;return new Promise(function(o,s){r.load(i,o,t,s)})}parse(){}setCrossOrigin(i){return this.crossOrigin=i,this}setWithCredentials(i){return this.withCredentials=i,this}setPath(i){return this.path=i,this}setResourcePath(i){return this.resourcePath=i,this}setRequestHeader(i){return this.requestHeader=i,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})(),qa={},dE=class extends Error{constructor(e,i){super(e),this.response=i}},Kn=class extends Jn{constructor(e){super(e)}load(e,i,t,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=Ka.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{i&&i(o),this.manager.itemEnd(e)},0),o;if(qa[e]!==void 0){qa[e].push({onLoad:i,onProgress:t,onError:r});return}qa[e]=[],qa[e].push({onLoad:i,onProgress:t,onError:r});let s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(s).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let d=qa[e],u=l.body.getReader(),h=l.headers.get("X-File-Size")||l.headers.get("Content-Length"),f=h?parseInt(h):0,p=f!==0,b=0,m=new ReadableStream({start(g){v();function v(){u.read().then(({done:_,value:y})=>{if(_)g.close();else{b+=y.byteLength;let C=new ProgressEvent("progress",{lengthComputable:p,loaded:b,total:f});for(let R=0,w=d.length;R<w;R++){let A=d[R];A.onProgress&&A.onProgress(C)}g.enqueue(y),v()}})}}});return new Response(m)}else throw new dE(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return l.json();default:if(a===void 0)return l.text();{let u=/charset="?([^;"\s]*)"?/i.exec(a),h=u&&u[1]?u[1].toLowerCase():void 0,f=new TextDecoder(h);return l.arrayBuffer().then(p=>f.decode(p))}}}).then(l=>{Ka.add(e,l);let d=qa[e];delete qa[e];for(let u=0,h=d.length;u<h;u++){let f=d[u];f.onLoad&&f.onLoad(l)}}).catch(l=>{let d=qa[e];if(d===void 0)throw this.manager.itemError(e),l;delete qa[e];for(let u=0,h=d.length;u<h;u++){let f=d[u];f.onError&&f.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},uE=class extends Jn{constructor(e){super(e)}load(e,i,t,r){let o=this,s=new Kn(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{i(o.parse(JSON.parse(a)))}catch(c){r?r(c):console.error(c),o.manager.itemError(e)}},t,r)}parse(e){let i=[];for(let t=0;t<e.length;t++){let r=lc.parse(e[t]);i.push(r)}return i}},hE=class extends Jn{constructor(e){super(e)}load(e,i,t,r){let o=this,s=[],a=new Zh,c=new Kn(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(o.withCredentials);let l=0;function d(u){c.load(e[u],function(h){let f=o.parse(h,!0);s[u]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},l+=1,l===6&&(f.mipmapCount===1&&(a.minFilter=bn),a.image=s,a.format=f.format,a.needsUpdate=!0,i&&i(a))},t,r)}if(Array.isArray(e))for(let u=0,h=e.length;u<h;++u)d(u);else c.load(e,function(u){let h=o.parse(u,!0);if(h.isCubemap){let f=h.mipmaps.length/h.mipmapCount;for(let p=0;p<f;p++){s[p]={mipmaps:[]};for(let b=0;b<h.mipmapCount;b++)s[p].mipmaps.push(h.mipmaps[p*h.mipmapCount+b]),s[p].format=h.format,s[p].width=h.width,s[p].height=h.height}a.image=s}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=bn),a.format=h.format,a.needsUpdate=!0,i&&i(a)},t,r);return a}},Ud=class extends Jn{constructor(e){super(e)}load(e,i,t,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=Ka.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){i&&i(s),o.manager.itemEnd(e)},0),s;let a=Ep("img");function c(){d(),Ka.add(e,this),i&&i(this),o.manager.itemEnd(e)}function l(u){d(),r&&r(u),o.manager.itemError(e),o.manager.itemEnd(e)}function d(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}},fE=class extends Jn{constructor(e){super(e)}load(e,i,t,r){let o=new Pd;o.colorSpace=Pn;let s=new Ud(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function c(l){s.load(e[l],function(d){o.images[l]=d,a++,a===6&&(o.needsUpdate=!0,i&&i(o))},void 0,r)}for(let l=0;l<e.length;++l)c(l);return o}},mE=class extends Jn{constructor(e){super(e)}load(e,i,t,r){let o=this,s=new io,a=new Kn(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(o.withCredentials),a.load(e,function(c){let l;try{l=o.parse(c)}catch(d){if(r!==void 0)r(d);else{console.error(d);return}}l.image!==void 0?s.image=l.image:l.data!==void 0&&(s.image.width=l.width,s.image.height=l.height,s.image.data=l.data),s.wrapS=l.wrapS!==void 0?l.wrapS:to,s.wrapT=l.wrapT!==void 0?l.wrapT:to,s.magFilter=l.magFilter!==void 0?l.magFilter:bn,s.minFilter=l.minFilter!==void 0?l.minFilter:bn,s.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.colorSpace!==void 0&&(s.colorSpace=l.colorSpace),l.flipY!==void 0&&(s.flipY=l.flipY),l.format!==void 0&&(s.format=l.format),l.type!==void 0&&(s.type=l.type),l.mipmaps!==void 0&&(s.mipmaps=l.mipmaps,s.minFilter=wo),l.mipmapCount===1&&(s.minFilter=bn),l.generateMipmaps!==void 0&&(s.generateMipmaps=l.generateMipmaps),s.needsUpdate=!0,i&&i(s,l)},t,r),s}},qp=class extends Jn{constructor(e){super(e)}load(e,i,t,r){let o=new yn,s=new Ud(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,i!==void 0&&i(o)},t,r),o}},ca=class extends Rt{constructor(e,i=1){super(),this.isLight=!0,this.type="Light",this.color=new _e(e),this.intensity=i}dispose(){}copy(e,i){return super.copy(e,i),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let i=super.toJSON(e);return i.object.color=this.color.getHex(),i.object.intensity=this.intensity,this.groundColor!==void 0&&(i.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(i.object.distance=this.distance),this.angle!==void 0&&(i.object.angle=this.angle),this.decay!==void 0&&(i.object.decay=this.decay),this.penumbra!==void 0&&(i.object.penumbra=this.penumbra),this.shadow!==void 0&&(i.object.shadow=this.shadow.toJSON()),i}},Jh=class extends ca{constructor(e,i,t){super(e,t),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Rt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new _e(i)}copy(e,i){return super.copy(e,i),this.groundColor.copy(e.groundColor),this}},nC=new je,CN=new M,EN=new M,Xp=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new z(512,512),this.map=null,this.mapPass=null,this.matrix=new je,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new kd,this._frameExtents=new z(1,1),this._viewportCount=1,this._viewports=[new xi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let i=this.camera,t=this.matrix;CN.setFromMatrixPosition(e.matrixWorld),i.position.copy(CN),EN.setFromMatrixPosition(e.target.matrixWorld),i.lookAt(EN),i.updateMatrixWorld(),nC.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nC),t.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),t.multiply(nC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},pE=class extends Xp{constructor(){super(new Ki(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let i=this.camera,t=Uh*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=e.distance||i.far;(t!==i.fov||r!==i.aspect||o!==i.far)&&(i.fov=t,i.aspect=r,i.far=o,i.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},ef=class extends ca{constructor(e,i,t=0,r=Math.PI/3,o=0,s=2){super(e,i),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Rt.DEFAULT_UP),this.updateMatrix(),this.target=new Rt,this.distance=t,this.angle=r,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new pE}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,i){return super.copy(e,i),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},DN=new je,hp=new M,rC=new M,gE=class extends Xp{constructor(){super(new Ki(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new z(4,2),this._viewportCount=6,this._viewports=[new xi(2,1,1,1),new xi(0,1,1,1),new xi(3,1,1,1),new xi(1,1,1,1),new xi(3,0,1,1),new xi(1,0,1,1)],this._cubeDirections=[new M(1,0,0),new M(-1,0,0),new M(0,0,1),new M(0,0,-1),new M(0,1,0),new M(0,-1,0)],this._cubeUps=[new M(0,1,0),new M(0,1,0),new M(0,1,0),new M(0,1,0),new M(0,0,1),new M(0,0,-1)]}updateMatrices(e,i=0){let t=this.camera,r=this.matrix,o=e.distance||t.far;o!==t.far&&(t.far=o,t.updateProjectionMatrix()),hp.setFromMatrixPosition(e.matrixWorld),t.position.copy(hp),rC.copy(t.position),rC.add(this._cubeDirections[i]),t.up.copy(this._cubeUps[i]),t.lookAt(rC),t.updateMatrixWorld(),r.makeTranslation(-hp.x,-hp.y,-hp.z),DN.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(DN)}},al=class extends ca{constructor(e,i,t=0,r=2){super(e,i),this.isPointLight=!0,this.type="PointLight",this.distance=t,this.decay=r,this.shadow=new gE}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,i){return super.copy(e,i),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},bE=class extends Xp{constructor(){super(new Ro(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},cl=class extends ca{constructor(e,i){super(e,i),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Rt.DEFAULT_UP),this.updateMatrix(),this.target=new Rt,this.shadow=new bE}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},tf=class extends ca{constructor(e,i){super(e,i),this.isAmbientLight=!0,this.type="AmbientLight"}},Sy=class extends ca{constructor(e,i,t=10,r=10){super(e,i),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=t,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){let i=super.toJSON(e);return i.object.width=this.width,i.object.height=this.height,i}},Ry=class{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new M)}set(e){for(let i=0;i<9;i++)this.coefficients[i].copy(e[i]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,i){let t=e.x,r=e.y,o=e.z,s=this.coefficients;return i.copy(s[0]).multiplyScalar(.282095),i.addScaledVector(s[1],.488603*r),i.addScaledVector(s[2],.488603*o),i.addScaledVector(s[3],.488603*t),i.addScaledVector(s[4],1.092548*(t*r)),i.addScaledVector(s[5],1.092548*(r*o)),i.addScaledVector(s[6],.315392*(3*o*o-1)),i.addScaledVector(s[7],1.092548*(t*o)),i.addScaledVector(s[8],.546274*(t*t-r*r)),i}getIrradianceAt(e,i){let t=e.x,r=e.y,o=e.z,s=this.coefficients;return i.copy(s[0]).multiplyScalar(.886227),i.addScaledVector(s[1],2*.511664*r),i.addScaledVector(s[2],2*.511664*o),i.addScaledVector(s[3],2*.511664*t),i.addScaledVector(s[4],2*.429043*t*r),i.addScaledVector(s[5],2*.429043*r*o),i.addScaledVector(s[6],.743125*o*o-.247708),i.addScaledVector(s[7],2*.429043*t*o),i.addScaledVector(s[8],.429043*(t*t-r*r)),i}add(e){for(let i=0;i<9;i++)this.coefficients[i].add(e.coefficients[i]);return this}addScaledSH(e,i){for(let t=0;t<9;t++)this.coefficients[t].addScaledVector(e.coefficients[t],i);return this}scale(e){for(let i=0;i<9;i++)this.coefficients[i].multiplyScalar(e);return this}lerp(e,i){for(let t=0;t<9;t++)this.coefficients[t].lerp(e.coefficients[t],i);return this}equals(e){for(let i=0;i<9;i++)if(!this.coefficients[i].equals(e.coefficients[i]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,i=0){let t=this.coefficients;for(let r=0;r<9;r++)t[r].fromArray(e,i+r*3);return this}toArray(e=[],i=0){let t=this.coefficients;for(let r=0;r<9;r++)t[r].toArray(e,i+r*3);return e}static getBasisAt(e,i){let t=e.x,r=e.y,o=e.z;i[0]=.282095,i[1]=.488603*r,i[2]=.488603*o,i[3]=.488603*t,i[4]=1.092548*t*r,i[5]=1.092548*r*o,i[6]=.315392*(3*o*o-1),i[7]=1.092548*t*o,i[8]=.546274*(t*t-r*r)}},Ty=class extends ca{constructor(e=new Ry,i=1){super(void 0,i),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){let i=super.toJSON(e);return i.object.sh=this.sh.toArray(),i}},Cy=class n extends Jn{constructor(e){super(e),this.textures={}}load(e,i,t,r){let o=this,s=new Kn(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{i(o.parse(JSON.parse(a)))}catch(c){r?r(c):console.error(c),o.manager.itemError(e)}},t,r)}parse(e){let i=this.textures;function t(o){return i[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),i[o]}let r=n.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new _e().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(let o in e.uniforms){let s=e.uniforms[o];switch(r.uniforms[o]={},s.type){case"t":r.uniforms[o].value=t(s.value);break;case"c":r.uniforms[o].value=new _e().setHex(s.value);break;case"v2":r.uniforms[o].value=new z().fromArray(s.value);break;case"v3":r.uniforms[o].value=new M().fromArray(s.value);break;case"v4":r.uniforms[o].value=new xi().fromArray(s.value);break;case"m3":r.uniforms[o].value=new Yt().fromArray(s.value);break;case"m4":r.uniforms[o].value=new je().fromArray(s.value);break;default:r.uniforms[o].value=s.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(let o in e.extensions)r.extensions[o]=e.extensions[o];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=t(e.map)),e.matcap!==void 0&&(r.matcap=t(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=t(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=t(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=t(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),r.normalScale=new z().fromArray(o)}return e.displacementMap!==void 0&&(r.displacementMap=t(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=t(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=t(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=t(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=t(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=t(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=t(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=t(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=t(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=t(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=t(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=t(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=t(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=t(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new z().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=t(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=t(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=t(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=t(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=t(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=t(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=t(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){let i={ShadowMaterial:py,SpriteMaterial:Fp,RawShaderMaterial:gy,ShaderMaterial:Dt,PointsMaterial:Od,MeshPhysicalMaterial:Gr,MeshStandardMaterial:Er,MeshPhongMaterial:Kh,MeshToonMaterial:by,MeshNormalMaterial:oa,MeshLambertMaterial:_y,MeshDepthMaterial:Fd,MeshDistanceMaterial:kp,MeshBasicMaterial:Ji,MeshMatcapMaterial:vy,LineDashedMaterial:yy,LineBasicMaterial:rn,Material:dn};return new i[e]}},gs=class{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let i="";for(let t=0,r=e.length;t<r;t++)i+=String.fromCharCode(e[t]);try{return decodeURIComponent(escape(i))}catch{return i}}static extractUrlBase(e){let i=e.lastIndexOf("/");return i===-1?"./":e.slice(0,i+1)}static resolveURL(e,i){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(i)&&/^\//.test(e)&&(i=i.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:i+e)}},Ey=class extends ft{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},Dy=class extends Jn{constructor(e){super(e)}load(e,i,t,r){let o=this,s=new Kn(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{i(o.parse(JSON.parse(a)))}catch(c){r?r(c):console.error(c),o.manager.itemError(e)}},t,r)}parse(e){let i={},t={};function r(f,p){if(i[p]!==void 0)return i[p];let m=f.interleavedBuffers[p],g=o(f,m.buffer),v=jh(m.type,g),_=new rc(v,m.stride);return _.uuid=m.uuid,i[p]=_,_}function o(f,p){if(t[p]!==void 0)return t[p];let m=f.arrayBuffers[p],g=new Uint32Array(m).buffer;return t[p]=g,g}let s=e.isInstancedBufferGeometry?new Ey:new ft,a=e.data.index;if(a!==void 0){let f=jh(a.type,a.array);s.setIndex(new di(f,1))}let c=e.data.attributes;for(let f in c){let p=c[f],b;if(p.isInterleavedBufferAttribute){let m=r(e.data,p.data);b=new ta(m,p.itemSize,p.offset,p.normalized)}else{let m=jh(p.type,p.array),g=p.isInstancedBufferAttribute?fs:di;b=new g(m,p.itemSize,p.normalized)}p.name!==void 0&&(b.name=p.name),p.usage!==void 0&&b.setUsage(p.usage),s.setAttribute(f,b)}let l=e.data.morphAttributes;if(l)for(let f in l){let p=l[f],b=[];for(let m=0,g=p.length;m<g;m++){let v=p[m],_;if(v.isInterleavedBufferAttribute){let y=r(e.data,v.data);_=new ta(y,v.itemSize,v.offset,v.normalized)}else{let y=jh(v.type,v.array);_=new di(y,v.itemSize,v.normalized)}v.name!==void 0&&(_.name=v.name),b.push(_)}s.morphAttributes[f]=b}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);let u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let f=0,p=u.length;f!==p;++f){let b=u[f];s.addGroup(b.start,b.count,b.materialIndex)}let h=e.data.boundingSphere;if(h!==void 0){let f=new M;h.center!==void 0&&f.fromArray(h.center),s.boundingSphere=new Tn(f,h.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}},_E=class extends Jn{constructor(e){super(e)}load(e,i,t,r){let o=this,s=this.path===""?gs.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;let a=new Kn(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){let l=null;try{l=JSON.parse(c)}catch(u){r!==void 0&&r(u),console.error("THREE:ObjectLoader: Can't parse "+e+".",u.message);return}let d=l.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(l,i)},t,r)}loadAsync(e,i){return yi(this,null,function*(){let t=this,r=this.path===""?gs.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;let o=new Kn(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);let s=yield o.loadAsync(e,i),a=JSON.parse(s),c=a.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return yield t.parseAsync(a)})}parse(e,i){let t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,function(){i!==void 0&&i(l)}),a=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,o,c,a,t),d=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,d),i!==void 0){let u=!1;for(let h in s)if(s[h].data instanceof HTMLImageElement){u=!0;break}u===!1&&i(l)}return l}parseAsync(e){return yi(this,null,function*(){let i=this.parseAnimations(e.animations),t=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,t),o=yield this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,o),a=this.parseMaterials(e.materials,s),c=this.parseObject(e.object,r,a,s,i),l=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,l),c})}parseShapes(e){let i={};if(e!==void 0)for(let t=0,r=e.length;t<r;t++){let o=new ec().fromJSON(e[t]);i[o.uuid]=o}return i}parseSkeletons(e,i){let t={},r={};if(i.traverse(function(o){o.isBone&&(r[o.uuid]=o)}),e!==void 0)for(let o=0,s=e.length;o<s;o++){let a=new qh().fromJSON(e[o],r);t[a.uuid]=a}return t}parseGeometries(e,i){let t={};if(e!==void 0){let r=new Dy;for(let o=0,s=e.length;o<s;o++){let a,c=e[o];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(c);break;default:c.type in TN?a=TN[c.type].fromJSON(c,i):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}a.uuid=c.uuid,c.name!==void 0&&(a.name=c.name),c.userData!==void 0&&(a.userData=c.userData),t[c.uuid]=a}}return t}parseMaterials(e,i){let t={},r={};if(e!==void 0){let o=new Cy;o.setTextures(i);for(let s=0,a=e.length;s<a;s++){let c=e[s];t[c.uuid]===void 0&&(t[c.uuid]=o.parse(c)),r[c.uuid]=t[c.uuid]}}return r}parseAnimations(e){let i={};if(e!==void 0)for(let t=0;t<e.length;t++){let r=e[t],o=lc.parse(r);i[o.uuid]=o}return i}parseImages(e,i){let t=this,r={},o;function s(c){return t.manager.itemStart(c),o.load(c,function(){t.manager.itemEnd(c)},void 0,function(){t.manager.itemError(c),t.manager.itemEnd(c)})}function a(c){if(typeof c=="string"){let l=c,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return s(d)}else return c.data?{data:jh(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){let c=new $p(i);o=new Ud(c),o.setCrossOrigin(this.crossOrigin);for(let l=0,d=e.length;l<d;l++){let u=e[l],h=u.url;if(Array.isArray(h)){let f=[];for(let p=0,b=h.length;p<b;p++){let m=h[p],g=a(m);g!==null&&(g instanceof HTMLImageElement?f.push(g):f.push(new io(g.data,g.width,g.height)))}r[u.uuid]=new Za(f)}else{let f=a(u.url);r[u.uuid]=new Za(f)}}}return r}parseImagesAsync(e){return yi(this,null,function*(){let i=this,t={},r;function o(s){return yi(this,null,function*(){if(typeof s=="string"){let a=s,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:i.resourcePath+a;return yield r.loadAsync(c)}else return s.data?{data:jh(s.type,s.data),width:s.width,height:s.height}:null})}if(e!==void 0&&e.length>0){r=new Ud(this.manager),r.setCrossOrigin(this.crossOrigin);for(let s=0,a=e.length;s<a;s++){let c=e[s],l=c.url;if(Array.isArray(l)){let d=[];for(let u=0,h=l.length;u<h;u++){let f=l[u],p=yield o(f);p!==null&&(p instanceof HTMLImageElement?d.push(p):d.push(new io(p.data,p.width,p.height)))}t[c.uuid]=new Za(d)}else{let d=yield o(c.url);t[c.uuid]=new Za(d)}}}return t})}parseTextures(e,i){function t(o,s){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),s[o])}let r={};if(e!==void 0)for(let o=0,s=e.length;o<s;o++){let a=e[o];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),i[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);let c=i[a.image],l=c.data,d;Array.isArray(l)?(d=new Pd,l.length===6&&(d.needsUpdate=!0)):(l&&l.data?d=new io:d=new yn,l&&(d.needsUpdate=!0)),d.source=c,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=t(a.mapping,bJ)),a.channel!==void 0&&(d.channel=a.channel),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=t(a.wrap[0],AN),d.wrapT=t(a.wrap[1],AN)),a.format!==void 0&&(d.format=a.format),a.internalFormat!==void 0&&(d.internalFormat=a.internalFormat),a.type!==void 0&&(d.type=a.type),a.colorSpace!==void 0&&(d.colorSpace=a.colorSpace),a.minFilter!==void 0&&(d.minFilter=t(a.minFilter,IN)),a.magFilter!==void 0&&(d.magFilter=t(a.magFilter,IN)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.generateMipmaps!==void 0&&(d.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(d.compareFunction=a.compareFunction),a.userData!==void 0&&(d.userData=a.userData),r[a.uuid]=d}return r}parseObject(e,i,t,r,o){let s;function a(h){return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),i[h]}function c(h){if(h!==void 0){if(Array.isArray(h)){let f=[];for(let p=0,b=h.length;p<b;p++){let m=h[p];t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),f.push(t[m])}return f}return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),t[h]}}function l(h){return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),r[h]}let d,u;switch(e.type){case"Scene":s=new Wh,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new _e(e.background):s.background=l(e.background)),e.environment!==void 0&&(s.environment=l(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new Gh(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new W0(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new Ki(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Ro(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new tf(e.color,e.intensity);break;case"DirectionalLight":s=new cl(e.color,e.intensity);break;case"PointLight":s=new al(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new Sy(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new ef(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new Jh(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new Ty().fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),u=c(e.material),s=new $h(d,u),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),u=c(e.material),s=new Le(d,u);break;case"InstancedMesh":d=a(e.geometry),u=c(e.material);let h=e.count,f=e.instanceMatrix,p=e.instanceColor;s=new sl(d,u,h),s.instanceMatrix=new fs(new Float32Array(f.array),16),p!==void 0&&(s.instanceColor=new fs(new Float32Array(p.array),p.itemSize));break;case"BatchedMesh":d=a(e.geometry),u=c(e.material),s=new X0(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,u),s.geometry=d,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._visibility=e.visibility,s._active=e.active,s._bounds=e.bounds.map(b=>{let m=new vn;m.min.fromArray(b.boxMin),m.max.fromArray(b.boxMax);let g=new Tn;return g.radius=b.sphereRadius,g.center.fromArray(b.sphereCenter),{boxInitialized:b.boxInitialized,box:m,sphereInitialized:b.sphereInitialized,sphere:g}}),s._maxGeometryCount=e.maxGeometryCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._geometryCount=e.geometryCount,s._matricesTexture=l(e.matricesTexture.uuid);break;case"LOD":s=new q0;break;case"Line":s=new Yi(a(e.geometry),c(e.material));break;case"LineLoop":s=new Xh(a(e.geometry),c(e.material));break;case"LineSegments":s=new Cr(a(e.geometry),c(e.material));break;case"PointCloud":case"Points":s=new Yh(a(e.geometry),c(e.material));break;case"Sprite":s=new $0(c(e.material));break;case"Group":s=new Tr;break;case"Bone":s=new jd;break;default:s=new Rt}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){let h=e.children;for(let f=0;f<h.length;f++)s.add(this.parseObject(h[f],i,t,r,o))}if(e.animations!==void 0){let h=e.animations;for(let f=0;f<h.length;f++){let p=h[f];s.animations.push(o[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);let h=e.levels;for(let f=0;f<h.length;f++){let p=h[f],b=s.getObjectByProperty("uuid",p.object);b!==void 0&&s.addLevel(b,p.distance,p.hysteresis)}}return s}bindSkeletons(e,i){Object.keys(i).length!==0&&e.traverse(function(t){if(t.isSkinnedMesh===!0&&t.skeleton!==void 0){let r=i[t.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(r,t.bindMatrix)}})}},bJ={UVMapping:B0,CubeReflectionMapping:tc,CubeRefractionMapping:nl,EquirectangularReflectionMapping:yp,EquirectangularRefractionMapping:xp,CubeUVReflectionMapping:of},AN={RepeatWrapping:Go,ClampToEdgeWrapping:to,MirroredRepeatWrapping:Dd},IN={NearestFilter:li,NearestMipmapNearestFilter:eg,NearestMipmapLinearFilter:il,LinearFilter:bn,LinearMipmapNearestFilter:Md,LinearMipmapLinearFilter:wo},Yp=class extends Jn{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,i,t,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=Ka.get(e);if(s!==void 0){if(o.manager.itemStart(e),s.then){s.then(l=>{i&&i(l),o.manager.itemEnd(e)}).catch(l=>{r&&r(l)});return}return setTimeout(function(){i&&i(s),o.manager.itemEnd(e)},0),s}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;let c=fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(l){return Ka.add(e,l),i&&i(l),o.manager.itemEnd(e),l}).catch(function(l){r&&r(l),Ka.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});Ka.add(e,c),o.manager.itemStart(e)}},T0,Zp=class{static getContext(){return T0===void 0&&(T0=new(window.AudioContext||window.webkitAudioContext)),T0}static setContext(e){T0=e}},vE=class extends Jn{constructor(e){super(e)}load(e,i,t,r){let o=this,s=new Kn(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(c){try{let l=c.slice(0);Zp.getContext().decodeAudioData(l,function(u){i(u)}).catch(a)}catch(l){a(l)}},t,r);function a(c){r?r(c):console.error(c),o.manager.itemError(e)}}},PN=new je,kN=new je,hd=new je,yE=class{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ki,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ki,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){let i=this._cache;if(i.focus!==e.focus||i.fov!==e.fov||i.aspect!==e.aspect*this.aspect||i.near!==e.near||i.far!==e.far||i.zoom!==e.zoom||i.eyeSep!==this.eyeSep){i.focus=e.focus,i.fov=e.fov,i.aspect=e.aspect*this.aspect,i.near=e.near,i.far=e.far,i.zoom=e.zoom,i.eyeSep=this.eyeSep,hd.copy(e.projectionMatrix);let r=i.eyeSep/2,o=r*i.near/i.focus,s=i.near*Math.tan(Rd*i.fov*.5)/i.zoom,a,c;kN.elements[12]=-r,PN.elements[12]=r,a=-s*i.aspect+o,c=s*i.aspect+o,hd.elements[0]=2*i.near/(c-a),hd.elements[8]=(c+a)/(c-a),this.cameraL.projectionMatrix.copy(hd),a=-s*i.aspect-o,c=s*i.aspect-o,hd.elements[0]=2*i.near/(c-a),hd.elements[8]=(c+a)/(c-a),this.cameraR.projectionMatrix.copy(hd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(kN),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(PN)}},ro=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=FN(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let i=FN();e=(i-this.oldTime)/1e3,this.oldTime=i,this.elapsedTime+=e}return e}};function FN(){return(typeof performance>"u"?Date:performance).now()}var fd=new M,jN=new Kt,_J=new M,md=new M,xE=class extends Rt{constructor(){super(),this.type="AudioListener",this.context=Zp.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new ro}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);let i=this.context.listener,t=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(fd,jN,_J),md.set(0,0,-1).applyQuaternion(jN),i.positionX){let r=this.context.currentTime+this.timeDelta;i.positionX.linearRampToValueAtTime(fd.x,r),i.positionY.linearRampToValueAtTime(fd.y,r),i.positionZ.linearRampToValueAtTime(fd.z,r),i.forwardX.linearRampToValueAtTime(md.x,r),i.forwardY.linearRampToValueAtTime(md.y,r),i.forwardZ.linearRampToValueAtTime(md.z,r),i.upX.linearRampToValueAtTime(t.x,r),i.upY.linearRampToValueAtTime(t.y,r),i.upZ.linearRampToValueAtTime(t.z,r)}else i.setPosition(fd.x,fd.y,fd.z),i.setOrientation(md.x,md.y,md.z,t.x,t.y,t.z)}},Ay=class extends Rt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;let i=this.context.createBufferSource();return i.buffer=this.buffer,i.loop=this.loop,i.loopStart=this.loopStart,i.loopEnd=this.loopEnd,i.onended=this.onEnded.bind(this),i.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=i,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,i=this.filters.length;e<i;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,i=this.filters.length;e<i;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},pd=new M,ON=new Kt,vJ=new M,gd=new M,wE=class extends Ay{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,i,t){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=i,this.panner.coneOuterGain=t,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(pd,ON,vJ),gd.set(0,0,1).applyQuaternion(ON);let i=this.panner;if(i.positionX){let t=this.context.currentTime+this.listener.timeDelta;i.positionX.linearRampToValueAtTime(pd.x,t),i.positionY.linearRampToValueAtTime(pd.y,t),i.positionZ.linearRampToValueAtTime(pd.z,t),i.orientationX.linearRampToValueAtTime(gd.x,t),i.orientationY.linearRampToValueAtTime(gd.y,t),i.orientationZ.linearRampToValueAtTime(gd.z,t)}else i.setPosition(pd.x,pd.y,pd.z),i.setOrientation(gd.x,gd.y,gd.z)}},ME=class{constructor(e,i=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=i,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0,i=this.getFrequencyData();for(let t=0;t<i.length;t++)e+=i[t];return e/i.length}},Iy=class{constructor(e,i,t){this.binding=e,this.valueSize=t;let r,o,s;switch(i){case"quaternion":r=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(t*6),this._workIndex=5;break;case"string":case"bool":r=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(t*5);break;default:r=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(t*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,i){let t=this.buffer,r=this.valueSize,o=e*r+r,s=this.cumulativeWeight;if(s===0){for(let a=0;a!==r;++a)t[o+a]=t[a];s=i}else{s+=i;let a=i/s;this._mixBufferRegion(t,o,0,a,r)}this.cumulativeWeight=s}accumulateAdditive(e){let i=this.buffer,t=this.valueSize,r=t*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(i,r,0,e,t),this.cumulativeWeightAdditive+=e}apply(e){let i=this.valueSize,t=this.buffer,r=e*i+i,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){let c=i*this._origIndex;this._mixBufferRegion(t,r,c,1-o,i)}s>0&&this._mixBufferRegionAdditive(t,r,this._addIndex*i,1,i);for(let c=i,l=i+i;c!==l;++c)if(t[c]!==t[c+i]){a.setValue(t,r);break}}saveOriginalState(){let e=this.binding,i=this.buffer,t=this.valueSize,r=t*this._origIndex;e.getValue(i,r);for(let o=t,s=r;o!==s;++o)i[o]=i[r+o%t];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,i=e+this.valueSize;for(let t=e;t<i;t++)this.buffer[t]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,i=this._addIndex*this.valueSize;for(let t=0;t<this.valueSize;t++)this.buffer[i+t]=this.buffer[e+t]}_select(e,i,t,r,o){if(r>=.5)for(let s=0;s!==o;++s)e[i+s]=e[t+s]}_slerp(e,i,t,r){Kt.slerpFlat(e,i,e,i,e,t,r)}_slerpAdditive(e,i,t,r,o){let s=this._workIndex*o;Kt.multiplyQuaternionsFlat(e,s,e,i,e,t),Kt.slerpFlat(e,i,e,i,e,s,r)}_lerp(e,i,t,r,o){let s=1-r;for(let a=0;a!==o;++a){let c=i+a;e[c]=e[c]*s+e[t+a]*r}}_lerpAdditive(e,i,t,r,o){for(let s=0;s!==o;++s){let a=i+s;e[a]=e[a]+e[t+s]*r}}},aD="\\[\\]\\.:\\/",yJ=new RegExp("["+aD+"]","g"),cD="[^"+aD+"]",xJ="[^"+aD.replace("\\.","")+"]",wJ=/((?:WC+[\/:])*)/.source.replace("WC",cD),MJ=/(WCOD+)?/.source.replace("WCOD",xJ),SJ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",cD),RJ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",cD),TJ=new RegExp("^"+wJ+MJ+SJ+RJ+"$"),CJ=["material","materials","bones","map"],SE=class{constructor(e,i,t){let r=t||Gi.parseTrackName(i);this._targetGroup=e,this._bindings=e.subscribe_(i,r)}getValue(e,i){this.bind();let t=this._targetGroup.nCachedObjects_,r=this._bindings[t];r!==void 0&&r.getValue(e,i)}setValue(e,i){let t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=t.length;r!==o;++r)t[r].setValue(e,i)}bind(){let e=this._bindings;for(let i=this._targetGroup.nCachedObjects_,t=e.length;i!==t;++i)e[i].bind()}unbind(){let e=this._bindings;for(let i=this._targetGroup.nCachedObjects_,t=e.length;i!==t;++i)e[i].unbind()}},Gi=(()=>{class n{constructor(i,t,r){this.path=t,this.parsedPath=r||n.parseTrackName(t),this.node=n.findNode(i,this.parsedPath.nodeName),this.rootNode=i,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(i,t,r){return i&&i.isAnimationObjectGroup?new n.Composite(i,t,r):new n(i,t,r)}static sanitizeNodeName(i){return i.replace(/\s/g,"_").replace(yJ,"")}static parseTrackName(i){let t=TJ.exec(i);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+i);let r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let s=r.nodeName.substring(o+1);CJ.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+i);return r}static findNode(i,t){if(t===void 0||t===""||t==="."||t===-1||t===i.name||t===i.uuid)return i;if(i.skeleton){let r=i.skeleton.getBoneByName(t);if(r!==void 0)return r}if(i.children){let r=function(s){for(let a=0;a<s.length;a++){let c=s[a];if(c.name===t||c.uuid===t)return c;let l=r(c.children);if(l)return l}return null},o=r(i.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(i,t){i[t]=this.targetObject[this.propertyName]}_getValue_array(i,t){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)i[t++]=r[o]}_getValue_arrayElement(i,t){i[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(i,t){this.resolvedProperty.toArray(i,t)}_setValue_direct(i,t){this.targetObject[this.propertyName]=i[t]}_setValue_direct_setNeedsUpdate(i,t){this.targetObject[this.propertyName]=i[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(i,t){this.targetObject[this.propertyName]=i[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(i,t){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=i[t++]}_setValue_array_setNeedsUpdate(i,t){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=i[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(i,t){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=i[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(i,t){this.resolvedProperty[this.propertyIndex]=i[t]}_setValue_arrayElement_setNeedsUpdate(i,t){this.resolvedProperty[this.propertyIndex]=i[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(i,t){this.resolvedProperty[this.propertyIndex]=i[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(i,t){this.resolvedProperty.fromArray(i,t)}_setValue_fromArray_setNeedsUpdate(i,t){this.resolvedProperty.fromArray(i,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(i,t){this.resolvedProperty.fromArray(i,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(i,t){this.bind(),this.getValue(i,t)}_setValue_unbound(i,t){this.bind(),this.setValue(i,t)}bind(){let i=this.node,t=this.parsedPath,r=t.objectName,o=t.propertyName,s=t.propertyIndex;if(i||(i=n.findNode(this.rootNode,t.nodeName),this.node=i),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!i){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let d=t.objectIndex;switch(r){case"materials":if(!i.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!i.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}i=i.material.materials;break;case"bones":if(!i.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}i=i.skeleton.bones;for(let u=0;u<i.length;u++)if(i[u].name===d){d=u;break}break;case"map":if("map"in i){i=i.map;break}if(!i.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!i.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}i=i.material.map;break;default:if(i[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}i=i[r]}if(d!==void 0){if(i[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,i);return}i=i[d]}}let a=i[o];if(a===void 0){let d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+o+" but it wasn't found.",i);return}let c=this.Versioning.None;this.targetObject=i,i.needsUpdate!==void 0?c=this.Versioning.NeedsUpdate:i.matrixWorldNeedsUpdate!==void 0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(o==="morphTargetInfluences"){if(!i.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!i.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}i.morphTargetDictionary[s]!==void 0&&(s=i.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=SE,n})();Gi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Gi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Gi.prototype.GetterByBindingType=[Gi.prototype._getValue_direct,Gi.prototype._getValue_array,Gi.prototype._getValue_arrayElement,Gi.prototype._getValue_toArray];Gi.prototype.SetterByBindingTypeAndVersioning=[[Gi.prototype._setValue_direct,Gi.prototype._setValue_direct_setNeedsUpdate,Gi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Gi.prototype._setValue_array,Gi.prototype._setValue_array_setNeedsUpdate,Gi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Gi.prototype._setValue_arrayElement,Gi.prototype._setValue_arrayElement_setNeedsUpdate,Gi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Gi.prototype._setValue_fromArray,Gi.prototype._setValue_fromArray_setNeedsUpdate,Gi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var RE=class{constructor(){this.isAnimationObjectGroup=!0,this.uuid=So(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;let e={};this._indicesByUUID=e;for(let t=0,r=arguments.length;t!==r;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};let i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}add(){let e=this._objects,i=this._indicesByUUID,t=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length,a,c=e.length,l=this.nCachedObjects_;for(let d=0,u=arguments.length;d!==u;++d){let h=arguments[d],f=h.uuid,p=i[f];if(p===void 0){p=c++,i[f]=p,e.push(h);for(let b=0,m=s;b!==m;++b)o[b].push(new Gi(h,t[b],r[b]))}else if(p<l){a=e[p];let b=--l,m=e[b];i[m.uuid]=p,e[p]=m,i[f]=b,e[b]=h;for(let g=0,v=s;g!==v;++g){let _=o[g],y=_[b],C=_[p];_[p]=y,C===void 0&&(C=new Gi(h,t[g],r[g])),_[b]=C}}else e[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){let e=this._objects,i=this._indicesByUUID,t=this._bindings,r=t.length,o=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){let c=arguments[s],l=c.uuid,d=i[l];if(d!==void 0&&d>=o){let u=o++,h=e[u];i[h.uuid]=d,e[d]=h,i[l]=u,e[u]=c;for(let f=0,p=r;f!==p;++f){let b=t[f],m=b[u],g=b[d];b[d]=m,b[u]=g}}}this.nCachedObjects_=o}uncache(){let e=this._objects,i=this._indicesByUUID,t=this._bindings,r=t.length,o=this.nCachedObjects_,s=e.length;for(let a=0,c=arguments.length;a!==c;++a){let l=arguments[a],d=l.uuid,u=i[d];if(u!==void 0)if(delete i[d],u<o){let h=--o,f=e[h],p=--s,b=e[p];i[f.uuid]=u,e[u]=f,i[b.uuid]=h,e[h]=b,e.pop();for(let m=0,g=r;m!==g;++m){let v=t[m],_=v[h],y=v[p];v[u]=_,v[h]=y,v.pop()}}else{let h=--s,f=e[h];h>0&&(i[f.uuid]=u),e[u]=f,e.pop();for(let p=0,b=r;p!==b;++p){let m=t[p];m[u]=m[h],m.pop()}}}this.nCachedObjects_=o}subscribe_(e,i){let t=this._bindingsIndicesByPath,r=t[e],o=this._bindings;if(r!==void 0)return o[r];let s=this._paths,a=this._parsedPaths,c=this._objects,l=c.length,d=this.nCachedObjects_,u=new Array(l);r=o.length,t[e]=r,s.push(e),a.push(i),o.push(u);for(let h=d,f=c.length;h!==f;++h){let p=c[h];u[h]=new Gi(p,e,i)}return u}unsubscribe_(e){let i=this._bindingsIndicesByPath,t=i[e];if(t!==void 0){let r=this._paths,o=this._parsedPaths,s=this._bindings,a=s.length-1,c=s[a],l=e[a];i[l]=t,s[t]=c,s.pop(),o[t]=o[a],o.pop(),r[t]=r[a],r.pop()}}},Py=class{constructor(e,i,t=null,r=i.blendMode){this._mixer=e,this._clip=i,this._localRoot=t,this.blendMode=r;let o=i.tracks,s=o.length,a=new Array(s),c={endingStart:yd,endingEnd:yd};for(let l=0;l!==s;++l){let d=o[l].createInterpolant(null);a[l]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=OL,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,i){return this.loop=e,this.repetitions=i,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,i,t){if(e.fadeOut(i),this.fadeIn(i),t){let r=this._clip.duration,o=e._clip.duration,s=o/r,a=r/o;e.warp(1,s,i),this.warp(a,1,i)}return this}crossFadeTo(e,i,t){return e.crossFadeFrom(this,i,t)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,i,t){let r=this._mixer,o=r.time,s=this.timeScale,a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);let c=a.parameterPositions,l=a.sampleValues;return c[0]=o,c[1]=o+t,l[0]=e/s,l[1]=i/s,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,i,t,r){if(!this.enabled){this._updateWeight(e);return}let o=this._startTime;if(o!==null){let c=(e-o)*t;c<0||t===0?i=0:(this._startTime=null,i=t*c)}i*=this._updateTimeScale(e);let s=this._updateTime(i),a=this._updateWeight(e);if(a>0){let c=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case eD:for(let d=0,u=c.length;d!==u;++d)c[d].evaluate(s),l[d].accumulateAdditive(a);break;case jy:default:for(let d=0,u=c.length;d!==u;++d)c[d].evaluate(s),l[d].accumulate(r,a)}}}_updateWeight(e){let i=0;if(this.enabled){i=this.weight;let t=this._weightInterpolant;if(t!==null){let r=t.evaluate(e)[0];i*=r,e>t.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=i,i}_updateTimeScale(e){let i=0;if(!this.paused){i=this.timeScale;let t=this._timeScaleInterpolant;if(t!==null){let r=t.evaluate(e)[0];i*=r,e>t.parameterPositions[1]&&(this.stopWarping(),i===0?this.paused=!0:this.timeScale=i)}}return this._effectiveTimeScale=i,i}_updateTime(e){let i=this._clip.duration,t=this.loop,r=this.time+e,o=this._loopCount,s=t===NL;if(e===0)return o===-1?r:s&&(o&1)===1?i-r:r;if(t===Fy){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=i)r=i;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=i||r<0){let a=Math.floor(r/i);r-=i*a,o+=Math.abs(a);let c=this.repetitions-o;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?i:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){let l=e<0;this._setEndings(l,!l,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(s&&(o&1)===1)return i-r}return r}_setEndings(e,i,t){let r=this._interpolantSettings;t?(r.endingStart=xd,r.endingEnd=xd):(e?r.endingStart=this.zeroSlopeAtStart?xd:yd:r.endingStart=wp,i?r.endingEnd=this.zeroSlopeAtEnd?xd:yd:r.endingEnd=wp)}_scheduleFading(e,i,t){let r=this._mixer,o=r.time,s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);let a=s.parameterPositions,c=s.sampleValues;return a[0]=o,c[0]=i,a[1]=o+e,c[1]=t,this}},EJ=new Float32Array(1),Qp=class extends kn{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,i){let t=e._localRoot||this._root,r=e._clip.tracks,o=r.length,s=e._propertyBindings,a=e._interpolants,c=t.uuid,l=this._bindingsByRootAndName,d=l[c];d===void 0&&(d={},l[c]=d);for(let u=0;u!==o;++u){let h=r[u],f=h.name,p=d[f];if(p!==void 0)++p.referenceCount,s[u]=p;else{if(p=s[u],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,c,f));continue}let b=i&&i._propertyBindings[u].binding.parsedPath;p=new Iy(Gi.create(t,f,b),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,c,f),s[u]=p}a[u].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let t=(e._localRoot||this._root).uuid,r=e._clip.uuid,o=this._actionsByClip[r];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,r,t)}let i=e._propertyBindings;for(let t=0,r=i.length;t!==r;++t){let o=i[t];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let i=e._propertyBindings;for(let t=0,r=i.length;t!==r;++t){let o=i[t];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let i=e._cacheIndex;return i!==null&&i<this._nActiveActions}_addInactiveAction(e,i,t){let r=this._actions,o=this._actionsByClip,s=o[i];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[i]=s;else{let a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[t]=e}_removeInactiveAction(e){let i=this._actions,t=i[i.length-1],r=e._cacheIndex;t._cacheIndex=r,i[r]=t,i.pop(),e._cacheIndex=null;let o=e._clip.uuid,s=this._actionsByClip,a=s[o],c=a.knownActions,l=c[c.length-1],d=e._byClipCacheIndex;l._byClipCacheIndex=d,c[d]=l,c.pop(),e._byClipCacheIndex=null;let u=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete u[h],c.length===0&&delete s[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let i=e._propertyBindings;for(let t=0,r=i.length;t!==r;++t){let o=i[t];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){let i=this._actions,t=e._cacheIndex,r=this._nActiveActions++,o=i[r];e._cacheIndex=r,i[r]=e,o._cacheIndex=t,i[t]=o}_takeBackAction(e){let i=this._actions,t=e._cacheIndex,r=--this._nActiveActions,o=i[r];e._cacheIndex=r,i[r]=e,o._cacheIndex=t,i[t]=o}_addInactiveBinding(e,i,t){let r=this._bindingsByRootAndName,o=this._bindings,s=r[i];s===void 0&&(s={},r[i]=s),s[t]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){let i=this._bindings,t=e.binding,r=t.rootNode.uuid,o=t.path,s=this._bindingsByRootAndName,a=s[r],c=i[i.length-1],l=e._cacheIndex;c._cacheIndex=l,i[l]=c,i.pop(),delete a[o],Object.keys(a).length===0&&delete s[r]}_lendBinding(e){let i=this._bindings,t=e._cacheIndex,r=this._nActiveBindings++,o=i[r];e._cacheIndex=r,i[r]=e,o._cacheIndex=t,i[t]=o}_takeBackBinding(e){let i=this._bindings,t=e._cacheIndex,r=--this._nActiveBindings,o=i[r];e._cacheIndex=r,i[r]=e,o._cacheIndex=t,i[t]=o}_lendControlInterpolant(){let e=this._controlInterpolants,i=this._nActiveControlInterpolants++,t=e[i];return t===void 0&&(t=new Gp(new Float32Array(2),new Float32Array(2),1,EJ),t.__cacheIndex=i,e[i]=t),t}_takeBackControlInterpolant(e){let i=this._controlInterpolants,t=e.__cacheIndex,r=--this._nActiveControlInterpolants,o=i[r];e.__cacheIndex=r,i[r]=e,o.__cacheIndex=t,i[t]=o}clipAction(e,i,t){let r=i||this._root,o=r.uuid,s=typeof e=="string"?lc.findByName(r,e):e,a=s!==null?s.uuid:e,c=this._actionsByClip[a],l=null;if(t===void 0&&(s!==null?t=s.blendMode:t=jy),c!==void 0){let u=c.actionByRoot[o];if(u!==void 0&&u.blendMode===t)return u;l=c.knownActions[0],s===null&&(s=l._clip)}if(s===null)return null;let d=new Py(this,s,i,t);return this._bindAction(d,l),this._addInactiveAction(d,a,o),d}existingAction(e,i){let t=i||this._root,r=t.uuid,o=typeof e=="string"?lc.findByName(t,e):e,s=o?o.uuid:e,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){let e=this._actions,i=this._nActiveActions;for(let t=i-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;let i=this._actions,t=this._nActiveActions,r=this.time+=e,o=Math.sign(e),s=this._accuIndex^=1;for(let l=0;l!==t;++l)i[l]._update(r,e,o,s);let a=this._bindings,c=this._nActiveBindings;for(let l=0;l!==c;++l)a[l].apply(s);return this}setTime(e){this.time=0;for(let i=0;i<this._actions.length;i++)this._actions[i].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let i=this._actions,t=e.uuid,r=this._actionsByClip,o=r[t];if(o!==void 0){let s=o.knownActions;for(let a=0,c=s.length;a!==c;++a){let l=s[a];this._deactivateAction(l);let d=l._cacheIndex,u=i[i.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=d,i[d]=u,i.pop(),this._removeInactiveBindingsForAction(l)}delete r[t]}}uncacheRoot(e){let i=e.uuid,t=this._actionsByClip;for(let s in t){let a=t[s].actionByRoot,c=a[i];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}let r=this._bindingsByRootAndName,o=r[i];if(o!==void 0)for(let s in o){let a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,i){let t=this.existingAction(e,i);t!==null&&(this._deactivateAction(t),this._removeInactiveAction(t))}},TE=class n{constructor(e){this.value=e}clone(){return new n(this.value.clone===void 0?this.value:this.value.clone())}},DJ=0,CE=class extends kn{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:DJ++}),this.name="",this.usage=Tp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){let i=this.uniforms.indexOf(e);return i!==-1&&this.uniforms.splice(i,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;let i=e.uniforms;this.uniforms.length=0;for(let t=0,r=i.length;t<r;t++){let o=Array.isArray(i[t])?i[t]:[i[t]];for(let s=0;s<o.length;s++)this.uniforms.push(o[s].clone())}return this}clone(){return new this.constructor().copy(this)}},EE=class extends rc{constructor(e,i,t=1){super(e,i),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=t}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){let i=super.clone(e);return i.meshPerAttribute=this.meshPerAttribute,i}toJSON(e){let i=super.toJSON(e);return i.isInstancedInterleavedBuffer=!0,i.meshPerAttribute=this.meshPerAttribute,i}},DE=class{constructor(e,i,t,r,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=i,this.itemSize=t,this.elementSize=r,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,i){return this.type=e,this.elementSize=i,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}},NN=new je,Wr=class{constructor(e,i,t=0,r=1/0){this.ray=new Js(e,i),this.near=t,this.far=r,this.camera=null,this.layers=new zh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,i){this.ray.set(e,i)}setFromCamera(e,i){i.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(i.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(i).sub(this.ray.origin).normalize(),this.camera=i):i.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(i.near+i.far)/(i.near-i.far)).unproject(i),this.ray.direction.set(0,0,-1).transformDirection(i.matrixWorld),this.camera=i):console.error("THREE.Raycaster: Unsupported camera type: "+i.type)}setFromXRController(e){return NN.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(NN),this}intersectObject(e,i=!0,t=[]){return AE(e,this,t,i),t.sort(LN),t}intersectObjects(e,i=!0,t=[]){for(let r=0,o=e.length;r<o;r++)AE(e[r],this,t,i);return t.sort(LN),t}};function LN(n,e){return n.distance-e.distance}function AE(n,e,i,t){if(n.layers.test(e.layers)&&n.raycast(e,i),t===!0){let r=n.children;for(let o=0,s=r.length;o<s;o++)AE(r[o],e,i,!0)}}var ll=class{constructor(e=1,i=0,t=0){return this.radius=e,this.phi=i,this.theta=t,this}set(e,i,t){return this.radius=e,this.phi=i,this.theta=t,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,i,t){return this.radius=Math.sqrt(e*e+i*i+t*t),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,t),this.phi=Math.acos(Rn(i/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},IE=class{constructor(e=1,i=0,t=0){return this.radius=e,this.theta=i,this.y=t,this}set(e,i,t){return this.radius=e,this.theta=i,this.y=t,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,i,t){return this.radius=Math.sqrt(e*e+t*t),this.theta=Math.atan2(e,t),this.y=i,this}clone(){return new this.constructor().copy(this)}},BN=new z,PE=class{constructor(e=new z(1/0,1/0),i=new z(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=i}set(e,i){return this.min.copy(e),this.max.copy(i),this}setFromPoints(e){this.makeEmpty();for(let i=0,t=e.length;i<t;i++)this.expandByPoint(e[i]);return this}setFromCenterAndSize(e,i){let t=BN.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(t),this.max.copy(e).add(t),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,i){return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,i){return i.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,BN).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},UN=new M,C0=new M,kE=class{constructor(e=new M,i=new M){this.start=e,this.end=i}set(e,i){return this.start.copy(e),this.end.copy(i),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,i){return this.delta(i).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,i){UN.subVectors(e,this.start),C0.subVectors(this.end,this.start);let t=C0.dot(C0),o=C0.dot(UN)/t;return i&&(o=Rn(o,0,1)),o}closestPointToPoint(e,i,t){let r=this.closestPointToPointParameter(e,i);return this.delta(t).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},VN=new M,FE=class extends Rt{constructor(e,i){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=i,this.type="SpotLightHelper";let t=new ft,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,c=32;s<c;s++,a++){let l=s/c*Math.PI*2,d=a/c*Math.PI*2;r.push(Math.cos(l),Math.sin(l),1,Math.cos(d),Math.sin(d),1)}t.setAttribute("position",new We(r,3));let o=new rn({fog:!1,toneMapped:!1});this.cone=new Cr(t,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);let e=this.light.distance?this.light.distance:1e3,i=e*Math.tan(this.light.angle);this.cone.scale.set(i,i,e),VN.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(VN),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},tl=new M,E0=new je,oC=new je,jE=class extends Cr{constructor(e){let i=h3(e),t=new ft,r=[],o=[],s=new _e(0,0,1),a=new _e(0,1,0);for(let l=0;l<i.length;l++){let d=i[l];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),o.push(s.r,s.g,s.b),o.push(a.r,a.g,a.b))}t.setAttribute("position",new We(r,3)),t.setAttribute("color",new We(o,3));let c=new rn({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(t,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=i,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){let i=this.bones,t=this.geometry,r=t.getAttribute("position");oC.copy(this.root.matrixWorld).invert();for(let o=0,s=0;o<i.length;o++){let a=i[o];a.parent&&a.parent.isBone&&(E0.multiplyMatrices(oC,a.matrixWorld),tl.setFromMatrixPosition(E0),r.setXYZ(s,tl.x,tl.y,tl.z),E0.multiplyMatrices(oC,a.parent.matrixWorld),tl.setFromMatrixPosition(E0),r.setXYZ(s+1,tl.x,tl.y,tl.z),s+=2)}t.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}};function h3(n){let e=[];n.isBone===!0&&e.push(n);for(let i=0;i<n.children.length;i++)e.push.apply(e,h3(n.children[i]));return e}var OE=class extends Le{constructor(e,i,t){let r=new oc(i,4,2),o=new Ji({wireframe:!0,fog:!1,toneMapped:!1});super(r,o),this.light=e,this.color=t,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},AJ=new M,zN=new _e,HN=new _e,NE=class extends Rt{constructor(e,i,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="HemisphereLightHelper";let r=new na(i);r.rotateY(Math.PI*.5),this.material=new Ji({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);let o=r.getAttribute("position"),s=new Float32Array(o.count*3);r.setAttribute("color",new di(s,3)),this.add(new Le(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){let e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{let i=e.geometry.getAttribute("color");zN.copy(this.light.color),HN.copy(this.light.groundColor);for(let t=0,r=i.count;t<r;t++){let o=t<r/2?zN:HN;i.setXYZ(t,o.r,o.g,o.b)}i.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(AJ.setFromMatrixPosition(this.light.matrixWorld).negate())}},Vd=class extends Cr{constructor(e=10,i=10,t=4473924,r=8947848){t=new _e(t),r=new _e(r);let o=i/2,s=e/i,a=e/2,c=[],l=[];for(let h=0,f=0,p=-a;h<=i;h++,p+=s){c.push(-a,0,p,a,0,p),c.push(p,0,-a,p,0,a);let b=h===o?t:r;b.toArray(l,f),f+=3,b.toArray(l,f),f+=3,b.toArray(l,f),f+=3,b.toArray(l,f),f+=3}let d=new ft;d.setAttribute("position",new We(c,3)),d.setAttribute("color",new We(l,3));let u=new rn({vertexColors:!0,toneMapped:!1});super(d,u),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},LE=class extends Cr{constructor(e=10,i=16,t=8,r=64,o=4473924,s=8947848){o=new _e(o),s=new _e(s);let a=[],c=[];if(i>1)for(let u=0;u<i;u++){let h=u/i*(Math.PI*2),f=Math.sin(h)*e,p=Math.cos(h)*e;a.push(0,0,0),a.push(f,0,p);let b=u&1?o:s;c.push(b.r,b.g,b.b),c.push(b.r,b.g,b.b)}for(let u=0;u<t;u++){let h=u&1?o:s,f=e-e/t*u;for(let p=0;p<r;p++){let b=p/r*(Math.PI*2),m=Math.sin(b)*f,g=Math.cos(b)*f;a.push(m,0,g),c.push(h.r,h.g,h.b),b=(p+1)/r*(Math.PI*2),m=Math.sin(b)*f,g=Math.cos(b)*f,a.push(m,0,g),c.push(h.r,h.g,h.b)}}let l=new ft;l.setAttribute("position",new We(a,3)),l.setAttribute("color",new We(c,3));let d=new rn({vertexColors:!0,toneMapped:!1});super(l,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},GN=new M,D0=new M,WN=new M,BE=class extends Rt{constructor(e,i,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="DirectionalLightHelper",i===void 0&&(i=1);let r=new ft;r.setAttribute("position",new We([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));let o=new rn({fog:!1,toneMapped:!1});this.lightPlane=new Yi(r,o),this.add(this.lightPlane),r=new ft,r.setAttribute("position",new We([0,0,0,0,0,1],3)),this.targetLine=new Yi(r,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),GN.setFromMatrixPosition(this.light.matrixWorld),D0.setFromMatrixPosition(this.light.target.matrixWorld),WN.subVectors(D0,GN),this.lightPlane.lookAt(D0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(D0),this.targetLine.scale.z=WN.length()}},A0=new M,Sn=new ol,UE=class extends Cr{constructor(e){let i=new ft,t=new rn({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],o=[],s={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,b){c(p),c(b)}function c(p){r.push(0,0,0),o.push(0,0,0),s[p]===void 0&&(s[p]=[]),s[p].push(r.length/3-1)}i.setAttribute("position",new We(r,3)),i.setAttribute("color",new We(o,3)),super(i,t),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();let l=new _e(16755200),d=new _e(16711680),u=new _e(43775),h=new _e(16777215),f=new _e(3355443);this.setColors(l,d,u,h,f)}setColors(e,i,t,r,o){let a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,i.r,i.g,i.b),a.setXYZ(25,i.r,i.g,i.b),a.setXYZ(26,i.r,i.g,i.b),a.setXYZ(27,i.r,i.g,i.b),a.setXYZ(28,i.r,i.g,i.b),a.setXYZ(29,i.r,i.g,i.b),a.setXYZ(30,i.r,i.g,i.b),a.setXYZ(31,i.r,i.g,i.b),a.setXYZ(32,t.r,t.g,t.b),a.setXYZ(33,t.r,t.g,t.b),a.setXYZ(34,t.r,t.g,t.b),a.setXYZ(35,t.r,t.g,t.b),a.setXYZ(36,t.r,t.g,t.b),a.setXYZ(37,t.r,t.g,t.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,o.r,o.g,o.b),a.setXYZ(41,o.r,o.g,o.b),a.setXYZ(42,o.r,o.g,o.b),a.setXYZ(43,o.r,o.g,o.b),a.setXYZ(44,o.r,o.g,o.b),a.setXYZ(45,o.r,o.g,o.b),a.setXYZ(46,o.r,o.g,o.b),a.setXYZ(47,o.r,o.g,o.b),a.setXYZ(48,o.r,o.g,o.b),a.setXYZ(49,o.r,o.g,o.b),a.needsUpdate=!0}update(){let e=this.geometry,i=this.pointMap,t=1,r=1;Sn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),In("c",i,e,Sn,0,0,-1),In("t",i,e,Sn,0,0,1),In("n1",i,e,Sn,-t,-r,-1),In("n2",i,e,Sn,t,-r,-1),In("n3",i,e,Sn,-t,r,-1),In("n4",i,e,Sn,t,r,-1),In("f1",i,e,Sn,-t,-r,1),In("f2",i,e,Sn,t,-r,1),In("f3",i,e,Sn,-t,r,1),In("f4",i,e,Sn,t,r,1),In("u1",i,e,Sn,t*.7,r*1.1,-1),In("u2",i,e,Sn,-t*.7,r*1.1,-1),In("u3",i,e,Sn,0,r*2,-1),In("cf1",i,e,Sn,-t,0,1),In("cf2",i,e,Sn,t,0,1),In("cf3",i,e,Sn,0,-r,1),In("cf4",i,e,Sn,0,r,1),In("cn1",i,e,Sn,-t,0,-1),In("cn2",i,e,Sn,t,0,-1),In("cn3",i,e,Sn,0,-r,-1),In("cn4",i,e,Sn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function In(n,e,i,t,r,o,s){A0.set(r,o,s).unproject(t);let a=e[n];if(a!==void 0){let c=i.getAttribute("position");for(let l=0,d=a.length;l<d;l++)c.setXYZ(a[l],A0.x,A0.y,A0.z)}}var I0=new vn,VE=class extends Cr{constructor(e,i=16776960){let t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),o=new ft;o.setIndex(new di(t,1)),o.setAttribute("position",new di(r,3)),super(o,new rn({color:i,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&I0.setFromObject(this.object),I0.isEmpty())return;let i=I0.min,t=I0.max,r=this.geometry.attributes.position,o=r.array;o[0]=t.x,o[1]=t.y,o[2]=t.z,o[3]=i.x,o[4]=t.y,o[5]=t.z,o[6]=i.x,o[7]=i.y,o[8]=t.z,o[9]=t.x,o[10]=i.y,o[11]=t.z,o[12]=t.x,o[13]=t.y,o[14]=i.z,o[15]=i.x,o[16]=t.y,o[17]=i.z,o[18]=i.x,o[19]=i.y,o[20]=i.z,o[21]=t.x,o[22]=i.y,o[23]=i.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,i){return super.copy(e,i),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}},Kp=class extends Cr{constructor(e,i=16776960){let t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new ft;o.setIndex(new di(t,1)),o.setAttribute("position",new We(r,3)),super(o,new rn({color:i,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let i=this.box;i.isEmpty()||(i.getCenter(this.position),i.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},zE=class extends Yi{constructor(e,i=1,t=16776960){let r=t,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new ft;s.setAttribute("position",new We(o,3)),s.computeBoundingSphere(),super(s,new rn({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=i;let a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new ft;c.setAttribute("position",new We(a,3)),c.computeBoundingSphere(),this.add(new Le(c,new Ji({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}},$N=new M,P0,sC,HE=class extends Rt{constructor(e=new M(0,0,1),i=new M(0,0,0),t=1,r=16776960,o=t*.2,s=o*.2){super(),this.type="ArrowHelper",P0===void 0&&(P0=new ft,P0.setAttribute("position",new We([0,0,0,0,1,0],3)),sC=new Fn(0,.5,1,5,1),sC.translate(0,-.5,0)),this.position.copy(i),this.line=new Yi(P0,new rn({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Le(sC,new Ji({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(t,o,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{$N.set(e.z,0,-e.x).normalize();let i=Math.acos(e.y);this.quaternion.setFromAxisAngle($N,i)}}setLength(e,i=e*.2,t=i*.2){this.line.scale.set(1,Math.max(1e-4,e-i),1),this.line.updateMatrix(),this.cone.scale.set(t,i,t),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}},GE=class extends Cr{constructor(e=1){let i=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],t=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new ft;r.setAttribute("position",new We(i,3)),r.setAttribute("color",new We(t,3));let o=new rn({vertexColors:!0,toneMapped:!1});super(r,o),this.type="AxesHelper"}setColors(e,i,t){let r=new _e,o=this.geometry.attributes.color.array;return r.set(e),r.toArray(o,0),r.toArray(o,3),r.set(i),r.toArray(o,6),r.toArray(o,9),r.set(t),r.toArray(o,12),r.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},WE=class{constructor(){this.type="ShapePath",this.color=new _e,this.subPaths=[],this.currentPath=null}moveTo(e,i){return this.currentPath=new Ld,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,i),this}lineTo(e,i){return this.currentPath.lineTo(e,i),this}quadraticCurveTo(e,i,t,r){return this.currentPath.quadraticCurveTo(e,i,t,r),this}bezierCurveTo(e,i,t,r,o,s){return this.currentPath.bezierCurveTo(e,i,t,r,o,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function i(g){let v=[];for(let _=0,y=g.length;_<y;_++){let C=g[_],R=new ec;R.curves=C.curves,v.push(R)}return v}function t(g,v){let _=v.length,y=!1;for(let C=_-1,R=0;R<_;C=R++){let w=v[C],A=v[R],S=A.x-w.x,x=A.y-w.y;if(Math.abs(x)>Number.EPSILON){if(x<0&&(w=v[R],S=-S,A=v[C],x=-x),g.y<w.y||g.y>A.y)continue;if(g.y===w.y){if(g.x===w.x)return!0}else{let F=x*(g.x-w.x)-S*(g.y-w.y);if(F===0)return!0;if(F<0)continue;y=!y}}else{if(g.y!==w.y)continue;if(A.x<=g.x&&g.x<=w.x||w.x<=g.x&&g.x<=A.x)return!0}}return y}let r=Qs.isClockWise,o=this.subPaths;if(o.length===0)return[];let s,a,c,l=[];if(o.length===1)return a=o[0],c=new ec,c.curves=a.curves,l.push(c),l;let d=!r(o[0].getPoints());d=e?!d:d;let u=[],h=[],f=[],p=0,b;h[p]=void 0,f[p]=[];for(let g=0,v=o.length;g<v;g++)a=o[g],b=a.getPoints(),s=r(b),s=e?!s:s,s?(!d&&h[p]&&p++,h[p]={s:new ec,p:b},h[p].s.curves=a.curves,d&&p++,f[p]=[]):f[p].push({h:a,p:b[0]});if(!h[0])return i(o);if(h.length>1){let g=!1,v=0;for(let _=0,y=h.length;_<y;_++)u[_]=[];for(let _=0,y=h.length;_<y;_++){let C=f[_];for(let R=0;R<C.length;R++){let w=C[R],A=!0;for(let S=0;S<h.length;S++)t(w.p,h[S].p)&&(_!==S&&v++,A?(A=!1,u[S].push(w)):g=!0);A&&u[_].push(w)}}v>0&&g===!1&&(f=u)}let m;for(let g=0,v=h.length;g<v;g++){c=h[g].s,l.push(c),m=f[g];for(let _=0,y=m.length;_<y;_++)c.holes.push(m[_].h)}return l}},$E=class extends oi{constructor(e=1,i=1,t=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,i,pi(xe({},r),{count:t})),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ky}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ky);function lD(n){return!!(n&&n.set)}function ve(n,e){if(lD(n)){if(e===void 0)return n;if(Array.isArray(e))return n.set(...e),n;if(n.copy&&e)return n.copy(e),n;if(e!==void 0)return n.set(e),n}else return e;return n}function f3(n){return!!(n&&typeof n.dispose=="function")}function Gd(n){return n!==void 0&&(n.observed||n.observers?.length>0)}var dD=class{constructor(e){this.memberMap=new Map,this.children=[],this.eventListener={},this.loaded=!1,this.add=(...i)=>(this.objRef&&this.objRef.add(...i),this.children.push(...i),this),this.remove=(...i)=>{this.objRef&&this.objRef.remove(...i);for(let t of i){let r=this.children.indexOf(t);r>=0&&(this.children=this.children.splice(r,1))}return this},this.applyToObject3D=i=>{if(this.memberMap.forEach((t,r)=>{let o=i[r];lD(o)?ve(o,t):i[r]=t}),this.children.forEach(t=>i.add(t)),this.objRef?.parent){let t=this.objRef?.parent;t.remove(this.objRef),t.add(i)}},this.addEventListener=(i,t)=>{let r=this.eventListener[i];r||(r=[],this.eventListener[i]=r),r.push(t),this.objRef&&this.objRef.addEventListener(i,t)},this.removeEventListener=(i,t)=>{let r=this.eventListener[i];if(!r)return;let o=r.indexOf(t);o>=0&&r.splice(o,1)},this.objRef=e}get(e,i,t){switch(i){case"__isProxy":return!0;case"applyToObject3D":return this.applyToObject3D;case"objRef":return this.loaded?this.objRef:void 0;case"add":return this.add;case"remove":return this.remove;case"children":return this.objRef?this.objRef.children:this.children;default:{let r=i,o=this.objRef[r];return o!==void 0&&this.memberMap.set(r,o),o}}}set(e,i,t,r){return i==="objRef"?(t&&this.applyToObject3D(t),this.loaded=!0,this.objRef=t):(this.memberMap.set(i,t),this.objRef&&(this.objRef[i]=t)),!0}};function Uy(n=new Rt){let e=new dD(n);return new Proxy(e,e)}function rg(n){return n.__isProxy===!0&&n.objRef===void 0}var $r=(()=>{let e=class e{set objRef(t){this.applyObjRef(t)}get objRef(){return this._objRef}constructor(){this.autoAddToParent=!0,this.autoDispose=!0}addToParent(){}removeFromParent(){}set threeEvents(t){this.removeEvents(),this.eventListeners=t,this.applyEvents()}get threeEvents(){return this.eventListeners}get onUpdate(){return this.updateEmitter||(this.updateEmitter=new et),this.updateEmitter}get objRef$(){return this._objRef$||(this._objRef$=new jl(1)),this._objRef$}ngOnInit(){this.objRef||(this.objRef=this.createThreeInstance(this.args))}getType(){throw new Error("derive me")}createThreeInstance(t){return Array.isArray(t)?new(this.getType())(...t):new(this.getType())(t)}ngOnChanges(t){if(this.objRef&&!rg(this.objRef)){this.emitPropertyChanges(t);return}this.objRef||(this.objRef=this.createThreeInstance(t.args?.currentValue));for(let r in t)this[r]=t[r].currentValue;this.emitPropertyChanges(t)}disposeObjRef(){f3(this.objRef)&&this.objRef.dispose()}ngOnDestroy(){this.removeEvents(),this.removeFromParent(),this.autoDispose&&this.disposeObjRef()}applyObjRef(t){this._objRef!==t&&(this.removeFromParent(),this._objRef=t,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}emitObjRefChange(){this._objRef&&!rg(this._objRef)&&(this._objRef.dispatchEvent?.({type:"loaded",object:this._objRef}),this._objRef$&&this._objRef$.next(this._objRef))}emitPropertyChanges(t){this._objRef&&this._objRef.dispatchEvent?.({type:"changes",changes:t}),this.updateEmitter&&this.updateEmitter.next(t)}removeEvents(){if(this.eventListeners&&this._objRef){for(let t of Object.entries(this.eventListeners))this._objRef.removeEventListener(t[0],t[1]);this.eventListeners=void 0}}applyEvents(){if(this.eventListeners&&this._objRef)for(let t of Object.entries(this.eventListeners))this._objRef.addEventListener(t[0],t[1])}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["th-abs-wrapper"]],inputs:{autoAddToParent:"autoAddToParent",autoDispose:"autoDispose",objRef:"objRef",args:"args",threeEvents:"threeEvents"},outputs:{onUpdate:"onUpdate",objRef$:"objRef$"},features:[Un],decls:0,vars:0,template:function(r,o){},encapsulation:2});let n=e;return n})();var IJ=["*"],m3=(()=>{let e=class e extends $r{constructor(t){super(),this.parent=t}addToParent(){this._objRef&&this.parent.objRef&&(!this._objRef.parent||this._objRef.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(this._objRef)}removeFromParent(){this._objRef?.parent?.remove(this._objRef)}applyObjRef(t){(this._objRef!==t||this._objRef?.parent?.uuid!==this.parent.objRef.uuid)&&(this.removeFromParent(),this._objRef=t,this.autoAddToParent&&this.addToParent()),this.emitObjRefChange()}attachToParent(t,r){!this.parent.objRef||t===r&&r?.parent?.uuid===this.parent.objRef.uuid||(r&&r.parent&&r.parent.remove(r),t&&(!t.parent||t.parent&&t.parent.uuid!==this.parent.objRef.uuid)&&this.parent.objRef.add(t))}set lookAt(t){Promise.resolve().then(()=>{this.objRef&&(Array.isArray(t)?this.objRef.lookAt(...t):this.objRef.lookAt(t))})}};e.\u0275fac=function(r){return new(r||e)(k(e))},e.\u0275cmp=L({type:e,selectors:[["th-abs-object"]],inputs:{lookAt:"lookAt"},features:[X],ngContentSelectors:IJ,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2});let n=e;return n})();var PJ=["*"],da=class da extends m3{getType(){return Rt}get isObject3D(){return this._objRef?.isObject3D}get id(){return this._objRef?.id}set uuid(e){this._objRef&&(this._objRef.uuid=e)}get uuid(){return this._objRef?.uuid}set name(e){this._objRef&&(this._objRef.name=e)}get name(){return this._objRef?.name}get type(){return this._objRef?.type}set children(e){this._objRef&&(this._objRef.children=e)}get children(){return this._objRef?.children}set up(e){this._objRef&&(this._objRef.up=ve(this._objRef.up,e))}get up(){return this._objRef?.up}set position(e){this._objRef&&ve(this._objRef.position,e)}get position(){return this._objRef?.position}set rotation(e){this._objRef&&ve(this._objRef.rotation,e)}get rotation(){return this._objRef?.rotation}set quaternion(e){this._objRef&&ve(this._objRef.quaternion,e)}get quaternion(){return this._objRef?.quaternion}set scale(e){this._objRef&&ve(this._objRef.scale,e)}get scale(){return this._objRef?.scale}set modelViewMatrix(e){this._objRef&&ve(this._objRef.modelViewMatrix,e)}get modelViewMatrix(){return this._objRef?.modelViewMatrix}set normalMatrix(e){this._objRef&&ve(this._objRef.normalMatrix,e)}get normalMatrix(){return this._objRef?.normalMatrix}set matrix(e){this._objRef&&(this._objRef.matrix=ve(this._objRef.matrix,e))}get matrix(){return this._objRef?.matrix}set matrixWorld(e){this._objRef&&(this._objRef.matrixWorld=ve(this._objRef.matrixWorld,e))}get matrixWorld(){return this._objRef?.matrixWorld}set matrixAutoUpdate(e){this._objRef&&(this._objRef.matrixAutoUpdate=e)}get matrixAutoUpdate(){return this._objRef?.matrixAutoUpdate}set matrixWorldAutoUpdate(e){this._objRef&&(this._objRef.matrixWorldAutoUpdate=e)}get matrixWorldAutoUpdate(){return this._objRef?.matrixWorldAutoUpdate}set matrixWorldNeedsUpdate(e){this._objRef&&(this._objRef.matrixWorldNeedsUpdate=e)}get matrixWorldNeedsUpdate(){return this._objRef?.matrixWorldNeedsUpdate}set layers(e){this._objRef&&(this._objRef.layers=ve(this._objRef.layers,e))}get layers(){return this._objRef?.layers}set visible(e){this._objRef&&(this._objRef.visible=e)}get visible(){return this._objRef?.visible}set castShadow(e){this._objRef&&(this._objRef.castShadow=e)}get castShadow(){return this._objRef?.castShadow}set receiveShadow(e){this._objRef&&(this._objRef.receiveShadow=e)}get receiveShadow(){return this._objRef?.receiveShadow}set frustumCulled(e){this._objRef&&(this._objRef.frustumCulled=e)}get frustumCulled(){return this._objRef?.frustumCulled}set renderOrder(e){this._objRef&&(this._objRef.renderOrder=e)}get renderOrder(){return this._objRef?.renderOrder}set animations(e){this._objRef&&(this._objRef.animations=e)}get animations(){return this._objRef?.animations}set userData(e){this._objRef&&(this._objRef.userData=e)}get userData(){return this._objRef?.userData}set customDepthMaterial(e){this._objRef&&(this._objRef.customDepthMaterial=e)}get customDepthMaterial(){return this._objRef?.customDepthMaterial}set customDistanceMaterial(e){this._objRef&&(this._objRef.customDistanceMaterial=e)}get customDistanceMaterial(){return this._objRef?.customDistanceMaterial}constructor(e){super(e)}};da.DEFAULT_UP=Rt.DEFAULT_UP,da.DEFAULT_MATRIX_AUTO_UPDATE=Rt.DEFAULT_MATRIX_AUTO_UPDATE,da.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=Rt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,da.\u0275fac=function(i){return new(i||da)(k(da,4))},da.\u0275cmp=L({type:da,selectors:[["th-object3D"]],inputs:{uuid:"uuid",name:"name",children:"children",up:"up",position:"position",rotation:"rotation",quaternion:"quaternion",scale:"scale",modelViewMatrix:"modelViewMatrix",normalMatrix:"normalMatrix",matrix:"matrix",matrixWorld:"matrixWorld",matrixAutoUpdate:"matrixAutoUpdate",matrixWorldAutoUpdate:"matrixWorldAutoUpdate",matrixWorldNeedsUpdate:"matrixWorldNeedsUpdate",layers:"layers",visible:"visible",castShadow:"castShadow",receiveShadow:"receiveShadow",frustumCulled:"frustumCulled",renderOrder:"renderOrder",animations:"animations",userData:"userData",customDepthMaterial:"customDepthMaterial",customDistanceMaterial:"customDistanceMaterial"},features:[oe([]),X],ngContentSelectors:PJ,decls:1,vars:0,template:function(i,t){i&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});var pe=da;var kJ=["*"],dc=(()=>{let e=class e extends pe{getType(){return ol}get isCamera(){return this._objRef?.isCamera}get type(){return this._objRef?.type}set layers(t){this._objRef&&(this._objRef.layers=ve(this._objRef.layers,t))}get layers(){return this._objRef?.layers}set matrixWorldInverse(t){this._objRef&&(this._objRef.matrixWorldInverse=ve(this._objRef.matrixWorldInverse,t))}get matrixWorldInverse(){return this._objRef?.matrixWorldInverse}set projectionMatrix(t){this._objRef&&(this._objRef.projectionMatrix=ve(this._objRef.projectionMatrix,t))}get projectionMatrix(){return this._objRef?.projectionMatrix}set projectionMatrixInverse(t){this._objRef&&(this._objRef.projectionMatrixInverse=ve(this._objRef.projectionMatrixInverse,t))}get projectionMatrixInverse(){return this._objRef?.projectionMatrixInverse}set coordinateSystem(t){this._objRef&&(this._objRef.coordinateSystem=t)}get coordinateSystem(){return this._objRef?.coordinateSystem}set viewport(t){this._objRef&&(this._objRef.viewport=ve(this._objRef.viewport,t))}get viewport(){return this._objRef?.viewport}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-camera"]],inputs:{layers:"layers",matrixWorldInverse:"matrixWorldInverse",projectionMatrix:"projectionMatrix",projectionMatrixInverse:"projectionMatrixInverse",coordinateSystem:"coordinateSystem",viewport:"viewport"},features:[oe([{provide:pe,useExisting:ge(()=>e)}]),X],ngContentSelectors:kJ,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var FJ=["*"],Wt=(()=>{let e=class e extends dc{getType(){return Ki}get isPerspectiveCamera(){return this._objRef?.isPerspectiveCamera}get type(){return this._objRef?.type}set zoom(t){this._objRef&&(this._objRef.zoom=t)}get zoom(){return this._objRef?.zoom}set fov(t){this._objRef&&(this._objRef.fov=t)}get fov(){return this._objRef?.fov}set aspect(t){this._objRef&&(this._objRef.aspect=t)}get aspect(){return this._objRef?.aspect}set near(t){this._objRef&&(this._objRef.near=t)}get near(){return this._objRef?.near}set far(t){this._objRef&&(this._objRef.far=t)}get far(){return this._objRef?.far}set focus(t){this._objRef&&(this._objRef.focus=t)}get focus(){return this._objRef?.focus}set view(t){this._objRef&&(this._objRef.view=t)}get view(){return this._objRef?.view}set filmGauge(t){this._objRef&&(this._objRef.filmGauge=t)}get filmGauge(){return this._objRef?.filmGauge}set filmOffset(t){this._objRef&&(this._objRef.filmOffset=t)}get filmOffset(){return this._objRef?.filmOffset}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-perspectiveCamera"]],inputs:{zoom:"zoom",fov:"fov",aspect:"aspect",near:"near",far:"far",focus:"focus",view:"view",filmGauge:"filmGauge",filmOffset:"filmOffset"},features:[oe([{provide:pe,useExisting:ge(()=>e)},{provide:dc,useExisting:ge(()=>e)}]),X],ngContentSelectors:FJ,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var jJ=["*"],uD=(()=>{let e=class e extends pe{getType(){return Yi}get isLine(){return this._objRef?.isLine}get type(){return this._objRef?.type}set geometry(t){this._objRef&&(this._objRef.geometry=t)}get geometry(){return this._objRef?.geometry}set material(t){this._objRef&&(this._objRef.material=t)}get material(){return this._objRef?.material}set morphTargetInfluences(t){this._objRef&&(this._objRef.morphTargetInfluences=t)}get morphTargetInfluences(){return this._objRef?.morphTargetInfluences}set morphTargetDictionary(t){this._objRef&&(this._objRef.morphTargetDictionary=t)}get morphTargetDictionary(){return this._objRef?.morphTargetDictionary}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-line"]],inputs:{geometry:"geometry",material:"material",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary"},features:[oe([{provide:pe,useExisting:ge(()=>e)}]),X],ngContentSelectors:jJ,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var OJ=["*"],ua=(()=>{let e=class e extends uD{getType(){return Cr}get isLineSegments(){return this._objRef?.isLineSegments}get type(){return this._objRef?.type}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-lineSegments"]],features:[oe([{provide:pe,useExisting:ge(()=>e)}]),X],ngContentSelectors:OJ,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var NJ=["*"],Ar=(()=>{let e=class e extends ua{getType(){return Vd}get type(){return this._objRef?.type}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-gridHelper"]],features:[oe([{provide:pe,useExisting:ge(()=>e)}]),X],ngContentSelectors:NJ,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var LJ=["*"],_s=(()=>{let e=class e extends pe{get isLight(){return this._objRef?.isLight}get type(){return this._objRef?.type}set color(t){this._objRef&&(this._objRef.color=ve(this._objRef.color,t))}get color(){return this._objRef?.color}set intensity(t){this._objRef&&(this._objRef.intensity=t)}get intensity(){return this._objRef?.intensity}set shadow(t){this._objRef&&(this._objRef.shadow=t)}get shadow(){return this._objRef?.shadow}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-light"]],inputs:{color:"color",intensity:"intensity",shadow:"shadow"},features:[oe([{provide:pe,useExisting:ge(()=>e)}]),X],ngContentSelectors:LJ,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var BJ=["*"],ar=(()=>{let e=class e extends _s{getType(){return cl}get isDirectionalLight(){return this._objRef?.isDirectionalLight}get type(){return this._objRef?.type}set castShadow(t){this._objRef&&(this._objRef.castShadow=t)}get castShadow(){return this._objRef?.castShadow}set position(t){this._objRef&&ve(this._objRef.position,t)}get position(){return this._objRef?.position}set shadow(t){this._objRef&&(this._objRef.shadow=t)}get shadow(){return this._objRef?.shadow}set target(t){this._objRef&&(this._objRef.target=t)}get target(){return this._objRef?.target}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-directionalLight"]],inputs:{castShadow:"castShadow",position:"position",shadow:"shadow",target:"target"},features:[oe([{provide:pe,useExisting:ge(()=>e)}]),X],ngContentSelectors:BJ,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var UJ=["*"],cf=(()=>{let e=class e extends _s{getType(){return Jh}get isHemisphereLight(){return this._objRef?.isHemisphereLight}get type(){return this._objRef?.type}set position(t){this._objRef&&ve(this._objRef.position,t)}get position(){return this._objRef?.position}set color(t){this._objRef&&(this._objRef.color=ve(this._objRef.color,t))}get color(){return this._objRef?.color}set groundColor(t){this._objRef&&(this._objRef.groundColor=ve(this._objRef.groundColor,t))}get groundColor(){return this._objRef?.groundColor}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-hemisphereLight"]],inputs:{position:"position",color:"color",groundColor:"groundColor"},features:[oe([{provide:pe,useExisting:ge(()=>e)}]),X],ngContentSelectors:UJ,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var VJ=["*"],Ri=(()=>{let e=class e extends pe{getType(){return Le}get isMesh(){return this._objRef?.isMesh}get type(){return this._objRef?.type}set geometry(t){this._objRef&&(this._objRef.geometry=t)}get geometry(){return this._objRef?.geometry}set material(t){this._objRef&&(this._objRef.material=t)}get material(){return this._objRef?.material}set morphTargetInfluences(t){this._objRef&&(this._objRef.morphTargetInfluences=t)}get morphTargetInfluences(){return this._objRef?.morphTargetInfluences}set morphTargetDictionary(t){this._objRef&&(this._objRef.morphTargetDictionary=t)}get morphTargetDictionary(){return this._objRef?.morphTargetDictionary}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-mesh"]],inputs:{geometry:"geometry",material:"material",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary"},features:[oe([{provide:pe,useExisting:ge(()=>e)}]),X],ngContentSelectors:VJ,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var zJ=["*"],jt=(()=>{let e=class e extends pe{getType(){return Wh}get isScene(){return this._objRef?.isScene}set type(t){this._objRef&&(this._objRef.type=t)}get type(){return this._objRef?.type}set fog(t){this._objRef&&(this._objRef.fog=t)}get fog(){return this._objRef?.fog}set backgroundBlurriness(t){this._objRef&&(this._objRef.backgroundBlurriness=t)}get backgroundBlurriness(){return this._objRef?.backgroundBlurriness}set backgroundIntensity(t){this._objRef&&(this._objRef.backgroundIntensity=t)}get backgroundIntensity(){return this._objRef?.backgroundIntensity}set overrideMaterial(t){this._objRef&&(this._objRef.overrideMaterial=t)}get overrideMaterial(){return this._objRef?.overrideMaterial}set background(t){this._objRef&&(this._objRef.background=ve(this._objRef.background,t))}get background(){return this._objRef?.background}set backgroundRotation(t){this._objRef&&(this._objRef.backgroundRotation=ve(this._objRef.backgroundRotation,t))}get backgroundRotation(){return this._objRef?.backgroundRotation}set environment(t){this._objRef&&(this._objRef.environment=t)}get environment(){return this._objRef?.environment}set environmentIntensity(t){this._objRef&&(this._objRef.environmentIntensity=t)}get environmentIntensity(){return this._objRef?.environmentIntensity}set environmentRotation(t){this._objRef&&(this._objRef.environmentRotation=ve(this._objRef.environmentRotation,t))}get environmentRotation(){return this._objRef?.environmentRotation}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-scene"]],inputs:{type:"type",fog:"fog",backgroundBlurriness:"backgroundBlurriness",backgroundIntensity:"backgroundIntensity",overrideMaterial:"overrideMaterial",background:"background",backgroundRotation:"backgroundRotation",environment:"environment",environmentIntensity:"environmentIntensity",environmentRotation:"environmentRotation"},features:[oe([{provide:pe,useExisting:ge(()=>e)}]),X],ngContentSelectors:zJ,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var p3=(()=>{let e=class e extends $r{constructor(t){super(),this.parent=t}addToParent(){if(!this.parent.objRef)throw new Error("parent object doesn't hold a three js object instance");this.parent.objRef.material=this.objRef}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.material=void 0)}};e.\u0275fac=function(r){return new(r||e)(k(pe))},e.\u0275cmp=L({type:e,selectors:[["th-abs-material"]],features:[X],decls:0,vars:0,template:function(r,o){},encapsulation:2});let n=e;return n})();var HJ=["*"],on=(()=>{let e=class e extends p3{getType(){return dn}get isMaterial(){return this._objRef?.isMaterial}set alphaHash(t){this._objRef&&(this._objRef.alphaHash=t)}get alphaHash(){return this._objRef?.alphaHash}set alphaToCoverage(t){this._objRef&&(this._objRef.alphaToCoverage=t)}get alphaToCoverage(){return this._objRef?.alphaToCoverage}set blendAlpha(t){this._objRef&&(this._objRef.blendAlpha=t)}get blendAlpha(){return this._objRef?.blendAlpha}set blendColor(t){this._objRef&&(this._objRef.blendColor=ve(this._objRef.blendColor,t))}get blendColor(){return this._objRef?.blendColor}set blendDst(t){this._objRef&&(this._objRef.blendDst=t)}get blendDst(){return this._objRef?.blendDst}set blendDstAlpha(t){this._objRef&&(this._objRef.blendDstAlpha=t)}get blendDstAlpha(){return this._objRef?.blendDstAlpha}set blendEquation(t){this._objRef&&(this._objRef.blendEquation=t)}get blendEquation(){return this._objRef?.blendEquation}set blendEquationAlpha(t){this._objRef&&(this._objRef.blendEquationAlpha=t)}get blendEquationAlpha(){return this._objRef?.blendEquationAlpha}set blending(t){this._objRef&&(this._objRef.blending=t)}get blending(){return this._objRef?.blending}set blendSrc(t){this._objRef&&(this._objRef.blendSrc=t)}get blendSrc(){return this._objRef?.blendSrc}set blendSrcAlpha(t){this._objRef&&(this._objRef.blendSrcAlpha=t)}get blendSrcAlpha(){return this._objRef?.blendSrcAlpha}set clipIntersection(t){this._objRef&&(this._objRef.clipIntersection=t)}get clipIntersection(){return this._objRef?.clipIntersection}set clippingPlanes(t){this._objRef&&(this._objRef.clippingPlanes=t)}get clippingPlanes(){return this._objRef?.clippingPlanes}set clipShadows(t){this._objRef&&(this._objRef.clipShadows=t)}get clipShadows(){return this._objRef?.clipShadows}set colorWrite(t){this._objRef&&(this._objRef.colorWrite=t)}get colorWrite(){return this._objRef?.colorWrite}set defines(t){this._objRef&&(this._objRef.defines=t)}get defines(){return this._objRef?.defines}set depthFunc(t){this._objRef&&(this._objRef.depthFunc=t)}get depthFunc(){return this._objRef?.depthFunc}set depthTest(t){this._objRef&&(this._objRef.depthTest=t)}get depthTest(){return this._objRef?.depthTest}set depthWrite(t){this._objRef&&(this._objRef.depthWrite=t)}get depthWrite(){return this._objRef?.depthWrite}set id(t){this._objRef&&(this._objRef.id=t)}get id(){return this._objRef?.id}set stencilWrite(t){this._objRef&&(this._objRef.stencilWrite=t)}get stencilWrite(){return this._objRef?.stencilWrite}set stencilFunc(t){this._objRef&&(this._objRef.stencilFunc=t)}get stencilFunc(){return this._objRef?.stencilFunc}set stencilRef(t){this._objRef&&(this._objRef.stencilRef=t)}get stencilRef(){return this._objRef?.stencilRef}set stencilWriteMask(t){this._objRef&&(this._objRef.stencilWriteMask=t)}get stencilWriteMask(){return this._objRef?.stencilWriteMask}set stencilFuncMask(t){this._objRef&&(this._objRef.stencilFuncMask=t)}get stencilFuncMask(){return this._objRef?.stencilFuncMask}set stencilFail(t){this._objRef&&(this._objRef.stencilFail=t)}get stencilFail(){return this._objRef?.stencilFail}set stencilZFail(t){this._objRef&&(this._objRef.stencilZFail=t)}get stencilZFail(){return this._objRef?.stencilZFail}set stencilZPass(t){this._objRef&&(this._objRef.stencilZPass=t)}get stencilZPass(){return this._objRef?.stencilZPass}set name(t){this._objRef&&(this._objRef.name=t)}get name(){return this._objRef?.name}set opacity(t){this._objRef&&(this._objRef.opacity=t)}get opacity(){return this._objRef?.opacity}set polygonOffset(t){this._objRef&&(this._objRef.polygonOffset=t)}get polygonOffset(){return this._objRef?.polygonOffset}set polygonOffsetFactor(t){this._objRef&&(this._objRef.polygonOffsetFactor=t)}get polygonOffsetFactor(){return this._objRef?.polygonOffsetFactor}set polygonOffsetUnits(t){this._objRef&&(this._objRef.polygonOffsetUnits=t)}get polygonOffsetUnits(){return this._objRef?.polygonOffsetUnits}set precision(t){this._objRef&&(this._objRef.precision=t)}get precision(){return this._objRef?.precision}set premultipliedAlpha(t){this._objRef&&(this._objRef.premultipliedAlpha=t)}get premultipliedAlpha(){return this._objRef?.premultipliedAlpha}set forceSinglePass(t){this._objRef&&(this._objRef.forceSinglePass=t)}get forceSinglePass(){return this._objRef?.forceSinglePass}set dithering(t){this._objRef&&(this._objRef.dithering=t)}get dithering(){return this._objRef?.dithering}set side(t){this._objRef&&(this._objRef.side=t)}get side(){return this._objRef?.side}set shadowSide(t){this._objRef&&(this._objRef.shadowSide=t)}get shadowSide(){return this._objRef?.shadowSide}set toneMapped(t){this._objRef&&(this._objRef.toneMapped=t)}get toneMapped(){return this._objRef?.toneMapped}set transparent(t){this._objRef&&(this._objRef.transparent=t)}get transparent(){return this._objRef?.transparent}set type(t){this._objRef&&(this._objRef.type=t)}get type(){return this._objRef?.type}set uuid(t){this._objRef&&(this._objRef.uuid=t)}get uuid(){return this._objRef?.uuid}set vertexColors(t){this._objRef&&(this._objRef.vertexColors=t)}get vertexColors(){return this._objRef?.vertexColors}set visible(t){this._objRef&&(this._objRef.visible=t)}get visible(){return this._objRef?.visible}set userData(t){this._objRef&&(this._objRef.userData=t)}get userData(){return this._objRef?.userData}set version(t){this._objRef&&(this._objRef.version=t)}get version(){return this._objRef?.version}constructor(t){super(t)}};e.\u0275fac=function(r){return new(r||e)(k(pe,4))},e.\u0275cmp=L({type:e,selectors:[["th-material"]],inputs:{alphaHash:"alphaHash",alphaToCoverage:"alphaToCoverage",blendAlpha:"blendAlpha",blendColor:"blendColor",blendDst:"blendDst",blendDstAlpha:"blendDstAlpha",blendEquation:"blendEquation",blendEquationAlpha:"blendEquationAlpha",blending:"blending",blendSrc:"blendSrc",blendSrcAlpha:"blendSrcAlpha",clipIntersection:"clipIntersection",clippingPlanes:"clippingPlanes",clipShadows:"clipShadows",colorWrite:"colorWrite",defines:"defines",depthFunc:"depthFunc",depthTest:"depthTest",depthWrite:"depthWrite",id:"id",stencilWrite:"stencilWrite",stencilFunc:"stencilFunc",stencilRef:"stencilRef",stencilWriteMask:"stencilWriteMask",stencilFuncMask:"stencilFuncMask",stencilFail:"stencilFail",stencilZFail:"stencilZFail",stencilZPass:"stencilZPass",name:"name",opacity:"opacity",polygonOffset:"polygonOffset",polygonOffsetFactor:"polygonOffsetFactor",polygonOffsetUnits:"polygonOffsetUnits",precision:"precision",premultipliedAlpha:"premultipliedAlpha",forceSinglePass:"forceSinglePass",dithering:"dithering",side:"side",shadowSide:"shadowSide",toneMapped:"toneMapped",transparent:"transparent",type:"type",uuid:"uuid",vertexColors:"vertexColors",visible:"visible",userData:"userData",version:"version"},features:[oe([]),X],ngContentSelectors:HJ,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var GJ=["*"],so=(()=>{let e=class e extends on{getType(){return Kh}get isMeshPhongMaterial(){return this._objRef?.isMeshPhongMaterial}set type(t){this._objRef&&(this._objRef.type=t)}get type(){return this._objRef?.type}set color(t){this._objRef&&(this._objRef.color=ve(this._objRef.color,t))}get color(){return this._objRef?.color}set specular(t){this._objRef&&(this._objRef.specular=ve(this._objRef.specular,t))}get specular(){return this._objRef?.specular}set shininess(t){this._objRef&&(this._objRef.shininess=t)}get shininess(){return this._objRef?.shininess}set map(t){this._objRef&&(this._objRef.map=t)}get map(){return this._objRef?.map}set lightMap(t){this._objRef&&(this._objRef.lightMap=t)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(t){this._objRef&&(this._objRef.lightMapIntensity=t)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set aoMap(t){this._objRef&&(this._objRef.aoMap=t)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(t){this._objRef&&(this._objRef.aoMapIntensity=t)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set emissive(t){this._objRef&&(this._objRef.emissive=ve(this._objRef.emissive,t))}get emissive(){return this._objRef?.emissive}set emissiveIntensity(t){this._objRef&&(this._objRef.emissiveIntensity=t)}get emissiveIntensity(){return this._objRef?.emissiveIntensity}set emissiveMap(t){this._objRef&&(this._objRef.emissiveMap=t)}get emissiveMap(){return this._objRef?.emissiveMap}set bumpMap(t){this._objRef&&(this._objRef.bumpMap=t)}get bumpMap(){return this._objRef?.bumpMap}set bumpScale(t){this._objRef&&(this._objRef.bumpScale=t)}get bumpScale(){return this._objRef?.bumpScale}set normalMap(t){this._objRef&&(this._objRef.normalMap=t)}get normalMap(){return this._objRef?.normalMap}set normalMapType(t){this._objRef&&(this._objRef.normalMapType=t)}get normalMapType(){return this._objRef?.normalMapType}set normalScale(t){this._objRef&&(this._objRef.normalScale=ve(this._objRef.normalScale,t))}get normalScale(){return this._objRef?.normalScale}set displacementMap(t){this._objRef&&(this._objRef.displacementMap=t)}get displacementMap(){return this._objRef?.displacementMap}set displacementScale(t){this._objRef&&(this._objRef.displacementScale=t)}get displacementScale(){return this._objRef?.displacementScale}set displacementBias(t){this._objRef&&(this._objRef.displacementBias=t)}get displacementBias(){return this._objRef?.displacementBias}set specularMap(t){this._objRef&&(this._objRef.specularMap=t)}get specularMap(){return this._objRef?.specularMap}set alphaMap(t){this._objRef&&(this._objRef.alphaMap=t)}get alphaMap(){return this._objRef?.alphaMap}set envMap(t){this._objRef&&(this._objRef.envMap=t)}get envMap(){return this._objRef?.envMap}set envMapRotation(t){this._objRef&&(this._objRef.envMapRotation=ve(this._objRef.envMapRotation,t))}get envMapRotation(){return this._objRef?.envMapRotation}set combine(t){this._objRef&&(this._objRef.combine=t)}get combine(){return this._objRef?.combine}set reflectivity(t){this._objRef&&(this._objRef.reflectivity=t)}get reflectivity(){return this._objRef?.reflectivity}set refractionRatio(t){this._objRef&&(this._objRef.refractionRatio=t)}get refractionRatio(){return this._objRef?.refractionRatio}set wireframe(t){this._objRef&&(this._objRef.wireframe=t)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(t){this._objRef&&(this._objRef.wireframeLinewidth=t)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(t){this._objRef&&(this._objRef.wireframeLinecap=t)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(t){this._objRef&&(this._objRef.wireframeLinejoin=t)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set flatShading(t){this._objRef&&(this._objRef.flatShading=t)}get flatShading(){return this._objRef?.flatShading}set metal(t){this._objRef&&(this._objRef.metal=t)}get metal(){return this._objRef?.metal}set fog(t){this._objRef&&(this._objRef.fog=t)}get fog(){return this._objRef?.fog}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-meshPhongMaterial"]],inputs:{type:"type",color:"color",specular:"specular",shininess:"shininess",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",emissive:"emissive",emissiveIntensity:"emissiveIntensity",emissiveMap:"emissiveMap",bumpMap:"bumpMap",bumpScale:"bumpScale",normalMap:"normalMap",normalMapType:"normalMapType",normalScale:"normalScale",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",specularMap:"specularMap",alphaMap:"alphaMap",envMap:"envMap",envMapRotation:"envMapRotation",combine:"combine",reflectivity:"reflectivity",refractionRatio:"refractionRatio",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",flatShading:"flatShading",metal:"metal",fog:"fog"},features:[oe([{provide:on,useExisting:ge(()=>e)}]),X],ngContentSelectors:GJ,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var g3=(()=>{let e=class e extends $r{constructor(t){super(),this.parent=t}addToParent(){this.parent.objRef&&(this.parent.objRef.geometry=this.objRef,this.parent.objRef.updateMorphTargets&&this.parent.objRef.updateMorphTargets())}removeFromParent(){this._objRef&&this.parent&&this.parent.objRef&&(this.parent.objRef.geometry=void 0)}};e.\u0275fac=function(r){return new(r||e)(k(pe))},e.\u0275cmp=L({type:e,selectors:[["th-abs-geometry"]],features:[X],decls:0,vars:0,template:function(r,o){},encapsulation:2});let n=e;return n})();var WJ=["*"],Jt=(()=>{let e=class e extends g3{getType(){return ft}set id(t){this._objRef&&(this._objRef.id=t)}get id(){return this._objRef?.id}set uuid(t){this._objRef&&(this._objRef.uuid=t)}get uuid(){return this._objRef?.uuid}set name(t){this._objRef&&(this._objRef.name=t)}get name(){return this._objRef?.name}get type(){return this._objRef?.type}set index(t){this._objRef&&(this._objRef.index=ve(this._objRef.index,t))}get index(){return this._objRef?.index}set attributes(t){this._objRef&&(this._objRef.attributes=t)}get attributes(){return this._objRef?.attributes}set morphAttributes(t){this._objRef&&(this._objRef.morphAttributes=t)}get morphAttributes(){return this._objRef?.morphAttributes}set morphTargetsRelative(t){this._objRef&&(this._objRef.morphTargetsRelative=t)}get morphTargetsRelative(){return this._objRef?.morphTargetsRelative}set groups(t){this._objRef&&(this._objRef.groups=t)}get groups(){return this._objRef?.groups}set boundingBox(t){this._objRef&&(this._objRef.boundingBox=ve(this._objRef.boundingBox,t))}get boundingBox(){return this._objRef?.boundingBox}set boundingSphere(t){this._objRef&&(this._objRef.boundingSphere=ve(this._objRef.boundingSphere,t))}get boundingSphere(){return this._objRef?.boundingSphere}set drawRange(t){this._objRef&&(this._objRef.drawRange=t)}get drawRange(){return this._objRef?.drawRange}set userData(t){this._objRef&&(this._objRef.userData=t)}get userData(){return this._objRef?.userData}get isBufferGeometry(){return this._objRef?.isBufferGeometry}constructor(t){super(t)}};e.\u0275fac=function(r){return new(r||e)(k(pe,4))},e.\u0275cmp=L({type:e,selectors:[["th-bufferGeometry"]],inputs:{id:"id",uuid:"uuid",name:"name",index:"index",attributes:"attributes",morphAttributes:"morphAttributes",morphTargetsRelative:"morphTargetsRelative",groups:"groups",boundingBox:"boundingBox",boundingSphere:"boundingSphere",drawRange:"drawRange",userData:"userData"},features:[oe([]),X],ngContentSelectors:WJ,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var qJ=["*"],Wo=(()=>{let e=class e extends Jt{getType(){return ea}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-planeGeometry"]],features:[oe([{provide:Jt,useExisting:ge(()=>e)}]),X],ngContentSelectors:qJ,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var $d=new Ce("A reference to the raycaster object",{factory:()=>new Wr}),hc=(()=>{let e=class e{constructor(){this.raycaster=re($d),this.selected=null,this.enabled=!0,this.groups=[],this.paused=!1,this.maxClickDistance=23,this.nid=e.instanceCnt++,this.onPointerMove=this.onPointerMove.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerUp=this.onPointerUp.bind(this)}ngOnDestroy(){this.disable(),this.unsubscribe()}subscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.addEventListener("pointermove",this.onPointerMove),this.canvas.addEventListener("pointerdown",this.onPointerDown),this.canvas.addEventListener("pointerup",this.onPointerUp)}unsubscribe(){if(!this.canvas)throw new Error("missing canvas");this.canvas.removeEventListener("pointermove",this.onPointerMove),this.canvas.removeEventListener("pointerdown",this.onPointerDown),this.canvas.removeEventListener("pointerup",this.onPointerUp)}enable(){this.enabled=!0}disable(){this.enabled=!1}pause(){this.paused=!0}resume(){this.paused=!1}get isEnabled(){return this.enabled}init(t,r){this.camera=t,this.canvas=r,this.subscribe()}addEventTarget(t){this.groups.push(t)}removeEventTarget(t){let r=this.groups.indexOf(t);r>=0&&this.groups.splice(r,1)}onPointerMove(t){if(!this.isReady())return;let r=this.getFirstIntersectedGroup(t.layerX,t.layerY,"mouseEnter");if((!this.selected||this.selected!==r?.target)&&(this.selected&&(this.selected.host.objRef?.dispatchEvent({type:"mouseExit",component:this.selected.host}),this.selected.emitOnMouseExit(),this.selected=null),r&&r.target)){this.selected=r.target;let o=xe({type:"mouseEnter",component:r.target.host},r);this.selected.host.objRef?.dispatchEvent(o),this.selected.emitOnMouseEnter(o)}}onPointerDown(t){if(this.maxClickDistance=t.width,this.pointerDownEvent=t,!this.isReady())return;let r=this.getFirstIntersectedGroup(t.layerX,t.layerY,"pointerDown");if(r&&r.target&&r.target.host.objRef){let o=xe({type:"pointerDown",component:r.target.host},r);r.target.host.objRef.dispatchEvent(o),r.target.emitOnPointerDown(o)}}onPointerUp(t){let r=this.pointerDownEvent;if(this.pointerDownEvent=void 0,!this.isReady())return;let o=this.getFirstIntersectedGroup(t.layerX,t.layerY,"pointerUp");if(o&&o.target&&o.target.host.objRef){let s=xe({type:"pointerUp",component:o.target.host},o);o.target.host.objRef.dispatchEvent(s),o.target.emitOnPointerUp(s)}if(!(this.calcPointerDownUpDinstance(t,r)>this.maxClickDistance)&&(o=this.getFirstIntersectedGroup(t.layerX,t.layerY,"click"),o&&o.target&&o.target.host.objRef)){let s=xe({type:"click",component:o.target.host},o);o.target.host.objRef.dispatchEvent(s),o.target.emitOnClick(s)}}isReady(t){return!!(this.enabled&&(t||!this.paused)&&this.camera&&this.camera.objRef&&this.groups&&this.groups.length>0)}calcPointerDownUpDinstance(t,r){if(!r)return Number.MAX_VALUE;let o=t.layerX-r.layerX,s=t.layerY-r.layerY;return Math.sqrt(o*o+s*s)}getFirstIntersectedGroup(t,r,o){if(!this.camera||!this.canvas||!this.camera.objRef)return;t=t/this.canvas.clientWidth*2-1,r=-(r/this.canvas.clientHeight)*2+1;let s=new z(t,r);this.raycaster.setFromCamera(s,this.camera.objRef);let a,c;for(let l of this.groups){let d=l.host.objRef;if(!l[o]||!d)continue;let u=this.raycaster.intersectObject(d,!0);u.length>0&&(!a||a.distance>u[0].distance)&&(a=u[0],c=l)}if(c&&a)return xe({target:c},a)}};e.instanceCnt=0,e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})();var XJ=["*"],og=new Ce("HOST_ELEMENT"),Ir=(()=>{let e=class e{constructor(t,r){this.engServ=t,this.raycaster=r,this.hostElement=re(og),this.onRender=new et}set contentScene(t){t&&(this.scene=t)}set effectComposer(t){this._effectComposer=t,this.configureEffectComposerRenderTarget()}get effectComposer(){return this._effectComposer}set camera(t){this._camera=t,this.initRaycaster()}get camera(){return this._camera}set contentCamera(t){t&&(this.camera=t)}set viewPort(t){this._viewPort=t,this.configureEffectComposerRenderTarget()}get viewPort(){return this._viewPort}ngOnInit(){this.initRaycaster()}initRaycaster(){this.camera&&this.raycaster.init(this.camera,this.hostElement.nativeElement)}add(t){}remove(t){}configureEffectComposerRenderTarget(){if(!(!this.viewPort||!this.effectComposer)){let t,r;this.viewPort instanceof xi?(t=this.viewPort.z,r=this.viewPort?.width):(t=this.viewPort.width,r=this.viewPort.height),this.effectComposer.setSize(t,r)}}};e.\u0275fac=function(r){return new(r||e)(k(ao),k(hc))},e.\u0275cmp=L({type:e,selectors:[["th-view"]],contentQueries:function(r,o,s){if(r&1&&(qi(s,jt,5),qi(s,dc,5)),r&2){let a;nt(a=rt())&&(o.contentScene=a.first),nt(a=rt())&&(o.contentCamera=a.first)}},inputs:{scene:"scene",effectComposer:"effectComposer",camera:"camera",shadow:"shadow",viewPort:"viewPort",scissor:"scissor",scissorTest:"scissorTest",clearColor:"clearColor",clearAlpha:"clearAlpha"},outputs:{onRender:"onRender"},features:[oe([{provide:pe,useExisting:ge(()=>e)},{provide:$d,useValue:new Wr},hc])],ngContentSelectors:XJ,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2});let n=e;return n})();var _3=new M,YJ=new Kt,v3=new M,hf=class extends Rt{constructor(e=document.createElement("div")){super(),this.isCSS3DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(i){i.element instanceof Element&&i.element.parentNode!==null&&i.element.parentNode.removeChild(i.element)})})}copy(e,i){return super.copy(e,i),this.element=e.element.cloneNode(!0),this}};var ha=new je,ZJ=new je,Vy=class{constructor(e={}){let i=this,t,r,o,s,a={camera:{style:""},objects:new WeakMap},c=e.element!==void 0?e.element:document.createElement("div");c.style.overflow="hidden",this.domElement=c;let l=document.createElement("div");l.style.transformOrigin="0 0",l.style.pointerEvents="none",c.appendChild(l);let d=document.createElement("div");d.style.transformStyle="preserve-3d",l.appendChild(d),this.getSize=function(){return{width:t,height:r}},this.render=function(b,m){let g=m.projectionMatrix.elements[5]*s;m.view&&m.view.enabled?(l.style.transform=`translate( ${-m.view.offsetX*(t/m.view.width)}px, ${-m.view.offsetY*(r/m.view.height)}px )`,l.style.transform+=`scale( ${m.view.fullWidth/m.view.width}, ${m.view.fullHeight/m.view.height} )`):l.style.transform="",b.matrixWorldAutoUpdate===!0&&b.updateMatrixWorld(),m.parent===null&&m.matrixWorldAutoUpdate===!0&&m.updateMatrixWorld();let v,_;m.isOrthographicCamera&&(v=-(m.right+m.left)/2,_=(m.top+m.bottom)/2);let y=m.view&&m.view.enabled?m.view.height/m.view.fullHeight:1,C=m.isOrthographicCamera?`scale( ${y} )scale(`+g+")translate("+u(v)+"px,"+u(_)+"px)"+h(m.matrixWorldInverse):`scale( ${y} )translateZ(`+g+"px)"+h(m.matrixWorldInverse),w=(m.isPerspectiveCamera?"perspective("+g+"px) ":"")+C+"translate("+o+"px,"+s+"px)";a.camera.style!==w&&(d.style.transform=w,a.camera.style=w),p(b,b,m,C)},this.setSize=function(b,m){t=b,r=m,o=t/2,s=r/2,c.style.width=b+"px",c.style.height=m+"px",l.style.width=b+"px",l.style.height=m+"px",d.style.width=b+"px",d.style.height=m+"px"};function u(b){return Math.abs(b)<1e-10?0:b}function h(b){let m=b.elements;return"matrix3d("+u(m[0])+","+u(-m[1])+","+u(m[2])+","+u(m[3])+","+u(m[4])+","+u(-m[5])+","+u(m[6])+","+u(m[7])+","+u(m[8])+","+u(-m[9])+","+u(m[10])+","+u(m[11])+","+u(m[12])+","+u(-m[13])+","+u(m[14])+","+u(m[15])+")"}function f(b){let m=b.elements;return"translate(-50%,-50%)"+("matrix3d("+u(m[0])+","+u(m[1])+","+u(m[2])+","+u(m[3])+","+u(-m[4])+","+u(-m[5])+","+u(-m[6])+","+u(-m[7])+","+u(m[8])+","+u(m[9])+","+u(m[10])+","+u(m[11])+","+u(m[12])+","+u(m[13])+","+u(m[14])+","+u(m[15])+")")}function p(b,m,g,v){if(b.isCSS3DObject){let _=b.visible===!0&&b.layers.test(g.layers)===!0;if(b.element.style.display=_===!0?"":"none",_===!0){b.onBeforeRender(i,m,g);let y;b.isCSS3DSprite?(ha.copy(g.matrixWorldInverse),ha.transpose(),b.rotation2D!==0&&ha.multiply(ZJ.makeRotationZ(b.rotation2D)),b.matrixWorld.decompose(_3,YJ,v3),ha.setPosition(_3),ha.scale(v3),ha.elements[3]=0,ha.elements[7]=0,ha.elements[11]=0,ha.elements[15]=1,y=f(ha)):y=f(b.matrixWorld);let C=b.element,R=a.objects.get(b);if(R===void 0||R.style!==y){C.style.transform=y;let w={style:y};a.objects.set(b,w)}C.parentNode!==d&&d.appendChild(C),b.onAfterRender(i,m,g)}}for(let _=0,y=b.children.length;_<y;_++)p(b.children[_],m,g,v)}}};var mf=class extends Rt{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new z(.5,.5),this.addEventListener("removed",function(){this.traverse(function(i){i.element instanceof Element&&i.element.parentNode!==null&&i.element.parentNode.removeChild(i.element)})})}copy(e,i){return super.copy(e,i),this.element=e.element.cloneNode(!0),this.center=e.center,this}},ff=new M,y3=new je,x3=new je,w3=new M,M3=new M,zy=class{constructor(e={}){let i=this,t,r,o,s,a={objects:new WeakMap},c=e.element!==void 0?e.element:document.createElement("div");c.style.overflow="hidden",this.domElement=c,this.getSize=function(){return{width:t,height:r}},this.render=function(f,p){f.matrixWorldAutoUpdate===!0&&f.updateMatrixWorld(),p.parent===null&&p.matrixWorldAutoUpdate===!0&&p.updateMatrixWorld(),y3.copy(p.matrixWorldInverse),x3.multiplyMatrices(p.projectionMatrix,y3),l(f,f,p),h(f)},this.setSize=function(f,p){t=f,r=p,o=t/2,s=r/2,c.style.width=f+"px",c.style.height=p+"px"};function l(f,p,b){if(f.isCSS2DObject){ff.setFromMatrixPosition(f.matrixWorld),ff.applyMatrix4(x3);let m=f.visible===!0&&ff.z>=-1&&ff.z<=1&&f.layers.test(b.layers)===!0;if(f.element.style.display=m===!0?"":"none",m===!0){f.onBeforeRender(i,p,b);let v=f.element;v.style.transform="translate("+-100*f.center.x+"%,"+-100*f.center.y+"%)translate("+(ff.x*o+o)+"px,"+(-ff.y*s+s)+"px)",v.parentNode!==c&&c.appendChild(v),f.onAfterRender(i,p,b)}let g={distanceToCameraSquared:d(b,f)};a.objects.set(f,g)}for(let m=0,g=f.children.length;m<g;m++)l(f.children[m],p,b)}function d(f,p){return w3.setFromMatrixPosition(f.matrixWorld),M3.setFromMatrixPosition(p.matrixWorld),w3.distanceToSquared(M3)}function u(f){let p=[];return f.traverse(function(b){b.isCSS2DObject&&p.push(b)}),p}function h(f){let p=u(f).sort(function(m,g){if(m.renderOrder!==g.renderOrder)return g.renderOrder-m.renderOrder;let v=a.objects.get(m).distanceToCameraSquared,_=a.objects.get(g).distanceToCameraSquared;return v-_}),b=p.length;for(let m=0,g=p.length;m<g;m++)p[m].element.style.zIndex=b-m}}};var S3={alpha:!0,antialias:!0,preserveDrawingBuffer:!0},fc=new Ce("Renderer Providers"),R3=new Ce("CSS3DRenderer"),T3=new Ce("CSS2DRenderer"),qd=new Ce("WebGLRenderer");function ml(n){let e=new nc(xe(xe({},S3),n));return Object.assign(e,xe(xe({},S3),n)),[{provide:qd,useValue:e},{provide:fc,multi:!0,useExisting:qd}]}function Hy(n){return[{provide:R3,useFactory:()=>{let i=new Vy(n),t=i.domElement.style;return t.position="absolute",t.top="0px",t.bottom="0px",t.left="0px",t.right="0px",t.overflow="hidden",i}},{provide:fc,multi:!0,useExisting:R3}]}function C3(n){return[{provide:T3,useFactory:()=>{let i=new zy(n),t=i.domElement.style;return t.position="absolute",t.top="0px",t.bottom="0px",t.left="0px",t.right="0px",t.overflow="hidden",i}},{provide:fc,multi:!0,useExisting:T3}]}var ao=(()=>{let e=class e{constructor(t){this.ngZone=t,this.hostElement=re(og),this.clock=new ro,this.destroyed$=new ht,this.resizeEmitter=new et,this.beforeRenderEmitter=new et,this.views=[],this.beforeRender$=this.beforeRenderEmitter.pipe(Ti(this.destroyed$)),this.resize$=this.resizeEmitter.pipe(Ti(this.destroyed$));let r=this.initRenderer();this.renderers=r.renderers,this.canvas=r.canvas,this.wegblRenderer=r.mainRenderer,this.initResizeObserver()}ngOnDestroy(){this.resizeObserver&&this.hostElement&&this.resizeObserver.unobserve(this.hostElement.nativeElement)}initResizeObserver(){this.ngZone.runOutsideAngular(()=>{this.initCanvasSize(),this.resizeObserver||(this.resizeObserver=new ResizeObserver(()=>{this.resize()})),this.resizeObserver.observe(this.hostElement.nativeElement)})}initCanvasSize(){this.canvas?.style.setProperty("width","100%"),this.canvas?.style.setProperty("height","100%")}initRenderer(){let t=re(fc),r,o;for(let s of t)s.domElement instanceof HTMLCanvasElement&&(o=s,r=o.domElement);if(!t||t.length<1)throw new Error("missing Canvas Renderer");return{canvas:r,mainRenderer:o,renderers:t}}setViews(t){this.views=t}addView(t){this.views.push(t);let r=this.calcRendererSize();r&&this.adjustViewDimensions(t,r.width,r.height)}render(){this.beforeRenderEmitter.emit({engine:this,delta:this.clock.getDelta()});for(let t of this.views)this.renderView(t)}renderView(t){let r=t.camera,o=t.scene;if(!(!r||!o||!r.objRef||!o.objRef)){Gd(t.onRender)&&this.ngZone.run(()=>t.onRender.emit({renderer:this.renderers,scene:o,camera:r}));for(let s of this.renderers)if(!(t.effectComposer&&!(s instanceof nc)))if(this.applyRendererParametersFromView(t,s),t.effectComposer){t.effectComposer.render();return}else s.render(o.objRef,r.objRef)}}applyRendererParametersFromView(t,r){t.viewPort&&r.setViewport&&(t.viewPort instanceof xi?r.setViewport(t.viewPort):r.setViewport(t.viewPort.x,t.viewPort.y,t.viewPort.width,t.viewPort.height)),t.scissor&&r.setScissor&&(t.scissor instanceof xi?r.setScissor(t.scissor):r.setScissor(t.scissor.x,t.scissor.y,t.scissor.width,t.scissor.height)),t.scissorTest!==void 0&&r.setScissorTest&&r.setScissorTest(t.scissorTest),t.clearColor&&r.setClearColor&&r.setClearColor(t.clearColor),t.clearAlpha!==void 0&&r.setClearAlpha&&r.setClearAlpha(t.clearAlpha),t.shadow!==void 0&&r.shadowMap&&(r.shadowMap.enabled=!0)}resize(){let{width:t,height:r}=this.calcRendererSize();this.renderers?.forEach(o=>o.setSize(t,r,!1));for(let o of this.views)this.adjustViewDimensions(o,t,r);return this.resizeEmitter.emit({width:t,height:r}),!0}calcRendererSize(){return{width:this.hostElement.nativeElement.clientWidth??0,height:this.hostElement.nativeElement.clientHeight??0}}adjustViewDimensions(t,r,o){t.viewPort||(t.camera&&t.camera.objRef.aspect&&(t.camera.objRef.aspect=r/o,t.camera.objRef.updateProjectionMatrix()),t.effectComposer?.setSize(r,o))}};e.\u0275fac=function(r){return new(r||e)(le(Xe))},e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})();var fa=(()=>{let e=class e{constructor(t,r){this.engineService=t,this.ngZone=r,this.active=!0,this.destroyed$=new ht,this.beforeRender$=this.engineService.beforeRender$,this.engineService.resize$.pipe(Ti(this.destroyed$)).subscribe(()=>this.requestAnimationFrame())}ngOnDestroy(){this.stop(),this.destroyed$.next(),this.destroyed$.complete()}start(){this.active||(this.active=!0,this.requestAnimationFrame())}stop(){this.active=!1,this.frameId!==void 0&&(cancelAnimationFrame(this.frameId),this.frameId=void 0)}isActive(){return this.active}requestAnimationFrame(){this.frameId===void 0&&this.ngZone.runOutsideAngular(()=>this.frameId=requestAnimationFrame(()=>{this.frameId=void 0,this.engineService.render(),this.active&&this.requestAnimationFrame()}))}};e.\u0275fac=function(r){return new(r||e)(le(ao),le(Xe))},e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})();var QJ=["*"];function KJ(n,e){n&1&&ee(0,0,["*ngIf","isDevMode()"])}function JJ(){return[{provide:fc,useFactory:()=>{let n=re(fc,{skipSelf:!0,optional:!0});return n||[ml()[0].useValue]}},{provide:qd,useFactory:()=>{let n=re(qd,{skipSelf:!0,optional:!0});if(n)return n;let e=re(fc),i=e[0];if(e.length===1&&i instanceof nc)return i}}]}var Ct=(()=>{let e=class e extends Ir{get obj(){return this}set views(t){this.setViews(t)}get rendererCanvas(){return this.engServ.canvas}constructor(t,r,o,s){super(t,o),this.engServ=t,this.animationLoop=r,this.raycaster=o,this.elementRef=s,this.isDevMode=Vj,this.nid=e.instanceCnt++,this.disableDefaultView=!1,this.engServ.renderers.forEach(a=>this.elementRef.nativeElement.appendChild(a.domElement))}ngAfterContentChecked(){this.animationLoop.requestAnimationFrame()}ngAfterViewInit(){this.animationLoop.requestAnimationFrame()}ngOnInit(){this.engServ.resize(),super.ngOnInit(),this.setViews()}setViews(t){this.engServ.setViews([]),this.disableDefaultView||this.engServ.addView(this),t?.forEach(r=>this.engServ.addView(r))}};e.instanceCnt=0,e.\u0275fac=function(r){return new(r||e)(k(ao),k(fa),k(ge(()=>hc)),k(Qe))},e.\u0275cmp=L({type:e,selectors:[["th-canvas"]],contentQueries:function(r,o,s){if(r&1&&qi(s,Ir,4),r&2){let a;nt(a=rt())&&(o.views=a)}},inputs:{disableDefaultView:"disableDefaultView"},features:[oe([{provide:og,useFactory:()=>re(Qe)},{provide:pe,useExisting:ge(()=>e)},ao,fa,{provide:$d,useValue:new Wr},ge(()=>hc),{provide:Ir,useExisting:ge(()=>e)},JJ()]),X],ngContentSelectors:QJ,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(r,o){r&1&&(ce(),Nt(0,KJ,1,0,"ng-content",0)),r&2&&P("ngIf",o.isDevMode())},dependencies:[th],styles:["[_nghost-%COMP%]{display:flex;flex:auto;line-height:0;height:100%}canvas[_ngcontent-%COMP%]{flex:auto;outline:none;width:100%;height:100%}"],changeDetection:0});let n=e;return n})();var sg=function(){var n=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(d){d.preventDefault(),t(++n%e.children.length)},!1);function i(d){return e.appendChild(d.dom),d}function t(d){for(var u=0;u<e.children.length;u++)e.children[u].style.display=u===d?"block":"none";n=d}var r=(performance||Date).now(),o=r,s=0,a=i(new sg.Panel("FPS","#0ff","#002")),c=i(new sg.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=i(new sg.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:i,showPanel:t,begin:function(){r=(performance||Date).now()},end:function(){s++;var d=(performance||Date).now();if(c.update(d-r,200),d>=o+1e3&&(a.update(s*1e3/(d-o),100),o=d,s=0,l)){var u=performance.memory;l.update(u.usedJSHeapSize/1048576,u.jsHeapSizeLimit/1048576)}return d},update:function(){r=this.end()},domElement:e,setMode:t}};sg.Panel=function(n,e,i){var t=1/0,r=0,o=Math.round,s=o(window.devicePixelRatio||1),a=80*s,c=48*s,l=3*s,d=2*s,u=3*s,h=15*s,f=74*s,p=30*s,b=document.createElement("canvas");b.width=a,b.height=c,b.style.cssText="width:80px;height:48px";var m=b.getContext("2d");return m.font="bold "+9*s+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=i,m.fillRect(0,0,a,c),m.fillStyle=e,m.fillText(n,l,d),m.fillRect(u,h,f,p),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(u,h,f,p),{dom:b,update:function(g,v){t=Math.min(t,g),r=Math.max(r,g),m.fillStyle=i,m.globalAlpha=1,m.fillRect(0,0,a,h),m.fillStyle=e,m.fillText(o(g)+" "+n+" ("+o(t)+"-"+o(r)+")",l,d),m.drawImage(b,u+s,h,f-s,p,u,h,f-s,p),m.fillRect(u+f-s,h,s,p),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(u+f-s,h,s,o((1-g/v)*p))}}};var D3=sg;var En=(()=>{let e=class e{constructor(t,r){this.engineService=t,this.canvas=r,this.stats=new D3}ngOnDestroy(){this.renderSubscription&&this.renderSubscription.unsubscribe()}ngOnInit(){if(!this.canvas.elementRef)throw new Error("No canvas present");let t=this.canvas.elementRef.nativeElement;t&&(t.style.position="relative",this.stats.dom.style.position="absolute",this.stats.showPanel(0),t.appendChild(this.stats.dom),this.renderSubscription=this.engineService.beforeRender$.subscribe(()=>{this.stats.update()}))}set thStats(t){t?this.stats.dom.style.visibility="visible":this.stats.dom.style.visibility="hidden"}};e.\u0275fac=function(r){return new(r||e)(k(ao),k(Ct))},e.\u0275dir=He({type:e,selectors:[["","thStats",""]],inputs:{thStats:"thStats"}});let n=e;return n})();var Gy="https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/assets/",sn="assets/";function fD(n,e){if(e===tD)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===sf||e===ig){let i=n.getIndex();if(i===null){let s=[],a=n.getAttribute("position");if(a!==void 0){for(let c=0;c<a.count;c++)s.push(c);n.setIndex(s),i=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}let t=i.count-2,r=[];if(e===sf)for(let s=1;s<=t;s++)r.push(i.getX(0)),r.push(i.getX(s)),r.push(i.getX(s+1));else for(let s=0;s<t;s++)s%2===0?(r.push(i.getX(s)),r.push(i.getX(s+1)),r.push(i.getX(s+2))):(r.push(i.getX(s+2)),r.push(i.getX(s+1)),r.push(i.getX(s)));r.length/3!==t&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let o=n.clone();return o.setIndex(r),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var Wy=class extends Jn{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(i){return new yD(i)}),this.register(function(i){return new xD(i)}),this.register(function(i){return new AD(i)}),this.register(function(i){return new ID(i)}),this.register(function(i){return new PD(i)}),this.register(function(i){return new MD(i)}),this.register(function(i){return new SD(i)}),this.register(function(i){return new RD(i)}),this.register(function(i){return new TD(i)}),this.register(function(i){return new vD(i)}),this.register(function(i){return new CD(i)}),this.register(function(i){return new wD(i)}),this.register(function(i){return new DD(i)}),this.register(function(i){return new ED(i)}),this.register(function(i){return new bD(i)}),this.register(function(i){return new kD(i)}),this.register(function(i){return new FD(i)})}load(e,i,t,r){let o=this,s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){let l=gs.extractUrlBase(e);s=gs.resolveURL(l,this.path)}else s=gs.extractUrlBase(e);this.manager.itemStart(e);let a=function(l){r?r(l):console.error(l),o.manager.itemError(e),o.manager.itemEnd(e)},c=new Kn(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{o.parse(l,s,function(d){i(d),o.manager.itemEnd(e)},a)}catch(d){a(d)}},t,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,i,t,r){let o,s={},a={},c=new TextDecoder;if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===F3){try{s[vi.KHR_BINARY_GLTF]=new jD(e)}catch(u){r&&r(u);return}o=JSON.parse(s[vi.KHR_BINARY_GLTF].content)}else o=JSON.parse(c.decode(e));else o=e;if(o.asset===void 0||o.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let l=new zD(o,{path:i||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){let u=this.pluginCallbacks[d](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,s[u.name]=!0}if(o.extensionsUsed)for(let d=0;d<o.extensionsUsed.length;++d){let u=o.extensionsUsed[d],h=o.extensionsRequired||[];switch(u){case vi.KHR_MATERIALS_UNLIT:s[u]=new _D;break;case vi.KHR_DRACO_MESH_COMPRESSION:s[u]=new OD(o,this.dracoLoader);break;case vi.KHR_TEXTURE_TRANSFORM:s[u]=new ND;break;case vi.KHR_MESH_QUANTIZATION:s[u]=new LD;break;default:h.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(s),l.setPlugins(a),l.parse(t,r)}parseAsync(e,i){let t=this;return new Promise(function(r,o){t.parse(e,i,r,o)})}};function eee(){let n={};return{get:function(e){return n[e]},add:function(e,i){n[e]=i},remove:function(e){delete n[e]},removeAll:function(){n={}}}}var vi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},bD=class{constructor(e){this.parser=e,this.name=vi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,i=this.parser.json.nodes||[];for(let t=0,r=i.length;t<r;t++){let o=i[t];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){let i=this.parser,t="light:"+e,r=i.cache.get(t);if(r)return r;let o=i.json,c=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e],l,d=new _e(16777215);c.color!==void 0&&d.setRGB(c.color[0],c.color[1],c.color[2],jn);let u=c.range!==void 0?c.range:0;switch(c.type){case"directional":l=new cl(d),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new al(d),l.distance=u;break;case"spot":l=new ef(d),l.distance=u,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,gl(l,c),c.intensity!==void 0&&(l.intensity=c.intensity),l.name=i.createUniqueName(c.name||"light_"+e),r=Promise.resolve(l),i.cache.add(t,r),r}getDependency(e,i){if(e==="light")return this._loadLight(i)}createNodeAttachment(e){let i=this,t=this.parser,o=t.json.nodes[e],a=(o.extensions&&o.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(c){return t._getNodeRef(i.cache,a,c)})}},_D=class{constructor(){this.name=vi.KHR_MATERIALS_UNLIT}getMaterialType(){return Ji}extendParams(e,i,t){let r=[];e.color=new _e(1,1,1),e.opacity=1;let o=i.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){let s=o.baseColorFactor;e.color.setRGB(s[0],s[1],s[2],jn),e.opacity=s[3]}o.baseColorTexture!==void 0&&r.push(t.assignTexture(e,"map",o.baseColorTexture,Pn))}return Promise.all(r)}},vD=class{constructor(e){this.parser=e,this.name=vi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,i){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(i.emissiveIntensity=o),Promise.resolve()}},yD=class{constructor(e){this.parser=e,this.name=vi.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Gr}extendMaterialParams(e,i){let t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(i.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(t.assignTexture(i,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(i.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(t.assignTexture(i,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(t.assignTexture(i,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){let a=s.clearcoatNormalTexture.scale;i.clearcoatNormalScale=new z(a,a)}return Promise.all(o)}},xD=class{constructor(e){this.parser=e,this.name=vi.KHR_MATERIALS_DISPERSION}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Gr}extendMaterialParams(e,i){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return i.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}},wD=class{constructor(e){this.parser=e,this.name=vi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Gr}extendMaterialParams(e,i){let t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(i.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(t.assignTexture(i,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(i.iridescenceIOR=s.iridescenceIor),i.iridescenceThicknessRange===void 0&&(i.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(i.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(i.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(t.assignTexture(i,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}},MD=class{constructor(e){this.parser=e,this.name=vi.KHR_MATERIALS_SHEEN}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Gr}extendMaterialParams(e,i){let t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[];i.sheenColor=new _e(0,0,0),i.sheenRoughness=0,i.sheen=1;let s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){let a=s.sheenColorFactor;i.sheenColor.setRGB(a[0],a[1],a[2],jn)}return s.sheenRoughnessFactor!==void 0&&(i.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(t.assignTexture(i,"sheenColorMap",s.sheenColorTexture,Pn)),s.sheenRoughnessTexture!==void 0&&o.push(t.assignTexture(i,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}},SD=class{constructor(e){this.parser=e,this.name=vi.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Gr}extendMaterialParams(e,i){let t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(i.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(t.assignTexture(i,"transmissionMap",s.transmissionTexture)),Promise.all(o)}},RD=class{constructor(e){this.parser=e,this.name=vi.KHR_MATERIALS_VOLUME}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Gr}extendMaterialParams(e,i){let t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];i.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(t.assignTexture(i,"thicknessMap",s.thicknessTexture)),i.attenuationDistance=s.attenuationDistance||1/0;let a=s.attenuationColor||[1,1,1];return i.attenuationColor=new _e().setRGB(a[0],a[1],a[2],jn),Promise.all(o)}},TD=class{constructor(e){this.parser=e,this.name=vi.KHR_MATERIALS_IOR}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Gr}extendMaterialParams(e,i){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return i.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}},CD=class{constructor(e){this.parser=e,this.name=vi.KHR_MATERIALS_SPECULAR}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Gr}extendMaterialParams(e,i){let t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];i.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(t.assignTexture(i,"specularIntensityMap",s.specularTexture));let a=s.specularColorFactor||[1,1,1];return i.specularColor=new _e().setRGB(a[0],a[1],a[2],jn),s.specularColorTexture!==void 0&&o.push(t.assignTexture(i,"specularColorMap",s.specularColorTexture,Pn)),Promise.all(o)}},ED=class{constructor(e){this.parser=e,this.name=vi.EXT_MATERIALS_BUMP}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Gr}extendMaterialParams(e,i){let t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return i.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(t.assignTexture(i,"bumpMap",s.bumpTexture)),Promise.all(o)}},DD=class{constructor(e){this.parser=e,this.name=vi.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Gr}extendMaterialParams(e,i){let t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(i.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(i.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(t.assignTexture(i,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}},AD=class{constructor(e){this.parser=e,this.name=vi.KHR_TEXTURE_BASISU}loadTexture(e){let i=this.parser,t=i.json,r=t.textures[e];if(!r.extensions||!r.extensions[this.name])return null;let o=r.extensions[this.name],s=i.options.ktx2Loader;if(!s){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return i.loadTextureImage(e,o.source,s)}},ID=class{constructor(e){this.parser=e,this.name=vi.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let i=this.name,t=this.parser,r=t.json,o=r.textures[e];if(!o.extensions||!o.extensions[i])return null;let s=o.extensions[i],a=r.images[s.source],c=t.textureLoader;if(a.uri){let l=t.options.manager.getHandler(a.uri);l!==null&&(c=l)}return this.detectSupport().then(function(l){if(l)return t.loadTextureImage(e,s.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(i)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return t.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let i=new Image;i.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",i.onload=i.onerror=function(){e(i.height===1)}})),this.isSupported}},PD=class{constructor(e){this.parser=e,this.name=vi.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){let i=this.name,t=this.parser,r=t.json,o=r.textures[e];if(!o.extensions||!o.extensions[i])return null;let s=o.extensions[i],a=r.images[s.source],c=t.textureLoader;if(a.uri){let l=t.options.manager.getHandler(a.uri);l!==null&&(c=l)}return this.detectSupport().then(function(l){if(l)return t.loadTextureImage(e,s.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(i)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return t.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let i=new Image;i.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",i.onload=i.onerror=function(){e(i.height===1)}})),this.isSupported}},kD=class{constructor(e){this.name=vi.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let i=this.parser.json,t=i.bufferViews[e];if(t.extensions&&t.extensions[this.name]){let r=t.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){let c=r.byteOffset||0,l=r.byteLength||0,d=r.count,u=r.byteStride,h=new Uint8Array(a,c,l);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(d,u,h,r.mode,r.filter).then(function(f){return f.buffer}):s.ready.then(function(){let f=new ArrayBuffer(d*u);return s.decodeGltfBuffer(new Uint8Array(f),d,u,h,r.mode,r.filter),f})})}else return null}},FD=class{constructor(e){this.name=vi.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let i=this.parser.json,t=i.nodes[e];if(!t.extensions||!t.extensions[this.name]||t.mesh===void 0)return null;let r=i.meshes[t.mesh];for(let l of r.primitives)if(l.mode!==$o.TRIANGLES&&l.mode!==$o.TRIANGLE_STRIP&&l.mode!==$o.TRIANGLE_FAN&&l.mode!==void 0)return null;let s=t.extensions[this.name].attributes,a=[],c={};for(let l in s)a.push(this.parser.getDependency("accessor",s[l]).then(d=>(c[l]=d,c[l])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(l=>{let d=l.pop(),u=d.isGroup?d.children:[d],h=l[0].count,f=[];for(let p of u){let b=new je,m=new M,g=new Kt,v=new M(1,1,1),_=new sl(p.geometry,p.material,h);for(let y=0;y<h;y++)c.TRANSLATION&&m.fromBufferAttribute(c.TRANSLATION,y),c.ROTATION&&g.fromBufferAttribute(c.ROTATION,y),c.SCALE&&v.fromBufferAttribute(c.SCALE,y),_.setMatrixAt(y,b.compose(m,g,v));for(let y in c)if(y==="_COLOR_0"){let C=c[y];_.instanceColor=new fs(C.array,C.itemSize,C.normalized)}else y!=="TRANSLATION"&&y!=="ROTATION"&&y!=="SCALE"&&p.geometry.setAttribute(y,c[y]);Rt.prototype.copy.call(_,p),this.parser.assignFinalMaterial(_),f.push(_)}return d.isGroup?(d.clear(),d.add(...f),d):f[0]}))}},F3="glTF",ag=12,A3={JSON:1313821514,BIN:5130562},jD=class{constructor(e){this.name=vi.KHR_BINARY_GLTF,this.content=null,this.body=null;let i=new DataView(e,0,ag),t=new TextDecoder;if(this.header={magic:t.decode(new Uint8Array(e.slice(0,4))),version:i.getUint32(4,!0),length:i.getUint32(8,!0)},this.header.magic!==F3)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-ag,o=new DataView(e,ag),s=0;for(;s<r;){let a=o.getUint32(s,!0);s+=4;let c=o.getUint32(s,!0);if(s+=4,c===A3.JSON){let l=new Uint8Array(e,ag+s,a);this.content=t.decode(l)}else if(c===A3.BIN){let l=ag+s;this.body=e.slice(l,l+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},OD=class{constructor(e,i){if(!i)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=vi.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=i,this.dracoLoader.preload()}decodePrimitive(e,i){let t=this.json,r=this.dracoLoader,o=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},c={},l={};for(let d in s){let u=UD[d]||d.toLowerCase();a[u]=s[d]}for(let d in e.attributes){let u=UD[d]||d.toLowerCase();if(s[d]!==void 0){let h=t.accessors[e.attributes[d]],f=pf[h.componentType];l[u]=f.name,c[u]=h.normalized===!0}}return i.getDependency("bufferView",o).then(function(d){return new Promise(function(u,h){r.decodeDracoFile(d,function(f){for(let p in f.attributes){let b=f.attributes[p],m=c[p];m!==void 0&&(b.normalized=m)}u(f)},a,l,jn,h)})})}},ND=class{constructor(){this.name=vi.KHR_TEXTURE_TRANSFORM}extendTexture(e,i){return(i.texCoord===void 0||i.texCoord===e.channel)&&i.offset===void 0&&i.rotation===void 0&&i.scale===void 0||(e=e.clone(),i.texCoord!==void 0&&(e.channel=i.texCoord),i.offset!==void 0&&e.offset.fromArray(i.offset),i.rotation!==void 0&&(e.rotation=i.rotation),i.scale!==void 0&&e.repeat.fromArray(i.scale),e.needsUpdate=!0),e}},LD=class{constructor(){this.name=vi.KHR_MESH_QUANTIZATION}},$y=class extends sc{constructor(e,i,t,r){super(e,i,t,r)}copySampleValue_(e){let i=this.resultBuffer,t=this.sampleValues,r=this.valueSize,o=e*r*3+r;for(let s=0;s!==r;s++)i[s]=t[o+s];return i}interpolate_(e,i,t,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=a*2,l=a*3,d=r-i,u=(t-i)/d,h=u*u,f=h*u,p=e*l,b=p-l,m=-2*f+3*h,g=f-h,v=1-m,_=g-h+u;for(let y=0;y!==a;y++){let C=s[b+y+a],R=s[b+y+c]*d,w=s[p+y+a],A=s[p+y]*d;o[y]=v*C+_*R+m*w+g*A}return o}},tee=new Kt,BD=class extends $y{interpolate_(e,i,t,r){let o=super.interpolate_(e,i,t,r);return tee.fromArray(o).normalize().toArray(o),o}},$o={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},pf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},I3={9728:li,9729:bn,9984:eg,9985:Md,9986:il,9987:wo},P3={33071:to,33648:Dd,10497:Go},mD={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},UD={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},pl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},iee={CUBICSPLINE:void 0,LINEAR:rl,STEP:Id},pD={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function nee(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Er({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:us})),n.DefaultMaterial}function Xd(n,e,i){for(let t in i.extensions)n[t]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[t]=i.extensions[t])}function gl(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function ree(n,e,i){let t=!1,r=!1,o=!1;for(let l=0,d=e.length;l<d;l++){let u=e[l];if(u.POSITION!==void 0&&(t=!0),u.NORMAL!==void 0&&(r=!0),u.COLOR_0!==void 0&&(o=!0),t&&r&&o)break}if(!t&&!r&&!o)return Promise.resolve(n);let s=[],a=[],c=[];for(let l=0,d=e.length;l<d;l++){let u=e[l];if(t){let h=u.POSITION!==void 0?i.getDependency("accessor",u.POSITION):n.attributes.position;s.push(h)}if(r){let h=u.NORMAL!==void 0?i.getDependency("accessor",u.NORMAL):n.attributes.normal;a.push(h)}if(o){let h=u.COLOR_0!==void 0?i.getDependency("accessor",u.COLOR_0):n.attributes.color;c.push(h)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(c)]).then(function(l){let d=l[0],u=l[1],h=l[2];return t&&(n.morphAttributes.position=d),r&&(n.morphAttributes.normal=u),o&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}function oee(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let i=0,t=e.weights.length;i<t;i++)n.morphTargetInfluences[i]=e.weights[i];if(e.extras&&Array.isArray(e.extras.targetNames)){let i=e.extras.targetNames;if(n.morphTargetInfluences.length===i.length){n.morphTargetDictionary={};for(let t=0,r=i.length;t<r;t++)n.morphTargetDictionary[i[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function see(n){let e,i=n.extensions&&n.extensions[vi.KHR_DRACO_MESH_COMPRESSION];if(i?e="draco:"+i.bufferView+":"+i.indices+":"+gD(i.attributes):e=n.indices+":"+gD(n.attributes)+":"+n.mode,n.targets!==void 0)for(let t=0,r=n.targets.length;t<r;t++)e+=":"+gD(n.targets[t]);return e}function gD(n){let e="",i=Object.keys(n).sort();for(let t=0,r=i.length;t<r;t++)e+=i[t]+":"+n[i[t]]+";";return e}function VD(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function aee(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}var cee=new je,zD=class{constructor(e={},i={}){this.json=e,this.extensions={},this.plugins={},this.options=i,this.cache=new eee,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let t=!1,r=!1,o=-1;typeof navigator<"u"&&(t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,o=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||t||r&&o<98?this.textureLoader=new qp(this.options.manager):this.textureLoader=new Yp(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Kn(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,i){let t=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([t.getDependencies("scene"),t.getDependencies("animation"),t.getDependencies("camera")])}).then(function(s){let a={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:t,userData:{}};return Xd(o,a,r),gl(a,r),Promise.all(t._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){for(let c of a.scenes)c.updateMatrixWorld();e(a)})}).catch(i)}_markDefs(){let e=this.json.nodes||[],i=this.json.skins||[],t=this.json.meshes||[];for(let r=0,o=i.length;r<o;r++){let s=i[r].joints;for(let a=0,c=s.length;a<c;a++)e[s[a]].isBone=!0}for(let r=0,o=e.length;r<o;r++){let s=e[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(t[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,i){i!==void 0&&(e.refs[i]===void 0&&(e.refs[i]=e.uses[i]=0),e.refs[i]++)}_getNodeRef(e,i,t){if(e.refs[i]<=1)return t;let r=t.clone(),o=(s,a)=>{let c=this.associations.get(s);c!=null&&this.associations.set(a,c);for(let[l,d]of s.children.entries())o(d,a.children[l])};return o(t,r),r.name+="_instance_"+e.uses[i]++,r}_invokeOne(e){let i=Object.values(this.plugins);i.push(this);for(let t=0;t<i.length;t++){let r=e(i[t]);if(r)return r}return null}_invokeAll(e){let i=Object.values(this.plugins);i.unshift(this);let t=[];for(let r=0;r<i.length;r++){let o=e(i[r]);o&&t.push(o)}return t}getDependency(e,i){let t=e+":"+i,r=this.cache.get(t);if(!r){switch(e){case"scene":r=this.loadScene(i);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(i)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(i)});break;case"accessor":r=this.loadAccessor(i);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(i)});break;case"buffer":r=this.loadBuffer(i);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(i)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(i)});break;case"skin":r=this.loadSkin(i);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(i)});break;case"camera":r=this.loadCamera(i);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,i)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(t,r)}return r}getDependencies(e){let i=this.cache.get(e);if(!i){let t=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];i=Promise.all(r.map(function(o,s){return t.getDependency(e,s)})),this.cache.add(e,i)}return i}loadBuffer(e){let i=this.json.buffers[e],t=this.fileLoader;if(i.type&&i.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+i.type+" buffer type is not supported.");if(i.uri===void 0&&e===0)return Promise.resolve(this.extensions[vi.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(o,s){t.load(gs.resolveURL(i.uri,r.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+i.uri+'".'))})})}loadBufferView(e){let i=this.json.bufferViews[e];return this.getDependency("buffer",i.buffer).then(function(t){let r=i.byteLength||0,o=i.byteOffset||0;return t.slice(o,o+r)})}loadAccessor(e){let i=this,t=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){let s=mD[r.type],a=pf[r.componentType],c=r.normalized===!0,l=new a(r.count*s);return Promise.resolve(new di(l,s,c))}let o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(s){let a=s[0],c=mD[r.type],l=pf[r.componentType],d=l.BYTES_PER_ELEMENT,u=d*c,h=r.byteOffset||0,f=r.bufferView!==void 0?t.bufferViews[r.bufferView].byteStride:void 0,p=r.normalized===!0,b,m;if(f&&f!==u){let g=Math.floor(h/f),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count,_=i.cache.get(v);_||(b=new l(a,g*f,r.count*f/d),_=new rc(b,f/d),i.cache.add(v,_)),m=new ta(_,c,h%f/d,p)}else a===null?b=new l(r.count*c):b=new l(a,h,r.count*c),m=new di(b,c,p);if(r.sparse!==void 0){let g=mD.SCALAR,v=pf[r.sparse.indices.componentType],_=r.sparse.indices.byteOffset||0,y=r.sparse.values.byteOffset||0,C=new v(s[1],_,r.sparse.count*g),R=new l(s[2],y,r.sparse.count*c);a!==null&&(m=new di(m.array.slice(),m.itemSize,m.normalized));for(let w=0,A=C.length;w<A;w++){let S=C[w];if(m.setX(S,R[w*c]),c>=2&&m.setY(S,R[w*c+1]),c>=3&&m.setZ(S,R[w*c+2]),c>=4&&m.setW(S,R[w*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){let i=this.json,t=this.options,o=i.textures[e].source,s=i.images[o],a=this.textureLoader;if(s.uri){let c=t.manager.getHandler(s.uri);c!==null&&(a=c)}return this.loadTextureImage(e,o,a)}loadTextureImage(e,i,t){let r=this,o=this.json,s=o.textures[e],a=o.images[i],c=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[c])return this.textureCache[c];let l=this.loadImageSource(i,t).then(function(d){d.flipY=!1,d.name=s.name||a.name||"",d.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(d.name=a.uri);let h=(o.samplers||{})[s.sampler]||{};return d.magFilter=I3[h.magFilter]||bn,d.minFilter=I3[h.minFilter]||wo,d.wrapS=P3[h.wrapS]||Go,d.wrapT=P3[h.wrapT]||Go,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,i){let t=this,r=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());let s=r.images[e],a=self.URL||self.webkitURL,c=s.uri||"",l=!1;if(s.bufferView!==void 0)c=t.getDependency("bufferView",s.bufferView).then(function(u){l=!0;let h=new Blob([u],{type:s.mimeType});return c=a.createObjectURL(h),c});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let d=Promise.resolve(c).then(function(u){return new Promise(function(h,f){let p=h;i.isImageBitmapLoader===!0&&(p=function(b){let m=new yn(b);m.needsUpdate=!0,h(m)}),i.load(gs.resolveURL(u,o.path),p,void 0,f)})}).then(function(u){return l===!0&&a.revokeObjectURL(c),u.userData.mimeType=s.mimeType||aee(s.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),u});return this.sourceCache[e]=d,d}assignTexture(e,i,t,r){let o=this;return this.getDependency("texture",t.index).then(function(s){if(!s)return null;if(t.texCoord!==void 0&&t.texCoord>0&&(s=s.clone(),s.channel=t.texCoord),o.extensions[vi.KHR_TEXTURE_TRANSFORM]){let a=t.extensions!==void 0?t.extensions[vi.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let c=o.associations.get(s);s=o.extensions[vi.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,c)}}return r!==void 0&&(s.colorSpace=r),e[i]=s,s})}assignFinalMaterial(e){let i=e.geometry,t=e.material,r=i.attributes.tangent===void 0,o=i.attributes.color!==void 0,s=i.attributes.normal===void 0;if(e.isPoints){let a="PointsMaterial:"+t.uuid,c=this.cache.get(a);c||(c=new Od,dn.prototype.copy.call(c,t),c.color.copy(t.color),c.map=t.map,c.sizeAttenuation=!1,this.cache.add(a,c)),t=c}else if(e.isLine){let a="LineBasicMaterial:"+t.uuid,c=this.cache.get(a);c||(c=new rn,dn.prototype.copy.call(c,t),c.color.copy(t.color),c.map=t.map,this.cache.add(a,c)),t=c}if(r||o||s){let a="ClonedMaterial:"+t.uuid+":";r&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=t.clone(),o&&(c.vertexColors=!0),s&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(t))),t=c}e.material=t}getMaterialType(){return Er}loadMaterial(e){let i=this,t=this.json,r=this.extensions,o=t.materials[e],s,a={},c=o.extensions||{},l=[];if(c[vi.KHR_MATERIALS_UNLIT]){let u=r[vi.KHR_MATERIALS_UNLIT];s=u.getMaterialType(),l.push(u.extendParams(a,o,i))}else{let u=o.pbrMetallicRoughness||{};if(a.color=new _e(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){let h=u.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],jn),a.opacity=h[3]}u.baseColorTexture!==void 0&&l.push(i.assignTexture(a,"map",u.baseColorTexture,Pn)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(l.push(i.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),l.push(i.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),s=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}o.doubleSided===!0&&(a.side=Yn);let d=o.alphaMode||pD.OPAQUE;if(d===pD.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,d===pD.MASK&&(a.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==Ji&&(l.push(i.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new z(1,1),o.normalTexture.scale!==void 0)){let u=o.normalTexture.scale;a.normalScale.set(u,u)}if(o.occlusionTexture!==void 0&&s!==Ji&&(l.push(i.assignTexture(a,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==Ji){let u=o.emissiveFactor;a.emissive=new _e().setRGB(u[0],u[1],u[2],jn)}return o.emissiveTexture!==void 0&&s!==Ji&&l.push(i.assignTexture(a,"emissiveMap",o.emissiveTexture,Pn)),Promise.all(l).then(function(){let u=new s(a);return o.name&&(u.name=o.name),gl(u,o),i.associations.set(u,{materials:e}),o.extensions&&Xd(r,u,o),u})}createUniqueName(e){let i=Gi.sanitizeNodeName(e||"");return i in this.nodeNamesUsed?i+"_"+ ++this.nodeNamesUsed[i]:(this.nodeNamesUsed[i]=0,i)}loadGeometries(e){let i=this,t=this.extensions,r=this.primitiveCache;function o(a){return t[vi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,i).then(function(c){return k3(c,a,i)})}let s=[];for(let a=0,c=e.length;a<c;a++){let l=e[a],d=see(l),u=r[d];if(u)s.push(u.promise);else{let h;l.extensions&&l.extensions[vi.KHR_DRACO_MESH_COMPRESSION]?h=o(l):h=k3(new ft,l,i),r[d]={primitive:l,promise:h},s.push(h)}}return Promise.all(s)}loadMesh(e){let i=this,t=this.json,r=this.extensions,o=t.meshes[e],s=o.primitives,a=[];for(let c=0,l=s.length;c<l;c++){let d=s[c].material===void 0?nee(this.cache):this.getDependency("material",s[c].material);a.push(d)}return a.push(i.loadGeometries(s)),Promise.all(a).then(function(c){let l=c.slice(0,c.length-1),d=c[c.length-1],u=[];for(let f=0,p=d.length;f<p;f++){let b=d[f],m=s[f],g,v=l[f];if(m.mode===$o.TRIANGLES||m.mode===$o.TRIANGLE_STRIP||m.mode===$o.TRIANGLE_FAN||m.mode===void 0)g=o.isSkinnedMesh===!0?new $h(b,v):new Le(b,v),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),m.mode===$o.TRIANGLE_STRIP?g.geometry=fD(g.geometry,ig):m.mode===$o.TRIANGLE_FAN&&(g.geometry=fD(g.geometry,sf));else if(m.mode===$o.LINES)g=new Cr(b,v);else if(m.mode===$o.LINE_STRIP)g=new Yi(b,v);else if(m.mode===$o.LINE_LOOP)g=new Xh(b,v);else if(m.mode===$o.POINTS)g=new Yh(b,v);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(g.geometry.morphAttributes).length>0&&oee(g,o),g.name=i.createUniqueName(o.name||"mesh_"+e),gl(g,o),m.extensions&&Xd(r,g,m),i.assignFinalMaterial(g),u.push(g)}for(let f=0,p=u.length;f<p;f++)i.associations.set(u[f],{meshes:e,primitives:f});if(u.length===1)return o.extensions&&Xd(r,u[0],o),u[0];let h=new Tr;o.extensions&&Xd(r,h,o),i.associations.set(h,{meshes:e});for(let f=0,p=u.length;f<p;f++)h.add(u[f]);return h})}loadCamera(e){let i,t=this.json.cameras[e],r=t[t.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return t.type==="perspective"?i=new Ki(tt.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):t.type==="orthographic"&&(i=new Ro(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),t.name&&(i.name=this.createUniqueName(t.name)),gl(i,t),Promise.resolve(i)}loadSkin(e){let i=this.json.skins[e],t=[];for(let r=0,o=i.joints.length;r<o;r++)t.push(this._loadNodeShallow(i.joints[r]));return i.inverseBindMatrices!==void 0?t.push(this.getDependency("accessor",i.inverseBindMatrices)):t.push(null),Promise.all(t).then(function(r){let o=r.pop(),s=r,a=[],c=[];for(let l=0,d=s.length;l<d;l++){let u=s[l];if(u){a.push(u);let h=new je;o!==null&&h.fromArray(o.array,l*16),c.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',i.joints[l])}return new qh(a,c)})}loadAnimation(e){let i=this.json,t=this,r=i.animations[e],o=r.name?r.name:"animation_"+e,s=[],a=[],c=[],l=[],d=[];for(let u=0,h=r.channels.length;u<h;u++){let f=r.channels[u],p=r.samplers[f.sampler],b=f.target,m=b.node,g=r.parameters!==void 0?r.parameters[p.input]:p.input,v=r.parameters!==void 0?r.parameters[p.output]:p.output;b.node!==void 0&&(s.push(this.getDependency("node",m)),a.push(this.getDependency("accessor",g)),c.push(this.getDependency("accessor",v)),l.push(p),d.push(b))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(c),Promise.all(l),Promise.all(d)]).then(function(u){let h=u[0],f=u[1],p=u[2],b=u[3],m=u[4],g=[];for(let v=0,_=h.length;v<_;v++){let y=h[v],C=f[v],R=p[v],w=b[v],A=m[v];if(y===void 0)continue;y.updateMatrix&&y.updateMatrix();let S=t._createAnimationTracks(y,C,R,w,A);if(S)for(let x=0;x<S.length;x++)g.push(S[x])}return new lc(o,void 0,g)})}createNodeMesh(e){let i=this.json,t=this,r=i.nodes[e];return r.mesh===void 0?null:t.getDependency("mesh",r.mesh).then(function(o){let s=t._getNodeRef(t.meshCache,r.mesh,o);return r.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let c=0,l=r.weights.length;c<l;c++)a.morphTargetInfluences[c]=r.weights[c]}),s})}loadNode(e){let i=this.json,t=this,r=i.nodes[e],o=t._loadNodeShallow(e),s=[],a=r.children||[];for(let l=0,d=a.length;l<d;l++)s.push(t.getDependency("node",a[l]));let c=r.skin===void 0?Promise.resolve(null):t.getDependency("skin",r.skin);return Promise.all([o,Promise.all(s),c]).then(function(l){let d=l[0],u=l[1],h=l[2];h!==null&&d.traverse(function(f){f.isSkinnedMesh&&f.bind(h,cee)});for(let f=0,p=u.length;f<p;f++)d.add(u[f]);return d})}_loadNodeShallow(e){let i=this.json,t=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];let o=i.nodes[e],s=o.name?r.createUniqueName(o.name):"",a=[],c=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&a.push(c),o.camera!==void 0&&a.push(r.getDependency("camera",o.camera).then(function(l){return r._getNodeRef(r.cameraCache,o.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),this.nodeCache[e]=Promise.all(a).then(function(l){let d;if(o.isBone===!0?d=new jd:l.length>1?d=new Tr:l.length===1?d=l[0]:d=new Rt,d!==l[0])for(let u=0,h=l.length;u<h;u++)d.add(l[u]);if(o.name&&(d.userData.name=o.name,d.name=s),gl(d,o),o.extensions&&Xd(t,d,o),o.matrix!==void 0){let u=new je;u.fromArray(o.matrix),d.applyMatrix4(u)}else o.translation!==void 0&&d.position.fromArray(o.translation),o.rotation!==void 0&&d.quaternion.fromArray(o.rotation),o.scale!==void 0&&d.scale.fromArray(o.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){let i=this.extensions,t=this.json.scenes[e],r=this,o=new Tr;t.name&&(o.name=r.createUniqueName(t.name)),gl(o,t),t.extensions&&Xd(i,o,t);let s=t.nodes||[],a=[];for(let c=0,l=s.length;c<l;c++)a.push(r.getDependency("node",s[c]));return Promise.all(a).then(function(c){for(let d=0,u=c.length;d<u;d++)o.add(c[d]);let l=d=>{let u=new Map;for(let[h,f]of r.associations)(h instanceof dn||h instanceof yn)&&u.set(h,f);return d.traverse(h=>{let f=r.associations.get(h);f!=null&&u.set(h,f)}),u};return r.associations=l(o),o})}_createAnimationTracks(e,i,t,r,o){let s=[],a=e.name?e.name:e.uuid,c=[];pl[o.path]===pl.weights?e.traverse(function(h){h.morphTargetInfluences&&c.push(h.name?h.name:h.uuid)}):c.push(a);let l;switch(pl[o.path]){case pl.weights:l=sa;break;case pl.rotation:l=ps;break;case pl.position:case pl.scale:l=aa;break;default:switch(t.itemSize){case 1:l=sa;break;case 2:case 3:default:l=aa;break}break}let d=r.interpolation!==void 0?iee[r.interpolation]:rl,u=this._getArrayFromAccessor(t);for(let h=0,f=c.length;h<f;h++){let p=new l(c[h]+"."+pl[o.path],i.array,u,d);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(p),s.push(p)}return s}_getArrayFromAccessor(e){let i=e.array;if(e.normalized){let t=VD(i.constructor),r=new Float32Array(i.length);for(let o=0,s=i.length;o<s;o++)r[o]=i[o]*t;i=r}return i}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(t){let r=this instanceof ps?BD:$y;return new r(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function lee(n,e,i){let t=e.attributes,r=new vn;if(t.POSITION!==void 0){let a=i.json.accessors[t.POSITION],c=a.min,l=a.max;if(c!==void 0&&l!==void 0){if(r.set(new M(c[0],c[1],c[2]),new M(l[0],l[1],l[2])),a.normalized){let d=VD(pf[a.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let o=e.targets;if(o!==void 0){let a=new M,c=new M;for(let l=0,d=o.length;l<d;l++){let u=o[l];if(u.POSITION!==void 0){let h=i.json.accessors[u.POSITION],f=h.min,p=h.max;if(f!==void 0&&p!==void 0){if(c.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),c.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),c.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),h.normalized){let b=VD(pf[h.componentType]);c.multiplyScalar(b)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;let s=new Tn;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=s}function k3(n,e,i){let t=e.attributes,r=[];function o(s,a){return i.getDependency("accessor",s).then(function(c){n.setAttribute(a,c)})}for(let s in t){let a=UD[s]||s.toLowerCase();a in n.attributes||r.push(o(t[s],a))}if(e.indices!==void 0&&!n.index){let s=i.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(s)}return Di.workingColorSpace!==jn&&"COLOR_0"in t&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Di.workingColorSpace}" not supported.`),gl(n,e),lee(n,e,i),Promise.all(r).then(function(){return e.targets!==void 0?ree(n,e.targets,i):n})}var gf=class{setCrossOrigin(e){this.crossOrigin=e}setWithCredentials(e){this.withCredentials=e}createLoaderInstance(){let e=new this.clazz;return this.crossOrigin&&e.setCrossOrigin(this.crossOrigin),this.withCredentials!==void 0&&e.setWithCredentials(this.withCredentials),e}};var bf=(()=>{let e=class e extends gf{load(...t){return this.createLoaderInstance().loadAsync(...t)}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})();var _f=(()=>{let e=class e{set url(t){this._url=t,this.load()}get url(){return this._url}get onLoaded(){return this.onLoaded$||(this.onLoaded$=new et),this.onLoaded$}get onProgress(){return this.onProgress$||(this.onProgress$=new et),this.onProgress$}constructor(t,r){this.host=t,this.zone=r,this.initialized=!1,this.animationLoop=re(fa),this.proxy=Uy(),t.objRef=this.proxy}ngOnInit(){this.initialized=!0,this.load()}load(){return yi(this,null,function*(){if(!this.initialized)return;if(this._url===void 0)throw new Error("missing url");if(!this.proxy)return;let t=this._url,r=Gd(this.onProgress$)?s=>{this.zone.run(()=>{this.onProgress$?.next(s)})}:void 0,o=yield this.zone.runOutsideAngular(()=>this.service.load(t,r));this.animationLoop.requestAnimationFrame(),this.proxy.objRef=this.getRefFromResponse(o),this.host.objRef=this.proxy,this.onLoaded$&&o!=null&&this.zone.run(()=>this.onLoaded$?.next(o))})}};e.\u0275fac=function(r){qu()},e.\u0275dir=He({type:e,inputs:{url:"url"},outputs:{onLoaded:"onLoaded",onProgress:"onProgress"}});let n=e;return n})();var HD=new WeakMap,qy=class extends Jn{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,i,t,r){let o=new Kn(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,s=>{this.parse(s,i,r)},t,r)}parse(e,i,t=()=>{}){this.decodeDracoFile(e,i,null,null,Pn).catch(t)}decodeDracoFile(e,i,t,r,o=jn,s=()=>{}){let a={attributeIDs:t||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!t,vertexColorSpace:o};return this.decodeGeometry(e,a).then(i).catch(s)}decodeGeometry(e,i){let t=JSON.stringify(i);if(HD.has(e)){let c=HD.get(e);if(c.key===t)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r,o=this.workerNextTaskID++,s=e.byteLength,a=this._getWorker(o,s).then(c=>(r=c,new Promise((l,d)=>{r._callbacks[o]={resolve:l,reject:d},r.postMessage({type:"decode",id:o,taskConfig:i,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return a.catch(()=>!0).then(()=>{r&&o&&this._releaseTask(r,o)}),HD.set(e,{key:t,promise:a}),a}_createGeometry(e){let i=new ft;e.index&&i.setIndex(new di(e.index.array,1));for(let t=0;t<e.attributes.length;t++){let r=e.attributes[t],o=r.name,s=r.array,a=r.itemSize,c=new di(s,a);o==="color"&&(this._assignVertexColorSpace(c,r.vertexColorSpace),c.normalized=!(s instanceof Float32Array)),i.setAttribute(o,c)}return i}_assignVertexColorSpace(e,i){if(i!==Pn)return;let t=new _e;for(let r=0,o=e.count;r<o;r++)t.fromBufferAttribute(e,r).convertSRGBToLinear(),e.setXYZ(r,t.r,t.g,t.b)}_loadLibrary(e,i){let t=new Kn(this.manager);return t.setPath(this.decoderPath),t.setResponseType(i),t.setWithCredentials(this.withCredentials),new Promise((r,o)=>{t.load(e,r,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",i=[];return e?i.push(this._loadLibrary("draco_decoder.js","text")):(i.push(this._loadLibrary("draco_wasm_wrapper.js","text")),i.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(i).then(t=>{let r=t[0];e||(this.decoderConfig.wasmBinary=t[1]);let o=dee.toString(),s=["/* draco decoder */",r,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(e,i){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(o){let s=o.data;switch(s.type){case"decode":r._callbacks[s.id].resolve(s);break;case"error":r._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,o){return r._taskLoad>o._taskLoad?-1:1});let t=this.workerPool[this.workerPool.length-1];return t._taskCosts[e]=i,t._taskLoad+=i,t})}_releaseTask(e,i){e._taskLoad-=e._taskCosts[i],delete e._callbacks[i],delete e._taskCosts[i]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function dee(){let n,e;onmessage=function(s){let a=s.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(d){n.onModuleLoaded=function(u){d({draco:u})},DracoDecoderModule(n)});break;case"decode":let c=a.buffer,l=a.taskConfig;e.then(d=>{let u=d.draco,h=new u.Decoder;try{let f=i(u,h,new Int8Array(c),l),p=f.attributes.map(b=>b.array.buffer);f.index&&p.push(f.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:f},p)}catch(f){console.error(f),self.postMessage({type:"error",id:a.id,error:f.message})}finally{u.destroy(h)}});break}};function i(s,a,c,l){let d=l.attributeIDs,u=l.attributeTypes,h,f,p=a.GetEncodedGeometryType(c);if(p===s.TRIANGULAR_MESH)h=new s.Mesh,f=a.DecodeArrayToMesh(c,c.byteLength,h);else if(p===s.POINT_CLOUD)h=new s.PointCloud,f=a.DecodeArrayToPointCloud(c,c.byteLength,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());let b={index:null,attributes:[]};for(let m in d){let g=self[u[m]],v,_;if(l.useUniqueIDs)_=d[m],v=a.GetAttributeByUniqueId(h,_);else{if(_=a.GetAttributeId(h,s[d[m]]),_===-1)continue;v=a.GetAttribute(h,_)}let y=r(s,a,h,m,g,v);m==="color"&&(y.vertexColorSpace=l.vertexColorSpace),b.attributes.push(y)}return p===s.TRIANGULAR_MESH&&(b.index=t(s,a,h)),s.destroy(h),b}function t(s,a,c){let d=c.num_faces()*3,u=d*4,h=s._malloc(u);a.GetTrianglesUInt32Array(c,u,h);let f=new Uint32Array(s.HEAPF32.buffer,h,d).slice();return s._free(h),{array:f,itemSize:1}}function r(s,a,c,l,d,u){let h=u.num_components(),p=c.num_points()*h,b=p*d.BYTES_PER_ELEMENT,m=o(s,d),g=s._malloc(b);a.GetAttributeDataArrayForAllPoints(c,u,m,b,g);let v=new d(s.HEAPF32.buffer,g,p).slice();return s._free(g),{name:l,array:v,itemSize:h}}function o(s,a){switch(a){case Float32Array:return s.DT_FLOAT32;case Int8Array:return s.DT_INT8;case Int16Array:return s.DT_INT16;case Int32Array:return s.DT_INT32;case Uint8Array:return s.DT_UINT8;case Uint16Array:return s.DT_UINT16;case Uint32Array:return s.DT_UINT32}}}var qr=class extends gf{load(...e){return this.createLoaderInstance().load(...e)}};var bl=(()=>{let e=class e extends qr{constructor(){super(...arguments),this.clazz=qy,this.decoderPath="",this.reuseInstance=!0}setDecoderPath(t){this.decoderPath=t}setDecoderConfig(t){this.decoderConfig=t}setWorkerLimit(t){this.workerLimit=t}setReuseInstance(t){this.reuseInstance=t}createLoaderInstance(){if(this.reuseInstance&&this.instance)return this.instance;let t=super.createLoaderInstance();return t.setDecoderPath(this.decoderPath),this.decoderConfig&&t.setDecoderConfig(this.decoderConfig),this.workerLimit&&t.setWorkerLimit(this.workerLimit),this.reuseInstance&&(this.instance=t),t}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var hee=(()=>{let e=class e extends bf{constructor(t){super(),this.dracoLoaderService=t,this.clazz=Wy}createLoaderInstance(){let t=super.createLoaderInstance();return t.setDRACOLoader(this.dracoLoaderService.createLoaderInstance()),t}};e.\u0275fac=function(r){return new(r||e)(le(bl))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var $n=(()=>{let e=class e extends _f{constructor(t,r,o){super(t,r),this.host=t,this.zone=r,this.service=o}getRefFromResponse(t){return t.scene}};e.\u0275fac=function(r){return new(r||e)(k(pe,1),k(Xe),k(hee))},e.\u0275dir=He({type:e,selectors:[["","loadGLTF",""]],features:[X]});let n=e;return n})();var _l=(()=>{let e=class e{constructor(t,r){this.engineService=t,this.animationLoopService=r}get beforeRender(){return this.engineService.beforeRender$}get onResize(){return this.engineService.resize$}set renderOnDemand(t){t?this.animationLoopService.stop():this.animationLoopService.start()}get renderOnDemand(){return!this.animationLoopService.isActive()}};e.\u0275fac=function(r){return new(r||e)(k(ao),k(fa))},e.\u0275dir=He({type:e,selectors:[["","beforeRender",""],["","onResize",""],["","renderOnDemand",""]],inputs:{renderOnDemand:"renderOnDemand"},outputs:{beforeRender:"beforeRender",onResize:"onResize"}});let n=e;return n})();var j3=(()=>{let e=class e{constructor(){this.assetPath=sn+"RobotExpressive.glb",this.states=["Idle","Walking","Running","Dance","Death","Sitting","Standing"],this.emotes=["Jump","Yes","No","Wave","Punch","ThumbsUp"],this.actions={}}onInit(t){this.animationMixer=new Qp(t.scene),t.scene.traverse(r=>{r.isMesh&&(r.castShadow=!0,r.receiveShadow=!0)});for(let r of t.animations){let o=this.animationMixer.clipAction(r);this.actions[r.name]=o,(this.emotes.indexOf(r.name)>=0||this.states.indexOf(r.name)>=4)&&(o.clampWhenFinished=!0,o.loop=Fy)}this.activeAction=this.actions.Walking,this.activeAction.play()}beforeRender(t){this.animationMixer&&this.animationMixer.update(t.delta)}fadeToAction(t,r){this.previousAction=this.activeAction,this.activeAction=this.actions[t],this.previousAction&&this.previousAction!==this.activeAction&&this.previousAction.fadeOut(r),this.activeAction.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(r).play()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-robot"]],decls:1,vars:2,consts:[["loadGLTF","",3,"onLoaded","beforeRender","url","castShadow"]],template:function(r,o){r&1&&(H(0,"th-mesh",0),Fe("onLoaded",function(a){return o.onInit(a)})("beforeRender",function(a){return o.beforeRender(a)}),ie()),r&2&&P("url",o.assetPath)("castShadow",!0)},dependencies:[Ri,$n,_l],encapsulation:2,changeDetection:0});let n=e;return n})();var Yy=(()=>{let e=class e{transform(t){return new Gh(...t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Oo({name:"fog",type:e,pure:!0});let n=e;return n})();var mee=["gridHelper"],pee=()=>["#e0e0e0"],gee=()=>["#e0e0e0",20,100],bee=()=>[45,2,.25,100],_ee=n=>[n,5,10],vee=()=>[0,2,0],yee=()=>["#ffffff","#444444"],xee=()=>[0,20,0],wee=()=>["#ffffff"],Mee=()=>[0,20,10],See=n=>[n,0,0],Ree=()=>[2e3,2e3],Tee=()=>({color:"#999999",depthWrite:!1}),Cee=()=>[200,40,"#000000","#000000"],N3=(()=>{let e=class e{constructor(){this.Math=Math}ngAfterViewInit(){let t=this.gridHelper?.objRef?.material;t&&(t.opacity=.2,t.transparent=!0)}onBeforeRender(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-animation-example"]],viewQuery:function(r,o){if(r&1&&Vt(mee,7),r&2){let s;nt(s=rt())&&(o.gridHelper=s.first)}},decls:12,vars:37,consts:[["gridHelper",""],[3,"onRender","thStats","shadow"],[3,"background","fog"],[3,"args","position","lookAt"],[3,"args","position","intensity"],[3,"args","position","castShadow","intensity"],[3,"rotation","receiveShadow"],[3,"args"],[3,"args","receiveShadow"]],template:function(r,o){if(r&1){let s=Gt();H(0,"th-canvas",1),Fe("onRender",function(){return ct(s),lt(o.onBeforeRender())}),H(1,"th-scene",2),ji(2,"fog"),he(3,"th-perspectiveCamera",3)(4,"th-hemisphereLight",4)(5,"th-directionalLight",5),H(6,"th-mesh",6),he(7,"th-planeGeometry",7)(8,"th-meshPhongMaterial",7),ie(),he(9,"th-gridHelper",8,0)(11,"app-robot"),ie()()}r&2&&(P("thStats",!0)("shadow",!0),j(),P("background",te(22,pee))("fog",zi(2,20,te(23,gee))),j(2),P("args",te(24,bee))("position",gt(25,_ee,-5))("lookAt",te(27,vee)),j(),P("args",te(28,yee))("position",te(29,xee))("intensity",3),j(),P("args",te(30,wee))("position",te(31,Mee))("castShadow",!0)("intensity",3),j(),P("rotation",gt(32,See,-.5*o.Math.PI))("receiveShadow",!0),j(),P("args",te(34,Ree)),j(),P("args",te(35,Tee)),j(),P("args",te(36,Cee))("receiveShadow",!0))},dependencies:[Wt,Ar,ar,cf,Ri,jt,so,Wo,Ct,En,j3,Yy],encapsulation:2,changeDetection:0});let n=e;return n})();var Eee=["*"],Ai=(()=>{let e=class e extends _s{getType(){return tf}get isAmbientLight(){return this._objRef?.isAmbientLight}get type(){return this._objRef?.type}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-ambientLight"]],features:[oe([{provide:pe,useExisting:ge(()=>e)}]),X],ngContentSelectors:Eee,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Dee=["*"],pa=(()=>{let e=class e extends on{getType(){return Ji}get isMeshBasicMaterial(){return this._objRef?.isMeshBasicMaterial}set type(t){this._objRef&&(this._objRef.type=t)}get type(){return this._objRef?.type}set color(t){this._objRef&&(this._objRef.color=ve(this._objRef.color,t))}get color(){return this._objRef?.color}set map(t){this._objRef&&(this._objRef.map=t)}get map(){return this._objRef?.map}set lightMap(t){this._objRef&&(this._objRef.lightMap=t)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(t){this._objRef&&(this._objRef.lightMapIntensity=t)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set aoMap(t){this._objRef&&(this._objRef.aoMap=t)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(t){this._objRef&&(this._objRef.aoMapIntensity=t)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set specularMap(t){this._objRef&&(this._objRef.specularMap=t)}get specularMap(){return this._objRef?.specularMap}set alphaMap(t){this._objRef&&(this._objRef.alphaMap=t)}get alphaMap(){return this._objRef?.alphaMap}set envMap(t){this._objRef&&(this._objRef.envMap=t)}get envMap(){return this._objRef?.envMap}set envMapRotation(t){this._objRef&&(this._objRef.envMapRotation=ve(this._objRef.envMapRotation,t))}get envMapRotation(){return this._objRef?.envMapRotation}set combine(t){this._objRef&&(this._objRef.combine=t)}get combine(){return this._objRef?.combine}set reflectivity(t){this._objRef&&(this._objRef.reflectivity=t)}get reflectivity(){return this._objRef?.reflectivity}set refractionRatio(t){this._objRef&&(this._objRef.refractionRatio=t)}get refractionRatio(){return this._objRef?.refractionRatio}set wireframe(t){this._objRef&&(this._objRef.wireframe=t)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(t){this._objRef&&(this._objRef.wireframeLinewidth=t)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(t){this._objRef&&(this._objRef.wireframeLinecap=t)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(t){this._objRef&&(this._objRef.wireframeLinejoin=t)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set fog(t){this._objRef&&(this._objRef.fog=t)}get fog(){return this._objRef?.fog}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-meshBasicMaterial"]],inputs:{type:"type",color:"color",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",specularMap:"specularMap",alphaMap:"alphaMap",envMap:"envMap",envMapRotation:"envMapRotation",combine:"combine",reflectivity:"reflectivity",refractionRatio:"refractionRatio",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",fog:"fog"},features:[oe([{provide:on,useExisting:ge(()=>e)}]),X],ngContentSelectors:Dee,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Aee=["*"],Yd=(()=>{let e=class e extends Jt{getType(){return Xi}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-boxGeometry"]],features:[oe([{provide:Jt,useExisting:ge(()=>e)}]),X],ngContentSelectors:Aee,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Iee=()=>({color:"purple"}),Pee=()=>[75,2,.1,1e3],kee=()=>[1,1,5],L3=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-basic-example"]],decls:7,vars:6,consts:[[3,"args"],[3,"args","position"]],template:function(r,o){r&1&&(H(0,"th-canvas")(1,"th-scene")(2,"th-mesh"),he(3,"th-boxGeometry")(4,"th-meshBasicMaterial",0),ie(),he(5,"th-ambientLight")(6,"th-perspectiveCamera",1),ie()()),r&2&&(j(4),P("args",te(3,Iee)),j(2),P("args",te(4,Pee))("position",te(5,kee)))},dependencies:[Wt,Ai,Ri,jt,pa,Yd,Ct],encapsulation:2,changeDetection:0});let n=e;return n})();var B3={type:"change"},$D={type:"start"},U3={type:"end"},Zy=new Js,V3=new sr,Fee=Math.cos(70*tt.DEG2RAD),vf=class extends kn{constructor(e,i){super(),this.object=e,this.domElement=i,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new M,this.cursor=new M,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Dr.ROTATE,MIDDLE:Dr.DOLLY,RIGHT:Dr.PAN},this.touches={ONE:bs.ROTATE,TWO:bs.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(T){T.addEventListener("keydown",Mt),this._domElementKeyEvents=T},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Mt),this._domElementKeyEvents=null},this.saveState=function(){t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=function(){t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(B3),t.update(),o=r.NONE},this.update=function(){let T=new M,W=new Kt().setFromUnitVectors(e.up,new M(0,1,0)),J=W.clone().invert(),Te=new M,Ue=new Kt,ii=new M,hi=2*Math.PI;return function(er=null){let Ci=t.object.position;T.copy(Ci).sub(t.target),T.applyQuaternion(W),a.setFromVector3(T),t.autoRotate&&o===r.NONE&&V(x(er)),t.enableDamping?(a.theta+=c.theta*t.dampingFactor,a.phi+=c.phi*t.dampingFactor):(a.theta+=c.theta,a.phi+=c.phi);let Ln=t.minAzimuthAngle,nn=t.maxAzimuthAngle;isFinite(Ln)&&isFinite(nn)&&(Ln<-Math.PI?Ln+=hi:Ln>Math.PI&&(Ln-=hi),nn<-Math.PI?nn+=hi:nn>Math.PI&&(nn-=hi),Ln<=nn?a.theta=Math.max(Ln,Math.min(nn,a.theta)):a.theta=a.theta>(Ln+nn)/2?Math.max(Ln,a.theta):Math.min(nn,a.theta)),a.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,a.phi)),a.makeSafe(),t.enableDamping===!0?t.target.addScaledVector(d,t.dampingFactor):t.target.add(d),t.target.sub(t.cursor),t.target.clampLength(t.minTargetRadius,t.maxTargetRadius),t.target.add(t.cursor);let Sc=!1;if(t.zoomToCursor&&R||t.object.isOrthographicCamera)a.radius=me(a.radius);else{let Po=a.radius;a.radius=me(a.radius*l),Sc=Po!=a.radius}if(T.setFromSpherical(a),T.applyQuaternion(J),Ci.copy(t.target).add(T),t.object.lookAt(t.target),t.enableDamping===!0?(c.theta*=1-t.dampingFactor,c.phi*=1-t.dampingFactor,d.multiplyScalar(1-t.dampingFactor)):(c.set(0,0,0),d.set(0,0,0)),t.zoomToCursor&&R){let Po=null;if(t.object.isPerspectiveCamera){let Rc=T.length();Po=me(Rc*l);let Ea=Rc-Po;t.object.position.addScaledVector(y,Ea),t.object.updateMatrixWorld(),Sc=!!Ea}else if(t.object.isOrthographicCamera){let Rc=new M(C.x,C.y,0);Rc.unproject(t.object);let Ea=t.object.zoom;t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/l)),t.object.updateProjectionMatrix(),Sc=Ea!==t.object.zoom;let zf=new M(C.x,C.y,0);zf.unproject(t.object),t.object.position.sub(zf).add(Rc),t.object.updateMatrixWorld(),Po=T.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),t.zoomToCursor=!1;Po!==null&&(this.screenSpacePanning?t.target.set(0,0,-1).transformDirection(t.object.matrix).multiplyScalar(Po).add(t.object.position):(Zy.origin.copy(t.object.position),Zy.direction.set(0,0,-1).transformDirection(t.object.matrix),Math.abs(t.object.up.dot(Zy.direction))<Fee?e.lookAt(t.target):(V3.setFromNormalAndCoplanarPoint(t.object.up,t.target),Zy.intersectPlane(V3,t.target))))}else if(t.object.isOrthographicCamera){let Po=t.object.zoom;t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/l)),Po!==t.object.zoom&&(t.object.updateProjectionMatrix(),Sc=!0)}return l=1,R=!1,Sc||Te.distanceToSquared(t.object.position)>s||8*(1-Ue.dot(t.object.quaternion))>s||ii.distanceToSquared(t.target)>s?(t.dispatchEvent(B3),Te.copy(t.object.position),Ue.copy(t.object.quaternion),ii.copy(t.target),!0):!1}}(),this.dispose=function(){t.domElement.removeEventListener("contextmenu",Ot),t.domElement.removeEventListener("pointerdown",I),t.domElement.removeEventListener("pointercancel",Q),t.domElement.removeEventListener("wheel",Re),t.domElement.removeEventListener("pointermove",E),t.domElement.removeEventListener("pointerup",Q),t.domElement.getRootNode().removeEventListener("keydown",ze,{capture:!0}),t._domElementKeyEvents!==null&&(t._domElementKeyEvents.removeEventListener("keydown",Mt),t._domElementKeyEvents=null)};let t=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},o=r.NONE,s=1e-6,a=new ll,c=new ll,l=1,d=new M,u=new z,h=new z,f=new z,p=new z,b=new z,m=new z,g=new z,v=new z,_=new z,y=new M,C=new z,R=!1,w=[],A={},S=!1;function x(T){return T!==null?2*Math.PI/60*t.autoRotateSpeed*T:2*Math.PI/60/60*t.autoRotateSpeed}function F(T){let W=Math.abs(T*.01);return Math.pow(.95,t.zoomSpeed*W)}function V(T){c.theta-=T}function O(T){c.phi-=T}let K=function(){let T=new M;return function(J,Te){T.setFromMatrixColumn(Te,0),T.multiplyScalar(-J),d.add(T)}}(),ne=function(){let T=new M;return function(J,Te){t.screenSpacePanning===!0?T.setFromMatrixColumn(Te,1):(T.setFromMatrixColumn(Te,0),T.crossVectors(t.object.up,T)),T.multiplyScalar(J),d.add(T)}}(),G=function(){let T=new M;return function(J,Te){let Ue=t.domElement;if(t.object.isPerspectiveCamera){let ii=t.object.position;T.copy(ii).sub(t.target);let hi=T.length();hi*=Math.tan(t.object.fov/2*Math.PI/180),K(2*J*hi/Ue.clientHeight,t.object.matrix),ne(2*Te*hi/Ue.clientHeight,t.object.matrix)}else t.object.isOrthographicCamera?(K(J*(t.object.right-t.object.left)/t.object.zoom/Ue.clientWidth,t.object.matrix),ne(Te*(t.object.top-t.object.bottom)/t.object.zoom/Ue.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}}();function $(T){t.object.isPerspectiveCamera||t.object.isOrthographicCamera?l/=T:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function U(T){t.object.isPerspectiveCamera||t.object.isOrthographicCamera?l*=T:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function Z(T,W){if(!t.zoomToCursor)return;R=!0;let J=t.domElement.getBoundingClientRect(),Te=T-J.left,Ue=W-J.top,ii=J.width,hi=J.height;C.x=Te/ii*2-1,C.y=-(Ue/hi)*2+1,y.set(C.x,C.y,1).unproject(t.object).sub(t.object.position).normalize()}function me(T){return Math.max(t.minDistance,Math.min(t.maxDistance,T))}function ke(T){u.set(T.clientX,T.clientY)}function $e(T){Z(T.clientX,T.clientX),g.set(T.clientX,T.clientY)}function vt(T){p.set(T.clientX,T.clientY)}function Y(T){h.set(T.clientX,T.clientY),f.subVectors(h,u).multiplyScalar(t.rotateSpeed);let W=t.domElement;V(2*Math.PI*f.x/W.clientHeight),O(2*Math.PI*f.y/W.clientHeight),u.copy(h),t.update()}function Ae(T){v.set(T.clientX,T.clientY),_.subVectors(v,g),_.y>0?$(F(_.y)):_.y<0&&U(F(_.y)),g.copy(v),t.update()}function Ge(T){b.set(T.clientX,T.clientY),m.subVectors(b,p).multiplyScalar(t.panSpeed),G(m.x,m.y),p.copy(b),t.update()}function N(T){Z(T.clientX,T.clientY),T.deltaY<0?U(F(T.deltaY)):T.deltaY>0&&$(F(T.deltaY)),t.update()}function Se(T){let W=!1;switch(T.code){case t.keys.UP:T.ctrlKey||T.metaKey||T.shiftKey?O(2*Math.PI*t.rotateSpeed/t.domElement.clientHeight):G(0,t.keyPanSpeed),W=!0;break;case t.keys.BOTTOM:T.ctrlKey||T.metaKey||T.shiftKey?O(-2*Math.PI*t.rotateSpeed/t.domElement.clientHeight):G(0,-t.keyPanSpeed),W=!0;break;case t.keys.LEFT:T.ctrlKey||T.metaKey||T.shiftKey?V(2*Math.PI*t.rotateSpeed/t.domElement.clientHeight):G(t.keyPanSpeed,0),W=!0;break;case t.keys.RIGHT:T.ctrlKey||T.metaKey||T.shiftKey?V(-2*Math.PI*t.rotateSpeed/t.domElement.clientHeight):G(-t.keyPanSpeed,0),W=!0;break}W&&(T.preventDefault(),t.update())}function Oe(T){if(w.length===1)u.set(T.pageX,T.pageY);else{let W=Pi(T),J=.5*(T.pageX+W.x),Te=.5*(T.pageY+W.y);u.set(J,Te)}}function B(T){if(w.length===1)p.set(T.pageX,T.pageY);else{let W=Pi(T),J=.5*(T.pageX+W.x),Te=.5*(T.pageY+W.y);p.set(J,Te)}}function yt(T){let W=Pi(T),J=T.pageX-W.x,Te=T.pageY-W.y,Ue=Math.sqrt(J*J+Te*Te);g.set(0,Ue)}function fe(T){t.enableZoom&&yt(T),t.enablePan&&B(T)}function Ie(T){t.enableZoom&&yt(T),t.enableRotate&&Oe(T)}function ye(T){if(w.length==1)h.set(T.pageX,T.pageY);else{let J=Pi(T),Te=.5*(T.pageX+J.x),Ue=.5*(T.pageY+J.y);h.set(Te,Ue)}f.subVectors(h,u).multiplyScalar(t.rotateSpeed);let W=t.domElement;V(2*Math.PI*f.x/W.clientHeight),O(2*Math.PI*f.y/W.clientHeight),u.copy(h)}function Be(T){if(w.length===1)b.set(T.pageX,T.pageY);else{let W=Pi(T),J=.5*(T.pageX+W.x),Te=.5*(T.pageY+W.y);b.set(J,Te)}m.subVectors(b,p).multiplyScalar(t.panSpeed),G(m.x,m.y),p.copy(b)}function De(T){let W=Pi(T),J=T.pageX-W.x,Te=T.pageY-W.y,Ue=Math.sqrt(J*J+Te*Te);v.set(0,Ue),_.set(0,Math.pow(v.y/g.y,t.zoomSpeed)),$(_.y),g.copy(v);let ii=(T.pageX+W.x)*.5,hi=(T.pageY+W.y)*.5;Z(ii,hi)}function Ze(T){t.enableZoom&&De(T),t.enablePan&&Be(T)}function mt(T){t.enableZoom&&De(T),t.enableRotate&&ye(T)}function I(T){t.enabled!==!1&&(w.length===0&&(t.domElement.setPointerCapture(T.pointerId),t.domElement.addEventListener("pointermove",E),t.domElement.addEventListener("pointerup",Q)),!zt(T)&&(wt(T),T.pointerType==="touch"?Ne(T):we(T)))}function E(T){t.enabled!==!1&&(T.pointerType==="touch"?ot(T):Ee(T))}function Q(T){switch(it(T),w.length){case 0:t.domElement.releasePointerCapture(T.pointerId),t.domElement.removeEventListener("pointermove",E),t.domElement.removeEventListener("pointerup",Q),t.dispatchEvent(U3),o=r.NONE;break;case 1:let W=w[0],J=A[W];Ne({pointerId:W,pageX:J.x,pageY:J.y});break}}function we(T){let W;switch(T.button){case 0:W=t.mouseButtons.LEFT;break;case 1:W=t.mouseButtons.MIDDLE;break;case 2:W=t.mouseButtons.RIGHT;break;default:W=-1}switch(W){case Dr.DOLLY:if(t.enableZoom===!1)return;$e(T),o=r.DOLLY;break;case Dr.ROTATE:if(T.ctrlKey||T.metaKey||T.shiftKey){if(t.enablePan===!1)return;vt(T),o=r.PAN}else{if(t.enableRotate===!1)return;ke(T),o=r.ROTATE}break;case Dr.PAN:if(T.ctrlKey||T.metaKey||T.shiftKey){if(t.enableRotate===!1)return;ke(T),o=r.ROTATE}else{if(t.enablePan===!1)return;vt(T),o=r.PAN}break;default:o=r.NONE}o!==r.NONE&&t.dispatchEvent($D)}function Ee(T){switch(o){case r.ROTATE:if(t.enableRotate===!1)return;Y(T);break;case r.DOLLY:if(t.enableZoom===!1)return;Ae(T);break;case r.PAN:if(t.enablePan===!1)return;Ge(T);break}}function Re(T){t.enabled===!1||t.enableZoom===!1||o!==r.NONE||(T.preventDefault(),t.dispatchEvent($D),N(ut(T)),t.dispatchEvent(U3))}function ut(T){let W=T.deltaMode,J={clientX:T.clientX,clientY:T.clientY,deltaY:T.deltaY};switch(W){case 1:J.deltaY*=16;break;case 2:J.deltaY*=100;break}return T.ctrlKey&&!S&&(J.deltaY*=10),J}function ze(T){T.key==="Control"&&(S=!0,t.domElement.getRootNode().addEventListener("keyup",Ve,{passive:!0,capture:!0}))}function Ve(T){T.key==="Control"&&(S=!1,t.domElement.getRootNode().removeEventListener("keyup",Ve,{passive:!0,capture:!0}))}function Mt(T){t.enabled===!1||t.enablePan===!1||Se(T)}function Ne(T){switch(si(T),w.length){case 1:switch(t.touches.ONE){case bs.ROTATE:if(t.enableRotate===!1)return;Oe(T),o=r.TOUCH_ROTATE;break;case bs.PAN:if(t.enablePan===!1)return;B(T),o=r.TOUCH_PAN;break;default:o=r.NONE}break;case 2:switch(t.touches.TWO){case bs.DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;fe(T),o=r.TOUCH_DOLLY_PAN;break;case bs.DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;Ie(T),o=r.TOUCH_DOLLY_ROTATE;break;default:o=r.NONE}break;default:o=r.NONE}o!==r.NONE&&t.dispatchEvent($D)}function ot(T){switch(si(T),o){case r.TOUCH_ROTATE:if(t.enableRotate===!1)return;ye(T),t.update();break;case r.TOUCH_PAN:if(t.enablePan===!1)return;Be(T),t.update();break;case r.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;Ze(T),t.update();break;case r.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;mt(T),t.update();break;default:o=r.NONE}}function Ot(T){t.enabled!==!1&&T.preventDefault()}function wt(T){w.push(T.pointerId)}function it(T){delete A[T.pointerId];for(let W=0;W<w.length;W++)if(w[W]==T.pointerId){w.splice(W,1);return}}function zt(T){for(let W=0;W<w.length;W++)if(w[W]==T.pointerId)return!0;return!1}function si(T){let W=A[T.pointerId];W===void 0&&(W=new z,A[T.pointerId]=W),W.set(T.pageX,T.pageY)}function Pi(T){let W=T.pointerId===w[0]?w[1]:w[0];return A[W]}t.domElement.addEventListener("contextmenu",Ot),t.domElement.addEventListener("pointerdown",I),t.domElement.addEventListener("pointercancel",Q),t.domElement.addEventListener("wheel",Re,{passive:!1}),t.domElement.getRootNode().addEventListener("keydown",ze,{passive:!0,capture:!0}),this.update()}};var en=(()=>{let e=class e extends $r{constructor(t,r){super(),this._camera=t,this.canvas=r,this.renderLoop=re(fa)}createThreeInstance(t){t||(t=[this._camera.objRef,this.canvas?.elementRef.nativeElement]);let r=super.createThreeInstance(t);return this.patchDispatchEvent(r),this.subscribeControlUpdater(r),r}patchDispatchEvent(t){if(t.dispatchEvent){this.origDispatchEventMethod=t.dispatchEvent;let r=this.origDispatchEventMethod;t.dispatchEvent=o=>{r.call(t,o),this.renderLoop.requestAnimationFrame()}}}ngOnDestroy(){super.ngOnDestroy(),this.unpatchDispatchEvent(),this.unsubscribeControlUpdater()}unpatchDispatchEvent(){this.origDispatchEventMethod&&this._objRef&&(this._objRef.dispatchEvent=this.origDispatchEventMethod)}subscribeControlUpdater(t){t.update!==void 0&&(this.beforeRenderSubscription=this.renderLoop.beforeRender$.subscribe(r=>{t.update(r.delta)}))}unsubscribeControlUpdater(){this.beforeRenderSubscription&&this.beforeRenderSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(k(pe),k(Ct))},e.\u0275cmp=L({type:e,selectors:[["th-abs-control"]],features:[X],decls:0,vars:0,template:function(r,o){},encapsulation:2});let n=e;return n})();var jee=["*"],Dn=(()=>{let e=class e extends en{getType(){return vf}set object(t){this._objRef&&(this._objRef.object=t)}get object(){return this._objRef?.object}set domElement(t){this._objRef&&(this._objRef.domElement=t)}get domElement(){return this._objRef?.domElement}set enabled(t){this._objRef&&(this._objRef.enabled=t)}get enabled(){return this._objRef?.enabled}set target(t){this._objRef&&(this._objRef.target=ve(this._objRef.target,t))}get target(){return this._objRef?.target}set center(t){this._objRef&&(this._objRef.center=ve(this._objRef.center,t))}get center(){return this._objRef?.center}set cursor(t){this._objRef&&(this._objRef.cursor=ve(this._objRef.cursor,t))}get cursor(){return this._objRef?.cursor}set minDistance(t){this._objRef&&(this._objRef.minDistance=t)}get minDistance(){return this._objRef?.minDistance}set maxDistance(t){this._objRef&&(this._objRef.maxDistance=t)}get maxDistance(){return this._objRef?.maxDistance}set minZoom(t){this._objRef&&(this._objRef.minZoom=t)}get minZoom(){return this._objRef?.minZoom}set maxZoom(t){this._objRef&&(this._objRef.maxZoom=t)}get maxZoom(){return this._objRef?.maxZoom}set minTargetRadius(t){this._objRef&&(this._objRef.minTargetRadius=t)}get minTargetRadius(){return this._objRef?.minTargetRadius}set maxTargetRadius(t){this._objRef&&(this._objRef.maxTargetRadius=t)}get maxTargetRadius(){return this._objRef?.maxTargetRadius}set minPolarAngle(t){this._objRef&&(this._objRef.minPolarAngle=t)}get minPolarAngle(){return this._objRef?.minPolarAngle}set maxPolarAngle(t){this._objRef&&(this._objRef.maxPolarAngle=t)}get maxPolarAngle(){return this._objRef?.maxPolarAngle}set minAzimuthAngle(t){this._objRef&&(this._objRef.minAzimuthAngle=t)}get minAzimuthAngle(){return this._objRef?.minAzimuthAngle}set maxAzimuthAngle(t){this._objRef&&(this._objRef.maxAzimuthAngle=t)}get maxAzimuthAngle(){return this._objRef?.maxAzimuthAngle}set enableDamping(t){this._objRef&&(this._objRef.enableDamping=t)}get enableDamping(){return this._objRef?.enableDamping}set dampingFactor(t){this._objRef&&(this._objRef.dampingFactor=t)}get dampingFactor(){return this._objRef?.dampingFactor}set enableZoom(t){this._objRef&&(this._objRef.enableZoom=t)}get enableZoom(){return this._objRef?.enableZoom}set zoomSpeed(t){this._objRef&&(this._objRef.zoomSpeed=t)}get zoomSpeed(){return this._objRef?.zoomSpeed}set zoomToCursor(t){this._objRef&&(this._objRef.zoomToCursor=t)}get zoomToCursor(){return this._objRef?.zoomToCursor}set enableRotate(t){this._objRef&&(this._objRef.enableRotate=t)}get enableRotate(){return this._objRef?.enableRotate}set rotateSpeed(t){this._objRef&&(this._objRef.rotateSpeed=t)}get rotateSpeed(){return this._objRef?.rotateSpeed}set enablePan(t){this._objRef&&(this._objRef.enablePan=t)}get enablePan(){return this._objRef?.enablePan}set panSpeed(t){this._objRef&&(this._objRef.panSpeed=t)}get panSpeed(){return this._objRef?.panSpeed}set screenSpacePanning(t){this._objRef&&(this._objRef.screenSpacePanning=t)}get screenSpacePanning(){return this._objRef?.screenSpacePanning}set keyPanSpeed(t){this._objRef&&(this._objRef.keyPanSpeed=t)}get keyPanSpeed(){return this._objRef?.keyPanSpeed}set autoRotate(t){this._objRef&&(this._objRef.autoRotate=t)}get autoRotate(){return this._objRef?.autoRotate}set autoRotateSpeed(t){this._objRef&&(this._objRef.autoRotateSpeed=t)}get autoRotateSpeed(){return this._objRef?.autoRotateSpeed}set keys(t){this._objRef&&(this._objRef.keys=t)}get keys(){return this._objRef?.keys}set mouseButtons(t){this._objRef&&(this._objRef.mouseButtons=t)}get mouseButtons(){return this._objRef?.mouseButtons}set touches(t){this._objRef&&(this._objRef.touches=t)}get touches(){return this._objRef?.touches}set target0(t){this._objRef&&(this._objRef.target0=ve(this._objRef.target0,t))}get target0(){return this._objRef?.target0}set position0(t){this._objRef&&(this._objRef.position0=ve(this._objRef.position0,t))}get position0(){return this._objRef?.position0}set zoom0(t){this._objRef&&(this._objRef.zoom0=t)}get zoom0(){return this._objRef?.zoom0}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-orbitControls"]],inputs:{object:"object",domElement:"domElement",enabled:"enabled",target:"target",center:"center",cursor:"cursor",minDistance:"minDistance",maxDistance:"maxDistance",minZoom:"minZoom",maxZoom:"maxZoom",minTargetRadius:"minTargetRadius",maxTargetRadius:"maxTargetRadius",minPolarAngle:"minPolarAngle",maxPolarAngle:"maxPolarAngle",minAzimuthAngle:"minAzimuthAngle",maxAzimuthAngle:"maxAzimuthAngle",enableDamping:"enableDamping",dampingFactor:"dampingFactor",enableZoom:"enableZoom",zoomSpeed:"zoomSpeed",zoomToCursor:"zoomToCursor",enableRotate:"enableRotate",rotateSpeed:"rotateSpeed",enablePan:"enablePan",panSpeed:"panSpeed",screenSpacePanning:"screenSpacePanning",keyPanSpeed:"keyPanSpeed",autoRotate:"autoRotate",autoRotateSpeed:"autoRotateSpeed",keys:"keys",mouseButtons:"mouseButtons",touches:"touches",target0:"target0",position0:"position0",zoom0:"zoom0"},features:[oe([{provide:en,useExisting:ge(()=>e)}]),X],ngContentSelectors:jee,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Oee=["*"],cr=(()=>{let e=class e extends _s{getType(){return al}get isPointLight(){return this._objRef?.isPointLight}set type(t){this._objRef&&(this._objRef.type=t)}get type(){return this._objRef?.type}set intensity(t){this._objRef&&(this._objRef.intensity=t)}get intensity(){return this._objRef?.intensity}set distance(t){this._objRef&&(this._objRef.distance=t)}get distance(){return this._objRef?.distance}set castShadow(t){this._objRef&&(this._objRef.castShadow=t)}get castShadow(){return this._objRef?.castShadow}set decay(t){this._objRef&&(this._objRef.decay=t)}get decay(){return this._objRef?.decay}set shadow(t){this._objRef&&(this._objRef.shadow=t)}get shadow(){return this._objRef?.shadow}set power(t){this._objRef&&(this._objRef.power=t)}get power(){return this._objRef?.power}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-pointLight"]],inputs:{type:"type",intensity:"intensity",distance:"distance",castShadow:"castShadow",decay:"decay",shadow:"shadow",power:"power"},features:[oe([{provide:pe,useExisting:ge(()=>e)}]),X],ngContentSelectors:Oee,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var qo=(()=>{let e=class e{get onMouseEnter(){return this.mouseEnter||(this.mouseEnter=new et),this.mouseEnter}get onMouseExit(){return this.mouseExit||(this.mouseExit=new et),this.mouseExit}get onClick(){return this.click||(this.click=new et),this.click}get onPointerDown(){return this.pointerDown||(this.pointerDown=new et),this.pointerDown}get onPointerUp(){return this.pointerUp||(this.pointerUp=new et),this.pointerUp}constructor(t,r){this.host=t,this.raycasterService=r,this.emitOnMouseEnter=this.emitOnMouseEnter.bind(this),this.emitOnMouseExit=this.emitOnMouseExit.bind(this),this.emitOnClick=this.emitOnClick.bind(this)}ngAfterViewInit(){this.subscribeEvents()}subscribeEvents(){this.raycasterService.addEventTarget(this)}unSubscribeEvents(){this.raycasterService.removeEventTarget(this)}emitOnMouseExit(){this.mouseExit?.emit({component:this.host,type:"mouseExit"})}emitOnMouseEnter(t){this.mouseEnter?.emit(t)}emitOnClick(t){this.click?.emit(t)}emitOnPointerDown(t){this.pointerDown?.emit(t)}emitOnPointerUp(t){this.pointerUp?.emit(t)}ngOnDestroy(){this.unSubscribeEvents()}};e.\u0275fac=function(r){return new(r||e)(k(pe,1),k(hc))},e.\u0275dir=He({type:e,selectors:[["","onClick",""],["","onMouseEnter",""],["","onMouseExit",""],["","onPointerDown",""],["","onPointerUp",""]],outputs:{onMouseEnter:"onMouseEnter",onMouseExit:"onMouseExit",onClick:"onClick",onPointerDown:"onPointerDown",onPointerUp:"onPointerUp"}});let n=e;return n})();var Nee=()=>[2,2,2],Lee=()=>[1,1,1],Bee=()=>[10,10],z3=()=>[10,10,10],Uee=()=>[45,2,.1,100],Vee=()=>[0,0,0],H3=(()=>{let e=class e{constructor(){this.selected=!1,this.glbPath=`${sn}DamagedHelmet.glb`}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-controls-example"]],decls:8,vars:17,consts:[[3,"thStats"],[3,"intensity"],["loadGLTF","",3,"onClick","url","scale"],[3,"args"],[3,"position","intensity"],[3,"args","position","lookAt"]],template:function(r,o){r&1&&(H(0,"th-canvas",0)(1,"th-scene"),he(2,"th-ambientLight",1),H(3,"th-object3D",2),Fe("onClick",function(){return o.selected=!o.selected}),ie(),he(4,"th-gridHelper",3)(5,"th-pointLight",4),H(6,"th-perspectiveCamera",5),he(7,"th-orbitControls"),ie()()()),r&2&&(P("thStats",!0),j(2),P("intensity",3),j(),P("url",o.glbPath)("scale",o.selected?te(10,Nee):te(11,Lee)),j(),P("args",te(12,Bee)),j(),P("position",te(13,z3))("intensity",3),j(),P("args",te(14,Uee))("position",te(15,z3))("lookAt",te(16,Vee)))},dependencies:[Dn,Wt,pe,Ar,Ai,cr,jt,Ct,$n,qo,En],encapsulation:2,changeDetection:0});let n=e;return n})();var zee=()=>[0,1,0],Hee=()=>[10,10],G3=()=>[10,10,10],Gee=()=>[45,2,.1,100],Wee=()=>[0,0,0],W3=(()=>{let e=class e{constructor(t){this.cdref=t,this.modelScale=[1,1,1],this.rotation=[0,0,0],this.modelUrl1=`${sn}DamagedHelmet.glb`,this.modelUrl2=`${sn}BoomBox.glb`,this.modelUrl=this.toggleModel(),this.intervalHandle=window.setInterval(()=>this.toggleModel(),3e3)}toggleModel(){return this.modelUrl!==this.modelUrl1?this.modelUrl=this.modelUrl1:this.modelUrl=this.modelUrl2,this.cdref.markForCheck(),this.modelUrl}onLoaded(){this.modelUrl!==this.modelUrl1?this.modelScale=[100,100,100]:this.modelScale=[1,1,1]}onRefChange(t){}onBeforeRender(){this.rotation=[0,this.rotation[1]+.01,0]}ngOnDestroy(){window.clearInterval(this.intervalHandle)}};e.\u0275fac=function(r){return new(r||e)(k(Hi))},e.\u0275cmp=L({type:e,selectors:[["app-dynamic-loader-example"]],decls:7,vars:17,consts:[[3,"onRender"],[3,"intensity"],["loadGLTF","",3,"onLoaded","objRef$","url","scale","rotation","position"],[3,"args"],[3,"position","intensity"],[3,"args","position","lookAt"]],template:function(r,o){r&1&&(H(0,"th-canvas",0),Fe("onRender",function(){return o.onBeforeRender()}),H(1,"th-scene"),he(2,"th-ambientLight",1),H(3,"th-object3D",2),Fe("onLoaded",function(){return o.onLoaded()})("objRef$",function(a){return o.onRefChange(a)}),ie(),he(4,"th-gridHelper",3)(5,"th-pointLight",4)(6,"th-perspectiveCamera",5),ie()()),r&2&&(j(2),P("intensity",3),j(),P("url",o.modelUrl)("scale",o.modelScale)("rotation",o.rotation)("position",te(11,zee)),j(),P("args",te(12,Hee)),j(),P("position",te(13,G3))("intensity",3),j(),P("args",te(14,Gee))("position",te(15,G3))("lookAt",te(16,Wee)))},dependencies:[Wt,pe,Ar,Ai,cr,jt,Ct,$n],encapsulation:2});let n=e;return n})();var $3=(()=>{let e=class e{transform(t,r){return t.bind(r)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Oo({name:"bind",type:e,pure:!0});let n=e;return n})();var qee=()=>[10,10],q3=()=>[10,10,10],Xee=()=>[45,2,.1,100],Yee=()=>[0,0,0],Zee=(n,e)=>({change:n,end:e});function Qee(n,e){if(n&1&&(H(0,"li"),Et(1),ie()),n&2){let i=e.$implicit;j(),zs(" ",i," ")}}var X3=(()=>{let e=class e{constructor(t){this.cdref=t,this.id="CID",this.changes=[],this.rotation=[0,0,0],this.position=[0,1,0],this.assetPath=`${sn}DamagedHelmet.glb`,this.onOrbitControlEnd=()=>{this.pushToChangesArray(`${this.id}: orbit control end`)},window.setInterval(()=>{this.rotation=[0,this.rotation[1]+.05,0],this.cdref.markForCheck()},1500),window.setInterval(()=>{this.position=[0,(this.position[1]+1)%5,0],this.cdref.markForCheck()},3e3)}logUpdates(t){this.pushToChangesArray(Object.keys(t).toString())}onLoaded(){this.changes.push("Model loaded")}onOrbitControlChange(){this.pushToChangesArray(`${this.id}: orbit control change`)}pushToChangesArray(t){this.changes.length>=20&&this.changes.shift(),this.changes.push(t)}};e.\u0275fac=function(r){return new(r||e)(k(Hi))},e.\u0275cmp=L({type:e,selectors:[["app-events-example"]],decls:14,vars:23,consts:[[3,"intensity"],["loadGLTF","",3,"onUpdate","onLoaded","url","rotation","position"],[3,"args"],[3,"position","intensity"],[3,"args","position","lookAt"],[3,"threeEvents"],[1,"change-list"],[4,"ngFor","ngForOf"]],template:function(r,o){r&1&&(H(0,"th-canvas")(1,"th-scene"),he(2,"th-ambientLight",0),H(3,"th-object3D",1),Fe("onUpdate",function(a){return o.logUpdates(a)})("onLoaded",function(){return o.onLoaded()}),ie(),he(4,"th-gridHelper",2)(5,"th-pointLight",3),H(6,"th-perspectiveCamera",4),he(7,"th-orbitControls",5),ji(8,"bind"),ie()()(),H(9,"div",6)(10,"h1"),Et(11,"Updates"),ie(),H(12,"ol"),Nt(13,Qee,2,1,"li",7),ie()()),r&2&&(j(2),P("intensity",3),j(),P("url",o.assetPath)("rotation",o.rotation)("position",o.position),j(),P("args",te(15,qee)),j(),P("position",te(16,q3))("intensity",3),j(),P("args",te(17,Xee))("position",te(18,q3))("lookAt",te(19,Yee)),j(),P("threeEvents",Hn(20,Zee,kj(8,12,o.onOrbitControlChange,o),o.onOrbitControlEnd)),j(6),P("ngForOf",o.changes))},dependencies:[Kr,Dn,Wt,pe,Ar,Ai,cr,jt,Ct,$n,$3],styles:[".change-list[_ngcontent-%COMP%]{padding:1em;box-shadow:0 4px 8px #0003;transition:.3s}[_nghost-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr)}"],changeDetection:0});let n=e;return n})();var vl={name:"ngx-three",version:"0.33.0",scripts:{ng:"ng",start:"ng serve",build:"ng build ngx-three","build:prod":"ng build ngx-three --configuration production","build:demo":"ng build ngx-three-demo --configuration production --base-href /ngx-three/",test:"ng test","test-headless":"ng test --watch=false --browsers=ChromeHeadless",lint:"ng lint",e2e:"ng e2e","copy:docs":"(cp README.md dist/ngx-three/ || copy README.md dist\\ngx-three)",package:"ng build --configuration production ngx-three && npm run copy:docs",format:'prettier-eslint --write "{,!(node_modules|dist)/**/}*.{ts,tsx}"'},private:!0,dependencies:{"@angular/animations":"^17.3.7","@angular/cdk":"^17.3.7","@angular/common":"^17.3.7","@angular/compiler":"^17.3.7","@angular/core":"^17.3.7","@angular/forms":"^17.3.7","@angular/material":"^17.3.7","@angular/platform-browser":"^17.3.7","@angular/platform-browser-dynamic":"^17.3.7","@angular/router":"^17.3.7","@stackblitz/sdk":"^1.9.0","@types/webxr":"^0.5.5","highlight.js":"^11.9.0","lil-gui":"^0.18.2","ngx-highlightjs":"^11.0.0-beta.1","normalize.css":"^8.0.1",rxjs:"~7.8.1","simplex-noise":"^4.0.1",three:"~0.164.1",tslib:"^2.6.2","zone.js":"~0.14.5"},devDependencies:{"@angular-devkit/build-angular":"^17.3.6","@angular-eslint/builder":"~17.3.0","@angular-eslint/eslint-plugin":"~17.3.0","@angular-eslint/eslint-plugin-template":"~17.3.0","@angular-eslint/schematics":"^17.3.0","@angular-eslint/template-parser":"~17.3.0","@angular/cli":"^17.3.6","@angular/compiler-cli":"^17.3.7","@types/jasmine":"^4.3.5","@types/node":"^20.5.3","@types/three":"^0.164.0","@typescript-eslint/eslint-plugin":"^7.2.0","@typescript-eslint/parser":"^7.2.0",acorn:">=8",eslint:"^8.57.0","eslint-plugin-import":"^2.28.1","eslint-plugin-jsdoc":"^46.5.0","eslint-plugin-prefer-arrow":"^1.2.3","jasmine-core":"^5.1.0","jasmine-spec-reporter":"^7.0.0",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","ng-packagr":"^17.3.0",prettier:"^3.0.2","prettier-eslint":"^15.0.1","prettier-eslint-cli":"^7.1.0","ts-node":"^10.9.1",typescript:"^5.4.5","utility-types":"^3.10.0"}};var qD=`
import "zone.js";`;function Y3(n,e){return yi(this,null,function*(){let i=QD(n),t=xf(i),r=ZD(t),o={"package.json":ete(),"src/index.html":{content:YD(r)},"src/main.ts":{content:XD(t,e)},"src/polyfills.ts":{content:qD},"src/assets.ts":{content:`export const ASSET_PATH = '${Gy}';`}};yield Jee(n,o),fetch("https://codesandbox.io/api/v1/sandboxes/define?json=1",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({files:o})}).then(s=>s.json()).then(s=>window.open(`https://codesandbox.io/s/${s.sandbox_id}`,"_blank"))})}function Jee(n,e){return Promise.all(n.map(i=>fetch(i).then(t=>yi(this,null,function*(){e[`src/app/${xf(i)}`]={content:yield t.text()}}))))}function ete(){return{content:{main:"src/main.ts",dependencies:xe({"ngx-three":"latest","@types/three":vl.devDependencies["@types/three"]},vl.dependencies),devDependencies:xe({},vl.devDependencies)}}}function xf(n){return n.replace(/^.*[\\\/]/,"")}function XD(n,e){let i=ite(e)??tte(n),t=nte(e,i);return`
            import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';
            import { NgModule } from '@angular/core';
            import { BrowserModule } from '@angular/platform-browser';
            import { NgxThreeModule } from 'ngx-three';
            import { FormsModule } from '@angular/forms';
            import { ${t} } from './app/${n.replace(".ts","")}';

            @NgModule({
                imports: [
                    BrowserModule,
                    NgxThreeModule,
                    FormsModule
                ],
                providers: [],
                declarations: [${t}],
                bootstrap: [${i}]
            })
            export class AppModule {}

            platformBrowserDynamic().bootstrapModule(AppModule)
            .catch(err => console.log(err));
            `}function YD(n){return`
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>NgxThreeDemo</title>
        <base href="/" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" type="image/x-icon" href="favicon.ico" />
    </head>
    <body>
        <${n}></${n}>
    </body>
    </html>
    `}function tte(n){return n.replace(".ts","").replace(/(?:^\w|[A-Z]|\b\w)/g,(e,i)=>e.toUpperCase()).replace(/[-.]/g,"")}function ZD(n){return"app-"+n.replace(".component.ts","")}function QD(n){for(let e of n)if(e.endsWith(".ts"))return e;return""}function Z3(n){for(let e of n)if(e.endsWith(".html"))return e}function ite(n){if(n&&n.length>0)return n[0]}function nte(n,e){return n&&n.length>0?n.join(","):e}var rte="https://stackblitz.com",Q3=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],ote=["project","search","ports","settings"],ste=["light","dark"],ate=["editor","preview"],K3={clickToLoad:n=>wf("ctl",n),devToolsHeight:n=>J3("devtoolsheight",n),forceEmbedLayout:n=>wf("embed",n),hideDevTools:n=>wf("hidedevtools",n),hideExplorer:n=>wf("hideExplorer",n),hideNavigation:n=>wf("hideNavigation",n),openFile:n=>eB("file",n),showSidebar:n=>cte("showSidebar",n),sidebarView:n=>KD("sidebarView",n,ote),startScript:n=>eB("startScript",n),terminalHeight:n=>J3("terminalHeight",n),theme:n=>KD("theme",n,ste),view:n=>KD("view",n,ate),zenMode:n=>wf("zenMode",n)};function tB(n={}){let e=Object.entries(n).map(([i,t])=>t!=null&&K3.hasOwnProperty(i)?K3[i](t):"").filter(Boolean);return e.length?`?${e.join("&")}`:""}function wf(n,e){return e===!0?`${n}=1`:""}function cte(n,e){return typeof e=="boolean"?`${n}=${e?"1":"0"}`:""}function J3(n,e){if(typeof e=="number"&&!Number.isNaN(e)){let i=Math.min(100,Math.max(0,e));return`${n}=${encodeURIComponent(Math.round(i))}`}return""}function KD(n,e="",i=[]){return i.includes(e)?`${n}=${encodeURIComponent(e)}`:""}function eB(n,e){return(Array.isArray(e)?e:[e]).filter(t=>typeof t=="string"&&t.trim()!=="").map(t=>`${n}=${encodeURIComponent(t)}`).join("&")}function iB(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function i1(n,e){return`${nB(e)}${n}${tB(e)}`}function n1(n,e){let i={forceEmbedLayout:!0};return e&&typeof e=="object"&&Object.assign(i,e),`${nB(i)}${n}${tB(i)}`}function nB(n={}){return(typeof n.origin=="string"?n.origin:rte).replace(/\/$/,"")}function r1(n,e,i){if(!e||!n||!n.parentNode)throw new Error("Invalid Element");n.id&&(e.id=n.id),n.className&&(e.className=n.className),lte(e,i),n.replaceWith(e)}function o1(n){if(typeof n=="string"){let e=document.getElementById(n);if(!e)throw new Error(`Could not find element with id '${n}'`);return e}else if(n instanceof HTMLElement)return n;throw new Error(`Invalid element: ${n}`)}function s1(n){return n&&n.newWindow===!1?"_self":"_blank"}function lte(n,e={}){let i=Object.hasOwnProperty.call(e,"height")?`${e.height}`:"300",t=Object.hasOwnProperty.call(e,"width")?`${e.width}`:void 0;n.setAttribute("height",i),t?n.setAttribute("width",t):n.setAttribute("style","width:100%;")}var JD=class{constructor(e){this.pending={},this.port=e,this.port.onmessage=this.messageListener.bind(this)}request({type:e,payload:i}){return new Promise((t,r)=>{let o=iB();this.pending[o]={resolve:t,reject:r},this.port.postMessage({type:e,payload:pi(xe({},i),{__reqid:o})})})}messageListener(e){if(typeof e.data.payload?.__reqid!="string")return;let{type:i,payload:t}=e.data,{__reqid:r,__success:o,__error:s}=t;this.pending[r]&&(o?this.pending[r].resolve(this.cleanResult(t)):this.pending[r].reject(s?`${i}: ${s}`:i),delete this.pending[r])}cleanResult(e){let i=xe({},e);return delete i.__reqid,delete i.__success,delete i.__error,Object.keys(i).length?i:null}},e1=class{constructor(e,i){this.editor={openFile:t=>this._rdc.request({type:"SDK_OPEN_FILE",payload:{path:t}}),setCurrentFile:t=>this._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:t}}),setTheme:t=>this._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:t}}),setView:t=>this._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:t}}),showSidebar:(t=!0)=>this._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:t}})},this.preview={origin:"",getUrl:()=>this._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then(t=>t?.url??null),setUrl:(t="/")=>{if(typeof t!="string"||!t.startsWith("/"))throw new Error(`Invalid argument: expected a path starting with '/', got '${t}'`);return this._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:t}})}},this._rdc=new JD(e),Object.defineProperty(this.preview,"origin",{value:typeof i.previewOrigin=="string"?i.previewOrigin:null,writable:!1})}applyFsDiff(e){let i=t=>t!==null&&typeof t=="object";if(!i(e)||!i(e.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(e.destroy))throw new Error("Invalid diff object: expected diff.destroy to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:e})}getDependencies(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}getFsSnapshot(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}},Qy=[],t1=class{constructor(e){this.id=iB(),this.element=e,this.pending=new Promise((i,t)=>{let r=({data:l,ports:d})=>{l?.action==="SDK_INIT_SUCCESS"&&l.id===this.id&&(this.vm=new e1(d[0],l.payload),i(this.vm),s())},o=()=>{this.element.contentWindow?.postMessage({action:"SDK_INIT",id:this.id},"*")};function s(){window.clearInterval(c),window.removeEventListener("message",r)}window.addEventListener("message",r),o();let a=0,c=window.setInterval(()=>{if(this.vm){s();return}if(a>=20){s(),t("Timeout: Unable to establish a connection with the StackBlitz VM"),Qy.forEach((l,d)=>{l.id===this.id&&Qy.splice(d,1)});return}a++,o()},500)}),Qy.push(this)}},dte=n=>{let e=n instanceof Element?"element":"id";return Qy.find(i=>i[e]===n)??null};function ute(n,e){let i=document.createElement("input");return i.type="hidden",i.name=n,i.value=e,i}function hte(n){return n.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}function rB({template:n,title:e,description:i,dependencies:t,files:r,settings:o}){if(!Q3.includes(n)){let l=Q3.map(d=>`'${d}'`).join(", ");console.warn(`Unsupported project.template: must be one of ${l}`)}let s=[],a=(l,d,u="")=>{s.push(ute(l,typeof d=="string"?d:u))};a("project[title]",e),typeof i=="string"&&i.length>0&&a("project[description]",i),a("project[template]",n,"javascript"),t&&(n==="node"?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):a("project[dependencies]",JSON.stringify(t))),o&&a("project[settings]",JSON.stringify(o)),Object.entries(r).forEach(([l,d])=>{a(`project[files][${hte(l)}]`,d)});let c=document.createElement("form");return c.method="POST",c.setAttribute("style","display:none!important;"),c.append(...s),c}function fte(n,e){let i=rB(n);return i.action=n1("/run",e),i.id="sb_run",`<!doctype html>
<html>
<head><title></title></head>
<body>
  ${i.outerHTML}
  <script>document.getElementById('${i.id}').submit();<\/script>
</body>
</html>`}function mte(n,e){let i=rB(n);i.action=i1("/run",e),i.target=s1(e),document.body.appendChild(i),i.submit(),document.body.removeChild(i)}function Ky(n){return n?.contentWindow?(dte(n)??new t1(n)).pending:Promise.reject("Provided element is not an iframe.")}function pte(n,e){mte(n,e)}function gte(n,e){let i=i1(`/edit/${n}`,e),t=s1(e);window.open(i,t)}function bte(n,e){let i=i1(`/github/${n}`,e),t=s1(e);window.open(i,t)}function _te(n,e,i){let t=o1(n),r=fte(e,i),o=document.createElement("iframe");return r1(t,o,i),o.contentDocument?.write(r),Ky(o)}function vte(n,e,i){let t=o1(n),r=document.createElement("iframe");return r.src=n1(`/edit/${e}`,i),r1(t,r,i),Ky(r)}function yte(n,e,i){let t=o1(n),r=document.createElement("iframe");return r.src=n1(`/github/${e}`,i),r1(t,r,i),Ky(r)}var oB={connect:Ky,embedGithubProject:yte,embedProject:_te,embedProjectId:vte,openGithubProject:bte,openProject:pte,openProjectId:gte};function sB(n,e){return yi(this,null,function*(){let i=QD(n),t=Z3(n),r=xf(i),o=ZD(r),s={template:"angular-cli",title:o,description:"ngx-three example "+o,files:{"src/index.html":YD(o),"src/main.ts":XD(r,e),"src/polyfills.ts":qD,"src/assets.ts":`export const ASSET_PATH = '${Gy}';`},dependencies:xe({"ngx-three":"latest","@types/three":vl.devDependencies["@types/three"]},vl.dependencies),devDependencies:xe({},vl.devDependencies)};yield xte(n,s.files);let a=t?{openFile:`src/app/${xf(t)}`}:void 0;oB.openProject(s,a)})}function xte(n,e){return Promise.all(n.map(i=>fetch(i).then(t=>yi(this,null,function*(){let r=yield t.text();e[`src/app/${xf(i)}`]=r}))))}var ba=class{constructor(){this.urls=[],this.fileNames=[]}setUrls(e){this.urls=e,this.fileNames=this.extractFileNames()}extractFileNames(){return this.urls.map(e=>e.split("/").pop()??"")}toStackblitz(e){e?.preventDefault(),sB(this.urls,this.declarations)}toCodeSandbox(e){e?.preventDefault(),Y3(this.urls,this.declarations)}getLanguage(e){switch(e.substring(e.lastIndexOf(".")+1)){case"ts":return"typescript";case"js":return"javascript";case"html":return"html";case"css":return"css";default:return"typescript"}}};var l1;try{l1=typeof Intl<"u"&&Intl.v8BreakIterator}catch{l1=!1}var wi=(()=>{let e=class e{constructor(t){this._platformId=t,this.isBrowser=this._platformId?ih(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||l1)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(le(Br))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var lg;function wte(){if(lg==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>lg=!0}))}finally{lg=lg||!1}return lg}function yl(n){return wte()?n:!!n.capture}var ys=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(ys||{}),Jy,Zd;function ex(){if(Zd==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Zd=!1,Zd;if("scrollBehavior"in document.documentElement.style)Zd=!0;else{let n=Element.prototype.scrollTo;n?Zd=!/\{\s*\[native code\]\s*\}/.test(n.toString()):Zd=!1}}return Zd}function Mf(){if(typeof document!="object"||!document)return ys.NORMAL;if(Jy==null){let n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";let i=document.createElement("div"),t=i.style;t.width="2px",t.height="1px",n.appendChild(i),document.body.appendChild(n),Jy=ys.NORMAL,n.scrollLeft===0&&(n.scrollLeft=1,Jy=n.scrollLeft===0?ys.NEGATED:ys.INVERTED),n.remove()}return Jy}var c1;function Mte(){if(c1==null){let n=typeof document<"u"?document.head:null;c1=!!(n&&(n.createShadowRoot||n.attachShadow))}return c1}function aB(n){if(Mte()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function xs(n){return n.composedPath?n.composedPath()[0]:n.target}function dg(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Sf(n,...e){return e.length?e.some(i=>n[i]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function co(n){return n!=null&&`${n}`!="false"}function pc(n,e=0){return Ste(n)?Number(n):e}function Ste(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function Rf(n){return Array.isArray(n)?n:[n]}function Nn(n){return n==null?"":typeof n=="string"?n:`${n}px`}function ws(n){return n instanceof Qe?n.nativeElement:n}function Rte(n){if(n.type==="characterData"&&n.target instanceof Comment)return!0;if(n.type==="childList"){for(let e=0;e<n.addedNodes.length;e++)if(!(n.addedNodes[e]instanceof Comment))return!1;for(let e=0;e<n.removedNodes.length;e++)if(!(n.removedNodes[e]instanceof Comment))return!1;return!0}return!1}var cB=(()=>{let e=class e{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Tte=(()=>{let e=class e{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){let r=ws(t);return new kt(o=>{let a=this._observeElement(r).pipe(st(c=>c.filter(l=>!Rte(l))),_i(c=>!!c.length)).subscribe(o);return()=>{a.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{let r=new ht,o=this._mutationObserverFactory.create(s=>r.next(s));o&&o.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:o,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){let{observer:r,stream:o}=this._observedElements.get(t);r&&r.disconnect(),o.complete(),this._observedElements.delete(t)}}};e.\u0275fac=function(r){return new(r||e)(le(cB))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),tx=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=pc(t),this._subscribe()}constructor(t,r,o){this._contentObserver=t,this._elementRef=r,this._ngZone=o,this.event=new et,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(Ia(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(k(Tte),k(Qe),k(Xe))},e.\u0275dir=He({type:e,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[at.HasDecoratorInputTransform,"cdkObserveContentDisabled","disabled",Si],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"],standalone:!0,features:[ln]});let n=e;return n})(),ix=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({providers:[cB]});let n=e;return n})();var uB=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({});let n=e;return n})(),lB=new Set,Qd,Cte=(()=>{let e=class e{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Dte}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&Ete(t,this._nonce),this._matchMedia(t)}};e.\u0275fac=function(r){return new(r||e)(le(wi),le(ym,8))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Ete(n,e){if(!lB.has(n))try{Qd||(Qd=document.createElement("style"),e&&Qd.setAttribute("nonce",e),Qd.setAttribute("type","text/css"),document.head.appendChild(Qd)),Qd.sheet&&(Qd.sheet.insertRule(`@media ${n} {body{ }}`,0),lB.add(n))}catch(i){console.error(i)}}function Dte(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var nx=(()=>{let e=class e{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new ht}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return dB(Rf(t)).some(o=>this._registerQuery(o).mql.matches)}observe(t){let o=dB(Rf(t)).map(a=>this._registerQuery(a).observable),s=Nl(o);return s=Ec(s.pipe(Mn(1)),s.pipe(Ul(1),Ia(0))),s.pipe(st(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:d})=>{c.matches=c.matches||l,c.breakpoints[d]=l}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let r=this._mediaMatcher.matchMedia(t),s={observable:new kt(a=>{let c=l=>this._zone.run(()=>a.next(l));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(mo(r),st(({matches:a})=>({query:t,matches:a})),Ti(this._destroySubject)),mql:r};return this._queries.set(t,s),s}};e.\u0275fac=function(r){return new(r||e)(le(Cte),le(Xe))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function dB(n){return n.map(e=>e.split(",")).reduce((e,i)=>e.concat(i)).map(e=>e.trim())}var hB={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var u1=class{constructor(e,i){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ht,this._typeaheadSubscription=bi.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new ht,this.change=new ht,e instanceof js?this._itemChangesSubscription=e.changes.subscribe(t=>this._itemsChanged(t.toArray())):W_(e)&&(this._effectRef=Ju(()=>this._itemsChanged(e()),{injector:i}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Ui(i=>this._pressedLetters.push(i)),Ia(e),_i(()=>this._pressedLetters.length>0),st(()=>this._pressedLetters.join(""))).subscribe(i=>{let t=this._getItemsArray();for(let r=1;r<t.length+1;r++){let o=(this._activeItemIndex+r)%t.length,s=t[o];if(!this._skipPredicateFn(s)&&s.getLabel().toUpperCase().trim().indexOf(i)===0){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,i=10){return this._pageUpAndDown={enabled:e,delta:i},this}setActiveItem(e){let i=this._activeItem;this.updateActiveItem(e),this._activeItem!==i&&this.change.next(this._activeItemIndex)}onKeydown(e){let i=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!e[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(i){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(r||Sf(e,"shiftKey"))&&(e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(i>=65&&i<=90||i>=48&&i<=57)&&this._letterKeyStream.next(String.fromCharCode(i)));return}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let i=this._getItemsArray(),t=typeof e=="number"?e:i.indexOf(e),r=i[t];this._activeItem=r??null,this._activeItemIndex=t}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let i=this._getItemsArray();for(let t=1;t<=i.length;t++){let r=(this._activeItemIndex+e*t+i.length)%i.length,o=i[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,i){let t=this._getItemsArray();if(t[e]){for(;this._skipPredicateFn(t[e]);)if(e+=i,!t[e])return;this.setActiveItem(e)}}_getItemsArray(){return W_(this._items)?this._items():this._items instanceof js?this._items.toArray():this._items}_itemsChanged(e){if(this._activeItem){let i=e.indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}}};var sx=class extends u1{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}};var f1=(()=>{let e=class e{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return Zte(t)&&getComputedStyle(t).visibility==="visible"}isTabbable(t){if(!this._platform.isBrowser)return!1;let r=Yte(rie(t));if(r&&(fB(r)===-1||!this.isVisible(r)))return!1;let o=t.nodeName.toLowerCase(),s=fB(t);return t.hasAttribute("contenteditable")?s!==-1:o==="iframe"||o==="object"||this._platform.WEBKIT&&this._platform.IOS&&!iie(t)?!1:o==="audio"?t.hasAttribute("controls")?s!==-1:!1:o==="video"?s===-1?!1:s!==null?!0:this._platform.FIREFOX||t.hasAttribute("controls"):t.tabIndex>=0}isFocusable(t,r){return nie(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}};e.\u0275fac=function(r){return new(r||e)(le(wi))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Yte(n){try{return n.frameElement}catch{return null}}function Zte(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function Qte(n){let e=n.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function Kte(n){return eie(n)&&n.type=="hidden"}function Jte(n){return tie(n)&&n.hasAttribute("href")}function eie(n){return n.nodeName.toLowerCase()=="input"}function tie(n){return n.nodeName.toLowerCase()=="a"}function gB(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let e=n.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function fB(n){if(!gB(n))return null;let e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function iie(n){let e=n.nodeName.toLowerCase(),i=e==="input"&&n.type;return i==="text"||i==="password"||e==="select"||e==="textarea"}function nie(n){return Kte(n)?!1:Qte(n)||Jte(n)||n.hasAttribute("contenteditable")||gB(n)}function rie(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var h1=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,i,t,r,o=!1){this._element=e,this._checker=i,this._ngZone=t,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){let e=this._startAnchor,i=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),i&&(i.removeEventListener("focus",this.endAnchorListener),i.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(i=>{this._executeOnStable(()=>i(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(i=>{this._executeOnStable(()=>i(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(i=>{this._executeOnStable(()=>i(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let i=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?i.length?i[0]:this._getFirstTabbableElement(this._element):i.length?i[i.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let i=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(i){if(!this._checker.isFocusable(i)){let t=this._getFirstTabbableElement(i);return t?.focus(e),!!t}return i.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let i=this._getRegionBoundary("start");return i&&i.focus(e),!!i}focusLastTabbableElement(e){let i=this._getRegionBoundary("end");return i&&i.focus(e),!!i}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let i=e.children;for(let t=0;t<i.length;t++){let r=i[t].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(i[t]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let i=e.children;for(let t=i.length-1;t>=0;t--){let r=i[t].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(i[t]):null;if(r)return r}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,i){e?i.setAttribute("tabindex","0"):i.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Mn(1)).subscribe(e)}},bB=(()=>{let e=class e{constructor(t,r,o){this._checker=t,this._ngZone=r,this._document=o}create(t,r=!1){return new h1(t,this._checker,this._ngZone,this._document,r)}};e.\u0275fac=function(r){return new(r||e)(le(f1),le(Xe),le(_t))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function m1(n){return n.buttons===0||n.detail===0}function p1(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var oie=new Ce("cdk-input-modality-detector-options"),sie={ignoreKeys:[18,17,224,91,16]},_B=650,Tf=yl({passive:!0,capture:!0}),aie=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(t,r,o,s){this._platform=t,this._mostRecentTarget=null,this._modality=new xn(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=xs(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<_B||(this._modality.next(m1(a)?"keyboard":"mouse"),this._mostRecentTarget=xs(a))},this._onTouchstart=a=>{if(p1(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=xs(a)},this._options=xe(xe({},sie),s),this.modalityDetected=this._modality.pipe(Ul(1)),this.modalityChanged=this.modalityDetected.pipe(Ac()),t.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,Tf),o.addEventListener("mousedown",this._onMousedown,Tf),o.addEventListener("touchstart",this._onTouchstart,Tf)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Tf),document.removeEventListener("mousedown",this._onMousedown,Tf),document.removeEventListener("touchstart",this._onTouchstart,Tf))}};e.\u0275fac=function(r){return new(r||e)(le(wi),le(Xe),le(_t),le(oie,8))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var ox=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(ox||{}),cie=new Ce("cdk-focus-monitor-default-options"),rx=yl({passive:!0,capture:!0}),ug=(()=>{let e=class e{constructor(t,r,o,s,a){this._ngZone=t,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ht,this._rootNodeFocusAndBlurListener=c=>{let l=xs(c);for(let d=l;d;d=d.parentElement)c.type==="focus"?this._onFocus(c,d):this._onBlur(c,d)},this._document=s,this._detectionMode=a?.detectionMode||ox.IMMEDIATE}monitor(t,r=!1){let o=ws(t);if(!this._platform.isBrowser||o.nodeType!==1)return dt();let s=aB(o)||this._getDocument(),a=this._elementInfo.get(o);if(a)return r&&(a.checkChildren=!0),a.subject;let c={checkChildren:r,subject:new ht,rootNode:s};return this._elementInfo.set(o,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(t){let r=ws(t),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(t,r,o){let s=ws(t),a=this._getDocument().activeElement;s===a?this._getClosestElementsInfo(s).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),typeof s.focus=="function"&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===ox.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused",r==="touch"),t.classList.toggle("cdk-keyboard-focused",r==="keyboard"),t.classList.toggle("cdk-mouse-focused",r==="mouse"),t.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&r,this._detectionMode===ox.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?_B:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(t,r){let o=this._elementInfo.get(r),s=xs(t);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(t,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let r=t.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,rx),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,rx)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ti(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){let r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,rx),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,rx),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,o){this._setClasses(t,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){let r=[];return this._elementInfo.forEach((o,s)=>{(s===t||o.checkChildren&&s.contains(t))&&r.push([s,o])}),r}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let s=t.labels;if(s){for(let a=0;a<s.length;a++)if(s[a].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(le(Xe),le(wi),le(aie),le(_t,8),le(cie,8))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),vB=(()=>{let e=class e{constructor(t,r){this._elementRef=t,this._focusMonitor=r,this._focusOrigin=null,this.cdkFocusChange=new et}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let t=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(t,t.nodeType===1&&t.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(r=>{this._focusOrigin=r,this.cdkFocusChange.emit(r)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(k(Qe),k(ug))},e.\u0275dir=He({type:e,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"],standalone:!0});let n=e;return n})(),Kd=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Kd||{}),mB="cdk-high-contrast-black-on-white",pB="cdk-high-contrast-white-on-black",d1="cdk-high-contrast-active",yB=(()=>{let e=class e{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=re(nx).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Kd.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Kd.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Kd.BLACK_ON_WHITE}return Kd.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(d1,mB,pB),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Kd.BLACK_ON_WHITE?t.add(d1,mB):r===Kd.WHITE_ON_BLACK&&t.add(d1,pB)}}};e.\u0275fac=function(r){return new(r||e)(le(wi),le(_t))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var lie=new Ce("cdk-dir-doc",{providedIn:"root",factory:die});function die(){return re(_t)}var uie=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function hie(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?uie.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var va=(()=>{let e=class e{constructor(t){if(this.value="ltr",this.change=new et,t){let r=t.body?t.body.dir:null,o=t.documentElement?t.documentElement.dir:null;this.value=hie(r||o||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(le(lie,8))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var xl=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({});let n=e;return n})();function mie(){return!0}var pie=new Ce("mat-sanity-checks",{providedIn:"root",factory:mie}),Mi=(()=>{let e=class e{constructor(t,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return dg()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[t]}};e.\u0275fac=function(r){return new(r||e)(le(yB),le(pie,8),le(_t))},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({imports:[xl,xl]});let n=e;return n})();var Eo=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Eo||{}),_1=class{constructor(e,i,t,r=!1){this._renderer=e,this.element=i,this.config=t,this._animationForciblyDisabledThroughCss=r,this.state=Eo.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},wB=yl({passive:!0,capture:!0}),v1=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let i=xs(e);i&&this._events.get(e.type)?.forEach((t,r)=>{(r===i||r.contains(i))&&t.forEach(o=>o.handleEvent(e))})}}addHandler(e,i,t,r){let o=this._events.get(i);if(o){let s=o.get(t);s?s.add(r):o.set(t,new Set([r]))}else this._events.set(i,new Map([[t,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(i,this._delegateEventHandler,wB)})}removeHandler(e,i,t){let r=this._events.get(e);if(!r)return;let o=r.get(i);o&&(o.delete(t),o.size===0&&r.delete(i),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,wB)))}},MB={enterDuration:225,exitDuration:150},gie=800,SB=yl({passive:!0,capture:!0}),RB=["mousedown","touchstart"],TB=["mouseup","mouseleave","touchend","touchcancel"],hg=class hg{constructor(e,i,t,r){this._target=e,this._ngZone=i,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ws(t))}fadeInRipple(e,i,t={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=xe(xe({},MB),t.animation);t.centered&&(e=r.left+r.width/2,i=r.top+r.height/2);let s=t.radius||bie(e,i,r),a=e-r.left,c=i-r.top,l=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${a-s}px`,d.style.top=`${c-s}px`,d.style.height=`${s*2}px`,d.style.width=`${s*2}px`,t.color!=null&&(d.style.backgroundColor=t.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),h=u.transitionProperty,f=u.transitionDuration,p=h==="none"||f==="0s"||f==="0s, 0s"||r.width===0&&r.height===0,b=new _1(this,d,t,p);d.style.transform="scale3d(1, 1, 1)",b.state=Eo.FADING_IN,t.persistent||(this._mostRecentTransientRipple=b);let m=null;return!p&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let g=()=>this._finishRippleTransition(b),v=()=>this._destroyRipple(b);d.addEventListener("transitionend",g),d.addEventListener("transitioncancel",v),m={onTransitionEnd:g,onTransitionCancel:v}}),this._activeRipples.set(b,m),(p||!l)&&this._finishRippleTransition(b),b}fadeOutRipple(e){if(e.state===Eo.FADING_OUT||e.state===Eo.HIDDEN)return;let i=e.element,t=xe(xe({},MB),e.config.animation);i.style.transitionDuration=`${t.exitDuration}ms`,i.style.opacity="0",e.state=Eo.FADING_OUT,(e._animationForciblyDisabledThroughCss||!t.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let i=ws(e);!this._platform.isBrowser||!i||i===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=i,RB.forEach(t=>{hg._eventManager.addHandler(this._ngZone,t,i,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{TB.forEach(i=>{this._triggerElement.addEventListener(i,this,SB)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Eo.FADING_IN?this._startFadeOutTransition(e):e.state===Eo.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let i=e===this._mostRecentTransientRipple,{persistent:t}=e.config;e.state=Eo.VISIBLE,!t&&(!i||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let i=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Eo.HIDDEN,i!==null&&(e.element.removeEventListener("transitionend",i.onTransitionEnd),e.element.removeEventListener("transitioncancel",i.onTransitionCancel)),e.element.remove()}_onMousedown(e){let i=m1(e),t=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+gie;!this._target.rippleDisabled&&!i&&!t&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!p1(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let i=e.changedTouches;if(i)for(let t=0;t<i.length;t++)this.fadeInRipple(i[t].clientX,i[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let i=e.state===Eo.VISIBLE||e.config.terminateOnPointerUp&&e.state===Eo.FADING_IN;!e.config.persistent&&i&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(RB.forEach(i=>hg._eventManager.removeHandler(i,e,this)),this._pointerUpEventsRegistered&&TB.forEach(i=>e.removeEventListener(i,this,SB)))}};hg._eventManager=new v1;var fg=hg;function bie(n,e,i){let t=Math.max(Math.abs(n-i.left),Math.abs(n-i.right)),r=Math.max(Math.abs(e-i.top),Math.abs(e-i.bottom));return Math.sqrt(t*t+r*r)}var Jd=new Ce("mat-ripple-global-options"),mg=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,r,o,s,a){this._elementRef=t,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new fg(this,r,t,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:xe(xe(xe({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,o){return typeof t=="number"?this._rippleRenderer.fadeInRipple(t,r,xe(xe({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,xe(xe({},this.rippleConfig),t))}};e.\u0275fac=function(r){return new(r||e)(k(Qe),k(Xe),k(wi),k(Jd,8),k(Vn,8))},e.\u0275dir=He({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,o){r&2&&Bt("mat-ripple-unbounded",o.unbounded)},inputs:{color:[at.None,"matRippleColor","color"],unbounded:[at.None,"matRippleUnbounded","unbounded"],centered:[at.None,"matRippleCentered","centered"],radius:[at.None,"matRippleRadius","radius"],animation:[at.None,"matRippleAnimation","animation"],disabled:[at.None,"matRippleDisabled","disabled"],trigger:[at.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let n=e;return n})(),eu=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({imports:[Mi,Mi]});let n=e;return n})();var y1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({imports:[Mi]});let n=e;return n})();var x1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({imports:[eu,Mi,y1]});let n=e;return n})(),CB={capture:!0},EB=["focus","click","mouseenter","touchstart"],g1="mat-ripple-loader-uninitialized",b1="mat-ripple-loader-class-name",DB="mat-ripple-loader-centered",cx="mat-ripple-loader-disabled",AB=(()=>{let e=class e{constructor(){this._document=re(_t,{optional:!0}),this._animationMode=re(Vn,{optional:!0}),this._globalRippleOptions=re(Jd,{optional:!0}),this._platform=re(wi),this._ngZone=re(Xe),this._hosts=new Map,this._onInteraction=t=>{if(!(t.target instanceof HTMLElement))return;let o=t.target.closest(`[${g1}]`);o&&this._createRipple(o)},this._ngZone.runOutsideAngular(()=>{for(let t of EB)this._document?.addEventListener(t,this._onInteraction,CB)})}ngOnDestroy(){let t=this._hosts.keys();for(let r of t)this.destroyRipple(r);for(let r of EB)this._document?.removeEventListener(r,this._onInteraction,CB)}configureRipple(t,r){t.setAttribute(g1,""),(r.className||!t.hasAttribute(b1))&&t.setAttribute(b1,r.className||""),r.centered&&t.setAttribute(DB,""),r.disabled&&t.setAttribute(cx,"")}getRipple(t){return this._hosts.get(t)||this._createRipple(t)}setDisabled(t,r){let o=this._hosts.get(t);if(o){o.disabled=r;return}r?t.setAttribute(cx,""):t.removeAttribute(cx)}_createRipple(t){if(!this._document)return;let r=this._hosts.get(t);if(r)return r;t.querySelector(".mat-ripple")?.remove();let o=this._document.createElement("span");o.classList.add("mat-ripple",t.getAttribute(b1)),t.append(o);let s=new mg(new Qe(o),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=t,s.centered=t.hasAttribute(DB),s.disabled=t.hasAttribute(cx),this.attachRipple(t,s),s}attachRipple(t,r){t.removeAttribute(g1),this._hosts.set(t,r)}destroyRipple(t){let r=this._hosts.get(t);r&&(r.ngOnDestroy(),this._hosts.delete(t))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var _ie=["mat-button",""],vie=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],yie=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var xie=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var wie=["mat-icon-button",""],Mie=["*"];var Sie=new Ce("MAT_BUTTON_CONFIG");var Rie=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],IB=(()=>{let e=class e{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}constructor(t,r,o,s){this._elementRef=t,this._platform=r,this._ngZone=o,this._animationMode=s,this._focusMonitor=re(ug),this._rippleLoader=re(AB),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let a=re(Sie,{optional:!0}),c=t.nativeElement,l=c.classList;this.disabledInteractive=a?.disabledInteractive??!1,this._rippleLoader?.configureRipple(c,{className:"mat-mdc-button-ripple"});for(let{attribute:d,mdcClasses:u}of Rie)c.hasAttribute(d)&&l.add(...u)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};e.\u0275fac=function(r){qu()},e.\u0275dir=He({type:e,inputs:{color:"color",disableRipple:[at.HasDecoratorInputTransform,"disableRipple","disableRipple",Si],disabled:[at.HasDecoratorInputTransform,"disabled","disabled",Si],ariaDisabled:[at.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",Si],disabledInteractive:[at.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",Si]},features:[ln]});let n=e;return n})();var lx=(()=>{let e=class e extends IB{constructor(t,r,o,s){super(t,r,o,s)}};e.\u0275fac=function(r){return new(r||e)(k(Qe),k(wi),k(Xe),k(Vn,8))},e.\u0275cmp=L({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,o){r&2&&(Vi("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),Uo(o.color?"mat-"+o.color:""),Bt("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[X,Ei],attrs:_ie,ngContentSelectors:yie,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(ce(vie),he(0,"span",0),ee(1),H(2,"span",1),ee(3,1),ie(),ee(4,2),he(5,"span",2)(6,"span",3)),r&2&&Bt("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let n=e;return n})();var PB=(()=>{let e=class e extends IB{constructor(t,r,o,s){super(t,r,o,s),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}};e.\u0275fac=function(r){return new(r||e)(k(Qe),k(wi),k(Xe),k(Vn,8))},e.\u0275cmp=L({type:e,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(r,o){r&2&&(Vi("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),Uo(o.color?"mat-"+o.color:""),Bt("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[X,Ei],attrs:wie,ngContentSelectors:Mie,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(ce(),he(0,"span",0),ee(1),he(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{color:var(--mdc-icon-button-icon-color)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color)}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color)}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity)}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity)}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity)}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',xie],encapsulation:2,changeDetection:0});let n=e;return n})();var pg=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({imports:[Mi,eu,Mi]});let n=e;return n})();var Tie=["*"],dx;function Cie(){if(dx===void 0&&(dx=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(dx=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return dx}function gg(n){return Cie()?.createHTML(n)||n}function FB(n){return Error(`Unable to find icon with the name "${n}"`)}function Eie(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function jB(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function OB(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var gc=class{constructor(e,i,t){this.url=e,this.svgText=i,this.options=t}},Die=(()=>{let e=class e{constructor(t,r,o,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=o}addSvgIcon(t,r,o){return this.addSvgIconInNamespace("",t,r,o)}addSvgIconLiteral(t,r,o){return this.addSvgIconLiteralInNamespace("",t,r,o)}addSvgIconInNamespace(t,r,o,s){return this._addSvgIconConfig(t,r,new gc(o,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,o,s){let a=this._sanitizer.sanitize(nr.HTML,o);if(!a)throw OB(o);let c=gg(a);return this._addSvgIconConfig(t,r,new gc("",c,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,o){return this._addSvgIconSetConfig(t,new gc(r,null,o))}addSvgIconSetLiteralInNamespace(t,r,o){let s=this._sanitizer.sanitize(nr.HTML,r);if(!s)throw OB(r);let a=gg(s);return this._addSvgIconSetConfig(t,new gc("",a,o))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let r=this._sanitizer.sanitize(nr.RESOURCE_URL,t);if(!r)throw jB(t);let o=this._cachedIconsByUrl.get(r);return o?dt(ux(o)):this._loadSvgIconFromConfig(new gc(t,null)).pipe(Ui(s=>this._cachedIconsByUrl.set(r,s)),st(s=>ux(s)))}getNamedSvgIcon(t,r=""){let o=NB(r,t),s=this._svgIconConfigs.get(o);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(o,s),this._getSvgFromConfig(s);let a=this._iconSetConfigs.get(r);return a?this._getSvgFromIconSetConfigs(t,a):Yr(FB(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?dt(ux(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(st(r=>ux(r)))}_getSvgFromIconSetConfigs(t,r){let o=this._extractIconWithNameFromAnySet(t,r);if(o)return dt(o);let s=r.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(jr(c=>{let d=`Loading icon set URL: ${this._sanitizer.sanitize(nr.RESOURCE_URL,a.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(d)),dt(null)})));return Ll(s).pipe(st(()=>{let a=this._extractIconWithNameFromAnySet(t,r);if(!a)throw FB(t);return a}))}_extractIconWithNameFromAnySet(t,r){for(let o=r.length-1;o>=0;o--){let s=r[o];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){let a=this._svgElementFromConfig(s),c=this._extractSvgIconFromSet(a,t,s.options);if(c)return c}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Ui(r=>t.svgText=r),st(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?dt(null):this._fetchIcon(t).pipe(Ui(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,o){let s=t.querySelector(`[id="${r}"]`);if(!s)return null;let a=s.cloneNode(!0);if(a.removeAttribute("id"),a.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(a,o);if(a.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(a),o);let c=this._svgElementFromString(gg("<svg></svg>"));return c.appendChild(a),this._setSvgAttributes(c,o)}_svgElementFromString(t){let r=this._document.createElement("DIV");r.innerHTML=t;let o=r.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(t){let r=this._svgElementFromString(gg("<svg></svg>")),o=t.attributes;for(let s=0;s<o.length;s++){let{name:a,value:c}=o[s];a!=="id"&&r.setAttribute(a,c)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){let{url:r,options:o}=t,s=o?.withCredentials??!1;if(!this._httpClient)throw Eie();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let a=this._sanitizer.sanitize(nr.RESOURCE_URL,r);if(!a)throw jB(r);let c=this._inProgressUrlFetches.get(a);if(c)return c;let l=this._httpClient.get(a,{responseType:"text",withCredentials:s}).pipe(st(d=>gg(d)),Ds(()=>this._inProgressUrlFetches.delete(a)),Jf());return this._inProgressUrlFetches.set(a,l),l}_addSvgIconConfig(t,r,o){return this._svgIconConfigs.set(NB(t,r),o),this}_addSvgIconSetConfig(t,r){let o=this._iconSetConfigs.get(t);return o?o.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){let r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let o=0;o<this._resolvers.length;o++){let s=this._resolvers[o](r,t);if(s)return Aie(s)?new gc(s.url,null,s.options):new gc(s,null)}}};e.\u0275fac=function(r){return new(r||e)(le(Dm,8),le(km),le(_t,8),le(Lr))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function ux(n){return n.cloneNode(!0)}function NB(n,e){return n+":"+e}function Aie(n){return!!(n.url&&n.options)}var Iie=new Ce("MAT_ICON_DEFAULT_OPTIONS"),Pie=new Ce("mat-icon-location",{providedIn:"root",factory:kie});function kie(){let n=re(_t),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var LB=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Fie=LB.map(n=>`[${n}]`).join(", "),jie=/^url\(['"]?#(.*?)['"]?\)$/,hx=(()=>{let e=class e{get color(){return this._color||this._defaultColor}set color(t){this._color=t}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){let r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){let r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(t,r,o,s,a,c){this._elementRef=t,this._iconRegistry=r,this._location=s,this._errorHandler=a,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=bi.EMPTY,c&&(c.color&&(this.color=this._defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),o||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let o=t.childNodes[r];(o.nodeType!==1||o.nodeName.toLowerCase()==="svg")&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>t.classList.remove(o)),r.forEach(o=>t.classList.add(o)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let r=this._elementsWithExternalReferences;r&&r.forEach((o,s)=>{o.forEach(a=>{s.setAttribute(a.name,`url('${t}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(t){let r=t.querySelectorAll(Fie),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)LB.forEach(a=>{let c=r[s],l=c.getAttribute(a),d=l?l.match(jie):null;if(d){let u=o.get(c);u||(u=[],o.set(c,u)),u.push({name:a,value:d[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[r,o]=this._splitIconName(t);r&&(this._svgNamespace=r),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,r).pipe(Mn(1)).subscribe(s=>this._setSvgElement(s),s=>{let a=`Error retrieving icon ${r}:${o}! ${s.message}`;this._errorHandler.handleError(new Error(a))})}}};e.\u0275fac=function(r){return new(r||e)(k(Qe),k(Die),Nc("aria-hidden"),k(Pie),k(Lr),k(Iie,8))},e.\u0275cmp=L({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,o){r&2&&(Vi("data-mat-icon-type",o._usingFontIcon()?"font":"svg")("data-mat-icon-name",o._svgName||o.fontIcon)("data-mat-icon-namespace",o._svgNamespace||o.fontSet)("fontIcon",o._usingFontIcon()?o.fontIcon:null),Uo(o.color?"mat-"+o.color:""),Bt("mat-icon-inline",o.inline)("mat-icon-no-color",o.color!=="primary"&&o.color!=="accent"&&o.color!=="warn"))},inputs:{color:"color",inline:[at.HasDecoratorInputTransform,"inline","inline",Si],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[ln,Ei],ngContentSelectors:Tie,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0});let n=e;return n})(),bg=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({imports:[Mi,Mi]});let n=e;return n})();var Oie=["*"];var Nie=new Ce("MAT_CARD_CONFIG"),UB=(()=>{let e=class e{constructor(t){this.appearance=t?.appearance||"raised"}};e.\u0275fac=function(r){return new(r||e)(k(Nie,8))},e.\u0275cmp=L({type:e,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(r,o){r&2&&Bt("mat-mdc-card-outlined",o.appearance==="outlined")("mdc-card--outlined",o.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[Ei],ngContentSelectors:Oie,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0});let n=e;return n})();var VB=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=He({type:e,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0});let n=e;return n})();var zB=(()=>{let e=class e{constructor(){this.align="start"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=He({type:e,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(r,o){r&2&&Bt("mat-mdc-card-actions-align-end",o.align==="end")},inputs:{align:"align"},exportAs:["matCardActions"],standalone:!0});let n=e;return n})();var w1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({imports:[Mi,Vo,Mi]});let n=e;return n})();var _g=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},M1=class extends _g{constructor(e,i,t,r,o){super(),this.component=e,this.viewContainerRef=i,this.injector=t,this.componentFactoryResolver=r,this.projectableNodes=o}},tu=class extends _g{constructor(e,i,t,r){super(),this.templateRef=e,this.viewContainerRef=i,this.context=t,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,i=this.context){return this.context=i,super.attach(e)}detach(){return this.context=void 0,super.detach()}},S1=class extends _g{constructor(e){super(),this.element=e instanceof Qe?e.nativeElement:e}},fx=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof M1)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof tu)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof S1)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var mx=class extends fx{constructor(e,i,t,r,o){super(),this.outletElement=e,this._componentFactoryResolver=i,this._appRef=t,this._defaultInjector=r,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}attachComponentPortal(e){let t=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(t,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=t.create(e.injector||this._defaultInjector||pr.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let i=e.viewContainerRef,t=i.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return t.rootNodes.forEach(r=>this.outletElement.appendChild(r)),t.detectChanges(),this.setDisposeFn(()=>{let r=i.indexOf(t);r!==-1&&i.remove(r)}),this._attachedPortal=e,t}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var HB=(()=>{let e=class e extends tu{constructor(t,r){super(t,r)}};e.\u0275fac=function(r){return new(r||e)(k(ir),k(zn))},e.\u0275dir=He({type:e,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],standalone:!0,features:[X]});let n=e;return n})();var px=(()=>{let e=class e extends fx{constructor(t,r,o){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new et,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let c=this._document.createComment("dom-portal");s.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);let r=t.viewContainerRef!=null?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),a=r.createComponent(s,r.length,t.injector||r.injector,t.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=t,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(t){t.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}};e.\u0275fac=function(r){return new(r||e)(k(Bs),k(zn),k(_t))},e.\u0275dir=He({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[at.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[X]});let n=e;return n})();var GB=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({});let n=e;return n})();var Bie=20,Cf=(()=>{let e=class e{constructor(t,r,o){this._ngZone=t,this._platform=r,this._scrolled=new ht,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=Bie){return this._platform.isBrowser?new kt(r=>{this._globalSubscription||this._addGlobalListener();let o=t>0?this._scrolled.pipe(Fb(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):dt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){let o=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(_i(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(t){let r=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let o=ws(r),s=t.getElementRef().nativeElement;do if(o==s)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let t=this._getWindow();return Fo(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(le(Xe),le(wi),le(_t,8))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),wl=(()=>{let e=class e{constructor(t,r,o,s){this.elementRef=t,this.scrollDispatcher=r,this.ngZone=o,this.dir=s,this._destroyed=new ht,this._elementScrolled=new kt(a=>this.ngZone.runOutsideAngular(()=>Fo(this.elementRef.nativeElement,"scroll").pipe(Ti(this._destroyed)).subscribe(a)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){let r=this.elementRef.nativeElement,o=this.dir&&this.dir.value=="rtl";t.left==null&&(t.left=o?t.end:t.start),t.right==null&&(t.right=o?t.start:t.end),t.bottom!=null&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),o&&Mf()!=ys.NORMAL?(t.left!=null&&(t.right=r.scrollWidth-r.clientWidth-t.left),Mf()==ys.INVERTED?t.left=t.right:Mf()==ys.NEGATED&&(t.left=t.right?-t.right:t.right)):t.right!=null&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){let r=this.elementRef.nativeElement;ex()?r.scrollTo(t):(t.top!=null&&(r.scrollTop=t.top),t.left!=null&&(r.scrollLeft=t.left))}measureScrollOffset(t){let r="left",o="right",s=this.elementRef.nativeElement;if(t=="top")return s.scrollTop;if(t=="bottom")return s.scrollHeight-s.clientHeight-s.scrollTop;let a=this.dir&&this.dir.value=="rtl";return t=="start"?t=a?o:r:t=="end"&&(t=a?r:o),a&&Mf()==ys.INVERTED?t==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:a&&Mf()==ys.NEGATED?t==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}};e.\u0275fac=function(r){return new(r||e)(k(Qe),k(Cf),k(Xe),k(va,8))},e.\u0275dir=He({type:e,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0});let n=e;return n})(),Uie=20,Ml=(()=>{let e=class e{constructor(t,r,o){this._platform=t,this._change=new ht,this._changeListener=s=>{this._change.next(s)},this._document=o,r.runOutsideAngular(()=>{if(t.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+o,right:t.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,r=this._getWindow(),o=t.documentElement,s=o.getBoundingClientRect(),a=-s.top||t.body.scrollTop||r.scrollY||o.scrollTop||0,c=-s.left||t.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:a,left:c}}change(t=Uie){return t>0?this._change.pipe(Fb(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(le(wi),le(Xe),le(_t,8))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var iu=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({});let n=e;return n})(),R1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({imports:[xl,iu,xl,iu]});let n=e;return n})();var ei=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(ei||{}),ya="*";function gx(n,e){return{type:ei.Trigger,name:n,definitions:e,options:{}}}function nu(n,e=null){return{type:ei.Animate,styles:e,timings:n}}function WB(n,e=null){return{type:ei.Sequence,steps:n,options:e}}function Xo(n){return{type:ei.Style,styles:n,offset:null}}function ru(n,e,i){return{type:ei.State,name:n,styles:e,options:i}}function ou(n,e,i=null){return{type:ei.Transition,expr:n,animation:e,options:i}}var Sl=class{constructor(e=0,i=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+i}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let i=e=="start"?this._onStartFns:this._onDoneFns;i.forEach(t=>t()),i.length=0}},vg=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let i=0,t=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++i==o&&this._onFinish()}),s.onDestroy(()=>{++t==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let i=e*this.totalTime;this.players.forEach(t=>{let r=t.totalTime?Math.min(1,i/t.totalTime):1;t.setPosition(r)})}getPosition(){let e=this.players.reduce((i,t)=>i===null||t.totalTime>i.totalTime?t:i,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let i=e=="start"?this._onStartFns:this._onDoneFns;i.forEach(t=>t()),i.length=0}},bx="!";var A1=["*"];function Hie(n,e){n&1&&ee(0)}var Gie=["tabListContainer"],Wie=["tabList"],$ie=["tabListInner"],qie=["nextPaginator"],Xie=["previousPaginator"],Yie=n=>({animationDuration:n}),Zie=(n,e)=>({value:n,params:e});function Qie(n,e){}var Kie=["tabBodyWrapper"],Jie=["tabHeader"];function ene(n,e){}function tne(n,e){if(n&1&&Nt(0,ene,0,0,"ng-template",12),n&2){let i=Ut().$implicit;P("cdkPortalOutlet",i.templateLabel)}}function ine(n,e){if(n&1&&Et(0),n&2){let i=Ut().$implicit;Uc(i.textLabel)}}function nne(n,e){if(n&1){let i=Gt();H(0,"div",7,2),Fe("click",function(){let r=ct(i),o=r.$implicit,s=r.$index,a=Ut(),c=Tt(1);return lt(a._handleClick(o,c,s))})("cdkFocusChange",function(r){let o=ct(i).$index,s=Ut();return lt(s._tabFocusChanged(r,o))}),he(2,"span",8)(3,"div",9),H(4,"span",10)(5,"span",11),Nt(6,tne,1,1,null,12)(7,ine,1,1),ie()()()}if(n&2){let i=e.$implicit,t=e.$index,r=Tt(1),o=Ut();Uo(i.labelClass),Bt("mdc-tab--active",o.selectedIndex===t),P("id",o._getTabLabelId(t))("disabled",i.disabled)("fitInkBarToContent",o.fitInkBarToContent),Vi("tabIndex",o._getTabIndex(t))("aria-posinset",t+1)("aria-setsize",o._tabs.length)("aria-controls",o._getTabContentId(t))("aria-selected",o.selectedIndex===t)("aria-label",i.ariaLabel||null)("aria-labelledby",!i.ariaLabel&&i.ariaLabelledby?i.ariaLabelledby:null),j(3),P("matRippleTrigger",r)("matRippleDisabled",i.disabled||o.disableRipple),j(3),bo(6,i.templateLabel?6:7)}}function rne(n,e){n&1&&ee(0)}function one(n,e){if(n&1){let i=Gt();H(0,"mat-tab-body",13),Fe("_onCentered",function(){ct(i);let r=Ut();return lt(r._removeTabBodyWrapperHeight())})("_onCentering",function(r){ct(i);let o=Ut();return lt(o._setTabBodyWrapperHeight(r))}),ie()}if(n&2){let i=e.$implicit,t=e.$index,r=Ut();Uo(i.bodyClass),Bt("mat-mdc-tab-body-active",r.selectedIndex===t),P("id",r._getTabContentId(t))("content",i.content)("position",i.position)("origin",i.origin)("animationDuration",r.animationDuration)("preserveContent",r.preserveContent),Vi("tabindex",r.contentTabIndex!=null&&r.selectedIndex===t?r.contentTabIndex:null)("aria-labelledby",r._getTabLabelId(t))("aria-hidden",r.selectedIndex!==t)}}var sne=new Ce("MatTabContent"),ane=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(r){return new(r||e)(k(ir))},e.\u0275dir=He({type:e,selectors:[["","matTabContent",""]],standalone:!0,features:[oe([{provide:sne,useExisting:e}])]});let n=e;return n})(),cne=new Ce("MatTabLabel"),XB=new Ce("MAT_TAB"),lne=(()=>{let e=class e extends HB{constructor(t,r,o){super(t,r),this._closestTab=o}};e.\u0275fac=function(r){return new(r||e)(k(ir),k(zn),k(XB,8))},e.\u0275dir=He({type:e,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],standalone:!0,features:[oe([{provide:cne,useExisting:e}]),X]});let n=e;return n})(),YB=new Ce("MAT_TAB_GROUP"),I1=(()=>{let e=class e{get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}get content(){return this._contentPortal}constructor(t,r){this._viewContainerRef=t,this._closestTabGroup=r,this.disabled=!1,this._explicitContent=void 0,this.textLabel="",this._contentPortal=null,this._stateChanges=new ht,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new tu(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&t._closestTab===this&&(this._templateLabel=t)}};e.\u0275fac=function(r){return new(r||e)(k(zn),k(YB,8))},e.\u0275cmp=L({type:e,selectors:[["mat-tab"]],contentQueries:function(r,o,s){if(r&1&&(qi(s,lne,5),qi(s,ane,7,ir)),r&2){let a;nt(a=rt())&&(o.templateLabel=a.first),nt(a=rt())&&(o._explicitContent=a.first)}},viewQuery:function(r,o){if(r&1&&Vt(ir,7),r&2){let s;nt(s=rt())&&(o._implicitContent=s.first)}},hostAttrs:["hidden",""],inputs:{disabled:[at.HasDecoratorInputTransform,"disabled","disabled",Si],textLabel:[at.None,"label","textLabel"],ariaLabel:[at.None,"aria-label","ariaLabel"],ariaLabelledby:[at.None,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],standalone:!0,features:[oe([{provide:XB,useExisting:e}]),ln,Un,Ei],ngContentSelectors:A1,decls:1,vars:0,template:function(r,o){r&1&&(ce(),Nt(0,Hie,1,0,"ng-template"))},encapsulation:2});let n=e;return n})(),C1="mdc-tab-indicator--active",$B="mdc-tab-indicator--no-transition",E1=class{constructor(e){this._items=e}hide(){this._items.forEach(e=>e.deactivateInkBar())}alignToElement(e){let i=this._items.find(r=>r.elementRef.nativeElement===e),t=this._currentItem;if(i!==t&&(t?.deactivateInkBar(),i)){let r=t?.elementRef.nativeElement.getBoundingClientRect?.();i.activateInkBar(r),this._currentItem=i}}},dne=(()=>{let e=class e{constructor(){this._elementRef=re(Qe),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(t){this._fitToContent!==t&&(this._fitToContent=t,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(t){let r=this._elementRef.nativeElement;if(!t||!r.getBoundingClientRect||!this._inkBarContentElement){r.classList.add(C1);return}let o=r.getBoundingClientRect(),s=t.width/o.width,a=t.left-o.left;r.classList.add($B),this._inkBarContentElement.style.setProperty("transform",`translateX(${a}px) scaleX(${s})`),r.getBoundingClientRect(),r.classList.remove($B),r.classList.add(C1),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this._elementRef.nativeElement.classList.remove(C1)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){let t=this._elementRef.nativeElement.ownerDocument||document,r=this._inkBarElement=t.createElement("span"),o=this._inkBarContentElement=t.createElement("span");r.className="mdc-tab-indicator",o.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",r.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){this._inkBarElement;let t=this._fitToContent?this._elementRef.nativeElement.querySelector(".mdc-tab__content"):this._elementRef.nativeElement;t.appendChild(this._inkBarElement)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=He({type:e,inputs:{fitInkBarToContent:[at.HasDecoratorInputTransform,"fitInkBarToContent","fitInkBarToContent",Si]},features:[ln]});let n=e;return n})();var ZB=(()=>{let e=class e extends dne{constructor(t){super(),this.elementRef=t,this.disabled=!1}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}};e.\u0275fac=function(r){return new(r||e)(k(Qe))},e.\u0275dir=He({type:e,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(r,o){r&2&&(Vi("aria-disabled",!!o.disabled),Bt("mat-mdc-tab-disabled",o.disabled))},inputs:{disabled:[at.HasDecoratorInputTransform,"disabled","disabled",Si]},standalone:!0,features:[ln,X]});let n=e;return n})(),qB=yl({passive:!0}),une=650,hne=100,fne=(()=>{let e=class e{get selectedIndex(){return this._selectedIndex}set selectedIndex(t){let r=isNaN(t)?0:t;this._selectedIndex!=r&&(this._selectedIndexChanged=!0,this._selectedIndex=r,this._keyManager&&this._keyManager.updateActiveItem(r))}constructor(t,r,o,s,a,c,l){this._elementRef=t,this._changeDetectorRef=r,this._viewportRuler=o,this._dir=s,this._ngZone=a,this._platform=c,this._animationMode=l,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new ht,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new ht,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new et,this.indexFocused=new et,a.runOutsideAngular(()=>{Fo(t.nativeElement,"mouseleave").pipe(Ti(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){Fo(this._previousPaginator.nativeElement,"touchstart",qB).pipe(Ti(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Fo(this._nextPaginator.nativeElement,"touchstart",qB).pipe(Ti(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){let t=this._dir?this._dir.change:dt("ltr"),r=this._viewportRuler.change(150),o=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new sx(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe(Mn(1)).subscribe(o),ts(t,r,this._items.changes,this._itemsResized()).pipe(Ti(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),o()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(s=>{this.indexFocused.emit(s),this._setTabFocus(s)})}_itemsResized(){return typeof ResizeObserver!="function"?mn:this._items.changes.pipe(mo(this._items),An(t=>new kt(r=>this._ngZone.runOutsideAngular(()=>{let o=new ResizeObserver(s=>r.next(s));return t.forEach(s=>o.observe(s.elementRef.nativeElement)),()=>{o.disconnect()}}))),Ul(1),_i(t=>t.some(r=>r.contentRect.width>0&&r.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!Sf(t))switch(t.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){let r=this._items.get(this.focusIndex);r&&!r.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t))}break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){let t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){!this._isValidIndex(t)||this.focusIndex===t||!this._keyManager||this._keyManager.setActiveItem(t)}_isValidIndex(t){return this._items?!!this._items.toArray()[t]:!0}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();let r=this._tabListContainer.nativeElement;this._getLayoutDirection()=="ltr"?r.scrollLeft=0:r.scrollLeft=r.scrollWidth-r.offsetWidth}}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;let t=this.scrollDistance,r=this._getLayoutDirection()==="ltr"?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(r)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){let r=this._tabListContainer.nativeElement.offsetWidth,o=(t=="before"?-1:1)*r/3;return this._scrollTo(this._scrollDistance+o)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;let r=this._items?this._items.toArray()[t]:null;if(!r)return;let o=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:s,offsetWidth:a}=r.elementRef.nativeElement,c,l;this._getLayoutDirection()=="ltr"?(c=s,l=c+a):(l=this._tabListInner.nativeElement.offsetWidth-s,c=l-a);let d=this.scrollDistance,u=this.scrollDistance+o;c<d?this.scrollDistance-=d-c:l>u&&(this.scrollDistance+=Math.min(l-u,c-d))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{let t=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=this.scrollDistance==0,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){let t=this._tabListInner.nativeElement.scrollWidth,r=this._tabListContainer.nativeElement.offsetWidth;return t-r||0}_alignInkBarToSelectedTab(){let t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,r=t?t.elementRef.nativeElement:null;r?this._inkBar.alignToElement(r):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,r){r&&r.button!=null&&r.button!==0||(this._stopInterval(),Kf(une,hne).pipe(Ti(ts(this._stopScrolling,this._destroyed))).subscribe(()=>{let{maxScrollDistance:o,distance:s}=this._scrollHeader(t);(s===0||s>=o)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};let r=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(r,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:r,distance:this._scrollDistance}}};e.\u0275fac=function(r){return new(r||e)(k(Qe),k(Hi),k(Ml),k(va,8),k(Xe),k(wi),k(Vn,8))},e.\u0275dir=He({type:e,inputs:{disablePagination:[at.HasDecoratorInputTransform,"disablePagination","disablePagination",Si],selectedIndex:[at.HasDecoratorInputTransform,"selectedIndex","selectedIndex",td]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[ln]});let n=e;return n})(),mne=(()=>{let e=class e extends fne{constructor(t,r,o,s,a,c,l){super(t,r,o,s,a,c,l),this.disableRipple=!1}ngAfterContentInit(){this._inkBar=new E1(this._items),super.ngAfterContentInit()}_itemSelected(t){t.preventDefault()}};e.\u0275fac=function(r){return new(r||e)(k(Qe),k(Hi),k(Ml),k(va,8),k(Xe),k(wi),k(Vn,8))},e.\u0275cmp=L({type:e,selectors:[["mat-tab-header"]],contentQueries:function(r,o,s){if(r&1&&qi(s,ZB,4),r&2){let a;nt(a=rt())&&(o._items=a)}},viewQuery:function(r,o){if(r&1&&(Vt(Gie,7),Vt(Wie,7),Vt($ie,7),Vt(qie,5),Vt(Xie,5)),r&2){let s;nt(s=rt())&&(o._tabListContainer=s.first),nt(s=rt())&&(o._tabList=s.first),nt(s=rt())&&(o._tabListInner=s.first),nt(s=rt())&&(o._nextPaginator=s.first),nt(s=rt())&&(o._previousPaginator=s.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(r,o){r&2&&Bt("mat-mdc-tab-header-pagination-controls-enabled",o._showPaginationControls)("mat-mdc-tab-header-rtl",o._getLayoutDirection()=="rtl")},inputs:{disableRipple:[at.HasDecoratorInputTransform,"disableRipple","disableRipple",Si]},standalone:!0,features:[ln,X,Ei],ngContentSelectors:A1,decls:13,vars:10,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"click","mousedown","touchend","matRippleDisabled","disabled"],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],[1,"mat-mdc-tab-labels"],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"mousedown","click","touchend","matRippleDisabled","disabled"]],template:function(r,o){if(r&1){let s=Gt();ce(),H(0,"button",5,0),Fe("click",function(){return ct(s),lt(o._handlePaginatorClick("before"))})("mousedown",function(c){return ct(s),lt(o._handlePaginatorPress("before",c))})("touchend",function(){return ct(s),lt(o._stopInterval())}),he(2,"div",6),ie(),H(3,"div",7,1),Fe("keydown",function(c){return ct(s),lt(o._handleKeydown(c))}),H(5,"div",8,2),Fe("cdkObserveContent",function(){return ct(s),lt(o._onContentChanges())}),H(7,"div",9,3),ee(9),ie()()(),H(10,"button",10,4),Fe("mousedown",function(c){return ct(s),lt(o._handlePaginatorPress("after",c))})("click",function(){return ct(s),lt(o._handlePaginatorClick("after"))})("touchend",function(){return ct(s),lt(o._stopInterval())}),he(12,"div",6),ie()}r&2&&(Bt("mat-mdc-tab-header-pagination-disabled",o._disableScrollBefore),P("matRippleDisabled",o._disableScrollBefore||o.disableRipple)("disabled",o._disableScrollBefore||null),j(3),Bt("_mat-animation-noopable",o._animationMode==="NoopAnimations"),j(7),Bt("mat-mdc-tab-header-pagination-disabled",o._disableScrollAfter),P("matRippleDisabled",o._disableScrollAfter||o.disableRipple)("disabled",o._disableScrollAfter||null))},dependencies:[mg,tx],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color)}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}._mat-animation-noopable span.mdc-tab-indicator__content,._mat-animation-noopable span.mdc-tab__text-label{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height);border-bottom-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height);border-top-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2});let n=e;return n})(),pne=new Ce("MAT_TABS_CONFIG"),gne={translateTab:gx("translateTab",[ru("center, void, left-origin-center, right-origin-center",Xo({transform:"none"})),ru("left",Xo({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),ru("right",Xo({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),ou("* => left, * => right, left => center, right => center",nu("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),ou("void => left-origin-center",[Xo({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),nu("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),ou("void => right-origin-center",[Xo({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),nu("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])},bne=(()=>{let e=class e extends px{constructor(t,r,o,s){super(t,r,s),this._host=o,this._centeringSub=bi.EMPTY,this._leavingSub=bi.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(mo(this._host._isCenterPosition(this._host._position))).subscribe(t=>{t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(k(Bs),k(zn),k(ge(()=>QB)),k(_t))},e.\u0275dir=He({type:e,selectors:[["","matTabBodyHost",""]],standalone:!0,features:[X]});let n=e;return n})(),QB=(()=>{let e=class e{set position(t){this._positionIndex=t,this._computePositionAnimationState()}constructor(t,r,o){this._elementRef=t,this._dir=r,this._dirChangeSubscription=bi.EMPTY,this._translateTabComplete=new ht,this._onCentering=new et,this._beforeCentering=new et,this._afterLeavingCenter=new et,this._onCentered=new et(!0),this.animationDuration="500ms",this.preserveContent=!1,r&&(this._dirChangeSubscription=r.change.subscribe(s=>{this._computePositionAnimationState(s),o.markForCheck()})),this._translateTabComplete.pipe(Ac((s,a)=>s.fromState===a.fromState&&s.toState===a.toState)).subscribe(s=>{this._isCenterPosition(s.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(s.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){this._position=="center"&&this.origin!=null&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){let r=this._isCenterPosition(t.toState);this._beforeCentering.emit(r),r&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_isCenterPosition(t){return t=="center"||t=="left-origin-center"||t=="right-origin-center"}_computePositionAnimationState(t=this._getLayoutDirection()){this._positionIndex<0?this._position=t=="ltr"?"left":"right":this._positionIndex>0?this._position=t=="ltr"?"right":"left":this._position="center"}_computePositionFromOrigin(t){let r=this._getLayoutDirection();return r=="ltr"&&t<=0||r=="rtl"&&t>0?"left-origin-center":"right-origin-center"}};e.\u0275fac=function(r){return new(r||e)(k(Qe),k(va,8),k(Hi))},e.\u0275cmp=L({type:e,selectors:[["mat-tab-body"]],viewQuery:function(r,o){if(r&1&&Vt(px,5),r&2){let s;nt(s=rt())&&(o._portalHost=s.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:[at.None,"content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},standalone:!0,features:[Ei],decls:3,vars:6,consts:[["content",""],["cdkScrollable","",1,"mat-mdc-tab-body-content"],["matTabBodyHost",""]],template:function(r,o){if(r&1){let s=Gt();H(0,"div",1,0),Fe("@translateTab.start",function(c){return ct(s),lt(o._onTranslateTabStarted(c))})("@translateTab.done",function(c){return ct(s),lt(o._translateTabComplete.next(c))}),Nt(2,Qie,0,0,"ng-template",2),ie()}r&2&&P("@translateTab",Hn(3,Zie,o._position,gt(1,Yie,o.animationDuration)))},dependencies:[bne,wl],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[gne.translateTab]}});let n=e;return n})(),_ne=0,vne=!0,KB=(()=>{let e=class e{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(t){this._fitInkBarToContent=t,this._changeDetectorRef.markForCheck()}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=isNaN(t)?null:t}get animationDuration(){return this._animationDuration}set animationDuration(t){let r=t+"";this._animationDuration=/^\d+$/.test(r)?t+"ms":r}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(t){this._contentTabIndex=isNaN(t)?null:t}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){if(!vne)throw new Error("mat-tab-group background color must be set through the Sass theming API");let r=this._elementRef.nativeElement.classList;r.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),t&&r.add("mat-tabs-with-background",`mat-background-${t}`),this._backgroundColor=t}constructor(t,r,o,s){this._elementRef=t,this._changeDetectorRef=r,this._animationMode=s,this._tabs=new js,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=bi.EMPTY,this._tabLabelSubscription=bi.EMPTY,this._fitInkBarToContent=!1,this.stretchTabs=!0,this.dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this.disablePagination=!1,this.disableRipple=!1,this.preserveContent=!1,this.selectedIndexChange=new et,this.focusChange=new et,this.animationDone=new et,this.selectedTabChange=new et(!0),this._isServer=!re(wi).isBrowser,this._groupId=_ne++,this.animationDuration=o&&o.animationDuration?o.animationDuration:"500ms",this.disablePagination=o&&o.disablePagination!=null?o.disablePagination:!1,this.dynamicHeight=o&&o.dynamicHeight!=null?o.dynamicHeight:!1,o?.contentTabIndex!=null&&(this.contentTabIndex=o.contentTabIndex),this.preserveContent=!!o?.preserveContent,this.fitInkBarToContent=o&&o.fitInkBarToContent!=null?o.fitInkBarToContent:!1,this.stretchTabs=o&&o.stretchTabs!=null?o.stretchTabs:!0}ngAfterContentChecked(){let t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){let r=this._selectedIndex==null;if(!r){this.selectedTabChange.emit(this._createChangeEvent(t));let o=this._tabBodyWrapper.nativeElement;o.style.minHeight=o.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((o,s)=>o.isActive=s===t),r||(this.selectedIndexChange.emit(t),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((r,o)=>{r.position=o-t,this._selectedIndex!=null&&r.position==0&&!r.origin&&(r.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{let t=this._clampTabIndex(this._indexToSelect);if(t===this._selectedIndex){let r=this._tabs.toArray(),o;for(let s=0;s<r.length;s++)if(r[s].isActive){this._indexToSelect=this._selectedIndex=s,this._lastFocusedTabIndex=null,o=r[s];break}!o&&r[t]&&Promise.resolve().then(()=>{r[t].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(t))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(mo(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(r=>r._closestTabGroup===this||!r._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(t){let r=this._tabHeader;r&&(r.focusIndex=t)}_focusChanged(t){this._lastFocusedTabIndex=t,this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){let r=new D1;return r.index=t,this._tabs&&this._tabs.length&&(r.tab=this._tabs.toArray()[t]),r}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=ts(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this.dynamicHeight||!this._tabBodyWrapperHeight)return;let r=this._tabBodyWrapper.nativeElement;r.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(r.style.height=t+"px")}_removeTabBodyWrapperHeight(){let t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,r,o){r.focusIndex=o,t.disabled||(this.selectedIndex=o)}_getTabIndex(t){let r=this._lastFocusedTabIndex??this.selectedIndex;return t===r?0:-1}_tabFocusChanged(t,r){t&&t!=="mouse"&&t!=="touch"&&(this._tabHeader.focusIndex=r)}};e.\u0275fac=function(r){return new(r||e)(k(Qe),k(Hi),k(pne,8),k(Vn,8))},e.\u0275cmp=L({type:e,selectors:[["mat-tab-group"]],contentQueries:function(r,o,s){if(r&1&&qi(s,I1,5),r&2){let a;nt(a=rt())&&(o._allTabs=a)}},viewQuery:function(r,o){if(r&1&&(Vt(Kie,5),Vt(Jie,5)),r&2){let s;nt(s=rt())&&(o._tabBodyWrapper=s.first),nt(s=rt())&&(o._tabHeader=s.first)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:10,hostBindings:function(r,o){r&2&&(Uo("mat-"+(o.color||"primary")),Bo("--mat-tab-animation-duration",o.animationDuration),Bt("mat-mdc-tab-group-dynamic-height",o.dynamicHeight)("mat-mdc-tab-group-inverted-header",o.headerPosition==="below")("mat-mdc-tab-group-stretch-tabs",o.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[at.HasDecoratorInputTransform,"fitInkBarToContent","fitInkBarToContent",Si],stretchTabs:[at.HasDecoratorInputTransform,"mat-stretch-tabs","stretchTabs",Si],dynamicHeight:[at.HasDecoratorInputTransform,"dynamicHeight","dynamicHeight",Si],selectedIndex:[at.HasDecoratorInputTransform,"selectedIndex","selectedIndex",td],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[at.HasDecoratorInputTransform,"contentTabIndex","contentTabIndex",td],disablePagination:[at.HasDecoratorInputTransform,"disablePagination","disablePagination",Si],disableRipple:[at.HasDecoratorInputTransform,"disableRipple","disableRipple",Si],preserveContent:[at.HasDecoratorInputTransform,"preserveContent","preserveContent",Si],backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],standalone:!0,features:[oe([{provide:YB,useExisting:e}]),ln,Ei],ngContentSelectors:A1,decls:9,vars:6,consts:[["tabHeader",""],["tabBodyWrapper",""],["tabNode",""],[3,"indexFocused","selectFocusedIndex","selectedIndex","disableRipple","disablePagination"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","mdc-tab--active","class","disabled","fitInkBarToContent"],[1,"mat-mdc-tab-body-wrapper"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","class","content","position","origin","animationDuration","preserveContent"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"click","cdkFocusChange","id","disabled","fitInkBarToContent"],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"_onCentered","_onCentering","id","content","position","origin","animationDuration","preserveContent"]],template:function(r,o){if(r&1){let s=Gt();ce(),H(0,"mat-tab-header",3,0),Fe("indexFocused",function(c){return ct(s),lt(o._focusChanged(c))})("selectFocusedIndex",function(c){return ct(s),lt(o.selectedIndex=c)}),Y_(2,nne,8,17,"div",4,X_),ie(),Nt(4,rne,1,0),H(5,"div",5,1),Y_(7,one,1,13,"mat-tab-body",6,X_),ie()}r&2&&(P("selectedIndex",o.selectedIndex||0)("disableRipple",o.disableRipple)("disablePagination",o.disablePagination),j(2),Z_(o._tabs),j(2),bo(4,o._isServer?4:-1),j(),Bt("_mat-animation-noopable",o._animationMode==="NoopAnimations"),j(2),Z_(o._tabs))},dependencies:[mne,ZB,vB,mg,px,QB],styles:['.mdc-tab{min-width:90px;padding-right:24px;padding-left:24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;margin:0;padding-top:0;padding-bottom:0;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;-webkit-appearance:none;z-index:1}.mdc-tab::-moz-focus-inner{padding:0;border:0}.mdc-tab[hidden]{display:none}.mdc-tab--min-width{flex:0 1 auto}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab__icon{transition:150ms color linear;z-index:2}.mdc-tab--stacked .mdc-tab__content{flex-direction:column;align-items:center;justify-content:center}.mdc-tab--stacked .mdc-tab__text-label{padding-top:6px;padding-bottom:4px}.mdc-tab--active .mdc-tab__text-label,.mdc-tab--active .mdc-tab__icon{transition-delay:100ms}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label,.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl]{padding-left:0;padding-right:8px}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator__content--icon{align-self:center;margin:0 auto}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}.mdc-tab-indicator .mdc-tab-indicator__content{transition:250ms transform cubic-bezier(0.4, 0, 0.2, 1)}.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition:150ms opacity linear}.mdc-tab-indicator--active.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition-delay:100ms}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;font-family:var(--mat-tab-header-label-text-font);font-size:var(--mat-tab-header-label-text-size);letter-spacing:var(--mat-tab-header-label-text-tracking);line-height:var(--mat-tab-header-label-text-line-height);font-weight:var(--mat-tab-header-label-text-weight)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-top-width:var(--mdc-tab-indicator-active-indicator-height)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:not(.mdc-tab--stacked){height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab:not(:disabled).mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color)}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color)}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color);display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2});let n=e;return n})(),D1=class{};var P1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({imports:[Mi,Mi]});let n=e;return n})();var j1=new Ce("HIGHLIGHT_OPTIONS");function eU(n){return[{provide:j1,useValue:n}]}var Ef=function(n){return n.FULL_WITH_CORE_LIBRARY_IMPORTS="The full library and the core library were imported, only one of them should be imported!",n.FULL_WITH_LANGUAGE_IMPORTS="The highlighting languages were imported they are not needed!",n.CORE_WITHOUT_LANGUAGE_IMPORTS="The highlighting languages were not imported!",n.LANGUAGE_WITHOUT_CORE_IMPORTS="The core library was not imported!",n.NO_FULL_AND_NO_CORE_IMPORTS="Highlight.js library was not imported!",n}(Ef||{}),xne=(()=>{let e=class e{constructor(){this.document=re(_t),this.isPlatformBrowser=ih(re(Br)),this.options=re(j1,{optional:!0}),this._ready=new xn(null),this.ready=Vw(this._ready.asObservable().pipe(_i(t=>!!t))),this.isPlatformBrowser&&(this.document.defaultView.hljs?this._ready.next(this.document.defaultView.hljs):this._loadLibrary().pipe(An(t=>this.options?.lineNumbersLoader?(this.document.defaultView.hljs=t,this.loadLineNumbers().pipe(Ui(r=>{r.activateLineNumbers(),this._ready.next(t)}))):(this._ready.next(t),mn)),jr(t=>(console.error("[HLJS] ",t),this._ready.error(t),mn))).subscribe(),this.options?.themePath&&this.loadTheme(this.options.themePath))}_loadLibrary(){if(this.options){if(this.options.fullLibraryLoader&&this.options.coreLibraryLoader)return Yr(()=>Ef.FULL_WITH_CORE_LIBRARY_IMPORTS);if(this.options.fullLibraryLoader&&this.options.languages)return Yr(()=>Ef.FULL_WITH_LANGUAGE_IMPORTS);if(this.options.coreLibraryLoader&&!this.options.languages)return Yr(()=>Ef.CORE_WITHOUT_LANGUAGE_IMPORTS);if(!this.options.coreLibraryLoader&&this.options.languages)return Yr(()=>Ef.LANGUAGE_WITHOUT_CORE_IMPORTS);if(this.options.fullLibraryLoader)return this.loadFullLibrary();if(this.options.coreLibraryLoader&&this.options.languages&&Object.keys(this.options.languages).length)return this.loadCoreLibrary().pipe(An(t=>this._loadLanguages(t)))}return Yr(()=>Ef.NO_FULL_AND_NO_CORE_IMPORTS)}_loadLanguages(t){let r=Object.entries(this.options.languages).map(([o,s])=>k1(s()).pipe(Ui(a=>t.registerLanguage(o,a))));return Ll(r).pipe(st(()=>t))}loadCoreLibrary(){return k1(this.options.coreLibraryLoader())}loadFullLibrary(){return k1(this.options.fullLibraryLoader())}loadLineNumbers(){return Fi(this.options.lineNumbersLoader())}setTheme(t){this.isPlatformBrowser&&(this._themeLinkElement?this._themeLinkElement.href=t:this.loadTheme(t))}loadTheme(t){this._themeLinkElement=this.document.createElement("link"),this._themeLinkElement.href=t,this._themeLinkElement.type="text/css",this._themeLinkElement.rel="stylesheet",this._themeLinkElement.media="screen,print",this.document.head.appendChild(this._themeLinkElement)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),k1=n=>Fi(n).pipe(_i(e=>!!e?.default),st(e=>e.default)),wne=(()=>{let e=class e{constructor(){this.loader=re(xne),this.options=re(j1,{optional:!0}),this.hljsSignal=JS(null),this.hljs=Gj(()=>this.hljsSignal()),this.loader.ready.then(t=>{this.hljsSignal.set(t),this.options?.highlightOptions&&t.configure(this.options.highlightOptions)})}highlight(t,r){return yi(this,null,function*(){return(yield this.loader.ready).highlight(t,r)})}highlightAuto(t,r){return yi(this,null,function*(){return(yield this.loader.ready).highlightAuto(t,r)})}highlightElement(t){return yi(this,null,function*(){(yield this.loader.ready).highlightElement(t)})}highlightAll(){return yi(this,null,function*(){(yield this.loader.ready).highlightAll()})}configure(t){return yi(this,null,function*(){(yield this.loader.ready).configure(t)})}registerLanguage(t,r){return yi(this,null,function*(){(yield this.loader.ready).registerLanguage(t,r)})}unregisterLanguage(t){return yi(this,null,function*(){(yield this.loader.ready).unregisterLanguage(t)})}registerAliases(o,s){return yi(this,arguments,function*(t,{languageName:r}){(yield this.loader.ready).registerAliases(t,{languageName:r})})}listLanguages(){return yi(this,null,function*(){return(yield this.loader.ready).listLanguages()})}getLanguage(t){return yi(this,null,function*(){return(yield this.loader.ready).getLanguage(t)})}safeMode(){return yi(this,null,function*(){(yield this.loader.ready).safeMode()})}debugMode(){return yi(this,null,function*(){(yield this.loader.ready).debugMode()})}lineNumbersBlock(t,r){return yi(this,null,function*(){let o=yield this.loader.ready;o.lineNumbersBlock&&o.lineNumbersBlock(t,r)})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),F1;function Mne(){if(!F1)try{F1=window?.trustedTypes?.createPolicy("ngx-highlightjs",{createHTML:n=>n})}catch{}return F1}function Sne(n){return Mne()?.createHTML(n)||n}var JB=(()=>{let e=class e{constructor(){this._hljs=re(wne),this._nativeElement=re(Qe).nativeElement,this._sanitizer=re(km),this._platform=re(Br),ih(this._platform)&&(Ju(()=>{let t=this.code();this.setTextContent(t||""),t&&this.highlightElement(t)}),Ju(()=>{let t=this.highlightResult();this.setInnerHTML(t?.value),this.highlighted.emit(t)}))}setTextContent(t){requestAnimationFrame(()=>this._nativeElement.textContent=t)}setInnerHTML(t){requestAnimationFrame(()=>this._nativeElement.innerHTML=Sne(this._sanitizer.sanitize(nr.HTML,t)||""))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=He({type:e});let n=e;return n})(),tU=(()=>{let e=class e extends JB{constructor(){super(...arguments),this.code=lF(null,{alias:"highlight"}),this.highlightResult=JS(null),this.highlighted=new et}highlightElement(t){return yi(this,null,function*(){let r=yield this._hljs.highlight(t,{language:this.language,ignoreIllegals:this.ignoreIllegals});this.highlightResult.set(r)})}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275dir=He({type:e,selectors:[["","highlight",""]],hostVars:2,hostBindings:function(r,o){r&2&&Bt("hljs",!0)},inputs:{code:[at.SignalBased,"highlight","code"],language:"language",ignoreIllegals:[at.HasDecoratorInputTransform,"ignoreIllegals","ignoreIllegals",Si]},outputs:{highlighted:"highlighted"},standalone:!0,features:[oe([{provide:JB,useExisting:e}]),ln,X]});let n=e;return n})();var iU=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({});let n=e;return n})();function nU(n){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!]))?/.test(n)}var Tne=new Ce("GIST_OPTIONS");var Cne=(()=>{let e=class e{constructor(){this._http=re(Dm),this._options=re(Tne,{optional:!0})}getCodeFromGist(t){let r;return this._options?.clientId&&this._options?.clientSecret&&(r=new Ws().set("client_id",this._options.clientId).set("client_secret",this._options.clientSecret)),this.fetchFile(`https://api.github.com/gists/${t}`,{params:r,responseType:"json"})}getCodeFromUrl(t){return this.fetchFile(t,{responseType:"text"})}fetchFile(t,r){return nU(t)?this._http.get(t,r).pipe(Bl(1),jr(o=>(console.error("[NgxHighlight]: Unable to fetch the URL!",o.message),mn))):mn}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Ene=new Ce("HIGHLIGHT_FILE_LOCATION",{providedIn:"root",factory:Dne});function Dne(){let n=re(_t)?.location;return{getPathname:()=>n?n.origin:""}}var rU=(()=>{let e=class e{constructor(){this._location=re(Ene),this._loader=re(Cne)}transform(t){return this._loader.getCodeFromUrl(nU(t)?t:`${this._location.getPathname()}/${t}`)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Oo({name:"codeFromUrl",type:e,pure:!0,standalone:!0});let n=e;return n})(),oU=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({});let n=e;return n})();function Ine(n,e){if(n&1&&(H(0,"mat-tab",5)(1,"pre"),Et(2,"            "),he(3,"code",6),ji(4,"codeFromUrl"),ji(5,"async"),Et(6,`
        `),ie()()),n&2){let i=e.$implicit,t=e.index,r=Ut();P("label",r.fileNames[t]),j(3),P("highlight",zi(5,5,zi(4,3,i)))("language",r.getLanguage(r.fileNames[t]))}}var sU=(()=>{let e=class e{constructor(t){this.editorService=t,this.fileNames=[],this.lineNumbers=!1}set codeUrls(t){this.editorService.setUrls(t),this.fileNames=this.editorService.fileNames}get codeUrls(){return this.editorService.urls}getLanguage(t){return this.editorService.getLanguage(t)}};e.\u0275fac=function(r){return new(r||e)(k(ba))},e.\u0275cmp=L({type:e,selectors:[["app-code"]],inputs:{codeUrls:"codeUrls",lineNumbers:"lineNumbers"},decls:14,vars:1,consts:[[1,"code-wrapper","hljs"],["dynamicHeight","","color","primary","backgroundColor","primary"],[3,"label",4,"ngFor","ngForOf"],["align","end"],["mat-button","","href","#",1,"gist-url",3,"click"],[3,"label"],[3,"highlight","language"]],template:function(r,o){r&1&&(H(0,"mat-card")(1,"mat-card-content")(2,"div",0)(3,"mat-tab-group",1),Nt(4,Ine,7,7,"mat-tab",2),ie()()(),H(5,"mat-card-actions",3)(6,"button",4),Fe("click",function(a){return o.editorService.toCodeSandbox(a)}),H(7,"mat-icon"),Et(8,"crop_din"),ie(),Et(9," CodeSandbox "),ie(),H(10,"button",4),Fe("click",function(a){return o.editorService.toStackblitz(a)}),H(11,"mat-icon"),Et(12,"bolt"),ie(),Et(13," Stackblitz "),ie()()()),r&2&&(j(4),P("ngForOf",o.codeUrls))},dependencies:[Kr,lx,hx,UB,zB,VB,I1,KB,tU,dv,rU],styles:["pre[_ngcontent-%COMP%]{display:flex;margin-top:0;margin-bottom:0;word-wrap:break-word}pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{flex:1;line-height:1.8em;font-size:14px;min-height:100%;padding:1em 1.2em}pre[_ngcontent-%COMP%]   code.hljs-line-numbers[_ngcontent-%COMP%]{padding:0}.mat-mdc-card[_ngcontent-%COMP%]{padding:0;margin-bottom:3em}.mat-card-header[_ngcontent-%COMP%]{margin:0!important;padding:0!important;display:flex;align-items:center;height:40px}.mat-card-content[_ngcontent-%COMP%]{position:relative;overflow:hidden;padding:1px;margin-bottom:0}.mat-card-footer[_ngcontent-%COMP%]{padding:10px!important;margin:0!important;display:flex;flex-direction:row-reverse}.mat-card-footer[_ngcontent-%COMP%]   .gist-url[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:300;font-size:13px;text-decoration:unset}.mat-card-footer[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.mat-icon[_ngcontent-%COMP%]{margin:0 3px}.code-wrapper[_ngcontent-%COMP%]{border-radius:3px 3px 0 0}  .hljs{padding:0;border:none;transition:border ease 1s}  .hljs-ln{padding:10px 0}  .hljs-ln tr:first-child td{padding-top:10px!important}  .hljs-ln tr:last-child td{padding-bottom:10px!important}  td.hljs-ln-numbers{-webkit-user-select:none;user-select:none;text-align:center;color:#cccccc6b;border-right:1px solid rgba(204,204,204,.1098039216);vertical-align:top;padding-right:10px!important;padding-left:10px!important}  td.hljs-ln-code{padding-left:10px!important}"],changeDetection:0});let n=e;return n})();function kne(n,e){n&1&&Yu(0)}var aU=(()=>{let e=class e{constructor(t,r){this.editorService=t,this.route=r,this.exampleComponent=null,this.codeUrls=this.route.snapshot.data.codeUrls??[],this.editorService.declarations=this.route.snapshot.data.declarations,this.exampleComponent=this.route.snapshot.data.exampleComponent}};e.\u0275fac=function(r){return new(r||e)(k(ba),k(Va))},e.\u0275cmp=L({type:e,selectors:[["app-example-page"]],decls:3,vars:3,consts:[[1,"example-container"],[4,"ngComponentOutlet"],[3,"lineNumbers","codeUrls"]],template:function(r,o){r&1&&(H(0,"div",0),Nt(1,kne,1,0,"ng-container",1),ie(),he(2,"app-code",2)),r&2&&(j(),P("ngComponentOutlet",o.exampleComponent),j(),P("lineNumbers",!0)("codeUrls",o.codeUrls))},dependencies:[iO,sU]});let n=e;return n})();var an=class{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}},Fne=new Ro(-1,1,1,-1,0,1),O1=class extends ft{constructor(){super(),this.setAttribute("position",new We([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new We([0,2,0,0,2,0],2))}},jne=new O1,lr=class{constructor(e){this._mesh=new Le(jne,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Fne)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}};var dr={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};var Df=class extends an{constructor(e,i){super(),this.textureID=i!==void 0?i:"tDiffuse",e instanceof Dt?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Li.clone(e.uniforms),this.material=new Dt({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new lr(this.material)}render(e,i,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}};var yg=class extends an{constructor(e,i){super(),this.scene=e,this.camera=i,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,i,t){let r=e.getContext(),o=e.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0);let s,a;this.inverse?(s=0,a=1):(s=1,a=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),o.buffers.stencil.setFunc(r.ALWAYS,s,4294967295),o.buffers.stencil.setClear(a),o.buffers.stencil.setLocked(!0),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.color.setMask(!0),o.buffers.depth.setMask(!0),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(r.EQUAL,1,4294967295),o.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),o.buffers.stencil.setLocked(!0)}},_x=class extends an{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}};var vx=class{constructor(e,i){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),i===void 0){let t=e.getSize(new z);this._width=t.width,this._height=t.height,i=new oi(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Wi}),i.texture.name="EffectComposer.rt1"}else this._width=i.width,this._height=i.height;this.renderTarget1=i,this.renderTarget2=i.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Df(dr),this.copyPass.material.blending=Qt,this.clock=new ro}swapBuffers(){let e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,i){this.passes.splice(i,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){let i=this.passes.indexOf(e);i!==-1&&this.passes.splice(i,1)}isLastEnabledPass(e){for(let i=e+1;i<this.passes.length;i++)if(this.passes[i].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());let i=this.renderer.getRenderTarget(),t=!1;for(let r=0,o=this.passes.length;r<o;r++){let s=this.passes[r];if(s.enabled!==!1){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),s.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),s.needsSwap){if(t){let a=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}yg!==void 0&&(s instanceof yg?t=!0:s instanceof _x&&(t=!1))}}this.renderer.setRenderTarget(i)}reset(e){if(e===void 0){let i=this.renderer.getSize(new z);this._pixelRatio=this.renderer.getPixelRatio(),this._width=i.width,this._height=i.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,i){this._width=e,this._height=i;let t=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(t,r),this.renderTarget2.setSize(t,r);for(let o=0;o<this.passes.length;o++)this.passes[o].setSize(t,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}};var One=["*"],cU=(()=>{let e=class e extends $r{getType(){return vx}set renderer(t){this._objRef&&(this._objRef.renderer=t)}get renderer(){return this._objRef?.renderer}set renderTarget1(t){this._objRef&&(this._objRef.renderTarget1=t)}get renderTarget1(){return this._objRef?.renderTarget1}set renderTarget2(t){this._objRef&&(this._objRef.renderTarget2=t)}get renderTarget2(){return this._objRef?.renderTarget2}set writeBuffer(t){this._objRef&&(this._objRef.writeBuffer=t)}get writeBuffer(){return this._objRef?.writeBuffer}set readBuffer(t){this._objRef&&(this._objRef.readBuffer=t)}get readBuffer(){return this._objRef?.readBuffer}set passes(t){this._objRef&&(this._objRef.passes=t)}get passes(){return this._objRef?.passes}set copyPass(t){this._objRef&&(this._objRef.copyPass=t)}get copyPass(){return this._objRef?.copyPass}set clock(t){this._objRef&&(this._objRef.clock=t)}get clock(){return this._objRef?.clock}set renderToScreen(t){this._objRef&&(this._objRef.renderToScreen=t)}get renderToScreen(){return this._objRef?.renderToScreen}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-effectComposerGen"]],inputs:{renderer:"renderer",renderTarget1:"renderTarget1",renderTarget2:"renderTarget2",writeBuffer:"writeBuffer",readBuffer:"readBuffer",passes:"passes",copyPass:"copyPass",clock:"clock",renderToScreen:"renderToScreen"},features:[oe([]),X],ngContentSelectors:One,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Nne=["*"],xa=(()=>{let e=class e extends cU{constructor(t,r){super(),this.view=t,this.engineService=r}createThreeInstance(t){return t||(t=new Array(5)),t[0]=t[0]??this.engineService.wegblRenderer,t[1]=t[1]??this.initRenderTarget(),super.createThreeInstance(t)}initRenderTarget(){if(this.view.viewPort){let t,r;return this.view.viewPort instanceof xi?(t=this.view.viewPort.z,r=this.view.viewPort?.width):(t=this.view.viewPort.width,r=this.view.viewPort.height),new oi(t,r)}else return}addToParent(){this._objRef&&(this.view.effectComposer=this._objRef)}removeFromParent(){this.view.effectComposer=void 0}};e.\u0275fac=function(r){return new(r||e)(k(Ir),k(ao))},e.\u0275cmp=L({type:e,selectors:[["th-effectComposer"]],features:[oe([]),X],ngContentSelectors:Nne,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var ui=(()=>{let e=class e extends $r{constructor(t){super(),this.effectComposer=t}addToParent(){this._objRef&&this.effectComposer&&this.effectComposer.objRef&&this.effectComposer.objRef.addPass(this._objRef)}removeFromParent(){this._objRef&&this.effectComposer&&this.effectComposer.objRef&&this.effectComposer.objRef.removePass(this._objRef)}};e.\u0275fac=function(r){return new(r||e)(k(xa,8))},e.\u0275cmp=L({type:e,selectors:[["th-abs-control"]],features:[X],decls:0,vars:0,template:function(r,o){},encapsulation:2});let n=e;return n})();var Lne=["*"],Ii=(()=>{let e=class e extends ui{getType(){return an}set isPass(t){this._objRef&&(this._objRef.isPass=t)}get isPass(){return this._objRef?.isPass}set enabled(t){this._objRef&&(this._objRef.enabled=t)}get enabled(){return this._objRef?.enabled}set needsSwap(t){this._objRef&&(this._objRef.needsSwap=t)}get needsSwap(){return this._objRef?.needsSwap}set clear(t){this._objRef&&(this._objRef.clear=t)}get clear(){return this._objRef?.clear}set renderToScreen(t){this._objRef&&(this._objRef.renderToScreen=t)}get renderToScreen(){return this._objRef?.renderToScreen}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-pass"]],inputs:{isPass:"isPass",enabled:"enabled",needsSwap:"needsSwap",clear:"clear",renderToScreen:"renderToScreen"},features:[oe([{provide:ui,useExisting:ge(()=>e)}]),X],ngContentSelectors:Lne,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var xt={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},Bi={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},ti={x:0,y:0},Do={camera:new je,gizmos:new je},tn={type:"change"},Ss={type:"start"},Yo={type:"end"},Bne=new Wr,qn=new M,lU=new je,dU=new je,Ms=new M,yx=class extends kn{constructor(e,i,t=null){super(),this.camera=null,this.domElement=i,this.scene=t,this.target=new M,this._currentTarget=new M,this.radiusFactor=.67,this.mouseActions=[],this._mouseOp=null,this._v2_1=new z,this._v3_1=new M,this._v3_2=new M,this._m4_1=new je,this._m4_2=new je,this._quat=new Kt,this._translationMatrix=new je,this._rotationMatrix=new je,this._scaleMatrix=new je,this._rotationAxis=new M,this._cameraMatrixState=new je,this._cameraProjectionState=new je,this._fovState=1,this._upState=new M,this._zoomState=1,this._nearPos=0,this._farPos=0,this._gizmoMatrixState=new je,this._up0=new M,this._zoom0=1,this._fov0=0,this._initialNear=0,this._nearPos0=0,this._initialFar=0,this._farPos0=0,this._cameraMatrixState0=new je,this._gizmoMatrixState0=new je,this._button=-1,this._touchStart=[],this._touchCurrent=[],this._input=Bi.NONE,this._switchSensibility=32,this._startFingerDistance=0,this._currentFingerDistance=0,this._startFingerRotation=0,this._currentFingerRotation=0,this._devPxRatio=0,this._downValid=!0,this._nclicks=0,this._downEvents=[],this._downStart=0,this._clickStart=0,this._maxDownTime=250,this._maxInterval=300,this._posThreshold=24,this._movementThreshold=24,this._currentCursorPosition=new M,this._startCursorPosition=new M,this._grid=null,this._gridPosition=new M,this._gizmos=new Tr,this._curvePts=128,this._timeStart=-1,this._animationId=-1,this.focusAnimationTime=500,this._timePrev=0,this._timeCurrent=0,this._anglePrev=0,this._angleCurrent=0,this._cursorPosPrev=new M,this._cursorPosCurr=new M,this._wPrev=0,this._wCurr=0,this.adjustNearFar=!1,this.scaleFactor=1.1,this.dampingFactor=25,this.wMax=20,this.enableAnimations=!0,this.enableGrid=!1,this.cursorZoom=!1,this.minFov=5,this.maxFov=90,this.rotateSpeed=1,this.enabled=!0,this.enablePan=!0,this.enableRotate=!0,this.enableZoom=!0,this.enableGizmos=!0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this._tbRadius=1,this._state=xt.IDLE,this.setCamera(e),this.scene!=null&&this.scene.add(this._gizmos),this.domElement.style.touchAction="none",this._devPxRatio=window.devicePixelRatio,this.initializeMouseActions(),this._onContextMenu=Vne.bind(this),this._onWheel=$ne.bind(this),this._onPointerUp=Wne.bind(this),this._onPointerMove=Gne.bind(this),this._onPointerDown=Hne.bind(this),this._onPointerCancel=zne.bind(this),this._onWindowResize=Une.bind(this),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onWheel),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),window.addEventListener("resize",this._onWindowResize)}onSinglePanStart(e,i){if(this.enabled)switch(this.dispatchEvent(Ss),this.setCenter(e.clientX,e.clientY),i){case"PAN":if(!this.enablePan)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(tn)),this.updateTbState(xt.PAN,!0),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.camera,ti.x,ti.y,this.domElement)),this.enableGrid&&(this.drawGrid(),this.dispatchEvent(tn));break;case"ROTATE":if(!this.enableRotate)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1),this.updateTbState(xt.ROTATE,!0),this._startCursorPosition.copy(this.unprojectOnTbSurface(this.camera,ti.x,ti.y,this.domElement,this._tbRadius)),this.activateGizmos(!0),this.enableAnimations&&(this._timePrev=this._timeCurrent=performance.now(),this._angleCurrent=this._anglePrev=0,this._cursorPosPrev.copy(this._startCursorPosition),this._cursorPosCurr.copy(this._cursorPosPrev),this._wCurr=0,this._wPrev=this._wCurr),this.dispatchEvent(tn);break;case"FOV":if(!this.camera.isPerspectiveCamera||!this.enableZoom)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(tn)),this.updateTbState(xt.FOV,!0),this._startCursorPosition.setY(this.getCursorNDC(ti.x,ti.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition);break;case"ZOOM":if(!this.enableZoom)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(tn)),this.updateTbState(xt.SCALE,!0),this._startCursorPosition.setY(this.getCursorNDC(ti.x,ti.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition);break}}onSinglePanMove(e,i){if(this.enabled){let t=i!=this._state;switch(this.setCenter(e.clientX,e.clientY),i){case xt.PAN:this.enablePan&&(t?(this.dispatchEvent(Yo),this.dispatchEvent(Ss),this.updateTbState(i,!0),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.camera,ti.x,ti.y,this.domElement)),this.enableGrid&&this.drawGrid(),this.activateGizmos(!1)):(this._currentCursorPosition.copy(this.unprojectOnTbPlane(this.camera,ti.x,ti.y,this.domElement)),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition))));break;case xt.ROTATE:if(this.enableRotate)if(t)this.dispatchEvent(Yo),this.dispatchEvent(Ss),this.updateTbState(i,!0),this._startCursorPosition.copy(this.unprojectOnTbSurface(this.camera,ti.x,ti.y,this.domElement,this._tbRadius)),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!0);else{this._currentCursorPosition.copy(this.unprojectOnTbSurface(this.camera,ti.x,ti.y,this.domElement,this._tbRadius));let r=this._startCursorPosition.distanceTo(this._currentCursorPosition),o=this._startCursorPosition.angleTo(this._currentCursorPosition),s=Math.max(r/this._tbRadius,o)*this.rotateSpeed;this.applyTransformMatrix(this.rotate(this.calculateRotationAxis(this._startCursorPosition,this._currentCursorPosition),s)),this.enableAnimations&&(this._timePrev=this._timeCurrent,this._timeCurrent=performance.now(),this._anglePrev=this._angleCurrent,this._angleCurrent=s,this._cursorPosPrev.copy(this._cursorPosCurr),this._cursorPosCurr.copy(this._currentCursorPosition),this._wPrev=this._wCurr,this._wCurr=this.calculateAngularSpeed(this._anglePrev,this._angleCurrent,this._timePrev,this._timeCurrent))}break;case xt.SCALE:if(this.enableZoom)if(t)this.dispatchEvent(Yo),this.dispatchEvent(Ss),this.updateTbState(i,!0),this._startCursorPosition.setY(this.getCursorNDC(ti.x,ti.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(ti.x,ti.y,this.domElement).y*.5);let o=this._currentCursorPosition.y-this._startCursorPosition.y,s=1;o<0?s=1/Math.pow(this.scaleFactor,-o*8):o>0&&(s=Math.pow(this.scaleFactor,o*8)),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this.applyTransformMatrix(this.scale(s,this._v3_1))}break;case xt.FOV:if(this.enableZoom&&this.camera.isPerspectiveCamera)if(t)this.dispatchEvent(Yo),this.dispatchEvent(Ss),this.updateTbState(i,!0),this._startCursorPosition.setY(this.getCursorNDC(ti.x,ti.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(ti.x,ti.y,this.domElement).y*.5);let o=this._currentCursorPosition.y-this._startCursorPosition.y,s=1;o<0?s=1/Math.pow(this.scaleFactor,-o*8):o>0&&(s=Math.pow(this.scaleFactor,o*8)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);let a=this._v3_1.distanceTo(this._gizmos.position),c=a/s;c=tt.clamp(c,this.minDistance,this.maxDistance);let l=a*Math.tan(tt.DEG2RAD*this._fovState*.5),d=tt.RAD2DEG*(Math.atan(l/c)*2);d=tt.clamp(d,this.minFov,this.maxFov);let u=l/Math.tan(tt.DEG2RAD*(d/2));s=a/u,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.scale(s,this._v3_2,!1)),qn.copy(this._gizmos.position).sub(this.camera.position).normalize().multiplyScalar(u/a),this._m4_1.makeTranslation(qn.x,qn.y,qn.z)}break}this.dispatchEvent(tn)}}onSinglePanEnd(){if(this._state==xt.ROTATE){if(!this.enableRotate)return;if(this.enableAnimations)if(performance.now()-this._timeCurrent<120){let i=Math.abs((this._wPrev+this._wCurr)/2),t=this;this._animationId=window.requestAnimationFrame(function(r){t.updateTbState(xt.ANIMATION_ROTATE,!0);let o=t.calculateRotationAxis(t._cursorPosPrev,t._cursorPosCurr);t.onRotationAnim(r,o,Math.min(i,t.wMax))})}else this.updateTbState(xt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(tn);else this.updateTbState(xt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(tn)}else(this._state==xt.PAN||this._state==xt.IDLE)&&(this.updateTbState(xt.IDLE,!1),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1),this.dispatchEvent(tn));this.dispatchEvent(Yo)}onDoubleTap(e){if(this.enabled&&this.enablePan&&this.scene!=null){this.dispatchEvent(Ss),this.setCenter(e.clientX,e.clientY);let i=this.unprojectOnObj(this.getCursorNDC(ti.x,ti.y,this.domElement),this.camera);if(i!=null&&this.enableAnimations){let t=this;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),this._timeStart=-1,this._animationId=window.requestAnimationFrame(function(r){t.updateTbState(xt.ANIMATION_FOCUS,!0),t.onFocusAnim(r,i,t._cameraMatrixState,t._gizmoMatrixState)})}else i!=null&&!this.enableAnimations&&(this.updateTbState(xt.FOCUS,!0),this.focus(i,this.scaleFactor),this.updateTbState(xt.IDLE,!1),this.dispatchEvent(tn))}this.dispatchEvent(Yo)}onDoublePanStart(){this.enabled&&this.enablePan&&(this.dispatchEvent(Ss),this.updateTbState(xt.PAN,!0),this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.camera,ti.x,ti.y,this.domElement,!0)),this._currentCursorPosition.copy(this._startCursorPosition),this.activateGizmos(!1))}onDoublePanMove(){this.enabled&&this.enablePan&&(this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=xt.PAN&&(this.updateTbState(xt.PAN,!0),this._startCursorPosition.copy(this._currentCursorPosition)),this._currentCursorPosition.copy(this.unprojectOnTbPlane(this.camera,ti.x,ti.y,this.domElement,!0)),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition,!0)),this.dispatchEvent(tn))}onDoublePanEnd(){this.updateTbState(xt.IDLE,!1),this.dispatchEvent(Yo)}onRotateStart(){this.enabled&&this.enableRotate&&(this.dispatchEvent(Ss),this.updateTbState(xt.ZROTATE,!0),this._startFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this._currentFingerRotation=this._startFingerRotation,this.camera.getWorldDirection(this._rotationAxis),!this.enablePan&&!this.enableZoom&&this.activateGizmos(!0))}onRotateMove(){if(this.enabled&&this.enableRotate){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let e;this._state!=xt.ZROTATE&&(this.updateTbState(xt.ZROTATE,!0),this._startFingerRotation=this._currentFingerRotation),this._currentFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this.enablePan?(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),e=this.unprojectOnTbPlane(this.camera,ti.x,ti.y,this.domElement).applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._v3_2)):e=new M().setFromMatrixPosition(this._gizmoMatrixState);let i=tt.DEG2RAD*(this._startFingerRotation-this._currentFingerRotation);this.applyTransformMatrix(this.zRotate(e,i)),this.dispatchEvent(tn)}}onRotateEnd(){this.updateTbState(xt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Yo)}onPinchStart(){this.enabled&&this.enableZoom&&(this.dispatchEvent(Ss),this.updateTbState(xt.SCALE,!0),this._startFingerDistance=this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),this._currentFingerDistance=this._startFingerDistance,this.activateGizmos(!1))}onPinchMove(){if(this.enabled&&this.enableZoom){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let e=12;this._state!=xt.SCALE&&(this._startFingerDistance=this._currentFingerDistance,this.updateTbState(xt.SCALE,!0)),this._currentFingerDistance=Math.max(this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),e*this._devPxRatio);let i=this._currentFingerDistance/this._startFingerDistance,t;this.enablePan?this.camera.isOrthographicCamera?t=this.unprojectOnTbPlane(this.camera,ti.x,ti.y,this.domElement).applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera.isPerspectiveCamera&&(t=this.unprojectOnTbPlane(this.camera,ti.x,ti.y,this.domElement).applyQuaternion(this.camera.quaternion).add(this._gizmos.position)):t=this._gizmos.position,this.applyTransformMatrix(this.scale(i,t)),this.dispatchEvent(tn)}}onPinchEnd(){this.updateTbState(xt.IDLE,!1),this.dispatchEvent(Yo)}onTriplePanStart(){if(this.enabled&&this.enableZoom){this.dispatchEvent(Ss),this.updateTbState(xt.SCALE,!0);let e=0,i=0,t=this._touchCurrent.length;for(let r=0;r<t;r++)e+=this._touchCurrent[r].clientX,i+=this._touchCurrent[r].clientY;this.setCenter(e/t,i/t),this._startCursorPosition.setY(this.getCursorNDC(ti.x,ti.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition)}}onTriplePanMove(){if(this.enabled&&this.enableZoom){let e=0,i=0,t=this._touchCurrent.length;for(let h=0;h<t;h++)e+=this._touchCurrent[h].clientX,i+=this._touchCurrent[h].clientY;this.setCenter(e/t,i/t);let r=8;this._currentCursorPosition.setY(this.getCursorNDC(ti.x,ti.y,this.domElement).y*.5);let o=this._currentCursorPosition.y-this._startCursorPosition.y,s=1;o<0?s=1/Math.pow(this.scaleFactor,-o*r):o>0&&(s=Math.pow(this.scaleFactor,o*r)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);let a=this._v3_1.distanceTo(this._gizmos.position),c=a/s;c=tt.clamp(c,this.minDistance,this.maxDistance);let l=a*Math.tan(tt.DEG2RAD*this._fovState*.5),d=tt.RAD2DEG*(Math.atan(l/c)*2);d=tt.clamp(d,this.minFov,this.maxFov);let u=l/Math.tan(tt.DEG2RAD*(d/2));s=a/u,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.scale(s,this._v3_2,!1)),qn.copy(this._gizmos.position).sub(this.camera.position).normalize().multiplyScalar(u/a),this._m4_1.makeTranslation(qn.x,qn.y,qn.z),this.dispatchEvent(tn)}}onTriplePanEnd(){this.updateTbState(xt.IDLE,!1),this.dispatchEvent(Yo)}setCenter(e,i){ti.x=e,ti.y=i}initializeMouseActions(){this.setMouseAction("PAN",0,"CTRL"),this.setMouseAction("PAN",2),this.setMouseAction("ROTATE",0),this.setMouseAction("ZOOM","WHEEL"),this.setMouseAction("ZOOM",1),this.setMouseAction("FOV","WHEEL","SHIFT"),this.setMouseAction("FOV",1,"SHIFT")}compareMouseAction(e,i){return e.operation==i.operation?e.mouse==i.mouse&&e.key==i.key:!1}setMouseAction(e,i,t=null){let r=["PAN","ROTATE","ZOOM","FOV"],o=[0,1,2,"WHEEL"],s=["CTRL","SHIFT",null],a;if(!r.includes(e)||!o.includes(i)||!s.includes(t)||i=="WHEEL"&&e!="ZOOM"&&e!="FOV")return!1;switch(e){case"PAN":a=xt.PAN;break;case"ROTATE":a=xt.ROTATE;break;case"ZOOM":a=xt.SCALE;break;case"FOV":a=xt.FOV;break}let c={operation:e,mouse:i,key:t,state:a};for(let l=0;l<this.mouseActions.length;l++)if(this.mouseActions[l].mouse==c.mouse&&this.mouseActions[l].key==c.key)return this.mouseActions.splice(l,1,c),!0;return this.mouseActions.push(c),!0}unsetMouseAction(e,i=null){for(let t=0;t<this.mouseActions.length;t++)if(this.mouseActions[t].mouse==e&&this.mouseActions[t].key==i)return this.mouseActions.splice(t,1),!0;return!1}getOpFromAction(e,i){let t;for(let r=0;r<this.mouseActions.length;r++)if(t=this.mouseActions[r],t.mouse==e&&t.key==i)return t.operation;if(i!=null){for(let r=0;r<this.mouseActions.length;r++)if(t=this.mouseActions[r],t.mouse==e&&t.key==null)return t.operation}return null}getOpStateFromAction(e,i){let t;for(let r=0;r<this.mouseActions.length;r++)if(t=this.mouseActions[r],t.mouse==e&&t.key==i)return t.state;if(i!=null){for(let r=0;r<this.mouseActions.length;r++)if(t=this.mouseActions[r],t.mouse==e&&t.key==null)return t.state}return null}getAngle(e,i){return Math.atan2(i.clientY-e.clientY,i.clientX-e.clientX)*180/Math.PI}updateTouchEvent(e){for(let i=0;i<this._touchCurrent.length;i++)if(this._touchCurrent[i].pointerId==e.pointerId){this._touchCurrent.splice(i,1,e);break}}applyTransformMatrix(e){if(e.camera!=null&&(this._m4_1.copy(this._cameraMatrixState).premultiply(e.camera),this._m4_1.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.updateMatrix(),(this._state==xt.ROTATE||this._state==xt.ZROTATE||this._state==xt.ANIMATION_ROTATE)&&this.camera.up.copy(this._upState).applyQuaternion(this.camera.quaternion)),e.gizmos!=null&&(this._m4_1.copy(this._gizmoMatrixState).premultiply(e.gizmos),this._m4_1.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix()),this._state==xt.SCALE||this._state==xt.FOCUS||this._state==xt.ANIMATION_FOCUS)if(this._tbRadius=this.calculateTbRadius(this.camera),this.adjustNearFar){let i=this.camera.position.distanceTo(this._gizmos.position),t=new vn;t.setFromObject(this._gizmos);let r=new Tn;t.getBoundingSphere(r);let o=Math.max(this._nearPos0,r.radius+r.center.length()),s=i-this._initialNear,a=Math.min(o,s);this.camera.near=i-a;let c=Math.min(this._farPos0,-r.radius+r.center.length()),l=i-this._initialFar,d=Math.min(c,l);this.camera.far=i-d,this.camera.updateProjectionMatrix()}else{let i=!1;this.camera.near!=this._initialNear&&(this.camera.near=this._initialNear,i=!0),this.camera.far!=this._initialFar&&(this.camera.far=this._initialFar,i=!0),i&&this.camera.updateProjectionMatrix()}}calculateAngularSpeed(e,i,t,r){let o=i-e,s=(r-t)/1e3;return s==0?0:o/s}calculatePointersDistance(e,i){return Math.sqrt(Math.pow(i.clientX-e.clientX,2)+Math.pow(i.clientY-e.clientY,2))}calculateRotationAxis(e,i){return this._rotationMatrix.extractRotation(this._cameraMatrixState),this._quat.setFromRotationMatrix(this._rotationMatrix),this._rotationAxis.crossVectors(e,i).applyQuaternion(this._quat),this._rotationAxis.normalize().clone()}calculateTbRadius(e){let i=e.position.distanceTo(this._gizmos.position);if(e.type=="PerspectiveCamera"){let t=tt.DEG2RAD*e.fov*.5,r=Math.atan(e.aspect*Math.tan(t));return Math.tan(Math.min(t,r))*i*this.radiusFactor}else if(e.type=="OrthographicCamera")return Math.min(e.top,e.right)*this.radiusFactor}focus(e,i,t=1){qn.copy(e).sub(this._gizmos.position).multiplyScalar(t),this._translationMatrix.makeTranslation(qn.x,qn.y,qn.z),lU.copy(this._gizmoMatrixState),this._gizmoMatrixState.premultiply(this._translationMatrix),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),dU.copy(this._cameraMatrixState),this._cameraMatrixState.premultiply(this._translationMatrix),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.enableZoom&&this.applyTransformMatrix(this.scale(i,this._gizmos.position)),this._gizmoMatrixState.copy(lU),this._cameraMatrixState.copy(dU)}drawGrid(){if(this.scene!=null){let t,r,o,s;if(this.camera.isOrthographicCamera){let a=this.camera.right-this.camera.left,c=this.camera.bottom-this.camera.top;o=Math.max(a,c),s=o/20,t=o/this.camera.zoom*3,r=t/s*this.camera.zoom}else if(this.camera.isPerspectiveCamera){let a=this.camera.position.distanceTo(this._gizmos.position),c=tt.DEG2RAD*this.camera.fov*.5,l=Math.atan(this.camera.aspect*Math.tan(c));o=Math.tan(Math.max(c,l))*a*2,s=o/20,t=o*3,r=t/s}this._grid==null&&(this._grid=new Vd(t,r,8947848,8947848),this._grid.position.copy(this._gizmos.position),this._gridPosition.copy(this._grid.position),this._grid.quaternion.copy(this.camera.quaternion),this._grid.rotateX(Math.PI*.5),this.scene.add(this._grid))}}dispose(){this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),window.removeEventListener("resize",this._onWindowResize),this.scene!==null&&this.scene.remove(this._gizmos),this.disposeGrid()}disposeGrid(){this._grid!=null&&this.scene!=null&&(this.scene.remove(this._grid),this._grid=null)}easeOutCubic(e){return 1-Math.pow(1-e,3)}activateGizmos(e){let i=this._gizmos.children[0],t=this._gizmos.children[1],r=this._gizmos.children[2];e?(i.material.setValues({opacity:1}),t.material.setValues({opacity:1}),r.material.setValues({opacity:1})):(i.material.setValues({opacity:.6}),t.material.setValues({opacity:.6}),r.material.setValues({opacity:.6}))}getCursorNDC(e,i,t){let r=t.getBoundingClientRect();return this._v2_1.setX((e-r.left)/r.width*2-1),this._v2_1.setY((r.bottom-i)/r.height*2-1),this._v2_1.clone()}getCursorPosition(e,i,t){return this._v2_1.copy(this.getCursorNDC(e,i,t)),this._v2_1.x*=(this.camera.right-this.camera.left)*.5,this._v2_1.y*=(this.camera.top-this.camera.bottom)*.5,this._v2_1.clone()}setCamera(e){e.lookAt(this.target),e.updateMatrix(),e.type=="PerspectiveCamera"&&(this._fov0=e.fov,this._fovState=e.fov),this._cameraMatrixState0.copy(e.matrix),this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraProjectionState.copy(e.projectionMatrix),this._zoom0=e.zoom,this._zoomState=this._zoom0,this._initialNear=e.near,this._nearPos0=e.position.distanceTo(this.target)-e.near,this._nearPos=this._initialNear,this._initialFar=e.far,this._farPos0=e.position.distanceTo(this.target)-e.far,this._farPos=this._initialFar,this._up0.copy(e.up),this._upState.copy(e.up),this.camera=e,this.camera.updateProjectionMatrix(),this._tbRadius=this.calculateTbRadius(e),this.makeGizmos(this.target,this._tbRadius)}setGizmosVisible(e){this._gizmos.visible=e,this.dispatchEvent(tn)}setTbRadius(e){this.radiusFactor=e,this._tbRadius=this.calculateTbRadius(this.camera);let t=new ms(0,0,this._tbRadius,this._tbRadius).getPoints(this._curvePts),r=new ft().setFromPoints(t);for(let o in this._gizmos.children)this._gizmos.children[o].geometry=r;this.dispatchEvent(tn)}makeGizmos(e,i){let r=new ms(0,0,i,i).getPoints(this._curvePts),o=new ft().setFromPoints(r),s=new rn({color:16744576,fog:!1,transparent:!0,opacity:.6}),a=new rn({color:8454016,fog:!1,transparent:!0,opacity:.6}),c=new rn({color:8421631,fog:!1,transparent:!0,opacity:.6}),l=new Yi(o,s),d=new Yi(o,a),u=new Yi(o,c),h=Math.PI*.5;if(l.rotation.x=h,d.rotation.y=h,this._gizmoMatrixState0.identity().setPosition(e),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this.camera.zoom!==1){let f=1/this.camera.zoom;this._scaleMatrix.makeScale(f,f,f),this._translationMatrix.makeTranslation(-e.x,-e.y,-e.z),this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix),this._translationMatrix.makeTranslation(e.x,e.y,e.z),this._gizmoMatrixState.premultiply(this._translationMatrix)}this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.traverse(function(f){f.isLine&&(f.geometry.dispose(),f.material.dispose())}),this._gizmos.clear(),this._gizmos.add(l),this._gizmos.add(d),this._gizmos.add(u)}onFocusAnim(e,i,t,r){if(this._timeStart==-1&&(this._timeStart=e),this._state==xt.ANIMATION_FOCUS){let s=(e-this._timeStart)/this.focusAnimationTime;if(this._gizmoMatrixState.copy(r),s>=1)this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(i,this.scaleFactor),this._timeStart=-1,this.updateTbState(xt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(tn);else{let a=this.easeOutCubic(s),c=1-a+this.scaleFactor*a;this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(i,c,a),this.dispatchEvent(tn);let l=this;this._animationId=window.requestAnimationFrame(function(d){l.onFocusAnim(d,i,t,r.clone())})}}else this._animationId=-1,this._timeStart=-1}onRotationAnim(e,i,t){if(this._timeStart==-1&&(this._anglePrev=0,this._angleCurrent=0,this._timeStart=e),this._state==xt.ANIMATION_ROTATE){let r=(e-this._timeStart)/1e3;if(t+-this.dampingFactor*r>0){this._angleCurrent=.5*-this.dampingFactor*Math.pow(r,2)+t*r+0,this.applyTransformMatrix(this.rotate(i,this._angleCurrent)),this.dispatchEvent(tn);let s=this;this._animationId=window.requestAnimationFrame(function(a){s.onRotationAnim(a,i,t)})}else this._animationId=-1,this._timeStart=-1,this.updateTbState(xt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(tn)}else this._animationId=-1,this._timeStart=-1,this._state!=xt.ROTATE&&(this.activateGizmos(!1),this.dispatchEvent(tn))}pan(e,i,t=!1){let r=e.clone().sub(i);if(this.camera.isOrthographicCamera)r.multiplyScalar(1/this.camera.zoom);else if(this.camera.isPerspectiveCamera&&t){this._v3_1.setFromMatrixPosition(this._cameraMatrixState0),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0);let o=this._v3_1.distanceTo(this._v3_2)/this.camera.position.distanceTo(this._gizmos.position);r.multiplyScalar(1/o)}return this._v3_1.set(r.x,r.y,0).applyQuaternion(this.camera.quaternion),this._m4_1.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z),this.setTransformationMatrices(this._m4_1,this._m4_1),Do}reset(){this.camera.zoom=this._zoom0,this.camera.isPerspectiveCamera&&(this.camera.fov=this._fov0),this.camera.near=this._nearPos,this.camera.far=this._farPos,this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(this._up0),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this._gizmoMatrixState0.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix(),this._tbRadius=this.calculateTbRadius(this.camera),this.makeGizmos(this._gizmos.position,this._tbRadius),this.camera.lookAt(this._gizmos.position),this.updateTbState(xt.IDLE,!1),this.dispatchEvent(tn)}rotate(e,i){let t=this._gizmos.position;return this._translationMatrix.makeTranslation(-t.x,-t.y,-t.z),this._rotationMatrix.makeRotationAxis(e,-i),this._m4_1.makeTranslation(t.x,t.y,t.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1),Do}copyState(){let e;this.camera.isOrthographicCamera?e=JSON.stringify({arcballState:{cameraFar:this.camera.far,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}}):this.camera.isPerspectiveCamera&&(e=JSON.stringify({arcballState:{cameraFar:this.camera.far,cameraFov:this.camera.fov,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}})),navigator.clipboard.writeText(e)}pasteState(){let e=this;navigator.clipboard.readText().then(function(t){e.setStateFromJSON(t)})}saveState(){this._cameraMatrixState0.copy(this.camera.matrix),this._gizmoMatrixState0.copy(this._gizmos.matrix),this._nearPos=this.camera.near,this._farPos=this.camera.far,this._zoom0=this.camera.zoom,this._up0.copy(this.camera.up),this.camera.isPerspectiveCamera&&(this._fov0=this.camera.fov)}scale(e,i,t=!0){Ms.copy(i);let r=1/e;if(this.camera.isOrthographicCamera){this.camera.zoom=this._zoomState,this.camera.zoom*=e,this.camera.zoom>this.maxZoom?(this.camera.zoom=this.maxZoom,r=this._zoomState/this.maxZoom):this.camera.zoom<this.minZoom&&(this.camera.zoom=this.minZoom,r=this._zoomState/this.minZoom),this.camera.updateProjectionMatrix(),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this._scaleMatrix.makeScale(r,r,r),this._translationMatrix.makeTranslation(-this._v3_1.x,-this._v3_1.y,-this._v3_1.z),this._m4_2.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z).multiply(this._scaleMatrix),this._m4_2.multiply(this._translationMatrix),Ms.sub(this._v3_1);let o=Ms.clone().multiplyScalar(r);return Ms.sub(o),this._m4_1.makeTranslation(Ms.x,Ms.y,Ms.z),this._m4_2.premultiply(this._m4_1),this.setTransformationMatrices(this._m4_1,this._m4_2),Do}else if(this.camera.isPerspectiveCamera){this._v3_1.setFromMatrixPosition(this._cameraMatrixState),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);let o=this._v3_1.distanceTo(Ms),s=o-o*r,a=o-s;if(a<this.minDistance?(r=this.minDistance/o,s=o-o*r):a>this.maxDistance&&(r=this.maxDistance/o,s=o-o*r),qn.copy(Ms).sub(this._v3_1).normalize().multiplyScalar(s),this._m4_1.makeTranslation(qn.x,qn.y,qn.z),t){let c=this._v3_2;o=c.distanceTo(Ms),s=o-o*r,qn.copy(Ms).sub(this._v3_2).normalize().multiplyScalar(s),this._translationMatrix.makeTranslation(c.x,c.y,c.z),this._scaleMatrix.makeScale(r,r,r),this._m4_2.makeTranslation(qn.x,qn.y,qn.z).multiply(this._translationMatrix),this._m4_2.multiply(this._scaleMatrix),this._translationMatrix.makeTranslation(-c.x,-c.y,-c.z),this._m4_2.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1,this._m4_2)}else this.setTransformationMatrices(this._m4_1);return Do}}setFov(e){this.camera.isPerspectiveCamera&&(this.camera.fov=tt.clamp(e,this.minFov,this.maxFov),this.camera.updateProjectionMatrix())}setTransformationMatrices(e=null,i=null){e!=null?Do.camera!=null?Do.camera.copy(e):Do.camera=e.clone():Do.camera=null,i!=null?Do.gizmos!=null?Do.gizmos.copy(i):Do.gizmos=i.clone():Do.gizmos=null}zRotate(e,i){return this._rotationMatrix.makeRotationAxis(this._rotationAxis,i),this._translationMatrix.makeTranslation(-e.x,-e.y,-e.z),this._m4_1.makeTranslation(e.x,e.y,e.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(e),this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis,i),this._v3_2.sub(this._v3_1),this._m4_2.makeTranslation(this._v3_2.x,this._v3_2.y,this._v3_2.z),this.setTransformationMatrices(this._m4_1,this._m4_2),Do}getRaycaster(){return Bne}unprojectOnObj(e,i){let t=this.getRaycaster();t.near=i.near,t.far=i.far,t.setFromCamera(e,i);let r=t.intersectObjects(this.scene.children,!0);for(let o=0;o<r.length;o++)if(r[o].object.uuid!=this._gizmos.uuid&&r[o].face!=null)return r[o].point.clone();return null}unprojectOnTbSurface(e,i,t,r,o){if(e.type=="OrthographicCamera"){this._v2_1.copy(this.getCursorPosition(i,t,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0);let s=Math.pow(this._v2_1.x,2),a=Math.pow(this._v2_1.y,2),c=Math.pow(this._tbRadius,2);return s+a<=c*.5?this._v3_1.setZ(Math.sqrt(c-(s+a))):this._v3_1.setZ(c*.5/Math.sqrt(s+a)),this._v3_1}else if(e.type=="PerspectiveCamera"){this._v2_1.copy(this.getCursorNDC(i,t,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(e.projectionMatrixInverse);let s=this._v3_1.clone().normalize(),a=e.position.distanceTo(this._gizmos.position),c=Math.pow(o,2),l=this._v3_1.z,d=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));if(d==0)return s.set(this._v3_1.x,this._v3_1.y,o),s;let u=l/d,h=a,f=Math.pow(u,2)+1,p=2*u*h,b=Math.pow(h,2)-c,m=Math.pow(p,2)-4*f*b;if(m>=0&&(this._v2_1.setX((-p-Math.sqrt(m))/(2*f)),this._v2_1.setY(u*this._v2_1.x+h),tt.RAD2DEG*this._v2_1.angle()>=45)){let _=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(a-this._v2_1.y,2));return s.multiplyScalar(_),s.z+=a,s}f=u,p=h,b=-c*.5,m=Math.pow(p,2)-4*f*b,this._v2_1.setX((-p-Math.sqrt(m))/(2*f)),this._v2_1.setY(u*this._v2_1.x+h);let g=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(a-this._v2_1.y,2));return s.multiplyScalar(g),s.z+=a,s}}unprojectOnTbPlane(e,i,t,r,o=!1){if(e.type=="OrthographicCamera")return this._v2_1.copy(this.getCursorPosition(i,t,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0),this._v3_1.clone();if(e.type=="PerspectiveCamera"){this._v2_1.copy(this.getCursorNDC(i,t,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(e.projectionMatrixInverse);let s=this._v3_1.clone().normalize(),a=this._v3_1.z,c=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2)),l;if(o?l=this._v3_1.setFromMatrixPosition(this._cameraMatrixState0).distanceTo(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0)):l=e.position.distanceTo(this._gizmos.position),c==0)return s.set(0,0,0),s;let d=a/c,u=l,h=-u/d,f=Math.sqrt(Math.pow(u,2)+Math.pow(h,2));return s.multiplyScalar(f),s.z=0,s}}updateMatrixState(){this._cameraMatrixState.copy(this.camera.matrix),this._gizmoMatrixState.copy(this._gizmos.matrix),this.camera.isOrthographicCamera?(this._cameraProjectionState.copy(this.camera.projectionMatrix),this.camera.updateProjectionMatrix(),this._zoomState=this.camera.zoom):this.camera.isPerspectiveCamera&&(this._fovState=this.camera.fov)}updateTbState(e,i){this._state=e,i&&this.updateMatrixState()}update(){if(this.target.equals(this._currentTarget)===!1&&(this._gizmos.position.copy(this.target),this._tbRadius=this.calculateTbRadius(this.camera),this.makeGizmos(this.target,this._tbRadius),this._currentTarget.copy(this.target)),this.camera.isOrthographicCamera){if(this.camera.zoom>this.maxZoom||this.camera.zoom<this.minZoom){let i=tt.clamp(this.camera.zoom,this.minZoom,this.maxZoom);this.applyTransformMatrix(this.scale(i/this.camera.zoom,this._gizmos.position,!0))}}else if(this.camera.isPerspectiveCamera){let i=this.camera.position.distanceTo(this._gizmos.position);if(i>this.maxDistance+1e-6||i<this.minDistance-1e-6){let r=tt.clamp(i,this.minDistance,this.maxDistance);this.applyTransformMatrix(this.scale(r/i,this._gizmos.position)),this.updateMatrixState()}(this.camera.fov<this.minFov||this.camera.fov>this.maxFov)&&(this.camera.fov=tt.clamp(this.camera.fov,this.minFov,this.maxFov),this.camera.updateProjectionMatrix());let t=this._tbRadius;if(this._tbRadius=this.calculateTbRadius(this.camera),t<this._tbRadius-1e-6||t>this._tbRadius+1e-6){let r=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3,o=this._tbRadius/r,a=new ms(0,0,o,o).getPoints(this._curvePts),c=new ft().setFromPoints(a);for(let l in this._gizmos.children)this._gizmos.children[l].geometry=c}}this.camera.lookAt(this._gizmos.position)}setStateFromJSON(e){let i=JSON.parse(e);if(i.arcballState!=null){this._cameraMatrixState.fromArray(i.arcballState.cameraMatrix.elements),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(i.arcballState.cameraUp),this.camera.near=i.arcballState.cameraNear,this.camera.far=i.arcballState.cameraFar,this.camera.zoom=i.arcballState.cameraZoom,this.camera.isPerspectiveCamera&&(this.camera.fov=i.arcballState.cameraFov),this._gizmoMatrixState.fromArray(i.arcballState.gizmoMatrix.elements),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmos.updateMatrix(),this._tbRadius=this.calculateTbRadius(this.camera);let t=new je().copy(this._gizmoMatrixState0);this.makeGizmos(this._gizmos.position,this._tbRadius),this._gizmoMatrixState0.copy(t),this.camera.lookAt(this._gizmos.position),this.updateTbState(xt.IDLE,!1),this.dispatchEvent(tn)}}};function Une(){let n=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3;this._tbRadius=this.calculateTbRadius(this.camera);let e=this._tbRadius/n,t=new ms(0,0,e,e).getPoints(this._curvePts),r=new ft().setFromPoints(t);for(let o in this._gizmos.children)this._gizmos.children[o].geometry=r;this.dispatchEvent(tn)}function Vne(n){if(this.enabled){for(let e=0;e<this.mouseActions.length;e++)if(this.mouseActions[e].mouse==2){n.preventDefault();break}}}function zne(){this._touchStart.splice(0,this._touchStart.length),this._touchCurrent.splice(0,this._touchCurrent.length),this._input=Bi.NONE}function Hne(n){if(n.button==0&&n.isPrimary?(this._downValid=!0,this._downEvents.push(n),this._downStart=performance.now()):this._downValid=!1,n.pointerType=="touch"&&this._input!=Bi.CURSOR)switch(this._touchStart.push(n),this._touchCurrent.push(n),this._input){case Bi.NONE:this._input=Bi.ONE_FINGER,this.onSinglePanStart(n,"ROTATE"),window.addEventListener("pointermove",this._onPointerMove),window.addEventListener("pointerup",this._onPointerUp);break;case Bi.ONE_FINGER:case Bi.ONE_FINGER_SWITCHED:this._input=Bi.TWO_FINGER,this.onRotateStart(),this.onPinchStart(),this.onDoublePanStart();break;case Bi.TWO_FINGER:this._input=Bi.MULT_FINGER,this.onTriplePanStart(n);break}else if(n.pointerType!="touch"&&this._input==Bi.NONE){let e=null;n.ctrlKey||n.metaKey?e="CTRL":n.shiftKey&&(e="SHIFT"),this._mouseOp=this.getOpFromAction(n.button,e),this._mouseOp!=null&&(window.addEventListener("pointermove",this._onPointerMove),window.addEventListener("pointerup",this._onPointerUp),this._input=Bi.CURSOR,this._button=n.button,this.onSinglePanStart(n,this._mouseOp))}}function Gne(n){if(n.pointerType=="touch"&&this._input!=Bi.CURSOR)switch(this._input){case Bi.ONE_FINGER:this.updateTouchEvent(n),this.onSinglePanMove(n,xt.ROTATE);break;case Bi.ONE_FINGER_SWITCHED:if(this.calculatePointersDistance(this._touchCurrent[0],n)*this._devPxRatio>=this._switchSensibility){this._input=Bi.ONE_FINGER,this.updateTouchEvent(n),this.onSinglePanStart(n,"ROTATE");break}break;case Bi.TWO_FINGER:this.updateTouchEvent(n),this.onRotateMove(),this.onPinchMove(),this.onDoublePanMove();break;case Bi.MULT_FINGER:this.updateTouchEvent(n),this.onTriplePanMove(n);break}else if(n.pointerType!="touch"&&this._input==Bi.CURSOR){let e=null;n.ctrlKey||n.metaKey?e="CTRL":n.shiftKey&&(e="SHIFT");let i=this.getOpStateFromAction(this._button,e);i!=null&&this.onSinglePanMove(n,i)}this._downValid&&this.calculatePointersDistance(this._downEvents[this._downEvents.length-1],n)*this._devPxRatio>this._movementThreshold&&(this._downValid=!1)}function Wne(n){if(n.pointerType=="touch"&&this._input!=Bi.CURSOR){let e=this._touchCurrent.length;for(let i=0;i<e;i++)if(this._touchCurrent[i].pointerId==n.pointerId){this._touchCurrent.splice(i,1),this._touchStart.splice(i,1);break}switch(this._input){case Bi.ONE_FINGER:case Bi.ONE_FINGER_SWITCHED:window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=Bi.NONE,this.onSinglePanEnd();break;case Bi.TWO_FINGER:this.onDoublePanEnd(n),this.onPinchEnd(n),this.onRotateEnd(n),this._input=Bi.ONE_FINGER_SWITCHED;break;case Bi.MULT_FINGER:this._touchCurrent.length==0&&(window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=Bi.NONE,this.onTriplePanEnd());break}}else n.pointerType!="touch"&&this._input==Bi.CURSOR&&(window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=Bi.NONE,this.onSinglePanEnd(),this._button=-1);if(n.isPrimary)if(this._downValid)if(n.timeStamp-this._downEvents[this._downEvents.length-1].timeStamp<=this._maxDownTime)if(this._nclicks==0)this._nclicks=1,this._clickStart=performance.now();else{let i=n.timeStamp-this._clickStart,t=this.calculatePointersDistance(this._downEvents[1],this._downEvents[0])*this._devPxRatio;i<=this._maxInterval&&t<=this._posThreshold?(this._nclicks=0,this._downEvents.splice(0,this._downEvents.length),this.onDoubleTap(n)):(this._nclicks=1,this._downEvents.shift(),this._clickStart=performance.now())}else this._downValid=!1,this._nclicks=0,this._downEvents.splice(0,this._downEvents.length);else this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)}function $ne(n){if(this.enabled&&this.enableZoom){let e=null;n.ctrlKey||n.metaKey?e="CTRL":n.shiftKey&&(e="SHIFT");let i=this.getOpFromAction("WHEEL",e);if(i!=null){n.preventDefault(),this.dispatchEvent(Ss);let t=125,r=n.deltaY/t,o=1;switch(r>0?o=1/this.scaleFactor:r<0&&(o=this.scaleFactor),i){case"ZOOM":if(this.updateTbState(xt.SCALE,!0),r>0?o=1/Math.pow(this.scaleFactor,r):r<0&&(o=Math.pow(this.scaleFactor,-r)),this.cursorZoom&&this.enablePan){let s;this.camera.isOrthographicCamera?s=this.unprojectOnTbPlane(this.camera,n.clientX,n.clientY,this.domElement).applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera.isPerspectiveCamera&&(s=this.unprojectOnTbPlane(this.camera,n.clientX,n.clientY,this.domElement).applyQuaternion(this.camera.quaternion).add(this._gizmos.position)),this.applyTransformMatrix(this.scale(o,s))}else this.applyTransformMatrix(this.scale(o,this._gizmos.position));this._grid!=null&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(xt.IDLE,!1),this.dispatchEvent(tn),this.dispatchEvent(Yo);break;case"FOV":if(this.camera.isPerspectiveCamera){this.updateTbState(xt.FOV,!0),n.deltaX!=0&&(r=n.deltaX/t,o=1,r>0?o=1/Math.pow(this.scaleFactor,r):r<0&&(o=Math.pow(this.scaleFactor,-r))),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);let s=this._v3_1.distanceTo(this._gizmos.position),a=s/o;a=tt.clamp(a,this.minDistance,this.maxDistance);let c=s*Math.tan(tt.DEG2RAD*this.camera.fov*.5),l=tt.RAD2DEG*(Math.atan(c/a)*2);l>this.maxFov?l=this.maxFov:l<this.minFov&&(l=this.minFov);let d=c/Math.tan(tt.DEG2RAD*(l/2));o=s/d,this.setFov(l),this.applyTransformMatrix(this.scale(o,this._gizmos.position,!1))}this._grid!=null&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(xt.IDLE,!1),this.dispatchEvent(tn),this.dispatchEvent(Yo);break}}}}var qne=["*"],uU=(()=>{let e=class e extends en{getType(){return yx}set camera(t){this._objRef&&(this._objRef.camera=t)}get camera(){return this._objRef?.camera}set domElement(t){this._objRef&&(this._objRef.domElement=t)}get domElement(){return this._objRef?.domElement}set scene(t){this._objRef&&(this._objRef.scene=t)}get scene(){return this._objRef?.scene}set focusAnimationTime(t){this._objRef&&(this._objRef.focusAnimationTime=t)}get focusAnimationTime(){return this._objRef?.focusAnimationTime}set enabled(t){this._objRef&&(this._objRef.enabled=t)}get enabled(){return this._objRef?.enabled}set enablePan(t){this._objRef&&(this._objRef.enablePan=t)}get enablePan(){return this._objRef?.enablePan}set enableRotate(t){this._objRef&&(this._objRef.enableRotate=t)}get enableRotate(){return this._objRef?.enableRotate}set enableZoom(t){this._objRef&&(this._objRef.enableZoom=t)}get enableZoom(){return this._objRef?.enableZoom}set enableGizmos(t){this._objRef&&(this._objRef.enableGizmos=t)}get enableGizmos(){return this._objRef?.enableGizmos}set adjustNearFar(t){this._objRef&&(this._objRef.adjustNearFar=t)}get adjustNearFar(){return this._objRef?.adjustNearFar}set scaleFactor(t){this._objRef&&(this._objRef.scaleFactor=t)}get scaleFactor(){return this._objRef?.scaleFactor}set dampingFactor(t){this._objRef&&(this._objRef.dampingFactor=t)}get dampingFactor(){return this._objRef?.dampingFactor}set wMax(t){this._objRef&&(this._objRef.wMax=t)}get wMax(){return this._objRef?.wMax}set enableAnimations(t){this._objRef&&(this._objRef.enableAnimations=t)}get enableAnimations(){return this._objRef?.enableAnimations}set enableGrid(t){this._objRef&&(this._objRef.enableGrid=t)}get enableGrid(){return this._objRef?.enableGrid}set cursorZoom(t){this._objRef&&(this._objRef.cursorZoom=t)}get cursorZoom(){return this._objRef?.cursorZoom}set minFov(t){this._objRef&&(this._objRef.minFov=t)}get minFov(){return this._objRef?.minFov}set maxFov(t){this._objRef&&(this._objRef.maxFov=t)}get maxFov(){return this._objRef?.maxFov}set minDistance(t){this._objRef&&(this._objRef.minDistance=t)}get minDistance(){return this._objRef?.minDistance}set maxDistance(t){this._objRef&&(this._objRef.maxDistance=t)}get maxDistance(){return this._objRef?.maxDistance}set minZoom(t){this._objRef&&(this._objRef.minZoom=t)}get minZoom(){return this._objRef?.minZoom}set maxZoom(t){this._objRef&&(this._objRef.maxZoom=t)}get maxZoom(){return this._objRef?.maxZoom}set target(t){this._objRef&&(this._objRef.target=ve(this._objRef.target,t))}get target(){return this._objRef?.target}set radiusFactor(t){this._objRef&&(this._objRef.radiusFactor=t)}get radiusFactor(){return this._objRef?.radiusFactor}set rotateSpeed(t){this._objRef&&(this._objRef.rotateSpeed=t)}get rotateSpeed(){return this._objRef?.rotateSpeed}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-arcballControls"]],inputs:{camera:"camera",domElement:"domElement",scene:"scene",focusAnimationTime:"focusAnimationTime",enabled:"enabled",enablePan:"enablePan",enableRotate:"enableRotate",enableZoom:"enableZoom",enableGizmos:"enableGizmos",adjustNearFar:"adjustNearFar",scaleFactor:"scaleFactor",dampingFactor:"dampingFactor",wMax:"wMax",enableAnimations:"enableAnimations",enableGrid:"enableGrid",cursorZoom:"cursorZoom",minFov:"minFov",maxFov:"maxFov",minDistance:"minDistance",maxDistance:"maxDistance",minZoom:"minZoom",maxZoom:"maxZoom",target:"target",radiusFactor:"radiusFactor",rotateSpeed:"rotateSpeed"},features:[oe([{provide:en,useExisting:ge(()=>e)}]),X],ngContentSelectors:qne,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Yne=["*"],hU=(()=>{let e=class e extends ua{getType(){return Kp}get type(){return this._objRef?.type}set box(t){this._objRef&&(this._objRef.box=ve(this._objRef.box,t))}get box(){return this._objRef?.box}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-box3Helper"]],inputs:{box:"box"},features:[oe([{provide:pe,useExisting:ge(()=>e)}]),X],ngContentSelectors:Yne,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Qne=["*"],fU=(()=>{let e=class e extends pe{getType(){return mf}set element(t){this._objRef&&(this._objRef.element=t)}get element(){return this._objRef?.element}set center(t){this._objRef&&(this._objRef.center=ve(this._objRef.center,t))}get center(){return this._objRef?.center}set onBeforeRender(t){this._objRef&&(this._objRef.onBeforeRender=t)}get onBeforeRender(){return this._objRef?.onBeforeRender}set onAfterRender(t){this._objRef&&(this._objRef.onAfterRender=t)}get onAfterRender(){return this._objRef?.onAfterRender}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-cSS2DObjectGen"]],inputs:{element:"element",center:"center",onBeforeRender:"onBeforeRender",onAfterRender:"onAfterRender"},features:[oe([{provide:pe,useExisting:ge(()=>e)}]),X],ngContentSelectors:Qne,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Kne=["*"],mU=(()=>{let e=class e extends pe{getType(){return hf}set element(t){this._objRef&&(this._objRef.element=t)}get element(){return this._objRef?.element}set onBeforeRender(t){this._objRef&&(this._objRef.onBeforeRender=t)}get onBeforeRender(){return this._objRef?.onBeforeRender}set onAfterRender(t){this._objRef&&(this._objRef.onAfterRender=t)}get onAfterRender(){return this._objRef?.onAfterRender}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-cSS3DObjectGen"]],inputs:{element:"element",onBeforeRender:"onBeforeRender",onAfterRender:"onAfterRender"},features:[oe([{provide:pe,useExisting:ge(()=>e)}]),X],ngContentSelectors:Kne,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var lo=(()=>{let e=class e extends $r{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-abs-texture"]],features:[X],decls:0,vars:0,template:function(r,o){},encapsulation:2});let n=e;return n})();var Jne=["*"],Rs=class Rs extends lo{getType(){return yn}get isTexture(){return this._objRef?.isTexture}get id(){return this._objRef?.id}set uuid(e){this._objRef&&(this._objRef.uuid=e)}get uuid(){return this._objRef?.uuid}set name(e){this._objRef&&(this._objRef.name=e)}get name(){return this._objRef?.name}set source(e){this._objRef&&(this._objRef.source=e)}get source(){return this._objRef?.source}set mipmaps(e){this._objRef&&(this._objRef.mipmaps=e)}get mipmaps(){return this._objRef?.mipmaps}set mapping(e){this._objRef&&(this._objRef.mapping=e)}get mapping(){return this._objRef?.mapping}set channel(e){this._objRef&&(this._objRef.channel=e)}get channel(){return this._objRef?.channel}set wrapS(e){this._objRef&&(this._objRef.wrapS=e)}get wrapS(){return this._objRef?.wrapS}set wrapT(e){this._objRef&&(this._objRef.wrapT=e)}get wrapT(){return this._objRef?.wrapT}set magFilter(e){this._objRef&&(this._objRef.magFilter=e)}get magFilter(){return this._objRef?.magFilter}set minFilter(e){this._objRef&&(this._objRef.minFilter=e)}get minFilter(){return this._objRef?.minFilter}set anisotropy(e){this._objRef&&(this._objRef.anisotropy=e)}get anisotropy(){return this._objRef?.anisotropy}set format(e){this._objRef&&(this._objRef.format=e)}get format(){return this._objRef?.format}set type(e){this._objRef&&(this._objRef.type=e)}get type(){return this._objRef?.type}set internalFormat(e){this._objRef&&(this._objRef.internalFormat=e)}get internalFormat(){return this._objRef?.internalFormat}set matrix(e){this._objRef&&(this._objRef.matrix=ve(this._objRef.matrix,e))}get matrix(){return this._objRef?.matrix}set matrixAutoUpdate(e){this._objRef&&(this._objRef.matrixAutoUpdate=e)}get matrixAutoUpdate(){return this._objRef?.matrixAutoUpdate}set offset(e){this._objRef&&(this._objRef.offset=ve(this._objRef.offset,e))}get offset(){return this._objRef?.offset}set repeat(e){this._objRef&&(this._objRef.repeat=ve(this._objRef.repeat,e))}get repeat(){return this._objRef?.repeat}set center(e){this._objRef&&(this._objRef.center=ve(this._objRef.center,e))}get center(){return this._objRef?.center}set rotation(e){this._objRef&&(this._objRef.rotation=e)}get rotation(){return this._objRef?.rotation}set generateMipmaps(e){this._objRef&&(this._objRef.generateMipmaps=e)}get generateMipmaps(){return this._objRef?.generateMipmaps}set premultiplyAlpha(e){this._objRef&&(this._objRef.premultiplyAlpha=e)}get premultiplyAlpha(){return this._objRef?.premultiplyAlpha}set flipY(e){this._objRef&&(this._objRef.flipY=e)}get flipY(){return this._objRef?.flipY}set unpackAlignment(e){this._objRef&&(this._objRef.unpackAlignment=e)}get unpackAlignment(){return this._objRef?.unpackAlignment}set colorSpace(e){this._objRef&&(this._objRef.colorSpace=e)}get colorSpace(){return this._objRef?.colorSpace}set isRenderTargetTexture(e){this._objRef&&(this._objRef.isRenderTargetTexture=e)}get isRenderTargetTexture(){return this._objRef?.isRenderTargetTexture}set userData(e){this._objRef&&(this._objRef.userData=e)}get userData(){return this._objRef?.userData}set version(e){this._objRef&&(this._objRef.version=e)}get version(){return this._objRef?.version}set pmremVersion(e){this._objRef&&(this._objRef.pmremVersion=e)}get pmremVersion(){return this._objRef?.pmremVersion}};Rs.DEFAULT_ANISOTROPY=yn.DEFAULT_ANISOTROPY,Rs.DEFAULT_IMAGE=yn.DEFAULT_IMAGE,Rs.DEFAULT_MAPPING=yn.DEFAULT_MAPPING,Rs.\u0275fac=(()=>{let e;return function(t){return(e||(e=be(Rs)))(t||Rs)}})(),Rs.\u0275cmp=L({type:Rs,selectors:[["th-texture"]],inputs:{uuid:"uuid",name:"name",source:"source",mipmaps:"mipmaps",mapping:"mapping",channel:"channel",wrapS:"wrapS",wrapT:"wrapT",magFilter:"magFilter",minFilter:"minFilter",anisotropy:"anisotropy",format:"format",type:"type",internalFormat:"internalFormat",matrix:"matrix",matrixAutoUpdate:"matrixAutoUpdate",offset:"offset",repeat:"repeat",center:"center",rotation:"rotation",generateMipmaps:"generateMipmaps",premultiplyAlpha:"premultiplyAlpha",flipY:"flipY",unpackAlignment:"unpackAlignment",colorSpace:"colorSpace",isRenderTargetTexture:"isRenderTargetTexture",userData:"userData",version:"version",pmremVersion:"pmremVersion"},features:[oe([{provide:lo,useExisting:ge(()=>Rs)}]),X],ngContentSelectors:Jne,decls:1,vars:0,template:function(i,t){i&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});var uo=Rs;var ere=["*"],Mg=(()=>{let e=class e extends Jt{getType(){return ia}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-polyhedronGeometry"]],features:[oe([{provide:Jt,useExisting:ge(()=>e)}]),X],ngContentSelectors:ere,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var wx={name:"DotScreenShader",uniforms:{tDiffuse:{value:null},tSize:{value:new z(256,256)},center:{value:new z(.5,.5)},angle:{value:1.57},scale:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform vec2 center;
		uniform float angle;
		uniform float scale;
		uniform vec2 tSize;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		float pattern() {

			float s = sin( angle ), c = cos( angle );

			vec2 tex = vUv * tSize - center;
			vec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;

			return ( sin( point.x ) * sin( point.y ) ) * 4.0;

		}

		void main() {

			vec4 color = texture2D( tDiffuse, vUv );

			float average = ( color.r + color.g + color.b ) / 3.0;

			gl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );

		}`};var Af=new sr,Rl=new Wr,bc=new z,pU=new M,B1=new z,Mx=new z,Sx=new M,U1=new M,gU=new je,bU=new M,_U=new M,Rx=class extends kn{constructor(e,i,t){super(),t.style.touchAction="none";let r=null,o=null,s=[];this.mode="translate",this.rotateSpeed=1;let a=this;function c(){t.addEventListener("pointermove",p),t.addEventListener("pointerdown",b),t.addEventListener("pointerup",m),t.addEventListener("pointerleave",m)}function l(){t.removeEventListener("pointermove",p),t.removeEventListener("pointerdown",b),t.removeEventListener("pointerup",m),t.removeEventListener("pointerleave",m),t.style.cursor=""}function d(){l()}function u(){return e}function h(_){e=_}function f(){return Rl}function p(_){if(a.enabled!==!1){if(g(_),Rl.setFromCamera(bc,i),r)a.mode==="translate"?Rl.ray.intersectPlane(Af,Sx)&&r.position.copy(Sx.sub(pU).applyMatrix4(gU)):a.mode==="rotate"&&(B1.subVectors(bc,Mx).multiplyScalar(a.rotateSpeed),r.rotateOnWorldAxis(bU,B1.x),r.rotateOnWorldAxis(_U.normalize(),-B1.y)),a.dispatchEvent({type:"drag",object:r}),Mx.copy(bc);else if(_.pointerType==="mouse"||_.pointerType==="pen")if(s.length=0,Rl.setFromCamera(bc,i),Rl.intersectObjects(e,a.recursive,s),s.length>0){let y=s[0].object;Af.setFromNormalAndCoplanarPoint(i.getWorldDirection(Af.normal),U1.setFromMatrixPosition(y.matrixWorld)),o!==y&&o!==null&&(a.dispatchEvent({type:"hoveroff",object:o}),t.style.cursor="auto",o=null),o!==y&&(a.dispatchEvent({type:"hoveron",object:y}),t.style.cursor="pointer",o=y)}else o!==null&&(a.dispatchEvent({type:"hoveroff",object:o}),t.style.cursor="auto",o=null);Mx.copy(bc)}}function b(_){a.enabled!==!1&&(g(_),s.length=0,Rl.setFromCamera(bc,i),Rl.intersectObjects(e,a.recursive,s),s.length>0&&(a.transformGroup===!0?r=v(s[0].object):r=s[0].object,Af.setFromNormalAndCoplanarPoint(i.getWorldDirection(Af.normal),U1.setFromMatrixPosition(r.matrixWorld)),Rl.ray.intersectPlane(Af,Sx)&&(a.mode==="translate"?(gU.copy(r.parent.matrixWorld).invert(),pU.copy(Sx).sub(U1.setFromMatrixPosition(r.matrixWorld))):a.mode==="rotate"&&(bU.set(0,1,0).applyQuaternion(i.quaternion).normalize(),_U.set(1,0,0).applyQuaternion(i.quaternion).normalize())),t.style.cursor="move",a.dispatchEvent({type:"dragstart",object:r})),Mx.copy(bc))}function m(){a.enabled!==!1&&(r&&(a.dispatchEvent({type:"dragend",object:r}),r=null),t.style.cursor=o?"pointer":"auto")}function g(_){let y=t.getBoundingClientRect();bc.x=(_.clientX-y.left)/y.width*2-1,bc.y=-(_.clientY-y.top)/y.height*2+1}function v(_,y=null){return _.isGroup&&(y=_),_.parent===null?y:v(_.parent,y)}c(),this.enabled=!0,this.recursive=!0,this.transformGroup=!1,this.activate=c,this.deactivate=l,this.dispose=d,this.getObjects=u,this.getRaycaster=f,this.setObjects=h}};var tre=["*"],vU=(()=>{let e=class e extends en{getType(){return Rx}set enabled(t){this._objRef&&(this._objRef.enabled=t)}get enabled(){return this._objRef?.enabled}set recursive(t){this._objRef&&(this._objRef.recursive=t)}get recursive(){return this._objRef?.recursive}set transformGroup(t){this._objRef&&(this._objRef.transformGroup=t)}get transformGroup(){return this._objRef?.transformGroup}set mode(t){this._objRef&&(this._objRef.mode=t)}get mode(){return this._objRef?.mode}set rotateSpeed(t){this._objRef&&(this._objRef.rotateSpeed=t)}get rotateSpeed(){return this._objRef?.rotateSpeed}set activate(t){this._objRef&&(this._objRef.activate=t)}get activate(){return this._objRef?.activate}set deactivate(t){this._objRef&&(this._objRef.deactivate=t)}get deactivate(){return this._objRef?.deactivate}set dispose(t){this._objRef&&(this._objRef.dispose=t)}get dispose(){return this._objRef?.dispose}set getObjects(t){this._objRef&&(this._objRef.getObjects=t)}get getObjects(){return this._objRef?.getObjects}set getRaycaster(t){this._objRef&&(this._objRef.getRaycaster=t)}get getRaycaster(){return this._objRef?.getRaycaster}set setObjects(t){this._objRef&&(this._objRef.setObjects=t)}get setObjects(){return this._objRef?.setObjects}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-dragControls"]],inputs:{enabled:"enabled",recursive:"recursive",transformGroup:"transformGroup",mode:"mode",rotateSpeed:"rotateSpeed",activate:"activate",deactivate:"deactivate",dispose:"dispose",getObjects:"getObjects",getRaycaster:"getRaycaster",setObjects:"setObjects"},features:[oe([{provide:en,useExisting:ge(()=>e)}]),X],ngContentSelectors:tre,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var yU={name:"FilmShader",uniforms:{tDiffuse:{value:null},time:{value:0},intensity:{value:.5},grayscale:{value:!1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#include <common>

		uniform float intensity;
		uniform bool grayscale;
		uniform float time;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 base = texture2D( tDiffuse, vUv );

			float noise = rand( fract( vUv + time ) );

			vec3 color = base.rgb + base.rgb * clamp( 0.1 + noise, 0.0, 1.0 );

			color = mix( base.rgb, color, intensity );

			if ( grayscale ) {

				color = vec3( luminance( color ) ); // assuming linear-srgb

			}

			gl_FragColor = vec4( color, base.a );

		}`};var Tx=class extends an{constructor(e=.5,i=!1){super();let t=yU;this.uniforms=Li.clone(t.uniforms),this.material=new Dt({name:t.name,uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.uniforms.intensity.value=e,this.uniforms.grayscale.value=i,this.fsQuad=new lr(this.material)}render(e,i,t,r){this.uniforms.tDiffuse.value=t.texture,this.uniforms.time.value+=r,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.clear&&e.clear(),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}};var nre=["*"],xU=(()=>{let e=class e extends Ii{getType(){return Tx}set uniforms(t){this._objRef&&Object.assign(this._objRef.uniforms,t)}get uniforms(){return this._objRef?.uniforms}set material(t){this._objRef&&(this._objRef.material=t)}get material(){return this._objRef?.material}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-filmPass"]],inputs:{uniforms:"uniforms",material:"material",fsQuad:"fsQuad"},features:[oe([{provide:ui,useExisting:ge(()=>e)}]),X],ngContentSelectors:nre,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var wU=new M,V1=new ll,z1=new M,Cx=class{constructor(e,i){this.object=e,this.domElement=i,this.enabled=!0,this.movementSpeed=1,this.lookSpeed=.005,this.lookVertical=!0,this.autoForward=!1,this.activeLook=!0,this.heightSpeed=!1,this.heightCoef=1,this.heightMin=0,this.heightMax=1,this.constrainVertical=!1,this.verticalMin=0,this.verticalMax=Math.PI,this.mouseDragOn=!1,this.autoSpeedFactor=0,this.pointerX=0,this.pointerY=0,this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.viewHalfX=0,this.viewHalfY=0;let t=0,r=0;this.handleResize=function(){this.domElement===document?(this.viewHalfX=window.innerWidth/2,this.viewHalfY=window.innerHeight/2):(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)},this.onPointerDown=function(u){if(this.domElement!==document&&this.domElement.focus(),this.activeLook)switch(u.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0;break}this.mouseDragOn=!0},this.onPointerUp=function(u){if(this.activeLook)switch(u.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1;break}this.mouseDragOn=!1},this.onPointerMove=function(u){this.domElement===document?(this.pointerX=u.pageX-this.viewHalfX,this.pointerY=u.pageY-this.viewHalfY):(this.pointerX=u.pageX-this.domElement.offsetLeft-this.viewHalfX,this.pointerY=u.pageY-this.domElement.offsetTop-this.viewHalfY)},this.onKeyDown=function(u){switch(u.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0;break}},this.onKeyUp=function(u){switch(u.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1;break}},this.lookAt=function(u,h,f){return u.isVector3?z1.copy(u):z1.set(u,h,f),this.object.lookAt(z1),d(this),this},this.update=function(){let u=new M;return function(f){if(this.enabled===!1)return;if(this.heightSpeed){let C=tt.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=f*(C*this.heightCoef)}else this.autoSpeedFactor=0;let p=f*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(p+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(p),this.moveLeft&&this.object.translateX(-p),this.moveRight&&this.object.translateX(p),this.moveUp&&this.object.translateY(p),this.moveDown&&this.object.translateY(-p);let b=f*this.lookSpeed;this.activeLook||(b=0);let m=1;this.constrainVertical&&(m=Math.PI/(this.verticalMax-this.verticalMin)),r-=this.pointerX*b,this.lookVertical&&(t-=this.pointerY*b*m),t=Math.max(-85,Math.min(85,t));let g=tt.degToRad(90-t),v=tt.degToRad(r);this.constrainVertical&&(g=tt.mapLinear(g,0,Math.PI,this.verticalMin,this.verticalMax));let _=this.object.position;u.setFromSphericalCoords(1,g,v).add(_),this.object.lookAt(u)}}(),this.dispose=function(){this.domElement.removeEventListener("contextmenu",MU),this.domElement.removeEventListener("pointerdown",s),this.domElement.removeEventListener("pointermove",o),this.domElement.removeEventListener("pointerup",a),window.removeEventListener("keydown",c),window.removeEventListener("keyup",l)};let o=this.onPointerMove.bind(this),s=this.onPointerDown.bind(this),a=this.onPointerUp.bind(this),c=this.onKeyDown.bind(this),l=this.onKeyUp.bind(this);this.domElement.addEventListener("contextmenu",MU),this.domElement.addEventListener("pointerdown",s),this.domElement.addEventListener("pointermove",o),this.domElement.addEventListener("pointerup",a),window.addEventListener("keydown",c),window.addEventListener("keyup",l);function d(u){let h=u.object.quaternion;wU.set(0,0,-1).applyQuaternion(h),V1.setFromVector3(wU),t=90-tt.radToDeg(V1.phi),r=tt.radToDeg(V1.theta)}this.handleResize(),d(this)}};function MU(n){n.preventDefault()}var ore=["*"],SU=(()=>{let e=class e extends en{getType(){return Cx}set object(t){this._objRef&&(this._objRef.object=t)}get object(){return this._objRef?.object}set domElement(t){this._objRef&&(this._objRef.domElement=t)}get domElement(){return this._objRef?.domElement}set enabled(t){this._objRef&&(this._objRef.enabled=t)}get enabled(){return this._objRef?.enabled}set movementSpeed(t){this._objRef&&(this._objRef.movementSpeed=t)}get movementSpeed(){return this._objRef?.movementSpeed}set lookSpeed(t){this._objRef&&(this._objRef.lookSpeed=t)}get lookSpeed(){return this._objRef?.lookSpeed}set lookVertical(t){this._objRef&&(this._objRef.lookVertical=t)}get lookVertical(){return this._objRef?.lookVertical}set autoForward(t){this._objRef&&(this._objRef.autoForward=t)}get autoForward(){return this._objRef?.autoForward}set activeLook(t){this._objRef&&(this._objRef.activeLook=t)}get activeLook(){return this._objRef?.activeLook}set heightSpeed(t){this._objRef&&(this._objRef.heightSpeed=t)}get heightSpeed(){return this._objRef?.heightSpeed}set heightCoef(t){this._objRef&&(this._objRef.heightCoef=t)}get heightCoef(){return this._objRef?.heightCoef}set heightMin(t){this._objRef&&(this._objRef.heightMin=t)}get heightMin(){return this._objRef?.heightMin}set heightMax(t){this._objRef&&(this._objRef.heightMax=t)}get heightMax(){return this._objRef?.heightMax}set constrainVertical(t){this._objRef&&(this._objRef.constrainVertical=t)}get constrainVertical(){return this._objRef?.constrainVertical}set verticalMin(t){this._objRef&&(this._objRef.verticalMin=t)}get verticalMin(){return this._objRef?.verticalMin}set verticalMax(t){this._objRef&&(this._objRef.verticalMax=t)}get verticalMax(){return this._objRef?.verticalMax}set mouseDragOn(t){this._objRef&&(this._objRef.mouseDragOn=t)}get mouseDragOn(){return this._objRef?.mouseDragOn}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-firstPersonControls"]],inputs:{object:"object",domElement:"domElement",enabled:"enabled",movementSpeed:"movementSpeed",lookSpeed:"lookSpeed",lookVertical:"lookVertical",autoForward:"autoForward",activeLook:"activeLook",heightSpeed:"heightSpeed",heightCoef:"heightCoef",heightMin:"heightMin",heightMax:"heightMax",constrainVertical:"constrainVertical",verticalMin:"verticalMin",verticalMax:"verticalMax",mouseDragOn:"mouseDragOn"},features:[oe([{provide:en,useExisting:ge(()=>e)}]),X],ngContentSelectors:ore,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var are={type:"change"},Ex=class extends kn{constructor(e,i){super(),this.object=e,this.domElement=i,this.enabled=!0,this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;let t=this,r=1e-6,o=new Kt,s=new M;this.tmpQuaternion=new Kt,this.status=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new M(0,0,0),this.rotationVector=new M(0,0,0),this.keydown=function(p){if(!(p.altKey||this.enabled===!1)){switch(p.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1;break}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(p){if(this.enabled!==!1){switch(p.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0;break}this.updateMovementVector(),this.updateRotationVector()}},this.pointerdown=function(p){if(this.enabled!==!1)if(this.dragToLook)this.status++;else{switch(p.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}},this.pointermove=function(p){if(this.enabled!==!1&&(!this.dragToLook||this.status>0)){let b=this.getContainerDimensions(),m=b.size[0]/2,g=b.size[1]/2;this.moveState.yawLeft=-(p.pageX-b.offset[0]-m)/m,this.moveState.pitchDown=(p.pageY-b.offset[1]-g)/g,this.updateRotationVector()}},this.pointerup=function(p){if(this.enabled!==!1){if(this.dragToLook)this.status--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(p.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()}},this.pointercancel=function(){this.enabled!==!1&&(this.dragToLook?(this.status=0,this.moveState.yawLeft=this.moveState.pitchDown=0):(this.moveState.forward=0,this.moveState.back=0,this.updateMovementVector()),this.updateRotationVector())},this.contextMenu=function(p){this.enabled!==!1&&p.preventDefault()},this.update=function(p){if(this.enabled===!1)return;let b=p*t.movementSpeed,m=p*t.rollSpeed;t.object.translateX(t.moveVector.x*b),t.object.translateY(t.moveVector.y*b),t.object.translateZ(t.moveVector.z*b),t.tmpQuaternion.set(t.rotationVector.x*m,t.rotationVector.y*m,t.rotationVector.z*m,1).normalize(),t.object.quaternion.multiply(t.tmpQuaternion),(s.distanceToSquared(t.object.position)>r||8*(1-o.dot(t.object.quaternion))>r)&&(t.dispatchEvent(are),o.copy(t.object.quaternion),s.copy(t.object.position))},this.updateMovementVector=function(){let p=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-p+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",a),this.domElement.removeEventListener("pointerdown",l),this.domElement.removeEventListener("pointermove",c),this.domElement.removeEventListener("pointerup",d),this.domElement.removeEventListener("pointercancel",u),window.removeEventListener("keydown",h),window.removeEventListener("keyup",f)};let a=this.contextMenu.bind(this),c=this.pointermove.bind(this),l=this.pointerdown.bind(this),d=this.pointerup.bind(this),u=this.pointercancel.bind(this),h=this.keydown.bind(this),f=this.keyup.bind(this);this.domElement.addEventListener("contextmenu",a),this.domElement.addEventListener("pointerdown",l),this.domElement.addEventListener("pointermove",c),this.domElement.addEventListener("pointerup",d),this.domElement.addEventListener("pointercancel",u),window.addEventListener("keydown",h),window.addEventListener("keyup",f),this.updateMovementVector(),this.updateRotationVector()}};var cre=["*"],RU=(()=>{let e=class e extends en{getType(){return Ex}set autoForward(t){this._objRef&&(this._objRef.autoForward=t)}get autoForward(){return this._objRef?.autoForward}set domElement(t){this._objRef&&(this._objRef.domElement=t)}get domElement(){return this._objRef?.domElement}set dragToLook(t){this._objRef&&(this._objRef.dragToLook=t)}get dragToLook(){return this._objRef?.dragToLook}set enabled(t){this._objRef&&(this._objRef.enabled=t)}get enabled(){return this._objRef?.enabled}set movementSpeed(t){this._objRef&&(this._objRef.movementSpeed=t)}get movementSpeed(){return this._objRef?.movementSpeed}set object(t){this._objRef&&(this._objRef.object=t)}get object(){return this._objRef?.object}set rollSpeed(t){this._objRef&&(this._objRef.rollSpeed=t)}get rollSpeed(){return this._objRef?.rollSpeed}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-flyControls"]],inputs:{autoForward:"autoForward",domElement:"domElement",dragToLook:"dragToLook",enabled:"enabled",movementSpeed:"movementSpeed",object:"object",rollSpeed:"rollSpeed"},features:[oe([{provide:en,useExisting:ge(()=>e)}]),X],ngContentSelectors:cre,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var TU={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:`

		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`

		uniform int byp; //should we apply the glitch ?

		uniform sampler2D tDiffuse;
		uniform sampler2D tDisp;

		uniform float amount;
		uniform float angle;
		uniform float seed;
		uniform float seed_x;
		uniform float seed_y;
		uniform float distortion_x;
		uniform float distortion_y;
		uniform float col_s;

		varying vec2 vUv;


		float rand(vec2 co){
			return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
		}

		void main() {
			if(byp<1) {
				vec2 p = vUv;
				float xs = floor(gl_FragCoord.x / 0.5);
				float ys = floor(gl_FragCoord.y / 0.5);
				//based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch
				float disp = texture2D(tDisp, p*seed*seed).r;
				if(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {
					if(seed_x>0.){
						p.y = 1. - (p.y + distortion_y);
					}
					else {
						p.y = distortion_y;
					}
				}
				if(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {
					if(seed_y>0.){
						p.x=distortion_x;
					}
					else {
						p.x = 1. - (p.x + distortion_x);
					}
				}
				p.x+=disp*seed_x*(seed/5.);
				p.y+=disp*seed_y*(seed/5.);
				//base from RGB shift shader
				vec2 offset = amount * vec2( cos(angle), sin(angle));
				vec4 cr = texture2D(tDiffuse, p + offset);
				vec4 cga = texture2D(tDiffuse, p);
				vec4 cb = texture2D(tDiffuse, p - offset);
				gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);
				//add noise
				vec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);
				gl_FragColor = gl_FragColor+ snow;
			}
			else {
				gl_FragColor=texture2D (tDiffuse, vUv);
			}
		}`};var Dx=class extends an{constructor(e=64){super();let i=TU;this.uniforms=Li.clone(i.uniforms),this.heightMap=this.generateHeightmap(e),this.uniforms.tDisp.value=this.heightMap,this.material=new Dt({uniforms:this.uniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader}),this.fsQuad=new lr(this.material),this.goWild=!1,this.curF=0,this.generateTrigger()}render(e,i,t){this.uniforms.tDiffuse.value=t.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||this.goWild==!0?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=tt.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=tt.randFloat(-1,1),this.uniforms.seed_y.value=tt.randFloat(-1,1),this.uniforms.distortion_x.value=tt.randFloat(0,1),this.uniforms.distortion_y.value=tt.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=tt.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=tt.randFloat(0,1),this.uniforms.distortion_y.value=tt.randFloat(0,1),this.uniforms.seed_x.value=tt.randFloat(-.3,.3),this.uniforms.seed_y.value=tt.randFloat(-.3,.3)):this.goWild==!1&&(this.uniforms.byp.value=1),this.curF++,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.clear&&e.clear(),this.fsQuad.render(e))}generateTrigger(){this.randX=tt.randInt(120,240)}generateHeightmap(e){let i=new Float32Array(e*e),t=e*e;for(let o=0;o<t;o++){let s=tt.randFloat(0,1);i[o]=s}let r=new io(i,e,e,Hd,Rr);return r.needsUpdate=!0,r}dispose(){this.material.dispose(),this.heightMap.dispose(),this.fsQuad.dispose()}};var dre=["*"],CU=(()=>{let e=class e extends Ii{getType(){return Dx}set uniforms(t){this._objRef&&Object.assign(this._objRef.uniforms,t)}get uniforms(){return this._objRef?.uniforms}set material(t){this._objRef&&(this._objRef.material=t)}get material(){return this._objRef?.material}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}set goWild(t){this._objRef&&(this._objRef.goWild=t)}get goWild(){return this._objRef?.goWild}set curF(t){this._objRef&&(this._objRef.curF=t)}get curF(){return this._objRef?.curF}set randX(t){this._objRef&&(this._objRef.randX=t)}get randX(){return this._objRef?.randX}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-glitchPass"]],inputs:{uniforms:"uniforms",material:"material",fsQuad:"fsQuad",goWild:"goWild",curF:"curF",randX:"randX"},features:[oe([{provide:ui,useExisting:ge(()=>e)}]),X],ngContentSelectors:dre,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var hre=["*"],Tl=(()=>{let e=class e extends pe{getType(){return Tr}get isGroup(){return this._objRef?.isGroup}get type(){return this._objRef?.type}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-group"]],features:[oe([{provide:pe,useExisting:ge(()=>e)}]),X],ngContentSelectors:hre,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var fre=["*"],EU=(()=>{let e=class e extends Mg{getType(){return Qh}get type(){return this._objRef?.type}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-icosahedronGeometry"]],features:[oe([{provide:Jt,useExisting:ge(()=>e)}]),X],ngContentSelectors:fre,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var pre=["*"],DU=(()=>{let e=class e extends Ri{getType(){return sl}get isInstancedMesh(){return this._objRef?.isInstancedMesh}set boundingBox(t){this._objRef&&(this._objRef.boundingBox=ve(this._objRef.boundingBox,t))}get boundingBox(){return this._objRef?.boundingBox}set boundingSphere(t){this._objRef&&(this._objRef.boundingSphere=ve(this._objRef.boundingSphere,t))}get boundingSphere(){return this._objRef?.boundingSphere}set count(t){this._objRef&&(this._objRef.count=t)}get count(){return this._objRef?.count}set instanceColor(t){this._objRef&&(this._objRef.instanceColor=ve(this._objRef.instanceColor,t))}get instanceColor(){return this._objRef?.instanceColor}set instanceMatrix(t){this._objRef&&(this._objRef.instanceMatrix=ve(this._objRef.instanceMatrix,t))}get instanceMatrix(){return this._objRef?.instanceMatrix}set morphTexture(t){this._objRef&&(this._objRef.morphTexture=t)}get morphTexture(){return this._objRef?.morphTexture}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-instancedMesh"]],inputs:{boundingBox:"boundingBox",boundingSphere:"boundingSphere",count:"count",instanceColor:"instanceColor",instanceMatrix:"instanceMatrix",morphTexture:"morphTexture"},features:[oe([{provide:pe,useExisting:ge(()=>e)}]),X],ngContentSelectors:pre,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var bre=["*"],Sg=(()=>{let e=class e extends Ii{getType(){return Df}set textureID(t){this._objRef&&(this._objRef.textureID=t)}get textureID(){return this._objRef?.textureID}set uniforms(t){this._objRef&&Object.assign(this._objRef.uniforms,t)}get uniforms(){return this._objRef?.uniforms}set material(t){this._objRef&&(this._objRef.material=t)}get material(){return this._objRef?.material}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-shaderPass"]],inputs:{textureID:"textureID",uniforms:"uniforms",material:"material",fsQuad:"fsQuad"},features:[oe([{provide:ui,useExisting:ge(()=>e)}]),X],ngContentSelectors:bre,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Ax=class extends vf{constructor(e,i){super(e,i),this.screenSpacePanning=!1,this.mouseButtons={LEFT:Dr.PAN,MIDDLE:Dr.DOLLY,RIGHT:Dr.ROTATE},this.touches={ONE:bs.PAN,TWO:bs.DOLLY_ROTATE}}};var _re=["*"],IU=(()=>{let e=class e extends Dn{getType(){return Ax}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-mapControls"]],features:[oe([{provide:en,useExisting:ge(()=>e)}]),X],ngContentSelectors:_re,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var yre=["*"],Rg=(()=>{let e=class e extends on{getType(){return Er}get isMeshStandardMaterial(){return this._objRef?.isMeshStandardMaterial}set type(t){this._objRef&&(this._objRef.type=t)}get type(){return this._objRef?.type}set defines(t){this._objRef&&(this._objRef.defines=t)}get defines(){return this._objRef?.defines}set color(t){this._objRef&&(this._objRef.color=ve(this._objRef.color,t))}get color(){return this._objRef?.color}set roughness(t){this._objRef&&(this._objRef.roughness=t)}get roughness(){return this._objRef?.roughness}set metalness(t){this._objRef&&(this._objRef.metalness=t)}get metalness(){return this._objRef?.metalness}set map(t){this._objRef&&(this._objRef.map=t)}get map(){return this._objRef?.map}set lightMap(t){this._objRef&&(this._objRef.lightMap=t)}get lightMap(){return this._objRef?.lightMap}set lightMapIntensity(t){this._objRef&&(this._objRef.lightMapIntensity=t)}get lightMapIntensity(){return this._objRef?.lightMapIntensity}set aoMap(t){this._objRef&&(this._objRef.aoMap=t)}get aoMap(){return this._objRef?.aoMap}set aoMapIntensity(t){this._objRef&&(this._objRef.aoMapIntensity=t)}get aoMapIntensity(){return this._objRef?.aoMapIntensity}set emissive(t){this._objRef&&(this._objRef.emissive=ve(this._objRef.emissive,t))}get emissive(){return this._objRef?.emissive}set emissiveIntensity(t){this._objRef&&(this._objRef.emissiveIntensity=t)}get emissiveIntensity(){return this._objRef?.emissiveIntensity}set emissiveMap(t){this._objRef&&(this._objRef.emissiveMap=t)}get emissiveMap(){return this._objRef?.emissiveMap}set bumpMap(t){this._objRef&&(this._objRef.bumpMap=t)}get bumpMap(){return this._objRef?.bumpMap}set bumpScale(t){this._objRef&&(this._objRef.bumpScale=t)}get bumpScale(){return this._objRef?.bumpScale}set normalMap(t){this._objRef&&(this._objRef.normalMap=t)}get normalMap(){return this._objRef?.normalMap}set normalMapType(t){this._objRef&&(this._objRef.normalMapType=t)}get normalMapType(){return this._objRef?.normalMapType}set normalScale(t){this._objRef&&(this._objRef.normalScale=ve(this._objRef.normalScale,t))}get normalScale(){return this._objRef?.normalScale}set displacementMap(t){this._objRef&&(this._objRef.displacementMap=t)}get displacementMap(){return this._objRef?.displacementMap}set displacementScale(t){this._objRef&&(this._objRef.displacementScale=t)}get displacementScale(){return this._objRef?.displacementScale}set displacementBias(t){this._objRef&&(this._objRef.displacementBias=t)}get displacementBias(){return this._objRef?.displacementBias}set roughnessMap(t){this._objRef&&(this._objRef.roughnessMap=t)}get roughnessMap(){return this._objRef?.roughnessMap}set metalnessMap(t){this._objRef&&(this._objRef.metalnessMap=t)}get metalnessMap(){return this._objRef?.metalnessMap}set alphaMap(t){this._objRef&&(this._objRef.alphaMap=t)}get alphaMap(){return this._objRef?.alphaMap}set envMap(t){this._objRef&&(this._objRef.envMap=t)}get envMap(){return this._objRef?.envMap}set envMapRotation(t){this._objRef&&(this._objRef.envMapRotation=ve(this._objRef.envMapRotation,t))}get envMapRotation(){return this._objRef?.envMapRotation}set envMapIntensity(t){this._objRef&&(this._objRef.envMapIntensity=t)}get envMapIntensity(){return this._objRef?.envMapIntensity}set wireframe(t){this._objRef&&(this._objRef.wireframe=t)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(t){this._objRef&&(this._objRef.wireframeLinewidth=t)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set wireframeLinecap(t){this._objRef&&(this._objRef.wireframeLinecap=t)}get wireframeLinecap(){return this._objRef?.wireframeLinecap}set wireframeLinejoin(t){this._objRef&&(this._objRef.wireframeLinejoin=t)}get wireframeLinejoin(){return this._objRef?.wireframeLinejoin}set flatShading(t){this._objRef&&(this._objRef.flatShading=t)}get flatShading(){return this._objRef?.flatShading}set fog(t){this._objRef&&(this._objRef.fog=t)}get fog(){return this._objRef?.fog}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-meshStandardMaterial"]],inputs:{type:"type",defines:"defines",color:"color",roughness:"roughness",metalness:"metalness",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",emissive:"emissive",emissiveIntensity:"emissiveIntensity",emissiveMap:"emissiveMap",bumpMap:"bumpMap",bumpScale:"bumpScale",normalMap:"normalMap",normalMapType:"normalMapType",normalScale:"normalScale",displacementMap:"displacementMap",displacementScale:"displacementScale",displacementBias:"displacementBias",roughnessMap:"roughnessMap",metalnessMap:"metalnessMap",alphaMap:"alphaMap",envMap:"envMap",envMapRotation:"envMapRotation",envMapIntensity:"envMapIntensity",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin",flatShading:"flatShading",fog:"fog"},features:[oe([{provide:on,useExisting:ge(()=>e)}]),X],ngContentSelectors:yre,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var If=class n extends an{constructor(e,i,t,r){super(),this.renderScene=i,this.renderCamera=t,this.selectedObjects=r!==void 0?r:[],this.visibleEdgeColor=new _e(1,1,1),this.hiddenEdgeColor=new _e(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=e!==void 0?new z(e.x,e.y):new z(256,256);let o=Math.round(this.resolution.x/this.downSampleRatio),s=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new oi(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new Fd,this.depthMaterial.side=Yn,this.depthMaterial.depthPacking=Oy,this.depthMaterial.blending=Qt,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=Yn,this.prepareMaskMaterial.fragmentShader=d(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new oi(this.resolution.x,this.resolution.y,{type:Wi}),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new oi(o,s,{type:Wi}),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new oi(o,s,{type:Wi}),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new oi(Math.round(o/2),Math.round(s/2),{type:Wi}),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new oi(o,s,{type:Wi}),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new oi(Math.round(o/2),Math.round(s/2),{type:Wi}),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;let a=4,c=4;this.separableBlurMaterial1=this.getSeperableBlurMaterial(a),this.separableBlurMaterial1.uniforms.texSize.value.set(o,s),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(c),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(o/2),Math.round(s/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=c,this.overlayMaterial=this.getOverlayMaterial();let l=dr;this.copyUniforms=Li.clone(l.uniforms),this.materialCopy=new Dt({uniforms:this.copyUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,blending:Qt,depthTest:!1,depthWrite:!1}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new _e,this.oldClearAlpha=1,this.fsQuad=new lr(null),this.tempPulseColor1=new _e,this.tempPulseColor2=new _e,this.textureMatrix=new je;function d(u,h){let f=h.isPerspectiveCamera?"perspective":"orthographic";return u.replace(/DEPTH_TO_VIEW_Z/g,f+"DepthToViewZ")}}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}setSize(e,i){this.renderTargetMaskBuffer.setSize(e,i),this.renderTargetDepthBuffer.setSize(e,i);let t=Math.round(e/this.downSampleRatio),r=Math.round(i/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(t,r),this.renderTargetBlurBuffer1.setSize(t,r),this.renderTargetEdgeBuffer1.setSize(t,r),this.separableBlurMaterial1.uniforms.texSize.value.set(t,r),t=Math.round(t/2),r=Math.round(r/2),this.renderTargetBlurBuffer2.setSize(t,r),this.renderTargetEdgeBuffer2.setSize(t,r),this.separableBlurMaterial2.uniforms.texSize.value.set(t,r)}changeVisibilityOfSelectedObjects(e){let i=this._visibilityCache;function t(r){r.isMesh&&(e===!0?r.visible=i.get(r):(i.set(r,r.visible),r.visible=e))}for(let r=0;r<this.selectedObjects.length;r++)this.selectedObjects[r].traverse(t)}changeVisibilityOfNonSelectedObjects(e){let i=this._visibilityCache,t=[];function r(s){s.isMesh&&t.push(s)}for(let s=0;s<this.selectedObjects.length;s++)this.selectedObjects[s].traverse(r);function o(s){if(s.isMesh||s.isSprite){let a=!1;for(let c=0;c<t.length;c++)if(t[c].id===s.id){a=!0;break}if(a===!1){let c=s.visible;(e===!1||i.get(s)===!0)&&(s.visible=e),i.set(s,c)}}else(s.isPoints||s.isLine)&&(e===!0?s.visible=i.get(s):(i.set(s,s.visible),s.visible=e))}this.renderScene.traverse(o)}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(e,i,t,r,o){if(this.selectedObjects.length>0){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();let s=e.autoClear;e.autoClear=!1,o&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);let a=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=a,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){let c=.625+Math.cos(performance.now()*.01/this.pulsePeriod)*.75/2;this.tempPulseColor1.multiplyScalar(c),this.tempPulseColor2.multiplyScalar(c)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=n.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=n.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=n.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=n.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,o&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(t),this.fsQuad.render(e),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=t.texture,e.setRenderTarget(null),this.fsQuad.render(e))}getPrepareMaskMaterial(){return new Dt({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new z(.5,.5)},textureMatrix:{value:null}},vertexShader:`#include <morphtarget_pars_vertex>
				#include <skinning_pars_vertex>

				varying vec4 projTexCoord;
				varying vec4 vPosition;
				uniform mat4 textureMatrix;

				void main() {

					#include <skinbase_vertex>
					#include <begin_vertex>
					#include <morphtarget_vertex>
					#include <skinning_vertex>
					#include <project_vertex>

					vPosition = mvPosition;

					vec4 worldPosition = vec4( transformed, 1.0 );

					#ifdef USE_INSTANCING

						worldPosition = instanceMatrix * worldPosition;

					#endif
					
					worldPosition = modelMatrix * worldPosition;

					projTexCoord = textureMatrix * worldPosition;

				}`,fragmentShader:`#include <packing>
				varying vec4 vPosition;
				varying vec4 projTexCoord;
				uniform sampler2D depthTexture;
				uniform vec2 cameraNearFar;

				void main() {

					float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));
					float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );
					float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;
					gl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);

				}`})}getEdgeDetectionMaterial(){return new Dt({uniforms:{maskTexture:{value:null},texSize:{value:new z(.5,.5)},visibleEdgeColor:{value:new M(1,1,1)},hiddenEdgeColor:{value:new M(1,1,1)}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform vec2 texSize;
				uniform vec3 visibleEdgeColor;
				uniform vec3 hiddenEdgeColor;

				void main() {
					vec2 invSize = 1.0 / texSize;
					vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);
					vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);
					vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);
					vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);
					vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);
					float diff1 = (c1.r - c2.r)*0.5;
					float diff2 = (c3.r - c4.r)*0.5;
					float d = length( vec2(diff1, diff2) );
					float a1 = min(c1.g, c2.g);
					float a2 = min(c3.g, c4.g);
					float visibilityFactor = min(a1, a2);
					vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;
					gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);
				}`})}getSeperableBlurMaterial(e){return new Dt({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new z(.5,.5)},direction:{value:new z(.5,.5)},kernelRadius:{value:1}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;
				uniform float kernelRadius;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}

				void main() {
					vec2 invSize = 1.0 / texSize;
					float sigma = kernelRadius/2.0;
					float weightSum = gaussianPdf(0.0, sigma);
					vec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;
					vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);
					vec2 uvOffset = delta;
					for( int i = 1; i <= MAX_RADIUS; i ++ ) {
						float x = kernelRadius * float(i) / float(MAX_RADIUS);
						float w = gaussianPdf(x, sigma);
						vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);
						vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);
						diffuseSum += ((sample1 + sample2) * w);
						weightSum += (2.0 * w);
						uvOffset += delta;
					}
					gl_FragColor = diffuseSum/weightSum;
				}`})}getOverlayMaterial(){return new Dt({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform sampler2D edgeTexture1;
				uniform sampler2D edgeTexture2;
				uniform sampler2D patternTexture;
				uniform float edgeStrength;
				uniform float edgeGlow;
				uniform bool usePatternTexture;

				void main() {
					vec4 edgeValue1 = texture2D(edgeTexture1, vUv);
					vec4 edgeValue2 = texture2D(edgeTexture2, vUv);
					vec4 maskColor = texture2D(maskTexture, vUv);
					vec4 patternColor = texture2D(patternTexture, 6.0 * vUv);
					float visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;
					vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;
					vec4 finalColor = edgeStrength * maskColor.r * edgeValue;
					if(usePatternTexture)
						finalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);
					gl_FragColor = finalColor;
				}`,blending:Td,depthTest:!1,depthWrite:!1,transparent:!0})}};If.BlurDirectionX=new z(1,0);If.BlurDirectionY=new z(0,1);var xre=["*"],kU=(()=>{let e=class e extends Ii{getType(){return If}set renderScene(t){this._objRef&&(this._objRef.renderScene=t)}get renderScene(){return this._objRef?.renderScene}set renderCamera(t){this._objRef&&(this._objRef.renderCamera=t)}get renderCamera(){return this._objRef?.renderCamera}set selectedObjects(t){this._objRef&&(this._objRef.selectedObjects=t)}get selectedObjects(){return this._objRef?.selectedObjects}set visibleEdgeColor(t){this._objRef&&(this._objRef.visibleEdgeColor=ve(this._objRef.visibleEdgeColor,t))}get visibleEdgeColor(){return this._objRef?.visibleEdgeColor}set hiddenEdgeColor(t){this._objRef&&(this._objRef.hiddenEdgeColor=ve(this._objRef.hiddenEdgeColor,t))}get hiddenEdgeColor(){return this._objRef?.hiddenEdgeColor}set edgeGlow(t){this._objRef&&(this._objRef.edgeGlow=t)}get edgeGlow(){return this._objRef?.edgeGlow}set usePatternTexture(t){this._objRef&&(this._objRef.usePatternTexture=t)}get usePatternTexture(){return this._objRef?.usePatternTexture}set edgeThickness(t){this._objRef&&(this._objRef.edgeThickness=t)}get edgeThickness(){return this._objRef?.edgeThickness}set edgeStrength(t){this._objRef&&(this._objRef.edgeStrength=t)}get edgeStrength(){return this._objRef?.edgeStrength}set downSampleRatio(t){this._objRef&&(this._objRef.downSampleRatio=t)}get downSampleRatio(){return this._objRef?.downSampleRatio}set pulsePeriod(t){this._objRef&&(this._objRef.pulsePeriod=t)}get pulsePeriod(){return this._objRef?.pulsePeriod}set resolution(t){this._objRef&&(this._objRef.resolution=ve(this._objRef.resolution,t))}get resolution(){return this._objRef?.resolution}set patternTexture(t){this._objRef&&(this._objRef.patternTexture=t)}get patternTexture(){return this._objRef?.patternTexture}set maskBufferMaterial(t){this._objRef&&(this._objRef.maskBufferMaterial=t)}get maskBufferMaterial(){return this._objRef?.maskBufferMaterial}set renderTargetMaskBuffer(t){this._objRef&&(this._objRef.renderTargetMaskBuffer=t)}get renderTargetMaskBuffer(){return this._objRef?.renderTargetMaskBuffer}set depthMaterial(t){this._objRef&&(this._objRef.depthMaterial=t)}get depthMaterial(){return this._objRef?.depthMaterial}set prepareMaskMaterial(t){this._objRef&&(this._objRef.prepareMaskMaterial=t)}get prepareMaskMaterial(){return this._objRef?.prepareMaskMaterial}set renderTargetDepthBuffer(t){this._objRef&&(this._objRef.renderTargetDepthBuffer=t)}get renderTargetDepthBuffer(){return this._objRef?.renderTargetDepthBuffer}set renderTargetMaskDownSampleBuffer(t){this._objRef&&(this._objRef.renderTargetMaskDownSampleBuffer=t)}get renderTargetMaskDownSampleBuffer(){return this._objRef?.renderTargetMaskDownSampleBuffer}set renderTargetBlurBuffer1(t){this._objRef&&(this._objRef.renderTargetBlurBuffer1=t)}get renderTargetBlurBuffer1(){return this._objRef?.renderTargetBlurBuffer1}set renderTargetBlurBuffer2(t){this._objRef&&(this._objRef.renderTargetBlurBuffer2=t)}get renderTargetBlurBuffer2(){return this._objRef?.renderTargetBlurBuffer2}set edgeDetectionMaterial(t){this._objRef&&(this._objRef.edgeDetectionMaterial=t)}get edgeDetectionMaterial(){return this._objRef?.edgeDetectionMaterial}set renderTargetEdgeBuffer1(t){this._objRef&&(this._objRef.renderTargetEdgeBuffer1=t)}get renderTargetEdgeBuffer1(){return this._objRef?.renderTargetEdgeBuffer1}set renderTargetEdgeBuffer2(t){this._objRef&&(this._objRef.renderTargetEdgeBuffer2=t)}get renderTargetEdgeBuffer2(){return this._objRef?.renderTargetEdgeBuffer2}set separableBlurMaterial1(t){this._objRef&&(this._objRef.separableBlurMaterial1=t)}get separableBlurMaterial1(){return this._objRef?.separableBlurMaterial1}set separableBlurMaterial2(t){this._objRef&&(this._objRef.separableBlurMaterial2=t)}get separableBlurMaterial2(){return this._objRef?.separableBlurMaterial2}set overlayMaterial(t){this._objRef&&(this._objRef.overlayMaterial=t)}get overlayMaterial(){return this._objRef?.overlayMaterial}set copyUniforms(t){this._objRef&&(this._objRef.copyUniforms=t)}get copyUniforms(){return this._objRef?.copyUniforms}set materialCopy(t){this._objRef&&(this._objRef.materialCopy=t)}get materialCopy(){return this._objRef?.materialCopy}set oldClearColor(t){this._objRef&&(this._objRef.oldClearColor=ve(this._objRef.oldClearColor,t))}get oldClearColor(){return this._objRef?.oldClearColor}set oldClearAlpha(t){this._objRef&&(this._objRef.oldClearAlpha=t)}get oldClearAlpha(){return this._objRef?.oldClearAlpha}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}set tempPulseColor1(t){this._objRef&&(this._objRef.tempPulseColor1=ve(this._objRef.tempPulseColor1,t))}get tempPulseColor1(){return this._objRef?.tempPulseColor1}set tempPulseColor2(t){this._objRef&&(this._objRef.tempPulseColor2=ve(this._objRef.tempPulseColor2,t))}get tempPulseColor2(){return this._objRef?.tempPulseColor2}set textureMatrix(t){this._objRef&&(this._objRef.textureMatrix=ve(this._objRef.textureMatrix,t))}get textureMatrix(){return this._objRef?.textureMatrix}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-outlinePass"]],inputs:{renderScene:"renderScene",renderCamera:"renderCamera",selectedObjects:"selectedObjects",visibleEdgeColor:"visibleEdgeColor",hiddenEdgeColor:"hiddenEdgeColor",edgeGlow:"edgeGlow",usePatternTexture:"usePatternTexture",edgeThickness:"edgeThickness",edgeStrength:"edgeStrength",downSampleRatio:"downSampleRatio",pulsePeriod:"pulsePeriod",resolution:"resolution",patternTexture:"patternTexture",maskBufferMaterial:"maskBufferMaterial",renderTargetMaskBuffer:"renderTargetMaskBuffer",depthMaterial:"depthMaterial",prepareMaskMaterial:"prepareMaskMaterial",renderTargetDepthBuffer:"renderTargetDepthBuffer",renderTargetMaskDownSampleBuffer:"renderTargetMaskDownSampleBuffer",renderTargetBlurBuffer1:"renderTargetBlurBuffer1",renderTargetBlurBuffer2:"renderTargetBlurBuffer2",edgeDetectionMaterial:"edgeDetectionMaterial",renderTargetEdgeBuffer1:"renderTargetEdgeBuffer1",renderTargetEdgeBuffer2:"renderTargetEdgeBuffer2",separableBlurMaterial1:"separableBlurMaterial1",separableBlurMaterial2:"separableBlurMaterial2",overlayMaterial:"overlayMaterial",copyUniforms:"copyUniforms",materialCopy:"materialCopy",oldClearColor:"oldClearColor",oldClearAlpha:"oldClearAlpha",fsQuad:"fsQuad",tempPulseColor1:"tempPulseColor1",tempPulseColor2:"tempPulseColor2",textureMatrix:"textureMatrix"},features:[oe([{provide:ui,useExisting:ge(()=>e)}]),X],ngContentSelectors:xre,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Mre=["*"],G1=(()=>{let e=class e extends on{getType(){return Dt}get isShaderMaterial(){return this._objRef?.isShaderMaterial}set type(t){this._objRef&&(this._objRef.type=t)}get type(){return this._objRef?.type}set defines(t){this._objRef&&(this._objRef.defines=t)}get defines(){return this._objRef?.defines}set uniforms(t){this._objRef&&(this._objRef.uniforms=t)}get uniforms(){return this._objRef?.uniforms}set uniformsGroups(t){this._objRef&&(this._objRef.uniformsGroups=t)}get uniformsGroups(){return this._objRef?.uniformsGroups}set vertexShader(t){this._objRef&&(this._objRef.vertexShader=t)}get vertexShader(){return this._objRef?.vertexShader}set fragmentShader(t){this._objRef&&(this._objRef.fragmentShader=t)}get fragmentShader(){return this._objRef?.fragmentShader}set linewidth(t){this._objRef&&(this._objRef.linewidth=t)}get linewidth(){return this._objRef?.linewidth}set wireframe(t){this._objRef&&(this._objRef.wireframe=t)}get wireframe(){return this._objRef?.wireframe}set wireframeLinewidth(t){this._objRef&&(this._objRef.wireframeLinewidth=t)}get wireframeLinewidth(){return this._objRef?.wireframeLinewidth}set fog(t){this._objRef&&(this._objRef.fog=t)}get fog(){return this._objRef?.fog}set lights(t){this._objRef&&(this._objRef.lights=t)}get lights(){return this._objRef?.lights}set clipping(t){this._objRef&&(this._objRef.clipping=t)}get clipping(){return this._objRef?.clipping}set extensions(t){this._objRef&&(this._objRef.extensions=t)}get extensions(){return this._objRef?.extensions}set defaultAttributeValues(t){this._objRef&&(this._objRef.defaultAttributeValues=t)}get defaultAttributeValues(){return this._objRef?.defaultAttributeValues}set index0AttributeName(t){this._objRef&&(this._objRef.index0AttributeName=t)}get index0AttributeName(){return this._objRef?.index0AttributeName}set uniformsNeedUpdate(t){this._objRef&&(this._objRef.uniformsNeedUpdate=t)}get uniformsNeedUpdate(){return this._objRef?.uniformsNeedUpdate}set glslVersion(t){this._objRef&&(this._objRef.glslVersion=t)}get glslVersion(){return this._objRef?.glslVersion}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-shaderMaterial"]],inputs:{type:"type",defines:"defines",uniforms:"uniforms",uniformsGroups:"uniformsGroups",vertexShader:"vertexShader",fragmentShader:"fragmentShader",linewidth:"linewidth",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",fog:"fog",lights:"lights",clipping:"clipping",extensions:"extensions",defaultAttributeValues:"defaultAttributeValues",index0AttributeName:"index0AttributeName",uniformsNeedUpdate:"uniformsNeedUpdate",glslVersion:"glslVersion"},features:[oe([{provide:on,useExisting:ge(()=>e)}]),X],ngContentSelectors:Mre,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Ix=class extends an{constructor(e,i,t=null,r=null,o=null){super(),this.scene=e,this.camera=i,this.overrideMaterial=t,this.clearColor=r,this.clearAlpha=o,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new _e}render(e,i,t){let r=e.autoClear;e.autoClear=!1;let o,s;this.overrideMaterial!==null&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor)),this.clearAlpha!==null&&(o=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(o),this.overrideMaterial!==null&&(this.scene.overrideMaterial=s),e.autoClear=r}};var Rre=["*"],FU=(()=>{let e=class e extends Ii{getType(){return Ix}set scene(t){this._objRef&&(this._objRef.scene=t)}get scene(){return this._objRef?.scene}set camera(t){this._objRef&&(this._objRef.camera=t)}get camera(){return this._objRef?.camera}set overrideMaterial(t){this._objRef&&(this._objRef.overrideMaterial=t)}get overrideMaterial(){return this._objRef?.overrideMaterial}set clearColor(t){this._objRef&&(this._objRef.clearColor=ve(this._objRef.clearColor,t))}get clearColor(){return this._objRef?.clearColor}set clearAlpha(t){this._objRef&&(this._objRef.clearAlpha=t)}get clearAlpha(){return this._objRef?.clearAlpha}set clearDepth(t){this._objRef&&(this._objRef.clearDepth=t)}get clearDepth(){return this._objRef?.clearDepth}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-renderPassGen"]],inputs:{scene:"scene",camera:"camera",overrideMaterial:"overrideMaterial",clearColor:"clearColor",clearAlpha:"clearAlpha",clearDepth:"clearDepth"},features:[oe([{provide:ui,useExisting:ge(()=>e)}]),X],ngContentSelectors:Rre,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Tg={name:"SAOShader",defines:{NUM_SAMPLES:7,NUM_RINGS:4,DIFFUSE_TEXTURE:0,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new z(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new je},cameraInverseProjectionMatrix:{value:new je},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`
		#include <common>

		varying vec2 vUv;

		#if DIFFUSE_TEXTURE == 1
		uniform sampler2D tDiffuse;
		#endif

		uniform highp sampler2D tDepth;
		uniform highp sampler2D tNormal;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;

		uniform float scale;
		uniform float intensity;
		uniform float bias;
		uniform float kernelRadius;
		uniform float minResolution;
		uniform vec2 size;
		uniform float randomSeed;

		// RGBA depth

		#include <packing>

		vec4 getDefaultColor( const in vec2 screenPosition ) {
			#if DIFFUSE_TEXTURE == 1
			return texture2D( tDiffuse, vUv );
			#else
			return vec4( 1.0 );
			#endif
		}

		float getDepth( const in vec2 screenPosition ) {
			return texture2D( tDepth, screenPosition ).x;
		}

		float getViewZ( const in float depth ) {
			#if PERSPECTIVE_CAMERA == 1
			return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
			return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}

		vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {
			float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];
			vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );
			clipPosition *= clipW; // unprojection.

			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;
		}

		vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {
			return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );
		}

		float scaleDividedByCameraFar;
		float minResolutionMultipliedByCameraFar;

		float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {
			vec3 viewDelta = sampleViewPosition - centerViewPosition;
			float viewDistance = length( viewDelta );
			float scaledScreenDistance = scaleDividedByCameraFar * viewDistance;

			return max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );
		}

		// moving costly divides into consts
		const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );
		const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );

		float getAmbientOcclusion( const in vec3 centerViewPosition ) {
			// precompute some variables require in getOcclusion.
			scaleDividedByCameraFar = scale / cameraFar;
			minResolutionMultipliedByCameraFar = minResolution * cameraFar;
			vec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );

			// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/
			float angle = rand( vUv + randomSeed ) * PI2;
			vec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;
			vec2 radiusStep = radius;

			float occlusionSum = 0.0;
			float weightSum = 0.0;

			for( int i = 0; i < NUM_SAMPLES; i ++ ) {
				vec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;
				radius += radiusStep;
				angle += ANGLE_STEP;

				float sampleDepth = getDepth( sampleUv );
				if( sampleDepth >= ( 1.0 - EPSILON ) ) {
					continue;
				}

				float sampleViewZ = getViewZ( sampleDepth );
				vec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );
				occlusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );
				weightSum += 1.0;
			}

			if( weightSum == 0.0 ) discard;

			return occlusionSum * ( intensity / weightSum );
		}

		void main() {
			float centerDepth = getDepth( vUv );
			if( centerDepth >= ( 1.0 - EPSILON ) ) {
				discard;
			}

			float centerViewZ = getViewZ( centerDepth );
			vec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );

			float ambientOcclusion = getAmbientOcclusion( viewPosition );

			gl_FragColor = getDefaultColor( vUv );
			gl_FragColor.xyz *=  1.0 - ambientOcclusion;
		}`};var _c={name:"DepthLimitedBlurShader",defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new z(512,512)},sampleUvOffsets:{value:[new z(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1e3},depthCutoff:{value:10}},vertexShader:`

		#include <common>

		uniform vec2 size;

		varying vec2 vUv;
		varying vec2 vInvSize;

		void main() {
			vUv = uv;
			vInvSize = 1.0 / size;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`

		#include <common>
		#include <packing>

		uniform sampler2D tDiffuse;
		uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform float depthCutoff;

		uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];
		uniform float sampleWeights[ KERNEL_RADIUS + 1 ];

		varying vec2 vUv;
		varying vec2 vInvSize;

		float getDepth( const in vec2 screenPosition ) {
			#if DEPTH_PACKING == 1
			return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );
			#else
			return texture2D( tDepth, screenPosition ).x;
			#endif
		}

		float getViewZ( const in float depth ) {
			#if PERSPECTIVE_CAMERA == 1
			return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
			return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}

		void main() {
			float depth = getDepth( vUv );
			if( depth >= ( 1.0 - EPSILON ) ) {
				discard;
			}

			float centerViewZ = -getViewZ( depth );
			bool rBreak = false, lBreak = false;

			float weightSum = sampleWeights[0];
			vec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;

			for( int i = 1; i <= KERNEL_RADIUS; i ++ ) {

				float sampleWeight = sampleWeights[i];
				vec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;

				vec2 sampleUv = vUv + sampleUvOffset;
				float viewZ = -getViewZ( getDepth( sampleUv ) );

				if( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;

				if( ! rBreak ) {
					diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;
					weightSum += sampleWeight;
				}

				sampleUv = vUv - sampleUvOffset;
				viewZ = -getViewZ( getDepth( sampleUv ) );

				if( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;

				if( ! lBreak ) {
					diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;
					weightSum += sampleWeight;
				}

			}

			gl_FragColor = diffuseSum / weightSum;
		}`},Cg={createSampleWeights:function(n,e){let i=[];for(let t=0;t<=n;t++)i.push(Tre(t,e));return i},createSampleOffsets:function(n,e){let i=[];for(let t=0;t<=n;t++)i.push(e.clone().multiplyScalar(t));return i},configure:function(n,e,i,t){n.defines.KERNEL_RADIUS=e,n.uniforms.sampleUvOffsets.value=Cg.createSampleOffsets(e,t),n.uniforms.sampleWeights.value=Cg.createSampleWeights(e,i),n.needsUpdate=!0}};function Tre(n,e){return Math.exp(-(n*n)/(2*(e*e)))/(Math.sqrt(2*Math.PI)*e)}var W1=(()=>{class n extends an{constructor(i,t,r=new z(256,256)){super(),this.scene=i,this.camera=t,this.clear=!0,this.needsSwap=!1,this.originalClearColor=new _e,this._oldClearColor=new _e,this.oldClearAlpha=1,this.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},this.resolution=new z(r.x,r.y),this.saoRenderTarget=new oi(this.resolution.x,this.resolution.y,{type:Wi}),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone();let o=new hs;o.format=Ks,o.type=la,this.normalRenderTarget=new oi(this.resolution.x,this.resolution.y,{minFilter:li,magFilter:li,type:Wi,depthTexture:o}),this.normalMaterial=new oa,this.normalMaterial.blending=Qt,this.saoMaterial=new Dt({defines:Object.assign({},Tg.defines),fragmentShader:Tg.fragmentShader,vertexShader:Tg.vertexShader,uniforms:Li.clone(Tg.uniforms)}),this.saoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms.tDepth.value=o,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.blending=Qt,this.vBlurMaterial=new Dt({uniforms:Li.clone(_c.uniforms),defines:Object.assign({},_c.defines),vertexShader:_c.vertexShader,fragmentShader:_c.fragmentShader}),this.vBlurMaterial.defines.DEPTH_PACKING=0,this.vBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms.tDepth.value=o,this.vBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=Qt,this.hBlurMaterial=new Dt({uniforms:Li.clone(_c.uniforms),defines:Object.assign({},_c.defines),vertexShader:_c.vertexShader,fragmentShader:_c.fragmentShader}),this.hBlurMaterial.defines.DEPTH_PACKING=0,this.hBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms.tDiffuse.value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms.tDepth.value=o,this.hBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=Qt,this.materialCopy=new Dt({uniforms:Li.clone(dr.uniforms),vertexShader:dr.vertexShader,fragmentShader:dr.fragmentShader,blending:Qt}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=zd,this.materialCopy.blendSrc=rf,this.materialCopy.blendDst=dl,this.materialCopy.blendEquation=gr,this.materialCopy.blendSrcAlpha=nf,this.materialCopy.blendDstAlpha=dl,this.materialCopy.blendEquationAlpha=gr,this.fsQuad=new lr(null)}render(i,t,r){this.renderToScreen&&(this.materialCopy.blending=Qt,this.materialCopy.uniforms.tDiffuse.value=r.texture,this.materialCopy.needsUpdate=!0,this.renderPass(i,this.materialCopy,null)),i.getClearColor(this._oldClearColor),this.oldClearAlpha=i.getClearAlpha();let o=i.autoClear;i.autoClear=!1,this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;let s=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);this.vBlurMaterial.uniforms.depthCutoff.value=s,this.hBlurMaterial.uniforms.depthCutoff.value=s,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),(this.prevStdDev!==this.params.saoBlurStdDev||this.prevNumSamples!==this.params.saoBlurRadius)&&(Cg.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new z(0,1)),Cg.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new z(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),this.renderOverride(i,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(i,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(i,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(i,this.hBlurMaterial,this.saoRenderTarget,16777215,1));let a=this.materialCopy;this.params.output===n.OUTPUT.Normal?(this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),this.params.output===n.OUTPUT.Default?a.blending=zd:a.blending=Qt,this.renderPass(i,a,this.renderToScreen?null:r),i.setClearColor(this._oldClearColor,this.oldClearAlpha),i.autoClear=o}renderPass(i,t,r,o,s){i.getClearColor(this.originalClearColor);let a=i.getClearAlpha(),c=i.autoClear;i.setRenderTarget(r),i.autoClear=!1,o!=null&&(i.setClearColor(o),i.setClearAlpha(s||0),i.clear()),this.fsQuad.material=t,this.fsQuad.render(i),i.autoClear=c,i.setClearColor(this.originalClearColor),i.setClearAlpha(a)}renderOverride(i,t,r,o,s){i.getClearColor(this.originalClearColor);let a=i.getClearAlpha(),c=i.autoClear;i.setRenderTarget(r),i.autoClear=!1,o=t.clearColor||o,s=t.clearAlpha||s,o!=null&&(i.setClearColor(o),i.setClearAlpha(s||0),i.clear()),this.scene.overrideMaterial=t,i.render(this.scene,this.camera),this.scene.overrideMaterial=null,i.autoClear=c,i.setClearColor(this.originalClearColor),i.setClearAlpha(a)}setSize(i,t){this.saoRenderTarget.setSize(i,t),this.blurIntermediateRenderTarget.setSize(i,t),this.normalRenderTarget.setSize(i,t),this.saoMaterial.uniforms.size.value.set(i,t),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(i,t),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(i,t),this.hBlurMaterial.needsUpdate=!0}dispose(){this.saoRenderTarget.dispose(),this.blurIntermediateRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.normalMaterial.dispose(),this.saoMaterial.dispose(),this.vBlurMaterial.dispose(),this.hBlurMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}}return n.OUTPUT={Default:0,SAO:1,Normal:2},n})();var Cre=["*"],vc=class vc extends Ii{getType(){return W1}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set originalClearColor(e){this._objRef&&(this._objRef.originalClearColor=ve(this._objRef.originalClearColor,e))}get originalClearColor(){return this._objRef?.originalClearColor}set oldClearColor(e){this._objRef&&(this._objRef.oldClearColor=ve(this._objRef.oldClearColor,e))}get oldClearColor(){return this._objRef?.oldClearColor}set oldClearAlpha(e){this._objRef&&(this._objRef.oldClearAlpha=e)}get oldClearAlpha(){return this._objRef?.oldClearAlpha}set resolution(e){this._objRef&&(this._objRef.resolution=ve(this._objRef.resolution,e))}get resolution(){return this._objRef?.resolution}set saoRenderTarget(e){this._objRef&&(this._objRef.saoRenderTarget=e)}get saoRenderTarget(){return this._objRef?.saoRenderTarget}set blurIntermediateRenderTarget(e){this._objRef&&(this._objRef.blurIntermediateRenderTarget=e)}get blurIntermediateRenderTarget(){return this._objRef?.blurIntermediateRenderTarget}set normalRenderTarget(e){this._objRef&&(this._objRef.normalRenderTarget=e)}get normalRenderTarget(){return this._objRef?.normalRenderTarget}set normalMaterial(e){this._objRef&&(this._objRef.normalMaterial=e)}get normalMaterial(){return this._objRef?.normalMaterial}set saoMaterial(e){this._objRef&&(this._objRef.saoMaterial=e)}get saoMaterial(){return this._objRef?.saoMaterial}set vBlurMaterial(e){this._objRef&&(this._objRef.vBlurMaterial=e)}get vBlurMaterial(){return this._objRef?.vBlurMaterial}set hBlurMaterial(e){this._objRef&&(this._objRef.hBlurMaterial=e)}get hBlurMaterial(){return this._objRef?.hBlurMaterial}set materialCopy(e){this._objRef&&(this._objRef.materialCopy=e)}get materialCopy(){return this._objRef?.materialCopy}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set params(e){this._objRef&&(this._objRef.params=e)}get params(){return this._objRef?.params}};vc.OUTPUT=W1.OUTPUT,vc.\u0275fac=(()=>{let e;return function(t){return(e||(e=be(vc)))(t||vc)}})(),vc.\u0275cmp=L({type:vc,selectors:[["th-sAOPass"]],inputs:{scene:"scene",camera:"camera",originalClearColor:"originalClearColor",oldClearColor:"oldClearColor",oldClearAlpha:"oldClearAlpha",resolution:"resolution",saoRenderTarget:"saoRenderTarget",blurIntermediateRenderTarget:"blurIntermediateRenderTarget",normalRenderTarget:"normalRenderTarget",normalMaterial:"normalMaterial",saoMaterial:"saoMaterial",vBlurMaterial:"vBlurMaterial",hBlurMaterial:"hBlurMaterial",materialCopy:"materialCopy",fsQuad:"fsQuad",params:"params"},features:[oe([{provide:ui,useExisting:ge(()=>vc)}]),X],ngContentSelectors:Cre,decls:1,vars:0,template:function(i,t){i&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});var jU=vc;var Px=class{constructor(e=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let i=0;i<256;i++)this.p[i]=Math.floor(e.random()*256);this.perm=[];for(let i=0;i<512;i++)this.perm[i]=this.p[i&255];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(e,i,t){return e[0]*i+e[1]*t}dot3(e,i,t,r){return e[0]*i+e[1]*t+e[2]*r}dot4(e,i,t,r,o){return e[0]*i+e[1]*t+e[2]*r+e[3]*o}noise(e,i){let t,r,o,s=.5*(Math.sqrt(3)-1),a=(e+i)*s,c=Math.floor(e+a),l=Math.floor(i+a),d=(3-Math.sqrt(3))/6,u=(c+l)*d,h=c-u,f=l-u,p=e-h,b=i-f,m,g;p>b?(m=1,g=0):(m=0,g=1);let v=p-m+d,_=b-g+d,y=p-1+2*d,C=b-1+2*d,R=c&255,w=l&255,A=this.perm[R+this.perm[w]]%12,S=this.perm[R+m+this.perm[w+g]]%12,x=this.perm[R+1+this.perm[w+1]]%12,F=.5-p*p-b*b;F<0?t=0:(F*=F,t=F*F*this.dot(this.grad3[A],p,b));let V=.5-v*v-_*_;V<0?r=0:(V*=V,r=V*V*this.dot(this.grad3[S],v,_));let O=.5-y*y-C*C;return O<0?o=0:(O*=O,o=O*O*this.dot(this.grad3[x],y,C)),70*(t+r+o)}noise3d(e,i,t){let r,o,s,a,l=(e+i+t)*.3333333333333333,d=Math.floor(e+l),u=Math.floor(i+l),h=Math.floor(t+l),f=1/6,p=(d+u+h)*f,b=d-p,m=u-p,g=h-p,v=e-b,_=i-m,y=t-g,C,R,w,A,S,x;v>=_?_>=y?(C=1,R=0,w=0,A=1,S=1,x=0):v>=y?(C=1,R=0,w=0,A=1,S=0,x=1):(C=0,R=0,w=1,A=1,S=0,x=1):_<y?(C=0,R=0,w=1,A=0,S=1,x=1):v<y?(C=0,R=1,w=0,A=0,S=1,x=1):(C=0,R=1,w=0,A=1,S=1,x=0);let F=v-C+f,V=_-R+f,O=y-w+f,K=v-A+2*f,ne=_-S+2*f,G=y-x+2*f,$=v-1+3*f,U=_-1+3*f,Z=y-1+3*f,me=d&255,ke=u&255,$e=h&255,vt=this.perm[me+this.perm[ke+this.perm[$e]]]%12,Y=this.perm[me+C+this.perm[ke+R+this.perm[$e+w]]]%12,Ae=this.perm[me+A+this.perm[ke+S+this.perm[$e+x]]]%12,Ge=this.perm[me+1+this.perm[ke+1+this.perm[$e+1]]]%12,N=.6-v*v-_*_-y*y;N<0?r=0:(N*=N,r=N*N*this.dot3(this.grad3[vt],v,_,y));let Se=.6-F*F-V*V-O*O;Se<0?o=0:(Se*=Se,o=Se*Se*this.dot3(this.grad3[Y],F,V,O));let Oe=.6-K*K-ne*ne-G*G;Oe<0?s=0:(Oe*=Oe,s=Oe*Oe*this.dot3(this.grad3[Ae],K,ne,G));let B=.6-$*$-U*U-Z*Z;return B<0?a=0:(B*=B,a=B*B*this.dot3(this.grad3[Ge],$,U,Z)),32*(r+o+s+a)}noise4d(e,i,t,r){let o=this.grad4,s=this.simplex,a=this.perm,c=(Math.sqrt(5)-1)/4,l=(5-Math.sqrt(5))/20,d,u,h,f,p,b=(e+i+t+r)*c,m=Math.floor(e+b),g=Math.floor(i+b),v=Math.floor(t+b),_=Math.floor(r+b),y=(m+g+v+_)*l,C=m-y,R=g-y,w=v-y,A=_-y,S=e-C,x=i-R,F=t-w,V=r-A,O=S>x?32:0,K=S>F?16:0,ne=x>F?8:0,G=S>V?4:0,$=x>V?2:0,U=F>V?1:0,Z=O+K+ne+G+$+U,me=s[Z][0]>=3?1:0,ke=s[Z][1]>=3?1:0,$e=s[Z][2]>=3?1:0,vt=s[Z][3]>=3?1:0,Y=s[Z][0]>=2?1:0,Ae=s[Z][1]>=2?1:0,Ge=s[Z][2]>=2?1:0,N=s[Z][3]>=2?1:0,Se=s[Z][0]>=1?1:0,Oe=s[Z][1]>=1?1:0,B=s[Z][2]>=1?1:0,yt=s[Z][3]>=1?1:0,fe=S-me+l,Ie=x-ke+l,ye=F-$e+l,Be=V-vt+l,De=S-Y+2*l,Ze=x-Ae+2*l,mt=F-Ge+2*l,I=V-N+2*l,E=S-Se+3*l,Q=x-Oe+3*l,we=F-B+3*l,Ee=V-yt+3*l,Re=S-1+4*l,ut=x-1+4*l,ze=F-1+4*l,Ve=V-1+4*l,Mt=m&255,Ne=g&255,ot=v&255,Ot=_&255,wt=a[Mt+a[Ne+a[ot+a[Ot]]]]%32,it=a[Mt+me+a[Ne+ke+a[ot+$e+a[Ot+vt]]]]%32,zt=a[Mt+Y+a[Ne+Ae+a[ot+Ge+a[Ot+N]]]]%32,si=a[Mt+Se+a[Ne+Oe+a[ot+B+a[Ot+yt]]]]%32,Pi=a[Mt+1+a[Ne+1+a[ot+1+a[Ot+1]]]]%32,Pt=.6-S*S-x*x-F*F-V*V;Pt<0?d=0:(Pt*=Pt,d=Pt*Pt*this.dot4(o[wt],S,x,F,V));let T=.6-fe*fe-Ie*Ie-ye*ye-Be*Be;T<0?u=0:(T*=T,u=T*T*this.dot4(o[it],fe,Ie,ye,Be));let W=.6-De*De-Ze*Ze-mt*mt-I*I;W<0?h=0:(W*=W,h=W*W*this.dot4(o[zt],De,Ze,mt,I));let J=.6-E*E-Q*Q-we*we-Ee*Ee;J<0?f=0:(J*=J,f=J*J*this.dot4(o[si],E,Q,we,Ee));let Te=.6-Re*Re-ut*ut-ze*ze-Ve*Ve;return Te<0?p=0:(Te*=Te,p=Te*Te*this.dot4(o[Pi],Re,ut,ze,Ve)),27*(d+u+h+f+p)}};var Eg={name:"SSAOShader",defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new z},cameraProjectionMatrix:{value:new je},cameraInverseProjectionMatrix:{value:new je},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
		uniform highp sampler2D tNormal;
		uniform highp sampler2D tDepth;
		uniform sampler2D tNoise;

		uniform vec3 kernel[ KERNEL_SIZE ];

		uniform vec2 resolution;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;

		uniform float kernelRadius;
		uniform float minDistance; // avoid artifacts caused by neighbour fragments with minimal depth difference
		uniform float maxDistance; // avoid the influence of fragments which are too far away

		varying vec2 vUv;

		#include <packing>

		float getDepth( const in vec2 screenPosition ) {

			return texture2D( tDepth, screenPosition ).x;

		}

		float getLinearDepth( const in vec2 screenPosition ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, screenPosition ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, screenPosition ).x;

			#endif

		}

		float getViewZ( const in float depth ) {

			#if PERSPECTIVE_CAMERA == 1

				return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );

			#else

				return orthographicDepthToViewZ( depth, cameraNear, cameraFar );

			#endif

		}

		vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {

			float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];

			vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );

			clipPosition *= clipW; // unprojection.

			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;

		}

		vec3 getViewNormal( const in vec2 screenPosition ) {

			return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );

		}

		void main() {

			float depth = getDepth( vUv );

			if ( depth == 1.0 ) {

				gl_FragColor = vec4( 1.0 ); // don't influence background
				
			} else {

				float viewZ = getViewZ( depth );

				vec3 viewPosition = getViewPosition( vUv, depth, viewZ );
				vec3 viewNormal = getViewNormal( vUv );

				vec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );
				vec3 random = vec3( texture2D( tNoise, vUv * noiseScale ).r );

				// compute matrix used to reorient a kernel vector

				vec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );
				vec3 bitangent = cross( viewNormal, tangent );
				mat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );

				float occlusion = 0.0;

				for ( int i = 0; i < KERNEL_SIZE; i ++ ) {

					vec3 sampleVector = kernelMatrix * kernel[ i ]; // reorient sample vector in view space
					vec3 samplePoint = viewPosition + ( sampleVector * kernelRadius ); // calculate sample point

					vec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 ); // project point and calculate NDC
					samplePointNDC /= samplePointNDC.w;

					vec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5; // compute uv coordinates

					float realDepth = getLinearDepth( samplePointUv ); // get linear depth from depth texture
					float sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar ); // compute linear depth of the sample view Z value
					float delta = sampleDepth - realDepth;

					if ( delta > minDistance && delta < maxDistance ) { // if fragment is before sample point, increase occlusion

						occlusion += 1.0;

					}

				}

				occlusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );

				gl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );

			}

		}`},Dg={name:"SSAODepthShader",defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:`varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;

		varying vec2 vUv;

		#include <packing>

		float getLinearDepth( const in vec2 screenPosition ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, screenPosition ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, screenPosition ).x;

			#endif

		}

		void main() {

			float depth = getLinearDepth( vUv );
			gl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );

		}`},Ag={name:"SSAOBlurShader",uniforms:{tDiffuse:{value:null},resolution:{value:new z}},vertexShader:`varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`uniform sampler2D tDiffuse;

		uniform vec2 resolution;

		varying vec2 vUv;

		void main() {

			vec2 texelSize = ( 1.0 / resolution );
			float result = 0.0;

			for ( int i = - 2; i <= 2; i ++ ) {

				for ( int j = - 2; j <= 2; j ++ ) {

					vec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;
					result += texture2D( tDiffuse, vUv + offset ).r;

				}

			}

			gl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );

		}`};var $1=(()=>{class n extends an{constructor(i,t,r,o,s=32){super(),this.width=r!==void 0?r:512,this.height=o!==void 0?o:512,this.clear=!0,this.camera=t,this.scene=i,this.kernelRadius=8,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(s),this.generateRandomKernelRotations();let a=new hs;a.format=Ks,a.type=la,this.normalRenderTarget=new oi(this.width,this.height,{minFilter:li,magFilter:li,type:Wi,depthTexture:a}),this.ssaoRenderTarget=new oi(this.width,this.height,{type:Wi}),this.blurRenderTarget=this.ssaoRenderTarget.clone(),this.ssaoMaterial=new Dt({defines:Object.assign({},Eg.defines),uniforms:Li.clone(Eg.uniforms),vertexShader:Eg.vertexShader,fragmentShader:Eg.fragmentShader,blending:Qt}),this.ssaoMaterial.defines.KERNEL_SIZE=s,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new oa,this.normalMaterial.blending=Qt,this.blurMaterial=new Dt({defines:Object.assign({},Ag.defines),uniforms:Li.clone(Ag.uniforms),vertexShader:Ag.vertexShader,fragmentShader:Ag.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new Dt({defines:Object.assign({},Dg.defines),uniforms:Li.clone(Dg.uniforms),vertexShader:Dg.vertexShader,fragmentShader:Dg.fragmentShader,blending:Qt}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new Dt({uniforms:Li.clone(dr.uniforms),vertexShader:dr.vertexShader,fragmentShader:dr.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:rf,blendDst:dl,blendEquation:gr,blendSrcAlpha:nf,blendDstAlpha:dl,blendEquationAlpha:gr}),this.fsQuad=new lr(null),this.originalClearColor=new _e}dispose(){this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(i,t,r){switch(this.overrideVisibility(),this.renderOverride(i,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(i,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(i,this.blurMaterial,this.blurRenderTarget),this.output){case n.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=Qt,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=Qt,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Depth:this.renderPass(i,this.depthRenderMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=Qt,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=r.texture,this.copyMaterial.blending=Qt,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t),this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=zd,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}renderPass(i,t,r,o,s){i.getClearColor(this.originalClearColor);let a=i.getClearAlpha(),c=i.autoClear;i.setRenderTarget(r),i.autoClear=!1,o!=null&&(i.setClearColor(o),i.setClearAlpha(s||0),i.clear()),this.fsQuad.material=t,this.fsQuad.render(i),i.autoClear=c,i.setClearColor(this.originalClearColor),i.setClearAlpha(a)}renderOverride(i,t,r,o,s){i.getClearColor(this.originalClearColor);let a=i.getClearAlpha(),c=i.autoClear;i.setRenderTarget(r),i.autoClear=!1,o=t.clearColor||o,s=t.clearAlpha||s,o!=null&&(i.setClearColor(o),i.setClearAlpha(s||0),i.clear()),this.scene.overrideMaterial=t,i.render(this.scene,this.camera),this.scene.overrideMaterial=null,i.autoClear=c,i.setClearColor(this.originalClearColor),i.setClearAlpha(a)}setSize(i,t){this.width=i,this.height=t,this.ssaoRenderTarget.setSize(i,t),this.normalRenderTarget.setSize(i,t),this.blurRenderTarget.setSize(i,t),this.ssaoMaterial.uniforms.resolution.value.set(i,t),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(i,t)}generateSampleKernel(i){let t=this.kernel;for(let r=0;r<i;r++){let o=new M;o.x=Math.random()*2-1,o.y=Math.random()*2-1,o.z=Math.random(),o.normalize();let s=r/i;s=tt.lerp(.1,1,s*s),o.multiplyScalar(s),t.push(o)}}generateRandomKernelRotations(){let r=new Px,o=4*4,s=new Float32Array(o);for(let a=0;a<o;a++){let c=Math.random()*2-1,l=Math.random()*2-1,d=0;s[a]=r.noise3d(c,l,d)}this.noiseTexture=new io(s,4,4,Hd,Rr),this.noiseTexture.wrapS=Go,this.noiseTexture.wrapT=Go,this.noiseTexture.needsUpdate=!0}overrideVisibility(){let i=this.scene,t=this._visibilityCache;i.traverse(function(r){t.set(r,r.visible),(r.isPoints||r.isLine)&&(r.visible=!1)})}restoreVisibility(){let i=this.scene,t=this._visibilityCache;i.traverse(function(r){let o=t.get(r);r.visible=o}),t.clear()}}return n.OUTPUT={Default:0,SSAO:1,Blur:2,Depth:3,Normal:4},n})();var Ere=["*"],yc=class yc extends Ii{getType(){return $1}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set width(e){this._objRef&&(this._objRef.width=e)}get width(){return this._objRef?.width}set height(e){this._objRef&&(this._objRef.height=e)}get height(){return this._objRef?.height}set clear(e){this._objRef&&(this._objRef.clear=e)}get clear(){return this._objRef?.clear}set kernelRadius(e){this._objRef&&(this._objRef.kernelRadius=e)}get kernelRadius(){return this._objRef?.kernelRadius}set kernel(e){this._objRef&&(this._objRef.kernel=e)}get kernel(){return this._objRef?.kernel}set noiseTexture(e){this._objRef&&(this._objRef.noiseTexture=e)}get noiseTexture(){return this._objRef?.noiseTexture}set output(e){this._objRef&&(this._objRef.output=e)}get output(){return this._objRef?.output}set minDistance(e){this._objRef&&(this._objRef.minDistance=e)}get minDistance(){return this._objRef?.minDistance}set maxDistance(e){this._objRef&&(this._objRef.maxDistance=e)}get maxDistance(){return this._objRef?.maxDistance}set normalRenderTarget(e){this._objRef&&(this._objRef.normalRenderTarget=e)}get normalRenderTarget(){return this._objRef?.normalRenderTarget}set ssaoRenderTarget(e){this._objRef&&(this._objRef.ssaoRenderTarget=e)}get ssaoRenderTarget(){return this._objRef?.ssaoRenderTarget}set blurRenderTarget(e){this._objRef&&(this._objRef.blurRenderTarget=e)}get blurRenderTarget(){return this._objRef?.blurRenderTarget}set ssaoMaterial(e){this._objRef&&(this._objRef.ssaoMaterial=e)}get ssaoMaterial(){return this._objRef?.ssaoMaterial}set normalMaterial(e){this._objRef&&(this._objRef.normalMaterial=e)}get normalMaterial(){return this._objRef?.normalMaterial}set blurMaterial(e){this._objRef&&(this._objRef.blurMaterial=e)}get blurMaterial(){return this._objRef?.blurMaterial}set depthRenderMaterial(e){this._objRef&&(this._objRef.depthRenderMaterial=e)}get depthRenderMaterial(){return this._objRef?.depthRenderMaterial}set copyMaterial(e){this._objRef&&(this._objRef.copyMaterial=e)}get copyMaterial(){return this._objRef?.copyMaterial}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set originalClearColor(e){this._objRef&&(this._objRef.originalClearColor=ve(this._objRef.originalClearColor,e))}get originalClearColor(){return this._objRef?.originalClearColor}};yc.OUTPUT=$1.OUTPUT,yc.\u0275fac=(()=>{let e;return function(t){return(e||(e=be(yc)))(t||yc)}})(),yc.\u0275cmp=L({type:yc,selectors:[["th-sSAOPass"]],inputs:{scene:"scene",camera:"camera",width:"width",height:"height",clear:"clear",kernelRadius:"kernelRadius",kernel:"kernel",noiseTexture:"noiseTexture",output:"output",minDistance:"minDistance",maxDistance:"maxDistance",normalRenderTarget:"normalRenderTarget",ssaoRenderTarget:"ssaoRenderTarget",blurRenderTarget:"blurRenderTarget",ssaoMaterial:"ssaoMaterial",normalMaterial:"normalMaterial",blurMaterial:"blurMaterial",depthRenderMaterial:"depthRenderMaterial",copyMaterial:"copyMaterial",fsQuad:"fsQuad",originalClearColor:"originalClearColor"},features:[oe([{provide:ui,useExisting:ge(()=>yc)}]),X],ngContentSelectors:Ere,decls:1,vars:0,template:function(i,t){i&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});var OU=yc;var Ts={name:"SSRShader",defines:{MAX_STEP:0,PERSPECTIVE_CAMERA:!0,DISTANCE_ATTENUATION:!0,FRESNEL:!0,INFINITE_THICK:!1,SELECTIVE:!1},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tMetalness:{value:null},tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new z},cameraProjectionMatrix:{value:new je},cameraInverseProjectionMatrix:{value:new je},opacity:{value:.5},maxDistance:{value:180},cameraRange:{value:0},thickness:{value:.018}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}

	`,fragmentShader:`
		// precision highp float;
		precision highp sampler2D;
		varying vec2 vUv;
		uniform sampler2D tDepth;
		uniform sampler2D tNormal;
		uniform sampler2D tMetalness;
		uniform sampler2D tDiffuse;
		uniform float cameraRange;
		uniform vec2 resolution;
		uniform float opacity;
		uniform float cameraNear;
		uniform float cameraFar;
		uniform float maxDistance;
		uniform float thickness;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;
		#include <packing>
		float pointToLineDistance(vec3 x0, vec3 x1, vec3 x2) {
			//x0: point, x1: linePointA, x2: linePointB
			//https://mathworld.wolfram.com/Point-LineDistance3-Dimensional.html
			return length(cross(x0-x1,x0-x2))/length(x2-x1);
		}
		float pointPlaneDistance(vec3 point,vec3 planePoint,vec3 planeNormal){
			// https://mathworld.wolfram.com/Point-PlaneDistance.html
			//// https://en.wikipedia.org/wiki/Plane_(geometry)
			//// http://paulbourke.net/geometry/pointlineplane/
			float a=planeNormal.x,b=planeNormal.y,c=planeNormal.z;
			float x0=point.x,y0=point.y,z0=point.z;
			float x=planePoint.x,y=planePoint.y,z=planePoint.z;
			float d=-(a*x+b*y+c*z);
			float distance=(a*x0+b*y0+c*z0+d)/sqrt(a*a+b*b+c*c);
			return distance;
		}
		float getDepth( const in vec2 uv ) {
			return texture2D( tDepth, uv ).x;
		}
		float getViewZ( const in float depth ) {
			#ifdef PERSPECTIVE_CAMERA
				return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
				return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}
		vec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {
			vec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc
			clipPosition *= clipW; //clip
			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;//view
		}
		vec3 getViewNormal( const in vec2 uv ) {
			return unpackRGBToNormal( texture2D( tNormal, uv ).xyz );
		}
		vec2 viewPositionToXY(vec3 viewPosition){
			vec2 xy;
			vec4 clip=cameraProjectionMatrix*vec4(viewPosition,1);
			xy=clip.xy;//clip
			float clipW=clip.w;
			xy/=clipW;//NDC
			xy=(xy+1.)/2.;//uv
			xy*=resolution;//screen
			return xy;
		}
		void main(){
			#ifdef SELECTIVE
				float metalness=texture2D(tMetalness,vUv).r;
				if(metalness==0.) return;
			#endif

			float depth = getDepth( vUv );
			float viewZ = getViewZ( depth );
			if(-viewZ>=cameraFar) return;

			float clipW = cameraProjectionMatrix[2][3] * viewZ+cameraProjectionMatrix[3][3];
			vec3 viewPosition=getViewPosition( vUv, depth, clipW );

			vec2 d0=gl_FragCoord.xy;
			vec2 d1;

			vec3 viewNormal=getViewNormal( vUv );

			#ifdef PERSPECTIVE_CAMERA
				vec3 viewIncidentDir=normalize(viewPosition);
				vec3 viewReflectDir=reflect(viewIncidentDir,viewNormal);
			#else
				vec3 viewIncidentDir=vec3(0,0,-1);
				vec3 viewReflectDir=reflect(viewIncidentDir,viewNormal);
			#endif

			float maxReflectRayLen=maxDistance/dot(-viewIncidentDir,viewNormal);
			// dot(a,b)==length(a)*length(b)*cos(theta) // https://www.mathsisfun.com/algebra/vectors-dot-product.html
			// if(a.isNormalized&&b.isNormalized) dot(a,b)==cos(theta)
			// maxDistance/maxReflectRayLen=cos(theta)
			// maxDistance/maxReflectRayLen==dot(a,b)
			// maxReflectRayLen==maxDistance/dot(a,b)

			vec3 d1viewPosition=viewPosition+viewReflectDir*maxReflectRayLen;
			#ifdef PERSPECTIVE_CAMERA
				if(d1viewPosition.z>-cameraNear){
					//https://tutorial.math.lamar.edu/Classes/CalcIII/EqnsOfLines.aspx
					float t=(-cameraNear-viewPosition.z)/viewReflectDir.z;
					d1viewPosition=viewPosition+viewReflectDir*t;
				}
			#endif
			d1=viewPositionToXY(d1viewPosition);

			float totalLen=length(d1-d0);
			float xLen=d1.x-d0.x;
			float yLen=d1.y-d0.y;
			float totalStep=max(abs(xLen),abs(yLen));
			float xSpan=xLen/totalStep;
			float ySpan=yLen/totalStep;
			for(float i=0.;i<float(MAX_STEP);i++){
				if(i>=totalStep) break;
				vec2 xy=vec2(d0.x+i*xSpan,d0.y+i*ySpan);
				if(xy.x<0.||xy.x>resolution.x||xy.y<0.||xy.y>resolution.y) break;
				float s=length(xy-d0)/totalLen;
				vec2 uv=xy/resolution;

				float d = getDepth(uv);
				float vZ = getViewZ( d );
				if(-vZ>=cameraFar) continue;
				float cW = cameraProjectionMatrix[2][3] * vZ+cameraProjectionMatrix[3][3];
				vec3 vP=getViewPosition( uv, d, cW );

				#ifdef PERSPECTIVE_CAMERA
					// https://comp.nus.edu.sg/~lowkl/publications/lowk_persp_interp_techrep.pdf
					float recipVPZ=1./viewPosition.z;
					float viewReflectRayZ=1./(recipVPZ+s*(1./d1viewPosition.z-recipVPZ));
				#else
					float viewReflectRayZ=viewPosition.z+s*(d1viewPosition.z-viewPosition.z);
				#endif

				// if(viewReflectRayZ>vZ) continue; // will cause "npm run make-screenshot webgl_postprocessing_ssr" high probability hang.
				// https://github.com/mrdoob/three.js/pull/21539#issuecomment-821061164
				if(viewReflectRayZ<=vZ){

					bool hit;
					#ifdef INFINITE_THICK
						hit=true;
					#else
						float away=pointToLineDistance(vP,viewPosition,d1viewPosition);

						float minThickness;
						vec2 xyNeighbor=xy;
						xyNeighbor.x+=1.;
						vec2 uvNeighbor=xyNeighbor/resolution;
						vec3 vPNeighbor=getViewPosition(uvNeighbor,d,cW);
						minThickness=vPNeighbor.x-vP.x;
						minThickness*=3.;
						float tk=max(minThickness,thickness);

						hit=away<=tk;
					#endif

					if(hit){
						vec3 vN=getViewNormal( uv );
						if(dot(viewReflectDir,vN)>=0.) continue;
						float distance=pointPlaneDistance(vP,viewPosition,viewNormal);
						if(distance>maxDistance) break;
						float op=opacity;
						#ifdef DISTANCE_ATTENUATION
							float ratio=1.-(distance/maxDistance);
							float attenuation=ratio*ratio;
							op=opacity*attenuation;
						#endif
						#ifdef FRESNEL
							float fresnelCoe=(dot(viewIncidentDir,viewReflectDir)+1.)/2.;
							op*=fresnelCoe;
						#endif
						vec4 reflectColor=texture2D(tDiffuse,uv);
						gl_FragColor.xyz=reflectColor.xyz;
						gl_FragColor.a=op;
						break;
					}
				}
			}
		}
	`},Ig={name:"SSRDepthShader",defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}

	`,fragmentShader:`

		uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;

		varying vec2 vUv;

		#include <packing>

		float getLinearDepth( const in vec2 uv ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, uv ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, uv ).x;

			#endif

		}

		void main() {

			float depth = getLinearDepth( vUv );
			float d = 1.0 - depth;
			// d=(d-.999)*1000.;
			gl_FragColor = vec4( vec3( d ), 1.0 );

		}

	`},xc={name:"SSRBlurShader",uniforms:{tDiffuse:{value:null},resolution:{value:new z},opacity:{value:.5}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}

	`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec2 resolution;
		varying vec2 vUv;
		void main() {
			//reverse engineering from PhotoShop blur filter, then change coefficient

			vec2 texelSize = ( 1.0 / resolution );

			vec4 c=texture2D(tDiffuse,vUv);

			vec2 offset;

			offset=(vec2(-1,0))*texelSize;
			vec4 cl=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(1,0))*texelSize;
			vec4 cr=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,-1))*texelSize;
			vec4 cb=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,1))*texelSize;
			vec4 ct=texture2D(tDiffuse,vUv+offset);

			// float coeCenter=.5;
			// float coeSide=.125;
			float coeCenter=.2;
			float coeSide=.2;
			float a=c.a*coeCenter+cl.a*coeSide+cr.a*coeSide+cb.a*coeSide+ct.a*coeSide;
			vec3 rgb=(c.rgb*c.a*coeCenter+cl.rgb*cl.a*coeSide+cr.rgb*cr.a*coeSide+cb.rgb*cb.a*coeSide+ct.rgb*ct.a*coeSide)/a;
			gl_FragColor=vec4(rgb,a);

		}
	`};var q1=(()=>{class n extends an{constructor({renderer:i,scene:t,camera:r,width:o,height:s,selects:a,bouncing:c=!1,groundReflector:l}){super(),this.width=o!==void 0?o:512,this.height=s!==void 0?s:512,this.clear=!0,this.renderer=i,this.scene=t,this.camera=r,this.groundReflector=l,this.opacity=Ts.uniforms.opacity.value,this.output=0,this.maxDistance=Ts.uniforms.maxDistance.value,this.thickness=Ts.uniforms.thickness.value,this.tempColor=new _e,this._selects=a,this.selective=Array.isArray(this._selects),Object.defineProperty(this,"selects",{get(){return this._selects},set(u){this._selects!==u&&(this._selects=u,Array.isArray(u)?(this.selective=!0,this.ssrMaterial.defines.SELECTIVE=!0,this.ssrMaterial.needsUpdate=!0):(this.selective=!1,this.ssrMaterial.defines.SELECTIVE=!1,this.ssrMaterial.needsUpdate=!0))}}),this._bouncing=c,Object.defineProperty(this,"bouncing",{get(){return this._bouncing},set(u){this._bouncing!==u&&(this._bouncing=u,u?this.ssrMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture:this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture)}}),this.blur=!0,this._distanceAttenuation=Ts.defines.DISTANCE_ATTENUATION,Object.defineProperty(this,"distanceAttenuation",{get(){return this._distanceAttenuation},set(u){this._distanceAttenuation!==u&&(this._distanceAttenuation=u,this.ssrMaterial.defines.DISTANCE_ATTENUATION=u,this.ssrMaterial.needsUpdate=!0)}}),this._fresnel=Ts.defines.FRESNEL,Object.defineProperty(this,"fresnel",{get(){return this._fresnel},set(u){this._fresnel!==u&&(this._fresnel=u,this.ssrMaterial.defines.FRESNEL=u,this.ssrMaterial.needsUpdate=!0)}}),this._infiniteThick=Ts.defines.INFINITE_THICK,Object.defineProperty(this,"infiniteThick",{get(){return this._infiniteThick},set(u){this._infiniteThick!==u&&(this._infiniteThick=u,this.ssrMaterial.defines.INFINITE_THICK=u,this.ssrMaterial.needsUpdate=!0)}});let d=new hs;d.type=tg,d.minFilter=li,d.magFilter=li,this.beautyRenderTarget=new oi(this.width,this.height,{minFilter:li,magFilter:li,type:Wi,depthTexture:d,depthBuffer:!0}),this.prevRenderTarget=new oi(this.width,this.height,{minFilter:li,magFilter:li}),this.normalRenderTarget=new oi(this.width,this.height,{minFilter:li,magFilter:li,type:Wi}),this.metalnessRenderTarget=new oi(this.width,this.height,{minFilter:li,magFilter:li,type:Wi}),this.ssrRenderTarget=new oi(this.width,this.height,{minFilter:li,magFilter:li}),this.blurRenderTarget=this.ssrRenderTarget.clone(),this.blurRenderTarget2=this.ssrRenderTarget.clone(),this.ssrMaterial=new Dt({defines:Object.assign({},Ts.defines,{MAX_STEP:Math.sqrt(this.width*this.width+this.height*this.height)}),uniforms:Li.clone(Ts.uniforms),vertexShader:Ts.vertexShader,fragmentShader:Ts.fragmentShader,blending:Qt}),this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssrMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssrMaterial.defines.SELECTIVE=this.selective,this.ssrMaterial.needsUpdate=!0,this.ssrMaterial.uniforms.tMetalness.value=this.metalnessRenderTarget.texture,this.ssrMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.ssrMaterial.uniforms.cameraNear.value=this.camera.near,this.ssrMaterial.uniforms.cameraFar.value=this.camera.far,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.ssrMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new oa,this.normalMaterial.blending=Qt,this.metalnessOnMaterial=new Ji({color:"white"}),this.metalnessOffMaterial=new Ji({color:"black"}),this.blurMaterial=new Dt({defines:Object.assign({},xc.defines),uniforms:Li.clone(xc.uniforms),vertexShader:xc.vertexShader,fragmentShader:xc.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.blurMaterial2=new Dt({defines:Object.assign({},xc.defines),uniforms:Li.clone(xc.uniforms),vertexShader:xc.vertexShader,fragmentShader:xc.fragmentShader}),this.blurMaterial2.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.blurMaterial2.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new Dt({defines:Object.assign({},Ig.defines),uniforms:Li.clone(Ig.uniforms),vertexShader:Ig.vertexShader,fragmentShader:Ig.fragmentShader,blending:Qt}),this.depthRenderMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new Dt({uniforms:Li.clone(dr.uniforms),vertexShader:dr.vertexShader,fragmentShader:dr.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:Cd,blendDst:Ed,blendEquation:gr,blendSrcAlpha:Cd,blendDstAlpha:Ed,blendEquationAlpha:gr}),this.fsQuad=new lr(null),this.originalClearColor=new _e}dispose(){this.beautyRenderTarget.dispose(),this.prevRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.metalnessRenderTarget.dispose(),this.ssrRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.blurRenderTarget2.dispose(),this.normalMaterial.dispose(),this.metalnessOnMaterial.dispose(),this.metalnessOffMaterial.dispose(),this.blurMaterial.dispose(),this.blurMaterial2.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(i,t){switch(i.setRenderTarget(this.beautyRenderTarget),i.clear(),this.groundReflector&&(this.groundReflector.visible=!1,this.groundReflector.doRender(this.renderer,this.scene,this.camera),this.groundReflector.visible=!0),i.render(this.scene,this.camera),this.groundReflector&&(this.groundReflector.visible=!1),this.renderOverride(i,this.normalMaterial,this.normalRenderTarget,0,0),this.selective&&this.renderMetalness(i,this.metalnessOnMaterial,this.metalnessRenderTarget,0,0),this.ssrMaterial.uniforms.opacity.value=this.opacity,this.ssrMaterial.uniforms.maxDistance.value=this.maxDistance,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.renderPass(i,this.ssrMaterial,this.ssrRenderTarget),this.blur&&(this.renderPass(i,this.blurMaterial,this.blurRenderTarget),this.renderPass(i,this.blurMaterial2,this.blurRenderTarget2)),this.output){case n.OUTPUT.Default:this.bouncing?(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Qt,this.renderPass(i,this.copyMaterial,this.prevRenderTarget),this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=ds,this.renderPass(i,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture,this.copyMaterial.blending=Qt,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t)):(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Qt,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t),this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=ds,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t));break;case n.OUTPUT.SSR:this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=Qt,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t),this.bouncing&&(this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Qt,this.renderPass(i,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=ds,this.renderPass(i,this.copyMaterial,this.prevRenderTarget));break;case n.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Qt,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Depth:this.renderPass(i,this.depthRenderMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=Qt,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Metalness:this.copyMaterial.uniforms.tDiffuse.value=this.metalnessRenderTarget.texture,this.copyMaterial.blending=Qt,this.renderPass(i,this.copyMaterial,this.renderToScreen?null:t);break;default:console.warn("THREE.SSRPass: Unknown output type.")}}renderPass(i,t,r,o,s){this.originalClearColor.copy(i.getClearColor(this.tempColor));let a=i.getClearAlpha(this.tempColor),c=i.autoClear;i.setRenderTarget(r),i.autoClear=!1,o!=null&&(i.setClearColor(o),i.setClearAlpha(s||0),i.clear()),this.fsQuad.material=t,this.fsQuad.render(i),i.autoClear=c,i.setClearColor(this.originalClearColor),i.setClearAlpha(a)}renderOverride(i,t,r,o,s){this.originalClearColor.copy(i.getClearColor(this.tempColor));let a=i.getClearAlpha(this.tempColor),c=i.autoClear;i.setRenderTarget(r),i.autoClear=!1,o=t.clearColor||o,s=t.clearAlpha||s,o!=null&&(i.setClearColor(o),i.setClearAlpha(s||0),i.clear()),this.scene.overrideMaterial=t,i.render(this.scene,this.camera),this.scene.overrideMaterial=null,i.autoClear=c,i.setClearColor(this.originalClearColor),i.setClearAlpha(a)}renderMetalness(i,t,r,o,s){this.originalClearColor.copy(i.getClearColor(this.tempColor));let a=i.getClearAlpha(this.tempColor),c=i.autoClear;i.setRenderTarget(r),i.autoClear=!1,o=t.clearColor||o,s=t.clearAlpha||s,o!=null&&(i.setClearColor(o),i.setClearAlpha(s||0),i.clear()),this.scene.traverseVisible(l=>{l._SSRPassBackupMaterial=l.material,this._selects.includes(l)?l.material=this.metalnessOnMaterial:l.material=this.metalnessOffMaterial}),i.render(this.scene,this.camera),this.scene.traverseVisible(l=>{l.material=l._SSRPassBackupMaterial}),i.autoClear=c,i.setClearColor(this.originalClearColor),i.setClearAlpha(a)}setSize(i,t){this.width=i,this.height=t,this.ssrMaterial.defines.MAX_STEP=Math.sqrt(i*i+t*t),this.ssrMaterial.needsUpdate=!0,this.beautyRenderTarget.setSize(i,t),this.prevRenderTarget.setSize(i,t),this.ssrRenderTarget.setSize(i,t),this.normalRenderTarget.setSize(i,t),this.metalnessRenderTarget.setSize(i,t),this.blurRenderTarget.setSize(i,t),this.blurRenderTarget2.setSize(i,t),this.ssrMaterial.uniforms.resolution.value.set(i,t),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(i,t),this.blurMaterial2.uniforms.resolution.value.set(i,t)}}return n.OUTPUT={Default:0,SSR:1,Beauty:3,Depth:4,Normal:5,Metalness:7},n})();var Dre=["*"],wc=class wc extends Ii{getType(){return q1}set width(e){this._objRef&&(this._objRef.width=e)}get width(){return this._objRef?.width}set height(e){this._objRef&&(this._objRef.height=e)}get height(){return this._objRef?.height}set clear(e){this._objRef&&(this._objRef.clear=e)}get clear(){return this._objRef?.clear}set renderer(e){this._objRef&&(this._objRef.renderer=e)}get renderer(){return this._objRef?.renderer}set scene(e){this._objRef&&(this._objRef.scene=e)}get scene(){return this._objRef?.scene}set camera(e){this._objRef&&(this._objRef.camera=e)}get camera(){return this._objRef?.camera}set groundReflector(e){this._objRef&&(this._objRef.groundReflector=e)}get groundReflector(){return this._objRef?.groundReflector}set opacity(e){this._objRef&&(this._objRef.opacity=e)}get opacity(){return this._objRef?.opacity}set output(e){this._objRef&&(this._objRef.output=e)}get output(){return this._objRef?.output}set maxDistance(e){this._objRef&&(this._objRef.maxDistance=e)}get maxDistance(){return this._objRef?.maxDistance}set thickness(e){this._objRef&&(this._objRef.thickness=e)}get thickness(){return this._objRef?.thickness}set tempColor(e){this._objRef&&(this._objRef.tempColor=ve(this._objRef.tempColor,e))}get tempColor(){return this._objRef?.tempColor}set selective(e){this._objRef&&(this._objRef.selective=e)}get selective(){return this._objRef?.selective}set blur(e){this._objRef&&(this._objRef.blur=e)}get blur(){return this._objRef?.blur}set beautyRenderTarget(e){this._objRef&&(this._objRef.beautyRenderTarget=e)}get beautyRenderTarget(){return this._objRef?.beautyRenderTarget}set prevRenderTarget(e){this._objRef&&(this._objRef.prevRenderTarget=e)}get prevRenderTarget(){return this._objRef?.prevRenderTarget}set normalRenderTarget(e){this._objRef&&(this._objRef.normalRenderTarget=e)}get normalRenderTarget(){return this._objRef?.normalRenderTarget}set metalnessRenderTarget(e){this._objRef&&(this._objRef.metalnessRenderTarget=e)}get metalnessRenderTarget(){return this._objRef?.metalnessRenderTarget}set ssrRenderTarget(e){this._objRef&&(this._objRef.ssrRenderTarget=e)}get ssrRenderTarget(){return this._objRef?.ssrRenderTarget}set blurRenderTarget(e){this._objRef&&(this._objRef.blurRenderTarget=e)}get blurRenderTarget(){return this._objRef?.blurRenderTarget}set blurRenderTarget2(e){this._objRef&&(this._objRef.blurRenderTarget2=e)}get blurRenderTarget2(){return this._objRef?.blurRenderTarget2}set ssrMaterial(e){this._objRef&&(this._objRef.ssrMaterial=e)}get ssrMaterial(){return this._objRef?.ssrMaterial}set normalMaterial(e){this._objRef&&(this._objRef.normalMaterial=e)}get normalMaterial(){return this._objRef?.normalMaterial}set metalnessOnMaterial(e){this._objRef&&(this._objRef.metalnessOnMaterial=e)}get metalnessOnMaterial(){return this._objRef?.metalnessOnMaterial}set metalnessOffMaterial(e){this._objRef&&(this._objRef.metalnessOffMaterial=e)}get metalnessOffMaterial(){return this._objRef?.metalnessOffMaterial}set blurMaterial(e){this._objRef&&(this._objRef.blurMaterial=e)}get blurMaterial(){return this._objRef?.blurMaterial}set blurMaterial2(e){this._objRef&&(this._objRef.blurMaterial2=e)}get blurMaterial2(){return this._objRef?.blurMaterial2}set depthRenderMaterial(e){this._objRef&&(this._objRef.depthRenderMaterial=e)}get depthRenderMaterial(){return this._objRef?.depthRenderMaterial}set copyMaterial(e){this._objRef&&(this._objRef.copyMaterial=e)}get copyMaterial(){return this._objRef?.copyMaterial}set fsQuad(e){this._objRef&&(this._objRef.fsQuad=e)}get fsQuad(){return this._objRef?.fsQuad}set originalClearColor(e){this._objRef&&(this._objRef.originalClearColor=ve(this._objRef.originalClearColor,e))}get originalClearColor(){return this._objRef?.originalClearColor}set dispose(e){this._objRef&&(this._objRef.dispose=e)}get dispose(){return this._objRef?.dispose}set renderPass(e){this._objRef&&(this._objRef.renderPass=e)}get renderPass(){return this._objRef?.renderPass}set renderOverride(e){this._objRef&&(this._objRef.renderOverride=e)}get renderOverride(){return this._objRef?.renderOverride}set renderMetalness(e){this._objRef&&(this._objRef.renderMetalness=e)}get renderMetalness(){return this._objRef?.renderMetalness}};wc.OUTPUT=q1.OUTPUT,wc.\u0275fac=(()=>{let e;return function(t){return(e||(e=be(wc)))(t||wc)}})(),wc.\u0275cmp=L({type:wc,selectors:[["th-sSRPass"]],inputs:{width:"width",height:"height",clear:"clear",renderer:"renderer",scene:"scene",camera:"camera",groundReflector:"groundReflector",opacity:"opacity",output:"output",maxDistance:"maxDistance",thickness:"thickness",tempColor:"tempColor",selective:"selective",blur:"blur",beautyRenderTarget:"beautyRenderTarget",prevRenderTarget:"prevRenderTarget",normalRenderTarget:"normalRenderTarget",metalnessRenderTarget:"metalnessRenderTarget",ssrRenderTarget:"ssrRenderTarget",blurRenderTarget:"blurRenderTarget",blurRenderTarget2:"blurRenderTarget2",ssrMaterial:"ssrMaterial",normalMaterial:"normalMaterial",metalnessOnMaterial:"metalnessOnMaterial",metalnessOffMaterial:"metalnessOffMaterial",blurMaterial:"blurMaterial",blurMaterial2:"blurMaterial2",depthRenderMaterial:"depthRenderMaterial",copyMaterial:"copyMaterial",fsQuad:"fsQuad",originalClearColor:"originalClearColor",dispose:"dispose",renderPass:"renderPass",renderOverride:"renderOverride",renderMetalness:"renderMetalness"},features:[oe([{provide:ui,useExisting:ge(()=>wc)}]),X],ngContentSelectors:Dre,decls:1,vars:0,template:function(i,t){i&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});var NU=wc;var Are=["*"],Cl=(()=>{let e=class e extends Jt{getType(){return oc}get type(){return this._objRef?.type}get parameters(){return this._objRef?.parameters}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-sphereGeometry"]],features:[oe([{provide:Jt,useExisting:ge(()=>e)}]),X],ngContentSelectors:Are,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var X1={type:"change"},Y1={type:"start"},Z1={type:"end"},Fx=class extends kn{constructor(e,i){super();let t=this,r={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=e,this.domElement=i,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:Dr.ROTATE,MIDDLE:Dr.DOLLY,RIGHT:Dr.PAN},this.target=new M;let o=1e-6,s=new M,a=1,c=r.NONE,l=r.NONE,d=0,u=0,h=0,f=new M,p=new z,b=new z,m=new M,g=new z,v=new z,_=new z,y=new z,C=[],R={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){let N=t.domElement.getBoundingClientRect(),Se=t.domElement.ownerDocument.documentElement;t.screen.left=N.left+window.pageXOffset-Se.clientLeft,t.screen.top=N.top+window.pageYOffset-Se.clientTop,t.screen.width=N.width,t.screen.height=N.height};let w=function(){let N=new z;return function(Oe,B){return N.set((Oe-t.screen.left)/t.screen.width,(B-t.screen.top)/t.screen.height),N}}(),A=function(){let N=new z;return function(Oe,B){return N.set((Oe-t.screen.width*.5-t.screen.left)/(t.screen.width*.5),(t.screen.height+2*(t.screen.top-B))/t.screen.width),N}}();this.rotateCamera=function(){let N=new M,Se=new Kt,Oe=new M,B=new M,yt=new M,fe=new M;return function(){fe.set(b.x-p.x,b.y-p.y,0);let ye=fe.length();ye?(f.copy(t.object.position).sub(t.target),Oe.copy(f).normalize(),B.copy(t.object.up).normalize(),yt.crossVectors(B,Oe).normalize(),B.setLength(b.y-p.y),yt.setLength(b.x-p.x),fe.copy(B.add(yt)),N.crossVectors(fe,f).normalize(),ye*=t.rotateSpeed,Se.setFromAxisAngle(N,ye),f.applyQuaternion(Se),t.object.up.applyQuaternion(Se),m.copy(N),h=ye):!t.staticMoving&&h&&(h*=Math.sqrt(1-t.dynamicDampingFactor),f.copy(t.object.position).sub(t.target),Se.setFromAxisAngle(m,h),f.applyQuaternion(Se),t.object.up.applyQuaternion(Se)),p.copy(b)}}(),this.zoomCamera=function(){let N;c===r.TOUCH_ZOOM_PAN?(N=d/u,d=u,t.object.isPerspectiveCamera?f.multiplyScalar(N):t.object.isOrthographicCamera?(t.object.zoom=tt.clamp(t.object.zoom/N,t.minZoom,t.maxZoom),a!==t.object.zoom&&t.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(N=1+(v.y-g.y)*t.zoomSpeed,N!==1&&N>0&&(t.object.isPerspectiveCamera?f.multiplyScalar(N):t.object.isOrthographicCamera?(t.object.zoom=tt.clamp(t.object.zoom/N,t.minZoom,t.maxZoom),a!==t.object.zoom&&t.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),t.staticMoving?g.copy(v):g.y+=(v.y-g.y)*this.dynamicDampingFactor)},this.panCamera=function(){let N=new z,Se=new M,Oe=new M;return function(){if(N.copy(y).sub(_),N.lengthSq()){if(t.object.isOrthographicCamera){let yt=(t.object.right-t.object.left)/t.object.zoom/t.domElement.clientWidth,fe=(t.object.top-t.object.bottom)/t.object.zoom/t.domElement.clientWidth;N.x*=yt,N.y*=fe}N.multiplyScalar(f.length()*t.panSpeed),Oe.copy(f).cross(t.object.up).setLength(N.x),Oe.add(Se.copy(t.object.up).setLength(N.y)),t.object.position.add(Oe),t.target.add(Oe),t.staticMoving?_.copy(y):_.add(N.subVectors(y,_).multiplyScalar(t.dynamicDampingFactor))}}}(),this.checkDistances=function(){(!t.noZoom||!t.noPan)&&(f.lengthSq()>t.maxDistance*t.maxDistance&&(t.object.position.addVectors(t.target,f.setLength(t.maxDistance)),g.copy(v)),f.lengthSq()<t.minDistance*t.minDistance&&(t.object.position.addVectors(t.target,f.setLength(t.minDistance)),g.copy(v)))},this.update=function(){f.subVectors(t.object.position,t.target),t.noRotate||t.rotateCamera(),t.noZoom||t.zoomCamera(),t.noPan||t.panCamera(),t.object.position.addVectors(t.target,f),t.object.isPerspectiveCamera?(t.checkDistances(),t.object.lookAt(t.target),s.distanceToSquared(t.object.position)>o&&(t.dispatchEvent(X1),s.copy(t.object.position))):t.object.isOrthographicCamera?(t.object.lookAt(t.target),(s.distanceToSquared(t.object.position)>o||a!==t.object.zoom)&&(t.dispatchEvent(X1),s.copy(t.object.position),a=t.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){c=r.NONE,l=r.NONE,t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.up.copy(t.up0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),f.subVectors(t.object.position,t.target),t.object.lookAt(t.target),t.dispatchEvent(X1),s.copy(t.object.position),a=t.object.zoom};function S(N){t.enabled!==!1&&(C.length===0&&(t.domElement.setPointerCapture(N.pointerId),t.domElement.addEventListener("pointermove",x),t.domElement.addEventListener("pointerup",F)),vt(N),N.pointerType==="touch"?Z(N):ne(N))}function x(N){t.enabled!==!1&&(N.pointerType==="touch"?me(N):G(N))}function F(N){t.enabled!==!1&&(N.pointerType==="touch"?ke(N):$(),Y(N),C.length===0&&(t.domElement.releasePointerCapture(N.pointerId),t.domElement.removeEventListener("pointermove",x),t.domElement.removeEventListener("pointerup",F)))}function V(N){Y(N)}function O(N){t.enabled!==!1&&(window.removeEventListener("keydown",O),l===r.NONE&&(N.code===t.keys[r.ROTATE]&&!t.noRotate?l=r.ROTATE:N.code===t.keys[r.ZOOM]&&!t.noZoom?l=r.ZOOM:N.code===t.keys[r.PAN]&&!t.noPan&&(l=r.PAN)))}function K(){t.enabled!==!1&&(l=r.NONE,window.addEventListener("keydown",O))}function ne(N){if(c===r.NONE)switch(N.button){case t.mouseButtons.LEFT:c=r.ROTATE;break;case t.mouseButtons.MIDDLE:c=r.ZOOM;break;case t.mouseButtons.RIGHT:c=r.PAN;break}let Se=l!==r.NONE?l:c;Se===r.ROTATE&&!t.noRotate?(b.copy(A(N.pageX,N.pageY)),p.copy(b)):Se===r.ZOOM&&!t.noZoom?(g.copy(w(N.pageX,N.pageY)),v.copy(g)):Se===r.PAN&&!t.noPan&&(_.copy(w(N.pageX,N.pageY)),y.copy(_)),t.dispatchEvent(Y1)}function G(N){let Se=l!==r.NONE?l:c;Se===r.ROTATE&&!t.noRotate?(p.copy(b),b.copy(A(N.pageX,N.pageY))):Se===r.ZOOM&&!t.noZoom?v.copy(w(N.pageX,N.pageY)):Se===r.PAN&&!t.noPan&&y.copy(w(N.pageX,N.pageY))}function $(){c=r.NONE,t.dispatchEvent(Z1)}function U(N){if(t.enabled!==!1&&t.noZoom!==!0){switch(N.preventDefault(),N.deltaMode){case 2:g.y-=N.deltaY*.025;break;case 1:g.y-=N.deltaY*.01;break;default:g.y-=N.deltaY*25e-5;break}t.dispatchEvent(Y1),t.dispatchEvent(Z1)}}function Z(N){switch(Ae(N),C.length){case 1:c=r.TOUCH_ROTATE,b.copy(A(C[0].pageX,C[0].pageY)),p.copy(b);break;default:c=r.TOUCH_ZOOM_PAN;let Se=C[0].pageX-C[1].pageX,Oe=C[0].pageY-C[1].pageY;u=d=Math.sqrt(Se*Se+Oe*Oe);let B=(C[0].pageX+C[1].pageX)/2,yt=(C[0].pageY+C[1].pageY)/2;_.copy(w(B,yt)),y.copy(_);break}t.dispatchEvent(Y1)}function me(N){switch(Ae(N),C.length){case 1:p.copy(b),b.copy(A(N.pageX,N.pageY));break;default:let Se=Ge(N),Oe=N.pageX-Se.x,B=N.pageY-Se.y;u=Math.sqrt(Oe*Oe+B*B);let yt=(N.pageX+Se.x)/2,fe=(N.pageY+Se.y)/2;y.copy(w(yt,fe));break}}function ke(N){switch(C.length){case 0:c=r.NONE;break;case 1:c=r.TOUCH_ROTATE,b.copy(A(N.pageX,N.pageY)),p.copy(b);break;case 2:c=r.TOUCH_ZOOM_PAN;for(let Se=0;Se<C.length;Se++)if(C[Se].pointerId!==N.pointerId){let Oe=R[C[Se].pointerId];b.copy(A(Oe.x,Oe.y)),p.copy(b);break}break}t.dispatchEvent(Z1)}function $e(N){t.enabled!==!1&&N.preventDefault()}function vt(N){C.push(N)}function Y(N){delete R[N.pointerId];for(let Se=0;Se<C.length;Se++)if(C[Se].pointerId==N.pointerId){C.splice(Se,1);return}}function Ae(N){let Se=R[N.pointerId];Se===void 0&&(Se=new z,R[N.pointerId]=Se),Se.set(N.pageX,N.pageY)}function Ge(N){let Se=N.pointerId===C[0].pointerId?C[1]:C[0];return R[Se.pointerId]}this.dispose=function(){t.domElement.removeEventListener("contextmenu",$e),t.domElement.removeEventListener("pointerdown",S),t.domElement.removeEventListener("pointercancel",V),t.domElement.removeEventListener("wheel",U),t.domElement.removeEventListener("pointermove",x),t.domElement.removeEventListener("pointerup",F),window.removeEventListener("keydown",O),window.removeEventListener("keyup",K)},this.domElement.addEventListener("contextmenu",$e),this.domElement.addEventListener("pointerdown",S),this.domElement.addEventListener("pointercancel",V),this.domElement.addEventListener("wheel",U,{passive:!1}),window.addEventListener("keydown",O),window.addEventListener("keyup",K),this.handleResize(),this.update()}};var Ire=["*"],jx=(()=>{let e=class e extends en{getType(){return Fx}set object(t){this._objRef&&(this._objRef.object=t)}get object(){return this._objRef?.object}set domElement(t){this._objRef&&(this._objRef.domElement=t)}get domElement(){return this._objRef?.domElement}set enabled(t){this._objRef&&(this._objRef.enabled=t)}get enabled(){return this._objRef?.enabled}set screen(t){this._objRef&&(this._objRef.screen=t)}get screen(){return this._objRef?.screen}set rotateSpeed(t){this._objRef&&(this._objRef.rotateSpeed=t)}get rotateSpeed(){return this._objRef?.rotateSpeed}set zoomSpeed(t){this._objRef&&(this._objRef.zoomSpeed=t)}get zoomSpeed(){return this._objRef?.zoomSpeed}set panSpeed(t){this._objRef&&(this._objRef.panSpeed=t)}get panSpeed(){return this._objRef?.panSpeed}set noRotate(t){this._objRef&&(this._objRef.noRotate=t)}get noRotate(){return this._objRef?.noRotate}set noZoom(t){this._objRef&&(this._objRef.noZoom=t)}get noZoom(){return this._objRef?.noZoom}set noPan(t){this._objRef&&(this._objRef.noPan=t)}get noPan(){return this._objRef?.noPan}set noRoll(t){this._objRef&&(this._objRef.noRoll=t)}get noRoll(){return this._objRef?.noRoll}set staticMoving(t){this._objRef&&(this._objRef.staticMoving=t)}get staticMoving(){return this._objRef?.staticMoving}set dynamicDampingFactor(t){this._objRef&&(this._objRef.dynamicDampingFactor=t)}get dynamicDampingFactor(){return this._objRef?.dynamicDampingFactor}set minDistance(t){this._objRef&&(this._objRef.minDistance=t)}get minDistance(){return this._objRef?.minDistance}set maxDistance(t){this._objRef&&(this._objRef.maxDistance=t)}get maxDistance(){return this._objRef?.maxDistance}set minZoom(t){this._objRef&&(this._objRef.minZoom=t)}get minZoom(){return this._objRef?.minZoom}set maxZoom(t){this._objRef&&(this._objRef.maxZoom=t)}get maxZoom(){return this._objRef?.maxZoom}set keys(t){this._objRef&&(this._objRef.keys=t)}get keys(){return this._objRef?.keys}set mouseButtons(t){this._objRef&&(this._objRef.mouseButtons=t)}get mouseButtons(){return this._objRef?.mouseButtons}set target(t){this._objRef&&(this._objRef.target=ve(this._objRef.target,t))}get target(){return this._objRef?.target}set position0(t){this._objRef&&(this._objRef.position0=ve(this._objRef.position0,t))}get position0(){return this._objRef?.position0}set target0(t){this._objRef&&(this._objRef.target0=ve(this._objRef.target0,t))}get target0(){return this._objRef?.target0}set up0(t){this._objRef&&(this._objRef.up0=ve(this._objRef.up0,t))}get up0(){return this._objRef?.up0}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-trackballControls"]],inputs:{object:"object",domElement:"domElement",enabled:"enabled",screen:"screen",rotateSpeed:"rotateSpeed",zoomSpeed:"zoomSpeed",panSpeed:"panSpeed",noRotate:"noRotate",noZoom:"noZoom",noPan:"noPan",noRoll:"noRoll",staticMoving:"staticMoving",dynamicDampingFactor:"dynamicDampingFactor",minDistance:"minDistance",maxDistance:"maxDistance",minZoom:"minZoom",maxZoom:"maxZoom",keys:"keys",mouseButtons:"mouseButtons",target:"target",position0:"position0",target0:"target0",up0:"up0"},features:[oe([{provide:en,useExisting:ge(()=>e)}]),X],ngContentSelectors:Ire,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var su=new Wr,kr=new M,El=new M,hn=new Kt,BU={X:new M(1,0,0),Y:new M(0,1,0),Z:new M(0,0,1)},Q1={type:"change"},UU={type:"mouseDown"},VU={type:"mouseUp",mode:null},zU={type:"objectChange"},Pf=class extends Rt{constructor(e,i){super(),i===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),i=document),this.isTransformControls=!0,this.visible=!1,this.domElement=i,this.domElement.style.touchAction="none";let t=new J1;this._gizmo=t,this.add(t);let r=new eA;this._plane=r,this.add(r);let o=this;function s(v,_){let y=_;Object.defineProperty(o,v,{get:function(){return y!==void 0?y:_},set:function(C){y!==C&&(y=C,r[v]=C,t[v]=C,o.dispatchEvent({type:v+"-changed",value:C}),o.dispatchEvent(Q1))}}),o[v]=_,r[v]=_,t[v]=_}s("camera",e),s("object",void 0),s("enabled",!0),s("axis",null),s("mode","translate"),s("translationSnap",null),s("rotationSnap",null),s("scaleSnap",null),s("space","world"),s("size",1),s("dragging",!1),s("showX",!0),s("showY",!0),s("showZ",!0);let a=new M,c=new M,l=new Kt,d=new Kt,u=new M,h=new Kt,f=new M,p=new M,b=new M,m=0,g=new M;s("worldPosition",a),s("worldPositionStart",c),s("worldQuaternion",l),s("worldQuaternionStart",d),s("cameraPosition",u),s("cameraQuaternion",h),s("pointStart",f),s("pointEnd",p),s("rotationAxis",b),s("rotationAngle",m),s("eye",g),this._offset=new M,this._startNorm=new M,this._endNorm=new M,this._cameraScale=new M,this._parentPosition=new M,this._parentQuaternion=new Kt,this._parentQuaternionInv=new Kt,this._parentScale=new M,this._worldScaleStart=new M,this._worldQuaternionInv=new Kt,this._worldScale=new M,this._positionStart=new M,this._quaternionStart=new Kt,this._scaleStart=new M,this._getPointer=Pre.bind(this),this._onPointerDown=Fre.bind(this),this._onPointerHover=kre.bind(this),this._onPointerMove=jre.bind(this),this._onPointerUp=Ore.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(e){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(e)}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;e!==null&&su.setFromCamera(e,this.camera);let i=K1(this._gizmo.picker[this.mode],su);i?this.axis=i.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e!=null&&e.button!==0)&&this.axis!==null){e!==null&&su.setFromCamera(e,this.camera);let i=K1(this._plane,su,!0);i&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(i.point).sub(this.worldPositionStart)),this.dragging=!0,UU.mode=this.mode,this.dispatchEvent(UU)}}pointerMove(e){let i=this.axis,t=this.mode,r=this.object,o=this.space;if(t==="scale"?o="local":(i==="E"||i==="XYZE"||i==="XYZ")&&(o="world"),r===void 0||i===null||this.dragging===!1||e!==null&&e.button!==-1)return;e!==null&&su.setFromCamera(e,this.camera);let s=K1(this._plane,su,!0);if(s){if(this.pointEnd.copy(s.point).sub(this.worldPositionStart),t==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),o==="local"&&i!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),i.indexOf("X")===-1&&(this._offset.x=0),i.indexOf("Y")===-1&&(this._offset.y=0),i.indexOf("Z")===-1&&(this._offset.z=0),o==="local"&&i!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),r.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(o==="local"&&(r.position.applyQuaternion(hn.copy(this._quaternionStart).invert()),i.search("X")!==-1&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),i.search("Y")!==-1&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),i.search("Z")!==-1&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.position.applyQuaternion(this._quaternionStart)),o==="world"&&(r.parent&&r.position.add(kr.setFromMatrixPosition(r.parent.matrixWorld)),i.search("X")!==-1&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),i.search("Y")!==-1&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),i.search("Z")!==-1&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.parent&&r.position.sub(kr.setFromMatrixPosition(r.parent.matrixWorld))));else if(t==="scale"){if(i.search("XYZ")!==-1){let a=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(a*=-1),El.set(a,a,a)}else kr.copy(this.pointStart),El.copy(this.pointEnd),kr.applyQuaternion(this._worldQuaternionInv),El.applyQuaternion(this._worldQuaternionInv),El.divide(kr),i.search("X")===-1&&(El.x=1),i.search("Y")===-1&&(El.y=1),i.search("Z")===-1&&(El.z=1);r.scale.copy(this._scaleStart).multiply(El),this.scaleSnap&&(i.search("X")!==-1&&(r.scale.x=Math.round(r.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),i.search("Y")!==-1&&(r.scale.y=Math.round(r.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),i.search("Z")!==-1&&(r.scale.z=Math.round(r.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(t==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);let a=20/this.worldPosition.distanceTo(kr.setFromMatrixPosition(this.camera.matrixWorld)),c=!1;i==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(kr.copy(this.rotationAxis).cross(this.eye))*a):(i==="X"||i==="Y"||i==="Z")&&(this.rotationAxis.copy(BU[i]),kr.copy(BU[i]),o==="local"&&kr.applyQuaternion(this.worldQuaternion),kr.cross(this.eye),kr.length()===0?c=!0:this.rotationAngle=this._offset.dot(kr.normalize())*a),(i==="E"||c)&&(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),o==="local"&&i!=="E"&&i!=="XYZE"?(r.quaternion.copy(this._quaternionStart),r.quaternion.multiply(hn.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),r.quaternion.copy(hn.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),r.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(Q1),this.dispatchEvent(zU)}}pointerUp(e){e!==null&&e.button!==0||(this.dragging&&this.axis!==null&&(VU.mode=this.mode,this.dispatchEvent(VU)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(Q1),this.dispatchEvent(zU),this.pointStart.copy(this.pointEnd))}getRaycaster(){return su}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}};function Pre(n){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:n.button};{let e=this.domElement.getBoundingClientRect();return{x:(n.clientX-e.left)/e.width*2-1,y:-(n.clientY-e.top)/e.height*2+1,button:n.button}}}function kre(n){if(this.enabled)switch(n.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(n));break}}function Fre(n){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(n)),this.pointerDown(this._getPointer(n)))}function jre(n){this.enabled&&this.pointerMove(this._getPointer(n))}function Ore(n){this.enabled&&(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(n)))}function K1(n,e,i){let t=e.intersectObject(n,!0);for(let r=0;r<t.length;r++)if(t[r].object.visible||i)return t[r];return!1}var Ox=new no,Zi=new M(0,1,0),HU=new M(0,0,0),GU=new je,Nx=new Kt,Bx=new Kt,wa=new M,WU=new je,Fg=new M(1,0,0),au=new M(0,1,0),jg=new M(0,0,1),Lx=new M,Pg=new M,kg=new M,J1=class extends Rt{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";let e=new Ji({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=new rn({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=e.clone();t.opacity=.15;let r=i.clone();r.opacity=.5;let o=e.clone();o.color.setHex(16711680);let s=e.clone();s.color.setHex(65280);let a=e.clone();a.color.setHex(255);let c=e.clone();c.color.setHex(16711680),c.opacity=.5;let l=e.clone();l.color.setHex(65280),l.opacity=.5;let d=e.clone();d.color.setHex(255),d.opacity=.5;let u=e.clone();u.opacity=.25;let h=e.clone();h.color.setHex(16776960),h.opacity=.25,e.clone().color.setHex(16776960);let p=e.clone();p.color.setHex(7895160);let b=new Fn(0,.04,.1,12);b.translate(0,.05,0);let m=new Xi(.08,.08,.08);m.translate(0,.04,0);let g=new ft;g.setAttribute("position",new We([0,0,0,1,0,0],3));let v=new Fn(.0075,.0075,.5,3);v.translate(0,.25,0);function _(ne,G){let $=new ra(ne,.0075,3,64,G*Math.PI*2);return $.rotateY(Math.PI/2),$.rotateX(Math.PI/2),$}function y(){let ne=new ft;return ne.setAttribute("position",new We([0,0,0,1,1,1],3)),ne}let C={X:[[new Le(b,o),[.5,0,0],[0,0,-Math.PI/2]],[new Le(b,o),[-.5,0,0],[0,0,Math.PI/2]],[new Le(v,o),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new Le(b,s),[0,.5,0]],[new Le(b,s),[0,-.5,0],[Math.PI,0,0]],[new Le(v,s)]],Z:[[new Le(b,a),[0,0,.5],[Math.PI/2,0,0]],[new Le(b,a),[0,0,-.5],[-Math.PI/2,0,0]],[new Le(v,a),null,[Math.PI/2,0,0]]],XYZ:[[new Le(new na(.1,0),u.clone()),[0,0,0]]],XY:[[new Le(new Xi(.15,.15,.01),d.clone()),[.15,.15,0]]],YZ:[[new Le(new Xi(.15,.15,.01),c.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Le(new Xi(.15,.15,.01),l.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},R={X:[[new Le(new Fn(.2,0,.6,4),t),[.3,0,0],[0,0,-Math.PI/2]],[new Le(new Fn(.2,0,.6,4),t),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Le(new Fn(.2,0,.6,4),t),[0,.3,0]],[new Le(new Fn(.2,0,.6,4),t),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Le(new Fn(.2,0,.6,4),t),[0,0,.3],[Math.PI/2,0,0]],[new Le(new Fn(.2,0,.6,4),t),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new Le(new na(.2,0),t)]],XY:[[new Le(new Xi(.2,.2,.01),t),[.15,.15,0]]],YZ:[[new Le(new Xi(.2,.2,.01),t),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Le(new Xi(.2,.2,.01),t),[.15,0,.15],[-Math.PI/2,0,0]]]},w={START:[[new Le(new na(.01,2),r),null,null,null,"helper"]],END:[[new Le(new na(.01,2),r),null,null,null,"helper"]],DELTA:[[new Yi(y(),r),null,null,null,"helper"]],X:[[new Yi(g,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Yi(g,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Yi(g,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},A={XYZE:[[new Le(_(.5,1),p),null,[0,Math.PI/2,0]]],X:[[new Le(_(.5,.5),o)]],Y:[[new Le(_(.5,.5),s),null,[0,0,-Math.PI/2]]],Z:[[new Le(_(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new Le(_(.75,1),h),null,[0,Math.PI/2,0]]]},S={AXIS:[[new Yi(g,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},x={XYZE:[[new Le(new oc(.25,10,8),t)]],X:[[new Le(new ra(.5,.1,4,24),t),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Le(new ra(.5,.1,4,24),t),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Le(new ra(.5,.1,4,24),t),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Le(new ra(.75,.1,2,24),t)]]},F={X:[[new Le(m,o),[.5,0,0],[0,0,-Math.PI/2]],[new Le(v,o),[0,0,0],[0,0,-Math.PI/2]],[new Le(m,o),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new Le(m,s),[0,.5,0]],[new Le(v,s)],[new Le(m,s),[0,-.5,0],[0,0,Math.PI]]],Z:[[new Le(m,a),[0,0,.5],[Math.PI/2,0,0]],[new Le(v,a),[0,0,0],[Math.PI/2,0,0]],[new Le(m,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new Le(new Xi(.15,.15,.01),d),[.15,.15,0]]],YZ:[[new Le(new Xi(.15,.15,.01),c),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Le(new Xi(.15,.15,.01),l),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Le(new Xi(.1,.1,.1),u.clone())]]},V={X:[[new Le(new Fn(.2,0,.6,4),t),[.3,0,0],[0,0,-Math.PI/2]],[new Le(new Fn(.2,0,.6,4),t),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Le(new Fn(.2,0,.6,4),t),[0,.3,0]],[new Le(new Fn(.2,0,.6,4),t),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Le(new Fn(.2,0,.6,4),t),[0,0,.3],[Math.PI/2,0,0]],[new Le(new Fn(.2,0,.6,4),t),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new Le(new Xi(.2,.2,.01),t),[.15,.15,0]]],YZ:[[new Le(new Xi(.2,.2,.01),t),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Le(new Xi(.2,.2,.01),t),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Le(new Xi(.2,.2,.2),t),[0,0,0]]]},O={X:[[new Yi(g,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Yi(g,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Yi(g,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function K(ne){let G=new Rt;for(let $ in ne)for(let U=ne[$].length;U--;){let Z=ne[$][U][0].clone(),me=ne[$][U][1],ke=ne[$][U][2],$e=ne[$][U][3],vt=ne[$][U][4];Z.name=$,Z.tag=vt,me&&Z.position.set(me[0],me[1],me[2]),ke&&Z.rotation.set(ke[0],ke[1],ke[2]),$e&&Z.scale.set($e[0],$e[1],$e[2]),Z.updateMatrix();let Y=Z.geometry.clone();Y.applyMatrix4(Z.matrix),Z.geometry=Y,Z.renderOrder=1/0,Z.position.set(0,0,0),Z.rotation.set(0,0,0),Z.scale.set(1,1,1),G.add(Z)}return G}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=K(C)),this.add(this.gizmo.rotate=K(A)),this.add(this.gizmo.scale=K(F)),this.add(this.picker.translate=K(R)),this.add(this.picker.rotate=K(x)),this.add(this.picker.scale=K(V)),this.add(this.helper.translate=K(w)),this.add(this.helper.rotate=K(S)),this.add(this.helper.scale=K(O)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){let t=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:Bx;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let r=[];r=r.concat(this.picker[this.mode].children),r=r.concat(this.gizmo[this.mode].children),r=r.concat(this.helper[this.mode].children);for(let o=0;o<r.length;o++){let s=r[o];s.visible=!0,s.rotation.set(0,0,0),s.position.copy(this.worldPosition);let a;if(this.camera.isOrthographicCamera?a=(this.camera.top-this.camera.bottom)/this.camera.zoom:a=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),s.scale.set(1,1,1).multiplyScalar(a*this.size/4),s.tag==="helper"){s.visible=!1,s.name==="AXIS"?(s.visible=!!this.axis,this.axis==="X"&&(hn.setFromEuler(Ox.set(0,0,0)),s.quaternion.copy(t).multiply(hn),Math.abs(Zi.copy(Fg).applyQuaternion(t).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="Y"&&(hn.setFromEuler(Ox.set(0,0,Math.PI/2)),s.quaternion.copy(t).multiply(hn),Math.abs(Zi.copy(au).applyQuaternion(t).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="Z"&&(hn.setFromEuler(Ox.set(0,Math.PI/2,0)),s.quaternion.copy(t).multiply(hn),Math.abs(Zi.copy(jg).applyQuaternion(t).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="XYZE"&&(hn.setFromEuler(Ox.set(0,Math.PI/2,0)),Zi.copy(this.rotationAxis),s.quaternion.setFromRotationMatrix(GU.lookAt(HU,Zi,au)),s.quaternion.multiply(hn),s.visible=this.dragging),this.axis==="E"&&(s.visible=!1)):s.name==="START"?(s.position.copy(this.worldPositionStart),s.visible=this.dragging):s.name==="END"?(s.position.copy(this.worldPosition),s.visible=this.dragging):s.name==="DELTA"?(s.position.copy(this.worldPositionStart),s.quaternion.copy(this.worldQuaternionStart),kr.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),kr.applyQuaternion(this.worldQuaternionStart.clone().invert()),s.scale.copy(kr),s.visible=this.dragging):(s.quaternion.copy(t),this.dragging?s.position.copy(this.worldPositionStart):s.position.copy(this.worldPosition),this.axis&&(s.visible=this.axis.search(s.name)!==-1));continue}s.quaternion.copy(t),this.mode==="translate"||this.mode==="scale"?(s.name==="X"&&Math.abs(Zi.copy(Fg).applyQuaternion(t).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="Y"&&Math.abs(Zi.copy(au).applyQuaternion(t).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="Z"&&Math.abs(Zi.copy(jg).applyQuaternion(t).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="XY"&&Math.abs(Zi.copy(jg).applyQuaternion(t).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="YZ"&&Math.abs(Zi.copy(Fg).applyQuaternion(t).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="XZ"&&Math.abs(Zi.copy(au).applyQuaternion(t).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1)):this.mode==="rotate"&&(Nx.copy(t),Zi.copy(this.eye).applyQuaternion(hn.copy(t).invert()),s.name.search("E")!==-1&&s.quaternion.setFromRotationMatrix(GU.lookAt(this.eye,HU,au)),s.name==="X"&&(hn.setFromAxisAngle(Fg,Math.atan2(-Zi.y,Zi.z)),hn.multiplyQuaternions(Nx,hn),s.quaternion.copy(hn)),s.name==="Y"&&(hn.setFromAxisAngle(au,Math.atan2(Zi.x,Zi.z)),hn.multiplyQuaternions(Nx,hn),s.quaternion.copy(hn)),s.name==="Z"&&(hn.setFromAxisAngle(jg,Math.atan2(Zi.y,Zi.x)),hn.multiplyQuaternions(Nx,hn),s.quaternion.copy(hn))),s.visible=s.visible&&(s.name.indexOf("X")===-1||this.showX),s.visible=s.visible&&(s.name.indexOf("Y")===-1||this.showY),s.visible=s.visible&&(s.name.indexOf("Z")===-1||this.showZ),s.visible=s.visible&&(s.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),s.material._color=s.material._color||s.material.color.clone(),s.material._opacity=s.material._opacity||s.material.opacity,s.material.color.copy(s.material._color),s.material.opacity=s.material._opacity,this.enabled&&this.axis&&(s.name===this.axis||this.axis.split("").some(function(c){return s.name===c}))&&(s.material.color.setHex(16776960),s.material.opacity=1)}super.updateMatrixWorld(e)}},eA=class extends Le{constructor(){super(new ea(1e5,1e5,2,2),new Ji({visible:!1,wireframe:!0,side:Yn,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let i=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(i="local"),Lx.copy(Fg).applyQuaternion(i==="local"?this.worldQuaternion:Bx),Pg.copy(au).applyQuaternion(i==="local"?this.worldQuaternion:Bx),kg.copy(jg).applyQuaternion(i==="local"?this.worldQuaternion:Bx),Zi.copy(Pg),this.mode){case"translate":case"scale":switch(this.axis){case"X":Zi.copy(this.eye).cross(Lx),wa.copy(Lx).cross(Zi);break;case"Y":Zi.copy(this.eye).cross(Pg),wa.copy(Pg).cross(Zi);break;case"Z":Zi.copy(this.eye).cross(kg),wa.copy(kg).cross(Zi);break;case"XY":wa.copy(kg);break;case"YZ":wa.copy(Lx);break;case"XZ":Zi.copy(kg),wa.copy(Pg);break;case"XYZ":case"E":wa.set(0,0,0);break}break;case"rotate":default:wa.set(0,0,0)}wa.length()===0?this.quaternion.copy(this.cameraQuaternion):(WU.lookAt(kr.set(0,0,0),wa,Zi),this.quaternion.setFromRotationMatrix(WU)),super.updateMatrixWorld(e)}};var Nre=["*"],$U=(()=>{let e=class e extends en{getType(){return Pf}set domElement(t){this._objRef&&(this._objRef.domElement=t)}get domElement(){return this._objRef?.domElement}set camera(t){this._objRef&&(this._objRef.camera=t)}get camera(){return this._objRef?.camera}set object(t){this._objRef&&(this._objRef.object=t)}get object(){return this._objRef?.object}set enabled(t){this._objRef&&(this._objRef.enabled=t)}get enabled(){return this._objRef?.enabled}set axis(t){this._objRef&&(this._objRef.axis=t)}get axis(){return this._objRef?.axis}set mode(t){this._objRef&&(this._objRef.mode=t)}get mode(){return this._objRef?.mode}set translationSnap(t){this._objRef&&(this._objRef.translationSnap=t)}get translationSnap(){return this._objRef?.translationSnap}set rotationSnap(t){this._objRef&&(this._objRef.rotationSnap=t)}get rotationSnap(){return this._objRef?.rotationSnap}set space(t){this._objRef&&(this._objRef.space=t)}get space(){return this._objRef?.space}set size(t){this._objRef&&(this._objRef.size=t)}get size(){return this._objRef?.size}set dragging(t){this._objRef&&(this._objRef.dragging=t)}get dragging(){return this._objRef?.dragging}set showX(t){this._objRef&&(this._objRef.showX=t)}get showX(){return this._objRef?.showX}set showY(t){this._objRef&&(this._objRef.showY=t)}get showY(){return this._objRef?.showY}set showZ(t){this._objRef&&(this._objRef.showZ=t)}get showZ(){return this._objRef?.showZ}get isTransformControls(){return this._objRef?.isTransformControls}set mouseButtons(t){this._objRef&&(this._objRef.mouseButtons=t)}get mouseButtons(){return this._objRef?.mouseButtons}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-transformControlsGen"]],inputs:{domElement:"domElement",camera:"camera",object:"object",enabled:"enabled",axis:"axis",mode:"mode",translationSnap:"translationSnap",rotationSnap:"rotationSnap",space:"space",size:"size",dragging:"dragging",showX:"showX",showY:"showY",showZ:"showZ",mouseButtons:"mouseButtons"},features:[oe([{provide:en,useExisting:ge(()=>e)}]),X],ngContentSelectors:Nre,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var qU={name:"LuminosityHighPassShader",shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new _e(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			vec3 luma = vec3( 0.299, 0.587, 0.114 );

			float v = dot( texel.xyz, luma );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};var kf=class n extends an{constructor(e,i,t,r){super(),this.strength=i!==void 0?i:1,this.radius=t,this.threshold=r,this.resolution=e!==void 0?new z(e.x,e.y):new z(256,256),this.clearColor=new _e(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let o=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);this.renderTargetBright=new oi(o,s,{type:Wi}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let u=0;u<this.nMips;u++){let h=new oi(o,s,{type:Wi});h.texture.name="UnrealBloomPass.h"+u,h.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(h);let f=new oi(o,s,{type:Wi});f.texture.name="UnrealBloomPass.v"+u,f.texture.generateMipmaps=!1,this.renderTargetsVertical.push(f),o=Math.round(o/2),s=Math.round(s/2)}let a=qU;this.highPassUniforms=Li.clone(a.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Dt({uniforms:this.highPassUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}),this.separableBlurMaterials=[];let c=[3,5,7,9,11];o=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);for(let u=0;u<this.nMips;u++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(c[u])),this.separableBlurMaterials[u].uniforms.invSize.value=new z(1/o,1/s),o=Math.round(o/2),s=Math.round(s/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=i,this.compositeMaterial.uniforms.bloomRadius.value=.1;let l=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=l,this.bloomTintColors=[new M(1,1,1),new M(1,1,1),new M(1,1,1),new M(1,1,1),new M(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;let d=dr;this.copyUniforms=Li.clone(d.uniforms),this.blendMaterial=new Dt({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:Td,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new _e,this.oldClearAlpha=1,this.basic=new Ji,this.fsQuad=new lr(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,i){let t=Math.round(e/2),r=Math.round(i/2);this.renderTargetBright.setSize(t,r);for(let o=0;o<this.nMips;o++)this.renderTargetsHorizontal[o].setSize(t,r),this.renderTargetsVertical[o].setSize(t,r),this.separableBlurMaterials[o].uniforms.invSize.value=new z(1/t,1/r),t=Math.round(t/2),r=Math.round(r/2)}render(e,i,t,r,o){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();let s=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),o&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=t.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=t.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let a=this.renderTargetBright;for(let c=0;c<this.nMips;c++)this.fsQuad.material=this.separableBlurMaterials[c],this.separableBlurMaterials[c].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[c].uniforms.direction.value=n.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[c]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[c].uniforms.colorTexture.value=this.renderTargetsHorizontal[c].texture,this.separableBlurMaterials[c].uniforms.direction.value=n.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[c]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[c];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,o&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}getSeperableBlurMaterial(e){let i=[];for(let t=0;t<e;t++)i.push(.39894*Math.exp(-.5*t*t/(e*e))/e);return new Dt({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new z(.5,.5)},direction:{value:new z(.5,.5)},gaussianCoefficients:{value:i}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new Dt({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}};kf.BlurDirectionX=new z(1,0);kf.BlurDirectionY=new z(0,1);var Lre=["*"],Ux=(()=>{let e=class e extends Ii{getType(){return kf}set resolution(t){this._objRef&&(this._objRef.resolution=ve(this._objRef.resolution,t))}get resolution(){return this._objRef?.resolution}set strength(t){this._objRef&&(this._objRef.strength=t)}get strength(){return this._objRef?.strength}set radius(t){this._objRef&&(this._objRef.radius=t)}get radius(){return this._objRef?.radius}set threshold(t){this._objRef&&(this._objRef.threshold=t)}get threshold(){return this._objRef?.threshold}set clearColor(t){this._objRef&&(this._objRef.clearColor=ve(this._objRef.clearColor,t))}get clearColor(){return this._objRef?.clearColor}set renderTargetsHorizontal(t){this._objRef&&(this._objRef.renderTargetsHorizontal=t)}get renderTargetsHorizontal(){return this._objRef?.renderTargetsHorizontal}set renderTargetsVertical(t){this._objRef&&(this._objRef.renderTargetsVertical=t)}get renderTargetsVertical(){return this._objRef?.renderTargetsVertical}set nMips(t){this._objRef&&(this._objRef.nMips=t)}get nMips(){return this._objRef?.nMips}set renderTargetBright(t){this._objRef&&(this._objRef.renderTargetBright=t)}get renderTargetBright(){return this._objRef?.renderTargetBright}set highPassUniforms(t){this._objRef&&(this._objRef.highPassUniforms=t)}get highPassUniforms(){return this._objRef?.highPassUniforms}set materialHighPassFilter(t){this._objRef&&(this._objRef.materialHighPassFilter=t)}get materialHighPassFilter(){return this._objRef?.materialHighPassFilter}set separableBlurMaterials(t){this._objRef&&(this._objRef.separableBlurMaterials=t)}get separableBlurMaterials(){return this._objRef?.separableBlurMaterials}set compositeMaterial(t){this._objRef&&(this._objRef.compositeMaterial=t)}get compositeMaterial(){return this._objRef?.compositeMaterial}set bloomTintColors(t){this._objRef&&(this._objRef.bloomTintColors=t)}get bloomTintColors(){return this._objRef?.bloomTintColors}set copyUniforms(t){this._objRef&&(this._objRef.copyUniforms=t)}get copyUniforms(){return this._objRef?.copyUniforms}set blendMaterial(t){this._objRef&&(this._objRef.blendMaterial=t)}get blendMaterial(){return this._objRef?.blendMaterial}set oldClearColor(t){this._objRef&&(this._objRef.oldClearColor=ve(this._objRef.oldClearColor,t))}get oldClearColor(){return this._objRef?.oldClearColor}set oldClearAlpha(t){this._objRef&&(this._objRef.oldClearAlpha=t)}get oldClearAlpha(){return this._objRef?.oldClearAlpha}set basic(t){this._objRef&&(this._objRef.basic=t)}get basic(){return this._objRef?.basic}set fsQuad(t){this._objRef&&(this._objRef.fsQuad=t)}get fsQuad(){return this._objRef?.fsQuad}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-unrealBloomPass"]],inputs:{resolution:"resolution",strength:"strength",radius:"radius",threshold:"threshold",clearColor:"clearColor",renderTargetsHorizontal:"renderTargetsHorizontal",renderTargetsVertical:"renderTargetsVertical",nMips:"nMips",renderTargetBright:"renderTargetBright",highPassUniforms:"highPassUniforms",materialHighPassFilter:"materialHighPassFilter",separableBlurMaterials:"separableBlurMaterials",compositeMaterial:"compositeMaterial",bloomTintColors:"bloomTintColors",copyUniforms:"copyUniforms",blendMaterial:"blendMaterial",oldClearColor:"oldClearColor",oldClearAlpha:"oldClearAlpha",basic:"basic",fsQuad:"fsQuad"},features:[oe([{provide:ui,useExisting:ge(()=>e)}]),X],ngContentSelectors:Lre,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Bre=["*"],YU=(()=>{let e=class e extends fU{constructor(){super(...arguments),this.elementRef=re(Qe)}getType(){return mf}createThreeInstance(t){return super.createThreeInstance(t??this.elementRef?.nativeElement)}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-cSS2DObject"]],features:[oe([{provide:pe,useExisting:ge(()=>e)}]),X],ngContentSelectors:Bre,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0});let n=e;return n})();var Vre=["*"],Vx=(()=>{let e=class e extends mU{constructor(){super(...arguments),this.elementRef=re(Qe)}getType(){return hf}createThreeInstance(t){return super.createThreeInstance(t??this.elementRef?.nativeElement)}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["th-cSS3DObject"]],features:[oe([{provide:pe,useExisting:ge(()=>e)}]),X],ngContentSelectors:Vre,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},styles:["[_nghost-%COMP%]{display:inline-block}"],changeDetection:0});let n=e;return n})();var zre=["*"],Ff=(()=>{let e=class e extends FU{constructor(t,r){super(t),this.effectComposer=t,this.view=r}createThreeInstance(t){return t||(t=new Array(5)),t[0]=t[0]??this.view.scene,t[1]=t[1]??this.view.camera,t[2]=t[2]??this.overrideMaterial,t[3]=t[3]??this.clearColor,t[4]=t[4]??this.clearAlpha,super.createThreeInstance(t)}ngAfterContentChecked(){this._objRef&&(this.view.scene&&this.view.scene.objRef&&(this._objRef.scene=this.view.scene.objRef),this.view.camera&&this.view.camera.objRef&&(this._objRef.camera=this.view.camera.objRef))}};e.\u0275fac=function(r){return new(r||e)(k(xa),k(Ir))},e.\u0275cmp=L({type:e,selectors:[["th-renderPass"]],features:[oe([{provide:ui,useExisting:ge(()=>e)}]),X],ngContentSelectors:zre,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var Hre=["*"],QU=(()=>{let e=class e extends $U{constructor(t,r,o){super(t,r),this.scene=o,this.objectAdded=()=>{this.objRef&&this.targetObject!=null&&this.targetObject.parent&&this.objRef.attach(this.targetObject)},this.objectRemoved=()=>{this._objRef?.detach()}}getType(){return Pf}set object(t){this._objRef&&(this.removeObjectListeners(),this.targetObject=t,this.addObjectListeners(),t?this.objectAdded():this.objectRemoved())}addToParent(){this._objRef&&!this._objRef.parent&&this.scene?.objRef?.add(this._objRef)}removeFromParent(){this._objRef&&this.scene?.objRef?.remove(this._objRef)}ngOnDestroy(){this.removeObjectListeners(),this.objectRemoved(),this.targetObject=void 0}removeObjectListeners(){this.targetObject&&(this.targetObject.removeEventListener("added",this.objectAdded),this.targetObject.removeEventListener("removed",this.objectRemoved))}addObjectListeners(){this.targetObject?.addEventListener("added",this.objectAdded),this.targetObject?.addEventListener("removed",this.objectRemoved)}};e.\u0275fac=function(r){return new(r||e)(k(pe),k(Ct),k(jt))},e.\u0275cmp=L({type:e,selectors:[["th-transformControls"]],inputs:{object:"object"},features:[oe([{provide:en,useExisting:ge(()=>e)}]),X],ngContentSelectors:Hre,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})();var iA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({});let n=e;return n})();var Ra=(()=>{let e=class e{transform(t){return Array.isArray(t)?new _e(...t):new _e(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Oo({name:"color",type:e,pure:!0});let n=e;return n})();var ho=new _e,Hx=class extends Jn{constructor(e){super(e),this.propertyNameMapping={},this.customPropertyMapping={}}load(e,i,t,r){let o=this,s=new Kn(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{i(o.parse(a))}catch(c){r?r(c):console.error(c),o.manager.itemError(e)}},t,r)}setPropertyNameMapping(e){this.propertyNameMapping=e}setCustomPropertyNameMapping(e){this.customPropertyMapping=e}parse(e){function i(m,g=0){let v=/^ply([\s\S]*)end_header(\r\n|\r|\n)/,_="",y=v.exec(m);y!==null&&(_=y[1]);let C={comments:[],elements:[],headerLength:g,objInfo:""},R=_.split(/\r\n|\r|\n/),w;function A(S,x){let F={type:S[0]};return F.type==="list"?(F.name=S[3],F.countType=S[1],F.itemType=S[2]):F.name=S[1],F.name in x&&(F.name=x[F.name]),F}for(let S=0;S<R.length;S++){let x=R[S];if(x=x.trim(),x==="")continue;let F=x.split(/\s+/),V=F.shift();switch(x=F.join(" "),V){case"format":C.format=F[0],C.version=F[1];break;case"comment":C.comments.push(x);break;case"element":w!==void 0&&C.elements.push(w),w={},w.name=F[0],w.count=parseInt(F[1]),w.properties=[];break;case"property":w.properties.push(A(F,b.propertyNameMapping));break;case"obj_info":C.objInfo=x;break;default:console.log("unhandled",V,F)}}return w!==void 0&&C.elements.push(w),C}function t(m,g){switch(g){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(m);case"float":case"double":case"float32":case"float64":return parseFloat(m)}}function r(m,g){let v={};for(let _=0;_<m.length;_++){if(g.empty())return null;if(m[_].type==="list"){let y=[],C=t(g.next(),m[_].countType);for(let R=0;R<C;R++){if(g.empty())return null;y.push(t(g.next(),m[_].itemType))}v[m[_].name]=y}else v[m[_].name]=t(g.next(),m[_].type)}return v}function o(){let m={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[],faceVertexColors:[]};for(let g of Object.keys(b.customPropertyMapping))m[g]=[];return m}function s(m){let g=m.map(_=>_.name);function v(_){for(let y=0,C=_.length;y<C;y++){let R=_[y];if(g.includes(R))return R}return null}return{attrX:v(["x","px","posx"])||"x",attrY:v(["y","py","posy"])||"y",attrZ:v(["z","pz","posz"])||"z",attrNX:v(["nx","normalx"]),attrNY:v(["ny","normaly"]),attrNZ:v(["nz","normalz"]),attrS:v(["s","u","texture_u","tx"]),attrT:v(["t","v","texture_v","ty"]),attrR:v(["red","diffuse_red","r","diffuse_r"]),attrG:v(["green","diffuse_green","g","diffuse_g"]),attrB:v(["blue","diffuse_blue","b","diffuse_b"])}}function a(m,g){let v=o(),_=/end_header\s+(\S[\s\S]*\S|\S)\s*$/,y,C;(C=_.exec(m))!==null?y=C[1].split(/\s+/):y=[];let R=new nA(y);e:for(let w=0;w<g.elements.length;w++){let A=g.elements[w],S=s(A.properties);for(let x=0;x<A.count;x++){let F=r(A.properties,R);if(!F)break e;l(v,A.name,F,S)}}return c(v)}function c(m){let g=new ft;m.indices.length>0&&g.setIndex(m.indices),g.setAttribute("position",new We(m.vertices,3)),m.normals.length>0&&g.setAttribute("normal",new We(m.normals,3)),m.uvs.length>0&&g.setAttribute("uv",new We(m.uvs,2)),m.colors.length>0&&g.setAttribute("color",new We(m.colors,3)),(m.faceVertexUvs.length>0||m.faceVertexColors.length>0)&&(g=g.toNonIndexed(),m.faceVertexUvs.length>0&&g.setAttribute("uv",new We(m.faceVertexUvs,2)),m.faceVertexColors.length>0&&g.setAttribute("color",new We(m.faceVertexColors,3)));for(let v of Object.keys(b.customPropertyMapping))m[v].length>0&&g.setAttribute(v,new We(m[v],b.customPropertyMapping[v].length));return g.computeBoundingSphere(),g}function l(m,g,v,_){if(g==="vertex"){m.vertices.push(v[_.attrX],v[_.attrY],v[_.attrZ]),_.attrNX!==null&&_.attrNY!==null&&_.attrNZ!==null&&m.normals.push(v[_.attrNX],v[_.attrNY],v[_.attrNZ]),_.attrS!==null&&_.attrT!==null&&m.uvs.push(v[_.attrS],v[_.attrT]),_.attrR!==null&&_.attrG!==null&&_.attrB!==null&&(ho.setRGB(v[_.attrR]/255,v[_.attrG]/255,v[_.attrB]/255).convertSRGBToLinear(),m.colors.push(ho.r,ho.g,ho.b));for(let y of Object.keys(b.customPropertyMapping))for(let C of b.customPropertyMapping[y])m[y].push(v[C])}else if(g==="face"){let y=v.vertex_indices||v.vertex_index,C=v.texcoord;y.length===3?(m.indices.push(y[0],y[1],y[2]),C&&C.length===6&&(m.faceVertexUvs.push(C[0],C[1]),m.faceVertexUvs.push(C[2],C[3]),m.faceVertexUvs.push(C[4],C[5]))):y.length===4&&(m.indices.push(y[0],y[1],y[3]),m.indices.push(y[1],y[2],y[3])),_.attrR!==null&&_.attrG!==null&&_.attrB!==null&&(ho.setRGB(v[_.attrR]/255,v[_.attrG]/255,v[_.attrB]/255).convertSRGBToLinear(),m.faceVertexColors.push(ho.r,ho.g,ho.b),m.faceVertexColors.push(ho.r,ho.g,ho.b),m.faceVertexColors.push(ho.r,ho.g,ho.b))}}function d(m,g){let v={},_=0;for(let y=0;y<g.length;y++){let C=g[y],R=C.valueReader;if(C.type==="list"){let w=[],A=C.countReader.read(m+_);_+=C.countReader.size;for(let S=0;S<A;S++)w.push(R.read(m+_)),_+=R.size;v[C.name]=w}else v[C.name]=R.read(m+_),_+=R.size}return[v,_]}function u(m,g,v){function _(y,C,R){switch(C){case"int8":case"char":return{read:w=>y.getInt8(w),size:1};case"uint8":case"uchar":return{read:w=>y.getUint8(w),size:1};case"int16":case"short":return{read:w=>y.getInt16(w,R),size:2};case"uint16":case"ushort":return{read:w=>y.getUint16(w,R),size:2};case"int32":case"int":return{read:w=>y.getInt32(w,R),size:4};case"uint32":case"uint":return{read:w=>y.getUint32(w,R),size:4};case"float32":case"float":return{read:w=>y.getFloat32(w,R),size:4};case"float64":case"double":return{read:w=>y.getFloat64(w,R),size:8}}}for(let y=0,C=m.length;y<C;y++){let R=m[y];R.type==="list"?(R.countReader=_(g,R.countType,v),R.valueReader=_(g,R.itemType,v)):R.valueReader=_(g,R.type,v)}}function h(m,g){let v=o(),_=g.format==="binary_little_endian",y=new DataView(m,g.headerLength),C,R=0;for(let w=0;w<g.elements.length;w++){let A=g.elements[w],S=A.properties,x=s(S);u(S,y,_);for(let F=0;F<A.count;F++){C=d(R,S),R+=C[1];let V=C[0];l(v,A.name,V,x)}}return c(v)}function f(m){let g=0,v=!0,_="",y=[],C=new TextDecoder().decode(m.subarray(0,5)),R=/^ply\r\n/.test(C);do{let w=String.fromCharCode(m[g++]);w!==`
`&&w!=="\r"?_+=w:(_==="end_header"&&(v=!1),_!==""&&(y.push(_),_=""))}while(v&&g<m.length);return R===!0&&g++,{headerText:y.join("\r")+"\r",headerLength:g}}let p,b=this;if(e instanceof ArrayBuffer){let m=new Uint8Array(e),{headerText:g,headerLength:v}=f(m),_=i(g,v);if(_.format==="ascii"){let y=new TextDecoder().decode(m);p=a(y,_)}else p=h(e,_)}else p=a(e,i(e));return p}},nA=class{constructor(e){this.arr=e,this.i=0}empty(){return this.i>=this.arr.length}next(){return this.arr[this.i++]}};var Wre=(()=>{let e=class e extends bf{constructor(){super(...arguments),this.clazz=Hx}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var KU=(()=>{let e=class e extends _f{constructor(t,r,o){super(t,r),this.host=t,this.zone=r,this.service=o}getRefFromResponse(t){return t.computeVertexNormals(),t}load(){return yi(this,null,function*(){if(!this.initialized)return;if(this._url===void 0)throw new Error("missing url");let t=this._url,r=Gd(this.onProgress$)?s=>{this.onProgress$?.next(s)}:void 0,o=yield this.zone.runOutsideAngular(()=>this.service.load(t,r));this.host.objRef=this.getRefFromResponse(o),this.onLoaded$&&o!==void 0&&this.onLoaded$?.next(o)})}};e.\u0275fac=function(r){return new(r||e)(k(Jt,1),k(Xe),k(Wre))},e.\u0275dir=He({type:e,selectors:[["","loadPLY",""]],features:[X]});let n=e;return n})();var qre=["outerRef"],Xre=["innerRef"],Yre=["*"];function Zre(n,e){n&1&&Yu(0)}function Qre(n,e){if(n&1){let i=Gt();H(0,"div",5,2),Fe("onResize",function(){ct(i);let r=Ut();return lt(r.onResize())}),H(2,"div",6,3)(4,"div",7),Nt(5,Zre,1,0,"ng-container",8),ie()()()}if(n&2){let i=Ut(),t=Tt(4);P("ngStyle",i.styles),j(2),P("ngStyle",i.transformInnerStyles),j(2),q_(i.style),P("className",i.className),j(),P("ngTemplateOutlet",t)}}function Kre(n,e){n&1&&Yu(0)}function Jre(n,e){if(n&1&&(H(0,"div",9,2),Nt(2,Kre,1,0,"ng-container",8),ie()),n&2){let i=Ut(),t=Tt(4);P("ngStyle",i.styles)("className",i.className),j(2),P("ngTemplateOutlet",t)}}function eoe(n,e){n&1&&ee(0)}var Ng=new M,sA=new M,toe=new M;function ioe(n,e,i){let t=Ng.setFromMatrixPosition(n.matrixWorld);t.project(e);let r=i.width/2,o=i.height/2;return[t.x*r+r,-(t.y*o)+o]}function noe(n,e){let i=Ng.setFromMatrixPosition(n.matrixWorld),t=sA.setFromMatrixPosition(e.matrixWorld),r=i.sub(t),o=e.getWorldDirection(toe);return r.angleTo(o)>Math.PI/2}function roe(n,e,i,t){let r=Ng.setFromMatrixPosition(n.matrixWorld),o=r.clone();o.project(e),i.setFromCamera(o,e);let s=i.intersectObjects(t,!0);if(s.length){let a=s[0].distance;return r.distanceTo(i.ray.origin)<a}return!0}function ooe(n,e){if(e instanceof Ro)return e.zoom;if(e instanceof Ki){let i=Ng.setFromMatrixPosition(n.matrixWorld),t=sA.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,o=i.distanceTo(t);return 1/(2*Math.tan(r/2)*o)}else return 1}function soe(n,e,i){if(e instanceof Ki||e instanceof Ro){let t=Ng.setFromMatrixPosition(n.matrixWorld),r=sA.setFromMatrixPosition(e.matrixWorld),o=t.distanceTo(r),s=(i[1]-i[0])/(e.far-e.near),a=i[1]-s*e.far;return Math.round(s*o+a)}}var oA=n=>Math.abs(n)<1e-10?0:n;function JU(n,e,i=""){let t="matrix3d(";for(let r=0;r!==16;r++)t+=oA(e[r]*n.elements[r])+(r!==15?",":")");return i+t}var aoe=(n=>e=>JU(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),coe=(n=>(e,i)=>JU(e,n(i),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]),eV=(()=>{let e=class e extends Tl{constructor(t,r){super(r),this.view=t,this.DoubleSide=Yn,this.FRAGMENT_SHADER=doe,this.VERTEX_SHADER=loe,this.prepend=!1,this.center=!1,this.fullscreen=!1,this.eps=.001,this.sprite=!1,this.transform=!1,this.zIndexRange=[16777271,0],this.onOcclude=new et,this.calculatePosition=ioe,this.as="div",this.pointerEvents="auto",this.transformInnerStyles=this.computeInnerStyles(),this.styles=null,this.oldZoom=0,this.oldPosition=[0,0],this.notOccluded=!0,this.raycaster=re($d)}ngOnInit(){super.ngOnInit(),this.styles=this.computeStyles()}ngAfterViewInit(){this.el=document.createElement(this.as),this.frameSubscription=this.view.onRender.subscribe(()=>this.onFrame()),this.transformOuterRef&&this.el.appendChild(this.transformOuterRef.nativeElement),this.el&&!this.target&&this.appendElement(this.el)}onResize(){this.styles=this.computeStyles()}ngOnChanges(t){super.ngOnChanges(t)}appendElement(t){if(!(!this.el||!this.objRef||!this.view.hostElement||!this.view.camera)){if(this.target=this.portal??this.view.hostElement.nativeElement,this.view.scene?.objRef?.updateMatrixWorld(),this.transform)t.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{let r=this.calculatePosition(this.objRef,this.view.camera.objRef,this.getSize());t.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${r[0]}px,${r[1]}px,0);transform-origin:0 0;`}this.target&&(this.prepend?this.target.prepend(t):this.target.appendChild(t))}}onFrame(){let t=this.view.camera?.objRef,r=this.view.scene?.objRef,o=this._objRef,s=this.getSize();if(!t||!o||!r||!this.el)return;t.updateMatrixWorld(),o.updateWorldMatrix(!0,!1);let a=this.transform?this.oldPosition:this.calculatePosition(o,t,s);if(this.transform||Math.abs(this.oldZoom-t.zoom)>this.eps||Math.abs(this.oldPosition[0]-a[0])>this.eps||Math.abs(this.oldPosition[1]-a[1])>this.eps){let c=noe(o,t),l=!1;typeof this.occlude=="boolean"?this.occlude===!0&&(l=[r]):Array.isArray(this.occlude)&&(l=this.occlude.map(u=>u.objRef??u));let d=this.notOccluded;if(l?this.notOccluded=!c&&roe(o,t,this.raycaster,l):this.notOccluded=!c,d!==this.notOccluded&&(this.onOcclude.length>0?this.onOcclude.next(!this.notOccluded):this.el.style.display=this.notOccluded?"block":"none"),this.el.style.zIndex=`${soe(o,t,this.zIndexRange)}`,this.transform){let[u,h]=[s.width/2,s.height/2],f=t.projectionMatrix.elements[5]*h,{isOrthographicCamera:p,top:b,left:m,bottom:g,right:v}=t,_=aoe(t.matrixWorldInverse),y=p?`scale(${f})translate(${oA(-(v+m)/2)}px,${oA((b+g)/2)}px)`:`translateZ(${f}px)`,C=o.matrixWorld;this.sprite&&(C=t.matrixWorldInverse.clone().transpose().copyPosition(C).scale(o.scale),C.elements[3]=C.elements[7]=C.elements[11]=0,C.elements[15]=1),this.el.style.width=s.width+"px",this.el.style.height=s.height+"px",this.el.style.perspective=p?"":`${f}px`,this.transformOuterRef&&this.transformInnerRef&&(this.transformOuterRef.nativeElement.style.transform=`${y}${_}translate(${u}px,${h}px)`,this.transformInnerRef.nativeElement.style.transform=coe(C,1/((this.distanceFactor||10)/400)))}else{let u=this.distanceFactor===void 0?1:ooe(o,t)*this.distanceFactor;this.el.style.transform=`translate3d(${a[0]}px,${a[1]}px,0) scale(${u})`}this.oldPosition=a,this.oldZoom=t.zoom}}ngOnDestroy(){this.el?.remove(),this.frameSubscription?.unsubscribe()}computeStyles(){let t=this.getSize();return this.transform?{position:"absolute",top:0,left:0,width:t.width+"px",height:t.height+"px",transformStyle:"preserve-3d",pointerEvents:"none"}:xe(xe({position:"absolute",transform:this.center?"translate3d(-50%,-50%,0)":"none"},this.fullscreen&&{top:-t.height/2+"px",left:-t.width/2+"px",width:t.width+"px",height:t.height+"px"}),this.style)}computeInnerStyles(){return{position:"absolute",pointerEvents:this.pointerEvents}}getSize(){return this.view.viewPort??this.view.hostElement.nativeElement.getBoundingClientRect()??{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(k(Ir),k(pe,4))},e.\u0275cmp=L({type:e,selectors:[["th-html"]],viewQuery:function(r,o){if(r&1&&(Vt(qre,5),Vt(Xre,5)),r&2){let s;nt(s=rt())&&(o.transformOuterRef=s.first),nt(s=rt())&&(o.transformInnerRef=s.first)}},inputs:{prepend:"prepend",center:"center",fullscreen:"fullscreen",portal:"portal",distanceFactor:"distanceFactor",sprite:"sprite",transform:"transform",zIndexRange:"zIndexRange",style:"style",className:"className",occlude:"occlude",calculatePosition:"calculatePosition",as:"as",wrapperClass:"wrapperClass",pointerEvents:"pointerEvents"},outputs:{onOcclude:"onOcclude"},features:[X,Un],ngContentSelectors:Yre,decls:5,vars:2,consts:[["noTransform",""],["tempOutlet",""],["outerRef",""],["innerRef",""],[3,"ngStyle","onResize",4,"ngIf","ngIfElse"],[3,"onResize","ngStyle"],[3,"ngStyle"],[3,"className"],[4,"ngTemplateOutlet"],[3,"ngStyle","className"]],template:function(r,o){if(r&1&&(ce(),Nt(0,Qre,6,6,"div",4)(1,Jre,3,3,"ng-template",null,0,Sm)(3,eoe,1,0,"ng-template",null,1,Sm)),r&2){let s=Tt(2);P("ngIf",o.transform)("ngIfElse",s)}},dependencies:[th,lv,rO,_l],encapsulation:2,changeDetection:0});let n=e;return n})(),loe=`
/*
  This shader is from the THREE's SpriteMaterial.
  We need to turn the backing plane into a Sprite
  (make it always face the camera) if "transfrom" 
  is false. 
*/
#include <common>
void main() {
  vec2 center = vec2(0., 1.);
  float rotation = 0.0;
  
  // This is somewhat arbitrary, but it seems to work well
  // Need to figure out how to derive this dynamically if it even matters
  float size = 0.03;
  vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
  bool isPerspective = isPerspectiveMatrix( projectionMatrix );
  if ( isPerspective ) scale *= - mvPosition.z;
  vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
  rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
  mvPosition.xy += rotatedPosition;
  gl_Position = projectionMatrix * mvPosition;
}
`,doe=`
void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
}
`;var jf=(()=>{let e=class e{constructor(t,r){this.host=t,this.parent=r,this.host.autoAddToParent=!1,this.host.autoDispose=!1,this.host.objRef=Uy()}set refById(t){this.id=t,this.subscription?.unsubscribe(),this.subscription=this.parent.objRef$.subscribe(r=>{this.parentObj=r,this.applyRef()})}applyRef(){if(!this.parentObj||this.id===void 0)return;let t=this.findById(this.parentObj,this.id);t&&this.setRef(this.host,t)}findById(t,r){if((t.name??t.uuid)===r)return t;for(let o of t.children){let s=this.findById(o,r);if(s!==void 0)return s}}setRef(t,r){let o=t.objRef;o&&rg(o)&&(o.objRef=r,t.objRef=o)}ngOnDestroy(){this.subscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(k(pe,2),k(pe,4))},e.\u0275dir=He({type:e,selectors:[["","refById",""]],inputs:{refById:"refById"}});let n=e;return n})();var tV=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({imports:[iA,Vo,iA]});let n=e;return n})();function iV(n){return[{provide:pe,useExisting:ge(()=>n)}]}var cA=n=>[0,n,0],hoe=()=>[0,1,0],foe=()=>({background:"lightblue",borderRadius:"1em",padding:"1em",display:"flex",flexDirection:"column"}),nV=n=>[n,0,0],moe=n=>[0,.039,n],poe=()=>[.17,.17,.17],goe=()=>[4,10,2],boe=()=>[100,100],_oe=()=>[55,2,.1,100],voe=(n,e)=>[n,0,e],yoe=()=>[0,0,0],rV=(()=>{let e=class e{constructor(t){this.Math=Math,this.sprite=!1,this.glbPath=`${sn}mac-draco.glb`,this.clock=new ro(!0),this.plane=new sr(new M(0,1,0),3),this.rotation=[0,0,0],this.position=[0,0,0],t.setDecoderPath("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/jsm/libs/draco/gltf/"),t.setCrossOrigin("no-cors"),this.calcPose()}onBeforeRender(){this.calcPose()}calcPose(){let t=this.clock.getElapsedTime();this.rotation=[tt.lerp(this.rotation[0],Math.cos(t/2)/20+.25,.1),tt.lerp(this.rotation[1],Math.sin(t/4)/20,.1),tt.lerp(this.rotation[2],Math.sin(t/8)/20,.1)],this.position=[0,tt.lerp(this.position[1],(-2+Math.sin(t/2))/2,.1),0]}};e.\u0275fac=function(r){return new(r||e)(k(bl))},e.\u0275cmp=L({type:e,selectors:[["app-html-example"]],decls:17,vars:57,consts:[["light",""],[3,"onRender","thStats","shadow"],[3,"intensity"],[3,"rotation","position"],["loadGLTF","",3,"castShadow","url","position","rotation"],[3,"refById"],[3,"rotation","position","scale","sprite","transform","occlude"],["src",j_`./multi-view-postprocessing-example`,2,"width","1960px","height","1280px"],[3,"castShadow","position","lookAt","color","intensity"],[3,"receiveShadow","rotation","position"],[3,"args"],[3,"color"],[3,"args","position","lookAt"]],template:function(r,o){if(r&1){let s=Gt();H(0,"th-canvas",1),Fe("onRender",function(){return ct(s),lt(o.onBeforeRender())}),H(1,"th-scene"),he(2,"th-ambientLight",2),H(3,"th-group",3)(4,"th-object3D",4)(5,"th-mesh",5)(6,"th-html",6),he(7,"iframe",7),ie()()()(),he(8,"th-directionalLight",8,0),ji(10,"color"),H(11,"th-mesh",9),he(12,"th-planeGeometry",10)(13,"th-meshBasicMaterial",11),ji(14,"color"),ie(),H(15,"th-perspectiveCamera",12),he(16,"th-orbitControls"),ie()()()}r&2&&(P("thStats",!0)("shadow",!0),j(2),P("intensity",3),j(),P("rotation",gt(35,cA,o.Math.PI))("position",te(37,hoe)),j(),P("castShadow",!0)("url",o.glbPath)("position",o.position)("rotation",o.rotation),j(),P("refById","Cube008_2"),j(),q_(te(38,foe)),P("rotation",gt(39,nV,-1*o.Math.PI/2))("position",gt(41,moe,-.5))("scale",te(43,poe))("sprite",o.sprite)("transform",!0)("occlude",!0),j(2),P("castShadow",!0)("position",te(44,goe))("lookAt",gt(45,cA,-3))("color",zi(10,31,"#ffffff"))("intensity",2),j(3),P("receiveShadow",!0)("rotation",gt(47,nV,3*o.Math.PI/2))("position",gt(49,cA,-3)),j(),P("args",te(51,boe)),j(),P("color",zi(14,33,"#efefef")),j(2),P("args",te(52,_oe))("position",Hn(53,voe,-5,-15))("lookAt",te(56,yoe)))},dependencies:[Dn,Wt,pe,Ai,ar,Tl,Ri,jt,pa,Wo,Ct,$n,En,jf,eV,Ra],encapsulation:2,changeDetection:0});let n=e;return n})();var G5e=.5*(Math.sqrt(3)-1),W5e=(3-Math.sqrt(3))/6,xoe=1/3,Ta=1/6,$5e=(Math.sqrt(5)-1)/4,q5e=(5-Math.sqrt(5))/20,lA=n=>Math.floor(n)|0;var dA=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function oV(n=Math.random){let e=woe(n),i=new Float64Array(e).map(o=>dA[o%12*3]),t=new Float64Array(e).map(o=>dA[o%12*3+1]),r=new Float64Array(e).map(o=>dA[o%12*3+2]);return function(s,a,c){let l,d,u,h,f=(s+a+c)*xoe,p=lA(s+f),b=lA(a+f),m=lA(c+f),g=(p+b+m)*Ta,v=p-g,_=b-g,y=m-g,C=s-v,R=a-_,w=c-y,A,S,x,F,V,O;C>=R?R>=w?(A=1,S=0,x=0,F=1,V=1,O=0):C>=w?(A=1,S=0,x=0,F=1,V=0,O=1):(A=0,S=0,x=1,F=1,V=0,O=1):R<w?(A=0,S=0,x=1,F=0,V=1,O=1):C<w?(A=0,S=1,x=0,F=0,V=1,O=1):(A=0,S=1,x=0,F=1,V=1,O=0);let K=C-A+Ta,ne=R-S+Ta,G=w-x+Ta,$=C-F+2*Ta,U=R-V+2*Ta,Z=w-O+2*Ta,me=C-1+3*Ta,ke=R-1+3*Ta,$e=w-1+3*Ta,vt=p&255,Y=b&255,Ae=m&255,Ge=.6-C*C-R*R-w*w;if(Ge<0)l=0;else{let B=vt+e[Y+e[Ae]];Ge*=Ge,l=Ge*Ge*(i[B]*C+t[B]*R+r[B]*w)}let N=.6-K*K-ne*ne-G*G;if(N<0)d=0;else{let B=vt+A+e[Y+S+e[Ae+x]];N*=N,d=N*N*(i[B]*K+t[B]*ne+r[B]*G)}let Se=.6-$*$-U*U-Z*Z;if(Se<0)u=0;else{let B=vt+F+e[Y+V+e[Ae+O]];Se*=Se,u=Se*Se*(i[B]*$+t[B]*U+r[B]*Z)}let Oe=.6-me*me-ke*ke-$e*$e;if(Oe<0)h=0;else{let B=vt+1+e[Y+1+e[Ae+1]];Oe*=Oe,h=Oe*Oe*(i[B]*me+t[B]*ke+r[B]*$e)}return 32*(l+d+u+h)}}function woe(n){let i=new Uint8Array(512);for(let t=0;t<512/2;t++)i[t]=t;for(let t=0;t<512/2-1;t++){let r=t+~~(n()*(256-t)),o=i[t];i[t]=i[r],i[r]=o}for(let t=256;t<512;t++)i[t]=i[t-256];return i}var Moe=["canvas"],Soe=["light"],Roe=["instancedMesh"],Toe=()=>[0,0,30],Coe=()=>[0,0,0],Eoe=()=>["#808080"],Doe=n=>[void 0,void 0,n],Aoe=(n,e,i)=>[n,e,i],sV=()=>["#9C1E15"],Ioe=n=>[0,0,n],Poe=(n,e)=>[n,e],aV=(()=>{let e=class e{constructor(){this.SIZE=1.5,this.NX=20,this.NY=20,this.PADDING=1,this.SIZEP=this.SIZE+this.PADDING,this.W=this.NX*this.SIZEP-this.PADDING,this.H=this.NY*this.SIZEP-this.PADDING,this.NUM_INSTANCES=this.NX*this.NY,this.dummy=new Rt,this.simplexNoise=oV(),this.pointerPN={x:0,y:0}}ngOnInit(){this.light?.shadow&&(this.light.shadow.mapSize.width=1024,this.light.shadow.mapSize.height=1024)}onRender(){this.updateLightPosition(),this.updateInstanceMatrix()}updateLightPosition(){let t=this.light?.position;t&&(t.x=this.pointerPN.x*this.W,t.y=this.pointerPN.y*this.H)}updateInstanceMatrix(){if(!this.instancedMesh||!this.instancedMesh.objRef)return;let t=-this.W/2+this.PADDING,r=-this.H/2+this.PADDING,o=Date.now()*1e-4,s=this.pointerPN.x*.1,a=this.pointerPN.y*.1,c=.005,l,d,u,h,f,p;for(let b=0;b<this.NX;b++)for(let m=0;m<this.NY;m++)l=t+b*this.SIZEP,d=r+m*this.SIZEP,u=l*c+s,h=d*c+a,f=this.simplexNoise(u,h,o)*Math.PI,p=this.simplexNoise(h,u,o)*Math.PI,this.dummy.position.set(l,d,-10),this.dummy.rotation.set(f,p,0),this.dummy.updateMatrix(),this.instancedMesh?.objRef?.setMatrixAt(b*this.NY+m,this.dummy.matrix);this.instancedMesh.objRef.instanceMatrix.needsUpdate=!0}onMouseMove(t){if(!this.canvas||!this.canvas.hostElement.nativeElement)return;let r=this.canvas.hostElement.nativeElement;this.pointerPN.x=(t.clientX-r.offsetLeft+window.scrollX)/r.clientWidth*2-1,this.pointerPN.y=-((t.clientY-r.offsetTop+window.scrollY)/r.clientHeight)*2+1}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-instanced-mesh-example"]],viewQuery:function(r,o){if(r&1&&(Vt(Moe,5),Vt(Soe,5),Vt(Roe,5)),r&2){let s;nt(s=rt())&&(o.canvas=s.first),nt(s=rt())&&(o.light=s.first),nt(s=rt())&&(o.instancedMesh=s.first)}},hostBindings:function(r,o){r&1&&Fe("mousemove",function(a){return o.onMouseMove(a)},!1,$u)},decls:15,vars:34,consts:[["canvas",""],["light",""],["instancedMesh",""],[3,"onRender","shadow"],[3,"position","lookAt"],[3,"intensity","color"],[3,"castShadow","intensity","decay"],[3,"args","count","castShadow","receiveShadow"],[3,"args"],[3,"color"],[3,"position","receiveShadow"]],template:function(r,o){if(r&1){let s=Gt();H(0,"th-canvas",3,0),Fe("onRender",function(){return ct(s),lt(o.onRender())}),H(2,"th-scene")(3,"th-perspectiveCamera",4),he(4,"th-orbitControls"),ie(),he(5,"th-ambientLight",5)(6,"th-pointLight",6,1),H(8,"th-instancedMesh",7,2),he(10,"th-boxGeometry",8)(11,"th-meshPhongMaterial",9),ie(),H(12,"th-mesh",10),he(13,"th-planeGeometry",8)(14,"th-meshPhongMaterial",9),ie()()()}r&2&&(P("shadow",!0),j(3),P("position",te(18,Toe))("lookAt",te(19,Coe)),j(2),P("intensity",3)("color",te(20,Eoe)),j(),P("castShadow",!0)("intensity",3)("decay",0),j(2),P("args",gt(21,Doe,o.NUM_INSTANCES))("count",o.NUM_INSTANCES)("castShadow",!0)("receiveShadow",!0),j(2),P("args",Hs(23,Aoe,o.SIZE,o.SIZE,o.SIZE)),j(),P("color",te(27,sV)),j(),P("position",gt(28,Ioe,-10-o.SIZE))("receiveShadow",!0),j(),P("args",Hn(30,Poe,o.W*2,o.H*2)),j(),P("color",te(33,sV)))},dependencies:[Dn,Wt,Ai,cr,DU,Ri,jt,so,Yd,Wo,Ct],encapsulation:2,changeDetection:0});let n=e;return n})();var koe=()=>[2,2,2],Foe=()=>[1,1,1],joe=()=>({color:"purple"}),Ooe=n=>[n,0,0],Noe=()=>[2,0,0],Loe=()=>[75,2,.1,1e3],Boe=()=>[1,1,5],Uoe=(()=>{let e=class e{constructor(){this.selected=!1,this.rotation=[0,0,0],this.position=[0,0,0]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-box"]],inputs:{rotation:"rotation",position:"position"},decls:3,vars:7,consts:[[3,"onClick","rotation","position","scale"],[3,"args"]],template:function(r,o){r&1&&(H(0,"th-mesh",0),Fe("onClick",function(){return o.selected=!o.selected}),he(1,"th-boxGeometry")(2,"th-meshBasicMaterial",1),ie()),r&2&&(P("rotation",o.rotation)("position",o.position)("scale",o.selected?te(4,koe):te(5,Foe)),j(2),P("args",te(6,joe)))},dependencies:[Ri,pa,Yd,qo],encapsulation:2,changeDetection:0});let n=e;return n})(),cV=(()=>{let e=class e{constructor(){this.rotation=[0,0,0]}onBeforeRender(){this.rotation=[0,this.rotation[2]+.01,this.rotation[2]+.01]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-introductory-example"]],decls:6,vars:11,consts:[[3,"onRender"],[3,"position","rotation"],[3,"args","position"]],template:function(r,o){r&1&&(H(0,"th-canvas",0),Fe("onRender",function(){return o.onBeforeRender()}),H(1,"th-scene"),he(2,"app-box",1)(3,"app-box",1)(4,"th-ambientLight")(5,"th-perspectiveCamera",2),ie()()),r&2&&(j(2),P("position",gt(6,Ooe,-2))("rotation",o.rotation),j(),P("position",te(8,Noe))("rotation",o.rotation),j(2),P("args",te(9,Loe))("position",te(10,Boe)))},dependencies:[Wt,Ai,jt,Ct,Uoe],encapsulation:2,changeDetection:0});let n=e;return n})();var Voe=()=>[0,1,0],zoe=()=>[100,100,100],Hoe=n=>[0,0,n],Goe=()=>[10,10],lV=()=>[10,10,10],Woe=()=>[45,2,.1,100],$oe=()=>[0,0,0],dV=(()=>{let e=class e{constructor(){this.assetPath1=`${sn}DamagedHelmet.glb`,this.assetPath2=`${sn}BoomBox.glb`,this.rotation=[0,0,0]}onBeforeRender(){this.rotation=[0,this.rotation[1]+.01,0]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-loader-example"]],decls:8,vars:24,consts:[[3,"onRender"],[3,"thStats"],[3,"intensity"],["loadGLTF","",3,"url","rotation","position"],["loadGLTF","",3,"url","scale","rotation","position"],[3,"args"],[3,"position","decay"],[3,"args","position","lookAt"]],template:function(r,o){r&1&&(H(0,"th-canvas",0),Fe("onRender",function(){return o.onBeforeRender()}),H(1,"th-scene",1),he(2,"th-ambientLight",2),H(3,"th-object3D",3),he(4,"th-object3D",4),ie(),he(5,"th-gridHelper",5)(6,"th-pointLight",6)(7,"th-perspectiveCamera",7),ie()()),r&2&&(j(),P("thStats",!0),j(),P("intensity",3),j(),P("url",o.assetPath1)("rotation",o.rotation)("position",te(15,Voe)),j(),P("url",o.assetPath2)("scale",te(16,zoe))("rotation",o.rotation)("position",gt(17,Hoe,-3)),j(),P("args",te(19,Goe)),j(),P("position",te(20,lV))("decay",0),j(),P("args",te(21,Woe))("position",te(22,lV))("lookAt",te(23,$oe)))},dependencies:[Wt,pe,Ar,Ai,cr,jt,Ct,$n,En],encapsulation:2,changeDetection:0});let n=e;return n})();var qoe=["slider"],Xoe=()=>[35,2,.1,100],Yoe=()=>[0,0,6],Zoe=(n,e)=>({x:0,y:0,width:n,height:e}),Qoe=()=>["#ffffff","#444444",1],Koe=n=>[n,2,2],Joe=()=>[1,3],ese=(n,e,i)=>({x:n,y:0,width:e,height:i}),uV=(()=>{let e=class e{constructor(){this.sliderPos=0,this.controlsEnabled=!0,this.colorLeft=new _e(12375183),this.colorRight=new _e(9419988)}ngOnInit(){!this.slider||!this.canvas||!this.canvas.rendererCanvas||(this.slider.nativeElement.style.touchAction="none",this.sliderPos=(this.canvas.rendererCanvas.clientWidth||0)/2)}onPointerMove(t){if(this.controlsEnabled||!this.canvas||!this.canvas.rendererCanvas||!this.slider||t.isPrimary===!1)return;let o=this.canvas.rendererCanvas.getBoundingClientRect();this.sliderPos=Math.max(o.left,Math.min(o.right,t.pageX))-o.left,this.slider.nativeElement.style.left=this.sliderPos-this.slider.nativeElement.offsetWidth/2+"px"}onPointerUp(){this.controlsEnabled=!0}onSliderPointerDown(t){t.isPrimary!==!1&&(this.controlsEnabled=!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-multi-scene-example"]],viewQuery:function(r,o){if(r&1&&(Vt(qoe,7),Vt(Ct,7)),r&2){let s;nt(s=rt())&&(o.slider=s.first),nt(s=rt())&&(o.canvas=s.first)}},hostBindings:function(r,o){r&1&&Fe("pointermove",function(a){return o.onPointerMove(a)},!1,LS)("pointerup",function(){return o.onPointerUp()},!1,LS)},decls:20,vars:33,consts:[["slider",""],["thecanvas",""],["cam",""],["light",""],["geo",""],[1,"slider",3,"pointerdown"],[3,"disableDefaultView"],[3,"args","position"],[3,"scissor","scissorTest","clearColor","camera"],[3,"background"],[3,"args","position","intensity"],[3,"args"],[3,"objRef"],[3,"geometry"],[3,"wireframe"]],template:function(r,o){if(r&1){let s=Gt();H(0,"div",5,0),Fe("pointerdown",function(c){return ct(s),lt(o.onSliderPointerDown(c))}),ie(),H(2,"th-canvas",6,1)(4,"th-perspectiveCamera",7,2),he(6,"th-orbitControls"),ie(),H(7,"th-view",8)(8,"th-scene",9),he(9,"th-hemisphereLight",10,3),H(11,"th-mesh"),he(12,"th-meshStandardMaterial")(13,"th-icosahedronGeometry",11,4),ie()()(),H(15,"th-view",8)(16,"th-scene",9),he(17,"th-hemisphereLight",12),H(18,"th-mesh",13),he(19,"th-meshStandardMaterial",14),ie()()()()}if(r&2){let s=Tt(3),a=Tt(5),c=Tt(10),l=Tt(14);j(2),P("disableDefaultView",!0),j(2),P("args",te(20,Xoe))("position",te(21,Yoe)),j(3),P("scissor",Hn(22,Zoe,o.sliderPos,(s.rendererCanvas==null?null:s.rendererCanvas.height)||0))("scissorTest",!0)("clearColor",o.colorLeft)("camera",a),j(),P("background",o.colorLeft),j(),P("args",te(25,Qoe))("position",gt(26,Koe,-2))("intensity",3),j(4),P("args",te(28,Joe)),j(2),P("scissor",Hs(29,ese,o.sliderPos,(s.rendererCanvas==null?null:s.rendererCanvas.width)||0,(s.rendererCanvas==null?null:s.rendererCanvas.height)||0))("scissorTest",!0)("clearColor",o.colorRight)("camera",a),j(),P("background",o.colorRight),j(),P("objRef",c.objRef==null?null:c.objRef.clone()),j(),P("geometry",l.objRef),j(),P("wireframe",!0)}},dependencies:[Dn,Wt,cf,Ri,jt,Rg,EU,Ct,Ir],styles:[".container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.slider[_ngcontent-%COMP%]{position:absolute;cursor:ew-resize;width:40px;height:40px;background-color:#f32196;opacity:.7;border-radius:50%;top:calc(50% - 20px);left:calc(50% - 20px)}"],changeDetection:0});let n=e;return n})();var Wx={name:"RGBShiftShader",uniforms:{tDiffuse:{value:null},amount:{value:.005},angle:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float amount;
		uniform float angle;

		varying vec2 vUv;

		void main() {

			vec2 offset = amount * vec2( cos(angle), sin(angle));
			vec4 cr = texture2D(tDiffuse, vUv + offset);
			vec4 cga = texture2D(tDiffuse, vUv);
			vec4 cb = texture2D(tDiffuse, vUv - offset);
			gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);

		}`};var tse=["thecanvas"],ise=(n,e)=>({x:0,y:0,width:n,height:e}),nse=()=>[0,0,1],rse=()=>["#ffffff"],ose=()=>[0,0,0],$x=n=>[n,0,0],sse=()=>[200,32,16],ase=()=>["#fac400"],cse=()=>["#f83f0d"],lse=()=>[400,0,0],uA=(n,e,i,t)=>({x:n,y:e,width:i,height:t}),dse=n=>[n],use=()=>({value:.055}),hse=n=>({amount:n}),fse=()=>[.35,.5,2048,!0],hV=(()=>{let e=class e{constructor(){this.Math=Math,this.RGBShiftShader=Wx,this.DotScreenShader=wx,this.canvasWidth=128,this.canvasHeight=128,this.mouseX=0,this.mouseY=0,this.view1={left:0,bottom:0,width:.5,height:1,background:new _e(.5,.5,.7),eye:[0,300,1800],up:[0,1,0],fov:30,updateCamera:(t,r)=>{this.updateSize(),t.position.x+=this.mouseX*.05,t.position.x=Math.max(Math.min(t.position.x,2e3),-2e3),t.lookAt(r.position),t.updateProjectionMatrix()}},this.view2={left:.5,bottom:0,width:.5,height:.5,background:new _e(.7,.5,.5),eye:[0,1800,0],up:[0,0,1],fov:45,updateCamera:(t,r)=>{this.updateSize(),t.position.x-=this.mouseX*.05,t.position.x=Math.max(Math.min(t.position.x,2e3),-2e3),t.lookAt(t.position.clone().setY(0)),t.updateProjectionMatrix()}},this.view3={left:.5,bottom:.5,width:.5,height:.5,background:new _e(.5,.7,.7),eye:[1400,800,1400],up:[0,1,0],fov:60,updateCamera:(t,r)=>{this.updateSize(),t.position.y-=this.mouseX*.05,t.position.y=Math.max(Math.min(t.position.y,1600),-1600),t.lookAt(r.position),t.updateProjectionMatrix()}}}ngOnInit(){!this.canvas||!this.canvas.rendererCanvas||(this.shadowTexture=new Nd(this.canvas.rendererCanvas))}updateSize(){!this.canvas||!this.canvas.rendererCanvas||(this.canvasWidth=this.canvas.rendererCanvas.width,this.canvasHeight=this.canvas.rendererCanvas.height)}onMouseMove(t){if(!this.canvas||!this.canvas.rendererCanvas)return;let r=this.canvas.rendererCanvas.getBoundingClientRect();this.mouseX=t.clientX-r.left-r.width/2,this.mouseY=t.clientY-r.right-r.height/2}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-multi-view-postprocessing-example"]],viewQuery:function(r,o){if(r&1&&Vt(tse,7),r&2){let s;nt(s=rt())&&(o.canvas=s.first)}},hostBindings:function(r,o){r&1&&Fe("mousemove",function(a){return o.onMouseMove(a)},!1,$u)},decls:32,vars:96,consts:[["thecanvas",""],["scene",""],["geo",""],["mat",""],["thview1",""],["camera1",""],["thview2",""],["camera2",""],["thview3",""],["camera3",""],[3,"disableDefaultView","viewPort"],[3,"position","args","intensity"],[3,"position","rotation"],[3,"args"],[3,"flatShading","shininess","specular","color"],[3,"position","rotation","geometry","material"],[3,"onRender","scene","viewPort","scissor","scissorTest"],[3,"position","up","fov","aspect","near","far"],[3,"clearColor"],[3,"strength"],[3,"args","uniforms"],[3,"onRender","scene","viewPort","scissor","scissorTest","clearColor"]],template:function(r,o){if(r&1){let s=Gt();H(0,"th-canvas",10,0)(2,"th-scene",null,1),he(4,"th-directionalLight",11),H(5,"th-mesh",12),he(6,"th-sphereGeometry",13,2)(8,"th-meshPhongMaterial",14,3),ie(),he(10,"th-mesh",15)(11,"th-mesh",15),ie(),H(12,"th-view",16,4),Fe("onRender",function(){ct(s);let c=Tt(3),l=Tt(15);return lt(o.view1.updateCamera(l.objRef,c.objRef))}),he(14,"th-perspectiveCamera",17,5),H(16,"th-effectComposer"),he(17,"th-renderPass",18)(18,"th-unrealBloomPass",19)(19,"th-shaderPass",20)(20,"th-glitchPass"),ie()(),H(21,"th-view",21,6),Fe("onRender",function(){ct(s);let c=Tt(3),l=Tt(24);return lt(o.view2.updateCamera(l.objRef,c.objRef))}),he(23,"th-perspectiveCamera",17,7),H(25,"th-effectComposer"),he(26,"th-renderPass")(27,"th-filmPass",13),ie()(),H(28,"th-view",21,8),Fe("onRender",function(){ct(s);let c=Tt(3),l=Tt(31);return lt(o.view3.updateCamera(l.objRef,c.objRef))}),he(30,"th-perspectiveCamera",17,9),ie()()}if(r&2){let s=Tt(3),a=Tt(7),c=Tt(9),l=Tt(13),d=Tt(22),u=Tt(29);P("disableDefaultView",!0)("viewPort",Hn(57,ise,.5*o.canvasWidth,o.canvasHeight)),j(4),P("position",te(60,nse))("args",te(61,rse))("intensity",3),j(),P("position",te(62,ose))("rotation",gt(63,$x,-o.Math.PI/2)),j(),P("args",te(65,sse)),j(2),P("flatShading",!1)("shininess",30)("specular",te(66,ase))("color",te(67,cse)),j(2),P("position",gt(68,$x,-400))("rotation",gt(70,$x,-o.Math.PI/2))("geometry",a.objRef)("material",c.objRef),j(),P("position",te(72,lse))("rotation",gt(73,$x,-o.Math.PI/2))("geometry",a.objRef)("material",c.objRef),j(),P("scene",s)("viewPort",Ku(75,uA,o.view1.left*o.canvasWidth,o.view1.bottom*o.canvasHeight,o.view1.width*o.canvasWidth,o.view1.height*o.canvasHeight))("scissor",l.viewPort)("scissorTest",!0),j(2),P("position",o.view1.eye)("up",o.view1.up)("fov",o.view1.fov)("aspect",o.view1.width*o.canvasWidth/(o.view1.height*o.canvasHeight))("near",1)("far",1e4),j(3),P("clearColor",o.view1.background),j(),P("strength",.2),j(),P("args",gt(80,dse,o.RGBShiftShader))("uniforms",gt(83,hse,te(82,use))),j(2),P("scene",s)("viewPort",Ku(85,uA,o.view2.left*o.canvasWidth,o.view2.bottom*o.canvasHeight,o.view2.width*o.canvasWidth,o.view2.height*o.canvasHeight))("scissor",d.viewPort)("scissorTest",!0)("clearColor",o.view2.background),j(2),P("position",o.view2.eye)("up",o.view2.up)("fov",o.view2.fov)("aspect",o.view2.width*o.canvasWidth/(o.view2.height*o.canvasHeight))("near",1)("far",1e4),j(4),P("args",te(90,fse)),j(),P("scene",s)("viewPort",Ku(91,uA,o.view3.left*o.canvasWidth,o.view3.bottom*o.canvasHeight,o.view3.width*o.canvasWidth,o.view3.height*o.canvasHeight))("scissor",u.viewPort)("scissorTest",!0)("clearColor",o.view3.background),j(2),P("position",o.view3.eye)("up",o.view3.up)("fov",o.view3.fov)("aspect",o.view3.width*o.canvasWidth/(o.view3.height*o.canvasHeight))("near",1)("far",1e4)}},dependencies:[Wt,ar,Ri,jt,so,Cl,xa,xU,CU,Ff,Sg,Ux,Ct,Ir],encapsulation:2,changeDetection:0});let n=e;return n})();var xV=(()=>{let e=class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}};e.\u0275fac=function(r){return new(r||e)(k(Us),k(Qe))},e.\u0275dir=He({type:e});let n=e;return n})(),Vg=(()=>{let e=class e extends xV{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275dir=He({type:e,features:[X]});let n=e;return n})(),Nf=new Ce(""),mse={provide:Nf,useExisting:ge(()=>gA),multi:!0},gA=(()=>{let e=class e extends Vg{writeValue(t){this.setProperty("checked",t)}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275dir=He({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,o){r&1&&Fe("change",function(a){return o.onChange(a.target.checked)})("blur",function(){return o.onTouched()})},features:[oe([mse]),X]});let n=e;return n})(),pse={provide:Nf,useExisting:ge(()=>Zx),multi:!0};function gse(){let n=Gs()?Gs().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var bse=new Ce(""),Zx=(()=>{let e=class e extends xV{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!gse())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}};e.\u0275fac=function(r){return new(r||e)(k(Us),k(Qe),k(bse,8))},e.\u0275dir=He({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&Fe("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[oe([pse]),X]});let n=e;return n})();var _se=new Ce(""),vse=new Ce("");function wV(n){return n!=null}function MV(n){return Vc(n)?Fi(n):n}function SV(n){let e={};return n.forEach(i=>{e=i!=null?xe(xe({},e),i):e}),Object.keys(e).length===0?null:e}function RV(n,e){return e.map(i=>i(n))}function yse(n){return!n.validate}function TV(n){return n.map(e=>yse(e)?e:i=>e.validate(i))}function xse(n){if(!n)return null;let e=n.filter(wV);return e.length==0?null:function(i){return SV(RV(i,e))}}function CV(n){return n!=null?xse(TV(n)):null}function wse(n){if(!n)return null;let e=n.filter(wV);return e.length==0?null:function(i){let t=RV(i,e).map(MV);return Ll(t).pipe(st(SV))}}function EV(n){return n!=null?wse(TV(n)):null}function fV(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Mse(n){return n._rawValidators}function Sse(n){return n._rawAsyncValidators}function hA(n){return n?Array.isArray(n)?n:[n]:[]}function Xx(n,e){return Array.isArray(n)?n.includes(e):n===e}function mV(n,e){let i=hA(e);return hA(n).forEach(r=>{Xx(i,r)||i.push(r)}),i}function pV(n,e){return hA(e).filter(i=>!Xx(n,i))}var Yx=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=CV(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=EV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,i){return this.control?this.control.hasError(e,i):!1}getError(e,i){return this.control?this.control.getError(e,i):null}},fA=class extends Yx{get formDirective(){return null}get path(){return null}},Ug=class extends Yx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},mA=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},Rse={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},SGe=pi(xe({},Rse),{"[class.ng-submitted]":"isSubmitted"}),Qx=(()=>{let e=class e extends mA{constructor(t){super(t)}};e.\u0275fac=function(r){return new(r||e)(k(Ug,2))},e.\u0275dir=He({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&Bt("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[X]});let n=e;return n})();var Lg="VALID",qx="INVALID",Of="PENDING",Bg="DISABLED";function Tse(n){return(Kx(n)?n.validators:n)||null}function Cse(n){return Array.isArray(n)?CV(n):n||null}function Ese(n,e){return(Kx(e)?e.asyncValidators:n)||null}function Dse(n){return Array.isArray(n)?EV(n):n||null}function Kx(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var pA=class{constructor(e,i){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(i)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Lg}get invalid(){return this.status===qx}get pending(){return this.status==Of}get disabled(){return this.status===Bg}get enabled(){return this.status!==Bg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(mV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(mV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(pV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(pV(e,this._rawAsyncValidators))}hasValidator(e){return Xx(this._rawValidators,e)}hasAsyncValidator(e){return Xx(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(i=>{i.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Of,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=Bg,this.errors=null,this._forEachChild(t=>{t.disable(pi(xe({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pi(xe({},e),{skipPristineCheck:i})),this._onDisabledChange.forEach(t=>t(!0))}enable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=Lg,this._forEachChild(t=>{t.enable(pi(xe({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pi(xe({},e),{skipPristineCheck:i})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Lg||this.status===Of)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bg:Lg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Of,this._hasOwnPendingAsyncValidator=!0;let i=MV(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,i={}){this.errors=e,this._updateControlsErrors(i.emitEvent!==!1)}get(e){let i=e;return i==null||(Array.isArray(i)||(i=i.split(".")),i.length===0)?null:i.reduce((t,r)=>t&&t._find(r),this)}getError(e,i){let t=i?this.get(i):this;return t&&t.errors?t.errors[e]:null}hasError(e,i){return!!this.getError(e,i)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new et,this.statusChanges=new et}_calculateStatus(){return this._allControlsDisabled()?Bg:this.errors?qx:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Of)?Of:this._anyControlsHaveStatus(qx)?qx:Lg}_anyControlsHaveStatus(e){return this._anyControls(i=>i.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Kx(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let i=this._parent&&this._parent.dirty;return!e&&!!i&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Cse(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Dse(this._rawAsyncValidators)}};var DV=new Ce("CallSetDisabledState",{providedIn:"root",factory:()=>bA}),bA="always";function Ase(n,e){return[...e.path,n]}function Ise(n,e,i=bA){kse(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||i==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Fse(n,e),Ose(n,e),jse(n,e),Pse(n,e)}function gV(n,e){n.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(e)})}function Pse(n,e){if(e.valueAccessor.setDisabledState){let i=t=>{e.valueAccessor.setDisabledState(t)};n.registerOnDisabledChange(i),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(i)})}}function kse(n,e){let i=Mse(n);e.validator!==null?n.setValidators(fV(i,e.validator)):typeof i=="function"&&n.setValidators([i]);let t=Sse(n);e.asyncValidator!==null?n.setAsyncValidators(fV(t,e.asyncValidator)):typeof t=="function"&&n.setAsyncValidators([t]);let r=()=>n.updateValueAndValidity();gV(e._rawValidators,r),gV(e._rawAsyncValidators,r)}function Fse(n,e){e.valueAccessor.registerOnChange(i=>{n._pendingValue=i,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&AV(n,e)})}function jse(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&AV(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function AV(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Ose(n,e){let i=(t,r)=>{e.valueAccessor.writeValue(t),r&&e.viewToModelUpdate(t)};n.registerOnChange(i),e._registerOnDestroy(()=>{n._unregisterOnChange(i)})}function Nse(n,e){if(!n.hasOwnProperty("model"))return!1;let i=n.model;return i.isFirstChange()?!0:!Object.is(e,i.currentValue)}function Lse(n){return Object.getPrototypeOf(n.constructor)===Vg}function Bse(n,e){if(!e)return null;Array.isArray(e);let i,t,r;return e.forEach(o=>{o.constructor===Zx?i=o:Lse(o)?t=o:r=o}),r||t||i||null}function bV(n,e){let i=n.indexOf(e);i>-1&&n.splice(i,1)}function _V(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Use=class extends pA{constructor(e=null,i,t){super(Tse(i),Ese(t,i)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Kx(i)&&(i.nonNullable||i.initialValueIsDefault)&&(_V(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,i={}){this.value=this._pendingValue=e,this._onChange.length&&i.emitModelToViewChange!==!1&&this._onChange.forEach(t=>t(this.value,i.emitViewToModelChange!==!1)),this.updateValueAndValidity(i)}patchValue(e,i={}){this.setValue(e,i)}reset(e=this.defaultValue,i={}){this._applyFormState(e),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){bV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){bV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){_V(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Vse={provide:Ug,useExisting:ge(()=>zg)},vV=Promise.resolve(),zg=(()=>{let e=class e extends Ug{constructor(t,r,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new Use,this._registered=!1,this.name="",this.update=new et,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=Bse(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Nse(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ise(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){vV.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,o=r!==0&&Si(r);vV.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Ase(t,this._parent):[t]}};e.\u0275fac=function(r){return new(r||e)(k(fA,9),k(_se,10),k(vse,10),k(Nf,10),k(Hi,8),k(DV,8))},e.\u0275dir=He({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[at.None,"disabled","isDisabled"],model:[at.None,"ngModel","model"],options:[at.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[oe([Vse]),X,Un]});let n=e;return n})();var zse={provide:Nf,useExisting:ge(()=>_A),multi:!0},_A=(()=>{let e=class e extends Vg{writeValue(t){this.setProperty("value",parseFloat(t))}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275dir=He({type:e,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,o){r&1&&Fe("change",function(a){return o.onChange(a.target.value)})("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[oe([zse]),X]});let n=e;return n})();var Hse={provide:Nf,useExisting:ge(()=>Jx),multi:!0};function IV(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Gse(n){return n.split(":")[0]}var Jx=(()=>{let e=class e extends Vg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),o=IV(r,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=Gse(t);return this._optionMap.has(r)?this._optionMap.get(r):t}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275dir=He({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,o){r&1&&Fe("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[oe([Hse]),X]});let n=e;return n})(),PV=(()=>{let e=class e{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(IV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(k(Qe),k(Us),k(Jx,9))},e.\u0275dir=He({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})(),Wse={provide:Nf,useExisting:ge(()=>kV),multi:!0};function yV(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function $se(n){return n.split(":")[0]}var kV=(()=>{let e=class e extends Vg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let o=t.map(s=>this._getOptionId(s));r=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else r=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let o=[],s=r.selectedOptions;if(s!==void 0){let a=s;for(let c=0;c<a.length;c++){let l=a[c],d=this._getOptionValue(l.value);o.push(d)}}else{let a=r.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let d=this._getOptionValue(l.value);o.push(d)}}}this.value=o,t(o)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=$se(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275dir=He({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,o){r&1&&Fe("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[oe([Wse]),X]});let n=e;return n})(),FV=(()=>{let e=class e{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(yV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(yV(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(k(Qe),k(Us),k(kV,9))},e.\u0275dir=He({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})();var qse=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({});let n=e;return n})();var jV=(()=>{let e=class e{static withConfig(t){return{ngModule:e,providers:[{provide:DV,useValue:t.callSetDisabledState??bA}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({imports:[qse]});let n=e;return n})();var Xse=()=>[2,2,2],Yse=()=>[1,1,1],Zse=()=>[10,10],NV=()=>[10,10,10],Qse=()=>[45,2,.1,100],Kse=()=>[0,0,0],Jse=n=>[n],eae=(n,e,i)=>[n,e,i];function tae(n,e){n&1&&he(0,"th-orbitControls")}function iae(n,e){n&1&&he(0,"th-mapControls")}function nae(n,e){n&1&&he(0,"th-arcballControls")}function rae(n,e){if(n&1&&he(0,"th-transformControls",18),n&2){Ut();let i=Tt(26);P("object",i.objRef)}}function oae(n,e){if(n&1&&he(0,"th-dragControls",12),n&2){Ut();let i=Tt(22),t=Tt(26),r=Tt(30);P("args",Hs(3,eae,gt(1,Jse,t.objRef),r.objRef,i.hostElement.nativeElement))}}function sae(n,e){n&1&&he(0,"th-flyControls")}function aae(n,e){n&1&&he(0,"th-trackballControls")}function cae(n,e){n&1&&he(0,"th-firstPersonControls")}var LV=(()=>{let e=class e{constructor(){this.controlType="orbit",this.renderOnDemand=!0,this.selected=!1,this.glbPath=`${sn}DamagedHelmet.glb`}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-on-demand-example"]],decls:39,vars:29,consts:[["canvas",""],["model",""],["camera",""],[1,"control-panel"],["id","ondemand","type","checkbox",3,"ngModelChange","ngModel"],["for","ondemand"],[1,"form-control",3,"ngModelChange","ngModel"],[1,"works-on-demand"],[1,"needs-loop"],[3,"thStats","renderOnDemand"],[3,"intensity"],["loadGLTF","",3,"onClick","url","scale"],[3,"args"],[3,"position","decay"],[3,"ngSwitch","args","position","lookAt"],[4,"ngSwitchCase"],[3,"object",4,"ngSwitchCase"],[3,"args",4,"ngSwitchCase"],[3,"object"]],template:function(r,o){if(r&1){let s=Gt();H(0,"div",3)(1,"input",4),Qu("ngModelChange",function(c){return ct(s),Mm(o.renderOnDemand,c)||(o.renderOnDemand=c),lt(c)}),ie(),H(2,"label",5),Et(3,"Render On-Demand"),ie(),H(4,"select",6),Qu("ngModelChange",function(c){return ct(s),Mm(o.controlType,c)||(o.controlType=c),lt(c)}),H(5,"option",7),Et(6,"orbit"),ie(),H(7,"option",7),Et(8,"map"),ie(),H(9,"option",7),Et(10,"arcball"),ie(),H(11,"option",7),Et(12,"transform"),ie(),H(13,"option",7),Et(14,"drag"),ie(),H(15,"option",8),Et(16,"fly"),ie(),H(17,"option",8),Et(18,"trackball"),ie(),H(19,"option",8),Et(20,"firstpersion"),ie()()(),H(21,"th-canvas",9,0)(23,"th-scene"),he(24,"th-ambientLight",10),H(25,"th-object3D",11,1),Fe("onClick",function(){return ct(s),lt(o.selected=!o.selected)}),ie(),he(27,"th-gridHelper",12)(28,"th-pointLight",13),H(29,"th-perspectiveCamera",14,2),Nt(31,tae,1,0,"th-orbitControls",15)(32,iae,1,0,"th-mapControls",15)(33,nae,1,0,"th-arcballControls",15)(34,rae,1,1,"th-transformControls",16)(35,oae,1,7,"th-dragControls",17)(36,sae,1,0,"th-flyControls",15)(37,aae,1,0,"th-trackballControls",15)(38,cae,1,0,"th-firstPersonControls",15),ie()()()}r&2&&(j(),Zu("ngModel",o.renderOnDemand),j(3),Zu("ngModel",o.controlType),j(17),P("thStats",!0)("renderOnDemand",o.renderOnDemand),j(3),P("intensity",3),j(),P("url",o.glbPath)("scale",o.selected?te(22,Xse):te(23,Yse)),j(2),P("args",te(24,Zse)),j(),P("position",te(25,NV))("decay",0),j(),P("ngSwitch",o.controlType)("args",te(26,Qse))("position",te(27,NV))("lookAt",te(28,Kse)),j(2),P("ngSwitchCase","orbit"),j(),P("ngSwitchCase","map"),j(),P("ngSwitchCase","arcball"),j(),P("ngSwitchCase","transform"),j(),P("ngSwitchCase","drag"),j(),P("ngSwitchCase","fly"),j(),P("ngSwitchCase","trackball"),j(),P("ngSwitchCase","firstpersion"))},dependencies:[xR,nO,QU,uU,vU,SU,RU,Dn,IU,jx,Wt,pe,Ar,Ai,cr,jt,Ct,$n,qo,_l,En,PV,FV,gA,Jx,Qx,zg],styles:[".needs-loop[_ngcontent-%COMP%]{color:red}.works-on-demand[_ngcontent-%COMP%]{color:green}.control-panel[_ngcontent-%COMP%]{display:flex;gap:1em;margin:1em}"],changeDetection:0});let n=e;return n})();var Dl=class n{constructor(e,i,t,r,o="div"){this.parent=e,this.object=i,this.property=t,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),n.nextNameID=n.nextNameID||0,this.$name.id=`lil-gui-name-${++n.nextNameID}`,this.$widget=document.createElement(o),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",s=>s.stopPropagation()),this.domElement.addEventListener("keyup",s=>s.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(t)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled?this:(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e),this)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){let i=this.parent.add(this.object,this.property,e);return i.name(this._name),this.destroy(),i}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);let e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}},vA=class extends Dl{constructor(e,i,t){super(e,i,t,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}};function yA(n){let e,i;return(e=n.match(/(#|0x)?([a-f0-9]{6})/i))?i=e[2]:(e=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?i=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(i=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),i?"#"+i:!1}var lae={isPrimitive:!0,match:n=>typeof n=="string",fromHexString:yA,toHexString:yA},Gg={isPrimitive:!0,match:n=>typeof n=="number",fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},dae={isPrimitive:!1,match:n=>Array.isArray(n),fromHexString(n,e,i=1){let t=Gg.fromHexString(n);e[0]=(t>>16&255)/255*i,e[1]=(t>>8&255)/255*i,e[2]=(t&255)/255*i},toHexString([n,e,i],t=1){t=255/t;let r=n*t<<16^e*t<<8^i*t<<0;return Gg.toHexString(r)}},uae={isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,e,i=1){let t=Gg.fromHexString(n);e.r=(t>>16&255)/255*i,e.g=(t>>8&255)/255*i,e.b=(t&255)/255*i},toHexString({r:n,g:e,b:i},t=1){t=255/t;let r=n*t<<16^e*t<<8^i*t<<0;return Gg.toHexString(r)}},hae=[lae,Gg,dae,uae];function fae(n){return hae.find(e=>e.match(n))}var xA=class extends Dl{constructor(e,i,t,r){super(e,i,t,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=fae(this.initialValue),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{let o=yA(this.$text.value);o&&this._setValueFromHexString(o)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){let i=this._format.fromHexString(e);this.setValue(i)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}},Hg=class extends Dl{constructor(e,i,t){super(e,i,t,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",r=>{r.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}},wA=class extends Dl{constructor(e,i,t,r,o,s){super(e,i,t,"number"),this._initInput(),this.min(r),this.max(o);let a=s!==void 0;this.step(a?s:this._getImplicitStep(),a),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,i=!0){return this._step=e,this._stepExplicit=i,this}updateDisplay(){let e=this.getValue();if(this._hasSlider){let i=(e-this._min)/(this._max-this._min);i=Math.max(0,Math.min(i,1)),this.$fill.style.width=i*100+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;let i=()=>{let v=parseFloat(this.$input.value);isNaN(v)||(this._stepExplicit&&(v=this._snap(v)),this.setValue(this._clamp(v)))},t=v=>{let _=parseFloat(this.$input.value);isNaN(_)||(this._snapClampSetValue(_+v),this.$input.value=this.getValue())},r=v=>{v.key==="Enter"&&this.$input.blur(),v.code==="ArrowUp"&&(v.preventDefault(),t(this._step*this._arrowKeyMultiplier(v))),v.code==="ArrowDown"&&(v.preventDefault(),t(this._step*this._arrowKeyMultiplier(v)*-1))},o=v=>{this._inputFocused&&(v.preventDefault(),t(this._step*this._normalizeMouseWheel(v)))},s=!1,a,c,l,d,u,h=5,f=v=>{a=v.clientX,c=l=v.clientY,s=!0,d=this.getValue(),u=0,window.addEventListener("mousemove",p),window.addEventListener("mouseup",b)},p=v=>{if(s){let _=v.clientX-a,y=v.clientY-c;Math.abs(y)>h?(v.preventDefault(),this.$input.blur(),s=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(_)>h&&b()}if(!s){let _=v.clientY-l;u-=_*this._step*this._arrowKeyMultiplier(v),d+u>this._max?u=this._max-d:d+u<this._min&&(u=this._min-d),this._snapClampSetValue(d+u)}l=v.clientY},b=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",b)},m=()=>{this._inputFocused=!0},g=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",i),this.$input.addEventListener("keydown",r),this.$input.addEventListener("wheel",o,{passive:!1}),this.$input.addEventListener("mousedown",f),this.$input.addEventListener("focus",m),this.$input.addEventListener("blur",g)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");let e=(g,v,_,y,C)=>(g-v)/(_-v)*(C-y)+y,i=g=>{let v=this.$slider.getBoundingClientRect(),_=e(g,v.left,v.right,this._min,this._max);this._snapClampSetValue(_)},t=g=>{this._setDraggingStyle(!0),i(g.clientX),window.addEventListener("mousemove",r),window.addEventListener("mouseup",o)},r=g=>{i(g.clientX)},o=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",o)},s=!1,a,c,l=g=>{g.preventDefault(),this._setDraggingStyle(!0),i(g.touches[0].clientX),s=!1},d=g=>{g.touches.length>1||(this._hasScrollBar?(a=g.touches[0].clientX,c=g.touches[0].clientY,s=!0):l(g),window.addEventListener("touchmove",u,{passive:!1}),window.addEventListener("touchend",h))},u=g=>{if(s){let v=g.touches[0].clientX-a,_=g.touches[0].clientY-c;Math.abs(v)>Math.abs(_)?l(g):(window.removeEventListener("touchmove",u),window.removeEventListener("touchend",h))}else g.preventDefault(),i(g.touches[0].clientX)},h=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",u),window.removeEventListener("touchend",h)},f=this._callOnFinishChange.bind(this),p=400,b,m=g=>{if(Math.abs(g.deltaX)<Math.abs(g.deltaY)&&this._hasScrollBar)return;g.preventDefault();let _=this._normalizeMouseWheel(g)*this._step;this._snapClampSetValue(this.getValue()+_),this.$input.value=this.getValue(),clearTimeout(b),b=setTimeout(f,p)};this.$slider.addEventListener("mousedown",t),this.$slider.addEventListener("touchstart",d,{passive:!1}),this.$slider.addEventListener("wheel",m,{passive:!1})}_setDraggingStyle(e,i="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle(`lil-gui-${i}`,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:i,deltaY:t}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(i=0,t=-e.wheelDelta/120,t*=this._stepExplicit?1:10),i+-t}_arrowKeyMultiplier(e){let i=this._stepExplicit?1:10;return e.shiftKey?i*=10:e.altKey&&(i/=10),i}_snap(e){let i=Math.round(e/this._step)*this._step;return parseFloat(i.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){let e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}},MA=class extends Dl{constructor(e,i,t,r){super(e,i,t,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach(o=>{let s=document.createElement("option");s.innerHTML=o,this.$select.appendChild(s)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){let e=this.getValue(),i=this._values.indexOf(e);return this.$select.selectedIndex=i,this.$display.innerHTML=i===-1?e:this._names[i],this}},SA=class extends Dl{constructor(e,i,t){super(e,i,t,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",r=>{r.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}},mae=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  background-color: var(--background-color);
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean .widget {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "\u2195";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background-color: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background-color: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background-color: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  height: var(--title-height);
  line-height: calc(var(--title-height) - 4px);
  font-weight: 600;
  padding: 0 var(--padding);
  -webkit-tap-highlight-color: transparent;
  cursor: pointer;
  outline: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "\u25BE";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "\u25B8";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui input {
  -webkit-tap-highlight-color: transparent;
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input::-webkit-outer-spin-button,
.lil-gui input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.lil-gui input[type=number] {
  -moz-appearance: textfield;
}
.lil-gui input[type=checkbox] {
  appearance: none;
  -webkit-appearance: none;
  height: var(--checkbox-size);
  width: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "\u2713";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  -webkit-tap-highlight-color: transparent;
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  border: 1px solid var(--widget-color);
  text-align: center;
  line-height: calc(var(--widget-height) - 4px);
}
@media (hover: hover) {
  .lil-gui button:hover {
    background: var(--hover-color);
    border-color: var(--hover-color);
  }
  .lil-gui button:focus {
    border-color: var(--focus-color);
  }
}
.lil-gui button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function pae(n){let e=document.createElement("style");e.innerHTML=n;let i=document.querySelector("head link[rel=stylesheet], head style");i?document.head.insertBefore(e,i):document.head.appendChild(e)}var BV=!1,RA=class n{constructor({parent:e,autoPlace:i=e===void 0,container:t,width:r,title:o="Controls",closeFolders:s=!1,injectStyles:a=!0,touchStyles:c=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",l=>{(l.code==="Enter"||l.code==="Space")&&(l.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(o),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),c&&this.domElement.classList.add("allow-touch-styles"),!BV&&a&&(pae(mae),BV=!0),t?t.appendChild(this.domElement):i&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this._closeFolders=s}add(e,i,t,r,o){if(Object(t)===t)return new MA(this,e,i,t);let s=e[i];switch(typeof s){case"number":return new wA(this,e,i,t,r,o);case"boolean":return new vA(this,e,i);case"string":return new SA(this,e,i);case"function":return new Hg(this,e,i)}console.error(`gui.add failed
	property:`,i,`
	object:`,e,`
	value:`,s)}addColor(e,i,t=1){return new xA(this,e,i,t)}addFolder(e){let i=new n({parent:this,title:e});return this.root._closeFolders&&i.close(),i}load(e,i=!0){return e.controllers&&this.controllers.forEach(t=>{t instanceof Hg||t._name in e.controllers&&t.load(e.controllers[t._name])}),i&&e.folders&&this.folders.forEach(t=>{t._title in e.folders&&t.load(e.folders[t._title])}),this}save(e=!0){let i={controllers:{},folders:{}};return this.controllers.forEach(t=>{if(!(t instanceof Hg)){if(t._name in i.controllers)throw new Error(`Cannot save GUI with duplicate property "${t._name}"`);i.controllers[t._name]=t.save()}}),e&&this.folders.forEach(t=>{if(t._title in i.folders)throw new Error(`Cannot save GUI with duplicate folder "${t._title}"`);i.folders[t._title]=t.save()}),i}open(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(e){this._closed!==e&&(this._closed=e,this._callOnOpenClose(this))}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{let i=this.$children.clientHeight;this.$children.style.height=i+"px",this.domElement.classList.add("transition");let t=o=>{o.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",t))};this.$children.addEventListener("transitionend",t);let r=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=r+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(t=>t.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),this._onChange!==void 0&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onOpenClose(e){return this._onOpenClose=e,this}_callOnOpenClose(e){this.parent&&this.parent._callOnOpenClose(e),this._onOpenClose!==void 0&&this._onOpenClose.call(this,e)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(i=>{e=e.concat(i.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(i=>{e=e.concat(i.foldersRecursive())}),e}},UV=RA;var gae=["outlinePass"],bae=()=>["#ffffff"],_ae=()=>[0,0,8],vae=()=>["#aaaaaa"],yae=()=>["#ddffdd"],xae=()=>[3,48,24],TA=(n,e,i)=>[n,e,i];function wae(n,e){if(n&1){let i=Gt();H(0,"th-mesh",13),Fe("onMouseEnter",function(r){ct(i);let o=Ut();return lt(o.onHover(r))})("onMouseExit",function(){ct(i);let r=Ut();return lt(r.onBlur())})("onPointerDown",function(r){ct(i);let o=Ut();return lt(o.onPointerDown(r))}),he(1,"th-meshPhongMaterial",14),ie()}if(n&2){let i=e.$implicit;Ut();let t=Tt(11);P("geometry",t.objRef)("position",Hs(7,TA,i.x,i.y,i.z))("scale",Hs(11,TA,i.scale,i.scale,i.scale))("receiveShadow",!0)("castShadow",!0),j(),P("flatShading",!0)("color",i.color)}}var VV=(()=>{let e=class e{constructor(t){this.elem=t,this.outlinePassResolution=new z(window.innerWidth,window.innerHeight),this.meshData=[],this.visibleEdgeColor="#ffffff",this.hiddenEdgeColor="#190a05",this.edgeStrength=3,this.edgeGlow=.5,this.edgeThickness=1,this.pulsePeriod=1,this.initGUI(),this.initMeshData()}initGUI(){let t=new UV({title:"Settings",injectStyles:!0,container:this.elem.nativeElement,autoPlace:!0});t.add(this,"edgeStrength",.01,10),t.add(this,"edgeGlow",0,2),t.add(this,"edgeThickness",1,4),t.add(this,"pulsePeriod",0,5),t.addColor(this,"visibleEdgeColor"),t.addColor(this,"hiddenEdgeColor")}ngOnInit(){this.outlinePassResolution=new z(window.innerWidth,window.innerHeight),this.outlinePass&&(this.outlinePass.resolution=this.outlinePassResolution)}initMeshData(){for(let t=0;t<20;t++)this.meshData.push({color:new _e().setHSL(Math.random(),1,.3),x:Math.random()*4-2,y:Math.random()*4-2,z:Math.random()*4-2,scale:Math.random()*.3+.1})}onHover(t){t.component.objRef&&(this.outlinePass.selectedObjects=[t.component.objRef])}onBlur(){this.outlinePass.selectedObjects=[]}onPointerDown(t){t.component.material?.color.set("#ff0000")}};e.\u0275fac=function(r){return new(r||e)(k(Qe))},e.\u0275cmp=L({type:e,selectors:[["app-outline-pass-events-example"]],viewQuery:function(r,o){if(r&1&&Vt(gae,7),r&2){let s;nt(s=rt())&&(o.outlinePass=s.first)}},decls:19,vars:33,consts:[["thecanvas",""],["scene",""],["camera",""],["light",""],["geometry",""],["outlinePass",""],[3,"shadow","thStats"],[3,"background"],[3,"position","fov","near","far"],[3,"color","intensity"],[3,"args"],[3,"geometry","position","scale","receiveShadow","castShadow","onMouseEnter","onMouseExit","onPointerDown",4,"ngFor","ngForOf"],[3,"args","visibleEdgeColor","hiddenEdgeColor","edgeStrength","edgeGlow","edgeThickness","pulsePeriod"],[3,"onMouseEnter","onMouseExit","onPointerDown","geometry","position","scale","receiveShadow","castShadow"],[3,"flatShading","color"]],template:function(r,o){if(r&1&&(H(0,"th-canvas",6,0)(2,"th-scene",7,1)(4,"th-perspectiveCamera",8,2),he(6,"th-orbitControls"),ie(),he(7,"th-ambientLight",9)(8,"th-directionalLight",9,3)(10,"th-sphereGeometry",10,4),Nt(12,wae,2,15,"th-mesh",11),ie(),H(13,"th-effectComposer"),he(14,"th-renderPass")(15,"th-outlinePass",12,5),ji(17,"color"),ji(18,"color"),ie()()),r&2){let s=Tt(3),a=Tt(5);P("shadow",!0)("thStats",!0),j(2),P("background",te(24,bae)),j(2),P("position",te(25,_ae))("fov",45)("near",.1)("far",100),j(3),P("color",te(26,vae))("intensity",3),j(),P("color",te(27,yae))("intensity",1.8),j(2),P("args",te(28,xae)),j(2),P("ngForOf",o.meshData),j(3),P("args",Hs(29,TA,o.outlinePassResolution,s.objRef,a.objRef))("visibleEdgeColor",zi(17,20,o.visibleEdgeColor))("hiddenEdgeColor",zi(18,22,o.hiddenEdgeColor))("edgeStrength",o.edgeStrength)("edgeGlow",o.edgeGlow)("edgeThickness",o.edgeThickness)("pulsePeriod",o.pulsePeriod)}},dependencies:[Kr,Dn,Wt,Ai,ar,Ri,jt,so,Cl,xa,kU,Ff,Ct,qo,En,Ra],styles:["[_nghost-%COMP%]     .lil-gui{position:fixed;right:0;z-index:9999}"]});let n=e;return n})();var Mae=["camera"],Sae=()=>["#72645b",2,15],Rae=n=>[0,n,0],zV=n=>[n,0,0],Tae=()=>[40,40],Cae=()=>({color:"#999999",specular:"#101010"}),Eae=n=>[0,n,.3],Dae=()=>[.001,.001,.001],Aae=()=>({color:"#0055ff",flatShading:!0}),Iae=()=>["#443333","#111122"],Pae=()=>[1,1,1],kae=n=>[.5,1,n],Fae=()=>[35,2,1,15],HV=(()=>{let e=class e{constructor(){this.Math=Math,this.cameraPosition=new M(3,.15,3),this.assetPath=`${sn}dolphins.ply`}onBeforeRender(){let t=Date.now()*5e-4;this.camera&&(this.camera.position=new M(Math.sin(t)*2.5,.15,Math.cos(t)*2.5),this.camera.lookAt=[0,.1,0])}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-plyloader-example"]],viewQuery:function(r,o){if(r&1&&Vt(Mae,5),r&2){let s;nt(s=rt())&&(o.camera=s.first)}},decls:17,vars:58,consts:[["camera",""],[3,"onRender","shadow"],[3,"background","fog"],[3,"position","rotation","receiveShadow"],[3,"args"],[3,"rotation","position","scale","castShadow","receiveShadow"],["loadPLY","",3,"url"],[3,"args","intensity"],[3,"castShadow","position","color","intensity","receiveShadow"]],template:function(r,o){if(r&1){let s=Gt();H(0,"th-canvas",1),Fe("onRender",function(){return ct(s),lt(o.onBeforeRender())}),H(1,"th-scene",2),ji(2,"color"),ji(3,"fog"),H(4,"th-mesh",3),he(5,"th-planeGeometry",4)(6,"th-meshPhongMaterial",4),ie(),H(7,"th-mesh",5),he(8,"th-bufferGeometry",6)(9,"th-meshStandardMaterial",4),ie(),he(10,"th-hemisphereLight",7)(11,"th-directionalLight",8),ji(12,"color"),he(13,"th-directionalLight",8),ji(14,"color"),he(15,"th-perspectiveCamera",4,0),ie()()}r&2&&(P("shadow",!0),j(),P("background",zi(2,32,"#72645b"))("fog",zi(3,34,te(40,Sae))),j(3),P("position",gt(41,Rae,-.5))("rotation",gt(43,zV,-o.Math.PI/2))("receiveShadow",!0),j(),P("args",te(45,Tae)),j(),P("args",te(46,Cae)),j(),P("rotation",gt(47,zV,-o.Math.PI/2))("position",gt(49,Eae,-.2))("scale",te(51,Dae))("castShadow",!0)("receiveShadow",!0),j(),P("url",o.assetPath),j(),P("args",te(52,Aae)),j(),P("args",te(53,Iae))("intensity",3),j(),P("castShadow",!0)("position",te(54,Pae))("color",zi(12,36,"#ffffff"))("intensity",1.35)("castShadow",!0)("receiveShadow",!0)("intensity",3),j(2),P("castShadow",!0)("position",gt(55,kae,-1))("color",zi(14,38,"#ffaa00"))("intensity",1)("castShadow",!0)("receiveShadow",!0)("intensity",3),j(2),P("args",te(57,Fae)))},dependencies:[Wt,ar,cf,Ri,jt,so,Rg,Jt,Wo,Ct,KU,Ra,Yy],encapsulation:2,changeDetection:0});let n=e;return n})();var jae=["object"],Oae=["light"],Nae=n=>[n],Lae=n=>({value:n}),Bae=n=>({amount:n}),GV=()=>["#ffffff"],Uae=n=>[0,0,n],Vae=()=>["#333333"],zae=()=>[1,4,4];function Hae(n,e){if(n&1&&(H(0,"th-mesh",15),he(1,"th-meshPhongMaterial",16),ie()),n&2){let i=e.$implicit;Ut();let t=Tt(15);P("geometry",t.objRef)("position",i.pos)("rotation",i.rotation)("scale",i.scale),j(),P("flatShading",!0)("color",i.color)}}var WV=(()=>{let e=class e{constructor(){this.DotScreenShader=wx,this.RGBShiftShader=Wx,this.shiftAmount=.0015,this.zDist=400,this.meshData=[],this.initMeshData()}ngOnInit(){this.light?.position?.set(1,1,1)}initMeshData(){for(let t=0;t<100;t++){let r=Math.random()*50;this.meshData.push({pos:new M(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize().multiplyScalar(Math.random()*this.zDist),rotation:new no(Math.random()*2,Math.random()*2,Math.random()*2),scale:new M(r,r,r),color:new _e(16777215*Math.random())})}}animate(){this.object?.objRef?.rotation&&(this.object.objRef.rotation.x+=.005,this.object.objRef.rotation.y+=.01)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-post-processing-example"]],viewQuery:function(r,o){if(r&1&&(Vt(jae,7),Vt(Oae,7)),r&2){let s;nt(s=rt())&&(o.object=s.first),nt(s=rt())&&(o.light=s.first)}},decls:19,vars:31,consts:[["thecanvas",""],["light",""],["geometry",""],["object",""],["for","shift"],["id","shift","type","range",3,"ngModelChange","ngModel","min","max","step"],[3,"onRender","shadow","thStats"],[3,"strength"],[3,"args","uniforms"],[3,"background"],[3,"position","fov","near","far"],[3,"color","intensity"],[3,"color"],[3,"args"],[3,"geometry","position","rotation","scale",4,"ngFor","ngForOf"],[3,"geometry","position","rotation","scale"],[3,"flatShading","color"]],template:function(r,o){if(r&1){let s=Gt();H(0,"label",4),Et(1,"Shift Amount"),ie(),H(2,"input",5),Qu("ngModelChange",function(c){return ct(s),Mm(o.shiftAmount,c)||(o.shiftAmount=c),lt(c)}),ie(),H(3,"th-canvas",6,0),Fe("onRender",function(){return ct(s),lt(o.animate())}),H(5,"th-effectComposer"),he(6,"th-renderPass")(7,"th-unrealBloomPass",7)(8,"th-shaderPass",8),ie(),H(9,"th-scene",9),he(10,"th-perspectiveCamera",10)(11,"th-ambientLight",11)(12,"th-directionalLight",12,1)(14,"th-sphereGeometry",13,2),H(16,"th-object3D",null,3),Nt(18,Hae,2,6,"th-mesh",14),ie()()()}r&2&&(j(2),Zu("ngModel",o.shiftAmount),P("min",.0015)("max",.2)("step",.005),j(),P("shadow",!0)("thStats",!0),j(4),P("strength",1),j(),P("args",gt(19,Nae,o.RGBShiftShader))("uniforms",gt(23,Bae,gt(21,Lae,o.shiftAmount))),j(),P("background",te(25,GV)),j(),P("position",gt(26,Uae,o.zDist))("fov",70)("near",1)("far",1e3),j(),P("color",te(28,Vae))("intensity",6),j(),P("color",te(29,GV)),j(2),P("args",te(30,zae)),j(4),P("ngForOf",o.meshData))},dependencies:[Kr,Wt,pe,Ai,ar,Ri,jt,so,Cl,xa,Ff,Sg,Ux,Ct,En,Zx,_A,Qx,zg],styles:["label[_ngcontent-%COMP%]{margin-right:.5em}"],changeDetection:0});let n=e;return n})();var CA=n=>[0,n,0],Gae=()=>[0,1,0],Wae=()=>[4,10,2],$ae=n=>[n,0,0],qae=()=>[100,100],Xae=()=>[55,2,.1,100],Yae=(n,e)=>[n,0,e],Zae=()=>[0,0,0],$V=(()=>{let e=class e{constructor(t){this.Math=Math,this.selected=!1,this.glbPath=`${sn}mac-draco.glb`,this.clock=new ro(!0),this.plane=new sr(new M(0,1,0),3),this.rotation=[0,0,0],this.position=[0,0,0],this.uniforms={time:{value:1}},this.fragmentShader1=`
uniform float time;
varying vec2 vUv;

void main( void ) {
  vec2 position = - 1.0 + 2.0 * vUv;

  float red = abs( sin( position.x * position.y + time / 5.0 ) );
  float green = abs( sin( position.x * position.y + time / 4.0 ) );
  float blue = abs( sin( position.x * position.y + time / 3.0 ) );
  gl_FragColor = vec4( red, green, blue, 1.0 );

}
`,this.fragmentShader2=`
  uniform float time;
  varying vec2 vUv;

  void main( void ) {
    vec2 position = vUv;
    float color = 0.0;
    color += sin( position.x * cos( time / 15.0 ) * 80.0 ) + cos( position.y * cos( time / 15.0 ) * 10.0 );
    color += sin( position.y * sin( time / 10.0 ) * 40.0 ) + cos( position.x * sin( time / 25.0 ) * 40.0 );
    color += sin( position.x * sin( time / 5.0 ) * 10.0 ) + sin( position.y * sin( time / 35.0 ) * 80.0 );
    color *= sin( time / 10.0 ) * 0.5;
    gl_FragColor = vec4( vec3( color, color * 0.5, sin( color + time / 3.0 ) * 0.75 ), 1.0 );
  }
  `,this.vertexShader=`varying vec2 vUv;
  void main() {
    vUv = uv;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;
  }
  `,t.setDecoderPath("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/jsm/libs/draco/gltf/"),t.setCrossOrigin("no-cors"),this.calcPose()}onBeforeRender(){this.calcPose(),this.calcUniforms()}calcPose(){let t=this.clock.getElapsedTime();this.rotation=[tt.lerp(this.rotation[0],Math.cos(t/2)/20+.25,.1),tt.lerp(this.rotation[1],Math.sin(t/4)/20,.1),tt.lerp(this.rotation[2],Math.sin(t/8)/20,.1)],this.position=[0,tt.lerp(this.position[1],(-2+Math.sin(t/2))/2,.1),0]}calcUniforms(){this.uniforms.time.value=1+this.clock.getElapsedTime()*5}};e.\u0275fac=function(r){return new(r||e)(k(bl))},e.\u0275cmp=L({type:e,selectors:[["app-ref-by-id-example"]],decls:17,vars:45,consts:[["shader",""],["light",""],[3,"onRender","thStats","shadow"],[3,"rotation","position"],["loadGLTF","",3,"onClick","castShadow","url","position","rotation"],[3,"refById"],[3,"vertexShader","fragmentShader","uniforms"],[3,"castShadow","position","lookAt","color","intensity"],[3,"receiveShadow","rotation","position"],[3,"args"],[3,"color"],[3,"args","position","lookAt"]],template:function(r,o){if(r&1){let s=Gt();H(0,"th-canvas",2),Fe("onRender",function(){return ct(s),lt(o.onBeforeRender())}),H(1,"th-scene"),he(2,"th-ambientLight"),H(3,"th-group",3)(4,"th-object3D",4),Fe("onClick",function(){ct(s);let c=Tt(7);return o.selected=!o.selected,lt(c.uniformsNeedUpdate=!0)}),H(5,"th-mesh",5),he(6,"th-shaderMaterial",6,0),ie()()(),he(8,"th-directionalLight",7,1),ji(10,"color"),H(11,"th-mesh",8),he(12,"th-planeGeometry",9)(13,"th-meshBasicMaterial",10),ji(14,"color"),ie(),H(15,"th-perspectiveCamera",11),he(16,"th-orbitControls"),ie()()()}r&2&&(P("thStats",!0)("shadow",!0),j(3),P("rotation",gt(29,CA,o.Math.PI))("position",te(31,Gae)),j(),P("castShadow",!0)("url",o.glbPath)("position",o.position)("rotation",o.rotation),j(),P("refById","Cube008_2"),j(),P("vertexShader",o.vertexShader)("fragmentShader",o.selected?o.fragmentShader1:o.fragmentShader2)("uniforms",o.uniforms),j(2),P("castShadow",!0)("position",te(32,Wae))("lookAt",gt(33,CA,-3))("color",zi(10,25,"#ffffff"))("intensity",.75),j(3),P("receiveShadow",!0)("rotation",gt(35,$ae,3*o.Math.PI/2))("position",gt(37,CA,-3)),j(),P("args",te(39,qae)),j(),P("color",zi(14,27,"#efefef")),j(2),P("args",te(40,Xae))("position",Hn(41,Yae,-5,-15))("lookAt",te(44,Zae)))},dependencies:[Dn,Wt,pe,Ai,ar,Tl,Ri,jt,pa,G1,Wo,Ct,$n,qo,En,jf,Ra],encapsulation:2,changeDetection:0});let n=e;return n})();var EA=()=>[0,0,0],Qae=()=>[2,2,2],Kae=()=>[1,1,1],Jae=(n,e)=>[n,e],ece=()=>[10,10],qV=()=>[10,10,10],tce=()=>[45,2,.1,100],ice=(()=>{let e=class e extends Ri{constructor(t){super(t)}ngOnInit(){super.ngOnInit(),this.objRef&&(this.objRef.material=new Er({color:"green"}),this.objRef.geometry=new Xi(1,1,1))}};e.\u0275fac=function(r){return new(r||e)(k(pe,4))},e.\u0275cmp=L({type:e,selectors:[["th-box"]],features:[oe(iV(e)),X],decls:0,vars:0,template:function(r,o){},encapsulation:2,changeDetection:0});let n=e;return n})(),XV=(()=>{let e=class e{constructor(){this.THREE=hl,this.box=new vn(new M(0,0,0),new M(1.5,1.5,1.5)),this.color=new _e(1,0,0),this.rotation=[0,0,0],this.material=new Er,this.selected=!1,this.material.color.set("green"),setInterval(()=>{this.material.color.r!==0?(this.material=new Er,this.material.color.set("green")):(this.material=new Er,this.material.color.set("red"))},400)}onBeforeRender(){this.rotation=[0,this.rotation[2]+.01,this.rotation[2]+.01]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-simple-example"]],features:[oe([ml()])],decls:8,vars:27,consts:[[3,"onRender"],[3,"intensity"],[3,"position","material","rotation","scale"],[3,"onClick","args","material","position"],[3,"args"],[3,"position","intensity","decay"],[3,"args","position","lookAt"]],template:function(r,o){r&1&&(H(0,"th-canvas",0),Fe("onRender",function(){return o.onBeforeRender()}),H(1,"th-scene"),he(2,"th-ambientLight",1)(3,"th-box",2),H(4,"th-box3Helper",3),Fe("onClick",function(){return o.selected=!o.selected}),ie(),he(5,"th-gridHelper",4)(6,"th-pointLight",5)(7,"th-perspectiveCamera",6),ie()()),r&2&&(j(2),P("intensity",3),j(),P("position",te(15,EA))("material",o.material)("rotation",o.rotation)("scale",o.selected?te(16,Qae):te(17,Kae)),j(),P("args",Hn(18,Jae,o.box,o.color))("material",o.material)("position",te(21,EA)),j(),P("args",te(22,ece)),j(),P("position",te(23,qV))("intensity",3)("decay",0),j(),P("args",te(24,tce))("position",te(25,qV))("lookAt",te(26,EA)))},dependencies:[Wt,hU,Ar,Ai,cr,jt,Ct,qo,ice],encapsulation:2,changeDetection:0});let n=e;return n})();var nce=["thecanvas"],rce=(n,e)=>({x:0,y:0,width:n,height:e}),oce=()=>[0,0,1],sce=()=>["#ffffff"],ace=()=>[0,0,0],ew=n=>[n,0,0],cce=()=>[200,32,16],lce=()=>["#fac400"],dce=()=>["#f83f0d"],uce=()=>[400,0,0],hce=(n,e,i,t)=>({x:n,y:e,width:i,height:t});function fce(n,e){if(n&1){let i=Gt();H(0,"th-view",13,4),Fe("onRender",function(){let r=ct(i).$implicit,o=Tt(3);Ut();let s=Tt(3);return lt(r.updateCamera(o.objRef,s.objRef))}),he(2,"th-perspectiveCamera",14,5),ie()}if(n&2){let i=e.$implicit,t=Tt(1),r=Ut(),o=Tt(3);P("scene",o)("viewPort",Ku(11,hce,i.left*r.canvasWidth,i.bottom*r.canvasHeight,i.width*r.canvasWidth,i.height*r.canvasHeight))("scissor",t.viewPort)("scissorTest",!0)("clearColor",i.background),j(2),P("position",i.eye)("up",i.up)("fov",i.fov)("aspect",i.width*r.canvasWidth/(i.height*r.canvasHeight))("near",1)("far",1e4)}}var YV=(()=>{let e=class e{constructor(){this.Math=Math,this.canvasWidth=128,this.canvasHeight=128,this.mouseX=0,this.mouseY=0,this.views=[{left:0,bottom:0,width:.5,height:1,background:new _e(.5,.5,.7),eye:[0,300,1800],up:[0,1,0],fov:30,updateCamera:(t,r)=>{this.updateSize(),t.position.x+=this.mouseX*.05,t.position.x=Math.max(Math.min(t.position.x,2e3),-2e3),t.lookAt(r.position),t.updateProjectionMatrix()}},{left:.5,bottom:0,width:.5,height:.5,background:new _e(.7,.5,.5),eye:[0,1800,0],up:[0,0,1],fov:45,updateCamera:(t,r)=>{this.updateSize(),t.position.x-=this.mouseX*.05,t.position.x=Math.max(Math.min(t.position.x,2e3),-2e3),t.lookAt(t.position.clone().setY(0)),t.updateProjectionMatrix()}},{left:.5,bottom:.5,width:.5,height:.5,background:new _e(.5,.7,.7),eye:[1400,800,1400],up:[0,1,0],fov:60,updateCamera:(t,r)=>{this.updateSize(),t.position.y-=this.mouseX*.05,t.position.y=Math.max(Math.min(t.position.y,1600),-1600),t.lookAt(r.position),t.updateProjectionMatrix()}}]}ngOnInit(){!this.canvas||!this.canvas.rendererCanvas||(this.shadowTexture=new Nd(this.canvas.rendererCanvas))}updateSize(){!this.canvas||!this.canvas.rendererCanvas||(this.canvasWidth=this.canvas.rendererCanvas.width,this.canvasHeight=this.canvas.rendererCanvas.height)}onMouseMove(t){if(!this.canvas||!this.canvas.rendererCanvas)return;let r=this.canvas.rendererCanvas.getBoundingClientRect();this.mouseX=t.clientX-r.left-r.width/2,this.mouseY=t.clientY-r.right-r.height/2}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-views-example"]],viewQuery:function(r,o){if(r&1&&Vt(nce,7),r&2){let s;nt(s=rt())&&(o.canvas=s.first)}},hostBindings:function(r,o){r&1&&Fe("mousemove",function(a){return o.onMouseMove(a)},!1,$u)},decls:13,vars:39,consts:[["thecanvas",""],["scene",""],["geo",""],["mat",""],["thview",""],["camera",""],[3,"disableDefaultView","viewPort"],[3,"position","args","intensity"],[3,"position","rotation"],[3,"args"],[3,"flatShading","shininess","specular","color"],[3,"position","rotation","geometry","material"],[3,"scene","viewPort","scissor","scissorTest","clearColor","onRender",4,"ngFor","ngForOf"],[3,"onRender","scene","viewPort","scissor","scissorTest","clearColor"],[3,"position","up","fov","aspect","near","far"]],template:function(r,o){if(r&1&&(H(0,"th-canvas",6,0)(2,"th-scene",null,1),he(4,"th-directionalLight",7),H(5,"th-mesh",8),he(6,"th-sphereGeometry",9,2)(8,"th-meshPhongMaterial",10,3),ie(),he(10,"th-mesh",11)(11,"th-mesh",11),ie(),Nt(12,fce,4,16,"th-view",12),ie()),r&2){let s=Tt(7),a=Tt(9);P("disableDefaultView",!0)("viewPort",Hn(21,rce,.5*o.canvasWidth,o.canvasHeight)),j(4),P("position",te(24,oce))("args",te(25,sce))("intensity",3),j(),P("position",te(26,ace))("rotation",gt(27,ew,-o.Math.PI/2)),j(),P("args",te(29,cce)),j(2),P("flatShading",!1)("shininess",30)("specular",te(30,lce))("color",te(31,dce)),j(2),P("position",gt(32,ew,-400))("rotation",gt(34,ew,-o.Math.PI/2))("geometry",s.objRef)("material",a.objRef),j(),P("position",te(36,uce))("rotation",gt(37,ew,-o.Math.PI/2))("geometry",s.objRef)("material",a.objRef),j(),P("ngForOf",o.views)}},dependencies:[Kr,Wt,ar,Ri,jt,so,Cl,Ct,Ir],changeDetection:0});let n=e;return n})();var mce=()=>[0,1,0],pce=()=>[0,0,.2],gce=()=>[0,0],bce=()=>[10,10],ZV=()=>[10,10,10],_ce=()=>[45,2,.1,100],vce=()=>[0,0,0],QV=(()=>{let e=class e{constructor(){this.assetPath1=`${sn}DamagedHelmet.glb`,this.assetPath2=`${sn}BoomBox.glb`,this.rotation=[0,0,0]}onBeforeRender(){this.rotation=[0,this.rotation[1]+.01,0]}resetRotation(){this.rotation=[0,0,0]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-multi-renderer-example"]],features:[oe([ml(),C3()])],decls:13,vars:21,consts:[[3,"onRender"],[3,"thStats"],[3,"intensity"],["loadGLTF","",3,"url","rotation","position"],[3,"position","center"],[1,"label"],[3,"pointerdown"],[3,"args"],[3,"position","decay"],[3,"args","position","lookAt"]],template:function(r,o){r&1&&(H(0,"th-canvas",0),Fe("onRender",function(){return o.onBeforeRender()}),H(1,"th-scene",1),he(2,"th-ambientLight",2),H(3,"th-object3D",3)(4,"th-cSS2DObject",4)(5,"div",5),Et(6," A Helmet "),H(7,"button",6),Fe("pointerdown",function(){return o.resetRotation()}),Et(8,"Reset"),ie()()()(),he(9,"th-gridHelper",7)(10,"th-pointLight",8),H(11,"th-perspectiveCamera",9),he(12,"th-orbitControls"),ie()()()),r&2&&(j(),P("thStats",!0),j(),P("intensity",3),j(),P("url",o.assetPath1)("rotation",o.rotation)("position",te(13,mce)),j(),P("position",te(14,pce))("center",te(15,gce)),j(5),P("args",te(16,bce)),j(),P("position",te(17,ZV))("decay",0),j(),P("args",te(18,_ce))("position",te(19,ZV))("lookAt",te(20,vce)))},dependencies:[Dn,Wt,pe,Ar,Ai,cr,jt,YU,Ct,$n,En],styles:[".label{background-color:#d3d3d3;border-radius:5px;line-height:1rem;padding:.5rem;display:inline-block}"],changeDetection:0});let n=e;return n})();var yce=()=>[10,10,10],xce=()=>[45,2,1,1e4],wce=()=>[0,0,3e3],Mce=()=>[0,0,0];function Sce(n,e){if(n&1&&(H(0,"th-cSS3DObject",12)(1,"div",13)(2,"div",14),Et(3),ie(),H(4,"div",15),Et(5),ie(),H(6,"div",16),Et(7),he(8,"br"),Et(9),ie()()()),n&2){let i=e.$implicit,t=e.index,r=Ut();P("position",r.poses[t].position),j(),Bo("background","rgba(0,127,127,"+(r.Math.random()*.5+.25)+")"),j(2),zs(" ",t+1," "),j(2),zs(" ",i[0]," "),j(2),zs(" ",i[1]," "),j(2),zs(" ",i[2]," ")}}var KV=(()=>{let e=class e{constructor(){this.Math=Math,this.table=[["H","Hydrogen","1.00794",1,1],["He","Helium","4.002602",18,1],["Li","Lithium","6.941",1,2],["Be","Beryllium","9.012182",2,2],["B","Boron","10.811",13,2],["C","Carbon","12.0107",14,2],["N","Nitrogen","14.0067",15,2],["O","Oxygen","15.9994",16,2],["F","Fluorine","18.9984032",17,2],["Ne","Neon","20.1797",18,2],["Na","Sodium","22.98976...",1,3],["Mg","Magnesium","24.305",2,3],["Al","Aluminium","26.9815386",13,3],["Si","Silicon","28.0855",14,3],["P","Phosphorus","30.973762",15,3],["S","Sulfur","32.065",16,3],["Cl","Chlorine","35.453",17,3],["Ar","Argon","39.948",18,3],["K","Potassium","39.948",1,4],["Ca","Calcium","40.078",2,4],["Sc","Scandium","44.955912",3,4],["Ti","Titanium","47.867",4,4],["V","Vanadium","50.9415",5,4],["Cr","Chromium","51.9961",6,4],["Mn","Manganese","54.938045",7,4],["Fe","Iron","55.845",8,4],["Co","Cobalt","58.933195",9,4],["Ni","Nickel","58.6934",10,4],["Cu","Copper","63.546",11,4],["Zn","Zinc","65.38",12,4],["Ga","Gallium","69.723",13,4],["Ge","Germanium","72.63",14,4],["As","Arsenic","74.9216",15,4],["Se","Selenium","78.96",16,4],["Br","Bromine","79.904",17,4],["Kr","Krypton","83.798",18,4],["Rb","Rubidium","85.4678",1,5],["Sr","Strontium","87.62",2,5],["Y","Yttrium","88.90585",3,5],["Zr","Zirconium","91.224",4,5],["Nb","Niobium","92.90628",5,5],["Mo","Molybdenum","95.96",6,5],["Tc","Technetium","(98)",7,5],["Ru","Ruthenium","101.07",8,5],["Rh","Rhodium","102.9055",9,5],["Pd","Palladium","106.42",10,5],["Ag","Silver","107.8682",11,5],["Cd","Cadmium","112.411",12,5],["In","Indium","114.818",13,5],["Sn","Tin","118.71",14,5],["Sb","Antimony","121.76",15,5],["Te","Tellurium","127.6",16,5],["I","Iodine","126.90447",17,5],["Xe","Xenon","131.293",18,5],["Cs","Caesium","132.9054",1,6],["Ba","Barium","132.9054",2,6],["La","Lanthanum","138.90547",4,9],["Ce","Cerium","140.116",5,9],["Pr","Praseodymium","140.90765",6,9],["Nd","Neodymium","144.242",7,9],["Pm","Promethium","(145)",8,9],["Sm","Samarium","150.36",9,9],["Eu","Europium","151.964",10,9],["Gd","Gadolinium","157.25",11,9],["Tb","Terbium","158.92535",12,9],["Dy","Dysprosium","162.5",13,9],["Ho","Holmium","164.93032",14,9],["Er","Erbium","167.259",15,9],["Tm","Thulium","168.93421",16,9],["Yb","Ytterbium","173.054",17,9],["Lu","Lutetium","174.9668",18,9],["Hf","Hafnium","178.49",4,6],["Ta","Tantalum","180.94788",5,6],["W","Tungsten","183.84",6,6],["Re","Rhenium","186.207",7,6],["Os","Osmium","190.23",8,6],["Ir","Iridium","192.217",9,6],["Pt","Platinum","195.084",10,6],["Au","Gold","196.966569",11,6],["Hg","Mercury","200.59",12,6],["Tl","Thallium","204.3833",13,6],["Pb","Lead","207.2",14,6],["Bi","Bismuth","208.9804",15,6],["Po","Polonium","(209)",16,6],["At","Astatine","(210)",17,6],["Rn","Radon","(222)",18,6],["Fr","Francium","(223)",1,7],["Ra","Radium","(226)",2,7],["Ac","Actinium","(227)",4,10],["Th","Thorium","232.03806",5,10],["Pa","Protactinium","231.0588",6,10],["U","Uranium","238.02891",7,10],["Np","Neptunium","(237)",8,10],["Pu","Plutonium","(244)",9,10],["Am","Americium","(243)",10,10],["Cm","Curium","(247)",11,10],["Bk","Berkelium","(247)",12,10],["Cf","Californium","(251)",13,10],["Es","Einstenium","(252)",14,10],["Fm","Fermium","(257)",15,10],["Md","Mendelevium","(258)",16,10],["No","Nobelium","(259)",17,10],["Lr","Lawrencium","(262)",18,10],["Rf","Rutherfordium","(267)",4,7],["Db","Dubnium","(268)",5,7],["Sg","Seaborgium","(271)",6,7],["Bh","Bohrium","(272)",7,7],["Hs","Hassium","(270)",8,7],["Mt","Meitnerium","(276)",9,7],["Ds","Darmstadium","(281)",10,7],["Rg","Roentgenium","(280)",11,7],["Cn","Copernicium","(285)",12,7],["Nh","Nihonium","(286)",13,7],["Fl","Flerovium","(289)",14,7],["Mc","Moscovium","(290)",15,7],["Lv","Livermorium","(293)",16,7],["Ts","Tennessine","(294)",17,7],["Og","Oganesson","(294)",18,7]],this.poses=[],this.createRandomPoses()}createRandomPoses(){this.poses=[];for(let t=0;t<this.table.length;t++){let r=new Rt;r.position.set(Math.random()*4e3-2e3,Math.random()*4e3-2e3,Math.random()*4e3-2e3),this.poses.push(r)}}createTablePoses(){this.poses=this.table.map(t=>{let r=new Rt;return r.position.x=t[3]*140-1330,r.position.y=-(t[4]*180)+990,r})}createSpherePoses(){let t=new M,r=this.table.length;this.poses=this.table.map((o,s)=>{let a=Math.acos(-1+2*s/r),c=Math.sqrt(r*Math.PI)*a,l=new Rt;return l.position.setFromSphericalCoords(800,a,c),t.copy(l.position).multiplyScalar(2),l.lookAt(t),l})}createHelixPoses(){let t=new M;this.poses=this.table.map((r,o)=>{let s=o*.175+Math.PI,a=-(o*8)+450,c=new Rt;return c.position.setFromCylindricalCoords(900,s,a),t.x=c.position.x*2,t.y=c.position.y,t.z=c.position.z*2,c.lookAt(t),c})}createGridPoses(){this.poses=this.table.map((t,r)=>{let o=new Rt;return o.position.x=r%5*400-800,o.position.y=-(Math.floor(r/5)%5)*400+800,o.position.z=Math.floor(r/25)*1e3-2e3,o})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-css3d-multi-renderer-example"]],features:[oe([Hy()])],decls:16,vars:15,consts:[["id","menu"],["id","table",3,"click"],["id","sphere",3,"click"],["id","helix",3,"click"],["id","grid",3,"click"],[1,"canvas-background",3,"renderOnDemand"],[3,"thStats"],[3,"intensity"],[3,"position",4,"ngFor","ngForOf"],[3,"position","intensity"],[3,"args","position","lookAt"],[3,"minDistance","maxDistance"],[3,"position"],[1,"element"],[1,"number"],[1,"symbol"],[1,"details"]],template:function(r,o){r&1&&(H(0,"div",0)(1,"button",1),Fe("click",function(){return o.createTablePoses()}),Et(2,"TABLE"),ie(),H(3,"button",2),Fe("click",function(){return o.createSpherePoses()}),Et(4,"SPHERE"),ie(),H(5,"button",3),Fe("click",function(){return o.createHelixPoses()}),Et(6,"HELIX"),ie(),H(7,"button",4),Fe("click",function(){return o.createGridPoses()}),Et(8,"GRID"),ie()(),H(9,"th-canvas",5)(10,"th-scene",6),he(11,"th-ambientLight",7),Nt(12,Sce,10,7,"th-cSS3DObject",8),he(13,"th-pointLight",9),H(14,"th-perspectiveCamera",10),he(15,"th-trackballControls",11),ie()()()),r&2&&(j(9),P("renderOnDemand",!0),j(),P("thStats",!0),j(),P("intensity",3),j(),P("ngForOf",o.table),j(),P("position",te(11,yce))("intensity",3),j(),P("args",te(12,xce))("position",te(13,wce))("lookAt",te(14,Mce)),j(),P("minDistance",500)("maxDistance",6e3))},dependencies:[Kr,jx,Wt,Ai,cr,jt,Vx,Ct,_l,En],styles:[".canvas-background[_ngcontent-%COMP%]{background-color:#000}a[_ngcontent-%COMP%]{color:#8ff}#menu[_ngcontent-%COMP%]{position:absolute;bottom:20px;width:100%;text-align:center;z-index:10}.element[_ngcontent-%COMP%]{width:120px;height:160px;box-shadow:0 0 12px #00ffff80;border:1px solid rgba(127,255,255,.25);font-family:Helvetica,sans-serif;text-align:center;line-height:normal;cursor:default}.element[_ngcontent-%COMP%]:hover{box-shadow:0 0 12px #00ffffbf;border:1px solid rgba(127,255,255,.75)}.element[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;font-size:12px;color:#7fffffbf}.element[_ngcontent-%COMP%]   .symbol[_ngcontent-%COMP%]{position:absolute;top:40px;left:0;right:0;font-size:60px;font-weight:700;color:#ffffffbf;text-shadow:0 0 10px rgba(0,255,255,.95)}.element[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:0;right:0;font-size:12px;color:#7fffffbf}button[_ngcontent-%COMP%]{color:#7fffffbf;background:transparent;outline:1px solid rgba(127,255,255,.75);border:0px;padding:5px 10px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#00ffff80}button[_ngcontent-%COMP%]:active{color:#000;background-color:#00ffffbf}"],changeDetection:0});let n=e;return n})();var DA=n=>[0,n,0],Rce=()=>[0,1,0],JV=n=>[n,0,0],Tce=n=>[0,.04,n],Cce=()=>[.0043,.0043,.0043],Ece=()=>[1960,1280],Dce=()=>[4,10,2],Ace=()=>[100,100],Ice=()=>[55,2,.1,100],Pce=(n,e)=>[n,0,e],kce=()=>[0,0,0],ez=(()=>{let e=class e{constructor(t){this.THREE=hl,this.Math=Math,this.sprite=!1,this.glbPath=`${sn}mac-draco.glb`,this.clock=new ro(!0),this.rotation=[0,0,0],this.position=[0,0,0],this.webGlRenderer=re(qd),t.setDecoderPath("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/jsm/libs/draco/gltf/"),t.setCrossOrigin("no-cors"),this.webGlRenderer.domElement.style.pointerEvents="none",this.webGlRenderer.domElement.style.zIndex="1",this.calcPose()}onBeforeRender(){this.calcPose()}calcPose(){let t=this.clock.getElapsedTime();this.rotation=[tt.lerp(this.rotation[0],Math.cos(t/2)/20+.25,.1),tt.lerp(this.rotation[1],Math.sin(t/4)/20,.1),tt.lerp(this.rotation[2],Math.sin(t/8)/20,.1)],this.position=[0,tt.lerp(this.position[1],(-2+Math.sin(t/2))/2,.1),0]}};e.\u0275fac=function(r){return new(r||e)(k(bl))},e.\u0275cmp=L({type:e,selectors:[["app-html-with-css3d-example"]],features:[oe([ml(),Hy()])],decls:23,vars:59,consts:[["holder",""],["light",""],[3,"onRender","thStats","shadow"],[3,"intensity"],[3,"rotation","position"],["loadGLTF","",3,"castShadow","url","position","rotation"],[3,"refById"],[3,"rotation","position","scale"],[3,"args"],[3,"opacity","blending","side","color"],["src",j_`./multi-view-postprocessing-example`,2,"width","1960px","height","1280px"],[3,"castShadow","position","lookAt","color","intensity"],[3,"receiveShadow","rotation","position"],[3,"color"],[3,"args","position","lookAt"]],template:function(r,o){if(r&1){let s=Gt();H(0,"th-canvas",2),Fe("onRender",function(){return ct(s),lt(o.onBeforeRender())}),H(1,"th-scene"),he(2,"th-ambientLight",3),H(3,"th-group",4)(4,"th-object3D",5)(5,"th-mesh",6)(6,"th-group",7,0)(8,"th-mesh"),he(9,"th-planeGeometry",8)(10,"th-meshBasicMaterial",9),ji(11,"color"),ie(),H(12,"th-cSS3DObject"),he(13,"iframe",10),ie()()()()(),he(14,"th-directionalLight",11,1),ji(16,"color"),H(17,"th-mesh",12),he(18,"th-planeGeometry",8)(19,"th-meshBasicMaterial",13),ji(20,"color"),ie(),H(21,"th-perspectiveCamera",14),he(22,"th-orbitControls"),ie()()()}r&2&&(P("thStats",!0)("shadow",!0),j(2),P("intensity",3),j(),P("rotation",gt(37,DA,o.Math.PI))("position",te(39,Rce)),j(),P("castShadow",!0)("url",o.glbPath)("position",o.position)("rotation",o.rotation),j(),P("refById","Cube008_2"),j(),P("rotation",gt(40,JV,-1*o.Math.PI/2))("position",gt(42,Tce,-.02))("scale",te(44,Cce)),j(3),P("args",te(45,Ece)),j(),P("opacity",0)("blending",o.THREE.NoBlending)("side",o.THREE.DoubleSide)("color",zi(11,31,"black")),j(4),P("castShadow",!0)("position",te(46,Dce))("lookAt",gt(47,DA,-3))("color",zi(16,33,"#ffffff"))("intensity",2.2),j(3),P("receiveShadow",!0)("rotation",gt(49,JV,3*o.Math.PI/2))("position",gt(51,DA,-3)),j(),P("args",te(53,Ace)),j(),P("color",zi(20,35,"#efefef")),j(2),P("args",te(54,Ice))("position",Hn(55,Pce,-5,-15))("lookAt",te(58,kce)))},dependencies:[Dn,Wt,pe,Ai,ar,Tl,Ri,jt,Vx,pa,Wo,Ct,$n,En,jf,Ra],encapsulation:2,changeDetection:0});let n=e;return n})();var Wg=[{path:"basic-example",data:{title:"Basic Example",exampleComponent:L3,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/basic-example/basic-example.component.ts"]}},{path:"simple-example",data:{title:"Simple Example",exampleComponent:XV,declarations:["SimpleExampleComponent","Box"],codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/simple-example/simple-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/simple-example/simple-example.component.ts"]}},{path:"introductory-example",data:{title:"Introductory Example",exampleComponent:cV,declarations:["IntroductoryExampleComponent","Box"],codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/introductory-example/introductory-example.component.ts"]}},{path:"controls-example",data:{title:"Controls Example",exampleComponent:H3,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/controls-example/controls-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/controls-example/controls-example.component.ts"]}},{path:"loader-example",data:{title:"Loader Example",exampleComponent:dV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/loader-example/loader-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/loader-example/loader-example.component.ts"]}},{path:"dynamic loader-example",data:{title:"Dynamic Loader Example",exampleComponent:W3,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/dynamic-loader-example/dynamic-loader-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/dynamic-loader-example/dynamic-loader-example.component.ts"]}},{path:"events-example",data:{title:"Events Example",exampleComponent:X3,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/events-example/events-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/events-example/events-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/events-example/events-example.component.scss"]}},{path:"instanced-mesh-example",data:{title:"Instanced Mesh Example",exampleComponent:aV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/instanced-mesh-example/instanced-mesh-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/instanced-mesh-example/instanced-mesh-example.component.ts"]}},{path:"post-processing-example",data:{title:"Post Processing Example",exampleComponent:WV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/post-processing-example/post-processing-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/post-processing-example/post-processing-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/post-processing-example/post-processing-example.component.scss"]}},{path:"views-example",data:{title:"Multiple Views Example",exampleComponent:YV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/views-example/views-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/views-example/views-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/views-example/views-example.component.scss"]}},{path:"multi-scene-example",data:{title:"Multiple Scenes Example",codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-scene-example/multi-scene-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-scene-example/multi-scene-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-scene-example/multi-scene-example.component.scss"],exampleComponent:uV}},{path:"multi-view-postprocessing-example",data:{title:"Multiple View Post Processing Example",exampleComponent:hV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-view-postprocessing-example/multi-view-postprocessing-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-view-postprocessing-example/multi-view-postprocessing-example.component.ts"]}},{path:"animation-example",data:{title:"Animation Example",exampleComponent:N3,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/animation-example/animation-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/animation-example/animation-example.component.ts"]}},{path:"plyloader-example",data:{title:"PLY Loader Example",exampleComponent:HV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/plyloader-example/plyloader-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/plyloader-example/plyloader-example.component.ts"]}},{path:"on-demand-example",data:{title:"On-Demand Rendering Example",exampleComponent:LV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/on-demand-example/on-demand-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/on-demand-example/on-demand-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/on-demand-example/on-demand-example.component.scss"]}},{path:"ref-by-id-example",data:{title:"Ref By Id Example",exampleComponent:$V,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/ref-by-id-example/ref-by-id-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/ref-by-id-example/ref-by-id-example.component.ts"]}},{path:"html-example",data:{title:"Html Content Example",exampleComponent:rV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-example/html-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-example/html-example.component.ts"]}},{path:"outline-pass-events-example",data:{title:"Render Pass + Events Example",exampleComponent:VV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/outline-pass-events-example/outline-pass-events-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/outline-pass-events-example/outline-pass-events-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/outline-pass-events-example/outline-pass-events-example.component.scss"]}},{path:"multi-renderer-example",data:{title:"Multi Renderer Example: WebGL + CSS2D",exampleComponent:QV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-renderer-example/multi-renderer-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/multi-renderer-example/multi-renderer-example.component.ts"]}},{path:"css3d-renderer-example",data:{title:"CSS3D Renderer Example",exampleComponent:KV,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/css3d-renderer-example/css3d-renderer-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/css3d-renderer-example/css3d-renderer-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/css3d-renderer-example/css3d-renderer-example.component.scss"]}},{path:"html-with-css3d-example",data:{title:"Html with CSS3D Example",exampleComponent:ez,codeUrls:["https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-with-css3d-example/html-with-css3d-example.component.html","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-with-css3d-example/html-with-css3d-example.component.ts","https://raw.githubusercontent.com/demike/ngx-three/main/projects/ngx-three-demo/src/app/html-with-css3d-example/html-with-css3d-example.component.scss"]}}];Wg.forEach(n=>n.component=aU);var Fce=[];Wg.forEach(n=>{Fce.push(n.component)});var tz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({imports:[wT.forRoot(Wg),wT]});let n=e;return n})();var iz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({imports:[Mi,Mi]});let n=e;return n})();var Oce=["*"],Nce='@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-list-divider::after{content:"";display:block;border-bottom-width:1px;border-bottom-style:solid}}.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item__wrapper{display:block}.mdc-list-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer}.mdc-list-item:focus{outline:none}.mdc-list-item.mdc-list-item--with-one-line{height:48px}.mdc-list-item.mdc-list-item--with-two-lines{height:64px}.mdc-list-item.mdc-list-item--with-three-lines{height:88px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--disabled,.mdc-list-item.mdc-list-item--non-interactive{cursor:auto}.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px double rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected:focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected:focus::before{border-color:CanvasText}}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__content[for]{pointer-events:none}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item__overline-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start,.mdc-list-item--with-leading-avatar .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-avatar .mdc-list-item__start{border-radius:50%}.mdc-list-item--with-leading-icon.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start,.mdc-list-item--with-leading-icon .mdc-list-item__start[dir=rtl]{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-thumbnail.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-thumbnail.mdc-list-item,.mdc-list-item--with-leading-thumbnail.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-thumbnail .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-thumbnail .mdc-list-item__start,.mdc-list-item--with-leading-thumbnail .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-image.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-image.mdc-list-item,.mdc-list-item--with-leading-image.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-image .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-image .mdc-list-item__start,.mdc-list-item--with-leading-image .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-video.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-video.mdc-list-item,.mdc-list-item--with-leading-video.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-video .mdc-list-item__start{margin-left:0;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-video .mdc-list-item__start,.mdc-list-item--with-leading-video .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-checkbox.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-radio.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-radio.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-radio .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-radio .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-switch.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-switch.mdc-list-item,.mdc-list-item--with-leading-switch.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-switch .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-switch .mdc-list-item__start,.mdc-list-item--with-leading-switch .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item,.mdc-list-item--with-trailing-icon.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-icon .mdc-list-item__end,.mdc-list-item--with-trailing-icon .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item,.mdc-list-item--with-trailing-meta.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-trailing-meta .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mdc-typography-caption-font-family);font-size:var(--mdc-typography-caption-font-size);line-height:var(--mdc-typography-caption-line-height);font-weight:var(--mdc-typography-caption-font-weight);letter-spacing:var(--mdc-typography-caption-letter-spacing);text-decoration:var(--mdc-typography-caption-text-decoration);text-transform:var(--mdc-typography-caption-text-transform)}.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-radio.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-radio .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-radio .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-switch.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-switch.mdc-list-item,.mdc-list-item--with-trailing-switch.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-switch .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-switch .mdc-list-item__end,.mdc-list-item--with-trailing-switch .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-switch.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item{padding-left:16px;padding-right:16px}[dir=rtl] .mdc-list-item,.mdc-list-item[dir=rtl]{padding-left:16px;padding-right:16px}.mdc-list-group .mdc-deprecated-list{padding:0}.mdc-list-group__subheader{margin:calc((3rem - 1.5rem)/2) 16px}.mdc-list-divider{padding:0;background-clip:content-box}.mdc-list-divider.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset{padding-left:16px;padding-right:auto}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset,.mdc-list-divider.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:16px}.mdc-list-divider.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset{padding-left:auto;padding-right:16px}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset,.mdc-list-divider.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset[dir=rtl]{padding-left:16px;padding-right:auto}.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset{padding-left:0px;padding-right:auto}[dir=rtl] .mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:0px}[dir=rtl] .mdc-list-divider,.mdc-list-divider[dir=rtl]{padding:0}.mdc-list-item{background-color:var(--mdc-list-list-item-container-color)}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item--with-one-line{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-avatar,.mdc-list-item--with-one-line.mdc-list-item--with-leading-icon,.mdc-list-item--with-one-line.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-one-line.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-one-line.mdc-list-item--with-leading-radio,.mdc-list-item--with-one-line.mdc-list-item--with-leading-switch{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-image,.mdc-list-item--with-one-line.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines.mdc-list-item--with-leading-avatar,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-icon,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-radio,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-switch,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-image,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-three-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height)}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height)}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height)}.mdc-list-item__primary-text{color:var(--mdc-list-list-item-label-text-color)}.mdc-list-item__primary-text{font-family:var(--mdc-list-list-item-label-text-font);line-height:var(--mdc-list-list-item-label-text-line-height);font-size:var(--mdc-list-list-item-label-text-size);font-weight:var(--mdc-list-list-item-label-text-weight);letter-spacing:var(--mdc-list-list-item-label-text-tracking)}.mdc-list-item__secondary-text{color:var(--mdc-list-list-item-supporting-text-color)}.mdc-list-item__secondary-text{font-family:var(--mdc-list-list-item-supporting-text-font);line-height:var(--mdc-list-list-item-supporting-text-line-height);font-size:var(--mdc-list-list-item-supporting-text-size);font-weight:var(--mdc-list-list-item-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-supporting-text-tracking)}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color)}.mdc-list-item--with-leading-icon .mdc-list-item__start{width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start>i{font-size:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon{font-size:var(--mdc-list-list-item-leading-icon-size);width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon,.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon>.materialdesignWizIconSvgsSvgIcon{display:block}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size);height:var(--mdc-list-list-item-leading-avatar-size)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color)}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font);line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height);font-size:var(--mdc-list-list-item-trailing-supporting-text-size);font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end>i{font-size:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon{font-size:var(--mdc-list-list-item-trailing-icon-size);width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon,.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon>.materialdesignWizIconSvgsSvgIcon{display:block}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color)}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text,.mdc-list-item--disabled .mdc-list-item__overline-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity)}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color)}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color)}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color)}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color);opacity:var(--mdc-list-list-item-hover-state-layer-opacity)}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color);opacity:var(--mdc-list-list-item-disabled-state-layer-opacity)}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color);opacity:var(--mdc-list-list-item-focus-state-layer-opacity)}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape);background-color:var(--mdc-list-list-item-leading-avatar-color)}.mat-mdc-list-item-icon{font-size:var(--mdc-list-list-item-leading-icon-size)}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape);--mat-mdc-focus-indicator-border-radius:var(--mat-list-active-indicator-shape)}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color)}',Lce=["unscopedContent"],Bce=["text"],Uce=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],Vce=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var zce=new Ce("ListOption"),Hce=(()=>{let e=class e{constructor(t){this._elementRef=t}};e.\u0275fac=function(r){return new(r||e)(k(Qe))},e.\u0275dir=He({type:e,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"],standalone:!0});let n=e;return n})(),Gce=(()=>{let e=class e{constructor(t){this._elementRef=t}};e.\u0275fac=function(r){return new(r||e)(k(Qe))},e.\u0275dir=He({type:e,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"],standalone:!0});let n=e;return n})(),Wce=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=He({type:e,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"],standalone:!0});let n=e;return n})(),nz=(()=>{let e=class e{constructor(t){this._listOption=t}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}};e.\u0275fac=function(r){return new(r||e)(k(zce,8))},e.\u0275dir=He({type:e,hostVars:4,hostBindings:function(r,o){r&2&&Bt("mdc-list-item__start",o._isAlignedAtStart())("mdc-list-item__end",!o._isAlignedAtStart())},standalone:!0});let n=e;return n})(),$ce=(()=>{let e=class e extends nz{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275dir=He({type:e,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],standalone:!0,features:[X]});let n=e;return n})(),qce=(()=>{let e=class e extends nz{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275dir=He({type:e,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],standalone:!0,features:[X]});let n=e;return n})(),Xce=new Ce("MAT_LIST_CONFIG"),tw=(()=>{let e=class e{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=re(Xce,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=co(t)}get disabled(){return this._disabled}set disabled(t){this._disabled=co(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=He({type:e,hostVars:1,hostBindings:function(r,o){r&2&&Vi("aria-disabled",o.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},standalone:!0});let n=e;return n})(),Yce=(()=>{let e=class e{set lines(t){this._explicitLines=pc(t,null),this._updateItemLines(!1)}get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(t){this._disableRipple=co(t)}get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(t){this._disabled=co(t)}get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(t,r,o,s,a,c){this._elementRef=t,this._ngZone=r,this._listBase=o,this._platform=s,this._explicitLines=null,this._disableRipple=!1,this._disabled=!1,this._subscriptions=new bi,this._rippleRenderer=null,this._hasUnscopedTextContent=!1,this.rippleConfig=a||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._noopAnimations=c==="NoopAnimations",o&&!o._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new fg(this,this._ngZone,this._hostElement,this._platform),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(ts(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(t){if(!this._lines||!this._titles||!this._unscopedContent)return;t&&this._checkDomForUnscopedTextContent();let r=this._explicitLines??this._inferLinesFromContent(),o=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",r<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",r<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",r===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",r===3),this._hasUnscopedTextContent){let s=this._titles.length===0&&r===1;o.classList.toggle("mdc-list-item__primary-text",s),o.classList.toggle("mdc-list-item__secondary-text",!s)}else o.classList.remove("mdc-list-item__primary-text"),o.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let t=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(t+=1),t}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(t=>t.nodeType!==t.COMMENT_NODE).some(t=>!!(t.textContent&&t.textContent.trim()))}};e.\u0275fac=function(r){return new(r||e)(k(Qe),k(Xe),k(tw,8),k(wi),k(Jd,8),k(Vn,8))},e.\u0275dir=He({type:e,contentQueries:function(r,o,s){if(r&1&&(qi(s,$ce,4),qi(s,qce,4)),r&2){let a;nt(a=rt())&&(o._avatars=a),nt(a=rt())&&(o._icons=a)}},hostVars:4,hostBindings:function(r,o){r&2&&(Vi("aria-disabled",o.disabled)("disabled",o._isButtonElement&&o.disabled||null),Bt("mdc-list-item--disabled",o.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"},standalone:!0});let n=e;return n})();var rz=(()=>{let e=class e extends Yce{get activated(){return this._activated}set activated(t){this._activated=co(t)}constructor(t,r,o,s,a,c){super(t,r,o,s,a,c),this._activated=!1}_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}};e.\u0275fac=function(r){return new(r||e)(k(Qe),k(Xe),k(tw,8),k(wi),k(Jd,8),k(Vn,8))},e.\u0275cmp=L({type:e,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(r,o,s){if(r&1&&(qi(s,Gce,5),qi(s,Hce,5),qi(s,Wce,5)),r&2){let a;nt(a=rt())&&(o._lines=a),nt(a=rt())&&(o._titles=a),nt(a=rt())&&(o._meta=a)}},viewQuery:function(r,o){if(r&1&&(Vt(Lce,5),Vt(Bce,5)),r&2){let s;nt(s=rt())&&(o._unscopedContent=s.first),nt(s=rt())&&(o._itemText=s.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:11,hostBindings:function(r,o){r&2&&(Vi("aria-current",o._getAriaCurrent()),Bt("mdc-list-item--activated",o.activated)("mdc-list-item--with-leading-avatar",o._avatars.length!==0)("mdc-list-item--with-leading-icon",o._icons.length!==0)("mdc-list-item--with-trailing-meta",o._meta.length!==0)("_mat-animation-noopable",o._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],standalone:!0,features:[X,Ei],ngContentSelectors:Vce,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-mdc-focus-indicator"]],template:function(r,o){if(r&1){let s=Gt();ce(Uce),ee(0),H(1,"span",1),ee(2,1),ee(3,2),H(4,"span",2,0),Fe("cdkObserveContent",function(){return ct(s),lt(o._updateItemLines(!0))}),ee(6,3),ie()(),ee(7,4),ee(8,5),he(9,"div",3)}},dependencies:[tx],encapsulation:2,changeDetection:0});let n=e;return n})();var oz=(()=>{let e=class e extends tw{constructor(){super(...arguments),this._isNonInteractive=!1}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-mdc-nav-list","mat-mdc-list-base","mdc-list"],exportAs:["matNavList"],standalone:!0,features:[oe([{provide:tw,useExisting:e}]),X,Ei],ngContentSelectors:Oce,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},styles:[Nce],encapsulation:2,changeDetection:0});let n=e;return n})();var $g=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({imports:[ix,Vo,Mi,eu,y1,iz]});let n=e;return n})();var Qce=["*",[["mat-toolbar-row"]]],Kce=["*","mat-toolbar-row"],Jce=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=He({type:e,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0});let n=e;return n})(),sz=(()=>{let e=class e{constructor(t,r,o){this._elementRef=t,this._platform=r,this._document=o}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}};e.\u0275fac=function(r){return new(r||e)(k(Qe),k(wi),k(_t))},e.\u0275cmp=L({type:e,selectors:[["mat-toolbar"]],contentQueries:function(r,o,s){if(r&1&&qi(s,Jce,5),r&2){let a;nt(a=rt())&&(o._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(r,o){r&2&&(Uo(o.color?"mat-"+o.color:""),Bt("mat-toolbar-multiple-rows",o._toolbarRows.length>0)("mat-toolbar-single-row",o._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[Ei],ngContentSelectors:Kce,decls:2,vars:0,template:function(r,o){r&1&&(ce(Qce),ee(0),ee(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color);--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color)}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0});let n=e;return n})();var qg=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({imports:[Mi,Mi]});let n=e;return n})();var rw=["*"],ile=["content"],nle=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],rle=["mat-drawer","mat-drawer-content","*"];function ole(n,e){if(n&1){let i=Gt();H(0,"div",1),Fe("click",function(){ct(i);let r=Ut();return lt(r._onBackdropClicked())}),ie()}if(n&2){let i=Ut();Bt("mat-drawer-shown",i._isShowingBackdrop())}}function sle(n,e){n&1&&(H(0,"mat-drawer-content"),ee(1,2),ie())}var ale=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],cle=["mat-sidenav","mat-sidenav-content","*"];function lle(n,e){if(n&1){let i=Gt();H(0,"div",1),Fe("click",function(){ct(i);let r=Ut();return lt(r._onBackdropClicked())}),ie()}if(n&2){let i=Ut();Bt("mat-drawer-shown",i._isShowingBackdrop())}}function dle(n,e){n&1&&(H(0,"mat-sidenav-content"),ee(1,2),ie())}var ule='.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color);box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}',az={transformDrawer:gx("transform",[ru("open, open-instant",Xo({transform:"none",visibility:"visible"})),ru("void",Xo({"box-shadow":"none",visibility:"hidden"})),ou("void => open-instant",nu("0ms")),ou("void <=> open, open-instant => void",nu("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])};var hle=new Ce("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:fle}),AA=new Ce("MAT_DRAWER_CONTAINER");function fle(){return!1}var iw=(()=>{let e=class e extends wl{constructor(t,r,o,s,a){super(o,s,a),this._changeDetectorRef=t,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}};e.\u0275fac=function(r){return new(r||e)(k(Hi),k(ge(()=>lz)),k(Qe),k(Cf),k(Xe))},e.\u0275cmp=L({type:e,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(r,o){r&2&&Bo("margin-left",o._container._contentMargins.left,"px")("margin-right",o._container._contentMargins.right,"px")},standalone:!0,features:[oe([{provide:wl,useExisting:e}]),X,Ei],ngContentSelectors:rw,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})(),cz=(()=>{let e=class e{get position(){return this._position}set position(t){t=t==="end"?"end":"start",t!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=co(t)}get autoFocus(){let t=this._autoFocus;return t??(this.mode==="side"?"dialog":"first-tabbable")}set autoFocus(t){(t==="true"||t==="false"||t==null)&&(t=co(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(co(t))}constructor(t,r,o,s,a,c,l,d){this._elementRef=t,this._focusTrapFactory=r,this._focusMonitor=o,this._platform=s,this._ngZone=a,this._interactivityChecker=c,this._doc=l,this._container=d,this._focusTrap=null,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new ht,this._animationEnd=new ht,this._animationState="void",this.openedChange=new et(!0),this._openedStream=this.openedChange.pipe(_i(u=>u),st(()=>{})),this.openedStart=this._animationStarted.pipe(_i(u=>u.fromState!==u.toState&&u.toState.indexOf("open")===0),Su(void 0)),this._closedStream=this.openedChange.pipe(_i(u=>!u),st(()=>{})),this.closedStart=this._animationStarted.pipe(_i(u=>u.fromState!==u.toState&&u.toState==="void"),Su(void 0)),this._destroyed=new ht,this.onPositionChanged=new et,this._modeChanged=new ht,this.openedChange.subscribe(u=>{u?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Fo(this._elementRef.nativeElement,"keydown").pipe(_i(u=>u.keyCode===27&&!this.disableClose&&!Sf(u)),Ti(this._destroyed)).subscribe(u=>this._ngZone.run(()=>{this.close(),u.stopPropagation(),u.preventDefault()}))}),this._animationEnd.pipe(Ac((u,h)=>u.fromState===h.fromState&&u.toState===h.toState)).subscribe(u=>{let{fromState:h,toState:f}=u;(f.indexOf("open")===0&&h==="void"||f==="void"&&h.indexOf("open")===0)&&this.openedChange.emit(this._opened)})}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{t.removeEventListener("blur",o),t.removeEventListener("mousedown",o),t.removeAttribute("tabindex")};t.addEventListener("blur",o),t.addEventListener("mousedown",o)})),t.focus(r)}_focusByCssSelector(t,r){let o=this._elementRef.nativeElement.querySelector(t);o&&this._forceFocus(o,r)}_takeFocus(){if(!this._focusTrap)return;let t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&typeof this._elementRef.nativeElement.focus=="function"&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus);break}}_restoreFocus(t){this.autoFocus!=="dialog"&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){let t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._position==="end"&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,r){t&&r&&(this._openedVia=r);let o=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),o}_setOpen(t,r,o){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(o)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe(Mn(1)).subscribe(a=>s(a?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop)}_updatePositionInParent(t){if(!this._platform.isBrowser)return;let r=this._elementRef.nativeElement,o=r.parentNode;t==="end"?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),o.insertBefore(this._anchor,r)),o.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}};e.\u0275fac=function(r){return new(r||e)(k(Qe),k(bB),k(ug),k(wi),k(Xe),k(f1),k(_t,8),k(AA,8))},e.\u0275cmp=L({type:e,selectors:[["mat-drawer"]],viewQuery:function(r,o){if(r&1&&Vt(ile,5),r&2){let s;nt(s=rt())&&(o._content=s.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(r,o){r&1&&nR("@transform.start",function(a){return o._animationStarted.next(a)})("@transform.done",function(a){return o._animationEnd.next(a)}),r&2&&(iR("@transform",o._animationState),Vi("align",null),Bt("mat-drawer-end",o.position==="end")("mat-drawer-over",o.mode==="over")("mat-drawer-push",o.mode==="push")("mat-drawer-side",o.mode==="side")("mat-drawer-opened",o.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],standalone:!0,features:[Ei],ngContentSelectors:rw,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(r,o){r&1&&(ce(),H(0,"div",1,0),ee(2),ie())},dependencies:[wl],encapsulation:2,data:{animation:[az.transformDrawer]},changeDetection:0});let n=e;return n})(),lz=(()=>{let e=class e{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=co(t)}get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(t){this._backdropOverride=t==null?null:co(t)}get scrollable(){return this._userContent||this._content}constructor(t,r,o,s,a,c=!1,l){this._dir=t,this._element=r,this._ngZone=o,this._changeDetectorRef=s,this._animationMode=l,this._drawers=new js,this.backdropClick=new et,this._destroyed=new ht,this._doCheckSubject=new ht,this._contentMargins={left:null,right:null},this._contentMarginChanges=new ht,t&&t.change.pipe(Ti(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),a.change().pipe(Ti(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=c}ngAfterContentInit(){this._allDrawers.changes.pipe(mo(this._allDrawers),Ti(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(mo(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(Ia(10),Ti(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,r=0;if(this._left&&this._left.opened){if(this._left.mode=="side")t+=this._left._getWidth();else if(this._left.mode=="push"){let o=this._left._getWidth();t+=o,r-=o}}if(this._right&&this._right.opened){if(this._right.mode=="side")r+=this._right._getWidth();else if(this._right.mode=="push"){let o=this._right._getWidth();r+=o,t-=o}}t=t||null,r=r||null,(t!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:t,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(_i(r=>r.fromState!==r.toState),Ti(this._drawers.changes)).subscribe(r=>{r.toState!=="open-instant"&&this._animationMode!=="NoopAnimations"&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),t.mode!=="side"&&t.openedChange.pipe(Ti(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){t&&t.onPositionChanged.pipe(Ti(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(Mn(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(Ti(ts(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){let r=this._element.nativeElement.classList,o="mat-drawer-container-has-open";t?r.add(o):r.remove(o)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{t.position=="end"?(this._end!=null,this._end=t):(this._start!=null,this._start=t)}),this._right=this._left=null,this._dir&&this._dir.value==="rtl"?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&this._start.mode!="over"||this._isDrawerOpen(this._end)&&this._end.mode!="over"}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._drawerHasBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(t){return t!=null&&t.opened}_drawerHasBackdrop(t){return this._backdropOverride==null?!!t&&t.mode!=="side":this._backdropOverride}};e.\u0275fac=function(r){return new(r||e)(k(va,8),k(Qe),k(Xe),k(Hi),k(Ml),k(hle),k(Vn,8))},e.\u0275cmp=L({type:e,selectors:[["mat-drawer-container"]],contentQueries:function(r,o,s){if(r&1&&(qi(s,iw,5),qi(s,cz,5)),r&2){let a;nt(a=rt())&&(o._content=a.first),nt(a=rt())&&(o._allDrawers=a)}},viewQuery:function(r,o){if(r&1&&Vt(iw,5),r&2){let s;nt(s=rt())&&(o._userContent=s.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(r,o){r&2&&Bt("mat-drawer-container-explicit-backdrop",o._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],standalone:!0,features:[oe([{provide:AA,useExisting:e}]),Ei],ngContentSelectors:rle,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,o){r&1&&(ce(nle),Nt(0,ole,1,2,"div",0),ee(1),ee(2,1),Nt(3,sle,2,0,"mat-drawer-content")),r&2&&(bo(0,o.hasBackdrop?0:-1),j(3),bo(3,o._content?-1:3))},dependencies:[iw],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color);box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0});let n=e;return n})(),nw=(()=>{let e=class e extends iw{constructor(t,r,o,s,a){super(t,r,o,s,a)}};e.\u0275fac=function(r){return new(r||e)(k(Hi),k(ge(()=>PA)),k(Qe),k(Cf),k(Xe))},e.\u0275cmp=L({type:e,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(r,o){r&2&&Bo("margin-left",o._container._contentMargins.left,"px")("margin-right",o._container._contentMargins.right,"px")},standalone:!0,features:[oe([{provide:wl,useExisting:e}]),X,Ei],ngContentSelectors:rw,decls:1,vars:0,template:function(r,o){r&1&&(ce(),ee(0))},encapsulation:2,changeDetection:0});let n=e;return n})(),IA=(()=>{let e=class e extends cz{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=co(t)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=pc(t)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=pc(t)}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(r,o){r&2&&(Vi("align",null),Bo("top",o.fixedInViewport?o.fixedTopGap:null,"px")("bottom",o.fixedInViewport?o.fixedBottomGap:null,"px"),Bt("mat-drawer-end",o.position==="end")("mat-drawer-over",o.mode==="over")("mat-drawer-push",o.mode==="push")("mat-drawer-side",o.mode==="side")("mat-drawer-opened",o.opened)("mat-sidenav-fixed",o.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],standalone:!0,features:[X,Ei],ngContentSelectors:rw,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(r,o){r&1&&(ce(),H(0,"div",1,0),ee(2),ie())},dependencies:[wl],encapsulation:2,data:{animation:[az.transformDrawer]},changeDetection:0});let n=e;return n})(),PA=(()=>{let e=class e extends lz{constructor(){super(...arguments),this._allDrawers=void 0,this._content=void 0}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=be(e)))(o||e)}})(),e.\u0275cmp=L({type:e,selectors:[["mat-sidenav-container"]],contentQueries:function(r,o,s){if(r&1&&(qi(s,nw,5),qi(s,IA,5)),r&2){let a;nt(a=rt())&&(o._content=a.first),nt(a=rt())&&(o._allDrawers=a)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(r,o){r&2&&Bt("mat-drawer-container-explicit-backdrop",o._backdropOverride)},exportAs:["matSidenavContainer"],standalone:!0,features:[oe([{provide:AA,useExisting:e}]),X,Ei],ngContentSelectors:cle,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,o){r&1&&(ce(ale),Nt(0,lle,1,2,"div",0),ee(1),ee(2,1),Nt(3,dle,2,0,"mat-sidenav-content")),r&2&&(bo(0,o.hasBackdrop?0:-1),j(3),bo(3,o._content?-1:3))},dependencies:[nw],styles:[ule],encapsulation:2,changeDetection:0});let n=e;return n})(),dz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({imports:[Mi,iu,iu,Mi]});let n=e;return n})();function ple(n,e){if(n&1&&(H(0,"a",10),Et(1),ie()),n&2){let i=e.$implicit;P("routerLink",i.path),j(),Uc(i.data.title)}}function gle(n,e){if(n&1){let i=Gt();H(0,"button",11),Fe("click",function(){ct(i),Ut();let r=Tt(2);return lt(r.toggle())}),H(1,"mat-icon",12),Et(2,"menu"),ie()()}}function ble(n,e){if(n&1){let i=Gt();H(0,"button",13),Fe("click",function(r){ct(i);let o=Ut();return lt(o.editorService.toCodeSandbox(r))}),H(1,"mat-icon"),Et(2,"crop_din"),ie(),Et(3," CodeSandbox "),ie()}}function _le(n,e){if(n&1){let i=Gt();H(0,"button",13),Fe("click",function(r){ct(i);let o=Ut();return lt(o.editorService.toStackblitz(r))}),H(1,"mat-icon"),Et(2,"bolt"),ie(),Et(3," Stackblitz "),ie()}}var uz=(()=>{let e=class e{constructor(t,r){this.breakpointObserver=t,this.editorService=r,this.routes=Wg,this.isHandset$=this.breakpointObserver.observe(hB.Handset).pipe(st(o=>o.matches),Bl())}};e.\u0275fac=function(r){return new(r||e)(k(nx),k(ba))},e.\u0275cmp=L({type:e,selectors:[["app-navigation-shell"]],decls:21,vars:15,consts:[["drawer",""],[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["mat-list-item","",3,"routerLink",4,"ngFor","ngForOf"],[1,"content"],["color","primary"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[1,"toolbar-spacer"],["mat-button","","href","#",3,"click",4,"ngIf"],[1,"main-route-content"],["mat-list-item","",3,"routerLink"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],["mat-button","","href","#",3,"click"]],template:function(r,o){r&1&&(H(0,"mat-sidenav-container",1)(1,"mat-sidenav",2,0),ji(3,"async"),ji(4,"async"),ji(5,"async"),H(6,"mat-toolbar"),Et(7,"ngx-three"),ie(),H(8,"mat-nav-list"),Nt(9,ple,2,2,"a",3),ie()(),H(10,"mat-sidenav-content",4)(11,"mat-toolbar",5),Nt(12,gle,3,0,"button",6),ji(13,"async"),H(14,"span"),Et(15,"ngx-three-demo"),ie(),he(16,"span",7),Nt(17,ble,4,0,"button",8)(18,_le,4,0,"button",8),ie(),H(19,"div",9),he(20,"router-outlet"),ie()()()),r&2&&(j(),P("mode",zi(3,7,o.isHandset$)?"over":"side")("opened",zi(4,9,o.isHandset$)===!1),Vi("role",zi(5,11,o.isHandset$)?"dialog":"navigation"),j(8),P("ngForOf",o.routes),j(3),P("ngIf",zi(13,13,o.isHandset$)),j(5),P("ngIf",o.editorService.urls.length),j(),P("ngIf",o.editorService.urls.length))},dependencies:[Kr,th,pT,d2,lx,PB,oz,rz,hx,sz,IA,PA,nw,dv],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.content[_ngcontent-%COMP%]{height:100vh}.main-route-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{display:block;height:100%}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"],changeDetection:0});let n=e;return n})();var hz=(()=>{let e=class e{constructor(){this.title="ngx-three-demo"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=L({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(r,o){r&1&&he(0,"app-navigation-shell")},dependencies:[uz]});let n=e;return n})();var fz=ex(),kA=class{constructor(e,i){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=i}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Nn(-this._previousScrollPosition.left),e.style.top=Nn(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,i=this._document.body,t=e.style,r=i.style,o=t.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),fz&&(t.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),fz&&(t.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let i=this._document.body,t=this._viewportRuler.getViewportSize();return i.scrollHeight>t.height||i.scrollWidth>t.width}};var FA=class{constructor(e,i,t,r){this._scrollDispatcher=e,this._ngZone=i,this._viewportRuler=t,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(_i(i=>!i||!this._overlayRef.overlayElement.contains(i.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let i=this._viewportRuler.getViewportScrollPosition().top;Math.abs(i-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},ow=class{enable(){}disable(){}attach(){}};function jA(n,e){return e.some(i=>{let t=n.bottom<i.top,r=n.top>i.bottom,o=n.right<i.left,s=n.left>i.right;return t||r||o||s})}function mz(n,e){return e.some(i=>{let t=n.top<i.top,r=n.bottom>i.bottom,o=n.left<i.left,s=n.right>i.right;return t||r||o||s})}var OA=class{constructor(e,i,t,r){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=t,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let i=this._overlayRef.overlayElement.getBoundingClientRect(),{width:t,height:r}=this._viewportRuler.getViewportSize();jA(i,[{width:t,height:r,bottom:r,right:t,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},yle=(()=>{let e=class e{constructor(t,r,o,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new ow,this.close=a=>new FA(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new kA(this._viewportRuler,this._document),this.reposition=a=>new OA(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=s}};e.\u0275fac=function(r){return new(r||e)(le(Cf),le(Ml),le(Xe),le(_t))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),NA=class{constructor(e){if(this.scrollStrategy=new ow,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let i=Object.keys(e);for(let t of i)e[t]!==void 0&&(this[t]=e[t])}}};var LA=class{constructor(e,i){this.connectionPair=e,this.scrollableViewProperties=i}};var vz=(()=>{let e=class e{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(le(_t))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),xle=(()=>{let e=class e extends vz{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=o=>{let s=this._attachedOverlays;for(let a=s.length-1;a>-1;a--)if(s[a]._keydownEvents.observers.length>0){let c=s[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(o)):c.next(o);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(le(_t),le(Xe,8))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),wle=(()=>{let e=class e extends vz{constructor(t,r,o){super(t),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=xs(s)},this._clickListener=s=>{let a=xs(s),c=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let d=l.length-1;d>-1;d--){let u=l[d];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(a)||u.overlayElement.contains(c))break;let h=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(s)):h.next(s)}}}add(t){if(super.add(t),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(le(_t),le(wi),le(Xe,8))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),yz=(()=>{let e=class e{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||dg()){let o=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<o.length;s++)o[s].remove()}let r=this._document.createElement("div");r.classList.add(t),dg()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(le(_t),le(wi))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),BA=class{constructor(e,i,t,r,o,s,a,c,l,d=!1){this._portalOutlet=e,this._host=i,this._pane=t,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new ht,this._attachments=new ht,this._detachments=new ht,this._locationChanges=bi.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new ht,this._outsidePointerEvents=new ht,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let i=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Mn(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof i?.onDestroy=="function"&&i.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),i}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=xe(xe({},this._config),e),this._updateElementSize()}setDirection(e){this._config=pi(xe({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Nn(this._config.width),e.height=Nn(this._config.height),e.minWidth=Nn(this._config.minWidth),e.minHeight=Nn(this._config.minHeight),e.maxWidth=Nn(this._config.maxWidth),e.maxHeight=Nn(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,i,t){let r=Rf(i||[]).filter(o=>!!o);r.length&&(t?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let e=this._ngZone.onStable.pipe(Ti(ts(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},pz="cdk-overlay-connected-position-bounding-box",Mle=/([A-Za-z%]+)$/,UA=class{get positions(){return this._preferredPositions}constructor(e,i,t,r,o){this._viewportRuler=i,this._document=t,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ht,this._resizeSubscription=bi.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(pz),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,i=this._overlayRect,t=this._viewportRect,r=this._containerRect,o=[],s;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,i,a),d=this._getOverlayFit(l,i,t,a);if(d.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(d,l,t)){o.push({position:a,origin:c,overlayRect:i,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:l,originPoint:c,position:a,overlayRect:i})}if(o.length){let a=null,c=-1;for(let l of o){let d=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);d>c&&(c=d,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&cu(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(pz),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let i=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,i)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,i,t){let r;if(t.originX=="center")r=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=t.originX=="start"?s:a}i.left<0&&(r-=i.left);let o;return t.originY=="center"?o=e.top+e.height/2:o=t.originY=="top"?e.top:e.bottom,i.top<0&&(o-=i.top),{x:r,y:o}}_getOverlayPoint(e,i,t){let r;t.overlayX=="center"?r=-i.width/2:t.overlayX==="start"?r=this._isRtl()?-i.width:0:r=this._isRtl()?0:-i.width;let o;return t.overlayY=="center"?o=-i.height/2:o=t.overlayY=="top"?0:-i.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,i,t,r){let o=bz(i),{x:s,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(s+=c),l&&(a+=l);let d=0-s,u=s+o.width-t.width,h=0-a,f=a+o.height-t.height,p=this._subtractOverflows(o.width,d,u),b=this._subtractOverflows(o.height,h,f),m=p*b;return{visibleArea:m,isCompletelyWithinViewport:o.width*o.height===m,fitsInViewportVertically:b===o.height,fitsInViewportHorizontally:p==o.width}}_canFitWithFlexibleDimensions(e,i,t){if(this._hasFlexibleDimensions){let r=t.bottom-i.y,o=t.right-i.x,s=gz(this._overlayRef.getConfig().minHeight),a=gz(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportVertically||s!=null&&s<=r,l=e.fitsInViewportHorizontally||a!=null&&a<=o;return c&&l}return!1}_pushOverlayOnScreen(e,i,t){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=bz(i),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),c=Math.max(o.top-t.top-e.y,0),l=Math.max(o.left-t.left-e.x,0),d=0,u=0;return r.width<=o.width?d=l||-s:d=e.x<this._viewportMargin?o.left-t.left-e.x:0,r.height<=o.height?u=c||-a:u=e.y<this._viewportMargin?o.top-t.top-e.y:0,this._previousPushAmount={x:d,y:u},{x:e.x+d,y:e.y+u}}_applyPosition(e,i){if(this._setTransformOrigin(e),this._setOverlayElementStyles(i,e),this._setBoundingBoxStyles(i,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let t=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!Sle(this._lastScrollVisibility,t)){let r=new LA(e,t);this._positionChanges.next(r)}this._lastScrollVisibility=t}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let i=this._boundingBox.querySelectorAll(this._transformOriginSelector),t,r=e.overlayY;e.overlayX==="center"?t="center":this._isRtl()?t=e.overlayX==="start"?"right":"left":t=e.overlayX==="start"?"left":"right";for(let o=0;o<i.length;o++)i[o].style.transformOrigin=`${t} ${r}`}_calculateBoundingBoxRect(e,i){let t=this._viewportRect,r=this._isRtl(),o,s,a;if(i.overlayY==="top")s=e.y,o=t.height-s+this._viewportMargin;else if(i.overlayY==="bottom")a=t.height-e.y+this._viewportMargin*2,o=t.height-a+this._viewportMargin;else{let f=Math.min(t.bottom-e.y+t.top,e.y),p=this._lastBoundingBoxSize.height;o=f*2,s=e.y-f,o>p&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-p/2)}let c=i.overlayX==="start"&&!r||i.overlayX==="end"&&r,l=i.overlayX==="end"&&!r||i.overlayX==="start"&&r,d,u,h;if(l)h=t.width-e.x+this._viewportMargin*2,d=e.x-this._viewportMargin;else if(c)u=e.x,d=t.right-e.x;else{let f=Math.min(t.right-e.x+t.left,e.x),p=this._lastBoundingBoxSize.width;d=f*2,u=e.x-f,d>p&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.x-p/2)}return{top:s,left:u,bottom:a,right:h,width:d,height:o}}_setBoundingBoxStyles(e,i){let t=this._calculateBoundingBoxRect(e,i);!this._isInitialRender&&!this._growAfterOpen&&(t.height=Math.min(t.height,this._lastBoundingBoxSize.height),t.width=Math.min(t.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=Nn(t.height),r.top=Nn(t.top),r.bottom=Nn(t.bottom),r.width=Nn(t.width),r.left=Nn(t.left),r.right=Nn(t.right),i.overlayX==="center"?r.alignItems="center":r.alignItems=i.overlayX==="end"?"flex-end":"flex-start",i.overlayY==="center"?r.justifyContent="center":r.justifyContent=i.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=Nn(o)),s&&(r.maxWidth=Nn(s))}this._lastBoundingBoxSize=t,cu(this._boundingBox.style,r)}_resetBoundingBoxStyles(){cu(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){cu(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,i){let t={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let d=this._viewportRuler.getViewportScrollPosition();cu(t,this._getExactOverlayY(i,e,d)),cu(t,this._getExactOverlayX(i,e,d))}else t.position="static";let a="",c=this._getOffset(i,"x"),l=this._getOffset(i,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),t.transform=a.trim(),s.maxHeight&&(r?t.maxHeight=Nn(s.maxHeight):o&&(t.maxHeight="")),s.maxWidth&&(r?t.maxWidth=Nn(s.maxWidth):o&&(t.maxWidth="")),cu(this._pane.style,t)}_getExactOverlayY(e,i,t){let r={top:"",bottom:""},o=this._getOverlayPoint(i,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,t)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=Nn(o.y);return r}_getExactOverlayX(e,i,t){let r={left:"",right:""},o=this._getOverlayPoint(i,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,t));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(o.x+this._overlayRect.width)}px`}else r.left=Nn(o.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),i=this._pane.getBoundingClientRect(),t=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:mz(e,t),isOriginOutsideView:jA(e,t),isOverlayClipped:mz(i,t),isOverlayOutsideView:jA(i,t)}}_subtractOverflows(e,...i){return i.reduce((t,r)=>t-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,i=this._document.documentElement.clientHeight,t=this._viewportRuler.getViewportScrollPosition();return{top:t.top+this._viewportMargin,left:t.left+this._viewportMargin,right:t.left+e-this._viewportMargin,bottom:t.top+i-this._viewportMargin,width:e-2*this._viewportMargin,height:i-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,i){return i==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Rf(e).forEach(i=>{i!==""&&this._appliedPanelClasses.indexOf(i)===-1&&(this._appliedPanelClasses.push(i),this._pane.classList.add(i))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Qe)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let i=e.width||0,t=e.height||0;return{top:e.y,bottom:e.y+t,left:e.x,right:e.x+i,height:t,width:i}}};function cu(n,e){for(let i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n}function gz(n){if(typeof n!="number"&&n!=null){let[e,i]=n.split(Mle);return!i||i==="px"?parseFloat(e):null}return n||null}function bz(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function Sle(n,e){return n===e?!0:n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}var _z="cdk-global-overlay-wrapper",VA=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let i=e.getConfig();this._overlayRef=e,this._width&&!i.width&&e.updateSize({width:this._width}),this._height&&!i.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(_z),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement.style,t=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=t,c=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),l=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),d=this._xPosition,u=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",p="",b="";c?b="flex-start":d==="center"?(b="center",h?p=u:f=u):h?d==="left"||d==="end"?(b="flex-end",f=u):(d==="right"||d==="start")&&(b="flex-start",p=u):d==="left"||d==="start"?(b="flex-start",f=u):(d==="right"||d==="end")&&(b="flex-end",p=u),e.position=this._cssPosition,e.marginLeft=c?"0":f,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":p,i.justifyContent=b,i.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement,t=i.style;i.classList.remove(_z),t.justifyContent=t.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},Rle=(()=>{let e=class e{constructor(t,r,o,s){this._viewportRuler=t,this._document=r,this._platform=o,this._overlayContainer=s}global(){return new VA}flexibleConnectedTo(t){return new UA(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(le(Ml),le(_t),le(wi),le(yz))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Tle=0,Lf=(()=>{let e=class e{constructor(t,r,o,s,a,c,l,d,u,h,f,p){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=s,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=d,this._directionality=u,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=p}create(t){let r=this._createHostElement(),o=this._createPaneElement(r),s=this._createPortalOutlet(o),a=new NA(t);return a.direction=a.direction||this._directionality.value,new BA(s,r,o,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(t){let r=this._document.createElement("div");return r.id=`cdk-overlay-${Tle++}`,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){let t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(La)),new mx(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(le(yle),le(yz),le(Bs),le(Rle),le(xle),le(pr),le(Xe),le(_t),le(va),le(zc),le(wle),le(Vn,8))},e.\u0275prov=Me({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Cle=new Ce("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=re(Lf);return()=>n.scrollStrategies.reposition()}});function Ele(n){return()=>n.scrollStrategies.reposition()}var Dle={provide:Cle,deps:[Lf],useFactory:Ele},xz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({providers:[Lf,Dle],imports:[xl,GB,R1,R1]});let n=e;return n})();var wz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({imports:[Mi,Vo,ix,Mi]});let n=e;return n})();var Ale=new Ce("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let n=re(Lf);return()=>n.scrollStrategies.reposition()}});function Ile(n){return()=>n.scrollStrategies.reposition()}var Ple={provide:Ale,deps:[Lf],useFactory:Ile};var zA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({providers:[Ple],imports:[Vo,xz,x1,Mi,iu,wz,x1,Mi]});let n=e;return n})();var HA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({imports:[Mi,eu]});let n=e;return n})();var kle=[pg,$g,bg,w1,qg,zA,P1,HA],Mz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({imports:[kle,pg,$g,bg,w1,qg,zA,P1,HA]});let n=e;return n})();function Sz(n){return new Pe(3e3,!1)}function Fle(){return new Pe(3100,!1)}function jle(){return new Pe(3101,!1)}function Ole(n){return new Pe(3001,!1)}function Nle(n){return new Pe(3003,!1)}function Lle(n){return new Pe(3004,!1)}function Ble(n,e){return new Pe(3005,!1)}function Ule(){return new Pe(3006,!1)}function Vle(){return new Pe(3007,!1)}function zle(n,e){return new Pe(3008,!1)}function Hle(n){return new Pe(3002,!1)}function Gle(n,e,i,t,r){return new Pe(3010,!1)}function Wle(){return new Pe(3011,!1)}function $le(){return new Pe(3012,!1)}function qle(){return new Pe(3200,!1)}function Xle(){return new Pe(3202,!1)}function Yle(){return new Pe(3013,!1)}function Zle(n){return new Pe(3014,!1)}function Qle(n){return new Pe(3015,!1)}function Kle(n){return new Pe(3016,!1)}function Jle(n,e){return new Pe(3404,!1)}function ede(n){return new Pe(3502,!1)}function tde(n){return new Pe(3503,!1)}function ide(){return new Pe(3300,!1)}function nde(n){return new Pe(3504,!1)}function rde(n){return new Pe(3301,!1)}function ode(n,e){return new Pe(3302,!1)}function sde(n){return new Pe(3303,!1)}function ade(n,e){return new Pe(3400,!1)}function cde(n){return new Pe(3401,!1)}function lde(n){return new Pe(3402,!1)}function dde(n,e){return new Pe(3505,!1)}function Al(n){switch(n.length){case 0:return new Sl;case 1:return n[0];default:return new vg(n)}}function Lz(n,e,i=new Map,t=new Map){let r=[],o=[],s=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),d=l==s,u=d&&a||new Map;c.forEach((h,f)=>{let p=f,b=h;if(f!=="offset")switch(p=n.normalizePropertyName(p,r),b){case bx:b=i.get(f);break;case ya:b=t.get(f);break;default:b=n.normalizeStyleValue(f,p,b,r);break}u.set(p,b)}),d||o.push(u),a=u,s=l}),r.length)throw ede(r);return o}function hI(n,e,i,t){switch(e){case"start":n.onStart(()=>t(i&&GA(i,"start",n)));break;case"done":n.onDone(()=>t(i&&GA(i,"done",n)));break;case"destroy":n.onDestroy(()=>t(i&&GA(i,"destroy",n)));break}}function GA(n,e,i){let t=i.totalTime,r=!!i.disabled,o=fI(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t??n.totalTime,r),s=n._data;return s!=null&&(o._data=s),o}function fI(n,e,i,t,r="",o=0,s){return{element:n,triggerName:e,fromState:i,toState:t,phaseName:r,totalTime:o,disabled:!!s}}function Io(n,e,i){let t=n.get(e);return t||n.set(e,t=i),t}function Rz(n){let e=n.indexOf(":"),i=n.substring(1,e),t=n.slice(e+1);return[i,t]}var ude=typeof document>"u"?null:document.documentElement;function mI(n){let e=n.parentNode||n.host||null;return e===ude?null:e}function hde(n){return n.substring(1,6)=="ebkit"}var lu=null,Tz=!1;function fde(n){lu||(lu=mde()||{},Tz=lu.style?"WebkitAppearance"in lu.style:!1);let e=!0;return lu.style&&!hde(n)&&(e=n in lu.style,!e&&Tz&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in lu.style)),e}function mde(){return typeof document<"u"?document.body:null}function Bz(n,e){for(;e;){if(e===n)return!0;e=mI(e)}return!1}function Uz(n,e,i){if(i)return Array.from(n.querySelectorAll(e));let t=n.querySelector(e);return t?[t]:[]}var pI=(()=>{let e=class e{validateStyleProperty(t){return fde(t)}matchesElement(t,r){return!1}containsElement(t,r){return Bz(t,r)}getParentElement(t){return mI(t)}query(t,r,o){return Uz(t,r,o)}computeStyle(t,r,o){return o||""}animate(t,r,o,s,a,c=[],l){return new Sl(o,s)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})(),vI=class vI{};vI.NOOP=new pI;var hu=vI,fu=class{};var pde=1e3,Vz="{{",gde="}}",zz="ng-enter",ZA="ng-leave",sw="ng-trigger",uw=".ng-trigger",Cz="ng-animating",QA=".ng-animating";function Mc(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:KA(parseFloat(e[1]),e[2])}function KA(n,e){switch(e){case"s":return n*pde;default:return n}}function hw(n,e,i){return n.hasOwnProperty("duration")?n:bde(n,e,i)}function bde(n,e,i){let t=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof n=="string"){let a=n.match(t);if(a===null)return e.push(Sz(n)),{duration:0,delay:0,easing:""};r=KA(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(o=KA(parseFloat(c),a[4]));let l=a[5];l&&(s=l)}else r=n;if(!i){let a=!1,c=e.length;r<0&&(e.push(Fle()),a=!0),o<0&&(e.push(jle()),a=!0),a&&e.splice(c,0,Sz(n))}return{duration:r,delay:o,easing:s}}function _de(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Ca(n,e,i){e.forEach((t,r)=>{let o=gI(r);i&&!i.has(r)&&i.set(r,n.style[o]),n.style[o]=t})}function uu(n,e){e.forEach((i,t)=>{let r=gI(t);n.style[r]=""})}function Xg(n){return Array.isArray(n)?n.length==1?n[0]:WB(n):n}function vde(n,e,i){let t=e.params||{},r=Hz(n);r.length&&r.forEach(o=>{t.hasOwnProperty(o)||i.push(Ole(o))})}var JA=new RegExp(`${Vz}\\s*(.+?)\\s*${gde}`,"g");function Hz(n){let e=[];if(typeof n=="string"){let i;for(;i=JA.exec(n);)e.push(i[1]);JA.lastIndex=0}return e}function Zg(n,e,i){let t=`${n}`,r=t.replace(JA,(o,s)=>{let a=e[s];return a==null&&(i.push(Nle(s)),a=""),a.toString()});return r==t?n:r}var yde=/-+([a-z0-9])/g;function gI(n){return n.replace(yde,(...e)=>e[1].toUpperCase())}function xde(n,e){return n===0||e===0}function wde(n,e,i){if(i.size&&e.length){let t=e[0],r=[];if(i.forEach((o,s)=>{t.has(s)||r.push(s),t.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,bI(n,a)))}}return e}function Ao(n,e,i){switch(e.type){case ei.Trigger:return n.visitTrigger(e,i);case ei.State:return n.visitState(e,i);case ei.Transition:return n.visitTransition(e,i);case ei.Sequence:return n.visitSequence(e,i);case ei.Group:return n.visitGroup(e,i);case ei.Animate:return n.visitAnimate(e,i);case ei.Keyframes:return n.visitKeyframes(e,i);case ei.Style:return n.visitStyle(e,i);case ei.Reference:return n.visitReference(e,i);case ei.AnimateChild:return n.visitAnimateChild(e,i);case ei.AnimateRef:return n.visitAnimateRef(e,i);case ei.Query:return n.visitQuery(e,i);case ei.Stagger:return n.visitStagger(e,i);default:throw Lle(e.type)}}function bI(n,e){return window.getComputedStyle(n)[e]}var Mde=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),fw=class extends fu{normalizePropertyName(e,i){return gI(e)}normalizeStyleValue(e,i,t,r){let o="",s=t.toString().trim();if(Mde.has(i)&&t!==0&&t!=="0")if(typeof t=="number")o="px";else{let a=t.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(Ble(e,t))}return s+o}};var mw="*";function Sde(n,e){let i=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(t=>Rde(t,i,e)):i.push(n),i}function Rde(n,e,i){if(n[0]==":"){let c=Tde(n,i);if(typeof c=="function"){e.push(c);return}n=c}let t=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(t==null||t.length<4)return i.push(Qle(n)),e;let r=t[1],o=t[2],s=t[3];e.push(Ez(r,s));let a=r==mw&&s==mw;o[0]=="<"&&!a&&e.push(Ez(s,r))}function Tde(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(i,t)=>parseFloat(t)>parseFloat(i);case":decrement":return(i,t)=>parseFloat(t)<parseFloat(i);default:return e.push(Kle(n)),"* => *"}}var aw=new Set(["true","1"]),cw=new Set(["false","0"]);function Ez(n,e){let i=aw.has(n)||cw.has(n),t=aw.has(e)||cw.has(e);return(r,o)=>{let s=n==mw||n==r,a=e==mw||e==o;return!s&&i&&typeof r=="boolean"&&(s=r?aw.has(n):cw.has(n)),!a&&t&&typeof o=="boolean"&&(a=o?aw.has(e):cw.has(e)),s&&a}}var Gz=":self",Cde=new RegExp(`s*${Gz}s*,?`,"g");function Wz(n,e,i,t){return new eI(n).build(e,i,t)}var Dz="",eI=class{constructor(e){this._driver=e}build(e,i,t){let r=new tI(i);return this._resetContextStyleTimingState(r),Ao(this,Xg(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=Dz,e.collectedStyles=new Map,e.collectedStyles.set(Dz,new Map),e.currentTime=0}visitTrigger(e,i){let t=i.queryCount=0,r=i.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&i.errors.push(Ule()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(i),a.type==ei.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(d=>{c.name=d,o.push(this.visitState(c,i))}),c.name=l}else if(a.type==ei.Transition){let c=this.visitTransition(a,i);t+=c.queryCount,r+=c.depCount,s.push(c)}else i.errors.push(Vle())}),{type:ei.Trigger,name:e.name,states:o,transitions:s,queryCount:t,depCount:r,options:null}}visitState(e,i){let t=this.visitStyle(e.styles,i),r=e.options&&e.options.params||null;if(t.containsDynamicStyles){let o=new Set,s=r||{};t.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{Hz(c).forEach(l=>{s.hasOwnProperty(l)||o.add(l)})})}),o.size&&i.errors.push(zle(e.name,[...o.values()]))}return{type:ei.State,name:e.name,style:t,options:r?{params:r}:null}}visitTransition(e,i){i.queryCount=0,i.depCount=0;let t=Ao(this,Xg(e.animation),i),r=Sde(e.expr,i.errors);return{type:ei.Transition,matchers:r,animation:t,queryCount:i.queryCount,depCount:i.depCount,options:du(e.options)}}visitSequence(e,i){return{type:ei.Sequence,steps:e.steps.map(t=>Ao(this,t,i)),options:du(e.options)}}visitGroup(e,i){let t=i.currentTime,r=0,o=e.steps.map(s=>{i.currentTime=t;let a=Ao(this,s,i);return r=Math.max(r,i.currentTime),a});return i.currentTime=r,{type:ei.Group,steps:o,options:du(e.options)}}visitAnimate(e,i){let t=Ide(e.timings,i.errors);i.currentAnimateTimings=t;let r,o=e.styles?e.styles:Xo({});if(o.type==ei.Keyframes)r=this.visitKeyframes(o,i);else{let s=e.styles,a=!1;if(!s){a=!0;let l={};t.easing&&(l.easing=t.easing),s=Xo(l)}i.currentTime+=t.duration+t.delay;let c=this.visitStyle(s,i);c.isEmptyStep=a,r=c}return i.currentAnimateTimings=null,{type:ei.Animate,timings:t,style:r,options:null}}visitStyle(e,i){let t=this._makeStyleAst(e,i);return this._validateStyleAst(t,i),t}_makeStyleAst(e,i){let t=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===ya?t.push(a):i.errors.push(Hle(a)):t.push(new Map(Object.entries(a)));let o=!1,s=null;return t.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let c of a.values())if(c.toString().indexOf(Vz)>=0){o=!0;break}}}),{type:ei.Style,styles:t,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,i){let t=i.currentAnimateTimings,r=i.currentTime,o=i.currentTime;t&&o>0&&(o-=t.duration+t.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,c)=>{let l=i.collectedStyles.get(i.currentQuerySelector),d=l.get(c),u=!0;d&&(o!=r&&o>=d.startTime&&r<=d.endTime&&(i.errors.push(Gle(c,d.startTime,d.endTime,o,r)),u=!1),o=d.startTime),u&&l.set(c,{startTime:o,endTime:r}),i.options&&vde(a,i.options,i.errors)})})}visitKeyframes(e,i){let t={type:ei.Keyframes,styles:[],options:null};if(!i.currentAnimateTimings)return i.errors.push(Wle()),t;let r=1,o=0,s=[],a=!1,c=!1,l=0,d=e.steps.map(g=>{let v=this._makeStyleAst(g,i),_=v.offset!=null?v.offset:Ade(v.styles),y=0;return _!=null&&(o++,y=v.offset=_),c=c||y<0||y>1,a=a||y<l,l=y,s.push(y),v});c&&i.errors.push($le()),a&&i.errors.push(qle());let u=e.steps.length,h=0;o>0&&o<u?i.errors.push(Xle()):o==0&&(h=r/(u-1));let f=u-1,p=i.currentTime,b=i.currentAnimateTimings,m=b.duration;return d.forEach((g,v)=>{let _=h>0?v==f?1:h*v:s[v],y=_*m;i.currentTime=p+b.delay+y,b.duration=y,this._validateStyleAst(g,i),g.offset=_,t.styles.push(g)}),t}visitReference(e,i){return{type:ei.Reference,animation:Ao(this,Xg(e.animation),i),options:du(e.options)}}visitAnimateChild(e,i){return i.depCount++,{type:ei.AnimateChild,options:du(e.options)}}visitAnimateRef(e,i){return{type:ei.AnimateRef,animation:this.visitReference(e.animation,i),options:du(e.options)}}visitQuery(e,i){let t=i.currentQuerySelector,r=e.options||{};i.queryCount++,i.currentQuery=e;let[o,s]=Ede(e.selector);i.currentQuerySelector=t.length?t+" "+o:o,Io(i.collectedStyles,i.currentQuerySelector,new Map);let a=Ao(this,Xg(e.animation),i);return i.currentQuery=null,i.currentQuerySelector=t,{type:ei.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:du(e.options)}}visitStagger(e,i){i.currentQuery||i.errors.push(Yle());let t=e.timings==="full"?{duration:0,delay:0,easing:"full"}:hw(e.timings,i.errors,!0);return{type:ei.Stagger,animation:Ao(this,Xg(e.animation),i),timings:t,options:null}}};function Ede(n){let e=!!n.split(/\s*,\s*/).find(i=>i==Gz);return e&&(n=n.replace(Cde,"")),n=n.replace(/@\*/g,uw).replace(/@\w+/g,i=>uw+"-"+i.slice(1)).replace(/:animating/g,QA),[n,e]}function Dde(n){return n?xe({},n):null}var tI=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function Ade(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(i=>{if(i instanceof Map&&i.has("offset")){let t=i;e=parseFloat(t.get("offset")),t.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let i=n;e=parseFloat(i.get("offset")),i.delete("offset")}return e}function Ide(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=hw(n,e).duration;return WA(o,0,"")}let i=n;if(i.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=WA(0,0,"");return o.dynamic=!0,o.strValue=i,o}let r=hw(i,e);return WA(r.duration,r.delay,r.easing)}function du(n){return n?(n=xe({},n),n.params&&(n.params=Dde(n.params))):n={},n}function WA(n,e,i){return{duration:n,delay:e,easing:i}}function _I(n,e,i,t,r,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:i,postStyleProps:t,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var Qg=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,i){let t=this._map.get(e);t||this._map.set(e,t=[]),t.push(...i)}has(e){return this._map.has(e)}clear(){this._map.clear()}},Pde=1,kde=":enter",Fde=new RegExp(kde,"g"),jde=":leave",Ode=new RegExp(jde,"g");function $z(n,e,i,t,r,o=new Map,s=new Map,a,c,l=[]){return new iI().buildKeyframes(n,e,i,t,r,o,s,a,c,l)}var iI=class{buildKeyframes(e,i,t,r,o,s,a,c,l,d=[]){l=l||new Qg;let u=new nI(e,i,l,r,o,d,[]);u.options=c;let h=c.delay?Mc(c.delay):0;u.currentTimeline.delayNextStep(h),u.currentTimeline.setStyles([s],null,u.errors,c),Ao(this,t,u);let f=u.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let b=f.length-1;b>=0;b--){let m=f[b];if(m.element===i){p=m;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,u.errors,c)}return f.length?f.map(p=>p.buildKeyframes()):[_I(i,[],[],[],0,h,"",!1)]}visitTrigger(e,i){}visitState(e,i){}visitTransition(e,i){}visitAnimateChild(e,i){let t=i.subInstructions.get(i.element);if(t){let r=i.createSubContext(e.options),o=i.currentTimeline.currentTime,s=this._visitSubInstructions(t,r,r.options);o!=s&&i.transformIntoNewTimeline(s)}i.previousNode=e}visitAnimateRef(e,i){let t=i.createSubContext(e.options);t.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],i,t),this.visitReference(e.animation,t),i.transformIntoNewTimeline(t.currentTimeline.currentTime),i.previousNode=e}_applyAnimationRefDelays(e,i,t){for(let r of e){let o=r?.delay;if(o){let s=typeof o=="number"?o:Mc(Zg(o,r?.params??{},i.errors));t.delayNextStep(s)}}}_visitSubInstructions(e,i,t){let o=i.currentTimeline.currentTime,s=t.duration!=null?Mc(t.duration):null,a=t.delay!=null?Mc(t.delay):null;return s!==0&&e.forEach(c=>{let l=i.appendInstructionToTimeline(c,s,a);o=Math.max(o,l.duration+l.delay)}),o}visitReference(e,i){i.updateOptions(e.options,!0),Ao(this,e.animation,i),i.previousNode=e}visitSequence(e,i){let t=i.subContextCount,r=i,o=e.options;if(o&&(o.params||o.delay)&&(r=i.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==ei.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=pw);let s=Mc(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>Ao(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>t&&r.transformIntoNewTimeline()),i.previousNode=e}visitGroup(e,i){let t=[],r=i.currentTimeline.currentTime,o=e.options&&e.options.delay?Mc(e.options.delay):0;e.steps.forEach(s=>{let a=i.createSubContext(e.options);o&&a.delayNextStep(o),Ao(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),t.push(a.currentTimeline)}),t.forEach(s=>i.currentTimeline.mergeTimelineCollectedStyles(s)),i.transformIntoNewTimeline(r),i.previousNode=e}_visitTiming(e,i){if(e.dynamic){let t=e.strValue,r=i.params?Zg(t,i.params,i.errors):t;return hw(r,i.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,i){let t=i.currentAnimateTimings=this._visitTiming(e.timings,i),r=i.currentTimeline;t.delay&&(i.incrementTime(t.delay),r.snapshotCurrentStyles());let o=e.style;o.type==ei.Keyframes?this.visitKeyframes(o,i):(i.incrementTime(t.duration),this.visitStyle(o,i),r.applyStylesToKeyframe()),i.currentAnimateTimings=null,i.previousNode=e}visitStyle(e,i){let t=i.currentTimeline,r=i.currentAnimateTimings;!r&&t.hasCurrentStyleProperties()&&t.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?t.applyEmptyStep(o):t.setStyles(e.styles,o,i.errors,i.options),i.previousNode=e}visitKeyframes(e,i){let t=i.currentAnimateTimings,r=i.currentTimeline.duration,o=t.duration,a=i.createSubContext().currentTimeline;a.easing=t.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*o),a.setStyles(c.styles,c.easing,i.errors,i.options),a.applyStylesToKeyframe()}),i.currentTimeline.mergeTimelineCollectedStyles(a),i.transformIntoNewTimeline(r+o),i.previousNode=e}visitQuery(e,i){let t=i.currentTimeline.currentTime,r=e.options||{},o=r.delay?Mc(r.delay):0;o&&(i.previousNode.type===ei.Style||t==0&&i.currentTimeline.hasCurrentStyleProperties())&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=pw);let s=t,a=i.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,i.errors);i.currentQueryTotal=a.length;let c=null;a.forEach((l,d)=>{i.currentQueryIndex=d;let u=i.createSubContext(e.options,l);o&&u.delayNextStep(o),l===i.element&&(c=u.currentTimeline),Ao(this,e.animation,u),u.currentTimeline.applyStylesToKeyframe();let h=u.currentTimeline.currentTime;s=Math.max(s,h)}),i.currentQueryIndex=0,i.currentQueryTotal=0,i.transformIntoNewTimeline(s),c&&(i.currentTimeline.mergeTimelineCollectedStyles(c),i.currentTimeline.snapshotCurrentStyles()),i.previousNode=e}visitStagger(e,i){let t=i.parentContext,r=i.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(i.currentQueryTotal-1),c=s*i.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=t.currentStaggerTime;break}let d=i.currentTimeline;c&&d.delayNextStep(c);let u=d.currentTime;Ao(this,e.animation,i),i.previousNode=e,t.currentStaggerTime=r.currentTime-u+(r.startTime-t.currentTimeline.startTime)}},pw={},nI=class n{constructor(e,i,t,r,o,s,a,c){this._driver=e,this.element=i,this.subInstructions=t,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=pw,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new gw(this._driver,i,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,i){if(!e)return;let t=e,r=this.options;t.duration!=null&&(r.duration=Mc(t.duration)),t.delay!=null&&(r.delay=Mc(t.delay));let o=t.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!i||!s.hasOwnProperty(a))&&(s[a]=Zg(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let i=this.options.params;if(i){let t=e.params={};Object.keys(i).forEach(r=>{t[r]=i[r]})}}return e}createSubContext(e=null,i,t){let r=i||this.element,o=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,t||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=pw,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,i,t){let r={duration:i??e.duration,delay:this.currentTimeline.currentTime+(t??0)+e.delay,easing:""},o=new rI(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,i,t,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(Fde,"."+this._enterClassName),e=e.replace(Ode,"."+this._leaveClassName);let c=t!=1,l=this._driver.query(this.element,e,c);t!==0&&(l=t<0?l.slice(l.length+t,l.length):l.slice(0,t)),a.push(...l)}return!o&&a.length==0&&s.push(Zle(i)),a}},gw=class n{constructor(e,i,t,r){this._driver=e,this.element=i,this.startTime=t,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(i),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(i,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let i=this._keyframes.size===1&&this._pendingStyles.size;this.duration||i?(this.forwardTime(this.currentTime+e),i&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,i){return this.applyStylesToKeyframe(),new n(this._driver,e,i||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Pde,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,i){this._localTimelineStyles.set(e,i),this._globalTimelineStyles.set(e,i),this._styleSummary.set(e,{time:this.currentTime,value:i})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[i,t]of this._globalTimelineStyles)this._backFill.set(i,t||ya),this._currentKeyframe.set(i,ya);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,i,t,r){i&&this._previousKeyframe.set("easing",i);let o=r&&r.params||{},s=Nde(e,this._globalTimelineStyles);for(let[a,c]of s){let l=Zg(c,o,t);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ya),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,i)=>{this._currentKeyframe.set(i,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,i)=>{this._currentKeyframe.has(i)||this._currentKeyframe.set(i,e)}))}snapshotCurrentStyles(){for(let[e,i]of this._localTimelineStyles)this._pendingStyles.set(e,i),this._updateStyle(e,i)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let i in this._currentKeyframe)e.push(i);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((i,t)=>{let r=this._styleSummary.get(t);(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,i=new Set,t=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((d,u)=>{d===bx?e.add(u):d===ya&&i.add(u)}),t||l.set("offset",c/this.duration),r.push(l)});let o=[...e.values()],s=[...i.values()];if(t){let a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return _I(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},rI=class extends gw{constructor(e,i,t,r,o,s,a=!1){super(e,i,s.delay),this.keyframes=t,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:i,duration:t,easing:r}=this.timings;if(this._stretchStartingKeyframe&&i){let o=[],s=t+i,a=i/s,c=new Map(e[0]);c.set("offset",0),o.push(c);let l=new Map(e[0]);l.set("offset",Az(a)),o.push(l);let d=e.length-1;for(let u=1;u<=d;u++){let h=new Map(e[u]),f=h.get("offset"),p=i+f*t;h.set("offset",Az(p/s)),o.push(h)}t=s,i=0,r="",e=o}return _I(this.element,e,this.preStyleProps,this.postStyleProps,t,i,r,!0)}};function Az(n,e=3){let i=Math.pow(10,e-1);return Math.round(n*i)/i}function Nde(n,e){let i=new Map,t;return n.forEach(r=>{if(r==="*"){t??=e.keys();for(let o of t)i.set(o,ya)}else for(let[o,s]of r)i.set(o,s)}),i}function Iz(n,e,i,t,r,o,s,a,c,l,d,u,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:i,fromStyles:o,toState:t,toStyles:s,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:d,totalTime:u,errors:h}}var $A={},bw=class{constructor(e,i,t){this._triggerName=e,this.ast=i,this._stateStyles=t}match(e,i,t,r){return Lde(this.ast.matchers,e,i,t,r)}buildStyles(e,i,t){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(i,t):new Map}build(e,i,t,r,o,s,a,c,l,d){let u=[],h=this.ast.options&&this.ast.options.params||$A,f=a&&a.params||$A,p=this.buildStyles(t,f,u),b=c&&c.params||$A,m=this.buildStyles(r,b,u),g=new Set,v=new Map,_=new Map,y=r==="void",C={params:qz(b,h),delay:this.ast.options?.delay},R=d?[]:$z(e,i,this.ast.animation,o,s,p,m,C,l,u),w=0;return R.forEach(A=>{w=Math.max(A.duration+A.delay,w)}),u.length?Iz(i,this._triggerName,t,r,y,p,m,[],[],v,_,w,u):(R.forEach(A=>{let S=A.element,x=Io(v,S,new Set);A.preStyleProps.forEach(V=>x.add(V));let F=Io(_,S,new Set);A.postStyleProps.forEach(V=>F.add(V)),S!==i&&g.add(S)}),Iz(i,this._triggerName,t,r,y,p,m,R,[...g.values()],v,_,w))}};function Lde(n,e,i,t,r){return n.some(o=>o(e,i,t,r))}function qz(n,e){let i=xe({},e);return Object.entries(n).forEach(([t,r])=>{r!=null&&(i[t]=r)}),i}var oI=class{constructor(e,i,t){this.styles=e,this.defaultParams=i,this.normalizer=t}buildStyles(e,i){let t=new Map,r=qz(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Zg(s,r,i));let c=this.normalizer.normalizePropertyName(a,i);s=this.normalizer.normalizeStyleValue(a,c,s,i),t.set(a,s)})}),t}};function Bde(n,e,i){return new sI(n,e,i)}var sI=class{constructor(e,i,t){this.name=e,this.ast=i,this._normalizer=t,this.transitionFactories=[],this.states=new Map,i.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new oI(r.style,o,t))}),Pz(this.states,"true","1"),Pz(this.states,"false","0"),i.transitions.forEach(r=>{this.transitionFactories.push(new bw(e,r,this.states))}),this.fallbackTransition=Ude(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,i,t,r){return this.transitionFactories.find(s=>s.match(e,i,t,r))||null}matchStyles(e,i,t){return this.fallbackTransition.buildStyles(e,i,t)}};function Ude(n,e,i){let t=[(s,a)=>!0],r={type:ei.Sequence,steps:[],options:null},o={type:ei.Transition,animation:r,matchers:t,options:null,queryCount:0,depCount:0};return new bw(n,o,e)}function Pz(n,e,i){n.has(e)?n.has(i)||n.set(i,n.get(e)):n.has(i)&&n.set(e,n.get(i))}var Vde=new Qg,aI=class{constructor(e,i,t){this.bodyNode=e,this._driver=i,this._normalizer=t,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,i){let t=[],r=[],o=Wz(this._driver,i,t,r);if(t.length)throw tde(t);r.length&&void 0,this._animations.set(e,o)}_buildPlayer(e,i,t){let r=e.element,o=Lz(this._normalizer,e.keyframes,i,t);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,i,t={}){let r=[],o=this._animations.get(e),s,a=new Map;if(o?(s=$z(this._driver,i,o,zz,ZA,new Map,new Map,t,Vde,r),s.forEach(d=>{let u=Io(a,d.element,new Map);d.postStyleProps.forEach(h=>u.set(h,null))})):(r.push(ide()),s=[]),r.length)throw nde(r);a.forEach((d,u)=>{d.forEach((h,f)=>{d.set(f,this._driver.computeStyle(u,f,ya))})});let c=s.map(d=>{let u=a.get(d.element);return this._buildPlayer(d,new Map,u)}),l=Al(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let i=this._getPlayer(e);i.destroy(),this._playersById.delete(e);let t=this.players.indexOf(i);t>=0&&this.players.splice(t,1)}_getPlayer(e){let i=this._playersById.get(e);if(!i)throw rde(e);return i}listen(e,i,t,r){let o=fI(i,"","","");return hI(this._getPlayer(e),t,o,r),()=>{}}command(e,i,t,r){if(t=="register"){this.register(e,r[0]);return}if(t=="create"){let s=r[0]||{};this.create(e,i,s);return}let o=this._getPlayer(e);switch(t){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},kz="ng-animate-queued",zde=".ng-animate-queued",qA="ng-animate-disabled",Hde=".ng-animate-disabled",Gde="ng-star-inserted",Wde=".ng-star-inserted",$de=[],Xz={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},qde={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Cs="__ng_removed",Kg=class{get params(){return this.options.params}constructor(e,i=""){this.namespaceId=i;let t=e&&e.hasOwnProperty("value"),r=t?e.value:e;if(this.value=Yde(r),t){let o=e,{value:s}=o,a=Rw(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let i=e.params;if(i){let t=this.options.params;Object.keys(i).forEach(r=>{t[r]==null&&(t[r]=i[r])})}}},Yg="void",XA=new Kg(Yg),cI=class{constructor(e,i,t){this.id=e,this.hostElement=i,this._engine=t,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Zo(i,this._hostClassName)}listen(e,i,t,r){if(!this._triggers.has(i))throw ode(t,i);if(t==null||t.length==0)throw sde(i);if(!Zde(t))throw ade(t,i);let o=Io(this._elementListeners,e,[]),s={name:i,phase:t,callback:r};o.push(s);let a=Io(this._engine.statesByElement,e,new Map);return a.has(i)||(Zo(e,sw),Zo(e,sw+"-"+i),a.set(i,XA)),()=>{this._engine.afterFlush(()=>{let c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(i)||a.delete(i)})}}register(e,i){return this._triggers.has(e)?!1:(this._triggers.set(e,i),!0)}_getTrigger(e){let i=this._triggers.get(e);if(!i)throw cde(e);return i}trigger(e,i,t,r=!0){let o=this._getTrigger(i),s=new Jg(this.id,i,e),a=this._engine.statesByElement.get(e);a||(Zo(e,sw),Zo(e,sw+"-"+i),this._engine.statesByElement.set(e,a=new Map));let c=a.get(i),l=new Kg(t,this.id);if(!(t&&t.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(i,l),c||(c=XA),!(l.value===Yg)&&c.value===l.value){if(!Jde(c.params,l.params)){let b=[],m=o.matchStyles(c.value,c.params,b),g=o.matchStyles(l.value,l.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{uu(e,m),Ca(e,g)})}return}let h=Io(this._engine.playersByElement,e,[]);h.forEach(b=>{b.namespaceId==this.id&&b.triggerName==i&&b.queued&&b.destroy()});let f=o.matchTransition(c.value,l.value,e,l.params),p=!1;if(!f){if(!r)return;f=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:i,transition:f,fromState:c,toState:l,player:s,isFallbackTransition:p}),p||(Zo(e,kz),s.onStart(()=>{Bf(e,kz)})),s.onDone(()=>{let b=this.players.indexOf(s);b>=0&&this.players.splice(b,1);let m=this._engine.playersByElement.get(e);if(m){let g=m.indexOf(s);g>=0&&m.splice(g,1)}}),this.players.push(s),h.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(i=>i.delete(e)),this._elementListeners.forEach((i,t)=>{this._elementListeners.set(t,i.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let i=this._engine.playersByElement.get(e);i&&(i.forEach(t=>t.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,i){let t=this._engine.driver.query(e,uw,!0);t.forEach(r=>{if(r[Cs])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,i,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>t.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,i,t,r){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((c,l)=>{if(s.set(l,c.value),this._triggers.has(l)){let d=this.trigger(e,l,Yg,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,i,s),t&&Al(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let i=this._elementListeners.get(e),t=this._engine.statesByElement.get(e);if(i&&t){let r=new Set;i.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let c=this._triggers.get(s).fallbackTransition,l=t.get(s)||XA,d=new Kg(Yg),u=new Jg(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:l,toState:d,player:u,isFallbackTransition:!0})})}}removeNode(e,i){let t=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,i),this.triggerLeaveAnimation(e,i,!0))return;let r=!1;if(t.totalAnimations){let o=t.players.length?t.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(t.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)t.markElementAsRemoved(this.id,e,!1,i);else{let o=e[Cs];(!o||o===Xz)&&(t.afterFlush(()=>this.clearElementCache(e)),t.destroyInnerAnimations(e),t._onRemovalComplete(e,i))}}insertNode(e,i){Zo(e,this._hostClassName)}drainQueuedTransitions(e){let i=[];return this._queue.forEach(t=>{let r=t.player;if(r.destroyed)return;let o=t.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==t.triggerName){let c=fI(o,t.triggerName,t.fromState.value,t.toState.value);c._data=e,hI(t.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):i.push(t)}),this._queue=[],i.sort((t,r)=>{let o=t.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(t.element,r.element)?1:-1})}destroy(e){this.players.forEach(i=>i.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},lI=class{_onRemovalComplete(e,i){this.onRemovalComplete(e,i)}constructor(e,i,t,r){this.bodyNode=e,this.driver=i,this._normalizer=t,this.scheduler=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(i=>{i.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,i){let t=new cI(e,i,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,i)?this._balanceNamespaceList(t,i):(this.newHostElements.set(i,t),this.collectEnterElement(i)),this._namespaceLookup[e]=t}_balanceNamespaceList(e,i){let t=this._namespaceList,r=this.namespacesByHostElement;if(t.length-1>=0){let s=!1,a=this.driver.getParentElement(i);for(;a;){let c=r.get(a);if(c){let l=t.indexOf(c);t.splice(l+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||t.unshift(e)}else t.push(e);return r.set(i,e),e}register(e,i){let t=this._namespaceLookup[e];return t||(t=this.createNamespace(e,i)),t}registerTrigger(e,i,t){let r=this._namespaceLookup[e];r&&r.register(i,t)&&this.totalAnimations++}destroy(e,i){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let t=this._fetchNamespace(e);this.namespacesByHostElement.delete(t.hostElement);let r=this._namespaceList.indexOf(t);r>=0&&this._namespaceList.splice(r,1),t.destroy(i),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let i=new Set,t=this.statesByElement.get(e);if(t){for(let r of t.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&i.add(o)}}return i}trigger(e,i,t,r){if(lw(i)){let o=this._fetchNamespace(e);if(o)return o.trigger(i,t,r),!0}return!1}insertNode(e,i,t,r){if(!lw(i))return;let o=i[Cs];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(i);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(i,t)}r&&this.collectEnterElement(i)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,i){i?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Zo(e,qA)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Bf(e,qA))}removeNode(e,i,t){if(lw(i)){this.scheduler?.notify();let r=e?this._fetchNamespace(e):null;r?r.removeNode(i,t):this.markElementAsRemoved(e,i,!1,t);let o=this.namespacesByHostElement.get(i);o&&o.id!==e&&o.removeNode(i,t)}else this._onRemovalComplete(i,t)}markElementAsRemoved(e,i,t,r,o){this.collectedLeaveElements.push(i),i[Cs]={namespaceId:e,setForRemoval:r,hasAnimation:t,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,i,t,r,o){return lw(i)?this._fetchNamespace(e).listen(i,t,r,o):()=>{}}_buildInstruction(e,i,t,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,t,r,e.fromState.options,e.toState.options,i,o)}destroyInnerAnimations(e){let i=this.driver.query(e,uw,!0);i.forEach(t=>this.destroyActiveAnimationsForElement(t)),this.playersByQueriedElement.size!=0&&(i=this.driver.query(e,QA,!0),i.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(e){let i=this.playersByElement.get(e);i&&i.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(e){let i=this.playersByQueriedElement.get(e);i&&i.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Al(this.players).onDone(()=>e());e()})}processLeaveNode(e){let i=e[Cs];if(i&&i.setForRemoval){if(e[Cs]=Xz,i.namespaceId){this.destroyInnerAnimations(e);let t=this._fetchNamespace(i.namespaceId);t&&t.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}e.classList?.contains(qA)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Hde,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(e=-1){let i=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,r)=>this._balanceNamespaceList(t,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let t=0;t<this.collectedEnterElements.length;t++){let r=this.collectedEnterElements[t];Zo(r,Gde)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let t=[];try{i=this._flushAnimations(t,e)}finally{for(let r=0;r<t.length;r++)t[r]()}}else for(let t=0;t<this.collectedLeaveElements.length;t++){let r=this.collectedLeaveElements[t];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){let t=this._whenQuietFns;this._whenQuietFns=[],i.length?Al(i).onDone(()=>{t.forEach(r=>r())}):t.forEach(r=>r())}}reportError(e){throw lde(e)}_flushAnimations(e,i){let t=new Qg,r=[],o=new Map,s=[],a=new Map,c=new Map,l=new Map,d=new Set;this.disabledNodes.forEach(G=>{d.add(G);let $=this.driver.query(G,zde,!0);for(let U=0;U<$.length;U++)d.add($[U])});let u=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=Oz(h,this.collectedEnterElements),p=new Map,b=0;f.forEach((G,$)=>{let U=zz+b++;p.set($,U),G.forEach(Z=>Zo(Z,U))});let m=[],g=new Set,v=new Set;for(let G=0;G<this.collectedLeaveElements.length;G++){let $=this.collectedLeaveElements[G],U=$[Cs];U&&U.setForRemoval&&(m.push($),g.add($),U.hasAnimation?this.driver.query($,Wde,!0).forEach(Z=>g.add(Z)):v.add($))}let _=new Map,y=Oz(h,Array.from(g));y.forEach((G,$)=>{let U=ZA+b++;_.set($,U),G.forEach(Z=>Zo(Z,U))}),e.push(()=>{f.forEach((G,$)=>{let U=p.get($);G.forEach(Z=>Bf(Z,U))}),y.forEach((G,$)=>{let U=_.get($);G.forEach(Z=>Bf(Z,U))}),m.forEach(G=>{this.processLeaveNode(G)})});let C=[],R=[];for(let G=this._namespaceList.length-1;G>=0;G--)this._namespaceList[G].drainQueuedTransitions(i).forEach(U=>{let Z=U.player,me=U.element;if(C.push(Z),this.collectedEnterElements.length){let N=me[Cs];if(N&&N.setForMove){if(N.previousTriggersValues&&N.previousTriggersValues.has(U.triggerName)){let Se=N.previousTriggersValues.get(U.triggerName),Oe=this.statesByElement.get(U.element);if(Oe&&Oe.has(U.triggerName)){let B=Oe.get(U.triggerName);B.value=Se,Oe.set(U.triggerName,B)}}Z.destroy();return}}let ke=!u||!this.driver.containsElement(u,me),$e=_.get(me),vt=p.get(me),Y=this._buildInstruction(U,t,vt,$e,ke);if(Y.errors&&Y.errors.length){R.push(Y);return}if(ke){Z.onStart(()=>uu(me,Y.fromStyles)),Z.onDestroy(()=>Ca(me,Y.toStyles)),r.push(Z);return}if(U.isFallbackTransition){Z.onStart(()=>uu(me,Y.fromStyles)),Z.onDestroy(()=>Ca(me,Y.toStyles)),r.push(Z);return}let Ae=[];Y.timelines.forEach(N=>{N.stretchStartingKeyframe=!0,this.disabledNodes.has(N.element)||Ae.push(N)}),Y.timelines=Ae,t.append(me,Y.timelines);let Ge={instruction:Y,player:Z,element:me};s.push(Ge),Y.queriedElements.forEach(N=>Io(a,N,[]).push(Z)),Y.preStyleProps.forEach((N,Se)=>{if(N.size){let Oe=c.get(Se);Oe||c.set(Se,Oe=new Set),N.forEach((B,yt)=>Oe.add(yt))}}),Y.postStyleProps.forEach((N,Se)=>{let Oe=l.get(Se);Oe||l.set(Se,Oe=new Set),N.forEach((B,yt)=>Oe.add(yt))})});if(R.length){let G=[];R.forEach($=>{G.push(dde($.triggerName,$.errors))}),C.forEach($=>$.destroy()),this.reportError(G)}let w=new Map,A=new Map;s.forEach(G=>{let $=G.element;t.has($)&&(A.set($,$),this._beforeAnimationBuild(G.player.namespaceId,G.instruction,w))}),r.forEach(G=>{let $=G.element;this._getPreviousPlayers($,!1,G.namespaceId,G.triggerName,null).forEach(Z=>{Io(w,$,[]).push(Z),Z.destroy()})});let S=m.filter(G=>Nz(G,c,l)),x=new Map;jz(x,this.driver,v,l,ya).forEach(G=>{Nz(G,c,l)&&S.push(G)});let V=new Map;f.forEach((G,$)=>{jz(V,this.driver,new Set(G),c,bx)}),S.forEach(G=>{let $=x.get(G),U=V.get(G);x.set(G,new Map([...$?.entries()??[],...U?.entries()??[]]))});let O=[],K=[],ne={};s.forEach(G=>{let{element:$,player:U,instruction:Z}=G;if(t.has($)){if(d.has($)){U.onDestroy(()=>Ca($,Z.toStyles)),U.disabled=!0,U.overrideTotalTime(Z.totalTime),r.push(U);return}let me=ne;if(A.size>1){let $e=$,vt=[];for(;$e=$e.parentNode;){let Y=A.get($e);if(Y){me=Y;break}vt.push($e)}vt.forEach(Y=>A.set(Y,me))}let ke=this._buildAnimation(U.namespaceId,Z,w,o,V,x);if(U.setRealPlayer(ke),me===ne)O.push(U);else{let $e=this.playersByElement.get(me);$e&&$e.length&&(U.parentPlayer=Al($e)),r.push(U)}}else uu($,Z.fromStyles),U.onDestroy(()=>Ca($,Z.toStyles)),K.push(U),d.has($)&&r.push(U)}),K.forEach(G=>{let $=o.get(G.element);if($&&$.length){let U=Al($);G.setRealPlayer(U)}}),r.forEach(G=>{G.parentPlayer?G.syncPlayerEvents(G.parentPlayer):G.destroy()});for(let G=0;G<m.length;G++){let $=m[G],U=$[Cs];if(Bf($,ZA),U&&U.hasAnimation)continue;let Z=[];if(a.size){let ke=a.get($);ke&&ke.length&&Z.push(...ke);let $e=this.driver.query($,QA,!0);for(let vt=0;vt<$e.length;vt++){let Y=a.get($e[vt]);Y&&Y.length&&Z.push(...Y)}}let me=Z.filter(ke=>!ke.destroyed);me.length?Qde(this,$,me):this.processLeaveNode($)}return m.length=0,O.forEach(G=>{this.players.push(G),G.onDone(()=>{G.destroy();let $=this.players.indexOf(G);this.players.splice($,1)}),G.play()}),O}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,i,t,r,o){let s=[];if(i){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let c=!o||o==Yg;a.forEach(l=>{l.queued||!c&&l.triggerName!=r||s.push(l)})}}return(t||r)&&(s=s.filter(a=>!(t&&t!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,i,t){let r=i.triggerName,o=i.element,s=i.isRemovalTransition?void 0:e,a=i.isRemovalTransition?void 0:r;for(let c of i.timelines){let l=c.element,d=l!==o,u=Io(t,l,[]);this._getPreviousPlayers(l,d,s,a,i.toState).forEach(f=>{let p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),u.push(f)})}uu(o,i.fromStyles)}_buildAnimation(e,i,t,r,o,s){let a=i.triggerName,c=i.element,l=[],d=new Set,u=new Set,h=i.timelines.map(p=>{let b=p.element;d.add(b);let m=b[Cs];if(m&&m.removedBeforeQueried)return new Sl(p.duration,p.delay);let g=b!==c,v=Kde((t.get(b)||$de).map(w=>w.getRealPlayer())).filter(w=>{let A=w;return A.element?A.element===b:!1}),_=o.get(b),y=s.get(b),C=Lz(this._normalizer,p.keyframes,_,y),R=this._buildPlayer(p,C,v);if(p.subTimeline&&r&&u.add(b),g){let w=new Jg(e,a,b);w.setRealPlayer(R),l.push(w)}return R});l.forEach(p=>{Io(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>Xde(this.playersByQueriedElement,p.element,p))}),d.forEach(p=>Zo(p,Cz));let f=Al(h);return f.onDestroy(()=>{d.forEach(p=>Bf(p,Cz)),Ca(c,i.toStyles)}),u.forEach(p=>{Io(r,p,[]).push(f)}),f}_buildPlayer(e,i,t){return i.length>0?this.driver.animate(e.element,i,e.duration,e.delay,e.easing,t):new Sl(e.duration,e.delay)}},Jg=class{constructor(e,i,t){this.namespaceId=e,this.triggerName=i,this.element=t,this._player=new Sl,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((i,t)=>{i.forEach(r=>hI(e,t,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let i=this._player;i.triggerCallback&&e.onStart(()=>i.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,i){Io(this._queuedCallbacks,e,[]).push(i)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let i=this._player;i.triggerCallback&&i.triggerCallback(e)}};function Xde(n,e,i){let t=n.get(e);if(t){if(t.length){let r=t.indexOf(i);t.splice(r,1)}t.length==0&&n.delete(e)}return t}function Yde(n){return n??null}function lw(n){return n&&n.nodeType===1}function Zde(n){return n=="start"||n=="done"}function Fz(n,e){let i=n.style.display;return n.style.display=e??"none",i}function jz(n,e,i,t,r){let o=[];i.forEach(c=>o.push(Fz(c)));let s=[];t.forEach((c,l)=>{let d=new Map;c.forEach(u=>{let h=e.computeStyle(l,u,r);d.set(u,h),(!h||h.length==0)&&(l[Cs]=qde,s.push(l))}),n.set(l,d)});let a=0;return i.forEach(c=>Fz(c,o[a++])),s}function Oz(n,e){let i=new Map;if(n.forEach(a=>i.set(a,[])),e.length==0)return i;let t=1,r=new Set(e),o=new Map;function s(a){if(!a)return t;let c=o.get(a);if(c)return c;let l=a.parentNode;return i.has(l)?c=l:r.has(l)?c=t:c=s(l),o.set(a,c),c}return e.forEach(a=>{let c=s(a);c!==t&&i.get(c).push(a)}),i}function Zo(n,e){n.classList?.add(e)}function Bf(n,e){n.classList?.remove(e)}function Qde(n,e,i){Al(i).onDone(()=>n.processLeaveNode(e))}function Kde(n){let e=[];return Yz(n,e),e}function Yz(n,e){for(let i=0;i<n.length;i++){let t=n[i];t instanceof vg?Yz(t.players,e):e.push(t)}}function Jde(n,e){let i=Object.keys(n),t=Object.keys(e);if(i.length!=t.length)return!1;for(let r=0;r<i.length;r++){let o=i[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function Nz(n,e,i){let t=i.get(n);if(!t)return!1;let r=e.get(n);return r?t.forEach(o=>r.add(o)):e.set(n,t),i.delete(n),!0}var Vf=class{constructor(e,i,t,r){this._driver=i,this._normalizer=t,this._triggerCache={},this.onRemovalComplete=(o,s)=>{},this._transitionEngine=new lI(e.body,i,t,r),this._timelineEngine=new aI(e.body,i,t),this._transitionEngine.onRemovalComplete=(o,s)=>this.onRemovalComplete(o,s)}registerTrigger(e,i,t,r,o){let s=e+"-"+r,a=this._triggerCache[s];if(!a){let c=[],l=[],d=Wz(this._driver,o,c,l);if(c.length)throw Jle(r,c);l.length&&void 0,a=Bde(r,d,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(i,r,a)}register(e,i){this._transitionEngine.register(e,i)}destroy(e,i){this._transitionEngine.destroy(e,i)}onInsert(e,i,t,r){this._transitionEngine.insertNode(e,i,t,r)}onRemove(e,i,t){this._transitionEngine.removeNode(e,i,t)}disableAnimations(e,i){this._transitionEngine.markElementAsDisabled(e,i)}process(e,i,t,r){if(t.charAt(0)=="@"){let[o,s]=Rz(t),a=r;this._timelineEngine.command(o,i,s,a)}else this._transitionEngine.trigger(e,i,t,r)}listen(e,i,t,r,o){if(t.charAt(0)=="@"){let[s,a]=Rz(t);return this._timelineEngine.listen(s,i,a,o)}return this._transitionEngine.listen(e,i,t,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function eue(n,e){let i=null,t=null;return Array.isArray(e)&&e.length?(i=YA(e[0]),e.length>1&&(t=YA(e[e.length-1]))):e instanceof Map&&(i=YA(e)),i||t?new dI(n,i,t):null}var Uf=class Uf{constructor(e,i,t){this._element=e,this._startStyles=i,this._endStyles=t,this._state=0;let r=Uf.initialStylesByElement.get(e);r||Uf.initialStylesByElement.set(e,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Ca(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ca(this._element,this._initialStyles),this._endStyles&&(Ca(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Uf.initialStylesByElement.delete(this._element),this._startStyles&&(uu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(uu(this._element,this._endStyles),this._endStyles=null),Ca(this._element,this._initialStyles),this._state=3)}};Uf.initialStylesByElement=new WeakMap;var dI=Uf;function YA(n){let e=null;return n.forEach((i,t)=>{tue(t)&&(e=e||new Map,e.set(t,i))}),e}function tue(n){return n==="display"||n==="position"}var _w=class{constructor(e,i,t,r){this.element=e,this.keyframes=i,this.options=t,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=t.duration,this._delay=t.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let i=()=>this._onFinish();this.domPlayer.addEventListener("finish",i),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",i)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let i=[];return e.forEach(t=>{i.push(Object.fromEntries(t))}),i}_triggerWebAnimation(e,i,t){return e.animate(this._convertKeyframesToObject(i),t)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((t,r)=>{r!=="offset"&&e.set(r,this._finished?t:bI(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let i=e==="start"?this._onStartFns:this._onDoneFns;i.forEach(t=>t()),i.length=0}},vw=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,i){return!1}containsElement(e,i){return Bz(e,i)}getParentElement(e){return mI(e)}query(e,i,t){return Uz(e,i,t)}computeStyle(e,i,t){return bI(e,i)}animate(e,i,t,r,o,s=[]){let a=r==0?"both":"forwards",c={duration:t,delay:r,fill:a};o&&(c.easing=o);let l=new Map,d=s.filter(f=>f instanceof _w);xde(t,r)&&d.forEach(f=>{f.currentSnapshot.forEach((p,b)=>l.set(b,p))});let u=_de(i).map(f=>new Map(f));u=wde(e,u,l);let h=eue(e,u);return new _w(e,u,c,h)}};var dw="@",Zz="@.disabled",yw=class{constructor(e,i,t,r){this.namespaceId=e,this.delegate=i,this.engine=t,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,i){return this.delegate.createElement(e,i)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,i){this.delegate.appendChild(e,i),this.engine.onInsert(this.namespaceId,i,e,!1)}insertBefore(e,i,t,r=!0){this.delegate.insertBefore(e,i,t),this.engine.onInsert(this.namespaceId,i,e,r)}removeChild(e,i,t){this.engine.onRemove(this.namespaceId,i,this.delegate)}selectRootElement(e,i){return this.delegate.selectRootElement(e,i)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,i,t,r){this.delegate.setAttribute(e,i,t,r)}removeAttribute(e,i,t){this.delegate.removeAttribute(e,i,t)}addClass(e,i){this.delegate.addClass(e,i)}removeClass(e,i){this.delegate.removeClass(e,i)}setStyle(e,i,t,r){this.delegate.setStyle(e,i,t,r)}removeStyle(e,i,t){this.delegate.removeStyle(e,i,t)}setProperty(e,i,t){i.charAt(0)==dw&&i==Zz?this.disableAnimations(e,!!t):this.delegate.setProperty(e,i,t)}setValue(e,i){this.delegate.setValue(e,i)}listen(e,i,t){return this.delegate.listen(e,i,t)}disableAnimations(e,i){this.engine.disableAnimations(e,i)}},uI=class extends yw{constructor(e,i,t,r,o){super(i,t,r,o),this.factory=e,this.namespaceId=i}setProperty(e,i,t){i.charAt(0)==dw?i.charAt(1)=="."&&i==Zz?(t=t===void 0?!0:!!t,this.disableAnimations(e,t)):this.engine.process(this.namespaceId,e,i.slice(1),t):this.delegate.setProperty(e,i,t)}listen(e,i,t){if(i.charAt(0)==dw){let r=iue(e),o=i.slice(1),s="";return o.charAt(0)!=dw&&([o,s]=nue(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,t,a)})}return this.delegate.listen(e,i,t)}};function iue(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function nue(n){let e=n.indexOf("."),i=n.substring(0,e),t=n.slice(e+1);return[i,t]}var xw=class{constructor(e,i,t){this.delegate=e,this.engine=i,this._zone=t,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(r,o)=>{let s=o?.parentNode(r);s&&o.removeChild(s,r)}}createRenderer(e,i){let t="",r=this.delegate.createRenderer(e,i);if(!e||!i?.data?.animation){let l=this._rendererCache,d=l.get(r);if(!d){let u=()=>l.delete(r);d=new yw(t,r,this.engine,u),l.set(r,d)}return d}let o=i.id,s=i.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(o,s,e,l.name,l)};return i.data.animation.forEach(a),new uI(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,t){if(e>=0&&e<this._microtaskId){this._zone.run(()=>i(t));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([i,t])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var oue=(()=>{let e=class e extends Vf{constructor(t,r,o){super(t,r,o,re(Bu,{optional:!0}))}ngOnDestroy(){this.flush()}};e.\u0275fac=function(r){return new(r||e)(le(_t),le(hu),le(fu))},e.\u0275prov=Me({token:e,factory:e.\u0275fac});let n=e;return n})();function sue(){return new fw}function aue(n,e,i){return new xw(n,e,i)}var Kz=[{provide:fu,useFactory:sue},{provide:Vf,useClass:oue},{provide:Zl,useFactory:aue,deps:[vv,Vf,Xe]}],Qz=[{provide:hu,useFactory:()=>new vw},{provide:Vn,useValue:"BrowserAnimations"},...Kz],cue=[{provide:hu,useClass:pI},{provide:Vn,useValue:"NoopAnimations"},...Kz],Jz=(()=>{let e=class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?cue:Qz}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ke({providers:Qz,imports:[xv]});let n=e;return n})();var e4=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e,bootstrap:[hz]}),e.\u0275inj=Ke({providers:[eU({fullLibraryLoader:()=>import("./chunk-A6DKN3TA.js")}),ba],imports:[xv,tz,tV,Mz,jV,iU,oU,Jz,uB,qg,pg,dz,bg,$g,gO]});let n=e;return n})();var t4={production:!0};t4.production&&void 0;MO().bootstrapModule(e4).catch(n=>console.error(n));
